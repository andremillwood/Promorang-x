var e=Object.defineProperty,t=(t,r,s)=>((t,r,s)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s)(t,"symbol"!=typeof r?r+"":r,s);function r(e,t){for(var r=0;r<t.length;r++){const s=t[r];if("string"!=typeof s&&!Array.isArray(s))for(const t in s)if("default"!==t&&!(t in e)){const r=Object.getOwnPropertyDescriptor(s,t);r&&Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:()=>s[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var s=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,s.get?s:{enumerable:!0,get:function(){return e[t]}})}),r}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var n,i,l={exports:{}},o={};function c(){if(n)return o;n=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,f={};function g(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||h}function b(){}function v(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=g.prototype;var y=v.prototype=new b;y.constructor=v,x(y,g.prototype),y.isPureReactComponent=!0;var j=Array.isArray,w=Object.prototype.hasOwnProperty,N={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function k(t,r,s){var a,n={},i=null,l=null;if(null!=r)for(a in void 0!==r.ref&&(l=r.ref),void 0!==r.key&&(i=""+r.key),r)w.call(r,a)&&!_.hasOwnProperty(a)&&(n[a]=r[a]);var o=arguments.length-2;if(1===o)n.children=s;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(t&&t.defaultProps)for(a in o=t.defaultProps)void 0===n[a]&&(n[a]=o[a]);return{$$typeof:e,type:t,key:i,ref:l,props:n,_owner:N.current}}function S(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var C=/\/+/g;function O(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(r,s,a,n,i){var l=typeof r;"undefined"!==l&&"boolean"!==l||(r=null);var o=!1;if(null===r)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(r.$$typeof){case e:case t:o=!0}}if(o)return i=i(o=r),r=""===n?"."+O(o,0):n,j(i)?(a="",null!=r&&(a=r.replace(C,"$&/")+"/"),E(i,s,a,"",function(e){return e})):null!=i&&(S(i)&&(i=function(t,r){return{$$typeof:e,type:t.type,key:r,ref:t.ref,props:t.props,_owner:t._owner}}(i,a+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+r)),s.push(i)),1;if(o=0,n=""===n?".":n+":",j(r))for(var c=0;c<r.length;c++){var d=n+O(l=r[c],c);o+=E(l,s,a,d,i)}else if(d=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=p&&e[p]||e["@@iterator"])?e:null}(r),"function"==typeof d)for(r=d.call(r),c=0;!(l=r.next()).done;)o+=E(l=l.value,s,a,d=n+O(l,c++),i);else if("object"===l)throw s=String(r),Error("Objects are not valid as a React child (found: "+("[object Object]"===s?"object with keys {"+Object.keys(r).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return o}function P(e,t,r){if(null==e)return e;var s=[],a=0;return E(e,s,"","",function(e){return t.call(r,e,a++)}),s}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},M={transition:null},D={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:M,ReactCurrentOwner:N};function I(){throw Error("act(...) is not supported in production builds of React.")}return o.Children={map:P,forEach:function(e,t,r){P(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},o.Component=g,o.Fragment=r,o.Profiler=a,o.PureComponent=v,o.StrictMode=s,o.Suspense=d,o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,o.act=I,o.cloneElement=function(t,r,s){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var a=x({},t.props),n=t.key,i=t.ref,l=t._owner;if(null!=r){if(void 0!==r.ref&&(i=r.ref,l=N.current),void 0!==r.key&&(n=""+r.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in r)w.call(r,c)&&!_.hasOwnProperty(c)&&(a[c]=void 0===r[c]&&void 0!==o?o[c]:r[c])}var c=arguments.length-2;if(1===c)a.children=s;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];a.children=o}return{$$typeof:e,type:t.type,key:n,ref:i,props:a,_owner:l}},o.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},o.createElement=k,o.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},o.createRef=function(){return{current:null}},o.forwardRef=function(e){return{$$typeof:c,render:e}},o.isValidElement=S,o.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:T}},o.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},o.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},o.unstable_act=I,o.useCallback=function(e,t){return A.current.useCallback(e,t)},o.useContext=function(e){return A.current.useContext(e)},o.useDebugValue=function(){},o.useDeferredValue=function(e){return A.current.useDeferredValue(e)},o.useEffect=function(e,t){return A.current.useEffect(e,t)},o.useId=function(){return A.current.useId()},o.useImperativeHandle=function(e,t,r){return A.current.useImperativeHandle(e,t,r)},o.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},o.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},o.useMemo=function(e,t){return A.current.useMemo(e,t)},o.useReducer=function(e,t,r){return A.current.useReducer(e,t,r)},o.useRef=function(e){return A.current.useRef(e)},o.useState=function(e){return A.current.useState(e)},o.useSyncExternalStore=function(e,t,r){return A.current.useSyncExternalStore(e,t,r)},o.useTransition=function(){return A.current.useTransition()},o.version="18.3.1",o}function d(){return i||(i=1,l.exports=c()),l.exports}var u=d();const m=s(u),p=r({__proto__:null,default:m},[u]);"undefined"!=typeof window&&(window.React=m);var h,x,f,g,b,v={},y={exports:{}},j={},w={exports:{}},N={};function _(){return x||(x=1,w.exports=(h||(h=1,function(e){function t(e,t){var r=e.length;e.push(t);e:for(;0<r;){var s=r-1>>>1,n=e[s];if(!(0<a(n,t)))break e;e[s]=t,e[r]=n,r=s}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var s=0,n=e.length,i=n>>>1;s<i;){var l=2*(s+1)-1,o=e[l],c=l+1,d=e[c];if(0>a(o,r))c<n&&0>a(d,o)?(e[s]=d,e[c]=r,s=c):(e[s]=o,e[l]=r,s=l);else{if(!(c<n&&0>a(d,r)))break e;e[s]=d,e[c]=r,s=c}}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var n=performance;e.unstable_now=function(){return n.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var o=[],c=[],d=1,u=null,m=3,p=!1,h=!1,x=!1,f="function"==typeof setTimeout?setTimeout:null,g="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var a=r(c);null!==a;){if(null===a.callback)s(c);else{if(!(a.startTime<=e))break;s(c),a.sortIndex=a.expirationTime,t(o,a)}a=r(c)}}function y(e){if(x=!1,v(e),!h)if(null!==r(o))h=!0,A(j);else{var t=r(c);null!==t&&M(y,t.startTime-e)}}function j(t,a){h=!1,x&&(x=!1,g(k),k=-1),p=!0;var n=m;try{for(v(a),u=r(o);null!==u&&(!(u.expirationTime>a)||t&&!O());){var i=u.callback;if("function"==typeof i){u.callback=null,m=u.priorityLevel;var l=i(u.expirationTime<=a);a=e.unstable_now(),"function"==typeof l?u.callback=l:u===r(o)&&s(o),v(a)}else s(o);u=r(o)}if(null!==u)var d=!0;else{var f=r(c);null!==f&&M(y,f.startTime-a),d=!1}return d}finally{u=null,m=n,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,N=!1,_=null,k=-1,S=5,C=-1;function O(){return!(e.unstable_now()-C<S)}function E(){if(null!==_){var t=e.unstable_now();C=t;var r=!0;try{r=_(!0,t)}finally{r?w():(N=!1,_=null)}}else N=!1}if("function"==typeof b)w=function(){b(E)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,T=P.port2;P.port1.onmessage=E,w=function(){T.postMessage(null)}}else w=function(){f(E,0)};function A(e){_=e,N||(N=!0,w())}function M(t,r){k=f(function(){t(e.unstable_now())},r)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){h||p||(h=!0,A(j))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(o)},e.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var r=m;m=t;try{return e()}finally{m=r}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=m;m=e;try{return t()}finally{m=r}},e.unstable_scheduleCallback=function(s,a,n){var i=e.unstable_now();switch(n="object"==typeof n&&null!==n&&"number"==typeof(n=n.delay)&&0<n?i+n:i,s){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return s={id:d++,callback:a,priorityLevel:s,startTime:n,expirationTime:l=n+l,sortIndex:-1},n>i?(s.sortIndex=n,t(c,s),null===r(o)&&s===r(c)&&(x?(g(k),k=-1):x=!0,M(y,n-i))):(s.sortIndex=l,t(o,s),h||p||(h=!0,A(j))),s},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(e){var t=m;return function(){var r=m;m=t;try{return e.apply(this,arguments)}finally{m=r}}}}(N)),N)),w.exports}function k(){if(f)return j;f=1;var e=d(),t=_();function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function n(e,t){i(e,t),i(e+"Capture",t)}function i(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var l=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),o=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},m={};function p(e,t,r,s,a,n,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=n,this.removeEmptyString=i}var h={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){h[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];h[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){h[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){h[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){h[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){h[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){h[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){h[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){h[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function b(e,t,r,s){var a=h.hasOwnProperty(t)?h[t]:null;(null!==a?0!==a.type:s||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,s){if(null==t||function(e,t,r,s){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,s))return!0;if(s)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,a,s)&&(r=null),s||null===a?function(e){return!!o.call(m,e)||!o.call(u,e)&&(c.test(e)?m[e]=!0:(u[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=null===r?3!==a.type&&"":r:(t=a.attributeName,s=a.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(a=a.type)||4===a&&!0===r?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x,g);h[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x,g);h[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x,g);h[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){h[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),h.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){h[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y=Symbol.for("react.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),O=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),I=Symbol.iterator;function R(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=I&&e[I]||e["@@iterator"])?e:null}var $,L=Object.assign;function F(e){if(void 0===$)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);$=t&&t[1]||""}return"\n"+$+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&"string"==typeof c.stack){for(var a=c.stack.split("\n"),n=s.stack.split("\n"),i=a.length-1,l=n.length-1;1<=i&&0<=l&&a[i]!==n[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==n[l]){if(1!==i||1!==l)do{if(i--,0>--l||a[i]!==n[l]){var o="\n"+a[i].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=i&&0<=l);break}}}finally{z=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case N:return"Fragment";case w:return"Portal";case S:return"Profiler";case k:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case O:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return q(e(t))}catch(r){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var a=r.get,n=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){s=""+e,n.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=V(e)?e.checked?"true":"false":e.value),(e=s)!==r&&(t.setValue(e),!0)}function Y(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var r=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Z(e,t){var r=null==t.defaultValue?"":t.defaultValue,s=null!=t.checked?t.checked:t.defaultChecked;r=K(null!=t.value?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Q(e,t);var r=K(t.value),s=t.type;if(null!=r)"number"===s?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===s||"reset"===s)return void e.removeAttribute("value");t.hasOwnProperty("value")?te(e,t.type,r):t.hasOwnProperty("defaultValue")&&te(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ee(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!("submit"!==s&&"reset"!==s||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function te(e,t,r){"number"===t&&Y(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var re=Array.isArray;function se(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+K(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(s&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ne(e,t){var s=t.value;if(null==s){if(s=t.children,t=t.defaultValue,null!=s){if(null!=t)throw Error(r(92));if(re(s)){if(1<s.length)throw Error(r(93));s=s[0]}t=s}null==t&&(t=""),s=t}e._wrapperState={initialValue:K(s)}}function ie(e,t){var r=K(t.value),s=K(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=s&&(e.defaultValue=""+s)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var de,ue,me=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((de=de||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=de.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function pe(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xe=["Webkit","ms","Moz","O"];function fe(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var s=0===r.indexOf("--"),a=fe(r,t[r],s);"float"===r&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}Object.keys(he).forEach(function(e){xe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var be=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(be[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(r(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var je=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,_e=null,ke=null;function Se(e){if(e=va(e)){if("function"!=typeof Ne)throw Error(r(280));var t=e.stateNode;t&&(t=ja(t),Ne(e.stateNode,e.type,t))}}function Ce(e){_e?ke?ke.push(e):ke=[e]:_e=e}function Oe(){if(_e){var e=_e,t=ke;if(ke=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ee(e,t){return e(t)}function Pe(){}var Te=!1;function Ae(e,t,r){if(Te)return e(t,r);Te=!0;try{return Ee(e,t,r)}finally{Te=!1,(null!==_e||null!==ke)&&(Pe(),Oe())}}function Me(e,t){var s=e.stateNode;if(null===s)return null;var a=ja(s);if(null===a)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(s&&"function"!=typeof s)throw Error(r(231,t,typeof s));return s}var De=!1;if(l)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){De=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ue){De=!1}function Re(e,t,r,s,a,n,i,l,o){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var $e=!1,Le=null,Fe=!1,ze=null,Ue={onError:function(e){$e=!0,Le=e}};function Be(e,t,r,s,a,n,i,l,o){$e=!1,Le=null,Re.apply(Ue,arguments)}function qe(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(qe(e)!==e)throw Error(r(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(r(188));return t!==e?null:e}for(var s=e,a=t;;){var n=s.return;if(null===n)break;var i=n.alternate;if(null===i){if(null!==(a=n.return)){s=a;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===s)return Ke(n),e;if(i===a)return Ke(n),t;i=i.sibling}throw Error(r(188))}if(s.return!==a.return)s=n,a=i;else{for(var l=!1,o=n.child;o;){if(o===s){l=!0,s=n,a=i;break}if(o===a){l=!0,a=n,s=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===s){l=!0,s=i,a=n;break}if(o===a){l=!0,a=i,s=n;break}o=o.sibling}if(!l)throw Error(r(189))}}if(s.alternate!==a)throw Error(r(190))}if(3!==s.tag)throw Error(r(188));return s.stateNode.current===s?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=t.unstable_scheduleCallback,Ye=t.unstable_cancelCallback,Je=t.unstable_shouldYield,Ze=t.unstable_requestPaint,Qe=t.unstable_now,Xe=t.unstable_getCurrentPriorityLevel,et=t.unstable_ImmediatePriority,tt=t.unstable_UserBlockingPriority,rt=t.unstable_NormalPriority,st=t.unstable_LowPriority,at=t.unstable_IdlePriority,nt=null,it=null;var lt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/ct|0)|0},ot=Math.log,ct=Math.LN2;var dt=64,ut=4194304;function mt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var r=e.pendingLanes;if(0===r)return 0;var s=0,a=e.suspendedLanes,n=e.pingedLanes,i=268435455&r;if(0!==i){var l=i&~a;0!==l?s=mt(l):0!==(n&=i)&&(s=mt(n))}else 0!==(i=r&~a)?s=mt(i):0!==n&&(s=mt(n));if(0===s)return 0;if(0!==t&&t!==s&&0===(t&a)&&((a=s&-s)>=(n=t&-t)||16===a&&4194240&n))return t;if(4&s&&(s|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=s;0<t;)a=1<<(r=31-lt(t)),s|=e[r],t&=~a;return s}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function xt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=dt;return!(4194240&(dt<<=1))&&(dt=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function bt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-lt(t)]=r}function vt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-lt(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var yt=0;function jt(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var wt,Nt,_t,kt,St,Ct=!1,Ot=[],Et=null,Pt=null,Tt=null,At=new Map,Mt=new Map,Dt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function $t(e,t,r,s,a,n){return null===e||e.nativeEvent!==n?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:n,targetContainers:[a]},null!==t&&(null!==(t=va(t))&&Nt(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Lt(e){var t=ba(e.target);if(null!==t){var r=qe(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=We(r)))return e.blockedOn=t,void St(e.priority,function(){_t(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=va(r))&&Nt(t),e.blockedOn=r,!1;var s=new(r=e.nativeEvent).constructor(r.type,r);je=s,r.target.dispatchEvent(s),je=null,t.shift()}return!0}function zt(e,t,r){Ft(e)&&r.delete(t)}function Ut(){Ct=!1,null!==Et&&Ft(Et)&&(Et=null),null!==Pt&&Ft(Pt)&&(Pt=null),null!==Tt&&Ft(Tt)&&(Tt=null),At.forEach(zt),Mt.forEach(zt)}function Bt(e,r){e.blockedOn===r&&(e.blockedOn=null,Ct||(Ct=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ut)))}function qt(e){function t(t){return Bt(t,e)}if(0<Ot.length){Bt(Ot[0],e);for(var r=1;r<Ot.length;r++){var s=Ot[r];s.blockedOn===e&&(s.blockedOn=null)}}for(null!==Et&&Bt(Et,e),null!==Pt&&Bt(Pt,e),null!==Tt&&Bt(Tt,e),At.forEach(t),Mt.forEach(t),r=0;r<Dt.length;r++)(s=Dt[r]).blockedOn===e&&(s.blockedOn=null);for(;0<Dt.length&&null===(r=Dt[0]).blockedOn;)Lt(r),null===r.blockedOn&&Dt.shift()}var Wt=v.ReactCurrentBatchConfig,Kt=!0;function Vt(e,t,r,s){var a=yt,n=Wt.transition;Wt.transition=null;try{yt=1,Gt(e,t,r,s)}finally{yt=a,Wt.transition=n}}function Ht(e,t,r,s){var a=yt,n=Wt.transition;Wt.transition=null;try{yt=4,Gt(e,t,r,s)}finally{yt=a,Wt.transition=n}}function Gt(e,t,r,s){if(Kt){var a=Jt(e,t,r,s);if(null===a)Ws(e,t,s,Yt,r),Rt(e,s);else if(function(e,t,r,s,a){switch(t){case"focusin":return Et=$t(Et,e,t,r,s,a),!0;case"dragenter":return Pt=$t(Pt,e,t,r,s,a),!0;case"mouseover":return Tt=$t(Tt,e,t,r,s,a),!0;case"pointerover":var n=a.pointerId;return At.set(n,$t(At.get(n)||null,e,t,r,s,a)),!0;case"gotpointercapture":return n=a.pointerId,Mt.set(n,$t(Mt.get(n)||null,e,t,r,s,a)),!0}return!1}(a,e,t,r,s))s.stopPropagation();else if(Rt(e,s),4&t&&-1<It.indexOf(e)){for(;null!==a;){var n=va(a);if(null!==n&&wt(n),null===(n=Jt(e,t,r,s))&&Ws(e,t,s,Yt,r),n===a)break;a=n}null!==a&&s.stopPropagation()}else Ws(e,t,s,null,r)}}var Yt=null;function Jt(e,t,r,s){if(Yt=null,null!==(e=ba(e=we(s))))if(null===(t=qe(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case et:return 1;case tt:return 4;case rt:case st:return 16;case at:return 536870912;default:return 16}default:return 16}}var Qt=null,Xt=null,er=null;function tr(){if(er)return er;var e,t,r=Xt,s=r.length,a="value"in Qt?Qt.value:Qt.textContent,n=a.length;for(e=0;e<s&&r[e]===a[e];e++);var i=s-e;for(t=1;t<=i&&r[s-t]===a[n-t];t++);return er=a.slice(e,1<t?1-t:void 0)}function rr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function sr(){return!0}function ar(){return!1}function nr(e){function t(t,r,s,a,n){for(var i in this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=n,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?sr:ar,this.isPropagationStopped=ar,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=sr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=sr)},persist:function(){},isPersistent:sr}),t}var ir,lr,or,cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dr=nr(cr),ur=L({},cr,{view:0,detail:0}),mr=nr(ur),pr=L({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(ir=e.screenX-or.screenX,lr=e.screenY-or.screenY):lr=ir=0,or=e),ir)},movementY:function(e){return"movementY"in e?e.movementY:lr}}),hr=nr(pr),xr=nr(L({},pr,{dataTransfer:0})),fr=nr(L({},ur,{relatedTarget:0})),gr=nr(L({},cr,{animationName:0,elapsedTime:0,pseudoElement:0})),br=L({},cr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vr=nr(br),yr=nr(L({},cr,{data:0})),jr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _r(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nr[e])&&!!t[e]}function kr(){return _r}var Sr=L({},ur,{key:function(e){if(e.key){var t=jr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(e){return"keypress"===e.type?rr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cr=nr(Sr),Or=nr(L({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Er=nr(L({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr})),Pr=nr(L({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tr=L({},pr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ar=nr(Tr),Mr=[9,13,27,32],Dr=l&&"CompositionEvent"in window,Ir=null;l&&"documentMode"in document&&(Ir=document.documentMode);var Rr=l&&"TextEvent"in window&&!Ir,$r=l&&(!Dr||Ir&&8<Ir&&11>=Ir),Lr=String.fromCharCode(32),Fr=!1;function zr(e,t){switch(e){case"keyup":return-1!==Mr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Br=!1;var qr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qr[e.type]:"textarea"===t}function Kr(e,t,r,s){Ce(s),0<(t=Vs(t,"onChange")).length&&(r=new dr("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Vr=null,Hr=null;function Gr(e){Ls(e,0)}function Yr(e){if(G(ya(e)))return e}function Jr(e,t){if("change"===e)return t}var Zr=!1;if(l){var Qr;if(l){var Xr="oninput"in document;if(!Xr){var es=document.createElement("div");es.setAttribute("oninput","return;"),Xr="function"==typeof es.oninput}Qr=Xr}else Qr=!1;Zr=Qr&&(!document.documentMode||9<document.documentMode)}function ts(){Vr&&(Vr.detachEvent("onpropertychange",rs),Hr=Vr=null)}function rs(e){if("value"===e.propertyName&&Yr(Hr)){var t=[];Kr(t,Hr,e,we(e)),Ae(Gr,t)}}function ss(e,t,r){"focusin"===e?(ts(),Hr=r,(Vr=t).attachEvent("onpropertychange",rs)):"focusout"===e&&ts()}function as(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yr(Hr)}function ns(e,t){if("click"===e)return Yr(t)}function is(e,t){if("input"===e||"change"===e)return Yr(t)}var ls="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function os(e,t){if(ls(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!o.call(t,a)||!ls(e[a],t[a]))return!1}return!0}function cs(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ds(e,t){var r,s=cs(e);for(e=0;s;){if(3===s.nodeType){if(r=e+s.textContent.length,e<=t&&r>=t)return{node:s,offset:t-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=cs(s)}}function us(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?us(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ms(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(s){r=!1}if(!r)break;t=Y((e=t.contentWindow).document)}return t}function ps(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hs(e){var t=ms(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&us(r.ownerDocument.documentElement,r)){if(null!==s&&ps(r))if(t=s.start,void 0===(e=s.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,n=Math.min(s.start,a);s=void 0===s.end?n:Math.min(s.end,a),!e.extend&&n>s&&(a=s,s=n,n=a),a=ds(r,n);var i=ds(r,s);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),n>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var xs=l&&"documentMode"in document&&11>=document.documentMode,fs=null,gs=null,bs=null,vs=!1;function ys(e,t,r){var s=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;vs||null==fs||fs!==Y(s)||("selectionStart"in(s=fs)&&ps(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},bs&&os(bs,s)||(bs=s,0<(s=Vs(gs,"onSelect")).length&&(t=new dr("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=fs)))}function js(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ws={animationend:js("Animation","AnimationEnd"),animationiteration:js("Animation","AnimationIteration"),animationstart:js("Animation","AnimationStart"),transitionend:js("Transition","TransitionEnd")},Ns={},_s={};function ks(e){if(Ns[e])return Ns[e];if(!ws[e])return e;var t,r=ws[e];for(t in r)if(r.hasOwnProperty(t)&&t in _s)return Ns[e]=r[t];return e}l&&(_s=document.createElement("div").style,"AnimationEvent"in window||(delete ws.animationend.animation,delete ws.animationiteration.animation,delete ws.animationstart.animation),"TransitionEvent"in window||delete ws.transitionend.transition);var Ss=ks("animationend"),Cs=ks("animationiteration"),Os=ks("animationstart"),Es=ks("transitionend"),Ps=new Map,Ts="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(e,t){Ps.set(e,t),n(t,[e])}for(var Ms=0;Ms<Ts.length;Ms++){var Ds=Ts[Ms];As(Ds.toLowerCase(),"on"+(Ds[0].toUpperCase()+Ds.slice(1)))}As(Ss,"onAnimationEnd"),As(Cs,"onAnimationIteration"),As(Os,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(Es,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),n("onBeforeInput",["compositionend","keypress","textInput","paste"]),n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rs=new Set("cancel close invalid load scroll toggle".split(" ").concat(Is));function $s(e,t,s){var a=e.type||"unknown-event";e.currentTarget=s,function(e,t,s,a,n,i,l,o,c){if(Be.apply(this,arguments),$e){if(!$e)throw Error(r(198));var d=Le;$e=!1,Le=null,Fe||(Fe=!0,ze=d)}}(a,t,void 0,e),e.currentTarget=null}function Ls(e,t){t=!!(4&t);for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var n=void 0;if(t)for(var i=s.length-1;0<=i;i--){var l=s[i],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==n&&a.isPropagationStopped())break e;$s(a,l,c),n=o}else for(i=0;i<s.length;i++){if(o=(l=s[i]).instance,c=l.currentTarget,l=l.listener,o!==n&&a.isPropagationStopped())break e;$s(a,l,c),n=o}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function Fs(e,t){var r=t[xa];void 0===r&&(r=t[xa]=new Set);var s=e+"__bubble";r.has(s)||(qs(t,e,2,!1),r.add(s))}function zs(e,t,r){var s=0;t&&(s|=4),qs(r,e,s,t)}var Us="_reactListening"+Math.random().toString(36).slice(2);function Bs(e){if(!e[Us]){e[Us]=!0,s.forEach(function(t){"selectionchange"!==t&&(Rs.has(t)||zs(t,!1,e),zs(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Us]||(t[Us]=!0,zs("selectionchange",!1,t))}}function qs(e,t,r,s){switch(Zt(t)){case 1:var a=Vt;break;case 4:a=Ht;break;default:a=Gt}r=a.bind(null,t,r,e),a=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),s?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Ws(e,t,r,s,a){var n=s;if(!(1&t||2&t||null===s))e:for(;;){if(null===s)return;var i=s.tag;if(3===i||4===i){var l=s.stateNode.containerInfo;if(l===a||8===l.nodeType&&l.parentNode===a)break;if(4===i)for(i=s.return;null!==i;){var o=i.tag;if((3===o||4===o)&&((o=i.stateNode.containerInfo)===a||8===o.nodeType&&o.parentNode===a))return;i=i.return}for(;null!==l;){if(null===(i=ba(l)))return;if(5===(o=i.tag)||6===o){s=n=i;continue e}l=l.parentNode}}s=s.return}Ae(function(){var s=n,a=we(r),i=[];e:{var l=Ps.get(e);if(void 0!==l){var o=dr,c=e;switch(e){case"keypress":if(0===rr(r))break e;case"keydown":case"keyup":o=Cr;break;case"focusin":c="focus",o=fr;break;case"focusout":c="blur",o=fr;break;case"beforeblur":case"afterblur":o=fr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=hr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=xr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=Er;break;case Ss:case Cs:case Os:o=gr;break;case Es:o=Pr;break;case"scroll":o=mr;break;case"wheel":o=Ar;break;case"copy":case"cut":case"paste":o=vr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=Or}var d=!!(4&t),u=!d&&"scroll"===e,m=d?null!==l?l+"Capture":null:l;d=[];for(var p,h=s;null!==h;){var x=(p=h).stateNode;if(5===p.tag&&null!==x&&(p=x,null!==m&&(null!=(x=Me(h,m))&&d.push(Ks(h,x,p)))),u)break;h=h.return}0<d.length&&(l=new o(l,c,null,r,a),i.push({event:l,listeners:d}))}}if(!(7&t)){if(o="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||r===je||!(c=r.relatedTarget||r.fromElement)||!ba(c)&&!c[ha])&&(o||l)&&(l=a.window===a?a:(l=a.ownerDocument)?l.defaultView||l.parentWindow:window,o?(o=s,null!==(c=(c=r.relatedTarget||r.toElement)?ba(c):null)&&(c!==(u=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(o=null,c=s),o!==c)){if(d=hr,x="onMouseLeave",m="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(d=Or,x="onPointerLeave",m="onPointerEnter",h="pointer"),u=null==o?l:ya(o),p=null==c?l:ya(c),(l=new d(x,h+"leave",o,r,a)).target=u,l.relatedTarget=p,x=null,ba(a)===s&&((d=new d(m,h+"enter",c,r,a)).target=p,d.relatedTarget=u,x=d),u=x,o&&c)e:{for(m=c,h=0,p=d=o;p;p=Hs(p))h++;for(p=0,x=m;x;x=Hs(x))p++;for(;0<h-p;)d=Hs(d),h--;for(;0<p-h;)m=Hs(m),p--;for(;h--;){if(d===m||null!==m&&d===m.alternate)break e;d=Hs(d),m=Hs(m)}d=null}else d=null;null!==o&&Gs(i,l,o,d,!1),null!==c&&null!==u&&Gs(i,u,c,d,!0)}if("select"===(o=(l=s?ya(s):window).nodeName&&l.nodeName.toLowerCase())||"input"===o&&"file"===l.type)var f=Jr;else if(Wr(l))if(Zr)f=is;else{f=as;var g=ss}else(o=l.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(f=ns);switch(f&&(f=f(e,s))?Kr(i,f,r,a):(g&&g(e,l,s),"focusout"===e&&(g=l._wrapperState)&&g.controlled&&"number"===l.type&&te(l,"number",l.value)),g=s?ya(s):window,e){case"focusin":(Wr(g)||"true"===g.contentEditable)&&(fs=g,gs=s,bs=null);break;case"focusout":bs=gs=fs=null;break;case"mousedown":vs=!0;break;case"contextmenu":case"mouseup":case"dragend":vs=!1,ys(i,r,a);break;case"selectionchange":if(xs)break;case"keydown":case"keyup":ys(i,r,a)}var b;if(Dr)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Br?zr(e,r)&&(v="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(v="onCompositionStart");v&&($r&&"ko"!==r.locale&&(Br||"onCompositionStart"!==v?"onCompositionEnd"===v&&Br&&(b=tr()):(Xt="value"in(Qt=a)?Qt.value:Qt.textContent,Br=!0)),0<(g=Vs(s,v)).length&&(v=new yr(v,e,null,r,a),i.push({event:v,listeners:g}),b?v.data=b:null!==(b=Ur(r))&&(v.data=b))),(b=Rr?function(e,t){switch(e){case"compositionend":return Ur(t);case"keypress":return 32!==t.which?null:(Fr=!0,Lr);case"textInput":return(e=t.data)===Lr&&Fr?null:e;default:return null}}(e,r):function(e,t){if(Br)return"compositionend"===e||!Dr&&zr(e,t)?(e=tr(),er=Xt=Qt=null,Br=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $r&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(s=Vs(s,"onBeforeInput")).length&&(a=new yr("onBeforeInput","beforeinput",null,r,a),i.push({event:a,listeners:s}),a.data=b))}Ls(i,t)})}function Ks(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Vs(e,t){for(var r=t+"Capture",s=[];null!==e;){var a=e,n=a.stateNode;5===a.tag&&null!==n&&(a=n,null!=(n=Me(e,r))&&s.unshift(Ks(e,n,a)),null!=(n=Me(e,t))&&s.push(Ks(e,n,a))),e=e.return}return s}function Hs(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gs(e,t,r,s,a){for(var n=t._reactName,i=[];null!==r&&r!==s;){var l=r,o=l.alternate,c=l.stateNode;if(null!==o&&o===s)break;5===l.tag&&null!==c&&(l=c,a?null!=(o=Me(r,n))&&i.unshift(Ks(r,o,l)):a||null!=(o=Me(r,n))&&i.push(Ks(r,o,l))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var Ys=/\r\n?/g,Js=/\u0000|\uFFFD/g;function Zs(e){return("string"==typeof e?e:""+e).replace(Ys,"\n").replace(Js,"")}function Qs(e,t,s){if(t=Zs(t),Zs(e)!==t&&s)throw Error(r(425))}function Xs(){}var ea=null,ta=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sa="function"==typeof setTimeout?setTimeout:void 0,aa="function"==typeof clearTimeout?clearTimeout:void 0,na="function"==typeof Promise?Promise:void 0,ia="function"==typeof queueMicrotask?queueMicrotask:void 0!==na?function(e){return na.resolve(null).then(e).catch(la)}:sa;function la(e){setTimeout(function(){throw e})}function oa(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0===s)return e.removeChild(a),void qt(t);s--}else"$"!==r&&"$?"!==r&&"$!"!==r||s++;r=a}while(r);qt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var ua=Math.random().toString(36).slice(2),ma="__reactFiber$"+ua,pa="__reactProps$"+ua,ha="__reactContainer$"+ua,xa="__reactEvents$"+ua,fa="__reactListeners$"+ua,ga="__reactHandles$"+ua;function ba(e){var t=e[ma];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ha]||r[ma]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=da(e);null!==e;){if(r=e[ma])return r;e=da(e)}return t}r=(e=r).parentNode}return null}function va(e){return!(e=e[ma]||e[ha])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ya(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function ja(e){return e[pa]||null}var wa=[],Na=-1;function _a(e){return{current:e}}function ka(e){0>Na||(e.current=wa[Na],wa[Na]=null,Na--)}function Sa(e,t){Na++,wa[Na]=e.current,e.current=t}var Ca={},Oa=_a(Ca),Ea=_a(!1),Pa=Ca;function Ta(e,t){var r=e.type.contextTypes;if(!r)return Ca;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a,n={};for(a in r)n[a]=t[a];return s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Aa(e){return null!=(e=e.childContextTypes)}function Ma(){ka(Ea),ka(Oa)}function Da(e,t,s){if(Oa.current!==Ca)throw Error(r(168));Sa(Oa,t),Sa(Ea,s)}function Ia(e,t,s){var a=e.stateNode;if(t=t.childContextTypes,"function"!=typeof a.getChildContext)return s;for(var n in a=a.getChildContext())if(!(n in t))throw Error(r(108,W(e)||"Unknown",n));return L({},s,a)}function Ra(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ca,Pa=Oa.current,Sa(Oa,e),Sa(Ea,Ea.current),!0}function $a(e,t,s){var a=e.stateNode;if(!a)throw Error(r(169));s?(e=Ia(e,t,Pa),a.__reactInternalMemoizedMergedChildContext=e,ka(Ea),ka(Oa),Sa(Oa,e)):ka(Ea),Sa(Ea,s)}var La=null,Fa=!1,za=!1;function Ua(e){null===La?La=[e]:La.push(e)}function Ba(){if(!za&&null!==La){za=!0;var e=0,t=yt;try{var r=La;for(yt=1;e<r.length;e++){var s=r[e];do{s=s(!0)}while(null!==s)}La=null,Fa=!1}catch(dF){throw null!==La&&(La=La.slice(e+1)),Ge(et,Ba),dF}finally{yt=t,za=!1}}return null}var qa=[],Wa=0,Ka=null,Va=0,Ha=[],Ga=0,Ya=null,Ja=1,Za="";function Qa(e,t){qa[Wa++]=Va,qa[Wa++]=Ka,Ka=e,Va=t}function Xa(e,t,r){Ha[Ga++]=Ja,Ha[Ga++]=Za,Ha[Ga++]=Ya,Ya=e;var s=Ja;e=Za;var a=32-lt(s)-1;s&=~(1<<a),r+=1;var n=32-lt(t)+a;if(30<n){var i=a-a%5;n=(s&(1<<i)-1).toString(32),s>>=i,a-=i,Ja=1<<32-lt(t)+a|r<<a|s,Za=n+e}else Ja=1<<n|r<<a|s,Za=e}function en(e){null!==e.return&&(Qa(e,1),Xa(e,1,0))}function tn(e){for(;e===Ka;)Ka=qa[--Wa],qa[Wa]=null,Va=qa[--Wa],qa[Wa]=null;for(;e===Ya;)Ya=Ha[--Ga],Ha[Ga]=null,Za=Ha[--Ga],Ha[Ga]=null,Ja=Ha[--Ga],Ha[Ga]=null}var rn=null,sn=null,an=!1,nn=null;function ln(e,t){var r=Ac(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function on(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rn=e,sn=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rn=e,sn=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ya?{id:Ja,overflow:Za}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Ac(18,null,null,0)).stateNode=t,r.return=e,e.child=r,rn=e,sn=null,!0);default:return!1}}function cn(e){return!(!(1&e.mode)||128&e.flags)}function dn(e){if(an){var t=sn;if(t){var s=t;if(!on(e,t)){if(cn(e))throw Error(r(418));t=ca(s.nextSibling);var a=rn;t&&on(e,t)?ln(a,s):(e.flags=-4097&e.flags|2,an=!1,rn=e)}}else{if(cn(e))throw Error(r(418));e.flags=-4097&e.flags|2,an=!1,rn=e}}}function un(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rn=e}function mn(e){if(e!==rn)return!1;if(!an)return un(e),an=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=sn)){if(cn(e))throw pn(),Error(r(418));for(;t;)ln(e,t),t=ca(t.nextSibling)}if(un(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var s=e.data;if("/$"===s){if(0===t){sn=ca(e.nextSibling);break e}t--}else"$"!==s&&"$!"!==s&&"$?"!==s||t++}e=e.nextSibling}sn=null}}else sn=rn?ca(e.stateNode.nextSibling):null;return!0}function pn(){for(var e=sn;e;)e=ca(e.nextSibling)}function hn(){sn=rn=null,an=!1}function xn(e){null===nn?nn=[e]:nn.push(e)}var fn=v.ReactCurrentBatchConfig;function gn(e,t,s){if(null!==(e=s.ref)&&"function"!=typeof e&&"object"!=typeof e){if(s._owner){if(s=s._owner){if(1!==s.tag)throw Error(r(309));var a=s.stateNode}if(!a)throw Error(r(147,e));var n=a,i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=n.refs;null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(r(284));if(!s._owner)throw Error(r(290,e))}return e}function bn(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vn(e){return(0,e._init)(e._payload)}function yn(e){function t(t,r){if(e){var s=t.deletions;null===s?(t.deletions=[r],t.flags|=16):s.push(r)}}function s(r,s){if(!e)return null;for(;null!==s;)t(r,s),s=s.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function i(t,r,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<r?(t.flags|=2,r):s:(t.flags|=2,r):(t.flags|=1048576,r)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,r,s){return null===t||6!==t.tag?((t=Lc(r,e.mode,s)).return=e,t):((t=n(t,r)).return=e,t)}function c(e,t,r,s){var a=r.type;return a===N?u(e,t,r.props.children,s,r.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===M&&vn(a)===t.type)?((s=n(t,r.props)).ref=gn(e,t,r),s.return=e,s):((s=Ic(r.type,r.key,r.props,null,e.mode,s)).ref=gn(e,t,r),s.return=e,s)}function d(e,t,r,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Fc(r,e.mode,s)).return=e,t):((t=n(t,r.children||[])).return=e,t)}function u(e,t,r,s,a){return null===t||7!==t.tag?((t=Rc(r,e.mode,s,a)).return=e,t):((t=n(t,r)).return=e,t)}function m(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Lc(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case y:return(r=Ic(t.type,t.key,t.props,null,e.mode,r)).ref=gn(e,null,t),r.return=e,r;case w:return(t=Fc(t,e.mode,r)).return=e,t;case M:return m(e,(0,t._init)(t._payload),r)}if(re(t)||R(t))return(t=Rc(t,e.mode,r,null)).return=e,t;bn(e,t)}return null}function p(e,t,r,s){var a=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r)return null!==a?null:o(e,t,""+r,s);if("object"==typeof r&&null!==r){switch(r.$$typeof){case y:return r.key===a?c(e,t,r,s):null;case w:return r.key===a?d(e,t,r,s):null;case M:return p(e,t,(a=r._init)(r._payload),s)}if(re(r)||R(r))return null!==a?null:u(e,t,r,s,null);bn(e,r)}return null}function h(e,t,r,s,a){if("string"==typeof s&&""!==s||"number"==typeof s)return o(t,e=e.get(r)||null,""+s,a);if("object"==typeof s&&null!==s){switch(s.$$typeof){case y:return c(t,e=e.get(null===s.key?r:s.key)||null,s,a);case w:return d(t,e=e.get(null===s.key?r:s.key)||null,s,a);case M:return h(e,t,r,(0,s._init)(s._payload),a)}if(re(s)||R(s))return u(t,e=e.get(r)||null,s,a,null);bn(t,s)}return null}return function o(c,d,u,x){if("object"==typeof u&&null!==u&&u.type===N&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case y:e:{for(var f=u.key,g=d;null!==g;){if(g.key===f){if((f=u.type)===N){if(7===g.tag){s(c,g.sibling),(d=n(g,u.props.children)).return=c,c=d;break e}}else if(g.elementType===f||"object"==typeof f&&null!==f&&f.$$typeof===M&&vn(f)===g.type){s(c,g.sibling),(d=n(g,u.props)).ref=gn(c,g,u),d.return=c,c=d;break e}s(c,g);break}t(c,g),g=g.sibling}u.type===N?((d=Rc(u.props.children,c.mode,x,u.key)).return=c,c=d):((x=Ic(u.type,u.key,u.props,null,c.mode,x)).ref=gn(c,d,u),x.return=c,c=x)}return l(c);case w:e:{for(g=u.key;null!==d;){if(d.key===g){if(4===d.tag&&d.stateNode.containerInfo===u.containerInfo&&d.stateNode.implementation===u.implementation){s(c,d.sibling),(d=n(d,u.children||[])).return=c,c=d;break e}s(c,d);break}t(c,d),d=d.sibling}(d=Fc(u,c.mode,x)).return=c,c=d}return l(c);case M:return o(c,d,(g=u._init)(u._payload),x)}if(re(u))return function(r,n,l,o){for(var c=null,d=null,u=n,x=n=0,f=null;null!==u&&x<l.length;x++){u.index>x?(f=u,u=null):f=u.sibling;var g=p(r,u,l[x],o);if(null===g){null===u&&(u=f);break}e&&u&&null===g.alternate&&t(r,u),n=i(g,n,x),null===d?c=g:d.sibling=g,d=g,u=f}if(x===l.length)return s(r,u),an&&Qa(r,x),c;if(null===u){for(;x<l.length;x++)null!==(u=m(r,l[x],o))&&(n=i(u,n,x),null===d?c=u:d.sibling=u,d=u);return an&&Qa(r,x),c}for(u=a(r,u);x<l.length;x++)null!==(f=h(u,r,x,l[x],o))&&(e&&null!==f.alternate&&u.delete(null===f.key?x:f.key),n=i(f,n,x),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach(function(e){return t(r,e)}),an&&Qa(r,x),c}(c,d,u,x);if(R(u))return function(n,l,o,c){var d=R(o);if("function"!=typeof d)throw Error(r(150));if(null==(o=d.call(o)))throw Error(r(151));for(var u=d=null,x=l,f=l=0,g=null,b=o.next();null!==x&&!b.done;f++,b=o.next()){x.index>f?(g=x,x=null):g=x.sibling;var v=p(n,x,b.value,c);if(null===v){null===x&&(x=g);break}e&&x&&null===v.alternate&&t(n,x),l=i(v,l,f),null===u?d=v:u.sibling=v,u=v,x=g}if(b.done)return s(n,x),an&&Qa(n,f),d;if(null===x){for(;!b.done;f++,b=o.next())null!==(b=m(n,b.value,c))&&(l=i(b,l,f),null===u?d=b:u.sibling=b,u=b);return an&&Qa(n,f),d}for(x=a(n,x);!b.done;f++,b=o.next())null!==(b=h(x,n,f,b.value,c))&&(e&&null!==b.alternate&&x.delete(null===b.key?f:b.key),l=i(b,l,f),null===u?d=b:u.sibling=b,u=b);return e&&x.forEach(function(e){return t(n,e)}),an&&Qa(n,f),d}(c,d,u,x);bn(c,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==d&&6===d.tag?(s(c,d.sibling),(d=n(d,u)).return=c,c=d):(s(c,d),(d=Lc(u,c.mode,x)).return=c,c=d),l(c)):s(c,d)}}var jn=yn(!0),wn=yn(!1),Nn=_a(null),_n=null,kn=null,Sn=null;function Cn(){Sn=kn=_n=null}function On(e){var t=Nn.current;ka(Nn),e._currentValue=t}function En(e,t,r){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Pn(e,t){_n=e,Sn=kn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vl=!0),e.firstContext=null)}function Tn(e){var t=e._currentValue;if(Sn!==e)if(e={context:e,memoizedValue:t,next:null},null===kn){if(null===_n)throw Error(r(308));kn=e,_n.dependencies={lanes:0,firstContext:e}}else kn=kn.next=e;return t}var An=null;function Mn(e){null===An?An=[e]:An.push(e)}function Dn(e,t,r,s){var a=t.interleaved;return null===a?(r.next=r,Mn(t)):(r.next=a.next,a.next=r),t.interleaved=r,In(e,s)}function In(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Rn=!1;function $n(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ln(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zn(e,t,r){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,2&Eo){var a=s.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),s.pending=t,In(e,r)}return null===(a=s.interleaved)?(t.next=t,Mn(s)):(t.next=a.next,a.next=t),s.interleaved=t,In(e,r)}function Un(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&r)){var s=t.lanes;r|=s&=e.pendingLanes,t.lanes=r,vt(e,r)}}function Bn(e,t){var r=e.updateQueue,s=e.alternate;if(null!==s&&r===(s=s.updateQueue)){var a=null,n=null;if(null!==(r=r.firstBaseUpdate)){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===n?a=n=i:n=n.next=i,r=r.next}while(null!==r);null===n?a=n=t:n=n.next=t}else a=n=t;return r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:n,shared:s.shared,effects:s.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function qn(e,t,r,s){var a=e.updateQueue;Rn=!1;var n=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var o=l,c=o.next;o.next=null,null===i?n=c:i.next=c,i=o;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(null!==n){var u=a.baseState;for(i=0,d=c=o=null,l=n;;){var m=l.lane,p=l.eventTime;if((s&m)===m){null!==d&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var h=e,x=l;switch(m=t,p=r,x.tag){case 1:if("function"==typeof(h=x.payload)){u=h.call(p,u,m);break e}u=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null==(m="function"==typeof(h=x.payload)?h.call(p,u,m):h))break e;u=L({},u,m);break e;case 2:Rn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(m=a.effects)?a.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=p,o=u):d=d.next=p,i|=m;if(null===(l=l.next)){if(null===(l=a.shared.pending))break;l=(m=l).next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}if(null===d&&(o=u),a.baseState=o,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===n&&(a.shared.lanes=0);$o|=i,e.lanes=i,e.memoizedState=u}}function Wn(e,t,s){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],n=a.callback;if(null!==n){if(a.callback=null,a=s,"function"!=typeof n)throw Error(r(191,n));n.call(a)}}}var Kn={},Vn=_a(Kn),Hn=_a(Kn),Gn=_a(Kn);function Yn(e){if(e===Kn)throw Error(r(174));return e}function Jn(e,t){switch(Sa(Gn,t),Sa(Hn,e),Sa(Vn,Kn),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ka(Vn),Sa(Vn,t)}function Zn(){ka(Vn),ka(Hn),ka(Gn)}function Qn(e){Yn(Gn.current);var t=Yn(Vn.current),r=ce(t,e.type);t!==r&&(Sa(Hn,e),Sa(Vn,r))}function Xn(e){Hn.current===e&&(ka(Vn),ka(Hn))}var ei=_a(0);function ti(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ri=[];function si(){for(var e=0;e<ri.length;e++)ri[e]._workInProgressVersionPrimary=null;ri.length=0}var ai=v.ReactCurrentDispatcher,ni=v.ReactCurrentBatchConfig,ii=0,li=null,oi=null,ci=null,di=!1,ui=!1,mi=0,pi=0;function hi(){throw Error(r(321))}function xi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ls(e[r],t[r]))return!1;return!0}function fi(e,t,s,a,n,i){if(ii=i,li=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ai.current=null===e||null===e.memoizedState?Xi:el,e=s(a,n),ui){i=0;do{if(ui=!1,mi=0,25<=i)throw Error(r(301));i+=1,ci=oi=null,t.updateQueue=null,ai.current=tl,e=s(a,n)}while(ui)}if(ai.current=Qi,t=null!==oi&&null!==oi.next,ii=0,ci=oi=li=null,di=!1,t)throw Error(r(300));return e}function gi(){var e=0!==mi;return mi=0,e}function bi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ci?li.memoizedState=ci=e:ci=ci.next=e,ci}function vi(){if(null===oi){var e=li.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===ci?li.memoizedState:ci.next;if(null!==t)ci=t,oi=e;else{if(null===e)throw Error(r(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===ci?li.memoizedState=ci=e:ci=ci.next=e}return ci}function yi(e,t){return"function"==typeof t?t(e):t}function ji(e){var t=vi(),s=t.queue;if(null===s)throw Error(r(311));s.lastRenderedReducer=e;var a=oi,n=a.baseQueue,i=s.pending;if(null!==i){if(null!==n){var l=n.next;n.next=i.next,i.next=l}a.baseQueue=n=i,s.pending=null}if(null!==n){i=n.next,a=a.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((ii&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(o=c=m,l=a):c=c.next=m,li.lanes|=u,$o|=u}d=d.next}while(null!==d&&d!==i);null===c?l=a:c.next=o,ls(a,t.memoizedState)||(vl=!0),t.memoizedState=a,t.baseState=l,t.baseQueue=c,s.lastRenderedState=a}if(null!==(e=s.interleaved)){n=e;do{i=n.lane,li.lanes|=i,$o|=i,n=n.next}while(n!==e)}else null===n&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function wi(e){var t=vi(),s=t.queue;if(null===s)throw Error(r(311));s.lastRenderedReducer=e;var a=s.dispatch,n=s.pending,i=t.memoizedState;if(null!==n){s.pending=null;var l=n=n.next;do{i=e(i,l.action),l=l.next}while(l!==n);ls(i,t.memoizedState)||(vl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),s.lastRenderedState=i}return[i,a]}function Ni(){}function _i(e,t){var s=li,a=vi(),n=t(),i=!ls(a.memoizedState,n);if(i&&(a.memoizedState=n,vl=!0),a=a.queue,Ri(Ci.bind(null,s,a,e),[e]),a.getSnapshot!==t||i||null!==ci&&1&ci.memoizedState.tag){if(s.flags|=2048,Ti(9,Si.bind(null,s,a,n,t),void 0,null),null===Po)throw Error(r(349));30&ii||ki(s,t,n)}return n}function ki(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=li.updateQueue)?(t={lastEffect:null,stores:null},li.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Si(e,t,r,s){t.value=r,t.getSnapshot=s,Oi(t)&&Ei(e)}function Ci(e,t,r){return r(function(){Oi(t)&&Ei(e)})}function Oi(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ls(e,r)}catch(s){return!0}}function Ei(e){var t=In(e,1);null!==t&&sc(t,e,1,-1)}function Pi(e){var t=bi();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:e},t.queue=e,e=e.dispatch=Gi.bind(null,li,e),[t.memoizedState,e]}function Ti(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},null===(t=li.updateQueue)?(t={lastEffect:null,stores:null},li.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e),e}function Ai(){return vi().memoizedState}function Mi(e,t,r,s){var a=bi();li.flags|=e,a.memoizedState=Ti(1|t,r,void 0,void 0===s?null:s)}function Di(e,t,r,s){var a=vi();s=void 0===s?null:s;var n=void 0;if(null!==oi){var i=oi.memoizedState;if(n=i.destroy,null!==s&&xi(s,i.deps))return void(a.memoizedState=Ti(t,r,n,s))}li.flags|=e,a.memoizedState=Ti(1|t,r,n,s)}function Ii(e,t){return Mi(8390656,8,e,t)}function Ri(e,t){return Di(2048,8,e,t)}function $i(e,t){return Di(4,2,e,t)}function Li(e,t){return Di(4,4,e,t)}function Fi(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zi(e,t,r){return r=null!=r?r.concat([e]):null,Di(4,4,Fi.bind(null,t,e),r)}function Ui(){}function Bi(e,t){var r=vi();t=void 0===t?null:t;var s=r.memoizedState;return null!==s&&null!==t&&xi(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function qi(e,t){var r=vi();t=void 0===t?null:t;var s=r.memoizedState;return null!==s&&null!==t&&xi(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function Wi(e,t,r){return 21&ii?(ls(r,t)||(r=ft(),li.lanes|=r,$o|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,vl=!0),e.memoizedState=r)}function Ki(e,t){var r=yt;yt=0!==r&&4>r?r:4,e(!0);var s=ni.transition;ni.transition={};try{e(!1),t()}finally{yt=r,ni.transition=s}}function Vi(){return vi().memoizedState}function Hi(e,t,r){var s=rc(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Yi(e))Ji(t,r);else if(null!==(r=Dn(e,t,r,s))){sc(r,e,s,tc()),Zi(r,t,s)}}function Gi(e,t,r){var s=rc(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Yi(e))Ji(t,a);else{var n=e.alternate;if(0===e.lanes&&(null===n||0===n.lanes)&&null!==(n=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=n(i,r);if(a.hasEagerState=!0,a.eagerState=l,ls(l,i)){var o=t.interleaved;return null===o?(a.next=a,Mn(t)):(a.next=o.next,o.next=a),void(t.interleaved=a)}}catch(c){}null!==(r=Dn(e,t,a,s))&&(sc(r,e,s,a=tc()),Zi(r,t,s))}}function Yi(e){var t=e.alternate;return e===li||null!==t&&t===li}function Ji(e,t){ui=di=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Zi(e,t,r){if(4194240&r){var s=t.lanes;r|=s&=e.pendingLanes,t.lanes=r,vt(e,r)}}var Qi={readContext:Tn,useCallback:hi,useContext:hi,useEffect:hi,useImperativeHandle:hi,useInsertionEffect:hi,useLayoutEffect:hi,useMemo:hi,useReducer:hi,useRef:hi,useState:hi,useDebugValue:hi,useDeferredValue:hi,useTransition:hi,useMutableSource:hi,useSyncExternalStore:hi,useId:hi,unstable_isNewReconciler:!1},Xi={readContext:Tn,useCallback:function(e,t){return bi().memoizedState=[e,void 0===t?null:t],e},useContext:Tn,useEffect:Ii,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,Mi(4194308,4,Fi.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Mi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mi(4,2,e,t)},useMemo:function(e,t){var r=bi();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=bi();return t=void 0!==r?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Hi.bind(null,li,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},bi().memoizedState=e},useState:Pi,useDebugValue:Ui,useDeferredValue:function(e){return bi().memoizedState=e},useTransition:function(){var e=Pi(!1),t=e[0];return e=Ki.bind(null,e[1]),bi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var a=li,n=bi();if(an){if(void 0===s)throw Error(r(407));s=s()}else{if(s=t(),null===Po)throw Error(r(349));30&ii||ki(a,t,s)}n.memoizedState=s;var i={value:s,getSnapshot:t};return n.queue=i,Ii(Ci.bind(null,a,i,e),[e]),a.flags|=2048,Ti(9,Si.bind(null,a,i,s,t),void 0,null),s},useId:function(){var e=bi(),t=Po.identifierPrefix;if(an){var r=Za;t=":"+t+"R"+(r=(Ja&~(1<<32-lt(Ja)-1)).toString(32)+r),0<(r=mi++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=pi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},el={readContext:Tn,useCallback:Bi,useContext:Tn,useEffect:Ri,useImperativeHandle:zi,useInsertionEffect:$i,useLayoutEffect:Li,useMemo:qi,useReducer:ji,useRef:Ai,useState:function(){return ji(yi)},useDebugValue:Ui,useDeferredValue:function(e){return Wi(vi(),oi.memoizedState,e)},useTransition:function(){return[ji(yi)[0],vi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:_i,useId:Vi,unstable_isNewReconciler:!1},tl={readContext:Tn,useCallback:Bi,useContext:Tn,useEffect:Ri,useImperativeHandle:zi,useInsertionEffect:$i,useLayoutEffect:Li,useMemo:qi,useReducer:wi,useRef:Ai,useState:function(){return wi(yi)},useDebugValue:Ui,useDeferredValue:function(e){var t=vi();return null===oi?t.memoizedState=e:Wi(t,oi.memoizedState,e)},useTransition:function(){return[wi(yi)[0],vi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:_i,useId:Vi,unstable_isNewReconciler:!1};function rl(e,t){if(e&&e.defaultProps){for(var r in t=L({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function sl(e,t,r,s){r=null==(r=r(s,t=e.memoizedState))?t:L({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var al={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=tc(),a=rc(e),n=Fn(s,a);n.payload=t,null!=r&&(n.callback=r),null!==(t=zn(e,n,a))&&(sc(t,e,a,s),Un(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=tc(),a=rc(e),n=Fn(s,a);n.tag=1,n.payload=t,null!=r&&(n.callback=r),null!==(t=zn(e,n,a))&&(sc(t,e,a,s),Un(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=tc(),s=rc(e),a=Fn(r,s);a.tag=2,null!=t&&(a.callback=t),null!==(t=zn(e,a,s))&&(sc(t,e,s,r),Un(t,e,s))}};function nl(e,t,r,s,a,n,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,n,i):!t.prototype||!t.prototype.isPureReactComponent||(!os(r,s)||!os(a,n))}function il(e,t,r){var s=!1,a=Ca,n=t.contextType;return"object"==typeof n&&null!==n?n=Tn(n):(a=Aa(t)?Pa:Oa.current,n=(s=null!=(s=t.contextTypes))?Ta(e,a):Ca),t=new t(r,n),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=al,e.stateNode=t,t._reactInternals=e,s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=n),t}function ll(e,t,r,s){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,s),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&al.enqueueReplaceState(t,t.state,null)}function ol(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},$n(e);var n=t.contextType;"object"==typeof n&&null!==n?a.context=Tn(n):(n=Aa(t)?Pa:Oa.current,a.context=Ta(e,n)),a.state=e.memoizedState,"function"==typeof(n=t.getDerivedStateFromProps)&&(sl(e,t,n,r),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&al.enqueueReplaceState(a,a.state,null),qn(e,r,a,s),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4194308)}function cl(e,t){try{var r="",s=t;do{r+=B(s),s=s.return}while(s);var a=r}catch(n){a="\nError generating stack: "+n.message+"\n"+n.stack}return{value:e,source:t,stack:a,digest:null}}function dl(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ul(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ml="function"==typeof WeakMap?WeakMap:Map;function pl(e,t,r){(r=Fn(-1,r)).tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Ko||(Ko=!0,Vo=s),ul(0,t)},r}function hl(e,t,r){(r=Fn(-1,r)).tag=3;var s=e.type.getDerivedStateFromError;if("function"==typeof s){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){ul(0,t)}}var n=e.stateNode;return null!==n&&"function"==typeof n.componentDidCatch&&(r.callback=function(){ul(0,t),"function"!=typeof s&&(null===Ho?Ho=new Set([this]):Ho.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function xl(e,t,r){var s=e.pingCache;if(null===s){s=e.pingCache=new ml;var a=new Set;s.set(t,a)}else void 0===(a=s.get(t))&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=Sc.bind(null,e,t,r),t.then(e,e))}function fl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gl(e,t,r,s,a){return 1&e.mode?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Fn(-1,1)).tag=2,zn(r,t,1))),r.lanes|=1),e)}var bl=v.ReactCurrentOwner,vl=!1;function yl(e,t,r,s){t.child=null===e?wn(t,null,r,s):jn(t,e.child,r,s)}function jl(e,t,r,s,a){r=r.render;var n=t.ref;return Pn(t,a),s=fi(e,t,r,s,n,a),r=gi(),null===e||vl?(an&&r&&en(t),t.flags|=1,yl(e,t,s,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wl(e,t,a))}function wl(e,t,r,s,a){if(null===e){var n=r.type;return"function"!=typeof n||Mc(n)||void 0!==n.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Ic(r.type,null,s,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=n,Nl(e,t,n,s,a))}if(n=e.child,0===(e.lanes&a)){var i=n.memoizedProps;if((r=null!==(r=r.compare)?r:os)(i,s)&&e.ref===t.ref)return Wl(e,t,a)}return t.flags|=1,(e=Dc(n,s)).ref=t.ref,e.return=t,t.child=e}function Nl(e,t,r,s,a){if(null!==e){var n=e.memoizedProps;if(os(n,s)&&e.ref===t.ref){if(vl=!1,t.pendingProps=s=n,0===(e.lanes&a))return t.lanes=e.lanes,Wl(e,t,a);131072&e.flags&&(vl=!0)}}return Sl(e,t,r,s,a)}function _l(e,t,r){var s=t.pendingProps,a=s.children,n=null!==e?e.memoizedState:null;if("hidden"===s.mode)if(1&t.mode){if(!(1073741824&r))return e=null!==n?n.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sa(Do,Mo),Mo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=null!==n?n.baseLanes:r,Sa(Do,Mo),Mo|=s}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sa(Do,Mo),Mo|=r;else null!==n?(s=n.baseLanes|r,t.memoizedState=null):s=r,Sa(Do,Mo),Mo|=s;return yl(e,t,a,r),t.child}function kl(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Sl(e,t,r,s,a){var n=Aa(r)?Pa:Oa.current;return n=Ta(t,n),Pn(t,a),r=fi(e,t,r,s,n,a),s=gi(),null===e||vl?(an&&s&&en(t),t.flags|=1,yl(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wl(e,t,a))}function Cl(e,t,r,s,a){if(Aa(r)){var n=!0;Ra(t)}else n=!1;if(Pn(t,a),null===t.stateNode)ql(e,t),il(t,r,s),ol(t,r,s,a),s=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var o=i.context,c=r.contextType;"object"==typeof c&&null!==c?c=Tn(c):c=Ta(t,c=Aa(r)?Pa:Oa.current);var d=r.getDerivedStateFromProps,u="function"==typeof d||"function"==typeof i.getSnapshotBeforeUpdate;u||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(l!==s||o!==c)&&ll(t,i,s,c),Rn=!1;var m=t.memoizedState;i.state=m,qn(t,s,i,a),o=t.memoizedState,l!==s||m!==o||Ea.current||Rn?("function"==typeof d&&(sl(t,r,d,s),o=t.memoizedState),(l=Rn||nl(t,r,l,s,m,o,c))?(u||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=o),i.props=s,i.state=o,i.context=c,s=l):("function"==typeof i.componentDidMount&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,Ln(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:rl(t.type,l),i.props=c,u=t.pendingProps,m=i.context,"object"==typeof(o=r.contextType)&&null!==o?o=Tn(o):o=Ta(t,o=Aa(r)?Pa:Oa.current);var p=r.getDerivedStateFromProps;(d="function"==typeof p||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(l!==u||m!==o)&&ll(t,i,s,o),Rn=!1,m=t.memoizedState,i.state=m,qn(t,s,i,a);var h=t.memoizedState;l!==u||m!==h||Ea.current||Rn?("function"==typeof p&&(sl(t,r,p,s),h=t.memoizedState),(c=Rn||nl(t,r,c,s,m,h,o)||!1)?(d||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(s,h,o),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(s,h,o)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=h),i.props=s,i.state=h,i.context=o,s=c):("function"!=typeof i.componentDidUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return Ol(e,t,r,s,n,a)}function Ol(e,t,r,s,a,n){kl(e,t);var i=!!(128&t.flags);if(!s&&!i)return a&&$a(t,r,!1),Wl(e,t,n);s=t.stateNode,bl.current=t;var l=i&&"function"!=typeof r.getDerivedStateFromError?null:s.render();return t.flags|=1,null!==e&&i?(t.child=jn(t,e.child,null,n),t.child=jn(t,null,l,n)):yl(e,t,l,n),t.memoizedState=s.state,a&&$a(t,r,!0),t.child}function El(e){var t=e.stateNode;t.pendingContext?Da(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Da(0,t.context,!1),Jn(e,t.containerInfo)}function Pl(e,t,r,s,a){return hn(),xn(a),t.flags|=256,yl(e,t,r,s),t.child}var Tl,Al,Ml,Dl,Il={dehydrated:null,treeContext:null,retryLane:0};function Rl(e){return{baseLanes:e,cachePool:null,transitions:null}}function $l(e,t,s){var a,n=t.pendingProps,i=ei.current,l=!1,o=!!(128&t.flags);if((a=o)||(a=(null===e||null!==e.memoizedState)&&!!(2&i)),a?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Sa(ei,1&i),null===e)return dn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,l?(n=t.mode,l=t.child,o={mode:"hidden",children:o},1&n||null===l?l=$c(o,n,0,null):(l.childLanes=0,l.pendingProps=o),e=Rc(e,n,s,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Rl(s),t.memoizedState=Il,e):Ll(t,o));if(null!==(i=e.memoizedState)&&null!==(a=i.dehydrated))return function(e,t,s,a,n,i,l){if(s)return 256&t.flags?(t.flags&=-257,Fl(e,t,l,a=dl(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=a.fallback,n=t.mode,a=$c({mode:"visible",children:a.children},n,0,null),(i=Rc(i,n,l,null)).flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,1&t.mode&&jn(t,e.child,null,l),t.child.memoizedState=Rl(l),t.memoizedState=Il,i);if(!(1&t.mode))return Fl(e,t,l,null);if("$!"===n.data){if(a=n.nextSibling&&n.nextSibling.dataset)var o=a.dgst;return a=o,Fl(e,t,l,a=dl(i=Error(r(419)),a,void 0))}if(o=0!==(l&e.childLanes),vl||o){if(null!==(a=Po)){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(a.suspendedLanes|l))?0:n)&&n!==i.retryLane&&(i.retryLane=n,In(e,n),sc(a,e,n,-1))}return fc(),Fl(e,t,l,a=dl(Error(r(421))))}return"$?"===n.data?(t.flags|=128,t.child=e.child,t=Oc.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,sn=ca(n.nextSibling),rn=t,an=!0,nn=null,null!==e&&(Ha[Ga++]=Ja,Ha[Ga++]=Za,Ha[Ga++]=Ya,Ja=e.id,Za=e.overflow,Ya=t),t=Ll(t,a.children),t.flags|=4096,t)}(e,t,o,n,a,i,s);if(l){l=n.fallback,o=t.mode,a=(i=e.child).sibling;var c={mode:"hidden",children:n.children};return 1&o||t.child===i?(n=Dc(i,c)).subtreeFlags=14680064&i.subtreeFlags:((n=t.child).childLanes=0,n.pendingProps=c,t.deletions=null),null!==a?l=Dc(a,l):(l=Rc(l,o,s,null)).flags|=2,l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,o=null===(o=e.child.memoizedState)?Rl(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~s,t.memoizedState=Il,n}return e=(l=e.child).sibling,n=Dc(l,{mode:"visible",children:n.children}),!(1&t.mode)&&(n.lanes=s),n.return=t,n.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function Ll(e,t){return(t=$c({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fl(e,t,r,s){return null!==s&&xn(s),jn(t,e.child,null,r),(e=Ll(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zl(e,t,r){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),En(e.return,t,r)}function Ul(e,t,r,s,a){var n=e.memoizedState;null===n?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(n.isBackwards=t,n.rendering=null,n.renderingStartTime=0,n.last=s,n.tail=r,n.tailMode=a)}function Bl(e,t,r){var s=t.pendingProps,a=s.revealOrder,n=s.tail;if(yl(e,t,s.children,r),2&(s=ei.current))s=1&s|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zl(e,r,t);else if(19===e.tag)zl(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Sa(ei,s),1&t.mode)switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===ti(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Ul(t,!1,a,r,n);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ti(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Ul(t,!0,r,null,n);break;case"together":Ul(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function ql(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wl(e,t,s){if(null!==e&&(t.dependencies=e.dependencies),$o|=t.lanes,0===(s&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(s=Dc(e=t.child,e.pendingProps),t.child=s,s.return=t;null!==e.sibling;)e=e.sibling,(s=s.sibling=Dc(e,e.pendingProps)).return=t;s.sibling=null}return t.child}function Kl(e,t){if(!an)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;null!==r;)null!==r.alternate&&(s=r),r=r.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Vl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,s|=14680064&a.subtreeFlags,s|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function Hl(e,t,s){var n=t.pendingProps;switch(tn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vl(t),null;case 1:case 17:return Aa(t.type)&&Ma(),Vl(t),null;case 3:return n=t.stateNode,Zn(),ka(Ea),ka(Oa),si(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(mn(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==nn&&(lc(nn),nn=null))),Al(e,t),Vl(t),null;case 5:Xn(t);var i=Yn(Gn.current);if(s=t.type,null!==e&&null!=t.stateNode)Ml(e,t,s,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(r(166));return Vl(t),null}if(e=Yn(Vn.current),mn(t)){n=t.stateNode,s=t.type;var l=t.memoizedProps;switch(n[ma]=t,n[pa]=l,e=!!(1&t.mode),s){case"dialog":Fs("cancel",n),Fs("close",n);break;case"iframe":case"object":case"embed":Fs("load",n);break;case"video":case"audio":for(i=0;i<Is.length;i++)Fs(Is[i],n);break;case"source":Fs("error",n);break;case"img":case"image":case"link":Fs("error",n),Fs("load",n);break;case"details":Fs("toggle",n);break;case"input":Z(n,l),Fs("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},Fs("invalid",n);break;case"textarea":ne(n,l),Fs("invalid",n)}for(var o in ve(s,l),i=null,l)if(l.hasOwnProperty(o)){var c=l[o];"children"===o?"string"==typeof c?n.textContent!==c&&(!0!==l.suppressHydrationWarning&&Qs(n.textContent,c,e),i=["children",c]):"number"==typeof c&&n.textContent!==""+c&&(!0!==l.suppressHydrationWarning&&Qs(n.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(o)&&null!=c&&"onScroll"===o&&Fs("scroll",n)}switch(s){case"input":H(n),ee(n,l,!0);break;case"textarea":H(n),le(n);break;case"select":case"option":break;default:"function"==typeof l.onClick&&(n.onclick=Xs)}n=i,t.updateQueue=n,null!==n&&(t.flags|=4)}else{o=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(s)),"http://www.w3.org/1999/xhtml"===e?"script"===s?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=o.createElement(s,{is:n.is}):(e=o.createElement(s),"select"===s&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,s),e[ma]=t,e[pa]=n,Tl(e,t,!1,!1),t.stateNode=e;e:{switch(o=ye(s,n),s){case"dialog":Fs("cancel",e),Fs("close",e),i=n;break;case"iframe":case"object":case"embed":Fs("load",e),i=n;break;case"video":case"audio":for(i=0;i<Is.length;i++)Fs(Is[i],e);i=n;break;case"source":Fs("error",e),i=n;break;case"img":case"image":case"link":Fs("error",e),Fs("load",e),i=n;break;case"details":Fs("toggle",e),i=n;break;case"input":Z(e,n),i=J(e,n),Fs("invalid",e);break;case"option":default:i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=L({},n,{value:void 0}),Fs("invalid",e);break;case"textarea":ne(e,n),i=ae(e,n),Fs("invalid",e)}for(l in ve(s,i),c=i)if(c.hasOwnProperty(l)){var d=c[l];"style"===l?ge(e,d):"dangerouslySetInnerHTML"===l?null!=(d=d?d.__html:void 0)&&me(e,d):"children"===l?"string"==typeof d?("textarea"!==s||""!==d)&&pe(e,d):"number"==typeof d&&pe(e,""+d):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(a.hasOwnProperty(l)?null!=d&&"onScroll"===l&&Fs("scroll",e):null!=d&&b(e,l,d,o))}switch(s){case"input":H(e),ee(e,n,!1);break;case"textarea":H(e),le(e);break;case"option":null!=n.value&&e.setAttribute("value",""+K(n.value));break;case"select":e.multiple=!!n.multiple,null!=(l=n.value)?se(e,!!n.multiple,l,!1):null!=n.defaultValue&&se(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Xs)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vl(t),null;case 6:if(e&&null!=t.stateNode)Dl(e,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(r(166));if(s=Yn(Gn.current),Yn(Vn.current),mn(t)){if(n=t.stateNode,s=t.memoizedProps,n[ma]=t,(l=n.nodeValue!==s)&&null!==(e=rn))switch(e.tag){case 3:Qs(n.nodeValue,s,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qs(n.nodeValue,s,!!(1&e.mode))}l&&(t.flags|=4)}else(n=(9===s.nodeType?s:s.ownerDocument).createTextNode(n))[ma]=t,t.stateNode=n}return Vl(t),null;case 13:if(ka(ei),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(an&&null!==sn&&1&t.mode&&!(128&t.flags))pn(),hn(),t.flags|=98560,l=!1;else if(l=mn(t),null!==n&&null!==n.dehydrated){if(null===e){if(!l)throw Error(r(318));if(!(l=null!==(l=t.memoizedState)?l.dehydrated:null))throw Error(r(317));l[ma]=t}else hn(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vl(t),l=!1}else null!==nn&&(lc(nn),nn=null),l=!0;if(!l)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=s,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,1&t.mode&&(null===e||1&ei.current?0===Io&&(Io=3):fc())),null!==t.updateQueue&&(t.flags|=4),Vl(t),null);case 4:return Zn(),Al(e,t),null===e&&Bs(t.stateNode.containerInfo),Vl(t),null;case 10:return On(t.type._context),Vl(t),null;case 19:if(ka(ei),null===(l=t.memoizedState))return Vl(t),null;if(n=!!(128&t.flags),null===(o=l.rendering))if(n)Kl(l,!1);else{if(0!==Io||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=ti(e))){for(t.flags|=128,Kl(l,!1),null!==(n=o.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;null!==s;)e=n,(l=s).flags&=14680066,null===(o=l.alternate)?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Sa(ei,1&ei.current|2),t.child}e=e.sibling}null!==l.tail&&Qe()>qo&&(t.flags|=128,n=!0,Kl(l,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ti(o))){if(t.flags|=128,n=!0,null!==(s=e.updateQueue)&&(t.updateQueue=s,t.flags|=4),Kl(l,!0),null===l.tail&&"hidden"===l.tailMode&&!o.alternate&&!an)return Vl(t),null}else 2*Qe()-l.renderingStartTime>qo&&1073741824!==s&&(t.flags|=128,n=!0,Kl(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(null!==(s=l.last)?s.sibling=o:t.child=o,l.last=o)}return null!==l.tail?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Qe(),t.sibling=null,s=ei.current,Sa(ei,n?1&s|2:1&s),t):(Vl(t),null);case 22:case 23:return mc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&1&t.mode?!!(1073741824&Mo)&&(Vl(t),6&t.subtreeFlags&&(t.flags|=8192)):Vl(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function Gl(e,t){switch(tn(t),t.tag){case 1:return Aa(t.type)&&Ma(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Zn(),ka(Ea),ka(Oa),si(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xn(t),null;case 13:if(ka(ei),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));hn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ka(ei),null;case 4:return Zn(),null;case 10:return On(t.type._context),null;case 22:case 23:return mc(),null;default:return null}}Tl=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Al=function(){},Ml=function(e,t,r,s){var n=e.memoizedProps;if(n!==s){e=t.stateNode,Yn(Vn.current);var i,l=null;switch(r){case"input":n=J(e,n),s=J(e,s),l=[];break;case"select":n=L({},n,{value:void 0}),s=L({},s,{value:void 0}),l=[];break;case"textarea":n=ae(e,n),s=ae(e,s),l=[];break;default:"function"!=typeof n.onClick&&"function"==typeof s.onClick&&(e.onclick=Xs)}for(d in ve(r,s),r=null,n)if(!s.hasOwnProperty(d)&&n.hasOwnProperty(d)&&null!=n[d])if("style"===d){var o=n[d];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(a.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in s){var c=s[d];if(o=null!=n?n[d]:void 0,s.hasOwnProperty(d)&&c!==o&&(null!=c||null!=o))if("style"===d)if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(l||(l=[]),l.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,o=o?o.__html:void 0,null!=c&&o!==c&&(l=l||[]).push(d,c)):"children"===d?"string"!=typeof c&&"number"!=typeof c||(l=l||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(a.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fs("scroll",e),l||o===c||(l=[])):(l=l||[]).push(d,c))}r&&(l=l||[]).push("style",r);var d=l;(t.updateQueue=d)&&(t.flags|=4)}},Dl=function(e,t,r,s){r!==s&&(t.flags|=4)};var Yl=!1,Jl=!1,Zl="function"==typeof WeakSet?WeakSet:Set,Ql=null;function Xl(e,t){var r=e.ref;if(null!==r)if("function"==typeof r)try{r(null)}catch(s){kc(e,t,s)}else r.current=null}function eo(e,t,r){try{r()}catch(s){kc(e,t,s)}}var to=!1;function ro(e,t,r){var s=t.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var a=s=s.next;do{if((a.tag&e)===e){var n=a.destroy;a.destroy=void 0,void 0!==n&&eo(t,r,n)}a=a.next}while(a!==s)}}function so(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function ao(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"==typeof t?t(e):t.current=e}}function no(e){var t=e.alternate;null!==t&&(e.alternate=null,no(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ma],delete t[pa],delete t[xa],delete t[fa],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function io(e){return 5===e.tag||3===e.tag||4===e.tag}function lo(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||io(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function oo(e,t,r){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=Xs));else if(4!==s&&null!==(e=e.child))for(oo(e,t,r),e=e.sibling;null!==e;)oo(e,t,r),e=e.sibling}function co(e,t,r){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==s&&null!==(e=e.child))for(co(e,t,r),e=e.sibling;null!==e;)co(e,t,r),e=e.sibling}var uo=null,mo=!1;function po(e,t,r){for(r=r.child;null!==r;)ho(e,t,r),r=r.sibling}function ho(e,t,r){if(it&&"function"==typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(nt,r)}catch(l){}switch(r.tag){case 5:Jl||Xl(r,t);case 6:var s=uo,a=mo;uo=null,po(e,t,r),mo=a,null!==(uo=s)&&(mo?(e=uo,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):uo.removeChild(r.stateNode));break;case 18:null!==uo&&(mo?(e=uo,r=r.stateNode,8===e.nodeType?oa(e.parentNode,r):1===e.nodeType&&oa(e,r),qt(e)):oa(uo,r.stateNode));break;case 4:s=uo,a=mo,uo=r.stateNode.containerInfo,mo=!0,po(e,t,r),uo=s,mo=a;break;case 0:case 11:case 14:case 15:if(!Jl&&(null!==(s=r.updateQueue)&&null!==(s=s.lastEffect))){a=s=s.next;do{var n=a,i=n.destroy;n=n.tag,void 0!==i&&(2&n||4&n)&&eo(r,t,i),a=a.next}while(a!==s)}po(e,t,r);break;case 1:if(!Jl&&(Xl(r,t),"function"==typeof(s=r.stateNode).componentWillUnmount))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){kc(r,t,l)}po(e,t,r);break;case 21:po(e,t,r);break;case 22:1&r.mode?(Jl=(s=Jl)||null!==r.memoizedState,po(e,t,r),Jl=s):po(e,t,r);break;default:po(e,t,r)}}function xo(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Zl),t.forEach(function(t){var s=Ec.bind(null,e,t);r.has(t)||(r.add(t),t.then(s,s))})}}function fo(e,t){var s=t.deletions;if(null!==s)for(var a=0;a<s.length;a++){var n=s[a];try{var i=e,l=t,o=l;e:for(;null!==o;){switch(o.tag){case 5:uo=o.stateNode,mo=!1;break e;case 3:case 4:uo=o.stateNode.containerInfo,mo=!0;break e}o=o.return}if(null===uo)throw Error(r(160));ho(i,l,n),uo=null,mo=!1;var c=n.alternate;null!==c&&(c.return=null),n.return=null}catch(d){kc(n,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)go(t,e),t=t.sibling}function go(e,t){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fo(t,e),bo(e),4&a){try{ro(3,e,e.return),so(3,e)}catch(mF){kc(e,e.return,mF)}try{ro(5,e,e.return)}catch(mF){kc(e,e.return,mF)}}break;case 1:fo(t,e),bo(e),512&a&&null!==s&&Xl(s,s.return);break;case 5:if(fo(t,e),bo(e),512&a&&null!==s&&Xl(s,s.return),32&e.flags){var n=e.stateNode;try{pe(n,"")}catch(mF){kc(e,e.return,mF)}}if(4&a&&null!=(n=e.stateNode)){var i=e.memoizedProps,l=null!==s?s.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===o&&"radio"===i.type&&null!=i.name&&Q(n,i),ye(o,l);var d=ye(o,i);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];"style"===u?ge(n,m):"dangerouslySetInnerHTML"===u?me(n,m):"children"===u?pe(n,m):b(n,u,m,d)}switch(o){case"input":X(n,i);break;case"textarea":ie(n,i);break;case"select":var p=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var h=i.value;null!=h?se(n,!!i.multiple,h,!1):p!==!!i.multiple&&(null!=i.defaultValue?se(n,!!i.multiple,i.defaultValue,!0):se(n,!!i.multiple,i.multiple?[]:"",!1))}n[pa]=i}catch(mF){kc(e,e.return,mF)}}break;case 6:if(fo(t,e),bo(e),4&a){if(null===e.stateNode)throw Error(r(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(mF){kc(e,e.return,mF)}}break;case 3:if(fo(t,e),bo(e),4&a&&null!==s&&s.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(mF){kc(e,e.return,mF)}break;case 4:default:fo(t,e),bo(e);break;case 13:fo(t,e),bo(e),8192&(n=e.child).flags&&(i=null!==n.memoizedState,n.stateNode.isHidden=i,!i||null!==n.alternate&&null!==n.alternate.memoizedState||(Bo=Qe())),4&a&&xo(e);break;case 22:if(u=null!==s&&null!==s.memoizedState,1&e.mode?(Jl=(d=Jl)||u,fo(t,e),Jl=d):fo(t,e),bo(e),8192&a){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&1&e.mode)for(Ql=e,u=e.child;null!==u;){for(m=Ql=u;null!==Ql;){switch(h=(p=Ql).child,p.tag){case 0:case 11:case 14:case 15:ro(4,p,p.return);break;case 1:Xl(p,p.return);var x=p.stateNode;if("function"==typeof x.componentWillUnmount){a=p,s=p.return;try{t=a,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(mF){kc(a,s,mF)}}break;case 5:Xl(p,p.return);break;case 22:if(null!==p.memoizedState){wo(m);continue}}null!==h?(h.return=p,Ql=h):wo(m)}u=u.sibling}e:for(u=null,m=e;;){if(5===m.tag){if(null===u){u=m;try{n=m.stateNode,d?"function"==typeof(i=n.style).setProperty?i.setProperty("display","none","important"):i.display="none":(o=m.stateNode,l=null!=(c=m.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,o.style.display=fe("display",l))}catch(mF){kc(e,e.return,mF)}}}else if(6===m.tag){if(null===u)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(mF){kc(e,e.return,mF)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===e)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;null===m.sibling;){if(null===m.return||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:fo(t,e),bo(e),4&a&&xo(e);case 21:}}function bo(e){var t=e.flags;if(2&t){try{e:{for(var s=e.return;null!==s;){if(io(s)){var a=s;break e}s=s.return}throw Error(r(160))}switch(a.tag){case 5:var n=a.stateNode;32&a.flags&&(pe(n,""),a.flags&=-33),co(e,lo(e),n);break;case 3:case 4:var i=a.stateNode.containerInfo;oo(e,lo(e),i);break;default:throw Error(r(161))}}catch(l){kc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vo(e,t,r){Ql=e,yo(e)}function yo(e,t,r){for(var s=!!(1&e.mode);null!==Ql;){var a=Ql,n=a.child;if(22===a.tag&&s){var i=null!==a.memoizedState||Yl;if(!i){var l=a.alternate,o=null!==l&&null!==l.memoizedState||Jl;l=Yl;var c=Jl;if(Yl=i,(Jl=o)&&!c)for(Ql=a;null!==Ql;)o=(i=Ql).child,22===i.tag&&null!==i.memoizedState?No(a):null!==o?(o.return=i,Ql=o):No(a);for(;null!==n;)Ql=n,yo(n),n=n.sibling;Ql=a,Yl=l,Jl=c}jo(e)}else 8772&a.subtreeFlags&&null!==n?(n.return=a,Ql=n):jo(e)}}function jo(e){for(;null!==Ql;){var t=Ql;if(8772&t.flags){var s=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Jl||so(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!Jl)if(null===s)a.componentDidMount();else{var n=t.elementType===t.type?s.memoizedProps:rl(t.type,s.memoizedProps);a.componentDidUpdate(n,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Wn(t,i,a);break;case 3:var l=t.updateQueue;if(null!==l){if(s=null,null!==t.child)switch(t.child.tag){case 5:case 1:s=t.child.stateNode}Wn(t,l,s)}break;case 5:var o=t.stateNode;if(null===s&&4&t.flags){s=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var m=u.dehydrated;null!==m&&qt(m)}}}break;default:throw Error(r(163))}Jl||512&t.flags&&ao(t)}catch(uF){kc(t,t.return,uF)}}if(t===e){Ql=null;break}if(null!==(s=t.sibling)){s.return=t.return,Ql=s;break}Ql=t.return}}function wo(e){for(;null!==Ql;){var t=Ql;if(t===e){Ql=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Ql=r;break}Ql=t.return}}function No(e){for(;null!==Ql;){var t=Ql;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{so(4,t)}catch(o){kc(t,r,o)}break;case 1:var s=t.stateNode;if("function"==typeof s.componentDidMount){var a=t.return;try{s.componentDidMount()}catch(o){kc(t,a,o)}}var n=t.return;try{ao(t)}catch(o){kc(t,n,o)}break;case 5:var i=t.return;try{ao(t)}catch(o){kc(t,i,o)}}}catch(o){kc(t,t.return,o)}if(t===e){Ql=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Ql=l;break}Ql=t.return}}var _o,ko=Math.ceil,So=v.ReactCurrentDispatcher,Co=v.ReactCurrentOwner,Oo=v.ReactCurrentBatchConfig,Eo=0,Po=null,To=null,Ao=0,Mo=0,Do=_a(0),Io=0,Ro=null,$o=0,Lo=0,Fo=0,zo=null,Uo=null,Bo=0,qo=1/0,Wo=null,Ko=!1,Vo=null,Ho=null,Go=!1,Yo=null,Jo=0,Zo=0,Qo=null,Xo=-1,ec=0;function tc(){return 6&Eo?Qe():-1!==Xo?Xo:Xo=Qe()}function rc(e){return 1&e.mode?2&Eo&&0!==Ao?Ao&-Ao:null!==fn.transition?(0===ec&&(ec=ft()),ec):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Zt(e.type):1}function sc(e,t,s,a){if(50<Zo)throw Zo=0,Qo=null,Error(r(185));bt(e,s,a),2&Eo&&e===Po||(e===Po&&(!(2&Eo)&&(Lo|=s),4===Io&&oc(e,Ao)),ac(e,a),1===s&&0===Eo&&!(1&t.mode)&&(qo=Qe()+500,Fa&&Ba()))}function ac(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,n=e.pendingLanes;0<n;){var i=31-lt(n),l=1<<i,o=a[i];-1===o?0!==(l&r)&&0===(l&s)||(a[i]=ht(l,t)):o<=t&&(e.expiredLanes|=l),n&=~l}}(e,t);var s=pt(e,e===Po?Ao:0);if(0===s)null!==r&&Ye(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(null!=r&&Ye(r),1===t)0===e.tag?function(e){Fa=!0,Ua(e)}(cc.bind(null,e)):Ua(cc.bind(null,e)),ia(function(){!(6&Eo)&&Ba()}),r=null;else{switch(jt(s)){case 1:r=et;break;case 4:r=tt;break;case 16:default:r=rt;break;case 536870912:r=at}r=Pc(r,nc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function nc(e,t){if(Xo=-1,ec=0,6&Eo)throw Error(r(327));var s=e.callbackNode;if(Nc()&&e.callbackNode!==s)return null;var a=pt(e,e===Po?Ao:0);if(0===a)return null;if(30&a||0!==(a&e.expiredLanes)||t)t=gc(e,a);else{t=a;var n=Eo;Eo|=2;var i=xc();for(Po===e&&Ao===t||(Wo=null,qo=Qe()+500,pc(e,t));;)try{vc();break}catch(o){hc(e,o)}Cn(),So.current=i,Eo=n,null!==To?t=0:(Po=null,Ao=0,t=Io)}if(0!==t){if(2===t&&(0!==(n=xt(e))&&(a=n,t=ic(e,n))),1===t)throw s=Ro,pc(e,0),oc(e,a),ac(e,Qe()),s;if(6===t)oc(e,a);else{if(n=e.current.alternate,!(30&a||function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var s=0;s<r.length;s++){var a=r[s],n=a.getSnapshot;a=a.value;try{if(!ls(n(),a))return!1}catch(l){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)||(t=gc(e,a),2===t&&(i=xt(e),0!==i&&(a=i,t=ic(e,i))),1!==t)))throw s=Ro,pc(e,0),oc(e,a),ac(e,Qe()),s;switch(e.finishedWork=n,e.finishedLanes=a,t){case 0:case 1:throw Error(r(345));case 2:case 5:wc(e,Uo,Wo);break;case 3:if(oc(e,a),(130023424&a)===a&&10<(t=Bo+500-Qe())){if(0!==pt(e,0))break;if(((n=e.suspendedLanes)&a)!==a){tc(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=sa(wc.bind(null,e,Uo,Wo),t);break}wc(e,Uo,Wo);break;case 4:if(oc(e,a),(4194240&a)===a)break;for(t=e.eventTimes,n=-1;0<a;){var l=31-lt(a);i=1<<l,(l=t[l])>n&&(n=l),a&=~i}if(a=n,10<(a=(120>(a=Qe()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*ko(a/1960))-a)){e.timeoutHandle=sa(wc.bind(null,e,Uo,Wo),a);break}wc(e,Uo,Wo);break;default:throw Error(r(329))}}}return ac(e,Qe()),e.callbackNode===s?nc.bind(null,e):null}function ic(e,t){var r=zo;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Uo,Uo=r,null!==t&&lc(t)),e}function lc(e){null===Uo?Uo=e:Uo.push.apply(Uo,e)}function oc(e,t){for(t&=~Fo,t&=~Lo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-lt(t),s=1<<r;e[r]=-1,t&=~s}}function cc(e){if(6&Eo)throw Error(r(327));Nc();var t=pt(e,0);if(!(1&t))return ac(e,Qe()),null;var s=gc(e,t);if(0!==e.tag&&2===s){var a=xt(e);0!==a&&(t=a,s=ic(e,a))}if(1===s)throw s=Ro,pc(e,0),oc(e,t),ac(e,Qe()),s;if(6===s)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Uo,Wo),ac(e,Qe()),null}function dc(e,t){var r=Eo;Eo|=1;try{return e(t)}finally{0===(Eo=r)&&(qo=Qe()+500,Fa&&Ba())}}function uc(e){null!==Yo&&0===Yo.tag&&!(6&Eo)&&Nc();var t=Eo;Eo|=1;var r=Oo.transition,s=yt;try{if(Oo.transition=null,yt=1,e)return e()}finally{yt=s,Oo.transition=r,!(6&(Eo=t))&&Ba()}}function mc(){Mo=Do.current,ka(Do)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,aa(r)),null!==To)for(r=To.return;null!==r;){var s=r;switch(tn(s),s.tag){case 1:null!=(s=s.type.childContextTypes)&&Ma();break;case 3:Zn(),ka(Ea),ka(Oa),si();break;case 5:Xn(s);break;case 4:Zn();break;case 13:case 19:ka(ei);break;case 10:On(s.type._context);break;case 22:case 23:mc()}r=r.return}if(Po=e,To=e=Dc(e.current,null),Ao=Mo=t,Io=0,Ro=null,Fo=Lo=$o=0,Uo=zo=null,null!==An){for(t=0;t<An.length;t++)if(null!==(s=(r=An[t]).interleaved)){r.interleaved=null;var a=s.next,n=r.pending;if(null!==n){var i=n.next;n.next=a,s.next=i}r.pending=s}An=null}return e}function hc(e,t){for(;;){var s=To;try{if(Cn(),ai.current=Qi,di){for(var a=li.memoizedState;null!==a;){var n=a.queue;null!==n&&(n.pending=null),a=a.next}di=!1}if(ii=0,ci=oi=li=null,ui=!1,mi=0,Co.current=null,null===s||null===s.return){Io=1,Ro=t,To=null;break}e:{var i=e,l=s.return,o=s,c=t;if(t=Ao,o.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var d=c,u=o,m=u.tag;if(!(1&u.mode||0!==m&&11!==m&&15!==m)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=fl(l);if(null!==h){h.flags&=-257,gl(h,l,o,0,t),1&h.mode&&xl(i,d,t),c=d;var x=(t=h).updateQueue;if(null===x){var f=new Set;f.add(c),t.updateQueue=f}else x.add(c);break e}if(!(1&t)){xl(i,d,t),fc();break e}c=Error(r(426))}else if(an&&1&o.mode){var g=fl(l);if(null!==g){!(65536&g.flags)&&(g.flags|=256),gl(g,l,o,0,t),xn(cl(c,o));break e}}i=c=cl(c,o),4!==Io&&(Io=2),null===zo?zo=[i]:zo.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Bn(i,pl(0,c,t));break e;case 1:o=c;var b=i.type,v=i.stateNode;if(!(128&i.flags||"function"!=typeof b.getDerivedStateFromError&&(null===v||"function"!=typeof v.componentDidCatch||null!==Ho&&Ho.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t,Bn(i,hl(i,o,t));break e}}i=i.return}while(null!==i)}jc(s)}catch(y){t=y,To===s&&null!==s&&(To=s=s.return);continue}break}}function xc(){var e=So.current;return So.current=Qi,null===e?Qi:e}function fc(){0!==Io&&3!==Io&&2!==Io||(Io=4),null===Po||!(268435455&$o)&&!(268435455&Lo)||oc(Po,Ao)}function gc(e,t){var s=Eo;Eo|=2;var a=xc();for(Po===e&&Ao===t||(Wo=null,pc(e,t));;)try{bc();break}catch(dF){hc(e,dF)}if(Cn(),Eo=s,So.current=a,null!==To)throw Error(r(261));return Po=null,Ao=0,Io}function bc(){for(;null!==To;)yc(To)}function vc(){for(;null!==To&&!Je();)yc(To)}function yc(e){var t=_o(e.alternate,e,Mo);e.memoizedProps=e.pendingProps,null===t?jc(e):To=t,Co.current=null}function jc(e){var t=e;do{var r=t.alternate;if(e=t.return,32768&t.flags){if(null!==(r=Gl(r,t)))return r.flags&=32767,void(To=r);if(null===e)return Io=6,void(To=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(r=Hl(r,t,Mo)))return void(To=r);if(null!==(t=t.sibling))return void(To=t);To=t=e}while(null!==t);0===Io&&(Io=5)}function wc(e,t,s){var a=yt,n=Oo.transition;try{Oo.transition=null,yt=1,function(e,t,s,a){do{Nc()}while(null!==Yo);if(6&Eo)throw Error(r(327));s=e.finishedWork;var n=e.finishedLanes;if(null===s)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-lt(r),n=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~n}}(e,i),e===Po&&(To=Po=null,Ao=0),!(2064&s.subtreeFlags)&&!(2064&s.flags)||Go||(Go=!0,Pc(rt,function(){return Nc(),null})),i=!!(15990&s.flags),!!(15990&s.subtreeFlags)||i){i=Oo.transition,Oo.transition=null;var l=yt;yt=1;var o=Eo;Eo|=4,Co.current=null,function(e,t){if(ea=Kt,ps(e=ms())){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(s=(s=e.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(a&&0!==a.rangeCount){s=a.anchorNode;var n=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{s.nodeType,i.nodeType}catch(j){s=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=e,p=null;t:for(;;){for(var h;m!==s||0!==n&&3!==m.nodeType||(o=l+n),m!==i||0!==a&&3!==m.nodeType||(c=l+a),3===m.nodeType&&(l+=m.nodeValue.length),null!==(h=m.firstChild);)p=m,m=h;for(;;){if(m===e)break t;if(p===s&&++d===n&&(o=l),p===i&&++u===a&&(c=l),null!==(h=m.nextSibling))break;p=(m=p).parentNode}m=h}s=-1===o||-1===c?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(ta={focusedElem:e,selectionRange:s},Kt=!1,Ql=t;null!==Ql;)if(e=(t=Ql).child,1028&t.subtreeFlags&&null!==e)e.return=t,Ql=e;else for(;null!==Ql;){t=Ql;try{var x=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==x){var f=x.memoizedProps,g=x.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?f:rl(t.type,f),g);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(r(163))}}catch(j){kc(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,Ql=e;break}Ql=t.return}x=to,to=!1}(e,s),go(s,e),hs(ta),Kt=!!ea,ta=ea=null,e.current=s,vo(s),Ze(),Eo=o,yt=l,Oo.transition=i}else e.current=s;if(Go&&(Go=!1,Yo=e,Jo=n),i=e.pendingLanes,0===i&&(Ho=null),function(e){if(it&&"function"==typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(nt,e,void 0,!(128&~e.current.flags))}catch(t){}}(s.stateNode),ac(e,Qe()),null!==t)for(a=e.onRecoverableError,s=0;s<t.length;s++)n=t[s],a(n.value,{componentStack:n.stack,digest:n.digest});if(Ko)throw Ko=!1,e=Vo,Vo=null,e;!!(1&Jo)&&0!==e.tag&&Nc(),i=e.pendingLanes,1&i?e===Qo?Zo++:(Zo=0,Qo=e):Zo=0,Ba()}(e,t,s,a)}finally{Oo.transition=n,yt=a}return null}function Nc(){if(null!==Yo){var e=jt(Jo),t=Oo.transition,s=yt;try{if(Oo.transition=null,yt=16>e?16:e,null===Yo)var a=!1;else{if(e=Yo,Yo=null,Jo=0,6&Eo)throw Error(r(331));var n=Eo;for(Eo|=4,Ql=e.current;null!==Ql;){var i=Ql,l=i.child;if(16&Ql.flags){var o=i.deletions;if(null!==o){for(var c=0;c<o.length;c++){var d=o[c];for(Ql=d;null!==Ql;){var u=Ql;switch(u.tag){case 0:case 11:case 15:ro(8,u,i)}var m=u.child;if(null!==m)m.return=u,Ql=m;else for(;null!==Ql;){var p=(u=Ql).sibling,h=u.return;if(no(u),u===d){Ql=null;break}if(null!==p){p.return=h,Ql=p;break}Ql=h}}}var x=i.alternate;if(null!==x){var f=x.child;if(null!==f){x.child=null;do{var g=f.sibling;f.sibling=null,f=g}while(null!==f)}}Ql=i}}if(2064&i.subtreeFlags&&null!==l)l.return=i,Ql=l;else e:for(;null!==Ql;){if(2048&(i=Ql).flags)switch(i.tag){case 0:case 11:case 15:ro(9,i,i.return)}var b=i.sibling;if(null!==b){b.return=i.return,Ql=b;break e}Ql=i.return}}var v=e.current;for(Ql=v;null!==Ql;){var y=(l=Ql).child;if(2064&l.subtreeFlags&&null!==y)y.return=l,Ql=y;else e:for(l=v;null!==Ql;){if(2048&(o=Ql).flags)try{switch(o.tag){case 0:case 11:case 15:so(9,o)}}catch(w){kc(o,o.return,w)}if(o===l){Ql=null;break e}var j=o.sibling;if(null!==j){j.return=o.return,Ql=j;break e}Ql=o.return}}if(Eo=n,Ba(),it&&"function"==typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(nt,e)}catch(w){}a=!0}return a}finally{yt=s,Oo.transition=t}}return!1}function _c(e,t,r){e=zn(e,t=pl(0,t=cl(r,t),1),1),t=tc(),null!==e&&(bt(e,1,t),ac(e,t))}function kc(e,t,r){if(3===e.tag)_c(e,e,r);else for(;null!==t;){if(3===t.tag){_c(t,e,r);break}if(1===t.tag){var s=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof s.componentDidCatch&&(null===Ho||!Ho.has(s))){t=zn(t,e=hl(t,e=cl(r,e),1),1),e=tc(),null!==t&&(bt(t,1,e),ac(t,e));break}}t=t.return}}function Sc(e,t,r){var s=e.pingCache;null!==s&&s.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&r,Po===e&&(Ao&r)===r&&(4===Io||3===Io&&(130023424&Ao)===Ao&&500>Qe()-Bo?pc(e,0):Fo|=r),ac(e,t)}function Cc(e,t){0===t&&(1&e.mode?(t=ut,!(130023424&(ut<<=1))&&(ut=4194304)):t=1);var r=tc();null!==(e=In(e,t))&&(bt(e,t,r),ac(e,r))}function Oc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Cc(e,r)}function Ec(e,t){var s=0;switch(e.tag){case 13:var a=e.stateNode,n=e.memoizedState;null!==n&&(s=n.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(r(314))}null!==a&&a.delete(t),Cc(e,s)}function Pc(e,t){return Ge(e,t)}function Tc(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,r,s){return new Tc(e,t,r,s)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var r=e.alternate;return null===r?((r=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ic(e,t,s,a,n,i){var l=2;if(a=e,"function"==typeof e)Mc(e)&&(l=1);else if("string"==typeof e)l=5;else e:switch(e){case N:return Rc(s.children,n,i,t);case k:l=8,n|=8;break;case S:return(e=Ac(12,s,t,2|n)).elementType=S,e.lanes=i,e;case P:return(e=Ac(13,s,t,n)).elementType=P,e.lanes=i,e;case T:return(e=Ac(19,s,t,n)).elementType=T,e.lanes=i,e;case D:return $c(s,n,i,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case C:l=10;break e;case O:l=9;break e;case E:l=11;break e;case A:l=14;break e;case M:l=16,a=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=Ac(l,s,t,n)).elementType=e,t.type=a,t.lanes=i,t}function Rc(e,t,r,s){return(e=Ac(7,e,s,t)).lanes=r,e}function $c(e,t,r,s){return(e=Ac(22,e,s,t)).elementType=D,e.lanes=r,e.stateNode={isHidden:!1},e}function Lc(e,t,r){return(e=Ac(6,e,null,t)).lanes=r,e}function Fc(e,t,r){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Uc(e,t,r,s,a,n,i,l,o){return e=new zc(e,t,r,l,o),1===t?(t=1,!0===n&&(t|=8)):t=0,n=Ac(3,null,null,t),e.current=n,n.stateNode=e,n.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$n(n),e}function Bc(e){if(!e)return Ca;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Aa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var s=e.type;if(Aa(s))return Ia(e,s,t)}return t}function qc(e,t,r,s,a,n,i,l,o){return(e=Uc(r,s,!0,e,0,n,0,l,o)).context=Bc(null),r=e.current,(n=Fn(s=tc(),a=rc(r))).callback=null!=t?t:null,zn(r,n,a),e.current.lanes=a,bt(e,a,s),ac(e,s),e}function Wc(e,t,r,s){var a=t.current,n=tc(),i=rc(a);return r=Bc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Fn(n,i)).payload={element:e},null!==(s=void 0===s?null:s)&&(t.callback=s),null!==(e=zn(a,t,i))&&(sc(e,a,i,n),Un(e,a,i)),i}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Hc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}_o=function(e,t,s){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ea.current)vl=!0;else{if(0===(e.lanes&s)&&!(128&t.flags))return vl=!1,function(e,t,r){switch(t.tag){case 3:El(t),hn();break;case 5:Qn(t);break;case 1:Aa(t.type)&&Ra(t);break;case 4:Jn(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;Sa(Nn,s._currentValue),s._currentValue=a;break;case 13:if(null!==(s=t.memoizedState))return null!==s.dehydrated?(Sa(ei,1&ei.current),t.flags|=128,null):0!==(r&t.child.childLanes)?$l(e,t,r):(Sa(ei,1&ei.current),null!==(e=Wl(e,t,r))?e.sibling:null);Sa(ei,1&ei.current);break;case 19:if(s=0!==(r&t.childLanes),128&e.flags){if(s)return Bl(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Sa(ei,ei.current),s)break;return null;case 22:case 23:return t.lanes=0,_l(e,t,r)}return Wl(e,t,r)}(e,t,s);vl=!!(131072&e.flags)}else vl=!1,an&&1048576&t.flags&&Xa(t,Va,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;ql(e,t),e=t.pendingProps;var n=Ta(t,Oa.current);Pn(t,s),n=fi(null,t,a,e,n,s);var i=gi();return t.flags|=1,"object"==typeof n&&null!==n&&"function"==typeof n.render&&void 0===n.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Aa(a)?(i=!0,Ra(t)):i=!1,t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,$n(t),n.updater=al,t.stateNode=n,n._reactInternals=t,ol(t,a,e,s),t=Ol(null,t,a,!0,i,s)):(t.tag=0,an&&i&&en(t),yl(null,t,n,s),t=t.child),t;case 16:a=t.elementType;e:{switch(ql(e,t),e=t.pendingProps,a=(n=a._init)(a._payload),t.type=a,n=t.tag=function(e){if("function"==typeof e)return Mc(e)?1:0;if(null!=e){if((e=e.$$typeof)===E)return 11;if(e===A)return 14}return 2}(a),e=rl(a,e),n){case 0:t=Sl(null,t,a,e,s);break e;case 1:t=Cl(null,t,a,e,s);break e;case 11:t=jl(null,t,a,e,s);break e;case 14:t=wl(null,t,a,rl(a.type,e),s);break e}throw Error(r(306,a,""))}return t;case 0:return a=t.type,n=t.pendingProps,Sl(e,t,a,n=t.elementType===a?n:rl(a,n),s);case 1:return a=t.type,n=t.pendingProps,Cl(e,t,a,n=t.elementType===a?n:rl(a,n),s);case 3:e:{if(El(t),null===e)throw Error(r(387));a=t.pendingProps,n=(i=t.memoizedState).element,Ln(e,t),qn(t,a,null,s);var l=t.memoizedState;if(a=l.element,i.isDehydrated){if(i={element:a,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Pl(e,t,a,s,n=cl(Error(r(423)),t));break e}if(a!==n){t=Pl(e,t,a,s,n=cl(Error(r(424)),t));break e}for(sn=ca(t.stateNode.containerInfo.firstChild),rn=t,an=!0,nn=null,s=wn(t,null,a,s),t.child=s;s;)s.flags=-3&s.flags|4096,s=s.sibling}else{if(hn(),a===n){t=Wl(e,t,s);break e}yl(e,t,a,s)}t=t.child}return t;case 5:return Qn(t),null===e&&dn(t),a=t.type,n=t.pendingProps,i=null!==e?e.memoizedProps:null,l=n.children,ra(a,n)?l=null:null!==i&&ra(a,i)&&(t.flags|=32),kl(e,t),yl(e,t,l,s),t.child;case 6:return null===e&&dn(t),null;case 13:return $l(e,t,s);case 4:return Jn(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=jn(t,null,a,s):yl(e,t,a,s),t.child;case 11:return a=t.type,n=t.pendingProps,jl(e,t,a,n=t.elementType===a?n:rl(a,n),s);case 7:return yl(e,t,t.pendingProps,s),t.child;case 8:case 12:return yl(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(a=t.type._context,n=t.pendingProps,i=t.memoizedProps,l=n.value,Sa(Nn,a._currentValue),a._currentValue=l,null!==i)if(ls(i.value,l)){if(i.children===n.children&&!Ea.current){t=Wl(e,t,s);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var o=i.dependencies;if(null!==o){l=i.child;for(var c=o.firstContext;null!==c;){if(c.context===a){if(1===i.tag){(c=Fn(-1,s&-s)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,null!==(c=i.alternate)&&(c.lanes|=s),En(i.return,s,t),o.lanes|=s;break}c=c.next}}else if(10===i.tag)l=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(l=i.return))throw Error(r(341));l.lanes|=s,null!==(o=l.alternate)&&(o.lanes|=s),En(l,s,t),l=i.sibling}else l=i.child;if(null!==l)l.return=i;else for(l=i;null!==l;){if(l===t){l=null;break}if(null!==(i=l.sibling)){i.return=l.return,l=i;break}l=l.return}i=l}yl(e,t,n.children,s),t=t.child}return t;case 9:return n=t.type,a=t.pendingProps.children,Pn(t,s),a=a(n=Tn(n)),t.flags|=1,yl(e,t,a,s),t.child;case 14:return n=rl(a=t.type,t.pendingProps),wl(e,t,a,n=rl(a.type,n),s);case 15:return Nl(e,t,t.type,t.pendingProps,s);case 17:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:rl(a,n),ql(e,t),t.tag=1,Aa(a)?(e=!0,Ra(t)):e=!1,Pn(t,s),il(t,a,n),ol(t,a,n,s),Ol(null,t,a,!0,e,s);case 19:return Bl(e,t,s);case 22:return _l(e,t,s)}throw Error(r(156,t.tag))};var Gc="function"==typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function ed(e,t,r,s,a){var n=r._reactRootContainer;if(n){var i=n;if("function"==typeof a){var l=a;a=function(){var e=Kc(i);l.call(e)}}Wc(t,i,e,a)}else i=function(e,t,r,s,a){if(a){if("function"==typeof s){var n=s;s=function(){var e=Kc(i);n.call(e)}}var i=qc(t,s,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[ha]=i.current,Bs(8===e.nodeType?e.parentNode:e),uc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"==typeof s){var l=s;s=function(){var e=Kc(o);l.call(e)}}var o=Uc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=o,e[ha]=o.current,Bs(8===e.nodeType?e.parentNode:e),uc(function(){Wc(t,o,r,s)}),o}(r,t,e,a,s);return Kc(i)}Jc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));Wc(e,t,null,null)},Jc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Wc(null,e,null,null)}),t[ha]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Dt.length&&0!==t&&t<Dt[r].priority;r++);Dt.splice(r,0,e),0===r&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=mt(t.pendingLanes);0!==r&&(vt(t,1|r),ac(t,Qe()),!(6&Eo)&&(qo=Qe()+500,Ba()))}break;case 13:uc(function(){var t=In(e,1);if(null!==t){var r=tc();sc(t,e,1,r)}}),Hc(e,1)}},Nt=function(e){if(13===e.tag){var t=In(e,134217728);if(null!==t)sc(t,e,134217728,tc());Hc(e,134217728)}},_t=function(e){if(13===e.tag){var t=rc(e),r=In(e,t);if(null!==r)sc(r,e,t,tc());Hc(e,t)}},kt=function(){return yt},St=function(e,t){var r=yt;try{return yt=e,t()}finally{yt=r}},Ne=function(e,t,s){switch(t){case"input":if(X(e,s),t=s.name,"radio"===s.type&&null!=t){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==e&&a.form===e.form){var n=ja(a);if(!n)throw Error(r(90));G(a),X(a,n)}}}break;case"textarea":ie(e,s);break;case"select":null!=(t=s.value)&&se(e,!!s.multiple,t,!1)}},Ee=dc,Pe=uc;var td={usingClientEntryPoint:!1,Events:[va,ya,ja,Ce,Oe,dc]},rd={findFiberByHostInstance:ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sd={bundleType:rd.bundleType,version:rd.version,rendererPackageName:rd.rendererPackageName,rendererConfig:rd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:rd.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{nt=ad.inject(sd),it=ad}catch(ue){}}return j.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=td,j.createPortal=function(e,t){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(r(200));return function(e,t,r){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==s?null:""+s,children:e,containerInfo:t,implementation:r}}(e,t,null,s)},j.createRoot=function(e,t){if(!Zc(e))throw Error(r(299));var s=!1,a="",n=Gc;return null!=t&&(!0===t.unstable_strictMode&&(s=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(n=t.onRecoverableError)),t=Uc(e,1,!1,null,0,s,0,a,n),e[ha]=t.current,Bs(8===e.nodeType?e.parentNode:e),new Yc(t)},j.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},j.flushSync=function(e){return uc(e)},j.hydrate=function(e,t,s){if(!Qc(t))throw Error(r(200));return ed(null,e,t,!0,s)},j.hydrateRoot=function(e,t,s){if(!Zc(e))throw Error(r(405));var a=null!=s&&s.hydratedSources||null,n=!1,i="",l=Gc;if(null!=s&&(!0===s.unstable_strictMode&&(n=!0),void 0!==s.identifierPrefix&&(i=s.identifierPrefix),void 0!==s.onRecoverableError&&(l=s.onRecoverableError)),t=qc(t,null,e,1,null!=s?s:null,n,0,i,l),e[ha]=t.current,Bs(e),a)for(e=0;e<a.length;e++)n=(n=(s=a[e])._getVersion)(s._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[s,n]:t.mutableSourceEagerHydrationData.push(s,n);return new Jc(t)},j.render=function(e,t,s){if(!Qc(t))throw Error(r(200));return ed(null,e,t,!1,s)},j.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(r(40));return!!e._reactRootContainer&&(uc(function(){ed(null,null,e,!1,function(){e._reactRootContainer=null,e[ha]=null})}),!0)},j.unstable_batchedUpdates=dc,j.unstable_renderSubtreeIntoContainer=function(e,t,s,a){if(!Qc(s))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return ed(e,t,s,!1,a)},j.version="18.3.1-next-f1338f8080-20240426",j}function S(){if(g)return y.exports;return g=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),y.exports=k(),y.exports}var C,O,E=function(){if(b)return v;b=1;var e=S();return v.createRoot=e.createRoot,v.hydrateRoot=e.hydrateRoot,v}(),P=S();function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},T.apply(this,arguments)}(O=C||(C={})).Pop="POP",O.Push="PUSH",O.Replace="REPLACE";const A="popstate";function M(e){return void 0===e&&(e={}),function(e,t,r,s){void 0===s&&(s={});let{window:a=document.defaultView,v5Compat:n=!1}=s,i=a.history,l=C.Pop,o=null,c=d();null==c&&(c=0,i.replaceState(T({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function u(){l=C.Pop;let e=d(),t=null==e?null:e-c;c=e,o&&o({action:l,location:x.location,delta:t})}function m(e,t){l=C.Push;let r=$(x.location,e,t);c=d()+1;let s=R(r,c),u=x.createHref(r);try{i.pushState(s,"",u)}catch(m){if(m instanceof DOMException&&"DataCloneError"===m.name)throw m;a.location.assign(u)}n&&o&&o({action:l,location:x.location,delta:1})}function p(e,t){l=C.Replace;let r=$(x.location,e,t);c=d();let s=R(r,c),a=x.createHref(r);i.replaceState(s,"",a),n&&o&&o({action:l,location:x.location,delta:0})}function h(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,r="string"==typeof e?e:L(e);return r=r.replace(/ $/,"%20"),D(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}let x={get action(){return l},get location(){return e(a,i)},listen(e){if(o)throw new Error("A history only accepts one active listener");return a.addEventListener(A,u),o=e,()=>{a.removeEventListener(A,u),o=null}},createHref:e=>t(a,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:m,replace:p,go:e=>i.go(e)};return x}(function(e,t){let{pathname:r,search:s,hash:a}=e.location;return $("",{pathname:r,search:s,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:L(t)},0,e)}function D(e,t){if(!1===e||null==e)throw new Error(t)}function I(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(dF){}}}function R(e,t){return{usr:e.state,key:e.key,idx:t}}function $(e,t,r,s){return void 0===r&&(r=null),T({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?F(t):t,{state:r,key:t&&t.key||s||Math.random().toString(36).substr(2,8)})}function L(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),s&&"#"!==s&&(t+="#"===s.charAt(0)?s:"#"+s),t}function F(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}var z,U;function B(e,t,r){return void 0===r&&(r="/"),function(e,t,r){let s="string"==typeof t?F(t):t,a=re(s.pathname||"/",r);if(null==a)return null;let n=q(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(n);let i=null;for(let l=0;null==i&&l<n.length;++l){let e=te(a);i=X(n[l],e)}return i}(e,t,r)}function q(e,t,r,s){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===s&&(s="");let a=(e,a,n)=>{let i={relativePath:void 0===n?e.path||"":n,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(D(i.relativePath.startsWith(s),'Absolute route path "'+i.relativePath+'" nested under path "'+s+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(s.length));let l=ce([s,i.relativePath]),o=r.concat(i);e.children&&e.children.length>0&&(D(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),q(e.children,t,o,l)),(null!=e.path||e.index)&&t.push({path:l,score:Q(l,e.index),routesMeta:o})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let s of W(e.path))a(e,t,s);else a(e,t)}),t}function W(e){let t=e.split("/");if(0===t.length)return[];let[r,...s]=t,a=r.endsWith("?"),n=r.replace(/\?$/,"");if(0===s.length)return a?[n,""]:[n];let i=W(s.join("/")),l=[];return l.push(...i.map(e=>""===e?n:[n,e].join("/"))),a&&l.push(...i),l.map(t=>e.startsWith("/")&&""===t?"/":t)}(U=z||(z={})).data="data",U.deferred="deferred",U.redirect="redirect",U.error="error";const K=/^:[\w-]+$/,V=3,H=2,G=1,Y=10,J=-2,Z=e=>"*"===e;function Q(e,t){let r=e.split("/"),s=r.length;return r.some(Z)&&(s+=J),t&&(s+=H),r.filter(e=>!Z(e)).reduce((e,t)=>e+(K.test(t)?V:""===t?G:Y),s)}function X(e,t,r){let{routesMeta:s}=e,a={},n="/",i=[];for(let l=0;l<s.length;++l){let e=s[l],r=l===s.length-1,o="/"===n?t:t.slice(n.length)||"/",c=ee({path:e.relativePath,caseSensitive:e.caseSensitive,end:r},o),d=e.route;if(!c)return null;Object.assign(a,c.params),i.push({params:a,pathname:ce([n,c.pathname]),pathnameBase:de(ce([n,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(n=ce([n,c.pathnameBase]))}return i}function ee(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);I("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(s.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(s.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let n=new RegExp(a,t?void 0:"i");return[n,s]}(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let n=a[0],i=n.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((e,t,r)=>{let{paramName:s,isOptional:a}=t;if("*"===s){let e=l[r]||"";i=n.slice(0,n.length-e.length).replace(/(.)\/+$/,"$1")}const o=l[r];return e[s]=a&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{}),pathname:n,pathnameBase:i,pattern:e}}function te(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return I(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function re(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&"/"!==s?null:e.slice(r)||"/"}const se=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function ae(e,t){void 0===t&&(t="/");let r,{pathname:s,search:a="",hash:n=""}="string"==typeof e?F(e):e;if(s)if(i=s,se.test(i))r=s;else{if(s.includes("//")){let e=s;s=s.replace(/\/\/+/g,"/"),I(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+s)}r=s.startsWith("/")?ne(s.substring(1),"/"):ne(s,t)}else r=t;var i;return{pathname:r,search:ue(a),hash:me(n)}}function ne(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}function ie(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function le(e,t){let r=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function oe(e,t,r,s){let a;void 0===s&&(s=!1),"string"==typeof e?a=F(e):(a=T({},e),D(!a.pathname||!a.pathname.includes("?"),ie("?","pathname","search",a)),D(!a.pathname||!a.pathname.includes("#"),ie("#","pathname","hash",a)),D(!a.search||!a.search.includes("#"),ie("#","search","hash",a)));let n,i=""===e||""===a.pathname,l=i?"/":a.pathname;if(null==l)n=r;else{let e=t.length-1;if(!s&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}n=e>=0?t[e]:"/"}let o=ae(a,n),c=l&&"/"!==l&&l.endsWith("/"),d=(i||"."===l)&&r.endsWith("/");return o.pathname.endsWith("/")||!c&&!d||(o.pathname+="/"),o}const ce=e=>e.join("/").replace(/\/\/+/g,"/"),de=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ue=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",me=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const pe=["post","put","patch","delete"];new Set(pe);const he=["get",...pe];function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},xe.apply(this,arguments)}new Set(he);const fe=u.createContext(null),ge=u.createContext(null),be=u.createContext(null),ve=u.createContext(null),ye=u.createContext({outlet:null,matches:[],isDataRoute:!1}),je=u.createContext(null);function we(){return null!=u.useContext(ve)}function Ne(){return we()||D(!1),u.useContext(ve).location}function _e(e){u.useContext(be).static||u.useLayoutEffect(e)}function ke(){let{isDataRoute:e}=u.useContext(ye);return e?function(){let{router:e}=function(){let e=u.useContext(fe);return e||D(!1),e}(De.UseNavigateStable),t=Re(Ie.UseNavigateStable),r=u.useRef(!1);return _e(()=>{r.current=!0}),u.useCallback(function(s,a){void 0===a&&(a={}),r.current&&("number"==typeof s?e.navigate(s):e.navigate(s,xe({fromRouteId:t},a)))},[e,t])}():function(){we()||D(!1);let e=u.useContext(fe),{basename:t,future:r,navigator:s}=u.useContext(be),{matches:a}=u.useContext(ye),{pathname:n}=Ne(),i=JSON.stringify(le(a,r.v7_relativeSplatPath)),l=u.useRef(!1);return _e(()=>{l.current=!0}),u.useCallback(function(r,a){if(void 0===a&&(a={}),!l.current)return;if("number"==typeof r)return void s.go(r);let o=oe(r,JSON.parse(i),n,"path"===a.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:ce([t,o.pathname])),(a.replace?s.replace:s.push)(o,a.state,a)},[t,s,i,n,e])}()}const Se=u.createContext(null);function Ce(){let{matches:e}=u.useContext(ye),t=e[e.length-1];return t?t.params:{}}function Oe(e,t){let{relative:r}=void 0===t?{}:t,{future:s}=u.useContext(be),{matches:a}=u.useContext(ye),{pathname:n}=Ne(),i=JSON.stringify(le(a,s.v7_relativeSplatPath));return u.useMemo(()=>oe(e,JSON.parse(i),n,"path"===r),[e,i,n,r])}function Ee(e,t){return function(e,t,r,s){we()||D(!1);let{navigator:a}=u.useContext(be),{matches:n}=u.useContext(ye),i=n[n.length-1],l=i?i.params:{};!i||i.pathname;let o=i?i.pathnameBase:"/";i&&i.route;let c,d=Ne();if(t){var m;let e="string"==typeof t?F(t):t;"/"===o||(null==(m=e.pathname)?void 0:m.startsWith(o))||D(!1),c=e}else c=d;let p=c.pathname||"/",h=p;if("/"!==o){let e=o.replace(/^\//,"").split("/");h="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=B(e,{pathname:h}),f=function(e,t,r,s){var a;void 0===t&&(t=[]);void 0===r&&(r=null);void 0===s&&(s=null);if(null==e){var n;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(n=s)&&n.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let i=e,l=null==(a=r)?void 0:a.errors;if(null!=l){let e=i.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||D(!1),i=i.slice(0,Math.min(i.length,e+1))}let o=!1,c=-1;if(r&&s&&s.v7_partialHydration)for(let d=0;d<i.length;d++){let e=i[d];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=d),e.route.id){let{loaderData:t,errors:s}=r,a=e.route.loader&&void 0===t[e.route.id]&&(!s||void 0===s[e.route.id]);if(e.route.lazy||a){o=!0,i=c>=0?i.slice(0,c+1):[i[0]];break}}}return i.reduceRight((e,s,a)=>{let n,d=!1,m=null,p=null;var h;r&&(n=l&&s.route.id?l[s.route.id]:void 0,m=s.route.errorElement||Te,o&&(c<0&&0===a?($e[h="route-fallback"]||($e[h]=!0),d=!0,p=null):c===a&&(d=!0,p=s.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,a+1)),f=()=>{let t;return t=n?m:d?p:s.route.Component?u.createElement(s.route.Component,null):s.route.element?s.route.element:e,u.createElement(Me,{match:s,routeContext:{outlet:e,matches:x,isDataRoute:null!=r},children:t})};return r&&(s.route.ErrorBoundary||s.route.errorElement||0===a)?u.createElement(Ae,{location:r.location,revalidation:r.revalidation,component:m,error:n,children:f(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):f()},null)}(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:ce([o,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?o:ce([o,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),n,r,s);if(t&&f)return u.createElement(ve.Provider,{value:{location:xe({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:C.Pop}},f);return f}(e,t)}function Pe(){let e=function(){var e;let t=u.useContext(je),r=function(){let e=u.useContext(ge);return e||D(!1),e}(),s=Re();if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[s]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),r?u.createElement("pre",{style:s},r):null,null)}const Te=u.createElement(Pe,null);class Ae extends u.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?u.createElement(ye.Provider,{value:this.props.routeContext},u.createElement(je.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Me(e){let{routeContext:t,match:r,children:s}=e,a=u.useContext(fe);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),u.createElement(ye.Provider,{value:t},s)}var De=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(De||{}),Ie=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ie||{});function Re(e){let t=function(){let e=u.useContext(ye);return e||D(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||D(!1),r.route.id}const $e={};function Le(e){let{to:t,replace:r,state:s,relative:a}=e;we()||D(!1);let{future:n,static:i}=u.useContext(be),{matches:l}=u.useContext(ye),{pathname:o}=Ne(),c=ke(),d=oe(t,le(l,n.v7_relativeSplatPath),o,"path"===a),m=JSON.stringify(d);return u.useEffect(()=>c(JSON.parse(m),{replace:r,state:s,relative:a}),[c,m,a,r,s]),null}function Fe(e){return function(e){let t=u.useContext(ye).outlet;return t?u.createElement(Se.Provider,{value:e},t):t}(e.context)}function ze(e){D(!1)}function Ue(e){let{basename:t="/",children:r=null,location:s,navigationType:a=C.Pop,navigator:n,static:i=!1,future:l}=e;we()&&D(!1);let o=t.replace(/^\/*/,"/"),c=u.useMemo(()=>({basename:o,navigator:n,static:i,future:xe({v7_relativeSplatPath:!1},l)}),[o,l,n,i]);"string"==typeof s&&(s=F(s));let{pathname:d="/",search:m="",hash:p="",state:h=null,key:x="default"}=s,f=u.useMemo(()=>{let e=re(d,o);return null==e?null:{location:{pathname:e,search:m,hash:p,state:h,key:x},navigationType:a}},[o,d,m,p,h,x,a]);return null==f?null:u.createElement(be.Provider,{value:c},u.createElement(ve.Provider,{children:r,value:f}))}function Be(e){let{children:t,location:r}=e;return Ee(qe(t),r)}function qe(e,t){void 0===t&&(t=[]);let r=[];return u.Children.forEach(e,(e,s)=>{if(!u.isValidElement(e))return;let a=[...t,s];if(e.type===u.Fragment)return void r.push.apply(r,qe(e.props.children,a));e.type!==ze&&D(!1),e.props.index&&e.props.children&&D(!1);let n={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(n.children=qe(e.props.children,a)),r.push(n)}),r}function We(){return We=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},We.apply(this,arguments)}function Ke(e){return void 0===e&&(e=""),new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(e=>[r,e]):[[r,s]])},[]))}new Promise(()=>{});const Ve=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(dF){}const He=p.startTransition;function Ge(e){let{basename:t,children:r,future:s,window:a}=e,n=u.useRef();null==n.current&&(n.current=M({window:a,v5Compat:!0}));let i=n.current,[l,o]=u.useState({action:i.action,location:i.location}),{v7_startTransition:c}=s||{},d=u.useCallback(e=>{c&&He?He(()=>o(e)):o(e)},[o,c]);return u.useLayoutEffect(()=>i.listen(d),[i,d]),u.useEffect(()=>{return null==(e=s)||e.v7_startTransition,void(null==e||e.v7_relativeSplatPath);var e},[s]),u.createElement(Ue,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:i,future:s})}const Ye="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Je=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ze=u.forwardRef(function(e,t){let r,{onClick:s,relative:a,reloadDocument:n,replace:i,state:l,target:o,to:c,preventScrollReset:d,viewTransition:m}=e,p=function(e,t){if(null==e)return{};var r,s,a={},n=Object.keys(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,Ve),{basename:h}=u.useContext(be),x=!1;if("string"==typeof c&&Je.test(c)&&(r=c,Ye))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),r=re(t.pathname,h);t.origin===e.origin&&null!=r?c=r+t.search+t.hash:x=!0}catch(dF){}let f=function(e,t){let{relative:r}=void 0===t?{}:t;we()||D(!1);let{basename:s,navigator:a}=u.useContext(be),{hash:n,pathname:i,search:l}=Oe(e,{relative:r}),o=i;return"/"!==s&&(o="/"===i?s:ce([s,i])),a.createHref({pathname:o,search:l,hash:n})}(c,{relative:a}),g=function(e,t){let{target:r,replace:s,state:a,preventScrollReset:n,relative:i,viewTransition:l}=void 0===t?{}:t,o=ke(),c=Ne(),d=Oe(e,{relative:i});return u.useCallback(t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,r)){t.preventDefault();let r=void 0!==s?s:L(c)===L(d);o(e,{replace:r,state:a,preventScrollReset:n,relative:i,viewTransition:l})}},[c,o,d,s,a,r,e,n,i,l])}(c,{replace:i,state:l,target:o,preventScrollReset:d,relative:a,viewTransition:m});return u.createElement("a",We({},p,{href:r||f,onClick:x||n?s:function(e){s&&s(e),e.defaultPrevented||g(e)},ref:t,target:o}))});var Qe,Xe,et,tt;function rt(e){let t=u.useRef(Ke(e)),r=u.useRef(!1),s=Ne(),a=u.useMemo(()=>function(e,t){let r=Ke(e);return t&&t.forEach((e,s)=>{r.has(s)||t.getAll(s).forEach(e=>{r.append(s,e)})}),r}(s.search,r.current?null:t.current),[s.search]),n=ke(),i=u.useCallback((e,t)=>{const s=Ke("function"==typeof e?e(a):e);r.current=!0,n("?"+s,t)},[n,a]);return[a,i]}(Xe=Qe||(Qe={})).UseScrollRestoration="useScrollRestoration",Xe.UseSubmit="useSubmit",Xe.UseSubmitFetcher="useSubmitFetcher",Xe.UseFetcher="useFetcher",Xe.useViewTransitionState="useViewTransitionState",(tt=et||(et={})).UseFetcher="useFetcher",tt.UseFetchers="useFetchers",tt.UseScrollRestoration="useScrollRestoration";const st=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},at=(...e)=>e.filter((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),nt=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var it={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const lt=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:n,iconNode:i,...l},o)=>u.createElement("svg",{ref:o,...it,width:t,height:t,stroke:e,strokeWidth:s?24*Number(r)/Number(t):r,className:at("lucide",a),...!n&&!nt(l)&&{"aria-hidden":"true"},...l},[...i.map(([e,t])=>u.createElement(e,t)),...Array.isArray(n)?n:[n]])),ot=(e,t)=>{const r=u.forwardRef(({className:r,...s},a)=>{return u.createElement(lt,{ref:a,iconNode:t,className:at(`lucide-${n=st(e),n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...s});var n});return r.displayName=st(e),r},ct=ot("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),dt=ot("arrow-down-left",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]),ut=ot("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),mt=ot("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),pt=ot("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),ht=ot("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),xt=ot("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),ft=ot("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),gt=ot("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),bt=ot("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),vt=ot("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),yt=ot("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),jt=ot("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),wt=ot("chart-line",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),Nt=ot("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),_t=ot("chart-no-axes-column",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),kt=ot("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),St=ot("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Ct=ot("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Ot=ot("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Et=ot("chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]),Pt=ot("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Tt=ot("circle-arrow-up",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]),At=ot("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Mt=ot("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Dt=ot("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),It=ot("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Rt=ot("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),$t=ot("coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),Lt=ot("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Ft=ot("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),zt=ot("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),Ut=ot("diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]),Bt=ot("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),qt=ot("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Wt=ot("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Kt=ot("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Vt=ot("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Ht=ot("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Gt=ot("facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),Yt=ot("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Jt=ot("flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),Zt=ot("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),Qt=ot("gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]),Xt=ot("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),er=ot("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),tr=ot("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),rr=ot("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),sr=ot("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),ar=ot("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),nr=ot("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),ir=ot("instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),lr=ot("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),or=ot("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),cr=ot("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),dr=ot("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),ur=ot("linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),mr=ot("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),pr=ot("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),hr=ot("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),xr=ot("log-in",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),fr=ot("log-out",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),gr=ot("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),br=ot("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),vr=ot("medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),yr=ot("megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]),jr=ot("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),wr=ot("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),Nr=ot("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),_r=ot("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),kr=ot("moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Sr=ot("mouse-pointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]),Cr=ot("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),Or=ot("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),Er=ot("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),Pr=ot("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),Tr=ot("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),Ar=ot("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),Mr=ot("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),Dr=ot("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]),Ir=ot("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),Rr=ot("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),$r=ot("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Lr=ot("repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),Fr=ot("reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]),zr=ot("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),Ur=ot("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Br=ot("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),qr=ot("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Wr=ot("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Kr=ot("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Vr=ot("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Hr=ot("shopping-bag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Gr=ot("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Yr=ot("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),Jr=ot("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Zr=ot("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Qr=ot("store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]),Xr=ot("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),es=ot("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),ts=ot("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),rs=ot("ticket-percent",[["path",{d:"M2 9a3 3 0 1 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 1 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"1l48ns"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]),ss=ot("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),as=ot("trending-up",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),ns=ot("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),is=ot("trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),ls=ot("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),os=ot("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),cs=ot("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ds=ot("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),us=ot("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),ms=ot("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),ps=ot("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),hs=ot("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),xs=ot("youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),fs=ot("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function gs(e){const t=function(e){const t=`${e.message}|${e.timestamp}|${e.url}`;let r=0;for(let s=0;s<t.length;s++)r=(r<<5)-r+t.charCodeAt(s),r&=r;return`ERR-${Math.abs(r).toString(16).toUpperCase().slice(-8).padStart(8,"0")}`}(e),r=function(e){try{const t=JSON.stringify(e);return btoa(t)}catch(dF){return console.error("Failed to encode error info:",dF),""}}(e);window.location.replace(`/error?code=${t}&data=${r}`)}function bs(e,t,r,s){const a=function(e,t,r,s){return{message:"string"==typeof e?e:e.message,stack:"object"==typeof e?e.stack:void 0,timestamp:Date.now(),url:window.location.href,userAgent:navigator.userAgent,userId:s,component:t,action:r}}(e,t,r,s);gs(a)}var vs,ys,js={exports:{}},ws={};var Ns=(ys||(ys=1,js.exports=function(){if(vs)return ws;vs=1;var e=d(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function i(e,r,i){var l,o={},c=null,d=null;for(l in void 0!==i&&(c=""+i),void 0!==r.key&&(c=""+r.key),void 0!==r.ref&&(d=r.ref),r)s.call(r,l)&&!n.hasOwnProperty(l)&&(o[l]=r[l]);if(e&&e.defaultProps)for(l in r=e.defaultProps)void 0===o[l]&&(o[l]=r[l]);return{$$typeof:t,type:e,key:c,ref:d,props:o,_owner:a.current}}return ws.Fragment=r,ws.jsx=i,ws.jsxs=i,ws}()),js.exports);function _s({title:e,message:t}={}){const[r]=rt(),s=ke(),a=Ne(),[n,i]=u.useState(null),[l,o]=u.useState(!1),c=r.get("code")||"ERR-UNKNOWN",d=r.get("data");a.state;u.useEffect(()=>{if(d)try{const e=function(e){try{const t=atob(e);return JSON.parse(t)}catch(dF){return console.error("Failed to decode error info:",dF),null}}(d);i(e)}catch(e){console.error("Failed to decode error info:",e)}},[d]);return Ns.jsx("div",{className:"min-h-screen-dynamic bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center px-4",children:Ns.jsxs("div",{className:"max-w-lg w-full bg-pr-surface-card rounded-2xl shadow-xl overflow-hidden",children:[Ns.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 px-8 py-6 text-white",children:Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("div",{className:"w-12 h-12 bg-pr-surface-card/20 rounded-full flex items-center justify-center",children:Ns.jsx(ns,{className:"w-6 h-6"})}),Ns.jsxs("div",{children:[Ns.jsx("h1",{className:"text-2xl font-bold",children:"upload"===n?.component?"Upload Failed":"payment"===n?.component?"Payment Error":"auth"===n?.component?"Authentication Error":"create_content"===n?.action?"Content Creation Failed":"Something Went Wrong"}),Ns.jsxs("p",{className:"text-red-100 text-sm",children:["Error Code: ",c]})]})]})}),Ns.jsxs("div",{className:"px-8 py-6",children:[Ns.jsx("p",{className:"text-pr-text-2 mb-6 leading-relaxed",children:"upload"===n?.component?"We couldn't process your file upload. This might be due to file size, format, or network issues.":"payment"===n?.component?"There was an issue processing your payment. Your card was not charged.":"auth"===n?.component?"We couldn't verify your identity. Please try signing in again.":"create_content"===n?.action?"We couldn't create your content. Your data has been preserved and you can try again.":"We encountered an unexpected error. Our team has been automatically notified."}),Ns.jsx("div",{className:"bg-pr-surface-2 rounded-lg p-4 mb-6",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-medium text-pr-text-1",children:"Error Reference"}),Ns.jsx("p",{className:"text-lg font-mono text-pr-text-1",children:c})]}),Ns.jsxs("button",{onClick:async()=>{try{await navigator.clipboard.writeText(c),o(!0),setTimeout(()=>o(!1),2e3)}catch(e){console.error("Failed to copy error code:",e)}},className:"flex items-center space-x-1 px-3 py-2 bg-pr-surface-card rounded-lg hover:bg-pr-surface-2 transition-colors",children:[l?Ns.jsx(At,{className:"w-4 h-4 text-green-600"}):Ns.jsx(Lt,{className:"w-4 h-4 text-pr-text-2"}),Ns.jsx("span",{className:"text-sm text-pr-text-2",children:l?"Copied!":"Copy"})]})]})}),n&&Ns.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[Ns.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"What happened?"}),Ns.jsxs("p",{className:"text-sm text-blue-700 mb-2",children:["Time: ",(m=n.timestamp,new Date(m).toLocaleString())]}),n.action&&Ns.jsxs("p",{className:"text-sm text-blue-700",children:["Action: ",n.action.replace("_"," ")]})]}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsxs("button",{onClick:()=>{window.location.reload()},className:"w-full bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[Ns.jsx($r,{className:"w-5 h-5"}),Ns.jsx("span",{children:"Try Again"})]}),Ns.jsxs("button",{onClick:()=>{s("/dashboard")},className:"w-full bg-pr-surface-2 hover:bg-pr-surface-3 text-pr-text-1 px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[Ns.jsx(sr,{className:"w-5 h-5"}),Ns.jsx("span",{children:"Back to Home"})]})]}),Ns.jsx("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg",children:Ns.jsxs("p",{className:"text-sm text-yellow-800",children:[Ns.jsx("strong",{children:"Need help?"})," Share your error code ",Ns.jsx("span",{className:"font-mono",children:c})," with our support team for faster assistance."]})})]})]})});var m}const ks=e=>/^(https?:\/\/)?(localhost|127\.0\.0\.1|\[::1\])(?::\d+)?$/.test(e),Ss=(()=>{const e="https://api.promorang.co";if(!ks(e))return e;if("undefined"!=typeof window){const{origin:t}=window.location,r=ks(t);return r?e:r?"http://localhost:3001":t}return e})();console.group("API Configuration"),console.log("Environment:","production"),console.log("VITE_API_URL from env:","https://api.promorang.co"),console.log("Resolved API Base URL:",Ss),console.groupEnd();const Cs={defaultProvider:"stripe",stripePublishableKey:"",coinbaseCommerceKey:"",enabled:!0};"undefined"!=typeof window&&(window.__API_CONFIG={env:"production",viteApiUrl:"https://api.promorang.co",apiBase:Ss,payments:Cs,timestamp:(new Date).toISOString()});const Os=(()=>{if(!Ss)return"";return Ss.replace(/\/+$/,"").replace(/\/api$/,"")})();function Es(){const[e,t]=u.useState("daily"),[r,s]=u.useState([]),[a,n]=u.useState(!0);u.useEffect(()=>{i()},[e]);const i=async()=>{n(!0);try{const t=`${Os||""}/api/leaderboard/${e}`,r=await fetch(t,{credentials:"include"});if(!r.ok)throw new Error(`Leaderboard request failed with ${r.status}`);const a=await r.json();s(Array.isArray(a)?a:[])}catch(t){console.error("Failed to fetch leaderboard:",t),s([])}finally{n(!1)}},l=e=>{switch(e){case 1:return Ns.jsx(zt,{className:"w-6 h-6 text-yellow-500"});case 2:return Ns.jsx(vr,{className:"w-6 h-6 text-gray-400"});case 3:return Ns.jsx(vr,{className:"w-6 h-6 text-amber-600"});default:return Ns.jsxs("div",{className:"w-6 h-6 flex items-center justify-center text-pr-text-2 font-bold text-sm",children:["#",e]})}},o=e=>{switch(e){case 1:return"bg-pr-surface-card border-yellow-500/60";case 2:return"bg-pr-surface-card border-purple-500/50";case 3:return"bg-pr-surface-card border-orange-500/60";default:return"bg-pr-surface-card border-pr-border"}};return a?Ns.jsx("div",{className:"flex items-center justify-center h-64",children:Ns.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsx("div",{className:"flex items-center justify-between",children:Ns.jsxs("div",{children:[Ns.jsxs("h1",{className:"text-3xl font-bold text-pr-text-1 flex items-center space-x-3",children:[Ns.jsx(is,{className:"w-8 h-8 text-yellow-500"}),Ns.jsx("span",{children:"Leaderboard"})]}),Ns.jsx("p",{className:"text-pr-text-2 mt-2",children:"Top performers in the Promorang economy"})]})}),Ns.jsx("div",{className:"bg-pr-surface-card rounded-xl border border-pr-border p-6",children:Ns.jsx("div",{className:"flex space-x-4",children:[{key:"daily",label:"Today",icon:fs},{key:"weekly",label:"This Week",icon:as},{key:"monthly",label:"This Month",icon:Zr}].map(r=>{const s=r.icon;return Ns.jsxs("button",{onClick:()=>t(r.key),className:"flex items-center space-x-2 px-6 py-3 rounded-lg font-medium transition-all duration-200 "+(e===r.key?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg":"bg-pr-surface-2 text-pr-text-1 hover:bg-pr-surface-3"),children:[Ns.jsx(s,{className:"w-4 h-4"}),Ns.jsx("span",{children:r.label})]},r.key)})})}),Ns.jsxs("div",{className:"bg-pr-surface-card border border-pr-surface-3 rounded-xl p-6",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Composite Score Formula"}),Ns.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),Ns.jsx("span",{className:"text-sm text-pr-text-2",children:"Points  0.25"})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),Ns.jsx("span",{className:"text-sm text-pr-text-2",children:"Gems  0.40"})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),Ns.jsx("span",{className:"text-sm text-pr-text-2",children:"Keys  0.15"})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),Ns.jsx("span",{className:"text-sm text-pr-text-2",children:"Gold  0.20"})]})]})]}),Ns.jsx("div",{className:"space-y-3",children:r.length>0?r.map((e,t)=>{const r=t+1;return Ns.jsx("div",{className:`border rounded-xl p-6 transition-all duration-200 hover:shadow-md ${o(r)}`,children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-4",children:[l(r),Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("img",{src:e.avatar_url||"/default-avatar.png",alt:e.display_name,className:"w-12 h-12 rounded-full object-cover"}),Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"font-semibold text-pr-text-1",children:e.display_name||"Anonymous User"}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:["@",e.username||"user"]})]})]})]}),Ns.jsxs("div",{className:"flex items-center space-x-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Zr,{className:"w-4 h-4 text-blue-600"}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("p",{className:"font-semibold text-pr-text-1",children:e.points_earned.toLocaleString()}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Points"})]})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Ut,{className:"w-4 h-4 text-purple-600"}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("p",{className:"font-semibold text-pr-text-1",children:e.gems_earned.toLocaleString()}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Gems"})]})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(lr,{className:"w-4 h-4 text-orange-600"}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("p",{className:"font-semibold text-pr-text-1",children:e.keys_used}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Keys"})]})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(vr,{className:"w-4 h-4 text-yellow-600"}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("p",{className:"font-semibold text-pr-text-1",children:e.gold_collected}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Gold"})]})]}),Ns.jsxs("div",{className:"text-center ml-6 pl-6 border-l border-pr-surface-3",children:[Ns.jsx("p",{className:"text-xl font-bold text-pr-text-1",children:e.composite_score.toFixed(1)}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Score"})]})]})]})},e.id)}):Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx(is,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1 mb-2",children:"No Rankings Yet"}),Ns.jsx("p",{className:"text-pr-text-2 mb-4",children:"Be the first to earn points and climb the leaderboard!"}),Ns.jsxs("div",{className:"space-y-2 text-sm text-pr-text-2",children:[Ns.jsx("p",{children:" Complete drops to earn gems"}),Ns.jsx("p",{children:" Engage with content to earn points"}),Ns.jsx("p",{children:" Collect gold for prestige"})]})]})}),r.length>0&&Ns.jsxs("div",{className:"bg-pr-surface-card border border-pr-surface-3 rounded-xl p-6",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Competition Stats"}),Ns.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.reduce((e,t)=>e+t.points_earned,0).toLocaleString()}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Total Points"})]}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("p",{className:"text-2xl font-bold text-purple-600",children:r.reduce((e,t)=>e+t.gems_earned,0).toLocaleString()}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Total Gems"})]}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("p",{className:"text-2xl font-bold text-orange-600",children:r.reduce((e,t)=>e+t.keys_used,0)}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Keys Used"})]}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:r.reduce((e,t)=>e+t.gold_collected,0)}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Gold Earned"})]})]})]})]})}let Ps=class extends Error{constructor(e,r,s){super(e),t(this,"status"),t(this,"code"),t(this,"details"),t(this,"endpoint"),t(this,"timestamp"),t(this,"response"),t(this,"statusText"),t(this,"originalMessage"),this.name="ApiError",this.status=r,this.code=s.code,this.details=s.details,this.endpoint=s.endpoint,this.response=s.response,this.statusText=s.statusText,this.originalMessage=s.originalMessage,this.timestamp=(new Date).toISOString()}toJSON(){return{name:this.name,message:this.message,status:this.status,code:this.code,details:this.details,endpoint:this.endpoint,timestamp:this.timestamp,response:this.response,statusText:this.statusText,originalMessage:this.originalMessage}}};function Ts(){return localStorage.getItem("access_token")}async function As(e,t={}){const{returnRawResponse:r=!1,...s}=t;try{const a=`https://api.promorang.co/api${e}`;console.log(`API Request: ${t.method||"GET"} ${a}`);const n=function(){const e=Ts();return e?{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}:{"Content-Type":"application/json"}}(),i=new Headers({"Content-Type":"application/json",...n,...t.headers||{}});console.log("Request headers:",Object.fromEntries(i.entries()));const l=await fetch(a,{...s,headers:i,credentials:"include"});if(console.log(`API Response: ${l.status} ${l.statusText} for ${a}`),console.log("Response headers:",Object.fromEntries(l.headers.entries())),console.log(`API Response: ${l.status} ${l.statusText} for ${a}`),r)return l;const o=l.clone();let c;try{const e=await o.text();try{c=e?JSON.parse(e):{}}catch(dF){console.warn("Response is not JSON:",e),c={message:e}}}catch(dF){console.error("Failed to read response body:",dF),c={message:"Failed to read response"}}if(401===l.status)throw localStorage.removeItem("access_token"),new Ps(c.message||"Unauthorized - Please log in again",l.status,{code:c.code||"UNAUTHORIZED",details:c.details||"Authentication required",endpoint:e,response:c,statusText:l.statusText});if(!l.ok){const t=c?.message||c?.error||l.statusText||"An error occurred";throw new Ps(t,l.status,{code:c?.code||"API_ERROR",details:c,endpoint:e,statusText:l.statusText})}return c?void 0!==c.data?c.data:c:{status:l.status}}catch(a){if(a instanceof Ps)throw console.error("API Error:",a),a;throw console.error("API request failed:",a),new Ps(a instanceof Error?a.message:"An unknown error occurred",500,{code:"REQUEST_FAILED",details:a,endpoint:e,originalMessage:a instanceof Error?a.message:"Failed to process request"})}}const Ms=(e,t={})=>As(e,{...t,method:"GET"}),Ds=(e,t,r={})=>As(e,{...r,method:"POST",headers:{"Content-Type":"application/json",...r.headers},body:t?JSON.stringify(t):void 0}),Is=(e,t={})=>As(e,{...t,method:"DELETE"}),Rs=u.createContext(void 0),$s=({children:e})=>{const[t,r]=u.useState(null),[s,a]=u.useState(!0),n=ke();u.useEffect(()=>{(async()=>{try{const s=localStorage.getItem("access_token");if(console.log("checkSession: token exists?",!!s),!s)return;let a=!1;try{const e=1e3*JSON.parse(atob(s.split(".")[1])).exp;console.log("Token expiry:",new Date(e),"Current time:",new Date),a=e>Date.now()}catch(e){console.error("Failed to parse token:",e)}if(!a)return console.log("Token expired or invalid, removing"),void localStorage.removeItem("access_token");try{console.log("Fetching user profile from /users/me");const e=await Ms("/users/me");console.log("Profile response:",e);const t=e?.user||e?.data?.user||(e&&"object"==typeof e&&"id"in e?e:null);if(t&&t.id)return console.log("Setting user from session check:",t),void r(t);console.warn("No valid user data in profile response:",e)}catch(t){console.error("Failed to fetch user profile:",t)}}catch(t){console.error("Failed to check session:",t)}finally{a(!1)}})()},[]);const i=u.useCallback(async(e,t)=>{try{a(!0),console.log("Attempting to sign in with:",{email:e});const i=await Ds("/auth/login",{email:e,password:t});if(console.log("Login response:",i),i&&"object"==typeof i){const t=i.token||i?.data?.token,a=i.user||i?.data?.user;if(t){console.log("Setting access token:",t.substring(0,20)+"..."),function(e){localStorage.setItem("access_token",e)}(t);const i=localStorage.getItem("access_token");if(console.log("Token stored in localStorage:",i?"YES":"NO"),a)return r(a),console.log("Navigating to dashboard with user:",a.email),n("/dashboard"),{success:!0,user:a,token:t};try{const e=await Ms("/auth/me"),s=e.user||e?.data?.user;if(s)return r(s),n("/dashboard"),{success:!0,user:s,token:t}}catch(s){console.error("Failed to fetch user profile:",s)}return{success:!0,user:{id:"",email:e,username:e.split("@")[0],email_verified:!1},token:t,message:"Logged in but could not fetch full profile"}}}throw console.error("Unexpected response format:",i),new Error(i?.error?.message||i?.message||"Invalid response format from server")}catch(i){console.error("Sign in error:",i);const e=i instanceof Error?i.message:"Failed to sign in";return{success:!1,error:{message:e,code:"SIGN_IN_ERROR"},message:e}}finally{a(!1)}},[n]),l={creator:async()=>i("creator@demo.com","demo123"),investor:async()=>i("investor@demo.com","demo123"),advertiser:async()=>i("advertiser@demo.com","demo123"),operator:async()=>i("castleblack-demo@promorang.co","demo123"),merchant:async()=>i("merchant@demo.com","demo123")},o=u.useCallback(async()=>{try{a(!0);try{await Ds("/auth/logout",{})}catch(e){console.warn("Logout endpoint failed, continuing with client-side cleanup",e)}localStorage.removeItem("access_token"),r(null),n("/auth")}catch(e){console.error("Sign out error:",e),localStorage.removeItem("access_token"),r(null),n("/auth")}finally{a(!1)}},[n]),c={user:t,isLoading:s,signIn:i,signOut:o,demoLogin:l,isAuthenticated:!!t};return Ns.jsx(Rs.Provider,{value:c,children:e})},Ls=()=>{const e=u.useContext(Rs);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e};function Fs({username:e,userId:t,displayName:r,avatarUrl:s,className:a="",showAvatar:n=!0,size:i="md"}){const l={sm:"w-6 h-6 text-xs",md:"w-8 h-8 text-sm",lg:"w-10 h-10 text-base"};if(!e&&!t)return Ns.jsxs("div",{className:`flex items-center space-x-2 ${a}`,children:[n&&Ns.jsx("div",{className:`${l[i]} rounded-full overflow-hidden bg-pr-surface-3 flex items-center justify-center`,children:s?Ns.jsx("img",{src:s,alt:r||"User",className:"w-full h-full object-cover"}):Ns.jsx(ds,{className:"w-1/2 h-1/2 text-pr-text-2"})}),Ns.jsx("span",{className:"font-medium text-pr-text-1",children:r||"User"})]});const o=e?`/users/${e}`:t?`/users/id/${t}`:"#";return Ns.jsxs(Ze,{to:o,className:`flex items-center space-x-2 hover:text-orange-600 transition-colors ${a}`,children:[n&&Ns.jsx("div",{className:`${l[i]} rounded-full overflow-hidden bg-pr-surface-3 flex items-center justify-center`,children:s?Ns.jsx("img",{src:s,alt:r||e||`User #${t}`,className:"w-full h-full object-cover"}):Ns.jsx(ds,{className:"w-1/2 h-1/2 text-pr-text-2"})}),Ns.jsx("span",{className:"font-medium",children:r||e||`User #${t}`})]})}function zs({content:e,children:t,position:r="auto",delay:s=300,disabled:a=!1,className:n="",maxWidth:i,allowWrap:l=!0,compact:o=!1}){const[c,d]=u.useState(!1),[m,p]=u.useState("top"),h=u.useRef(null),x=u.useRef(null),f=u.useRef(null);u.useEffect(()=>()=>{h.current&&(clearTimeout(h.current),h.current=null)},[]);const g=()=>{a||(h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{d(!0),setTimeout(()=>(()=>{if(!x.current||!f.current)return;const e=x.current.getBoundingClientRect(),t=f.current.getBoundingClientRect(),s=window.innerWidth,a=window.innerHeight,n=e.top,i=a-e.bottom,l=e.left,o=s-e.right,c=t.height||40,d=t.width||120;let u="top";if("auto"===r)u=n>=c+8?"top":i>=c+8?"bottom":o>=d+8?"right":l>=d+8?"left":n>=i?"top":"bottom";else switch(r){case"top":u=n>=c+8?"top":"bottom";break;case"bottom":u=i>=c+8?"bottom":"top";break;case"left":u=l>=d+8?"left":"right";break;case"right":u=o>=d+8?"right":"left"}p(u)})(),0)},s))},b=()=>{d(!1),h.current&&clearTimeout(h.current)};return a||!e?Ns.jsx(Ns.Fragment,{children:t}):Ns.jsxs("div",{ref:x,className:`relative inline-block ${n}`,onMouseEnter:g,onMouseLeave:b,onFocus:g,onBlur:b,children:[t,c&&Ns.jsxs("div",{ref:f,className:`\n      absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg \n      pointer-events-none transition-all duration-200 ease-out leading-5\n      ${c?"opacity-100 scale-100":"opacity-0 scale-95"}\n     ${{top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2"}[m]}`,style:{maxWidth:(()=>{if(i)return i;const t="string"==typeof e?e.length:100;return o||t<20?"180px":t<40?"220px":t<80?"280px":"320px"})(),minWidth:o?"auto":"120px",whiteSpace:l?"normal":"nowrap",wordWrap:l?"break-word":"normal",hyphens:l?"auto":"none"},role:"tooltip","aria-hidden":!c,children:[e,Ns.jsx("div",{className:`absolute ${{top:"top-full left-1/2 transform -translate-x-1/2 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-900",left:"left-full top-1/2 transform -translate-y-1/2 border-t-4 border-b-4 border-l-4 border-transparent border-l-gray-900",right:"right-full top-1/2 transform -translate-y-1/2 border-t-4 border-b-4 border-r-4 border-transparent border-r-gray-900"}[m]}`})]})]})}function Us({isOpen:e,onClose:t,title:r,children:s,maxWidth:a="lg",showCloseButton:n=!0}){if(u.useEffect(()=>(e?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),()=>{document.body.classList.remove("modal-open")}),[e]),u.useEffect(()=>{const r=r=>{"Escape"===r.key&&e&&t()};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[e,t]),!e)return null;return Ns.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-black/50",onClick:t,children:Ns.jsxs("div",{className:`relative bg-white dark:bg-[#141414] rounded-[20px] shadow-2xl w-full ${{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","4xl":"max-w-4xl"}[a]} max-h-[85vh] overflow-hidden flex flex-col border border-pr-border`,onClick:e=>e.stopPropagation(),children:[(r||n)&&Ns.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-pr-surface-3 flex-shrink-0",children:[r&&Ns.jsx("h2",{className:"text-xl font-semibold text-pr-text-1",children:r}),n&&Ns.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-pr-text-2 hover:bg-pr-surface-2 rounded-lg transition-colors ml-auto",children:Ns.jsx(hs,{className:"w-5 h-5"})})]}),Ns.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-6",children:s})]})})}function Bs({isOpen:e,onClose:t}){const{user:r}=Ls(),[s,a]=u.useState([]),[n,i]=u.useState(!1);u.useEffect(()=>{e&&r&&l()},[e,r]);const l=async()=>{i(!0);try{const e=[{id:"1",type:"achievement",title:"Achievement Unlocked!",message:'You earned the "First Steps" achievement and received 50 gold!',timestamp:new Date(Date.now()-18e5),read:!1,data:{achievement:"first_steps",gold_reward:50}},{id:"2",type:"reward",title:"Points Earned",message:"You earned 25 points from sharing content!",timestamp:new Date(Date.now()-72e5),read:!1,data:{points_earned:25,action:"content_share"}},{id:"3",type:"system",title:"Master Key Activated",message:"Your master key for today has been activated. You can now apply to drops!",timestamp:new Date(Date.now()-144e5),read:!0},{id:"4",type:"social",title:"New Follower",message:"PromoCreator just followed you!",timestamp:new Date(Date.now()-288e5),read:!0,actionUrl:"/users/promocreator"}];a(e)}catch(e){console.error("Failed to fetch notifications:",e)}finally{i(!1)}},o=e=>{switch(e){case"achievement":return Ns.jsx(is,{className:"w-5 h-5 text-yellow-600"});case"reward":return Ns.jsx($t,{className:"w-5 h-5 text-blue-600"});case"system":return Ns.jsx(nr,{className:"w-5 h-5 text-purple-600"});case"social":return Ns.jsx(Zr,{className:"w-5 h-5 text-pink-600"});case"warning":return Ns.jsx(Pt,{className:"w-5 h-5 text-orange-600"});default:return Ns.jsx(xt,{className:"w-5 h-5 text-pr-text-2"})}},c=e=>{const t=(new Date).getTime()-e.getTime(),r=Math.floor(t/6e4),s=Math.floor(t/36e5),a=Math.floor(t/864e5);return r<60?`${r}m ago`:s<24?`${s}h ago`:`${a}d ago`},d=s.filter(e=>!e.read).length;return e?Ns.jsx(Us,{isOpen:e,onClose:t,maxWidth:"md",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex max-h-[80vh] flex-col overflow-hidden rounded-xl bg-pr-surface-card shadow-2xl",children:[Ns.jsxs("div",{className:"flex items-center justify-between border-b border-pr-surface-3 px-6 py-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(xt,{className:"h-6 w-6 text-orange-600"}),Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"Notifications"}),d>0&&Ns.jsx("span",{className:"rounded-full bg-orange-500 px-2 py-1 text-xs font-bold text-white",children:d})]}),Ns.jsx("button",{onClick:t,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close notifications",children:Ns.jsx(hs,{className:"h-5 w-5"})})]}),d>0&&Ns.jsx("div",{className:"border-b border-pr-border px-6 py-3",children:Ns.jsxs("button",{onClick:async()=>{a(e=>e.map(e=>({...e,read:!0})))},className:"flex items-center space-x-2 text-sm font-medium text-orange-600 transition-colors hover:text-orange-700",children:[Ns.jsx(St,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Mark all as read"})]})}),Ns.jsx("div",{className:"flex-1 overflow-y-auto",children:n?Ns.jsxs("div",{className:"p-6 text-center",children:[Ns.jsx("div",{className:"mx-auto mb-2 h-6 w-6 animate-spin rounded-full border-2 border-orange-500 border-t-transparent"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Loading notifications..."})]}):0===s.length?Ns.jsxs("div",{className:"p-6 text-center",children:[Ns.jsx(xt,{className:"mx-auto mb-3 h-12 w-12 text-gray-300"}),Ns.jsx("h3",{className:"mb-1 text-lg font-medium text-pr-text-1",children:"No notifications"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"You're all caught up!"})]}):Ns.jsx("div",{className:"divide-y divide-gray-100",children:s.map(e=>Ns.jsx("div",{className:"cursor-pointer p-4 transition-colors hover:bg-pr-surface-2 "+(e.read?"":"border-l-4 border-l-blue-500 bg-blue-50"),onClick:()=>{e.read||(async e=>{a(t=>t.map(t=>t.id===e?{...t,read:!0}:t))})(e.id),e.actionUrl&&(window.location.href=e.actionUrl)},children:Ns.jsxs("div",{className:"flex items-start space-x-3",children:[Ns.jsx("div",{className:"mt-1 flex-shrink-0",children:o(e.type)}),Ns.jsxs("div",{className:"min-w-0 flex-1",children:[Ns.jsxs("div",{className:"flex items-start justify-between",children:[Ns.jsx("h4",{className:"text-sm font-medium "+(e.read,"text-pr-text-1"),children:e.title}),Ns.jsx("span",{className:"ml-2 whitespace-nowrap text-xs text-pr-text-2",children:c(e.timestamp)})]}),Ns.jsx("p",{className:"mt-1 text-sm "+(e.read?"text-pr-text-2":"text-pr-text-1"),children:e.message}),e.data&&Ns.jsxs("div",{className:"mt-2 flex items-center space-x-4",children:[e.data.gold_reward&&Ns.jsxs("div",{className:"flex items-center space-x-1 rounded bg-yellow-100 px-2 py-1 text-xs text-yellow-700",children:[Ns.jsx(is,{className:"h-3 w-3"}),Ns.jsxs("span",{children:["+",e.data.gold_reward," Gold"]})]}),e.data.points_earned&&Ns.jsxs("div",{className:"flex items-center space-x-1 rounded bg-blue-100 px-2 py-1 text-xs text-blue-700",children:[Ns.jsx($t,{className:"h-3 w-3"}),Ns.jsxs("span",{children:["+",e.data.points_earned," Points"]})]})]})]})]})},e.id))})}),Ns.jsx("div",{className:"border-t border-pr-surface-3 bg-pr-surface-2 px-4 py-4",children:Ns.jsx("p",{className:"text-center text-xs text-pr-text-2",children:"Stay tuned for more updates and achievements!"})})]})}):null}function qs({groups:e,isActive:t,onNavClick:r,onLogout:s,onSearch:a}){const n=e.length>1;return Ns.jsxs("div",{className:"flex flex-col w-full h-full",children:[Ns.jsx("div",{className:"p-6 border-b border-pr-surface-3",children:Ns.jsxs(Ze,{to:"/dashboard",className:"flex items-center space-x-3 group",children:[Ns.jsx("img",{src:"https://mocha-cdn.com/0198f6f0-5737-78cb-955a-4b0907aa1065/Promorang_logo_FULL-02.png",alt:"Promorang",className:"h-10 w-10 transition-transform group-hover:scale-105"}),Ns.jsx("span",{className:"text-xl font-bold text-pr-text-1",children:"Promorang"})]})}),a&&Ns.jsx("div",{className:"p-3 border-b border-pr-surface-3",children:Ns.jsxs("button",{onClick:a,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium text-pr-text-2 hover:bg-pr-surface-2 hover:text-pr-text-1 transition-all duration-200 group",children:[Ns.jsx(Br,{className:"w-5 h-5 flex-shrink-0"}),Ns.jsx("span",{className:"flex-1 text-left",children:"Search"}),Ns.jsx("kbd",{className:"hidden xl:inline-flex items-center px-2 py-1 text-xs font-medium text-pr-text-2 bg-pr-surface-2 border border-pr-surface-3 rounded group-hover:bg-pr-surface-3",children:"K"})]})}),Ns.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-3",children:Ns.jsx("div",{className:"space-y-4",children:e.map(e=>Ns.jsxs("div",{className:"space-y-1",children:[n&&Ns.jsx("p",{className:"px-4 text-xs font-semibold uppercase tracking-wide text-pr-text-2/70",children:e.label}),e.items.map(e=>{const s=e.icon,a=t(e.href);return Ns.jsxs(Ze,{to:e.href,onClick:t=>{r&&r(e)&&t.preventDefault()},className:"flex items-center space-x-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 "+(a?"bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 shadow-sm":"text-pr-text-2 hover:bg-pr-surface-2 hover:text-pr-text-1"),children:[Ns.jsx(s,{className:"w-5 h-5 flex-shrink-0"}),Ns.jsx("span",{className:"truncate",children:e.name})]},e.name)})]},e.section))})}),Ns.jsxs("div",{className:"p-4 border-t border-pr-surface-3 space-y-3",children:[s&&Ns.jsxs("button",{type:"button",onClick:s,className:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-xs font-medium text-red-500 hover:text-red-400 hover:bg-red-500/5 border border-red-500/40 transition-colors",children:[Ns.jsx(fr,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Sign out"})]}),Ns.jsx("div",{className:"text-xs text-pr-text-2 text-center",children:" 2024 Promorang"})]})]})}function Ws({userData:e}){return Ns.jsx("div",{className:"flex flex-col w-full h-full overflow-y-auto",children:Ns.jsxs("div",{className:"p-6 space-y-6",children:[Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl border border-pr-border p-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Ns.jsx(as,{className:"w-5 h-5 text-orange-600"}),Ns.jsx("h3",{className:"font-semibold text-pr-text-1",children:"Trending Now"})]}),Ns.jsx("div",{className:"space-y-3",children:[{title:"Product Launch Campaign",engagement:"12.5K"},{title:"Creator Toolkit Guide",engagement:"8.2K"},{title:"Social Buzz Challenge",engagement:"6.7K"}].map((e,t)=>Ns.jsxs(Ze,{to:"/earn",className:"block p-3 rounded-lg hover:bg-pr-surface-2 transition-colors",children:[Ns.jsx("div",{className:"text-sm font-medium text-pr-text-1 mb-1",children:e.title}),Ns.jsxs("div",{className:"text-xs text-pr-text-2",children:[e.engagement," engaged"]})]},t))})]}),e&&Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-xl border border-pr-border p-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Ns.jsx(fs,{className:"w-5 h-5 text-orange-600"}),Ns.jsx("h3",{className:"font-semibold text-pr-text-1",children:"Your Stats"})]}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"Total Earnings"}),Ns.jsx("span",{className:"text-sm font-bold text-orange-600",children:((e?.points_balance||0)+(e?.gems_balance||0)).toLocaleString()})]}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"Tier"}),Ns.jsx("span",{className:"text-sm font-bold text-purple-600 capitalize",children:e?.user_tier||"Free"})]}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"Rank"}),Ns.jsxs("span",{className:"text-sm font-bold text-blue-600",children:["#",Math.floor(1e3*Math.random())+1]})]})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl border border-pr-border p-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Ns.jsx(Xt,{className:"w-5 h-5 text-purple-600"}),Ns.jsx("h3",{className:"font-semibold text-pr-text-1",children:"Hot Opportunities"})]}),Ns.jsx("div",{className:"space-y-3",children:[{title:"Product Review Blitz",reward:"120 gems",keys:4},{title:"Launch Day Sprint",reward:"95 gems",keys:3},{title:"Content Creation",reward:"150 gems",keys:5}].map((e,t)=>Ns.jsxs(Ze,{to:"/earn",className:"block p-3 rounded-lg hover:bg-pr-surface-2 transition-colors border border-pr-surface-3",children:[Ns.jsx("div",{className:"text-sm font-medium text-pr-text-1 mb-1",children:e.title}),Ns.jsxs("div",{className:"flex items-center justify-between text-xs",children:[Ns.jsx("span",{className:"text-purple-600 font-medium",children:e.reward}),Ns.jsxs("span",{className:"text-pr-text-2",children:[e.keys," keys"]})]})]},t))})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl border border-pr-border p-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Ns.jsx(is,{className:"w-5 h-5 text-yellow-600"}),Ns.jsx("h3",{className:"font-semibold text-pr-text-1",children:"Recent Achievements"})]}),Ns.jsx("div",{className:"space-y-2",children:[{name:"First Drop",icon:""},{name:"Social Butterfly",icon:""},{name:"Early Adopter",icon:""}].map((e,t)=>Ns.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-pr-surface-2",children:[Ns.jsx("span",{className:"text-2xl",children:e.icon}),Ns.jsx("span",{className:"text-sm font-medium text-pr-text-1",children:e.name})]},t))})]})]})})}function Ks({items:e,isActive:t,onMenuClick:r,showMobileMenu:s}){const a=e.slice(0,4);return Ns.jsxs("div",{className:"flex items-stretch bg-pr-surface-card bg-white dark:bg-[#141414] border-t border-pr-surface-3",children:[a.map(e=>{const r=e.icon;return Ns.jsxs(Ze,{to:e.href,className:"flex-1 flex flex-col items-center justify-center py-2 sm:py-3 px-1 transition-colors tap-target "+(t(e.href)?"text-orange-600":"text-gray-400 hover:text-pr-text-2"),children:[Ns.jsx(r,{className:"w-5 h-5 flex-shrink-0"}),Ns.jsx("span",{className:"text-xs mt-0.5 sm:mt-1 font-medium leading-tight truncate max-w-full",children:e.name})]},e.name)}),Ns.jsxs("button",{onClick:r,className:"flex-1 flex flex-col items-center justify-center py-2 sm:py-3 px-1 transition-colors tap-target "+(s?"text-orange-600":"text-gray-400 hover:text-pr-text-2"),"aria-label":"Open navigation menu",children:[Ns.jsx(jr,{className:"w-5 h-5 flex-shrink-0"}),Ns.jsx("span",{className:"text-xs mt-0.5 sm:mt-1 font-medium leading-tight truncate max-w-full",children:"More"})]})]})}function Vs({user:e,isOpen:t,onClose:r,onSuccess:s}){const[a,n]=u.useState("points"),[i,l]=u.useState(1),[o,c]=u.useState(!1),[d,m]=u.useState(null);if(!t||!e)return null;const p={points:{keys:500},gems:{keys:2}},h=()=>"points"===a?e.points_balance:e.gems_balance,x=()=>i*p[a].keys,f=h()>=x();return Ns.jsx(Us,{isOpen:t,onClose:r,maxWidth:"md",showCloseButton:!1,children:Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"Convert Currency"}),Ns.jsx("button",{onClick:r,className:"text-gray-400 hover:text-pr-text-2 transition-colors",children:Ns.jsx(hs,{className:"w-6 h-6"})})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-3",children:"Convert from:"}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Ns.jsxs("button",{onClick:()=>n("points"),className:"p-4 rounded-lg border-2 transition-colors "+("points"===a?"border-blue-500 bg-blue-50":"border-pr-surface-3 hover:border-pr-surface-3"),children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[Ns.jsx($t,{className:"w-5 h-5 text-blue-600"}),Ns.jsx("span",{className:"font-medium",children:"Points"})]}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:["Balance: ",e.points_balance]}),Ns.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"500 pts = 1 key"})]}),Ns.jsxs("button",{onClick:()=>n("gems"),className:"p-4 rounded-lg border-2 transition-colors "+("gems"===a?"border-purple-500 bg-purple-50":"border-pr-surface-3 hover:border-pr-surface-3"),children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[Ns.jsx(Zr,{className:"w-5 h-5 text-purple-600"}),Ns.jsx("span",{className:"font-medium",children:"Gems"})]}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:["Balance: ",e.gems_balance]}),Ns.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"2 gems = 1 key"})]})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Keys to get:"}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("button",{type:"button",onClick:()=>l(Math.max(1,i-1)),disabled:i<=1,className:"w-8 h-8 bg-pr-surface-3 hover:bg-pr-surface-3 disabled:opacity-50 disabled:cursor-not-allowed rounded text-pr-text-1 font-bold",children:"-"}),Ns.jsx("input",{type:"number",value:i,onChange:e=>l(Math.max(1,parseInt(e.target.value)||1)),min:"1",className:"flex-1 px-3 py-2 border border-pr-surface-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 text-center"}),Ns.jsx("button",{type:"button",onClick:()=>l(i+1),className:"w-8 h-8 bg-pr-surface-3 hover:bg-pr-surface-3 rounded text-pr-text-1 font-bold",children:"+"})]}),Ns.jsx("div",{className:"flex space-x-2 mt-2",children:[1,3,5,10].map(e=>Ns.jsxs("button",{onClick:()=>l(e),className:"px-3 py-1 text-xs bg-pr-surface-2 hover:bg-pr-surface-3 rounded-full text-pr-text-1",children:[e," key",e>1?"s":""]},e))})]}),Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-4",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:["points"===a?Ns.jsx($t,{className:"w-5 h-5 text-blue-600"}):Ns.jsx(Zr,{className:"w-5 h-5 text-purple-600"}),Ns.jsx("span",{className:"font-medium capitalize",children:a})]}),Ns.jsx(mt,{className:"w-4 h-4 text-gray-400"}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(lr,{className:"w-5 h-5 text-orange-600"}),Ns.jsx("span",{className:"font-medium",children:"Keys"})]})]}),Ns.jsxs("div",{className:"flex items-center justify-between text-lg font-bold",children:[Ns.jsxs("span",{className:"points"===a?"text-blue-600":"text-purple-600",children:["-",x().toLocaleString()]}),Ns.jsxs("span",{className:"text-orange-600",children:["+",i]})]}),Ns.jsxs("div",{className:"flex items-center justify-between text-sm text-pr-text-2 mt-2",children:[Ns.jsxs("span",{children:["Remaining: ",(h()-x()).toLocaleString()]}),Ns.jsxs("span",{children:["New total: ",e.keys_balance+i]})]})]}),"points"===a&&Ns.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Pt,{className:"w-4 h-4 text-blue-600"}),Ns.jsx("span",{className:"text-sm text-blue-700",children:"Daily limit: 3 keys from points conversion"})]})}),d&&Ns.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:Ns.jsx("p",{className:"text-sm text-red-700",children:d})}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 border border-pr-surface-3 rounded-lg text-pr-text-1 font-medium hover:bg-pr-surface-2 transition-colors",children:"Cancel"}),Ns.jsx("button",{onClick:async()=>{if(f&&!(i<1)){c(!0),m(null);try{const e=await fetch("/api/users/convert",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({from_currency:a,to_currency:"keys",amount:i})});if(e.ok)s(),r(),l(1);else{const t=await e.json();m(t.error||"Conversion failed")}}catch(e){console.error("Conversion failed:",e),m("Network error occurred")}finally{c(!1)}}},disabled:!f||o||i<1,className:"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2",children:o?Ns.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):Ns.jsxs(Ns.Fragment,{children:[Ns.jsx(At,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Convert"})]})})]})]})})}function Hs({user:e,isOpen:t,onClose:r,onSuccess:s}){const[a,n]=u.useState(!1),[i,l]=u.useState(null),[o,c]=u.useState(null);u.useEffect(()=>{t&&e&&d()},[t,e]);const d=async()=>{try{const e=await Ms("/users/master-key-status"),t=e&&"object"==typeof e&&"status"in e?e.status:e;t&&"object"==typeof t&&l(t)}catch(e){console.error("Failed to fetch master key status:",e)}};if(!t||!e)return null;const m=(e=>{switch(e){case"super":return{name:"Super",required:1,color:"text-yellow-400",bgColor:"bg-pr-surface-2"};case"premium":return{name:"Premium",required:2,color:"text-purple-400",bgColor:"bg-pr-surface-2"};default:return{name:"Free",required:5,color:"text-pr-text-2",bgColor:"bg-pr-surface-2"}}})("string"==typeof e.user_tier?e.user_tier:"free"),p=i?.is_activated||!1,h=!!i&&i.proof_drops_completed>=i.proof_drops_required;return Ns.jsx(Us,{isOpen:t,onClose:r,maxWidth:"lg",showCloseButton:!1,children:Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Vr,{className:"w-6 h-6 text-purple-600"}),Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"Master Key System"})]}),Ns.jsx("button",{onClick:r,className:"text-gray-400 hover:text-pr-text-2 transition-colors",children:Ns.jsx(hs,{className:"w-6 h-6"})})]}),Ns.jsxs("div",{className:`${m.bgColor} border border-purple-200 rounded-lg p-4`,children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Zr,{className:`w-5 h-5 ${m.color}`}),Ns.jsxs("span",{className:`font-semibold ${m.color}`,children:[m.name," Tier"]})]}),Ns.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m.color} bg-pr-surface-card`,children:[m.required," proof drop",m.required>1?"s":""," required"]})]}),Ns.jsxs("p",{className:"text-sm text-pr-text-1",children:["Complete ",m.required," proof drop",m.required>1?"s":""," daily to activate your Master Key and unlock the ability to apply for paid drops."]})]}),Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-4",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Ns.jsx("h3",{className:"font-semibold text-pr-text-1",children:"Today's Progress"}),Ns.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-medium border "+(p?"text-green-400 border-green-500/60 bg-pr-surface-1":"text-orange-400 border-orange-500/60 bg-pr-surface-1"),children:p?"Activated":"Not Activated"})]}),i&&Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("span",{className:"text-sm text-pr-text-2",children:"Proof Drops Completed"}),Ns.jsxs("span",{className:"font-semibold text-pr-text-1",children:[i.proof_drops_completed,"/",i.proof_drops_required]})]}),Ns.jsx("div",{className:"w-full bg-pr-surface-3 rounded-full h-2",children:Ns.jsx("div",{className:"h-2 rounded-full transition-all duration-300 "+(p?"bg-green-500":"bg-orange-500"),style:{width:`${Math.min(100,i.proof_drops_completed/i.proof_drops_required*100)}%`}})}),!p&&i.proof_drops_completed>0&&Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:[i.proof_drops_required-i.proof_drops_completed," more proof drop",i.proof_drops_required-i.proof_drops_completed>1?"s":""," needed"]})]})]}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsx("h3",{className:"font-semibold text-pr-text-1",children:"Master Key Benefits"}),Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(At,{className:"w-4 h-4 text-green-600"}),Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"Apply for paid drops using Keys"})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(At,{className:"w-4 h-4 text-green-600"}),Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"Earn Gems from completed drops"})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(At,{className:"w-4 h-4 text-green-600"}),Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"Access to premium opportunities"})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(At,{className:"w-4 h-4 text-green-600"}),Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"Higher earning potential"})]})]})]}),!p&&Ns.jsxs("div",{className:"bg-pr-surface-2 border border-pr-surface-3 rounded-lg p-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[Ns.jsx(fs,{className:"w-4 h-4 text-blue-400"}),Ns.jsx("span",{className:"font-medium text-pr-text-1",children:"How to Earn Proof Drops"})]}),Ns.jsxs("ul",{className:"text-sm text-pr-text-2 space-y-1",children:[Ns.jsx("li",{children:" Complete free social actions (likes, comments, shares)"}),Ns.jsx("li",{children:" Participate in community challenges"}),Ns.jsx("li",{children:" Engage with content daily"}),Ns.jsx("li",{children:" Maintain your daily streak"})]})]}),o&&Ns.jsx("div",{className:"bg-pr-surface-2 border border-red-500/60 rounded-lg p-3",children:Ns.jsx("p",{className:"text-sm text-red-400",children:o})}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 rounded-lg border border-pr-surface-3 text-pr-text-1 hover:bg-pr-surface-2 transition-colors",children:"Close"}),!p&&Ns.jsx("button",{onClick:async()=>{n(!0),c(null);try{const e=await Ds("/users/activate-master-key",{});!1!==e?.success?(await d(),s()):c(e?.error||"Activation failed")}catch(e){console.error("Master key activation failed:",e),c("Network error occurred")}finally{n(!1)}},disabled:!h||a,className:"flex-1 bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2",children:a?Ns.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):h?Ns.jsxs(Ns.Fragment,{children:[Ns.jsx(Vr,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Activate"})]}):Ns.jsxs(Ns.Fragment,{children:[Ns.jsx(Rt,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Complete Proofs"})]})}),p&&Ns.jsxs("div",{className:"flex-1 bg-pr-surface-2 border border-green-500/60 text-green-400 px-4 py-2 rounded-lg font-medium flex items-center justify-center space-x-2",children:[Ns.jsx(At,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Activated"})]})]})]})})}const Gs=e=>{if(!e)return"";const t=Object.entries(e).filter(([,e])=>null!=e);return 0===t.length?"":`?${new URLSearchParams(Object.fromEntries(t)).toString()}`},Ys=e=>encodeURIComponent(e),Js=e=>e?Ys(e.trim().toLowerCase().replace(/[^a-z0-9\s_-]/g,"").replace(/\s+/g,"-").replace(/-{2,}/g,"-").replace(/^[-_]+|[-_]+$/g,"")||"creator"):"creator",Zs=(e,t)=>`/profile/${Js(e)}${Gs(t)}`,Qs=e=>`/task/${Ys(e)}`;function Xs({user:e,isOpen:t,onClose:r,onSuccess:s}){const[a,n]=u.useState(1),[i,l]=u.useState(""),[o,c]=u.useState(!1),[d,m]=u.useState(!1),[p,h]=u.useState(null);if(!t||!e)return null;const x=e.username||(e.email?e.email.split("@")[0]:void 0)||"me",f=(e=>{switch(e){case"super":return 1e3;case"premium":return 750;default:return 500}})(e.user_tier);return Ns.jsx(Us,{isOpen:t,onClose:r,maxWidth:"md",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex flex-col gap-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between border-b border-pr-surface-3 pb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(ir,{className:"h-6 w-6 text-pink-600"}),Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"Instagram Verification"})]}),Ns.jsx("button",{onClick:r,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close instagram verification modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]}),1===a&&Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-br from-pink-500 to-purple-600",children:Ns.jsx(ir,{className:"h-8 w-8 text-white"})}),Ns.jsx("h3",{className:"mb-2 text-lg font-semibold text-pr-text-1",children:"Connect Your Instagram"}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:["Verify your Instagram account to earn ",f," PromoPoints monthly"]})]}),Ns.jsxs("div",{className:"rounded-lg border border-pink-200 bg-gradient-to-r from-pink-50 to-purple-50 p-4",children:[Ns.jsx("h4",{className:"mb-2 font-medium text-pink-900",children:"Monthly Benefits"}),Ns.jsxs("div",{className:"space-y-2 text-sm text-pink-700",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("span",{children:"Your Tier:"}),Ns.jsx("span",{className:"font-semibold capitalize",children:e.user_tier})]}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("span",{children:"Monthly Points:"}),Ns.jsxs("span",{className:"font-bold text-pink-600",children:[f," points"]})]}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("span",{children:"Key Equivalent:"}),Ns.jsxs("span",{className:"font-medium",children:[Math.floor(f/500)," keys"]})]})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"mb-2 block text-sm font-medium text-pr-text-1",children:"Instagram Username"}),Ns.jsx("input",{type:"text",value:i,onChange:e=>l(e.target.value),placeholder:"@yourusername",className:"w-full rounded-lg border border-pr-surface-3 px-4 py-2 focus:border-transparent focus:ring-2 focus:ring-pink-500"})]}),p&&Ns.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3",children:Ns.jsx("p",{className:"text-sm text-red-700",children:p})}),Ns.jsxs("div",{className:"mt-6 rounded-lg border border-blue-200 bg-gradient-to-r from-blue-50 to-cyan-50 p-4",children:[Ns.jsxs("h4",{className:"mb-2 flex items-center space-x-2 font-medium text-blue-900",children:[Ns.jsx(as,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Want Even More Rewards?"})]}),Ns.jsxs("p",{className:"mb-4 text-sm text-blue-700",children:["Try our new ",Ns.jsx("strong",{children:"Influence Rewards"})," program! Earn dynamic monthly points based on your actual follower count (followers  0.01)."]}),Ns.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ns.jsxs("div",{className:"space-y-1 text-blue-600",children:[Ns.jsx("div",{children:" 5,000 followers = 50 points/month"}),Ns.jsx("div",{children:" 10,000 followers = 100 points/month"}),Ns.jsx("div",{children:" 50,000 followers = 500 points/month"})]}),Ns.jsx("button",{onClick:()=>{r(),window.location.href=Zs(x,{openInfluenceRewards:"true"})},className:"rounded-lg bg-gradient-to-r from-blue-500 to-cyan-500 px-4 py-2 font-medium text-white transition-all duration-200 hover:from-blue-600 hover:to-cyan-600",children:"Learn More"})]})]}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsx("button",{onClick:r,className:"flex-1 rounded-lg border border-pr-surface-3 px-4 py-2 font-medium text-pr-text-1 transition-colors hover:bg-pr-surface-2",children:"Cancel"}),Ns.jsx("button",{onClick:async()=>{if(i.trim()){c(!0),h(null);try{const e=await fetch("/api/users/register-instagram",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({instagram_username:i})});if(e.ok)n(2);else{const t=await e.json();h(t.error||"Registration failed")}}catch(e){console.error("Instagram registration failed:",e),h("Network error occurred")}finally{c(!1)}}else h("Please enter your Instagram username")},disabled:o||!i.trim(),className:"flex-1 rounded-lg bg-gradient-to-r from-pink-500 to-purple-500 px-4 py-2 font-medium text-white transition-all duration-200 hover:from-pink-600 hover:to-purple-600 disabled:cursor-not-allowed disabled:opacity-50",children:o?"Registering...":"Continue"})]})]}),2===a&&Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-green-100",children:Ns.jsx(At,{className:"h-8 w-8 text-green-600"})}),Ns.jsx("h3",{className:"mb-2 text-lg font-semibold text-pr-text-1",children:"Send Verification DM"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Send a DM to @promorangco on Instagram with the word below"})]}),Ns.jsx("div",{className:"rounded-lg bg-pr-surface-2 p-4",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-medium text-pr-text-1",children:"Message to send:"}),Ns.jsx("code",{className:"mt-2 block rounded border bg-pr-surface-card px-3 py-2 font-mono text-lg",children:"promopoints"})]}),Ns.jsx("button",{onClick:()=>(async e=>{await navigator.clipboard.writeText(e),m(!0),setTimeout(()=>m(!1),2e3)})("promopoints"),className:"rounded bg-pr-surface-3 p-2 transition-colors hover:bg-pr-surface-3",title:"Copy message",children:d?Ns.jsx(St,{className:"h-4 w-4 text-green-600"}):Ns.jsx(Lt,{className:"h-4 w-4"})})]})}),Ns.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4",children:[Ns.jsx("h4",{className:"mb-2 font-medium text-blue-900",children:"Next Steps:"}),Ns.jsxs("ol",{className:"space-y-1 text-sm text-blue-700",children:[Ns.jsx("li",{children:"1. Open Instagram and go to @promorangco"}),Ns.jsxs("li",{children:["2. Send a DM with exactly: ",Ns.jsx("strong",{children:"promopoints"})]}),Ns.jsx("li",{children:"3. Wait for verification (usually within 24 hours)"}),Ns.jsx("li",{children:"4. Return here to claim your monthly points"})]})]}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsx("button",{onClick:async()=>{c(!0),h(null);try{const e=await fetch("/api/users/claim-instagram-points",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({})});if(e.ok)await e.json(),s(),r(),n(1),l("");else{const t=await e.json();h(t.error||"Failed to claim points")}}catch(e){console.error("Point claiming failed:",e),h("Network error occurred")}finally{c(!1)}},disabled:o,className:"w-full rounded-lg bg-gradient-to-r from-green-500 to-emerald-500 px-4 py-2 font-medium text-white transition-all duration-200 hover:from-green-600 hover:to-emerald-600 disabled:opacity-50",children:o?"Checking...":"Claim Points (if verified)"}),Ns.jsx("button",{onClick:()=>{n(1),l(""),h(null)},className:"w-full rounded-lg border border-pr-surface-3 px-4 py-2 font-medium text-pr-text-1 transition-colors hover:bg-pr-surface-2",children:"Try Different Username"})]}),Ns.jsxs("div",{className:"mt-6 rounded-lg border border-purple-200 bg-gradient-to-r from-purple-50 to-pink-50 p-4",children:[Ns.jsxs("h4",{className:"mb-2 flex items-center space-x-2 font-medium text-purple-900",children:[Ns.jsx(as,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Maximize Your Instagram Earning Potential!"})]}),Ns.jsxs("p",{className:"mb-4 text-sm text-purple-700",children:["While you wait for verification, explore our ",Ns.jsx("strong",{children:"Influence Rewards"})," program for dynamic monthly points based on your follower count."]}),Ns.jsx("button",{onClick:()=>{r(),window.location.href=Zs(x,{openInfluenceRewards:"true"})},className:"w-full rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-2 font-medium text-white transition-all duration-200 hover:from-purple-600 hover:to-pink-600",children:"Discover Influence Rewards"})]}),p&&Ns.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3",children:Ns.jsx("p",{className:"text-sm text-red-700",children:p})})]})]})})}const ea={free:{premium:{points:7500,gems:200},super:{points:15e3,gems:450}},premium:{super:{points:9e3,gems:275}},super:{}};function ta({user:e,isOpen:t,onClose:r,onSuccess:s}){const[a,n]=u.useState(ea),[i,l]=u.useState(""),[o,c]=u.useState("points"),[d,m]=u.useState(!1),[p,h]=u.useState(null),[x,f]=u.useState(!1);u.useEffect(()=>{t&&b()},[t]);const g=e=>{const t={...ea,...e||{}};return Object.fromEntries(Object.entries(t).map(([e,t])=>[e.toLowerCase(),Object.fromEntries(Object.entries(t).map(([e,t])=>[e.toLowerCase(),t]))]))},b=async()=>{try{f(!0);const e=localStorage.getItem("authToken"),t=await fetch("/api/users/upgrade-costs",{credentials:"include",headers:e?{Authorization:`Bearer ${e}`}:void 0});if(!t.ok)throw new Error(`Failed to load upgrade costs: ${t.status}`);const r=await t.json();r&&"object"==typeof r&&!Array.isArray(r)?n(g(r)):n(g(ea))}catch(e){console.error("Failed to fetch upgrade costs:",e),n(g(ea))}f(!1)};if(!t||!e)return null;const v=(e.user_tier||"free").toLowerCase(),y=a[v]||{},j=Object.keys(y).length>0,w=e=>{switch(e){case"super":return{name:"Super User",icon:zt,color:"text-yellow-600",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",benefits:["2.0x point multiplier for all actions","1 proof drop required for Master Key","1,000 monthly Instagram points","Priority support","Exclusive events access","Advanced analytics"]};case"premium":return{name:"Premium User",icon:Zr,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200",benefits:["1.5x point multiplier for all actions","2 proof drops required for Master Key","750 monthly Instagram points","Priority support","Advanced analytics"]};default:return{name:"Free User",icon:fs,color:"text-pr-text-2",bgColor:"bg-pr-surface-2",borderColor:"border-pr-surface-3",benefits:["1.0x point multiplier","5 proof drops required for Master Key","500 monthly Instagram points","Standard support"]}}},N=(t,r)=>{const s=y[t]?.[r];if(!s)return!1;return("points"===r?e.points_balance:e.gems_balance)>=s},_=w(v);return Ns.jsx(Us,{isOpen:t,onClose:r,maxWidth:"2xl",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex max-h-[85vh] flex-col overflow-hidden",children:[Ns.jsx("div",{className:"border-b border-pr-surface-3 px-6 pt-6 pb-4",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Zr,{className:"h-5 w-5 text-orange-600"}),Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"Upgrade Your Tier"})]}),Ns.jsx("button",{onClick:r,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close user tier upgrade modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]})}),Ns.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-6 pt-4",children:[Ns.jsxs("div",{className:"mb-6",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-3",children:"Current Tier"}),Ns.jsx("div",{className:`border-2 ${_.borderColor} ${_.bgColor} rounded-lg p-4`,children:Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(_.icon,{className:`w-8 h-8 ${_.color}`}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:`text-lg font-semibold ${_.color}`,children:_.name}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Your current membership level"})]})]})})]}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Available Upgrades"}),!j&&!x&&Ns.jsx("div",{className:"border border-dashed border-pr-surface-3 rounded-lg p-6 text-center text-sm text-pr-text-2",children:"No higher tiers available right now. Check back later for new membership levels."}),x&&Ns.jsx("div",{className:"border border-pr-surface-3 rounded-lg p-6 text-center text-sm text-pr-text-2",children:"Loading upgrade options..."}),Object.keys(y).map(e=>{const t=e.toLowerCase(),r=w(t),s=y[e];return Ns.jsx("div",{className:"border-2 rounded-lg p-6 cursor-pointer transition-all duration-200 "+(i===t?`${r.borderColor} ${r.bgColor}`:"border-pr-surface-3 hover:border-pr-surface-3"),onClick:()=>l(t),children:Ns.jsxs("div",{className:"flex items-start justify-between",children:[Ns.jsxs("div",{className:"flex-1",children:[Ns.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[Ns.jsx(r.icon,{className:`w-8 h-8 ${r.color}`}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:`text-lg font-semibold ${i===t?r.color:"text-pr-text-1"}`,children:r.name}),Ns.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[Ns.jsxs("div",{className:"flex items-center space-x-1",children:[Ns.jsx($t,{className:"w-4 h-4 text-blue-600"}),Ns.jsxs("span",{children:[s.points.toLocaleString()," points"]})]}),Ns.jsx("span",{className:"text-gray-400",children:"or"}),Ns.jsxs("div",{className:"flex items-center space-x-1",children:[Ns.jsx(Qt,{className:"w-4 h-4 text-purple-600"}),Ns.jsxs("span",{children:[s.gems," gems"]})]})]})]})]}),Ns.jsx("div",{className:"space-y-2",children:r.benefits.map((e,t)=>Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(At,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),Ns.jsx("span",{className:"text-sm text-pr-text-1",children:e})]},t))})]}),i===t&&Ns.jsx("div",{className:"ml-4",children:Ns.jsx(mt,{className:`w-6 h-6 ${r.color}`})})]})},e)})]}),i&&Ns.jsxs("div",{className:"mt-6 p-4 bg-pr-surface-2 rounded-lg",children:[Ns.jsx("h4",{className:"font-medium text-pr-text-1 mb-3",children:"Choose Payment Method"}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Ns.jsxs("button",{onClick:()=>c("points"),disabled:!N(i,"points"),className:`p-4 rounded-lg border-2 transition-colors ${"points"===o?"border-blue-500 bg-blue-50":"border-pr-surface-3 hover:border-pr-surface-3"} ${N(i,"points")?"":"opacity-50 cursor-not-allowed"}`,children:[Ns.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[Ns.jsx($t,{className:"w-5 h-5 text-blue-600"}),Ns.jsx("span",{className:"font-medium",children:"Points"})]}),Ns.jsx("p",{className:"text-lg font-bold text-blue-600",children:y[i]?.points.toLocaleString()}),Ns.jsxs("p",{className:"text-xs text-pr-text-2",children:["Balance: ",e.points_balance.toLocaleString()]}),!N(i,"points")&&Ns.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Insufficient balance"})]}),Ns.jsxs("button",{onClick:()=>c("gems"),disabled:!N(i,"gems"),className:`p-4 rounded-lg border-2 transition-colors ${"gems"===o?"border-purple-500 bg-purple-50":"border-pr-surface-3 hover:border-pr-surface-3"} ${N(i,"gems")?"":"opacity-50 cursor-not-allowed"}`,children:[Ns.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[Ns.jsx(Qt,{className:"w-5 h-5 text-purple-600"}),Ns.jsx("span",{className:"font-medium",children:"Gems"})]}),Ns.jsx("p",{className:"text-lg font-bold text-purple-600",children:y[i]?.gems}),Ns.jsxs("p",{className:"text-xs text-pr-text-2",children:["Balance: ",e.gems_balance]}),!N(i,"gems")&&Ns.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Insufficient balance"})]})]})]}),p&&Ns.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-lg p-3",children:Ns.jsx("p",{className:"text-sm text-red-700",children:p})}),Ns.jsxs("div",{className:"flex space-x-3 mt-6",children:[Ns.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 border border-pr-surface-3 rounded-lg text-pr-text-1 font-medium hover:bg-pr-surface-2 transition-colors",children:"Cancel"}),Ns.jsx("button",{onClick:async()=>{if(i){m(!0),h(null);try{const e=localStorage.getItem("authToken"),t=await fetch("/api/users/upgrade-tier",{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},credentials:"include",body:JSON.stringify({target_tier:i,payment_method:o})});if(t.ok)s(),r(),l("");else{const e=await t.json();h(e.error||"Upgrade failed")}}catch(e){console.error("Upgrade failed:",e),h("Network error occurred")}finally{m(!1)}}},disabled:!i||!N(i,o)||d,className:"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",children:d?"Upgrading...":`Upgrade to ${i?w(i).name:""}`})]})]})]})})}function ra({isOpen:e,onClose:t}){const[r,s]=u.useState(""),[a,n]=u.useState({content:[],drops:[],users:[]}),[i,l]=u.useState(!1),[o,c]=u.useState("all"),d=[{id:"content-demo-1",title:"Launch Campaign: Social Buzz",description:"Highlight reel from the recent product launch activation.",platform:"instagram",creator_name:"Demo Creator",share_price:12.5},{id:"content-demo-2",title:"Creator Toolkit Walkthrough",description:"Step-by-step guide on monetizing content in 30 days.",platform:"youtube",creator_name:"Creator Collective",share_price:18}],m=[{id:"drop-demo-1",title:"Product Review Blitz",description:"Create authentic reviews for the new premium bundle.",gem_reward_base:120,key_cost:4,status:"active"},{id:"drop-demo-2",title:"Launch Day Engagement Sprint",description:"Boost engagement metrics during launch weekend.",gem_reward_base:95,key_cost:3,status:"active"}],p=[{id:"user-demo-1",username:"demo_creator",display_name:"Demo Creator",user_type:"creator",follower_count:42e3},{id:"user-demo-2",username:"growth_analyst",display_name:"Growth Analyst",user_type:"advertiser",follower_count:12500}],h=e=>{const t=e.toLowerCase();return{content:d.filter(e=>e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)),drops:m.filter(e=>e.title.toLowerCase().includes(t)),users:p.filter(e=>e.username.toLowerCase().includes(t)||e.display_name.toLowerCase().includes(t))}};u.useEffect(()=>{if(r.length>=2){const e=setTimeout(()=>{x()},300);return()=>clearTimeout(e)}n({content:[],drops:[],users:[]})},[r]);const x=async()=>{if(!(r.trim().length<2)){l(!0);try{const e=await fetch(`/api/search?q=${encodeURIComponent(r)}`,{credentials:"include"});if(e.ok){const t=await e.json();n(t)}else n(h(r))}catch(e){console.error("Search failed:",e),n(h(r))}finally{l(!1)}}};if(!e)return null;const f=(()=>{switch(o){case"content":return{content:a.content,drops:[],users:[]};case"drops":return{content:[],drops:a.drops,users:[]};case"users":return{content:[],drops:[],users:a.users};default:return a}})(),g=(a.content?.length||0)+(a.drops?.length||0)+(a.users?.length||0);return Ns.jsx(Us,{isOpen:e,onClose:t,maxWidth:"4xl",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex h-full flex-col gap-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between border-b border-pr-surface-3 pb-4",children:[Ns.jsx("h2",{className:"text-xl font-semibold text-pr-text-1",children:"Search Promorang"}),Ns.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-pr-text-2 transition-colors",children:Ns.jsx(hs,{className:"w-5 h-5"})})]}),Ns.jsx("div",{className:"border-b border-pr-surface-3 pb-4",children:Ns.jsxs("div",{className:"relative",children:[Ns.jsx(Br,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5 pointer-events-none"}),Ns.jsx("input",{type:"text",placeholder:"Search for content, drops, users...",value:r,onChange:e=>s(e.target.value),className:"w-full pl-11 pr-4 py-3 bg-pr-surface-1 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-lg text-pr-text-1 placeholder:text-gray-400",autoFocus:!0}),i&&Ns.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:Ns.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-orange-500 border-t-transparent rounded-full"})})]})}),r.length>=2&&g>0&&Ns.jsx("div",{className:"border-b border-pr-surface-3 pb-3",children:Ns.jsx("div",{className:"flex flex-wrap gap-3",children:[{id:"all",label:"All",count:g},{id:"content",label:"Content",count:a.content?.length||0},{id:"drops",label:"Drops",count:a.drops?.length||0},{id:"users",label:"Users",count:a.users?.length||0}].map(e=>Ns.jsxs("button",{onClick:()=>c(e.id),className:"px-3 py-2 rounded-lg text-sm font-medium flex items-center space-x-2 "+(o===e.id?"bg-orange-100 text-orange-700":"text-pr-text-2 hover:bg-pr-surface-2"),children:[Ns.jsx("span",{children:e.label}),Ns.jsx("span",{className:"bg-pr-surface-3 text-pr-text-2 px-2 py-1 rounded-full text-xs",children:e.count})]},e.id))})}),Ns.jsx("div",{className:"flex-1 overflow-y-auto",children:r.length<2?Ns.jsxs("div",{className:"py-12 text-center",children:[Ns.jsx(Br,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-2",children:"Search Promorang"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Find content, drops, and users across the platform"})]}):0!==g||i?Ns.jsxs("div",{className:"space-y-6",children:[f.content?.length>0&&Ns.jsxs("div",{children:[Ns.jsxs("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4 flex items-center",children:[Ns.jsx(Yt,{className:"w-5 h-5 mr-2 text-orange-600"}),"Content (",f.content.length,")"]}),Ns.jsx("div",{className:"space-y-3",children:f.content.map(e=>Ns.jsxs(Ze,{to:`/content/${e.id}`,onClick:t,className:"flex items-center space-x-4 p-4 hover:bg-pr-surface-2 rounded-lg transition-colors",children:[Ns.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:Ns.jsx(Zr,{className:"w-6 h-6 text-orange-600"})}),Ns.jsxs("div",{className:"flex-1 min-w-0",children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1 truncate",children:e.title}),Ns.jsx("p",{className:"text-sm text-pr-text-2 truncate",children:e.description}),Ns.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[Ns.jsx("span",{className:"text-xs text-pr-text-2 capitalize",children:e.platform}),Ns.jsxs("span",{className:"text-xs text-pr-text-2",children:["by ",e.creator_name]}),Ns.jsxs("span",{className:"text-xs font-medium text-green-600",children:["$",e.share_price,"/share"]})]})]})]},e.id))})]}),f.drops?.length>0&&Ns.jsxs("div",{children:[Ns.jsxs("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4 flex items-center",children:[Ns.jsx(fs,{className:"w-5 h-5 mr-2 text-purple-600"}),"Drops (",f.drops.length,")"]}),Ns.jsx("div",{className:"space-y-3",children:f.drops.map(e=>Ns.jsxs(Ze,{to:"/earn",onClick:t,className:"flex items-center space-x-4 p-4 hover:bg-pr-surface-2 rounded-lg transition-colors",children:[Ns.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:Ns.jsx(Bt,{className:"w-6 h-6 text-purple-600"})}),Ns.jsxs("div",{className:"flex-1 min-w-0",children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1 truncate",children:e.title}),Ns.jsx("p",{className:"text-sm text-pr-text-2 truncate",children:e.description}),Ns.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[Ns.jsx("span",{className:"text-xs text-pr-text-2 capitalize",children:(e.drop_type||"engagement").replace("_"," ")}),Ns.jsxs("span",{className:"text-xs text-pr-text-2",children:["by ",e.creator_name||"Promorang Team"]}),Ns.jsxs("span",{className:"text-xs font-medium text-purple-600",children:[e.gem_reward_base??0," gems"]}),Ns.jsxs("span",{className:"text-xs text-pr-text-2",children:[e.current_participants??0," participants"]})]})]})]},e.id))})]}),f.users?.length>0&&Ns.jsxs("div",{children:[Ns.jsxs("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4 flex items-center",children:[Ns.jsx(us,{className:"w-5 h-5 mr-2 text-blue-600"}),"Users (",f.users.length,")"]}),Ns.jsx("div",{className:"space-y-3",children:f.users.map(e=>Ns.jsxs(Ze,{to:`/users/${e.username||e.id}`,onClick:t,className:"flex items-center space-x-4 p-4 hover:bg-pr-surface-2 rounded-lg transition-colors",children:[Ns.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden",children:Ns.jsx("img",{src:e.avatar_url||"/default-avatar.png",alt:e.display_name,className:"w-full h-full object-cover"})}),Ns.jsxs("div",{className:"flex-1 min-w-0",children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1 truncate",children:e.display_name||"Anonymous User"}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:["@",e.username||"user"]}),Ns.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[Ns.jsxs("span",{className:"text-xs text-pr-text-2",children:["Level ",e.level]}),Ns.jsxs("span",{className:"text-xs text-pr-text-2 capitalize",children:[e.user_tier," tier"]}),Ns.jsxs("span",{className:"text-xs text-pr-text-2",children:[e.follower_count," followers"]})]})]})]},e.id))})]})]}):Ns.jsxs("div",{className:"py-12 text-center",children:[Ns.jsx(Br,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-2",children:"No results found"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Try different keywords or browse categories"})]})})]})})}function sa({user:e,isOpen:t,onClose:r,onPurchase:s}){const[a,n]=u.useState(!1),[i,l]=u.useState("upgrades"),[o,c]=u.useState([]);u.useEffect(()=>{t&&e&&d()},[t,e]);const d=async()=>{try{const e=await fetch("/api/users/gold-purchases",{credentials:"include"});if(e.ok){const t=await e.json();c(t)}}catch(e){console.error("Failed to fetch gold purchases:",e)}},m=e=>{const t=document.createElement("div");t.className="fixed top-4 right-4 bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 animate-pulse",t.innerHTML=`\n      <div class="flex items-center space-x-3">\n        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">\n          <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>\n        </svg>\n        <div>\n          <div class="font-bold">Purchase Successful!</div>\n          <div class="text-sm">${e} activated</div>\n        </div>\n      </div>\n    `,document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},3e3)},p=e=>{const t={crown:zt,zap:fs,star:Zr,shield:Vr,award:ht}[e]||Zr;return Ns.jsx(t,{className:"w-6 h-6"})},h=[{id:"upgrades",name:"Tier Upgrades",icon:zt},{id:"multipliers",name:"Boosts",icon:fs},{id:"profile",name:"Profile",icon:ht}],x=[{id:"premium_upgrade",name:"Premium Tier Upgrade",description:"Upgrade to Premium tier with 1.5x points multiplier and exclusive perks",icon:"crown",category:"upgrades",gold_cost:500,effect_data:{tier:"premium"}},{id:"super_upgrade",name:"Super Tier Upgrade",description:"Upgrade to Super tier with 2x points multiplier and maximum benefits",icon:"crown",category:"upgrades",gold_cost:1e3,effect_data:{tier:"super"}},{id:"key_multiplier_24h",name:"24h Key Multiplier",description:"Double key earnings from all actions for 24 hours",icon:"zap",category:"multipliers",gold_cost:200,duration:"24 hours",effect_data:{multiplier:2,duration_hours:24,type:"key_earnings"}},{id:"xp_boost_7d",name:"7-Day XP Boost",description:"Triple XP gains from all activities for 7 days",icon:"star",category:"multipliers",gold_cost:300,duration:"7 days",effect_data:{multiplier:3,duration_hours:168,type:"xp_earnings"}},{id:"golden_badge",name:"Golden Badge",description:"Display a prestigious golden badge on your profile",icon:"award",category:"profile",gold_cost:150,effect_data:{badge_type:"golden",permanent:!0}},{id:"profile_boost",name:"Profile Boost",description:"Enhanced visibility in leaderboards and search for 30 days",icon:"shield",category:"profile",gold_cost:250,duration:"30 days",effect_data:{boost_type:"visibility",duration_hours:720}}].filter(e=>e.category===i);return t?Ns.jsx(Us,{isOpen:t,onClose:r,maxWidth:"4xl",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex max-h-[85vh] flex-col overflow-hidden rounded-2xl",children:[Ns.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-amber-500 px-6 pt-6 pb-4 text-white",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(zt,{className:"w-8 h-8"}),Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-2xl font-bold",children:"Gold Shop"}),Ns.jsx("p",{className:"text-yellow-100",children:"Spend your gold on exclusive upgrades and boosts"})]})]}),Ns.jsx("button",{onClick:r,className:"rounded-lg p-2 text-white transition-colors hover:text-yellow-200","aria-label":"Close gold shop modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]}),Ns.jsx("div",{className:"mt-4 rounded-xl bg-pr-surface-2 p-4",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("span",{className:"text-yellow-100",children:"Your Gold Balance"}),Ns.jsx("span",{className:"text-2xl font-bold",children:e?.gold_collected||0})]})})]}),Ns.jsxs("div",{className:"flex-1 overflow-y-auto bg-pr-surface-card",children:[Ns.jsx("div",{className:"border-b border-pr-surface-3 px-6",children:Ns.jsx("div",{className:"flex space-x-8 py-4",children:h.map(e=>{const t=e.icon;return Ns.jsxs("button",{onClick:()=>l(e.id),className:"flex items-center space-x-2 rounded-lg px-4 py-2 text-sm font-medium transition-colors "+(i===e.id?"bg-pr-surface-2 border border-yellow-500/60 text-pr-text-1":"text-pr-text-2 hover:text-pr-text-1"),children:[Ns.jsx(t,{className:"h-4 w-4"}),Ns.jsx("span",{children:e.name})]},e.id)})})}),Ns.jsx("div",{className:"max-h-[32rem] overflow-y-auto px-6 pb-6 pt-4",children:Ns.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:x.map(t=>{const r=(e=>o.some(t=>t.item_name===e.name&&(!t.expires_at||new Date(t.expires_at)>new Date)))(t),i=(t=>e&&e.gold_collected>=t.gold_cost)(t);return Ns.jsx("div",{className:"rounded-2xl border p-6 transition-all duration-200 "+(r?"border-green-500/60 bg-pr-surface-2":i?"border-pr-surface-3 bg-pr-surface-card hover:shadow-md":"border-pr-surface-3 bg-pr-surface-2"),children:Ns.jsxs("div",{className:"flex items-start space-x-4",children:[Ns.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl "+(r?"bg-pr-surface-2 text-green-400 border border-green-500/60":"bg-gradient-to-r from-yellow-500 to-amber-500 text-white"),children:r?Ns.jsx(St,{className:"h-6 w-6"}):p(t.icon)}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[Ns.jsx("h3",{className:"font-semibold text-pr-text-1",children:t.name}),t.duration&&Ns.jsx("span",{className:"rounded-full bg-pr-surface-2 border border-blue-500/60 px-2 py-1 text-xs text-blue-300",children:t.duration})]}),Ns.jsx("p",{className:"mb-4 text-sm text-pr-text-2",children:t.description}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(zt,{className:"h-4 w-4 text-yellow-400"}),Ns.jsxs("span",{className:"font-semibold text-yellow-300",children:[t.gold_cost," Gold"]})]}),Ns.jsx("button",{onClick:()=>(async t=>{if(e&&!(e.gold_collected<t.gold_cost)){n(!0);try{const e=await fetch("/api/users/gold-purchase",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({item_type:t.category,item_name:t.name,gold_cost:t.gold_cost,effect_data:JSON.stringify(t.effect_data)})});if(e.ok)s(),d(),m(t.name);else{const t=await e.json();alert(t.error||"Purchase failed")}}catch(r){console.error("Purchase failed:",r),alert("Purchase failed")}finally{n(!1)}}})(t),disabled:a||r||!i,className:"rounded-lg px-4 py-2 text-sm font-medium transition-all duration-200 "+(r?"cursor-not-allowed bg-pr-surface-2 border border-green-500/60 text-green-400":i?"bg-gradient-to-r from-yellow-500 to-amber-500 text-white hover:from-yellow-600 hover:to-amber-600":"cursor-not-allowed bg-pr-surface-3 text-pr-text-2"),children:a?"Processing...":r?"Owned":i?"Purchase":"Not Enough Gold"})]})]})]})},t.id)})})})]})]})}):null}function aa({user:e,isOpen:t,onClose:r}){const[s,a]=u.useState([]),[n,i]=u.useState(!0),[l,o]=u.useState("all");u.useEffect(()=>{t&&e&&c()},[t,e]);const c=async()=>{try{const e=await fetch("/api/users/achievements",{credentials:"include"});if(e.ok){const t=await e.json();a(Array.isArray(t)?t:[])}else console.log("Achievements API not available, using mock data"),a(d())}catch(e){console.error("Failed to fetch achievements:",e),a(d())}finally{i(!1)}},d=()=>[{id:1,name:"First Steps",description:"Complete your first drop application",icon:"star",category:"progression",criteria_type:"count",criteria_value:1,criteria_field:"applications",gold_reward:5,xp_reward:100,is_completed:!1,progress:0},{id:2,name:"Content Creator",description:"Share your first piece of content",icon:"file-text",category:"creation",criteria_type:"count",criteria_value:1,criteria_field:"content_pieces",gold_reward:10,xp_reward:200,is_completed:!1,progress:0},{id:3,name:"Social Butterfly",description:"Reach 100 followers",icon:"users",category:"social",criteria_type:"count",criteria_value:100,criteria_field:"followers",gold_reward:25,xp_reward:500,is_completed:!1,progress:e?.follower_count||0},{id:4,name:"Level Up",description:"Reach level 5",icon:"arrow-up",category:"progression",criteria_type:"level",criteria_value:5,criteria_field:"level",gold_reward:15,xp_reward:300,is_completed:(e?.level||0)>=5,progress:e?.level||0},{id:5,name:"Big Spender",description:"Earn 1000 points",icon:"coins",category:"earning",criteria_type:"count",criteria_value:1e3,criteria_field:"points",gold_reward:20,xp_reward:400,is_completed:(e?.points_balance||0)>=1e3,progress:e?.points_balance||0},{id:6,name:"Master Creator",description:"Create 5 pieces of content",icon:"crown",category:"creation",criteria_type:"count",criteria_value:5,criteria_field:"content_pieces",gold_reward:50,xp_reward:1e3,is_completed:!1,progress:0}],m=(e,t)=>{const r=document.createElement("div");r.className="fixed top-4 right-4 bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 animate-pulse",r.innerHTML=`\n      <div class="flex items-center space-x-3">\n        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">\n          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>\n        </svg>\n        <div>\n          <div class="font-bold">Achievement Unlocked!</div>\n          <div class="text-sm">+${e} Gold, +${t} XP</div>\n        </div>\n      </div>\n    `,document.body.appendChild(r),setTimeout(()=>{document.body.contains(r)&&document.body.removeChild(r)},4e3)},p=e=>{const t={star:Zr,"file-text":ht,zap:is,heart:Zr,calendar:ht,crown:is,trophy:is,"arrow-up":Zr,coins:ht,users:Zr}[e]||Zr;return Ns.jsx(t,{className:"w-6 h-6"})},h=e=>({engagement:"from-blue-500 to-cyan-500",creation:"from-purple-500 to-pink-500",earning:"from-green-500 to-emerald-500",progression:"from-orange-500 to-red-500",currency:"from-yellow-500 to-amber-500",social:"from-indigo-500 to-purple-500"}[e]||"from-gray-500 to-slate-500"),x=s&&s.length>0?["all",...new Set(s.map(e=>e.category))]:["all"],f=s&&s.length>0?"all"===l?s:s.filter(e=>e.category===l):[],g=s&&s.length>0?s.filter(e=>e.is_completed).length:0,b=s&&s.length>0?s.filter(e=>e.is_completed).reduce((e,t)=>e+t.gold_reward,0):0;return t?Ns.jsxs(Us,{isOpen:t,onClose:r,maxWidth:"4xl",showCloseButton:!1,children:[Ns.jsxs("div",{className:"-mx-6 -mt-6 bg-gradient-to-r from-yellow-500 to-orange-500 p-6 text-white",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(is,{className:"w-8 h-8"}),Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-2xl font-bold",children:"Achievements"}),Ns.jsx("p",{className:"text-yellow-100",children:"Track your progress and earn rewards"})]})]}),Ns.jsx("button",{onClick:r,className:"text-white hover:text-yellow-200 transition-colors",children:Ns.jsx(hs,{className:"w-6 h-6"})})]}),Ns.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6",children:[Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"text-2xl font-bold",children:g}),Ns.jsx("div",{className:"text-yellow-100 text-sm",children:"Completed"})]}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"text-2xl font-bold",children:s?.length||0}),Ns.jsx("div",{className:"text-yellow-100 text-sm",children:"Total"})]}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"text-2xl font-bold",children:b}),Ns.jsx("div",{className:"text-yellow-100 text-sm",children:"Gold Earned"})]})]})]}),Ns.jsx("div",{className:"-mx-6 border-b border-pr-surface-3 px-6",children:Ns.jsx("div",{className:"flex space-x-8 overflow-x-auto py-4",children:x.map(e=>Ns.jsx("button",{onClick:()=>o(e),className:"px-4 py-2 rounded-lg font-medium text-sm whitespace-nowrap transition-colors "+(l===e?"bg-pr-surface-2 border border-orange-500/60 text-pr-text-1":"text-pr-text-2 hover:text-pr-text-1"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}),Ns.jsx("div",{className:"mt-6",children:n?Ns.jsx("div",{className:"flex items-center justify-center h-32",children:Ns.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full"})}):Ns.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f&&f.length>0?f.map(e=>Ns.jsxs("div",{className:"relative p-6 rounded-2xl border transition-all duration-200 "+(e.is_completed?"border-green-500/60 bg-pr-surface-2":"border-pr-surface-3 bg-pr-surface-card hover:shadow-md"),children:[Ns.jsxs("div",{className:"flex items-start space-x-4",children:[Ns.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center bg-gradient-to-r ${h(e.category)} text-white`,children:p(e.icon)}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ns.jsx("h3",{className:"font-semibold text-pr-text-1",children:e.name}),e.is_completed&&Ns.jsx(At,{className:"w-5 h-5 text-green-600"})]}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mb-3",children:e.description}),!e.is_completed&&Ns.jsxs("div",{className:"mb-3",children:[Ns.jsxs("div",{className:"flex justify-between text-xs text-pr-text-2 mb-1",children:[Ns.jsx("span",{children:"Progress"}),Ns.jsxs("span",{children:[e.progress,"/",e.criteria_value]})]}),Ns.jsx("div",{className:"w-full bg-pr-surface-3 rounded-full h-2",children:Ns.jsx("div",{className:`h-2 rounded-full bg-gradient-to-r ${h(e.category)}`,style:{width:`${Math.min(100,e.progress/e.criteria_value*100)}%`}})})]}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[e.gold_reward>0&&Ns.jsxs("div",{className:"flex items-center space-x-1 text-yellow-600",children:[Ns.jsx(Xt,{className:"w-4 h-4"}),Ns.jsxs("span",{children:[e.gold_reward," Gold"]})]}),e.xp_reward>0&&Ns.jsxs("div",{className:"flex items-center space-x-1 text-blue-600",children:[Ns.jsx(Zr,{className:"w-4 h-4"}),Ns.jsxs("span",{children:[e.xp_reward," XP"]})]})]}),e.progress>=e.criteria_value&&!e.is_completed&&Ns.jsx("button",{onClick:()=>(async e=>{try{const t=await fetch(`/api/users/achievements/${e}/claim`,{method:"POST",credentials:"include"});if(t.ok){const e=await t.json();m(e.gold_reward,e.xp_reward),c()}}catch(t){console.error("Failed to claim achievement:",t)}})(e.id),className:"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200",children:"Claim"})]})]})]}),e.progress<e.criteria_value&&!e.is_completed&&Ns.jsx("div",{className:"absolute inset-0 bg-pr-surface-2 bg-opacity-50 rounded-2xl flex items-center justify-center",children:Ns.jsx(hr,{className:"w-8 h-8 text-gray-400"})})]},e.id)):Ns.jsxs("div",{className:"col-span-full text-center py-12",children:[Ns.jsx(is,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1 mb-2",children:"No Achievements Yet"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Complete tasks and reach milestones to unlock achievements!"})]})})})]}):null}const na=(e={})=>{if("undefined"==typeof window)return{...e};const t=Ts();return t?{...e,Authorization:`Bearer ${t}`}:{...e}},ia=e=>{if(!e)return Os;if(/^https?:\/\//i.test(e))return e;return`${Os||""}${e.startsWith("/")?e:`/${e}`}`},la=async(e,t={})=>{const r=new Headers(t.headers||{}),s=Ts();return s&&r.set("Authorization",`Bearer ${s}`),fetch(ia(e),{...t,headers:r,credentials:t.credentials??"include"})};if("undefined"!=typeof window){const e=window;if(!e.__PROMORANG_FETCH_PATCHED__){const t=e.fetch.bind(window);e.__PROMORANG_FETCH_PATCHED__=!0,e.fetch=(e,r)=>{if("string"==typeof e)return e.startsWith("/api")?t(ia(e),r):t(e,r);if(e instanceof Request){const s=new URL(e.url,window.location.origin);if(s.origin===window.location.origin&&s.pathname.startsWith("/api")){const a=new Request(ia(s.pathname+s.search),e);return t(a,r)}return t(e,r)}if(e instanceof URL){if(e.origin===window.location.origin&&e.pathname.startsWith("/api")){const s=new URL(ia(e.pathname+e.search));return t(s,r)}return t(e,r)}return t(e,r)}}}const oa=[{name:"Home",href:"/dashboard",icon:sr,description:"Your personalized feed",requiresAuth:!0,showInSidebar:!0,showInMobile:!0,showInBottomNav:!0,sidebarSection:"primary"},{name:"Earn",href:"/earn",icon:Bt,description:"Complete tasks and earn rewards",requiresAuth:!0,showInSidebar:!0,showInMobile:!0,showInBottomNav:!0,sidebarSection:"primary"},{name:"Marketplace",href:"/marketplace",icon:Hr,description:"Browse and shop products",requiresAuth:!0,showInSidebar:!0,showInMobile:!0,showInBottomNav:!1,sidebarSection:"primary"},{name:"Create",href:"/create",icon:Rr,description:"Create new content",requiresAuth:!0,showInSidebar:!0,showInMobile:!0,showInBottomNav:!0,sidebarSection:"primary"},{name:"Invest",href:"/invest",icon:as,description:"Invest in creators",requiresAuth:!0,showInSidebar:!0,showInMobile:!0,showInBottomNav:!0,sidebarSection:"primary"},{name:"Growth Hub",href:"/growth-hub",icon:zr,description:"Grow your presence",requiresAuth:!0,showInSidebar:!0,showInMobile:!0,showInBottomNav:!1,sidebarSection:"primary"},{name:"Referrals",href:"/referrals",icon:us,description:"Invite friends and earn",requiresAuth:!0,showInSidebar:!0,showInMobile:!0,showInBottomNav:!1,sidebarSection:"primary"},{name:"Wallet",href:"/wallet",icon:ps,description:"Manage your balance",requiresAuth:!0,showInSidebar:!0,showInMobile:!0,showInBottomNav:!1,sidebarSection:"wallet"},{name:"Convert Currency",href:"/wallet?tab=convert",icon:$r,description:"Convert between currencies",requiresAuth:!0,showInSidebar:!0,showInMobile:!0,showInBottomNav:!1,sidebarSection:"wallet"},{name:"Master Key",href:"/wallet?tab=master-key",icon:lr,description:"Your master key benefits",requiresAuth:!0,showInSidebar:!0,showInMobile:!0,showInBottomNav:!1,sidebarSection:"wallet"},{name:"Leaderboard",href:"/leaderboard",icon:is,description:"Top performers",requiresAuth:!0,showInSidebar:!0,showInMobile:!0,showInBottomNav:!1,sidebarSection:"community"},{name:"Instagram Rewards",href:"/earn?category=instagram",icon:ir,description:"Earn from Instagram",requiresAuth:!0,showInSidebar:!0,showInMobile:!0,showInBottomNav:!1,sidebarSection:"community"},{name:"Achievements",href:"/rewards",icon:ht,description:"Your achievements",requiresAuth:!0,showInSidebar:!0,showInMobile:!0,showInBottomNav:!1,sidebarSection:"community"},{name:"Upgrade Tier",href:"/wallet?action=upgrade",icon:Tt,description:"Upgrade your account",requiresAuth:!0,showInSidebar:!0,showInMobile:!0,showInBottomNav:!1,sidebarSection:"account"},{name:"Settings",href:"/settings",icon:Wr,description:"Account settings",requiresAuth:!0,showInSidebar:!0,showInMobile:!0,showInBottomNav:!1,sidebarSection:"account"},{name:"Advertiser Dashboard",href:"/advertiser",icon:Nt,description:"Manage campaigns",requiresAuth:!0,requiredRole:"advertiser",showInSidebar:!0,showInMobile:!0,showInBottomNav:!1,sidebarSection:"business"},{name:"Season Operator",href:"/operator",icon:Nt,description:"Run your own hubs",requiresAuth:!0,showInSidebar:!0,showInMobile:!0,showInBottomNav:!1,sidebarSection:"business"}],ca={primary:"Overview",wallet:"Wallet",community:"Community",account:"Account",business:"Business"},da=["primary","wallet","community","account","business"];function ua(e){const t=new Map;return e.forEach(e=>{const r=e.sidebarSection??"primary";t.has(r)||t.set(r,[]),t.get(r).push(e)}),da.filter(e=>t.has(e)).map(e=>({section:e,label:ca[e],items:t.get(e)}))}function ma(e){const t=function(e){return oa.filter(t=>!(!t.showInSidebar||t.requiredRole&&t.requiredRole!==e))}(e);return ua(t)}function pa({children:e}){const{user:t,signOut:r}=Ls(),s=Ne(),a=ke(),[n,i]=u.useState(null),[l,o]=u.useState(!1),[c,d]=u.useState(!1),[m,p]=u.useState(!1),[h,x]=u.useState(!1),[f,g]=u.useState(!1),[b,v]=u.useState(!1),[y,j]=u.useState(!1),[w,N]=u.useState(!1),[_,k]=u.useState(!1),[S,C]=u.useState(!1),[O,E]=u.useState(!1),{unreadCount:P}=function(){const{user:e}=Ls(),[t,r]=u.useState(0);u.useEffect(()=>{if(e){const t=localStorage.getItem(`notifications_unread_${e.id}`);r(t?parseInt(t):0)}},[e]);const s=u.useCallback(s=>{if(!e)return;const n=t+1;r(n),localStorage.setItem(`notifications_unread_${e.id}`,n.toString()),a(s.message,"info"),console.log("New notification:",s)},[e,t]),a=u.useCallback((e,t="info")=>{const r=document.createElement("div");r.className="fixed top-20 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm transform transition-all duration-300 translate-x-full",r.className+=` ${{success:"bg-green-500 text-white",error:"bg-red-500 text-white",warning:"bg-yellow-500 text-white",info:"bg-blue-500 text-white"}[t]}`,r.textContent=e,document.body.appendChild(r),setTimeout(()=>{r.style.transform="translateX(0)"},100),setTimeout(()=>{r.style.transform="translateX(100%)",setTimeout(()=>{document.body.contains(r)&&document.body.removeChild(r)},300)},3e3)},[]);return{unreadCount:t,addNotification:s,showToast:a}}(),T=Os||"",A=e=>`${T}${e}`;u.useEffect(()=>{t&&M()},[t]),u.useEffect(()=>{const e=e=>{(e.metaKey||e.ctrlKey)&&"k"===e.key&&(e.preventDefault(),g(!0)),"Escape"===e.key&&(v(!1),j(!1),N(!1),k(!1))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]),u.useEffect(()=>{const e=e=>{const t=e.target;t.closest(".user-menu")||t.closest(".wallet-menu")||(v(!1),j(!1))};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]);const M=async()=>{try{const e=na(),t=await fetch(A("/api/users/me"),{credentials:"include",headers:e});if(t.ok){const e=await t.json();e&&"object"==typeof e&&i(e)}}catch(e){console.error("Failed to fetch user data:",e)}},D=n?.user_type??void 0,I=ma(D),R=function(e){return oa.filter(t=>!(!t.showInMobile||t.requiredRole&&t.requiredRole!==e))}(D),$=function(e){return oa.filter(t=>!(!t.showInBottomNav||t.requiredRole&&t.requiredRole!==e))}(D),L=new Set(["Marketplace","Wallet","Convert Currency","Master Key","Achievements","Leaderboard","Instagram Rewards"]),F=ua(R).map(e=>({...e,items:e.items.filter(e=>!L.has(e.name))})).filter(e=>e.items.length>0),z=e=>function(e,t){if(e===t)return!0;const[r]=t.split("?");return e===r||!!e.startsWith(t+"/")}(s.pathname,e),U=()=>n?(n.points_balance||0)+(n.keys_balance||0)+(n.gems_balance||0)+(n.gold_collected||0):0,B=n?.username||(n?.email?n.email.split("@")[0]:void 0)||(t?.username?String(t.username):void 0)||(t?.email?t.email.split("@")[0]:void 0)||"me",q=Zs(B),W=e=>{switch(j(!1),e){case"instagram":p(!0);break;case"masterkey":d(!0);break;case"convert":o(!0);break;case"leaderboard":a("/leaderboard");break;case"growthhub":a("/growth-hub");break;case"wallet":a("/wallet");break;case"goldshop":C(!0);break;case"achievements":E(!0)}},K=async()=>{try{await r(),localStorage.clear(),sessionStorage.clear();try{await fetch(A("/api/auth/logout"),{method:"POST",credentials:"include"})}catch(e){console.error("Backend logout failed:",e)}a("/",{replace:!0})}catch(t){console.error("Logout failed:",t);try{localStorage.clear(),sessionStorage.clear()}catch(s){console.error("Failed to clear storage:",s)}a("/",{replace:!0})}},V=e=>{switch(v(!1),e){case"profile":a(q);break;case"upgrade":x(!0);break;case"advertiser":n&&"advertiser"===n.user_type?a("/advertiser"):a("/advertiser/onboarding");break;case"logout":K()}};return Ns.jsxs(Ns.Fragment,{children:[Ns.jsxs("div",{className:"min-h-screen-dynamic bg-pr-surface-background grid grid-cols-1 lg:grid-cols-[260px_1fr] xl:grid-cols-[260px_1fr_300px]",children:[Ns.jsx("aside",{className:"hidden lg:block border-r border-pr-border bg-pr-surface-card sticky top-0 h-screen overflow-y-auto",children:Ns.jsx(qs,{groups:I,isActive:z,onNavClick:e=>{switch(e.name){case"Convert Currency":return o(!0),!0;case"Master Key":return d(!0),!0;case"Upgrade Tier":return x(!0),!0;case"Instagram Rewards":return p(!0),!0;case"Achievements":return E(!0),!0;default:return!1}},onLogout:K,onSearch:()=>g(!0)})}),Ns.jsxs("div",{className:"flex flex-col min-w-0",children:[Ns.jsx("header",{className:"bg-pr-surface-1 shadow-sm border-b border-pr-surface-3 sticky top-0 z-40 lg:hidden",children:Ns.jsx("div",{className:"max-w-full mx-auto px-3 sm:px-4 md:px-6 lg:px-8",children:Ns.jsxs("div",{className:"flex justify-between items-center h-16",children:[Ns.jsx("div",{className:"flex items-center space-x-4",children:Ns.jsx(Ze,{to:"/dashboard",className:"flex items-center space-x-2 sm:space-x-3 group flex-shrink-0",children:Ns.jsx("img",{src:"https://mocha-cdn.com/0198f6f0-5737-78cb-955a-4b0907aa1065/Promorang_logo_FULL-02.png",alt:"Promorang",className:"h-8 w-8 sm:h-10 sm:w-10 transition-transform group-hover:scale-105"})})}),Ns.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 flex-shrink-0",children:[Ns.jsx(zs,{content:"Search (K)",position:"bottom",compact:!0,children:Ns.jsxs("button",{onClick:()=>g(!0),className:"hidden md:flex items-center space-x-2 px-3 py-2 bg-pr-surface-2 hover:bg-pr-surface-3 rounded-lg transition-colors",children:[Ns.jsx(Br,{className:"w-4 h-4 text-pr-text-2"}),Ns.jsx("span",{className:"text-sm text-pr-text-2",children:"Search..."}),Ns.jsx("kbd",{className:"hidden lg:inline-flex items-center px-2 py-1 text-xs font-medium text-pr-text-2 bg-pr-surface-card border border-pr-surface-3 rounded",children:"K"})]})}),Ns.jsx(zs,{content:"Notifications",position:"bottom",compact:!0,children:Ns.jsxs("button",{onClick:()=>k(!0),className:"hidden md:flex relative p-2 text-gray-400 hover:text-pr-text-2 transition-colors rounded-lg hover:bg-pr-surface-2",children:[Ns.jsx(xt,{className:"w-5 h-5"}),P>0&&Ns.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center",children:P>9?"9+":P})]})}),(t||n)&&Ns.jsxs("div",{className:"relative wallet-menu hidden md:block",children:[Ns.jsx(zs,{content:"Your wallet balance",position:"bottom",compact:!0,children:Ns.jsxs("button",{onClick:()=>j(!y),className:"flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 py-2 bg-gradient-to-r from-blue-50 to-purple-50 hover:from-blue-100 hover:to-purple-100 rounded-lg transition-all duration-200 border border-blue-200/50 shadow-sm hover:shadow-md",children:[Ns.jsx(ps,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),Ns.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm font-semibold text-blue-900 truncate max-w-[80px] md:max-w-none",children:U().toLocaleString()}),Ns.jsx(Ct,{className:"w-4 h-4 text-blue-600 transition-transform flex-shrink-0 "+(y?"rotate-180":"")})]})}),y&&Ns.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-[#141414] rounded-lg shadow-lg border border-pr-surface-3 py-2 z-50",children:[Ns.jsx("div",{className:"px-4 py-2 border-b border-pr-border",children:Ns.jsx("h3",{className:"text-sm font-medium text-pr-text-1",children:"Your Balances"})}),Ns.jsxs("div",{className:"py-2",children:[Ns.jsx(zs,{content:"Earn points from engagement",position:"left",children:Ns.jsxs("button",{onClick:()=>W("instagram"),className:"w-full px-4 py-2 text-left hover:bg-pr-surface-2 flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx($t,{className:"w-4 h-4 text-blue-600"}),Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"Points"})]}),Ns.jsx("span",{className:"text-sm font-medium text-blue-900",children:n?.points_balance||0})]})}),Ns.jsx(zs,{content:"Unlock premium features",position:"left",children:Ns.jsxs("button",{onClick:()=>W("masterkey"),className:"w-full px-4 py-2 text-left hover:bg-pr-surface-2 flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(lr,{className:"w-4 h-4 text-orange-600"}),Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"Keys"})]}),Ns.jsx("span",{className:"text-sm font-medium text-orange-900",children:n?.keys_balance||0})]})}),Ns.jsx(zs,{content:"Premium currency from drops",position:"left",children:Ns.jsxs("button",{onClick:()=>W("convert"),className:"w-full px-4 py-2 text-left hover:bg-pr-surface-2 flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(Zr,{className:"w-4 h-4 text-purple-600"}),Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"Gems"})]}),Ns.jsx("span",{className:"text-sm font-medium text-purple-900",children:n?.gems_balance||0})]})}),(n?.gold_collected||0)>0&&Ns.jsx(zs,{content:"Achievement rewards",position:"left",children:Ns.jsxs("button",{onClick:()=>W("goldshop"),className:"w-full px-4 py-2 text-left hover:bg-pr-surface-2 flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(is,{className:"w-4 h-4 text-yellow-600"}),Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"Gold"})]}),Ns.jsx("span",{className:"text-sm font-medium text-yellow-900",children:n?.gold_collected||0})]})})]}),Ns.jsxs("div",{className:"border-t border-pr-border pt-2",children:[Ns.jsx(zs,{content:"Full wallet management",position:"left",compact:!0,children:Ns.jsxs("button",{onClick:()=>W("wallet"),className:"w-full px-4 py-2 text-left hover:bg-pr-surface-2 flex items-center space-x-3",children:[Ns.jsx(ps,{className:"w-4 h-4 text-blue-600"}),Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"View Full Wallet"})]})}),Ns.jsx(zs,{content:"Put your gems to work",position:"left",compact:!0,children:Ns.jsxs("button",{onClick:()=>W("growthhub"),className:"w-full px-4 py-2 text-left hover:bg-pr-surface-2 flex items-center space-x-3",children:[Ns.jsx(zr,{className:"w-4 h-4 text-blue-600"}),Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"Explore Growth Hub"})]})}),Ns.jsx(zs,{content:"View rankings",position:"left",compact:!0,children:Ns.jsxs("button",{onClick:()=>W("leaderboard"),className:"w-full px-4 py-2 text-left hover:bg-pr-surface-2 flex items-center space-x-3",children:[Ns.jsx(is,{className:"w-4 h-4 text-purple-600"}),Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"View Rankings"})]})})]})]})]}),Ns.jsxs("div",{className:"relative user-menu hidden md:block",children:[Ns.jsxs("button",{onClick:()=>v(!b),className:"flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 py-2 rounded-lg hover:bg-pr-surface-2 transition-all duration-200 group",children:[Ns.jsx(Fs,{username:n?.username||t?.email?.split("@")[0],displayName:n?.display_name||t?.google_user_data?.name||t?.google_user_data?.given_name,avatarUrl:n?.avatar_url||t?.google_user_data?.picture,className:"flex items-center space-x-2",size:"sm"}),Ns.jsxs("div",{className:"hidden lg:block text-left ml-1 sm:ml-2",children:[Ns.jsx("div",{className:"text-xs sm:text-sm font-medium text-pr-text-1 truncate max-w-24 xl:max-w-32",children:t?.google_user_data?.given_name||t?.google_user_data?.name||t?.email?.split("@")[0]||"User"}),Ns.jsxs("div",{className:"flex items-center space-x-1",children:["super"===(n?.user_tier||"free")&&Ns.jsx(zt,{className:"w-3 h-3 text-yellow-600"}),"premium"===(n?.user_tier||"free")&&Ns.jsx(Zr,{className:"w-3 h-3 text-purple-600"}),"free"===(n?.user_tier||"free")&&Ns.jsx(Zr,{className:"w-3 h-3 text-pr-text-2"}),Ns.jsx("span",{className:"text-xs font-medium "+("super"===(n?.user_tier||"free")?"text-yellow-700":"premium"===(n?.user_tier||"free")?"text-purple-700":"text-pr-text-1"),children:(n?.user_tier||"free").charAt(0).toUpperCase()+(n?.user_tier||"free").slice(1)})]})]}),Ns.jsx(Ct,{className:"w-4 h-4 text-gray-400 transition-transform group-hover:text-pr-text-2 "+(b?"rotate-180":"")})]}),b&&Ns.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-[#141414] rounded-lg shadow-lg border border-pr-surface-3 py-2 z-50",children:[Ns.jsxs("div",{className:"px-4 py-2 border-b border-pr-border",children:[Ns.jsx("div",{className:"text-sm font-medium text-pr-text-1",children:n?.display_name||t?.google_user_data?.name||t?.google_user_data?.given_name||t?.email?.split("@")[0]||"User"}),Ns.jsx("div",{className:"text-xs text-pr-text-2",children:t?.email})]}),Ns.jsxs("div",{className:"py-2",children:[Ns.jsxs("button",{onClick:()=>V("profile"),className:"w-full px-4 py-2 text-left hover:bg-pr-surface-2 flex items-center space-x-3",children:[Ns.jsx(ds,{className:"w-4 h-4 text-pr-text-2"}),Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"Profile"})]}),n&&Ns.jsx(zs,{content:"Upgrade to Premium or Super tier for better rewards",position:"left",children:Ns.jsxs("button",{onClick:()=>V("upgrade"),className:"w-full px-4 py-2 text-left hover:bg-pr-surface-2 flex items-center space-x-3",children:[Ns.jsx(zt,{className:"w-4 h-4 text-purple-600"}),Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"Upgrade Tier"})]})}),Ns.jsx(zs,{content:"Create and manage marketing drops for your business",position:"left",children:Ns.jsxs("button",{onClick:()=>V("advertiser"),className:"w-full px-4 py-2 text-left hover:bg-pr-surface-2 flex items-center space-x-3",children:[Ns.jsx(yr,{className:"w-4 h-4 text-orange-600"}),Ns.jsx("span",{className:"text-sm text-pr-text-1",children:n&&"advertiser"===n.user_type?"Advertiser Dashboard":"Become Advertiser"})]})})]}),Ns.jsx("div",{className:"border-t border-pr-border pt-2",children:Ns.jsxs("button",{onClick:()=>V("logout"),className:"w-full px-4 py-2 text-left hover:bg-pr-surface-2 flex items-center space-x-3 text-red-600",children:[Ns.jsx(fr,{className:"w-4 h-4"}),Ns.jsx("span",{className:"text-sm",children:"Sign Out"})]})})]})]})]})]})})}),Ns.jsx("main",{className:"overflow-y-auto overflow-x-hidden bg-pr-surface-background",children:Ns.jsx("div",{className:"max-w-[1800px] w-full mx-auto px-0 sm:px-4 md:px-6 lg:px-10 xl:px-16 2xl:px-24 py-6 pb-mobile-nav lg:pb-8",children:e})})]}),Ns.jsx("aside",{className:"hidden lg:block border-l border-pr-border bg-pr-surface-card sticky top-0 h-screen overflow-y-auto",children:Ns.jsx(Ws,{userData:n})}),w&&Ns.jsx("div",{className:"lg:hidden fixed inset-0 z-50 bg-black/50",onClick:()=>N(!1),children:Ns.jsxs("div",{className:"fixed inset-y-0 right-0 w-full max-w-sm bg-white dark:bg-[#0D0D0D] shadow-xl overflow-y-auto safe-bottom border-l border-pr-border",onClick:e=>e.stopPropagation(),children:[Ns.jsxs("div",{className:"p-4 border-b border-pr-surface-3 bg-pr-surface-1",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Ns.jsx("h2",{className:"text-lg font-semibold text-pr-text-1",children:"Menu"}),Ns.jsx("button",{onClick:()=>N(!1),className:"p-2 text-gray-400 hover:text-pr-text-2",children:Ns.jsx(hs,{className:"w-5 h-5"})})]}),Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(Fs,{username:n?.username||t?.email?.split("@")[0],displayName:n?.display_name||t?.google_user_data?.name||t?.google_user_data?.given_name||"User",avatarUrl:n?.avatar_url||t?.google_user_data?.picture,className:"flex items-center space-x-3",size:"md"}),Ns.jsxs("div",{className:"flex-1 min-w-0",children:[Ns.jsx("div",{className:"text-sm font-medium text-pr-text-1 truncate",children:n?.display_name||t?.google_user_data?.name||t?.google_user_data?.given_name||t?.email?.split("@")[0]||"User"}),Ns.jsxs("div",{className:"flex items-center space-x-1",children:["super"===(n?.user_tier||"free")&&Ns.jsx(zt,{className:"w-3 h-3 text-yellow-600"}),"premium"===(n?.user_tier||"free")&&Ns.jsx(Zr,{className:"w-3 h-3 text-purple-600"}),"free"===(n?.user_tier||"free")&&Ns.jsx(Zr,{className:"w-3 h-3 text-pr-text-2"}),Ns.jsxs("span",{className:"text-xs font-medium "+("super"===(n?.user_tier||"free")?"text-yellow-700":"premium"===(n?.user_tier||"free")?"text-purple-700":"text-pr-text-1"),children:[(n?.user_tier||"free").charAt(0).toUpperCase()+(n?.user_tier||"free").slice(1)," Tier"]})]})]})]})]}),Ns.jsxs("div",{className:"p-4 space-y-2",children:[Ns.jsx("h3",{className:"text-sm font-medium text-pr-text-2 uppercase tracking-wide mb-3",children:"Quick Actions"}),Ns.jsxs("button",{onClick:()=>{g(!0),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-3 rounded-lg text-pr-text-1 hover:bg-pr-surface-2 transition-colors",children:[Ns.jsx(Br,{className:"w-5 h-5 text-pr-text-2"}),Ns.jsx("span",{className:"font-medium",children:"Search"})]}),Ns.jsxs("button",{onClick:()=>{a("/marketplace"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-3 rounded-lg text-pr-text-1 hover:bg-pr-surface-2 transition-colors",children:[Ns.jsx(Hr,{className:"w-5 h-5 text-purple-600"}),Ns.jsx("span",{className:"font-medium",children:"Marketplace"})]}),Ns.jsxs("button",{onClick:()=>{k(!0),N(!1)},className:"w-full flex items-center justify-between px-3 py-3 rounded-lg text-pr-text-1 hover:bg-pr-surface-2 transition-colors",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(xt,{className:"w-5 h-5 text-pr-text-2"}),Ns.jsx("span",{className:"font-medium",children:"Notifications"})]}),P>0&&Ns.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:P>9?"9+":P})]})]}),(t||n)&&Ns.jsxs("div",{className:"px-4 pb-4",children:[Ns.jsx("h3",{className:"text-sm font-medium text-pr-text-2 uppercase tracking-wide mb-3",children:"Wallet"}),Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-3 mb-3 border border-pr-surface-3",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ns.jsx("span",{className:"text-sm font-medium text-pr-text-1",children:"Total Balance"}),Ns.jsx("span",{className:"text-lg font-bold text-blue-900",children:U().toLocaleString()})]}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[Ns.jsxs("div",{className:"flex items-center space-x-1",children:[Ns.jsx($t,{className:"w-3 h-3 text-blue-600"}),Ns.jsxs("span",{children:[(n?.points_balance||0).toLocaleString()," pts"]})]}),Ns.jsxs("div",{className:"flex items-center space-x-1",children:[Ns.jsx(lr,{className:"w-3 h-3 text-orange-600"}),Ns.jsxs("span",{children:[n?.keys_balance||0," keys"]})]}),Ns.jsxs("div",{className:"flex items-center space-x-1",children:[Ns.jsx(Zr,{className:"w-3 h-3 text-purple-600"}),Ns.jsxs("span",{children:[n?.gems_balance||0," gems"]})]}),(n?.gold_collected||0)>0&&Ns.jsxs("div",{className:"flex items-center space-x-1",children:[Ns.jsx(is,{className:"w-3 h-3 text-yellow-600"}),Ns.jsxs("span",{children:[n?.gold_collected||0," gold"]})]})]})]}),Ns.jsxs("div",{className:"space-y-1",children:[Ns.jsxs("button",{onClick:()=>{W("wallet"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-pr-text-1 hover:bg-pr-surface-2 transition-colors",children:[Ns.jsx(ps,{className:"w-4 h-4 text-blue-600"}),Ns.jsx("span",{className:"text-sm",children:"Full Wallet"})]}),Ns.jsxs("button",{onClick:()=>{W("convert"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-pr-text-1 hover:bg-pr-surface-2 transition-colors",children:[Ns.jsx(Zr,{className:"w-4 h-4 text-purple-600"}),Ns.jsx("span",{className:"text-sm",children:"Convert Currency"})]}),Ns.jsxs("button",{onClick:()=>{W("masterkey"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-pr-text-1 hover:bg-pr-surface-2 transition-colors",children:[Ns.jsx(lr,{className:"w-4 h-4 text-orange-600"}),Ns.jsx("span",{className:"text-sm",children:"Master Key"})]})]})]}),Ns.jsxs("div",{className:"px-4 pb-4",children:[Ns.jsx("h3",{className:"text-sm font-medium text-pr-text-2 uppercase tracking-wide mb-3",children:"Account"}),Ns.jsxs("div",{className:"space-y-1",children:[Ns.jsxs("button",{onClick:()=>{V("profile"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-pr-text-1 hover:bg-pr-surface-2 transition-colors",children:[Ns.jsx(ds,{className:"w-4 h-4 text-pr-text-2"}),Ns.jsx("span",{className:"text-sm",children:"Profile"})]}),(t||n)&&Ns.jsxs("button",{onClick:()=>{V("upgrade"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-pr-text-1 hover:bg-pr-surface-2 transition-colors",children:[Ns.jsx(zt,{className:"w-4 h-4 text-purple-600"}),Ns.jsx("span",{className:"text-sm",children:"Upgrade Tier"})]}),Ns.jsxs("button",{onClick:()=>{W("achievements"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-pr-text-1 hover:bg-pr-surface-2 transition-colors",children:[Ns.jsx(is,{className:"w-4 h-4 text-yellow-600"}),Ns.jsx("span",{className:"text-sm",children:"Achievements"})]}),Ns.jsxs("button",{onClick:()=>{W("leaderboard"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-pr-text-1 hover:bg-pr-surface-2 transition-colors",children:[Ns.jsx(is,{className:"w-4 h-4 text-purple-600"}),Ns.jsx("span",{className:"text-sm",children:"Leaderboard"})]}),Ns.jsxs("button",{onClick:()=>{W("instagram"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-pr-text-1 hover:bg-pr-surface-2 transition-colors",children:[Ns.jsx(Zr,{className:"w-4 h-4 text-pink-600"}),Ns.jsx("span",{className:"text-sm",children:"Instagram Rewards"})]})]})]}),F.map(e=>Ns.jsxs("div",{className:"px-4 pb-4",children:[Ns.jsx("h3",{className:"text-sm font-medium text-pr-text-2 uppercase tracking-wide mb-3",children:e.label}),Ns.jsx("div",{className:"space-y-1",children:e.items.map(e=>{const t=e.icon;return Ns.jsxs(Ze,{to:e.href,onClick:()=>N(!1),className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-pr-text-1 hover:bg-pr-surface-2 transition-colors",children:[Ns.jsx(t,{className:"w-4 h-4 text-pr-text-2"}),Ns.jsx("span",{className:"text-sm",children:e.name})]},e.name)})})]},`mobile-nav-${e.section}`)),Ns.jsxs("div",{className:"px-4 pb-4",children:[Ns.jsx("h3",{className:"text-sm font-medium text-pr-text-2 uppercase tracking-wide mb-3",children:"Business"}),Ns.jsxs("button",{onClick:()=>{V("advertiser"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-pr-text-1 hover:bg-pr-surface-2 transition-colors",children:[Ns.jsx(yr,{className:"w-4 h-4 text-orange-600"}),Ns.jsx("span",{className:"text-sm",children:n&&"advertiser"===n.user_type?"Advertiser Dashboard":"Become Advertiser"})]})]}),Ns.jsx("div",{className:"px-4 pb-6 border-t border-pr-surface-3 pt-4",children:Ns.jsxs("button",{onClick:()=>{V("logout"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[Ns.jsx(fr,{className:"w-4 h-4"}),Ns.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})})]})})]}),Ns.jsx("nav",{className:"fixed bottom-0 inset-x-0 bg-pr-surface-card bg-white dark:bg-[#141414] border-t border-pr-surface-3 z-[9999] lg:hidden safe-bottom mobile-nav-fixed",children:Ns.jsx(Ks,{items:$,isActive:z,onMenuClick:()=>N(!w),showMobileMenu:w})}),Ns.jsx(Vs,{user:n,isOpen:l,onClose:()=>o(!1),onSuccess:M}),Ns.jsx(Hs,{user:n,isOpen:c,onClose:()=>d(!1),onSuccess:M}),Ns.jsx(Xs,{user:n,isOpen:m,onClose:()=>p(!1),onSuccess:M}),Ns.jsx(ta,{user:n,isOpen:h,onClose:()=>x(!1),onSuccess:M}),Ns.jsx(ra,{isOpen:f,onClose:()=>g(!1)}),Ns.jsx(Bs,{isOpen:_,onClose:()=>k(!1)}),Ns.jsx(sa,{user:n,isOpen:S,onClose:()=>C(!1),onPurchase:M}),Ns.jsx(aa,{user:n,isOpen:O,onClose:()=>E(!1)})]})}var ha=function(e,t){return(ha=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function xa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ha(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var fa=function(){return fa=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},fa.apply(this,arguments)};function ga(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]])}return r}function ba(e,t,r,s){var a,n=arguments.length,i=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,s);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(i=(n<3?a(i):n>3?a(t,r,i):a(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i}function va(e,t){return function(r,s){t(r,s,e)}}function ya(e,t,r,s,a,n){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var l,o=s.kind,c="getter"===o?"get":"setter"===o?"set":"value",d=!t&&e?s.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,s.name):{}),m=!1,p=r.length-1;p>=0;p--){var h={};for(var x in s)h[x]="access"===x?{}:s[x];for(var x in s.access)h.access[x]=s.access[x];h.addInitializer=function(e){if(m)throw new TypeError("Cannot add initializers after decoration has completed");n.push(i(e||null))};var f=(0,r[p])("accessor"===o?{get:u.get,set:u.set}:u[c],h);if("accessor"===o){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(l=i(f.get))&&(u.get=l),(l=i(f.set))&&(u.set=l),(l=i(f.init))&&a.unshift(l)}else(l=i(f))&&("field"===o?a.unshift(l):u[c]=l)}d&&Object.defineProperty(d,s.name,u),m=!0}function ja(e,t,r){for(var s=arguments.length>2,a=0;a<t.length;a++)r=s?t[a].call(e,r):t[a].call(e);return s?r:void 0}function wa(e){return"symbol"==typeof e?e:"".concat(e)}function Na(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function _a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function ka(e,t,r,s){return new(r||(r=Promise))(function(a,n){function i(e){try{o(s.next(e))}catch(dF){n(dF)}}function l(e){try{o(s.throw(e))}catch(dF){n(dF)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,l)}o((s=s.apply(e,t||[])).next())})}function Sa(e,t){var r,s,a,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(o){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(n=0)),n;)try{if(r=1,s&&(a=2&l[0]?s.return:l[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,l[1])).done)return a;switch(s=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(!(a=n.trys,(a=a.length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){n=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){n.label=l[1];break}if(6===l[0]&&n.label<a[1]){n.label=a[1],a=l;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(l);break}a[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(dF){l=[6,dF],s=0}finally{r=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,o])}}}var Ca=Object.create?function(e,t,r,s){void 0===s&&(s=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,a)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]};function Oa(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||Ca(t,e,r)}function Ea(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],s=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pa(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var s,a,n=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(l){a={error:l}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function Ta(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Pa(arguments[t]));return e}function Aa(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var s=Array(e),a=0;for(t=0;t<r;t++)for(var n=arguments[t],i=0,l=n.length;i<l;i++,a++)s[a]=n[i];return s}function Ma(e,t,r){if(r||2===arguments.length)for(var s,a=0,n=t.length;a<n;a++)!s&&a in t||(s||(s=Array.prototype.slice.call(t,0,a)),s[a]=t[a]);return e.concat(s||Array.prototype.slice.call(t))}function Da(e){return this instanceof Da?(this.v=e,this):new Da(e)}function Ia(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,a=r.apply(e,t||[]),n=[];return s=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),s[Symbol.asyncIterator]=function(){return this},s;function i(e,t){a[e]&&(s[e]=function(t){return new Promise(function(r,s){n.push([e,t,r,s])>1||l(e,t)})},t&&(s[e]=t(s[e])))}function l(e,t){try{(r=a[e](t)).value instanceof Da?Promise.resolve(r.value.v).then(o,c):d(n[0][2],r)}catch(dF){d(n[0][3],dF)}var r}function o(e){l("next",e)}function c(e){l("throw",e)}function d(e,t){e(t),n.shift(),n.length&&l(n[0][0],n[0][1])}}function Ra(e){var t,r;return t={},s("next"),s("throw",function(e){throw e}),s("return"),t[Symbol.iterator]=function(){return this},t;function s(s,a){t[s]=e[s]?function(t){return(r=!r)?{value:Da(e[s](t)),done:!1}:a?a(t):t}:a}}function $a(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=Ea(e),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(r){t[r]=e[r]&&function(t){return new Promise(function(s,a){(function(e,t,r,s){Promise.resolve(s).then(function(t){e({value:t,done:r})},t)})(s,a,(t=e[r](t)).done,t.value)})}}}function La(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Fa=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},za=function(e){return(za=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)};function Ua(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=za(e),s=0;s<r.length;s++)"default"!==r[s]&&Ca(t,e,r[s]);return Fa(t,e),t}function Ba(e){return e&&e.__esModule?e:{default:e}}function qa(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)}function Wa(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r}function Ka(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function Va(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var s,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=t[Symbol.asyncDispose]}if(void 0===s){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=t[Symbol.dispose],r&&(a=s)}if("function"!=typeof s)throw new TypeError("Object not disposable.");a&&(s=function(){try{a.call(this)}catch(dF){return Promise.reject(dF)}}),e.stack.push({value:t,dispose:s,async:r})}else r&&e.stack.push({async:!0});return t}var Ha="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var s=new Error(r);return s.name="SuppressedError",s.error=e,s.suppressed=t,s};function Ga(e){function t(t){e.error=e.hasError?new Ha(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,s=0;return function a(){for(;r=e.stack.pop();)try{if(!r.async&&1===s)return s=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var n=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(n).then(a,function(e){return t(e),a()})}else s|=1}catch(dF){t(dF)}if(1===s)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function Ya(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,s,a,n){return r?t?".jsx":".js":!s||a&&n?s+a+"."+n.toLowerCase()+"js":e}):e}const Ja={__extends:xa,__assign:fa,__rest:ga,__decorate:ba,__param:va,__esDecorate:ya,__runInitializers:ja,__propKey:wa,__setFunctionName:Na,__metadata:_a,__awaiter:ka,__generator:Sa,__createBinding:Ca,__exportStar:Oa,__values:Ea,__read:Pa,__spread:Ta,__spreadArrays:Aa,__spreadArray:Ma,__await:Da,__asyncGenerator:Ia,__asyncDelegator:Ra,__asyncValues:$a,__makeTemplateObject:La,__importStar:Ua,__importDefault:Ba,__classPrivateFieldGet:qa,__classPrivateFieldSet:Wa,__classPrivateFieldIn:Ka,__addDisposableResource:Va,__disposeResources:Ga,__rewriteRelativeImportExtension:Ya},Za=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Va,get __assign(){return fa},__asyncDelegator:Ra,__asyncGenerator:Ia,__asyncValues:$a,__await:Da,__awaiter:ka,__classPrivateFieldGet:qa,__classPrivateFieldIn:Ka,__classPrivateFieldSet:Wa,__createBinding:Ca,__decorate:ba,__disposeResources:Ga,__esDecorate:ya,__exportStar:Oa,__extends:xa,__generator:Sa,__importDefault:Ba,__importStar:Ua,__makeTemplateObject:La,__metadata:_a,__param:va,__propKey:wa,__read:Pa,__rest:ga,__rewriteRelativeImportExtension:Ya,__runInitializers:ja,__setFunctionName:Na,__spread:Ta,__spreadArray:Ma,__spreadArrays:Aa,__values:Ea,default:Ja},Symbol.toStringTag,{value:"Module"}));class Qa extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Xa extends Qa{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class en extends Qa{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class tn extends Qa{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var rn,sn;(sn=rn||(rn={})).Any="any",sn.ApNortheast1="ap-northeast-1",sn.ApNortheast2="ap-northeast-2",sn.ApSouth1="ap-south-1",sn.ApSoutheast1="ap-southeast-1",sn.ApSoutheast2="ap-southeast-2",sn.CaCentral1="ca-central-1",sn.EuCentral1="eu-central-1",sn.EuWest1="eu-west-1",sn.EuWest2="eu-west-2",sn.EuWest3="eu-west-3",sn.SaEast1="sa-east-1",sn.UsEast1="us-east-1",sn.UsWest1="us-west-1",sn.UsWest2="us-west-2";class an{constructor(e,{headers:t={},customFetch:r,region:s=rn.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ka(this,arguments,void 0,function*(e,t={}){var r;let s,a;try{const{headers:n,method:i,body:l,signal:o,timeout:c}=t;let d={},{region:u}=t;u||(u=this.region);const m=new URL(`${this.url}/${e}`);let p;u&&"any"!==u&&(d["x-region"]=u,m.searchParams.set("forceFunctionRegion",u)),l&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)?"undefined"!=typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",p=l):"string"==typeof l?(d["Content-Type"]="text/plain",p=l):"undefined"!=typeof FormData&&l instanceof FormData?p=l:(d["Content-Type"]="application/json",p=JSON.stringify(l)):p=l;let h=o;c&&(a=new AbortController,s=setTimeout(()=>a.abort(),c),o?(h=a.signal,o.addEventListener("abort",()=>a.abort())):h=a.signal);const x=yield this.fetch(m.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),n),body:p,signal:h}).catch(e=>{throw new Xa(e)}),f=x.headers.get("x-relay-error");if(f&&"true"===f)throw new en(x);if(!x.ok)throw new tn(x);let g,b=(null!==(r=x.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return g="application/json"===b?yield x.json():"application/octet-stream"===b||"application/pdf"===b?yield x.blob():"text/event-stream"===b?x:"multipart/form-data"===b?yield x.formData():yield x.text(),{data:g,error:null,response:x}}catch(n){return{data:null,error:n,response:n instanceof tn||n instanceof en?n.context:void 0}}finally{s&&clearTimeout(s)}})}}var nn={};const ln=a(Za);var on,cn,dn,un,mn,pn,hn,xn={},fn={},gn={},bn={},vn={},yn={};function jn(){if(on)return yn;on=1,Object.defineProperty(yn,"__esModule",{value:!0});class e extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}return yn.default=e,yn}function wn(){if(cn)return vn;cn=1,Object.defineProperty(vn,"__esModule",{value:!0});const e=ln.__importDefault(jn());return vn.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(t,r){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async t=>{var r,s,a,n;let i=null,l=null,o=null,c=t.status,d=t.statusText;if(t.ok){if("HEAD"!==this.method){const e=await t.text();""===e||(l="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(r=this.headers.get("Accept"))||void 0===r?void 0:r.includes("application/vnd.pgrst.plan+text"))?e:JSON.parse(e))}const e=null===(s=this.headers.get("Prefer"))||void 0===s?void 0:s.match(/count=(exact|planned|estimated)/),n=null===(a=t.headers.get("content-range"))||void 0===a?void 0:a.split("/");e&&n&&n.length>1&&(o=parseInt(n[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(l)&&(l.length>1?(i={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,o=null,c=406,d="Not Acceptable"):l=1===l.length?l[0]:null)}else{const r=await t.text();try{i=JSON.parse(r),Array.isArray(i)&&404===t.status&&(l=[],i=null,c=200,d="OK")}catch(u){404===t.status&&""===r?(c=204,d="No Content"):i={message:r}}if(i&&this.isMaybeSingle&&(null===(n=null==i?void 0:i.details)||void 0===n?void 0:n.includes("0 rows"))&&(i=null,c=200,d="OK"),i&&this.shouldThrowOnError)throw new e.default(i)}return{error:i,data:l,count:o,status:c,statusText:d}});return this.shouldThrowOnError||(s=s.catch(e=>{var t,r,s,a,n,i;let l="";const o=null==e?void 0:e.cause;if(o){const n=null!==(t=null==o?void 0:o.message)&&void 0!==t?t:"",i=null!==(r=null==o?void 0:o.code)&&void 0!==r?r:"";l=`${null!==(s=null==e?void 0:e.name)&&void 0!==s?s:"FetchError"}: ${null==e?void 0:e.message}`,l+=`\n\nCaused by: ${null!==(a=null==o?void 0:o.name)&&void 0!==a?a:"Error"}: ${n}`,i&&(l+=` (${i})`),(null==o?void 0:o.stack)&&(l+=`\n${o.stack}`)}else l=null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:"";return{error:{message:`${null!==(i=null==e?void 0:e.name)&&void 0!==i?i:"FetchError"}: ${null==e?void 0:e.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}},vn}function Nn(){if(dn)return bn;dn=1,Object.defineProperty(bn,"__esModule",{value:!0});const e=ln.__importDefault(wn());class t extends e.default{select(e){let t=!1;const r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){const n=a?`${a}.order`:"order",i=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const a=void 0===s?"offset":`${s}.offset`,n=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(n,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:n="text"}={}){var i;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),o=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${n}; for="${o}"; options=${l};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}return bn.default=t,bn}function _n(){if(un)return gn;un=1,Object.defineProperty(gn,"__esModule",{value:!0});const e=ln.__importDefault(Nn()),t=new RegExp("[,()]");class r extends e.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,r){const s=Array.from(new Set(r)).map(e=>"string"==typeof e&&t.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let a="";"plain"===s?a="pl":"phrase"===s?a="ph":"websearch"===s&&(a="w");const n=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}return gn.default=r,gn}function kn(){if(mn)return fn;mn=1,Object.defineProperty(fn,"__esModule",{value:!0});const e=ln.__importDefault(_n());return fn.default=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}select(t,r){const{head:s=!1,count:a}=null!=r?r:{},n=s?"HEAD":"GET";let i=!1;const l=(null!=t?t:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",l),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:s=!0}={}){var a;if(r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(e.length>0){const t=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:s=!1,count:a,defaultToNull:n=!0}={}){var i;if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),void 0!==r&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(e.length>0){const t=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(t,{count:r}={}){var s;return r&&this.headers.append("Prefer",`count=${r}`),new e.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}delete({count:t}={}){var r;return t&&this.headers.append("Prefer",`count=${t}`),new e.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}},fn}var Sn=function(){if(hn)return nn;hn=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.PostgrestError=nn.PostgrestBuilder=nn.PostgrestTransformBuilder=nn.PostgrestFilterBuilder=nn.PostgrestQueryBuilder=nn.PostgrestClient=void 0;const e=ln,t=e.__importDefault(function(){if(pn)return xn;pn=1,Object.defineProperty(xn,"__esModule",{value:!0});const e=ln,t=e.__importDefault(kn()),r=e.__importDefault(_n());class s{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new t.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new s(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:a=!1,count:n}={}){var i;let l;const o=new URL(`${this.url}/rpc/${e}`);let c;s||a?(l=s?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{o.searchParams.append(e,t)})):(l="POST",c=t);const d=new Headers(this.headers);return n&&d.set("Prefer",`count=${n}`),new r.default({method:l,url:o,headers:d,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}return xn.default=s,xn}());nn.PostgrestClient=t.default;const r=e.__importDefault(kn());nn.PostgrestQueryBuilder=r.default;const s=e.__importDefault(_n());nn.PostgrestFilterBuilder=s.default;const a=e.__importDefault(Nn());nn.PostgrestTransformBuilder=a.default;const n=e.__importDefault(wn());nn.PostgrestBuilder=n.default;const i=e.__importDefault(jn());return nn.PostgrestError=i.default,nn.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:n.default,PostgrestError:i.default},nn}();const Cn=s(Sn),On=r({__proto__:null,default:Cn},[Sn]),{PostgrestClient:En,PostgrestQueryBuilder:Pn,PostgrestFilterBuilder:Tn,PostgrestTransformBuilder:An,PostgrestBuilder:Mn,PostgrestError:Dn}=Cn||On;class In{constructor(){}static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){const e=process.versions;if(e&&e.node){const t=e.node,r=parseInt(t.replace(/^v/,"").split(".")[0]);return r>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const Rn="1.0.0",$n=Rn,Ln=1e4;var Fn,zn,Un,Bn,qn,Wn,Kn,Vn,Hn,Gn,Yn;(zn=Fn||(Fn={}))[zn.connecting=0]="connecting",zn[zn.open=1]="open",zn[zn.closing=2]="closing",zn[zn.closed=3]="closed",(Bn=Un||(Un={})).closed="closed",Bn.errored="errored",Bn.joined="joined",Bn.joining="joining",Bn.leaving="leaving",(Wn=qn||(qn={})).close="phx_close",Wn.error="phx_error",Wn.join="phx_join",Wn.reply="phx_reply",Wn.leave="phx_leave",Wn.access_token="access_token",(Kn||(Kn={})).websocket="websocket",(Hn=Vn||(Vn={})).Connecting="connecting",Hn.Open="open",Hn.Closing="closing",Hn.Closed="closed";class Jn{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,t){if(this._isArrayBuffer(e.payload))return t(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&"string"==typeof e.payload.event)return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodePush(e){var t,r;const{event:s,topic:a,payload:n}=e,i=null!==(t=e.ref)&&void 0!==t?t:"",l=null!==(r=e.join_ref)&&void 0!==r?r:"",o=this.META_LENGTH+l.length+i.length+a.length+s.length,c=new ArrayBuffer(this.HEADER_LENGTH+o);let d=new DataView(c),u=0;d.setUint8(u++,this.KINDS.push),d.setUint8(u++,l.length),d.setUint8(u++,i.length),d.setUint8(u++,a.length),d.setUint8(u++,s.length),Array.from(l,e=>d.setUint8(u++,e.charCodeAt(0))),Array.from(i,e=>d.setUint8(u++,e.charCodeAt(0))),Array.from(a,e=>d.setUint8(u++,e.charCodeAt(0))),Array.from(s,e=>d.setUint8(u++,e.charCodeAt(0)));var m=new Uint8Array(c.byteLength+n.byteLength);return m.set(new Uint8Array(c),0),m.set(new Uint8Array(n),c.byteLength),m.buffer}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null===(t=e.payload)||void 0===t?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r,s,a;const n=e.topic,i=null!==(t=e.ref)&&void 0!==t?t:"",l=null!==(r=e.join_ref)&&void 0!==r?r:"",o=e.payload.event,c=null!==(a=null===(s=e.payload)||void 0===s?void 0:s.payload)&&void 0!==a?a:new ArrayBuffer(0),d=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+i.length+n.length+o.length,u=new ArrayBuffer(this.HEADER_LENGTH+d);let m=new DataView(u),p=0;m.setUint8(p++,this.KINDS.userBroadcastPush),m.setUint8(p++,l.length),m.setUint8(p++,i.length),m.setUint8(p++,n.length),m.setUint8(p++,o.length),m.setUint8(p++,this.BINARY_ENCODING),Array.from(l,e=>m.setUint8(p++,e.charCodeAt(0))),Array.from(i,e=>m.setUint8(p++,e.charCodeAt(0))),Array.from(n,e=>m.setUint8(p++,e.charCodeAt(0))),Array.from(o,e=>m.setUint8(p++,e.charCodeAt(0)));var h=new Uint8Array(u.byteLength+c.byteLength);return h.set(new Uint8Array(u),0),h.set(new Uint8Array(c),u.byteLength),h.buffer}_encodeJsonUserBroadcastPush(e){var t,r,s,a;const n=e.topic,i=null!==(t=e.ref)&&void 0!==t?t:"",l=null!==(r=e.join_ref)&&void 0!==r?r:"",o=e.payload.event,c=null!==(a=null===(s=e.payload)||void 0===s?void 0:s.payload)&&void 0!==a?a:{},d=(new TextEncoder).encode(JSON.stringify(c)).buffer,u=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+i.length+n.length+o.length,m=new ArrayBuffer(this.HEADER_LENGTH+u);let p=new DataView(m),h=0;p.setUint8(h++,this.KINDS.userBroadcastPush),p.setUint8(h++,l.length),p.setUint8(h++,i.length),p.setUint8(h++,n.length),p.setUint8(h++,o.length),p.setUint8(h++,this.JSON_ENCODING),Array.from(l,e=>p.setUint8(h++,e.charCodeAt(0))),Array.from(i,e=>p.setUint8(h++,e.charCodeAt(0))),Array.from(n,e=>p.setUint8(h++,e.charCodeAt(0))),Array.from(o,e=>p.setUint8(h++,e.charCodeAt(0)));var x=new Uint8Array(m.byteLength+d.byteLength);return x.set(new Uint8Array(m),0),x.set(new Uint8Array(d),m.byteLength),x.buffer}decode(e,t){if(this._isArrayBuffer(e)){return t(this._binaryDecode(e))}if("string"==typeof e){const r=JSON.parse(e),[s,a,n,i,l]=r;return t({join_ref:s,ref:a,topic:n,event:i,payload:l})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.push:return this._decodePush(e,t,s);case this.KINDS.reply:return this._decodeReply(e,t,s);case this.KINDS.broadcast:return this._decodeBroadcast(e,t,s);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,s)}}_decodePush(e,t,r){const s=t.getUint8(1),a=t.getUint8(2),n=t.getUint8(3);let i=this.HEADER_LENGTH+this.META_LENGTH-1;const l=r.decode(e.slice(i,i+s));i+=s;const o=r.decode(e.slice(i,i+a));i+=a;const c=r.decode(e.slice(i,i+n));i+=n;return{join_ref:l,ref:null,topic:o,event:c,payload:JSON.parse(r.decode(e.slice(i,e.byteLength)))}}_decodeReply(e,t,r){const s=t.getUint8(1),a=t.getUint8(2),n=t.getUint8(3),i=t.getUint8(4);let l=this.HEADER_LENGTH+this.META_LENGTH;const o=r.decode(e.slice(l,l+s));l+=s;const c=r.decode(e.slice(l,l+a));l+=a;const d=r.decode(e.slice(l,l+n));l+=n;const u=r.decode(e.slice(l,l+i));l+=i;const m={status:u,response:JSON.parse(r.decode(e.slice(l,e.byteLength)))};return{join_ref:o,ref:c,topic:d,event:qn.reply,payload:m}}_decodeBroadcast(e,t,r){const s=t.getUint8(1),a=t.getUint8(2);let n=this.HEADER_LENGTH+2;const i=r.decode(e.slice(n,n+s));n+=s;const l=r.decode(e.slice(n,n+a));n+=a;return{join_ref:null,ref:null,topic:i,event:l,payload:JSON.parse(r.decode(e.slice(n,e.byteLength)))}}_decodeUserBroadcast(e,t,r){const s=t.getUint8(1),a=t.getUint8(2),n=t.getUint8(3),i=t.getUint8(4);let l=this.HEADER_LENGTH+4;const o=r.decode(e.slice(l,l+s));l+=s;const c=r.decode(e.slice(l,l+a));l+=a;const d=r.decode(e.slice(l,l+n));l+=n;const u=e.slice(l,e.byteLength),m=i===this.JSON_ENCODING?JSON.parse(r.decode(u)):u,p={type:this.BROADCAST,event:c,payload:m};return n>0&&(p.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:o,event:this.BROADCAST,payload:p}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)}}class Zn{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(Yn=Gn||(Gn={})).abstime="abstime",Yn.bool="bool",Yn.date="date",Yn.daterange="daterange",Yn.float4="float4",Yn.float8="float8",Yn.int2="int2",Yn.int4="int4",Yn.int4range="int4range",Yn.int8="int8",Yn.int8range="int8range",Yn.json="json",Yn.jsonb="jsonb",Yn.money="money",Yn.numeric="numeric",Yn.oid="oid",Yn.reltime="reltime",Yn.text="text",Yn.time="time",Yn.timestamp="timestamp",Yn.timestamptz="timestamptz",Yn.timetz="timetz",Yn.tsrange="tsrange",Yn.tstzrange="tstzrange";const Qn=(e,t,r={})=>{var s;const a=null!==(s=r.skipTypes)&&void 0!==s?s:[];return t?Object.keys(t).reduce((r,s)=>(r[s]=Xn(s,e,t,a),r),{}):{}},Xn=(e,t,r,s)=>{const a=t.find(t=>t.name===e),n=null==a?void 0:a.type,i=r[e];return n&&!s.includes(n)?ei(n,i):ti(i)},ei=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return ni(t,r)}switch(e){case Gn.bool:return ri(t);case Gn.float4:case Gn.float8:case Gn.int2:case Gn.int4:case Gn.int8:case Gn.numeric:case Gn.oid:return si(t);case Gn.json:case Gn.jsonb:return ai(t);case Gn.timestamp:return ii(t);case Gn.abstime:case Gn.date:case Gn.daterange:case Gn.int4range:case Gn.int8range:case Gn.money:case Gn.reltime:case Gn.text:case Gn.time:case Gn.timestamptz:case Gn.timetz:case Gn.tsrange:case Gn.tstzrange:default:return ti(t)}},ti=e=>e,ri=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},si=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ai=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ni=(e,t)=>{if("string"!=typeof e)return e;const r=e.length-1,s=e[r];if("{"===e[0]&&"}"===s){let s;const n=e.slice(1,r);try{s=JSON.parse("["+n+"]")}catch(a){s=n?n.split(","):[]}return s.map(e=>ei(t,e))}return e},ii=e=>"string"==typeof e?e.replace(" ","T"):e,li=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class oi{constructor(e,t,r={},s=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ci,di,ui,mi,pi,hi,xi,fi;(di=ci||(ci={})).SYNC="sync",di.JOIN="join",di.LEAVE="leave";class gi{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gi.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=gi.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=gi.syncDiff(this.state,e,t,r),s())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const a=this.cloneDeep(e),n=this.transformState(t),i={},l={};return this.map(a,(e,t)=>{n[e]||(l[e]=t)}),this.map(n,(e,t)=>{const r=a[e];if(r){const s=t.map(e=>e.presence_ref),a=r.map(e=>e.presence_ref),n=t.filter(e=>a.indexOf(e.presence_ref)<0),o=r.filter(e=>s.indexOf(e.presence_ref)<0);n.length>0&&(i[e]=n),o.length>0&&(l[e]=o)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:l},r,s)}static syncDiff(e,t,r,s){const{joins:a,leaves:n}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(t,s)=>{var a;const n=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(s),n.length>0){const r=e[t].map(e=>e.presence_ref),s=n.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...s)}r(t,n,s)}),this.map(n,(t,r)=>{let a=e[t];if(!a)return;const n=r.map(e=>e.presence_ref);a=a.filter(e=>n.indexOf(e.presence_ref)<0),e[t]=a,s(t,a,r),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return t[r]="metas"in s?s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(mi=ui||(ui={})).ALL="*",mi.INSERT="INSERT",mi.UPDATE="UPDATE",mi.DELETE="DELETE",(hi=pi||(pi={})).BROADCAST="broadcast",hi.PRESENCE="presence",hi.POSTGRES_CHANGES="postgres_changes",hi.SYSTEM="system",(fi=xi||(xi={})).SUBSCRIBED="SUBSCRIBED",fi.TIMED_OUT="TIMED_OUT",fi.CLOSED="CLOSED",fi.CHANNEL_ERROR="CHANNEL_ERROR";class bi{constructor(e,t={config:{}},r){var s,a;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Un.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new oi(this,qn.join,this.params,this.timeout),this.rejoinTimer=new Zn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Un.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Un.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Un.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Un.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Un.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qn.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new gi(this),this.broadcastEndpointURL=li(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(a=null===(s=this.params.config)||void 0===s?void 0:s.broadcast)||void 0===a?void 0:a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Un.closed){const{config:{broadcast:n,presence:i,private:l}}=this.params,o=null!==(s=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==s?s:[],c=!!this.bindings[pi.PRESENCE]&&this.bindings[pi.PRESENCE].length>0||!0===(null===(a=this.params.config.presence)||void 0===a?void 0:a.enabled),d={},u={broadcast:n,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:o,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(xi.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(xi.CLOSED)),this.updateJoinPayload(Object.assign({config:u},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var r;if(this.socket.setAuth(),void 0!==t){const s=this.bindings.postgres_changes,a=null!==(r=null==s?void 0:s.length)&&void 0!==r?r:0,n=[];for(let r=0;r<a;r++){const a=s[r],{filter:{event:i,schema:l,table:o,filter:c}}=a,d=t&&t[r];if(!d||d.event!==i||d.schema!==l||d.table!==o||d.filter!==c)return this.unsubscribe(),this.state=Un.errored,void(null==e||e(xi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));n.push(Object.assign(Object.assign({},a),{id:d.id}))}return this.bindings.postgres_changes=n,void(e&&e(xi.SUBSCRIBED))}null==e||e(xi.SUBSCRIBED)}).receive("error",t=>{this.state=Un.errored,null==e||e(xi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(xi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Un.joined&&e===pi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var s;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(null==t)return Promise.reject("Payload is required for httpSend()");const n={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},i=await this._fetchWithTimeout(this.broadcastEndpointURL,n,null!==(s=r.timeout)&&void 0!==s?s:this.timeout);if(202===i.status)return{success:!0};let l=i.statusText;try{const e=await i.json();l=e.error||e.message||l}catch(o){}return Promise.reject(new Error(l))}async send(e,t={}){var r,s;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var s,a,n;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(n=null===(a=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===a?void 0:a.broadcast)||void 0===n?void 0:n.ack)||r("ok"),i.receive("ok",()=>r("ok")),i.receive("error",()=>r("error")),i.receive("timeout",()=>r("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:n,payload:i}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,l,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(s=e.body)||void 0===s?void 0:s.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Un.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new oi(this,qn.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null==r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Un.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),n=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(a),n}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new oi(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,a;const n=e.toLocaleLowerCase(),{close:i,error:l,leave:o,join:c}=qn;if(r&&[i,l,o,c].indexOf(n)>=0&&r!==this._joinRef())return;let d=this._onMessage(n,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter(e=>{var t,r,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===s?void 0:s.toLocaleLowerCase())===n}).map(e=>e.callback(d,r)):null===(a=this.bindings[n])||void 0===a||a.filter(e=>{var r,s,a,i,l,o;if(["broadcast","presence","postgres_changes"].includes(n)){if("id"in e){const n=e.id,i=null===(r=e.filter)||void 0===r?void 0:r.event;return n&&(null===(s=t.ids)||void 0===s?void 0:s.includes(n))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const r=null===(l=null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===l?void 0:l.toLocaleLowerCase();return"*"===r||r===(null===(o=null==t?void 0:t.event)||void 0===o?void 0:o.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===n}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:r,commit_timestamp:s,type:a,errors:n}=e,i={schema:t,table:r,commit_timestamp:s,eventType:a,new:{},old:{},errors:n};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,r)})}_isClosed(){return this.state===Un.closed}_isJoined(){return this.state===Un.joined}_isJoining(){return this.state===Un.joining}_isLeaving(){return this.state===Un.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),a={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===r&&bi.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(qn.close,{},e)}_onError(e){this._on(qn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Un.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Qn(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Qn(e.columns,e.old_record)),t}}const vi=()=>{},yi=25e3,ji=10,wi=100,Ni=[1e3,2e3,5e3,1e4];class _i{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ln,this.transport=null,this.heartbeatIntervalMs=yi,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vi,this.ref=0,this.reconnectTimer=null,this.vsn=$n,this.logger=vi,this.conn=null,this.sendBuffer=[],this.serializer=new Jn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),!(null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Kn.websocket}`,this.httpEndpoint=li(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=In.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(e?this.conn.close(e,null!=t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Fn.connecting:return Vn.Connecting;case Fn.open:return Vn.Open;case Fn.closing:return Vn.Closing;default:return Vn.Closed}}isConnected(){return this.connectionState()===Vn.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(e=>e.topic===r);if(s)return s;{const r=new bi(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:s,ref:a}=e,n=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${r} (${a})`,s),this.isConnected()?n():this.sendBuffer.push(n)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(dF){this.log("error","error in heartbeat callback",dF)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},wi)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(dF){this.log("error","error in heartbeat callback",dF)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(dF){this.log("error","error in heartbeat callback",dF)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(dF){this.log("error","error in heartbeat callback",dF)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:s,ref:a}=e,n=a?`(${a})`:"",i=s.status||"";this.log("receive",`${i} ${t} ${r} ${n}`.trim(),s),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,s,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Fn.open||this.conn.readyState===Fn.connecting)try{this.conn.close()}catch(dF){this.log("error","Error closing connection",dF)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`);(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(qn.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const r={access_token:t,version:"realtime-js/2.83.0"};t&&e.updateJoinPayload(r),e.joinedOnce&&e._isJoined()&&e._push(qn.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(dF){this.log("error",`error in ${e} callback`,dF)}})}catch(dF){this.log("error",`error triggering ${e} callbacks`,dF)}}_setupReconnectionTimer(){this.reconnectTimer=new Zn(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ji)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,a,n,i,l,o,c,d,u,m;switch(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null==e?void 0:e.timeout)&&void 0!==r?r:Ln,this.heartbeatIntervalMs=null!==(s=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==s?s:yi,this.worker=null!==(a=null==e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(n=null==e?void 0:e.accessToken)&&void 0!==n?n:null,this.heartbeatCallback=null!==(i=null==e?void 0:e.heartbeatCallback)&&void 0!==i?i:vi,this.vsn=null!==(l=null==e?void 0:e.vsn)&&void 0!==l?l:$n,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null==e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>Ni[e-1]||1e4,this.vsn){case Rn:this.encode=null!==(c=null==e?void 0:e.encode)&&void 0!==c?c:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(d=null==e?void 0:e.decode)&&void 0!==d?d:(e,t)=>t(JSON.parse(e));break;case"2.0.0":this.encode=null!==(u=null==e?void 0:e.encode)&&void 0!==u?u:this.serializer.encode.bind(this.serializer),this.decode=null!==(m=null==e?void 0:e.decode)&&void 0!==m?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class ki extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Si(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Ci extends ki{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Oi extends ki{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Ei=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),Pi=e=>{if(Array.isArray(e))return e.map(e=>Pi(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,r])=>{const s=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[s]=Pi(r)}),t},Ti=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null===(t=e.error)||void 0===t?void 0:t.message)||JSON.stringify(e)},Ai=(e,t,r)=>ka(void 0,void 0,void 0,function*(){const s=yield Response;e instanceof s&&!(null==r?void 0:r.noResolveJson)?e.json().then(r=>{const s=e.status||500,a=(null==r?void 0:r.statusCode)||s+"";t(new Ci(Ti(r),s,a))}).catch(e=>{t(new Oi(Ti(e),e))}):t(new Oi(Ti(e),e))}),Mi=(e,t,r,s)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&s?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(s)?(a.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,(null==t?void 0:t.duplex)&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r)):a};function Di(e,t,r,s,a,n){return ka(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(r,Mi(t,s,a,n)).then(e=>{if(!e.ok)throw e;return(null==s?void 0:s.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>Ai(e,l,s))})})}function Ii(e,t,r,s){return ka(this,void 0,void 0,function*(){return Di(e,"GET",t,r,s)})}function Ri(e,t,r,s,a){return ka(this,void 0,void 0,function*(){return Di(e,"POST",t,s,a,r)})}function $i(e,t,r,s,a){return ka(this,void 0,void 0,function*(){return Di(e,"PUT",t,s,a,r)})}function Li(e,t,r,s,a){return ka(this,void 0,void 0,function*(){return Di(e,"DELETE",t,s,a,r)})}class Fi{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return ka(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Si(e))return{data:null,error:e};throw e}})}}var zi;class Ui{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[zi]="BlobDownloadBuilder",this.promise=null}asStream(){return new Fi(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ka(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Si(e))return{data:null,error:e};throw e}})}}zi=Symbol.toStringTag;const Bi={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Wi{constructor(e,t={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Ei(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,s){return ka(this,void 0,void 0,function*(){try{let a;const n=Object.assign(Object.assign({},qi),s);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(n.upsert)});const l=n.metadata;if("undefined"!=typeof Blob&&r instanceof Blob)a=new FormData,a.append("cacheControl",n.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",r);else if("undefined"!=typeof FormData&&r instanceof FormData)a=r,a.has("cacheControl")||a.append("cacheControl",n.cacheControl),l&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(l));else{a=r,i["cache-control"]=`max-age=${n.cacheControl}`,i["content-type"]=n.contentType,l&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(l)));("undefined"!=typeof ReadableStream&&a instanceof ReadableStream||a&&"object"==typeof a&&"pipe"in a&&"function"==typeof a.pipe)&&!n.duplex&&(n.duplex="half")}(null==s?void 0:s.headers)&&(i=Object.assign(Object.assign({},i),s.headers));const o=this._removeEmptyFolders(t),c=this._getFinalPath(o),d=yield("PUT"==e?$i:Ri)(this.fetch,`${this.url}/object/${c}`,a,Object.assign({headers:i},(null==n?void 0:n.duplex)?{duplex:n.duplex}:{}));return{data:{path:o,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Si(a))return{data:null,error:a};throw a}})}upload(e,t,r){return ka(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return ka(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),n=this._getFinalPath(a),i=new URL(this.url+`/object/upload/sign/${n}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:qi.upsert},s),n=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,n["cache-control"]=`max-age=${t.cacheControl}`,n["content-type"]=t.contentType);return{data:{path:a,fullPath:(yield $i(this.fetch,i.toString(),e,{headers:n})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Si(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return ka(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(s["x-upsert"]="true");const a=yield Ri(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),n=new URL(this.url+a.url),i=n.searchParams.get("token");if(!i)throw new ki("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Si(r))return{data:null,error:r};throw r}})}update(e,t,r){return ka(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return ka(this,void 0,void 0,function*(){try{return{data:yield Ri(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Si(s))return{data:null,error:s};throw s}})}copy(e,t,r){return ka(this,void 0,void 0,function*(){try{return{data:{path:(yield Ri(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Si(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return ka(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield Ri(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const n=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${n}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Si(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return ka(this,void 0,void 0,function*(){try{const s=yield Ri(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:s.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Si(s))return{data:null,error:s};throw s}})}download(e,t){const r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),a=s?`?${s}`:"",n=this._getFinalPath(e);return new Ui(()=>Ii(this.fetch,`${this.url}/${r}/${n}${a}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return ka(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Ii(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Pi(e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Si(r))return{data:null,error:r};throw r}})}exists(e){return ka(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,s){return ka(this,void 0,void 0,function*(){return Di(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Si(r)&&r instanceof Oi){const e=r.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],a=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==a&&s.push(a);const n=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&s.push(i);let l=s.join("&");return""!==l&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${n}/public/${r}${l}`)}}}remove(e){return ka(this,void 0,void 0,function*(){try{return{data:yield Li(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Si(t))return{data:null,error:t};throw t}})}list(e,t,r){return ka(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Bi),t),{prefix:e||""});return{data:yield Ri(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Si(s))return{data:null,error:s};throw s}})}listV2(e,t){return ka(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Ri(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Si(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Ki="2.83.0",Vi={"X-Client-Info":`storage-js/${Ki}`};class Hi{constructor(e,t={},r,s){this.shouldThrowOnError=!1;const a=new URL(e);if(null==s?void 0:s.useNewHostname){/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."))}this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Vi),t),this.fetch=Ei(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ka(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield Ii(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Si(t))return{data:null,error:t};throw t}})}getBucket(e){return ka(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Si(t))return{data:null,error:t};throw t}})}createBucket(e){return ka(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield Ri(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Si(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return ka(this,void 0,void 0,function*(){try{return{data:yield $i(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Si(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ka(this,void 0,void 0,function*(){try{return{data:yield Ri(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Si(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ka(this,void 0,void 0,function*(){try{return{data:yield Li(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Si(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class Gi{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Vi),t),this.fetch=Ei(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ka(this,void 0,void 0,function*(){try{return{data:yield Ri(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Si(t))return{data:null,error:t};throw t}})}listBuckets(e){return ka(this,void 0,void 0,function*(){try{const t=new URLSearchParams;void 0!==(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),void 0!==(null==e?void 0:e.offset)&&t.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&t.set("search",e.search);const r=t.toString(),s=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Ii(this.fetch,s,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Si(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ka(this,void 0,void 0,function*(){try{return{data:yield Li(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Si(t))return{data:null,error:t};throw t}})}}const Yi={"X-Client-Info":`storage-js/${Ki}`,"Content-Type":"application/json"};class Ji extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Zi(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}class Qi extends Ji{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Xi extends Ji{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var el,tl;(tl=el||(el={})).InternalError="InternalError",tl.S3VectorConflictException="S3VectorConflictException",tl.S3VectorNotFoundException="S3VectorNotFoundException",tl.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",tl.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",tl.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded";const rl=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),sl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),al=(e,t,r,s)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return s?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(s)?(a.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,Object.assign(Object.assign({},a),r)):a};function nl(e,t,r,s,a,n){return ka(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(r,al(t,s,a,n)).then(e=>{if(!e.ok)throw e;if(null==s?void 0:s.noResolveJson)return e;const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>i(e)).catch(e=>((e,t,r)=>ka(void 0,void 0,void 0,function*(){if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==r?void 0:r.noResolveJson)){const r=e.status||500,s=e;if("function"==typeof s.json)s.json().then(e=>{const s=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||r+"";t(new Qi(sl(e),r,s))}).catch(()=>{const e=r+"",a=s.statusText||`HTTP ${r} error`;t(new Qi(a,r,e))});else{const e=r+"",a=s.statusText||`HTTP ${r} error`;t(new Qi(a,r,e))}}else t(new Xi(sl(e),e))}))(e,l,s))})})}function il(e,t,r,s,a){return ka(this,void 0,void 0,function*(){return nl(e,"POST",t,s,a,r)})}class ll{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yi),t),this.fetch=rl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ka(this,void 0,void 0,function*(){try{return{data:(yield il(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Zi(t))return{data:null,error:t};throw t}})}getIndex(e,t){return ka(this,void 0,void 0,function*(){try{return{data:yield il(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zi(r))return{data:null,error:r};throw r}})}listIndexes(e){return ka(this,void 0,void 0,function*(){try{return{data:yield il(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Zi(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return ka(this,void 0,void 0,function*(){try{return{data:(yield il(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zi(r))return{data:null,error:r};throw r}})}}class ol{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yi),t),this.fetch=rl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ka(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield il(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Zi(t))return{data:null,error:t};throw t}})}getVectors(e){return ka(this,void 0,void 0,function*(){try{return{data:yield il(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Zi(t))return{data:null,error:t};throw t}})}listVectors(e){return ka(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return{data:yield il(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Zi(t))return{data:null,error:t};throw t}})}queryVectors(e){return ka(this,void 0,void 0,function*(){try{return{data:yield il(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Zi(t))return{data:null,error:t};throw t}})}deleteVectors(e){return ka(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield il(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Zi(t))return{data:null,error:t};throw t}})}}class cl{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yi),t),this.fetch=rl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ka(this,void 0,void 0,function*(){try{return{data:(yield il(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Zi(t))return{data:null,error:t};throw t}})}getBucket(e){return ka(this,void 0,void 0,function*(){try{return{data:yield il(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Zi(t))return{data:null,error:t};throw t}})}listBuckets(){return ka(this,arguments,void 0,function*(e={}){try{return{data:yield il(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Zi(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ka(this,void 0,void 0,function*(){try{return{data:(yield il(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Zi(t))return{data:null,error:t};throw t}})}}class dl extends cl{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new ul(this.url,this.headers,e,this.fetch)}}class ul extends ll{constructor(e,t,r,s){super(e,t,s),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ka(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ka(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ka(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ka(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new ml(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class ml extends ol{constructor(e,t,r,s,a){super(e,t,a),this.vectorBucketName=r,this.indexName=s}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ka(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ka(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ka(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ka(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ka(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class pl extends Hi{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new Wi(this.url,this.headers,e,this.fetch)}get vectors(){return new dl(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Gi(this.url+"/iceberg",this.headers,this.fetch)}}let hl="";hl="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const xl={headers:{"X-Client-Info":`supabase-js-${hl}/2.83.0`}},fl={schema:"public"},gl={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},bl={},vl=(e,t,r)=>{const s=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(r),a=Headers;return async(r,n)=>{var i;const l=null!==(i=await t())&&void 0!==i?i:e;let o=new a(null==n?void 0:n.headers);return o.has("apikey")||o.set("apikey",e),o.has("Authorization")||o.set("Authorization",`Bearer ${l}`),s(r,Object.assign(Object.assign({},n),{headers:o}))}};const yl="2.83.0",jl=3e4,wl=9e4,Nl={"X-Client-Info":`gotrue-js/${yl}`},_l="X-Supabase-Api-Version",kl={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Sl=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Cl extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Ol(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class El extends Cl{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class Pl extends Cl{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Tl extends Cl{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class Al extends Tl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Ml extends Tl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Dl extends Tl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Il extends Tl{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rl extends Tl{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $l extends Tl{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ll(e){return Ol(e)&&"AuthRetryableFetchError"===e.name}class Fl extends Tl{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class zl extends Tl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ul="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Bl=" \t\n\r=".split(""),ql=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Bl.length;t+=1)e[Bl[t].charCodeAt(0)]=-2;for(let t=0;t<Ul.length;t+=1)e[Ul[t].charCodeAt(0)]=t;return e})();function Wl(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Ul[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Ul[e]),t.queuedBits-=6}}function Kl(e,t,r){const s=ql[e];if(!(s>-1)){if(-2===s)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Vl(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},n=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,s,r)};for(let i=0;i<e.length;i+=1)Kl(e.charCodeAt(i),a,n);return t.join("")}function Hl(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Gl(e){const t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)Kl(e.charCodeAt(a),r,s);return new Uint8Array(t)}function Yl(e){const t=[];return function(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const t=1024*(s-55296)&65535;s=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}Hl(s,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function Jl(e){const t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};return e.forEach(e=>Wl(e,r,s)),Wl(null,r,s),t.join("")}const Zl=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Ql={tested:!1,writable:!1},Xl=()=>{if(!Zl())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(dF){return!1}if(Ql.tested)return Ql.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ql.tested=!0,Ql.writable=!0}catch(dF){Ql.tested=!0,Ql.writable=!1}return Ql.writable};const eo=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),to=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ro=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(s){return r}},so=async(e,t)=>{await e.removeItem(t)};class ao{constructor(){this.promise=new ao.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function no(e){const t=e.split(".");if(3!==t.length)throw new zl("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Sl.test(t[r]))throw new zl("JWT not in base64url format");return{header:JSON.parse(Vl(t[0])),payload:JSON.parse(Vl(t[1])),signature:Gl(t[2]),raw:{header:t[0],payload:t[1]}}}function io(e){return("0"+e.toString(16)).substr(-2)}async function lo(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function oo(e,t,r=!1){const s=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let s=0;s<56;s++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,io).join("")}();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await to(e,`${t}-code-verifier`,a);const n=await lo(s);return[n,s===n?"plain":"s256"]}ao.promiseConstructor=Promise;const co=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const uo=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function mo(e){if(!uo.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function po(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ho(e){return JSON.parse(JSON.stringify(e))}const xo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),fo=[502,503,504];async function go(e){var t,r;if(!("object"==typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"==typeof r.json))throw new $l(xo(e),0);if(fo.includes(e.status))throw new $l(xo(e),e.status);let s,a;try{s=await e.json()}catch(dF){throw new Pl(xo(dF),dF)}const n=function(e){const t=e.headers.get(_l);if(!t)return null;if(!t.match(co))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(dF){return null}}(e);if(n&&n.getTime()>=kl.timestamp&&"object"==typeof s&&s&&"string"==typeof s.code?a=s.code:"object"==typeof s&&s&&"string"==typeof s.error_code&&(a=s.error_code),a){if("weak_password"===a)throw new Fl(xo(s),e.status,(null===(t=s.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new Al}else if("object"==typeof s&&s&&"object"==typeof s.weak_password&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new Fl(xo(s),e.status,s.weak_password.reasons);throw new El(xo(s),e.status||500,a)}async function bo(e,t,r,s){var a;const n=Object.assign({},null==s?void 0:s.headers);n[_l]||(n[_l]=kl.name),(null==s?void 0:s.jwt)&&(n.Authorization=`Bearer ${s.jwt}`);const i=null!==(a=null==s?void 0:s.query)&&void 0!==a?a:{};(null==s?void 0:s.redirectTo)&&(i.redirect_to=s.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",o=await async function(e,t,r,s,a,n){const i=((e,t,r,s)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))})(t,s,a,n);let l;try{l=await e(r,Object.assign({},i))}catch(dF){throw console.error(dF),new $l(xo(dF),0)}l.ok||await go(l);if(null==s?void 0:s.noResolveJson)return l;try{return await l.json()}catch(dF){await go(dF)}}(e,t,r+l,{headers:n,noResolveJson:null==s?void 0:s.noResolveJson},{},null==s?void 0:s.body);return(null==s?void 0:s.xform)?null==s?void 0:s.xform(o):{data:Object.assign({},o),error:null}}function vo(e){var t;let r=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function yo(e){const t=vo(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function jo(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function wo(e){return{data:e,error:null}}function No(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:n}=e,i=ga(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:n},user:Object.assign({},i)},error:null}}function _o(e){return e}const ko=["global","local","others"];class So{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=eo(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=ko[0]){if(ko.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ko.join(", ")}`);try{return await bo(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ol(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await bo(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:jo})}catch(r){if(Ol(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=ga(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=null==r?void 0:r.newEmail,delete s.newEmail),await bo(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:No,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(Ol(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await bo(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:jo})}catch(t){if(Ol(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,a,n,i,l;try{const o={nextPage:null,lastPage:0,total:0},c=await bo(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(a=null===(s=null==e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==a?a:""},xform:_o});if(c.error)throw c.error;const d=await c.json(),u=null!==(n=c.headers.get("x-total-count"))&&void 0!==n?n:0,m=null!==(l=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==l?l:[];return m.length>0&&(m.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);o[`${r}Page`]=t}),o.total=parseInt(u)),{data:Object.assign(Object.assign({},d),o),error:null}}catch(o){if(Ol(o))return{data:{users:[]},error:o};throw o}}async getUserById(e){mo(e);try{return await bo(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:jo})}catch(t){if(Ol(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){mo(e);try{return await bo(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:jo})}catch(r){if(Ol(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){mo(e);try{return await bo(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:jo})}catch(r){if(Ol(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){mo(e.userId);try{const{data:t,error:r}=await bo(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(Ol(t))return{data:null,error:t};throw t}}async _deleteFactor(e){mo(e.userId),mo(e.id);try{return{data:await bo(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ol(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,s,a,n,i,l;try{const o={nextPage:null,lastPage:0,total:0},c=await bo(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(a=null===(s=null==e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==a?a:""},xform:_o});if(c.error)throw c.error;const d=await c.json(),u=null!==(n=c.headers.get("x-total-count"))&&void 0!==n?n:0,m=null!==(l=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==l?l:[];return m.length>0&&(m.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);o[`${r}Page`]=t}),o.total=parseInt(u)),{data:Object.assign(Object.assign({},d),o),error:null}}catch(o){if(Ol(o))return{data:{clients:[]},error:o};throw o}}async _createOAuthClient(e){try{return await bo(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(Ol(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await bo(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(Ol(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await bo(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(r){if(Ol(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await bo(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(Ol(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await bo(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(Ol(t))return{data:null,error:t};throw t}}}function Co(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Oo=!!(globalThis&&Xl()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Eo extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Po extends Eo{}async function To(e,t,r){Oo&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Oo&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async s=>{if(!s){if(0===t)throw Oo&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Po(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Oo)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(dF){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",dF)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}Oo&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Oo&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}))}function Ao(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Mo(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class Do extends Error{constructor({message:e,code:t,cause:r,name:s}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(a=null!=s?s:r instanceof Error?r.name:void 0)&&void 0!==a?a:"Unknown Error",this.code=t}}class Io extends Do{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Ro({error:e,options:t}){var r,s,a;const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new Do({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if(!0===(null===(r=n.authenticatorSelection)||void 0===r?void 0:r.requireResidentKey))return new Do({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if("conditional"===t.mediation&&"required"===(null===(s=n.authenticatorSelection)||void 0===s?void 0:s.userVerification))return new Do({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if("required"===(null===(a=n.authenticatorSelection)||void 0===a?void 0:a.userVerification))return new Do({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if("InvalidStateError"===e.name)return new Do({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if("NotAllowedError"===e.name)return new Do({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("NotSupportedError"===e.name){return 0===n.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new Do({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Do({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e})}if("SecurityError"===e.name){const t=window.location.hostname;if(!qo(t))return new Do({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(n.rp.id!==t)return new Do({message:`The RP ID "${n.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(n.user.id.byteLength<1||n.user.id.byteLength>64)return new Do({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new Do({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Do({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function $o({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new Do({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if("NotAllowedError"===e.name)return new Do({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("SecurityError"===e.name){const t=window.location.hostname;if(!qo(t))return new Do({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(r.rpId!==t)return new Do({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new Do({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Do({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}const Lo=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function Fo(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:s}=e,a=ga(e,["challenge","user","excludeCredentials"]),n=Gl(t).buffer,i=Object.assign(Object.assign({},r),{id:Gl(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:n,user:i});if(s&&s.length>0){l.excludeCredentials=new Array(s.length);for(let e=0;e<s.length;e++){const t=s[e];l.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:Gl(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return l}function zo(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,s=ga(e,["challenge","allowCredentials"]),a=Gl(t).buffer,n=Object.assign(Object.assign({},s),{challenge:a});if(r&&r.length>0){n.allowCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];n.allowCredentials[e]=Object.assign(Object.assign({},t),{id:Gl(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return n}function Uo(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Jl(new Uint8Array(e.response.attestationObject)),clientDataJSON:Jl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function Bo(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const r=e,s=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Jl(new Uint8Array(a.authenticatorData)),clientDataJSON:Jl(new Uint8Array(a.clientDataJSON)),signature:Jl(new Uint8Array(a.signature)),userHandle:a.userHandle?Jl(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function qo(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Wo(){var e,t;return!!(Zl()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const Ko={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Vo={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ho(...e){const t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),r=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),s={};for(const a of e)if(a)for(const e in a){const n=a[e];if(void 0!==n)if(Array.isArray(n))s[e]=n;else if(r(n))s[e]=n;else if(t(n)){const r=s[e];t(r)?s[e]=Ho(r,n):s[e]=Ho(n)}else s[e]=n}return s}class Go{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:s},a){try{const{data:n,error:i}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!n)return{data:null,error:i};const l=null!=s?s:Lo.createNewAbortSignal();if("create"===n.webauthn.type){const{user:e}=n.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${r}`),e.displayName||(e.displayName=e.name)}switch(n.webauthn.type){case"create":{const t=function(e,t){return Ho(Ko,e,t||{})}(n.webauthn.credential_options.publicKey,null==a?void 0:a.create),{data:r,error:s}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Io("Browser returned unexpected credential type",t)}:{data:null,error:new Io("Empty credential response",t)}}catch(t){return{data:null,error:Ro({error:t,options:e})}}}({publicKey:t,signal:l});return r?{data:{factorId:e,challengeId:n.id,webauthn:{type:n.webauthn.type,credential_response:r}},error:null}:{data:null,error:s}}case"request":{const t=function(e,t){return Ho(Vo,e,t||{})}(n.webauthn.credential_options.publicKey,null==a?void 0:a.request),{data:r,error:s}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Io("Browser returned unexpected credential type",t)}:{data:null,error:new Io("Empty credential response",t)}}catch(t){return{data:null,error:$o({error:t,options:e})}}}(Object.assign(Object.assign({},n.webauthn.credential_options),{publicKey:t,signal:l}));return r?{data:{factorId:e,challengeId:n.id,webauthn:{type:n.webauthn.type,credential_response:r}},error:null}:{data:null,error:s}}}}catch(n){return Ol(n)?{data:null,error:n}:{data:null,error:new Pl("Unexpected error in challenge",n)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:r=("undefined"!=typeof window?[window.location.origin]:void 0),signal:s}={}},a){if(!t)return{data:null,error:new Cl("rpId is required for WebAuthn authentication")};try{if(!Wo())return{data:null,error:new Pl("Browser does not support WebAuthn",null)};const{data:n,error:i}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:s},{request:a});if(!n)return{data:null,error:i};const{webauthn:l}=n;return this._verify({factorId:e,challengeId:n.challengeId,webauthn:{type:l.type,rpId:t,rpOrigins:r,credential_response:l.credential_response}})}catch(n){return Ol(n)?{data:null,error:n}:{data:null,error:new Pl("Unexpected error in authenticate",n)}}}async _register({friendlyName:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:r=("undefined"!=typeof window?[window.location.origin]:void 0),signal:s}={}},a){if(!t)return{data:null,error:new Cl("rpId is required for WebAuthn registration")};try{if(!Wo())return{data:null,error:new Pl("Browser does not support WebAuthn",null)};const{data:n,error:i}=await this._enroll({friendlyName:e});if(!n)return await this.client.mfa.listFactors().then(t=>{var r;return null===(r=t.data)||void 0===r?void 0:r.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:i};const{data:l,error:o}=await this._challenge({factorId:n.id,friendlyName:n.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:s},{create:a});return l?this._verify({factorId:n.id,challengeId:l.challengeId,webauthn:{rpId:t,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:o}}catch(n){return Ol(n)?{data:null,error:n}:{data:null,error:new Pl("Unexpected error in register",n)}}}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(dF){"undefined"!=typeof self&&(self.globalThis=self)}}();const Yo={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Nl,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Jo(e,t,r){return await r()}const Zo={};class Qo{get jwks(){var e,t;return null!==(t=null===(e=Zo[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Zo[this.storageKey]=Object.assign(Object.assign({},Zo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Zo[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Zo[this.storageKey]=Object.assign(Object.assign({},Zo[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},Yo),e);if(this.storageKey=a.storageKey,this.instanceID=null!==(t=Qo.nextInstanceID[this.storageKey])&&void 0!==t?t:0,Qo.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,"function"==typeof a.debug&&(this.logger=a.debug),this.instanceID>0&&Zl()){const e=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(e),this.logDebugMessages&&console.trace(e)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new So({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=eo(a.fetch),this.lock=a.lock||Jo,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:Zl()&&(null===(r=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===r?void 0:r.locks)?this.lock=To:this.lock=Jo,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Go(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Xl()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Co(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Co(this.memoryStorage)),Zl()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(dF){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",dF)}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${yl}) ${(new Date).toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},r="none";if(Zl()&&(t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(dF){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),Zl()&&this.detectSessionInUrl&&"none"!==r){const{data:s,error:a}=await this._getSessionFromURL(t,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return Ol(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:n,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ol(t)?this._returnResult({error:t}):this._returnResult({error:new Pl("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const a=await bo(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken}},xform:vo}),{data:n,error:i}=a;if(i||!n)return this._returnResult({data:{user:null,session:null},error:i});const l=n.session,o=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:o,session:l},error:null})}catch(a){if(Ol(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var t,r,s;try{let a;if("email"in e){const{email:r,password:s,options:n}=e;let i=null,l=null;"pkce"===this.flowType&&([i,l]=await oo(this.storage,this.storageKey)),a=await bo(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==n?void 0:n.emailRedirectTo,body:{email:r,password:s,data:null!==(t=null==n?void 0:n.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:i,code_challenge_method:l},xform:vo})}else{if(!("phone"in e))throw new Dl("You must provide either an email or phone number and a password");{const{phone:t,password:n,options:i}=e;a=await bo(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:n,data:null!==(r=null==i?void 0:i.data)&&void 0!==r?r:{},channel:null!==(s=null==i?void 0:i.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:vo})}}const{data:n,error:i}=a;if(i||!n)return this._returnResult({data:{user:null,session:null},error:i});const l=n.session,o=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:o,session:l},error:null})}catch(a){if(Ol(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:s,options:a}=e;t=await bo(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:s,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:yo})}else{if(!("phone"in e))throw new Dl("You must provide either an email or phone number and a password");{const{phone:r,password:s,options:a}=e;t=await bo(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:s,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:yo})}}const{data:r,error:s}=t;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const e=new Ml;return this._returnResult({data:{user:null,session:null},error:e})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(Ol(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,s,a,n,i,l,o,c,d,u;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:d,wallet:u,statement:h,options:x}=e;let f;if(Zl())if("object"==typeof u)f=u;else{const e=window;if(!("ethereum"in e)||"object"!=typeof e.ethereum||!("request"in e.ethereum)||"function"!=typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");f=e.ethereum}else{if("object"!=typeof u||!(null==x?void 0:x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");f=u}const g=new URL(null!==(t=null==x?void 0:x.url)&&void 0!==t?t:window.location.href),b=await f.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!b||0===b.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const v=Ao(b[0]);let y=null===(r=null==x?void 0:x.signInWithEthereum)||void 0===r?void 0:r.chainId;if(!y){const e=await f.request({method:"eth_chainId"});y=parseInt(e,16)}m=function(e){var t;const{chainId:r,domain:s,expirationTime:a,issuedAt:n=new Date,nonce:i,notBefore:l,requestId:o,resources:c,scheme:d,uri:u,version:m}=e;if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!u)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==m)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const p=`${d?`${d}://${s}`:s} wants you to sign in with your Ethereum account:\n${Ao(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let h=`URI: ${u}\nVersion: ${m}\nChain ID: ${r}${i?`\nNonce: ${i}`:""}\nIssued At: ${n.toISOString()}`;if(a&&(h+=`\nExpiration Time: ${a.toISOString()}`),l&&(h+=`\nNot Before: ${l.toISOString()}`),o&&(h+=`\nRequest ID: ${o}`),c){let e="\nResources:";for(const t of c){if(!t||"string"!=typeof t)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}h+=e}return`${p}\n${h}`}({domain:g.host,address:v,statement:h,uri:g.href,version:"1",chainId:y,nonce:null===(s=null==x?void 0:x.signInWithEthereum)||void 0===s?void 0:s.nonce,issuedAt:null!==(n=null===(a=null==x?void 0:x.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==n?n:new Date,expirationTime:null===(i=null==x?void 0:x.signInWithEthereum)||void 0===i?void 0:i.expirationTime,notBefore:null===(l=null==x?void 0:x.signInWithEthereum)||void 0===l?void 0:l.notBefore,requestId:null===(o=null==x?void 0:x.signInWithEthereum)||void 0===o?void 0:o.requestId,resources:null===(c=null==x?void 0:x.signInWithEthereum)||void 0===c?void 0:c.resources}),p=await f.request({method:"personal_sign",params:[Mo(m),v]})}try{const{data:t,error:r}=await bo(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:p},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(u=e.options)||void 0===u?void 0:u.captchaToken}}:null),xform:vo});if(r)throw r;if(!t||!t.session||!t.user){const e=new Ml;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(h){if(Ol(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signInWithSolana(e){var t,r,s,a,n,i,l,o,c,d,u,m;let p,h;if("message"in e)p=e.message,h=e.signature;else{const{chain:u,wallet:m,statement:x,options:f}=e;let g;if(Zl())if("object"==typeof m)g=m;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");g=e.solana}else{if("object"!=typeof m||!(null==f?void 0:f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=m}const b=new URL(null!==(t=null==f?void 0:f.url)&&void 0!==t?t:window.location.href);if("signIn"in g&&g.signIn){const e=await g.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==f?void 0:f.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),x?{statement:x}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),h=t.signature}else{if(!("signMessage"in g&&"function"==typeof g.signMessage&&"publicKey"in g&&"object"==typeof g&&g.publicKey&&"toBase58"in g.publicKey&&"function"==typeof g.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${b.host} wants you to sign in with your Solana account:`,g.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${b.href}`,`Issued At: ${null!==(s=null===(r=null==f?void 0:f.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...(null===(a=null==f?void 0:f.signInWithSolana)||void 0===a?void 0:a.notBefore)?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...(null===(n=null==f?void 0:f.signInWithSolana)||void 0===n?void 0:n.expirationTime)?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...(null===(i=null==f?void 0:f.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...(null===(l=null==f?void 0:f.signInWithSolana)||void 0===l?void 0:l.nonce)?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...(null===(o=null==f?void 0:f.signInWithSolana)||void 0===o?void 0:o.requestId)?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null==f?void 0:f.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...f.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await g.signMessage((new TextEncoder).encode(p),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");h=e}}try{const{data:t,error:r}=await bo(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Jl(h)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(m=e.options)||void 0===m?void 0:m.captchaToken}}:null),xform:vo});if(r)throw r;if(!t||!t.session||!t.user){const e=new Ml;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(x){if(Ol(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(e){const t=await ro(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(null!=t?t:"").split("/");try{const{data:t,error:a}=await bo(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:vo});if(await so(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!t||!t.session||!t.user){const e=new Ml;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!=s?s:null}),error:a})}catch(a){if(Ol(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:a,nonce:n}=e,i=await bo(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:n,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:vo}),{data:l,error:o}=i;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!l||!l.session||!l.user){const e=new Ml;return this._returnResult({data:{user:null,session:null},error:e})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:o})}catch(t){if(Ol(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,s,a,n;try{if("email"in e){const{email:s,options:a}=e;let n=null,i=null;"pkce"===this.flowType&&([n,i]=await oo(this.storage,this.storageKey));const{error:l}=await bo(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(r=null==a?void 0:a.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:n,code_challenge_method:i},redirectTo:null==a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}if("phone"in e){const{phone:t,options:r}=e,{data:i,error:l}=await bo(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(s=null==r?void 0:r.data)&&void 0!==s?s:{},create_user:null===(a=null==r?void 0:r.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!==(n=null==r?void 0:r.channel)&&void 0!==n?n:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:l})}throw new Dl("You must provide either an email or phone number.")}catch(i){if(Ol(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async verifyOtp(e){var t,r;try{let s,a;"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:n,error:i}=await bo(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:vo});if(i)throw i;if(!n){throw new Error("An error occurred on token verification.")}const l=n.session,o=n.user;return(null==l?void 0:l.access_token)&&(await this._saveSession(l),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:o,session:l},error:null})}catch(s){if(Ol(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var t,r,s,a,n;try{let i=null,l=null;"pkce"===this.flowType&&([i,l]=await oo(this.storage,this.storageKey));const o=await bo(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:wo});return(null===(a=o.data)||void 0===a?void 0:a.url)&&Zl()&&!(null===(n=e.options)||void 0===n?void 0:n.skipBrowserRedirect)&&window.location.assign(o.data.url),this._returnResult(o)}catch(i){if(Ol(i))return this._returnResult({data:null,error:i});throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Al;const{error:s}=await bo(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(Ol(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:a}=e,{error:n}=await bo(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},redirectTo:null==a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:n})}if("phone"in e){const{phone:r,type:s,options:a}=e,{data:n,error:i}=await bo(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null==n?void 0:n.message_id},error:i})}throw new Dl("You must provide either an email or phone number and a type")}catch(t){if(Ol(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(dF){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(dF){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await ro(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<wl;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const t=await ro(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=po()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const t={value:this.suppressGetSessionWarning};e.user=function(e,t){return new Proxy(e,{get:(e,r,s)=>{if("__isInsecureUserWarningProxy"===r)return!0;if("symbol"==typeof r){const t=r.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t||"Symbol(nodejs.util.inspect.custom)"===t)return Reflect.get(e,r,s)}return t.value||"string"!=typeof r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,r,s)}})}(e.user,t),t.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await bo(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:jo}):await this._useSession(async e=>{var t,r,s;const{data:a,error:n}=e;if(n)throw n;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await bo(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(s=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==s?s:void 0,xform:jo}):{data:{user:null},error:new Al}})}catch(t){if(Ol(t))return function(e){return Ol(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await so(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new Al;const n=s.session;let i=null,l=null;"pkce"===this.flowType&&null!=e.email&&([i,l]=await oo(this.storage,this.storageKey));const{data:o,error:c}=await bo(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:l}),jwt:n.access_token,xform:jo});if(c)throw c;return n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("USER_UPDATED",n),this._returnResult({data:{user:n.user},error:null})})}catch(r){if(Ol(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Al;const t=Date.now()/1e3;let r=t,s=!0,a=null;const{payload:n}=no(e.access_token);if(n.exp&&(r=n.exp,s=r<=t),s){const{data:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:s,error:n}=await this._getUser(e.access_token);if(n)throw n;a={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(t){if(Ol(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:s,error:a}=t;if(a)throw a;e=null!==(r=s.session)&&void 0!==r?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new Al;const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(Ol(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Zl())throw new Il("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Il(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Rl("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Il("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Rl("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:n,expires_in:i,expires_at:l,token_type:o}=e;if(!(a&&i&&n&&o))throw new Il("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;l&&(u=parseInt(l));const m=u-c;1e3*m<=jl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const p=u-d;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,u,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,u,c);const{data:h,error:x}=await this._getUser(a);if(x)throw x;const f={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:d,expires_at:u,refresh_token:n,token_type:o,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:f,redirectType:e.type},error:null})}catch(r){if(Ol(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ro(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:a}=t;if(a)return this._returnResult({error:a});const n=null===(r=s.session)||void 0===r?void 0:r.access_token;if(n){const{error:t}=await this.admin.signOut(n,e);if(t&&(!function(e){return Ol(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await so(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=Symbol("auth-callback"),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:s},error:a}=t;if(a)throw a;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(a){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;"pkce"===this.flowType&&([r,s]=await oo(this.storage,this.storageKey,!0));try{return await bo(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(Ol(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null})}catch(t){if(Ol(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:s}=await this._useSession(async t=>{var r,s,a,n,i;const{data:l,error:o}=t;if(o)throw o;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await bo(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(n=l.session)||void 0===n?void 0:n.access_token)&&void 0!==i?i:void 0})});if(s)throw s;return Zl()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==r?void 0:r.url),this._returnResult({data:{provider:e.provider,url:null==r?void 0:r.url},error:null})}catch(r){if(Ol(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:s,data:{session:a}}=t;if(s)throw s;const{options:n,provider:i,token:l,access_token:o,nonce:c}=e,d=await bo(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!==(r=null==a?void 0:a.access_token)&&void 0!==r?r:void 0,body:{provider:i,id_token:l,access_token:o,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:vo}),{data:u,error:m}=d;return m?this._returnResult({data:{user:null,session:null},error:m}):u&&u.session&&u.user?(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("USER_UPDATED",u.session)),this._returnResult({data:u,error:m})):this._returnResult({data:{user:null,session:null},error:new Ml})}catch(s){if(Ol(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:a,error:n}=t;if(n)throw n;return await bo(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(s=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==s?s:void 0})})}catch(t){if(Ol(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const a=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await bo(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:vo})),s=(e,t)=>{const r=200*Math.pow(2,e);return t&&Ll(t)&&Date.now()+r-a<jl},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await r(a);if(!s(a,null,t))return void e(t)}catch(dF){if(!s(a,dF))return void t(dF)}})()}))}catch(a){if(this._debug(t,"error",a),Ol(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(t,"end")}var r,s}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Zl()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await ro(this.storage,this.storageKey);if(a&&this.userStorage){let t=await ro(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await to(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:po()}else if(a&&!a.user&&!a.user){const e=await ro(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(a.user=e.user,await so(this.storage,this.storageKey+"-user"),await to(this.storage,this.storageKey,a)):a.user=po()}if(this._debug(r,"session from storage",a),!this._isValidSession(a))return this._debug(r,"session is not valid"),void(null!==a&&await this._removeSession());const n=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<wl;if(this._debug(r,`session has${n?"":" not"} expired with margin of 90000s`),n){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(console.error(e),Ll(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null==e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return this._debug(r,"error",a),void console.error(a)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Al;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ao;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new Al;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={data:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(a){if(this._debug(s,"error",a),Ol(a)){const e={data:null,error:a};return Ll(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(dF){s.push(dF)}});if(await Promise.all(a),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await to(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const s=ho(e);await to(this.storage,this.storageKey,s)}else{const e=ho(t);await to(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await so(this.storage,this.storageKey),await so(this.storage,this.storageKey+"-code-verifier"),await so(this.storage,this.storageKey+"-user"),this.userStorage&&await so(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Zl()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(dF){console.error("removing visibilitychange callback failed",dF)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),jl);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*r.expires_at-e)/jl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),s<=3&&await this._callRefreshToken(r.refresh_token)})}catch(dF){console.error("Auto refresh tick failed with error. This is likely a transient error.",dF)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(dF){if(!(dF.isAcquireTimeout||dF instanceof Eo))throw dF;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Zl()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const[e,t]=await oo(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});s.push(r.toString())}if(null==r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);s.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:a}=t;return a?this._returnResult({data:null,error:a}):await bo(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null==s?void 0:s.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Ol(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:a,error:n}=t;if(n)return this._returnResult({data:null,error:n});const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:l,error:o}=await bo(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(r=null==a?void 0:a.session)||void 0===r?void 0:r.access_token});return o?this._returnResult({data:null,error:o}):("totp"===e.factorType&&"totp"===l.type&&(null===(s=null==l?void 0:l.totp)||void 0===s?void 0:s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(t){if(Ol(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:a}=t;if(a)return this._returnResult({data:null,error:a});const n=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?Uo(e.webauthn.credential_response):Bo(e.webauthn.credential_response)})}:{code:e.code}),{data:i,error:l}=await bo(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:n,headers:this.headers,jwt:null===(r=null==s?void 0:s.session)||void 0===r?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),this._returnResult({data:i,error:l}))})}catch(t){if(Ol(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:a}=t;if(a)return this._returnResult({data:null,error:a});const n=await bo(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null===(r=null==s?void 0:s.session)||void 0===r?void 0:r.access_token});if(n.error)return n;const{data:i}=n;if("webauthn"!==i.type)return{data:i,error:null};switch(i.webauthn.type){case"create":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:Fo(i.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:zo(i.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Ol(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(e=null==t?void 0:t.factors)&&void 0!==e?e:[])s.all.push(a),"verified"===a.status&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=no(r.access_token);let n=null;a.aal&&(n=a.aal);let i=n;(null!==(t=null===(e=r.user.factors)||void 0===e?void 0:e.filter(e=>"verified"===e.status))&&void 0!==t?t:[]).length>0&&(i="aal2");return{data:{currentLevel:n,nextLevel:i,currentAuthenticationMethods:a.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await bo(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new Al})})}catch(t){if(Ol(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new Al});const n=await bo(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return n.data&&n.data.redirect_url&&Zl()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(n.data.redirect_url),n})}catch(r){if(Ol(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new Al});const n=await bo(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return n.data&&n.data.redirect_url&&Zl()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(n.data.redirect_url),n})}catch(r){if(Ol(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await bo(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new Al})})}catch(e){if(Ol(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await bo(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Al})})}catch(t){if(Ol(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(t=>t.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(t=>t.kid===e),r&&this.jwks_cached_at+6e5>s)return r;const{data:a,error:n}=await bo(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;return a.keys&&0!==a.keys.length?(this.jwks=a,this.jwks_cached_at=s,r=a.keys.find(t=>t.kid===e),r||null):null}async getClaims(e,t={}){try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});r=e.session.access_token}const{header:s,payload:a,signature:n,raw:{header:i,payload:l}}=no(r);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const o=s.alg&&!s.alg.startsWith("HS")&&s.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(s.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!o){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:a,header:s,signature:n},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(s.alg),d=await crypto.subtle.importKey("jwk",o,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,d,n,Yl(`${i}.${l}`))))throw new zl("Invalid JWT signature");return{data:{claims:a,header:s,signature:n},error:null}}catch(r){if(Ol(r))return this._returnResult({data:null,error:r});throw r}}}Qo.nextInstanceID={};const Xo=Qo;class ec extends Xo{constructor(e){super(e)}}class tc{constructor(e,t,r){var s,a,n;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null==e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((r=t).endsWith("/")?r:r+"/")}catch(s){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var r}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const l=`sb-${i.hostname.split(".")[0]}-auth-token`,o=function(e,t){var r,s;const{db:a,auth:n,realtime:i,global:l}=e,{db:o,auth:c,realtime:d,global:u}=t,m={db:Object.assign(Object.assign({},o),a),auth:Object.assign(Object.assign({},c),n),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},u),l),{headers:Object.assign(Object.assign({},null!==(r=null==u?void 0:u.headers)&&void 0!==r?r:{}),null!==(s=null==l?void 0:l.headers)&&void 0!==s?s:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}(null!=r?r:{},{db:fl,realtime:bl,auth:Object.assign(Object.assign({},gl),{storageKey:l}),global:xl});this.storageKey=null!==(s=o.auth.storageKey)&&void 0!==s?s:"",this.headers=null!==(a=o.global.headers)&&void 0!==a?a:{},o.accessToken?(this.accessToken=o.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(n=o.auth)&&void 0!==n?n:{},this.headers,o.global.fetch),this.fetch=vl(t,this._getAccessToken.bind(this),o.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},o.realtime)),this.accessToken&&this.accessToken().then(e=>this.realtime.setAuth(e)).catch(e=>console.warn("Failed to set initial Realtime auth token:",e)),this.rest=new En(new URL("rest/v1",i).href,{headers:this.headers,schema:o.db.schema,fetch:this.fetch}),this.storage=new pl(this.storageUrl.href,this.headers,this.fetch,null==r?void 0:r.storage),o.accessToken||this._listenForAuthEvents()}get functions(){return new an(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:a,storageKey:n,flowType:i,lock:l,debug:o,throwOnError:c},d,u){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ec({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:a,flowType:i,lock:l,debug:o,throwOnError:c,fetch:u,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new _i(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}(function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var rc={};const sc={AUTH:"authentication",NETWORK:"network",VALIDATION:"validation",API:"api",UI:"ui",UNKNOWN:"unknown"},ac={CRITICAL:"critical",ERROR:"error",WARNING:"warning",INFO:"info"},nc=class e{constructor(){t(this,"isProduction"),t(this,"logToConsole"),this.isProduction=!0,this.logToConsole=!this.isProduction||"true"===rc.NEXT_PUBLIC_DEBUG}static getInstance(){return e.instance||(e.instance=new e),e.instance}formatError(e){return e instanceof Error?{name:e.name,message:e.message,stack:e.stack,...e instanceof Cl&&{code:e.status?.toString(),status:e.status}}:{name:"UnknownError",message:String(e)}}getErrorContext(e={}){return{timestamp:(new Date).toISOString(),userAgent:"undefined"!=typeof window?window.navigator.userAgent:"server",url:"undefined"!=typeof window?window.location.href:"",...e}}consoleLog(e,t,r){if(!this.logToConsole)return;(console[e]||console.log)(`%c[${e.toUpperCase()}]`,"color: white; background: #ef4444; padding: 2px 6px; border-radius: 4px;",t,"\nDetails:",r)}async sendToErrorService(e,t,r,s,a={}){if(this.isProduction)try{if(!(await fetch("/api/log-error",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:e,category:t,severity:r,context:this.getErrorContext(s),tags:a})})).ok)throw new Error("Failed to log error to server")}catch(n){this.consoleLog("error","Failed to send error to logging service",{error:n,originalError:e})}else this.consoleLog(r===lc.CRITICAL||r===lc.ERROR?"error":"warn",`[${t}] ${e.name}: ${e.message}`,{error:e,context:s,severity:r,tags:a})}async logError({error:e,category:t=sc.UNKNOWN,severity:r=ac.ERROR,context:s={},tags:a={}}){const n=this.formatError(e);this.consoleLog(r===lc.CRITICAL||r===lc.ERROR?"error":"warn",`[${t}] ${n.name}: ${n.message}`,{error:n,context:s,severity:r,tags:a}),this.isProduction&&await this.sendToErrorService(n,t,r,s,a)}};t(nc,"ErrorCategory",sc),t(nc,"ErrorSeverity",ac),t(nc,"instance");const ic=nc.getInstance(),lc=ac,oc=sc,cc="/api/report-error",dc=e=>{if(e instanceof Error)return e;let t;try{t="string"==typeof e?e:JSON.stringify(e)}catch{t=String(e)}return new Error(t)},uc=e=>({name:e.name,message:e.message,...e.stack?{stack:e.stack}:{}});const mc=new class{constructor(){t(this,"queue",[]),t(this,"isReporting",!1),t(this,"retryCount",0),t(this,"userContext",null)}async reportError(e,t={},r){const s=dc(e),a={error:uc(s),context:{...t},componentStack:r,timestamp:(new Date).toISOString(),url:"undefined"!=typeof window?window.location.href:"",userAgent:"undefined"!=typeof navigator?navigator.userAgent:""};this.userContext&&(a.user={...this.userContext}),this.queue.push(a),await this.processQueue()}async processQueue(){if(this.isReporting||0===this.queue.length)return;this.isReporting=!0;const e=this.queue[0];try{const t=await fetch(cc,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to report error: ${t.statusText}`);this.queue.shift(),this.retryCount=0,this.queue.length>0&&setTimeout(()=>{this.processQueue()},0)}catch(t){if(this.retryCount++,this.retryCount<=3){const e=5e3*Math.pow(2,this.retryCount-1);setTimeout(()=>{this.processQueue()},e)}else{const e=dc(t);console.error("Failed to report error after multiple retries:",e),await ic.logError({error:e,category:oc.API,severity:lc.ERROR,context:{endpoint:cc,retryCount:this.retryCount,queueLength:this.queue.length}}),this.queue.shift(),this.retryCount=0,this.queue.length>0&&setTimeout(()=>{this.processQueue()},0)}}finally{this.isReporting=!1}}setUserContext(e){this.userContext={...e}}};class pc extends u.Component{constructor(e){super(e),t(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null,showDetails:!1})}),t(this,"handleReportError",async()=>{const{error:e,errorInfo:t}=this.state;if(e){this.setState({isReporting:!0});try{await mc.reportError(e,{userReported:!0,componentStack:t?.componentStack,location:window.location.href,timestamp:(new Date).toISOString()},t?.componentStack),this.setState({reportSubmitted:!0})}catch(r){console.error("Failed to submit error report:",r)}finally{this.setState({isReporting:!1})}}}),t(this,"toggleDetails",()=>{this.setState(e=>({showDetails:!e.showDetails}))}),this.state={hasError:!1,error:null,errorInfo:null,showDetails:!1,isReporting:!1,reportSubmitted:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({errorInfo:t});const{onError:r,context:s}=this.props;mc.reportError(e,{...s,componentStack:t.componentStack},t.componentStack),r&&r(e,t)}render(){const{hasError:e,error:t,errorInfo:r,showDetails:s,isReporting:a,reportSubmitted:n}=this.state,{children:i,fallback:l}=this.props;return e?l||Ns.jsx("div",{className:"min-h-screen bg-pr-surface-2 flex items-center justify-center p-4",children:Ns.jsxs("div",{className:"bg-pr-surface-card p-8 rounded-lg shadow-md w-full max-w-2xl",children:[Ns.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),Ns.jsx("p",{className:"text-pr-text-2 mb-6",children:"We're sorry, but an unexpected error occurred. Our team has been notified."}),Ns.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[Ns.jsx("button",{onClick:this.handleRetry,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Try Again"}),!n&&Ns.jsx("button",{onClick:this.handleReportError,disabled:a,className:`px-4 py-2 ${a?"bg-gray-400":"bg-green-600 hover:bg-green-700"} text-white rounded-md transition-colors`,children:a?"Sending...":"Report Error"}),Ns.jsx("button",{onClick:this.toggleDetails,className:"px-4 py-2 border border-pr-surface-3 rounded-md text-pr-text-1 hover:bg-pr-surface-2 transition-colors",children:s?"Hide Details":"Show Details"})]}),s&&t&&Ns.jsxs("div",{className:"mt-4 p-4 bg-pr-surface-2 rounded-md overflow-auto max-h-64",children:[Ns.jsx("h3",{className:"font-medium text-pr-text-1 mb-2",children:"Error Details:"}),Ns.jsx("pre",{className:"text-sm text-red-600 whitespace-pre-wrap",children:t.toString()}),r?.componentStack&&Ns.jsxs(Ns.Fragment,{children:[Ns.jsx("h4",{className:"font-medium text-pr-text-1 mt-4 mb-2",children:"Component Stack:"}),Ns.jsx("pre",{className:"text-xs text-pr-text-2 overflow-auto",children:r.componentStack})]})]}),n&&Ns.jsx("div",{className:"mt-4 p-3 bg-green-50 text-green-700 rounded-md",children:"Thank you for reporting this issue. Our team has been notified."})]})}):i}}function hc(){const[e,t]=u.useState(!1),[r,s]=u.useState("");return u.useEffect(()=>{if("undefined"==typeof window)return;const e=()=>{const e=new URLSearchParams(window.location.search);t("layout"===e.get("debug"))},r=()=>e(),s=t=>{const r=window.history[t];return(...t)=>{const s=r.apply(window.history,t);return e(),s}},a=window.history.pushState,n=window.history.replaceState;return window.history.pushState=s("pushState"),window.history.replaceState=s("replaceState"),window.addEventListener("popstate",r),e(),()=>{window.removeEventListener("popstate",r),window.history.pushState=a,window.history.replaceState=n}},[]),u.useEffect(()=>{if(!e)return;if("undefined"==typeof window)return;const t=()=>{const e=window.innerWidth;s(e<640?"xs (<640px)":e<768?"sm (640-768px)":e<1024?"md (768-1024px)":e<1280?"lg (1024-1280px)":e<1536?"xl (1280-1536px)":e<1920?"2xl (1536-1920px)":"ultrawide (>1920px)")};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[e]),e?Ns.jsxs(Ns.Fragment,{children:[Ns.jsx("style",{children:'\n        /* Grid boundaries */\n        .debug-layout [class*="grid"] {\n          outline: 2px dashed #ff00ff !important;\n          outline-offset: -2px;\n        }\n\n        /* Sidebar boundaries */\n        .debug-layout aside {\n          outline: 3px solid #00ff00 !important;\n          outline-offset: -3px;\n        }\n\n        /* Main content area */\n        .debug-layout main {\n          outline: 3px solid #0000ff !important;\n          outline-offset: -3px;\n        }\n\n        /* Cards */\n        .debug-layout [class*="card"],\n        .debug-layout [class*="Card"],\n        .debug-layout [class*="rounded-xl"],\n        .debug-layout [class*="bg-pr-surface-card"] {\n          outline: 2px solid #ff6b00 !important;\n          outline-offset: -2px;\n        }\n\n        /* Max-width containers */\n        .debug-layout [class*="max-w"] {\n          outline: 2px dotted #ffff00 !important;\n          outline-offset: -2px;\n        }\n\n        /* Overflow detection */\n        .debug-layout * {\n          position: relative;\n        }\n\n        .debug-layout *::-webkit-scrollbar {\n          width: 8px;\n          height: 8px;\n        }\n\n        .debug-layout *::-webkit-scrollbar-track {\n          background: rgba(255, 0, 0, 0.1);\n        }\n\n        .debug-layout *::-webkit-scrollbar-thumb {\n          background: rgba(255, 0, 0, 0.5);\n          border-radius: 4px;\n        }\n\n        /* Highlight elements that overflow */\n        .debug-layout *[style*="overflow: hidden"],\n        .debug-layout *.overflow-hidden {\n          box-shadow: inset 0 0 0 2px rgba(0, 255, 0, 0.3) !important;\n        }\n      '}),Ns.jsxs("div",{className:"fixed top-4 right-4 z-[9999] bg-black text-white p-4 rounded-lg shadow-2xl font-mono text-xs max-w-xs",style:{pointerEvents:"none"},children:[Ns.jsx("div",{className:"font-bold text-sm mb-2 text-green-400",children:" Layout Debugger"}),Ns.jsxs("div",{className:"space-y-1 text-[10px]",children:[Ns.jsxs("div",{children:[Ns.jsx("span",{className:"text-gray-400",children:"Breakpoint:"})," ",Ns.jsx("span",{className:"text-yellow-300 font-bold",children:r})]}),Ns.jsxs("div",{children:[Ns.jsx("span",{className:"text-gray-400",children:"Width:"})," ",Ns.jsxs("span",{className:"text-blue-300",children:[window.innerWidth,"px"]})]}),Ns.jsxs("div",{children:[Ns.jsx("span",{className:"text-gray-400",children:"Height:"})," ",Ns.jsxs("span",{className:"text-blue-300",children:[window.innerHeight,"px"]})]})]}),Ns.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700 space-y-1 text-[10px]",children:[Ns.jsx("div",{className:"font-bold text-white mb-1",children:"Legend:"}),Ns.jsxs("div",{children:[Ns.jsx("span",{className:"text-green-400",children:""})," Sidebars"]}),Ns.jsxs("div",{children:[Ns.jsx("span",{className:"text-blue-400",children:""})," Main content"]}),Ns.jsxs("div",{children:[Ns.jsx("span",{className:"text-orange-400",children:""})," Cards"]}),Ns.jsxs("div",{children:[Ns.jsx("span",{className:"text-yellow-400",children:""})," Max-width containers"]}),Ns.jsxs("div",{children:[Ns.jsx("span",{className:"text-purple-400",children:""})," Grid layouts"]})]}),Ns.jsx("div",{className:"mt-3 pt-3 border-t border-gray-700 text-[10px]",children:Ns.jsx("div",{className:"text-gray-400",children:"Remove ?debug=layout to disable"})})]}),Ns.jsx(xc,{})]}):null}function xc(){return u.useEffect(()=>(document.body.classList.add("debug-layout"),()=>{document.body.classList.remove("debug-layout")}),[]),null}function fc(e,t=null,r=!0){const[s,a]=u.useState(t),[n,i]=u.useState(!1),[l,o]=u.useState(null),c=u.useCallback(async()=>{try{i(!0),o(null);const t=await e();return a(t),t}catch(t){const e=t instanceof Error?t:new Error("An unknown error occurred");throw o(e),e}finally{i(!1)}},[e]);return u.useEffect(()=>{r&&c().catch(()=>{})},[c,r]),{data:s,loading:n,error:l,execute:c,setData:a}}const gc=u.createContext(void 0),bc="promorang-theme";function vc(){const e=localStorage.getItem(bc);return"light"===e||"dark"===e||"black"===e?e:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function yc({children:e}){const[t,r]=u.useState(vc);u.useEffect(()=>{!function(e){const t=document.documentElement;t.classList.remove("light","dark","black"),t.removeAttribute("data-theme"),t.classList.add(e),t.setAttribute("data-theme",e),localStorage.setItem(bc,e)}(t)},[t]),u.useEffect(()=>{const e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{localStorage.getItem(bc)||r(e.matches?"dark":"light")};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]);const s=e=>{r(e)};return Ns.jsx(gc.Provider,{value:{theme:t,setTheme:s,toggleTheme:e=>{if(e)s(e);else{const e=["light","dark","black"],r=(e.indexOf(t)+1)%e.length;s(e[r])}}},children:e})}function jc(){const e=u.useContext(gc);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e}function wc(){const{theme:e,setTheme:t}=jc();return u.useEffect(()=>{if(!localStorage.getItem("promorang-theme")){const e=window.matchMedia("(prefers-color-scheme: dark)").matches;t(e?"dark":"light")}},[t]),{theme:e,setTheme:t}}const Nc="inline-flex items-center justify-center font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-orange-500 disabled:opacity-50 disabled:pointer-events-none",_c={primary:"bg-orange-600 text-white hover:bg-orange-700 active:bg-orange-800",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 active:bg-gray-300",outline:"border border-gray-300 bg-transparent hover:bg-gray-50 active:bg-gray-100",ghost:"hover:bg-gray-100 active:bg-gray-200",link:"text-orange-600 hover:underline underline-offset-4 p-0 h-auto",destructive:"bg-red-600 text-white hover:bg-red-700 active:bg-red-800"},kc={sm:"h-8 px-3 text-sm rounded-lg",md:"h-10 px-4 py-2 text-base rounded-xl",lg:"h-12 px-6 text-lg rounded-xl"},Sc={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"},Cc=u.forwardRef(({className:e="",type:t="button",variant:r="primary",size:s="md",isLoading:a=!1,loadingText:n,leftIcon:i,rightIcon:l,children:o,disabled:c,asChild:d=!1,...p},h)=>{if(d&&u.isValidElement(o))return u.cloneElement(o,{ref:h,className:`${Nc} ${_c[r]} ${kc[s]} ${e} ${o.props.className||""}`.trim(),disabled:c||a,...p});const x=a&&void 0!==n?n:o,f=[Nc,_c[r],kc[s],e,a||c?"cursor-not-allowed":"cursor-pointer"].filter(Boolean).join(" ");return Ns.jsxs("button",{ref:h,type:t,className:f,disabled:c||a,...p,children:[a&&Ns.jsx(pr,{className:`animate-spin ${Sc[s]} mr-2`}),!a&&i&&m.cloneElement(i,{className:`${Sc[s]} mr-2 ${i.props.className||""}`.trim()}),x,!a&&l&&m.cloneElement(l,{className:`${Sc[s]} ml-2 ${l.props.className||""}`.trim()})]})});Cc.displayName="Button";const Oc=Cc;function Ec(...e){return e.filter(Boolean).join(" ")}const Pc=({icon:e,title:t,description:r,payout:s,bgColorClass:a="bg-blue-100",textColorClass:n="text-blue-600",className:i=""})=>Ns.jsxs("div",{className:Ec("bg-pr-surface-card rounded-2xl p-6 shadow-sm border border-pr-border","hover:shadow-lg transition-all duration-200 hover:-translate-y-1",i),children:[Ns.jsx("div",{className:Ec("rounded-xl p-3 w-fit mb-4",a),children:e}),Ns.jsx("h3",{className:"text-xl font-bold text-pr-text-1 mb-2",children:t}),Ns.jsx("p",{className:"text-pr-text-2 mb-4",children:r}),Ns.jsx("div",{className:Ec("font-semibold text-sm",n),children:s})]});function Tc({className:e="",count:t=1,height:r,width:s,circle:a=!1,rounded:n="md",style:i,...l}){const o={none:"rounded-none",sm:"rounded-sm",md:"rounded",lg:"rounded-lg",full:"rounded-full"},c=Array.from({length:t}).map((t,c)=>Ns.jsx("div",{className:Ec("animate-pulse bg-pr-surface-3 dark:bg-gray-700",a?"rounded-full":o[n],e),style:{height:r||"1.25rem",width:a?r||"1.25rem":s||"100%",...i},...l},c));return Ns.jsx(Ns.Fragment,{children:c})}Pc.displayName="FeatureCard";const Ac=async()=>(await new Promise(e=>setTimeout(e,1e3)),{earners:127+Math.floor(50*Math.random()),payout:.3+.5*Math.random(),earnings:12+Math.floor(10*Math.random()),activeCampaigns:24+Math.floor(10*Math.random()),totalPayouts:125e3+Math.floor(5e4*Math.random())}),Mc=async()=>(await new Promise(e=>setTimeout(e,800)),[{id:"tasks",icon:Ns.jsx(fs,{className:"w-8 h-8 text-blue-600"}),title:"Complete Tasks",description:"Micro-tasks and content creation",payout:"$25 avg",bgColorClass:"bg-blue-100",textColorClass:"text-blue-600"},{id:"invest",icon:Ns.jsx(as,{className:"w-8 h-8 text-green-600"}),title:"Invest in Content",description:"Own shares of viral content",payout:"12.5% ROI",bgColorClass:"bg-green-100",textColorClass:"text-green-600"},{id:"predictions",icon:Ns.jsx(ts,{className:"w-8 h-8 text-purple-600"}),title:"Social Predictions",description:"Predict content performance",payout:"87% win rate",bgColorClass:"bg-purple-100",textColorClass:"text-purple-600"},{id:"brands",icon:Ns.jsx(us,{className:"w-8 h-8 text-orange-600"}),title:"Brand Partnerships",description:"Collaborate with 500+ brands",payout:"Fair compensation",bgColorClass:"bg-orange-100",textColorClass:"text-orange-600"}]),Dc=({error:e,onRetry:t})=>Ns.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-lg my-6",children:Ns.jsxs("div",{className:"flex",children:[Ns.jsx("div",{className:"flex-shrink-0",children:Ns.jsx(ns,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),Ns.jsxs("div",{className:"ml-3",children:[Ns.jsxs("p",{className:"text-sm text-red-700",children:["Failed to load data: ",e.message]}),Ns.jsx("div",{className:"mt-2",children:Ns.jsx(Oc,{variant:"outline",size:"sm",leftIcon:Ns.jsx($r,{className:"w-4 h-4"}),onClick:t,className:"text-sm",children:"Try again"})})]})]})});function Ic(){const{user:e,signIn:t,signOut:r}=Ls(),s=ke(),{theme:a,setTheme:n}=wc(),[i,l]=u.useState({earners:0,payout:0,earnings:0,activeCampaigns:0,totalPayouts:0}),{data:o,execute:c}=fc(Ac,null,!0),{data:d,loading:m,error:p,execute:h}=fc(Mc,null,!0);u.useEffect(()=>{o&&l(o)},[o]),u.useEffect(()=>{if(!o)return;const e=setInterval(()=>{c().catch(console.error)},1e4);return()=>clearInterval(e)},[o,c]);const[x,f]=u.useState({loading:null}),g=u.useCallback(async e=>{try{f({loading:e});const r=`${e}@demo.com`,s=await t(r,"demo123");s.error&&console.error("Demo login failed:",s.error)}catch(r){console.error("Demo login failed:",r)}finally{f({loading:null})}},[t]);return Ns.jsxs("div",{className:"min-h-screen-dynamic bg-pr-surface-background",children:[Ns.jsx("nav",{className:"bg-pr-surface-card/95 backdrop-blur-md border-b border-pr-border sticky top-0 z-50 shadow-sm",children:Ns.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Ns.jsxs("div",{className:"flex justify-between items-center h-16",children:[Ns.jsx("div",{className:"flex items-center",children:Ns.jsx("img",{src:"https://mocha-cdn.com/0198f6f0-5737-78cb-955a-4b0907aa1065/Promorang_logo_extended-03.png",alt:"Promorang",className:"h-8 w-auto transition-transform hover:scale-105"})}),Ns.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[Ns.jsx("a",{href:"#features",className:"text-pr-text-2 hover:text-pr-text-1 font-medium transition-colors",children:"Features"}),Ns.jsx("a",{href:"#how-it-works",className:"text-pr-text-2 hover:text-pr-text-1 font-medium transition-colors",children:"How it Works"}),Ns.jsx("a",{href:"#success-stories",className:"text-pr-text-2 hover:text-pr-text-1 font-medium transition-colors",children:"Success Stories"})]}),Ns.jsxs("div",{className:"flex items-center space-x-4",children:[Ns.jsx("button",{onClick:()=>n("light"===a?"dark":"light"),className:"p-2 rounded-lg bg-pr-surface-2 hover:bg-pr-surface-3 transition-colors","aria-label":"Toggle theme",children:"light"===a?Ns.jsx(kr,{className:"w-5 h-5 text-pr-text-2"}):Ns.jsx(Xr,{className:"w-5 h-5 text-pr-text-2"})}),e?Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(Oc,{onClick:()=>s("/dashboard"),variant:"primary",size:"md",rightIcon:Ns.jsx(mt,{className:"w-4 h-4"}),children:"Go to Dashboard"}),Ns.jsx(Oc,{onClick:()=>r(),variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-800 hover:bg-red-50",title:"Development logout (for testing)",children:" Logout"})]}):Ns.jsxs(Ns.Fragment,{children:[Ns.jsx(Oc,{onClick:()=>s("/auth"),variant:"ghost",size:"md",children:"Sign In"}),Ns.jsx(Oc,{onClick:()=>s("/auth"),variant:"primary",size:"md",rightIcon:Ns.jsx(mt,{className:"w-4 h-4"}),children:"Start Earning"})]})]})]})})}),!e&&Ns.jsx("div",{className:"bg-pr-surface-1 border-b border-pr-border py-4",children:Ns.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Ns.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-2 sm:space-y-0 sm:space-x-6",children:[Ns.jsx("span",{className:"text-sm text-pr-text-2 font-medium",children:"Quick Demo:"}),Ns.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[Ns.jsx(Oc,{onClick:()=>g("creator"),variant:"outline",size:"sm",className:"bg-pr-surface-2 hover:bg-pr-surface-3 text-blue-300 border border-pr-surface-3",isLoading:"creator"===x.loading,loadingText:"Loading...",children:"Creator Demo"}),Ns.jsx(Oc,{onClick:()=>g("investor"),variant:"outline",size:"sm",className:"bg-pr-surface-2 hover:bg-pr-surface-3 text-purple-300 border border-pr-surface-3",isLoading:"investor"===x.loading,loadingText:"Loading...",children:"Investor Demo"}),Ns.jsx(Oc,{onClick:()=>g("advertiser"),variant:"outline",size:"sm",className:"bg-pr-surface-2 hover:bg-pr-surface-3 text-orange-300 border border-pr-surface-3",isLoading:"advertiser"===x.loading,loadingText:"Loading...",children:"Advertiser Demo"})]})]})})}),Ns.jsxs("section",{className:"relative bg-pr-surface-background py-16 lg:py-24 overflow-hidden",children:[Ns.jsx("div",{className:"absolute inset-0 bg-pr-surface-background"}),Ns.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Ns.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[Ns.jsxs("div",{className:"inline-flex items-center bg-green-100 text-green-800 px-4 py-2 rounded-full text-sm font-semibold mb-8 animate-pulse",children:[Ns.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-ping"}),Ns.jsx("span",{className:"font-bold",children:i.earners.toLocaleString()})," early creators earning"]}),Ns.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-pr-text-1 leading-tight mb-6",children:["Monetize Your Social Influence",Ns.jsx("span",{className:"block bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Effortlessly"})]}),Ns.jsxs("p",{className:"text-xl sm:text-2xl text-pr-text-2 mb-8 max-w-3xl mx-auto leading-relaxed",children:["Join our early community and start earning from day one.",Ns.jsx("span",{className:"font-semibold text-pr-text-1",children:" No followers required."})]}),Ns.jsxs("div",{className:"flex flex-wrap justify-center gap-6 mb-10 text-sm",children:[Ns.jsxs("div",{className:"flex items-center bg-pr-surface-2 border border-pr-surface-3 rounded-full px-4 py-2",children:[Ns.jsx(At,{className:"w-4 h-4 text-green-500 mr-2"}),Ns.jsx("span",{className:"font-medium",children:"Start in 60 seconds"})]}),Ns.jsxs("div",{className:"flex items-center bg-pr-surface-2 border border-pr-surface-3 rounded-full px-4 py-2",children:[Ns.jsx(At,{className:"w-4 h-4 text-green-500 mr-2"}),Ns.jsx("span",{className:"font-medium",children:"Grow with social media"})]}),Ns.jsxs("div",{className:"flex items-center bg-pr-surface-2 border border-pr-surface-3 rounded-full px-4 py-2",children:[Ns.jsx(At,{className:"w-4 h-4 text-green-500 mr-2"}),Ns.jsx("span",{className:"font-medium",children:"Zero fees"})]})]}),Ns.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[e?Ns.jsx(Oc,{onClick:()=>s("/dashboard"),variant:"primary",size:"lg",rightIcon:Ns.jsx(mt,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"}),className:"group",children:"Go to Dashboard"}):Ns.jsx(Oc,{onClick:()=>s("/auth"),variant:"primary",size:"lg",rightIcon:Ns.jsx(mt,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"}),className:"group",children:"Start Earning Today"}),Ns.jsx(Oc,{variant:"outline",size:"lg",leftIcon:Ns.jsx(Ir,{className:"w-5 h-5"}),children:"See How it Works"})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-2xl p-4 border border-pr-surface-3 shadow-lg max-w-md mx-auto",children:[Ns.jsx("div",{className:"text-sm text-pr-text-2 mb-2",children:"Early earnings this week:"}),Ns.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",i.payout.toFixed(1),"k"]}),Ns.jsxs("div",{className:"text-xs text-pr-text-2",children:["Average per early user: $",i.earnings]})]})]})})]}),Ns.jsx("section",{className:"bg-pr-surface-background border-b border-pr-border py-16",children:Ns.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Ns.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between space-y-8 lg:space-y-0 lg:space-x-12",children:[Ns.jsxs("div",{className:"lg:w-1/2",children:[Ns.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-pr-text-1 mb-4",children:"Brands & Businesses"}),Ns.jsx("p",{className:"text-xl text-pr-text-2 mb-6",children:"Connect with authentic creators and build campaigns that drive real engagement from day one."}),Ns.jsxs("div",{className:"space-y-3 mb-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(At,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),Ns.jsx("span",{className:"text-pr-text-1",children:"Work with vetted early adopters"})]}),Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(At,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),Ns.jsx("span",{className:"text-pr-text-1",children:"Track campaign performance"})]}),Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(At,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),Ns.jsx("span",{className:"text-pr-text-1",children:"Start with free sample campaigns"})]})]}),Ns.jsx("button",{onClick:()=>{console.log("Start Advertising clicked"),s(e?"/advertiser/onboarding":"/auth")},className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl",children:e?"Go to Advertising":"Start Advertising"})]}),Ns.jsx("div",{className:"lg:w-1/2",children:Ns.jsxs("div",{className:"bg-pr-surface-card rounded-2xl p-8 shadow-lg border border-pr-surface-3",children:[Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1 mb-4",children:"Early Advertiser Benefits"}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-4 text-center border border-pr-surface-3",children:[Ns.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:"Free"}),Ns.jsx("div",{className:"text-sm text-blue-700",children:"Sample campaigns"})]}),Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-4 text-center border border-pr-surface-3",children:[Ns.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:"95%"}),Ns.jsx("div",{className:"text-sm text-purple-700",children:"Completion rate"})]}),Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-4 text-center border border-pr-surface-3",children:[Ns.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:"127"}),Ns.jsx("div",{className:"text-sm text-green-700",children:"Early creators"})]}),Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-4 text-center border border-pr-surface-3",children:[Ns.jsx("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:"4.8"}),Ns.jsx("div",{className:"text-sm text-orange-700",children:"Campaign rating"})]})]})]})})]})})}),Ns.jsx("section",{className:"bg-pr-surface-background border-b border-pr-border py-12",children:Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ns.jsx("p",{className:"text-center text-pr-text-2 text-sm mb-8",children:"Creators earn across these platforms"}),Ns.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-8 items-center",children:[{name:"Instagram",icon:"",color:"from-purple-500 to-pink-500",url:"https://instagram.com"},{name:"TikTok",icon:"",color:"from-gray-900 to-gray-700",url:"https://tiktok.com"},{name:"YouTube",icon:"",color:"from-red-600 to-red-500",url:"https://youtube.com"},{name:"Twitter",icon:"",color:"from-blue-500 to-blue-400",url:"https://twitter.com"},{name:"LinkedIn",icon:"",color:"from-blue-700 to-blue-600",url:"https://linkedin.com"},{name:"Facebook",icon:"",color:"from-blue-600 to-blue-500",url:"https://facebook.com"}].map(e=>Ns.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"group text-center hover:scale-110 transition-all duration-200",children:[Ns.jsx("div",{className:`bg-gradient-to-tr ${e.color} rounded-xl h-14 w-14 mx-auto flex items-center justify-center text-white font-bold text-xl group-hover:shadow-lg transition-shadow mb-2`,children:e.icon}),Ns.jsx("p",{className:"text-xs text-pr-text-2 group-hover:text-pr-text-1 transition-colors",children:e.name})]},e.name))})]})}),Ns.jsx("section",{id:"features",className:"py-20 bg-pr-surface-2",children:Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ns.jsxs("div",{className:"text-center mb-16",children:[Ns.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-pr-text-1 mb-4",children:"Four Ways to Earn"}),Ns.jsx("p",{className:"text-xl text-pr-text-2 max-w-2xl mx-auto",children:"Multiple income streams designed for creators, investors, and brands"})]}),m?Ns.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>Ns.jsxs("div",{className:"bg-pr-surface-card rounded-2xl p-6 shadow-sm border border-pr-border",children:[Ns.jsx(Tc,{className:"w-12 h-12 rounded-xl mb-4"}),Ns.jsx(Tc,{className:"h-6 w-3/4 mb-3"}),Ns.jsx(Tc,{className:"h-4 w-full mb-4"}),Ns.jsx(Tc,{className:"h-4 w-1/2"})]},e))}):p?Ns.jsx(Dc,{error:p,onRetry:h}):d?Ns.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:d.map(e=>Ns.jsx(Pc,{icon:e.icon,title:e.title,description:e.description,payout:e.payout,bgColorClass:e.bgColorClass,textColorClass:e.textColorClass},e.id))}):null]})}),Ns.jsx("section",{id:"how-it-works",className:"py-20 bg-pr-surface-background",children:Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ns.jsxs("div",{className:"text-center mb-16",children:[Ns.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-pr-text-1 mb-4",children:"Start Earning in 3 Steps"}),Ns.jsx("p",{className:"text-xl text-pr-text-2",children:"Simple. Fast. Profitable."})]}),Ns.jsx("div",{className:"grid lg:grid-cols-3 gap-12 max-w-4xl mx-auto",children:[{step:"1",title:"Sign Up Free",description:"Create your account in under 2 minutes",colorClass:"bg-gradient-to-r from-blue-500 to-blue-600"},{step:"2",title:"Choose Your Path",description:"Select earning methods that fit your style",colorClass:"bg-gradient-to-r from-purple-500 to-purple-600"},{step:"3",title:"Get Paid",description:"Withdraw earnings instantly to your account",colorClass:"bg-gradient-to-r from-green-500 to-green-600"}].map((e,t)=>Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:`${e.colorClass} rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-6 text-white font-bold text-2xl shadow-lg`,children:e.step}),Ns.jsx("h3",{className:"text-xl font-bold text-pr-text-1 mb-3",children:e.title}),Ns.jsx("p",{className:"text-pr-text-2",children:e.description})]},t))})]})}),Ns.jsxs("section",{className:"py-20 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-700 text-white relative overflow-hidden",children:[Ns.jsx("div",{className:"absolute inset-0 bg-black opacity-20"}),Ns.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[Ns.jsx("h2",{className:"text-3xl font-bold mb-12",children:"Growing with Our Early Community"}),Ns.jsxs("div",{className:"grid lg:grid-cols-4 gap-8 mb-12",children:[Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3",children:[Ns.jsx("div",{className:"text-4xl font-bold mb-2 text-yellow-300",children:i.earners.toLocaleString()}),Ns.jsx("div",{className:"text-blue-100",children:"Early Adopters"})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3",children:[Ns.jsxs("div",{className:"text-4xl font-bold mb-2 text-green-300",children:["$",i.payout.toFixed(1),"k"]}),Ns.jsx("div",{className:"text-blue-100",children:"Paid Out So Far"})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3",children:[Ns.jsx("div",{className:"text-4xl font-bold mb-2 text-pink-300",children:"4.8"}),Ns.jsx("div",{className:"text-blue-100",children:"Early User Rating"})]}),Ns.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[Ns.jsxs("div",{className:"text-4xl font-bold mb-2 text-orange-300",children:["$",i.earnings]}),Ns.jsx("div",{className:"text-blue-100",children:"Average Weekly Earnings"})]})]}),Ns.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl px-8 py-6 inline-block",children:Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(Yr,{className:"w-6 h-6 animate-pulse"}),Ns.jsx("span",{className:"font-bold text-lg",children:"Be part of something new from the ground up"})]})})]})]}),Ns.jsx("section",{id:"success-stories",className:"py-20 bg-pr-surface-2",children:Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ns.jsxs("div",{className:"text-center mb-16",children:[Ns.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-pr-text-1 mb-4",children:"Real People, Real Results"}),Ns.jsx("p",{className:"text-xl text-pr-text-2",children:"Success stories from our community"})]}),Ns.jsx("div",{className:"grid lg:grid-cols-3 gap-8",children:[{name:"Sarah Chen",role:"Early Creator",earnings:"$247",timeframe:"first month",quote:"Made $25 on my first day with zero followers. Love being an early adopter!"},{name:"Mike Rodriguez",role:"Beta Tester",earnings:"$384",timeframe:"2 months",quote:"Getting in early feels amazing. The platform has real potential."},{name:"Local Coffee Co.",role:"Early Brand Partner",earnings:"Great reach",timeframe:"6 weeks",quote:"Loving the authentic engagement from real early users. Quality over quantity."}].map((e,t)=>Ns.jsxs("div",{className:"bg-pr-surface-card rounded-2xl p-8 shadow-sm border border-pr-border",children:[Ns.jsxs("div",{className:"flex items-center mb-6",children:[Ns.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full mr-4"}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-bold text-pr-text-1",children:e.name}),Ns.jsx("p",{className:"text-pr-text-2 text-sm",children:e.role})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-2 border border-green-500/60 rounded-lg p-3 mb-4",children:[Ns.jsx("div",{className:"text-lg font-bold text-green-300",children:e.earnings}),Ns.jsxs("div",{className:"text-xs text-green-400",children:["in ",e.timeframe]})]}),Ns.jsxs("p",{className:"text-pr-text-1 italic",children:['"',e.quote,'"']}),Ns.jsx("div",{className:"flex items-center text-yellow-500 mt-4",children:[...Array(5)].map((e,t)=>Ns.jsx(Zr,{className:"w-4 h-4 fill-current"},t))})]},t))})]})}),Ns.jsx("section",{className:"py-20 bg-gray-900 text-white",children:Ns.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[Ns.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-6",children:"Your Financial Freedom Starts Now"}),Ns.jsx("p",{className:"text-xl text-gray-300 mb-8",children:"Join thousands of creators already earning on Promorang"}),Ns.jsxs("button",{onClick:()=>{console.log("Final CTA clicked"),s(e?"/dashboard":"/auth")},className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-12 py-4 rounded-xl font-semibold text-lg transition-all duration-200 shadow-xl hover:shadow-2xl transform hover:-translate-y-1 inline-flex items-center",children:[e?"Go to Dashboard":"Start Earning Today",Ns.jsx(Ot,{className:"ml-2 w-5 h-5"})]}),Ns.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[Ns.jsx("div",{className:"bg-pr-surface-card rounded-lg p-4 border border-pr-surface-3",children:Ns.jsxs("div",{className:"font-bold text-green-300 flex items-center justify-center",children:[Ns.jsx(At,{className:"w-4 h-4 mr-2"}),"100% Free to Start"]})}),Ns.jsx("div",{className:"bg-pr-surface-card rounded-lg p-4 border border-pr-surface-3",children:Ns.jsxs("div",{className:"font-bold text-yellow-300 flex items-center justify-center",children:[Ns.jsx(as,{className:"w-4 h-4 mr-2"}),"Grow Your Wealth"]})}),Ns.jsx("div",{className:"bg-pr-surface-card rounded-lg p-4 border border-pr-surface-3",children:Ns.jsxs("div",{className:"font-bold text-blue-300 flex items-center justify-center",children:[Ns.jsx(Vr,{className:"w-4 h-4 mr-2"}),"Secure & Trusted"]})})]})]})}),Ns.jsx("footer",{className:"bg-pr-surface-2 border-t border-pr-surface-3 py-12",children:Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ns.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[Ns.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[Ns.jsx("img",{src:"https://mocha-cdn.com/0198f6f0-5737-78cb-955a-4b0907aa1065/Promorang_logo_extended-03.png",alt:"Promorang",className:"h-8 w-auto mr-4"}),Ns.jsx("p",{className:"text-pr-text-2 text-sm",children:"Transform your influence into income"})]}),Ns.jsxs("div",{className:"flex space-x-8 text-sm text-pr-text-2",children:[Ns.jsx("a",{href:"#",className:"hover:text-pr-text-1 transition-colors",children:"Privacy"}),Ns.jsx("a",{href:"#",className:"hover:text-pr-text-1 transition-colors",children:"Terms"}),Ns.jsx("a",{href:"#",className:"hover:text-pr-text-1 transition-colors",children:"Support"})]})]}),Ns.jsx("div",{className:"border-t border-pr-surface-3 mt-8 pt-8 text-center text-pr-text-2 text-sm",children:Ns.jsx("p",{children:" 2024 Promorang. All rights reserved."})})]})})]})}function Rc(){const{signIn:e,signUp:t,signInWithOAuth:r,demoLogin:s,isPending:a}=Ls(),n=ke(),[i]=rt(),{theme:l,setTheme:o}=wc(),[c,d]=u.useState(!1),[m,p]=u.useState(!1),[h,x]=u.useState(null),[f,g]=u.useState(null),[b,v]=u.useState({email:"",password:"",username:"",display_name:""}),[y,j]=u.useState(null);u.useEffect(()=>{const e=i.get("ref");e&&(x(e),d(!0),w(e))},[i]);const w=async e=>{try{const t=await fetch("/api/referrals/validate-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e}),credentials:"include"}),r=await t.json();"success"===r.status?g(r.data.referrer):x(null)}catch(t){console.error("Error validating referral code:",t)}},N=async e=>{j(null);try{const t=await s[e]();t.error?j("string"==typeof t.error?t.error:t.error.message||"Demo login failed"):n("/dashboard")}catch(t){console.error("Demo login error:",t);const e=t instanceof Error?t.message:"Failed to login with demo account. Please try again.";j(e)}};return Ns.jsxs("div",{className:"min-h-screen-dynamic bg-pr-surface-background flex items-center justify-center py-8 sm:py-12 px-4 sm:px-6 lg:px-8 relative",children:[Ns.jsx("button",{onClick:()=>o("light"===l?"dark":"light"),className:"absolute top-4 right-4 p-2 rounded-lg bg-pr-surface-card border border-pr-border hover:bg-pr-surface-2 transition-colors","aria-label":"Toggle theme",children:"light"===l?Ns.jsx(kr,{className:"w-5 h-5 text-pr-text-2"}):Ns.jsx(Xr,{className:"w-5 h-5 text-pr-text-2"})}),Ns.jsxs("div",{className:"max-w-md w-full space-y-6 sm:space-y-8",children:[Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("img",{src:"https://mocha-cdn.com/0198f6f0-5737-78cb-955a-4b0907aa1065/Promorang_logo_extended-03.png",alt:"Promorang",className:"h-10 sm:h-12 w-auto mx-auto mb-3 sm:mb-4"}),Ns.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-pr-text-1",children:c?"Create Account":"Welcome Back"}),Ns.jsx("p",{className:"mt-2 text-sm sm:text-base text-pr-text-2",children:c?"Join thousands of creators earning on Promorang":"Sign in to your account to continue earning"})]}),h&&f&&Ns.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 rounded-lg p-3 sm:p-4 text-white",children:Ns.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[Ns.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-full bg-white/20 flex items-center justify-center flex-shrink-0",children:Ns.jsx(Xt,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),Ns.jsxs("div",{className:"flex-1 min-w-0",children:[Ns.jsx("p",{className:"font-semibold text-sm sm:text-base",children:"You've been invited!"}),Ns.jsxs("p",{className:"text-xs sm:text-sm text-white/90 truncate",children:[f.display_name||f.username," invited you to join Promorang"]})]})]})}),Ns.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[Ns.jsx("p",{className:"text-center text-xs sm:text-sm text-pr-text-2 font-medium",children:"Quick Demo Login:"}),Ns.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[Ns.jsx("button",{onClick:()=>N("creator"),disabled:a,className:"w-full flex items-center justify-center px-3 sm:px-4 py-2.5 sm:py-3 border border-pr-border rounded-lg text-sm font-medium text-pr-text-1 bg-pr-surface-card hover:bg-pr-surface-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:opacity-50 tap-target",children:Ns.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[Ns.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:Ns.jsx(ds,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-blue-600"})}),Ns.jsxs("div",{className:"text-left min-w-0",children:[Ns.jsx("div",{className:"font-medium text-sm",children:"Demo Creator"}),Ns.jsx("div",{className:"text-xs text-pr-text-2 truncate",children:"creator@demo.com"})]})]})}),Ns.jsx("button",{onClick:()=>N("investor"),disabled:a,className:"w-full flex items-center justify-center px-3 sm:px-4 py-2.5 sm:py-3 border border-pr-surface-3 rounded-lg text-sm font-medium text-pr-text-1 bg-pr-surface-card hover:bg-pr-surface-2 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors disabled:opacity-50 tap-target",children:Ns.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[Ns.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:Ns.jsx(ds,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-purple-600"})}),Ns.jsxs("div",{className:"text-left min-w-0",children:[Ns.jsx("div",{className:"font-medium text-sm",children:"Demo Investor"}),Ns.jsx("div",{className:"text-xs text-pr-text-2 truncate",children:"investor@demo.com"})]})]})}),Ns.jsx("button",{onClick:()=>N("advertiser"),disabled:a,className:"w-full flex items-center justify-center px-3 sm:px-4 py-2.5 sm:py-3 border border-pr-surface-3 rounded-lg text-sm font-medium text-pr-text-1 bg-pr-surface-card hover:bg-pr-surface-2 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors disabled:opacity-50 tap-target",children:Ns.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[Ns.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:Ns.jsx(ds,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-orange-600"})}),Ns.jsxs("div",{className:"text-left min-w-0",children:[Ns.jsx("div",{className:"font-medium text-sm",children:"Demo Advertiser"}),Ns.jsx("div",{className:"text-xs text-pr-text-2 truncate",children:"advertiser@demo.com"})]})]})}),Ns.jsx("button",{onClick:()=>N("operator"),disabled:a,className:"w-full flex items-center justify-center px-3 sm:px-4 py-2.5 sm:py-3 border border-purple-300 rounded-lg text-sm font-medium text-pr-text-1 bg-pr-surface-card hover:bg-pr-surface-2 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors disabled:opacity-50 tap-target",children:Ns.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[Ns.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:Ns.jsx(ds,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-purple-700"})}),Ns.jsxs("div",{className:"text-left min-w-0",children:[Ns.jsx("div",{className:"font-medium text-sm",children:"Demo Operator"}),Ns.jsx("div",{className:"text-xs text-pr-text-2 truncate",children:"castleblack-demo@promorang.co"})]})]})}),Ns.jsx("button",{onClick:()=>N("merchant"),disabled:a,className:"w-full flex items-center justify-center px-3 sm:px-4 py-2.5 sm:py-3 border border-green-300 rounded-lg text-sm font-medium text-pr-text-1 bg-pr-surface-card hover:bg-pr-surface-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors disabled:opacity-50 tap-target",children:Ns.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[Ns.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:Ns.jsx(ds,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-green-700"})}),Ns.jsxs("div",{className:"text-left min-w-0",children:[Ns.jsx("div",{className:"font-medium text-sm",children:"Demo Merchant"}),Ns.jsx("div",{className:"text-xs text-pr-text-2 truncate",children:"merchant@demo.com"})]})]})})]})]}),Ns.jsxs("div",{className:"relative",children:[Ns.jsx("div",{className:"absolute inset-0 flex items-center",children:Ns.jsx("div",{className:"w-full border-t border-pr-surface-3"})}),Ns.jsx("div",{className:"relative flex justify-center text-sm",children:Ns.jsx("span",{className:"px-2 bg-pr-surface-background text-pr-text-2",children:"Or continue with"})})]}),Ns.jsxs("button",{onClick:async()=>{j("");const e=await r("google");e?.error&&j(e.error)},disabled:a,className:"w-full flex justify-center items-center px-3 sm:px-4 py-2.5 sm:py-3 border border-pr-border rounded-lg shadow-sm text-sm font-medium text-pr-text-1 bg-pr-surface-card hover:bg-pr-surface-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:opacity-50 tap-target",children:[Ns.jsx(Et,{className:"w-5 h-5 mr-2 sm:mr-3 text-red-500 flex-shrink-0"}),"Continue with Google"]}),Ns.jsxs("div",{className:"relative",children:[Ns.jsx("div",{className:"absolute inset-0 flex items-center",children:Ns.jsx("div",{className:"w-full border-t border-pr-surface-3"})}),Ns.jsx("div",{className:"relative flex justify-center text-sm",children:Ns.jsx("span",{className:"px-2 bg-pr-surface-background text-pr-text-2",children:"Or use email"})})]}),Ns.jsxs("form",{className:"space-y-4 sm:space-y-6",onSubmit:async r=>{r.preventDefault(),j("");try{if(c){if(!b.email||!b.password||!b.username)return void j("Please fill in all required fields");const e=await t(b.email,b.password);e.error?j("string"==typeof e.error?e.error:e.error.message||"Signup failed"):e.requiresConfirmation?j("Please check your email to confirm your account."):(h&&e.user?.id&&await(async e=>{if(h)try{await fetch("/api/referrals/track-referral",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({referred_user_id:e,referral_code:h}),credentials:"include"})}catch(t){console.error("Error tracking referral:",t)}})(e.user.id),n("/dashboard"))}else{if(!b.email||!b.password)return void j("Please enter email and password");const t=await e(b.email,b.password);t.error?j("string"==typeof t.error?t.error:t.error.message||"Login failed"):n("/dashboard")}}catch(s){console.error("Auth error:",s);const e=s instanceof Error?s.message:"An unexpected error occurred. Please try again.";j(e)}},children:[y&&Ns.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 sm:px-4 py-2.5 sm:py-3 rounded-lg text-xs sm:text-sm break-words",children:"string"==typeof y?y:y instanceof Error?y.message:"An error occurred"}),Ns.jsxs("div",{children:[Ns.jsx("label",{htmlFor:"email",className:"block text-xs sm:text-sm font-medium text-pr-text-1 mb-1",children:"Email Address"}),Ns.jsxs("div",{className:"relative",children:[Ns.jsx(gr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 sm:w-5 sm:h-5 text-gray-400 flex-shrink-0"}),Ns.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:b.email,onChange:e=>v({...b,email:e.target.value}),className:"w-full pl-9 sm:pl-10 pr-3 sm:pr-4 py-2.5 sm:py-3 border border-pr-border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-base bg-pr-surface-card text-pr-text-1",placeholder:"Enter your email"})]})]}),c&&Ns.jsxs(Ns.Fragment,{children:[Ns.jsxs("div",{children:[Ns.jsx("label",{htmlFor:"username",className:"block text-xs sm:text-sm font-medium text-pr-text-1 mb-1",children:"Username"}),Ns.jsxs("div",{className:"relative",children:[Ns.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 sm:w-5 sm:h-5 text-gray-400 flex-shrink-0"}),Ns.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:b.username,onChange:e=>v({...b,username:e.target.value}),className:"w-full pl-9 sm:pl-10 pr-3 sm:pr-4 py-2.5 sm:py-3 border border-pr-border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-base bg-pr-surface-card text-pr-text-1",placeholder:"Choose a username"})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{htmlFor:"display_name",className:"block text-xs sm:text-sm font-medium text-pr-text-1 mb-1",children:"Display Name (Optional)"}),Ns.jsxs("div",{className:"relative",children:[Ns.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 sm:w-5 sm:h-5 text-gray-400 flex-shrink-0"}),Ns.jsx("input",{id:"display_name",name:"display_name",type:"text",value:b.display_name,onChange:e=>v({...b,display_name:e.target.value}),className:"w-full pl-9 sm:pl-10 pr-3 sm:pr-4 py-2.5 sm:py-3 border border-pr-border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-base bg-pr-surface-card text-pr-text-1",placeholder:"Your display name"})]})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{htmlFor:"password",className:"block text-xs sm:text-sm font-medium text-pr-text-1 mb-1",children:"Password"}),Ns.jsxs("div",{className:"relative",children:[Ns.jsx(hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 sm:w-5 sm:h-5 text-gray-400 flex-shrink-0"}),Ns.jsx("input",{id:"password",name:"password",type:m?"text":"password",required:!0,value:b.password,onChange:e=>v({...b,password:e.target.value}),className:"w-full pl-9 sm:pl-10 pr-10 sm:pr-12 py-2.5 sm:py-3 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-base",placeholder:c?"Create a password":"Enter your password"}),Ns.jsx("button",{type:"button",onClick:()=>p(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-pr-text-2 tap-target",children:m?Ns.jsx(Vt,{className:"w-4 h-4 sm:w-5 sm:h-5"}):Ns.jsx(Ht,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),!c&&Ns.jsx("div",{className:"mt-1 text-right",children:Ns.jsx("a",{href:"/auth/reset-password",className:"text-sm font-medium text-blue-600 hover:text-blue-500 hover:underline",onClick:e=>{e.preventDefault(),n("/auth/reset-password")},children:"Forgot password?"})})]}),Ns.jsx("button",{type:"submit",disabled:a,className:"w-full flex justify-center items-center px-3 sm:px-4 py-2.5 sm:py-3 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed tap-target",children:a?Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),Ns.jsx("span",{children:c?"Creating Account...":"Signing In..."})]}):Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("span",{children:c?"Create Account":"Sign In"}),Ns.jsx(mt,{className:"w-4 h-4"})]})})]}),Ns.jsx("div",{className:"text-center",children:Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:[c?"Already have an account?":"Don't have an account?",Ns.jsx("button",{type:"button",onClick:()=>{d(!c),j(""),v({email:"",password:"",username:"",display_name:""})},className:"ml-1 font-medium text-blue-600 hover:text-blue-500 transition-colors",children:c?"Sign in instead":"Create one here"})]})}),Ns.jsx("div",{className:"text-center",children:Ns.jsx("button",{onClick:()=>n("/"),className:"text-sm text-pr-text-2 hover:text-pr-text-1 transition-colors",children:" Back to Home"})})]})]})}function $c({content:e,wallet:t,isOpen:r,onClose:s,onPurchase:a}){const[n,i]=u.useState(1),[l,o]=u.useState(!1),c=e.share_price??0,d=e.available_shares,m=t?.balance??0,p="number"==typeof d&&d>=0?d:Number.POSITIVE_INFINITY,h=c>0?Math.floor(m/c):Number.POSITIVE_INFINITY,x=Math.min(p,h),f=Number.isFinite(x)&&x>0?Math.max(1,Math.floor(x)):null,g=e=>null!==f?Math.max(1,Math.min(f,e)):Math.max(1,e);u.useEffect(()=>{i(e=>g(e))},[r,f]);const b=n*c,v=c>0&&(void 0===d||d>0)&&(null===f||f>0),y=v&&m>=b,j=n<=1,w=null!==f&&n>=f;return r?Ns.jsx(Us,{isOpen:r,onClose:s,maxWidth:"md",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex flex-col",children:[Ns.jsxs("div",{className:"flex items-center justify-between border-b border-pr-surface-3 px-6 pt-6 pb-4",children:[Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"Buy Content Shares"}),Ns.jsx("button",{onClick:s,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close buy shares modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]}),Ns.jsxs("div",{className:"space-y-5 px-6 pb-6 pt-2",children:[Ns.jsxs("div",{className:"rounded-lg bg-pr-surface-2 p-4",children:[Ns.jsx("h3",{className:"mb-2 font-semibold text-pr-text-1",children:e.title}),Ns.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Platform:"}),Ns.jsx("span",{className:"font-medium capitalize",children:e.platform})]}),Ns.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Price per share:"}),Ns.jsx("span",{className:"font-bold text-green-600",children:c>0?`$${c.toFixed(2)}`:"Not available"})]}),Ns.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Available:"}),Ns.jsx("span",{className:"font-medium",children:"number"==typeof d?`${d} shares`:"N/A"})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"mb-2 block text-sm font-medium text-pr-text-1",children:"Number of shares"}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("button",{type:"button",onClick:()=>i(g(n-1)),disabled:j,className:"h-8 w-8 rounded bg-pr-surface-3 font-bold text-pr-text-1 transition-colors hover:bg-pr-surface-3 disabled:cursor-not-allowed disabled:opacity-50",children:"-"}),Ns.jsx("input",{type:"number",value:n,onChange:e=>i(g(parseInt(e.target.value,10)||1)),min:"1",max:f??void 0,className:"flex-1 rounded-lg border border-pr-surface-3 px-3 py-2 text-center focus:outline-none focus:ring-2 focus:ring-purple-500"}),Ns.jsx("button",{type:"button",onClick:()=>i(g(n+1)),disabled:w,className:"h-8 w-8 rounded bg-pr-surface-3 font-bold text-pr-text-1 transition-colors hover:bg-pr-surface-3 disabled:cursor-not-allowed disabled:opacity-50",children:"+"})]}),Ns.jsx("p",{className:"mt-1 text-xs text-pr-text-2",children:null!==f?`Max: ${f} shares`:"Limited by your available balance"})]}),Ns.jsxs("div",{className:"rounded-lg bg-blue-50 p-4",children:[Ns.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Bt,{className:"h-4 w-4 text-blue-600"}),Ns.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Your Balance:"})]}),Ns.jsxs("span",{className:"font-bold text-blue-900",children:["$",(t?.balance||0).toFixed(2)]})]}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(as,{className:"h-4 w-4 text-green-600"}),Ns.jsx("span",{className:"text-sm font-medium text-pr-text-1",children:"Total Cost:"})]}),Ns.jsxs("span",{className:"font-bold text-pr-text-1",children:["$",b.toFixed(2)]})]})]}),!v&&Ns.jsx("div",{className:"rounded-lg border border-yellow-200 bg-yellow-50 p-3",children:Ns.jsx("p",{className:"text-sm text-yellow-700",children:"This content is currently unavailable for purchase."})}),v&&!y&&Ns.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3",children:Ns.jsxs("p",{className:"text-sm text-red-700",children:["Insufficient balance to purchase ",n," shares"]})}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsx("button",{onClick:s,className:"flex-1 rounded-lg border border-pr-surface-3 px-4 py-2 font-medium text-pr-text-1 transition-colors hover:bg-pr-surface-2",children:"Cancel"}),Ns.jsx("button",{onClick:async()=>{if(v&&y&&!(n<1)){o(!0);try{await a(e,n),s()}catch(t){console.error("Purchase failed:",t)}finally{o(!1)}}},disabled:!v||!y||l||n<1,className:"flex-1 rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-2 font-medium text-white transition-all duration-200 hover:from-purple-600 hover:to-pink-600 disabled:cursor-not-allowed disabled:opacity-50",children:l?"Processing...":`Buy ${n} Share${n>1?"s":""}`})]})]})]})}):null}const Lc=()=>[{id:"listing-demo-1",content_id:"content-demo-1",content_title:"Launch Campaign: Social Buzz",content_thumbnail:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=600&q=80",owner_id:"00000000-0000-0000-0000-000000000001",owner_name:"Demo Creator",quantity:60,remaining_quantity:40,ask_price:12.5,market_price:12.2,status:"active",created_at:new Date(Date.now()-72e5).toISOString(),expires_at:new Date(Date.now()+1728e5).toISOString()}],Fc=()=>[{id:"offer-demo-1",content_id:"content-demo-1",buyer_id:"00000000-0000-0000-0000-000000000005",seller_id:"00000000-0000-0000-0000-000000000001",quantity:25,bid_price:12.75,status:"pending",message:"Happy to take at a slight premium. Can settle within 24h.",content_title:"Launch Campaign: Social Buzz",created_at:new Date(Date.now()-108e5).toISOString(),expires_at:new Date(Date.now()+756e5).toISOString()},{id:"offer-demo-2",content_id:"content-demo-2",buyer_id:"00000000-0000-0000-0000-000000000001",seller_id:"00000000-0000-0000-0000-000000000004",quantity:30,bid_price:18,status:"pending",message:"Would love to take this block before the next update drop.",content_title:"Creator Toolkit Walkthrough",created_at:new Date(Date.now()-216e5).toISOString(),expires_at:new Date(Date.now()+108e6).toISOString()}],zc=async e=>{try{const t=await la(`/api/shares/offers?role=${e}`,{credentials:"include"});if(!t.ok)return Fc();return(await t.json()).offers||Fc()}catch(t){return console.error("Failed to fetch share offers:",t),Fc()}},Uc=async e=>{try{const t=await la("/api/shares/create",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e.userId,target_url:e.targetUrl,campaign_id:e.campaignId,content_id:e.contentId})});if(!t.ok){const e=await t.json().catch(()=>({}));throw new Error(e.error||"Unable to create share link")}return(await t.json()).data}catch(t){throw console.error("Failed to create share link:",t),t instanceof Error?t:new Error("Failed to create share link")}},Bc="telemetry.session-id",qc=[];let Wc=null;const Kc=()=>{if("undefined"==typeof window)return`srv-${Date.now()}`;let e=sessionStorage.getItem(Bc);if(!e){e="undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():`session-${Math.random().toString(36).slice(2,10)}`,sessionStorage.setItem(Bc,e)}return e},Vc=()=>{Wc||(Wc=setTimeout(()=>{Hc()},3e3))},Hc=async()=>{if(Wc&&(clearTimeout(Wc),Wc=null),0===qc.length)return;const e=qc.splice(0,qc.length);try{await la("/api/telemetry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(t){console.warn("[Telemetry] flush failed; retrying on next tick",t),qc.unshift(...e),Vc()}};function Gc(e,t={},r={}){const s={session_id:Kc(),event_type:e,payload:t,user_id:r.userId};qc.push(s),Vc()}function Yc({user:e,contentId:t,contentTitle:r,isOpen:s,onClose:a,onSuccess:n}){const[i,l]=u.useState("instagram"),[o,c]=u.useState(""),[d,m]=u.useState(!1),[p,h]=u.useState(!1),[x,f]=u.useState(null),g=u.useMemo(()=>{if(!e)return 0;const t="super"===e.user_tier?2:"premium"===e.user_tier?1.5:1;return Math.floor(10*t)},[e]);if(u.useEffect(()=>{if(!s||!e?.id||!t)return;const r=`${window.location.origin}/content/${t}`;c(""),(async()=>{m(!0),f(null);try{const s=await Uc({userId:e.id,targetUrl:r,contentId:t});c(s.url),Gc("share_created",{shareId:s.id,contentId:t??null,platform:i},{userId:e.id}),n()}catch(s){f(s instanceof Error?s.message:"Unable to generate share link")}finally{m(!1)}})()},[s,e?.id,t]),!s||!e)return null;const b=async e=>{try{await navigator.clipboard.writeText(e),h(!0),setTimeout(()=>h(!1),2e3)}catch(t){console.error("Failed to copy text",t)}},v=r?`Check out this content: "${r}" on Promorang!`:"Discover amazing content and earn while you engage on Promorang!",y=`${v} ${o||"https://promorang.com"}`,j=[{id:"facebook",label:"Facebook",icon:Ns.jsx(Gt,{className:"w-4 h-4"}),handler:()=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(o)}`,"_blank","width=600,height=400")},{id:"twitter",label:"Twitter",icon:Ns.jsx(os,{className:"w-4 h-4"}),handler:()=>{const e=encodeURIComponent(y);window.open(`https://twitter.com/intent/tweet?text=${e}`,"_blank","width=600,height=400")}},{id:"whatsapp",label:"WhatsApp",icon:Ns.jsx(wr,{className:"w-4 h-4"}),handler:()=>window.open(`https://wa.me/?text=${encodeURIComponent(y)}`,"_blank")},{id:"email",label:"Email",icon:Ns.jsx(gr,{className:"w-4 h-4"}),handler:()=>{const e=encodeURIComponent("Check out this content on Promorang"),t=encodeURIComponent(y);window.location.href=`mailto:?subject=${e}&body=${t}`}}];return Ns.jsx(Us,{isOpen:s,onClose:a,maxWidth:"md",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex max-h-[85vh] flex-col overflow-hidden rounded-xl",children:[Ns.jsx("div",{className:"border-b border-pr-surface-3 px-6 pt-6 pb-4",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Kr,{className:"h-5 w-5 text-orange-600"}),Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"Share Content"})]}),Ns.jsx("button",{onClick:a,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close share content modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]})}),Ns.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-6 pt-4 space-y-6",children:[Ns.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-lg p-4",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("span",{className:"text-sm font-medium text-orange-900",children:"Share Rewards"}),Ns.jsxs("p",{className:"text-xs text-orange-700 mt-1",children:["Base 10 pts  tier multiplier (",e.user_tier,")"]})]}),Ns.jsx("span",{className:"text-2xl font-bold text-orange-600",children:g})]})}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-3",children:"Platform"}),Ns.jsx("div",{className:"grid grid-cols-2 gap-2",children:["instagram","tiktok","twitter","facebook","linkedin"].map(e=>Ns.jsx("button",{onClick:()=>l(e),className:"p-3 rounded-lg border-2 transition "+(i===e?"border-orange-500 bg-orange-50":"border-pr-surface-3 hover:border-pr-surface-3"),children:Ns.jsx("span",{className:"text-sm font-medium capitalize",children:e})},e))})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Suggested Share Text"}),Ns.jsxs("div",{className:"bg-pr-surface-2 border border-pr-surface-3 rounded-lg p-3",children:[Ns.jsx("p",{className:"text-sm text-pr-text-1 mb-2",children:y}),Ns.jsxs("button",{onClick:()=>b(y),className:"flex items-center space-x-2 text-sm font-medium text-orange-600 hover:text-orange-700",children:[p?Ns.jsx(St,{className:"w-4 h-4"}):Ns.jsx(Lt,{className:"w-4 h-4"}),Ns.jsx("span",{children:p?"Copied!":"Copy Text"})]})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Your Share Link"}),Ns.jsx("div",{className:"bg-pr-surface-2 border border-pr-surface-3 rounded-lg p-3",children:d?Ns.jsxs("div",{className:"flex items-center space-x-2 text-sm text-pr-text-2",children:[Ns.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-pr-surface-3 border-t-transparent rounded-full"}),Ns.jsx("span",{children:"Generating secure link"})]}):o?Ns.jsxs(Ns.Fragment,{children:[Ns.jsx("p",{className:"text-sm text-pr-text-1 break-all mb-2",children:o}),Ns.jsxs("div",{className:"flex items-center gap-3",children:[Ns.jsxs("button",{onClick:()=>b(o),className:"flex items-center space-x-2 text-sm text-blue-600 hover:text-blue-700",children:[p?Ns.jsx(St,{className:"w-4 h-4"}):Ns.jsx(Lt,{className:"w-4 h-4"}),Ns.jsx("span",{children:p?"Link Copied!":"Copy Link"})]}),Ns.jsxs("button",{onClick:async()=>{if(!e?.id||!t)return;const r=`${window.location.origin}/content/${t}`;m(!0),f(null);try{const s=await Uc({userId:e.id,targetUrl:r,contentId:t});c(s.url),Gc("share_created",{shareId:s.id,contentId:t??null,platform:i,regenerated:!0},{userId:e.id}),n()}catch(s){f(s instanceof Error?s.message:"Unable to regenerate share link")}finally{m(!1)}},className:"flex items-center space-x-2 text-sm text-pr-text-2 hover:text-pr-text-1",children:[Ns.jsx($r,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Refresh link"})]})]})]}):Ns.jsx("p",{className:"text-sm text-red-600",children:x||"Unable to generate link. Try again shortly."})}),Ns.jsx("p",{className:"text-xs text-pr-text-2 mt-1",children:"Use this link in your post or bio. Rewards trigger automatically when we detect qualified engagement."})]}),Ns.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[Ns.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"How It Works"}),Ns.jsxs("ol",{className:"text-sm text-blue-700 space-y-1",children:[Ns.jsx("li",{children:"1. Copy the suggested text or craft your own message."}),Ns.jsx("li",{children:"2. Share the secure link on your selected platform."}),Ns.jsxs("li",{children:["3. Earn ",g," points when your share drives engagement."]})]})]}),x&&!d&&Ns.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:Ns.jsx("p",{className:"text-sm text-red-700",children:x})}),Ns.jsx("div",{className:"grid grid-cols-2 gap-2",children:j.map(e=>Ns.jsxs("button",{onClick:e.handler,disabled:!o,className:"flex items-center justify-center space-x-2 p-3 bg-gray-900 text-white rounded-lg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-800 transition-colors",children:[e.icon,Ns.jsx("span",{children:e.label})]},e.id))}),"undefined"!=typeof navigator&&"share"in navigator&&o&&Ns.jsxs("button",{onClick:()=>navigator.share?.({title:r,text:v,url:o}),className:"w-full flex items-center justify-center space-x-2 p-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-colors",children:[Ns.jsx(Kr,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Share via"})]}),Ns.jsx("div",{className:"flex justify-end",children:Ns.jsx("button",{onClick:a,className:"px-4 py-2 border border-pr-surface-3 rounded-lg text-pr-text-1 font-medium hover:bg-pr-surface-2 transition-colors",children:"Close"})})]})]})})}function Jc({user:e,contentId:t,contentTitle:r,contentPlatform:s,contentUrl:a,isOpen:n,onClose:i,onSuccess:l}){const[o,c]=u.useState("like"),[d,m]=u.useState(""),[p,h]=u.useState(null),[x,f]=u.useState(!1),[g,b]=u.useState(null);if(!n||!e)return null;const v=[{id:"like",name:"Like",description:"Like the post on the original platform",icon:""},{id:"comment",name:"Comment",description:"Leave a meaningful comment",icon:""},{id:"share",name:"Share/Repost",description:"Share or repost the content",icon:""},{id:"save",name:"Save/Bookmark",description:"Save or bookmark the content",icon:""},{id:"repost",name:"Story/Repost",description:"Share to your story or timeline",icon:""}],y=(()=>{const t={like:10,comment:30,save:50,share:100,repost:120}[o]||10,r=(e=>{switch(e){case"super":return 2;case"premium":return 1.5;default:return 1}})(e.user_tier),s=Math.floor(t*r);return{points:s,keys:Math.ceil(s/20),multiplier:r}})();return Ns.jsx(Us,{isOpen:n,onClose:i,maxWidth:"lg",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex max-h-[85vh] flex-col overflow-hidden",children:[Ns.jsxs("div",{className:"flex items-center justify-between border-b border-pr-surface-3 px-6 pt-6 pb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Kt,{className:"h-5 w-5 text-purple-600"}),Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"External Move"})]}),Ns.jsx("button",{onClick:i,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close external move modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]}),Ns.jsxs("div",{className:"flex-1 space-y-6 overflow-y-auto px-6 pb-6",children:[r&&Ns.jsxs("div",{className:"bg-pr-surface-2 border border-pr-surface-3 rounded-lg p-4",children:[Ns.jsx("h3",{className:"font-medium text-pr-text-1 mb-1",children:r}),Ns.jsxs("div",{className:"flex items-center space-x-2 text-sm text-pr-text-2",children:[Ns.jsx("span",{className:"capitalize",children:s}),a&&Ns.jsxs(Ns.Fragment,{children:[Ns.jsx("span",{children:""}),Ns.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-700 underline",children:"View Original"})]})]})]}),Ns.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-4",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ns.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Reward for External Move"}),Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("span",{className:"text-2xl font-bold text-purple-600",children:y.points}),Ns.jsx("span",{className:"text-sm text-purple-700",children:"points"}),Ns.jsxs("div",{className:"flex items-center space-x-1",children:[Ns.jsx(lr,{className:"w-4 h-4 text-orange-500"}),Ns.jsx("span",{className:"text-sm font-bold text-orange-600",children:y.keys})]})]})]}),Ns.jsxs("div",{className:"text-xs text-purple-700",children:["10x more than in-app actions  ",y.multiplier,"x ",e.user_tier," tier multiplier"]})]}),Ns.jsxs("div",{children:[Ns.jsxs("label",{className:"block text-sm font-medium text-pr-text-1 mb-3",children:["What did you do on ",s,"?"]}),Ns.jsx("div",{className:"grid grid-cols-1 gap-2",children:v.map(e=>Ns.jsx("button",{onClick:()=>c(e.id),className:"p-3 rounded-lg border-2 text-left transition-colors "+(o===e.id?"border-purple-500 bg-purple-50":"border-pr-surface-3 hover:border-pr-surface-3"),children:Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("span",{className:"text-xl",children:e.icon}),Ns.jsxs("div",{children:[Ns.jsx("div",{className:"font-medium",children:e.name}),Ns.jsx("div",{className:"text-sm text-pr-text-2",children:e.description})]})]})},e.id))})]}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1",children:"Proof of Action *"}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-xs text-pr-text-2 mb-1",children:"Link to your action (optional if uploading image)"}),Ns.jsx("input",{type:"url",value:d,onChange:e=>m(e.target.value),placeholder:"https://instagram.com/p/your-post/...",className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-xs text-pr-text-2 mb-1",children:"Or upload a screenshot"}),Ns.jsxs("div",{className:"border-2 border-dashed border-pr-surface-3 rounded-lg p-4 text-center hover:border-purple-400 transition-colors",children:[Ns.jsx("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files?.[0];t&&h(t)},className:"hidden",id:"proof-upload"}),Ns.jsx("label",{htmlFor:"proof-upload",className:"cursor-pointer",children:p?Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsx(At,{className:"w-8 h-8 text-green-600 mx-auto"}),Ns.jsx("p",{className:"text-sm font-medium text-green-700",children:p.name}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Click to change"})]}):Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsx(jt,{className:"w-8 h-8 text-gray-400 mx-auto"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Click to upload screenshot"}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"PNG, JPG up to 10MB"})]})})]})]})]}),Ns.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[Ns.jsx(Pt,{className:"w-4 h-4 text-blue-600"}),Ns.jsx("span",{className:"font-medium text-blue-900",children:"How it works"})]}),Ns.jsxs("ol",{className:"text-sm text-blue-700 space-y-1 pl-4",children:[Ns.jsxs("li",{children:["1. Go to the original content on ",s]}),Ns.jsxs("li",{children:["2. Perform the selected action (",v.find(e=>e.id===o)?.name,")"]}),Ns.jsx("li",{children:"3. Copy the URL or take a screenshot as proof"}),Ns.jsxs("li",{children:["4. Submit here to earn ",y.points," points + ",y.keys," keys!"]})]})]}),g&&Ns.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:Ns.jsx("p",{className:"text-sm text-red-700",children:g})}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsx("button",{onClick:i,className:"flex-1 px-4 py-2 border border-pr-surface-3 rounded-lg text-pr-text-1 font-medium hover:bg-pr-surface-2 transition-colors",children:"Cancel"}),Ns.jsx("button",{onClick:async()=>{if(d.trim()||p){f(!0),b(null);try{let e="";if(p){(new FormData).append("image",p),e=URL.createObjectURL(p)}const r=await fetch("/api/users/external-move",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({move_type:o,content_id:t,content_platform:s,content_url:a,proof_url:d||e,proof_type:p?"image":"url"})});if(r.ok){const e=await r.json();l(),i();const t=document.createElement("div");t.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-bounce",t.innerHTML=`\n          <div class="flex items-center space-x-2">\n            <span class="text-lg"></span>\n            <div>\n              <div class="font-semibold">+${e.points_earned} points!</div>\n              <div class="text-xs opacity-90">+${e.keys_earned} keys  External move verified</div>\n            </div>\n          </div>\n        `,document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},4e3),m(""),h(null),c("like")}else{const e=await r.json();b(e.error||"Failed to record external move")}}catch(e){console.error("External move failed:",e),b("Network error occurred")}finally{f(!1)}}else b("Please provide proof URL or upload a screenshot")},disabled:!d.trim()&&!p||x,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2",children:x?Ns.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):Ns.jsxs(Ns.Fragment,{children:[Ns.jsx(cs,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Submit Proof"})]})})]})]})]})})}var Zc,Qc,Xc;"undefined"!=typeof window&&window.addEventListener("beforeunload",()=>{if(0===qc.length)return;const e=JSON.stringify(qc.splice(0,qc.length));navigator.sendBeacon?.("/api/telemetry",e)}),(Qc=Zc||(Zc={})).assertEqual=e=>{},Qc.assertIs=function(e){},Qc.assertNever=function(e){throw new Error},Qc.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},Qc.getValidEnumValues=e=>{const t=Qc.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),r={};for(const s of t)r[s]=e[s];return Qc.objectValues(r)},Qc.objectValues=e=>Qc.objectKeys(e).map(function(t){return e[t]}),Qc.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},Qc.find=(e,t)=>{for(const r of e)if(t(r))return r},Qc.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,Qc.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},Qc.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(Xc||(Xc={})).mergeShapes=(e,t)=>({...e,...t});const ed=Zc.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),td=e=>{switch(typeof e){case"undefined":return ed.undefined;case"string":return ed.string;case"number":return Number.isNaN(e)?ed.nan:ed.number;case"boolean":return ed.boolean;case"function":return ed.function;case"bigint":return ed.bigint;case"symbol":return ed.symbol;case"object":return Array.isArray(e)?ed.array:null===e?ed.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?ed.promise:"undefined"!=typeof Map&&e instanceof Map?ed.map:"undefined"!=typeof Set&&e instanceof Set?ed.set:"undefined"!=typeof Date&&e instanceof Date?ed.date:ed.object;default:return ed.unknown}},rd=Zc.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class sd extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},r={_errors:[]},s=e=>{for(const a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(s);else if("invalid_return_type"===a.code)s(a.returnTypeError);else if("invalid_arguments"===a.code)s(a.argumentsError);else if(0===a.path.length)r._errors.push(t(a));else{let e=r,s=0;for(;s<a.path.length;){const r=a.path[s];s===a.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(a))):e[r]=e[r]||{_errors:[]},e=e[r],s++}}};return s(this),r}static assert(e){if(!(e instanceof sd))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Zc.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},r=[];for(const s of this.issues)if(s.path.length>0){const r=s.path[0];t[r]=t[r]||[],t[r].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}sd.create=e=>new sd(e);const ad=(e,t)=>{let r;switch(e.code){case rd.invalid_type:r=e.received===ed.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case rd.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Zc.jsonStringifyReplacer)}`;break;case rd.unrecognized_keys:r=`Unrecognized key(s) in object: ${Zc.joinValues(e.keys,", ")}`;break;case rd.invalid_union:r="Invalid input";break;case rd.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Zc.joinValues(e.options)}`;break;case rd.invalid_enum_value:r=`Invalid enum value. Expected ${Zc.joinValues(e.options)}, received '${e.received}'`;break;case rd.invalid_arguments:r="Invalid function arguments";break;case rd.invalid_return_type:r="Invalid function return type";break;case rd.invalid_date:r="Invalid date";break;case rd.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Zc.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case rd.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case rd.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case rd.custom:r="Invalid input";break;case rd.invalid_intersection_types:r="Intersection results could not be merged";break;case rd.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case rd.not_finite:r="Number must be finite";break;default:r=t.defaultError,Zc.assertNever(e)}return{message:r}};let nd=ad;function id(e,t){const r=nd,s=(e=>{const{data:t,path:r,errorMaps:s,issueData:a}=e,n=[...r,...a.path||[]],i={...a,path:n};if(void 0!==a.message)return{...a,path:n,message:a.message};let l="";const o=s.filter(e=>!!e).slice().reverse();for(const c of o)l=c(i,{data:t,defaultError:l}).message;return{...a,path:n,message:l}})({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===ad?void 0:ad].filter(e=>!!e)});e.common.issues.push(s)}class ld{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if("aborted"===s.status)return od;"dirty"===s.status&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t){const e=await s.key,t=await s.value;r.push({key:e,value:t})}return ld.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:t,value:a}=s;if("aborted"===t.status)return od;if("aborted"===a.status)return od;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"===t.value||void 0===a.value&&!s.alwaysSet||(r[t.value]=a.value)}return{status:e.value,value:r}}}const od=Object.freeze({status:"aborted"}),cd=e=>({status:"dirty",value:e}),dd=e=>({status:"valid",value:e}),ud=e=>"aborted"===e.status,md=e=>"dirty"===e.status,pd=e=>"valid"===e.status,hd=e=>"undefined"!=typeof Promise&&e instanceof Promise;var xd,fd;(fd=xd||(xd={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},fd.toString=e=>"string"==typeof e?e:e?.message;class gd{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const bd=(e,t)=>{if(pd(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new sd(e.common.issues);return this._error=t,this._error}}};function vd(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:s,description:a}=e;if(t&&(r||s))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:a};return{errorMap:(t,a)=>{const{message:n}=e;return"invalid_enum_value"===t.code?{message:n??a.defaultError}:void 0===a.data?{message:n??s??a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:n??r??a.defaultError}},description:a}}class yd{get description(){return this._def.description}_getType(e){return td(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:td(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ld,ctx:{common:e.parent.common,data:e.data,parsedType:td(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(hd(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:td(e)},s=this._parseSync({data:e,path:r.path,parent:r});return bd(r,s)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:td(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:t});return pd(r)?{value:r.value}:{issues:t.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>pd(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:td(e)},s=this._parse({data:e,path:r.path,parent:r}),a=await(hd(s)?s:Promise.resolve(s));return bd(r,a)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,s)=>{const a=e(t),n=()=>s.addIssue({code:rd.custom,...r(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(n(),!1)):!!a||(n(),!1)})}refinement(e,t){return this._refinement((r,s)=>!!e(r)||(s.addIssue("function"==typeof t?t(r,s):t),!1))}_refinement(e){return new vu({schema:this,typeName:Ou.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return yu.create(this,this._def)}nullable(){return ju.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return su.create(this)}promise(){return bu.create(this,this._def)}or(e){return iu.create([this,e],this._def)}and(e){return ou.create(this,e,this._def)}transform(e){return new vu({...vd(this._def),schema:this,typeName:Ou.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new wu({...vd(this._def),innerType:this,defaultValue:t,typeName:Ou.ZodDefault})}brand(){return new ku({typeName:Ou.ZodBranded,type:this,...vd(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Nu({...vd(this._def),innerType:this,catchValue:t,typeName:Ou.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Su.create(this,e)}readonly(){return Cu.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const jd=/^c[^\s-]{8,}$/i,wd=/^[0-9a-z]+$/,Nd=/^[0-9A-HJKMNP-TV-Z]{26}$/i,_d=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,kd=/^[a-z0-9_-]{21}$/i,Sd=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Cd=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Od=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Ed;const Pd=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Td=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Ad=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Md=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Dd=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Id=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Rd="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",$d=new RegExp(`^${Rd}$`);function Ld(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function Fd(e){return new RegExp(`^${Ld(e)}$`)}function zd(e){let t=`${Rd}T${Ld(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function Ud(e,t){return!("v4"!==t&&t||!Pd.test(e))||!("v6"!==t&&t||!Ad.test(e))}function Bd(e,t){if(!Sd.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const s=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(s));return"object"==typeof a&&null!==a&&((!("typ"in a)||"JWT"===a?.typ)&&(!!a.alg&&(!t||a.alg===t)))}catch{return!1}}function qd(e,t){return!("v4"!==t&&t||!Td.test(e))||!("v6"!==t&&t||!Md.test(e))}class Wd extends yd{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==ed.string){const t=this._getOrReturnCtx(e);return id(t,{code:rd.invalid_type,expected:ed.string,received:t.parsedType}),od}const t=new ld;let r;for(const s of this._def.checks)if("min"===s.kind)e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),id(r,{code:rd.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("max"===s.kind)e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),id(r,{code:rd.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("length"===s.kind){const a=e.data.length>s.value,n=e.data.length<s.value;(a||n)&&(r=this._getOrReturnCtx(e,r),a?id(r,{code:rd.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):n&&id(r,{code:rd.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),t.dirty())}else if("email"===s.kind)Od.test(e.data)||(r=this._getOrReturnCtx(e,r),id(r,{validation:"email",code:rd.invalid_string,message:s.message}),t.dirty());else if("emoji"===s.kind)Ed||(Ed=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ed.test(e.data)||(r=this._getOrReturnCtx(e,r),id(r,{validation:"emoji",code:rd.invalid_string,message:s.message}),t.dirty());else if("uuid"===s.kind)_d.test(e.data)||(r=this._getOrReturnCtx(e,r),id(r,{validation:"uuid",code:rd.invalid_string,message:s.message}),t.dirty());else if("nanoid"===s.kind)kd.test(e.data)||(r=this._getOrReturnCtx(e,r),id(r,{validation:"nanoid",code:rd.invalid_string,message:s.message}),t.dirty());else if("cuid"===s.kind)jd.test(e.data)||(r=this._getOrReturnCtx(e,r),id(r,{validation:"cuid",code:rd.invalid_string,message:s.message}),t.dirty());else if("cuid2"===s.kind)wd.test(e.data)||(r=this._getOrReturnCtx(e,r),id(r,{validation:"cuid2",code:rd.invalid_string,message:s.message}),t.dirty());else if("ulid"===s.kind)Nd.test(e.data)||(r=this._getOrReturnCtx(e,r),id(r,{validation:"ulid",code:rd.invalid_string,message:s.message}),t.dirty());else if("url"===s.kind)try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),id(r,{validation:"url",code:rd.invalid_string,message:s.message}),t.dirty()}else if("regex"===s.kind){s.regex.lastIndex=0;s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),id(r,{validation:"regex",code:rd.invalid_string,message:s.message}),t.dirty())}else if("trim"===s.kind)e.data=e.data.trim();else if("includes"===s.kind)e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),id(r,{code:rd.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),t.dirty());else if("toLowerCase"===s.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===s.kind)e.data=e.data.toUpperCase();else if("startsWith"===s.kind)e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),id(r,{code:rd.invalid_string,validation:{startsWith:s.value},message:s.message}),t.dirty());else if("endsWith"===s.kind)e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),id(r,{code:rd.invalid_string,validation:{endsWith:s.value},message:s.message}),t.dirty());else if("datetime"===s.kind){zd(s).test(e.data)||(r=this._getOrReturnCtx(e,r),id(r,{code:rd.invalid_string,validation:"datetime",message:s.message}),t.dirty())}else if("date"===s.kind){$d.test(e.data)||(r=this._getOrReturnCtx(e,r),id(r,{code:rd.invalid_string,validation:"date",message:s.message}),t.dirty())}else if("time"===s.kind){Fd(s).test(e.data)||(r=this._getOrReturnCtx(e,r),id(r,{code:rd.invalid_string,validation:"time",message:s.message}),t.dirty())}else"duration"===s.kind?Cd.test(e.data)||(r=this._getOrReturnCtx(e,r),id(r,{validation:"duration",code:rd.invalid_string,message:s.message}),t.dirty()):"ip"===s.kind?Ud(e.data,s.version)||(r=this._getOrReturnCtx(e,r),id(r,{validation:"ip",code:rd.invalid_string,message:s.message}),t.dirty()):"jwt"===s.kind?Bd(e.data,s.alg)||(r=this._getOrReturnCtx(e,r),id(r,{validation:"jwt",code:rd.invalid_string,message:s.message}),t.dirty()):"cidr"===s.kind?qd(e.data,s.version)||(r=this._getOrReturnCtx(e,r),id(r,{validation:"cidr",code:rd.invalid_string,message:s.message}),t.dirty()):"base64"===s.kind?Dd.test(e.data)||(r=this._getOrReturnCtx(e,r),id(r,{validation:"base64",code:rd.invalid_string,message:s.message}),t.dirty()):"base64url"===s.kind?Id.test(e.data)||(r=this._getOrReturnCtx(e,r),id(r,{validation:"base64url",code:rd.invalid_string,message:s.message}),t.dirty()):Zc.assertNever(s);return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:rd.invalid_string,...xd.errToObj(r)})}_addCheck(e){return new Wd({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...xd.errToObj(e)})}url(e){return this._addCheck({kind:"url",...xd.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...xd.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...xd.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...xd.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...xd.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...xd.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...xd.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...xd.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...xd.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...xd.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...xd.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...xd.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...xd.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...xd.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...xd.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...xd.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...xd.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...xd.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...xd.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...xd.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...xd.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...xd.errToObj(t)})}nonempty(e){return this.min(1,xd.errToObj(e))}trim(){return new Wd({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Wd({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Wd({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Kd(e,t){const r=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,a=r>s?r:s;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}Wd.create=e=>new Wd({checks:[],typeName:Ou.ZodString,coerce:e?.coerce??!1,...vd(e)});class Vd extends yd{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==ed.number){const t=this._getOrReturnCtx(e);return id(t,{code:rd.invalid_type,expected:ed.number,received:t.parsedType}),od}let t;const r=new ld;for(const s of this._def.checks)if("int"===s.kind)Zc.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),id(t,{code:rd.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty());else if("min"===s.kind){(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),id(t,{code:rd.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty())}else if("max"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),id(t,{code:rd.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty())}else"multipleOf"===s.kind?0!==Kd(e.data,s.value)&&(t=this._getOrReturnCtx(e,t),id(t,{code:rd.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):"finite"===s.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),id(t,{code:rd.not_finite,message:s.message}),r.dirty()):Zc.assertNever(s);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,xd.toString(t))}gt(e,t){return this.setLimit("min",e,!1,xd.toString(t))}lte(e,t){return this.setLimit("max",e,!0,xd.toString(t))}lt(e,t){return this.setLimit("max",e,!1,xd.toString(t))}setLimit(e,t,r,s){return new Vd({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:xd.toString(s)}]})}_addCheck(e){return new Vd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:xd.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:xd.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:xd.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:xd.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:xd.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:xd.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:xd.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:xd.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:xd.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&Zc.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Vd.create=e=>new Vd({checks:[],typeName:Ou.ZodNumber,coerce:e?.coerce||!1,...vd(e)});class Hd extends yd{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ed.bigint)return this._getInvalidInput(e);let t;const r=new ld;for(const s of this._def.checks)if("min"===s.kind){(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),id(t,{code:rd.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty())}else if("max"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),id(t,{code:rd.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty())}else"multipleOf"===s.kind?e.data%s.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),id(t,{code:rd.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):Zc.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return id(t,{code:rd.invalid_type,expected:ed.bigint,received:t.parsedType}),od}gte(e,t){return this.setLimit("min",e,!0,xd.toString(t))}gt(e,t){return this.setLimit("min",e,!1,xd.toString(t))}lte(e,t){return this.setLimit("max",e,!0,xd.toString(t))}lt(e,t){return this.setLimit("max",e,!1,xd.toString(t))}setLimit(e,t,r,s){return new Hd({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:xd.toString(s)}]})}_addCheck(e){return new Hd({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:xd.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:xd.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:xd.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:xd.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:xd.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Hd.create=e=>new Hd({checks:[],typeName:Ou.ZodBigInt,coerce:e?.coerce??!1,...vd(e)});class Gd extends yd{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==ed.boolean){const t=this._getOrReturnCtx(e);return id(t,{code:rd.invalid_type,expected:ed.boolean,received:t.parsedType}),od}return dd(e.data)}}Gd.create=e=>new Gd({typeName:Ou.ZodBoolean,coerce:e?.coerce||!1,...vd(e)});class Yd extends yd{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==ed.date){const t=this._getOrReturnCtx(e);return id(t,{code:rd.invalid_type,expected:ed.date,received:t.parsedType}),od}if(Number.isNaN(e.data.getTime())){return id(this._getOrReturnCtx(e),{code:rd.invalid_date}),od}const t=new ld;let r;for(const s of this._def.checks)"min"===s.kind?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),id(r,{code:rd.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),t.dirty()):"max"===s.kind?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),id(r,{code:rd.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),t.dirty()):Zc.assertNever(s);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Yd({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:xd.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:xd.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Yd.create=e=>new Yd({checks:[],coerce:e?.coerce||!1,typeName:Ou.ZodDate,...vd(e)});class Jd extends yd{_parse(e){if(this._getType(e)!==ed.symbol){const t=this._getOrReturnCtx(e);return id(t,{code:rd.invalid_type,expected:ed.symbol,received:t.parsedType}),od}return dd(e.data)}}Jd.create=e=>new Jd({typeName:Ou.ZodSymbol,...vd(e)});class Zd extends yd{_parse(e){if(this._getType(e)!==ed.undefined){const t=this._getOrReturnCtx(e);return id(t,{code:rd.invalid_type,expected:ed.undefined,received:t.parsedType}),od}return dd(e.data)}}Zd.create=e=>new Zd({typeName:Ou.ZodUndefined,...vd(e)});class Qd extends yd{_parse(e){if(this._getType(e)!==ed.null){const t=this._getOrReturnCtx(e);return id(t,{code:rd.invalid_type,expected:ed.null,received:t.parsedType}),od}return dd(e.data)}}Qd.create=e=>new Qd({typeName:Ou.ZodNull,...vd(e)});class Xd extends yd{constructor(){super(...arguments),this._any=!0}_parse(e){return dd(e.data)}}Xd.create=e=>new Xd({typeName:Ou.ZodAny,...vd(e)});class eu extends yd{constructor(){super(...arguments),this._unknown=!0}_parse(e){return dd(e.data)}}eu.create=e=>new eu({typeName:Ou.ZodUnknown,...vd(e)});class tu extends yd{_parse(e){const t=this._getOrReturnCtx(e);return id(t,{code:rd.invalid_type,expected:ed.never,received:t.parsedType}),od}}tu.create=e=>new tu({typeName:Ou.ZodNever,...vd(e)});class ru extends yd{_parse(e){if(this._getType(e)!==ed.undefined){const t=this._getOrReturnCtx(e);return id(t,{code:rd.invalid_type,expected:ed.void,received:t.parsedType}),od}return dd(e.data)}}ru.create=e=>new ru({typeName:Ou.ZodVoid,...vd(e)});class su extends yd{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==ed.array)return id(t,{code:rd.invalid_type,expected:ed.array,received:t.parsedType}),od;if(null!==s.exactLength){const e=t.data.length>s.exactLength.value,a=t.data.length<s.exactLength.value;(e||a)&&(id(t,{code:e?rd.too_big:rd.too_small,minimum:a?s.exactLength.value:void 0,maximum:e?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(null!==s.minLength&&t.data.length<s.minLength.value&&(id(t,{code:rd.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),null!==s.maxLength&&t.data.length>s.maxLength.value&&(id(t,{code:rd.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>s.type._parseAsync(new gd(t,e,t.path,r)))).then(e=>ld.mergeArray(r,e));const a=[...t.data].map((e,r)=>s.type._parseSync(new gd(t,e,t.path,r)));return ld.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new su({...this._def,minLength:{value:e,message:xd.toString(t)}})}max(e,t){return new su({...this._def,maxLength:{value:e,message:xd.toString(t)}})}length(e,t){return new su({...this._def,exactLength:{value:e,message:xd.toString(t)}})}nonempty(e){return this.min(1,e)}}function au(e){if(e instanceof nu){const t={};for(const r in e.shape){const s=e.shape[r];t[r]=yu.create(au(s))}return new nu({...e._def,shape:()=>t})}return e instanceof su?new su({...e._def,type:au(e.element)}):e instanceof yu?yu.create(au(e.unwrap())):e instanceof ju?ju.create(au(e.unwrap())):e instanceof cu?cu.create(e.items.map(e=>au(e))):e}su.create=(e,t)=>new su({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ou.ZodArray,...vd(t)});class nu extends yd{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=Zc.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==ed.object){const t=this._getOrReturnCtx(e);return id(t,{code:rd.invalid_type,expected:ed.object,received:t.parsedType}),od}const{status:t,ctx:r}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),n=[];if(!(this._def.catchall instanceof tu&&"strip"===this._def.unknownKeys))for(const l in r.data)a.includes(l)||n.push(l);const i=[];for(const l of a){const e=s[l],t=r.data[l];i.push({key:{status:"valid",value:l},value:e._parse(new gd(r,t,r.path,l)),alwaysSet:l in r.data})}if(this._def.catchall instanceof tu){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of n)i.push({key:{status:"valid",value:t},value:{status:"valid",value:r.data[t]}});else if("strict"===e)n.length>0&&(id(r,{code:rd.unrecognized_keys,keys:n}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of n){const s=r.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new gd(r,s,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of i){const r=await t.key,s=await t.value;e.push({key:r,value:s,alwaysSet:t.alwaysSet})}return e}).then(e=>ld.mergeObjectSync(t,e)):ld.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return xd.errToObj,new nu({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{const s=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:xd.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new nu({...this._def,unknownKeys:"strip"})}passthrough(){return new nu({...this._def,unknownKeys:"passthrough"})}extend(e){return new nu({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new nu({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ou.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new nu({...this._def,catchall:e})}pick(e){const t={};for(const r of Zc.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new nu({...this._def,shape:()=>t})}omit(e){const t={};for(const r of Zc.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new nu({...this._def,shape:()=>t})}deepPartial(){return au(this)}partial(e){const t={};for(const r of Zc.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}return new nu({...this._def,shape:()=>t})}required(e){const t={};for(const r of Zc.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof yu;)e=e._def.innerType;t[r]=e}return new nu({...this._def,shape:()=>t})}keyof(){return xu(Zc.objectKeys(this.shape))}}nu.create=(e,t)=>new nu({shape:()=>e,unknownKeys:"strip",catchall:tu.create(),typeName:Ou.ZodObject,...vd(t)}),nu.strictCreate=(e,t)=>new nu({shape:()=>e,unknownKeys:"strict",catchall:tu.create(),typeName:Ou.ZodObject,...vd(t)}),nu.lazycreate=(e,t)=>new nu({shape:e,unknownKeys:"strip",catchall:tu.create(),typeName:Ou.ZodObject,...vd(t)});class iu extends yd{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const s of e)if("dirty"===s.result.status)return t.common.issues.push(...s.ctx.common.issues),s.result;const r=e.map(e=>new sd(e.ctx.common.issues));return id(t,{code:rd.invalid_union,unionErrors:r}),od});{let e;const s=[];for(const n of r){const r={...t,common:{...t.common,issues:[]},parent:null},a=n._parseSync({data:t.data,path:t.path,parent:r});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:r}),r.common.issues.length&&s.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const a=s.map(e=>new sd(e));return id(t,{code:rd.invalid_union,unionErrors:a}),od}}get options(){return this._def.options}}function lu(e,t){const r=td(e),s=td(t);if(e===t)return{valid:!0,data:e};if(r===ed.object&&s===ed.object){const r=Zc.objectKeys(t),s=Zc.objectKeys(e).filter(e=>-1!==r.indexOf(e)),a={...e,...t};for(const n of s){const r=lu(e[n],t[n]);if(!r.valid)return{valid:!1};a[n]=r.data}return{valid:!0,data:a}}if(r===ed.array&&s===ed.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let s=0;s<e.length;s++){const a=lu(e[s],t[s]);if(!a.valid)return{valid:!1};r.push(a.data)}return{valid:!0,data:r}}return r===ed.date&&s===ed.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}iu.create=(e,t)=>new iu({options:e,typeName:Ou.ZodUnion,...vd(t)});class ou extends yd{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(e,s)=>{if(ud(e)||ud(s))return od;const a=lu(e.value,s.value);return a.valid?((md(e)||md(s))&&t.dirty(),{status:t.value,value:a.data}):(id(r,{code:rd.invalid_intersection_types}),od)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>s(e,t)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ou.create=(e,t,r)=>new ou({left:e,right:t,typeName:Ou.ZodIntersection,...vd(r)});class cu extends yd{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ed.array)return id(r,{code:rd.invalid_type,expected:ed.array,received:r.parsedType}),od;if(r.data.length<this._def.items.length)return id(r,{code:rd.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),od;!this._def.rest&&r.data.length>this._def.items.length&&(id(r,{code:rd.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...r.data].map((e,t)=>{const s=this._def.items[t]||this._def.rest;return s?s._parse(new gd(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(s).then(e=>ld.mergeArray(t,e)):ld.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new cu({...this._def,rest:e})}}cu.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new cu({items:e,typeName:Ou.ZodTuple,rest:null,...vd(t)})};class du extends yd{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ed.object)return id(r,{code:rd.invalid_type,expected:ed.object,received:r.parsedType}),od;const s=[],a=this._def.keyType,n=this._def.valueType;for(const i in r.data)s.push({key:a._parse(new gd(r,i,r.path,i)),value:n._parse(new gd(r,r.data[i],r.path,i)),alwaysSet:i in r.data});return r.common.async?ld.mergeObjectAsync(t,s):ld.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return new du(t instanceof yd?{keyType:e,valueType:t,typeName:Ou.ZodRecord,...vd(r)}:{keyType:Wd.create(),valueType:e,typeName:Ou.ZodRecord,...vd(t)})}}class uu extends yd{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ed.map)return id(r,{code:rd.invalid_type,expected:ed.map,received:r.parsedType}),od;const s=this._def.keyType,a=this._def.valueType,n=[...r.data.entries()].map(([e,t],n)=>({key:s._parse(new gd(r,e,r.path,[n,"key"])),value:a._parse(new gd(r,t,r.path,[n,"value"]))}));if(r.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const r of n){const s=await r.key,a=await r.value;if("aborted"===s.status||"aborted"===a.status)return od;"dirty"!==s.status&&"dirty"!==a.status||t.dirty(),e.set(s.value,a.value)}return{status:t.value,value:e}})}{const e=new Map;for(const r of n){const s=r.key,a=r.value;if("aborted"===s.status||"aborted"===a.status)return od;"dirty"!==s.status&&"dirty"!==a.status||t.dirty(),e.set(s.value,a.value)}return{status:t.value,value:e}}}}uu.create=(e,t,r)=>new uu({valueType:t,keyType:e,typeName:Ou.ZodMap,...vd(r)});class mu extends yd{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ed.set)return id(r,{code:rd.invalid_type,expected:ed.set,received:r.parsedType}),od;const s=this._def;null!==s.minSize&&r.data.size<s.minSize.value&&(id(r,{code:rd.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),null!==s.maxSize&&r.data.size>s.maxSize.value&&(id(r,{code:rd.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const a=this._def.valueType;function n(e){const r=new Set;for(const s of e){if("aborted"===s.status)return od;"dirty"===s.status&&t.dirty(),r.add(s.value)}return{status:t.value,value:r}}const i=[...r.data.values()].map((e,t)=>a._parse(new gd(r,e,r.path,t)));return r.common.async?Promise.all(i).then(e=>n(e)):n(i)}min(e,t){return new mu({...this._def,minSize:{value:e,message:xd.toString(t)}})}max(e,t){return new mu({...this._def,maxSize:{value:e,message:xd.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}mu.create=(e,t)=>new mu({valueType:e,minSize:null,maxSize:null,typeName:Ou.ZodSet,...vd(t)});class pu extends yd{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}pu.create=(e,t)=>new pu({getter:e,typeName:Ou.ZodLazy,...vd(t)});class hu extends yd{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return id(t,{received:t.data,code:rd.invalid_literal,expected:this._def.value}),od}return{status:"valid",value:e.data}}get value(){return this._def.value}}function xu(e,t){return new fu({values:e,typeName:Ou.ZodEnum,...vd(t)})}hu.create=(e,t)=>new hu({value:e,typeName:Ou.ZodLiteral,...vd(t)});class fu extends yd{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return id(t,{expected:Zc.joinValues(r),received:t.parsedType,code:rd.invalid_type}),od}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return id(t,{received:t.data,code:rd.invalid_enum_value,options:r}),od}return dd(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return fu.create(e,{...this._def,...t})}exclude(e,t=this._def){return fu.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}fu.create=xu;class gu extends yd{_parse(e){const t=Zc.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ed.string&&r.parsedType!==ed.number){const e=Zc.objectValues(t);return id(r,{expected:Zc.joinValues(e),received:r.parsedType,code:rd.invalid_type}),od}if(this._cache||(this._cache=new Set(Zc.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=Zc.objectValues(t);return id(r,{received:r.data,code:rd.invalid_enum_value,options:e}),od}return dd(e.data)}get enum(){return this._def.values}}gu.create=(e,t)=>new gu({values:e,typeName:Ou.ZodNativeEnum,...vd(t)});class bu extends yd{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ed.promise&&!1===t.common.async)return id(t,{code:rd.invalid_type,expected:ed.promise,received:t.parsedType}),od;const r=t.parsedType===ed.promise?t.data:Promise.resolve(t.data);return dd(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}bu.create=(e,t)=>new bu({type:e,typeName:Ou.ZodPromise,...vd(t)});class vu extends yd{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ou.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:e=>{id(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===s.type){const e=s.transform(r.data,a);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return od;const s=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===s.status?od:"dirty"===s.status||"dirty"===t.value?cd(s.value):s});{if("aborted"===t.value)return od;const s=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===s.status?od:"dirty"===s.status||"dirty"===t.value?cd(s.value):s}}if("refinement"===s.type){const e=e=>{const t=s.refinement(e,a);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===s.status?od:("dirty"===s.status&&t.dirty(),e(s.value),{status:t.value,value:s.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?od:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))))}if("transform"===s.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!pd(e))return od;const n=s.transform(e.value,a);if(n instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:n}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>pd(e)?Promise.resolve(s.transform(e.value,a)).then(e=>({status:t.value,value:e})):od)}Zc.assertNever(s)}}vu.create=(e,t,r)=>new vu({schema:e,typeName:Ou.ZodEffects,effect:t,...vd(r)}),vu.createWithPreprocess=(e,t,r)=>new vu({schema:t,effect:{type:"preprocess",transform:e},typeName:Ou.ZodEffects,...vd(r)});class yu extends yd{_parse(e){return this._getType(e)===ed.undefined?dd(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}yu.create=(e,t)=>new yu({innerType:e,typeName:Ou.ZodOptional,...vd(t)});class ju extends yd{_parse(e){return this._getType(e)===ed.null?dd(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ju.create=(e,t)=>new ju({innerType:e,typeName:Ou.ZodNullable,...vd(t)});class wu extends yd{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===ed.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}wu.create=(e,t)=>new wu({innerType:e,typeName:Ou.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...vd(t)});class Nu extends yd{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return hd(s)?s.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new sd(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===s.status?s.value:this._def.catchValue({get error(){return new sd(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Nu.create=(e,t)=>new Nu({innerType:e,typeName:Ou.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...vd(t)});class _u extends yd{_parse(e){if(this._getType(e)!==ed.nan){const t=this._getOrReturnCtx(e);return id(t,{code:rd.invalid_type,expected:ed.nan,received:t.parsedType}),od}return{status:"valid",value:e.data}}}_u.create=e=>new _u({typeName:Ou.ZodNaN,...vd(e)});class ku extends yd{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Su extends yd{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?od:"dirty"===e.status?(t.dirty(),cd(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})()}{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?od:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new Su({in:e,out:t,typeName:Ou.ZodPipeline})}}class Cu extends yd{_parse(e){const t=this._def.innerType._parse(e),r=e=>(pd(e)&&(e.value=Object.freeze(e.value)),e);return hd(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}var Ou,Eu;Cu.create=(e,t)=>new Cu({innerType:e,typeName:Ou.ZodReadonly,...vd(t)}),(Eu=Ou||(Ou={})).ZodString="ZodString",Eu.ZodNumber="ZodNumber",Eu.ZodNaN="ZodNaN",Eu.ZodBigInt="ZodBigInt",Eu.ZodBoolean="ZodBoolean",Eu.ZodDate="ZodDate",Eu.ZodSymbol="ZodSymbol",Eu.ZodUndefined="ZodUndefined",Eu.ZodNull="ZodNull",Eu.ZodAny="ZodAny",Eu.ZodUnknown="ZodUnknown",Eu.ZodNever="ZodNever",Eu.ZodVoid="ZodVoid",Eu.ZodArray="ZodArray",Eu.ZodObject="ZodObject",Eu.ZodUnion="ZodUnion",Eu.ZodDiscriminatedUnion="ZodDiscriminatedUnion",Eu.ZodIntersection="ZodIntersection",Eu.ZodTuple="ZodTuple",Eu.ZodRecord="ZodRecord",Eu.ZodMap="ZodMap",Eu.ZodSet="ZodSet",Eu.ZodFunction="ZodFunction",Eu.ZodLazy="ZodLazy",Eu.ZodLiteral="ZodLiteral",Eu.ZodEnum="ZodEnum",Eu.ZodEffects="ZodEffects",Eu.ZodNativeEnum="ZodNativeEnum",Eu.ZodOptional="ZodOptional",Eu.ZodNullable="ZodNullable",Eu.ZodDefault="ZodDefault",Eu.ZodCatch="ZodCatch",Eu.ZodPromise="ZodPromise",Eu.ZodBranded="ZodBranded",Eu.ZodPipeline="ZodPipeline",Eu.ZodReadonly="ZodReadonly";const Pu=Wd.create,Tu=Vd.create,Au=Gd.create,Mu=eu.create;tu.create;const Du=su.create,Iu=nu.create;iu.create,ou.create,cu.create;const Ru=du.create,$u=fu.create;bu.create,yu.create,ju.create,Iu({username:Pu().optional(),display_name:Pu().optional(),bio:Pu().optional(),profile_image:Pu().optional(),cover_image:Pu().optional(),website:Pu().optional(),location:Pu().optional(),social_links:Pu().optional()});const Lu=Iu({title:Pu(),description:Pu(),drop_type:Pu(),platform:Pu(),content_url:Pu().url(),reward_amount:Tu().min(0),reward_currency:Pu(),start_date:Pu(),end_date:Pu(),max_participants:Tu().min(1).optional(),requirements:Pu().optional(),is_public:Au().default(!0),is_featured:Au().default(!1),is_approved:Au().default(!1),status:$u(["draft","active","completed","cancelled"]).default("draft"),difficulty:Pu().optional(),category:Pu().optional(),tags:Du(Pu()).optional(),is_paid_drop:Au().default(!1),gem_reward_base:Tu().optional(),gem_pool_total:Tu().optional(),follower_threshold:Tu().optional(),time_commitment:Pu().optional(),deliverables:Pu().optional(),deadline_at:Pu().optional(),move_cost_points:Tu().optional(),key_reward_amount:Tu().optional(),is_proof_drop:Au().optional(),key_cost:Tu().optional(),reward_logic:Pu().optional()});Iu({application_message:Pu()}),Iu({action:Pu(),target_id:Pu(),target_type:Pu()}),Iu({from_currency:$u(["points","gems"]),to_currency:$u(["keys"]),amount:Tu().min(1)}),Iu({date:Pu().optional()}),Iu({amount:Tu().min(200),payment_method:Pu(),payment_details:Ru(Mu())}),Iu({payment_method:Pu(),preference_data:Ru(Mu()),is_default:Au().optional()}),Iu({package_id:Pu(),gems:Tu().min(1),amount:Tu().min(.01),payment_method:Pu()}),Iu({content_id:Tu().optional(),platform:Pu(),content_url:Pu(),metric:Pu(),target_value:Tu(),end_date:Pu(),description:Pu().optional()}),Iu({prediction_amount:Tu().min(1),prediction_side:$u(["over","under"]),forecast_id:Pu()}),Iu({platform:Pu(),content_url:Pu(),metric:Pu(),target_value:Tu(),end_date:Pu(),initial_side:$u(["over","under"])}),Iu({bet_amount:Tu().min(1),bet_side:$u(["over","under"])});const Fu=Iu({platform:$u(["instagram","tiktok","youtube","twitter","linkedin"]),title:Pu().min(1),description:Pu().optional(),content_url:Pu().url(),thumbnail_url:Pu().url().optional(),total_shares:Tu().min(1),share_price:Tu().min(0)});Iu({content_id:Tu(),shares_count:Tu().min(1)}),$u(["instagram","tiktok","youtube","twitter"]);const zu=$u(["content_clipping","reviews","ugc_creation","affiliate_referral","surveys","challenges_events","engagement"]),Uu=$u(["easy","medium","hard"]);function Bu({isOpen:e,onClose:t,onSuccess:r,content:s}){const[a,n]=u.useState({platform:s.platform,title:s.title,description:s.description||"",platform_url:s.platform_url,media_url:s.media_url||"",total_shares:s.total_shares,share_price:s.share_price}),[i,l]=u.useState(!1),[o,c]=u.useState(null);u.useEffect(()=>{s&&n({platform:s.platform,title:s.title,description:s.description||"",platform_url:s.platform_url,media_url:s.media_url||"",total_shares:s.total_shares,share_price:s.share_price})},[s]);return e?Ns.jsx(Us,{isOpen:e,onClose:t,maxWidth:"2xl",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex flex-col gap-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between border-b border-pr-surface-3 pb-4",children:[Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"Edit Content"}),Ns.jsx("button",{onClick:t,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2",disabled:i,children:Ns.jsx(hs,{className:"h-5 w-5"})})]}),Ns.jsxs("form",{onSubmit:async e=>{e.preventDefault(),l(!0),c(null);try{if(!Fu.safeParse(a).success)return void c("Please check all required fields");const e=await fetch(`/api/content/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)});if(e.ok){const s=await e.json();r(s.content),t()}else{const t=await e.json();c(t.error||"Failed to update content")}}catch(n){console.error("Error updating content:",n),c("Failed to update content")}finally{l(!1)}},className:"space-y-6",children:[o&&Ns.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:o}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Platform *"}),Ns.jsxs("select",{value:a.platform,onChange:e=>n({...a,platform:e.target.value}),className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",required:!0,disabled:i,children:[Ns.jsx("option",{value:"",children:"Select platform"}),Ns.jsx("option",{value:"instagram",children:"Instagram"}),Ns.jsx("option",{value:"tiktok",children:"TikTok"}),Ns.jsx("option",{value:"youtube",children:"YouTube"}),Ns.jsx("option",{value:"twitter",children:"Twitter"}),Ns.jsx("option",{value:"linkedin",children:"LinkedIn"})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Total Shares *"}),Ns.jsx("input",{type:"number",min:"1",max:"1000",value:a.total_shares,onChange:e=>n({...a,total_shares:parseInt(e.target.value)||0}),className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",required:!0,disabled:i})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Title *"}),Ns.jsx("input",{type:"text",value:a.title,onChange:e=>n({...a,title:e.target.value}),className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"Enter content title",required:!0,disabled:i})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Description"}),Ns.jsx("textarea",{value:a.description,onChange:e=>n({...a,description:e.target.value}),rows:4,className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"Describe your content...",disabled:i})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Platform URL *"}),Ns.jsx("input",{type:"url",value:a.platform_url,onChange:e=>n({...a,platform_url:e.target.value}),className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"https://instagram.com/p/...",required:!0,disabled:i})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Media URL"}),Ns.jsx("input",{type:"url",value:a.media_url,onChange:e=>n({...a,media_url:e.target.value}),className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"https://example.com/image.jpg",disabled:i})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Share Price (USD) *"}),Ns.jsx("input",{type:"number",step:"0.0001",min:"0",value:a.share_price,onChange:e=>n({...a,share_price:parseFloat(e.target.value)||0}),className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"0.0100",required:!0,disabled:i})]}),Ns.jsxs("div",{className:"flex space-x-4 pt-6 border-t border-pr-surface-3",children:[Ns.jsx("button",{type:"button",onClick:t,disabled:i,className:"flex-1 px-6 py-3 border border-pr-surface-3 text-pr-text-1 rounded-xl font-medium hover:bg-pr-surface-2 transition-colors disabled:opacity-50",children:"Cancel"}),Ns.jsx("button",{type:"submit",disabled:i,className:"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 disabled:opacity-50 flex items-center justify-center space-x-2",children:i?Ns.jsxs(Ns.Fragment,{children:[Ns.jsx(pr,{className:"w-4 h-4 animate-spin"}),Ns.jsx("span",{children:"Updating..."})]}):Ns.jsxs(Ns.Fragment,{children:[Ns.jsx(Ur,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Update Content"})]})})]})]})]})}):null}function qu({isOpen:e,onClose:t,onConfirm:r,title:s,message:a,confirmText:n="Confirm",cancelText:i="Cancel",type:l="warning",loading:o=!1}){return Ns.jsx(Us,{isOpen:e,onClose:t,maxWidth:"md",showCloseButton:!1,children:Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[(()=>{switch(l){case"danger":return Ns.jsx(ns,{className:"w-6 h-6 text-red-600"});case"success":return Ns.jsx(At,{className:"w-6 h-6 text-green-600"});case"info":return Ns.jsx(nr,{className:"w-6 h-6 text-blue-600"});default:return Ns.jsx(ns,{className:"w-6 h-6 text-yellow-600"})}})(),Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:s})]}),Ns.jsx("button",{onClick:t,className:"text-gray-400 hover:text-pr-text-2 transition-colors",disabled:o,children:Ns.jsx(hs,{className:"w-6 h-6"})})]}),Ns.jsx("p",{className:"text-pr-text-2",children:a}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsx("button",{onClick:t,disabled:o,className:"flex-1 px-4 py-2 border border-pr-surface-3 rounded-lg text-pr-text-1 font-medium hover:bg-pr-surface-2 transition-colors disabled:opacity-50",children:i}),Ns.jsx("button",{onClick:r,disabled:o,className:`flex-1 px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 ${(()=>{switch(l){case"danger":return"bg-red-600 hover:bg-red-700 text-white";case"success":return"bg-green-600 hover:bg-green-700 text-white";case"info":return"bg-blue-600 hover:bg-blue-700 text-white";default:return"bg-yellow-600 hover:bg-yellow-700 text-white"}})()}`,children:o?Ns.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[Ns.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),Ns.jsx("span",{children:"Processing..."})]}):n})]})]})})}function Wu({isOpen:e,onClose:t,contentId:r,contentTitle:s,contentUrl:a}){const[n,i]=u.useState(!1),l=a||`${window.location.origin}/content/${r}`,o=`Check out this amazing content: "${s}" on Promorang!`;return e?Ns.jsx(Us,{isOpen:e,onClose:t,maxWidth:"md",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex flex-col gap-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between border-b border-pr-surface-3 pb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Kr,{className:"h-6 w-6 text-blue-600"}),Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"Share Content"})]}),Ns.jsx("button",{onClick:t,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close share modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]}),Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-4",children:[Ns.jsx("h3",{className:"font-medium text-pr-text-1 mb-2",children:s}),Ns.jsx("p",{className:"text-sm text-pr-text-2 break-all",children:l})]}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(l),i(!0),setTimeout(()=>i(!1),2e3)}catch(e){console.error("Failed to copy:",e)}},className:"w-full flex items-center justify-between rounded-lg border border-pr-surface-3 p-3 transition-colors hover:bg-pr-surface-2",children:Ns.jsxs("div",{className:"flex items-center space-x-3",children:[n?Ns.jsx(St,{className:"h-5 w-5 text-green-600"}):Ns.jsx(Lt,{className:"h-5 w-5 text-pr-text-2"}),Ns.jsx("span",{className:"font-medium text-pr-text-1",children:n?"Copied!":"Copy Link"})]})}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Ns.jsxs("button",{onClick:()=>{const e=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(l)}`;window.open(e,"_blank","width=600,height=400")},className:"flex items-center justify-center space-x-2 rounded-lg bg-blue-600 p-3 text-white transition-colors hover:bg-blue-700",children:[Ns.jsx(Gt,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Facebook"})]}),Ns.jsxs("button",{onClick:()=>{const e=`https://twitter.com/intent/tweet?text=${encodeURIComponent(`${o} ${l}`)}`;window.open(e,"_blank","width=600,height=400")},className:"flex items-center justify-center space-x-2 rounded-lg bg-sky-500 p-3 text-white transition-colors hover:bg-sky-600",children:[Ns.jsx(os,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Twitter"})]}),Ns.jsxs("button",{onClick:()=>{const e=`https://wa.me/?text=${encodeURIComponent(`${o} ${l}`)}`;window.open(e,"_blank")},className:"flex items-center justify-center space-x-2 rounded-lg bg-green-500 p-3 text-white transition-colors hover:bg-green-600",children:[Ns.jsx(wr,{className:"h-4 w-4"}),Ns.jsx("span",{children:"WhatsApp"})]}),Ns.jsxs("button",{onClick:()=>{const e=encodeURIComponent("Check out this content on Promorang"),t=encodeURIComponent(`${o}\n\n${l}`);window.location.href=`mailto:?subject=${e}&body=${t}`},className:"flex items-center justify-center space-x-2 rounded-lg bg-gray-600 p-3 text-white transition-colors hover:bg-gray-700",children:[Ns.jsx("span",{className:"text-sm",children:""}),Ns.jsx("span",{children:"Email"})]})]}),"undefined"!=typeof window&&"share"in navigator&&Ns.jsxs("button",{onClick:async()=>{if(navigator.share)try{await navigator.share({title:s,text:o,url:l})}catch(e){console.error("Error sharing:",e)}},className:"flex w-full items-center justify-center space-x-2 rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 p-3 text-white transition-colors hover:from-purple-600 hover:to-pink-600",children:[Ns.jsx(Kr,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Share via..."})]})]}),Ns.jsx("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3",children:Ns.jsxs("p",{className:"text-xs text-blue-700",children:[" ",Ns.jsx("strong",{children:"Tip:"})," Share this content to earn points and help creators grow their audience!"]})})]})}):null}function Ku({isOpen:e,onClose:t,user:r}){const[s,a]=u.useState([]),[n,i]=u.useState(!1);u.useEffect(()=>{e&&r&&l()},[e,r]);const l=async()=>{i(!0);try{const e=await fetch("/api/users/saved-content",{credentials:"include"});if(e.ok){const t=await e.json();a(t)}}catch(e){console.error("Failed to fetch saved content:",e)}finally{i(!1)}},o=e=>{switch(e){case"instagram":return"";case"tiktok":return"";case"youtube":return"";case"twitter":return"";case"linkedin":return"";default:return""}};return e?Ns.jsx(Us,{isOpen:e,onClose:t,maxWidth:"2xl",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex max-h-[85vh] flex-col overflow-hidden rounded-xl bg-pr-surface-card",children:[Ns.jsxs("div",{className:"flex items-center justify-between border-b border-pr-surface-3 px-6 py-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(ft,{className:"h-6 w-6 text-orange-600"}),Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"Saved Content"}),Ns.jsx("span",{className:"rounded-full bg-pr-surface-2 px-2 py-1 text-sm text-pr-text-2",children:s.length})]}),Ns.jsx("button",{onClick:t,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close saved content modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]}),Ns.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:n?Ns.jsx("div",{className:"flex items-center justify-center py-12",children:Ns.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):0===s.length?Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx(ft,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-2",children:"No saved content yet"}),Ns.jsx("p",{className:"text-pr-text-2 mb-4",children:"Save content you want to revisit later by clicking the bookmark icon."}),Ns.jsx("button",{onClick:t,className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Explore Content"})]}):Ns.jsx("div",{className:"space-y-6 bg-pr-surface-card",children:s.map(e=>{return Ns.jsx("div",{className:"bg-pr-surface-2 rounded-lg p-4 hover:bg-pr-surface-2 transition-colors",children:Ns.jsxs("div",{className:"flex items-start space-x-4",children:[Ns.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center text-white text-xl flex-shrink-0",children:o(e.content_platform)}),Ns.jsxs("div",{className:"flex-1 min-w-0",children:[Ns.jsxs("div",{className:"flex items-start justify-between mb-2",children:[Ns.jsx("h4",{className:"font-medium text-pr-text-1 truncate pr-2",children:e.content_title}),Ns.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[Ns.jsx("button",{onClick:()=>window.open(`/content/${e.content_id}`,"_blank"),className:"text-blue-600 hover:text-blue-700 p-1 rounded transition-colors",title:"View content",children:Ns.jsx(Ht,{className:"w-4 h-4"})}),Ns.jsx("button",{onClick:()=>window.open(e.content_url,"_blank"),className:"text-purple-600 hover:text-purple-700 p-1 rounded transition-colors",title:"View original",children:Ns.jsx(Kt,{className:"w-4 h-4"})}),Ns.jsx("button",{onClick:()=>(async e=>{try{(await fetch(`/api/users/saved-content/${e}`,{method:"DELETE",credentials:"include"})).ok&&a(t=>t.filter(t=>t.content_id!==e))}catch(t){console.error("Failed to remove saved content:",t)}})(e.content_id),className:"text-red-600 hover:text-red-700 p-1 rounded transition-colors",title:"Remove from saved",children:Ns.jsx(ss,{className:"w-4 h-4"})})]})]}),Ns.jsxs("div",{className:"flex items-center space-x-4 text-sm text-pr-text-2",children:[Ns.jsx("div",{className:"flex items-center space-x-1",children:Ns.jsxs("span",{children:["by ",e.creator_name]})}),Ns.jsx("div",{className:"flex items-center space-x-1",children:Ns.jsx("span",{className:"capitalize",children:e.content_platform})}),Ns.jsxs("div",{className:"flex items-center space-x-1",children:[Ns.jsx(yt,{className:"w-3 h-3"}),Ns.jsxs("span",{children:["Saved ",(t=e.created_at,new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))]})]})]})]})]})},e.id);var t})})}),s.length>0&&Ns.jsx("div",{className:"border-t border-pr-surface-3 bg-pr-surface-2 px-6 py-4",children:Ns.jsx("p",{className:"text-center text-xs text-pr-text-2",children:" Tip: Saved content is private and only visible to you. Use this to build your personal content library!"})})]})}):null}function Vu({variant:e,text:t,icon:r,onClick:s,disabled:a}){return Ns.jsxs("button",{onClick:e=>s?.(e),disabled:a,className:`text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-2 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:hover:shadow-none ${(()=>{switch(e){case"orange":return"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600";case"blue":return"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600";case"purple":return"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600";default:return"bg-pr-surface-20 hover:bg-gray-600"}})()}`,"aria-label":t,children:[r,Ns.jsx("span",{children:t})]})}function Hu({content:e}){const t="number"==typeof e.share_price?e.share_price:Number(e.share_price??0),r=Number.isFinite(t)&&t>0?t:null;return Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"text-lg font-bold text-pr-text-1",children:r?`$${r.toFixed(2)}`:""}),Ns.jsx("div",{className:"text-xs text-pr-text-2",children:"per share"})]})}function Gu({content:e}){const t=e.available_shares??0;return Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"text-lg font-bold text-blue-600",children:t>0?t:"0"}),Ns.jsx("div",{className:"text-xs text-pr-text-2",children:"available"})]})}function Yu({content:e,onBuyShares:t,onPredict:r,onTip:s,onExternalMove:a,currentUser:n,onEdit:i,onDelete:l}){const o=e.available_shares??0,c=e.engagement_shares_remaining??0,d=t=>r=>{r.stopPropagation(),r.preventDefault(),t?.(e)},u=o<=0?c>0?"Paid shares are sold out. Share early to claim the remaining engagement shares.":"All shares have been claimed. Check back soon for the next drop.":c>0?"Paid shares are available. Share early to also lock in the limited engagement shares.":void 0;return Ns.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 sm:gap-3 mt-4",children:[Ns.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-3",children:[Ns.jsx(Hu,{content:e}),Ns.jsx(Gu,{content:e})]}),Ns.jsxs("div",{className:"flex items-center justify-center sm:justify-end gap-2 flex-wrap",children:[Ns.jsx(Vu,{variant:"orange",text:"Buy Shares",icon:Ns.jsx(as,{className:"w-4 h-4"}),onClick:d(t),disabled:o<=0}),Ns.jsx(Vu,{variant:"blue",text:"Predict",icon:Ns.jsx(ts,{className:"w-4 h-4"}),onClick:d(r)}),Ns.jsx(Vu,{variant:"purple",text:"Tip Creator",icon:Ns.jsx(Xt,{className:"w-4 h-4"}),onClick:d(s)})]}),u&&Ns.jsx("p",{className:"text-xs text-pr-text-2 bg-pr-surface-2 border border-gray-100 rounded-lg px-3 py-2",children:u}),n?.id===e.creator_id&&Ns.jsxs("div",{className:"flex items-center justify-center sm:justify-end space-x-2 pt-3 border-t border-gray-100",children:[Ns.jsx("button",{onClick:t=>{t.stopPropagation(),i?.(e)},className:"text-blue-600 hover:text-blue-800 text-sm font-medium px-3 py-1 rounded-md hover:bg-blue-50 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]","aria-label":"Edit content",children:"Edit"}),Ns.jsx("span",{className:"text-gray-300",children:""}),Ns.jsx("button",{onClick:t=>{t.stopPropagation(),l?.(e)},className:"text-red-600 hover:text-red-800 text-sm font-medium px-3 py-1 rounded-md hover:bg-red-50 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]","aria-label":"Delete content",children:"Delete"})]}),Ns.jsx("div",{className:"pt-3 border-t border-gray-100",children:Ns.jsxs("button",{onClick:t=>{t.stopPropagation(),a?.(e)},className:"flex items-center justify-center space-x-2 px-4 py-2 text-sm text-pr-text-2 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] w-full sm:w-auto","aria-label":"Move to external platform",children:[Ns.jsx(Kt,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Move to External"})]})})]})}function Ju({icon:e,count:t,action:r,onClick:s,color:a="gray"}){return Ns.jsxs("button",{onClick:s,className:`flex items-center space-x-1 text-pr-text-2 ${(()=>{switch(a){case"red":return"hover:text-red-500";case"blue":return"hover:text-blue-500";case"purple":return"hover:text-purple-500";case"green":return"hover:text-green-500";default:return"hover:text-pr-text-1"}})()} transition-all duration-200 hover:scale-[1.05] active:scale-[0.95] px-2 py-1 rounded-md hover:bg-pr-surface-2 focus:outline-none focus:ring-2 focus:ring-gray-400/50`,"aria-label":`${r} (${t})`,children:[Ns.jsx(e,{className:"w-4 h-4","aria-hidden":"true"}),Ns.jsx("span",{className:"text-sm",children:t})]})}function Zu({content:e,onSocialAction:t,onShare:r,onComment:s}){return Ns.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 pt-4 border-t border-gray-100",children:[Ns.jsxs("div",{className:"flex items-center justify-center sm:justify-start space-x-1 flex-wrap",children:[void 0!==e.views_count&&Ns.jsxs("div",{className:"flex items-center space-x-1 text-pr-text-2 px-2 py-1 transition-all duration-200 hover:text-pr-text-1 hover:bg-pr-surface-2 rounded-md",children:[Ns.jsx(Ht,{className:"w-4 h-4"}),Ns.jsxs("span",{className:"text-sm",children:[(a=e.views_count,a>=1e6?(a/1e6).toFixed(1)+"M":a>=1e3?(a/1e3).toFixed(1)+"K":a.toString())," views"]})]}),Ns.jsxs("div",{className:"flex items-center space-x-1",children:[Ns.jsx(Ju,{icon:rr,count:e.likes_count||0,action:"like",onClick:()=>t?.("like",e.id),color:"red"}),Ns.jsx(Ju,{icon:wr,count:e.comments_count||0,action:"comment",onClick:()=>s?.(e),color:"blue"}),Ns.jsx(Ju,{icon:Lr,count:e.reposts_count||0,action:"repost",onClick:()=>t?.("repost",e.id),color:"purple"}),Ns.jsx(Ju,{icon:Kr,count:0,action:"share",onClick:()=>r?.(e),color:"green"})]})]}),e.engagement_shares_total>0&&Ns.jsxs("div",{className:"flex items-center justify-center sm:justify-end space-x-2 text-xs text-pr-text-2",role:"group","aria-label":"Engagement progress",children:[Ns.jsxs("div",{className:"flex items-center space-x-1",children:[Ns.jsx("div",{className:"w-20 h-2 bg-pr-surface-3 rounded-full overflow-hidden",role:"progressbar","aria-valuenow":e.engagement_shares_total-e.engagement_shares_remaining,"aria-valuemin":0,"aria-valuemax":e.engagement_shares_total,"aria-label":`${e.engagement_shares_remaining} free shares remaining out of ${e.engagement_shares_total} total`,children:Ns.jsx("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:(e.engagement_shares_total-e.engagement_shares_remaining)/e.engagement_shares_total*100+"%"}})}),Ns.jsxs("span",{className:"text-green-600 font-medium","aria-label":`${e.engagement_shares_remaining} free shares remaining`,children:[e.engagement_shares_remaining,"/",e.engagement_shares_total]})]}),Ns.jsx("span",{children:"free shares"})]})]});var a}function Qu({content:e,onBuyShares:t,onShare:r,onSocialAction:s,onExternalMove:a,onTip:n,currentUser:i,onEdit:l,onDelete:o,onComment:c,onNavigate:d,onPredict:u,isSponsored:m}){const p=()=>{d&&d(e)},h=e=>null==e||Number.isNaN(e)?"0":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString(),x=e.total_shares??0,f=e.available_shares??0,g=Math.max(x-f,0),b=e.engagement_shares_remaining??0,v="number"==typeof e.current_revenue?e.current_revenue:Number(e.current_revenue)||0,y=e.created_at?new Date(e.created_at):null,j=y&&!Number.isNaN(y.getTime())?y.toLocaleDateString():"Recently",w=e.creator_username?Zs(e.creator_username):e.creator_name?Zs(e.creator_name):null;return Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl shadow-sm border border-pr-border p-5 cursor-pointer hover:shadow-lg transition-all duration-200 hover:border-pr-surface-3 max-w-[720px] mx-auto w-full focus-within:outline focus-within:outline-2 focus-within:outline-primary/40 focus-within:ring-2 focus-within:ring-primary/20 "+(m||e.is_sponsored?"ring-2 ring-orange-200 ring-opacity-50":""),onClick:p,tabIndex:0,role:"article","aria-label":`Content by ${e.creator_name||e.creator_username||"Unknown Creator"}: ${e.title}`,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),p())},children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[e.is_demo&&Ns.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200 flex items-center space-x-1 transition-all duration-200 hover:bg-purple-200 hover:scale-[1.02]",children:[Ns.jsx(Yr,{className:"w-3 h-3"}),Ns.jsx("span",{children:"Demo"})]}),(m||e.is_sponsored)&&Ns.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-gradient-to-r from-orange-100 to-amber-100 text-orange-800 border border-orange-200 flex items-center space-x-1 transition-all duration-200 hover:bg-orange-200 hover:scale-[1.02]",children:[Ns.jsx(es,{className:"w-3 h-3"}),Ns.jsx("span",{children:"Sponsored"})]})]}),void 0!==e.views_count&&Ns.jsxs("div",{className:"flex items-center space-x-1 text-pr-text-2 transition-all duration-200 hover:text-pr-text-1 hover:bg-pr-surface-2 px-2 py-1 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-400/50",role:"text","aria-label":`${h(e.views_count)} views`,children:[Ns.jsx(Ht,{className:"w-4 h-4","aria-hidden":"true"}),Ns.jsxs("span",{className:"text-sm",children:[h(e.views_count)," views"]})]})]}),e.media_url&&Ns.jsx("div",{className:"mb-4 rounded-lg overflow-hidden bg-pr-surface-2 cursor-pointer",onClick:e=>{e.stopPropagation(),p()},children:Ns.jsx("img",{src:e.media_url,alt:e.title,className:"w-full h-48 object-cover hover:scale-105 transition-transform duration-200",onError:e=>{e.target.style.display="none"}})}),Ns.jsxs("div",{className:"mb-4",children:[Ns.jsx("button",{type:"button",className:"font-semibold text-left text-lg text-pr-text-1 mb-2 hover:text-orange-600 transition-colors leading-tight cursor-pointer focus:outline-none focus:text-orange-600",onClick:e=>{e.stopPropagation(),p()},children:e.title}),e.description&&Ns.jsx("p",{className:"text-pr-text-2 text-sm leading-relaxed line-clamp-2 mb-3",children:e.description}),Ns.jsxs("div",{className:"flex items-start justify-between mb-3",children:[Ns.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[w?Ns.jsx(Ze,{to:w,onClick:e=>e.stopPropagation(),className:"w-10 h-10 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center text-white font-semibold text-sm transition-all duration-200 hover:scale-[1.05] cursor-pointer focus:outline-none focus:ring-2 focus:ring-orange-400/50 focus:scale-[1.05]","aria-label":`Creator: ${e.creator_name||e.creator_username||"Unknown"}`,children:(e.creator_name||e.creator_username||"U")[0].toUpperCase()}):Ns.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center text-white font-semibold text-sm transition-all duration-200 hover:scale-[1.05] cursor-pointer focus:outline-none focus:ring-2 focus:ring-orange-400/50 focus:scale-[1.05]","aria-label":`Creator: ${e.creator_name||e.creator_username||"Unknown"}`,children:(e.creator_name||e.creator_username||"U")[0].toUpperCase()}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[w?Ns.jsx(Ze,{to:w,onClick:e=>e.stopPropagation(),className:"font-semibold text-pr-text-1 text-base hover:text-orange-600 transition-colors cursor-pointer focus:outline-none focus:text-orange-600","aria-label":`Creator name: ${e.creator_name||e.creator_username||"Unknown Creator"}`,children:e.creator_name||e.creator_username||"Unknown Creator"}):Ns.jsx("span",{className:"font-semibold text-pr-text-1 text-base",role:"text","aria-label":`Creator name: ${e.creator_name||e.creator_username||"Unknown Creator"}`,children:e.creator_name||e.creator_username||"Unknown Creator"}),Ns.jsx("span",{className:"text-gray-400",children:""}),Ns.jsx("span",{className:"text-sm text-pr-text-2",children:j}),e.platform&&Ns.jsxs(Ns.Fragment,{children:[Ns.jsx("span",{className:"text-gray-400",children:""}),Ns.jsx("span",{className:"text-sm text-pr-text-2 capitalize",children:e.platform})]})]}),Ns.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[Ns.jsxs("span",{className:"text-xs text-pr-text-2",children:[h(g)," shares owned"]}),Ns.jsx("span",{className:"text-xs text-gray-400",children:""}),Ns.jsxs("span",{className:"text-xs text-pr-text-2",children:[h(x)," total shares"]}),b>0&&Ns.jsxs(Ns.Fragment,{children:[Ns.jsx("span",{className:"text-xs text-gray-400",children:""}),Ns.jsxs("span",{className:"text-xs text-green-600 font-medium",children:[h(b)," free shares available"]})]})]})]})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsxs("div",{className:"flex items-center space-x-1 text-green-600 mb-1 transition-all duration-200 hover:text-green-700 hover:bg-green-50 px-2 py-1 rounded-md cursor-pointer focus:outline-none focus:ring-2 focus:ring-green-400/50",role:"text","aria-label":`Current revenue: $${v.toFixed(2)}`,children:[Ns.jsx(as,{className:"w-4 h-4"}),Ns.jsxs("span",{className:"text-sm font-semibold",children:["$",v.toFixed(2)]})]}),Ns.jsx("div",{className:"text-xs text-pr-text-2",children:"Current Revenue"})]})]}),e.platform_url&&Ns.jsx("div",{className:"p-3 bg-pr-surface-2 rounded-lg border border-pr-border transition-all duration-200 hover:bg-pr-surface-2 hover:border-pr-surface-3",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Kt,{className:"w-4 h-4 text-pr-text-2","aria-hidden":"true"}),Ns.jsxs("span",{className:"text-sm text-pr-text-2",children:["View on ",e.platform]})]}),Ns.jsx("a",{href:e.platform_url,target:"_blank",rel:"noopener noreferrer",className:"text-orange-600 hover:text-orange-800 text-sm font-medium transition-all duration-200 hover:bg-orange-50 px-2 py-1 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-400/50 focus:bg-orange-50",onClick:e=>e.stopPropagation(),"aria-label":`Open content on ${e.platform} (opens in new tab)`,children:"Open Link"})]})})]}),Ns.jsx(Zu,{content:e,onSocialAction:s,onShare:r,onComment:c}),Ns.jsx(Yu,{content:e,onBuyShares:t,onPredict:u,onTip:n,currentUser:i,onEdit:l,onDelete:o})]})}function Xu({drop:e,onApply:t}){const r=ke(),s=e.preview_image||e.content_url||`https://images.unsplash.com/photo-1503264116251-35a269479413?auto=format&fit=crop&w=1200&q=80&sat=-15&sig=${e.id}`;return Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl shadow-sm border border-pr-border p-5 cursor-pointer hover:shadow-lg transition-all duration-200 hover:border-pr-surface-3",onClick:()=>{r(Qs(String(e.id)))},children:[Ns.jsx("div",{className:"mb-4 -mx-5 -mt-5",children:Ns.jsx("div",{className:"h-40 w-full overflow-hidden rounded-t-xl",children:Ns.jsx("img",{src:s,alt:e.title,className:"h-full w-full object-cover transition-transform duration-300 hover:scale-105",onError:t=>{t.target.src=`https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=1200&q=80&sig=${e.id}`}})})}),Ns.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[Ns.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:(e.creator_name||"U")[0].toUpperCase()}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("span",{className:"font-semibold text-pr-text-1 text-base hover:text-purple-600 transition-colors",children:e.creator_name||"Unknown Creator"}),Ns.jsx("span",{className:"text-gray-400",children:""}),Ns.jsx("span",{className:"text-sm text-pr-text-2",children:new Date(e.created_at).toLocaleDateString()})]}),Ns.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[Ns.jsxs("span",{className:"text-xs text-pr-text-2",children:[e.current_participants," participants"]}),Ns.jsx("span",{className:"text-xs text-gray-400",children:""}),Ns.jsx("span",{className:"text-xs text-pr-text-2",children:e.platform||"Any platform"})]})]})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsxs("div",{className:"flex items-center space-x-1 text-purple-600 mb-1",children:[Ns.jsx(ht,{className:"w-4 h-4"}),Ns.jsxs("span",{className:"text-sm font-semibold",children:[e.gem_pool_remaining," gems"]})]}),Ns.jsx("div",{className:"text-xs text-pr-text-2",children:"Pool Remaining"})]})]}),Ns.jsxs("div",{className:"mb-4",onClick:e=>e.stopPropagation(),children:[Ns.jsx("h3",{className:"font-semibold text-lg text-pr-text-1 mb-2 hover:text-purple-600 transition-colors leading-tight",children:e.title}),e.description&&Ns.jsx("p",{className:"text-pr-text-2 text-sm leading-relaxed line-clamp-2",children:e.description})]}),Ns.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Ns.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${(e=>{switch((e||"").toLowerCase()){case"active":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"completed":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-pr-surface-2 text-pr-text-1 border-pr-surface-3"}})(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),Ns.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${(e=>{switch((e||"").toLowerCase()){case"easy":return"bg-green-100 text-green-800 border-green-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"hard":return"bg-red-100 text-red-800 border-red-200";default:return"bg-pr-surface-2 text-pr-text-1 border-pr-surface-3"}})(e.difficulty)}`,children:((e,t="Unknown")=>{const r=e&&e.trim().length>0?e:t;return r.charAt(0).toUpperCase()+r.slice(1)})(e.difficulty)}),e.is_proof_drop&&Ns.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:"Proof Drop"}),e.is_paid_drop&&Ns.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800 border border-emerald-200",children:"Paid Drop"})]}),Ns.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[Ns.jsxs("div",{className:"text-center p-3 bg-pr-surface-2 rounded-lg",children:[Ns.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[Ns.jsx(ts,{className:"w-4 h-4 text-orange-500"}),Ns.jsx("span",{className:"text-xs text-pr-text-2",children:"Cost"})]}),Ns.jsx("div",{className:"text-lg font-bold text-pr-text-1",children:e.key_cost}),Ns.jsx("div",{className:"text-xs text-pr-text-2",children:"keys"})]}),Ns.jsxs("div",{className:"text-center p-3 bg-pr-surface-2 rounded-lg",children:[Ns.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[Ns.jsx(Zr,{className:"w-4 h-4 text-yellow-500"}),Ns.jsx("span",{className:"text-xs text-pr-text-2",children:"Reward"})]}),Ns.jsx("div",{className:"text-lg font-bold text-purple-600",children:e.gem_reward_base}),Ns.jsx("div",{className:"text-xs text-pr-text-2",children:"gems"})]}),Ns.jsxs("div",{className:"text-center p-3 bg-pr-surface-2 rounded-lg",children:[Ns.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[Ns.jsx(as,{className:"w-4 h-4 text-green-500"}),Ns.jsx("span",{className:"text-xs text-pr-text-2",children:"ROI"})]}),Ns.jsxs("div",{className:"text-lg font-bold text-green-600",children:[0===e.key_cost?0:(e.gem_reward_base/e.key_cost).toFixed(1),"x"]}),Ns.jsx("div",{className:"text-xs text-pr-text-2",children:"per key"})]}),Ns.jsxs("div",{className:"text-center p-3 bg-pr-surface-2 rounded-lg",children:[Ns.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[Ns.jsx(us,{className:"w-4 h-4 text-blue-500"}),Ns.jsx("span",{className:"text-xs text-pr-text-2",children:"Participants"})]}),Ns.jsx("div",{className:"text-lg font-bold text-blue-600",children:e.current_participants}),Ns.jsx("div",{className:"text-xs text-pr-text-2",children:"joined"})]})]}),Ns.jsxs("div",{className:"flex items-center justify-between mb-4 text-sm text-pr-text-2",children:[Ns.jsxs("div",{className:"flex items-center space-x-1",children:[Ns.jsx(Rt,{className:"w-4 h-4"}),Ns.jsx("span",{children:e.deadline_at?(e=>{const t=new Date(e),r=new Date,s=t.getTime()-r.getTime(),a=Math.ceil(s/864e5);return a<0?`${Math.abs(a)} days overdue`:0===a?"Due today":1===a?"Due tomorrow":`${a} days left`})(e.deadline_at):"No deadline"})]}),e.requirements&&Ns.jsxs("div",{className:"text-xs",children:["Requirements: ",e.requirements.length>30?e.requirements.substring(0,30)+"...":e.requirements]})]}),Ns.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-pr-border",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 text-sm text-pr-text-2",children:[Ns.jsx(yt,{className:"w-4 h-4"}),Ns.jsxs("span",{children:["Created ",new Date(e.created_at).toLocaleDateString()]})]}),Ns.jsx("button",{onClick:r=>{r.stopPropagation(),t?.(e)},className:"px-6 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-2 "+("active"===e.status?.toLowerCase()?"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white hover:shadow-lg hover:-translate-y-0.5":"bg-pr-surface-2 text-pr-text-2 cursor-not-allowed"),disabled:"active"!==e.status?.toLowerCase(),children:"active"===e.status?.toLowerCase()?Ns.jsxs(Ns.Fragment,{children:[Ns.jsx("span",{children:"Apply Now"}),Ns.jsx(ts,{className:"w-4 h-4"})]}):Ns.jsxs(Ns.Fragment,{children:[Ns.jsx("span",{children:"Not Available"}),Ns.jsx(Rt,{className:"w-4 h-4"})]})})]})]})}$u(["social_media","content_creation","marketing","review","survey"]),$u(["easy","medium","hard"]);const em=new class{async listCoupons(e){const t=new URLSearchParams;e?.status&&t.append("status",e.status),e?.limit&&t.append("limit",e.limit.toString()),e?.offset&&t.append("offset",e.offset.toString());const r="/api/rewards/coupons"+(t.toString()?`?${t}`:""),s=await la(r);if(!s.ok)throw new Error("Failed to fetch coupons");return await s.json()}async getCoupon(e){const t=await la(`/api/rewards/coupons/${e}`);if(!t.ok)throw new Error("Failed to fetch coupon details");return await t.json()}async redeemCoupon(e){const t=await la(`/api/rewards/coupons/${e}/redeem`,{method:"POST"});if(!t.ok)throw new Error("Failed to redeem coupon");return await t.json()}async getStats(){const e=await la("/api/rewards/stats");if(!e.ok)throw new Error("Failed to fetch reward stats");return await e.json()}async getAvailableCoupons(){const{coupons:e}=await this.listCoupons({status:"available"});return e}async getRedeemedCoupons(){const{coupons:e}=await this.listCoupons({status:"redeemed"});return e}formatCouponValue(e){return"percentage"===e.value_unit?`${e.value}% off`:"usd"===e.value_unit?`$${e.value} off`:"gems"===e.value_unit?`${e.value} gems`:"keys"===e.value_unit?`${e.value} keys`:"item"===e.value_unit?e.title:`${e.value} ${e.value_unit}`}getCouponIcon(e){switch(e.reward_type){case"coupon":return"";case"giveaway":return"";case"credit":return"";default:return""}}getSourceDisplay(e){return{user_drop_completion:"Drop Completion",user_leaderboard:"Leaderboard Reward",user_content_engagement:"Content Engagement",campaign:"Campaign Reward",drop:"Drop Reward",leaderboard:"Leaderboard",content:"Content"}[e]||e}isExpiringSoon(e){const t=new Date(e.expires_at),r=new Date,s=Math.floor((t.getTime()-r.getTime())/864e5);return s<=7&&s>=0}getDaysUntilExpiry(e){const t=new Date(e.expires_at),r=new Date;return Math.floor((t.getTime()-r.getTime())/864e5)}};function tm({coupon:e,compact:t=!1}){const r=ke(),s=em.isExpiringSoon(e),a=em.getDaysUntilExpiry(e),n=()=>{switch(e.reward_type){case"coupon":default:return Ns.jsx(Xt,{className:"h-5 w-5"});case"giveaway":return Ns.jsx(Yr,{className:"h-5 w-5"});case"credit":return Ns.jsx(is,{className:"h-5 w-5"})}},i=()=>{switch(e.reward_type){case"coupon":default:return"from-purple-500 to-pink-500";case"giveaway":return"from-orange-500 to-red-500";case"credit":return"from-blue-500 to-cyan-500"}},l=()=>{r("/rewards")};return t?Ns.jsx("div",{onClick:l,className:"bg-pr-surface-card rounded-lg border border-pr-surface-3 p-4 hover:shadow-md transition-all cursor-pointer group",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[Ns.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-r ${i()} text-white`,children:n()}),Ns.jsxs("div",{className:"flex-1 min-w-0",children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1 truncate",children:e.title}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:em.formatCouponValue(e)})]})]}),Ns.jsx(mt,{className:"h-5 w-5 text-gray-400 group-hover:text-pr-text-2 transition-colors flex-shrink-0"})]})}):Ns.jsxs("div",{onClick:l,className:"bg-pr-surface-card rounded-xl shadow-sm border border-pr-surface-3 overflow-hidden hover:shadow-lg transition-all cursor-pointer group",children:[Ns.jsx("div",{className:`p-4 bg-gradient-to-r ${i()}`,children:Ns.jsxs("div",{className:"flex items-start justify-between text-white",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[n(),Ns.jsx("span",{className:"text-sm font-medium opacity-90",children:em.getSourceDisplay(e.source)})]}),!e.is_redeemed&&Ns.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-pr-surface-card/20 backdrop-blur-sm",children:"New"})]})}),Ns.jsxs("div",{className:"p-6 space-y-4",children:[Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-1",children:e.title}),e.description&&Ns.jsx("p",{className:"text-sm text-pr-text-2 line-clamp-2",children:e.description})]}),Ns.jsx("div",{className:"inline-flex items-center justify-center py-2 px-4 bg-gradient-to-r from-orange-50 to-pink-50 rounded-lg border border-orange-200",children:Ns.jsx("span",{className:"text-lg font-bold bg-gradient-to-r from-orange-600 to-pink-600 bg-clip-text text-transparent",children:em.formatCouponValue(e)})}),Ns.jsxs("div",{className:"space-y-2 text-sm text-pr-text-2",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(yt,{className:"h-4 w-4"}),Ns.jsxs("span",{children:["Earned ",new Date(e.earned_at).toLocaleDateString()]})]}),!e.is_redeemed&&Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Rt,{className:"h-4 w-4"}),Ns.jsx("span",{className:s?"text-orange-600 font-medium":"",children:a>0?`Expires in ${a} day${1!==a?"s":""}`:"Expires today"})]})]}),Ns.jsx("div",{className:"pt-2",children:Ns.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ns.jsx("span",{className:"text-pr-text-2",children:e.is_redeemed?"Already claimed":"Click to claim"}),Ns.jsx(mt,{className:"h-4 w-4 text-orange-500 group-hover:translate-x-1 transition-transform"})]})})]})]})}const rm=()=>Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-orange-100 to-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Ns.jsx(as,{className:"w-12 h-12 text-orange-500"})}),Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1 mb-2",children:"No personalized content yet"}),Ns.jsx("p",{className:"text-pr-text-2 mb-6 max-w-md mx-auto",children:"We're building your personalized feed based on your interests and activity. Check back soon or explore other content in the meantime!"}),Ns.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[Ns.jsxs("button",{onClick:()=>window.location.href="/create",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 mx-auto sm:mx-0",children:[Ns.jsx(Rr,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Create Content"})]}),Ns.jsxs("button",{onClick:()=>{window.location.reload()},className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center space-x-2 mx-auto sm:mx-0",children:[Ns.jsx($r,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Refresh Feed"})]})]})]});function sm({isOpen:e,onClose:t,forecast:r,onPredictionPlaced:s}){const[a,n]=u.useState("over"),[i,l]=u.useState(""),[o,c]=u.useState(!1),[d,m]=u.useState(""),[p,h]=u.useState({balance:0}),x=r??{};u.useEffect(()=>{e&&f()},[e]);const f=async()=>{try{const e=await Ms("/users/me/wallets"),t=Array.isArray(e)?e.find(e=>"usd"===e.currency_type?.toLowerCase()):void 0;h({balance:Number(t?.balance)||0})}catch(e){console.error("Failed to fetch wallet:",e)}},g="number"==typeof x.target_value?x.target_value:0,b="number"==typeof x.pool_size?x.pool_size:0,v="number"==typeof x.odds?x.odds:0,y="number"==typeof x.creator_initial_amount?x.creator_initial_amount:0,j=i?(parseFloat(i)*v).toFixed(2):"0",w=e=>"number"!=typeof e||Number.isNaN(e)?"":e.toLocaleString();return e?Ns.jsx(Us,{isOpen:e,onClose:t,maxWidth:"lg",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex max-h-[85vh] flex-col overflow-hidden",children:[Ns.jsx("div",{className:"border-b border-pr-surface-3 px-6 pt-6 pb-4",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("h2",{className:"flex items-center text-xl font-semibold text-pr-text-1",children:[Ns.jsx(as,{className:"mr-2 h-5 w-5 text-blue-600"}),"Make Your Prediction"]}),Ns.jsx("button",{onClick:t,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close place forecast modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]})}),Ns.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-6 pt-4",children:[Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-4 mb-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Ns.jsx("h3",{className:"font-medium text-pr-text-1",children:"Forecast Details"}),Ns.jsx("span",{className:"text-sm text-pr-text-2",children:x.platform||""})]}),x.content_title&&Ns.jsx("p",{className:"text-sm text-pr-text-1 mb-2",children:x.content_title}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-pr-text-2",children:"Metric"}),Ns.jsxs("p",{className:"font-medium flex items-center",children:[Ns.jsx(ts,{className:"w-4 h-4 mr-1 text-blue-600"}),`${x.forecast_type||""} ${w(g)}`.trim()]})]}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-pr-text-2",children:"Current Pool"}),Ns.jsxs("p",{className:"font-medium text-green-600",children:["$",b.toFixed(2)]})]}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-pr-text-2",children:"Odds"}),Ns.jsxs("p",{className:"font-medium text-blue-600",children:[v,"x payout"]})]}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-pr-text-2",children:"Time Left"}),Ns.jsxs("p",{className:"font-medium flex items-center",children:[Ns.jsx(Rt,{className:"w-4 h-4 mr-1 text-gray-400"}),x.expires_at?(e=>{const t=new Date,r=new Date(e).getTime()-t.getTime();if(r<=0)return"Expired";const s=Math.floor(r/36e5),a=Math.floor(r%36e5/6e4);if(s>24){return`${Math.floor(s/24)}d ${s%24}h`}return`${s}h ${a}m`})(x.expires_at):""]})]})]}),Ns.jsxs("div",{className:"mt-3 pt-3 border-t border-pr-surface-3",children:[Ns.jsx("p",{className:"text-xs text-pr-text-2 mb-1",children:"Creator's Prediction"}),Ns.jsxs("p",{className:"text-sm font-medium text-blue-600",children:[(x.creator_side||"").toUpperCase()||"","  $",y.toFixed(2)," staked"]})]})]}),Ns.jsxs("form",{onSubmit:async e=>{e.preventDefault(),c(!0),m("");try{await Ds(`/social-forecasts/${x.id}/predict`,{prediction_amount:parseFloat(i),prediction_side:a}),s(),t(),l(""),n("over")}catch(r){m(r?.message||r?.response?.error||"Failed to place prediction")}finally{c(!1)}},className:"space-y-6",children:[d&&Ns.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex items-center",children:[Ns.jsx(Pt,{className:"w-4 h-4 text-red-600 mr-2"}),Ns.jsx("p",{className:"text-red-600 text-sm",children:d})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-3",children:"Your Prediction"}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Ns.jsx("button",{type:"button",onClick:()=>n("over"),className:"p-4 rounded-lg border-2 transition-colors "+("over"===a?"border-green-500 bg-green-50 text-green-700":"border-pr-surface-3 bg-pr-surface-card text-pr-text-1 hover:border-green-300"),children:Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("p",{className:"font-semibold",children:"OVER"}),Ns.jsxs("p",{className:"text-xs mt-1",children:["Will exceed ",w(g)]})]})}),Ns.jsx("button",{type:"button",onClick:()=>n("under"),className:"p-4 rounded-lg border-2 transition-colors "+("under"===a?"border-red-500 bg-red-50 text-red-700":"border-pr-surface-3 bg-pr-surface-card text-pr-text-1 hover:border-red-300"),children:Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("p",{className:"font-semibold",children:"UNDER"}),Ns.jsxs("p",{className:"text-xs mt-1",children:["Will not reach ",w(g)]})]})})]})]}),Ns.jsxs("div",{children:[Ns.jsxs("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:[Ns.jsx(Bt,{className:"w-4 h-4 inline mr-1"}),"Prediction Amount (USD)"]}),Ns.jsx("input",{type:"number",step:"0.01",placeholder:"Enter amount",value:i,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:"1",max:p.balance}),Ns.jsxs("div",{className:"flex justify-between text-sm text-pr-text-2 mt-1",children:[Ns.jsxs("span",{children:["Available: $",p.balance.toFixed(2)]}),Ns.jsx("span",{children:"Min: $1.00"})]})]}),Ns.jsx("div",{className:"grid grid-cols-4 gap-2",children:[5,10,25,50].map(e=>Ns.jsxs("button",{type:"button",onClick:()=>l(e.toString()),disabled:e>p.balance,className:"py-2 px-3 text-sm border border-pr-surface-3 rounded-lg hover:bg-pr-surface-2 disabled:opacity-50 disabled:cursor-not-allowed",children:["$",e]},e))}),i&&Ns.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[Ns.jsx("h4",{className:"font-medium text-pr-text-1 mb-2",children:"Prediction Summary"}),Ns.jsxs("div",{className:"space-y-2 text-sm",children:[Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Your prediction:"}),Ns.jsx("span",{className:"font-medium text-blue-600",children:a.toUpperCase()})]}),Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Amount staked:"}),Ns.jsxs("span",{className:"font-medium",children:["$",i]})]}),Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Potential payout:"}),Ns.jsxs("span",{className:"font-medium text-green-600",children:["$",j]})]}),Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Potential profit:"}),Ns.jsxs("span",{className:"font-medium text-green-600",children:["$",(parseFloat(j)-parseFloat(i)).toFixed(2)]})]})]})]}),Ns.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-pr-surface-3",children:[Ns.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-pr-text-1 bg-pr-surface-2 rounded-lg hover:bg-pr-surface-3 transition-colors",children:"Cancel"}),Ns.jsx("button",{type:"submit",disabled:o||!i||parseFloat(i)>p.balance,className:`px-6 py-2 rounded-lg font-medium transition-colors ${"over"===a?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"} disabled:opacity-50 disabled:cursor-not-allowed`,children:o?"Placing...":`Predict ${a.toUpperCase()} $${i||"0"}`})]})]})]})]})}):null}function am({content:e,isOpen:t,onClose:r,onTip:s}){const[a,n]=u.useState(1),[i,l]=u.useState(!1),o=e.creator_username||"this creator",c=o[0]?.toUpperCase()||"U";return t?Ns.jsx(Us,{isOpen:t,onClose:r,maxWidth:"md",showCloseButton:!1,children:Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-purple-400 to-pink-500 text-sm font-semibold text-white",children:c}),Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"Tip Creator"}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:["Support ",o]})]})]}),Ns.jsx("button",{onClick:r,className:"text-gray-400 transition-colors hover:text-pr-text-2",children:Ns.jsx(hs,{className:"h-6 w-6"})})]}),Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"mb-2 font-semibold text-pr-text-1",children:"Select Tip Amount"}),Ns.jsx("p",{className:"mb-4 text-sm text-pr-text-2",children:"Choose how many gems you'd like to tip"}),Ns.jsx("div",{className:"mb-4 grid grid-cols-3 gap-2",children:[1,5,10,25,50,100].map(e=>Ns.jsx("button",{onClick:()=>n(e),className:"rounded-lg py-2 px-3 text-sm font-medium transition-all duration-200 "+(a===e?"bg-purple-500 text-white ring-2 ring-purple-200":"bg-pr-surface-2 text-pr-text-1 hover:bg-pr-surface-3"),children:Ns.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[Ns.jsx($t,{className:"h-4 w-4"}),Ns.jsx("span",{children:e})]})},e))}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("div",{className:"flex-1",children:Ns.jsx("input",{type:"number",min:"1",max:"1000",value:a,onChange:e=>n(Math.max(1,parseInt(e.target.value,10)||1)),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2 focus:border-purple-500 focus:ring-2 focus:ring-purple-500",placeholder:"Custom amount"})}),Ns.jsxs("div",{className:"flex items-center space-x-1 text-pr-text-2",children:[Ns.jsx($t,{className:"h-4 w-4"}),Ns.jsx("span",{className:"text-sm",children:"gems"})]})]})]}),Ns.jsx("div",{className:"rounded-lg bg-pr-surface-2 p-4",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"You're tipping"}),Ns.jsxs("p",{className:"text-lg font-semibold text-pr-text-1",children:[Ns.jsx($t,{className:"mr-1 inline h-5 w-5 text-purple-500"}),a," gems"]})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Creator receives"}),Ns.jsxs("p",{className:"text-sm font-medium text-pr-text-1",children:["$",(.01*a).toFixed(2)]})]})]})}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsx("button",{onClick:r,className:"flex-1 rounded-lg border border-pr-surface-3 py-2 px-4 font-medium text-pr-text-1 transition-colors hover:bg-pr-surface-2",children:"Cancel"}),Ns.jsx("button",{onClick:async()=>{if(!(a<1)){l(!0);try{await s(e,a),r(),n(1)}catch(t){console.error("Failed to send tip:",t)}finally{l(!1)}}},disabled:i||a<1,className:"flex-1 rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 py-2 px-4 font-medium text-white transition-all duration-200 hover:from-purple-600 hover:to-pink-600 disabled:cursor-not-allowed disabled:opacity-50",children:i?Ns.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[Ns.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),Ns.jsx("span",{children:"Sending..."})]}):Ns.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[Ns.jsx(Xt,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Send Tip"})]})})]})]})]})}):null}function nm(){const{user:e,signOut:t}=Ls(),r=ke(),[s,a]=u.useState([]),[n,i]=u.useState([]),[l,o]=u.useState([]),[c,d]=u.useState([]),[m,p]=u.useState(null),[,h]=u.useState(!0),[x,f]=u.useState("for-you"),[g,b]=u.useState([]),[v,y]=u.useState(!1),[j,w]=u.useState(!1),[N]=u.useState(!1),[_,k]=u.useState(null),[S,C]=u.useState(null),[O,E]=u.useState(null),[P,T]=u.useState(!1),[A,M]=u.useState(null),[D,I]=u.useState(!1),[R,$]=u.useState(null),[L,F]=u.useState(!1),[z,U]=u.useState(null),[B,q]=u.useState(!1),[W,K]=u.useState(!1),[V,H]=u.useState(null),[G,Y]=u.useState(!1),[J,Z]=u.useState(null),Q=m?.username||(m?.email?m.email.split("@")[0]:void 0)||(e?.username?String(e.username):void 0)||(e?.email?e.email.split("@")[0]:void 0)||"me";Zs(Q),u.useEffect(()=>{ee(),te()},[]),u.useEffect(()=>{Gc("growth_feed_view",{source:"home_feed"},{userId:e?.id||m?.id})},[]);const X=t=>{Gc("growth_content_open",{contentId:t.id,source:x},{userId:e?.id||m?.id}),r(`/content/${t.id}`)},ee=async()=>{try{const[e,t,r,s,n]=await Promise.all([Ms("/content"),Ms("/drops?limit=10"),Ms("/users/me/wallets"),Ms("/content/sponsored"),em.getAvailableCoupons().catch(()=>[])]);console.log(" Feed data received:",{content:Array.isArray(e)?e.length:"not array",drops:Array.isArray(t)?t.length:"not array",wallets:Array.isArray(r)?r.length:"not array",sponsored:Array.isArray(s)?s.length:"not array",coupons:Array.isArray(n)?n.length:"not array"}),console.log(" Drops data type:",typeof t,"isArray:",Array.isArray(t)),console.log(" Drops data structure:",JSON.stringify(t).substring(0,200)),a(Array.isArray(e)?e:[]),i(Array.isArray(t)?t.slice(0,5):[]),d(Array.isArray(r)?r:[]),b(Array.isArray(s)?s:[]),o(Array.isArray(n)?n:[])}catch(e){console.error("Failed to fetch feeds:",e),a([]),i([]),d([]),b([]),o([])}finally{h(!1)}},te=async()=>{try{const e=await Ms("/users/me");console.log(" /users/me raw response:",e);const t=e?.user||e?.data?.user||e;t?(console.log(" Normalized user payload for dashboard:",{id:t.id,points:t.points_balance,keys:t.keys_balance,gems:t.gems_balance,masterKeyActivated:t.master_key_activated_at}),p(t)):console.warn(" No user object resolved from /users/me response")}catch(e){e instanceof Error&&"status"in e&&401===e.status&&(await t(),r("/auth?expired=1")),console.error("Failed to fetch user data:",e)}},re=async(e,t)=>{try{const r=await Ds("/users/social-action",{action_type:e,reference_id:t,reference_type:"content"});r&&(se(r),te())}catch(r){console.error(`Failed to record ${e} action:`,r)}},se=e=>{const t=document.createElement("div");t.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-pulse",t.innerHTML=`\n      <div class="flex items-center space-x-2">\n        <span>+${e.points_earned} points!</span>\n        <span class="text-xs">(${e.multiplier.toFixed(1)}x multiplier)</span>\n      </div>\n    `,document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},3e3)},ae=e=>{k(e),y(!0)},ne=e=>{U({id:e.id,title:e.title}),F(!0)},ie=e=>{H(e),K(!0)},le=e=>{M(e),T(!0)},oe=e=>{Z(e),Y(!0)},ce=e=>{$(e),I(!0)},de=()=>{const e=[];console.log(" Building For You feed:",{contentFeed:s.length,dropFeed:n.length,sponsoredContent:g.length,coupons:l.length}),g.forEach(t=>{e.push({type:"content",data:t,isSponsored:!0})});const t=s.filter(e=>!g.some(t=>t.id===e.id));let r=0,a=0,i=0,o=0;for(;r<t.length||a<n.length||i<l.length;)r<t.length&&(e.push({type:"content",data:t[r]}),r++,o++),r<t.length&&(e.push({type:"content",data:t[r]}),r++,o++),a<n.length&&(e.push({type:"drop",data:n[a]}),a++,o++),o>=5&&i<l.length&&(e.push({type:"coupon",data:l[i]}),i++,o=0);return console.log(" Mixed feed generated:",e.length,"items"),e.slice(0,20)},ue=m?m.master_key_activated_at?0===m.points_streak_days?{text:"Start Your Streak",subtext:"Engage with content today to begin earning streaks",action:()=>f("social"),color:"from-blue-500 to-purple-500",icon:Ns.jsx(Jt,{className:"w-5 h-5"})}:m.gems_balance<10?{text:"Get More Gems",subtext:"Purchase gems to access paid drops and predictions",route:"/invest/portfolio",color:"from-purple-500 to-pink-500",icon:Ns.jsx(Ut,{className:"w-5 h-5"})}:{text:"Explore Growth Hub",subtext:"Stake gems, fund projects, and secure your earnings",route:"/growth-hub",color:"from-green-500 to-emerald-500",icon:Ns.jsx(as,{className:"w-5 h-5"})}:{text:"Activate Master Key",subtext:"Complete a Proof Drop to unlock premium features",route:"/earn?type=proof",color:"from-orange-500 to-red-500",icon:Ns.jsx(ts,{className:"w-5 h-5"})}:null;return Ns.jsxs("div",{className:"bg-pr-surface-2",children:[Ns.jsx("div",{className:"max-w-4xl mx-auto space-y-6 px-0 sm:px-0",children:Ns.jsxs("div",{className:"bg-gradient-to-br from-orange-500 via-red-500 to-pink-500 rounded-2xl p-6 text-white relative overflow-hidden shadow-lg",children:[Ns.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='white' fill-opacity='0.1'%3E%3Cpath d='M30 30c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/svg%3E\")"}}),Ns.jsxs("div",{className:"relative z-10",children:[Ns.jsxs("div",{className:"flex items-start justify-between mb-6",children:[Ns.jsxs("div",{children:[Ns.jsxs("h1",{className:"text-3xl font-bold mb-2 leading-tight",children:["Welcome back, ",e?.google_user_data?.given_name||"Creator","! "]}),Ns.jsx("p",{className:"text-orange-100 text-base",children:"Ready to turn your influence into income?"})]}),m&&Ns.jsxs("div",{className:"text-right",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 justify-end mb-1",children:[(e=>{switch(e){case"super":return Ns.jsx(zt,{className:"w-4 h-4 text-yellow-600"});case"premium":return Ns.jsx(Zr,{className:"w-4 h-4 text-purple-600"});default:return Ns.jsx(fs,{className:"w-4 h-4 text-pr-text-2"})}})(m.user_tier),Ns.jsx("span",{className:"text-base font-semibold capitalize",children:m.user_tier})]}),Ns.jsxs("div",{className:"text-sm text-orange-200",children:[(e=>{switch(e){case"super":return 2;case"premium":return 1.5;default:return 1}})(m.user_tier),"x multiplier"]}),m.points_streak_days>0&&Ns.jsxs("div",{className:"flex items-center justify-end space-x-1 mt-1",children:[Ns.jsx(Jt,{className:"w-4 h-4 text-orange-300"}),Ns.jsxs("span",{className:"text-sm text-orange-200",children:[m.points_streak_days," day streak"]})]})]})]}),m&&Ns.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[{value:(m.points_balance||0).toLocaleString(),label:"Points",icon:Ns.jsx($t,{className:"w-5 h-5"}),color:"text-blue-200"},{value:m.keys_balance||0,label:"Keys",icon:Ns.jsx(ts,{className:"w-5 h-5"}),color:"text-orange-200"},{value:(m.gems_balance||0).toFixed(1),label:"Gems",icon:Ns.jsx(Ut,{className:"w-5 h-5"}),color:"text-purple-200"},{value:"View",label:"Saved",icon:Ns.jsx(ft,{className:"w-5 h-5"}),color:"text-green-200",action:()=>{q(!0)}}].map((e,t)=>Ns.jsxs("div",{className:"bg-pr-surface-card/10 backdrop-blur-sm rounded-xl p-4 text-center hover:bg-pr-surface-card/20 transition-all duration-200 cursor-pointer hover:-translate-y-1 "+(e.action?"cursor-pointer":""),onClick:e.action||void 0,children:[Ns.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[Ns.jsx("span",{className:e.color,children:e.icon}),Ns.jsx("span",{className:"text-sm text-white/90 font-medium",children:e.label})]}),Ns.jsx("p",{className:"text-xl font-bold text-white",children:e.value})]},t))}),ue&&Ns.jsx("button",{onClick:()=>{ue&&(ue.route?r(ue.route,ue.options):ue.action&&ue.action())},className:`w-full bg-gradient-to-r ${ue.color} hover:shadow-xl text-white rounded-xl p-5 transition-all duration-200 hover:-translate-y-1 hover:scale-[1.02]`,children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"text-left",children:[Ns.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[ue.icon,Ns.jsx("span",{className:"font-semibold text-lg",children:ue.text})]}),Ns.jsx("p",{className:"text-white/90 text-base",children:ue.subtext})]}),Ns.jsx(mt,{className:"w-6 h-6 opacity-75"})]})})]})]})}),Ns.jsxs("div",{className:"bg-pr-surface-card shadow-sm border-t border-b border-pr-surface-3 overflow-hidden max-w-full rounded-none sm:rounded-xl sm:border sm:border-pr-surface-3",children:[Ns.jsx("div",{className:"border-b border-pr-surface-3 overflow-x-auto no-scrollbar",children:Ns.jsx("nav",{className:"flex min-w-max",children:[{key:"for-you",label:"For You",icon:Ns.jsx(Zr,{className:"w-5 h-5"})},{key:"social",label:"Social Feed",icon:Ns.jsx(ct,{className:"w-5 h-5"})},{key:"drops",label:"Opportunities",icon:Ns.jsx(Bt,{className:"w-5 h-5"})},{key:"rewards",label:"Rewards",icon:Ns.jsx(Xt,{className:"w-5 h-5"})}].map(t=>Ns.jsxs("button",{onClick:()=>(t=>{f(t),Gc("growth_tab_selected",{tab:t},{userId:e?.id||m?.id})})(t.key),className:"flex-1 flex items-center justify-center space-x-2 py-4 px-6 font-medium text-base transition-all duration-200 "+(x===t.key?"border-b-2 border-orange-500 text-orange-600 bg-orange-50 shadow-sm":"text-pr-text-2 hover:text-pr-text-1 hover:bg-pr-surface-2"),children:[t.icon,Ns.jsx("span",{children:t.label})]},t.key))})}),Ns.jsxs("div",{className:"px-0 pt-4 pb-6 sm:p-6",children:["for-you"===x&&Ns.jsx("div",{className:"space-y-6",children:de().length>0?Ns.jsxs(Ns.Fragment,{children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[Ns.jsx(Jt,{className:"w-5 h-5 text-orange-500"}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Trending opportunities for you"})]}),de().map((e,t)=>Ns.jsx("div",{children:"content"===e.type?Ns.jsx(Qu,{content:e.data,onBuyShares:ae,onShare:ne,onSocialAction:re,onTip:ie,onNavigate:X,onPredict:oe,currentUser:m,onEdit:le,onDelete:ce,isSponsored:e.isSponsored}):"drop"===e.type?Ns.jsx(Xu,{drop:e.data}):"coupon"===e.type?Ns.jsx(tm,{coupon:e.data}):null},t))]}):Ns.jsx(rm,{})}),"social"===x&&Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between bg-blue-50 border border-blue-200 rounded-lg p-3",children:[Ns.jsxs("div",{className:"text-sm text-blue-700",children:["Showing ",s.length," content pieces"]}),Ns.jsx("button",{onClick:ee,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Refresh Feed"})]}),s.length>0?[...g.map(e=>Ns.jsx(Qu,{content:e,onBuyShares:ae,onShare:ne,onSocialAction:re,onTip:ie,onNavigate:X,onPredict:oe,currentUser:m,onEdit:le,onDelete:ce,isSponsored:!0},`sponsored-${e.id}`)),...s.filter(e=>!g.some(t=>t.id===e.id)).map(e=>Ns.jsx(Qu,{content:e,onBuyShares:ae,onShare:ne,onSocialAction:re,onTip:ie,onNavigate:X,onPredict:oe,currentUser:m,onEdit:le,onDelete:ce},e.id))]:Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx("div",{className:"w-24 h-24 bg-pr-surface-2 rounded-full flex items-center justify-center mx-auto mb-4",children:Ns.jsx(as,{className:"w-12 h-12 text-gray-400"})}),Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1 mb-2",children:"No content yet"}),Ns.jsx("p",{className:"text-pr-text-2 mb-4",children:"Be the first to create and share content!"}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsxs("button",{onClick:()=>window.location.href="/create",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 mx-auto",children:[Ns.jsx(Plus,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Create Content"})]}),Ns.jsx("button",{onClick:ee,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Check for new content"})]})]})]}),"drops"===x&&Ns.jsx("div",{className:"space-y-4",children:n.length>0?n.map(e=>Ns.jsx(Xu,{drop:e},e.id)):Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx("div",{className:"w-24 h-24 bg-pr-surface-2 rounded-full flex items-center justify-center mx-auto mb-4",children:Ns.jsx(Bt,{className:"w-12 h-12 text-gray-400"})}),Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1 mb-2",children:"No opportunities available"}),Ns.jsx("p",{className:"text-pr-text-2 mb-4",children:"Check back later for new earning opportunities!"}),Ns.jsx("button",{onClick:()=>window.location.href="/earn",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200",children:"Browse All Opportunities"})]})}),"rewards"===x&&Ns.jsx("div",{className:"space-y-4",children:l.length>0?Ns.jsxs(Ns.Fragment,{children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Xt,{className:"w-5 h-5 text-purple-500"}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Your Available Rewards"})]}),Ns.jsx("button",{onClick:()=>r("/rewards"),className:"text-sm text-purple-600 hover:text-purple-700 font-medium",children:"View All "})]}),Ns.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:l.slice(0,6).map(e=>Ns.jsx(tm,{coupon:e,compact:!0},e.assignment_id))})]}):Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-100 to-pink-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Ns.jsx(Xt,{className:"w-12 h-12 text-purple-500"})}),Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1 mb-2",children:"No rewards yet"}),Ns.jsx("p",{className:"text-pr-text-2 mb-4",children:"Complete drops, engage with content, or climb the leaderboard to earn rewards!"}),Ns.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[Ns.jsx("button",{onClick:()=>r("/earn"),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200",children:"Browse Opportunities"}),Ns.jsx("button",{onClick:()=>r("/leaderboard"),className:"bg-pr-surface-card border border-purple-300 text-purple-600 hover:bg-purple-50 px-6 py-3 rounded-lg font-medium transition-all duration-200",children:"View Leaderboard"})]})]})})]})]}),_&&Ns.jsx($c,{content:_,wallet:c?.find(e=>"USD"===e.currency_type),isOpen:v,onClose:()=>{y(!1),k(null)},onPurchase:async(e,t)=>{try{await Ds("/content/buy-shares",{content_id:e.id,shares_count:t}),await ee()}catch(r){throw console.error("Failed to buy shares:",r),r}}}),Ns.jsx(Yc,{user:m,contentId:S?.id,contentTitle:S?.title,isOpen:j,onClose:()=>{w(!1),C(null)},onSuccess:()=>{te(),ee()}}),Ns.jsx(Jc,{user:m,contentId:O?.id,contentTitle:O?.title,contentPlatform:O?.platform,contentUrl:O?.url,isOpen:N,onClose:()=>{setExternalMoveModalOpen(!1),E(null)},onSuccess:()=>{te(),ee()}}),A&&Ns.jsx(Bu,{isOpen:P,onClose:()=>{T(!1),M(null)},onSuccess:handleEditSuccess,content:A}),Ns.jsx(qu,{isOpen:D,onClose:()=>{I(!1),$(null)},onConfirm:async()=>{if(R)try{await Is(`/content/${R.id}`),a(e=>e.filter(e=>e.id!==R.id)),I(!1),$(null)}catch(e){console.error("Error deleting content:",e),alert("Failed to delete content")}},title:"Delete Content",message:`Are you sure you want to delete "${R?.title}"? This action cannot be undone and will remove all associated data.`,confirmText:"Delete",cancelText:"Cancel",type:"danger"}),z&&Ns.jsx(Wu,{isOpen:L,onClose:()=>{F(!1),U(null)},contentId:z.id,contentTitle:z.title}),Ns.jsx(Ku,{isOpen:B,onClose:()=>q(!1),user:m}),V&&Ns.jsx(am,{content:V,isOpen:W,onClose:()=>{K(!1),H(null)},onTip:async(e,t)=>{try{await Ds("/content/tip",{content_id:e.id,tip_amount:t});const r=document.createElement("div");r.className="fixed top-4 right-4 bg-purple-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-bounce",r.innerHTML=`\n        <div class="flex items-center space-x-2">\n          <span class="text-lg"></span>\n          <div>\n            <div class="font-semibold">Tip sent!</div>\n            <div class="text-xs opacity-90">Tipped ${t} gems to ${e.creator_name||e.creator_username||"creator"}</div>\n          </div>\n        </div>\n      `,document.body.appendChild(r),setTimeout(()=>{document.body.contains(r)&&document.body.removeChild(r)},4e3),te()}catch(r){throw console.error("Failed to send tip:",r),r}}}),J&&Ns.jsx(sm,{forecast:{id:J.id,creator_name:J.creator_name||J.creator_username||"Unknown",platform:J.platform||"Unknown",content_url:J.platform_url||"",content_title:J.title,forecast_type:"engagement",target_value:1e3,current_value:500,odds:2.5,pool_size:250,creator_initial_amount:100,creator_side:"over",expires_at:new Date(Date.now()+6048e5).toISOString()},isOpen:G,onClose:()=>{Y(!1),Z(null)},onPredictionPlaced:()=>{Y(!1),Z(null),ee()}})]})}const im=["content_clipping","reviews","ugc_creation","affiliate_referral","paid_content","action_required"],lm=["easy","medium","hard"];function om(){const{user:e}=Ls(),t=Ne(),[r,s]=u.useState([]),[a,n]=u.useState(null),[i,l]=u.useState(!0),[o,c]=u.useState(!1),[d,m]=u.useState(""),[p,h]=u.useState(""),[x,f]=u.useState("");u.useEffect(()=>{b(),e&&g()},[e]),u.useEffect(()=>{const e=new URLSearchParams(t.search).get("create");"proof"!==e&&"paid"!==e||!a||"advertiser"!==a.user_type||c(!0)},[t,a]);const g=async()=>{try{const e=await Ms("/users/me");n(e)}catch(e){console.error("Failed to fetch user data:",e)}},b=async()=>{try{const e=await Ms("/drops");console.log(" Earn page - Drops data type:",typeof e,"isArray:",Array.isArray(e)),console.log(" Earn page - Drops data:",e),console.log(" Earn page - Drops count:",Array.isArray(e)?e.length:"not array"),s(Array.isArray(e)?e:[])}catch(e){console.error("Failed to fetch drops:",e),s([])}finally{l(!1)}},v=r.filter(e=>{const t=e.title||"",r=e.description||"",s=e.drop_type||"",a=e.difficulty||"";return(t.toLowerCase().includes(d.toLowerCase())||r.toLowerCase().includes(d.toLowerCase()))&&(!p||s===p)&&(!x||a===x)});return i?Ns.jsx("div",{className:"flex items-center justify-center h-64",children:Ns.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("h1",{className:"text-3xl font-bold text-pr-text-1",children:"Earn"}),Ns.jsx("p",{className:"text-pr-text-2 mt-2",children:"Discover earning drops that match your skills"})]}),a&&"advertiser"===a.user_type&&Ns.jsxs("button",{onClick:()=>c(!0),className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200 shadow-lg",children:[Ns.jsx(Rr,{className:"w-5 h-5"}),Ns.jsx("span",{children:"Create Drop"})]})]}),Ns.jsx("div",{className:"bg-pr-surface-card rounded-xl p-6 shadow-sm border border-pr-surface-3",children:Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ns.jsxs("div",{className:"relative",children:[Ns.jsx(Br,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"}),Ns.jsx("input",{type:"text",placeholder:"Search drops...",value:d,onChange:e=>m(e.target.value),className:"w-full pl-11 pr-4 py-2 bg-pr-surface-1 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-pr-text-1 placeholder:text-gray-400"})]}),Ns.jsxs("select",{value:p,onChange:e=>h(e.target.value),className:"px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[Ns.jsx("option",{value:"",children:"All Drop Types"}),im.map(e=>Ns.jsx("option",{value:e,children:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},e))]}),Ns.jsxs("select",{value:x,onChange:e=>f(e.target.value),className:"px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[Ns.jsx("option",{value:"",children:"All Difficulties"}),lm.map(e=>Ns.jsx("option",{value:e,className:"capitalize",children:e},e))]}),Ns.jsxs("button",{className:"flex items-center justify-center space-x-2 px-4 py-2 border border-pr-surface-3 rounded-lg hover:bg-pr-surface-2 transition-colors",children:[Ns.jsx(Zt,{className:"w-5 h-5 text-pr-text-2"}),Ns.jsx("span",{children:"More Filters"})]})]})}),Ns.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(e=>Ns.jsx(dm,{drop:e},e.id))}),0===v.length&&Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx("div",{className:"w-24 h-24 bg-pr-surface-2 rounded-full flex items-center justify-center mx-auto mb-4",children:Ns.jsx(Br,{className:"w-12 h-12 text-gray-400"})}),Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1 mb-2",children:"No drops found"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Try adjusting your search criteria or create a new drop."})]}),o&&a&&"advertiser"===a.user_type&&Ns.jsx(um,{onClose:()=>c(!1),onSuccess:()=>{c(!1),b()}})]})}const cm=(e,t="General")=>(e&&e.trim().length>0?e:t).replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase());function dm({drop:e}){const t=ke(),r=()=>{t(Qs(String(e.id)))},s=e.title?.toLowerCase().includes("[demo]")||e.title?.toLowerCase().includes("demo")||e.description?.toLowerCase().includes("demo"),a=e=>{switch((e||"").toLowerCase()){case"easy":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"hard":return"text-red-600 bg-red-100";default:return"text-pr-text-2 bg-pr-surface-2"}};return Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-shadow",children:[s&&Ns.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white px-4 py-2 text-center",children:Ns.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm font-medium",children:[Ns.jsx("span",{children:""}),Ns.jsx("span",{children:"DEMO DROP - No real gems awarded"}),Ns.jsx("span",{children:""})]})}),Ns.jsxs("div",{className:"relative cursor-pointer",onClick:r,children:[Ns.jsx("img",{src:(t=>{if(e?.content_url)return e.content_url;switch((t||"").toLowerCase()){case"content_clipping":return"https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=400&h=250&fit=crop";case"reviews":return"https://images.unsplash.com/photo-1556155092-490a1ba16284?w=400&h=250&fit=crop";case"ugc_creation":return"https://images.unsplash.com/photo-1558403194-611308249627?w=400&h=250&fit=crop";case"affiliate_referral":return"https://images.unsplash.com/photo-1516251193007-45ef944ab0c6?w=400&h=250&fit=crop";case"surveys":return"https://images.unsplash.com/photo-1432888622747-4eb9a8efeb07?w=400&h=250&fit=crop";default:return"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=400&h=250&fit=crop"}})(e.drop_type),alt:e.title,className:"w-full h-48 object-cover hover:opacity-95 transition-opacity"}),Ns.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20"}),Ns.jsxs("div",{className:"absolute top-4 right-4 flex space-x-2",children:[s&&Ns.jsx("span",{className:"bg-orange-500/90 backdrop-blur-sm text-white px-2 py-1 rounded-full text-xs font-medium",children:"DEMO"}),Ns.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${a(e.difficulty)}`,children:e.difficulty})]}),Ns.jsx("div",{className:"absolute top-4 left-4",children:e.is_proof_drop?Ns.jsx("div",{className:"bg-green-500/90 backdrop-blur-sm px-2 py-1 rounded-full",children:Ns.jsx("span",{className:"text-white text-sm font-medium",children:"Proof Drop"})}):e.is_paid_drop?Ns.jsx("div",{className:"bg-purple-500/90 backdrop-blur-sm px-2 py-1 rounded-full",children:Ns.jsx("span",{className:"text-white text-sm font-medium",children:"Paid Drop"})}):Ns.jsxs("div",{className:"flex items-center space-x-1 bg-orange-500/90 backdrop-blur-sm px-2 py-1 rounded-full",children:[Ns.jsx(lr,{className:"w-3 h-3 text-white"}),Ns.jsx("span",{className:"text-white text-sm font-medium",children:e.key_cost})]})}),Ns.jsxs("div",{className:"absolute bottom-4 left-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Ut,{className:"w-6 h-6 text-purple-300 drop-shadow"}),Ns.jsxs("p",{className:"text-3xl font-bold text-white drop-shadow-lg",children:[e.gem_reward_base,s&&Ns.jsx("span",{className:"text-lg opacity-80",children:" (Demo)"})]})]}),Ns.jsx("p",{className:"text-sm text-white/80 drop-shadow",children:s?"Demo gems (no real value)":"Gems reward"})]})]}),Ns.jsxs("div",{className:"p-6",children:[Ns.jsx("div",{className:"flex items-start justify-between mb-3",children:Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("span",{className:"text-xl",children:(e=>{switch(e||""){case"content_clipping":return"";case"reviews":return"";case"ugc_creation":return"";case"affiliate_referral":return"";case"surveys":return"";case"challenges_events":return"";default:return""}})(e.drop_type)}),e.is_proof_drop?Ns.jsx("div",{className:"flex items-center space-x-1 text-sm bg-green-100 px-2 py-1 rounded",children:Ns.jsx("span",{className:"font-medium text-green-700",children:"Proof Drop - Free"})}):e.is_paid_drop?Ns.jsx("div",{className:"flex items-center space-x-1 text-sm bg-purple-100 px-2 py-1 rounded",children:Ns.jsx("span",{className:"font-medium text-purple-700",children:"Paid Drop"})}):Ns.jsxs("div",{className:"flex items-center space-x-1 text-sm",children:[Ns.jsx(lr,{className:"w-3 h-3 text-orange-600"}),Ns.jsxs("span",{className:"font-medium text-orange-700",children:[e.key_cost," keys"]})]})]})}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-2 cursor-pointer hover:text-orange-600 transition-colors",onClick:r,children:e.title}),Ns.jsx("p",{className:"text-pr-text-2 text-sm mb-4 line-clamp-3",children:e.description||"No description available."}),Ns.jsx("div",{className:"mb-4",children:Ns.jsx(Fs,{username:e.creator_name,displayName:e.creator_name,avatarUrl:e.creator_avatar,className:"flex items-center space-x-2",size:"sm"})}),Ns.jsxs("div",{className:"space-y-2 mb-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 text-sm text-pr-text-2",children:[Ns.jsx(us,{className:"w-4 h-4"}),Ns.jsxs("span",{children:[e.current_participants,"/",e.max_participants||""," participants"]})]}),e.follower_threshold>0&&Ns.jsxs("div",{className:"flex items-center space-x-2 text-sm text-pr-text-2",children:[Ns.jsx(Zr,{className:"w-4 h-4"}),Ns.jsxs("span",{children:[e.follower_threshold,"+ followers required"]})]}),e.deadline_at&&Ns.jsxs("div",{className:"flex items-center space-x-2 text-sm text-pr-text-2",children:[Ns.jsx(yt,{className:"w-4 h-4"}),Ns.jsxs("span",{children:["Due ",new Date(e.deadline_at).toLocaleDateString()]})]}),e.time_commitment&&Ns.jsxs("div",{className:"flex items-center space-x-2 text-sm text-pr-text-2",children:[Ns.jsx(Rt,{className:"w-4 h-4"}),Ns.jsx("span",{children:e.time_commitment})]}),e.gem_pool_total>0&&Ns.jsxs("div",{className:"flex items-center space-x-2 text-sm text-pr-text-2",children:[Ns.jsx(Ut,{className:"w-4 h-4"}),Ns.jsxs("span",{children:[e.gem_pool_remaining??e.gem_pool_total," gems remaining in pool"]})]})]}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("span",{className:`text-sm text-pr-text-2 bg-pr-surface-2 px-3 py-1 rounded-full ${a(e.difficulty)}`,children:cm(e.drop_type)}),Ns.jsx("div",{className:"flex space-x-2",children:Ns.jsx("button",{onClick:r,className:"bg-pr-surface-2 hover:bg-pr-surface-3 text-pr-text-1 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"View Details"})})]})]})]})}const um=({onClose:e,onSuccess:t})=>{const r=Ne(),s=new URLSearchParams(r.search).get("create"),a=()=>"paid"===s?"paid":"move"===s?"move":"proof",[n,i]=u.useState(!1),[l,o]=u.useState(!1),[c,d]=u.useState("upload"),[m,p]=u.useState(null),[h,x]=u.useState(null),[f,g]=u.useState(a()),b=u.useRef(null),[v,y]=u.useState(()=>{return{title:"",description:"",drop_type:"content_clipping",difficulty:"easy",key_cost:"paid"===(e=a())?1:0,gem_reward_base:"paid"===e?50:0,gem_pool_total:0,follower_threshold:0,time_commitment:"",requirements:"",deliverables:"",deadline_at:"",max_participants:void 0,platform:"",content_url:"",is_proof_drop:"proof"===e,is_paid_drop:"paid"===e,move_cost_points:0,key_reward_amount:0,move_actions:[]};var e});u.useEffect(()=>{y(e=>({...e,is_proof_drop:"proof"===f,is_paid_drop:"paid"===f,key_cost:"paid"===f?1:0,gem_reward_base:"paid"===f?50:0}))},[f]);return Ns.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[Ns.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Ns.jsx("h2",{className:"text-xl font-bold",children:"Create New Drop"}),Ns.jsx("button",{onClick:e,className:"text-pr-text-2 hover:text-pr-text-1","aria-label":"Close modal",children:""})]}),Ns.jsxs("form",{onSubmit:async r=>{r.preventDefault(),i(!0);try{let r=v.content_url;if("upload"===c&&h)try{r=await(async e=>{try{o(!0);const t=await new Promise((t,r)=>{const s=new FileReader;s.onload=()=>{const e=s.result;t(e.split(",")[1])},s.onerror=r,s.readAsDataURL(e)});return(await Ds("/content/upload-image",{image:t,filename:e.name,contentType:e.type,description:v.title||"Marketing drop",platform:v.platform||"general"})).url}catch(t){return console.error("Error uploading image:",t),"https://images.unsplash.com/photo-1516251193007-45ef944ab0c6?w=800&h=600&fit=crop&crop=center"}finally{o(!1)}})(h)}catch(s){return console.error("Error uploading image:",s),void alert("Failed to upload image. Please try again.")}else if("link"===c&&v.content_url)try{if(!(await fetch(v.content_url,{method:"HEAD"})).ok)throw new Error("Invalid image URL")}catch(s){return void alert("Please provide a valid image URL")}try{await Ds("/drops",{...v,content_url:r,drop_type:"proof"===f?"content_clipping":"paid"===f?"paid_content":"action_required",difficulty:v.difficulty||"easy",deadline_at:v.deadline_at||null,max_participants:v.max_participants||null,key_cost:"paid"===f?v.key_cost||1:0,gem_reward_base:"paid"===f?v.gem_reward_base||50:0,is_proof_drop:"proof"===f,is_paid_drop:"paid"===f,move_cost_points:"move"===f&&v.move_cost_points||0,key_reward_amount:"move"===f&&v.key_reward_amount||0}),t(),e()}catch(s){throw console.error("Error creating drop:",s),s}}catch(s){console.error("Error creating drop:",s),alert(s instanceof Error?s.message:"Failed to create drop")}finally{i(!1)}},className:"space-y-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-1",children:"Drop Type"}),Ns.jsx("div",{className:"flex space-x-4",children:["proof","paid","move"].map(e=>Ns.jsxs("label",{className:"flex items-center",children:[Ns.jsx("input",{type:"radio",className:"h-4 w-4 text-orange-500",checked:f===e,onChange:()=>g(e)}),Ns.jsx("span",{className:"ml-2 capitalize",children:e})]},e))})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-1",children:"Title"}),Ns.jsx("input",{type:"text",className:"w-full p-2 border rounded",value:v.title,onChange:e=>y({...v,title:e.target.value}),required:!0})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-1",children:"Description"}),Ns.jsx("textarea",{className:"w-full p-2 border rounded",rows:3,value:v.description,onChange:e=>y({...v,description:e.target.value}),required:!0})]}),Ns.jsxs("div",{className:"flex space-x-4",children:[Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-1",children:"Difficulty"}),Ns.jsxs("select",{className:"w-full p-2 border rounded",value:v.difficulty,onChange:e=>y({...v,difficulty:e.target.value}),children:[Ns.jsx("option",{value:"easy",children:"Easy"}),Ns.jsx("option",{value:"medium",children:"Medium"}),Ns.jsx("option",{value:"hard",children:"Hard"})]})]}),"paid"===f&&Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-1",children:"Key Cost"}),Ns.jsx("input",{type:"number",min:"1",className:"w-full p-2 border rounded",value:v.key_cost,onChange:e=>y({...v,key_cost:Number(e.target.value)}),required:"paid"===f})]})]}),Ns.jsxs("div",{children:[Ns.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[Ns.jsxs("label",{className:"flex items-center",children:[Ns.jsx("input",{type:"radio",className:"h-4 w-4 text-orange-500",checked:"upload"===c,onChange:()=>d("upload")}),Ns.jsx("span",{className:"ml-2",children:"Upload Image"})]}),Ns.jsxs("label",{className:"flex items-center",children:[Ns.jsx("input",{type:"radio",className:"h-4 w-4 text-orange-500",checked:"link"===c,onChange:()=>d("link")}),Ns.jsx("span",{className:"ml-2",children:"Image URL"})]})]}),"upload"===c?Ns.jsxs("div",{children:[Ns.jsx("input",{type:"file",ref:b,onChange:e=>{if(e.target.files&&e.target.files[0]){const t=e.target.files[0];x(t);const r=new FileReader;r.onload=e=>{e.target?.result&&p(e.target.result)},r.readAsDataURL(t)}},accept:"image/*",className:"hidden"}),Ns.jsx("button",{type:"button",onClick:()=>b.current?.click(),className:"w-full p-2 border-2 border-dashed border-pr-surface-3 rounded-md text-pr-text-2 hover:border-orange-500 hover:text-orange-500 transition-colors",children:l?"Uploading...":"Choose an image"}),m&&Ns.jsxs("div",{className:"mt-2 relative",children:[Ns.jsx("img",{src:m,alt:"Preview",className:"max-h-40 rounded"}),Ns.jsx("button",{type:"button",onClick:()=>{x(null),p(null),b.current&&(b.current.value="")},className:"absolute top-1 right-1 bg-black bg-opacity-50 text-white rounded-full p-1 hover:bg-opacity-75","aria-label":"Remove image",children:""})]})]}):Ns.jsx("input",{type:"url",className:"w-full p-2 border rounded",placeholder:"https://example.com/image.jpg",value:v.content_url,onChange:e=>y({...v,content_url:e.target.value}),required:!0})]}),Ns.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[Ns.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded-md text-pr-text-1 hover:bg-pr-surface-2",disabled:n,children:"Cancel"}),Ns.jsx("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 disabled:opacity-50",disabled:n||l,children:n?"Creating...":"Create Drop"})]})]})]})})};function mm(e,t,r,s){console.error(`API Error in ${t}.${r}:`,e);const a=(e=>{if(e&&"object"==typeof e){const t=e;return t.status??t.response?.status}})(e),n=(e=>{if(e&&"object"==typeof e){const t=e;return t.response?.data?.error}})(e)??(e=>{if(e instanceof Error)return e.message;if("string"==typeof e)return e;try{return JSON.stringify(e)}catch{return String(e)}})(e);("number"==typeof a&&[500,502,503,504].includes(a)||["internal server error","service unavailable","gateway timeout","database error","authentication failed"].some(e=>n.toLowerCase().includes(e)))&&bs(new Error(`API Error (${a??"unknown"}): ${n}`),t,r,s)}function pm(e){return{handleError:(t,r,s)=>{bs(t,e,r,s)},handleApiError:(t,r,s)=>{mm(t,e,r,s)},withErrorHandling:async(t,r,s)=>async function(e,t,r,s){try{return await e()}catch(a){throw console.error(`Error in ${t}.${r}:`,a),bs(a instanceof Error?a:new Error(String(a)),t,r,s),a}}(t,e,r,s)}}const hm=["instagram","tiktok","youtube","linkedin","twitter"];function xm(){Ls();const e=pm("Create"),[t,r]=u.useState("post"),[s,a]=u.useState({platform:"instagram",title:"",description:"",platform_url:"",media_url:"",total_shares:100,share_price:0}),[n,i]=u.useState(!1),[l,o]=u.useState(0),[c,d]=u.useState(!1),[m,p]=u.useState(null),[h,x]=u.useState(""),[f,g]=u.useState("url"),[b,v]=u.useState(!1),y=u.useRef(null),j=()=>{p(null),h&&(URL.revokeObjectURL(h),x("")),a({...s,media_url:""}),y.current&&(y.current.value="")},w=e=>{switch(e){case"instagram":return Ns.jsx(ir,{className:"w-5 h-5"});case"twitter":return Ns.jsx(os,{className:"w-5 h-5"});case"youtube":return Ns.jsx(xs,{className:"w-5 h-5"});case"linkedin":return Ns.jsx(ur,{className:"w-5 h-5"});case"tiktok":return Ns.jsx(Cr,{className:"w-5 h-5"});default:return Ns.jsx(dr,{className:"w-5 h-5"})}},N=e=>{switch(e){case"instagram":return"from-pink-500 to-purple-600";case"twitter":return"from-blue-400 to-blue-600";case"youtube":return"from-red-500 to-red-600";case"linkedin":return"from-blue-600 to-blue-800";case"tiktok":return"from-black to-gray-800";default:return"from-gray-500 to-gray-600"}};return Ns.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("h1",{className:"text-3xl font-bold text-pr-text-1",children:"Create"}),Ns.jsx("p",{className:"text-pr-text-2 mt-2",children:"Share your content and unlock earning opportunities"})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Need to create marketing campaigns?"}),Ns.jsx("p",{className:"text-xs text-gray-400",children:'Check "Become Advertiser" in your profile menu'})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl shadow-sm border border-pr-surface-3",children:[Ns.jsx("div",{className:"border-b border-pr-surface-3",children:Ns.jsxs("nav",{className:"flex space-x-8 px-6",children:[Ns.jsx("button",{onClick:()=>r("post"),className:"py-4 border-b-2 font-medium text-sm "+("post"===t?"border-orange-500 text-orange-600":"border-transparent text-pr-text-2 hover:text-pr-text-1"),children:"Share Existing Content"}),Ns.jsx("button",{onClick:()=>r("upload"),className:"py-4 border-b-2 font-medium text-sm "+("upload"===t?"border-orange-500 text-orange-600":"border-transparent text-pr-text-2 hover:text-pr-text-1"),children:"Upload New Content"})]})}),Ns.jsxs("div",{className:"p-6",children:["post"===t&&Ns.jsxs("form",{onSubmit:async t=>{t.preventDefault(),d(!0);try{if(s.media_url&&"url"===f){const t=await(async e=>{try{const t=await fetch(e,{method:"HEAD"}),r=t.headers.get("content-type");return t.ok&&r?.startsWith("image/")||!1}catch{return!1}})(s.media_url);if(!t){const t=new Error("The provided image URL is not accessible. Please check the URL or upload an image file instead.");return e.handleError(t,"invalid_image_url"),void d(!1)}}const t={...s,share_price:n&&l>0?l/s.total_shares:0};console.log("Sending content creation request:",t);const u=await fetch("/api/content",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(console.log("Content creation response status:",u.status),u.ok){const e=await u.json();if(n&&l>0)try{await fetch(`/api/content/${e.contentId}/fund`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({amount:l,currency_type:"Gems"})})}catch(r){console.error("Funding failed:",r)}a({platform:"instagram",title:"",description:"",platform_url:"",media_url:"",total_shares:100,share_price:0}),i(!1),o(0),j(),g("url");const t=document.createElement("div");t.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-bounce",t.innerHTML='\n          <div class="flex items-center space-x-2">\n            <span class="text-lg"></span>\n            <div>\n              <div class="font-semibold">Content Created!</div>\n              <div class="text-xs opacity-90">Redirecting to your content page...</div>\n            </div>\n          </div>\n        ',document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t),window.location.href=`/content/${e.contentId}`},2e3)}else{let t="Failed to create content. Please try again.",r=null;try{const e=await u.json();if(console.error("Failed to create content:",e),e.error&&(t=e.error),e.details&&(console.error("Error details:",e.details),r=e.details),e.field_errors){console.error("Field validation errors:",e.field_errors);t=`Validation failed: ${e.field_errors.map(e=>`${e.field}: ${e.message}`).join(", ")}`}}catch(c){console.error("Error parsing error response:",c)}const s=u.status>=500,a=t.includes("database")||t.includes("Database"),n=400===u.status&&t.includes("Validation");if(s||a){const s=new Error(`${t}${r?` - ${r}`:""}`);e.handleError(s,"create_content")}else{const e=document.createElement("div");e.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-3 rounded-lg shadow-lg z-50",e.innerHTML=`\n            <div class="flex items-center space-x-2">\n              <span></span>\n              <div>\n                <div class="font-semibold">Content Creation Failed</div>\n                <div class="text-xs opacity-90">${t}</div>\n                ${n?'<div class="text-xs opacity-75 mt-1">Please check all form fields and try again</div>':""}\n              </div>\n            </div>\n          `,document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},8e3)}}}catch(u){console.error("Failed to create content:",u);const t=u instanceof Error?u:new Error("Failed to create content. Please check your connection and try again.");e.handleError(t,"create_content_network")}finally{d(!1)}},className:"space-y-6",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-3",children:"Platform"}),Ns.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:hm.map(e=>Ns.jsxs("button",{type:"button",onClick:()=>a({...s,platform:e}),className:"p-4 border rounded-lg flex flex-col items-center space-y-2 transition-all "+(s.platform===e?"border-orange-500 bg-orange-50 text-orange-700":"border-pr-surface-3 hover:border-gray-400"),children:[Ns.jsx("div",{className:`w-8 h-8 rounded-lg bg-gradient-to-br ${N(e)} flex items-center justify-center text-white`,children:w(e)}),Ns.jsx("span",{className:"text-sm font-medium capitalize",children:e})]},e))})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Content Title"}),Ns.jsx("input",{type:"text",required:!0,value:s.title,onChange:e=>a({...s,title:e.target.value}),className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"My amazing content piece..."})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Platform URL"}),Ns.jsx("input",{type:"url",required:!0,value:s.platform_url,onChange:e=>a({...s,platform_url:e.target.value}),className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"https://instagram.com/p/..."})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Description"}),Ns.jsx("textarea",{rows:3,value:s.description,onChange:e=>a({...s,description:e.target.value}),className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Describe your content..."})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-3",children:"Media Content (Optional)"}),Ns.jsxs("div",{className:"flex space-x-4 mb-4",children:[Ns.jsxs("button",{type:"button",onClick:()=>{g("url"),j()},className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+("url"===f?"bg-orange-100 text-orange-700 border border-orange-300":"bg-pr-surface-2 text-pr-text-2 border border-pr-surface-3 hover:bg-pr-surface-3"),children:[Ns.jsx(dr,{className:"w-4 h-4 inline mr-2"}),"Use URL"]}),Ns.jsxs("button",{type:"button",onClick:()=>{g("file"),a({...s,media_url:""})},className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+("file"===f?"bg-orange-100 text-orange-700 border border-orange-300":"bg-pr-surface-2 text-pr-text-2 border border-pr-surface-3 hover:bg-pr-surface-3"),children:[Ns.jsx(cs,{className:"w-4 h-4 inline mr-2"}),"Upload File"]})]}),"url"===f?Ns.jsxs("div",{children:[Ns.jsx("input",{type:"url",value:s.media_url,onChange:e=>a({...s,media_url:e.target.value}),className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Direct link to image..."}),Ns.jsx("p",{className:"text-xs text-pr-text-2 mt-1",children:"Make sure the image URL is publicly accessible and ends with .jpg, .png, .gif, or .webp"})]}):Ns.jsx("div",{className:"space-y-4",children:m?Ns.jsxs("div",{className:"border border-pr-surface-3 rounded-lg p-4",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:Ns.jsx(ar,{className:"w-5 h-5 text-orange-600"})}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-medium text-pr-text-1",children:m.name}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:[(m.size/1024/1024).toFixed(2)," MB"]}),b&&Ns.jsx("p",{className:"text-xs text-blue-600",children:"Uploading..."})]})]}),Ns.jsx("button",{type:"button",onClick:j,className:"p-1 text-gray-400 hover:text-red-500 transition-colors",disabled:b,children:Ns.jsx(hs,{className:"w-5 h-5"})})]}),h&&Ns.jsxs("div",{className:"relative",children:[Ns.jsx("img",{src:h,alt:"Preview",className:"w-full h-48 object-cover rounded-lg"}),b&&Ns.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-lg",children:Ns.jsxs("div",{className:"text-white text-center",children:[Ns.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-white border-t-transparent rounded-full mx-auto mb-2"}),Ns.jsx("p",{className:"text-sm",children:"Processing image..."})]})})]})]}):Ns.jsxs("div",{onClick:()=>y.current?.click(),className:"border-2 border-dashed border-pr-surface-3 rounded-lg p-8 text-center cursor-pointer hover:border-orange-400 hover:bg-orange-50 transition-all",children:[Ns.jsx(cs,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),Ns.jsx("p",{className:"text-pr-text-2 mb-2",children:"Click to upload or drag and drop"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Images (JPG, PNG, GIF, WEBP)  Max 10 MB"}),Ns.jsx("input",{ref:y,type:"file",accept:"image/*",onChange:async t=>{const r=t.target.files?.[0];if(r){if(!["image/jpeg","image/png","image/gif","image/webp"].includes(r.type)){const t=new Error("Please upload a valid image file (JPG, PNG, GIF, WEBP).");return void e.handleError(t,"invalid_file_type")}if(r.size>15728640){const t=new Error("File size must be less than 15MB. Please compress your image or use a URL instead.");return void e.handleError(t,"file_too_large")}p(r);const t=URL.createObjectURL(r);x(t);try{const e=await(async e=>{try{v(!0);const t=await new Promise(t=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(e.split(",")[1])},r.readAsDataURL(e)}),r=await fetch("/api/content/upload-image",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({fileName:e.name,fileType:e.type,fileData:t})});if(!r.ok)throw new Error("Upload failed");const s=await r.json();if(s.fallback){console.warn("Upload fallback used:",s.fallbackReason);const e=document.createElement("div");e.className="fixed top-4 right-4 bg-yellow-500 text-white px-4 py-3 rounded-lg shadow-lg z-50",e.innerHTML=`\n          <div class="flex items-center space-x-2">\n            <span></span>\n            <div>\n              <div class="font-semibold">Image Upload Notice</div>\n              <div class="text-xs opacity-90">${s.fallbackReason||"Using fallback image"}</div>\n            </div>\n          </div>\n        `,document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},5e3)}return s.imageUrl}catch(t){console.error("Error uploading image:",t);try{const e=await fetch("/api/content/generate-placeholder",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({description:s.title||"Social media content",platform:s.platform})});if(e.ok){const t=await e.json(),r=document.createElement("div");return r.className="fixed top-4 right-4 bg-orange-500 text-white px-4 py-3 rounded-lg shadow-lg z-50",r.innerHTML='\n            <div class="flex items-center space-x-2">\n              <span></span>\n              <div>\n                <div class="font-semibold">Using Placeholder Image</div>\n                <div class="text-xs opacity-90">Original upload failed, but your content will still be created</div>\n              </div>\n            </div>\n          ',document.body.appendChild(r),setTimeout(()=>{document.body.contains(r)&&document.body.removeChild(r)},4e3),t.imageUrl}}catch(r){console.error("Fallback image generation failed:",r)}const e="https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=800&h=600&fit=crop&crop=center",a=document.createElement("div");return a.className="fixed top-4 right-4 bg-orange-500 text-white px-4 py-3 rounded-lg shadow-lg z-50",a.innerHTML='\n        <div class="flex items-center space-x-2">\n          <span></span>\n          <div>\n            <div class="font-semibold">Using Default Image</div>\n            <div class="text-xs opacity-90">Upload service temporarily unavailable</div>\n          </div>\n        </div>\n      ',document.body.appendChild(a),setTimeout(()=>{document.body.contains(a)&&document.body.removeChild(a)},4e3),e}finally{v(!1)}})(r);a({...s,media_url:e})}catch(n){console.error("File upload failed:",n);const t=n instanceof Error?n.message:String(n);if(t.includes("too large")||t.includes("Invalid file type")){const r=n instanceof Error?n:new Error(t);e.handleError(r,"upload_image")}else{const e=document.createElement("div");e.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-3 rounded-lg shadow-lg z-50",e.innerHTML='\n            <div class="flex items-center space-x-2">\n              <span></span>\n              <div>\n                <div class="font-semibold">Upload Failed</div>\n                <div class="text-xs opacity-90">Please try again or use an image URL instead</div>\n              </div>\n            </div>\n          ',document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},5e3)}j()}}},className:"hidden"})]})})]}),Ns.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Investment Settings"}),Ns.jsxs("div",{className:"mb-4",children:[Ns.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Total Shares Available"}),Ns.jsx("input",{type:"number",min:"100",max:"1000",value:s.total_shares,onChange:e=>a({...s,total_shares:Math.max(100,Number(e.target.value))}),className:"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),Ns.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Minimum 100 shares required"})]}),Ns.jsx("div",{className:"mb-4",children:Ns.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[Ns.jsx("input",{type:"checkbox",checked:n,onChange:e=>{i(e.target.checked),e.target.checked||(o(0),a({...s,share_price:0}))},className:"w-4 h-4 text-purple-600 border-purple-300 rounded focus:ring-purple-500"}),Ns.jsxs("div",{children:[Ns.jsx("span",{className:"text-sm font-medium text-purple-700",children:"Fund content with gems"}),Ns.jsx("p",{className:"text-xs text-purple-600",children:"Give your content initial value by funding it with gems"})]})]})}),n&&Ns.jsxs("div",{className:"mb-4",children:[Ns.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Gem Funding Amount"}),Ns.jsx("input",{type:"number",min:"1",step:"1",value:l||"",onChange:e=>{const t=Number(e.target.value);o(t),a({...s,share_price:t>0?t/s.total_shares:0})},className:"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter gems to fund content"}),Ns.jsxs("div",{className:"text-xs text-purple-600 mt-1 space-y-1",children:[Ns.jsxs("p",{children:["This will be split across all ",s.total_shares," shares"]}),l>0&&Ns.jsxs("p",{children:["Share price: ",(l/s.total_shares).toFixed(4)," gems per share"]})]})]}),Ns.jsx("div",{className:"bg-purple-100 border border-purple-300 rounded-lg p-3",children:Ns.jsxs("p",{className:"text-sm text-purple-700",children:[Ns.jsx("strong",{children:"Total shares:"})," ",s.total_shares,n&&l>0&&Ns.jsxs(Ns.Fragment,{children:[Ns.jsx("br",{}),Ns.jsx("strong",{children:"Total funding:"})," ",l," gems",Ns.jsx("br",{}),Ns.jsx("strong",{children:"Value per share:"})," ",(l/s.total_shares).toFixed(4)," gems"]}),!n&&Ns.jsxs(Ns.Fragment,{children:[Ns.jsx("br",{}),Ns.jsx("strong",{children:"Initial value:"})," Free shares (investors can add value later)"]})]})})]}),Ns.jsx("button",{type:"submit",disabled:c||b,className:"w-full bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white py-3 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Creating...":b?"Processing Image...":"Create Content Post"})]}),"upload"===t&&Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"border-2 border-dashed border-pr-surface-3 rounded-lg p-12 text-center",children:[Ns.jsx(cs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-2",children:"Upload your content"}),Ns.jsx("p",{className:"text-pr-text-2 mb-4",children:"Drag and drop your files here, or click to browse"}),Ns.jsx("button",{className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200",children:"Choose Files"}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mt-4",children:"Supports: Images (JPG, PNG, WEBP), Videos (MP4, MOV), Documents (PDF, DOC)"})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Ns.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[Ns.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center mx-auto mb-4",children:Ns.jsx(jt,{className:"w-6 h-6 text-white"})}),Ns.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Photos"}),Ns.jsx("p",{className:"text-sm text-blue-700",children:"High-quality images for social sharing"})]}),Ns.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6 text-center",children:[Ns.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center mx-auto mb-4",children:Ns.jsx(ms,{className:"w-6 h-6 text-white"})}),Ns.jsx("h3",{className:"font-semibold text-purple-900 mb-2",children:"Videos"}),Ns.jsx("p",{className:"text-sm text-purple-700",children:"Engaging video content for maximum reach"})]}),Ns.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 text-center",children:[Ns.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center mx-auto mb-4",children:Ns.jsx(Yt,{className:"w-6 h-6 text-white"})}),Ns.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"Documents"}),Ns.jsx("p",{className:"text-sm text-green-700",children:"Educational and informational content"})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-2 border border-pr-surface-3 rounded-lg p-8 text-center",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-2",children:"Direct Upload Coming Soon"}),Ns.jsx("p",{className:"text-pr-text-2",children:"We're working on direct upload functionality. For now, please use the \"Share Existing Content\" tab to upload images and link to content you've posted on social platforms."})]})]})]})]})]})}function fm({isOpen:e,onClose:t,onForecastCreated:r}){const[s,a]=u.useState({content_id:"",platform:"instagram",content_url:"",forecast_type:"views",target_value:"",odds:"2",expires_at:"",initial_amount:"",initial_side:"over"}),[n,i]=u.useState([]),[l,o]=u.useState(!1),[c,d]=u.useState(""),[m,p]=u.useState({balance:0});u.useEffect(()=>{if(e){h(),x();const e=new Date;e.setDate(e.getDate()+1),a(t=>({...t,expires_at:e.toISOString().slice(0,16)}))}},[e]);const h=async()=>{try{const e=await fetch("/api/content");if(e.ok){const t=await e.json();i(t.slice(0,20))}}catch(e){console.error("Failed to fetch content:",e)}},x=async()=>{try{const e=await fetch("/api/users/me/wallets");if(e.ok){const t=(await e.json()).find(e=>"USD"===e.currency_type);p({balance:t?.balance||0})}}catch(e){console.error("Failed to fetch wallet:",e)}},f=s.initial_amount?(parseFloat(s.initial_amount)*parseFloat(s.odds)).toFixed(2):"0";return e?Ns.jsx(Us,{isOpen:e,onClose:t,maxWidth:"2xl",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex max-h-[80vh] flex-col overflow-hidden",children:[Ns.jsxs("div",{className:"border-b border-pr-surface-3 px-6 pt-6 pb-4",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("h2",{className:"flex items-center text-xl font-semibold text-pr-text-1",children:[Ns.jsx(as,{className:"mr-2 h-5 w-5 text-blue-600"}),"Create Social Forecast"]}),Ns.jsx("button",{onClick:t,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close create forecast modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]}),Ns.jsx("p",{className:"mt-2 text-sm text-pr-text-2",children:"Create a prediction market by putting up your own initial stake. Others can then predict on your forecast."})]}),Ns.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-6",children:Ns.jsxs("form",{onSubmit:async e=>{e.preventDefault(),o(!0),d("");try{const e=await fetch("/api/social-forecasts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,content_id:s.content_id?parseInt(s.content_id):void 0,target_value:parseInt(s.target_value),odds:parseFloat(s.odds),initial_amount:parseFloat(s.initial_amount)})});if(e.ok)r(),t(),a({content_id:"",platform:"instagram",content_url:"",forecast_type:"views",target_value:"",odds:"2",expires_at:"",initial_amount:"",initial_side:"over"});else{const t=await e.json();d(t.error||"Failed to create forecast")}}catch(n){d("Failed to create forecast")}finally{o(!1)}},className:"space-y-6",children:[c&&Ns.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:Ns.jsx("p",{className:"text-red-600 text-sm",children:c})}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Content to Forecast On"}),Ns.jsxs("div",{className:"space-y-3",children:[n.length>0&&Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-xs text-pr-text-2 mb-2",children:"Select from Promorang content:"}),Ns.jsx("div",{className:"max-h-32 overflow-y-auto border border-pr-surface-3 rounded-lg",children:n.map(e=>Ns.jsxs("button",{type:"button",onClick:()=>(e=>{a(t=>({...t,content_id:e.id.toString(),platform:e.platform,content_url:e.platform_url}))})(e),className:"w-full text-left p-3 border-b border-pr-border hover:bg-pr-surface-2 "+(s.content_id===e.id.toString()?"bg-blue-50 border-l-4 border-l-blue-500":""),children:[Ns.jsx("div",{className:"text-sm font-medium text-pr-text-1",children:e.title}),Ns.jsxs("div",{className:"text-xs text-pr-text-2",children:[e.platform,"  by ",e.creator_name]})]},e.id))})]}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-xs text-pr-text-2 mb-2",children:"Or enter external content URL:"}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[Ns.jsxs("select",{value:s.platform,onChange:e=>a({...s,platform:e.target.value}),className:"px-3 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[Ns.jsx("option",{value:"instagram",children:"Instagram"}),Ns.jsx("option",{value:"tiktok",children:"TikTok"}),Ns.jsx("option",{value:"youtube",children:"YouTube"}),Ns.jsx("option",{value:"twitter",children:"Twitter"})]}),Ns.jsx("input",{type:"url",placeholder:"Content URL",value:s.content_url,onChange:e=>a({...s,content_url:e.target.value,content_id:""}),className:"px-3 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]})]})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ns.jsxs("div",{children:[Ns.jsxs("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:[Ns.jsx(ts,{className:"w-4 h-4 inline mr-1"}),"Metric to Predict"]}),Ns.jsxs("select",{value:s.forecast_type,onChange:e=>a({...s,forecast_type:e.target.value}),className:"w-full px-3 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[Ns.jsx("option",{value:"views",children:"Views"}),Ns.jsx("option",{value:"likes",children:"Likes"}),Ns.jsx("option",{value:"shares",children:"Shares"}),Ns.jsx("option",{value:"comments",children:"Comments"})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Target Value"}),Ns.jsx("input",{type:"number",placeholder:"e.g., 10000",value:s.target_value,onChange:e=>a({...s,target_value:e.target.value}),className:"w-full px-3 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:"1"})]})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Payout Odds (multiplier)"}),Ns.jsxs("select",{value:s.odds,onChange:e=>a({...s,odds:e.target.value}),className:"w-full px-3 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[Ns.jsx("option",{value:"1.5",children:"1.5x"}),Ns.jsx("option",{value:"2",children:"2x"}),Ns.jsx("option",{value:"2.5",children:"2.5x"}),Ns.jsx("option",{value:"3",children:"3x"}),Ns.jsx("option",{value:"4",children:"4x"}),Ns.jsx("option",{value:"5",children:"5x"})]})]}),Ns.jsxs("div",{children:[Ns.jsxs("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:[Ns.jsx(Rt,{className:"w-4 h-4 inline mr-1"}),"Expires At"]}),Ns.jsx("input",{type:"datetime-local",value:s.expires_at,onChange:e=>a({...s,expires_at:e.target.value}),className:"w-full px-3 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:(new Date).toISOString().slice(0,16)})]})]}),Ns.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[Ns.jsx("h4",{className:"font-medium text-pr-text-1 mb-3",children:"Your Initial Prediction & Stake"}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Your Prediction"}),Ns.jsxs("select",{value:s.initial_side,onChange:e=>a({...s,initial_side:e.target.value}),className:"w-full px-3 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[Ns.jsx("option",{value:"over",children:"OVER (will exceed target)"}),Ns.jsx("option",{value:"under",children:"UNDER (will not reach target)"})]})]}),Ns.jsxs("div",{children:[Ns.jsxs("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:[Ns.jsx(Bt,{className:"w-4 h-4 inline mr-1"}),"Initial Stake (USD)"]}),Ns.jsx("input",{type:"number",step:"0.01",placeholder:"Amount to stake",value:s.initial_amount,onChange:e=>a({...s,initial_amount:e.target.value}),className:"w-full px-3 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:"1",max:m.balance}),Ns.jsxs("p",{className:"text-xs text-pr-text-2 mt-1",children:["Available: $",m.balance.toFixed(2)]})]})]}),s.initial_amount&&Ns.jsxs("div",{className:"mt-3 p-3 bg-pr-surface-card rounded-lg border border-blue-200",children:[Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:["Your stake: ",Ns.jsxs("span",{className:"font-medium",children:["$",s.initial_amount]})]}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:["Potential payout if correct: ",Ns.jsxs("span",{className:"font-medium text-green-600",children:["$",f]})]}),Ns.jsx("p",{className:"text-xs text-pr-text-2 mt-1",children:"This creates the initial pool that others can predict against"})]})]}),Ns.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-pr-surface-3",children:[Ns.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-pr-text-1 bg-pr-surface-2 rounded-lg hover:bg-pr-surface-3 transition-colors",children:"Cancel"}),Ns.jsx("button",{type:"submit",disabled:l||!s.content_url||!s.target_value||!s.initial_amount,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Creating...":"Create Forecast"})]})]})})]})}):null}function gm(){const[e,t]=u.useState("forecasts"),[r,s]=u.useState([]),[a,n]=u.useState([]),[i,l]=u.useState([]),[o,c]=u.useState([]),[d,m]=u.useState(!0),[p,h]=u.useState(!1),[x,f]=u.useState(!1),[g,b]=u.useState(null),[v,y]=u.useState([]),[j,w]=u.useState(!1),[N,_]=u.useState(null);u.useEffect(()=>{k()},[e]);const k=async()=>{m(!0);try{if("forecasts"===e){const e=await Ms("/social-forecasts");s(Array.isArray(e)?e:[])}else if("my-forecasts"===e){const e=await Ms("/users/forecasts");n(Array.isArray(e)?e:[])}else if("my-created"===e){const e=await Ms("/users/created-forecasts");l(Array.isArray(e)?e:[])}else if("content"===e){const[e,t]=await Promise.all([Ms("/content"),Ms("/users/me/wallets").catch(()=>[])]);c(Array.isArray(e)?e:[]),y(Array.isArray(t)?t:[])}}catch(t){console.error("Failed to fetch data:",t)}finally{m(!1)}},S=e=>"number"!=typeof e||Number.isNaN(e)?"":e.toLocaleString(void 0,{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),C=e=>{const t=new Date,r=new Date(e).getTime()-t.getTime();if(r<=0)return"Expired";const s=Math.floor(r/36e5),a=Math.floor(r%36e5/6e4);if(s>24){return`${Math.floor(s/24)}d ${s%24}h`}return`${s}h ${a}m`},O=e=>{switch(e){case"active":return"text-green-600 bg-green-100";case"expired":default:return"text-pr-text-2 bg-pr-surface-2";case"resolved":return"text-blue-600 bg-blue-100"}},E=({forecast:e})=>{const t=new Date(e.expires_at)<=new Date;return Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg border border-pr-surface-3 p-6 hover:shadow-md transition-shadow",children:[Ns.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("img",{src:e.creator_avatar||`${Os}/api/placeholder/32/32`,alt:e.creator_name,className:"w-8 h-8 rounded-full"}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-medium text-pr-text-1",children:e.creator_name}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:e.platform})]})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O(e.status)}`,children:e.status}),Ns.jsx("a",{href:e.content_url,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-pr-text-2",children:Ns.jsx(Kt,{className:"w-4 h-4"})})]})]}),e.content_title&&Ns.jsxs("div",{className:"mb-3 p-3 bg-pr-surface-2 rounded-lg",children:[Ns.jsx("p",{className:"text-sm font-medium text-pr-text-1",children:e.content_title}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:e.content_platform})]}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(ts,{className:"w-4 h-4 text-blue-600"}),Ns.jsxs("span",{className:"text-sm font-medium",children:[e.forecast_type," ",(r=e.target_value,"number"!=typeof r||Number.isNaN(r)?"":r.toLocaleString(void 0,s))]})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Pool"}),Ns.jsx("p",{className:"font-semibold text-green-600",children:S(e.pool_size)})]})]}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Rt,{className:"w-4 h-4 text-gray-400"}),Ns.jsx("span",{className:"text-sm text-pr-text-2",children:C(e.expires_at)})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Odds"}),Ns.jsx("p",{className:"font-semibold text-blue-600",children:"number"!=typeof e.odds||Number.isNaN(e.odds)?"":`${e.odds}x`})]})]}),e.creator_side&&e.creator_initial_amount>0&&Ns.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[Ns.jsx("p",{className:"text-xs text-pr-text-2 mb-1",children:"Creator's Prediction"}),Ns.jsxs("p",{className:"text-sm font-medium text-blue-600",children:[e.creator_side.toUpperCase(),"  ",S(e.creator_initial_amount)," staked"]})]}),!t&&Ns.jsx("button",{onClick:()=>(e=>{b(e),f(!0)})(e),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Make Your Prediction"})]})]});var r,s},P=({forecast:e})=>{const t="resolved"===e.forecast_status,r=t&&e.actual_payout>0;return Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg border border-pr-surface-3 p-6",children:[Ns.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ns.jsxs("div",{children:[Ns.jsxs("p",{className:"font-medium text-pr-text-1",children:[e.forecast_type," forecast by ",e.creator_name]}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:e.platform})]}),Ns.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O(e.forecast_status)}`,children:e.forecast_status})]}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Your Prediction"}),Ns.jsx("p",{className:"font-medium text-blue-600",children:e.prediction_side.toUpperCase()})]}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Amount Staked"}),Ns.jsxs("p",{className:"font-medium",children:["$",e.prediction_amount.toFixed(2)]})]}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Target Value"}),Ns.jsx("p",{className:"font-medium",children:e.target_value.toLocaleString()})]}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Current Value"}),Ns.jsx("p",{className:"font-medium",children:e.current_value.toLocaleString()})]})]}),t?Ns.jsx("div",{className:"p-3 rounded-lg "+(r?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:Ns.jsxs("p",{className:"text-sm font-medium "+(r?"text-green-600":"text-red-600"),children:[r?"Won!":"Lost","  ",r?`+$${e.actual_payout.toFixed(2)}`:`$${e.prediction_amount.toFixed(2)} lost`]})}):Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-3",children:[Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:["Potential payout: ",Ns.jsxs("span",{className:"font-medium text-green-600",children:["$",e.potential_payout.toFixed(2)]})]}),Ns.jsxs("p",{className:"text-xs text-pr-text-2",children:["Expires: ",C(e.expires_at)]})]})]})},T=({content:e})=>Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg border border-pr-surface-3 p-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[Ns.jsx("img",{src:e.creator_avatar||`${Os}/api/placeholder/32/32`,alt:e.creator_name,className:"w-8 h-8 rounded-full"}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-medium text-pr-text-1",children:e.creator_name}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:e.platform})]})]}),Ns.jsx("h3",{className:"font-medium text-pr-text-1 mb-3",children:e.title}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Share Price"}),Ns.jsxs("p",{className:"font-medium",children:["$",e.share_price.toFixed(2)]})]}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Available"}),Ns.jsxs("p",{className:"font-medium",children:[e.available_shares,"/",e.total_shares]})]})]}),Ns.jsx("div",{className:"bg-green-50 rounded-lg p-3 mb-4",children:Ns.jsxs("p",{className:"text-sm text-green-600 font-medium",children:["Revenue: $",e.current_revenue.toFixed(2)]})}),Ns.jsx("button",{onClick:()=>(_(e),void w(!0)),className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors",children:"Buy Shares"})]});return Ns.jsxs(Ns.Fragment,{children:[Ns.jsx("div",{className:"min-h-screen-dynamic bg-pr-surface-2",children:Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-8",children:[Ns.jsxs("div",{children:[Ns.jsx("h1",{className:"text-3xl font-bold text-pr-text-1",children:"Investment Hub"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Create forecasts, make predictions, and invest in creator success"})]}),Ns.jsxs("button",{onClick:()=>h(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[Ns.jsx(Rr,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Create Forecast"})]})]}),Ns.jsx("div",{className:"border-b border-pr-surface-3 mb-8",children:Ns.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"forecasts",label:"All Forecasts",icon:as},{id:"my-forecasts",label:"My Predictions",icon:us},{id:"my-created",label:"My Forecasts",icon:ts},{id:"content",label:"Content Shares",icon:Bt}].map(r=>Ns.jsxs("button",{onClick:()=>t(r.id),className:"flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm "+(e===r.id?"border-blue-500 text-blue-600":"border-transparent text-pr-text-2 hover:text-pr-text-1 hover:border-pr-surface-3"),children:[Ns.jsx(r.icon,{className:"w-4 h-4"}),Ns.jsx("span",{children:r.label})]},r.id))})}),d?Ns.jsx("div",{className:"flex items-center justify-center py-12",children:Ns.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:["forecasts"===e&&r.map(e=>Ns.jsx(E,{forecast:e},e.id)),"my-forecasts"===e&&a.map(e=>Ns.jsx(P,{forecast:e},e.id)),"my-created"===e&&i.map(e=>Ns.jsx(E,{forecast:e},e.id)),"content"===e&&o.map(e=>Ns.jsx(T,{content:e},e.id))]}),!d&&Ns.jsxs(Ns.Fragment,{children:["forecasts"===e&&0===r.length&&Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx(as,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-2",children:"No Active Forecasts"}),Ns.jsx("p",{className:"text-pr-text-2 mb-4",children:"Be the first to create a prediction market! Put up your own stake and let others predict on your forecast."}),Ns.jsx("button",{onClick:()=>h(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create First Forecast"})]}),"my-forecasts"===e&&0===a.length&&Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx(us,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-2",children:"No Predictions Yet"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Browse active forecasts and make your first prediction to start earning!"})]}),"my-created"===e&&0===i.length&&Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx(ts,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-2",children:"No Created Forecasts"}),Ns.jsx("p",{className:"text-pr-text-2 mb-4",children:"Create your first prediction market by putting up initial stake and letting others predict against you!"}),Ns.jsx("button",{onClick:()=>h(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create Forecast"})]}),"content"===e&&0===o.length&&Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx(Bt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-2",children:"No Content Available"}),Ns.jsx("p",{className:"text-pr-text-2",children:"No content shares are currently available for investment."})]})]})]})}),Ns.jsx(fm,{isOpen:p,onClose:()=>h(!1),onForecastCreated:()=>{k(),h(!1)}}),g&&Ns.jsx(sm,{isOpen:x,onClose:()=>f(!1),forecast:g,onPredictionPlaced:()=>{k()}}),N&&Ns.jsx($c,{content:N,wallet:v.find(e=>"USD"===e.currency_type),isOpen:j,onClose:()=>{w(!1),_(null)},onPurchase:async(e,t)=>{try{await Ds("/content/buy-shares",{content_id:e.id,shares_count:t}),await k()}catch(r){throw console.error("Failed to buy shares:",r),r}}})]})}function bm({user:e,isOpen:t,onClose:r,onSuccess:s}){const[a,n]=u.useState("amount"),[i,l]=u.useState(200),[o,c]=u.useState(""),[d,m]=u.useState({}),[p,h]=u.useState([]),[x,f]=u.useState([]),[g,b]=u.useState(!1),[v,y]=u.useState(null),[j,w]=u.useState(!1);u.useEffect(()=>{t&&(N(),_())},[t]);const N=async()=>{try{const e=await fetch("/api/withdrawal/methods",{credentials:"include"}),t=await e.json();h(t)}catch(e){console.error("Failed to fetch withdrawal methods:",e)}},_=async()=>{try{const e=await fetch("/api/users/payment-preferences",{credentials:"include"}),t=await e.json();f(t)}catch(e){console.error("Failed to fetch user preferences:",e)}};if(!t||!e)return null;const k=(e.gems_balance||0)>=200,S=p.find(e=>e.method_name===o),C="number"==typeof S?.fee_percentage?S.fee_percentage:0,O=i*C/100,E=i-O,P=e=>e.startsWith("crypto_")?Ns.jsx(Ft,{className:"w-5 h-5"}):"bank_account"===e?Ns.jsx(bt,{className:"w-5 h-5"}):"paypal"===e||"payoneer"===e?Ns.jsx(gr,{className:"w-5 h-5"}):Ns.jsx(Bt,{className:"w-5 h-5"}),T=e=>{const t=p.find(t=>t.method_name===e);if(!t)return[];try{return"string"==typeof t.required_fields?JSON.parse(t.required_fields):[]}catch{return[]}},A=e=>({wallet_address:"Wallet Address",network:"Network",email_address:"Email Address",account_holder_name:"Account Holder Name",bank_name:"Bank Name",account_number:"Account Number",routing_number:"Routing Number",swift_code:"SWIFT Code",country:"Country",full_name:"Full Name",address_line_1:"Address Line 1",address_line_2:"Address Line 2 (Optional)",city:"City",state:"State/Province",postal_code:"Postal Code",phone_number:"Phone Number"}[e]||e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())),M=e=>"email_address"===e?"email":"phone_number"===e?"tel":"text",D=e=>!e.includes("optional")&&"address_line_2"!==e,I=()=>{n("amount"),l(200),c(""),m({}),y(null),w(!1)},R=()=>{I(),r()},$=i>=200&&i<=(e.gems_balance||0),L=""!==o;return Ns.jsx(Us,{isOpen:t,onClose:R,maxWidth:"2xl",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex flex-col gap-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between border-b border-pr-surface-3 pb-4",children:[Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"Withdraw Gems"}),Ns.jsx("button",{onClick:R,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close withdrawal modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]}),k?Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsx("div",{className:"flex items-center space-x-2 mb-6",children:["amount","method","details","confirm"].map((e,t)=>Ns.jsxs("div",{className:"flex items-center",children:[Ns.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium "+(a===e?"bg-purple-500 text-white":["amount","method","details","confirm"].indexOf(a)>t?"bg-green-500 text-white":"bg-pr-surface-3 text-pr-text-2"),children:t+1}),t<3&&Ns.jsx("div",{className:"w-12 h-0.5 bg-pr-surface-3 mx-2"})]},e))}),"amount"===a&&Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Withdrawal Amount (Gems)"}),Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsx("input",{type:"number",value:i,onChange:e=>l(Math.max(200,parseInt(e.target.value)||200)),min:"200",max:e.gems_balance||0,className:"w-full px-4 py-3 border border-pr-surface-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"}),Ns.jsx("div",{className:"flex space-x-2",children:[200,500,1e3,e.gems_balance||0].filter((e,t,r)=>r.indexOf(e)===t&&e>=200).map(t=>Ns.jsx("button",{onClick:()=>l(t),className:"px-3 py-1 text-sm bg-pr-surface-2 hover:bg-pr-surface-3 rounded-full text-pr-text-1",children:t===e.gems_balance?"Max":t.toLocaleString()},t))})]})]}),Ns.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[Ns.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ns.jsx("span",{children:"Available Balance:"}),Ns.jsxs("span",{className:"font-medium",children:[e.gems_balance," gems"]})]}),Ns.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[Ns.jsx("span",{children:"Withdrawal Fee (2.5%):"}),Ns.jsxs("span",{className:"font-medium",children:["~",Math.ceil(.025*i)," gems"]})]})]}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsx("button",{onClick:R,className:"flex-1 px-4 py-2 border border-pr-surface-3 rounded-lg text-pr-text-1 font-medium hover:bg-pr-surface-2 transition-colors",children:"Cancel"}),Ns.jsx("button",{onClick:()=>n("method"),disabled:!$,className:"flex-1 bg-purple-500 hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Next"})]})]}),"method"===a&&Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-3",children:"Select Payment Method"}),x.length>0&&Ns.jsxs("div",{className:"mb-4",children:[Ns.jsx("h4",{className:"text-sm font-medium text-pr-text-2 mb-2",children:"Saved Methods"}),Ns.jsx("div",{className:"grid grid-cols-1 gap-2",children:x.map(e=>{const t=p.find(t=>t.method_name===e.payment_method);if(!t)return null;let r="";try{const t=e.preference_data?JSON.parse(e.preference_data):{};r=t.email_address?t.email_address:t.wallet_address?`${t.wallet_address.slice(0,6)}...${t.wallet_address.slice(-4)}`:t.account_number?`****${t.account_number.slice(-4)}`:"Saved method"}catch{r="Saved method"}return Ns.jsx("button",{onClick:()=>{c(e.payment_method);try{const t=e.preference_data?JSON.parse(e.preference_data):{};m(t??{})}catch{m({})}},className:"w-full p-3 border-2 rounded-lg text-left transition-colors "+(o===e.payment_method?"border-purple-500 bg-purple-50":"border-pr-surface-3 hover:border-pr-surface-3"),children:Ns.jsxs("div",{className:"flex items-center space-x-3",children:[P(e.payment_method),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-medium",children:t.display_name}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:r})]}),e.is_default&&Ns.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:"Default"})]})},e.id)})}),Ns.jsxs("div",{className:"relative my-4",children:[Ns.jsx("div",{className:"absolute inset-0 flex items-center",children:Ns.jsx("div",{className:"w-full border-t border-pr-surface-3"})}),Ns.jsx("div",{className:"relative flex justify-center text-sm",children:Ns.jsx("span",{className:"px-2 bg-pr-surface-card text-pr-text-2",children:"Or choose a new method"})})]})]}),Ns.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:p.filter(e=>e.is_active).map(e=>Ns.jsxs("button",{onClick:()=>c(e.method_name),className:"p-4 border-2 rounded-lg text-left transition-colors "+(o===e.method_name?"border-purple-500 bg-purple-50":"border-pr-surface-3 hover:border-pr-surface-3"),children:[Ns.jsxs("div",{className:"mb-2 flex items-center space-x-3",children:[P(e.method_name),Ns.jsx("span",{className:"font-medium",children:e.display_name})]}),e.processing_time&&Ns.jsx("p",{className:"text-xs text-pr-text-2",children:e.processing_time}),"number"==typeof e.min_amount&&Ns.jsxs("p",{className:"text-xs text-pr-text-2",children:["Min: ",e.min_amount," gems"]})]},e.method_name))})]}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsx("button",{onClick:()=>n("amount"),className:"flex-1 px-4 py-2 border border-pr-surface-3 rounded-lg text-pr-text-1 font-medium hover:bg-pr-surface-2 transition-colors",children:"Back"}),Ns.jsx("button",{onClick:()=>n("details"),disabled:!L,className:"flex-1 bg-purple-500 hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Next"})]})]}),"details"===a&&S&&Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-1",children:S.display_name}),S.processing_time&&Ns.jsxs("p",{className:"mb-4 text-sm text-pr-text-2",children:["Processing time: ",S.processing_time]})]}),Ns.jsx("div",{className:"space-y-4",children:T(o).map(e=>Ns.jsxs("div",{children:[Ns.jsxs("label",{className:"block text-sm font-medium text-pr-text-1 mb-1",children:[A(e),D(e)&&Ns.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),"network"===e&&o.startsWith("crypto_")?Ns.jsxs("select",{value:d[e]||"",onChange:t=>m(r=>({...r,[e]:t.target.value})),className:"w-full px-3 py-2 border border-pr-surface-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:D(e),children:[Ns.jsx("option",{value:"",children:"Select Network"}),Ns.jsx("option",{value:"mainnet",children:"Mainnet"}),Ns.jsx("option",{value:"ethereum",children:"Ethereum (ERC-20)"}),Ns.jsx("option",{value:"bsc",children:"Binance Smart Chain (BEP-20)"}),Ns.jsx("option",{value:"polygon",children:"Polygon"}),Ns.jsx("option",{value:"arbitrum",children:"Arbitrum"})]}):"country"===e?Ns.jsxs("select",{value:d[e]||"",onChange:t=>m(r=>({...r,[e]:t.target.value})),className:"w-full px-3 py-2 border border-pr-surface-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:D(e),children:[Ns.jsx("option",{value:"",children:"Select Country"}),Ns.jsx("option",{value:"US",children:"United States"}),Ns.jsx("option",{value:"CA",children:"Canada"}),Ns.jsx("option",{value:"GB",children:"United Kingdom"}),Ns.jsx("option",{value:"AU",children:"Australia"}),Ns.jsx("option",{value:"DE",children:"Germany"}),Ns.jsx("option",{value:"FR",children:"France"}),Ns.jsx("option",{value:"IT",children:"Italy"}),Ns.jsx("option",{value:"ES",children:"Spain"}),Ns.jsx("option",{value:"NL",children:"Netherlands"}),Ns.jsx("option",{value:"SE",children:"Sweden"}),Ns.jsx("option",{value:"NO",children:"Norway"}),Ns.jsx("option",{value:"DK",children:"Denmark"}),Ns.jsx("option",{value:"FI",children:"Finland"}),Ns.jsx("option",{value:"JP",children:"Japan"}),Ns.jsx("option",{value:"KR",children:"South Korea"}),Ns.jsx("option",{value:"SG",children:"Singapore"}),Ns.jsx("option",{value:"HK",children:"Hong Kong"}),Ns.jsx("option",{value:"IN",children:"India"}),Ns.jsx("option",{value:"BR",children:"Brazil"}),Ns.jsx("option",{value:"MX",children:"Mexico"})]}):Ns.jsx("input",{type:M(e),value:d[e]||"",onChange:t=>m(r=>({...r,[e]:t.target.value})),className:"w-full px-3 py-2 border border-pr-surface-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:D(e),placeholder:"wallet_address"===e?"Enter your wallet address":""})]},e))}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("input",{type:"checkbox",id:"saveAsDefault",checked:j,onChange:e=>w(e.target.checked),className:"w-4 h-4 text-purple-600 bg-pr-surface-2 border-pr-surface-3 rounded focus:ring-purple-500"}),Ns.jsx("label",{htmlFor:"saveAsDefault",className:"text-sm text-pr-text-1",children:"Save this payment method for future withdrawals"})]}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsx("button",{onClick:()=>n("method"),className:"flex-1 px-4 py-2 border border-pr-surface-3 rounded-lg text-pr-text-1 font-medium hover:bg-pr-surface-2 transition-colors",children:"Back"}),Ns.jsx("button",{onClick:()=>n("confirm"),disabled:!T(o).every(e=>!D(e)||d[e]&&""!==d[e].trim()),className:"flex-1 bg-purple-500 hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Review"})]})]}),"confirm"===a&&S&&Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-4",children:"Review Withdrawal Request"}),Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-4 space-y-3",children:[Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Withdrawal Amount:"}),Ns.jsxs("span",{className:"font-medium",children:[i," gems"]})]}),"number"==typeof S.fee_percentage&&Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsxs("span",{className:"text-pr-text-2",children:["Processing Fee (",S.fee_percentage,"%):"]}),Ns.jsxs("span",{className:"font-medium text-red-600",children:["-",O.toFixed(2)," gems"]})]}),Ns.jsx("div",{className:"border-t pt-2",children:Ns.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[Ns.jsx("span",{children:"Net Amount:"}),Ns.jsxs("span",{className:"text-green-600",children:[E.toFixed(2)," gems"]})]})})]}),Ns.jsxs("div",{className:"mt-4 p-4 border border-pr-surface-3 rounded-lg",children:[Ns.jsxs("h4",{className:"font-medium text-pr-text-1 mb-2",children:["Payment Method: ",S.display_name]}),Ns.jsx("div",{className:"text-sm text-pr-text-2 space-y-1",children:Object.entries(d).map(([e,t])=>Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsxs("span",{className:"capitalize",children:[A(e),":"]}),Ns.jsx("span",{className:"font-mono",children:e.includes("address")&&t.length>20?`${t.slice(0,8)}...${t.slice(-8)}`:t})]},e))})]}),Ns.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:Ns.jsxs("div",{className:"flex items-start space-x-3",children:[Ns.jsx(ns,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),Ns.jsxs("div",{className:"text-sm text-yellow-800",children:[Ns.jsx("p",{className:"font-medium mb-1",children:"Important Notice:"}),Ns.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[Ns.jsx("li",{children:"Withdrawal requests cannot be cancelled once submitted"}),S.processing_time&&Ns.jsxs("li",{children:["Processing time: ",S.processing_time]}),Ns.jsx("li",{children:"Ensure all payment details are correct"}),Ns.jsx("li",{children:"You will receive an email confirmation once processed"})]})]})]})})]}),v&&Ns.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:Ns.jsx("p",{className:"text-sm text-red-700",children:v})}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsx("button",{onClick:()=>n("details"),disabled:g,className:"flex-1 px-4 py-2 border border-pr-surface-3 rounded-lg text-pr-text-1 font-medium hover:bg-pr-surface-2 transition-colors disabled:opacity-50",children:"Back"}),Ns.jsx("button",{onClick:async()=>{b(!0),y(null);try{j&&await fetch("/api/users/payment-preferences",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({payment_method:o,preference_data:d,is_default:!0})});const e=await fetch("/api/withdrawal/request",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({amount:i,payment_method:o,payment_details:d})});if(e.ok)s(),r(),I();else{const t=await e.json();y(t.error||"Withdrawal request failed")}}catch(e){console.error("Withdrawal failed:",e),y("Network error occurred")}finally{b(!1)}},disabled:g,className:"flex-1 bg-green-500 hover:bg-green-600 disabled:opacity-50 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:g?Ns.jsx(pr,{className:"w-4 h-4 animate-spin"}):Ns.jsxs(Ns.Fragment,{children:[Ns.jsx(At,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Submit Withdrawal"})]})})]})]})]}):Ns.jsxs("div",{className:"space-y-4 text-center",children:[Ns.jsx(ns,{className:"mx-auto h-12 w-12 text-yellow-500"}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Insufficient Gems"}),Ns.jsx("p",{className:"text-pr-text-2",children:"You need at least 200 gems to request a withdrawal."}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:["Current balance: ",e.gems_balance||0," gems"]}),Ns.jsx("button",{onClick:R,className:"mt-2 rounded-lg bg-pr-surface-20 px-6 py-2 font-medium text-white transition-colors hover:bg-gray-600",children:"Close"})]})]})})}function vm({user:e,isOpen:t,onClose:r,onSuccess:s}){const[a,n]=u.useState([]),[i,l]=u.useState([]),[o,c]=u.useState(!1),[d,m]=u.useState(null),[p,h]=u.useState(""),[x,f]=u.useState({}),[g,b]=u.useState(!1),[v,y]=u.useState(null);u.useEffect(()=>{t&&j()},[t]);const j=async()=>{try{const[e,t]=await Promise.all([fetch("/api/users/payment-preferences",{credentials:"include"}),fetch("/api/withdrawal/methods",{credentials:"include"})]),r=await e.json(),s=await t.json();n(r),l(s)}catch(e){console.error("Failed to fetch data:",e)}};if(!t||!e)return null;const w=e=>e.startsWith("crypto_")?Ns.jsx(Ft,{className:"w-5 h-5"}):"bank_account"===e?Ns.jsx(bt,{className:"w-5 h-5"}):"paypal"===e||"payoneer"===e?Ns.jsx(gr,{className:"w-5 h-5"}):Ns.jsx(Ft,{className:"w-5 h-5"}),N=e=>{const t=i.find(t=>t.method_name===e);if(!t)return[];try{return JSON.parse(t.required_fields)}catch{return[]}},_=e=>({wallet_address:"Wallet Address",network:"Network",email_address:"Email Address",account_holder_name:"Account Holder Name",bank_name:"Bank Name",account_number:"Account Number",routing_number:"Routing Number",swift_code:"SWIFT Code",country:"Country",full_name:"Full Name",address_line_1:"Address Line 1",address_line_2:"Address Line 2",city:"City",state:"State/Province",postal_code:"Postal Code",phone_number:"Phone Number"}[e]||e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())),k=e=>{try{const t=JSON.parse(e.preference_data);return t.email_address?t.email_address:t.wallet_address?`${t.wallet_address.slice(0,8)}...${t.wallet_address.slice(-6)}`:t.account_number?`****${t.account_number.slice(-4)}`:t.full_name?t.full_name:"Payment method"}catch{return"Payment method"}},S=()=>{c(!1),m(null),h(""),f({}),y(null)};return Ns.jsx(Us,{isOpen:t,onClose:r,maxWidth:"4xl",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex flex-col gap-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between border-b border-pr-surface-3 pb-4",children:[Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"Payment Preferences"}),Ns.jsx("button",{onClick:r,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close payment preferences modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]}),Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{children:[Ns.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Saved Payment Methods"}),Ns.jsxs("button",{onClick:()=>c(!0),className:"flex items-center space-x-2 rounded-lg bg-purple-500 px-4 py-2 font-medium text-white transition-colors hover:bg-purple-600",children:[Ns.jsx(Rr,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Add Method"})]})]}),0===a.length?Ns.jsxs("div",{className:"rounded-lg bg-pr-surface-2 py-8 text-center",children:[Ns.jsx(Ft,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),Ns.jsx("h3",{className:"mb-2 text-lg font-semibold text-pr-text-1",children:"No payment methods saved"}),Ns.jsx("p",{className:"mb-4 text-pr-text-2",children:"Add a payment method to make withdrawals easier"}),Ns.jsx("button",{onClick:()=>c(!0),className:"rounded-lg bg-purple-500 px-6 py-2 font-medium text-white transition-colors hover:bg-purple-600",children:"Add Payment Method"})]}):Ns.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:a.map(e=>{const t=i.find(t=>t.method_name===e.payment_method);return Ns.jsxs("div",{className:"rounded-lg border border-pr-surface-3 p-4",children:[Ns.jsxs("div",{className:"mb-3 flex items-start justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[w(e.payment_method),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-medium text-pr-text-1",children:t?.display_name}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:k(e)})]})]}),e.is_default&&Ns.jsxs("span",{className:"flex items-center space-x-1 rounded-full bg-green-100 px-2 py-1 text-xs text-green-700",children:[Ns.jsx(Zr,{className:"h-3 w-3"}),Ns.jsx("span",{children:"Default"})]})]}),Ns.jsxs("div",{className:"flex space-x-2",children:[!e.is_default&&Ns.jsx("button",{onClick:()=>(async e=>{try{(await fetch(`/api/users/payment-preferences/${e}/set-default`,{method:"POST",credentials:"include"})).ok&&(await j(),s())}catch(t){console.error("Failed to set default:",t)}})(e.id),className:"flex-1 rounded-lg bg-pr-surface-2 px-3 py-1 text-xs text-pr-text-1 transition-colors hover:bg-pr-surface-3",children:"Set Default"}),Ns.jsxs("button",{onClick:()=>(e=>{m(e.id),h(e.payment_method);try{f(JSON.parse(e.preference_data))}catch{f({})}c(!0)})(e),className:"flex-1 flex items-center justify-center space-x-1 rounded-lg bg-blue-100 px-3 py-1 text-xs text-blue-700 transition-colors hover:bg-blue-200",children:[Ns.jsx(Tr,{className:"h-3 w-3"}),Ns.jsx("span",{children:"Edit"})]}),Ns.jsxs("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this payment method?"))try{(await fetch(`/api/users/payment-preferences/${e}`,{method:"DELETE",credentials:"include"})).ok&&(await j(),s())}catch(t){console.error("Failed to delete preference:",t)}})(e.id),className:"flex-1 flex items-center justify-center space-x-1 rounded-lg bg-red-100 px-3 py-1 text-xs text-red-700 transition-colors hover:bg-red-200",children:[Ns.jsx(ss,{className:"h-3 w-3"}),Ns.jsx("span",{children:"Delete"})]})]})]},e.id)})})]}),o&&Ns.jsxs("div",{className:"border-t pt-6",children:[Ns.jsx("h3",{className:"mb-4 text-lg font-semibold text-pr-text-1",children:d?"Edit Payment Method":"Add Payment Method"}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"mb-2 block text-sm font-medium text-pr-text-1",children:"Payment Method"}),Ns.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:i.filter(e=>e.is_active).map(e=>Ns.jsxs("button",{onClick:()=>h(e.method_name),disabled:null!==d,className:`rounded-lg border-2 p-3 text-left transition-colors ${p===e.method_name?"border-purple-500 bg-purple-50":"border-pr-surface-3 hover:border-pr-surface-3"} ${d?"cursor-not-allowed opacity-50":""}`,children:[Ns.jsxs("div",{className:"mb-1 flex items-center space-x-2",children:[w(e.method_name),Ns.jsx("span",{className:"text-sm font-medium",children:e.display_name})]}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:e.processing_time})]},e.method_name))})]}),p&&Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsx("h4",{className:"font-medium text-pr-text-1",children:"Payment Details"}),N(p).map(e=>Ns.jsxs("div",{children:[Ns.jsxs("label",{className:"mb-1 block text-sm font-medium text-pr-text-1",children:[_(e),"address_line_2"!==e&&Ns.jsx("span",{className:"ml-1 text-red-500",children:"*"})]}),"network"===e&&p.startsWith("crypto_")?Ns.jsxs("select",{value:x[e]||"",onChange:t=>f(r=>({...r,[e]:t.target.value})),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[Ns.jsx("option",{value:"",children:"Select Network"}),Ns.jsx("option",{value:"mainnet",children:"Mainnet"}),Ns.jsx("option",{value:"ethereum",children:"Ethereum (ERC-20)"}),Ns.jsx("option",{value:"bsc",children:"Binance Smart Chain (BEP-20)"}),Ns.jsx("option",{value:"polygon",children:"Polygon"}),Ns.jsx("option",{value:"arbitrum",children:"Arbitrum"})]}):"country"===e?Ns.jsxs("select",{value:x[e]||"",onChange:t=>f(r=>({...r,[e]:t.target.value})),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[Ns.jsx("option",{value:"",children:"Select Country"}),Ns.jsx("option",{value:"US",children:"United States"}),Ns.jsx("option",{value:"CA",children:"Canada"}),Ns.jsx("option",{value:"GB",children:"United Kingdom"}),Ns.jsx("option",{value:"AU",children:"Australia"}),Ns.jsx("option",{value:"DE",children:"Germany"}),Ns.jsx("option",{value:"FR",children:"France"}),Ns.jsx("option",{value:"IT",children:"Italy"}),Ns.jsx("option",{value:"ES",children:"Spain"}),Ns.jsx("option",{value:"NL",children:"Netherlands"}),Ns.jsx("option",{value:"JP",children:"Japan"}),Ns.jsx("option",{value:"SG",children:"Singapore"}),Ns.jsx("option",{value:"IN",children:"India"}),Ns.jsx("option",{value:"BR",children:"Brazil"}),Ns.jsx("option",{value:"MX",children:"Mexico"})]}):Ns.jsx("input",{type:"email_address"===e?"email":"phone_number"===e?"tel":"text",value:x[e]||"",onChange:t=>f(r=>({...r,[e]:t.target.value})),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",required:"address_line_2"!==e})]},e))]}),v&&Ns.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3",children:Ns.jsx("p",{className:"text-sm text-red-700",children:v})}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsx("button",{onClick:S,className:"flex-1 rounded-lg border border-pr-surface-3 px-4 py-2 font-medium text-pr-text-1 transition-colors hover:bg-pr-surface-2",children:"Cancel"}),Ns.jsx("button",{onClick:async()=>{if(p&&0!==Object.keys(x).length){b(!0),y(null);try{const e=await fetch("/api/users/payment-preferences",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({payment_method:p,preference_data:x,is_default:0===a.length})});if(e.ok)await j(),S(),s();else{const t=await e.json();y(t.error||"Failed to save payment preference")}}catch(e){console.error("Failed to save preference:",e),y("Network error occurred")}finally{b(!1)}}},disabled:!p||g||N(p).some(e=>"address_line_2"!==e&&(!x[e]||""===x[e].trim())),className:"flex-1 rounded-lg bg-purple-500 px-4 py-2 font-medium text-white transition-colors hover:bg-purple-600 disabled:cursor-not-allowed disabled:opacity-50",children:g?"Saving...":d?"Update Method":"Save Method"})]})]})]})]})]})})}const ym=[{id:"starter",gems:10,price:11,bonus:0},{id:"basic",gems:25,price:27.5,bonus:0},{id:"popular",gems:47,price:55,bonus:3,popular:!0,savings:"Best Value"},{id:"premium",gems:88,price:110,bonus:12,savings:"12% Bonus"},{id:"ultimate",gems:210,price:275,bonus:40,savings:"16% Bonus"}];function jm({user:e,isOpen:t,onClose:r}){const[s,a]=u.useState("popular"),[n,i]=u.useState(!1),[l,o]=u.useState(null);if(!t)return null;const c=ym.find(e=>e.id===s);return Ns.jsx(Us,{isOpen:t,onClose:r,maxWidth:"4xl",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex flex-col gap-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between border-b border-pr-surface-3 pb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:Ns.jsx(Ut,{className:"w-6 h-6 text-white"})}),Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"Gem Store"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Purchase gems to participate in drops and forecasts"})]})]}),Ns.jsx("button",{onClick:r,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close gem store modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]}),!e&&Ns.jsxs("div",{className:"space-y-4 text-center",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Loading user data..."}),Ns.jsx("p",{className:"text-pr-text-2",children:"Please wait while we load your account information."}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"If this persists, try refreshing the page."}),Ns.jsx("button",{onClick:()=>window.location.reload(),className:"mx-auto w-fit rounded-lg bg-blue-500 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-600",children:"Reload Page"})]}),e&&Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsx("div",{className:"rounded-xl bg-gradient-to-r from-purple-50 to-pink-50 p-4",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(Ut,{className:"w-8 h-8 text-purple-600"}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-lg font-semibold text-purple-900",children:"Current Balance"}),Ns.jsx("p",{className:"text-sm text-purple-600",children:"Your gem wallet"})]})]}),Ns.jsx("p",{className:"text-3xl font-bold text-purple-900",children:e.gems_balance})]})}),Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"mb-4 text-lg font-semibold text-pr-text-1",children:"Choose Your Package"}),Ns.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:ym.map(e=>Ns.jsxs("div",{onClick:()=>a(e.id),className:"relative border-2 rounded-xl p-6 cursor-pointer transition-all duration-200 "+(s===e.id?"border-purple-500 bg-purple-50 shadow-lg scale-105":"border-pr-surface-3 hover:border-pr-surface-3 hover:shadow-md"),children:[e.popular&&Ns.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:Ns.jsxs("span",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1",children:[Ns.jsx(Zr,{className:"w-3 h-3"}),Ns.jsx("span",{children:"Most Popular"})]})}),e.savings&&!e.popular&&Ns.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:Ns.jsx("span",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-3 py-1 rounded-full text-xs font-medium",children:e.savings})}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4",children:Ns.jsx(Ut,{className:"w-8 h-8 text-white"})}),Ns.jsx("h4",{className:"text-lg font-semibold text-pr-text-1 capitalize mb-2",children:e.id}),Ns.jsxs("div",{className:"mb-4",children:[Ns.jsxs("p",{className:"text-3xl font-bold text-pr-text-1",children:["$",e.price]}),Ns.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-1",children:[Ns.jsxs("span",{className:"text-lg font-semibold text-purple-600",children:[e.gems," gems"]}),e.bonus>0&&Ns.jsxs(Ns.Fragment,{children:[Ns.jsx("span",{className:"text-gray-400",children:"+"}),Ns.jsxs("span",{className:"text-lg font-semibold text-green-600",children:[e.bonus," bonus"]})]})]}),Ns.jsxs("p",{className:"text-sm text-pr-text-2 mt-1",children:["Total: ",e.gems+e.bonus," gems"]})]}),Ns.jsxs("div",{className:"space-y-2 text-sm text-pr-text-2",children:[Ns.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[Ns.jsx(fs,{className:"w-4 h-4 text-orange-500"}),Ns.jsx("span",{children:"Participate in drops"})]}),Ns.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[Ns.jsx(Ft,{className:"w-4 h-4 text-blue-500"}),Ns.jsx("span",{children:"Place predictions"})]}),e.bonus>0&&Ns.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[Ns.jsx(Zr,{className:"w-4 h-4 text-yellow-500"}),Ns.jsxs("span",{children:[Math.round(e.bonus/e.gems*100),"% bonus gems"]})]})]})]})]},e.id))})]}),Ns.jsxs("div",{className:"rounded-lg bg-pr-surface-2 p-4",children:[Ns.jsxs("div",{className:"mb-3 flex items-center space-x-3",children:[Ns.jsx(Vr,{className:"h-5 w-5 text-green-600"}),Ns.jsx("h4",{className:"font-medium text-pr-text-1",children:"Secure Payment"})]}),Ns.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm text-pr-text-2 md:grid-cols-3",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),Ns.jsx("span",{children:"256-bit SSL encryption"})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),Ns.jsx("span",{children:"PCI DSS compliant"})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),Ns.jsx("span",{children:"Powered by Stripe"})]})]})]}),c&&Ns.jsxs("div",{className:"rounded-lg border border-pr-surface-3 bg-pr-surface-card p-4",children:[Ns.jsx("h4",{className:"mb-3 font-medium text-pr-text-1",children:"Purchase Summary"}),Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Package:"}),Ns.jsx("span",{className:"font-medium capitalize",children:c.id})]}),Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Base Gems:"}),Ns.jsx("span",{className:"font-medium",children:c.gems})]}),c.bonus>0&&Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Bonus Gems:"}),Ns.jsxs("span",{className:"font-medium text-green-600",children:["+",c.bonus]})]}),Ns.jsxs("div",{className:"border-t pt-2",children:[Ns.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[Ns.jsx("span",{children:"Total Gems:"}),Ns.jsx("span",{className:"text-purple-600",children:c.gems+c.bonus})]}),Ns.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[Ns.jsx("span",{children:"Total Price:"}),Ns.jsxs("span",{children:["$",c.price]})]})]})]})]}),l&&Ns.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3",children:Ns.jsx("p",{className:"text-sm text-red-700",children:l})}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsx("button",{onClick:r,disabled:n,className:"flex-1 rounded-lg border border-pr-surface-3 px-6 py-3 font-medium text-pr-text-1 transition-colors hover:bg-pr-surface-2 disabled:opacity-50",children:"Cancel"}),Ns.jsx("button",{onClick:async()=>{const e=ym.find(e=>e.id===s);if(e){i(!0),o(null);try{const t=await fetch("/api/payments/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({package_id:s,gems:e.gems+e.bonus,price:e.price})});if(t.ok){const{checkout_url:e}=await t.json();window.location.href=e}else{const e=await t.json();o(e.error||"Failed to create payment session")}}catch(t){console.error("Payment failed:",t),o("Payment processing failed. Please try again.")}finally{i(!1)}}},disabled:n||!c,className:"flex-[1.5] rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 px-6 py-3 font-medium text-white transition-all duration-200 hover:from-purple-600 hover:to-pink-600 disabled:cursor-not-allowed disabled:opacity-50",children:n?Ns.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent"}):Ns.jsxs(Ns.Fragment,{children:[Ns.jsx(Ft,{className:"w-5 h-5"}),Ns.jsxs("span",{children:["Purchase $",c?.price," - ",c?c.gems+c.bonus:0," Gems"]})]})})]}),Ns.jsx("p",{className:"mt-4 text-center text-xs text-pr-text-2",children:"By purchasing gems, you agree to our Terms of Service. Gems are virtual currency and have no real-world value. All sales are final and non-refundable."})]})]})})}function wm(){const{user:e,redirectToLogin:t}=Ls(),[r,s]=u.useState(null),[a,n]=u.useState(!1);return Ns.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mt-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Ns.jsx(ns,{className:"w-5 h-5 text-yellow-600"}),Ns.jsx("h3",{className:"text-lg font-semibold text-yellow-800",children:"Authentication Debugger"})]}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsxs("button",{onClick:async()=>{n(!0);try{console.log("=== COMPREHENSIVE AUTH DEBUG ===");const t=document.cookie;console.log("1. Cookies:",t);const r=t.includes("mocha_session_token"),a=na(),n=await fetch("/api/users/me",{credentials:"include",headers:a}),i=await n.text();let l=null;try{l=JSON.parse(i)}catch(dF){console.log("Mocha auth response not JSON:",i)}console.log("2. Mocha auth response:",{status:n.status,data:l,rawText:i});const o=await fetch("/api/app/users/me",{credentials:"include",headers:a}),c=await o.text();let d=null;try{d=JSON.parse(c)}catch(dF){console.log("App user response not JSON:",c)}console.log("3. App user response:",{status:o.status,data:d,rawText:c}),console.log("4. React Auth Provider state:",{user:e,hasUser:!!e,userId:e?.id,userEmail:e?.email});const u={timestamp:(new Date).toISOString(),cookies:{present:!!t,count:t.split(";").length,hasSessionToken:r,raw:t},mochaAuth:{status:n.status,statusText:n.statusText,data:l,headers:Object.fromEntries(n.headers.entries())},appUser:{status:o.status,statusText:o.statusText,data:d,headers:Object.fromEntries(o.headers.entries())},reactAuth:{hasUser:!!e,user:e}};s(u),console.log("=== DEBUG COMPLETE ===",u)}catch(t){console.error("Auth debug failed:",t),s({error:t instanceof Error?t.message:"Unknown error"})}finally{n(!1)}},disabled:a,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[a?Ns.jsx($r,{className:"w-4 h-4 animate-spin"}):Ns.jsx(At,{className:"w-4 h-4"}),Ns.jsx("span",{children:a?"Testing...":"Run Full Auth Test"})]}),Ns.jsx("button",{onClick:()=>{localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{const t=e.indexOf("="),r=t>-1?e.substr(0,t):e;document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/",document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain="+window.location.hostname}),alert("All data cleared. Please refresh the page.")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Clear All Data"}),Ns.jsxs("button",{onClick:async()=>{try{await t()}catch(e){console.error("Force login failed:",e),alert("Login redirect failed. Check console for details.")}},className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[Ns.jsx(xr,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Force Login"})]})]}),r&&Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg p-4 border",children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1 mb-2",children:"Debug Results:"}),Ns.jsx("pre",{className:"text-xs text-pr-text-1 overflow-auto max-h-96 bg-pr-surface-2 p-3 rounded",children:JSON.stringify(r,null,2)})]}),Ns.jsxs("div",{className:"text-sm text-yellow-700",children:[Ns.jsx("p",{children:Ns.jsx("strong",{children:"Instructions:"})}),Ns.jsxs("ol",{className:"list-decimal list-inside space-y-1 mt-2",children:[Ns.jsx("li",{children:'Click "Run Full Auth Test" to diagnose authentication issues'}),Ns.jsx("li",{children:'If authentication is broken, try "Clear All Data" then "Force Login"'}),Ns.jsx("li",{children:"Check the debug results to see exactly what's failing"}),Ns.jsx("li",{children:"All debug info is also logged to the browser console"})]})]})]})]})}function Nm({isOpen:e,onClose:t,holding:r,onSuccess:s}){const a=r?Math.min(r.available_to_sell??0,r.owned_shares??0):0,n=r?.current_price??0,[i,l]=u.useState(a),[o,c]=u.useState(n),[d,m]=u.useState(!1),[p,h]=u.useState(null);if(u.useEffect(()=>{r&&e&&(l(Math.min(r.available_to_sell??0,r.owned_shares??0)),c(r.current_price??0),h(null))},[r,e]),!e||!r)return null;const x=()=>{d||(r&&(l(Math.min(r.available_to_sell??0,r.owned_shares??0)),c(r.current_price??0),h(null)),t())};return Ns.jsx(Us,{isOpen:e,onClose:x,maxWidth:"lg",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex max-h-[85vh] flex-col overflow-hidden rounded-2xl bg-pr-surface-card shadow-xl",children:[Ns.jsxs("div",{className:"flex items-center justify-between border-b border-pr-surface-3 px-6 py-6",children:[Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-xl font-semibold text-pr-text-1",children:"List Shares for Resale"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:r.content_title})]}),Ns.jsx("button",{onClick:x,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close list shares modal",children:Ns.jsx("span",{className:"text-lg leading-none",children:""})})]}),Ns.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),r)if(i<=0||o<=0)h("Enter a valid quantity and price.");else{m(!0),h(null);try{await(async e=>{const t=await la("/api/shares/listings",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){const e=await t.json().catch(()=>({}));throw new Error(e.error||"Failed to create listing")}return t.json()})({content_id:r.content_id,content_title:r.content_title,content_thumbnail:r.content_thumbnail,quantity:i,ask_price:o}),s?.(),x()}catch(t){h(t instanceof Error?t.message:"Failed to create listing")}finally{m(!1)}}},className:"flex-1 overflow-y-auto px-6 pb-6 pt-4 space-y-6",children:[Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1",children:"Quantity"}),Ns.jsx("input",{type:"number",min:1,max:r.available_to_sell,value:i,onChange:e=>l(Number(e.target.value)),className:"mt-2 w-full rounded-lg border border-pr-surface-3 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),Ns.jsxs("p",{className:"mt-1 text-xs text-pr-text-2",children:["Available: ",r.available_to_sell," shares"]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1",children:"Ask Price (per share)"}),Ns.jsx("input",{type:"number",min:.01,step:.01,value:o,onChange:e=>c(Number(e.target.value)),className:"mt-2 w-full rounded-lg border border-pr-surface-3 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),Ns.jsxs("p",{className:"mt-1 text-xs text-pr-text-2",children:["Market price ",r.current_price.toFixed(2)]})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-4 text-sm text-pr-text-2",children:[Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{children:"Estimated proceeds"}),Ns.jsxs("span",{className:"font-medium text-pr-text-1",children:["$",(i*o).toFixed(2)]})]}),Ns.jsxs("div",{className:"flex justify-between mt-2",children:[Ns.jsx("span",{children:"Transaction fee (2.5%)"}),Ns.jsxs("span",{children:["$",(i*o*.025).toFixed(2)]})]}),Ns.jsxs("div",{className:"flex justify-between mt-2 text-green-600 font-semibold",children:[Ns.jsx("span",{children:"Net payout"}),Ns.jsxs("span",{children:["$",(i*o*.975).toFixed(2)]})]})]}),p&&Ns.jsx("p",{className:"text-sm text-red-600",children:p}),Ns.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[Ns.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 text-sm font-medium text-pr-text-2 hover:text-pr-text-1",children:"Cancel"}),Ns.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg shadow-sm hover:bg-orange-700 disabled:opacity-60",children:d?"Listing":"List Shares"})]})]})]})})}const _m=()=>[{content_id:"content-demo-1",content_title:"Launch Campaign: Social Buzz",content_thumbnail:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=600&q=80",creator_id:"00000000-0000-0000-0000-000000000001",creator_name:"Demo Creator",creator_avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=demo_content",platform:"instagram",owned_shares:180,available_to_sell:60,avg_cost:8.75,current_price:12.5,market_value:2250,unrealized_gain:675,day_change_pct:3.2,week_change_pct:8.5,month_change_pct:22.4,last_trade_at:new Date(Date.now()-72e5).toISOString(),is_listed:!0,listing_id:"listing-demo-1",visibility:"public"},{content_id:"content-demo-2",content_title:"Creator Toolkit Walkthrough",content_thumbnail:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&w=600&q=80",creator_id:"00000000-0000-0000-0000-000000000002",creator_name:"Creator Collective",creator_avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=creator_collective",platform:"youtube",owned_shares:95,available_to_sell:95,avg_cost:15,current_price:18.75,market_value:1781.25,unrealized_gain:356.25,day_change_pct:1.2,week_change_pct:4.7,month_change_pct:12.8,last_trade_at:new Date(Date.now()-216e5).toISOString(),is_listed:!1,visibility:"public"}],km=()=>[{id:"prediction-demo-1",forecast_id:"forecast-demo-1",content_title:"Creator Toolkit Walkthrough",platform:"youtube",prediction_side:"over",amount:150,potential_payout:315,status:"active",result:void 0,created_at:new Date(Date.now()-2592e5).toISOString(),resolved_at:void 0},{id:"prediction-demo-2",forecast_id:"forecast-demo-2",content_title:"Launch Day Reach",platform:"instagram",prediction_side:"under",amount:80,potential_payout:152,status:"settled",result:"won",created_at:new Date(Date.now()-10368e5).toISOString(),resolved_at:new Date(Date.now()-864e6).toISOString()}],Sm=e=>{const t=_m(),r=t.find(t=>t.content_id===e)||t[0],s=Date.now();return{holding:r,content:{description:"Behind-the-scenes look at the launch strategy, featuring creator testimonials and performance metrics.",genres:["Campaign Spotlight","Community"],tags:["launch","growth","community"],published_at:new Date(s-6048e5).toISOString(),total_views:128e3,engagement_rate:12.4,earnings_to_date:4320},performance:{history:Array.from({length:14},(e,t)=>({date:new Date(s-24*(13-t)*60*60*1e3).toISOString().split("T")[0],price:r.current_price*(.85+.01*t),volume:Math.round(120*Math.random()+40)})),ledger:[{id:"txn-1",type:"purchase",quantity:r.owned_shares,price:r.avg_cost,timestamp:new Date(s-10368e5).toISOString()},{id:"txn-2",type:"dividend",quantity:0,price:120,timestamp:new Date(s-3456e5).toISOString()}]},marketplace:{listings:[{id:"listing-history-1",quantity:40,ask_price:11.8,status:"filled",filled_at:new Date(s-432e6).toISOString()}],offers:[{id:"offer-history-1",quantity:30,bid_price:12.6,status:"pending",buyer_name:"Marketplace Analyst",message:"Happy to take this block before launch day finale."}]}}},Cm=e=>{const t=km(),r=t.find(t=>t.id===e)||t[0],s=Date.now();return{prediction:r,forecast:{metric:"7-day reach",target:"125K",odds:2.1,expires_at:new Date(s+3456e5).toISOString(),creator_projection:"Over performance expected due to paid boosts and influencer cross-promotions scheduled mid-week."},trajectory:Array.from({length:10},(e,t)=>{const r=new Date(s-24*(9-t)*60*60*1e3),a=6e4+6500*t+Math.round(2500*Math.random());return{date:r.toISOString().split("T")[0],actual:a,expected:55e3+7e3*t}}),participants:[{username:"growth_analyst",amount:150,side:"over",status:"active"},{username:"launch_partner",amount:90,side:"under",status:"active"}]}},Om=async e=>{try{const t=e?`?userId=${encodeURIComponent(e)}`:"",r=await la(`/api/portfolio/holdings${t}`,{credentials:"include"});if(!r.ok)return _m();return(await r.json()).holdings||_m()}catch(t){return console.error("Failed to fetch portfolio holdings:",t),_m()}};function Em(e){var t,r,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Em(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function Pm(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Em(e))&&(s&&(s+=" "),s+=t);return s}var Tm=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Am(e){return"string"==typeof e&&Tm.includes(e)}var Mm=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Dm(e){return"string"==typeof e&&Mm.includes(e)}function Im(e){return"string"==typeof e&&e.startsWith("data-")}function Rm(e){var t=Object.entries(e).filter(e=>{var[t]=e;return Dm(t)||Im(t)});return Object.fromEntries(t)}function $m(e){return null==e?null:u.isValidElement(e)&&"object"==typeof e.props&&null!==e.props?Rm(e.props):"object"!=typeof e||Array.isArray(e)?null:Rm(e)}function Lm(e){var t=Object.entries(e).filter(e=>{var[t]=e;return Dm(t)||Im(t)||Am(t)});return Object.fromEntries(t)}var Fm=["children","width","height","viewBox","className","style","title","desc"];function zm(){return zm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},zm.apply(null,arguments)}var Um=u.forwardRef((e,t)=>{var{children:r,width:s,height:a,viewBox:n,className:i,style:l,title:o,desc:c}=e,d=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,Fm),m=n||{width:s,height:a,x:0,y:0},p=Pm("recharts-surface",i);return u.createElement("svg",zm({},Lm(d),{className:p,width:s,height:a,style:l,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),u.createElement("title",null,o),u.createElement("desc",null,c),r)}),Bm=["children","className"];function qm(){return qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},qm.apply(null,arguments)}var Wm=u.forwardRef((e,t)=>{var{children:r,className:s}=e,a=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,Bm),n=Pm("recharts-layer",s);return u.createElement("g",qm({className:n},Lm(a),{ref:t}),r)}),Km=u.createContext(null);function Vm(e){return function(){return e}}const Hm=Math.cos,Gm=Math.sin,Ym=Math.sqrt,Jm=Math.PI,Zm=2*Jm,Qm=Math.PI,Xm=2*Qm,ep=1e-6,tp=Xm-ep;function rp(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class sp{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?rp:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return rp;const r=10**t;return function(e){this._+=e[0];for(let t=1,s=e.length;t<s;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,s){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,t,r,s,a,n){this._append`C${+e},${+t},${+r},${+s},${this._x1=+a},${this._y1=+n}`}arcTo(e,t,r,s,a){if(e=+e,t=+t,r=+r,s=+s,(a=+a)<0)throw new Error(`negative radius: ${a}`);let n=this._x1,i=this._y1,l=r-e,o=s-t,c=n-e,d=i-t,u=c*c+d*d;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(u>ep)if(Math.abs(d*l-o*c)>ep&&a){let m=r-n,p=s-i,h=l*l+o*o,x=m*m+p*p,f=Math.sqrt(h),g=Math.sqrt(u),b=a*Math.tan((Qm-Math.acos((h+u-x)/(2*f*g)))/2),v=b/g,y=b/f;Math.abs(v-1)>ep&&this._append`L${e+v*c},${t+v*d}`,this._append`A${a},${a},0,0,${+(d*m>c*p)},${this._x1=e+y*l},${this._y1=t+y*o}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,r,s,a,n){if(e=+e,t=+t,n=!!n,(r=+r)<0)throw new Error(`negative radius: ${r}`);let i=r*Math.cos(s),l=r*Math.sin(s),o=e+i,c=t+l,d=1^n,u=n?s-a:a-s;null===this._x1?this._append`M${o},${c}`:(Math.abs(this._x1-o)>ep||Math.abs(this._y1-c)>ep)&&this._append`L${o},${c}`,r&&(u<0&&(u=u%Xm+Xm),u>tp?this._append`A${r},${r},0,1,${d},${e-i},${t-l}A${r},${r},0,1,${d},${this._x1=o},${this._y1=c}`:u>ep&&this._append`A${r},${r},0,${+(u>=Qm)},${d},${this._x1=e+r*Math.cos(a)},${this._y1=t+r*Math.sin(a)}`)}rect(e,t,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function ap(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError(`invalid digits: ${r}`);t=e}return e},()=>new sp(t)}function np(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function ip(e){this._context=e}function lp(e){return new ip(e)}function op(e){return e[0]}function cp(e){return e[1]}function dp(e,t){var r=Vm(!0),s=null,a=lp,n=null,i=ap(l);function l(l){var o,c,d,u=(l=np(l)).length,m=!1;for(null==s&&(n=a(d=i())),o=0;o<=u;++o)!(o<u&&r(c=l[o],o,l))===m&&((m=!m)?n.lineStart():n.lineEnd()),m&&n.point(+e(c,o,l),+t(c,o,l));if(d)return n=null,d+""||null}return e="function"==typeof e?e:void 0===e?op:Vm(e),t="function"==typeof t?t:void 0===t?cp:Vm(t),l.x=function(t){return arguments.length?(e="function"==typeof t?t:Vm(+t),l):e},l.y=function(e){return arguments.length?(t="function"==typeof e?e:Vm(+e),l):t},l.defined=function(e){return arguments.length?(r="function"==typeof e?e:Vm(!!e),l):r},l.curve=function(e){return arguments.length?(a=e,null!=s&&(n=a(s)),l):a},l.context=function(e){return arguments.length?(null==e?s=n=null:n=a(s=e),l):s},l}function up(e,t,r){var s=null,a=Vm(!0),n=null,i=lp,l=null,o=ap(c);function c(c){var d,u,m,p,h,x=(c=np(c)).length,f=!1,g=new Array(x),b=new Array(x);for(null==n&&(l=i(h=o())),d=0;d<=x;++d){if(!(d<x&&a(p=c[d],d,c))===f)if(f=!f)u=d,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=d-1;m>=u;--m)l.point(g[m],b[m]);l.lineEnd(),l.areaEnd()}f&&(g[d]=+e(p,d,c),b[d]=+t(p,d,c),l.point(s?+s(p,d,c):g[d],r?+r(p,d,c):b[d]))}if(h)return l=null,h+""||null}function d(){return dp().defined(a).curve(i).context(n)}return e="function"==typeof e?e:void 0===e?op:Vm(+e),t="function"==typeof t?t:Vm(void 0===t?0:+t),r="function"==typeof r?r:void 0===r?cp:Vm(+r),c.x=function(t){return arguments.length?(e="function"==typeof t?t:Vm(+t),s=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:Vm(+t),c):e},c.x1=function(e){return arguments.length?(s=null==e?null:"function"==typeof e?e:Vm(+e),c):s},c.y=function(e){return arguments.length?(t="function"==typeof e?e:Vm(+e),r=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:Vm(+e),c):t},c.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Vm(+e),c):r},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(r)},c.lineX1=function(){return d().x(s).y(t)},c.defined=function(e){return arguments.length?(a="function"==typeof e?e:Vm(!!e),c):a},c.curve=function(e){return arguments.length?(i=e,null!=n&&(l=i(n)),c):i},c.context=function(e){return arguments.length?(null==e?n=l=null:l=i(n=e),c):n},c}ip.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class mp{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}const pp={draw(e,t){const r=Ym(t/Jm);e.moveTo(r,0),e.arc(0,0,r,0,Zm)}},hp={draw(e,t){const r=Ym(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},xp=Ym(1/3),fp=2*xp,gp={draw(e,t){const r=Ym(t/fp),s=r*xp;e.moveTo(0,-r),e.lineTo(s,0),e.lineTo(0,r),e.lineTo(-s,0),e.closePath()}},bp={draw(e,t){const r=Ym(t),s=-r/2;e.rect(s,s,r,r)}},vp=Gm(Jm/10)/Gm(7*Jm/10),yp=Gm(Zm/10)*vp,jp=-Hm(Zm/10)*vp,wp={draw(e,t){const r=Ym(.8908130915292852*t),s=yp*r,a=jp*r;e.moveTo(0,-r),e.lineTo(s,a);for(let n=1;n<5;++n){const t=Zm*n/5,i=Hm(t),l=Gm(t);e.lineTo(l*r,-i*r),e.lineTo(i*s-l*a,l*s+i*a)}e.closePath()}},Np=Ym(3),_p={draw(e,t){const r=-Ym(t/(3*Np));e.moveTo(0,2*r),e.lineTo(-Np*r,-r),e.lineTo(Np*r,-r),e.closePath()}},kp=-.5,Sp=Ym(3)/2,Cp=1/Ym(12),Op=3*(Cp/2+1),Ep={draw(e,t){const r=Ym(t/Op),s=r/2,a=r*Cp,n=s,i=r*Cp+r,l=-n,o=i;e.moveTo(s,a),e.lineTo(n,i),e.lineTo(l,o),e.lineTo(kp*s-Sp*a,Sp*s+kp*a),e.lineTo(kp*n-Sp*i,Sp*n+kp*i),e.lineTo(kp*l-Sp*o,Sp*l+kp*o),e.lineTo(kp*s+Sp*a,kp*a-Sp*s),e.lineTo(kp*n+Sp*i,kp*i-Sp*n),e.lineTo(kp*l+Sp*o,kp*o-Sp*l),e.closePath()}};function Pp(){}function Tp(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Ap(e){this._context=e}function Mp(e){this._context=e}function Dp(e){this._context=e}function Ip(e){this._context=e}function Rp(e){return e<0?-1:1}function $p(e,t,r){var s=e._x1-e._x0,a=t-e._x1,n=(e._y1-e._y0)/(s||a<0&&-0),i=(r-e._y1)/(a||s<0&&-0),l=(n*a+i*s)/(s+a);return(Rp(n)+Rp(i))*Math.min(Math.abs(n),Math.abs(i),.5*Math.abs(l))||0}function Lp(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Fp(e,t,r){var s=e._x0,a=e._y0,n=e._x1,i=e._y1,l=(n-s)/3;e._context.bezierCurveTo(s+l,a+l*t,n-l,i-l*r,n,i)}function zp(e){this._context=e}function Up(e){this._context=new Bp(e)}function Bp(e){this._context=e}function qp(e){this._context=e}function Wp(e){var t,r,s=e.length-1,a=new Array(s),n=new Array(s),i=new Array(s);for(a[0]=0,n[0]=2,i[0]=e[0]+2*e[1],t=1;t<s-1;++t)a[t]=1,n[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[s-1]=2,n[s-1]=7,i[s-1]=8*e[s-1]+e[s],t=1;t<s;++t)r=a[t]/n[t-1],n[t]-=r,i[t]-=r*i[t-1];for(a[s-1]=i[s-1]/n[s-1],t=s-2;t>=0;--t)a[t]=(i[t]-a[t+1])/n[t];for(n[s-1]=(e[s]+a[s-1])/2,t=0;t<s-1;++t)n[t]=2*e[t+1]-a[t+1];return[a,n]}function Kp(e,t){this._context=e,this._t=t}function Vp(e,t){if((a=e.length)>1)for(var r,s,a,n=1,i=e[t[0]],l=i.length;n<a;++n)for(s=i,i=e[t[n]],r=0;r<l;++r)i[r][1]+=i[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function Hp(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Gp(e,t){return e[t]}function Yp(e){const t=[];return t.key=e,t}Ap.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Tp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Tp(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Mp.prototype={areaStart:Pp,areaEnd:Pp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Tp(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Dp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,s):this._context.moveTo(r,s);break;case 3:this._point=4;default:Tp(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Ip.prototype={areaStart:Pp,areaEnd:Pp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},zp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Fp(this,this._t0,Lp(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Fp(this,Lp(this,r=$p(this,e,t)),r);break;default:Fp(this,this._t0,r=$p(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(Up.prototype=Object.create(zp.prototype)).point=function(e,t){zp.prototype.point.call(this,t,e)},Bp.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,s,a,n){this._context.bezierCurveTo(t,e,s,r,n,a)}},qp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var s=Wp(e),a=Wp(t),n=0,i=1;i<r;++n,++i)this._context.bezierCurveTo(s[0][n],a[0][n],s[1][n],a[1][n],e[i],t[i]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Kp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};var Jp,Zp={},Qp={};function Xp(){return Jp||(Jp=1,e=Qp,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isUnsafeProperty=function(e){return"__proto__"===e}),Qp;var e}var eh,th={};function rh(){return eh||(eh=1,e=th,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}),th;var e}var sh,ah={};function nh(){return sh||(sh=1,e=ah,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.toKey=function(e){return"string"==typeof e||"symbol"==typeof e?e:Object.is(e?.valueOf?.(),-0)?"-0":String(e)}),ah;var e}var ih,lh,oh,ch,dh,uh={},mh={};function ph(){return ih||(ih=1,e=mh,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.toString=function e(t){if(null==t)return"";if("string"==typeof t)return t;if(Array.isArray(t))return t.map(e).join(",");const r=String(t);return"0"===r&&Object.is(Number(t),-0)?"-0":r}),mh;var e}function hh(){return lh||(lh=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ph(),r=nh();e.toPath=function(e){if(Array.isArray(e))return e.map(r.toKey);if("symbol"==typeof e)return[e];const s=[],a=(e=t.toString(e)).length;if(0===a)return s;let n=0,i="",l="",o=!1;for(46===e.charCodeAt(0)&&(s.push(""),n++);n<a;){const t=e[n];l?"\\"===t&&n+1<a?(n++,i+=e[n]):t===l?l="":i+=t:o?'"'===t||"'"===t?l=t:"]"===t?(o=!1,s.push(i),i=""):i+=t:"["===t?(o=!0,i&&(s.push(i),i="")):"."===t?i&&(s.push(i),i=""):i+=t,n++}return i&&s.push(i),s}}(uh)),uh}function xh(){return oh||(oh=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xp(),r=rh(),s=nh(),a=hh();e.get=function e(n,i,l){if(null==n)return l;switch(typeof i){case"string":{if(t.isUnsafeProperty(i))return l;const s=n[i];return void 0===s?r.isDeepKey(i)?e(n,a.toPath(i),l):l:s}case"number":case"symbol":{"number"==typeof i&&(i=s.toKey(i));const e=n[i];return void 0===e?l:e}default:{if(Array.isArray(i))return function(e,r,s){if(0===r.length)return s;let a=e;for(let n=0;n<r.length;n++){if(null==a)return s;if(t.isUnsafeProperty(r[n]))return s;a=a[r[n]]}if(void 0===a)return s;return a}(n,i,l);if(i=Object.is(i?.valueOf(),-0)?"-0":String(i),t.isUnsafeProperty(i))return l;const e=n[i];return void 0===e?l:e}}}}(Zp)),Zp}function fh(){return dh?ch:(dh=1,ch=xh().get)}const gh=s(fh());var bh=e=>0===e?0:e>0?1:-1,vh=e=>"number"==typeof e&&e!=+e,yh=e=>"string"==typeof e&&e.indexOf("%")===e.length-1,jh=e=>("number"==typeof e||e instanceof Number)&&!vh(e),wh=e=>jh(e)||"string"==typeof e,Nh=0,_h=e=>{var t=++Nh;return"".concat(e||"").concat(t)},kh=function(e,t){var r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!jh(e)&&"string"!=typeof e)return s;if(yh(e)){if(null==t)return s;var n=e.indexOf("%");r=t*parseFloat(e.slice(0,n))/100}else r=+e;return vh(r)&&(r=s),a&&null!=t&&r>t&&(r=t),r},Sh=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},s=0;s<t;s++){if(r[e[s]])return!0;r[e[s]]=!0}return!1};function Ch(e,t,r){return jh(e)&&jh(t)?e+r*(t-e):t}function Oh(e,t,r){if(e&&e.length)return e.find(e=>e&&("function"==typeof t?t(e):gh(e,t))===r)}var Eh=e=>null==e,Ph=e=>Eh(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Th(e){return null!=e}function Ah(){}var Mh=["type","size","sizeType"];function Dh(){return Dh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Dh.apply(null,arguments)}function Ih(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function Rh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ih(Object(r),!0).forEach(function(t){$h(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ih(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Lh={symbolCircle:pp,symbolCross:hp,symbolDiamond:gp,symbolSquare:bp,symbolStar:wp,symbolTriangle:_p,symbolWye:Ep},Fh=Math.PI/180,zh=e=>{var{type:t="circle",size:r=64,sizeType:s="area"}=e,a=Rh(Rh({},function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,Mh)),{},{type:t,size:r,sizeType:s}),n="circle";"string"==typeof t&&(n=t);var{className:i,cx:l,cy:o}=a,c=Lm(a);return jh(l)&&jh(o)&&jh(r)?u.createElement("path",Dh({},c,{className:Pm("recharts-symbols",i),transform:"translate(".concat(l,", ").concat(o,")"),d:(()=>{var e=(e=>{var t="symbol".concat(Ph(e));return Lh[t]||pp})(n),t=function(e,t){let r=null,s=ap(a);function a(){let a;if(r||(r=a=s()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return e="function"==typeof e?e:Vm(e||pp),t="function"==typeof t?t:Vm(void 0===t?64:+t),a.type=function(t){return arguments.length?(e="function"==typeof t?t:Vm(t),a):e},a.size=function(e){return arguments.length?(t="function"==typeof e?e:Vm(+e),a):t},a.context=function(e){return arguments.length?(r=e??null,a):r},a}().type(e).size(((e,t,r)=>{if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var s=18*Fh;return 1.25*e*e*(Math.tan(s)-Math.tan(2*s)*Math.tan(s)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(r,s,n)),a=t();if(null!==a)return a})()})):null};zh.registerSymbol=(e,t)=>{Lh["symbol".concat(Ph(e))]=t};var Uh=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,Bh=(e,t)=>{if(!e||"function"==typeof e||"boolean"==typeof e)return null;var r=e;if(u.isValidElement(e)&&(r=e.props),"object"!=typeof r&&"function"!=typeof r)return null;var s={};return Object.keys(r).forEach(e=>{Am(e)&&(s[e]=t=>r[e](r,t))}),s},qh=(e,t,r)=>{if(null===e||"object"!=typeof e&&"function"!=typeof e)return null;var s=null;return Object.keys(e).forEach(a=>{var n=e[a];Am(a)&&"function"==typeof n&&(s||(s={}),s[a]=((e,t,r)=>s=>(e(t,r,s),null))(n,t,r))}),s};function Wh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function Kh(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vh(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wh(Object(r),!0).forEach(function(t){Kh(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e),s=t;return Object.keys(t).reduce((e,t)=>(void 0===e[t]&&void 0!==s[t]&&(e[t]=s[t]),e),r)}function Hh(){return Hh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Hh.apply(null,arguments)}function Gh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function Yh(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jh=32,Zh={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function Qh(e){var t,{data:r,iconType:s,inactiveColor:a}=e,n=16,i=Jh/6,l=Jh/3,o=r.inactive?a:r.color,c=null!=s?s:r.type;if("none"===c)return null;if("plainline"===c)return u.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:null===(t=r.payload)||void 0===t?void 0:t.strokeDasharray,x1:0,y1:n,x2:Jh,y2:n,className:"recharts-legend-icon"});if("line"===c)return u.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(n,"h").concat(l,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(2*l,",").concat(n,"\n            H").concat(Jh,"M").concat(2*l,",").concat(n,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(l,",").concat(n),className:"recharts-legend-icon"});if("rect"===c)return u.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(4,"h").concat(Jh,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(u.isValidElement(r.legendIcon)){var d=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gh(Object(r),!0).forEach(function(t){Yh(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},r);return delete d.legendIcon,u.cloneElement(r.legendIcon,d)}return u.createElement(zh,{fill:o,cx:n,cy:n,size:Jh,sizeType:"diameter",type:c})}function Xh(e){var{payload:t,iconSize:r,layout:s,formatter:a,inactiveColor:n,iconType:i}=e,l={x:0,y:0,width:Jh,height:Jh},o={display:"horizontal"===s?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((t,s)=>{var d=t.formatter||a,m=Pm({"recharts-legend-item":!0,["legend-item-".concat(s)]:!0,inactive:t.inactive});if("none"===t.type)return null;var p=t.inactive?n:t.color,h=d?d(t.value,t,s):t.value;return u.createElement("li",Hh({className:m,style:o,key:"legend-item-".concat(s)},qh(e,t,s)),u.createElement(Um,{width:r,height:r,viewBox:l,style:c,"aria-label":"".concat(h," legend icon")},u.createElement(Qh,{data:t,iconType:i,inactiveColor:n})),u.createElement("span",{className:"recharts-legend-item-text",style:{color:p}},h))})}var ex,tx=e=>{var t=Vh(e,Zh),{payload:r,layout:s,align:a}=t;if(!r||!r.length)return null;var n={padding:0,margin:0,textAlign:"horizontal"===s?a:"left"};return u.createElement("ul",{className:"recharts-default-legend",style:n},u.createElement(Xh,Hh({},t,{payload:r})))},rx={},sx={};function ax(){return ex||(ex=1,e=sx,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.uniqBy=function(e,t){const r=new Map;for(let s=0;s<e.length;s++){const a=e[s],n=t(a);r.has(n)||r.set(n,a)}return Array.from(r.values())}),sx;var e}var nx,ix={};function lx(){return nx||(nx=1,e=ix,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.identity=function(e){return e}),ix;var e}var ox,cx,dx={},ux={},mx={};function px(){return ox||(ox=1,e=mx,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}),mx;var e}function hx(){return cx||(cx=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=px();e.isArrayLike=function(e){return null!=e&&"function"!=typeof e&&t.isLength(e.length)}}(ux)),ux}var xx,fx,gx={};function bx(){return xx||(xx=1,e=gx,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isObjectLike=function(e){return"object"==typeof e&&null!==e}),gx;var e}function vx(){return fx||(fx=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hx(),r=bx();e.isArrayLikeObject=function(e){return r.isObjectLike(e)&&t.isArrayLike(e)}}(dx)),dx}var yx,jx={},wx={};function Nx(){return yx||(yx=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xh();e.property=function(e){return function(r){return t.get(r,e)}}}(wx)),wx}var _x,kx={},Sx={},Cx={},Ox={};function Ex(){return _x||(_x=1,e=Ox,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isObject=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)}),Ox;var e}var Px,Tx={};function Ax(){return Px||(Px=1,e=Tx,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isPrimitive=function(e){return null==e||"object"!=typeof e&&"function"!=typeof e}),Tx;var e}var Mx,Dx,Ix,Rx={};function $x(){return Mx||(Mx=1,e=Rx,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.eq=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}),Rx;var e}function Lx(){return Dx||(Dx=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ex(),r=Ax(),s=$x();function a(e,l,o,c){if(l===e)return!0;switch(typeof l){case"object":return function(e,t,s,a){if(null==t)return!0;if(Array.isArray(t))return n(e,t,s,a);if(t instanceof Map)return function(e,t,r,s){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[a,n]of t.entries()){if(!1===r(e.get(a),n,a,e,t,s))return!1}return!0}(e,t,s,a);if(t instanceof Set)return i(e,t,s,a);const l=Object.keys(t);if(null==e)return 0===l.length;if(0===l.length)return!0;if(a?.has(t))return a.get(t)===e;a?.set(t,e);try{for(let n=0;n<l.length;n++){const i=l[n];if(!r.isPrimitive(e)&&!(i in e))return!1;if(void 0===t[i]&&void 0!==e[i])return!1;if(null===t[i]&&null!==e[i])return!1;if(!s(e[i],t[i],i,e,t,a))return!1}return!0}finally{a?.delete(t)}}(e,l,o,c);case"function":return Object.keys(l).length>0?a(e,{...l},o,c):s.eq(e,l);default:return t.isObject(e)?"string"!=typeof l||""===l:s.eq(e,l)}}function n(e,t,r,s){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const a=new Set;for(let n=0;n<t.length;n++){const i=t[n];let l=!1;for(let o=0;o<e.length;o++){if(a.has(o))continue;let c=!1;if(r(e[o],i,n,e,t,s)&&(c=!0),c){a.add(o),l=!0;break}}if(!l)return!1}return!0}function i(e,t,r,s){return 0===t.size||e instanceof Set&&n([...e],[...t],r,s)}e.isMatchWith=function e(t,r,s){return"function"!=typeof s?e(t,r,()=>{}):a(t,r,function e(t,r,n,i,l,o){const c=s(t,r,n,i,l,o);return void 0!==c?Boolean(c):a(t,r,e,o)},new Map)},e.isSetMatch=i}(Cx)),Cx}function Fx(){return Ix||(Ix=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lx();e.isMatch=function(e,r){return t.isMatchWith(e,r,()=>{})}}(Sx)),Sx}var zx,Ux={},Bx={},qx={};function Wx(){return zx||(zx=1,e=qx,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}),qx;var e}var Kx,Vx={};function Hx(){return Kx||(Kx=1,e=Vx,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}),Vx;var e}var Gx,Yx={};function Jx(){return Gx||(Gx=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});e.argumentsTag="[object Arguments]",e.arrayBufferTag="[object ArrayBuffer]",e.arrayTag="[object Array]",e.bigInt64ArrayTag="[object BigInt64Array]",e.bigUint64ArrayTag="[object BigUint64Array]",e.booleanTag="[object Boolean]",e.dataViewTag="[object DataView]",e.dateTag="[object Date]",e.errorTag="[object Error]",e.float32ArrayTag="[object Float32Array]",e.float64ArrayTag="[object Float64Array]",e.functionTag="[object Function]",e.int16ArrayTag="[object Int16Array]",e.int32ArrayTag="[object Int32Array]",e.int8ArrayTag="[object Int8Array]",e.mapTag="[object Map]",e.numberTag="[object Number]",e.objectTag="[object Object]",e.regexpTag="[object RegExp]",e.setTag="[object Set]",e.stringTag="[object String]",e.symbolTag="[object Symbol]",e.uint16ArrayTag="[object Uint16Array]",e.uint32ArrayTag="[object Uint32Array]",e.uint8ArrayTag="[object Uint8Array]",e.uint8ClampedArrayTag="[object Uint8ClampedArray]"}(Yx)),Yx}var Zx,Qx,Xx,ef,tf={};function rf(){return Zx||(Zx=1,e=tf,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}),tf;var e}function sf(){return Qx||(Qx=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wx(),r=Hx(),s=Jx(),a=Ax(),n=rf();function i(e,t,o,c=new Map,d=void 0){const u=d?.(e,t,o,c);if(void 0!==u)return u;if(a.isPrimitive(e))return e;if(c.has(e))return c.get(e);if(Array.isArray(e)){const t=new Array(e.length);c.set(e,t);for(let r=0;r<e.length;r++)t[r]=i(e[r],r,o,c,d);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;c.set(e,t);for(const[r,s]of e)t.set(r,i(s,r,o,c,d));return t}if(e instanceof Set){const t=new Set;c.set(e,t);for(const r of e)t.add(i(r,void 0,o,c,d));return t}if("undefined"!=typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(n.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);c.set(e,t);for(let r=0;r<e.length;r++)t[r]=i(e[r],r,o,c,d);return t}if(e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return c.set(e,t),l(t,e,o,c,d),t}if("undefined"!=typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return c.set(e,t),l(t,e,o,c,d),t}if("undefined"!=typeof Blob&&e instanceof Blob){const t=new Blob([e],{type:e.type});return c.set(e,t),l(t,e,o,c,d),t}if(e instanceof Error){const t=new e.constructor;return c.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,l(t,e,o,c,d),t}if(e instanceof Boolean){const t=new Boolean(e.valueOf());return c.set(e,t),l(t,e,o,c,d),t}if(e instanceof Number){const t=new Number(e.valueOf());return c.set(e,t),l(t,e,o,c,d),t}if(e instanceof String){const t=new String(e.valueOf());return c.set(e,t),l(t,e,o,c,d),t}if("object"==typeof e&&function(e){switch(r.getTag(e)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return c.set(e,t),l(t,e,o,c,d),t}return e}function l(e,r,s=e,a,n){const l=[...Object.keys(r),...t.getSymbols(r)];for(let t=0;t<l.length;t++){const o=l[t],c=Object.getOwnPropertyDescriptor(e,o);(null==c||c.writable)&&(e[o]=i(r[o],o,s,a,n))}}e.cloneDeepWith=function(e,t){return i(e,void 0,e,new Map,t)},e.cloneDeepWithImpl=i,e.copyProperties=l}(Bx)),Bx}function af(){return Xx||(Xx=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sf();e.cloneDeep=function(e){return t.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}}(Ux)),Ux}function nf(){return ef||(ef=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fx(),r=af();e.matches=function(e){return e=r.cloneDeep(e),r=>t.isMatch(r,e)}}(kx)),kx}var lf,of,cf={},df={},uf={};function mf(){return lf||(lf=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sf(),r=Jx();e.cloneDeepWith=function(e,s){return t.cloneDeepWith(e,(a,n,i,l)=>{const o=s?.(a,n,i,l);if(void 0!==o)return o;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case r.numberTag:case r.stringTag:case r.booleanTag:{const r=new e.constructor(e?.valueOf());return t.copyProperties(r,e),r}case r.argumentsTag:{const r={};return t.copyProperties(r,e),r.length=e.length,r[Symbol.iterator]=e[Symbol.iterator],r}default:return}})}}(uf)),uf}function pf(){return of||(of=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mf();e.cloneDeep=function(e){return t.cloneDeepWith(e)}}(df)),df}var hf,xf={},ff={};function gf(){return hf||(hf=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;e.isIndex=function(e,r=Number.MAX_SAFE_INTEGER){switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<r;case"symbol":return!1;case"string":return t.test(e)}}}(ff)),ff}var bf,vf,yf,jf,wf,Nf,_f,kf={};function Sf(){return bf||(bf=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Hx();e.isArguments=function(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===t.getTag(e)}}(kf)),kf}function Cf(){return vf||(vf=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rh(),r=gf(),s=Sf(),a=hh();e.has=function(e,n){let i;if(i=Array.isArray(n)?n:"string"==typeof n&&t.isDeepKey(n)&&null==e?.[n]?a.toPath(n):[n],0===i.length)return!1;let l=e;for(let t=0;t<i.length;t++){const e=i[t];if(null==l||!Object.hasOwn(l,e)){if(!((Array.isArray(l)||s.isArguments(l))&&r.isIndex(e)&&e<l.length))return!1}l=l[e]}return!0}}(xf)),xf}function Of(){return yf||(yf=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fx(),r=nh(),s=pf(),a=xh(),n=Cf();e.matchesProperty=function(e,i){switch(typeof e){case"object":Object.is(e?.valueOf(),-0)&&(e="-0");break;case"number":e=r.toKey(e)}return i=s.cloneDeep(i),function(r){const s=a.get(r,e);return void 0===s?n.has(r,e):void 0===i?void 0===s:t.isMatch(s,i)}}}(cf)),cf}function Ef(){return jf||(jf=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lx(),r=Nx(),s=nf(),a=Of();e.iteratee=function(e){if(null==e)return t.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?a.matchesProperty(e[0],e[1]):s.matches(e);case"string":case"symbol":case"number":return r.property(e)}}}(jx)),jx}function Pf(){return _f?Nf:(_f=1,Nf=(wf||(wf=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ax(),r=lx(),s=vx(),a=Ef();e.uniqBy=function(e,n=r.identity){return s.isArrayLikeObject(e)?t.uniqBy(Array.from(e),a.iteratee(n)):[]}}(rx)),rx).uniqBy)}const Tf=s(Pf());function Af(e,t,r){return!0===t?Tf(e,r):"function"==typeof t?Tf(e,t):e}var Mf,Df,If,Rf,$f={exports:{}},Lf={},Ff={exports:{}},zf={};function Uf(){return Df||(Df=1,Ff.exports=function(){if(Mf)return zf;Mf=1;var e=d(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=e.useState,s=e.useEffect,a=e.useLayoutEffect,n=e.useDebugValue;function i(e){var r=e.getSnapshot;e=e.value;try{var s=r();return!t(e,s)}catch(a){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var l=t(),o=r({inst:{value:l,getSnapshot:t}}),c=o[0].inst,d=o[1];return a(function(){c.value=l,c.getSnapshot=t,i(c)&&d({inst:c})},[e,l,t]),s(function(){return i(c)&&d({inst:c}),e(function(){i(c)&&d({inst:c})})},[e]),n(l),l};return zf.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:l,zf}()),Ff.exports}var Bf=(Rf||(Rf=1,$f.exports=function(){if(If)return Lf;If=1;var e=d(),t=Uf(),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=t.useSyncExternalStore,a=e.useRef,n=e.useEffect,i=e.useMemo,l=e.useDebugValue;return Lf.useSyncExternalStoreWithSelector=function(e,t,o,c,d){var u=a(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;u=i(function(){function e(e){if(!n){if(n=!0,s=e,e=c(e),void 0!==d&&m.hasValue){var t=m.value;if(d(t,e))return a=t}return a=e}if(t=a,r(s,e))return t;var i=c(e);return void 0!==d&&d(t,i)?(s=e,t):(s=e,a=i)}var s,a,n=!1,i=void 0===o?null:o;return[function(){return e(t())},null===i?void 0:function(){return e(i())}]},[t,o,c,d]);var p=s(e,u[0],u[1]);return n(function(){m.hasValue=!0,m.value=p},[p]),l(p),p},Lf}()),$f.exports),qf=u.createContext(null),Wf=e=>e,Kf=()=>{var e=u.useContext(qf);return e?e.store.dispatch:Wf},Vf=()=>{},Hf=()=>Vf,Gf=(e,t)=>e===t;function Yf(e){var t=u.useContext(qf);return Bf.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Hf,t?t.store.getState:Vf,t?t.store.getState:Vf,t?e:Vf,Gf)}var Jf=e=>Array.isArray(e)?e:[e];function Zf(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(e=>"function"==typeof e)){const r=e.map(e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e).join(", ");throw new TypeError(`${t}[${r}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}var Qf="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function Xf(){return{s:0,v:void 0,o:null,p:null}}function eg(e,t={}){let r={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:s}=t;let a,n=0;function i(){let t=r;const{length:i}=arguments;for(let e=0,r=i;e<r;e++){const r=arguments[e];if("function"==typeof r||"object"==typeof r&&null!==r){let e=t.o;null===e&&(t.o=e=new WeakMap);const s=e.get(r);void 0===s?(t=Xf(),e.set(r,t)):t=s}else{let e=t.p;null===e&&(t.p=e=new Map);const s=e.get(r);void 0===s?(t=Xf(),e.set(r,t)):t=s}}const l=t;let o;if(1===t.s)o=t.v;else if(o=e.apply(null,arguments),n++,s){const e=a?.deref?.()??a;null!=e&&s(e,o)&&(o=e,0!==n&&n--);a="object"==typeof o&&null!==o||"function"==typeof o?new Qf(o):o}return l.s=1,l.v=o,o}return i.clearCache=()=>{r={s:0,v:void 0,o:null,p:null},i.resetResultsCount()},i.resultsCount=()=>n,i.resetResultsCount=()=>{n=0},i}function tg(e,...t){const r="function"==typeof e?{memoize:e,memoizeOptions:t}:e,s=(...e)=>{let t,s=0,a=0,n={},i=e.pop();"object"==typeof i&&(n=i,i=e.pop()),function(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}(i,`createSelector expects an output function after the inputs, but received: [${typeof i}]`);const l={...r,...n},{memoize:o,memoizeOptions:c=[],argsMemoize:d=eg,argsMemoizeOptions:u=[]}=l,m=Jf(c),p=Jf(u),h=Zf(e),x=o(function(){return s++,i.apply(null,arguments)},...m),f=d(function(){a++;const e=function(e,t){const r=[],{length:s}=e;for(let a=0;a<s;a++)r.push(e[a].apply(null,t));return r}(h,arguments);return t=x.apply(null,e),t},...p);return Object.assign(f,{resultFunc:i,memoizedResultFunc:x,dependencies:h,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>t,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:o,argsMemoize:d})};return Object.assign(s,{withTypes:()=>s}),s}var rg,sg=tg(eg),ag=Object.assign((e,t=sg)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const r=Object.keys(e);return t(r.map(t=>e[t]),(...e)=>e.reduce((e,t,s)=>(e[r[s]]=t,e),{}))},{withTypes:()=>ag}),ng={},ig={},lg={};function og(){return rg||(rg=1,function(e){function t(e){return"symbol"==typeof e?1:null===e?2:void 0===e?3:e!=e?4:0}Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});e.compareValues=(e,r,s)=>{if(e!==r){const a=t(e),n=t(r);if(a===n&&0===a){if(e<r)return"desc"===s?1:-1;if(e>r)return"desc"===s?-1:1}return"desc"===s?n-a:a-n}return 0}}(lg)),lg}var cg,dg,ug,mg={},pg={};function hg(){return cg||(cg=1,e=pg,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isSymbol=function(e){return"symbol"==typeof e||e instanceof Symbol}),pg;var e}function xg(){return dg||(dg=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hg(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.isKey=function(e,a){return!Array.isArray(e)&&(!("number"!=typeof e&&"boolean"!=typeof e&&null!=e&&!t.isSymbol(e))||("string"==typeof e&&(s.test(e)||!r.test(e))||null!=a&&Object.hasOwn(a,e)))}}(mg)),mg}function fg(){return ug||(ug=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=og(),r=xg(),s=hh();e.orderBy=function(e,a,n,i){if(null==e)return[];n=i?void 0:n,Array.isArray(e)||(e=Object.values(e)),Array.isArray(a)||(a=null==a?[null]:[a]),0===a.length&&(a=[null]),Array.isArray(n)||(n=null==n?[]:[n]),n=n.map(e=>String(e));const l=(e,t)=>{let r=e;for(let s=0;s<t.length&&null!=r;++s)r=r[t[s]];return r},o=a.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"==typeof e||Array.isArray(e)||r.isKey(e)?e:{key:e,path:s.toPath(e)}));return e.map(e=>({original:e,criteria:o.map(t=>((e,t)=>null==t||null==e?t:"object"==typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:l(t,e.path):"function"==typeof e?e(t):Array.isArray(e)?l(t,e):"object"==typeof t?t[e]:t)(t,e))})).slice().sort((e,r)=>{for(let s=0;s<o.length;s++){const a=t.compareValues(e.criteria[s],r.criteria[s],n[s]);if(0!==a)return a}return 0}).map(e=>e.original)}}(ig)),ig}var gg,bg={};function vg(){return gg||(gg=1,e=bg,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.flatten=function(e,t=1){const r=[],s=Math.floor(t),a=(e,t)=>{for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)&&t<s?a(i,t+1):r.push(i)}};return a(e,0),r}),bg;var e}var yg,jg,wg,Ng,_g={};function kg(){return yg||(yg=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gf(),r=hx(),s=Ex(),a=$x();e.isIterateeCall=function(e,n,i){return!!s.isObject(i)&&(!!("number"==typeof n&&r.isArrayLike(i)&&t.isIndex(n)&&n<i.length||"string"==typeof n&&n in i)&&a.eq(i[n],e))}}(_g)),_g}function Sg(){return Ng?wg:(Ng=1,wg=(jg||(jg=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fg(),r=vg(),s=kg();e.sortBy=function(e,...a){const n=a.length;return n>1&&s.isIterateeCall(e,a[0],a[1])?a=[]:n>2&&s.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),t.orderBy(e,r.flatten(a),["asc"])}}(ng)),ng).sortBy)}const Cg=s(Sg());var Og=e=>e.legend.settings,Eg=sg([e=>e.legend.payload,Og],(e,t)=>{var{itemSorter:r}=t,s=e.flat(1);return r?Cg(s,r):s});function Pg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,r]=u.useState({height:0,left:0,top:0,width:0}),s=u.useCallback(e=>{if(null!=e){var s=e.getBoundingClientRect(),a={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(a.height-t.height)>1||Math.abs(a.left-t.left)>1||Math.abs(a.top-t.top)>1||Math.abs(a.width-t.width)>1)&&r({height:a.height,left:a.left,top:a.top,width:a.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,s]}function Tg(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Ag=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),Mg=()=>Math.random().toString(36).substring(7).split("").join("."),Dg={INIT:`@@redux/INIT${Mg()}`,REPLACE:`@@redux/REPLACE${Mg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Mg()}`};function Ig(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function Rg(e,t,r){if("function"!=typeof e)throw new Error(Tg(2));if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(Tg(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(Tg(1));return r(Rg)(e,t)}let s=e,a=t,n=new Map,i=n,l=0,o=!1;function c(){i===n&&(i=new Map,n.forEach((e,t)=>{i.set(t,e)}))}function d(){if(o)throw new Error(Tg(3));return a}function u(e){if("function"!=typeof e)throw new Error(Tg(4));if(o)throw new Error(Tg(5));let t=!0;c();const r=l++;return i.set(r,e),function(){if(t){if(o)throw new Error(Tg(6));t=!1,c(),i.delete(r),n=null}}}function m(e){if(!Ig(e))throw new Error(Tg(7));if(void 0===e.type)throw new Error(Tg(8));if("string"!=typeof e.type)throw new Error(Tg(17));if(o)throw new Error(Tg(9));try{o=!0,a=s(a,e)}finally{o=!1}return(n=i).forEach(e=>{e()}),e}m({type:Dg.INIT});return{dispatch:m,subscribe:u,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw new Error(Tg(10));s=e,m({type:Dg.REPLACE})},[Ag]:function(){const e=u;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(Tg(11));function r(){const e=t;e.next&&e.next(d())}r();return{unsubscribe:e(r)}},[Ag](){return this}}}}}function $g(e){const t=Object.keys(e),r={};for(let n=0;n<t.length;n++){const s=t[n];"function"==typeof e[s]&&(r[s]=e[s])}const s=Object.keys(r);let a;try{!function(e){Object.keys(e).forEach(t=>{const r=e[t];if(void 0===r(void 0,{type:Dg.INIT}))throw new Error(Tg(12));if(void 0===r(void 0,{type:Dg.PROBE_UNKNOWN_ACTION()}))throw new Error(Tg(13))})}(r)}catch(dF){a=dF}return function(e={},t){if(a)throw a;let n=!1;const i={};for(let a=0;a<s.length;a++){const l=s[a],o=r[l],c=e[l],d=o(c,t);if(void 0===d)throw t&&t.type,new Error(Tg(14));i[l]=d,n=n||d!==c}return n=n||s.length!==Object.keys(e).length,n?i:e}}function Lg(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...r)=>e(t(...r)))}function Fg(e){return Ig(e)&&"type"in e&&"string"==typeof e.type}var zg=Symbol.for("immer-nothing"),Ug=Symbol.for("immer-draftable"),Bg=Symbol.for("immer-state");function qg(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Wg=Object.getPrototypeOf;function Kg(e){return!!e&&!!e[Bg]}function Vg(e){return!!e&&(Yg(e)||Array.isArray(e)||!!e[Ug]||!!e.constructor?.[Ug]||eb(e)||tb(e))}var Hg=Object.prototype.constructor.toString(),Gg=new WeakMap;function Yg(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if("function"!=typeof r)return!1;let s=Gg.get(r);return void 0===s&&(s=Function.toString.call(r),Gg.set(r,s)),s===Hg}function Jg(e,t,r=!0){if(0===Zg(e)){(r?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)})}else e.forEach((r,s)=>t(s,r,e))}function Zg(e){const t=e[Bg];return t?t.type_:Array.isArray(e)?1:eb(e)?2:tb(e)?3:0}function Qg(e,t){return 2===Zg(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Xg(e,t,r){const s=Zg(e);2===s?e.set(t,r):3===s?e.add(r):e[t]=r}function eb(e){return e instanceof Map}function tb(e){return e instanceof Set}function rb(e){return e.copy_||e.base_}function sb(e,t){if(eb(e))return new Map(e);if(tb(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Yg(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[Bg];let r=Reflect.ownKeys(t);for(let s=0;s<r.length;s++){const a=r[s],n=t[a];!1===n.writable&&(n.writable=!0,n.configurable=!0),(n.get||n.set)&&(t[a]={configurable:!0,writable:!0,enumerable:n.enumerable,value:e[a]})}return Object.create(Wg(e),t)}{const t=Wg(e);if(null!==t&&r)return{...e};const s=Object.create(t);return Object.assign(s,e)}}function ab(e,t=!1){return ib(e)||Kg(e)||!Vg(e)||(Zg(e)>1&&Object.defineProperties(e,{set:nb,add:nb,clear:nb,delete:nb}),Object.freeze(e),t&&Object.values(e).forEach(e=>ab(e,!0))),e}var nb={value:function(){qg(2)}};function ib(e){return null===e||"object"!=typeof e||Object.isFrozen(e)}var lb,ob={};function cb(e){const t=ob[e];return t||qg(0),t}function db(){return lb}function ub(e,t){t&&(cb("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function mb(e){pb(e),e.drafts_.forEach(xb),e.drafts_=null}function pb(e){e===lb&&(lb=e.parent_)}function hb(e){return lb={drafts_:[],parent_:lb,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function xb(e){const t=e[Bg];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function fb(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[Bg].modified_&&(mb(t),qg(4)),Vg(e)&&(e=gb(t,e),t.parent_||vb(t,e)),t.patches_&&cb("Patches").generateReplacementPatches_(r[Bg].base_,e,t.patches_,t.inversePatches_)):e=gb(t,r,[]),mb(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==zg?e:void 0}function gb(e,t,r){if(ib(t))return t;const s=e.immer_.shouldUseStrictIteration(),a=t[Bg];if(!a)return Jg(t,(s,n)=>bb(e,a,t,s,n,r),s),t;if(a.scope_!==e)return t;if(!a.modified_)return vb(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const t=a.copy_;let n=t,i=!1;3===a.type_&&(n=new Set(t),t.clear(),i=!0),Jg(n,(s,n)=>bb(e,a,t,s,n,r,i),s),vb(e,t,!1),r&&e.patches_&&cb("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function bb(e,t,r,s,a,n,i){if(null==a)return;if("object"!=typeof a&&!i)return;const l=ib(a);if(!l||i){if(Kg(a)){const i=gb(e,a,n&&t&&3!==t.type_&&!Qg(t.assigned_,s)?n.concat(s):void 0);if(Xg(r,s,i),!Kg(i))return;e.canAutoFreeze_=!1}else i&&r.add(a);if(Vg(a)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;if(t&&t.base_&&t.base_[s]===a&&l)return;gb(e,a),t&&t.scope_.parent_||"symbol"==typeof s||!(eb(r)?r.has(s):Object.prototype.propertyIsEnumerable.call(r,s))||vb(e,a)}}}function vb(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ab(t,r)}var yb={get(e,t){if(t===Bg)return e;const r=rb(e);if(!Qg(r,t))return function(e,t,r){const s=Nb(t,r);return s?"value"in s?s.value:s.get?.call(e.draft_):void 0}(e,r,t);const s=r[t];return e.finalized_||!Vg(s)?s:s===wb(e.base_,t)?(kb(e),e.copy_[t]=Sb(s,e)):s},has:(e,t)=>t in rb(e),ownKeys:e=>Reflect.ownKeys(rb(e)),set(e,t,r){const s=Nb(rb(e),t);if(s?.set)return s.set.call(e.draft_,r),!0;if(!e.modified_){const s=wb(rb(e),t),i=s?.[Bg];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((a=r)===(n=s)?0!==a||1/a==1/n:a!=a&&n!=n)&&(void 0!==r||Qg(e.base_,t)))return!0;kb(e),_b(e)}var a,n;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==wb(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,kb(e),_b(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=rb(e),s=Reflect.getOwnPropertyDescriptor(r,t);return s?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:s.enumerable,value:r[t]}:s},defineProperty(){qg(11)},getPrototypeOf:e=>Wg(e.base_),setPrototypeOf(){qg(12)}},jb={};function wb(e,t){const r=e[Bg];return(r?rb(r):e)[t]}function Nb(e,t){if(!(t in e))return;let r=Wg(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=Wg(r)}}function _b(e){e.modified_||(e.modified_=!0,e.parent_&&_b(e.parent_))}function kb(e){e.copy_||(e.copy_=sb(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Jg(yb,(e,t)=>{jb[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),jb.deleteProperty=function(e,t){return jb.set.call(this,e,t,void 0)},jb.set=function(e,t,r){return yb.set.call(this,e[0],t,r,e[0])};function Sb(e,t){const r=eb(e)?cb("MapSet").proxyMap_(e,t):tb(e)?cb("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),s={type_:r?1:0,scope_:t?t.scope_:db(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=s,n=yb;r&&(a=[s],n=jb);const{revoke:i,proxy:l}=Proxy.revocable(a,n);return s.draft_=l,s.revoke_=i,l}(e,t);return(t?t.scope_:db()).drafts_.push(r),r}function Cb(e){return Kg(e)||qg(10),Ob(e)}function Ob(e){if(!Vg(e)||ib(e))return e;const t=e[Bg];let r,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=sb(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else r=sb(e,!0);return Jg(r,(e,t)=>{Xg(r,e,Ob(t))},s),t&&(t.finalized_=!1),r}var Eb=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const s=this;return function(e=r,...a){return s.produce(e,e=>t.call(this,e,...a))}}let s;if("function"!=typeof t&&qg(6),void 0!==r&&"function"!=typeof r&&qg(7),Vg(e)){const a=hb(this),n=Sb(e,void 0);let i=!0;try{s=t(n),i=!1}finally{i?mb(a):pb(a)}return ub(a,r),fb(s,a)}if(!e||"object"!=typeof e){if(s=t(e),void 0===s&&(s=e),s===zg&&(s=void 0),this.autoFreeze_&&ab(s,!0),r){const t=[],a=[];cb("Patches").generateReplacementPatches_(e,s,t,a),r(t,a)}return s}qg(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,t=>e(t,...r));let r,s;return[this.produce(e,t,(e,t)=>{r=e,s=t}),r,s]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"==typeof e?.useStrictIteration&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Vg(e)||qg(8),Kg(e)&&(e=Cb(e));const t=hb(this),r=Sb(e,void 0);return r[Bg].isManual_=!0,pb(t),r}finishDraft(e,t){const r=e&&e[Bg];r&&r.isManual_||qg(9);const{scope_:s}=r;return ub(s,t),fb(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(0===s.path.length&&"replace"===s.op){e=s.value;break}}r>-1&&(t=t.slice(r+1));const s=cb("Patches").applyPatches_;return Kg(e)?s(e,t):this.produce(e,e=>s(e,t))}},Pb=Eb.produce,Tb=Eb.setUseStrictIteration.bind(Eb);function Ab(e){return({dispatch:t,getState:r})=>s=>a=>"function"==typeof a?a(t,r,e):s(a)}var Mb=Ab(),Db=Ab,Ib="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Lg:Lg.apply(null,arguments)};function Rb(e,t){function r(...r){if(t){let s=t(...r);if(!s)throw new Error(Tv(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:r[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=t=>Fg(t)&&t.type===e,r}var $b=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function Lb(e){return Vg(e)?Pb(e,()=>{}):e}function Fb(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}var zb="RTK_autoBatch",Ub=()=>e=>({payload:e,meta:{[zb]:!0}}),Bb=e=>t=>{setTimeout(t,e)},qb=(e={type:"raf"})=>t=>(...r)=>{const s=t(...r);let a=!0,n=!1,i=!1;const l=new Set,o="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Bb(10):"callback"===e.type?e.queueNotification:Bb(e.timeout),c=()=>{i=!1,n&&(n=!1,l.forEach(e=>e()))};return Object.assign({},s,{subscribe(e){const t=s.subscribe(()=>a&&e());return l.add(e),()=>{t(),l.delete(e)}},dispatch(e){try{return a=!e?.meta?.[zb],n=!a,n&&(i||(i=!0,o(c))),s.dispatch(e)}finally{a=!0}}})};function Wb(e){const t=function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=e??{};let n=new $b;return t&&("boolean"==typeof t?n.push(Mb):n.push(Db(t.extraArgument))),n},{reducer:r,middleware:s,devTools:a=!0,preloadedState:n,enhancers:i}=e||{};let l,o;if("function"==typeof r)l=r;else{if(!Ig(r))throw new Error(Tv(1));l=$g(r)}o="function"==typeof s?s(t):t();let c=Lg;a&&(c=Ib({trace:!1,..."object"==typeof a&&a}));const d=function(...e){return t=>(r,s)=>{const a=t(r,s);let n=()=>{throw new Error(Tg(15))};const i={getState:a.getState,dispatch:(e,...t)=>n(e,...t)},l=e.map(e=>e(i));return n=Lg(...l)(a.dispatch),{...a,dispatch:n}}}(...o),u=(e=>function(t){const{autoBatch:r=!0}=t??{};let s=new $b(e);return r&&s.push(qb("object"==typeof r?r:void 0)),s})(d);return Rg(l,n,c(..."function"==typeof i?i(u):u()))}function Kb(e){const t={},r=[];let s;const a={addCase(e,r){const s="string"==typeof e?e:e.type;if(!s)throw new Error(Tv(28));if(s in t)throw new Error(Tv(29));return t[s]=r,a},addAsyncThunk:(e,s)=>(s.pending&&(t[e.pending.type]=s.pending),s.rejected&&(t[e.rejected.type]=s.rejected),s.fulfilled&&(t[e.fulfilled.type]=s.fulfilled),s.settled&&r.push({matcher:e.settled,reducer:s.settled}),a),addMatcher:(e,t)=>(r.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(s=e,a)};return e(a),[t,r,s]}Tb(!1);var Vb=(e=21)=>{let t="",r=e;for(;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},Hb=Symbol.for("rtk-slice-createasyncthunk");function Gb(e,t){return`${e}/${t}`}function Yb({creators:e}={}){const t=e?.asyncThunk?.[Hb];return function(e){const{name:r,reducerPath:s=r}=e;if(!r)throw new Error(Tv(11));const a=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},n=Object.keys(a),i={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},l={addCase(e,t){const r="string"==typeof e?e:e.type;if(!r)throw new Error(Tv(12));if(r in i.sliceCaseReducersByType)throw new Error(Tv(13));return i.sliceCaseReducersByType[r]=t,l},addMatcher:(e,t)=>(i.sliceMatchers.push({matcher:e,reducer:t}),l),exposeAction:(e,t)=>(i.actionCreators[e]=t,l),exposeCaseReducer:(e,t)=>(i.sliceCaseReducersByName[e]=t,l)};function o(){const[t={},r=[],s]="function"==typeof e.extraReducers?Kb(e.extraReducers):[e.extraReducers],a={...t,...i.sliceCaseReducersByType};return function(e,t){let r,[s,a,n]=Kb(t);if("function"==typeof e)r=()=>Lb(e());else{const t=Lb(e);r=()=>t}function i(e=r(),t){let i=[s[t.type],...a.filter(({matcher:e})=>e(t)).map(({reducer:e})=>e)];return 0===i.filter(e=>!!e).length&&(i=[n]),i.reduce((e,r)=>{if(r){if(Kg(e)){const s=r(e,t);return void 0===s?e:s}if(Vg(e))return Pb(e,e=>r(e,t));{const s=r(e,t);if(void 0===s){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return s}}return e},e)}return i.getInitialState=r,i}(e.initialState,e=>{for(let t in a)e.addCase(t,a[t]);for(let t of i.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);s&&e.addDefaultCase(s)})}n.forEach(s=>{const n=a[s],i={reducerName:s,type:Gb(r,s),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(n)?function({type:e,reducerName:t,createNotation:r},s,a){let n,i;if("reducer"in s){if(r&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(s))throw new Error(Tv(17));n=s.reducer,i=s.prepare}else n=s;a.addCase(e,n).exposeCaseReducer(t,n).exposeAction(t,i?Rb(e,i):Rb(e))}(i,n,l):function({type:e,reducerName:t},r,s,a){if(!a)throw new Error(Tv(18));const{payloadCreator:n,fulfilled:i,pending:l,rejected:o,settled:c,options:d}=r,u=a(e,n,d);s.exposeAction(t,u),i&&s.addCase(u.fulfilled,i);l&&s.addCase(u.pending,l);o&&s.addCase(u.rejected,o);c&&s.addMatcher(u.settled,c);s.exposeCaseReducer(t,{fulfilled:i||Qb,pending:l||Qb,rejected:o||Qb,settled:c||Qb})}(i,n,l,t)});const c=e=>e,d=new Map,u=new WeakMap;let m;function p(e,t){return m||(m=o()),m(e,t)}function h(){return m||(m=o()),m.getInitialState()}function x(t,r=!1){function s(e){let a=e[t];return void 0===a&&r&&(a=Fb(u,s,h)),a}function a(t=c){const s=Fb(d,r,()=>new WeakMap);return Fb(s,t,()=>{const s={};for(const[a,n]of Object.entries(e.selectors??{}))s[a]=Jb(n,t,()=>Fb(u,t,h),r);return s})}return{reducerPath:t,getSelectors:a,get selectors(){return a(s)},selectSlice:s}}const f={name:r,reducer:p,actions:i.actionCreators,caseReducers:i.sliceCaseReducersByName,getInitialState:h,...x(s),injectInto(e,{reducerPath:t,...r}={}){const a=t??s;return e.inject({reducerPath:a,reducer:p},r),{...f,...x(a,!0)}}};return f}}function Jb(e,t,r,s){function a(a,...n){let i=t(a);return void 0===i&&s&&(i=r()),e(i,...n)}return a.unwrapped=e,a}var Zb=Yb();function Qb(){}var Xb="listener",ev="completed",tv="cancelled",rv=`task-${tv}`,sv=`task-${ev}`,av=`${Xb}-${tv}`,nv=`${Xb}-${ev}`,iv=class{constructor(e){t(this,"name","TaskAbortError"),t(this,"message"),this.code=e,this.message=`task ${tv} (reason: ${e})`}},lv=(e,t)=>{if("function"!=typeof e)throw new TypeError(Tv(32))},ov=()=>{},cv=(e,t=ov)=>(e.catch(t),e),dv=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),uv=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},mv=e=>{if(e.aborted){const{reason:t}=e;throw new iv(t)}};function pv(e,t){let r=ov;return new Promise((s,a)=>{const n=()=>a(new iv(e.reason));e.aborted?n():(r=dv(e,n),t.finally(()=>r()).then(s,a))}).finally(()=>{r=ov})}var hv=e=>t=>cv(pv(e,t).then(t=>(mv(e),t))),xv=e=>{const t=hv(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:fv}=Object,gv={},bv="listenerMiddleware",vv=(e,t)=>(r,s)=>{lv(r);const a=new AbortController;var n;n=a,dv(e,()=>uv(n,e.reason));const i=(async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof iv?"cancelled":"rejected",error:r}}finally{t?.()}})(async()=>{mv(e),mv(a.signal);const t=await r({pause:hv(a.signal),delay:xv(a.signal),signal:a.signal});return mv(a.signal),t},()=>uv(a,sv));return s?.autoJoin&&t.push(i.catch(ov)),{result:hv(e)(i),cancel(){uv(a,rv)}}},yv=(e,t)=>(r,s)=>cv((async(r,s)=>{mv(t);let a=()=>{};const n=[new Promise((t,s)=>{let n=e({predicate:r,effect:(e,r)=>{r.unsubscribe(),t([e,r.getState(),r.getOriginalState()])}});a=()=>{n(),s()}})];null!=s&&n.push(new Promise(e=>setTimeout(e,s,null)));try{const e=await pv(t,Promise.race(n));return mv(t),e}finally{a()}})(r,s)),jv=e=>{let{type:t,actionCreator:r,matcher:s,predicate:a,effect:n}=e;if(t)a=Rb(t).match;else if(r)t=r.type,a=r.match;else if(s)a=s;else if(!a)throw new Error(Tv(21));return lv(n),{predicate:a,type:t,effect:n}},wv=fv(e=>{const{type:t,predicate:r,effect:s}=jv(e);return{id:Vb(),effect:s,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Tv(22))}}},{withTypes:()=>wv}),Nv=(e,t)=>{const{type:r,effect:s,predicate:a}=jv(t);return Array.from(e.values()).find(e=>("string"==typeof r?e.type===r:e.predicate===a)&&e.effect===s)},_v=e=>{e.pending.forEach(e=>{uv(e,av)})},kv=(e,t,r)=>{try{e(t,r)}catch(s){setTimeout(()=>{throw s},0)}},Sv=fv(Rb(`${bv}/add`),{withTypes:()=>Sv}),Cv=Rb(`${bv}/removeAll`),Ov=fv(Rb(`${bv}/remove`),{withTypes:()=>Ov}),Ev=(...e)=>{console.error(`${bv}/error`,...e)},Pv=(e={})=>{const t=new Map,r=new Map,{extra:s,onError:a=Ev}=e;lv(a);const n=e=>(e=>(e.unsubscribe=()=>t.delete(e.id),t.set(e.id,e),t=>{e.unsubscribe(),t?.cancelActive&&_v(e)}))(Nv(t,e)??wv(e));fv(n,{withTypes:()=>n});const i=e=>{const r=Nv(t,e);return r&&(r.unsubscribe(),e.cancelActive&&_v(r)),!!r};fv(i,{withTypes:()=>i});const l=async(e,i,l,o)=>{const c=new AbortController,d=yv(n,c.signal),u=[];try{e.pending.add(c),(e=>{const t=r.get(e)??0;r.set(e,t+1)})(e),await Promise.resolve(e.effect(i,fv({},l,{getOriginalState:o,condition:(e,t)=>d(e,t).then(Boolean),take:d,delay:xv(c.signal),pause:hv(c.signal),extra:s,signal:c.signal,fork:vv(c.signal,u),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,r)=>{e!==c&&(uv(e,av),r.delete(e))})},cancel:()=>{uv(c,av),e.pending.delete(c)},throwIfCancelled:()=>{mv(c.signal)}})))}catch(m){m instanceof iv||kv(a,m,{raisedBy:"effect"})}finally{await Promise.all(u),uv(c,nv),(e=>{const t=r.get(e)??1;1===t?r.delete(e):r.set(e,t-1)})(e),e.pending.delete(c)}},o=((e,t)=>()=>{for(const e of t.keys())_v(e);e.clear()})(t,r);return{middleware:e=>r=>s=>{if(!Fg(s))return r(s);if(Sv.match(s))return n(s.payload);if(Cv.match(s))return void o();if(Ov.match(s))return i(s.payload);let c=e.getState();const d=()=>{if(c===gv)throw new Error(Tv(23));return c};let u;try{if(u=r(s),t.size>0){const r=e.getState(),n=Array.from(t.values());for(const t of n){let n=!1;try{n=t.predicate(s,r,c)}catch(m){n=!1,kv(a,m,{raisedBy:"predicate"})}n&&l(t,s,e,d)}}}finally{c=gv}return u},startListening:n,stopListening:i,clearListeners:o}};function Tv(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Av=Zb({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,s,a,n;e.margin.top=null!==(r=t.payload.top)&&void 0!==r?r:0,e.margin.right=null!==(s=t.payload.right)&&void 0!==s?s:0,e.margin.bottom=null!==(a=t.payload.bottom)&&void 0!==a?a:0,e.margin.left=null!==(n=t.payload.left)&&void 0!==n?n:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:Mv,setLayout:Dv,setChartSize:Iv,setScale:Rv}=Av.actions,$v=Av.reducer;function Lv(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Fv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function zv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fv(Object(r),!0).forEach(function(t){Uv(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Uv(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bv(e,t,r){return Eh(e)||Eh(t)?r:wh(t)?gh(e,t,r):"function"==typeof t?t(e):r}var qv=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,Wv=(e,t,r,s)=>{if(s)return e.map(e=>e.coordinate);var a,n,i=e.map(e=>(e.coordinate===t&&(a=!0),e.coordinate===r&&(n=!0),e.coordinate));return a||i.push(t),n||i.push(r),i},Kv=(e,t,r)=>{if(!e)return null;var{duplicateDomain:s,type:a,range:n,scale:i,realScaleType:l,isCategorical:o,categoricalDomain:c,tickCount:d,ticks:u,niceTicks:m,axisType:p}=e;if(!i)return null;var h="scaleBand"===l&&i.bandwidth?i.bandwidth()/2:2,x="category"===a&&i.bandwidth?i.bandwidth()/h:0;return x="angleAxis"===p&&n&&n.length>=2?2*bh(n[0]-n[1])*x:x,u||m?(u||m||[]).map((e,t)=>{var r=s?s.indexOf(e):e;return{coordinate:i(r)+x,value:e,offset:x,index:t}}).filter(e=>!vh(e.coordinate)):o&&c?c.map((e,t)=>({coordinate:i(e)+x,value:e,index:t,offset:x})):i.ticks&&null!=d?i.ticks(d).map((e,t)=>({coordinate:i(e)+x,value:e,offset:x,index:t})):i.domain().map((e,t)=>({coordinate:i(e)+x,value:s?s[e]:e,index:t,offset:x}))},Vv=1e-4,Hv={sign:e=>{var t=e.length;if(!(t<=0))for(var r=0,s=e[0].length;r<s;++r)for(var a=0,n=0,i=0;i<t;++i){var l=vh(e[i][r][1])?e[i][r][0]:e[i][r][1];l>=0?(e[i][r][0]=a,e[i][r][1]=a+l,a=e[i][r][1]):(e[i][r][0]=n,e[i][r][1]=n+l,n=e[i][r][1])}},expand:function(e,t){if((s=e.length)>0){for(var r,s,a,n=0,i=e[0].length;n<i;++n){for(a=r=0;r<s;++r)a+=e[r][n][1]||0;if(a)for(r=0;r<s;++r)e[r][n][1]/=a}Vp(e,t)}},none:Vp,silhouette:function(e,t){if((r=e.length)>0){for(var r,s=0,a=e[t[0]],n=a.length;s<n;++s){for(var i=0,l=0;i<r;++i)l+=e[i][s][1]||0;a[s][1]+=a[s][0]=-l/2}Vp(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(s=(r=e[t[0]]).length)>0){for(var r,s,a,n=0,i=1;i<s;++i){for(var l=0,o=0,c=0;l<a;++l){for(var d=e[t[l]],u=d[i][1]||0,m=(u-(d[i-1][1]||0))/2,p=0;p<l;++p){var h=e[t[p]];m+=(h[i][1]||0)-(h[i-1][1]||0)}o+=u,c+=m*u}r[i-1][1]+=r[i-1][0]=n,o&&(n-=c/o)}r[i-1][1]+=r[i-1][0]=n,Vp(e,t)}},positive:e=>{var t=e.length;if(!(t<=0))for(var r=0,s=e[0].length;r<s;++r)for(var a=0,n=0;n<t;++n){var i=vh(e[n][r][1])?e[n][r][0]:e[n][r][1];i>=0?(e[n][r][0]=a,e[n][r][1]=a+i,a=e[n][r][1]):(e[n][r][0]=0,e[n][r][1]=0)}}},Gv=(e,t,r)=>{var s=Hv[r],a=function(){var e=Vm([]),t=Hp,r=Vp,s=Gp;function a(a){var n,i,l=Array.from(e.apply(this,arguments),Yp),o=l.length,c=-1;for(const e of a)for(n=0,++c;n<o;++n)(l[n][c]=[0,+s(e,l[n].key,c,a)]).data=e;for(n=0,i=np(t(l));n<o;++n)l[i[n]].index=n;return r(l,i),l}return a.keys=function(t){return arguments.length?(e="function"==typeof t?t:Vm(Array.from(t)),a):e},a.value=function(e){return arguments.length?(s="function"==typeof e?e:Vm(+e),a):s},a.order=function(e){return arguments.length?(t=null==e?Hp:"function"==typeof e?e:Vm(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(r=e??Vp,a):r},a}().keys(t).value((e,t)=>Number(Bv(e,t,0))).order(Hp).offset(s);return a(e)};function Yv(e){return null==e?void 0:String(e)}function Jv(e){var{axis:t,ticks:r,bandSize:s,entry:a,index:n,dataKey:i}=e;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!Eh(a[t.dataKey])){var l=Oh(r,"value",a[t.dataKey]);if(l)return l.coordinate+s/2}return r[n]?r[n].coordinate+s/2:null}var o=Bv(a,Eh(i)?t.dataKey:i);return Eh(o)?null:t.scale(o)}var Zv=e=>{var{axis:t,ticks:r,offset:s,bandSize:a,entry:n,index:i}=e;if("category"===t.type)return r[i]?r[i].coordinate+s:null;var l=Bv(n,t.dataKey,t.scale.domain()[i]);return Eh(l)?null:t.scale(l)-a/2+s},Qv=(e,t,r)=>{var s;if(null!=e)return[(s=Object.keys(e).reduce((s,a)=>{var n=e[a],{stackedData:i}=n,l=i.reduce((e,s)=>{var a,n=Lv(s,t,r),i=(a=n.flat(2).filter(jh),[Math.min(...a),Math.max(...a)]);return[Math.min(e[0],i[0]),Math.max(e[1],i[1])]},[1/0,-1/0]);return[Math.min(l[0],s[0]),Math.max(l[1],s[1])]},[1/0,-1/0]))[0]===1/0?0:s[0],s[1]===-1/0?0:s[1]]},Xv=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ey=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ty=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!r||s>0)return s}if(e&&t&&t.length>=2){for(var a=Cg(t,e=>e.coordinate),n=1/0,i=1,l=a.length;i<l;i++){var o=a[i],c=a[i-1];n=Math.min((o.coordinate||0)-(c.coordinate||0),n)}return n===1/0?0:n}return r?void 0:0};function ry(e){var{tooltipEntrySettings:t,dataKey:r,payload:s,value:a,name:n}=e;return zv(zv({},t),{},{dataKey:r,payload:s,value:a,name:n})}function sy(e,t){return e?String(e):"string"==typeof t?t:void 0}var ay=e=>e.layout.width,ny=e=>e.layout.height,iy=e=>e.layout.scale,ly=e=>e.layout.margin,oy=sg(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),cy=sg(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),dy="data-recharts-item-index",uy="data-recharts-item-data-key";function my(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function py(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?my(Object(r),!0).forEach(function(t){hy(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):my(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function hy(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xy,fy,gy,by,vy,yy=sg([ay,ny,ly,e=>e.brush.height,function(e){return cy(e).reduce((e,t)=>"left"!==t.orientation||t.mirror||t.hide?e:e+("number"==typeof t.width?t.width:60),0)},function(e){return cy(e).reduce((e,t)=>"right"!==t.orientation||t.mirror||t.hide?e:e+("number"==typeof t.width?t.width:60),0)},function(e){return oy(e).reduce((e,t)=>"top"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},function(e){return oy(e).reduce((e,t)=>"bottom"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},Og,e=>e.legend.size],(e,t,r,s,a,n,i,l,o,c)=>{var d={left:(r.left||0)+a,right:(r.right||0)+n},u=py(py({},{top:(r.top||0)+i,bottom:(r.bottom||0)+l}),d),m=u.bottom;u.bottom+=s,u=((e,t,r)=>{if(t&&r){var{width:s,height:a}=r,{align:n,verticalAlign:i,layout:l}=t;if(("vertical"===l||"horizontal"===l&&"middle"===i)&&"center"!==n&&jh(e[n]))return zv(zv({},e),{},{[n]:e[n]+(s||0)});if(("horizontal"===l||"vertical"===l&&"center"===n)&&"middle"!==i&&jh(e[i]))return zv(zv({},e),{},{[i]:e[i]+(a||0)})}return e})(u,o,c);var p=e-u.left-u.right,h=t-u.top-u.bottom;return py(py({brushBottom:m},u),{},{width:Math.max(p,0),height:Math.max(h,0)})}),jy=sg(yy,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),wy=sg(ay,ny,(e,t)=>({x:0,y:0,width:e,height:t})),Ny=u.createContext(null),_y=()=>null!=u.useContext(Ny),ky=e=>e.brush,Sy=sg([ky,yy,ly],(e,t,r)=>({height:e.height,x:jh(e.x)?e.x:t.left,y:jh(e.y)?e.y:t.top+t.height+t.brushBottom-((null==r?void 0:r.bottom)||0),width:jh(e.width)?e.width:t.width})),Cy={},Oy={},Ey={};function Py(){return xy||(xy=1,e=Ey,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.debounce=function(e,t,{signal:r,edges:s}={}){let a,n=null;const i=null!=s&&s.includes("leading"),l=null==s||s.includes("trailing"),o=()=>{null!==n&&(e.apply(a,n),a=void 0,n=null)};let c=null;const d=()=>{null!=c&&clearTimeout(c),c=setTimeout(()=>{c=null,l&&o(),u()},t)},u=()=>{null!==c&&(clearTimeout(c),c=null),a=void 0,n=null},m=function(...e){if(r?.aborted)return;a=this,n=e;const t=null==c;d(),i&&t&&o()};return m.schedule=d,m.cancel=u,m.flush=()=>{o()},r?.addEventListener("abort",u,{once:!0}),m}),Ey;var e}function Ty(){return fy||(fy=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Py();e.debounce=function(e,r=0,s={}){"object"!=typeof s&&(s={});const{leading:a=!1,trailing:n=!0,maxWait:i}=s,l=Array(2);let o;a&&(l[0]="leading"),n&&(l[1]="trailing");let c=null;const d=t.debounce(function(...t){o=e.apply(this,t),c=null},r,{edges:l}),u=function(...t){return null!=i&&(null===c&&(c=Date.now()),Date.now()-c>=i)?(o=e.apply(this,t),c=Date.now(),d.cancel(),d.schedule(),o):(d.apply(this,t),o)};return u.cancel=d.cancel,u.flush=()=>(d.flush(),o),u}}(Oy)),Oy}function Ay(){return vy?by:(vy=1,by=(gy||(gy=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ty();e.throttle=function(e,r=0,s={}){const{leading:a=!0,trailing:n=!0}=s;return t.debounce(e,r,{leading:a,maxWait:r,trailing:n})}}(Cy)),Cy).throttle)}const My=s(Ay());var Dy=function(e,t){for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a]},Iy=(e,t,r)=>{var{width:s="100%",height:a="100%",aspect:n,maxHeight:i}=r,l=yh(s)?e:Number(s),o=yh(a)?t:Number(a);return n&&n>0&&(l?o=l/n:o&&(l=o*n),i&&null!=o&&o>i&&(o=i)),{calculatedWidth:l,calculatedHeight:o}},Ry={width:0,height:0,overflow:"visible"},$y={width:0,overflowX:"visible"},Ly={height:0,overflowY:"visible"},Fy={},zy=e=>{var{width:t,height:r}=e,s=yh(t),a=yh(r);return s&&a?Ry:s?$y:a?Ly:Fy};function Uy(e){return Number.isFinite(e)}function By(e){return"number"==typeof e&&e>0&&Number.isFinite(e)}function qy(){return qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},qy.apply(null,arguments)}function Wy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function Ky(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wy(Object(r),!0).forEach(function(t){Vy(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wy(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Vy(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Hy=u.createContext({width:-1,height:-1});function Gy(e){var{children:t,width:r,height:s}=e,a=u.useMemo(()=>({width:r,height:s}),[r,s]);return function(e){return By(e.width)&&By(e.height)}(a)?u.createElement(Hy.Provider,{value:a},t):null}var Yy=()=>u.useContext(Hy),Jy=u.forwardRef((e,t)=>{var{aspect:r,initialDimension:s={width:-1,height:-1},width:a,height:n,minWidth:i=0,minHeight:l,maxHeight:o,children:c,debounce:d=0,id:m,className:p,onResize:h,style:x={}}=e,f=u.useRef(null),g=u.useRef();g.current=h,u.useImperativeHandle(t,()=>f.current);var[b,v]=u.useState({containerWidth:s.width,containerHeight:s.height}),y=u.useCallback((e,t)=>{v(r=>{var s=Math.round(e),a=Math.round(t);return r.containerWidth===s&&r.containerHeight===a?r:{containerWidth:s,containerHeight:a}})},[]);u.useEffect(()=>{if(null==f.current||"undefined"==typeof ResizeObserver)return Ah;var e=e=>{var t,{width:r,height:s}=e[0].contentRect;y(r,s),null===(t=g.current)||void 0===t||t.call(g,r,s)};d>0&&(e=My(e,d,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:r,height:s}=f.current.getBoundingClientRect();return y(r,s),t.observe(f.current),()=>{t.disconnect()}},[y,d]);var{containerWidth:j,containerHeight:w}=b;Dy(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:N,calculatedHeight:_}=Iy(j,w,{width:a,height:n,aspect:r,maxHeight:o});return Dy(null!=N&&N>0||null!=_&&_>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",N,_,a,n,i,l,r),u.createElement("div",{id:m?"".concat(m):void 0,className:Pm("recharts-responsive-container",p),style:Ky(Ky({},x),{},{width:a,height:n,minWidth:i,minHeight:l,maxHeight:o}),ref:f},u.createElement("div",{style:zy({width:a,height:n})},u.createElement(Gy,{width:N,height:_},c)))}),Zy=u.forwardRef((e,t)=>{var r=Yy();if(By(r.width)&&By(r.height))return e.children;var{width:s,height:a}=function(e){var{width:t,height:r,aspect:s}=e,a=t,n=r;return void 0===a&&void 0===n?(a="100%",n="100%"):void 0===a?a=s&&s>0?void 0:"100%":void 0===n&&(n=s&&s>0?void 0:"100%"),{width:a,height:n}}({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:n,calculatedHeight:i}=Iy(void 0,void 0,{width:s,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return jh(n)&&jh(i)?u.createElement(Gy,{width:n,height:i},e.children):u.createElement(Jy,qy({},e,{width:s,height:a,ref:t}))});function Qy(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Xy=()=>{var e,t=_y(),r=Yf(jy),s=Yf(Sy),a=null===(e=Yf(ky))||void 0===e?void 0:e.padding;return t&&s&&a?{width:s.width-a.left-a.right,height:s.height-a.top-a.bottom,x:a.left,y:a.top}:r},ej={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},tj=()=>{var e;return null!==(e=Yf(yy))&&void 0!==e?e:ej},rj=()=>Yf(ay),sj=()=>Yf(ny),aj=e=>e.layout.layoutType,nj=()=>Yf(aj),ij=e=>{var t=Kf(),r=_y(),{width:s,height:a}=e,n=Yy(),i=s,l=a;return n&&(i=n.width>0?n.width:s,l=n.height>0?n.height:a),u.useEffect(()=>{!r&&By(i)&&By(l)&&t(Iv({width:i,height:l}))},[t,r,i,l]),null},lj=Zb({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Ub()},removeLegendPayload:{reducer(e,t){var r=Cb(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Ub()}}}),{setLegendSize:oj,setLegendSettings:cj,addLegendPayload:dj,removeLegendPayload:uj}=lj.actions,mj=lj.reducer,pj=["contextPayload"];function hj(){return hj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},hj.apply(null,arguments)}function xj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function fj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xj(Object(r),!0).forEach(function(t){gj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function gj(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bj(e){return e.value}function vj(e){var{contextPayload:t}=e,r=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,pj),s=Af(t,e.payloadUniqBy,bj),a=fj(fj({},r),{},{payload:s});return u.isValidElement(e.content)?u.cloneElement(e.content,a):"function"==typeof e.content?u.createElement(e.content,a):u.createElement(tx,a)}function yj(e){var t=Kf();return u.useEffect(()=>{t(cj(e))},[t,e]),null}function jj(e){var t=Kf();return u.useEffect(()=>(t(oj(e)),()=>{t(oj({width:0,height:0}))}),[t,e]),null}var wj={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function Nj(e){var t=Vh(e,wj),r=Yf(Eg),s=u.useContext(Km),a=Yf(e=>e.layout.margin),{width:n,height:i,wrapperStyle:l,portal:o}=t,[c,d]=Pg([r]),m=rj(),p=sj();if(null==m||null==p)return null;var h=m-((null==a?void 0:a.left)||0)-((null==a?void 0:a.right)||0),x=function(e,t,r,s){return"vertical"===e&&jh(t)?{height:t}:"horizontal"===e?{width:r||s}:null}(t.layout,i,n,h),f=o?l:fj(fj({position:"absolute",width:(null==x?void 0:x.width)||n||"auto",height:(null==x?void 0:x.height)||i||"auto"},function(e,t,r,s,a,n){var i,l,{layout:o,align:c,verticalAlign:d}=t;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(i="center"===c&&"vertical"===o?{left:((s||0)-n.width)/2}:"right"===c?{right:r&&r.right||0}:{left:r&&r.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(l="middle"===d?{top:((a||0)-n.height)/2}:"bottom"===d?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),fj(fj({},i),l)}(l,t,a,m,p,c)),l),g=null!=o?o:s;if(null==g||null==r)return null;var b=u.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:d},u.createElement(yj,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),u.createElement(jj,{width:c.width,height:c.height}),u.createElement(vj,hj({},t,x,{margin:a,chartWidth:m,chartHeight:p,contextPayload:r})));return P.createPortal(b,g)}function _j(){return _j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},_j.apply(null,arguments)}function kj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function Sj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kj(Object(r),!0).forEach(function(t){Cj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Cj(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oj(e){return Array.isArray(e)&&wh(e[0])&&wh(e[1])?e.join(" ~ "):e}Nj.displayName="Legend";var Ej=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:s={},labelStyle:a={},payload:n,formatter:i,itemSorter:l,wrapperClassName:o,labelClassName:c,label:d,labelFormatter:m,accessibilityLayer:p=!1}=e,h=Sj({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=Sj({margin:0},a),f=!Eh(d),g=f?d:"",b=Pm("recharts-default-tooltip",o),v=Pm("recharts-tooltip-label",c);f&&m&&null!=n&&(g=m(d,n));var y=p?{role:"status","aria-live":"assertive"}:{};return u.createElement("div",_j({className:b,style:h},y),u.createElement("p",{className:v,style:x},u.isValidElement(g)?g:"".concat(g)),(()=>{if(n&&n.length){var e=(l?Cg(n,l):n).map((e,r)=>{if("none"===e.type)return null;var a=e.formatter||i||Oj,{value:l,name:o}=e,c=l,d=o;if(a){var m=a(l,o,e,r,n);if(Array.isArray(m))[c,d]=m;else{if(null==m)return null;c=m}}var p=Sj({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},s);return u.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(r),style:p},wh(d)?u.createElement("span",{className:"recharts-tooltip-item-name"},d):null,wh(d)?u.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,u.createElement("span",{className:"recharts-tooltip-item-value"},c),u.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return u.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},Pj="recharts-tooltip-wrapper",Tj={visibility:"hidden"};function Aj(e){var{coordinate:t,translateX:r,translateY:s}=e;return Pm(Pj,{["".concat(Pj,"-right")]:jh(r)&&t&&jh(t.x)&&r>=t.x,["".concat(Pj,"-left")]:jh(r)&&t&&jh(t.x)&&r<t.x,["".concat(Pj,"-bottom")]:jh(s)&&t&&jh(t.y)&&s>=t.y,["".concat(Pj,"-top")]:jh(s)&&t&&jh(t.y)&&s<t.y})}function Mj(e){var{allowEscapeViewBox:t,coordinate:r,key:s,offsetTopLeft:a,position:n,reverseDirection:i,tooltipDimension:l,viewBox:o,viewBoxDimension:c}=e;if(n&&jh(n[s]))return n[s];var d=r[s]-l-(a>0?a:0),u=r[s]+a;if(t[s])return i[s]?d:u;var m=o[s];return null==m?0:i[s]?d<m?Math.max(u,m):Math.max(d,m):null==c?0:u+l>m+c?Math.max(d,m):Math.max(u,m)}function Dj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function Ij(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dj(Object(r),!0).forEach(function(t){Rj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Rj(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class $j extends u.PureComponent{constructor(){super(...arguments),Rj(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Rj(this,"handleKeyDown",e=>{var t,r,s,a;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(r=this.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==t?t:0,y:null!==(s=null===(a=this.props.coordinate)||void 0===a?void 0:a.y)&&void 0!==s?s:0}})})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:t,animationDuration:r,animationEasing:s,children:a,coordinate:n,hasPayload:i,isAnimationActive:l,offset:o,position:c,reverseDirection:d,useTranslate3d:m,viewBox:p,wrapperStyle:h,lastBoundingBox:x,innerRef:f,hasPortalFromProps:g}=this.props,{cssClasses:b,cssProperties:v}=function(e){var t,r,s,{allowEscapeViewBox:a,coordinate:n,offsetTopLeft:i,position:l,reverseDirection:o,tooltipBox:c,useTranslate3d:d,viewBox:u}=e;return t=c.height>0&&c.width>0&&n?function(e){var{translateX:t,translateY:r,useTranslate3d:s}=e;return{transform:s?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}({translateX:r=Mj({allowEscapeViewBox:a,coordinate:n,key:"x",offsetTopLeft:i,position:l,reverseDirection:o,tooltipDimension:c.width,viewBox:u,viewBoxDimension:u.width}),translateY:s=Mj({allowEscapeViewBox:a,coordinate:n,key:"y",offsetTopLeft:i,position:l,reverseDirection:o,tooltipDimension:c.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:d}):Tj,{cssProperties:t,cssClasses:Aj({translateX:r,translateY:s,coordinate:n})}}({allowEscapeViewBox:t,coordinate:n,offsetTopLeft:o,position:c,reverseDirection:d,tooltipBox:{height:x.height,width:x.width},useTranslate3d:m,viewBox:p}),y=g?{}:Ij(Ij({transition:l&&e?"transform ".concat(r,"ms ").concat(s):void 0},v),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&i?"visible":"hidden",position:"absolute",top:0,left:0}),j=Ij(Ij({},y),{},{visibility:!this.state.dismissed&&e&&i?"visible":"hidden"},h);return u.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:b,style:j,ref:f},a)}}var Lj=!1,Fj=!("undefined"!=typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout),zj=()=>{var e;return null===(e=Yf(e=>e.rootProps.accessibilityLayer))||void 0===e||e};function Uj(){return Uj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Uj.apply(null,arguments)}function Bj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function qj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bj(Object(r),!0).forEach(function(t){Wj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Wj(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kj={curveBasisClosed:function(e){return new Mp(e)},curveBasisOpen:function(e){return new Dp(e)},curveBasis:function(e){return new Ap(e)},curveBumpX:function(e){return new mp(e,!0)},curveBumpY:function(e){return new mp(e,!1)},curveLinearClosed:function(e){return new Ip(e)},curveLinear:lp,curveMonotoneX:function(e){return new zp(e)},curveMonotoneY:function(e){return new Up(e)},curveNatural:function(e){return new qp(e)},curveStep:function(e){return new Kp(e,.5)},curveStepAfter:function(e){return new Kp(e,1)},curveStepBefore:function(e){return new Kp(e,0)}},Vj=e=>Uy(e.x)&&Uy(e.y),Hj=e=>null!=e.base&&Vj(e.base)&&Vj(e),Gj=e=>e.x,Yj=e=>e.y,Jj=e=>{var{type:t="linear",points:r=[],baseLine:s,layout:a,connectNulls:n=!1}=e,i=((e,t)=>{if("function"==typeof e)return e;var r="curve".concat(Ph(e));return"curveMonotone"!==r&&"curveBump"!==r||!t?Kj[r]||lp:Kj["".concat(r).concat("vertical"===t?"Y":"X")]})(t,a),l=n?r.filter(Vj):r;if(Array.isArray(s)){var o=r.map((e,t)=>qj(qj({},e),{},{base:s[t]}));return("vertical"===a?up().y(Yj).x1(Gj).x0(e=>e.base.x):up().x(Gj).y1(Yj).y0(e=>e.base.y)).defined(Hj).curve(i)(n?o.filter(Hj):o)}return("vertical"===a&&jh(s)?up().y(Yj).x1(Gj).x0(s):jh(s)?up().x(Gj).y1(Yj).y0(s):dp().x(Gj).y(Yj)).defined(Vj).curve(i)(l)},Zj=e=>{var{className:t,points:r,path:s,pathRef:a}=e;if(!(r&&r.length||s))return null;var n=r&&r.length?Jj(e):s;return u.createElement("path",Uj({},Rm(e),Bh(e),{className:Pm("recharts-curve",t),d:null===n?void 0:n,ref:a}))},Qj=["x","y","top","left","width","height","className"];function Xj(){return Xj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Xj.apply(null,arguments)}function ew(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function tw(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rw=(e,t,r,s,a,n)=>"M".concat(e,",").concat(a,"v").concat(s,"M").concat(n,",").concat(t,"h").concat(r),sw=e=>{var{x:t=0,y:r=0,top:s=0,left:a=0,width:n=0,height:i=0,className:l}=e,o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ew(Object(r),!0).forEach(function(t){tw(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ew(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({x:t,y:r,top:s,left:a,width:n,height:i},function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,Qj));return jh(t)&&jh(r)&&jh(n)&&jh(i)&&jh(s)&&jh(a)?u.createElement("path",Xj({},Lm(o),{className:Pm("recharts-cross",l),d:rw(t,r,n,i,s,a)})):null};function aw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function nw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aw(Object(r),!0).forEach(function(t){iw(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aw(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function iw(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lw=(e,t,r)=>e.map(e=>{return"".concat((s=e,s.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())))," ").concat(t,"ms ").concat(r);var s}).join(","),ow=(e,t)=>Object.keys(t).reduce((r,s)=>nw(nw({},r),{},{[s]:e(s,t[s])}),{});function cw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function dw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cw(Object(r),!0).forEach(function(t){uw(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cw(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function uw(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var mw=(e,t,r)=>e+(t-e)*r,pw=e=>{var{from:t,to:r}=e;return t!==r},hw=(e,t,r)=>{var s=ow((t,r)=>{if(pw(r)){var[s,a]=e(r.from,r.to,r.velocity);return dw(dw({},r),{},{from:s,velocity:a})}return r},t);return r<1?ow((e,t)=>pw(t)?dw(dw({},t),{},{velocity:mw(t.velocity,s[e].velocity,r),from:mw(t.from,s[e].from,r)}):t,t):hw(e,s,r-1)};function xw(e,t,r,s,a,n){var i,l=s.reduce((r,s)=>dw(dw({},r),{},{[s]:{from:e[s],velocity:0,to:t[s]}}),{}),o=null,c=s=>{i||(i=s);var d=(s-i)/r.dt;l=hw(r,l,d),a(dw(dw(dw({},e),t),ow((e,t)=>t.from,l))),i=s,Object.values(l).filter(pw).length&&(o=n.setTimeout(c))};return()=>(o=n.setTimeout(c),()=>{var e;null===(e=o)||void 0===e||e()})}const fw=(e,t,r,s,a,n)=>{var i,l,o=(i=e,l=t,[Object.keys(i),Object.keys(l)].reduce((e,t)=>e.filter(e=>t.includes(e))));return null==r?()=>(a(dw(dw({},e),t)),()=>{}):!0===r.isStepper?xw(e,t,r,o,a,n):function(e,t,r,s,a,n,i){var l,o=null,c=a.reduce((r,s)=>dw(dw({},r),{},{[s]:[e[s],t[s]]}),{}),d=a=>{l||(l=a);var u=(a-l)/s,m=ow((e,t)=>mw(...t,r(u)),c);if(n(dw(dw(dw({},e),t),m)),u<1)o=i.setTimeout(d);else{var p=ow((e,t)=>mw(...t,r(1)),c);n(dw(dw(dw({},e),t),p))}};return()=>(o=i.setTimeout(d),()=>{var e;null===(e=o)||void 0===e||e()})}(e,t,r,s,o,a,n)};var gw=1e-4,bw=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],vw=(e,t)=>e.map((e,r)=>e*t**r).reduce((e,t)=>e+t),yw=(e,t)=>r=>{var s=bw(e,t);return vw(s,r)},jw=(e,t,r,s)=>{var a,n,i=yw(e,r),l=yw(t,s),o=(a=e,n=r,e=>{var t=[...bw(a,n).map((e,t)=>e*t).slice(1),0];return vw(t,e)}),c=e=>e>1?1:e<0?0:e,d=e=>{for(var t=e>1?1:e,r=t,s=0;s<8;++s){var a=i(r)-t,n=o(r);if(Math.abs(a-t)<gw||n<gw)return l(r);r=c(r-a/n)}return l(r)};return d.isStepper=!1,d},ww=function(){return jw(...function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(1===t.length)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:var s,a=t[0].split("(");if("cubic-bezier"===a[0]&&4===(null===(s=a[1])||void 0===s?void 0:s.split(")")[0].split(",").length)){var n=a[1].split(")")[0].split(",").map(e=>parseFloat(e));return[n[0],n[1],n[2],n[3]]}}return 4===t.length?t:[0,0,1,1]}(...arguments))},Nw=e=>{if("string"==typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return ww(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:r=8,dt:s=17}=e,a=(e,a,n)=>{var i=n+(-(e-a)*t-n*r)*s/1e3,l=n*s/1e3+e;return Math.abs(l-a)<gw&&Math.abs(i)<gw?[a,0]:[l,i]};return a.isStepper=!0,a.dt=s,a}();default:if("cubic-bezier"===e.split("(")[0])return ww(e)}return"function"==typeof e?e:null};class _w{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=performance.now(),s=null,a=n=>{n-r>=t?e(n):"function"==typeof requestAnimationFrame&&(s=requestAnimationFrame(a))};return s=requestAnimationFrame(a),()=>{null!=s&&cancelAnimationFrame(s)}}}function kw(){return e=new _w,t=()=>null,r=!1,s=null,a=n=>{if(!r){if(Array.isArray(n)){if(!n.length)return;var i=n,[l,...o]=i;return"number"==typeof l?void(s=e.setTimeout(a.bind(null,o),l)):(a(l),void(s=e.setTimeout(a.bind(null,o))))}"string"==typeof n&&t(n),"object"==typeof n&&t(n),"function"==typeof n&&n()}},{stop:()=>{r=!0},start:e=>{r=!1,s&&(s(),s=null),a(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e};var e,t,r,s,a}var Sw=u.createContext(kw);var Cw={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Ow={t:0},Ew={t:1};function Pw(e){var t,r,s,a=Vh(e,Cw),{isActive:n,canBegin:i,duration:l,easing:o,begin:c,onAnimationEnd:d,onAnimationStart:m,children:p}=a,h=(t=a.animationId,r=a.animationManager,s=u.useContext(Sw),u.useMemo(()=>null!=r?r:s(t),[t,r,s])),[x,f]=u.useState(n?Ow:Ew),g=u.useRef(null);return u.useEffect(()=>{n||f(Ew)},[n]),u.useEffect(()=>{if(!n||!i)return Ah;var e=fw(Ow,Ew,Nw(o),l,f,h.getTimeoutController());return h.start([m,c,()=>{g.current=e()},l,d]),()=>{h.stop(),g.current&&g.current(),d()}},[n,i,l,o,c,m,d,h]),p(x.t)}function Tw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",r=u.useRef(_h(t)),s=u.useRef(e);return s.current!==e&&(r.current=_h(t),s.current=e),r.current}var Aw=["radius"],Mw=["radius"];function Dw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function Iw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dw(Object(r),!0).forEach(function(t){Rw(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dw(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Rw(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $w(){return $w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},$w.apply(null,arguments)}function Lw(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Fw=(e,t,r,s,a)=>{var n,i=Math.min(Math.abs(r)/2,Math.abs(s)/2),l=s>=0?1:-1,o=r>=0?1:-1,c=s>=0&&r>=0||s<0&&r<0?1:0;if(i>0&&a instanceof Array){for(var d=[0,0,0,0],u=0;u<4;u++)d[u]=a[u]>i?i:a[u];n="M".concat(e,",").concat(t+l*d[0]),d[0]>0&&(n+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+o*d[0],",").concat(t)),n+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(n+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,",\n        ").concat(e+r,",").concat(t+l*d[1])),n+="L ".concat(e+r,",").concat(t+s-l*d[2]),d[2]>0&&(n+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,",\n        ").concat(e+r-o*d[2],",").concat(t+s)),n+="L ".concat(e+o*d[3],",").concat(t+s),d[3]>0&&(n+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+s-l*d[3])),n+="Z"}else if(i>0&&a===+a&&a>0){var m=Math.min(i,a);n="M ".concat(e,",").concat(t+l*m,"\n            A ").concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+o*m,",").concat(t,"\n            L ").concat(e+r-o*m,",").concat(t,"\n            A ").concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+l*m,"\n            L ").concat(e+r,",").concat(t+s-l*m,"\n            A ").concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-o*m,",").concat(t+s,"\n            L ").concat(e+o*m,",").concat(t+s,"\n            A ").concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+s-l*m," Z")}else n="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return n},zw={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Uw=e=>{var t=Vh(e,zw),r=u.useRef(null),[s,a]=u.useState(-1);u.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&a(e)}catch(t){}},[]);var{x:n,y:i,width:l,height:o,radius:c,className:d}=t,{animationEasing:m,animationDuration:p,animationBegin:h,isAnimationActive:x,isUpdateAnimationActive:f}=t,g=u.useRef(l),b=u.useRef(o),v=u.useRef(n),y=u.useRef(i),j=Tw(u.useMemo(()=>({x:n,y:i,width:l,height:o,radius:c}),[n,i,l,o,c]),"rectangle-");if(n!==+n||i!==+i||l!==+l||o!==+o||0===l||0===o)return null;var w=Pm("recharts-rectangle",d);if(!f){var N=Lm(t),{radius:_}=N,k=Lw(N,Aw);return u.createElement("path",$w({},k,{radius:"number"==typeof c?c:void 0,className:w,d:Fw(n,i,l,o,c)}))}var S=g.current,C=b.current,O=v.current,E=y.current,P="0px ".concat(-1===s?1:s,"px"),T="".concat(s,"px 0px"),A=lw(["strokeDasharray"],p,"string"==typeof m?m:zw.animationEasing);return u.createElement(Pw,{animationId:j,key:j,canBegin:s>0,duration:p,easing:m,isActive:f,begin:h},e=>{var s,a=Ch(S,l,e),d=Ch(C,o,e),m=Ch(O,n,e),p=Ch(E,i,e);r.current&&(g.current=a,b.current=d,v.current=m,y.current=p),s=x?e>0?{transition:A,strokeDasharray:T}:{strokeDasharray:P}:{strokeDasharray:T};var h=Lm(t),{radius:f}=h,j=Lw(h,Mw);return u.createElement("path",$w({},j,{radius:"number"==typeof c?c:void 0,className:w,d:Fw(m,p,a,d,c),ref:r,style:Iw(Iw({},s),t.style)}))})};function Bw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function qw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bw(Object(r),!0).forEach(function(t){Ww(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bw(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ww(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kw=Math.PI/180,Vw=e=>180*e/Math.PI,Hw=(e,t,r,s)=>({x:e+Math.cos(-Kw*s)*r,y:t+Math.sin(-Kw*s)*r}),Gw=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},Yw=(e,t)=>{var{x:r,y:s}=e,{cx:a,cy:n}=t,i=((e,t)=>{var{x:r,y:s}=e,{x:a,y:n}=t;return Math.sqrt((r-a)**2+(s-n)**2)})({x:r,y:s},{x:a,y:n});if(i<=0)return{radius:i,angle:0};var l=(r-a)/i,o=Math.acos(l);return s>n&&(o=2*Math.PI-o),{radius:i,angle:Vw(o),angleInRadian:o}},Jw=(e,t)=>{var{startAngle:r,endAngle:s}=t,a=Math.floor(r/360),n=Math.floor(s/360);return e+360*Math.min(a,n)},Zw=(e,t)=>{var{chartX:r,chartY:s}=e,{radius:a,angle:n}=Yw({x:r,y:s},t),{innerRadius:i,outerRadius:l}=t;if(a<i||a>l)return null;if(0===a)return null;var o,{startAngle:c,endAngle:d}=(e=>{var{startAngle:t,endAngle:r}=e,s=Math.floor(t/360),a=Math.floor(r/360),n=Math.min(s,a);return{startAngle:t-360*n,endAngle:r-360*n}})(t),u=n;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;o=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;o=u>=d&&u<=c}return o?qw(qw({},t),{},{radius:a,angle:Jw(u,t)}):null};function Qw(e){var{cx:t,cy:r,radius:s,startAngle:a,endAngle:n}=e;return{points:[Hw(t,r,s,a),Hw(t,r,s,n)],cx:t,cy:r,radius:s,startAngle:a,endAngle:n}}function Xw(){return Xw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Xw.apply(null,arguments)}var eN=e=>{var{cx:t,cy:r,radius:s,angle:a,sign:n,isExternal:i,cornerRadius:l,cornerIsExternal:o}=e,c=l*(i?1:-1)+s,d=Math.asin(l/c)/Kw,u=o?a:a+n*d,m=o?a-n*d:a;return{center:Hw(t,r,c,u),circleTangency:Hw(t,r,s,u),lineTangency:Hw(t,r,c*Math.cos(d*Kw),m),theta:d}},tN=e=>{var{cx:t,cy:r,innerRadius:s,outerRadius:a,startAngle:n,endAngle:i}=e,l=((e,t)=>bh(t-e)*Math.min(Math.abs(t-e),359.999))(n,i),o=n+l,c=Hw(t,r,a,n),d=Hw(t,r,a,o),u="M ".concat(c.x,",").concat(c.y,"\n    A ").concat(a,",").concat(a,",0,\n    ").concat(+(Math.abs(l)>180),",").concat(+(n>o),",\n    ").concat(d.x,",").concat(d.y,"\n  ");if(s>0){var m=Hw(t,r,s,n),p=Hw(t,r,s,o);u+="L ".concat(p.x,",").concat(p.y,"\n            A ").concat(s,",").concat(s,",0,\n            ").concat(+(Math.abs(l)>180),",").concat(+(n<=o),",\n            ").concat(m.x,",").concat(m.y," Z")}else u+="L ".concat(t,",").concat(r," Z");return u},rN={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},sN=e=>{var t=Vh(e,rN),{cx:r,cy:s,innerRadius:a,outerRadius:n,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:o,startAngle:c,endAngle:d,className:m}=t;if(n<a||c===d)return null;var p,h=Pm("recharts-sector",m),x=n-a,f=kh(i,x,0,!0);return p=f>0&&Math.abs(c-d)<360?(e=>{var{cx:t,cy:r,innerRadius:s,outerRadius:a,cornerRadius:n,forceCornerRadius:i,cornerIsExternal:l,startAngle:o,endAngle:c}=e,d=bh(c-o),{circleTangency:u,lineTangency:m,theta:p}=eN({cx:t,cy:r,radius:a,angle:o,sign:d,cornerRadius:n,cornerIsExternal:l}),{circleTangency:h,lineTangency:x,theta:f}=eN({cx:t,cy:r,radius:a,angle:c,sign:-d,cornerRadius:n,cornerIsExternal:l}),g=l?Math.abs(o-c):Math.abs(o-c)-p-f;if(g<0)return i?"M ".concat(m.x,",").concat(m.y,"\n        a").concat(n,",").concat(n,",0,0,1,").concat(2*n,",0\n        a").concat(n,",").concat(n,",0,0,1,").concat(2*-n,",0\n      "):tN({cx:t,cy:r,innerRadius:s,outerRadius:a,startAngle:o,endAngle:c});var b="M ".concat(m.x,",").concat(m.y,"\n    A").concat(n,",").concat(n,",0,0,").concat(+(d<0),",").concat(u.x,",").concat(u.y,"\n    A").concat(a,",").concat(a,",0,").concat(+(g>180),",").concat(+(d<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(n,",").concat(n,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,"\n  ");if(s>0){var{circleTangency:v,lineTangency:y,theta:j}=eN({cx:t,cy:r,radius:s,angle:o,sign:d,isExternal:!0,cornerRadius:n,cornerIsExternal:l}),{circleTangency:w,lineTangency:N,theta:_}=eN({cx:t,cy:r,radius:s,angle:c,sign:-d,isExternal:!0,cornerRadius:n,cornerIsExternal:l}),k=l?Math.abs(o-c):Math.abs(o-c)-j-_;if(k<0&&0===n)return"".concat(b,"L").concat(t,",").concat(r,"Z");b+="L".concat(N.x,",").concat(N.y,"\n      A").concat(n,",").concat(n,",0,0,").concat(+(d<0),",").concat(w.x,",").concat(w.y,"\n      A").concat(s,",").concat(s,",0,").concat(+(k>180),",").concat(+(d>0),",").concat(v.x,",").concat(v.y,"\n      A").concat(n,",").concat(n,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,"Z")}else b+="L".concat(t,",").concat(r,"Z");return b})({cx:r,cy:s,innerRadius:a,outerRadius:n,cornerRadius:Math.min(f,x/2),forceCornerRadius:l,cornerIsExternal:o,startAngle:c,endAngle:d}):tN({cx:r,cy:s,innerRadius:a,outerRadius:n,startAngle:c,endAngle:d}),u.createElement("path",Xw({},Lm(t),{className:h,d:p}))};function aN(e,t,r){if("horizontal"===e)return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if("vertical"===e)return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(Uh(t)){if("centric"===e){var{cx:s,cy:a,innerRadius:n,outerRadius:i,angle:l}=t,o=Hw(s,a,n,l),c=Hw(s,a,i,l);return[{x:o.x,y:o.y},{x:c.x,y:c.y}]}return Qw(t)}}var nN,iN,lN,oN,cN,dN={},uN={},mN={};function pN(){return nN||(nN=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hg();e.toNumber=function(e){return t.isSymbol(e)?NaN:Number(e)}}(mN)),mN}function hN(){return iN||(iN=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pN();e.toFinite=function(e){if(!e)return 0===e?e:0;if((e=t.toNumber(e))===1/0||e===-1/0){return(e<0?-1:1)*Number.MAX_VALUE}return e==e?e:0}}(uN)),uN}function xN(){return cN?oN:(cN=1,oN=(lN||(lN=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kg(),r=hN();e.range=function(e,s,a){a&&"number"!=typeof a&&t.isIterateeCall(e,s,a)&&(s=a=void 0),e=r.toFinite(e),void 0===s?(s=e,e=0):s=r.toFinite(s),a=void 0===a?e<s?1:-1:r.toFinite(a);const n=Math.max(Math.ceil((s-e)/(a||1)),0),i=new Array(n);for(let t=0;t<n;t++)i[t]=e,e+=a;return i}}(dN)),dN).range)}const fN=s(xN());function gN(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bN(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function vN(e){let t,r,s;function a(e,s,a=0,n=e.length){if(a<n){if(0!==t(s,s))return n;do{const t=a+n>>>1;r(e[t],s)<0?a=t+1:n=t}while(a<n)}return a}return 2!==e.length?(t=gN,r=(t,r)=>gN(e(t),r),s=(t,r)=>e(t)-r):(t=e===gN||e===bN?e:yN,r=e,s=e),{left:a,center:function(e,t,r=0,n=e.length){const i=a(e,t,r,n-1);return i>r&&s(e[i-1],t)>-s(e[i],t)?i-1:i},right:function(e,s,a=0,n=e.length){if(a<n){if(0!==t(s,s))return n;do{const t=a+n>>>1;r(e[t],s)<=0?a=t+1:n=t}while(a<n)}return a}}}function yN(){return 0}function jN(e){return null===e?NaN:+e}const wN=vN(gN).right;vN(jN).center;class NN extends Map{constructor(e,t=kN){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(_N(this,e))}has(e){return super.has(_N(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):(e.set(s,r),r)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},r){const s=t(r);e.has(s)&&(r=e.get(s),e.delete(s));return r}(this,e))}}function _N({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):r}function kN(e){return null!==e&&"object"==typeof e?e.valueOf():e}function SN(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}const CN=Math.sqrt(50),ON=Math.sqrt(10),EN=Math.sqrt(2);function PN(e,t,r){const s=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(s)),n=s/Math.pow(10,a),i=n>=CN?10:n>=ON?5:n>=EN?2:1;let l,o,c;return a<0?(c=Math.pow(10,-a)/i,l=Math.round(e*c),o=Math.round(t*c),l/c<e&&++l,o/c>t&&--o,c=-c):(c=Math.pow(10,a)*i,l=Math.round(e/c),o=Math.round(t/c),l*c<e&&++l,o*c>t&&--o),o<l&&.5<=r&&r<2?PN(e,t,2*r):[l,o,c]}function TN(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const s=t<e,[a,n,i]=s?PN(t,e,r):PN(e,t,r);if(!(n>=a))return[];const l=n-a+1,o=new Array(l);if(s)if(i<0)for(let c=0;c<l;++c)o[c]=(n-c)/-i;else for(let c=0;c<l;++c)o[c]=(n-c)*i;else if(i<0)for(let c=0;c<l;++c)o[c]=(a+c)/-i;else for(let c=0;c<l;++c)o[c]=(a+c)*i;return o}function AN(e,t,r){return PN(e=+e,t=+t,r=+r)[2]}function MN(e,t,r){r=+r;const s=(t=+t)<(e=+e),a=s?AN(t,e,r):AN(e,t,r);return(s?-1:1)*(a<0?1/-a:a)}function DN(e,t){let r;for(const s of e)null!=s&&(r<s||void 0===r&&s>=s)&&(r=s);return r}function IN(e,t){let r;for(const s of e)null!=s&&(r>s||void 0===r&&s>=s)&&(r=s);return r}function RN(e,t,r=0,s=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),s=Math.floor(Math.min(e.length-1,s)),!(r<=t&&t<=s))return e;for(a=void 0===a?SN:function(e=gN){if(e===gN)return SN;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const s=e(t,r);return s||0===s?s:(0===e(r,r))-(0===e(t,t))}}(a);s>r;){if(s-r>600){const n=s-r+1,i=t-r+1,l=Math.log(n),o=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*o*(n-o)/n)*(i-n/2<0?-1:1);RN(e,t,Math.max(r,Math.floor(t-i*o/n+c)),Math.min(s,Math.floor(t+(n-i)*o/n+c)),a)}const n=e[t];let i=r,l=s;for($N(e,r,t),a(e[s],n)>0&&$N(e,r,s);i<l;){for($N(e,i,l),++i,--l;a(e[i],n)<0;)++i;for(;a(e[l],n)>0;)--l}0===a(e[r],n)?$N(e,r,l):(++l,$N(e,l,s)),l<=t&&(r=l+1),t<=l&&(s=l-1)}return e}function $N(e,t,r){const s=e[t];e[t]=e[r],e[r]=s}function LN(e,t,r=jN){if((s=e.length)&&!isNaN(t=+t)){if(t<=0||s<2)return+r(e[0],0,e);if(t>=1)return+r(e[s-1],s-1,e);var s,a=(s-1)*t,n=Math.floor(a),i=+r(e[n],n,e);return i+(+r(e[n+1],n+1,e)-i)*(a-n)}}function FN(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function zN(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const UN=Symbol("implicit");function BN(){var e=new NN,t=[],r=[],s=UN;function a(a){let n=e.get(a);if(void 0===n){if(s!==UN)return s;e.set(a,n=t.push(a)-1)}return r[n%r.length]}return a.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new NN;for(const s of r)e.has(s)||e.set(s,t.push(s)-1);return a},a.range=function(e){return arguments.length?(r=Array.from(e),a):r.slice()},a.unknown=function(e){return arguments.length?(s=e,a):s},a.copy=function(){return BN(t,r).unknown(s)},FN.apply(a,arguments),a}function qN(){var e,t,r=BN().unknown(void 0),s=r.domain,a=r.range,n=0,i=1,l=!1,o=0,c=0,d=.5;function u(){var r=s().length,u=i<n,m=u?i:n,p=u?n:i;e=(p-m)/Math.max(1,r-o+2*c),l&&(e=Math.floor(e)),m+=(p-m-e*(r-o))*d,t=e*(1-o),l&&(m=Math.round(m),t=Math.round(t));var h=function(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var s=-1,a=0|Math.max(0,Math.ceil((t-e)/r)),n=new Array(a);++s<a;)n[s]=e+s*r;return n}(r).map(function(t){return m+e*t});return a(u?h.reverse():h)}return delete r.unknown,r.domain=function(e){return arguments.length?(s(e),u()):s()},r.range=function(e){return arguments.length?([n,i]=e,n=+n,i=+i,u()):[n,i]},r.rangeRound=function(e){return[n,i]=e,n=+n,i=+i,l=!0,u()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(l=!!e,u()):l},r.padding=function(e){return arguments.length?(o=Math.min(1,c=+e),u()):o},r.paddingInner=function(e){return arguments.length?(o=Math.min(1,e),u()):o},r.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},r.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},r.copy=function(){return qN(s(),[n,i]).round(l).paddingInner(o).paddingOuter(c).align(d)},FN.apply(u(),arguments)}function WN(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return WN(t())},e}function KN(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function VN(e,t){var r=Object.create(e.prototype);for(var s in t)r[s]=t[s];return r}function HN(){}var GN=.7,YN=1/GN,JN="\\s*([+-]?\\d+)\\s*",ZN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",QN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",XN=/^#([0-9a-f]{3,8})$/,e_=new RegExp(`^rgb\\(${JN},${JN},${JN}\\)$`),t_=new RegExp(`^rgb\\(${QN},${QN},${QN}\\)$`),r_=new RegExp(`^rgba\\(${JN},${JN},${JN},${ZN}\\)$`),s_=new RegExp(`^rgba\\(${QN},${QN},${QN},${ZN}\\)$`),a_=new RegExp(`^hsl\\(${ZN},${QN},${QN}\\)$`),n_=new RegExp(`^hsla\\(${ZN},${QN},${QN},${ZN}\\)$`),i_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function l_(){return this.rgb().formatHex()}function o_(){return this.rgb().formatRgb()}function c_(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=XN.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?d_(t):3===r?new p_(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?u_(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?u_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=e_.exec(e))?new p_(t[1],t[2],t[3],1):(t=t_.exec(e))?new p_(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=r_.exec(e))?u_(t[1],t[2],t[3],t[4]):(t=s_.exec(e))?u_(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=a_.exec(e))?v_(t[1],t[2]/100,t[3]/100,1):(t=n_.exec(e))?v_(t[1],t[2]/100,t[3]/100,t[4]):i_.hasOwnProperty(e)?d_(i_[e]):"transparent"===e?new p_(NaN,NaN,NaN,0):null}function d_(e){return new p_(e>>16&255,e>>8&255,255&e,1)}function u_(e,t,r,s){return s<=0&&(e=t=r=NaN),new p_(e,t,r,s)}function m_(e,t,r,s){return 1===arguments.length?((a=e)instanceof HN||(a=c_(a)),a?new p_((a=a.rgb()).r,a.g,a.b,a.opacity):new p_):new p_(e,t,r,s??1);var a}function p_(e,t,r,s){this.r=+e,this.g=+t,this.b=+r,this.opacity=+s}function h_(){return`#${b_(this.r)}${b_(this.g)}${b_(this.b)}`}function x_(){const e=f_(this.opacity);return`${1===e?"rgb(":"rgba("}${g_(this.r)}, ${g_(this.g)}, ${g_(this.b)}${1===e?")":`, ${e})`}`}function f_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function g_(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function b_(e){return((e=g_(e))<16?"0":"")+e.toString(16)}function v_(e,t,r,s){return s<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new j_(e,t,r,s)}function y_(e){if(e instanceof j_)return new j_(e.h,e.s,e.l,e.opacity);if(e instanceof HN||(e=c_(e)),!e)return new j_;if(e instanceof j_)return e;var t=(e=e.rgb()).r/255,r=e.g/255,s=e.b/255,a=Math.min(t,r,s),n=Math.max(t,r,s),i=NaN,l=n-a,o=(n+a)/2;return l?(i=t===n?(r-s)/l+6*(r<s):r===n?(s-t)/l+2:(t-r)/l+4,l/=o<.5?n+a:2-n-a,i*=60):l=o>0&&o<1?0:i,new j_(i,l,o,e.opacity)}function j_(e,t,r,s){this.h=+e,this.s=+t,this.l=+r,this.opacity=+s}function w_(e){return(e=(e||0)%360)<0?e+360:e}function N_(e){return Math.max(0,Math.min(1,e||0))}function __(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}KN(HN,c_,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:l_,formatHex:l_,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return y_(this).formatHsl()},formatRgb:o_,toString:o_}),KN(p_,m_,VN(HN,{brighter(e){return e=null==e?YN:Math.pow(YN,e),new p_(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?GN:Math.pow(GN,e),new p_(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new p_(g_(this.r),g_(this.g),g_(this.b),f_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:h_,formatHex:h_,formatHex8:function(){return`#${b_(this.r)}${b_(this.g)}${b_(this.b)}${b_(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:x_,toString:x_})),KN(j_,function(e,t,r,s){return 1===arguments.length?y_(e):new j_(e,t,r,s??1)},VN(HN,{brighter(e){return e=null==e?YN:Math.pow(YN,e),new j_(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?GN:Math.pow(GN,e),new j_(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*t,a=2*r-s;return new p_(__(e>=240?e-240:e+120,a,s),__(e,a,s),__(e<120?e+240:e-120,a,s),this.opacity)},clamp(){return new j_(w_(this.h),N_(this.s),N_(this.l),f_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=f_(this.opacity);return`${1===e?"hsl(":"hsla("}${w_(this.h)}, ${100*N_(this.s)}%, ${100*N_(this.l)}%${1===e?")":`, ${e})`}`}}));const k_=e=>()=>e;function S_(e){return 1===(e=+e)?C_:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(s){return Math.pow(e+s*t,r)}}(t,r,e):k_(isNaN(t)?r:t)}}function C_(e,t){var r=t-e;return r?function(e,t){return function(r){return e+r*t}}(e,r):k_(isNaN(e)?t:e)}const O_=function e(t){var r=S_(t);function s(e,t){var s=r((e=m_(e)).r,(t=m_(t)).r),a=r(e.g,t.g),n=r(e.b,t.b),i=C_(e.opacity,t.opacity);return function(t){return e.r=s(t),e.g=a(t),e.b=n(t),e.opacity=i(t),e+""}}return s.gamma=e,s}(1);function E_(e,t){t||(t=[]);var r,s=e?Math.min(t.length,e.length):0,a=t.slice();return function(n){for(r=0;r<s;++r)a[r]=e[r]*(1-n)+t[r]*n;return a}}function P_(e,t){var r,s=t?t.length:0,a=e?Math.min(s,e.length):0,n=new Array(a),i=new Array(s);for(r=0;r<a;++r)n[r]=$_(e[r],t[r]);for(;r<s;++r)i[r]=t[r];return function(e){for(r=0;r<a;++r)i[r]=n[r](e);return i}}function T_(e,t){var r=new Date;return e=+e,t=+t,function(s){return r.setTime(e*(1-s)+t*s),r}}function A_(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function M_(e,t){var r,s={},a={};for(r in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)r in e?s[r]=$_(e[r],t[r]):a[r]=t[r];return function(e){for(r in s)a[r]=s[r](e);return a}}var D_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,I_=new RegExp(D_.source,"g");function R_(e,t){var r,s,a,n=D_.lastIndex=I_.lastIndex=0,i=-1,l=[],o=[];for(e+="",t+="";(r=D_.exec(e))&&(s=I_.exec(t));)(a=s.index)>n&&(a=t.slice(n,a),l[i]?l[i]+=a:l[++i]=a),(r=r[0])===(s=s[0])?l[i]?l[i]+=s:l[++i]=s:(l[++i]=null,o.push({i,x:A_(r,s)})),n=I_.lastIndex;return n<t.length&&(a=t.slice(n),l[i]?l[i]+=a:l[++i]=a),l.length<2?o[0]?function(e){return function(t){return e(t)+""}}(o[0].x):function(e){return function(){return e}}(t):(t=o.length,function(e){for(var r,s=0;s<t;++s)l[(r=o[s]).i]=r.x(e);return l.join("")})}function $_(e,t){var r,s,a=typeof t;return null==t||"boolean"===a?k_(t):("number"===a?A_:"string"===a?(r=c_(t))?(t=r,O_):R_:t instanceof c_?O_:t instanceof Date?T_:(s=t,!ArrayBuffer.isView(s)||s instanceof DataView?Array.isArray(t)?P_:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?M_:A_:E_))(e,t)}function L_(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function F_(e){return+e}var z_=[0,1];function U_(e){return e}function B_(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r});var r}function q_(e,t,r){var s=e[0],a=e[1],n=t[0],i=t[1];return a<s?(s=B_(a,s),n=r(i,n)):(s=B_(s,a),n=r(n,i)),function(e){return n(s(e))}}function W_(e,t,r){var s=Math.min(e.length,t.length)-1,a=new Array(s),n=new Array(s),i=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<s;)a[i]=B_(e[i],e[i+1]),n[i]=r(t[i],t[i+1]);return function(t){var r=wN(e,t,1,s)-1;return n[r](a[r](t))}}function K_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function V_(){var e,t,r,s,a,n,i=z_,l=z_,o=$_,c=U_;function d(){var e,t,r,o=Math.min(i.length,l.length);return c!==U_&&(e=i[0],t=i[o-1],e>t&&(r=e,e=t,t=r),c=function(r){return Math.max(e,Math.min(t,r))}),s=o>2?W_:q_,a=n=null,u}function u(t){return null==t||isNaN(t=+t)?r:(a||(a=s(i.map(e),l,o)))(e(c(t)))}return u.invert=function(r){return c(t((n||(n=s(l,i.map(e),A_)))(r)))},u.domain=function(e){return arguments.length?(i=Array.from(e,F_),d()):i.slice()},u.range=function(e){return arguments.length?(l=Array.from(e),d()):l.slice()},u.rangeRound=function(e){return l=Array.from(e),o=L_,d()},u.clamp=function(e){return arguments.length?(c=!!e||U_,d()):c!==U_},u.interpolate=function(e){return arguments.length?(o=e,d()):o},u.unknown=function(e){return arguments.length?(r=e,u):r},function(r,s){return e=r,t=s,d()}}function H_(){return V_()(U_,U_)}function G_(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,s=e.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+e.slice(r+1)]}function Y_(e){return(e=G_(Math.abs(e)))?e[1]:NaN}var J_,Z_=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Q_(e){if(!(t=Z_.exec(e)))throw new Error("invalid format: "+e);var t;return new X_({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function X_(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function ek(e,t){var r=G_(e,t);if(!r)return e+"";var s=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+s:s.length>a+1?s.slice(0,a+1)+"."+s.slice(a+1):s+new Array(a-s.length+2).join("0")}Q_.prototype=X_.prototype,X_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const tk={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ek(100*e,t),r:ek,s:function(e,t){var r=G_(e,t);if(!r)return e+"";var s=r[0],a=r[1],n=a-(J_=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,i=s.length;return n===i?s:n>i?s+new Array(n-i+1).join("0"):n>0?s.slice(0,n)+"."+s.slice(n):"0."+new Array(1-n).join("0")+G_(e,Math.max(0,t+n-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function rk(e){return e}var sk,ak,nk,ik=Array.prototype.map,lk=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ok(e){var t,r,s=void 0===e.grouping||void 0===e.thousands?rk:(t=ik.call(e.grouping,Number),r=e.thousands+"",function(e,s){for(var a=e.length,n=[],i=0,l=t[0],o=0;a>0&&l>0&&(o+l+1>s&&(l=Math.max(1,s-o)),n.push(e.substring(a-=l,a+l)),!((o+=l+1)>s));)l=t[i=(i+1)%t.length];return n.reverse().join(r)}),a=void 0===e.currency?"":e.currency[0]+"",n=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",l=void 0===e.numerals?rk:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(ik.call(e.numerals,String)),o=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=Q_(e)).fill,r=e.align,u=e.sign,m=e.symbol,p=e.zero,h=e.width,x=e.comma,f=e.precision,g=e.trim,b=e.type;"n"===b?(x=!0,b="g"):tk[b]||(void 0===f&&(f=12),g=!0,b="g"),(p||"0"===t&&"="===r)&&(p=!0,t="0",r="=");var v="$"===m?a:"#"===m&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",y="$"===m?n:/[%p]/.test(b)?o:"",j=tk[b],w=/[defgprs%]/.test(b);function N(e){var a,n,o,m=v,N=y;if("c"===b)N=j(e)+N,e="";else{var _=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:j(Math.abs(e),f),g&&(e=function(e){e:for(var t,r=e.length,s=1,a=-1;s<r;++s)switch(e[s]){case".":a=t=s;break;case"0":0===a&&(a=s),t=s;break;default:if(!+e[s])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),_&&0===+e&&"+"!==u&&(_=!1),m=(_?"("===u?u:c:"-"===u||"("===u?"":u)+m,N=("s"===b?lk[8+J_/3]:"")+N+(_&&"("===u?")":""),w)for(a=-1,n=e.length;++a<n;)if(48>(o=e.charCodeAt(a))||o>57){N=(46===o?i+e.slice(a+1):e.slice(a))+N,e=e.slice(0,a);break}}x&&!p&&(e=s(e,1/0));var k=m.length+e.length+N.length,S=k<h?new Array(h-k+1).join(t):"";switch(x&&p&&(e=s(S+e,S.length?h-N.length:1/0),S=""),r){case"<":e=m+e+N+S;break;case"=":e=m+S+e+N;break;case"^":e=S.slice(0,k=S.length>>1)+m+e+N+S.slice(k);break;default:e=S+m+e+N}return l(e)}return f=void 0===f?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,f)):Math.max(0,Math.min(20,f)),N.toString=function(){return e+""},N}return{format:u,formatPrefix:function(e,t){var r=u(((e=Q_(e)).type="f",e)),s=3*Math.max(-8,Math.min(8,Math.floor(Y_(t)/3))),a=Math.pow(10,-s),n=lk[8+s/3];return function(e){return r(a*e)+n}}}}function ck(e,t,r,s){var a,n=MN(e,t,r);switch((s=Q_(s??",f")).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=s.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Y_(t)/3)))-Y_(Math.abs(e)))}(n,i))||(s.precision=a),nk(s,i);case"":case"e":case"g":case"p":case"r":null!=s.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Y_(t)-Y_(e))+1}(n,Math.max(Math.abs(e),Math.abs(t))))||(s.precision=a-("e"===s.type));break;case"f":case"%":null!=s.precision||isNaN(a=function(e){return Math.max(0,-Y_(Math.abs(e)))}(n))||(s.precision=a-2*("%"===s.type))}return ak(s)}function dk(e){var t=e.domain;return e.ticks=function(e){var r=t();return TN(r[0],r[r.length-1],e??10)},e.tickFormat=function(e,r){var s=t();return ck(s[0],s[s.length-1],e??10,r)},e.nice=function(r){null==r&&(r=10);var s,a,n=t(),i=0,l=n.length-1,o=n[i],c=n[l],d=10;for(c<o&&(a=o,o=c,c=a,a=i,i=l,l=a);d-- >0;){if((a=AN(o,c,r))===s)return n[i]=o,n[l]=c,t(n);if(a>0)o=Math.floor(o/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;o=Math.ceil(o*a)/a,c=Math.floor(c*a)/a}s=a}return e},e}function uk(e,t){var r,s=0,a=(e=e.slice()).length-1,n=e[s],i=e[a];return i<n&&(r=s,s=a,a=r,r=n,n=i,i=r),e[s]=t.floor(n),e[a]=t.ceil(i),e}function mk(e){return Math.log(e)}function pk(e){return Math.exp(e)}function hk(e){return-Math.log(-e)}function xk(e){return-Math.exp(-e)}function fk(e){return isFinite(e)?+("1e"+e):e<0?0:e}function gk(e){return(t,r)=>-e(-t,r)}function bk(e){const t=e(mk,pk),r=t.domain;let s,a,n=10;function i(){return s=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(n),a=function(e){return 10===e?fk:e===Math.E?Math.exp:t=>Math.pow(e,t)}(n),r()[0]<0?(s=gk(s),a=gk(a),e(hk,xk)):e(mk,pk),t}return t.base=function(e){return arguments.length?(n=+e,i()):n},t.domain=function(e){return arguments.length?(r(e),i()):r()},t.ticks=e=>{const t=r();let i=t[0],l=t[t.length-1];const o=l<i;o&&([i,l]=[l,i]);let c,d,u=s(i),m=s(l);const p=null==e?10:+e;let h=[];if(!(n%1)&&m-u<p){if(u=Math.floor(u),m=Math.ceil(m),i>0){for(;u<=m;++u)for(c=1;c<n;++c)if(d=u<0?c/a(-u):c*a(u),!(d<i)){if(d>l)break;h.push(d)}}else for(;u<=m;++u)for(c=n-1;c>=1;--c)if(d=u>0?c/a(-u):c*a(u),!(d<i)){if(d>l)break;h.push(d)}2*h.length<p&&(h=TN(i,l,p))}else h=TN(u,m,Math.min(m-u,p)).map(a);return o?h.reverse():h},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===n?"s":","),"function"!=typeof r&&(n%1||null!=(r=Q_(r)).precision||(r.trim=!0),r=ak(r)),e===1/0)return r;const i=Math.max(1,n*e/t.ticks().length);return e=>{let t=e/a(Math.round(s(e)));return t*n<n-.5&&(t*=n),t<=i?r(e):""}},t.nice=()=>r(uk(r(),{floor:e=>a(Math.floor(s(e))),ceil:e=>a(Math.ceil(s(e)))})),t}function vk(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function yk(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function jk(e){var t=1,r=e(vk(t),yk(t));return r.constant=function(r){return arguments.length?e(vk(t=+r),yk(t)):t},dk(r)}function wk(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Nk(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function _k(e){return e<0?-e*e:e*e}function kk(e){var t=e(U_,U_),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(U_,U_):.5===r?e(Nk,_k):e(wk(r),wk(1/r)):r},dk(t)}function Sk(){var e=kk(V_());return e.copy=function(){return K_(e,Sk()).exponent(e.exponent())},FN.apply(e,arguments),e}function Ck(e){return Math.sign(e)*e*e}sk=ok({thousands:",",grouping:[3],currency:["$",""]}),ak=sk.format,nk=sk.formatPrefix;const Ok=new Date,Ek=new Date;function Pk(e,t,r,s){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=t=>(e(t=new Date(+t)),t),a.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),a.round=e=>{const t=a(e),r=a.ceil(e);return e-t<r-e?t:r},a.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),a.range=(r,s,n)=>{const i=[];if(r=a.ceil(r),n=null==n?1:Math.floor(n),!(r<s&&n>0))return i;let l;do{i.push(l=new Date(+r)),t(r,n),e(r)}while(l<r&&r<s);return i},a.filter=r=>Pk(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,s)=>{if(e>=e)if(s<0)for(;++s<=0;)for(;t(e,-1),!r(e););else for(;--s>=0;)for(;t(e,1),!r(e););}),r&&(a.count=(t,s)=>(Ok.setTime(+t),Ek.setTime(+s),e(Ok),e(Ek),Math.floor(r(Ok,Ek))),a.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(s?t=>s(t)%e===0:t=>a.count(0,t)%e===0):a:null)),a}const Tk=Pk(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Tk.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?Pk(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Tk:null),Tk.range;const Ak=1e3,Mk=6e4,Dk=36e5,Ik=864e5,Rk=6048e5,$k=2592e6,Lk=31536e6,Fk=Pk(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ak)},(e,t)=>(t-e)/Ak,e=>e.getUTCSeconds());Fk.range;const zk=Pk(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ak)},(e,t)=>{e.setTime(+e+t*Mk)},(e,t)=>(t-e)/Mk,e=>e.getMinutes());zk.range;const Uk=Pk(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Mk)},(e,t)=>(t-e)/Mk,e=>e.getUTCMinutes());Uk.range;const Bk=Pk(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ak-e.getMinutes()*Mk)},(e,t)=>{e.setTime(+e+t*Dk)},(e,t)=>(t-e)/Dk,e=>e.getHours());Bk.range;const qk=Pk(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Dk)},(e,t)=>(t-e)/Dk,e=>e.getUTCHours());qk.range;const Wk=Pk(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Mk)/Ik,e=>e.getDate()-1);Wk.range;const Kk=Pk(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ik,e=>e.getUTCDate()-1);Kk.range;const Vk=Pk(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ik,e=>Math.floor(e/Ik));function Hk(e){return Pk(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Mk)/Rk)}Vk.range;const Gk=Hk(0),Yk=Hk(1),Jk=Hk(2),Zk=Hk(3),Qk=Hk(4),Xk=Hk(5),eS=Hk(6);function tS(e){return Pk(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/Rk)}Gk.range,Yk.range,Jk.range,Zk.range,Qk.range,Xk.range,eS.range;const rS=tS(0),sS=tS(1),aS=tS(2),nS=tS(3),iS=tS(4),lS=tS(5),oS=tS(6);rS.range,sS.range,aS.range,nS.range,iS.range,lS.range,oS.range;const cS=Pk(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth());cS.range;const dS=Pk(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth());dS.range;const uS=Pk(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());uS.every=e=>isFinite(e=Math.floor(e))&&e>0?Pk(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null,uS.range;const mS=Pk(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function pS(e,t,r,s,a,n){const i=[[Fk,1,Ak],[Fk,5,5e3],[Fk,15,15e3],[Fk,30,3e4],[n,1,Mk],[n,5,3e5],[n,15,9e5],[n,30,18e5],[a,1,Dk],[a,3,108e5],[a,6,216e5],[a,12,432e5],[s,1,Ik],[s,2,1728e5],[r,1,Rk],[t,1,$k],[t,3,7776e6],[e,1,Lk]];function l(t,r,s){const a=Math.abs(r-t)/s,n=vN(([,,e])=>e).right(i,a);if(n===i.length)return e.every(MN(t/Lk,r/Lk,s));if(0===n)return Tk.every(Math.max(MN(t,r,s),1));const[l,o]=i[a/i[n-1][2]<i[n][2]/a?n-1:n];return l.every(o)}return[function(e,t,r){const s=t<e;s&&([e,t]=[t,e]);const a=r&&"function"==typeof r.range?r:l(e,t,r),n=a?a.range(e,+t+1):[];return s?n.reverse():n},l]}mS.every=e=>isFinite(e=Math.floor(e))&&e>0?Pk(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null,mS.range;const[hS,xS]=pS(mS,dS,rS,Vk,qk,Uk),[fS,gS]=pS(uS,cS,Gk,Wk,Bk,zk);function bS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function vS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function yS(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var jS,wS,NS,_S={"-":"",_:" ",0:"0"},kS=/^\s*\d+/,SS=/^%/,CS=/[\\^$*+?|[\]().{}]/g;function OS(e,t,r){var s=e<0?"-":"",a=(s?-e:e)+"",n=a.length;return s+(n<r?new Array(r-n+1).join(t)+a:a)}function ES(e){return e.replace(CS,"\\$&")}function PS(e){return new RegExp("^(?:"+e.map(ES).join("|")+")","i")}function TS(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function AS(e,t,r){var s=kS.exec(t.slice(r,r+1));return s?(e.w=+s[0],r+s[0].length):-1}function MS(e,t,r){var s=kS.exec(t.slice(r,r+1));return s?(e.u=+s[0],r+s[0].length):-1}function DS(e,t,r){var s=kS.exec(t.slice(r,r+2));return s?(e.U=+s[0],r+s[0].length):-1}function IS(e,t,r){var s=kS.exec(t.slice(r,r+2));return s?(e.V=+s[0],r+s[0].length):-1}function RS(e,t,r){var s=kS.exec(t.slice(r,r+2));return s?(e.W=+s[0],r+s[0].length):-1}function $S(e,t,r){var s=kS.exec(t.slice(r,r+4));return s?(e.y=+s[0],r+s[0].length):-1}function LS(e,t,r){var s=kS.exec(t.slice(r,r+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function FS(e,t,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function zS(e,t,r){var s=kS.exec(t.slice(r,r+1));return s?(e.q=3*s[0]-3,r+s[0].length):-1}function US(e,t,r){var s=kS.exec(t.slice(r,r+2));return s?(e.m=s[0]-1,r+s[0].length):-1}function BS(e,t,r){var s=kS.exec(t.slice(r,r+2));return s?(e.d=+s[0],r+s[0].length):-1}function qS(e,t,r){var s=kS.exec(t.slice(r,r+3));return s?(e.m=0,e.d=+s[0],r+s[0].length):-1}function WS(e,t,r){var s=kS.exec(t.slice(r,r+2));return s?(e.H=+s[0],r+s[0].length):-1}function KS(e,t,r){var s=kS.exec(t.slice(r,r+2));return s?(e.M=+s[0],r+s[0].length):-1}function VS(e,t,r){var s=kS.exec(t.slice(r,r+2));return s?(e.S=+s[0],r+s[0].length):-1}function HS(e,t,r){var s=kS.exec(t.slice(r,r+3));return s?(e.L=+s[0],r+s[0].length):-1}function GS(e,t,r){var s=kS.exec(t.slice(r,r+6));return s?(e.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function YS(e,t,r){var s=SS.exec(t.slice(r,r+1));return s?r+s[0].length:-1}function JS(e,t,r){var s=kS.exec(t.slice(r));return s?(e.Q=+s[0],r+s[0].length):-1}function ZS(e,t,r){var s=kS.exec(t.slice(r));return s?(e.s=+s[0],r+s[0].length):-1}function QS(e,t){return OS(e.getDate(),t,2)}function XS(e,t){return OS(e.getHours(),t,2)}function eC(e,t){return OS(e.getHours()%12||12,t,2)}function tC(e,t){return OS(1+Wk.count(uS(e),e),t,3)}function rC(e,t){return OS(e.getMilliseconds(),t,3)}function sC(e,t){return rC(e,t)+"000"}function aC(e,t){return OS(e.getMonth()+1,t,2)}function nC(e,t){return OS(e.getMinutes(),t,2)}function iC(e,t){return OS(e.getSeconds(),t,2)}function lC(e){var t=e.getDay();return 0===t?7:t}function oC(e,t){return OS(Gk.count(uS(e)-1,e),t,2)}function cC(e){var t=e.getDay();return t>=4||0===t?Qk(e):Qk.ceil(e)}function dC(e,t){return e=cC(e),OS(Qk.count(uS(e),e)+(4===uS(e).getDay()),t,2)}function uC(e){return e.getDay()}function mC(e,t){return OS(Yk.count(uS(e)-1,e),t,2)}function pC(e,t){return OS(e.getFullYear()%100,t,2)}function hC(e,t){return OS((e=cC(e)).getFullYear()%100,t,2)}function xC(e,t){return OS(e.getFullYear()%1e4,t,4)}function fC(e,t){var r=e.getDay();return OS((e=r>=4||0===r?Qk(e):Qk.ceil(e)).getFullYear()%1e4,t,4)}function gC(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+OS(t/60|0,"0",2)+OS(t%60,"0",2)}function bC(e,t){return OS(e.getUTCDate(),t,2)}function vC(e,t){return OS(e.getUTCHours(),t,2)}function yC(e,t){return OS(e.getUTCHours()%12||12,t,2)}function jC(e,t){return OS(1+Kk.count(mS(e),e),t,3)}function wC(e,t){return OS(e.getUTCMilliseconds(),t,3)}function NC(e,t){return wC(e,t)+"000"}function _C(e,t){return OS(e.getUTCMonth()+1,t,2)}function kC(e,t){return OS(e.getUTCMinutes(),t,2)}function SC(e,t){return OS(e.getUTCSeconds(),t,2)}function CC(e){var t=e.getUTCDay();return 0===t?7:t}function OC(e,t){return OS(rS.count(mS(e)-1,e),t,2)}function EC(e){var t=e.getUTCDay();return t>=4||0===t?iS(e):iS.ceil(e)}function PC(e,t){return e=EC(e),OS(iS.count(mS(e),e)+(4===mS(e).getUTCDay()),t,2)}function TC(e){return e.getUTCDay()}function AC(e,t){return OS(sS.count(mS(e)-1,e),t,2)}function MC(e,t){return OS(e.getUTCFullYear()%100,t,2)}function DC(e,t){return OS((e=EC(e)).getUTCFullYear()%100,t,2)}function IC(e,t){return OS(e.getUTCFullYear()%1e4,t,4)}function RC(e,t){var r=e.getUTCDay();return OS((e=r>=4||0===r?iS(e):iS.ceil(e)).getUTCFullYear()%1e4,t,4)}function $C(){return"+0000"}function LC(){return"%"}function FC(e){return+e}function zC(e){return Math.floor(+e/1e3)}function UC(e){return new Date(e)}function BC(e){return e instanceof Date?+e:+new Date(+e)}function qC(e,t,r,s,a,n,i,l,o,c){var d=H_(),u=d.invert,m=d.domain,p=c(".%L"),h=c(":%S"),x=c("%I:%M"),f=c("%I %p"),g=c("%a %d"),b=c("%b %d"),v=c("%B"),y=c("%Y");function j(e){return(o(e)<e?p:l(e)<e?h:i(e)<e?x:n(e)<e?f:s(e)<e?a(e)<e?g:b:r(e)<e?v:y)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?m(Array.from(e,BC)):m().map(UC)},d.ticks=function(t){var r=m();return e(r[0],r[r.length-1],t??10)},d.tickFormat=function(e,t){return null==t?j:c(t)},d.nice=function(e){var r=m();return e&&"function"==typeof e.range||(e=t(r[0],r[r.length-1],e??10)),e?m(uk(r,e)):d},d.copy=function(){return K_(d,qC(e,t,r,s,a,n,i,l,o,c))},d}function WC(){var e,t,r,s,a,n=0,i=1,l=U_,o=!1;function c(t){return null==t||isNaN(t=+t)?a:l(0===r?.5:(t=(s(t)-e)*r,o?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var r,s;return arguments.length?([r,s]=t,l=e(r,s),c):[l(0),l(1)]}}return c.domain=function(a){return arguments.length?([n,i]=a,e=s(n=+n),t=s(i=+i),r=e===t?0:1/(t-e),c):[n,i]},c.clamp=function(e){return arguments.length?(o=!!e,c):o},c.interpolator=function(e){return arguments.length?(l=e,c):l},c.range=d($_),c.rangeRound=d(L_),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return s=a,e=a(n),t=a(i),r=e===t?0:1/(t-e),c}}function KC(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function VC(){var e=kk(WC());return e.copy=function(){return KC(e,VC()).exponent(e.exponent())},zN.apply(e,arguments)}function HC(){var e,t,r,s,a,n,i,l=0,o=.5,c=1,d=1,u=U_,m=!1;function p(e){return isNaN(e=+e)?i:(e=.5+((e=+n(e))-t)*(d*e<d*t?s:a),u(m?Math.max(0,Math.min(1,e)):e))}function h(e){return function(t){var r,s,a;return arguments.length?([r,s,a]=t,u=function(e,t){void 0===t&&(t=e,e=$_);for(var r=0,s=t.length-1,a=t[0],n=new Array(s<0?0:s);r<s;)n[r]=e(a,a=t[++r]);return function(e){var t=Math.max(0,Math.min(s-1,Math.floor(e*=s)));return n[t](e-t)}}(e,[r,s,a]),p):[u(0),u(.5),u(1)]}}return p.domain=function(i){return arguments.length?([l,o,c]=i,e=n(l=+l),t=n(o=+o),r=n(c=+c),s=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),d=t<e?-1:1,p):[l,o,c]},p.clamp=function(e){return arguments.length?(m=!!e,p):m},p.interpolator=function(e){return arguments.length?(u=e,p):u},p.range=h($_),p.rangeRound=h(L_),p.unknown=function(e){return arguments.length?(i=e,p):i},function(i){return n=i,e=i(l),t=i(o),r=i(c),s=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),d=t<e?-1:1,p}}function GC(){var e=kk(HC());return e.copy=function(){return KC(e,GC()).exponent(e.exponent())},zN.apply(e,arguments)}!function(e){jS=function(e){var t=e.dateTime,r=e.date,s=e.time,a=e.periods,n=e.days,i=e.shortDays,l=e.months,o=e.shortMonths,c=PS(a),d=TS(a),u=PS(n),m=TS(n),p=PS(i),h=TS(i),x=PS(l),f=TS(l),g=PS(o),b=TS(o),v={a:function(e){return i[e.getDay()]},A:function(e){return n[e.getDay()]},b:function(e){return o[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:null,d:QS,e:QS,f:sC,g:hC,G:fC,H:XS,I:eC,j:tC,L:rC,m:aC,M:nC,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:FC,s:zC,S:iC,u:lC,U:oC,V:dC,w:uC,W:mC,x:null,X:null,y:pC,Y:xC,Z:gC,"%":LC},y={a:function(e){return i[e.getUTCDay()]},A:function(e){return n[e.getUTCDay()]},b:function(e){return o[e.getUTCMonth()]},B:function(e){return l[e.getUTCMonth()]},c:null,d:bC,e:bC,f:NC,g:DC,G:RC,H:vC,I:yC,j:jC,L:wC,m:_C,M:kC,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:FC,s:zC,S:SC,u:CC,U:OC,V:PC,w:TC,W:AC,x:null,X:null,y:MC,Y:IC,Z:$C,"%":LC},j={a:function(e,t,r){var s=p.exec(t.slice(r));return s?(e.w=h.get(s[0].toLowerCase()),r+s[0].length):-1},A:function(e,t,r){var s=u.exec(t.slice(r));return s?(e.w=m.get(s[0].toLowerCase()),r+s[0].length):-1},b:function(e,t,r){var s=g.exec(t.slice(r));return s?(e.m=b.get(s[0].toLowerCase()),r+s[0].length):-1},B:function(e,t,r){var s=x.exec(t.slice(r));return s?(e.m=f.get(s[0].toLowerCase()),r+s[0].length):-1},c:function(e,r,s){return _(e,t,r,s)},d:BS,e:BS,f:GS,g:LS,G:$S,H:WS,I:WS,j:qS,L:HS,m:US,M:KS,p:function(e,t,r){var s=c.exec(t.slice(r));return s?(e.p=d.get(s[0].toLowerCase()),r+s[0].length):-1},q:zS,Q:JS,s:ZS,S:VS,u:MS,U:DS,V:IS,w:AS,W:RS,x:function(e,t,s){return _(e,r,t,s)},X:function(e,t,r){return _(e,s,t,r)},y:LS,Y:$S,Z:FS,"%":YS};function w(e,t){return function(r){var s,a,n,i=[],l=-1,o=0,c=e.length;for(r instanceof Date||(r=new Date(+r));++l<c;)37===e.charCodeAt(l)&&(i.push(e.slice(o,l)),null!=(a=_S[s=e.charAt(++l)])?s=e.charAt(++l):a="e"===s?" ":"0",(n=t[s])&&(s=n(r,a)),i.push(s),o=l+1);return i.push(e.slice(o,l)),i.join("")}}function N(e,t){return function(r){var s,a,n=yS(1900,void 0,1);if(_(n,e,r+="",0)!=r.length)return null;if("Q"in n)return new Date(n.Q);if("s"in n)return new Date(1e3*n.s+("L"in n?n.L:0));if(t&&!("Z"in n)&&(n.Z=0),"p"in n&&(n.H=n.H%12+12*n.p),void 0===n.m&&(n.m="q"in n?n.q:0),"V"in n){if(n.V<1||n.V>53)return null;"w"in n||(n.w=1),"Z"in n?(a=(s=vS(yS(n.y,0,1))).getUTCDay(),s=a>4||0===a?sS.ceil(s):sS(s),s=Kk.offset(s,7*(n.V-1)),n.y=s.getUTCFullYear(),n.m=s.getUTCMonth(),n.d=s.getUTCDate()+(n.w+6)%7):(a=(s=bS(yS(n.y,0,1))).getDay(),s=a>4||0===a?Yk.ceil(s):Yk(s),s=Wk.offset(s,7*(n.V-1)),n.y=s.getFullYear(),n.m=s.getMonth(),n.d=s.getDate()+(n.w+6)%7)}else("W"in n||"U"in n)&&("w"in n||(n.w="u"in n?n.u%7:"W"in n?1:0),a="Z"in n?vS(yS(n.y,0,1)).getUTCDay():bS(yS(n.y,0,1)).getDay(),n.m=0,n.d="W"in n?(n.w+6)%7+7*n.W-(a+5)%7:n.w+7*n.U-(a+6)%7);return"Z"in n?(n.H+=n.Z/100|0,n.M+=n.Z%100,vS(n)):bS(n)}}function _(e,t,r,s){for(var a,n,i=0,l=t.length,o=r.length;i<l;){if(s>=o)return-1;if(37===(a=t.charCodeAt(i++))){if(a=t.charAt(i++),!(n=j[a in _S?t.charAt(i++):a])||(s=n(e,r,s))<0)return-1}else if(a!=r.charCodeAt(s++))return-1}return s}return v.x=w(r,v),v.X=w(s,v),v.c=w(t,v),y.x=w(r,y),y.X=w(s,y),y.c=w(t,y),{format:function(e){var t=w(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",y);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}(e),wS=jS.format,jS.parse,NS=jS.utcFormat,jS.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const YC=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:qN,scaleDiverging:function e(){var t=dk(HC()(U_));return t.copy=function(){return KC(t,e())},zN.apply(t,arguments)},scaleDivergingLog:function e(){var t=bk(HC()).domain([.1,1,10]);return t.copy=function(){return KC(t,e()).base(t.base())},zN.apply(t,arguments)},scaleDivergingPow:GC,scaleDivergingSqrt:function(){return GC.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function e(){var t=jk(HC());return t.copy=function(){return KC(t,e()).constant(t.constant())},zN.apply(t,arguments)},scaleIdentity:function e(t){var r;function s(e){return null==e||isNaN(e=+e)?r:e}return s.invert=s,s.domain=s.range=function(e){return arguments.length?(t=Array.from(e,F_),s):t.slice()},s.unknown=function(e){return arguments.length?(r=e,s):r},s.copy=function(){return e(t).unknown(r)},t=arguments.length?Array.from(t,F_):[0,1],dk(s)},scaleImplicit:UN,scaleLinear:function e(){var t=H_();return t.copy=function(){return K_(t,e())},FN.apply(t,arguments),dk(t)},scaleLog:function e(){const t=bk(V_()).domain([1,10]);return t.copy=()=>K_(t,e()).base(t.base()),FN.apply(t,arguments),t},scaleOrdinal:BN,scalePoint:function(){return WN(qN.apply(null,arguments).paddingInner(1))},scalePow:Sk,scaleQuantile:function e(){var t,r=[],s=[],a=[];function n(){var e=0,t=Math.max(1,s.length);for(a=new Array(t-1);++e<t;)a[e-1]=LN(r,e/t);return i}function i(e){return null==e||isNaN(e=+e)?t:s[wN(a,e)]}return i.invertExtent=function(e){var t=s.indexOf(e);return t<0?[NaN,NaN]:[t>0?a[t-1]:r[0],t<a.length?a[t]:r[r.length-1]]},i.domain=function(e){if(!arguments.length)return r.slice();r=[];for(let t of e)null==t||isNaN(t=+t)||r.push(t);return r.sort(gN),n()},i.range=function(e){return arguments.length?(s=Array.from(e),n()):s.slice()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.quantiles=function(){return a.slice()},i.copy=function(){return e().domain(r).range(s).unknown(t)},FN.apply(i,arguments)},scaleQuantize:function e(){var t,r=0,s=1,a=1,n=[.5],i=[0,1];function l(e){return null!=e&&e<=e?i[wN(n,e,0,a)]:t}function o(){var e=-1;for(n=new Array(a);++e<a;)n[e]=((e+1)*s-(e-a)*r)/(a+1);return l}return l.domain=function(e){return arguments.length?([r,s]=e,r=+r,s=+s,o()):[r,s]},l.range=function(e){return arguments.length?(a=(i=Array.from(e)).length-1,o()):i.slice()},l.invertExtent=function(e){var t=i.indexOf(e);return t<0?[NaN,NaN]:t<1?[r,n[0]]:t>=a?[n[a-1],s]:[n[t-1],n[t]]},l.unknown=function(e){return arguments.length?(t=e,l):l},l.thresholds=function(){return n.slice()},l.copy=function(){return e().domain([r,s]).range(i).unknown(t)},FN.apply(dk(l),arguments)},scaleRadial:function e(){var t,r=H_(),s=[0,1],a=!1;function n(e){var s=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(r(e));return isNaN(s)?t:a?Math.round(s):s}return n.invert=function(e){return r.invert(Ck(e))},n.domain=function(e){return arguments.length?(r.domain(e),n):r.domain()},n.range=function(e){return arguments.length?(r.range((s=Array.from(e,F_)).map(Ck)),n):s.slice()},n.rangeRound=function(e){return n.range(e).round(!0)},n.round=function(e){return arguments.length?(a=!!e,n):a},n.clamp=function(e){return arguments.length?(r.clamp(e),n):r.clamp()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return e(r.domain(),s).round(a).clamp(r.clamp()).unknown(t)},FN.apply(n,arguments),dk(n)},scaleSequential:function e(){var t=dk(WC()(U_));return t.copy=function(){return KC(t,e())},zN.apply(t,arguments)},scaleSequentialLog:function e(){var t=bk(WC()).domain([1,10]);return t.copy=function(){return KC(t,e()).base(t.base())},zN.apply(t,arguments)},scaleSequentialPow:VC,scaleSequentialQuantile:function e(){var t=[],r=U_;function s(e){if(null!=e&&!isNaN(e=+e))return r((wN(t,e,1)-1)/(t.length-1))}return s.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(gN),s},s.interpolator=function(e){return arguments.length?(r=e,s):r},s.range=function(){return t.map((e,s)=>r(s/(t.length-1)))},s.quantiles=function(e){return Array.from({length:e+1},(r,s)=>function(e,t){if((r=(e=Float64Array.from(function*(e){for(let t of e)null!=t&&(t=+t)>=t&&(yield t)}(e))).length)&&!isNaN(t=+t)){if(t<=0||r<2)return IN(e);if(t>=1)return DN(e);var r,s=(r-1)*t,a=Math.floor(s),n=DN(RN(e,a).subarray(0,a+1));return n+(IN(e.subarray(a+1))-n)*(s-a)}}(t,s/e))},s.copy=function(){return e(r).domain(t)},zN.apply(s,arguments)},scaleSequentialSqrt:function(){return VC.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function e(){var t=jk(WC());return t.copy=function(){return KC(t,e()).constant(t.constant())},zN.apply(t,arguments)},scaleSqrt:function(){return Sk.apply(null,arguments).exponent(.5)},scaleSymlog:function e(){var t=jk(V_());return t.copy=function(){return K_(t,e()).constant(t.constant())},FN.apply(t,arguments)},scaleThreshold:function e(){var t,r=[.5],s=[0,1],a=1;function n(e){return null!=e&&e<=e?s[wN(r,e,0,a)]:t}return n.domain=function(e){return arguments.length?(r=Array.from(e),a=Math.min(r.length,s.length-1),n):r.slice()},n.range=function(e){return arguments.length?(s=Array.from(e),a=Math.min(r.length,s.length-1),n):s.slice()},n.invertExtent=function(e){var t=s.indexOf(e);return[r[t-1],r[t]]},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return e().domain(r).range(s).unknown(t)},FN.apply(n,arguments)},scaleTime:function(){return FN.apply(qC(fS,gS,uS,cS,Gk,Wk,Bk,zk,Fk,wS).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return FN.apply(qC(hS,xS,mS,dS,rS,Kk,qk,Uk,Fk,NS).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},tickFormat:ck},Symbol.toStringTag,{value:"Module"}));var JC=e=>e.chartData,ZC=sg([JC],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),QC=(e,t,r,s)=>s?ZC(e):JC(e);function XC(e){if(Array.isArray(e)&&2===e.length){var[t,r]=e;if(Uy(t)&&Uy(r))return!0}return!1}function eO(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function tO(e,t){if(t&&"function"!=typeof e&&Array.isArray(e)&&2===e.length){var r,s,[a,n]=e;if(Uy(a))r=a;else if("function"==typeof a)return;if(Uy(n))s=n;else if("function"==typeof n)return;var i=[r,s];if(XC(i))return i}}var rO,sO=1e9,aO=!0,nO="[DecimalError] ",iO=nO+"Invalid argument: ",lO=nO+"Exponent out of range: ",oO=Math.floor,cO=Math.pow,dO=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,uO=1e7,mO=9007199254740991,pO=oO(1286742750677284.5),hO={};function xO(e,t){var r,s,a,n,i,l,o,c,d=e.constructor,u=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),aO?kO(t,u):t;if(o=e.d,c=t.d,i=e.e,a=t.e,o=o.slice(),n=i-a){for(n<0?(s=o,n=-n,l=c.length):(s=c,a=i,l=o.length),n>(l=(i=Math.ceil(u/7))>l?i+1:l+1)&&(n=l,s.length=1),s.reverse();n--;)s.push(0);s.reverse()}for((l=o.length)-(n=c.length)<0&&(n=l,s=c,c=o,o=s),r=0;n;)r=(o[--n]=o[n]+c[n]+r)/uO|0,o[n]%=uO;for(r&&(o.unshift(r),++a),l=o.length;0==o[--l];)o.pop();return t.d=o,t.e=a,aO?kO(t,u):t}function fO(e,t,r){if(e!==~~e||e<t||e>r)throw Error(iO+e)}function gO(e){var t,r,s,a=e.length-1,n="",i=e[0];if(a>0){for(n+=i,t=1;t<a;t++)(r=7-(s=e[t]+"").length)&&(n+=wO(r)),n+=s;(r=7-(s=(i=e[t])+"").length)&&(n+=wO(r))}else if(0===i)return"0";for(;i%10==0;)i/=10;return n+i}hO.absoluteValue=hO.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},hO.comparedTo=hO.cmp=function(e){var t,r,s,a,n=this;if(e=new n.constructor(e),n.s!==e.s)return n.s||-e.s;if(n.e!==e.e)return n.e>e.e^n.s<0?1:-1;for(t=0,r=(s=n.d.length)<(a=e.d.length)?s:a;t<r;++t)if(n.d[t]!==e.d[t])return n.d[t]>e.d[t]^n.s<0?1:-1;return s===a?0:s>a^n.s<0?1:-1},hO.decimalPlaces=hO.dp=function(){var e=this,t=e.d.length-1,r=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},hO.dividedBy=hO.div=function(e){return bO(this,new this.constructor(e))},hO.dividedToIntegerBy=hO.idiv=function(e){var t=this.constructor;return kO(bO(this,new t(e),0,1),t.precision)},hO.equals=hO.eq=function(e){return!this.cmp(e)},hO.exponent=function(){return yO(this)},hO.greaterThan=hO.gt=function(e){return this.cmp(e)>0},hO.greaterThanOrEqualTo=hO.gte=function(e){return this.cmp(e)>=0},hO.isInteger=hO.isint=function(){return this.e>this.d.length-2},hO.isNegative=hO.isneg=function(){return this.s<0},hO.isPositive=hO.ispos=function(){return this.s>0},hO.isZero=function(){return 0===this.s},hO.lessThan=hO.lt=function(e){return this.cmp(e)<0},hO.lessThanOrEqualTo=hO.lte=function(e){return this.cmp(e)<1},hO.logarithm=hO.log=function(e){var t,r=this,s=r.constructor,a=s.precision,n=a+5;if(void 0===e)e=new s(10);else if((e=new s(e)).s<1||e.eq(rO))throw Error(nO+"NaN");if(r.s<1)throw Error(nO+(r.s?"NaN":"-Infinity"));return r.eq(rO)?new s(0):(aO=!1,t=bO(NO(r,n),NO(e,n),n),aO=!0,kO(t,a))},hO.minus=hO.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?SO(t,e):xO(t,(e.s=-e.s,e))},hO.modulo=hO.mod=function(e){var t,r=this,s=r.constructor,a=s.precision;if(!(e=new s(e)).s)throw Error(nO+"NaN");return r.s?(aO=!1,t=bO(r,e,0,1).times(e),aO=!0,r.minus(t)):kO(new s(r),a)},hO.naturalExponential=hO.exp=function(){return vO(this)},hO.naturalLogarithm=hO.ln=function(){return NO(this)},hO.negated=hO.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},hO.plus=hO.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?xO(t,e):SO(t,(e.s=-e.s,e))},hO.precision=hO.sd=function(e){var t,r,s,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(iO+e);if(t=yO(a)+1,r=7*(s=a.d.length-1)+1,s=a.d[s]){for(;s%10==0;s/=10)r--;for(s=a.d[0];s>=10;s/=10)r++}return e&&t>r?t:r},hO.squareRoot=hO.sqrt=function(){var e,t,r,s,a,n,i,l=this,o=l.constructor;if(l.s<1){if(!l.s)return new o(0);throw Error(nO+"NaN")}for(e=yO(l),aO=!1,0==(a=Math.sqrt(+l))||a==1/0?(((t=gO(l.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=oO((e+1)/2)-(e<0||e%2),s=new o(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):s=new o(a.toString()),a=i=(r=o.precision)+3;;)if(s=(n=s).plus(bO(l,n,i+2)).times(.5),gO(n.d).slice(0,i)===(t=gO(s.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&"4999"==t){if(kO(n,r+1,0),n.times(n).eq(l)){s=n;break}}else if("9999"!=t)break;i+=4}return aO=!0,kO(s,r)},hO.times=hO.mul=function(e){var t,r,s,a,n,i,l,o,c,d=this,u=d.constructor,m=d.d,p=(e=new u(e)).d;if(!d.s||!e.s)return new u(0);for(e.s*=d.s,r=d.e+e.e,(o=m.length)<(c=p.length)&&(n=m,m=p,p=n,i=o,o=c,c=i),n=[],s=i=o+c;s--;)n.push(0);for(s=c;--s>=0;){for(t=0,a=o+s;a>s;)l=n[a]+p[s]*m[a-s-1]+t,n[a--]=l%uO|0,t=l/uO|0;n[a]=(n[a]+t)%uO|0}for(;!n[--i];)n.pop();return t?++r:n.shift(),e.d=n,e.e=r,aO?kO(e,u.precision):e},hO.toDecimalPlaces=hO.todp=function(e,t){var r=this,s=r.constructor;return r=new s(r),void 0===e?r:(fO(e,0,sO),void 0===t?t=s.rounding:fO(t,0,8),kO(r,e+yO(r)+1,t))},hO.toExponential=function(e,t){var r,s=this,a=s.constructor;return void 0===e?r=CO(s,!0):(fO(e,0,sO),void 0===t?t=a.rounding:fO(t,0,8),r=CO(s=kO(new a(s),e+1,t),!0,e+1)),r},hO.toFixed=function(e,t){var r,s,a=this,n=a.constructor;return void 0===e?CO(a):(fO(e,0,sO),void 0===t?t=n.rounding:fO(t,0,8),r=CO((s=kO(new n(a),e+yO(a)+1,t)).abs(),!1,e+yO(s)+1),a.isneg()&&!a.isZero()?"-"+r:r)},hO.toInteger=hO.toint=function(){var e=this,t=e.constructor;return kO(new t(e),yO(e)+1,t.rounding)},hO.toNumber=function(){return+this},hO.toPower=hO.pow=function(e){var t,r,s,a,n,i,l=this,o=l.constructor,c=+(e=new o(e));if(!e.s)return new o(rO);if(!(l=new o(l)).s){if(e.s<1)throw Error(nO+"Infinity");return l}if(l.eq(rO))return l;if(s=o.precision,e.eq(rO))return kO(l,s);if(i=(t=e.e)>=(r=e.d.length-1),n=l.s,i){if((r=c<0?-c:c)<=mO){for(a=new o(rO),t=Math.ceil(s/7+4),aO=!1;r%2&&OO((a=a.times(l)).d,t),0!==(r=oO(r/2));)OO((l=l.times(l)).d,t);return aO=!0,e.s<0?new o(rO).div(a):kO(a,s)}}else if(n<0)throw Error(nO+"NaN");return n=n<0&&1&e.d[Math.max(t,r)]?-1:1,l.s=1,aO=!1,a=e.times(NO(l,s+12)),aO=!0,(a=vO(a)).s=n,a},hO.toPrecision=function(e,t){var r,s,a=this,n=a.constructor;return void 0===e?s=CO(a,(r=yO(a))<=n.toExpNeg||r>=n.toExpPos):(fO(e,1,sO),void 0===t?t=n.rounding:fO(t,0,8),s=CO(a=kO(new n(a),e,t),e<=(r=yO(a))||r<=n.toExpNeg,e)),s},hO.toSignificantDigits=hO.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(fO(e,1,sO),void 0===t?t=r.rounding:fO(t,0,8)),kO(new r(this),e,t)},hO.toString=hO.valueOf=hO.val=hO.toJSON=hO[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=yO(e),r=e.constructor;return CO(e,t<=r.toExpNeg||t>=r.toExpPos)};var bO=function(){function e(e,t){var r,s=0,a=e.length;for(e=e.slice();a--;)r=e[a]*t+s,e[a]=r%uO|0,s=r/uO|0;return s&&e.unshift(s),e}function t(e,t,r,s){var a,n;if(r!=s)n=r>s?1:-1;else for(a=n=0;a<r;a++)if(e[a]!=t[a]){n=e[a]>t[a]?1:-1;break}return n}function r(e,t,r){for(var s=0;r--;)e[r]-=s,s=e[r]<t[r]?1:0,e[r]=s*uO+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(s,a,n,i){var l,o,c,d,u,m,p,h,x,f,g,b,v,y,j,w,N,_,k=s.constructor,S=s.s==a.s?1:-1,C=s.d,O=a.d;if(!s.s)return new k(s);if(!a.s)throw Error(nO+"Division by zero");for(o=s.e-a.e,N=O.length,j=C.length,h=(p=new k(S)).d=[],c=0;O[c]==(C[c]||0);)++c;if(O[c]>(C[c]||0)&&--o,(b=null==n?n=k.precision:i?n+(yO(s)-yO(a))+1:n)<0)return new k(0);if(b=b/7+2|0,c=0,1==N)for(d=0,O=O[0],b++;(c<j||d)&&b--;c++)v=d*uO+(C[c]||0),h[c]=v/O|0,d=v%O|0;else{for((d=uO/(O[0]+1)|0)>1&&(O=e(O,d),C=e(C,d),N=O.length,j=C.length),y=N,f=(x=C.slice(0,N)).length;f<N;)x[f++]=0;(_=O.slice()).unshift(0),w=O[0],O[1]>=uO/2&&++w;do{d=0,(l=t(O,x,N,f))<0?(g=x[0],N!=f&&(g=g*uO+(x[1]||0)),(d=g/w|0)>1?(d>=uO&&(d=uO-1),1==(l=t(u=e(O,d),x,m=u.length,f=x.length))&&(d--,r(u,N<m?_:O,m))):(0==d&&(l=d=1),u=O.slice()),(m=u.length)<f&&u.unshift(0),r(x,u,f),-1==l&&(l=t(O,x,N,f=x.length))<1&&(d++,r(x,N<f?_:O,f)),f=x.length):0===l&&(d++,x=[0]),h[c++]=d,l&&x[0]?x[f++]=C[y]||0:(x=[C[y]],f=1)}while((y++<j||void 0!==x[0])&&b--)}return h[0]||h.shift(),p.e=o,kO(p,i?n+yO(p)+1:n)}}();function vO(e,t){var r,s,a,n,i,l=0,o=0,c=e.constructor,d=c.precision;if(yO(e)>16)throw Error(lO+yO(e));if(!e.s)return new c(rO);for(aO=!1,i=d,n=new c(.03125);e.abs().gte(.1);)e=e.times(n),o+=5;for(i+=Math.log(cO(2,o))/Math.LN10*2+5|0,r=s=a=new c(rO),c.precision=i;;){if(s=kO(s.times(e),i),r=r.times(++l),gO((n=a.plus(bO(s,r,i))).d).slice(0,i)===gO(a.d).slice(0,i)){for(;o--;)a=kO(a.times(a),i);return c.precision=d,null==t?(aO=!0,kO(a,d)):a}a=n}}function yO(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function jO(e,t,r){if(t>e.LN10.sd())throw aO=!0,r&&(e.precision=r),Error(nO+"LN10 precision limit exceeded");return kO(new e(e.LN10),t)}function wO(e){for(var t="";e--;)t+="0";return t}function NO(e,t){var r,s,a,n,i,l,o,c,d,u=1,m=e,p=m.d,h=m.constructor,x=h.precision;if(m.s<1)throw Error(nO+(m.s?"NaN":"-Infinity"));if(m.eq(rO))return new h(0);if(null==t?(aO=!1,c=x):c=t,m.eq(10))return null==t&&(aO=!0),jO(h,c);if(c+=10,h.precision=c,s=(r=gO(p)).charAt(0),n=yO(m),!(Math.abs(n)<15e14))return o=jO(h,c+2,x).times(n+""),m=NO(new h(s+"."+r.slice(1)),c-10).plus(o),h.precision=x,null==t?(aO=!0,kO(m,x)):m;for(;s<7&&1!=s||1==s&&r.charAt(1)>3;)s=(r=gO((m=m.times(e)).d)).charAt(0),u++;for(n=yO(m),s>1?(m=new h("0."+r),n++):m=new h(s+"."+r.slice(1)),l=i=m=bO(m.minus(rO),m.plus(rO),c),d=kO(m.times(m),c),a=3;;){if(i=kO(i.times(d),c),gO((o=l.plus(bO(i,new h(a),c))).d).slice(0,c)===gO(l.d).slice(0,c))return l=l.times(2),0!==n&&(l=l.plus(jO(h,c+2,x).times(n+""))),l=bO(l,new h(u),c),h.precision=x,null==t?(aO=!0,kO(l,x)):l;l=o,a+=2}}function _O(e,t){var r,s,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),s=0;48===t.charCodeAt(s);)++s;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(s,a)){if(a-=s,r=r-s-1,e.e=oO(r/7),e.d=[],s=(r+1)%7,r<0&&(s+=7),s<a){for(s&&e.d.push(+t.slice(0,s)),a-=7;s<a;)e.d.push(+t.slice(s,s+=7));s=7-(t=t.slice(s)).length}else s-=a;for(;s--;)t+="0";if(e.d.push(+t),aO&&(e.e>pO||e.e<-pO))throw Error(lO+r)}else e.s=0,e.e=0,e.d=[0];return e}function kO(e,t,r){var s,a,n,i,l,o,c,d,u=e.d;for(i=1,n=u[0];n>=10;n/=10)i++;if((s=t-i)<0)s+=7,a=t,c=u[d=0];else{if((d=Math.ceil((s+1)/7))>=(n=u.length))return e;for(c=n=u[d],i=1;n>=10;n/=10)i++;a=(s%=7)-7+i}if(void 0!==r&&(l=c/(n=cO(10,i-a-1))%10|0,o=t<0||void 0!==u[d+1]||c%n,o=r<4?(l||o)&&(0==r||r==(e.s<0?3:2)):l>5||5==l&&(4==r||o||6==r&&(s>0?a>0?c/cO(10,i-a):0:u[d-1])%10&1||r==(e.s<0?8:7))),t<1||!u[0])return o?(n=yO(e),u.length=1,t=t-n-1,u[0]=cO(10,(7-t%7)%7),e.e=oO(-t/7)||0):(u.length=1,u[0]=e.e=e.s=0),e;if(0==s?(u.length=d,n=1,d--):(u.length=d+1,n=cO(10,7-s),u[d]=a>0?(c/cO(10,i-a)%cO(10,a)|0)*n:0),o)for(;;){if(0==d){(u[0]+=n)==uO&&(u[0]=1,++e.e);break}if(u[d]+=n,u[d]!=uO)break;u[d--]=0,n=1}for(s=u.length;0===u[--s];)u.pop();if(aO&&(e.e>pO||e.e<-pO))throw Error(lO+yO(e));return e}function SO(e,t){var r,s,a,n,i,l,o,c,d,u,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),aO?kO(t,p):t;if(o=e.d,u=t.d,s=t.e,c=e.e,o=o.slice(),i=c-s){for((d=i<0)?(r=o,i=-i,l=u.length):(r=u,s=c,l=o.length),i>(a=Math.max(Math.ceil(p/7),l)+2)&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for((d=(a=o.length)<(l=u.length))&&(l=a),a=0;a<l;a++)if(o[a]!=u[a]){d=o[a]<u[a];break}i=0}for(d&&(r=o,o=u,u=r,t.s=-t.s),l=o.length,a=u.length-l;a>0;--a)o[l++]=0;for(a=u.length;a>i;){if(o[--a]<u[a]){for(n=a;n&&0===o[--n];)o[n]=uO-1;--o[n],o[a]+=uO}o[a]-=u[a]}for(;0===o[--l];)o.pop();for(;0===o[0];o.shift())--s;return o[0]?(t.d=o,t.e=s,aO?kO(t,p):t):new m(0)}function CO(e,t,r){var s,a=yO(e),n=gO(e.d),i=n.length;return t?(r&&(s=r-i)>0?n=n.charAt(0)+"."+n.slice(1)+wO(s):i>1&&(n=n.charAt(0)+"."+n.slice(1)),n=n+(a<0?"e":"e+")+a):a<0?(n="0."+wO(-a-1)+n,r&&(s=r-i)>0&&(n+=wO(s))):a>=i?(n+=wO(a+1-i),r&&(s=r-a-1)>0&&(n=n+"."+wO(s))):((s=a+1)<i&&(n=n.slice(0,s)+"."+n.slice(s)),r&&(s=r-i)>0&&(a+1===i&&(n+="."),n+=wO(s))),e.s<0?"-"+n:n}function OO(e,t){if(e.length>t)return e.length=t,!0}function EO(e){if(!e||"object"!=typeof e)throw Error(nO+"Object expected");var t,r,s,a=["precision",1,sO,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(s=e[r=a[t]])){if(!(oO(s)===s&&s>=a[t+1]&&s<=a[t+2]))throw Error(iO+r+": "+s);this[r]=s}if(void 0!==(s=e[r="LN10"])){if(s!=Math.LN10)throw Error(iO+r+": "+s);this[r]=new this(s)}return this}var PO=function e(t){var r,s,a;function n(e){var t=this;if(!(t instanceof n))return new n(e);if(t.constructor=n,e instanceof n)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(iO+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):_O(t,e.toString())}if("string"!=typeof e)throw Error(iO+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!dO.test(e))throw Error(iO+e);_O(t,e)}if(n.prototype=hO,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=e,n.config=n.set=EO,void 0===t&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<a.length;)t.hasOwnProperty(s=a[r++])||(t[s]=this[s]);return n.config(t),n}({precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"});rO=new PO(1);const TO=PO;var AO=e=>e,MO={},DO=e=>e===MO,IO=e=>function t(){return 0===arguments.length||1===arguments.length&&DO(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},RO=(e,t)=>1===e?t:IO(function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];var n=s.filter(e=>e!==MO).length;return n>=e?t(...s):RO(e-n,IO(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];var n=s.map(e=>DO(e)?r.shift():e);return t(...n,...r)}))}),$O=e=>RO(e.length,e),LO=(e,t)=>{for(var r=[],s=e;s<t;++s)r[s-e]=s;return r},FO=$O((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(e=>t[e]).map(e)),zO=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),UO=e=>{var t=null,r=null;return function(){for(var s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];return t&&a.every((e,r)=>{var s;return e===(null===(s=t)||void 0===s?void 0:s[r])})?r:(t=a,r=e(...a))}};function BO(e){return 0===e?1:Math.floor(new TO(e).abs().log(10).toNumber())+1}function qO(e,t,r){for(var s=new TO(e),a=0,n=[];s.lt(t)&&a<1e5;)n.push(s.toNumber()),s=s.add(r),a++;return n}$O((e,t,r)=>{var s=+e;return s+r*(+t-s)}),$O((e,t,r)=>{var s=t-+e;return(r-e)/(s=s||1/0)}),$O((e,t,r)=>{var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(r-e)/s))});var WO=e=>{var[t,r]=e,[s,a]=[t,r];return t>r&&([s,a]=[r,t]),[s,a]},KO=(e,t,r)=>{if(e.lte(0))return new TO(0);var s=BO(e.toNumber()),a=new TO(10).pow(s),n=e.div(a),i=1!==s?.05:.1,l=new TO(Math.ceil(n.div(i).toNumber())).add(r).mul(i).mul(a);return new TO(t?l.toNumber():Math.ceil(l.toNumber()))},VO=(e,t,r)=>{var s=new TO(1),a=new TO(e);if(!a.isint()&&r){var n=Math.abs(e);n<1?(s=new TO(10).pow(BO(e)-1),a=new TO(Math.floor(a.div(s).toNumber())).mul(s)):n>1&&(a=new TO(Math.floor(e)))}else 0===e?a=new TO(Math.floor((t-1)/2)):r||(a=new TO(Math.floor(e)));var i=Math.floor((t-1)/2);return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return AO;var s=t.reverse(),a=s[0],n=s.slice(1);return function(){return n.reduce((e,t)=>t(e),a(...arguments))}}(FO(e=>a.add(new TO(e-i).mul(s)).toNumber()),LO)(0,t)},HO=function(e,t,r,s){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new TO(0),tickMin:new TO(0),tickMax:new TO(0)};var n,i=KO(new TO(t).sub(e).div(r-1),s,a);n=e<=0&&t>=0?new TO(0):(n=new TO(e).add(t).div(2)).sub(new TO(n).mod(i));var l=Math.ceil(n.sub(e).div(i).toNumber()),o=Math.ceil(new TO(t).sub(n).div(i).toNumber()),c=l+o+1;return c>r?HO(e,t,r,s,a+1):(c<r&&(o=t>0?o+(r-c):o,l=t>0?l:l+(r-c)),{step:i,tickMin:n.sub(new TO(l).mul(i)),tickMax:n.add(new TO(o).mul(i))})};var GO=UO(function(e){var[t,r]=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=Math.max(s,2),[i,l]=WO([t,r]);if(i===-1/0||l===1/0){var o=l===1/0?[i,...LO(0,s-1).map(()=>1/0)]:[...LO(0,s-1).map(()=>-1/0),l];return t>r?zO(o):o}if(i===l)return VO(i,s,a);var{step:c,tickMin:d,tickMax:u}=HO(i,l,n,a,0),m=qO(d,u.add(new TO(.1).mul(c)),c);return t>r?zO(m):m}),YO=UO(function(e,t){var[r,s]=e,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[n,i]=WO([r,s]);if(n===-1/0||i===1/0)return[r,s];if(n===i)return[n];var l=Math.max(t,2),o=KO(new TO(i).sub(n).div(l-1),a,0),c=[...qO(new TO(n),new TO(i),o),i];return!1===a&&(c=c.map(e=>Math.round(e))),r>s?zO(c):c}),JO=e=>e.rootProps.maxBarSize,ZO=e=>e.rootProps.barCategoryGap,QO=e=>e.rootProps.stackOffset,XO=e=>e.options.chartName,eE=e=>e.rootProps.syncId,tE=e=>e.rootProps.syncMethod,rE=e=>e.options.eventEmitter,sE={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},aE=0,nE="auto",iE=!0,lE=!1,oE=!0,cE=0,dE="auto",uE=!0,mE=5,pE=(e,t)=>{if(e&&t)return null!=e&&e.reversed?[t[1],t[0]]:t},hE={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:aE,includeHidden:!1,name:void 0,reversed:!1,scale:nE,tick:iE,tickCount:void 0,ticks:void 0,type:"category",unit:void 0},xE={allowDataOverflow:lE,allowDecimals:!1,allowDuplicatedCategory:oE,dataKey:void 0,domain:void 0,id:cE,includeHidden:!1,name:void 0,reversed:!1,scale:dE,tick:uE,tickCount:mE,ticks:void 0,type:"number",unit:void 0},fE={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,dataKey:void 0,domain:void 0,id:aE,includeHidden:!1,name:void 0,reversed:!1,scale:nE,tick:iE,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},gE={allowDataOverflow:lE,allowDecimals:!1,allowDuplicatedCategory:oE,dataKey:void 0,domain:void 0,id:cE,includeHidden:!1,name:void 0,reversed:!1,scale:dE,tick:uE,tickCount:mE,ticks:void 0,type:"category",unit:void 0},bE=(e,t)=>null!=e.polarAxis.angleAxis[t]?e.polarAxis.angleAxis[t]:"radial"===e.layout.layoutType?fE:hE,vE=(e,t)=>null!=e.polarAxis.radiusAxis[t]?e.polarAxis.radiusAxis[t]:"radial"===e.layout.layoutType?gE:xE,yE=e=>e.polarOptions,jE=sg([ay,ny,yy],Gw),wE=sg([yE,jE],(e,t)=>{if(null!=e)return kh(e.innerRadius,t,0)}),NE=sg([yE,jE],(e,t)=>{if(null!=e)return kh(e.outerRadius,t,.8*t)}),_E=sg([yE],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]});sg([bE,_E],pE);var kE=sg([jE,wE,NE],(e,t,r)=>{if(null!=e&&null!=t&&null!=r)return[t,r]});sg([vE,kE],pE);var SE=sg([aj,yE,wE,NE,ay,ny],(e,t,r,s,a,n)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=r&&null!=s){var{cx:i,cy:l,startAngle:o,endAngle:c}=t;return{cx:kh(i,a,a/2),cy:kh(l,n,n/2),innerRadius:r,outerRadius:s,startAngle:o,endAngle:c,clockWise:!1}}}),CE=(e,t)=>t,OE=(e,t,r)=>r;function EE(e){return null==e?void 0:e.id}function PE(e,t,r){var{chartData:s=[]}=t,{allowDuplicatedCategory:a,dataKey:n}=r,i=new Map;return e.forEach(e=>{var t,r=null!==(t=e.data)&&void 0!==t?t:s;if(null!=r&&0!==r.length){var l=EE(e);r.forEach((t,r)=>{var s,o=null==n||a?r:String(Bv(t,n,null)),c=Bv(t,e.dataKey,0);s=i.has(o)?i.get(o):{},Object.assign(s,{[l]:c}),i.set(o,s)})}}),Array.from(i.values())}function TE(e){return null!=e.stackId&&null!=e.dataKey}var AE=(e,t)=>e===t||null!=e&&null!=t&&(e[0]===t[0]&&e[1]===t[1]);function ME(e,t){return!(!Array.isArray(e)||!Array.isArray(t)||0!==e.length||0!==t.length)||e===t}var DE=e=>{var t=aj(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},IE=e=>e.tooltip.settings.axisId;function RE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function $E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?RE(Object(r),!0).forEach(function(t){LE(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RE(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function LE(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var FE=[0,"auto"],zE={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},UE=(e,t)=>e.cartesianAxis.xAxis[t],BE=(e,t)=>{var r=UE(e,t);return r??zE},qE={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:FE,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},WE=(e,t)=>e.cartesianAxis.yAxis[t],KE=(e,t)=>{var r=WE(e,t);return r??qE},VE={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},HE=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??VE},GE=(e,t,r)=>{switch(t){case"xAxis":return BE(e,r);case"yAxis":return KE(e,r);case"zAxis":return HE(e,r);case"angleAxis":return bE(e,r);case"radiusAxis":return vE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},YE=(e,t,r)=>{switch(t){case"xAxis":return BE(e,r);case"yAxis":return KE(e,r);case"angleAxis":return bE(e,r);case"radiusAxis":return vE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},JE=e=>e.graphicalItems.cartesianItems.some(e=>"bar"===e.type)||e.graphicalItems.polarItems.some(e=>"radialBar"===e.type);function ZE(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var QE=e=>e.graphicalItems.cartesianItems,XE=sg([CE,OE],ZE),eP=(e,t,r)=>e.filter(r).filter(e=>!0===(null==t?void 0:t.includeHidden)||!e.hide),tP=sg([QE,GE,XE],eP,{memoizeOptions:{resultEqualityCheck:ME}}),rP=sg([tP],e=>e.filter(e=>"area"===e.type||"bar"===e.type).filter(TE)),sP=e=>e.filter(e=>!("stackId"in e)||void 0===e.stackId),aP=sg([tP],sP),nP=e=>e.map(e=>e.data).filter(Boolean).flat(1),iP=sg([tP],nP,{memoizeOptions:{resultEqualityCheck:ME}}),lP=(e,t)=>{var{chartData:r=[],dataStartIndex:s,dataEndIndex:a}=t;return e.length>0?e:r.slice(s,a+1)},oP=sg([iP,QC],lP),cP=(e,t,r)=>null!=(null==t?void 0:t.dataKey)?e.map(e=>({value:Bv(e,t.dataKey)})):r.length>0?r.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:Bv(e,t)}))):e.map(e=>({value:e})),dP=sg([oP,GE,tP],cP);function uP(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function mP(e){if(wh(e)||e instanceof Date){var t=Number(e);if(Uy(t))return t}}function pP(e){if(Array.isArray(e)){var t=[mP(e[0]),mP(e[1])];return XC(t)?t:void 0}var r=mP(e);if(null!=r)return[r,r]}function hP(e){return e.map(mP).filter(Th)}var xP=e=>{var t=DE(e),r=IE(e);return YE(e,t,r)},fP=sg([xP],e=>null==e?void 0:e.dataKey),gP=sg([rP,QC,xP],PE),bP=(e,t,r)=>{var s=t.reduce((e,t)=>(null==t.stackId||(null==e[t.stackId]&&(e[t.stackId]=[]),e[t.stackId].push(t)),e),{});return Object.fromEntries(Object.entries(s).map(t=>{var[s,a]=t,n=a.map(EE);return[s,{stackedData:Gv(e,n,r),graphicalItems:a}]}))},vP=sg([gP,rP,QO],bP),yP=(e,t,r,s)=>{var{dataStartIndex:a,dataEndIndex:n}=t;if(null==s&&"zAxis"!==r){var i=Qv(e,a,n);if(null==i||0!==i[0]||0!==i[1])return i}},jP=sg([GE],e=>e.allowDataOverflow),wP=e=>{var t;if(null==e||!("domain"in e))return FE;if(null!=e.domain)return e.domain;if(null!=e.ticks){if("number"===e.type){var r=hP(e.ticks);return[Math.min(...r),Math.max(...r)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null==e?void 0:e.domain)&&void 0!==t?t:FE},NP=sg([GE],wP),_P=sg([NP,jP],tO),kP=sg([vP,JC,CE,_P],yP,{memoizeOptions:{resultEqualityCheck:AE}}),SP=e=>e.errorBars,CP=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var s=t.filter(Boolean);if(0!==s.length){var a=s.flat();return[Math.min(...a),Math.max(...a)]}},OP=(e,t,r,s,a)=>{var n,i;if(r.length>0&&e.forEach(e=>{r.forEach(r=>{var l,o,c=null===(l=s[r.id])||void 0===l?void 0:l.filter(e=>uP(a,e)),d=Bv(e,null!==(o=t.dataKey)&&void 0!==o?o:r.dataKey),u=function(e,t,r){return!r||"number"!=typeof t||vh(t)?[]:r.length?hP(r.flatMap(r=>{var s,a,n=Bv(e,r.dataKey);if(Array.isArray(n)?[s,a]=n:s=a=n,Uy(s)&&Uy(a))return[t-s,t+a]})):[]}(e,d,c);if(u.length>=2){var m=Math.min(...u),p=Math.max(...u);(null==n||m<n)&&(n=m),(null==i||p>i)&&(i=p)}var h=pP(d);null!=h&&(n=null==n?h[0]:Math.min(n,h[0]),i=null==i?h[1]:Math.max(i,h[1]))})}),null!=(null==t?void 0:t.dataKey)&&e.forEach(e=>{var r=pP(Bv(e,t.dataKey));null!=r&&(n=null==n?r[0]:Math.min(n,r[0]),i=null==i?r[1]:Math.max(i,r[1]))}),Uy(n)&&Uy(i))return[n,i]},EP=sg([oP,GE,aP,SP,CE],OP,{memoizeOptions:{resultEqualityCheck:AE}});function PP(e){var{value:t}=e;if(wh(t)||t instanceof Date)return t}var TP=e=>e.referenceElements.dots,AP=(e,t,r)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===r:e.yAxisId===r),MP=sg([TP,CE,OE],AP),DP=e=>e.referenceElements.areas,IP=sg([DP,CE,OE],AP),RP=e=>e.referenceElements.lines,$P=sg([RP,CE,OE],AP),LP=(e,t)=>{var r=hP(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},FP=sg(MP,CE,LP),zP=(e,t)=>{var r=hP(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},UP=sg([IP,CE],zP);var BP=(e,t)=>{var r=e.flatMap(e=>"xAxis"===t?function(e){var t;if(null!=e.x)return hP([e.x]);var r=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.x);return null==r||0===r.length?[]:hP(r)}(e):function(e){var t;if(null!=e.y)return hP([e.y]);var r=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.y);return null==r||0===r.length?[]:hP(r)}(e));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},qP=sg([$P,CE],BP),WP=sg(FP,qP,UP,(e,t,r)=>CP(e,r,t)),KP=(e,t,r,s,a,n,i,l)=>null!=r?r:function(e,t,r){if(r||null!=t){if("function"==typeof e&&null!=t)try{var s=e(t,r);if(XC(s))return eO(s,t,r)}catch(p){}if(Array.isArray(e)&&2===e.length){var a,n,[i,l]=e;if("auto"===i)null!=t&&(a=Math.min(...t));else if(jh(i))a=i;else if("function"==typeof i)try{null!=t&&(a=i(null==t?void 0:t[0]))}catch(h){}else if("string"==typeof i&&Xv.test(i)){var o=Xv.exec(i);if(null==o||null==t)a=void 0;else{var c=+o[1];a=t[0]-c}}else a=null==t?void 0:t[0];if("auto"===l)null!=t&&(n=Math.max(...t));else if(jh(l))n=l;else if("function"==typeof l)try{null!=t&&(n=l(null==t?void 0:t[1]))}catch(x){}else if("string"==typeof l&&ey.test(l)){var d=ey.exec(l);if(null==d||null==t)n=void 0;else{var u=+d[1];n=t[1]+u}}else n=null==t?void 0:t[1];var m=[a,n];if(XC(m))return null==t?m:eO(m,t,r)}}}(t,"vertical"===i&&"xAxis"===l||"horizontal"===i&&"yAxis"===l?CP(s,n,a):CP(n,a),e.allowDataOverflow),VP=sg([GE,NP,_P,kP,EP,WP,aj,CE],KP,{memoizeOptions:{resultEqualityCheck:AE}}),HP=[0,1],GP=(e,t,r,s,a,n,i)=>{if(null!=e&&null!=r&&0!==r.length||void 0!==i){var l,{dataKey:o,type:c}=e,d=qv(t,n);return d&&null==o?fN(0,null!==(l=null==r?void 0:r.length)&&void 0!==l?l:0):"category"===c?((e,t,r)=>{var s=e.map(PP).filter(e=>null!=e);return r&&(null==t.dataKey||t.allowDuplicatedCategory&&Sh(s))?fN(0,e.length):t.allowDuplicatedCategory?s:Array.from(new Set(s))})(s,e,d):"expand"===a?HP:i}},YP=sg([GE,aj,oP,dP,QO,CE,VP],GP),JP=(e,t,r,s,a)=>{if(null!=e){var{scale:n,type:i}=e;if("auto"===n)return"radial"===t&&"radiusAxis"===a?"band":"radial"===t&&"angleAxis"===a?"linear":"category"===i&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!r)?"point":"category"===i?"band":"linear";if("string"==typeof n){var l="scale".concat(Ph(n));return l in YC?l:"point"}}},ZP=sg([GE,aj,JE,XO,CE],JP);function QP(e,t,r,s){if(null!=r&&null!=s){if("function"==typeof e.scale)return e.scale.copy().domain(r).range(s);var a=function(e){if(null!=e){if(e in YC)return YC[e]();var t="scale".concat(Ph(e));return t in YC?YC[t]():void 0}}(t);if(null!=a){var n=a.domain(r).range(s);return(e=>{var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,s=e.range(),a=Math.min(s[0],s[1])-Vv,n=Math.max(s[0],s[1])+Vv,i=e(t[0]),l=e(t[r-1]);(i<a||i>n||l<a||l>n)&&e.domain([t[0],t[r-1]])}})(n),n}}}var XP=(e,t,r)=>{var s=wP(t);if("auto"===r||"linear"===r)return null!=t&&t.tickCount&&Array.isArray(s)&&("auto"===s[0]||"auto"===s[1])&&XC(e)?GO(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&XC(e)?YO(e,t.tickCount,t.allowDecimals):void 0},eT=sg([YP,YE,ZP],XP),tT=(e,t,r,s)=>{if("angleAxis"!==s&&"number"===(null==e?void 0:e.type)&&XC(t)&&Array.isArray(r)&&r.length>0){var a=t[0],n=r[0],i=t[1],l=r[r.length-1];return[Math.min(a,n),Math.max(i,l)]}return t},rT=sg([GE,YP,eT,CE],tT),sT=sg(dP,GE,(e,t)=>{if(t&&"number"===t.type){var r=1/0,s=Array.from(hP(e.map(e=>e.value))).sort((e,t)=>e-t);if(s.length<2)return 1/0;var a=s[s.length-1]-s[0];if(0===a)return 1/0;for(var n=0;n<s.length-1;n++){var i=s[n+1]-s[n];r=Math.min(r,i)}return r/a}}),aT=sg(sT,aj,ZO,yy,(e,t,r,s)=>s,(e,t,r,s,a)=>{if(!Uy(e))return 0;var n="vertical"===t?s.height:s.width;if("gap"===a)return e*n/2;if("no-gap"===a){var i=kh(r,e*n),l=e*n/2;return l-i-(l-i)/n*i}return 0}),nT=sg(BE,(e,t)=>{var r=BE(e,t);return null==r||"string"!=typeof r.padding?0:aT(e,"xAxis",t,r.padding)},(e,t)=>{var r,s;if(null==e)return{left:0,right:0};var{padding:a}=e;return"string"==typeof a?{left:t,right:t}:{left:(null!==(r=a.left)&&void 0!==r?r:0)+t,right:(null!==(s=a.right)&&void 0!==s?s:0)+t}}),iT=sg(KE,(e,t)=>{var r=KE(e,t);return null==r||"string"!=typeof r.padding?0:aT(e,"yAxis",t,r.padding)},(e,t)=>{var r,s;if(null==e)return{top:0,bottom:0};var{padding:a}=e;return"string"==typeof a?{top:t,bottom:t}:{top:(null!==(r=a.top)&&void 0!==r?r:0)+t,bottom:(null!==(s=a.bottom)&&void 0!==s?s:0)+t}}),lT=sg([yy,nT,Sy,ky,(e,t,r)=>r],(e,t,r,s,a)=>{var{padding:n}=s;return a?[n.left,r.width-n.right]:[e.left+t.left,e.left+e.width-t.right]}),oT=sg([yy,aj,iT,Sy,ky,(e,t,r)=>r],(e,t,r,s,a,n)=>{var{padding:i}=a;return n?[s.height-i.bottom,i.top]:"horizontal"===t?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),cT=(e,t,r,s)=>{var a;switch(t){case"xAxis":return lT(e,r,s);case"yAxis":return oT(e,r,s);case"zAxis":return null===(a=HE(e,r))||void 0===a?void 0:a.range;case"angleAxis":return _E(e);case"radiusAxis":return kE(e,r);default:return}},dT=sg([GE,cT],pE),uT=sg([GE,ZP,rT,dT],QP);function mT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}sg([tP,SP,CE],(e,t,r)=>e.flatMap(e=>t[e.id]).filter(Boolean).filter(e=>uP(r,e)));var pT=(e,t)=>t,hT=(e,t,r)=>r,xT=sg(oy,pT,hT,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(mT)),fT=sg(cy,pT,hT,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(mT)),gT=(e,t)=>({width:e.width,height:t.height}),bT=sg(yy,BE,gT),vT=sg(ny,yy,xT,pT,hT,(e,t,r,s,a)=>{var n,i={};return r.forEach(r=>{var l=gT(t,r);null==n&&(n=((e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}})(t,s,e));var o="top"===s&&!a||"bottom"===s&&a;i[r.id]=n-Number(o)*l.height,n+=(o?-1:1)*l.height}),i}),yT=sg(ay,yy,fT,pT,hT,(e,t,r,s,a)=>{var n,i={};return r.forEach(r=>{var l=((e,t)=>({width:"number"==typeof t.width?t.width:60,height:e.height}))(t,r);null==n&&(n=((e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}})(t,s,e));var o="left"===s&&!a||"right"===s&&a;i[r.id]=n-Number(o)*l.width,n+=(o?-1:1)*l.width}),i}),jT=sg([yy,BE,(e,t)=>{var r=BE(e,t);if(null!=r)return vT(e,r.orientation,r.mirror)},(e,t)=>t],(e,t,r,s)=>{if(null!=t){var a=null==r?void 0:r[s];return null==a?{x:e.left,y:0}:{x:e.left,y:a}}}),wT=sg([yy,KE,(e,t)=>{var r=KE(e,t);if(null!=r)return yT(e,r.orientation,r.mirror)},(e,t)=>t],(e,t,r,s)=>{if(null!=t){var a=null==r?void 0:r[s];return null==a?{x:0,y:e.top}:{x:a,y:e.top}}}),NT=sg(yy,KE,(e,t)=>({width:"number"==typeof t.width?t.width:60,height:e.height})),_T=(e,t,r)=>{switch(t){case"xAxis":return bT(e,r).width;case"yAxis":return NT(e,r).height;default:return}},kT=(e,t,r,s)=>{if(null!=r){var{allowDuplicatedCategory:a,type:n,dataKey:i}=r,l=qv(e,s),o=t.map(e=>e.value);return i&&l&&"category"===n&&a&&Sh(o)?o:void 0}},ST=sg([aj,dP,GE,CE],kT),CT=(e,t,r,s)=>{if(null!=r&&null!=r.dataKey){var{type:a,scale:n}=r;return!qv(e,s)||"number"!==a&&"auto"===n?void 0:t.map(e=>e.value)}},OT=sg([aj,dP,YE,CE],CT),ET=sg([aj,(e,t,r)=>{switch(t){case"xAxis":return BE(e,r);case"yAxis":return KE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},ZP,uT,ST,OT,cT,eT,CE],(e,t,r,s,a,n,i,l,o)=>{if(null!=t){var c=qv(e,o);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:o,categoricalDomain:n,duplicateDomain:a,isCategorical:c,niceTicks:l,range:i,realScaleType:r,scale:s}}}),PT=sg([aj,YE,ZP,uT,eT,cT,ST,OT,CE],(e,t,r,s,a,n,i,l,o)=>{if(null!=t&&null!=s){var c=qv(e,o),{type:d,ticks:u,tickCount:m}=t,p="scaleBand"===r&&"function"==typeof s.bandwidth?s.bandwidth()/2:2,h="category"===d&&s.bandwidth?s.bandwidth()/p:0;h="angleAxis"===o&&null!=n&&n.length>=2?2*bh(n[0]-n[1])*h:h;var x=u||a;return x?x.map((e,t)=>{var r=i?i.indexOf(e):e;return{index:t,coordinate:s(r)+h,value:e,offset:h}}).filter(e=>Uy(e.coordinate)):c&&l?l.map((e,t)=>({coordinate:s(e)+h,value:e,index:t,offset:h})).filter(e=>Uy(e.coordinate)):s.ticks?s.ticks(m).map(e=>({coordinate:s(e)+h,value:e,offset:h})):s.domain().map((e,t)=>({coordinate:s(e)+h,value:i?i[e]:e,index:t,offset:h}))}}),TT=sg([aj,YE,uT,cT,ST,OT,CE],(e,t,r,s,a,n,i)=>{if(null!=t&&null!=r&&null!=s&&s[0]!==s[1]){var l=qv(e,i),{tickCount:o}=t,c=0;return c="angleAxis"===i&&(null==s?void 0:s.length)>=2?2*bh(s[0]-s[1])*c:c,l&&n?n.map((e,t)=>({coordinate:r(e)+c,value:e,index:t,offset:c})):r.ticks?r.ticks(o).map(e=>({coordinate:r(e)+c,value:e,offset:c})):r.domain().map((e,t)=>({coordinate:r(e)+c,value:a?a[e]:e,index:t,offset:c}))}}),AT=sg(GE,uT,(e,t)=>{if(null!=e&&null!=t)return $E($E({},e),{},{scale:t})}),MT=sg([GE,ZP,YP,dT],QP);sg((e,t,r)=>HE(e,r),MT,(e,t)=>{if(null!=e&&null!=t)return $E($E({},e),{},{scale:t})});var DT=sg([aj,oy,cy],(e,t,r)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),IT=e=>e.options.defaultTooltipEventType,RT=e=>e.options.validateTooltipEventTypes;function $T(e,t,r){if(null==e)return t;var s=e?"axis":"item";return null==r?t:r.includes(s)?s:t}function LT(e,t){return $T(t,IT(e),RT(e))}var FT=(e,t)=>{var r,s=Number(t);if(!vh(s)&&null!=t)return s>=0?null==e||null===(r=e[s])||void 0===r?void 0:r.value:void 0},zT={active:!1,index:null,dataKey:void 0,coordinate:void 0},UT=Zb({name:"tooltip",initialState:{itemInteraction:{click:zT,hover:zT},axisInteraction:{click:zT,hover:zT},keyboardInteraction:zT,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Ub()},removeTooltipEntrySettings:{reducer(e,t){var r=Cb(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Ub()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:BT,removeTooltipEntrySettings:qT,setTooltipSettingsState:WT,setActiveMouseOverItemIndex:KT,mouseLeaveItem:VT,mouseLeaveChart:HT,setActiveClickItemIndex:GT,setMouseOverAxisIndex:YT,setMouseClickAxisIndex:JT,setSyncInteraction:ZT,setKeyboardInteraction:QT}=UT.actions,XT=UT.reducer;function eA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function tA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eA(Object(r),!0).forEach(function(t){rA(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eA(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function rA(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var sA=(e,t,r,s)=>{if(null==t)return zT;var a=function(e,t,r){return"axis"===t?"click"===r?e.axisInteraction.click:e.axisInteraction.hover:"click"===r?e.itemInteraction.click:e.itemInteraction.hover}(e,t,r);if(null==a)return zT;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var n=!0===e.settings.active;if(null!=a.index){if(n)return tA(tA({},a),{},{active:!0})}else if(null!=s)return{active:!0,coordinate:void 0,dataKey:void 0,index:s};return tA(tA({},zT),{},{coordinate:a.coordinate})},aA=(e,t)=>{var r=null==e?void 0:e.index;if(null==r)return null;var s=Number(r);if(!Uy(s))return r;var a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(0,Math.min(s,a)))},nA=(e,t,r,s,a,n,i,l)=>{if(null!=n&&null!=l){var o=i[0],c=null==o?void 0:l(o.positions,n);if(null!=c)return c;var d=null==a?void 0:a[Number(n)];if(d)return"horizontal"===r?{x:d.coordinate,y:(s.top+t)/2}:{x:(s.left+e)/2,y:d.coordinate}}},iA=(e,t,r,s)=>{return"axis"===t?e.tooltipItemPayloads:0===e.tooltipItemPayloads.length?[]:null==(a="hover"===r?e.itemInteraction.hover.dataKey:e.itemInteraction.click.dataKey)&&null!=s?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.dataKey)===a});var a},lA=e=>e.options.tooltipPayloadSearcher,oA=e=>e.tooltip;function cA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function dA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cA(Object(r),!0).forEach(function(t){uA(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cA(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function uA(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var mA=(e,t,r,s,a,n,i)=>{if(null!=t&&null!=n){var{chartData:l,computedData:o,dataStartIndex:c,dataEndIndex:d}=r;return e.reduce((e,r)=>{var u,m,p,{dataDefinedOnItem:h,settings:x}=r,f=function(e,t){return null!=e?e:t}(h,l),g=Array.isArray(f)?Lv(f,c,d):f,b=null!==(u=null==x?void 0:x.dataKey)&&void 0!==u?u:s,v=null==x?void 0:x.nameKey;(m=s&&Array.isArray(g)&&!Array.isArray(g[0])&&"axis"===i?Oh(g,s,a):n(g,t,o,v),Array.isArray(m))?m.forEach(t=>{var r=dA(dA({},x),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(ry({tooltipEntrySettings:r,dataKey:t.dataKey,payload:t.payload,value:Bv(t.payload,t.dataKey),name:t.name}))}):e.push(ry({tooltipEntrySettings:x,dataKey:b,payload:m,value:Bv(m,b),name:null!==(p=Bv(m,v))&&void 0!==p?p:null==x?void 0:x.name}));return e},[])}},pA=sg([xP,aj,JE,XO,DE],JP),hA=sg([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),xA=sg([DE,IE],ZE),fA=sg([hA,xP,xA],eP,{memoizeOptions:{resultEqualityCheck:ME}}),gA=sg([fA],e=>e.filter(TE)),bA=sg([fA],nP,{memoizeOptions:{resultEqualityCheck:ME}}),vA=sg([bA,JC],lP),yA=sg([gA,JC,xP],PE),jA=sg([vA,xP,fA],cP),wA=sg([xP],wP),NA=sg([xP],e=>e.allowDataOverflow),_A=sg([wA,NA],tO),kA=sg([fA],e=>e.filter(TE)),SA=sg([yA,kA,QO],bP),CA=sg([SA,JC,DE,_A],yP),OA=sg([fA],sP),EA=sg([vA,xP,OA,SP,DE],OP,{memoizeOptions:{resultEqualityCheck:AE}}),PA=sg([TP,DE,IE],AP),TA=sg([PA,DE],LP),AA=sg([DP,DE,IE],AP),MA=sg([AA,DE],zP),DA=sg([RP,DE,IE],AP),IA=sg([DA,DE],BP),RA=sg([TA,IA,MA],CP),$A=sg([xP,wA,_A,CA,EA,RA,aj,DE],KP),LA=sg([xP,aj,vA,jA,QO,DE,$A],GP),FA=sg([LA,xP,pA],XP),zA=sg([xP,LA,FA,DE],tT),UA=e=>{var t=DE(e),r=IE(e);return cT(e,t,r,!1)},BA=sg([xP,UA],pE),qA=sg([xP,pA,zA,BA],QP),WA=sg([aj,jA,xP,DE],kT),KA=sg([aj,jA,xP,DE],CT),VA=sg([aj,xP,pA,qA,UA,WA,KA,DE],(e,t,r,s,a,n,i,l)=>{if(t){var{type:o}=t,c=qv(e,l);if(s){var d="scaleBand"===r&&s.bandwidth?s.bandwidth()/2:2,u="category"===o&&s.bandwidth?s.bandwidth()/d:0;return u="angleAxis"===l&&null!=a&&(null==a?void 0:a.length)>=2?2*bh(a[0]-a[1])*u:u,c&&i?i.map((e,t)=>({coordinate:s(e)+u,value:e,index:t,offset:u})):s.domain().map((e,t)=>({coordinate:s(e)+u,value:n?n[e]:e,index:t,offset:u}))}}}),HA=sg([IT,RT,e=>e.tooltip.settings],(e,t,r)=>$T(r.shared,e,t)),GA=e=>e.tooltip.settings.trigger,YA=e=>e.tooltip.settings.defaultIndex,JA=sg([oA,HA,GA,YA],sA),ZA=sg([JA,vA],aA),QA=sg([VA,ZA],FT),XA=sg([JA],e=>{if(e)return e.dataKey}),eM=sg([oA,HA,GA,YA],iA),tM=sg([ay,ny,aj,yy,VA,YA,eM,lA],nA),rM=sg([JA,tM],(e,t)=>null!=e&&e.coordinate?e.coordinate:t),sM=sg([JA],e=>e.active),aM=sg([eM,ZA,JC,fP,QA,lA,HA],mA),nM=sg([aM],e=>{if(null!=e){var t=e.map(e=>e.payload).filter(e=>null!=e);return Array.from(new Set(t))}});function iM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function lM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iM(Object(r),!0).forEach(function(t){oM(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function oM(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var cM=()=>{var e=Yf(xP),t=Yf(VA),r=Yf(qA);return ty(e&&r?lM(lM({},e),{},{scale:r}):void 0,t)};function dM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function uM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dM(Object(r),!0).forEach(function(t){mM(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mM(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pM=(e,t,r,s,a)=>{var n,i=-1,l=null!==(n=null==t?void 0:t.length)&&void 0!==n?n:0;if(l<=1||null==e)return 0;if("angleAxis"===s&&null!=a&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var o=0;o<l;o++){var c=o>0?r[o-1].coordinate:r[l-1].coordinate,d=r[o].coordinate,u=o>=l-1?r[0].coordinate:r[o+1].coordinate,m=void 0;if(bh(d-c)!==bh(u-d)){var p=[];if(bh(u-d)===bh(a[1]-a[0])){m=u;var h=d+a[1]-a[0];p[0]=Math.min(h,(h+c)/2),p[1]=Math.max(h,(h+c)/2)}else{m=c;var x=u+a[1]-a[0];p[0]=Math.min(d,(x+d)/2),p[1]=Math.max(d,(x+d)/2)}var f=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(e>f[0]&&e<=f[1]||e>=p[0]&&e<=p[1]){({index:i}=r[o]);break}}else{var g=Math.min(c,u),b=Math.max(c,u);if(e>(g+d)/2&&e<=(b+d)/2){({index:i}=r[o]);break}}}else if(t)for(var v=0;v<l;v++)if(0===v&&e<=(t[v].coordinate+t[v+1].coordinate)/2||v>0&&v<l-1&&e>(t[v].coordinate+t[v-1].coordinate)/2&&e<=(t[v].coordinate+t[v+1].coordinate)/2||v===l-1&&e>(t[v].coordinate+t[v-1].coordinate)/2){({index:i}=t[v]);break}return i},hM=()=>Yf(XO),xM=(e,t)=>t,fM=(e,t,r)=>r,gM=(e,t,r,s)=>s,bM=sg(VA,e=>Cg(e,e=>e.coordinate)),vM=sg([oA,xM,fM,gM],sA),yM=sg([vM,vA],aA),jM=sg([oA,xM,fM,gM],iA),wM=sg([ay,ny,aj,yy,VA,gM,jM,lA],nA),NM=sg([vM,wM],(e,t)=>{var r;return null!==(r=e.coordinate)&&void 0!==r?r:t}),_M=sg([VA,yM],FT),kM=sg([jM,yM,JC,fP,_M,lA,xM],mA),SM=sg([vM],e=>({isActive:e.active,activeIndex:e.index})),CM=(e,t,r,s,a,n,i)=>{if(e&&s&&a&&n&&r){var l=Zw(e,r);if(l){var o=((e,t)=>"centric"===t?e.angle:e.radius)(l,t),c=pM(o,i,n,s,a),d=((e,t,r,s)=>{var a=t.find(e=>e&&e.index===r);if(a){if("centric"===e){var n=a.coordinate,{radius:i}=s;return uM(uM(uM({},s),Hw(s.cx,s.cy,i,n)),{},{angle:n,radius:i})}var l=a.coordinate,{angle:o}=s;return uM(uM(uM({},s),Hw(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}})(t,n,c,l);return{activeIndex:String(c),activeCoordinate:d}}}},OM=sg(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(null!=t){var s=e[t];if(null!=s)return r?s.panoramaElementId:s.elementId}}),EM=sg(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(e=>parseInt(e,10)).concat(Object.values(sE));return Array.from(new Set(t)).sort((e,t)=>e-t)},{memoizeOptions:{resultEqualityCheck:function(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}}});function PM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function TM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?PM(Object(r),!0).forEach(function(t){AM(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function AM(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var MM={zIndexMap:Object.values(sE).reduce((e,t)=>TM(TM({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),{})},DM=new Set(Object.values(sE));var IM=Zb({name:"zIndex",initialState:MM,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Ub()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!function(e){return DM.has(e)}(r)&&delete e.zIndexMap[r])},prepare:Ub()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:s,isPanorama:a}=t.payload;e.zIndexMap[r]?a?e.zIndexMap[r].panoramaElementId=s:e.zIndexMap[r].elementId=s:e.zIndexMap[r]={consumers:0,elementId:a?void 0:s,panoramaElementId:a?s:void 0}},prepare:Ub()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Ub()}}}),{registerZIndexPortal:RM,unregisterZIndexPortal:$M,registerZIndexPortalId:LM,unregisterZIndexPortalId:FM}=IM.actions,zM=IM.reducer;function UM(e){var{zIndex:t,children:r}=e,s=void 0!==nj()&&void 0!==t&&0!==t,a=_y(),n=Kf();u.useLayoutEffect(()=>s?(n(RM({zIndex:t})),()=>{n($M({zIndex:t}))}):Ah,[n,t,s]);var i=Yf(e=>OM(e,t,a));if(!s)return r;if(!i)return null;var l=document.getElementById(i);return l?P.createPortal(r,l):null}function BM(){return BM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},BM.apply(null,arguments)}function qM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function WM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qM(Object(r),!0).forEach(function(t){KM(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function KM(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VM(e){var{cursor:t,cursorComp:r,cursorProps:s}=e;return u.isValidElement(t)?u.cloneElement(t,s):u.createElement(r,s)}function HM(e){var t,r,s,a,{coordinate:n,payload:i,index:l,offset:o,tooltipAxisBandSize:c,layout:d,cursor:m,tooltipEventType:p,chartName:h}=e,x=n,f=i,g=l;if(!m||!x||"ScatterChart"!==h&&"axis"!==p)return null;if("ScatterChart"===h)r=x,s=sw,a=sE.cursorLine;else if("BarChart"===h)r=function(e,t,r,s){var a=s/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-a:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-a,width:"horizontal"===e?s:r.width-1,height:"horizontal"===e?r.height-1:s}}(d,x,o,c),s=Uw,a=sE.cursorRectangle;else if("radial"===d&&Uh(x)){var{cx:b,cy:v,radius:y,startAngle:j,endAngle:w}=Qw(x);r={cx:b,cy:v,startAngle:j,endAngle:w,innerRadius:y,outerRadius:y},s=sN,a=sE.cursorLine}else r={points:aN(d,x,o)},s=Zj,a=sE.cursorLine;var N="object"==typeof m&&"className"in m?m.className:void 0,_=WM(WM(WM(WM({stroke:"#ccc",pointerEvents:"none"},o),r),$m(m)),{},{payload:f,payloadIndex:g,className:Pm("recharts-tooltip-cursor",N)});return u.createElement(UM,{zIndex:null!==(t=e.zIndex)&&void 0!==t?t:a},u.createElement(VM,{cursor:m,cursorComp:s,cursorProps:_}))}function GM(e){var t=cM(),r=tj(),s=nj(),a=hM();return null==t||null==r||null==s||null==a?null:u.createElement(HM,BM({},e,{offset:r,layout:s,tooltipAxisBandSize:t,chartName:a}))}var YM,JM=u.createContext(null),ZM={exports:{}};var QM=(YM||(YM=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function s(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function n(e,t,s,n,i){if("function"!=typeof s)throw new TypeError("The listener must be a function");var l=new a(s,n||e,i),o=r?r+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],l]:e._events[o].push(l):(e._events[o]=l,e._eventsCount++),e}function i(e,t){0===--e._eventsCount?e._events=new s:delete e._events[t]}function l(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(r=!1)),l.prototype.eventNames=function(){var e,s,a=[];if(0===this._eventsCount)return a;for(s in e=this._events)t.call(e,s)&&a.push(r?s.slice(1):s);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},l.prototype.listeners=function(e){var t=r?r+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var a=0,n=s.length,i=new Array(n);a<n;a++)i[a]=s[a].fn;return i},l.prototype.listenerCount=function(e){var t=r?r+e:e,s=this._events[t];return s?s.fn?1:s.length:0},l.prototype.emit=function(e,t,s,a,n,i){var l=r?r+e:e;if(!this._events[l])return!1;var o,c,d=this._events[l],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,s),!0;case 4:return d.fn.call(d.context,t,s,a),!0;case 5:return d.fn.call(d.context,t,s,a,n),!0;case 6:return d.fn.call(d.context,t,s,a,n,i),!0}for(c=1,o=new Array(u-1);c<u;c++)o[c-1]=arguments[c];d.fn.apply(d.context,o)}else{var m,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,s);break;case 4:d[c].fn.call(d[c].context,t,s,a);break;default:if(!o)for(m=1,o=new Array(u-1);m<u;m++)o[m-1]=arguments[m];d[c].fn.apply(d[c].context,o)}}return!0},l.prototype.on=function(e,t,r){return n(this,e,t,r,!1)},l.prototype.once=function(e,t,r){return n(this,e,t,r,!0)},l.prototype.removeListener=function(e,t,s,a){var n=r?r+e:e;if(!this._events[n])return this;if(!t)return i(this,n),this;var l=this._events[n];if(l.fn)l.fn!==t||a&&!l.once||s&&l.context!==s||i(this,n);else{for(var o=0,c=[],d=l.length;o<d;o++)(l[o].fn!==t||a&&!l[o].once||s&&l[o].context!==s)&&c.push(l[o]);c.length?this._events[n]=1===c.length?c[0]:c:i(this,n)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&i(this,t)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l}(ZM)),ZM.exports);var XM=new(s(QM)),eD="recharts.syncEvent.tooltip",tD="recharts.syncEvent.brush";function rD(e,t){if(t){var r=Number.parseInt(t,10);if(!vh(r))return null==e?void 0:e[r]}}var sD=Zb({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),aD=sD.reducer,{createEventEmitter:nD}=sD.actions;function iD(e){return e.tooltip.syncInteraction}var lD=Zb({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:s}=t.payload;null!=r&&(e.dataStartIndex=r),null!=s&&(e.dataEndIndex=s)}}}),{setChartData:oD,setDataStartEndIndexes:cD,setComputedData:dD}=lD.actions,uD=lD.reducer,mD=["x","y"];function pD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function hD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pD(Object(r),!0).forEach(function(t){xD(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function xD(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fD(){var e=Yf(eE),t=Yf(rE),r=Kf(),s=Yf(tE),a=Yf(VA),n=nj(),i=Xy(),l=Yf(e=>e.rootProps.className);u.useEffect(()=>{if(null==e)return Ah;var l=(l,o,c)=>{var d;if(t!==c&&e===l)if("index"!==s){if(null!=a){var u;if("function"==typeof s){var m={activeTooltipIndex:null==o.payload.index?void 0:Number(o.payload.index),isTooltipActive:o.payload.active,activeIndex:null==o.payload.index?void 0:Number(o.payload.index),activeLabel:o.payload.label,activeDataKey:o.payload.dataKey,activeCoordinate:o.payload.coordinate},p=s(a,m);u=a[p]}else"value"===s&&(u=a.find(e=>String(e.value)===o.payload.label));var{coordinate:h}=o.payload;if(null!=u&&!1!==o.payload.active&&null!=h&&null!=i){var{x,y:f}=h,g=Math.min(x,i.x+i.width),b=Math.min(f,i.y+i.height),v={x:"horizontal"===n?u.coordinate:g,y:"horizontal"===n?b:u.coordinate},y=ZT({active:o.payload.active,coordinate:v,dataKey:o.payload.dataKey,index:String(u.index),label:o.payload.label,sourceViewBox:o.payload.sourceViewBox});r(y)}else r(ZT({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}))}}else if(i&&null!=o&&null!==(d=o.payload)&&void 0!==d&&d.coordinate&&o.payload.sourceViewBox){var j=o.payload.coordinate,{x:w,y:N}=j,_=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(j,mD),{x:k,y:S,width:C,height:O}=o.payload.sourceViewBox,E=hD(hD({},_),{},{x:i.x+(C?(w-k)/C:0)*i.width,y:i.y+(O?(N-S)/O:0)*i.height});r(hD(hD({},o),{},{payload:hD(hD({},o.payload),{},{coordinate:E})}))}else r(o)};return XM.on(eD,l),()=>{XM.off(eD,l)}},[l,r,t,e,s,a,n,i])}function gD(){var e=Kf();u.useEffect(()=>{e(nD())},[e]),fD(),function(){var e=Yf(eE),t=Yf(rE),r=Kf();u.useEffect(()=>{if(null==e)return Ah;var s=(s,a,n)=>{t!==n&&e===s&&r(cD(a))};return XM.on(tD,s),()=>{XM.off(tD,s)}},[r,t,e])}()}function bD(e,t,r,s,a,n){var i=Yf(r=>((e,t,r)=>{if(null!=t){var s=oA(e);return"axis"===t?"hover"===r?s.axisInteraction.hover.dataKey:s.axisInteraction.click.dataKey:"hover"===r?s.itemInteraction.hover.dataKey:s.itemInteraction.click.dataKey}})(r,e,t)),l=Yf(rE),o=Yf(eE),c=Yf(tE),d=Yf(iD),m=null==d?void 0:d.active,p=Xy();u.useEffect(()=>{if(!m&&null!=o&&null!=l){var e=ZT({active:n,coordinate:r,dataKey:i,index:a,label:"number"==typeof s?String(s):s,sourceViewBox:p});XM.emit(eD,o,e,l)}},[m,r,i,a,s,l,o,c,n,p])}function vD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function yD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vD(Object(r),!0).forEach(function(t){jD(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function jD(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wD(e){return e.dataKey}var ND=[],_D={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Fj,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function kD(e){var t,r,s=Vh(e,_D),{active:a,allowEscapeViewBox:n,animationDuration:i,animationEasing:l,content:o,filterNull:c,isAnimationActive:d,offset:m,payloadUniqBy:p,position:h,reverseDirection:x,useTranslate3d:f,wrapperStyle:g,cursor:b,shared:v,trigger:y,defaultIndex:j,portal:w,axisId:N}=s,_=Kf(),k="number"==typeof j?String(j):j;u.useEffect(()=>{_(WT({shared:v,trigger:y,axisId:N,active:a,defaultIndex:k}))},[_,v,y,N,a,k]);var S=Xy(),C=zj(),O=function(e){return Yf(t=>LT(t,e))}(v),{activeIndex:E,isActive:T}=null!==(t=Yf(e=>SM(e,O,y,k)))&&void 0!==t?t:{},A=Yf(e=>kM(e,O,y,k)),M=Yf(e=>_M(e,O,y,k)),D=Yf(e=>NM(e,O,y,k)),I=A,R=u.useContext(JM),$=null!==(r=null!=a?a:T)&&void 0!==r&&r,[L,F]=Pg([I,$]),z="axis"===O?M:void 0;bD(O,y,D,z,E,$);var U=null!=w?w:R;if(null==U||null==S||null==O)return null;var B=null!=I?I:ND;$||(B=ND),c&&B.length&&(B=Af(B.filter(e=>null!=e.value&&(!0!==e.hide||s.includeHidden)),p,wD));var q=B.length>0,W=u.createElement($j,{allowEscapeViewBox:n,animationDuration:i,animationEasing:l,isAnimationActive:d,active:$,coordinate:D,hasPayload:q,offset:m,position:h,reverseDirection:x,useTranslate3d:f,viewBox:S,wrapperStyle:g,lastBoundingBox:L,innerRef:F,hasPortalFromProps:Boolean(w)},function(e,t){return u.isValidElement(e)?u.cloneElement(e,t):"function"==typeof e?u.createElement(e,t):u.createElement(Ej,t)}(o,yD(yD({},s),{},{payload:B,label:z,active:$,activeIndex:E,coordinate:D,accessibilityLayer:C})));return u.createElement(u.Fragment,null,P.createPortal(W,U),$&&u.createElement(GM,{cursor:b,tooltipEventType:O,coordinate:D,payload:B,index:E}))}var SD=e=>null;function CD(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}SD.displayName="Cell";function OD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function ED(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var PD=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?OD(Object(r),!0).forEach(function(t){ED(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},{cacheSize:2e3,enableCache:!0}),TD=new class{constructor(e){CD(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}(PD.cacheSize),AD={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MD="recharts_measurement_span";var DD=(e,t)=>{try{var r=document.getElementById(MD);r||((r=document.createElement("span")).setAttribute("id",MD),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,AD,t),r.textContent="".concat(e);var s=r.getBoundingClientRect();return{width:s.width,height:s.height}}catch(a){return{width:0,height:0}}},ID=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||Fj)return{width:0,height:0};if(!PD.enableCache)return DD(e,t);var r=function(e,t){var r=t.fontSize||"",s=t.fontFamily||"",a=t.fontWeight||"",n=t.fontStyle||"",i=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(s,"|").concat(a,"|").concat(n,"|").concat(i,"|").concat(l)}(e,t),s=TD.get(r);if(s)return s;var a=DD(e,t);return TD.set(r,a),a},RD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$D=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,LD=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,FD=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,zD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},UD=Object.keys(zD),BD="NaN";class qD{static parse(e){var t,[,r,s]=null!==(t=FD.exec(e))&&void 0!==t?t:[];return new qD(parseFloat(r),null!=s?s:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,vh(e)&&(this.unit=""),""===t||LD.test(t)||(this.num=NaN,this.unit=""),UD.includes(t)&&(this.num=function(e,t){return e*zD[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new qD(NaN,""):new qD(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new qD(NaN,""):new qD(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new qD(NaN,""):new qD(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new qD(NaN,""):new qD(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return vh(this.num)}}function WD(e){if(e.includes(BD))return BD;for(var t=e;t.includes("*")||t.includes("/");){var r,[,s,a,n]=null!==(r=RD.exec(t))&&void 0!==r?r:[],i=qD.parse(null!=s?s:""),l=qD.parse(null!=n?n:""),o="*"===a?i.multiply(l):i.divide(l);if(o.isNaN())return BD;t=t.replace(RD,o.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,d,u,m]=null!==(c=$D.exec(t))&&void 0!==c?c:[],p=qD.parse(null!=d?d:""),h=qD.parse(null!=m?m:""),x="+"===u?p.add(h):p.subtract(h);if(x.isNaN())return BD;t=t.replace($D,x.toString())}return t}var KD=/\(([^()]*)\)/;function VD(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,r=e;null!=(t=KD.exec(r));){var[,s]=t;r=r.replace(KD,WD(s))}return r}(t),t=WD(t)}function HD(e){var t=function(e){try{return VD(e)}catch(t){return BD}}(e.slice(5,-1));return t===BD?"":t}var GD=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],YD=["dx","dy","angle","className","breakAll"];function JD(){return JD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},JD.apply(null,arguments)}function ZD(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var QD=/[ \f\n\r\t\v\u2028\u2029]+/,XD=e=>{var{children:t,breakAll:r,style:s}=e;try{var a=[];return Eh(t)||(a=r?t.toString().split(""):t.toString().split(QD)),{wordsWithComputedWidth:a.map(e=>({word:e,width:ID(e,s).width})),spaceWidth:r?0:ID("",s).width}}catch(n){return null}};function eI(e){return"start"===e||"middle"===e||"end"===e||"inherit"===e}var tI=(e,t,r,s)=>e.reduce((e,a)=>{var{word:n,width:i}=a,l=e[e.length-1];if(l&&null!=i&&(null==t||s||l.width+i+r<Number(t)))l.words.push(n),l.width+=i+r;else{var o={words:[n],width:i};e.push(o)}return e},[]),rI=e=>e.reduce((e,t)=>e.width>t.width?e:t),sI=(e,t,r,s,a,n,i,l)=>{var o=e.slice(0,t),c=XD({breakAll:r,style:s,children:o+""});if(!c)return[!1,[]];var d=tI(c.wordsWithComputedWidth,n,i,l);return[d.length>a||rI(d).width>Number(n),d]},aI=e=>[{words:Eh(e)?[]:e.toString().split(QD),width:void 0}],nI=e=>{var{width:t,scaleToFit:r,children:s,style:a,breakAll:n,maxLines:i}=e;if((t||r)&&!Fj){var l=XD({breakAll:n,children:s,style:a});if(!l)return aI(s);var{wordsWithComputedWidth:o,spaceWidth:c}=l;return((e,t,r,s,a)=>{var{maxLines:n,children:i,style:l,breakAll:o}=e,c=jh(n),d=String(i),u=tI(t,s,r,a);if(!c||a)return u;if(!(u.length>n||rI(u).width>Number(s)))return u;for(var m,p=0,h=d.length-1,x=0;p<=h&&x<=d.length-1;){var f=Math.floor((p+h)/2),g=f-1,[b,v]=sI(d,g,o,l,n,s,r,a),[y]=sI(d,f,o,l,n,s,r,a);if(b||y||(p=f+1),b&&y&&(h=f-1),!b&&y){m=v;break}x++}return m||u})({breakAll:n,children:s,maxLines:i,style:a},o,c,t,Boolean(r))}return aI(s)},iI="#808080",lI={breakAll:!1,capHeight:"0.71em",fill:iI,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},oI=u.forwardRef((e,t)=>{var r=Vh(e,lI),{x:s,y:a,lineHeight:n,capHeight:i,fill:l,scaleToFit:o,textAnchor:c,verticalAnchor:d}=r,m=ZD(r,GD),p=u.useMemo(()=>nI({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:o,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,o,m.style,m.width]),{dx:h,dy:x,angle:f,className:g,breakAll:b}=m,v=ZD(m,YD);if(!wh(s)||!wh(a)||0===p.length)return null;var y,j=Number(s)+(jh(h)?h:0),w=Number(a)+(jh(x)?x:0);if(!Uy(j)||!Uy(w))return null;switch(d){case"start":y=HD("calc(".concat(i,")"));break;case"middle":y=HD("calc(".concat((p.length-1)/2," * -").concat(n," + (").concat(i," / 2))"));break;default:y=HD("calc(".concat(p.length-1," * -").concat(n,")"))}var N=[];if(o){var _=p[0].width,{width:k}=m;N.push("scale(".concat(jh(k)&&jh(_)?k/_:1,")"))}return f&&N.push("rotate(".concat(f,", ").concat(j,", ").concat(w,")")),N.length&&(v.transform=N.join(" ")),u.createElement("text",JD({},Lm(v),{ref:t,x:j,y:w,className:Pm("recharts-text",g),textAnchor:c,fill:l.includes("url")?iI:l}),p.map((e,t)=>{var r=e.words.join(b?"":" ");return u.createElement("tspan",{x:j,dy:0===t?y:n,key:"".concat(r,"-").concat(t)},r)}))});oI.displayName="Text";var cI=["labelRef"];function dI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function uI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dI(Object(r),!0).forEach(function(t){mI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mI(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pI(){return pI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},pI.apply(null,arguments)}var hI=u.createContext(null),xI=e=>{var{x:t,y:r,upperWidth:s,lowerWidth:a,width:n,height:i,children:l}=e,o=u.useMemo(()=>({x:t,y:r,upperWidth:s,lowerWidth:a,width:n,height:i}),[t,r,s,a,n,i]);return u.createElement(hI.Provider,{value:o},l)},fI=()=>{var e=u.useContext(hI),t=Xy();return e||Qy(t)},gI=u.createContext(null),bI=e=>null!=e&&"function"==typeof e,vI=(e,t,r,s,a)=>{var n,i,{offset:l,className:o}=e,{cx:c,cy:d,innerRadius:m,outerRadius:p,startAngle:h,endAngle:x,clockWise:f}=a,g=(m+p)/2,b=((e,t)=>bh(t-e)*Math.min(Math.abs(t-e),360))(h,x),v=b>=0?1:-1;switch(t){case"insideStart":n=h+v*l,i=f;break;case"insideEnd":n=x-v*l,i=!f;break;case"end":n=x+v*l,i=f;break;default:throw new Error("Unsupported position ".concat(t))}i=b<=0?i:!i;var y=Hw(c,d,g,n),j=Hw(c,d,g,n+359*(i?1:-1)),w="M".concat(y.x,",").concat(y.y,"\n    A").concat(g,",").concat(g,",0,1,").concat(i?0:1,",\n    ").concat(j.x,",").concat(j.y),N=Eh(e.id)?_h("recharts-radial-line-"):e.id;return u.createElement("text",pI({},s,{dominantBaseline:"central",className:Pm("recharts-radial-bar-label",o)}),u.createElement("defs",null,u.createElement("path",{id:N,d:w})),u.createElement("textPath",{xlinkHref:"#".concat(N)},r))},yI=e=>"cx"in e&&jh(e.cx),jI={offset:5,zIndex:sE.label};function wI(e){var t,r,s,a,n,i=Vh(e,jI),{viewBox:l,position:o,value:c,children:d,content:m,className:p="",textBreakAll:h,labelRef:x}=i,f=(t=u.useContext(gI),r=Yf(SE),t||r),g=fI();if(!(s=null==l?"center"===o?g:null!=f?f:g:yI(l)?l:Qy(l))||Eh(c)&&Eh(d)&&!u.isValidElement(m)&&"function"!=typeof m)return null;var b=uI(uI({},i),{},{viewBox:s});if(u.isValidElement(m)){var{labelRef:v}=b,y=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(b,cI);return u.cloneElement(m,y)}if("function"==typeof m){if(a=u.createElement(m,b),u.isValidElement(a))return a}else a=(e=>{var{value:t,formatter:r}=e,s=Eh(e.children)?t:e.children;return"function"==typeof r?r(s):s})(i);var j=Lm(i);if(yI(s)){if("insideStart"===o||"insideEnd"===o||"end"===o)return vI(i,o,a,j,s);n=((e,t,r)=>{var{cx:s,cy:a,innerRadius:n,outerRadius:i,startAngle:l,endAngle:o}=e,c=(l+o)/2;if("outside"===r){var{x:d,y:u}=Hw(s,a,i+t,c);return{x:d,y:u,textAnchor:d>=s?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:s,y:a,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:s,y:a,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:s,y:a,textAnchor:"middle",verticalAnchor:"end"};var m=(n+i)/2,{x:p,y:h}=Hw(s,a,m,c);return{x:p,y:h,textAnchor:"middle",verticalAnchor:"middle"}})(s,i.offset,i.position)}else n=((e,t)=>{var r,{parentViewBox:s,offset:a,position:n}=e;null==s||yI(s)||(r=s);var{x:i,y:l,upperWidth:o,lowerWidth:c,height:d}=t,u=i,m=i+(o-c)/2,p=(u+m)/2,h=(o+c)/2,x=u+o/2,f=d>=0?1:-1,g=f*a,b=f>0?"end":"start",v=f>0?"start":"end",y=o>=0?1:-1,j=y*a,w=y>0?"end":"start",N=y>0?"start":"end";if("top"===n)return uI(uI({},{x:u+o/2,y:l-g,textAnchor:"middle",verticalAnchor:b}),r?{height:Math.max(l-r.y,0),width:o}:{});if("bottom"===n)return uI(uI({},{x:m+c/2,y:l+d+g,textAnchor:"middle",verticalAnchor:v}),r?{height:Math.max(r.y+r.height-(l+d),0),width:c}:{});if("left"===n){var _={x:p-j,y:l+d/2,textAnchor:w,verticalAnchor:"middle"};return uI(uI({},_),r?{width:Math.max(_.x-r.x,0),height:d}:{})}if("right"===n){var k={x:p+h+j,y:l+d/2,textAnchor:N,verticalAnchor:"middle"};return uI(uI({},k),r?{width:Math.max(r.x+r.width-k.x,0),height:d}:{})}var S=r?{width:h,height:d}:{};return"insideLeft"===n?uI({x:p+j,y:l+d/2,textAnchor:N,verticalAnchor:"middle"},S):"insideRight"===n?uI({x:p+h-j,y:l+d/2,textAnchor:w,verticalAnchor:"middle"},S):"insideTop"===n?uI({x:u+o/2,y:l+g,textAnchor:"middle",verticalAnchor:v},S):"insideBottom"===n?uI({x:m+c/2,y:l+d-g,textAnchor:"middle",verticalAnchor:b},S):"insideTopLeft"===n?uI({x:u+j,y:l+g,textAnchor:N,verticalAnchor:v},S):"insideTopRight"===n?uI({x:u+o-j,y:l+g,textAnchor:w,verticalAnchor:v},S):"insideBottomLeft"===n?uI({x:m+j,y:l+d-g,textAnchor:N,verticalAnchor:b},S):"insideBottomRight"===n?uI({x:m+c-j,y:l+d-g,textAnchor:w,verticalAnchor:b},S):n&&"object"==typeof n&&(jh(n.x)||yh(n.x))&&(jh(n.y)||yh(n.y))?uI({x:i+kh(n.x,h),y:l+kh(n.y,d),textAnchor:"end",verticalAnchor:"end"},S):uI({x,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},S)})(i,s);return u.createElement(UM,{zIndex:i.zIndex},u.createElement(oI,pI({ref:x,className:Pm("recharts-label",p)},j,n,{textAnchor:eI(j.textAnchor)?j.textAnchor:n.textAnchor,breakAll:h}),a))}wI.displayName="Label";function NI(e){var{label:t,labelRef:r}=e;return((e,t,r)=>{if(!e)return null;var s={viewBox:t,labelRef:r};return!0===e?u.createElement(wI,pI({key:"label-implicit"},s)):wh(e)?u.createElement(wI,pI({key:"label-implicit",value:e},s)):u.isValidElement(e)?e.type===wI?u.cloneElement(e,uI({key:"label-implicit"},s)):u.createElement(wI,pI({key:"label-implicit",content:e},s)):bI(e)?u.createElement(wI,pI({key:"label-implicit",content:e},s)):e&&"object"==typeof e?u.createElement(wI,pI({},e,{key:"label-implicit"},s)):null})(t,fI(),r)||null}var _I,kI={},SI={};function CI(){return _I||(_I=1,e=SI,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.last=function(e){return e[e.length-1]}),SI;var e}var OI,EI,PI,TI,AI={};function MI(){return OI||(OI=1,e=AI,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}),AI;var e}function DI(){return TI?PI:(TI=1,PI=(EI||(EI=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CI(),r=MI(),s=hx();e.last=function(e){if(s.isArrayLike(e))return t.last(r.toArray(e))}}(kI)),kI).last)}const II=s(DI());var RI=["valueAccessor"],$I=["dataKey","clockWise","id","textBreakAll","zIndex"];function LI(){return LI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},LI.apply(null,arguments)}function FI(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var zI=e=>Array.isArray(e.value)?II(e.value):e.value,UI=u.createContext(void 0),BI=UI.Provider,qI=u.createContext(void 0),WI=qI.Provider;function KI(e){var{valueAccessor:t=zI}=e,r=FI(e,RI),{dataKey:s,clockWise:a,id:n,textBreakAll:i,zIndex:l}=r,o=FI(r,$I),c=u.useContext(UI),d=u.useContext(qI),m=c||d;return m&&m.length?u.createElement(UM,{zIndex:null!=l?l:sE.label},u.createElement(Wm,{className:"recharts-label-list"},m.map((e,a)=>{var l,c=Eh(s)?t(e,a):Bv(e&&e.payload,s),d=Eh(n)?{}:{id:"".concat(n,"-").concat(a)};return u.createElement(wI,LI({key:"label-".concat(a)},Lm(e),o,d,{fill:null!==(l=r.fill)&&void 0!==l?l:e.fill,parentViewBox:e.parentViewBox,value:c,textBreakAll:i,viewBox:e.viewBox,index:a,zIndex:0}))}))):null}function VI(e){var{label:t}=e;return t?!0===t?u.createElement(KI,{key:"labelList-implicit"}):u.isValidElement(t)||bI(t)?u.createElement(KI,{key:"labelList-implicit",content:t}):"object"==typeof t?u.createElement(KI,LI({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function HI(){return HI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},HI.apply(null,arguments)}KI.displayName="LabelList";var GI=e=>{var{cx:t,cy:r,r:s,className:a}=e,n=Pm("recharts-dot",a);return jh(t)&&jh(r)&&jh(s)?u.createElement("circle",HI({},Rm(e),Bh(e),{className:n,cx:t,cy:r,r:s})):null},YI=e=>e.graphicalItems.polarItems,JI=sg([CE,OE],ZE),ZI=sg([YI,GE,JI],eP),QI=sg([ZI],nP),XI=sg([QI,ZC],lP),eR=sg([XI,GE,ZI],cP);sg([XI,GE,ZI],(e,t,r)=>r.length>0?e.flatMap(e=>r.flatMap(r=>{var s;return{value:Bv(e,null!==(s=t.dataKey)&&void 0!==s?s:r.dataKey),errorDomain:[]}})).filter(Boolean):null!=(null==t?void 0:t.dataKey)?e.map(e=>({value:Bv(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]})));var tR=()=>{},rR=sg([XI,GE,ZI,SP,CE],OP),sR=sg([GE,NP,_P,tR,rR,tR,aj,CE],KP),aR=sg([GE,aj,XI,eR,QO,CE,sR],GP),nR=sg([aR,GE,ZP],XP);sg([GE,aR,nR,CE],tT);var iR=Zb({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:lR,removeRadiusAxis:oR,addAngleAxis:cR,removeAngleAxis:dR}=iR.actions,uR=iR.reducer;function mR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function pR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mR(Object(r),!0).forEach(function(t){hR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function hR(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xR,fR,gR=sg([YI,(e,t)=>t],(e,t)=>e.filter(e=>"pie"===e.type).find(e=>e.id===t)),bR=[],vR=(e,t,r)=>0===(null==r?void 0:r.length)?bR:r,yR=sg([ZC,gR,vR],(e,t,r)=>{var s,{chartData:a}=e;if(null!=t&&((s=null!=(null==t?void 0:t.data)&&t.data.length>0?t.data:a)&&s.length||null==r||(s=r.map(e=>pR(pR({},t.presentationProps),e.props))),null!=s))return s}),jR=sg([yR,gR,vR],(e,t,r)=>{if(null!=e&&null!=t)return e.map((e,s)=>{var a,n,i=Bv(e,t.nameKey,t.name);return n=null!=r&&null!==(a=r[s])&&void 0!==a&&null!==(a=a.props)&&void 0!==a&&a.fill?r[s].props.fill:"object"==typeof e&&null!=e&&"fill"in e?e.fill:t.fill,{value:sy(i,t.dataKey),color:n,payload:e,type:t.legendType}})}),wR=sg([yR,gR,vR,yy],(e,t,r,s)=>{if(null!=t&&null!=e)return function(e){var t,r,s,{pieSettings:a,displayedData:n,cells:i,offset:l}=e,{cornerRadius:o,startAngle:c,endAngle:d,dataKey:u,nameKey:m,tooltipType:p}=a,h=Math.abs(a.minAngle),x=E$(c,d),f=Math.abs(x),g=n.length<=1?0:null!==(t=a.paddingAngle)&&void 0!==t?t:0,b=n.filter(e=>0!==Bv(e,u,0)).length,v=f-b*h-(f>=360?b:b-1)*g,y=n.reduce((e,t)=>{var r=Bv(t,u,0);return e+(jh(r)?r:0)},0);y>0&&(r=n.map((e,t)=>{var r,n=Bv(e,u,0),d=Bv(e,m,t),f=O$(a,l,e),b=(jh(n)?n:0)/y,j=N$(N$({},e),i&&i[t]&&i[t].props),w=(r=t?s.endAngle+bh(x)*g*(0!==n?1:0):c)+bh(x)*((0!==n?h:0)+b*v),N=(r+w)/2,_=(f.innerRadius+f.outerRadius)/2,k=[{name:d,value:n,payload:j,dataKey:u,type:p}],S=Hw(f.cx,f.cy,_,N);return s=N$(N$(N$(N$({},a.presentationProps),{},{percent:b,cornerRadius:"string"==typeof o?parseFloat(o):o,name:d,tooltipPayload:k,midAngle:N,middleRadius:_,tooltipPosition:S},j),f),{},{value:n,startAngle:r,endAngle:w,payload:j,paddingAngle:bh(x)*g})}));return r}({offset:s,pieSettings:t,displayedData:e,cells:r})}),NR={exports:{}},_R={};var kR=(fR||(fR=1,NR.exports=function(){if(xR)return _R;xR=1;var e,t=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),o=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.for("react.offscreen");function x(e){if("object"==typeof e&&null!==e){var h=e.$$typeof;switch(h){case t:switch(e=e.type){case s:case n:case a:case d:case u:return e;default:switch(e=e&&e.$$typeof){case o:case l:case c:case p:case m:case i:return e;default:return h}}case r:return h}}}return e=Symbol.for("react.module.reference"),_R.ContextConsumer=l,_R.ContextProvider=i,_R.Element=t,_R.ForwardRef=c,_R.Fragment=s,_R.Lazy=p,_R.Memo=m,_R.Portal=r,_R.Profiler=n,_R.StrictMode=a,_R.Suspense=d,_R.SuspenseList=u,_R.isAsyncMode=function(){return!1},_R.isConcurrentMode=function(){return!1},_R.isContextConsumer=function(e){return x(e)===l},_R.isContextProvider=function(e){return x(e)===i},_R.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},_R.isForwardRef=function(e){return x(e)===c},_R.isFragment=function(e){return x(e)===s},_R.isLazy=function(e){return x(e)===p},_R.isMemo=function(e){return x(e)===m},_R.isPortal=function(e){return x(e)===r},_R.isProfiler=function(e){return x(e)===n},_R.isStrictMode=function(e){return x(e)===a},_R.isSuspense=function(e){return x(e)===d},_R.isSuspenseList=function(e){return x(e)===u},_R.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===s||t===n||t===a||t===d||t===u||t===h||"object"==typeof t&&null!==t&&(t.$$typeof===p||t.$$typeof===m||t.$$typeof===i||t.$$typeof===l||t.$$typeof===c||t.$$typeof===e||void 0!==t.getModuleId)},_R.typeOf=x,_R}()),NR.exports),SR=e=>"string"==typeof e?e:e?e.displayName||e.name||"Component":"",CR=null,OR=null,ER=e=>{if(e===CR&&Array.isArray(OR))return OR;var t=[];return u.Children.forEach(e,e=>{Eh(e)||(kR.isFragment(e)?t=t.concat(ER(e.props.children)):t.push(e))}),OR=t,CR=e,t};function PR(e,t){var r=[],s=[];return s=Array.isArray(t)?t.map(e=>SR(e)):[SR(t)],ER(e).forEach(e=>{var t=gh(e,"type.displayName")||gh(e,"type.name");t&&-1!==s.indexOf(t)&&r.push(e)}),r}var TR,AR,MR,DR=e=>!e||"object"!=typeof e||!("clipDot"in e)||Boolean(e.clipDot),IR={};function RR(){return MR?AR:(MR=1,AR=(TR||(TR=1,e=IR,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isPlainObject=function(e){if("object"!=typeof e)return!1;if(null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){const t=e[Symbol.toStringTag];return null!=t&&!!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}),IR).isPlainObject);var e}const $R=s(RR());function LR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function FR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LR(Object(r),!0).forEach(function(t){zR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function zR(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UR(){return UR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},UR.apply(null,arguments)}var BR=(e,t,r,s,a)=>{var n,i=r-s;return n="M ".concat(e,",").concat(t),n+="L ".concat(e+r,",").concat(t),n+="L ".concat(e+r-i/2,",").concat(t+a),n+="L ".concat(e+r-i/2-s,",").concat(t+a),n+="L ".concat(e,",").concat(t," Z")},qR={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},WR=e=>{var t=Vh(e,qR),{x:r,y:s,upperWidth:a,lowerWidth:n,height:i,className:l}=t,{animationEasing:o,animationDuration:c,animationBegin:d,isUpdateAnimationActive:m}=t,p=u.useRef(null),[h,x]=u.useState(-1),f=u.useRef(a),g=u.useRef(n),b=u.useRef(i),v=u.useRef(r),y=u.useRef(s),j=Tw(e,"trapezoid-");if(u.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var e=p.current.getTotalLength();e&&x(e)}catch(t){}},[]),r!==+r||s!==+s||a!==+a||n!==+n||i!==+i||0===a&&0===n||0===i)return null;var w=Pm("recharts-trapezoid",l);if(!m)return u.createElement("g",null,u.createElement("path",UR({},Lm(t),{className:w,d:BR(r,s,a,n,i)})));var N=f.current,_=g.current,k=b.current,S=v.current,C=y.current,O="0px ".concat(-1===h?1:h,"px"),E="".concat(h,"px 0px"),P=lw(["strokeDasharray"],c,o);return u.createElement(Pw,{animationId:j,key:j,canBegin:h>0,duration:c,easing:o,isActive:m,begin:d},e=>{var l=Ch(N,a,e),o=Ch(_,n,e),c=Ch(k,i,e),d=Ch(S,r,e),m=Ch(C,s,e);p.current&&(f.current=l,g.current=o,b.current=c,v.current=d,y.current=m);var h=e>0?{transition:P,strokeDasharray:E}:{strokeDasharray:O};return u.createElement("path",UR({},Lm(t),{className:w,d:BR(d,m,l,o,c),ref:p,style:FR(FR({},h),t.style)}))})},KR=["option","shapeType","propTransformer","activeClassName","isActive"];function VR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function HR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?VR(Object(r),!0).forEach(function(t){GR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function GR(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YR(e,t){return HR(HR({},t),e)}function JR(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return u.createElement(Uw,r);case"trapezoid":return u.createElement(WR,r);case"sector":return u.createElement(sN,r);case"symbols":if(function(e){return"symbols"===e}(t))return u.createElement(zh,r);break;case"curve":return u.createElement(Zj,r);default:return null}}function ZR(e){var t,{option:r,shapeType:s,propTransformer:a=YR,activeClassName:n="recharts-active-shape",isActive:i}=e,l=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,KR);if(u.isValidElement(r))t=u.cloneElement(r,HR(HR({},l),function(e){return u.isValidElement(e)?e.props:e}(r)));else if("function"==typeof r)t=r(l);else if($R(r)&&"boolean"!=typeof r){var o=a(r,l);t=u.createElement(JR,{shapeType:s,elementProps:o})}else{var c=l;t=u.createElement(JR,{shapeType:s,elementProps:c})}return i?u.createElement(Wm,{className:n},t):t}var QR,XR=(e,t)=>{var r=Kf();return(s,a)=>n=>{null==e||e(s,a,n),r(KT({activeIndex:String(a),activeDataKey:t,activeCoordinate:s.tooltipPosition}))}},e$=e=>{var t=Kf();return(r,s)=>a=>{null==e||e(r,s,a),t(VT())}},t$=(e,t)=>{var r=Kf();return(s,a)=>n=>{null==e||e(s,a,n),r(GT({activeIndex:String(a),activeDataKey:t,activeCoordinate:s.tooltipPosition}))}};function r$(e){var{fn:t,args:r}=e,s=Kf(),a=_y();return u.useLayoutEffect(()=>{if(!a){var e=t(r);return s(BT(e)),()=>{s(qT(e))}}},[t,r,s,a]),null}function s$(e){var{legendPayload:t}=e,r=Kf(),s=_y();return u.useLayoutEffect(()=>s?Ah:(r(dj(t)),()=>{r(uj(t))}),[r,s,t]),null}function a$(e){var{legendPayload:t}=e,r=Kf(),s=Yf(aj);return u.useLayoutEffect(()=>"centric"!==s&&"radial"!==s?Ah:(r(dj(t)),()=>{r(uj(t))}),[r,s,t]),null}var n$=null!==(QR=p["useId".toString()])&&void 0!==QR?QR:()=>{var[e]=u.useState(()=>_h("uid-"));return e};function i$(e,t){var r=n$();return t||(e?"".concat(e,"-").concat(r):r)}var l$=u.createContext(void 0),o$=e=>{var{id:t,type:r,children:s}=e,a=i$("recharts-".concat(r),t);return u.createElement(l$.Provider,{value:a},s(a))},c$=Zb({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Ub()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:s}=t.payload,a=Cb(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=s)},prepare:Ub()},removeCartesianGraphicalItem:{reducer(e,t){var r=Cb(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Ub()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Ub()},removePolarGraphicalItem:{reducer(e,t){var r=Cb(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Ub()}}}),{addCartesianGraphicalItem:d$,replaceCartesianGraphicalItem:u$,removeCartesianGraphicalItem:m$,addPolarGraphicalItem:p$,removePolarGraphicalItem:h$}=c$.actions,x$=c$.reducer;function f$(e){var t=Kf(),r=u.useRef(null);return u.useLayoutEffect(()=>{null===r.current?t(d$(e)):r.current!==e&&t(u$({prev:r.current,next:e})),r.current=e},[t,e]),u.useLayoutEffect(()=>()=>{r.current&&(t(m$(r.current)),r.current=null)},[t]),null}function g$(e){var t=Kf();return u.useLayoutEffect(()=>(t(p$(e)),()=>{t(h$(e))}),[t,e]),null}var b$=["onMouseEnter","onClick","onMouseLeave"],v$=["id"],y$=["id"];function j$(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function w$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function N$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w$(Object(r),!0).forEach(function(t){_$(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _$(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k$(){return k$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},k$.apply(null,arguments)}function S$(e){var t=u.useMemo(()=>PR(e.children,SD),[e.children]),r=Yf(r=>jR(r,e.id,t));return null==r?null:u.createElement(a$,{legendPayload:r})}function C$(e){var{dataKey:t,nameKey:r,sectors:s,stroke:a,strokeWidth:n,fill:i,name:l,hide:o,tooltipType:c}=e;return{dataDefinedOnItem:s.map(e=>e.tooltipPayload),positions:s.map(e=>e.tooltipPosition),settings:{stroke:a,strokeWidth:n,fill:i,dataKey:t,nameKey:r,name:sy(l,t),hide:o,type:c,color:i,unit:""}}}var O$=(e,t,r)=>{var{top:s,left:a,width:n,height:i}=t,l=Gw(n,i),o=a+kh(e.cx,n,n/2),c=s+kh(e.cy,i,i/2),d=kh(e.innerRadius,l,0),u=((e,t,r)=>kh("function"==typeof t?t(e):t,r,.8*r))(r,e.outerRadius,l);return{cx:o,cy:c,innerRadius:d,outerRadius:u,maxRadius:e.maxRadius||Math.sqrt(n*n+i*i)/2}},E$=(e,t)=>bh(t-e)*Math.min(Math.abs(t-e),360);function P$(e){var{sectors:t,props:r,showLabels:s}=e,{label:a,labelLine:n,dataKey:i}=r;if(!s||!a||!t)return null;var l=Rm(r),o=$m(a),c=$m(n),d="object"==typeof a&&"offsetRadius"in a&&"number"==typeof a.offsetRadius&&a.offsetRadius||20,m=t.map((e,t)=>{var r,s,m=(e.startAngle+e.endAngle)/2,p=Hw(e.cx,e.cy,e.outerRadius+d,m),h=N$(N$(N$(N$({},l),e),{},{stroke:"none"},o),{},{index:t,textAnchor:(r=p.x,s=e.cx,r>s?"start":r<s?"end":"middle")},p),x=N$(N$(N$(N$({},l),e),{},{fill:"none",stroke:e.fill},c),{},{index:t,points:[Hw(e.cx,e.cy,e.outerRadius,m),p],key:"line"});return u.createElement(UM,{zIndex:sE.label,key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(t)},u.createElement(Wm,null,n&&((e,t)=>{if(u.isValidElement(e))return u.cloneElement(e,t);if("function"==typeof e)return e(t);var r=Pm("recharts-pie-label-line","boolean"!=typeof e?e.className:"");return u.createElement(Zj,k$({},t,{type:"linear",className:r}))})(n,x),((e,t,r)=>{if(u.isValidElement(e))return u.cloneElement(e,t);var s=r;if("function"==typeof e&&(s=e(t),u.isValidElement(s)))return s;var a,n=Pm("recharts-pie-label-text",(a=e)&&"object"==typeof a&&"className"in a&&"string"==typeof a.className?a.className:"");return u.createElement(oI,k$({},t,{alignmentBaseline:"middle",className:n}),s)})(a,h,Bv(e,i))))});return u.createElement(Wm,{className:"recharts-pie-labels"},m)}function T$(e){var{sectors:t,props:r,showLabels:s}=e,{label:a}=r;return"object"==typeof a&&null!=a&&"position"in a?u.createElement(VI,{label:a}):u.createElement(P$,{sectors:t,props:r,showLabels:s})}function A$(e){var{sectors:t,activeShape:r,inactiveShape:s,allOtherPieProps:a}=e,n=Yf(ZA),{onMouseEnter:i,onClick:l,onMouseLeave:o}=a,c=j$(a,b$),d=XR(i,a.dataKey),m=e$(o),p=t$(l,a.dataKey);return null==t||0===t.length?null:u.createElement(u.Fragment,null,t.map((e,i)=>{if(0===(null==e?void 0:e.startAngle)&&0===(null==e?void 0:e.endAngle)&&1!==t.length)return null;var l=r&&String(i)===n,o=l?r:n?s:null,h=N$(N$({},e),{},{stroke:e.stroke,tabIndex:-1,[dy]:i,[uy]:a.dataKey});return u.createElement(Wm,k$({key:"sector-".concat(null==e?void 0:e.startAngle,"-").concat(null==e?void 0:e.endAngle,"-").concat(e.midAngle,"-").concat(i),tabIndex:-1,className:"recharts-pie-sector"},qh(c,e,i),{onMouseEnter:d(e,i),onMouseLeave:m(e,i),onClick:p(e,i)}),u.createElement(ZR,k$({option:o,isActive:l,shapeType:"sector"},h)))}))}function M$(e){var{showLabels:t,sectors:r,children:s}=e,a=u.useMemo(()=>t&&r?r.map(e=>({value:e.value,payload:e.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:e.cx,cy:e.cy,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clockWise:!1},fill:e.fill})):[],[r,t]);return u.createElement(WI,{value:t?a:void 0},s)}function D$(e){var{props:t,previousSectorsRef:r}=e,{sectors:s,isAnimationActive:a,animationBegin:n,animationDuration:i,animationEasing:l,activeShape:o,inactiveShape:c,onAnimationStart:d,onAnimationEnd:m}=t,p=Tw(t,"recharts-pie-"),h=r.current,[x,f]=u.useState(!1),g=u.useCallback(()=>{"function"==typeof m&&m(),f(!1)},[m]),b=u.useCallback(()=>{"function"==typeof d&&d(),f(!0)},[d]);return u.createElement(M$,{showLabels:!x,sectors:s},u.createElement(Pw,{animationId:p,begin:n,duration:i,isActive:a,easing:l,onAnimationStart:b,onAnimationEnd:g,key:p},e=>{var a=[],n=s&&s[0],i=null==n?void 0:n.startAngle;return null==s||s.forEach((t,r)=>{var s=h&&h[r],n=r>0?gh(t,"paddingAngle",0):0;if(s){var l=Ch(s.endAngle-s.startAngle,t.endAngle-t.startAngle,e),o=N$(N$({},t),{},{startAngle:i+n,endAngle:i+l+n});a.push(o),i=o.endAngle}else{var{endAngle:c,startAngle:d}=t,u=Ch(0,c-d,e),m=N$(N$({},t),{},{startAngle:i+n,endAngle:i+u+n});a.push(m),i=m.endAngle}}),r.current=a,u.createElement(Wm,null,u.createElement(A$,{sectors:a,activeShape:o,inactiveShape:c,allOtherPieProps:t}))}),u.createElement(T$,{showLabels:!x,sectors:s,props:t}),t.children)}var I$={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Fj,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:sE.area};function R$(e){var{id:t}=e,r=j$(e,v$),{hide:s,className:a,rootTabIndex:n}=e,i=u.useMemo(()=>PR(e.children,SD),[e.children]),l=Yf(e=>wR(e,t,i)),o=u.useRef(null),c=Pm("recharts-pie",a);return s||null==l?(o.current=null,u.createElement(Wm,{tabIndex:n,className:c})):u.createElement(UM,{zIndex:e.zIndex},u.createElement(r$,{fn:C$,args:N$(N$({},e),{},{sectors:l})}),u.createElement(Wm,{tabIndex:n,className:c},u.createElement(D$,{props:N$(N$({},r),{},{sectors:l}),previousSectorsRef:o})))}function $$(e){var t=Vh(e,I$),{id:r}=t,s=j$(t,y$),a=Rm(s);return u.createElement(o$,{id:r,type:"pie"},e=>u.createElement(u.Fragment,null,u.createElement(g$,{type:"pie",id:e,data:s.data,dataKey:s.dataKey,hide:s.hide,angleAxisId:0,radiusAxisId:0,name:s.name,nameKey:s.nameKey,tooltipType:s.tooltipType,legendType:s.legendType,fill:s.fill,cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,paddingAngle:s.paddingAngle,minAngle:s.minAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius,cornerRadius:s.cornerRadius,presentationProps:a,maxRadius:t.maxRadius}),u.createElement(S$,k$({},s,{id:e})),u.createElement(R$,k$({},s,{id:e}))))}$$.displayName="Pie";var L$=["points"];function F$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function z$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F$(Object(r),!0).forEach(function(t){U$(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function U$(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B$(){return B$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},B$.apply(null,arguments)}function q$(e){var{option:t,dotProps:r,className:s}=e;if(u.isValidElement(t))return u.cloneElement(t,r);if("function"==typeof t)return t(r);var a=Pm(s,"boolean"!=typeof t?t.className:""),n=null!=r?r:{},{points:i}=n,l=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(n,L$);return u.createElement(GI,B$({},l,{className:a}))}function W$(e){var{points:t,dot:r,className:s,dotClassName:a,dataKey:n,baseProps:i,needClip:l,clipPathId:o,zIndex:c=sE.scatter}=e;if(!function(e,t){return null!=e&&(!!t||1===e.length)}(t,r))return null;var d,m=DR(r),p=null==(d=r)?null:u.isValidElement(d)?Lm(d.props):"object"!=typeof d||Array.isArray(d)?null:Lm(d),h=t.map((e,s)=>{var l,o,c=z$(z$(z$({r:3},i),p),{},{index:s,cx:null!==(l=e.x)&&void 0!==l?l:void 0,cy:null!==(o=e.y)&&void 0!==o?o:void 0,dataKey:n,value:e.value,payload:e.payload,points:t});return u.createElement(q$,{key:"dot-".concat(s),option:r,dotProps:c,className:a})}),x={};return l&&null!=o&&(x.clipPath="url(#clipPath-".concat(m?"":"dots-").concat(o,")")),u.createElement(UM,{zIndex:c},u.createElement(Wm,B$({className:s},x),h))}function K$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function V$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K$(Object(r),!0).forEach(function(t){H$(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function H$(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var G$=Zb({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Ub()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Ub()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Ub()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Ub()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Ub()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Ub()},updateYAxisWidth(e,t){var{id:r,width:s}=t.payload,a=e.yAxis[r];if(a){var n=a.widthHistory||[];if(3===n.length&&n[0]===n[2]&&s===n[1]&&s!==a.width&&Math.abs(s-n[0])<=1)return;var i=[...n,s].slice(-3);e.yAxis[r]=V$(V$({},e.yAxis[r]),{},{width:s,widthHistory:i})}}}}),{addXAxis:Y$,removeXAxis:J$,addYAxis:Z$,removeYAxis:Q$,addZAxis:X$,removeZAxis:eL,updateYAxisWidth:tL}=G$.actions,rL=G$.reducer,sL=sg([yy],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),aL=sg([sL,ay,ny],(e,t,r)=>{if(e&&null!=t&&null!=r)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),nL=()=>Yf(aL);function iL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function lL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iL(Object(r),!0).forEach(function(t){oL(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function oL(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var cL=e=>{var{point:t,childIndex:r,mainColor:s,activeDot:a,dataKey:n}=e;if(!1===a||null==t.x||null==t.y)return null;var i,l=lL(lL(lL({},{index:r,dataKey:n,cx:t.x,cy:t.y,r:4,fill:null!=s?s:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value}),$m(a)),Bh(a));return i=u.isValidElement(a)?u.cloneElement(a,l):"function"==typeof a?a(l):u.createElement(GI,l),u.createElement(Wm,{className:"recharts-active-dot"},i)};function dL(e){var{points:t,mainColor:r,activeDot:s,itemDataKey:a,zIndex:n=sE.activeDot}=e,i=Yf(ZA),l=Yf(nM);if(null==t||null==l)return null;var o=t.find(e=>l.includes(e.payload));return Eh(o)?null:u.createElement(UM,{zIndex:n},u.createElement(cL,{point:o,childIndex:Number(i),mainColor:r,dataKey:a,activeDot:s}))}var uL=["x","y"];function mL(){return mL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},mL.apply(null,arguments)}function pL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function hL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pL(Object(r),!0).forEach(function(t){xL(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function xL(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fL(e,t){var{x:r,y:s}=e,a=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,uL),n="".concat(r),i=parseInt(n,10),l="".concat(s),o=parseInt(l,10),c="".concat(t.height||a.height),d=parseInt(c,10),u="".concat(t.width||a.width),m=parseInt(u,10);return hL(hL(hL(hL(hL({},t),a),i?{x:i}:{}),o?{y:o}:{}),{},{height:d,width:m,name:t.name,radius:t.radius})}function gL(e){return u.createElement(ZR,mL({shapeType:"rectangle",propTransformer:fL,activeClassName:"recharts-active-bar"},e))}var bL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(r,s)=>{if(jh(e))return e;var a=jh(r)||Eh(r);return a?e(r,s):(a||function(){throw new Error("Invariant failed")}(),t)}},vL=Zb({name:"errorBars",initialState:{},reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:s}=t.payload;e[r]||(e[r]=[]),e[r].push(s)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:s,next:a}=t.payload;e[r]&&(e[r]=e[r].map(e=>e.dataKey===s.dataKey&&e.direction===s.direction?a:e))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:s}=t.payload;e[r]&&(e[r]=e[r].filter(e=>e.dataKey!==s.dataKey||e.direction!==s.direction))}}}),{addErrorBar:yL,replaceErrorBar:jL,removeErrorBar:wL}=vL.actions,NL=vL.reducer,_L=["children"];var kL={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},SL=u.createContext(kL);function CL(e){var{children:t}=e,r=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,_L);return u.createElement(SL.Provider,{value:r},t)}function OL(e,t){var r,s,a=Yf(t=>BE(t,e)),n=Yf(e=>KE(e,t)),i=null!==(r=null==a?void 0:a.allowDataOverflow)&&void 0!==r?r:zE.allowDataOverflow,l=null!==(s=null==n?void 0:n.allowDataOverflow)&&void 0!==s?s:qE.allowDataOverflow;return{needClip:i||l,needClipX:i,needClipY:l}}function EL(e){var{xAxisId:t,yAxisId:r,clipPathId:s}=e,a=nL(),{needClipX:n,needClipY:i,needClip:l}=OL(t,r);if(!l||!a)return null;var{x:o,y:c,width:d,height:m}=a;return u.createElement("clipPath",{id:"clipPath-".concat(s)},u.createElement("rect",{x:n?o:o-d/2,y:i?c:c-m/2,width:n?d:2*d,height:i?m:2*m}))}var PL=["onMouseEnter","onMouseLeave","onClick"],TL=["value","background","tooltipPosition"],AL=["id"],ML=["onMouseEnter","onClick","onMouseLeave"];function DL(){return DL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},DL.apply(null,arguments)}function IL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function RL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?IL(Object(r),!0).forEach(function(t){$L(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $L(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LL(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var FL=e=>{var{dataKey:t,name:r,fill:s,legendType:a,hide:n}=e;return[{inactive:n,dataKey:t,type:a,color:s,value:sy(r,t),payload:e}]};function zL(e){var{dataKey:t,stroke:r,strokeWidth:s,fill:a,name:n,hide:i,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:s,fill:a,dataKey:t,nameKey:void 0,name:sy(n,t),hide:i,type:e.tooltipType,color:e.fill,unit:l}}}function UL(e){var t=Yf(ZA),{data:r,dataKey:s,background:a,allOtherBarProps:n}=e,{onMouseEnter:i,onMouseLeave:l,onClick:o}=n,c=LL(n,PL),d=XR(i,s),m=e$(l),p=t$(o,s);if(!a||null==r)return null;var h,x,f=$m(a);return u.createElement(UM,{zIndex:(h=a,x=sE.barBackground,h&&"object"==typeof h&&"zIndex"in h&&"number"==typeof h.zIndex&&Uy(h.zIndex)?h.zIndex:x)},r.map((e,r)=>{var{value:n,background:i,tooltipPosition:l}=e,o=LL(e,TL);if(!i)return null;var h=d(e,r),x=m(e,r),g=p(e,r),b=RL(RL(RL(RL(RL({option:a,isActive:String(r)===t},o),{},{fill:"#eee"},i),f),qh(c,e,r)),{},{onMouseEnter:h,onMouseLeave:x,onClick:g,dataKey:s,index:r,className:"recharts-bar-background-rectangle"});return u.createElement(gL,DL({key:"background-bar-".concat(r)},b))}))}function BL(e){var{showLabels:t,children:r,rects:s}=e,a=null==s?void 0:s.map(e=>{var t={x:e.x,y:e.y,width:e.width,lowerWidth:e.width,upperWidth:e.width,height:e.height};return RL(RL({},t),{},{value:e.value,payload:e.payload,parentViewBox:e.parentViewBox,viewBox:t,fill:e.fill})});return u.createElement(BI,{value:t?a:void 0},r)}function qL(e){var{shape:t,activeBar:r,baseProps:s,entry:a,index:n,dataKey:i}=e,l=Yf(ZA),o=Yf(XA),c=r&&String(n)===l&&(null==o||i===o),d=c?r:t;return c?u.createElement(UM,{zIndex:sE.activeBar},u.createElement(gL,DL({},s,{name:String(s.name)},a,{isActive:c,option:d,index:n,dataKey:i}))):u.createElement(gL,DL({},s,{name:String(s.name)},a,{isActive:c,option:d,index:n,dataKey:i}))}function WL(e){var{shape:t,baseProps:r,entry:s,index:a,dataKey:n}=e;return u.createElement(gL,DL({},r,{name:String(r.name)},s,{isActive:!1,option:t,index:a,dataKey:n}))}function KL(e){var t,{data:r,props:s}=e,a=null!==(t=Rm(s))&&void 0!==t?t:{},{id:n}=a,i=LL(a,AL),{shape:l,dataKey:o,activeBar:c}=s,{onMouseEnter:d,onClick:m,onMouseLeave:p}=s,h=LL(s,ML),x=XR(d,o),f=e$(p),g=t$(m,o);return r?u.createElement(u.Fragment,null,r.map((e,t)=>u.createElement(Wm,DL({key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value,"-").concat(t),className:"recharts-bar-rectangle"},qh(h,e,t),{onMouseEnter:x(e,t),onMouseLeave:f(e,t),onClick:g(e,t)}),c?u.createElement(qL,{shape:l,activeBar:c,baseProps:i,entry:e,index:t,dataKey:o}):u.createElement(WL,{shape:l,baseProps:i,entry:e,index:t,dataKey:o})))):null}function VL(e){var{props:t,previousRectanglesRef:r}=e,{data:s,layout:a,isAnimationActive:n,animationBegin:i,animationDuration:l,animationEasing:o,onAnimationEnd:c,onAnimationStart:d}=t,m=r.current,p=Tw(t,"recharts-bar-"),[h,x]=u.useState(!1),f=!h,g=u.useCallback(()=>{"function"==typeof c&&c(),x(!1)},[c]),b=u.useCallback(()=>{"function"==typeof d&&d(),x(!0)},[d]);return u.createElement(BL,{showLabels:f,rects:s},u.createElement(Pw,{animationId:p,begin:i,duration:l,isActive:n,easing:o,onAnimationEnd:g,onAnimationStart:b,key:p},e=>{var n=1===e?s:null==s?void 0:s.map((t,r)=>{var s=m&&m[r];if(s)return RL(RL({},t),{},{x:Ch(s.x,t.x,e),y:Ch(s.y,t.y,e),width:Ch(s.width,t.width,e),height:Ch(s.height,t.height,e)});if("horizontal"===a){var n=Ch(0,t.height,e),i=Ch(t.stackedBarStart,t.y,e);return RL(RL({},t),{},{y:i,height:n})}var l=Ch(0,t.width,e),o=Ch(t.stackedBarStart,t.x,e);return RL(RL({},t),{},{width:l,x:o})});return e>0&&(r.current=null!=n?n:null),null==n?null:u.createElement(Wm,null,u.createElement(KL,{props:t,data:n}))}),u.createElement(VI,{label:t.label}),t.children)}function HL(e){var t=u.useRef(null);return u.createElement(VL,{previousRectanglesRef:t,props:e})}var GL=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Bv(e,t)}};class YL extends u.PureComponent{render(){var{hide:e,data:t,dataKey:r,className:s,xAxisId:a,yAxisId:n,needClip:i,background:l,id:o}=this.props;if(e||null==t)return null;var c=Pm("recharts-bar",s),d=o;return u.createElement(Wm,{className:c,id:o},i&&u.createElement("defs",null,u.createElement(EL,{clipPathId:d,xAxisId:a,yAxisId:n})),u.createElement(Wm,{className:"recharts-bar-rectangles",clipPath:i?"url(#clipPath-".concat(d,")"):void 0},u.createElement(UL,{data:t,dataKey:r,background:l,allOtherBarProps:this.props}),u.createElement(HL,this.props)))}}var JL={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Fj,legendType:"rect",minPointSize:0,xAxisId:0,yAxisId:0,zIndex:sE.bar};function ZL(e){var t,{xAxisId:r,yAxisId:s,hide:a,legendType:n,minPointSize:i,activeBar:l,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:m}=e,{needClip:p}=OL(r,s),h=nj(),x=_y(),f=PR(e.children,SD),g=Yf(t=>fF(t,r,s,x,e.id,f));if("vertical"!==h&&"horizontal"!==h)return null;var b=null==g?void 0:g[0];return t=null==b||null==b.height||null==b.width?0:"vertical"===h?b.height/2:b.width/2,u.createElement(CL,{xAxisId:r,yAxisId:s,data:g,dataPointFormatter:GL,errorBarOffset:t},u.createElement(YL,DL({},e,{layout:h,needClip:p,data:g,xAxisId:r,yAxisId:s,hide:a,legendType:n,minPointSize:i,activeBar:l,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:m})))}function QL(e){var{layout:t,barSettings:{dataKey:r,minPointSize:s},pos:a,bandSize:n,xAxis:i,yAxis:l,xAxisTicks:o,yAxisTicks:c,stackedData:d,displayedData:u,offset:m,cells:p,parentViewBox:h,dataStartIndex:x}=e,f="horizontal"===t?l:i,g=d?f.scale.domain():null,b=(e=>{var{numericAxis:t}=e,r=t.scale.domain();if("number"===t.type){var s=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return s<=0&&a>=0?0:a<0?a:s}return r[0]})({numericAxis:f}),v=f.scale(b);return u.map((e,u)=>{var f,y,j,w,N,_;d?f=((e,t)=>{if(!t||2!==t.length||!jh(t[0])||!jh(t[1]))return e;var r=Math.min(t[0],t[1]),s=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!jh(e[0])||e[0]<r)&&(a[0]=r),(!jh(e[1])||e[1]>s)&&(a[1]=s),a[0]>s&&(a[0]=s),a[1]<r&&(a[1]=r),a})(d[u+x],g):(f=Bv(e,r),Array.isArray(f)||(f=[b,f]));var k=bL(s,0)(f[1],u);if("horizontal"===t){var S,[C,O]=[l.scale(f[0]),l.scale(f[1])];y=Zv({axis:i,ticks:o,bandSize:n,offset:a.offset,entry:e,index:u}),j=null!==(S=null!=O?O:C)&&void 0!==S?S:void 0,w=a.size;var E=C-O;if(N=vh(E)?0:E,_={x:y,y:m.top,width:w,height:m.height},Math.abs(k)>0&&Math.abs(N)<Math.abs(k)){var P=bh(N||k)*(Math.abs(k)-Math.abs(N));j-=P,N+=P}}else{var[T,A]=[i.scale(f[0]),i.scale(f[1])];if(y=T,j=Zv({axis:l,ticks:c,bandSize:n,offset:a.offset,entry:e,index:u}),w=A-T,N=a.size,_={x:m.left,y:j,width:m.width,height:N},Math.abs(k)>0&&Math.abs(w)<Math.abs(k))w+=bh(w||k)*(Math.abs(k)-Math.abs(w))}return null==y||null==j||null==w||null==N?null:RL(RL({},e),{},{stackedBarStart:v,x:y,y:j,width:w,height:N,value:d?f:f[1],payload:e,background:_,tooltipPosition:{x:y+w/2,y:j+N/2},parentViewBox:h},p&&p[u]&&p[u].props)}).filter(Boolean)}function XL(e){var t=Vh(e,JL),r=_y();return u.createElement(o$,{id:t.id,type:"bar"},e=>u.createElement(u.Fragment,null,u.createElement(s$,{legendPayload:FL(t)}),u.createElement(r$,{fn:zL,args:t}),u.createElement(f$,{type:"bar",id:e,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:Yv(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),u.createElement(UM,{zIndex:t.zIndex},u.createElement(ZL,DL({},t,{id:e})))))}var eF=u.memo(XL);function tF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function rF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tF(Object(r),!0).forEach(function(t){sF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function sF(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}eF.displayName="Bar";var aF=sg([QE,(e,t,r,s,a)=>a],(e,t)=>e.filter(e=>"bar"===e.type).find(e=>e.id===t)),nF=sg([aF],e=>null==e?void 0:e.maxBarSize),iF=(e,t,r)=>{var s=null!=r?r:e;if(!Eh(s))return kh(s,t,0)},lF=sg([aj,QE,(e,t)=>t,(e,t,r)=>r,(e,t,r,s)=>s],(e,t,r,s,a)=>t.filter(t=>"horizontal"===e?t.xAxisId===r:t.yAxisId===s).filter(e=>e.isPanorama===a).filter(e=>!1===e.hide).filter(e=>"bar"===e.type)),oF=sg([lF,e=>e.rootProps.barSize,(e,t,r)=>"horizontal"===aj(e)?_T(e,"xAxis",t):_T(e,"yAxis",r)],(e,t,r)=>{var s=e.filter(TE),a=e.filter(e=>null==e.stackId),n=s.reduce((e,t)=>(e[t.stackId]||(e[t.stackId]=[]),e[t.stackId].push(t),e),{});return[...Object.entries(n).map(e=>{var[s,a]=e;return{stackId:s,dataKeys:a.map(e=>e.dataKey),barSize:iF(t,r,a[0].barSize)}}),...a.map(e=>({stackId:void 0,dataKeys:[e.dataKey].filter(e=>null!=e),barSize:iF(t,r,e.barSize)}))]}),cF=(e,t,r,s)=>{var a,n;return"horizontal"===aj(e)?(a=AT(e,"xAxis",t,s),n=TT(e,"xAxis",t,s)):(a=AT(e,"yAxis",r,s),n=TT(e,"yAxis",r,s)),ty(a,n)};var dF,uF,mF,pF=sg([oF,JO,e=>e.rootProps.barGap,ZO,(e,t,r,s,a)=>{var n,i,l=aF(e,t,r,s,a);if(null!=l){var o,c,d=aj(e),u=JO(e),{maxBarSize:m}=l,p=Eh(m)?u:m;return"horizontal"===d?(o=AT(e,"xAxis",t,s),c=TT(e,"xAxis",t,s)):(o=AT(e,"yAxis",r,s),c=TT(e,"yAxis",r,s)),null!==(n=null!==(i=ty(o,c,!0))&&void 0!==i?i:p)&&void 0!==n?n:0}},cF,nF],(e,t,r,s,a,n,i)=>{var l=Eh(i)?t:i,o=function(e,t,r,s,a){var n=s.length;if(!(n<1)){var i,l=kh(e,r,0,!0),o=[];if(Uy(s[0].barSize)){var c=!1,d=r/n,u=s.reduce((e,t)=>e+(t.barSize||0),0);(u+=(n-1)*l)>=r&&(u-=(n-1)*l,l=0),u>=r&&d>0&&(c=!0,u=n*(d*=.9));var m={offset:((r-u)/2|0)-l,size:0};i=s.reduce((e,t)=>{var r,s=[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:m.offset+m.size+l,size:c?d:null!==(r=t.barSize)&&void 0!==r?r:0}}];return m=s[s.length-1].position,s},o)}else{var p=kh(t,r,0,!0);r-2*p-(n-1)*l<=0&&(l=0);var h=(r-2*p-(n-1)*l)/n;h>1&&(h>>=0);var x=Uy(a)?Math.min(h,a):h;i=s.reduce((e,t,r)=>[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:p+(h+l)*r+(h-x)/2,size:x}}],o)}return i}}(r,s,a!==n?a:n,e,l);return a!==n&&null!=o&&(o=o.map(e=>rF(rF({},e),{},{position:rF(rF({},e.position),{},{offset:e.position.offset-a/2})}))),o}),hF=sg([pF,aF],(e,t)=>{if(null!=e&&null!=t){var r=e.find(e=>e.stackId===t.stackId&&null!=t.dataKey&&e.dataKeys.includes(t.dataKey));if(null!=r)return r.position}}),xF=sg([(e,t,r,s)=>"horizontal"===aj(e)?vP(e,"yAxis",r,s):vP(e,"xAxis",t,s),aF],(e,t)=>{var r=EE(t);if(e&&null!=r&&null!=t){var{stackId:s}=t;if(null!=s){var a=e[s];if(a){var{stackedData:n}=a;if(n)return n.find(e=>e.key===r)}}}}),fF=sg([yy,wy,(e,t,r,s)=>AT(e,"xAxis",t,s),(e,t,r,s)=>AT(e,"yAxis",r,s),(e,t,r,s)=>TT(e,"xAxis",t,s),(e,t,r,s)=>TT(e,"yAxis",r,s),hF,aj,QC,cF,xF,aF,(e,t,r,s,a,n)=>n],(e,t,r,s,a,n,i,l,o,c,d,u,m)=>{var{chartData:p,dataStartIndex:h,dataEndIndex:x}=o;if(null!=u&&null!=i&&null!=t&&("horizontal"===l||"vertical"===l)&&null!=r&&null!=s&&null!=a&&null!=n&&null!=c){var f,{data:g}=u;if(null!=(f=null!=g&&g.length>0?g:null==p?void 0:p.slice(h,x+1)))return QL({layout:l,barSettings:u,pos:i,parentViewBox:t,bandSize:c,xAxis:r,yAxis:s,xAxisTicks:a,yAxisTicks:n,stackedData:d,displayedData:f,offset:e,cells:m,dataStartIndex:h})}}),gF=e=>{var{chartData:t}=e,r=Kf(),s=_y();return u.useEffect(()=>s?()=>{}:(r(oD(t)),()=>{r(oD(void 0))}),[t,r,s]),null},bF={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},vF=Zb({name:"brush",initialState:bF,reducers:{setBrushSettings:(e,t)=>null==t.payload?bF:t.payload}}),{setBrushSettings:yF}=vF.actions,jF=vF.reducer;class wF{static create(e){return new wF(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s;case"end":var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}if(t){var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+n}return this.scale(e)}}isInRange(e){var t=this.range(),r=t[0],s=t[t.length-1];return r<=s?e>=r&&e<=s:e>=s&&e<=r}}dF=wF,mF=1e-4,(uF=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(uF="EPS"))in dF?Object.defineProperty(dF,uF,{value:mF,enumerable:!0,configurable:!0,writable:!0}):dF[uF]=mF;var NF=Zb({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Cb(e).dots.findIndex(e=>e===t.payload);-1!==r&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Cb(e).areas.findIndex(e=>e===t.payload);-1!==r&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Cb(e).lines.findIndex(e=>e===t.payload);-1!==r&&e.lines.splice(r,1)}}}),{addDot:_F,removeDot:kF,addArea:SF,removeArea:CF,addLine:OF,removeLine:EF}=NF.actions,PF=NF.reducer,TF=u.createContext(void 0),AF=e=>{var{children:t}=e,[r]=u.useState("".concat(_h("recharts"),"-clip")),s=nL();if(null==s)return null;var{x:a,y:n,width:i,height:l}=s;return u.createElement(TF.Provider,{value:r},u.createElement("defs",null,u.createElement("clipPath",{id:r},u.createElement("rect",{x:a,y:n,height:l,width:i}))),t)};function MF(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function DF(e,t){if(t<1)return[];if(1===t)return e;for(var r=[],s=0;s<e.length;s+=t)r.push(e[s]);return r}function IF(e,t,r){return function(e){var{width:t,height:r}=e,s=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=s*Math.PI/180,n=Math.atan(r/t),i=a>n&&a<Math.PI-n?r/Math.sin(a):t/Math.cos(a);return Math.abs(i)}({width:e.width+t.width,height:e.height+t.height},r)}function RF(e,t,r,s,a){if(e*t<e*s||e*t>e*a)return!1;var n=r();return e*(t-e*n/2-s)>=0&&e*(t+e*n/2-a)<=0}function $F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function LF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$F(Object(r),!0).forEach(function(t){FF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$F(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function FF(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zF(e,t,r){var s,{tick:a,ticks:n,viewBox:i,minTickGap:l,orientation:o,interval:c,tickFormatter:d,unit:u,angle:m}=e;if(!n||!n.length||!a)return[];if(jh(c)||Fj)return null!==(s=function(e,t){return DF(e,t+1)}(n,jh(c)?c:0))&&void 0!==s?s:[];var p=[],h="top"===o||"bottom"===o?"width":"height",x=u&&"width"===h?ID(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},f=(e,s)=>{var a="function"==typeof d?d(e.value,s):e.value;return"width"===h?IF(ID(a,{fontSize:t,letterSpacing:r}),x,m):ID(a,{fontSize:t,letterSpacing:r})[h]},g=n.length>=2?bh(n[1].coordinate-n[0].coordinate):1,b=function(e,t,r){var s="width"===r,{x:a,y:n,width:i,height:l}=e;return 1===t?{start:s?a:n,end:s?a+i:n+l}:{start:s?a+i:n+l,end:s?a:n}}(i,g,h);return"equidistantPreserveStart"===c?function(e,t,r,s,a){for(var n,i=(s||[]).slice(),{start:l,end:o}=t,c=0,d=1,u=l,m=function(){var t=null==s?void 0:s[c];if(void 0===t)return{v:DF(s,d)};var n,i=c,m=()=>(void 0===n&&(n=r(t,i)),n),p=t.coordinate,h=0===c||RF(e,p,m,u,o);h||(c=0,u=l,d+=1),h&&(u=p+e*(m()/2+a),c+=d)};d<=i.length;)if(n=m())return n.v;return[]}(g,b,f,n,l):(p="preserveStart"===c||"preserveStartEnd"===c?function(e,t,r,s,a,n){var i=(s||[]).slice(),l=i.length,{start:o,end:c}=t;if(n){var d=s[l-1],u=r(d,l-1),m=e*(d.coordinate+e*u/2-c);i[l-1]=d=LF(LF({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate}),null!=d.tickCoord&&RF(e,d.tickCoord,()=>u,o,c)&&(c=d.tickCoord-e*(u/2+a),i[l-1]=LF(LF({},d),{},{isShow:!0}))}for(var p=n?l-1:l,h=function(t){var s,n=i[t],l=()=>(void 0===s&&(s=r(n,t)),s);if(0===t){var d=e*(n.coordinate-e*l()/2-o);i[t]=n=LF(LF({},n),{},{tickCoord:d<0?n.coordinate-d*e:n.coordinate})}else i[t]=n=LF(LF({},n),{},{tickCoord:n.coordinate});null!=n.tickCoord&&RF(e,n.tickCoord,l,o,c)&&(o=n.tickCoord+e*(l()/2+a),i[t]=LF(LF({},n),{},{isShow:!0}))},x=0;x<p;x++)h(x);return i}(g,b,f,n,l,"preserveStartEnd"===c):function(e,t,r,s,a){for(var n=(s||[]).slice(),i=n.length,{start:l}=t,{end:o}=t,c=function(t){var s,c=n[t],d=()=>(void 0===s&&(s=r(c,t)),s);if(t===i-1){var u=e*(c.coordinate+e*d()/2-o);n[t]=c=LF(LF({},c),{},{tickCoord:u>0?c.coordinate-u*e:c.coordinate})}else n[t]=c=LF(LF({},c),{},{tickCoord:c.coordinate});null!=c.tickCoord&&RF(e,c.tickCoord,d,l,o)&&(o=c.tickCoord-e*(d()/2+a),n[t]=LF(LF({},c),{},{isShow:!0}))},d=i-1;d>=0;d--)c(d);return n}(g,b,f,n,l),p.filter(e=>e.isShow))}var UF=["axisLine","width","height","className","hide","ticks","axisType"],BF=["viewBox"],qF=["viewBox"];function WF(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function KF(){return KF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},KF.apply(null,arguments)}function VF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function HF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?VF(Object(r),!0).forEach(function(t){GF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function GF(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var YF={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:sE.axis};function JF(e){var{x:t,y:r,width:s,height:a,orientation:n,mirror:i,axisLine:l,otherSvgProps:o}=e;if(!l)return null;var c=HF(HF(HF({},o),Rm(l)),{},{fill:"none"});if("top"===n||"bottom"===n){var d=+("top"===n&&!i||"bottom"===n&&i);c=HF(HF({},c),{},{x1:t,y1:r+d*a,x2:t+s,y2:r+d*a})}else{var m=+("left"===n&&!i||"right"===n&&i);c=HF(HF({},c),{},{x1:t+m*s,y1:r,x2:t+m*s,y2:r+a})}return u.createElement("line",KF({},c,{className:Pm("recharts-cartesian-axis-line",gh(l,"className"))}))}function ZF(e){var t,{option:r,tickProps:s,value:a}=e,n=Pm(s.className,"recharts-cartesian-axis-tick-value");if(u.isValidElement(r))t=u.cloneElement(r,HF(HF({},s),{},{className:n}));else if("function"==typeof r)t=r(HF(HF({},s),{},{className:n}));else{var i="recharts-cartesian-axis-tick-value";"boolean"!=typeof r&&(i=Pm(i,null==r?void 0:r.className)),t=u.createElement(oI,KF({},s,{className:i}),a)}return t}var QF=u.forwardRef((e,t)=>{var{ticks:r=[],tick:s,tickLine:a,stroke:n,tickFormatter:i,unit:l,padding:o,tickTextProps:c,orientation:d,mirror:m,x:p,y:h,width:x,height:f,tickSize:g,tickMargin:b,fontSize:v,letterSpacing:y,getTicksConfig:j,events:w,axisType:N}=e,_=zF(HF(HF({},j),{},{ticks:r}),v,y),k=function(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}(d,m),S=function(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}(d,m),C=Rm(j),O=$m(s),E={};"object"==typeof a&&(E=a);var P=HF(HF({},C),{},{fill:"none"},E),T=_.map(e=>HF({entry:e},function(e,t,r,s,a,n,i,l,o){var c,d,u,m,p,h,x=l?-1:1,f=e.tickSize||i,g=jh(e.tickCoord)?e.tickCoord:e.coordinate;switch(n){case"top":c=d=e.coordinate,h=(u=(m=r+ +!l*a)-x*f)-x*o,p=g;break;case"left":u=m=e.coordinate,p=(c=(d=t+ +!l*s)-x*f)-x*o,h=g;break;case"right":u=m=e.coordinate,p=(c=(d=t+ +l*s)+x*f)+x*o,h=g;break;default:c=d=e.coordinate,h=(u=(m=r+ +l*a)+x*f)+x*o,p=g}return{line:{x1:c,y1:u,x2:d,y2:m},tick:{x:p,y:h}}}(e,p,h,x,f,d,g,m,b))),A=T.map(e=>{var{entry:t,line:r}=e;return u.createElement(Wm,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},a&&u.createElement("line",KF({},P,r,{className:Pm("recharts-cartesian-axis-tick-line",gh(a,"className"))})))}),M=T.map((e,t)=>{var{entry:r,tick:a}=e,d=HF(HF(HF(HF({textAnchor:k,verticalAnchor:S},C),{},{stroke:"none",fill:n},O),a),{},{index:t,payload:r,visibleTicksCount:_.length,tickFormatter:i,padding:o},c);return u.createElement(Wm,KF({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(r.value,"-").concat(r.coordinate,"-").concat(r.tickCoord)},qh(w,r,t)),s&&u.createElement(ZF,{option:s,tickProps:d,value:"".concat("function"==typeof i?i(r.value,t):r.value).concat(l||"")}))});return u.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(N,"-ticks")},M.length>0&&u.createElement(UM,{zIndex:sE.label},u.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(N,"-tick-labels"),ref:t},M)),A.length>0&&u.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(N,"-tick-lines")},A))}),XF=u.forwardRef((e,t)=>{var{axisLine:r,width:s,height:a,className:n,hide:i,ticks:l,axisType:o}=e,c=WF(e,UF),[d,m]=u.useState(""),[p,h]=u.useState(""),x=u.useRef(null);u.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var t;return(e=>{var{ticks:t,label:r,labelGapWithTick:s=5,tickSize:a=0,tickMargin:n=0}=e,i=0;if(t){Array.from(t).forEach(e=>{if(e){var t=e.getBoundingClientRect();t.width>i&&(i=t.width)}});var l=r?r.getBoundingClientRect().width:0,o=i+(a+n)+l+(r?s:0);return Math.round(o)}return 0})({ticks:x.current,label:null===(t=e.labelRef)||void 0===t?void 0:t.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var f=u.useCallback(e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");x.current=t;var r=t[0];if(r){var s=window.getComputedStyle(r),a=s.fontSize,n=s.letterSpacing;a===d&&n===p||(m(a),h(n))}}},[d,p]);return i||null!=s&&s<=0||null!=a&&a<=0?null:u.createElement(UM,{zIndex:e.zIndex},u.createElement(Wm,{className:Pm("recharts-cartesian-axis",n)},u.createElement(JF,{x:e.x,y:e.y,width:s,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Rm(e)}),u.createElement(QF,{ref:f,axisType:o,events:c,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),u.createElement(xI,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},u.createElement(NI,{label:e.label,labelRef:e.labelRef}),e.children)))}),ez=u.memo(XF,(e,t)=>{var{viewBox:r}=e,s=WF(e,BF),{viewBox:a}=t,n=WF(t,qF);return MF(r,a)&&MF(s,n)}),tz=u.forwardRef((e,t)=>{var r=Vh(e,YF);return u.createElement(ez,KF({},r,{ref:t}))});tz.displayName="CartesianAxis";var rz=["x1","y1","x2","y2","key"],sz=["offset"],az=["xAxisId","yAxisId"],nz=["xAxisId","yAxisId"];function iz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function lz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iz(Object(r),!0).forEach(function(t){oz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function oz(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cz(){return cz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},cz.apply(null,arguments)}function dz(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var uz=e=>{var{fill:t}=e;if(!t||"none"===t)return null;var{fillOpacity:r,x:s,y:a,width:n,height:i,ry:l}=e;return u.createElement("rect",{x:s,y:a,ry:l,width:n,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function mz(e){var t,{option:r,lineItemProps:s}=e;if(u.isValidElement(r))t=u.cloneElement(r,s);else if("function"==typeof r)t=r(s);else{var a,{x1:n,y1:i,x2:l,y2:o,key:c}=s,d=null!==(a=Rm(dz(s,rz)))&&void 0!==a?a:{},{offset:m}=d,p=dz(d,sz);t=u.createElement("line",cz({},p,{x1:n,y1:i,x2:l,y2:o,fill:"none",key:c}))}return t}function pz(e){var{x:t,width:r,horizontal:s=!0,horizontalPoints:a}=e;if(!s||!a||!a.length)return null;var{xAxisId:n,yAxisId:i}=e,l=dz(e,az),o=a.map((e,a)=>{var n=lz(lz({},l),{},{x1:t,y1:e,x2:t+r,y2:e,key:"line-".concat(a),index:a});return u.createElement(mz,{key:"line-".concat(a),option:s,lineItemProps:n})});return u.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function hz(e){var{y:t,height:r,vertical:s=!0,verticalPoints:a}=e;if(!s||!a||!a.length)return null;var{xAxisId:n,yAxisId:i}=e,l=dz(e,nz),o=a.map((e,a)=>{var n=lz(lz({},l),{},{x1:e,y1:t,x2:e,y2:t+r,key:"line-".concat(a),index:a});return u.createElement(mz,{option:s,lineItemProps:n,key:"line-".concat(a)})});return u.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function xz(e){var{horizontalFill:t,fillOpacity:r,x:s,y:a,width:n,height:i,horizontalPoints:l,horizontal:o=!0}=e;if(!o||!t||!t.length||null==l)return null;var c=l.map(e=>Math.round(e+a-a)).sort((e,t)=>e-t);a!==c[0]&&c.unshift(0);var d=c.map((e,l)=>{var o=!c[l+1]?a+i-e:c[l+1]-e;if(o<=0)return null;var d=l%t.length;return u.createElement("rect",{key:"react-".concat(l),y:e,x:s,height:o,width:n,stroke:"none",fill:t[d],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return u.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function fz(e){var{vertical:t=!0,verticalFill:r,fillOpacity:s,x:a,y:n,width:i,height:l,verticalPoints:o}=e;if(!t||!r||!r.length)return null;var c=o.map(e=>Math.round(e+a-a)).sort((e,t)=>e-t);a!==c[0]&&c.unshift(0);var d=c.map((e,t)=>{var o=!c[t+1]?a+i-e:c[t+1]-e;if(o<=0)return null;var d=t%r.length;return u.createElement("rect",{key:"react-".concat(t),x:e,y:n,width:o,height:l,stroke:"none",fill:r[d],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return u.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var gz=(e,t)=>{var{xAxis:r,width:s,height:a,offset:n}=e;return Wv(zF(lz(lz(lz({},YF),r),{},{ticks:Kv(r),viewBox:{x:0,y:0,width:s,height:a}})),n.left,n.left+n.width,t)},bz=(e,t)=>{var{yAxis:r,width:s,height:a,offset:n}=e;return Wv(zF(lz(lz(lz({},YF),r),{},{ticks:Kv(r),viewBox:{x:0,y:0,width:s,height:a}})),n.top,n.top+n.height,t)},vz={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:sE.grid};function yz(e){var t=rj(),r=sj(),s=tj(),a=lz(lz({},Vh(e,vz)),{},{x:jh(e.x)?e.x:s.left,y:jh(e.y)?e.y:s.top,width:jh(e.width)?e.width:s.width,height:jh(e.height)?e.height:s.height}),{xAxisId:n,yAxisId:i,x:l,y:o,width:c,height:d,syncWithTicks:m,horizontalValues:p,verticalValues:h}=a,x=_y(),f=Yf(e=>ET(e,"xAxis",n,x)),g=Yf(e=>ET(e,"yAxis",i,x));if(!(By(c)&&By(d)&&jh(l)&&jh(o)))return null;var b=a.verticalCoordinatesGenerator||gz,v=a.horizontalCoordinatesGenerator||bz,{horizontalPoints:y,verticalPoints:j}=a;if(!(y&&y.length||"function"!=typeof v)){var w=p&&p.length,N=v({yAxis:g?lz(lz({},g),{},{ticks:w?p:g.ticks}):void 0,width:null!=t?t:c,height:null!=r?r:d,offset:s},!!w||m);Dy(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(y=N)}if(!(j&&j.length||"function"!=typeof b)){var _=h&&h.length,k=b({xAxis:f?lz(lz({},f),{},{ticks:_?h:f.ticks}):void 0,width:null!=t?t:c,height:null!=r?r:d,offset:s},!!_||m);Dy(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(j=k)}return u.createElement(UM,{zIndex:a.zIndex},u.createElement("g",{className:"recharts-cartesian-grid"},u.createElement(uz,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),u.createElement(xz,cz({},a,{horizontalPoints:y})),u.createElement(fz,cz({},a,{verticalPoints:j})),u.createElement(pz,cz({},a,{offset:s,horizontalPoints:y,xAxis:f,yAxis:g})),u.createElement(hz,cz({},a,{offset:s,verticalPoints:j,xAxis:f,yAxis:g}))))}yz.displayName="CartesianGrid";var jz=(e,t,r,s)=>AT(e,"xAxis",t,s),wz=(e,t,r,s)=>TT(e,"xAxis",t,s),Nz=(e,t,r,s)=>AT(e,"yAxis",r,s),_z=(e,t,r,s)=>TT(e,"yAxis",r,s),kz=sg([aj,jz,Nz,wz,_z],(e,t,r,s,a)=>qv(e,"xAxis")?ty(t,s,!1):ty(r,a,!1));function Sz(e){return"line"===e.type}var Cz=sg([QE,(e,t,r,s,a)=>a],(e,t)=>e.filter(Sz).find(e=>e.id===t)),Oz=sg([aj,jz,Nz,wz,_z,Cz,kz,QC],(e,t,r,s,a,n,i,l)=>{var{chartData:o,dataStartIndex:c,dataEndIndex:d}=l;if(null!=n&&null!=t&&null!=r&&null!=s&&null!=a&&0!==s.length&&0!==a.length&&null!=i){var u,{dataKey:m,data:p}=n;if(null!=(u=null!=p&&p.length>0?p:null==o?void 0:o.slice(c,d+1)))return function(e){var{layout:t,xAxis:r,yAxis:s,xAxisTicks:a,yAxisTicks:n,dataKey:i,bandSize:l,displayedData:o}=e;return o.map((e,o)=>{var c=Bv(e,i);if("horizontal"===t)return{x:Jv({axis:r,ticks:a,bandSize:l,entry:e,index:o}),y:Eh(c)?null:s.scale(c),value:c,payload:e};var d=Eh(c)?null:r.scale(c),u=Jv({axis:s,ticks:n,bandSize:l,entry:e,index:o});return null==d||null==u?null:{x:d,y:u,value:c,payload:e}}).filter(Boolean)}({layout:e,xAxis:t,yAxis:r,xAxisTicks:s,yAxisTicks:a,dataKey:m,bandSize:i,displayedData:u})}});function Ez(e){var t=$m(e);if(null!=t){var{r,strokeWidth:s}=t,a=Number(r),n=Number(s);return(Number.isNaN(a)||a<0)&&(a=3),(Number.isNaN(n)||n<0)&&(n=2),{r:a,strokeWidth:n}}return{r:3,strokeWidth:2}}var Pz=["id"],Tz=["type","layout","connectNulls","needClip","shape"],Az=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Mz(){return Mz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Mz.apply(null,arguments)}function Dz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function Iz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dz(Object(r),!0).forEach(function(t){Rz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Rz(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $z(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Lz=e=>{var{dataKey:t,name:r,stroke:s,legendType:a,hide:n}=e;return[{inactive:n,dataKey:t,type:a,color:s,value:sy(r,t),payload:e}]};function Fz(e){var{dataKey:t,data:r,stroke:s,strokeWidth:a,fill:n,name:i,hide:l,unit:o}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:s,strokeWidth:a,fill:n,dataKey:t,nameKey:void 0,name:sy(i,t),hide:l,type:e.tooltipType,color:e.stroke,unit:o}}}var zz=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function Uz(e,t){for(var r=e.length%2!=0?[...e,0]:e,s=[],a=0;a<t;++a)s=[...s,...r];return s}function Bz(e){var{clipPathId:t,points:r,props:s}=e,{dot:a,dataKey:n,needClip:i}=s,{id:l}=s,o=Rm($z(s,Pz));return u.createElement(W$,{points:r,dot:a,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:n,baseProps:o,needClip:i,clipPathId:t})}function qz(e){var{showLabels:t,children:r,points:s}=e,a=u.useMemo(()=>null==s?void 0:s.map(e=>{var t,r,s={x:null!==(t=e.x)&&void 0!==t?t:0,y:null!==(r=e.y)&&void 0!==r?r:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Iz(Iz({},s),{},{value:e.value,payload:e.payload,viewBox:s,parentViewBox:void 0,fill:void 0})}),[s]);return u.createElement(BI,{value:t?a:void 0},r)}function Wz(e){var{clipPathId:t,pathRef:r,points:s,strokeDasharray:a,props:n}=e,{type:i,layout:l,connectNulls:o,needClip:c,shape:d}=n,m=Iz(Iz({},Lm($z(n,Tz))),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(t,")"):void 0,points:s,type:i,layout:l,connectNulls:o,strokeDasharray:null!=a?a:n.strokeDasharray});return u.createElement(u.Fragment,null,(null==s?void 0:s.length)>1&&u.createElement(ZR,Mz({shapeType:"curve",option:d},m,{pathRef:r})),u.createElement(Bz,{points:s,clipPathId:t,props:n}))}function Kz(e){var{clipPathId:t,props:r,pathRef:s,previousPointsRef:a,longestAnimatedLengthRef:n}=e,{points:i,strokeDasharray:l,isAnimationActive:o,animationBegin:c,animationDuration:d,animationEasing:m,animateNewValues:p,width:h,height:x,onAnimationEnd:f,onAnimationStart:g}=r,b=a.current,v=Tw(r,"recharts-line-"),[y,j]=u.useState(!1),w=!y,N=u.useCallback(()=>{"function"==typeof f&&f(),j(!1)},[f]),_=u.useCallback(()=>{"function"==typeof g&&g(),j(!0)},[g]),k=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}(s.current),S=n.current;return u.createElement(qz,{points:i,showLabels:w},r.children,u.createElement(Pw,{animationId:v,begin:c,duration:d,isActive:o,easing:m,onAnimationEnd:N,onAnimationStart:_,key:v},e=>{var c,d=Ch(S,k+S,e),m=Math.min(d,k);if(o)if(l){var f="".concat(l).split(/[,\s]+/gim).map(e=>parseFloat(e));c=((e,t,r)=>{var s=r.reduce((e,t)=>e+t);if(!s)return zz(t,e);for(var a=Math.floor(e/s),n=e%s,i=t-e,l=[],o=0,c=0;o<r.length;c+=r[o],++o)if(c+r[o]>n){l=[...r.slice(0,o),n-c];break}var d=l.length%2==0?[0,i]:[i];return[...Uz(r,a),...l,...d].map(e=>"".concat(e,"px")).join(", ")})(m,k,f)}else c=zz(k,m);else c=null==l?void 0:String(l);if(b){var g=b.length/i.length,v=1===e?i:i.map((t,r)=>{var s=Math.floor(r*g);if(b[s]){var a=b[s];return Iz(Iz({},t),{},{x:Ch(a.x,t.x,e),y:Ch(a.y,t.y,e)})}return Iz(Iz({},t),{},p?{x:Ch(2*h,t.x,e),y:Ch(x/2,t.y,e)}:{x:t.x,y:t.y})});return a.current=v,u.createElement(Wz,{props:r,points:v,clipPathId:t,pathRef:s,strokeDasharray:c})}return e>0&&k>0&&(a.current=i,n.current=m),u.createElement(Wz,{props:r,points:i,clipPathId:t,pathRef:s,strokeDasharray:c})}),u.createElement(VI,{label:r.label}))}function Vz(e){var{clipPathId:t,props:r}=e,s=u.useRef(null),a=u.useRef(0),n=u.useRef(null);return u.createElement(Kz,{props:r,clipPathId:t,previousPointsRef:s,longestAnimatedLengthRef:a,pathRef:n})}var Hz=(e,t)=>{var r,s;return{x:null!==(r=e.x)&&void 0!==r?r:void 0,y:null!==(s=e.y)&&void 0!==s?s:void 0,value:e.value,errorVal:Bv(e.payload,t)}};class Gz extends u.Component{render(){var{hide:e,dot:t,points:r,className:s,xAxisId:a,yAxisId:n,top:i,left:l,width:o,height:c,id:d,needClip:m,zIndex:p}=this.props;if(e)return null;var h=Pm("recharts-line",s),x=d,{r:f,strokeWidth:g}=Ez(t),b=DR(t),v=2*f+g;return u.createElement(UM,{zIndex:p},u.createElement(Wm,{className:h},m&&u.createElement("defs",null,u.createElement(EL,{clipPathId:x,xAxisId:a,yAxisId:n}),!b&&u.createElement("clipPath",{id:"clipPath-dots-".concat(x)},u.createElement("rect",{x:l-v/2,y:i-v/2,width:o+v,height:c+v}))),u.createElement(CL,{xAxisId:a,yAxisId:n,data:r,dataPointFormatter:Hz,errorBarOffset:0},u.createElement(Vz,{props:this.props,clipPathId:x}))),u.createElement(dL,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var Yz={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Fj,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:sE.line};function Jz(e){var t=Vh(e,Yz),{activeDot:r,animateNewValues:s,animationBegin:a,animationDuration:n,animationEasing:i,connectNulls:l,dot:o,hide:c,isAnimationActive:d,label:m,legendType:p,xAxisId:h,yAxisId:x,id:f}=t,g=$z(t,Az),{needClip:b}=OL(h,x),v=nL(),y=nj(),j=_y(),w=Yf(e=>Oz(e,h,x,j,f));if("horizontal"!==y&&"vertical"!==y||null==w||null==v)return null;var{height:N,width:_,x:k,y:S}=v;return u.createElement(Gz,Mz({},g,{id:f,connectNulls:l,dot:o,activeDot:r,animateNewValues:s,animationBegin:a,animationDuration:n,animationEasing:i,isAnimationActive:d,hide:c,label:m,legendType:p,xAxisId:h,yAxisId:x,points:w,layout:y,height:N,width:_,left:k,top:S,needClip:b}))}function Zz(e){var t=Vh(e,Yz),r=_y();return u.createElement(o$,{id:t.id,type:"line"},e=>u.createElement(u.Fragment,null,u.createElement(s$,{legendPayload:Lz(t)}),u.createElement(r$,{fn:Fz,args:t}),u.createElement(f$,{type:"line",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),u.createElement(Jz,Mz({},t,{id:e}))))}var Qz=u.memo(Zz);Qz.displayName="Line";var Xz=(e,t,r,s)=>AT(e,"xAxis",t,s),eU=(e,t,r,s)=>TT(e,"xAxis",t,s),tU=(e,t,r,s)=>AT(e,"yAxis",r,s),rU=(e,t,r,s)=>TT(e,"yAxis",r,s),sU=sg([aj,Xz,tU,eU,rU],(e,t,r,s,a)=>qv(e,"xAxis")?ty(t,s,!1):ty(r,a,!1)),aU=sg([QE,(e,t,r,s,a)=>a],(e,t)=>e.filter(e=>"area"===e.type).find(e=>e.id===t)),nU=sg([aj,Xz,tU,eU,rU,(e,t,r,s,a)=>{var n,i=aU(e,t,r,s,a);if(null!=i){var l,o=aj(e);if(null!=(l=qv(o,"xAxis")?vP(e,"yAxis",r,s):vP(e,"xAxis",t,s))){var{stackId:c}=i,d=EE(i);if(null!=c&&null!=d){var u=null===(n=l[c])||void 0===n?void 0:n.stackedData;return null==u?void 0:u.find(e=>e.key===d)}}}},QC,sU,aU,e=>e.rootProps.baseValue],(e,t,r,s,a,n,i,l,o,c)=>{var{chartData:d,dataStartIndex:u,dataEndIndex:m}=i;if(null!=o&&("horizontal"===e||"vertical"===e)&&null!=t&&null!=r&&null!=s&&null!=a&&0!==s.length&&0!==a.length&&null!=l){var p,{data:h}=o;if(null!=(p=h&&h.length>0?h:null==d?void 0:d.slice(u,m+1)))return function(e){var t,{areaSettings:{connectNulls:r,baseValue:s,dataKey:a},stackedData:n,layout:i,chartBaseValue:l,xAxis:o,yAxis:c,displayedData:d,dataStartIndex:u,xAxisTicks:m,yAxisTicks:p,bandSize:h}=e,x=n&&n.length,f=CU(i,l,s,o,c),g="horizontal"===i,b=!1,v=d.map((e,t)=>{var s;x?s=n[u+t]:(s=Bv(e,a),Array.isArray(s)?b=!0:s=[f,s]);var i=null==s[1]||x&&!r&&null==Bv(e,a);return g?{x:Jv({axis:o,ticks:m,bandSize:h,entry:e,index:t}),y:i?null:c.scale(s[1]),value:s,payload:e}:{x:i?null:o.scale(s[1]),y:Jv({axis:c,ticks:p,bandSize:h,entry:e,index:t}),value:s,payload:e}});t=x||b?v.map(e=>{var t=Array.isArray(e.value)?e.value[0]:null;return g?{x:e.x,y:null!=t&&null!=e.y?c.scale(t):null,payload:e.payload}:{x:null!=t?o.scale(t):null,y:e.y,payload:e.payload}}):g?c.scale(f):o.scale(f);return{points:v,baseLine:t,isRange:b}}({layout:e,xAxis:t,yAxis:r,xAxisTicks:s,yAxisTicks:a,dataStartIndex:u,areaSettings:o,stackedData:n,displayedData:p,chartBaseValue:c,bandSize:l})}}),iU=["id"],lU=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function oU(){return oU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},oU.apply(null,arguments)}function cU(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function dU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function uU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dU(Object(r),!0).forEach(function(t){mU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mU(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pU(e,t){return e&&"none"!==e?e:t}var hU=e=>{var{dataKey:t,name:r,stroke:s,fill:a,legendType:n,hide:i}=e;return[{inactive:i,dataKey:t,type:n,color:pU(s,a),value:sy(r,t),payload:e}]};function xU(e){var{dataKey:t,data:r,stroke:s,strokeWidth:a,fill:n,name:i,hide:l,unit:o}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:s,strokeWidth:a,fill:n,dataKey:t,nameKey:void 0,name:sy(i,t),hide:l,type:e.tooltipType,color:pU(s,n),unit:o}}}function fU(e){var{clipPathId:t,points:r,props:s}=e,{needClip:a,dot:n,dataKey:i}=s,l=Rm(s);return u.createElement(W$,{points:r,dot:n,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:i,baseProps:l,needClip:a,clipPathId:t})}function gU(e){var{showLabels:t,children:r,points:s}=e,a=s.map(e=>{var t,r,s={x:null!==(t=e.x)&&void 0!==t?t:0,y:null!==(r=e.y)&&void 0!==r?r:0,width:0,lowerWidth:0,upperWidth:0,height:0};return uU(uU({},s),{},{value:e.value,payload:e.payload,parentViewBox:void 0,viewBox:s,fill:void 0})});return u.createElement(BI,{value:t?a:void 0},r)}function bU(e){var{points:t,baseLine:r,needClip:s,clipPathId:a,props:n}=e,{layout:i,type:l,stroke:o,connectNulls:c,isRange:d}=n,{id:m}=n,p=cU(n,iU),h=Rm(p),x=Lm(p);return u.createElement(u.Fragment,null,(null==t?void 0:t.length)>1&&u.createElement(Wm,{clipPath:s?"url(#clipPath-".concat(a,")"):void 0},u.createElement(Zj,oU({},x,{id:m,points:t,connectNulls:c,type:l,baseLine:r,layout:i,stroke:"none",className:"recharts-area-area"})),"none"!==o&&u.createElement(Zj,oU({},h,{className:"recharts-area-curve",layout:i,type:l,connectNulls:c,fill:"none",points:t})),"none"!==o&&d&&u.createElement(Zj,oU({},h,{className:"recharts-area-curve",layout:i,type:l,connectNulls:c,fill:"none",points:r}))),u.createElement(fU,{points:t,props:p,clipPathId:a}))}function vU(e){var{alpha:t,baseLine:r,points:s,strokeWidth:a}=e,n=s[0].y,i=s[s.length-1].y;if(!Uy(n)||!Uy(i))return null;var l=t*Math.abs(n-i),o=Math.max(...s.map(e=>e.x||0));return jh(r)?o=Math.max(r,o):r&&Array.isArray(r)&&r.length&&(o=Math.max(...r.map(e=>e.x||0),o)),jh(o)?u.createElement("rect",{x:0,y:n<i?n:n-l,width:o+(a?parseInt("".concat(a),10):1),height:Math.floor(l)}):null}function yU(e){var{alpha:t,baseLine:r,points:s,strokeWidth:a}=e,n=s[0].x,i=s[s.length-1].x;if(!Uy(n)||!Uy(i))return null;var l=t*Math.abs(n-i),o=Math.max(...s.map(e=>e.y||0));return jh(r)?o=Math.max(r,o):r&&Array.isArray(r)&&r.length&&(o=Math.max(...r.map(e=>e.y||0),o)),jh(o)?u.createElement("rect",{x:n<i?n:n-l,y:0,width:l,height:Math.floor(o+(a?parseInt("".concat(a),10):1))}):null}function jU(e){var{alpha:t,layout:r,points:s,baseLine:a,strokeWidth:n}=e;return"vertical"===r?u.createElement(vU,{alpha:t,points:s,baseLine:a,strokeWidth:n}):u.createElement(yU,{alpha:t,points:s,baseLine:a,strokeWidth:n})}function wU(e){var{needClip:t,clipPathId:r,props:s,previousPointsRef:a,previousBaselineRef:n}=e,{points:i,baseLine:l,isAnimationActive:o,animationBegin:c,animationDuration:d,animationEasing:m,onAnimationStart:p,onAnimationEnd:h}=s,x=Tw(s,"recharts-area-"),[f,g]=u.useState(!1),b=!f,v=u.useCallback(()=>{"function"==typeof h&&h(),g(!1)},[h]),y=u.useCallback(()=>{"function"==typeof p&&p(),g(!0)},[p]),j=a.current,w=n.current;return u.createElement(gU,{showLabels:b,points:i},s.children,u.createElement(Pw,{animationId:x,begin:c,duration:d,isActive:o,easing:m,onAnimationEnd:v,onAnimationStart:y,key:x},e=>{if(j){var c,d=j.length/i.length,m=1===e?i:i.map((t,r)=>{var s=Math.floor(r*d);if(j[s]){var a=j[s];return uU(uU({},t),{},{x:Ch(a.x,t.x,e),y:Ch(a.y,t.y,e)})}return t});return c=jh(l)?Ch(w,l,e):Eh(l)||vh(l)?Ch(w,0,e):l.map((t,r)=>{var s=Math.floor(r*d);if(Array.isArray(w)&&w[s]){var a=w[s];return uU(uU({},t),{},{x:Ch(a.x,t.x,e),y:Ch(a.y,t.y,e)})}return t}),e>0&&(a.current=m,n.current=c),u.createElement(bU,{points:m,baseLine:c,needClip:t,clipPathId:r,props:s})}return e>0&&(a.current=i,n.current=l),u.createElement(Wm,null,o&&u.createElement("defs",null,u.createElement("clipPath",{id:"animationClipPath-".concat(r)},u.createElement(jU,{alpha:e,points:i,baseLine:l,layout:s.layout,strokeWidth:s.strokeWidth}))),u.createElement(Wm,{clipPath:"url(#animationClipPath-".concat(r,")")},u.createElement(bU,{points:i,baseLine:l,needClip:t,clipPathId:r,props:s})))}),u.createElement(VI,{label:s.label}))}function NU(e){var{needClip:t,clipPathId:r,props:s}=e,a=u.useRef(null),n=u.useRef();return u.createElement(wU,{needClip:t,clipPathId:r,props:s,previousPointsRef:a,previousBaselineRef:n})}class _U extends u.PureComponent{render(){var{hide:e,dot:t,points:r,className:s,top:a,left:n,needClip:i,xAxisId:l,yAxisId:o,width:c,height:d,id:m,baseLine:p,zIndex:h}=this.props;if(e)return null;var x=Pm("recharts-area",s),f=m,{r:g,strokeWidth:b}=Ez(t),v=DR(t),y=2*g+b;return u.createElement(UM,{zIndex:h},u.createElement(Wm,{className:x},i&&u.createElement("defs",null,u.createElement(EL,{clipPathId:f,xAxisId:l,yAxisId:o}),!v&&u.createElement("clipPath",{id:"clipPath-dots-".concat(f)},u.createElement("rect",{x:n-y/2,y:a-y/2,width:c+y,height:d+y}))),u.createElement(NU,{needClip:i,clipPathId:f,props:this.props})),u.createElement(dL,{points:r,mainColor:pU(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(p)&&u.createElement(dL,{points:p,mainColor:pU(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var kU={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!Fj,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0,zIndex:sE.area};function SU(e){var t,r=Vh(e,kU),{activeDot:s,animationBegin:a,animationDuration:n,animationEasing:i,connectNulls:l,dot:o,fill:c,fillOpacity:d,hide:m,isAnimationActive:p,legendType:h,stroke:x,xAxisId:f,yAxisId:g}=r,b=cU(r,lU),v=nj(),y=hM(),{needClip:j}=OL(f,g),w=_y(),{points:N,isRange:_,baseLine:k}=null!==(t=Yf(t=>nU(t,f,g,w,e.id)))&&void 0!==t?t:{},S=nL();if("horizontal"!==v&&"vertical"!==v||null==S)return null;if("AreaChart"!==y&&"ComposedChart"!==y)return null;var{height:C,width:O,x:E,y:P}=S;return N&&N.length?u.createElement(_U,oU({},b,{activeDot:s,animationBegin:a,animationDuration:n,animationEasing:i,baseLine:k,connectNulls:l,dot:o,fill:c,fillOpacity:d,height:C,hide:m,layout:v,isAnimationActive:p,isRange:_,legendType:h,needClip:j,points:N,stroke:x,width:O,left:E,top:P,xAxisId:f,yAxisId:g})):null}var CU=(e,t,r,s,a)=>{var n=null!=r?r:t;if(jh(n))return n;var i="horizontal"===e?a:s,l=i.scale.domain();if("number"===i.type){var o=Math.max(l[0],l[1]),c=Math.min(l[0],l[1]);return"dataMin"===n?c:"dataMax"===n||o<0?o:Math.max(Math.min(l[0],l[1]),0)}return"dataMin"===n?l[0]:"dataMax"===n?l[1]:l[0]};function OU(e){var t=Vh(e,kU),r=_y();return u.createElement(o$,{id:t.id,type:"area"},e=>u.createElement(u.Fragment,null,u.createElement(s$,{legendPayload:hU(t)}),u.createElement(r$,{fn:xU,args:t}),u.createElement(f$,{type:"area",id:e,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:Yv(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:r,connectNulls:t.connectNulls}),u.createElement(SU,oU({},t,{id:e}))))}var EU=u.memo(OU);EU.displayName="Area";var PU=["dangerouslySetInnerHTML","ticks"],TU=["id"],AU=["domain"],MU=["domain"];function DU(){return DU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},DU.apply(null,arguments)}function IU(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function RU(e){var t=Kf();return u.useLayoutEffect(()=>(t(Y$(e)),()=>{t(J$(e))}),[e,t]),null}var $U=e=>{var{xAxisId:t,className:r}=e,s=Yf(wy),a=_y(),n="xAxis",i=Yf(e=>uT(e,n,t,a)),l=Yf(e=>PT(e,n,t,a)),o=Yf(e=>bT(e,t)),c=Yf(e=>jT(e,t)),d=Yf(e=>UE(e,t));if(null==o||null==c||null==d)return null;var{dangerouslySetInnerHTML:m,ticks:p}=e,h=IU(e,PU),{id:x}=d,f=IU(d,TU);return u.createElement(tz,DU({},h,f,{scale:i,x:c.x,y:c.y,width:o.width,height:o.height,className:Pm("recharts-".concat(n," ").concat(n),r),viewBox:s,ticks:l,axisType:n}))},LU={allowDataOverflow:zE.allowDataOverflow,allowDecimals:zE.allowDecimals,allowDuplicatedCategory:zE.allowDuplicatedCategory,height:zE.height,hide:!1,mirror:zE.mirror,orientation:zE.orientation,padding:zE.padding,reversed:zE.reversed,scale:zE.scale,tickCount:zE.tickCount,type:zE.type,xAxisId:0},FU=e=>{var t,r,s,a,n,i=Vh(e,LU);return u.createElement(u.Fragment,null,u.createElement(RU,{interval:null!==(t=i.interval)&&void 0!==t?t:"preserveEnd",id:i.xAxisId,scale:i.scale,type:i.type,padding:i.padding,allowDataOverflow:i.allowDataOverflow,domain:i.domain,dataKey:i.dataKey,allowDuplicatedCategory:i.allowDuplicatedCategory,allowDecimals:i.allowDecimals,tickCount:i.tickCount,includeHidden:null!==(r=i.includeHidden)&&void 0!==r&&r,reversed:i.reversed,ticks:i.ticks,height:i.height,orientation:i.orientation,mirror:i.mirror,hide:i.hide,unit:i.unit,name:i.name,angle:null!==(s=i.angle)&&void 0!==s?s:0,minTickGap:null!==(a=i.minTickGap)&&void 0!==a?a:5,tick:null===(n=i.tick)||void 0===n||n,tickFormatter:i.tickFormatter}),u.createElement($U,i))},zU=(e,t)=>{var{domain:r}=e,s=IU(e,AU),{domain:a}=t;return!!MF(s,IU(t,MU))&&(Array.isArray(r)&&2===r.length&&Array.isArray(a)&&2===a.length?r[0]===a[0]&&r[1]===a[1]:MF({domain:r},{domain:a}))},UU=u.memo(FU,zU);UU.displayName="XAxis";var BU=["dangerouslySetInnerHTML","ticks"],qU=["id"],WU=["domain"],KU=["domain"];function VU(){return VU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},VU.apply(null,arguments)}function HU(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function GU(e){var t=Kf();return u.useLayoutEffect(()=>(t(Z$(e)),()=>{t(Q$(e))}),[e,t]),null}var YU=e=>{var{yAxisId:t,className:r,width:s,label:a}=e,n=u.useRef(null),i=u.useRef(null),l=Yf(wy),o=_y(),c=Kf(),d="yAxis",m=Yf(e=>uT(e,d,t,o)),p=Yf(e=>NT(e,t)),h=Yf(e=>wT(e,t)),x=Yf(e=>PT(e,d,t,o)),f=Yf(e=>WE(e,t));if(u.useLayoutEffect(()=>{if("auto"===s&&p&&!bI(a)&&!u.isValidElement(a)&&null!=f){var e=n.current;if(e){var r=e.getCalculatedWidth();Math.round(p.width)!==Math.round(r)&&c(tL({id:t,width:r}))}}},[x,p,c,a,t,s,f]),null==p||null==h||null==f)return null;var{dangerouslySetInnerHTML:g,ticks:b}=e,v=HU(e,BU),{id:y}=f,j=HU(f,qU);return u.createElement(tz,VU({},v,j,{ref:n,labelRef:i,scale:m,x:h.x,y:h.y,tickTextProps:"auto"===s?{width:void 0}:{width:s},width:p.width,height:p.height,className:Pm("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:x,axisType:d}))},JU={allowDataOverflow:qE.allowDataOverflow,allowDecimals:qE.allowDecimals,allowDuplicatedCategory:qE.allowDuplicatedCategory,hide:!1,mirror:qE.mirror,orientation:qE.orientation,padding:qE.padding,reversed:qE.reversed,scale:qE.scale,tickCount:qE.tickCount,type:qE.type,width:qE.width,yAxisId:0},ZU=e=>{var t,r,s,a,n,i=Vh(e,JU);return u.createElement(u.Fragment,null,u.createElement(GU,{interval:null!==(t=i.interval)&&void 0!==t?t:"preserveEnd",id:i.yAxisId,scale:i.scale,type:i.type,domain:i.domain,allowDataOverflow:i.allowDataOverflow,dataKey:i.dataKey,allowDuplicatedCategory:i.allowDuplicatedCategory,allowDecimals:i.allowDecimals,tickCount:i.tickCount,padding:i.padding,includeHidden:null!==(r=i.includeHidden)&&void 0!==r&&r,reversed:i.reversed,ticks:i.ticks,width:i.width,orientation:i.orientation,mirror:i.mirror,hide:i.hide,unit:i.unit,name:i.name,angle:null!==(s=i.angle)&&void 0!==s?s:0,minTickGap:null!==(a=i.minTickGap)&&void 0!==a?a:5,tick:null===(n=i.tick)||void 0===n||n,tickFormatter:i.tickFormatter}),u.createElement(YU,i))},QU=(e,t)=>{var{domain:r}=e,s=HU(e,WU),{domain:a}=t;return!!MF(s,HU(t,KU))&&(Array.isArray(r)&&2===r.length&&Array.isArray(a)&&2===a.length?r[0]===a[0]&&r[1]===a[1]:MF({domain:r},{domain:a}))},XU=u.memo(ZU,QU);XU.displayName="YAxis";var eB,tB,rB={exports:{}},sB={};tB||(tB=1,rB.exports=function(){if(eB)return sB;eB=1;var e=d(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=e.useSyncExternalStore,s=e.useRef,a=e.useEffect,n=e.useMemo,i=e.useDebugValue;return sB.useSyncExternalStoreWithSelector=function(e,l,o,c,d){var u=s(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;u=n(function(){function e(e){if(!a){if(a=!0,r=e,e=c(e),void 0!==d&&m.hasValue){var n=m.value;if(d(n,e))return s=n}return s=e}if(n=s,t(r,e))return n;var i=c(e);return void 0!==d&&d(n,i)?(r=e,n):(r=e,s=i)}var r,s,a=!1,n=void 0===o?null:o;return[function(){return e(l())},null===n?void 0:function(){return e(n())}]},[l,o,c,d]);var p=r(e,u[0],u[1]);return a(function(){m.hasValue=!0,m.value=p},[p]),i(p),p},sB}()),rB.exports;var aB={notify(){},get:()=>[]};var nB=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),iB=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),lB=(()=>nB||iB?u.useLayoutEffect:u.useEffect)(),oB=Symbol.for("react-redux-context"),cB="undefined"!=typeof globalThis?globalThis:{};function dB(){if(!u.createContext)return{};const e=cB[oB]??(cB[oB]=new Map);let t=e.get(u.createContext);return t||(t=u.createContext(null),e.set(u.createContext,t)),t}var uB=dB();var mB=function(e){const{children:t,context:r,serverState:s,store:a}=e,n=u.useMemo(()=>{const e=function(e){let t,r=aB,s=0,a=!1;function n(){o.onStateChange&&o.onStateChange()}function i(){s++,t||(t=e.subscribe(n),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){(()=>{let t=e;for(;t;)t.callback(),t=t.next})()},get(){const t=[];let r=e;for(;r;)t.push(r),r=r.next;return t},subscribe(r){let s=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){s&&null!==e&&(s=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}())}function l(){s--,t&&0===s&&(t(),t=void 0,r.clear(),r=aB)}const o={addNestedSub:function(e){i();const t=r.subscribe(e);let s=!1;return()=>{s||(s=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:n,isSubscribed:function(){return a},trySubscribe:function(){a||(a=!0,i())},tryUnsubscribe:function(){a&&(a=!1,l())},getListeners:()=>r};return o}(a);return{store:a,subscription:e,getServerState:s?()=>s:void 0}},[a,s]),i=u.useMemo(()=>a.getState(),[a]);lB(()=>{const{subscription:e}=n;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),i!==a.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[n,i]);const l=r||uB;return u.createElement(l.Provider,{value:n},t)},pB=sg([(e,t)=>t,aj,SE,DE,BA,VA,bM,yy],(e,t,r,s,a,n,i,l)=>{if(e&&t&&s&&a&&n)return"horizontal"===t||"vertical"===t?((e,t,r,s,a,n,i)=>{if(e&&r&&s&&a&&function(e,t){var{chartX:r,chartY:s}=e;return r>=t.left&&r<=t.left+t.width&&s>=t.top&&s<=t.top+t.height}(e,i)){var l=((e,t)=>"horizontal"===t?e.chartX:"vertical"===t?e.chartY:void 0)(e,t),o=pM(l,n,a,r,s),c=((e,t,r,s)=>{var a=t.find(e=>e&&e.index===r);if(a){if("horizontal"===e)return{x:a.coordinate,y:s.chartY};if("vertical"===e)return{x:s.chartX,y:a.coordinate}}return{x:0,y:0}})(t,a,o,e);return{activeIndex:String(o),activeCoordinate:c}}})(e,t,s,a,n,i,l):CM(e,t,r,s,a,n,i)}),hB=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,s=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/s)}},xB=Rb("mouseClick"),fB=Pv();fB.startListening({actionCreator:xB,effect:(e,t)=>{var r=e.payload,s=pB(t.getState(),hB(r));null!=(null==s?void 0:s.activeIndex)&&t.dispatch(JT({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}});var gB=Rb("mouseMove"),bB=Pv();bB.startListening({actionCreator:gB,effect:(e,t)=>{var r=e.payload,s=t.getState(),a=LT(s,s.tooltip.settings.shared),n=pB(s,hB(r));"axis"===a&&(null!=(null==n?void 0:n.activeIndex)?t.dispatch(YT({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate})):t.dispatch(HT()))}});var vB={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},yB=Zb({name:"rootProps",initialState:vB,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(r=t.payload.barGap)&&void 0!==r?r:vB.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue}}}),jB=yB.reducer,{updateOptions:wB}=yB.actions,NB=Zb({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:_B}=NB.actions,kB=NB.reducer,SB=Rb("keyDown"),CB=Rb("focus"),OB=Pv();OB.startListening({actionCreator:SB,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:s}=r.tooltip,a=e.payload;if("ArrowRight"===a||"ArrowLeft"===a||"Enter"===a){var n=Number(aA(s,vA(r))),i=VA(r);if("Enter"!==a){var l=n+("ArrowRight"===a?1:-1)*("left-to-right"===DT(r)?1:-1);if(!(null==i||l>=i.length||l<0)){var o=wM(r,"axis","hover",String(l));t.dispatch(QT({active:!0,activeIndex:l.toString(),activeDataKey:void 0,activeCoordinate:o}))}}else{var c=wM(r,"axis","hover",String(s.index));t.dispatch(QT({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:c}))}}}}}),OB.startListening({actionCreator:CB,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&null==s.index){var a=wM(r,"axis","hover",String("0"));t.dispatch(QT({activeDataKey:void 0,active:!0,activeIndex:"0",activeCoordinate:a}))}}}});var EB=Rb("externalEvent"),PB=Pv();PB.startListening({actionCreator:EB,effect:(e,t)=>{if(null!=e.payload.handler){var r=t.getState(),s={activeCoordinate:rM(r),activeDataKey:XA(r),activeIndex:ZA(r),activeLabel:QA(r),activeTooltipIndex:ZA(r),isTooltipActive:sM(r)};e.payload.handler(s,e.payload.reactEvent)}}});var TB=sg([oA],e=>e.tooltipItemPayloads),AB=sg([TB,lA,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,s)=>{var a=e.find(e=>e.settings.dataKey===s);if(null!=a){var{positions:n}=a;if(null!=n)return t(n,r)}}),MB=Rb("touchMove"),DB=Pv();DB.startListening({actionCreator:MB,effect:(e,t)=>{var r=e.payload;if(null!=r.touches&&0!==r.touches.length){var s=t.getState(),a=LT(s,s.tooltip.settings.shared);if("axis"===a){var n=pB(s,hB({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));null!=(null==n?void 0:n.activeIndex)&&t.dispatch(YT({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}else if("item"===a){var i,l=r.touches[0];if(null==document.elementFromPoint)return;var o=document.elementFromPoint(l.clientX,l.clientY);if(!o||!o.getAttribute)return;var c=o.getAttribute(dy),d=null!==(i=o.getAttribute(uy))&&void 0!==i?i:void 0,u=AB(t.getState(),c,d);t.dispatch(KT({activeDataKey:d,activeIndex:c,activeCoordinate:u}))}}}});var IB=$g({brush:jF,cartesianAxis:rL,chartData:uD,errorBars:NL,graphicalItems:x$,layout:$v,legend:mj,options:aD,polarAxis:uR,polarOptions:kB,referenceElements:PF,rootProps:jB,tooltip:XT,zIndex:zM});function RB(e){var{preloadedState:t,children:r,reduxStoreName:s}=e,a=_y(),n=u.useRef(null);if(a)return r;null==n.current&&(n.current=function(e){return Wb({reducer:IB,preloadedState:e,middleware:e=>e({serializableCheck:!1}).concat([fB.middleware,bB.middleware,OB.middleware,PB.middleware,DB.middleware]),enhancers:e=>{var t=e;return"function"==typeof e&&(t=e()),t.concat(qb({type:"raf"}))},devTools:Lj})}(t));var i=qf;return u.createElement(mB,{context:i,store:n.current},r)}function $B(e){var{layout:t,margin:r}=e,s=Kf(),a=_y();return u.useEffect(()=>{a||(s(Dv(t)),s(Mv(r)))},[s,a,t,r]),null}function LB(e){var t=Kf();return u.useEffect(()=>{t(wB(e))},[t,e]),null}function FB(e){var{zIndex:t,isPanorama:r}=e,s=i$("".concat(r?"recharts-zindex-panorama-":"recharts-zindex-").concat(t)),a=Kf();return u.useLayoutEffect(()=>(a(LM({zIndex:t,elementId:s,isPanorama:r})),()=>{a(FM({zIndex:t,isPanorama:r}))}),[a,t,s,r]),u.createElement("g",{id:s})}function zB(e){var{children:t,isPanorama:r}=e,s=Yf(EM);if(!s||0===s.length)return t;var a=s.filter(e=>e<0),n=s.filter(e=>e>0);return u.createElement(u.Fragment,null,a.map(e=>u.createElement(FB,{key:e,zIndex:e,isPanorama:r})),t,n.map(e=>u.createElement(FB,{key:e,zIndex:e,isPanorama:r})))}var UB=["children"];function BB(){return BB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},BB.apply(null,arguments)}var qB={width:"100%",height:"100%",display:"block"},WB=u.forwardRef((e,t)=>{var r=rj(),s=sj(),a=zj();if(!By(r)||!By(s))return null;var n,i,{children:l,otherAttributes:o,title:c,desc:d}=e;return null!=o&&(n="number"==typeof o.tabIndex?o.tabIndex:a?0:void 0,i="string"==typeof o.role?o.role:a?"application":void 0),u.createElement(Um,BB({},o,{title:c,desc:d,role:i,tabIndex:n,width:r,height:s,style:qB,ref:t}),l)}),KB=e=>{var{children:t}=e,r=Yf(Sy);if(!r)return null;var{width:s,height:a,y:n,x:i}=r;return u.createElement(Um,{width:s,height:a,x:i,y:n},t)},VB=u.forwardRef((e,t)=>{var{children:r}=e,s=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,UB);return _y()?u.createElement(KB,null,u.createElement(zB,{isPanorama:!0},r)):u.createElement(WB,BB({ref:t},s),u.createElement(zB,{isPanorama:!1},r))});function HB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function GB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?HB(Object(r),!0).forEach(function(t){YB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function YB(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JB(){return JB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},JB.apply(null,arguments)}var ZB=()=>(gD(),null);function QB(e){if("number"==typeof e)return e;if("string"==typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var XB=u.forwardRef((e,t)=>{var r,s,a=u.useRef(null),[n,i]=u.useState({containerWidth:QB(null===(r=e.style)||void 0===r?void 0:r.width),containerHeight:QB(null===(s=e.style)||void 0===s?void 0:s.height)}),l=u.useCallback((e,t)=>{i(r=>{var s=Math.round(e),a=Math.round(t);return r.containerWidth===s&&r.containerHeight===a?r:{containerWidth:s,containerHeight:a}})},[]),o=u.useCallback(e=>{if("function"==typeof t&&t(e),null!=e&&"undefined"!=typeof ResizeObserver){var{width:r,height:s}=e.getBoundingClientRect();l(r,s);var n=new ResizeObserver(e=>{var{width:t,height:r}=e[0].contentRect;l(t,r)});n.observe(e),a.current=n}},[t,l]);return u.useEffect(()=>()=>{var e=a.current;null!=e&&e.disconnect()},[l]),u.createElement(u.Fragment,null,u.createElement(ij,{width:n.containerWidth,height:n.containerHeight}),u.createElement("div",JB({ref:o},e)))}),eq=u.forwardRef((e,t)=>{var{width:r,height:s}=e,[a,n]=u.useState({containerWidth:QB(r),containerHeight:QB(s)}),i=u.useCallback((e,t)=>{n(r=>{var s=Math.round(e),a=Math.round(t);return r.containerWidth===s&&r.containerHeight===a?r:{containerWidth:s,containerHeight:a}})},[]),l=u.useCallback(e=>{if("function"==typeof t&&t(e),null!=e){var{width:r,height:s}=e.getBoundingClientRect();i(r,s)}},[t,i]);return u.createElement(u.Fragment,null,u.createElement(ij,{width:a.containerWidth,height:a.containerHeight}),u.createElement("div",JB({ref:l},e)))}),tq=u.forwardRef((e,t)=>{var{width:r,height:s}=e;return u.createElement(u.Fragment,null,u.createElement(ij,{width:r,height:s}),u.createElement("div",JB({ref:t},e)))}),rq=u.forwardRef((e,t)=>{var{width:r,height:s}=e;return yh(r)||yh(s)?u.createElement(eq,JB({},e,{ref:t})):u.createElement(tq,JB({},e,{ref:t}))});var sq=u.forwardRef((e,t)=>{var{children:r,className:s,height:a,onClick:n,onContextMenu:i,onDoubleClick:l,onMouseDown:o,onMouseEnter:c,onMouseLeave:d,onMouseMove:m,onMouseUp:p,onTouchEnd:h,onTouchMove:x,onTouchStart:f,style:g,width:b,responsive:v,dispatchTouchEvents:y=!0}=e,j=u.useRef(null),w=Kf(),[N,_]=u.useState(null),[k,S]=u.useState(null),C=function(){var e=Kf(),[t,r]=u.useState(null),s=Yf(iy);return u.useEffect(()=>{if(null!=t){var r=t.getBoundingClientRect().width/t.offsetWidth;Uy(r)&&r!==s&&e(Rv(r))}},[t,e,s]),r}(),O=Yy(),E=(null==O?void 0:O.width)>0?O.width:b,P=(null==O?void 0:O.height)>0?O.height:a,T=u.useCallback(e=>{C(e),"function"==typeof t&&t(e),_(e),S(e),null!=e&&(j.current=e)},[C,t,_,S]),A=u.useCallback(e=>{w(xB(e)),w(EB({handler:n,reactEvent:e}))},[w,n]),M=u.useCallback(e=>{w(gB(e)),w(EB({handler:c,reactEvent:e}))},[w,c]),D=u.useCallback(e=>{w(HT()),w(EB({handler:d,reactEvent:e}))},[w,d]),I=u.useCallback(e=>{w(gB(e)),w(EB({handler:m,reactEvent:e}))},[w,m]),R=u.useCallback(()=>{w(CB())},[w]),$=u.useCallback(e=>{w(SB(e.key))},[w]),L=u.useCallback(e=>{w(EB({handler:i,reactEvent:e}))},[w,i]),F=u.useCallback(e=>{w(EB({handler:l,reactEvent:e}))},[w,l]),z=u.useCallback(e=>{w(EB({handler:o,reactEvent:e}))},[w,o]),U=u.useCallback(e=>{w(EB({handler:p,reactEvent:e}))},[w,p]),B=u.useCallback(e=>{w(EB({handler:f,reactEvent:e}))},[w,f]),q=u.useCallback(e=>{y&&w(MB(e)),w(EB({handler:x,reactEvent:e}))},[w,y,x]),W=u.useCallback(e=>{w(EB({handler:h,reactEvent:e}))},[w,h]),K=function(e){return!0===e?XB:rq}(v);return u.createElement(JM.Provider,{value:N},u.createElement(Km.Provider,{value:k},u.createElement(K,{width:null!=E?E:null==g?void 0:g.width,height:null!=P?P:null==g?void 0:g.height,className:Pm("recharts-wrapper",s),style:GB({position:"relative",cursor:"default",width:E,height:P},g),onClick:A,onContextMenu:L,onDoubleClick:F,onFocus:R,onKeyDown:$,onMouseDown:z,onMouseEnter:M,onMouseLeave:D,onMouseMove:I,onMouseUp:U,onTouchEnd:W,onTouchMove:q,onTouchStart:B,ref:T},u.createElement(ZB,null),r)))}),aq=["width","height","responsive","children","className","style","compact","title","desc"];var nq=u.forwardRef((e,t)=>{var{width:r,height:s,responsive:a,children:n,className:i,style:l,compact:o,title:c,desc:d}=e,m=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,aq),p=Rm(m);return o?u.createElement(u.Fragment,null,u.createElement(ij,{width:r,height:s}),u.createElement(VB,{otherAttributes:p,title:c,desc:d},n)):u.createElement(sq,{className:i,style:l,width:r,height:s,responsive:null!=a&&a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},u.createElement(VB,{otherAttributes:p,title:c,desc:d,ref:t},u.createElement(AF,null,n)))});function iq(){return iq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},iq.apply(null,arguments)}var lq={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",responsive:!1},oq=u.forwardRef(function(e,t){var r,s=Vh(e.categoricalChartProps,lq),{chartName:a,defaultTooltipEventType:n,validateTooltipEventTypes:i,tooltipPayloadSearcher:l,categoricalChartProps:o}=e,c={chartName:a,defaultTooltipEventType:n,validateTooltipEventTypes:i,tooltipPayloadSearcher:l,eventEmitter:void 0};return u.createElement(RB,{preloadedState:{options:c},reduxStoreName:null!==(r=o.id)&&void 0!==r?r:a},u.createElement(gF,{chartData:o.data}),u.createElement($B,{layout:s.layout,margin:s.margin}),u.createElement(LB,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),u.createElement(nq,iq({},s,{ref:t})))}),cq=["axis"],dq=u.forwardRef((e,t)=>u.createElement(oq,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:cq,tooltipPayloadSearcher:rD,categoricalChartProps:e,ref:t})),uq=["axis","item"],mq=u.forwardRef((e,t)=>u.createElement(oq,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:uq,tooltipPayloadSearcher:rD,categoricalChartProps:e,ref:t}));function pq(e){var t=Kf();return u.useEffect(()=>{t(_B(e))},[t,e]),null}var hq=["layout"];function xq(){return xq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},xq.apply(null,arguments)}var fq={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},gq=u.forwardRef(function(e,t){var r,s=Vh(e.categoricalChartProps,fq),{layout:a}=s,n=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(s,hq),{chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:o,tooltipPayloadSearcher:c}=e,d={chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return u.createElement(RB,{preloadedState:{options:d},reduxStoreName:null!==(r=s.id)&&void 0!==r?r:i},u.createElement(gF,{chartData:s.data}),u.createElement($B,{layout:a,margin:s.margin}),u.createElement(LB,{baseValue:void 0,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),u.createElement(pq,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),u.createElement(nq,xq({},n,{ref:t})))}),bq=["item"],vq={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},yq=u.forwardRef((e,t)=>{var r=Vh(e,vq);return u.createElement(gq,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:bq,tooltipPayloadSearcher:rD,categoricalChartProps:r,ref:t})}),jq=["axis"],wq=u.forwardRef((e,t)=>u.createElement(oq,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:jq,tooltipPayloadSearcher:rD,categoricalChartProps:e,ref:t}));const Nq="#f97316",_q="#8b5cf6",kq="#10b981",Sq="#ef4444",Cq=[Nq,_q,kq,"#3b82f6","#a855f7","#ec4899","#f59e0b",Sq,"#06b6d4"];function Oq({data:e,height:t=300}){return Ns.jsx(Zy,{width:"100%",height:t,children:Ns.jsxs(wq,{data:e,children:[Ns.jsx("defs",{children:Ns.jsxs("linearGradient",{id:"earningsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[Ns.jsx("stop",{offset:"5%",stopColor:kq,stopOpacity:.3}),Ns.jsx("stop",{offset:"95%",stopColor:kq,stopOpacity:.1})]})}),Ns.jsx(yz,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),Ns.jsx(UU,{dataKey:"date",stroke:"#64748b",fontSize:12,tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),Ns.jsx(XU,{stroke:"#64748b",fontSize:12,tickFormatter:e=>`$${e}`}),Ns.jsx(kD,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},labelFormatter:e=>new Date(e).toLocaleDateString(),formatter:e=>[`$${e.toFixed(2)}`,"Earnings"]}),Ns.jsx(EU,{type:"monotone",dataKey:"earnings",stroke:kq,strokeWidth:2,fill:"url(#earningsGradient)"})]})})}function Eq({data:e,height:t=300}){return Ns.jsx(Zy,{width:"100%",height:t,children:Ns.jsxs(mq,{data:e,layout:"horizontal",children:[Ns.jsx(yz,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),Ns.jsx(UU,{type:"number",stroke:"#64748b",fontSize:12}),Ns.jsx(XU,{type:"category",dataKey:"metric",stroke:"#64748b",fontSize:12,width:100}),Ns.jsx(kD,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},formatter:e=>[e.toLocaleString(),"Value"]}),Ns.jsx(eF,{dataKey:"value",fill:Nq,radius:[0,4,4,0]})]})})}function Pq({data:e,height:t=300}){const r=e.map((e,t)=>({...e,color:e.color||Cq[t%Cq.length]}));return Ns.jsx(Zy,{width:"100%",height:t,children:Ns.jsxs(yq,{children:[Ns.jsx($$,{data:r,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:2,dataKey:"value",children:r.map((e,t)=>Ns.jsx(SD,{fill:e.color},`cell-${t}`))}),Ns.jsx(kD,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},formatter:e=>[e.toLocaleString(),"Count"]}),Ns.jsx(Nj,{verticalAlign:"middle",align:"right",layout:"vertical",iconType:"circle",wrapperStyle:{fontSize:"12px",paddingLeft:"20px"}})]})})}function Tq({data:e,height:t=200,primaryKey:r="value",secondaryKey:s,primaryColor:a=Nq,secondaryColor:n=_q}){return Ns.jsx(Zy,{width:"100%",height:t,children:Ns.jsxs(dq,{data:e,children:[Ns.jsx(yz,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),Ns.jsx(UU,{dataKey:"date",stroke:"#64748b",fontSize:12,tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),Ns.jsx(XU,{stroke:"#64748b",fontSize:12}),Ns.jsx(kD,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},labelFormatter:e=>new Date(e).toLocaleDateString()}),Ns.jsx(Qz,{type:"monotone",dataKey:r,stroke:a,strokeWidth:2,dot:{r:3},activeDot:{r:5}}),s&&Ns.jsx(Qz,{type:"monotone",dataKey:s,stroke:n,strokeWidth:2,dot:{r:3},activeDot:{r:5}})]})})}function Aq({data:e,metrics:t,height:r=300}){return Ns.jsx(Zy,{width:"100%",height:r,children:Ns.jsxs(dq,{data:e,children:[Ns.jsx(yz,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),Ns.jsx(UU,{dataKey:"date",stroke:"#64748b",fontSize:12,tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),Ns.jsx(XU,{stroke:"#64748b",fontSize:12}),Ns.jsx(kD,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},labelFormatter:e=>new Date(e).toLocaleDateString()}),Ns.jsx(Nj,{}),t.map(e=>Ns.jsx(Qz,{type:"monotone",dataKey:e.key,stroke:e.color,strokeWidth:2,name:e.name,dot:{r:3},activeDot:{r:5}},e.key))]})})}function Mq({title:e,value:t,change:r,changeType:s,icon:a,trend:n}){const i="increase"===s?"text-green-600":"text-red-600",l="increase"===s?"":"";return Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm min-w-0",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[a&&Ns.jsx("div",{className:"text-pr-text-2",children:a}),Ns.jsx("h3",{className:"text-sm font-medium text-pr-text-2",children:e})]}),void 0!==r&&Ns.jsxs("span",{className:`text-sm font-medium ${i} flex items-center space-x-1`,children:[Ns.jsx("span",{children:l}),Ns.jsxs("span",{children:[Math.abs(r),"%"]})]})]}),Ns.jsx("div",{className:"mb-4",children:Ns.jsx("p",{className:"text-2xl font-bold text-pr-text-1",children:t})}),n&&n.length>0&&Ns.jsx("div",{className:"h-16 w-full min-w-[120px]",children:Ns.jsx(Zy,{width:"100%",height:64,children:Ns.jsx(dq,{data:n,children:Ns.jsx(Qz,{type:"monotone",dataKey:"value",stroke:"increase"===s?kq:Sq,strokeWidth:2,dot:!1})})})})]})}function Dq({userData:e}){const t=ke(),r=Array.from({length:30},(e,t)=>{const r=new Date;return r.setDate(r.getDate()-(29-t)),{date:r.toISOString().split("T")[0],earnings:Math.floor(50*Math.random())+10,gems:Math.floor(20*Math.random())+5,points:Math.floor(100*Math.random())+20}}),s=[{name:"Points",value:e?.points_balance||0,color:"#3b82f6"},{name:"Keys",value:10*(e?.keys_balance||0),color:"#f97316"},{name:"Gems",value:5*(e?.gems_balance||0),color:"#8b5cf6"},{name:"Gold",value:2*(e?.gold_collected||0),color:"#eab308"}];return Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-500 rounded-xl p-6 text-white shadow",children:Ns.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("div",{className:"text-sm uppercase tracking-wide text-white/80",children:"New"}),Ns.jsx("h3",{className:"text-2xl font-semibold",children:"Growth Hub is live"}),Ns.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Stake gems, fund creators, and unlock higher returns on your balance."})]}),Ns.jsxs("button",{onClick:()=>t("/growth-hub"),className:"inline-flex items-center justify-center px-4 py-2 bg-pr-surface-card text-blue-600 font-medium rounded-lg shadow-sm hover:bg-blue-50 transition",children:["Explore Growth Hub",Ns.jsx(pt,{className:"w-4 h-4 ml-2"})]})]})}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[Ns.jsx(Mq,{title:"This Month",value:"$127.50",change:23,changeType:"increase",icon:Ns.jsx(as,{className:"w-5 h-5"}),trend:r.slice(-7).map(e=>({date:e.date,value:e.earnings}))}),Ns.jsx(Mq,{title:"All Time",value:"$1,456.80",change:8,changeType:"increase",icon:Ns.jsx(ct,{className:"w-5 h-5"}),trend:r.slice(-7).map(e=>({date:e.date,value:5*e.earnings}))}),Ns.jsx(Mq,{title:"Pending",value:"$89.25",change:12,changeType:"increase",icon:Ns.jsx(Rt,{className:"w-5 h-5"}),trend:r.slice(-7).map(e=>({date:e.date,value:.5*e.earnings}))}),Ns.jsx(Mq,{title:"Available",value:"$234.75",change:5,changeType:"increase",icon:Ns.jsx(ps,{className:"w-5 h-5"}),trend:r.slice(-7).map(e=>({date:e.date,value:2*e.earnings}))})]}),Ns.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-6",children:"Earnings Trend (30 Days)"}),Ns.jsx(Oq,{data:r,height:300})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-6",children:"Currency Distribution"}),Ns.jsx(Pq,{data:s.filter(e=>e.value>0),height:300})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-6",children:"Earning Sources"}),Ns.jsx(Eq,{data:[{metric:"Social Actions",value:45},{metric:"Drop Completions",value:30},{metric:"Content Investments",value:15},{metric:"Referral Bonuses",value:8},{metric:"Achievements",value:2}],height:300})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-6",children:"Currency Growth"}),Ns.jsx(Tq,{data:r.map(e=>({date:e.date,value:e.points,secondary:5*e.gems})),height:300,primaryKey:"value",secondaryKey:"secondary",primaryColor:"#3b82f6",secondaryColor:"#8b5cf6"}),Ns.jsxs("div",{className:"flex justify-center space-x-6 mt-4 text-sm",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),Ns.jsx("span",{className:"text-pr-text-2",children:"Points"})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("div",{className:"w-3 h-3 bg-violet-500 rounded-full"}),Ns.jsx("span",{className:"text-pr-text-2",children:"Gems (5)"})]})]})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-6",children:"Wallet Insights"}),Ns.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[Ns.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[Ns.jsx($t,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),Ns.jsx("p",{className:"text-2xl font-bold text-blue-900",children:e?.points_balance||0}),Ns.jsx("p",{className:"text-sm text-blue-600",children:"Active Points"})]}),Ns.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[Ns.jsx(lr,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),Ns.jsx("p",{className:"text-2xl font-bold text-orange-900",children:e?.keys_balance||0}),Ns.jsx("p",{className:"text-sm text-orange-600",children:"Keys Available"})]}),Ns.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[Ns.jsx(Ut,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),Ns.jsx("p",{className:"text-2xl font-bold text-purple-900",children:e?.gems_balance||0}),Ns.jsx("p",{className:"text-sm text-purple-600",children:"Gems Earned"})]}),Ns.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[Ns.jsx(is,{className:"w-6 h-6 text-yellow-600 mx-auto mb-2"}),Ns.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:e?.gold_collected||0}),Ns.jsx("p",{className:"text-sm text-yellow-600",children:"Gold Collection"})]}),Ns.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[Ns.jsx(ts,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),Ns.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["Level ",e?.level||1]}),Ns.jsx("p",{className:"text-sm text-green-600",children:"Current Level"})]}),Ns.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[Ns.jsx(ct,{className:"w-6 h-6 text-red-600 mx-auto mb-2"}),Ns.jsx("p",{className:"text-2xl font-bold text-red-900",children:e?.points_streak_days||0}),Ns.jsx("p",{className:"text-sm text-red-600",children:"Day Streak"})]})]})]}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Currency Breakdown"}),Ns.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx($t,{className:"w-5 h-5 text-blue-600"}),Ns.jsx("span",{className:"font-medium text-blue-900",children:"Points"})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsx("p",{className:"font-semibold text-blue-900",children:e?.points_balance?.toLocaleString()||"0"}),Ns.jsx("p",{className:"text-sm text-blue-600",children:"From social actions"})]})]}),Ns.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(lr,{className:"w-5 h-5 text-orange-600"}),Ns.jsx("span",{className:"font-medium text-orange-900",children:"Keys"})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsx("p",{className:"font-semibold text-orange-900",children:e?.keys_balance||"0"}),Ns.jsx("p",{className:"text-sm text-orange-600",children:"For drop applications"})]})]}),Ns.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Ut,{className:"w-5 h-5 text-purple-600"}),Ns.jsx("span",{className:"font-medium text-purple-900",children:"Gems"})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsx("p",{className:"font-semibold text-purple-900",children:e?.gems_balance||"0"}),Ns.jsx("p",{className:"text-sm text-purple-600",children:"From completed drops"})]})]}),Ns.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(is,{className:"w-5 h-5 text-yellow-600"}),Ns.jsx("span",{className:"font-medium text-yellow-900",children:"Gold"})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsx("p",{className:"font-semibold text-yellow-900",children:e?.gold_collected||"0"}),Ns.jsx("p",{className:"text-sm text-yellow-600",children:"Prestige collection"})]})]})]})]})}function Iq({holdings:e,loading:t,onList:r,onView:s}){if(t)return Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Content Portfolio"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Loading holdings"})]});if(!e.length)return Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-dashed border-pr-surface-3 text-center",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-2",children:"Start building your portfolio"}),Ns.jsx("p",{className:"text-pr-text-2 mb-4",children:"Invest in creator content to earn returns and unlock secondary market trading."}),Ns.jsx("button",{className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition",children:"Discover Opportunities"})]});const a=e.reduce((e,t)=>(e.value+=t.market_value,e.gain+=t.unrealized_gain,e),{value:0,gain:0});return Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Content Portfolio"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Track your holdings, performance, and resale opportunities."})]}),Ns.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-pr-text-2",children:"Portfolio Value"}),Ns.jsxs("p",{className:"text-lg font-semibold text-pr-text-1",children:["$",a.value.toFixed(2)]})]}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-pr-text-2",children:"Unrealized Gain"}),Ns.jsxs("p",{className:"text-lg font-semibold "+(a.gain>=0?"text-green-600":"text-red-500"),children:[a.gain>=0?"+":"","$",a.gain.toFixed(2)]})]})]})]}),Ns.jsx("div",{className:"overflow-x-auto",children:Ns.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ns.jsx("thead",{className:"bg-pr-surface-2",children:Ns.jsxs("tr",{children:[Ns.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-pr-text-2 uppercase tracking-wider",children:"Asset"}),Ns.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-pr-text-2 uppercase tracking-wider",children:"Shares"}),Ns.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-pr-text-2 uppercase tracking-wider",children:"Avg. Cost"}),Ns.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-pr-text-2 uppercase tracking-wider",children:"Market Value"}),Ns.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-pr-text-2 uppercase tracking-wider",children:"Unrealized"}),Ns.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-pr-text-2 uppercase tracking-wider",children:"Day"}),Ns.jsx("th",{scope:"col",className:"px-4 py-3"})]})}),Ns.jsx("tbody",{className:"bg-pr-surface-card divide-y divide-gray-200",children:e.map(e=>Ns.jsxs("tr",{className:"hover:bg-pr-surface-2",children:[Ns.jsx("td",{className:"px-4 py-4",children:Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("img",{src:e.content_thumbnail,alt:e.content_title,className:"w-12 h-12 rounded-lg object-cover"}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-medium text-pr-text-1",children:e.content_title}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:[e.creator_name,"  ",e.platform.toUpperCase()]})]})]})}),Ns.jsxs("td",{className:"px-4 py-4 text-right",children:[Ns.jsx("div",{className:"font-semibold text-pr-text-1",children:e.owned_shares}),Ns.jsxs("div",{className:"text-xs text-pr-text-2",children:[e.available_to_sell," sellable"]})]}),Ns.jsxs("td",{className:"px-4 py-4 text-right",children:[Ns.jsxs("div",{className:"text-pr-text-1",children:["$",e.avg_cost.toFixed(2)]}),Ns.jsxs("div",{className:"text-xs text-pr-text-2",children:["Now $",e.current_price.toFixed(2)]})]}),Ns.jsxs("td",{className:"px-4 py-4 text-right",children:[Ns.jsxs("div",{className:"text-pr-text-1",children:["$",e.market_value.toFixed(2)]}),Ns.jsxs("div",{className:"text-xs text-pr-text-2",children:["Weekly ",e.week_change_pct.toFixed(1),"%"]})]}),Ns.jsx("td",{className:"px-4 py-4 text-right",children:Ns.jsxs("div",{className:"font-semibold "+(e.unrealized_gain>=0?"text-green-600":"text-red-500"),children:[e.unrealized_gain>=0?"+":"","$",e.unrealized_gain.toFixed(2)]})}),Ns.jsx("td",{className:"px-4 py-4 text-right",children:Ns.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium "+(e.day_change_pct>=0?"bg-green-50 text-green-700":"bg-red-50 text-red-600"),children:[e.day_change_pct>=0?"+":"",e.day_change_pct.toFixed(2),"%"]})}),Ns.jsxs("td",{className:"px-4 py-4 text-right space-x-2",children:[Ns.jsx("button",{onClick:()=>s(e),className:"px-3 py-1.5 text-sm font-medium border border-pr-surface-3 text-pr-text-2 rounded-lg hover:bg-pr-surface-2",children:"View details"}),e.available_to_sell>0?Ns.jsx("button",{onClick:()=>r(e),className:"px-3 py-1.5 text-sm font-medium border border-orange-200 text-orange-600 rounded-lg hover:bg-orange-50",children:"List for resale"}):Ns.jsx("span",{className:"text-xs text-gray-400",children:"All shares listed"})]})]},e.content_id))})]})})]})}function Rq({listings:e,loading:t}){return t?Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"My Listings"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Loading listings"})]}):e.length?Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"My Listings"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Active resale listings awaiting buyers."})]}),Ns.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-700",children:[e.length," active"]})]}),Ns.jsx("div",{className:"space-y-3",children:e.map(e=>Ns.jsxs("div",{className:"flex items-center justify-between p-4 bg-pr-surface-2 rounded-lg",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("img",{src:e.content_thumbnail,alt:e.content_title,className:"w-12 h-12 rounded-lg object-cover"}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-medium text-pr-text-1",children:e.content_title}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:[e.remaining_quantity,"/",e.quantity," shares available"]})]})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Ask price"}),Ns.jsxs("p",{className:"text-lg font-semibold text-pr-text-1",children:["$",e.ask_price.toFixed(2)]}),Ns.jsxs("p",{className:"text-xs text-pr-text-2 mt-1",children:["Created ",new Date(e.created_at).toLocaleDateString(),"  ",e.status]})]})]},e.id))})]}):null}function $q({incoming:e,outgoing:t,loading:r,onAccept:s}){return r?Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Offers"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Loading offers"})]}):e.length||t.length?Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Offers"}),Ns.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ns.jsxs("div",{children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Ns.jsx("h4",{className:"text-sm font-semibold text-pr-text-1",children:"Incoming"}),Ns.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-orange-100 text-orange-700",children:e.length})]}),Ns.jsxs("div",{className:"space-y-3",children:[e.map(e=>Ns.jsx("div",{className:"bg-pr-surface-2 rounded-lg p-4",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsxs("p",{className:"font-semibold text-pr-text-1",children:[e.quantity," shares @ $",e.bid_price.toFixed(2)]}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:e.content_title||e.content_id}),e.message&&Ns.jsxs("p",{className:"text-xs text-pr-text-2 mt-1",children:["",e.message,""]})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("button",{onClick:()=>s(e.id),className:"px-3 py-1.5 text-xs font-medium bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Accept"}),Ns.jsx("button",{className:"px-3 py-1.5 text-xs font-medium border border-pr-surface-3 text-pr-text-2 rounded-lg hover:bg-pr-surface-2",children:"Decline"})]})]})},e.id)),!e.length&&Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"No incoming offers."})]})]}),Ns.jsxs("div",{children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Ns.jsx("h4",{className:"text-sm font-semibold text-pr-text-1",children:"Outgoing"}),Ns.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-slate-100 text-slate-700",children:t.length})]}),Ns.jsxs("div",{className:"space-y-3",children:[t.map(e=>Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-4",children:[Ns.jsxs("p",{className:"font-semibold text-pr-text-1",children:[e.quantity," shares @ $",e.bid_price.toFixed(2)]}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:e.content_title||e.content_id}),Ns.jsxs("p",{className:"text-xs text-pr-text-2 mt-1 capitalize",children:["Status: ",e.status]})]},e.id)),!t.length&&Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"No outgoing offers."})]})]})]})]}):null}function Lq(){const[e,t]=u.useState([]),[r,s]=u.useState([]),[a,n]=u.useState(null),[i,l]=u.useState([]),[o,c]=u.useState(!0),[d,m]=u.useState([]),[p,h]=u.useState(!0),[x,f]=u.useState([]),[g,b]=u.useState([]),[v,y]=u.useState(!0),[j,w]=u.useState(null),[N,_]=u.useState(!1),[k,S]=u.useState(!0),[C,O]=u.useState("overview"),[E,P]=u.useState(!1),[T,A]=u.useState(!1),[M,D]=u.useState(!1),[I,R]=u.useState(!1),[$,L]=u.useState(!1),[F,z]=u.useState(!1),[U,B]=u.useState(!1);console.log("Wallet component rendered, modal states:",{showGemStoreModal:F,showCurrencyModal:E,showWithdrawalModal:I}),u.useEffect(()=>{q()},[]),u.useEffect(()=>{W(),K(),V()},[]);const q=async()=>{try{console.log("=== fetchWalletData Debug ==="),console.log("Starting wallet data fetch..."),console.log("Checking authentication with Mocha service..."),console.log("Current cookies:",document.cookie);const a=na(),i=await fetch("/api/users/me",{credentials:"include",headers:a});console.log("Auth response:",{status:i.status,statusText:i.statusText,headers:Object.fromEntries(i.headers.entries())});let l=null;try{const e=await i.text();console.log("Raw auth response:",e),e&&(l=JSON.parse(e)),console.log("Auth data parsed:",{isNull:null===l,hasId:!!l?.id,hasEmail:!!l?.email,type:typeof l,data:l})}catch(e){console.error("Failed to parse auth response:",e)}if(!l||null===l)return console.log("User not authenticated - showing error and manual auth options"),n(null),t([]),s([]),void alert('Authentication failed. Please try the "Force Re-Login" button or refresh the page.');console.log("User is authenticated, fetching user data...");const o=await fetch("/api/users/me/wallets",{credentials:"include",headers:na()});console.log("User data response status:",o.status);let c=null;try{c=await o.json(),console.log("User data parsed:",{isNull:null===c,hasError:!!c?.error,hasId:!!c?.id,hasEmail:!!c?.email,gems_balance:c?.gems_balance,type:typeof c})}catch(e){console.error("Failed to parse user response:",e)}if(c?.error&&(console.error("User data API error:",c.error),c.error.includes("configuration")))return void alert("Server configuration error. Please contact support.");if(!c||null===c||c?.error){console.log("No valid database user found, creating temporary user...");const e={id:Date.now(),mocha_user_id:l.id||"temp",email:l.email||"",display_name:l.google_user_data?.name||l.email?.split("@")[0]||"User",username:l.email?.split("@")[0]||"user",avatar_url:l.google_user_data?.picture||void 0,bio:"Welcome to Promorang!",banner_url:void 0,website_url:void 0,social_links:void 0,user_type:"regular",xp_points:100,level:1,referral_code:"TEMP"+Date.now().toString().slice(-4),referred_by:void 0,follower_count:0,following_count:0,total_earnings_usd:0,promogem_balance:0,points_balance:25,keys_balance:1,gems_balance:0,gold_collected:0,user_tier:"free",points_streak_days:0,last_activity_date:(new Date).toISOString().split("T")[0],master_key_activated_at:void 0,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};console.log("Using temporary user data:",e),n(e)}else console.log("Setting valid user data:",{id:c.id,email:c.email,gems_balance:c.gems_balance}),n(c);try{const e=na(),[r,a]=await Promise.all([fetch("/api/users/wallets",{credentials:"include",headers:e}),fetch("/api/users/transactions",{credentials:"include",headers:e})]);let n=[],i=[];if(r.ok){const e=await r.json();Array.isArray(e)?n=e:e&&Array.isArray(e.wallets)&&(n=e.wallets)}if(a.ok){const e=await a.json();Array.isArray(e)?i=e:e&&Array.isArray(e.transactions)&&(i=e.transactions)}t(n||[]),s(i||[]),console.log("Fetched additional data:",{wallets:n.length,transactions:i.length})}catch(r){console.error("Error fetching wallets/transactions:",r),t([]),s([])}}catch(a){console.error("Failed to fetch wallet data:",a),a instanceof Error&&(console.error("Error details:",a.message),console.error("Error stack:",a.stack)),n(null),t([]),s([])}finally{S(!1),console.log("fetchWalletData completed, loading set to false")}},W=async()=>{c(!0);const e=await Om();l(e),c(!1)},K=async()=>{h(!0);const e=await(async(e=!1)=>{try{const t=e?"?owner=true":"",r=await la(`/api/shares/listings${t}`,{credentials:"include"});return r.ok&&(await r.json()).listings||Lc()}catch(t){return console.error("Failed to fetch share listings:",t),Lc()}})(!0);m(e),h(!1)},V=async()=>{y(!0);const[e,t]=await Promise.all([zc("seller"),zc("buyer")]);f(e),b(t),y(!1)},H=e&&e.length>0?e.find(e=>"USD"===e.currency_type):null,G=e=>{switch(e){case"task_payment":case"referral_bonus":case"staking_reward":return Ns.jsx(dt,{className:"w-4 h-4 text-green-600"});case"withdrawal":return Ns.jsx(pt,{className:"w-4 h-4 text-red-600"});default:return Ns.jsx(Rt,{className:"w-4 h-4 text-pr-text-2"})}},Y=e=>{e.preventDefault(),e.stopPropagation(),console.log("Convert Currency button clicked!"),console.log("Current showCurrencyModal state:",E),P(!0),console.log("Setting showCurrencyModal to true")};return k?Ns.jsx("div",{className:"flex items-center justify-center h-64",children:Ns.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{children:[Ns.jsx("h1",{className:"text-3xl font-bold text-pr-text-1",children:"Wallet"}),Ns.jsx("p",{className:"text-pr-text-2 mt-2",children:"Manage your earnings and transactions"})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[Ns.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-600 rounded-2xl p-6 text-white",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx($t,{className:"w-6 h-6"}),Ns.jsx("span",{className:"text-lg font-medium",children:"Points"})]}),Ns.jsx("div",{className:"w-8 h-8 bg-pr-surface-card/20 rounded-lg flex items-center justify-center",children:Ns.jsx("span",{className:"text-xs font-bold",children:"PTS"})})]}),Ns.jsxs("div",{className:"mb-4",children:[Ns.jsx("p",{className:"text-3xl font-bold",children:a?.points_balance?.toLocaleString()||"0"}),Ns.jsx("p",{className:"text-blue-100 text-sm",children:"Earn from social actions"})]}),Ns.jsx("button",{onClick:Y,className:"w-full bg-pr-surface-card/20 hover:bg-pr-surface-card/30 backdrop-blur-sm rounded-lg py-2 px-4 text-sm font-medium transition-colors",children:"Convert to Keys"})]}),Ns.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl p-6 text-white",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(lr,{className:"w-6 h-6"}),Ns.jsx("span",{className:"text-lg font-medium",children:"Keys"})]}),Ns.jsx("div",{className:"w-8 h-8 bg-pr-surface-card/20 rounded-lg flex items-center justify-center",children:Ns.jsx("span",{className:"text-xs font-bold",children:"KEY"})})]}),Ns.jsxs("div",{className:"mb-4",children:[Ns.jsx("p",{className:"text-3xl font-bold",children:a?.keys_balance||"0"}),Ns.jsx("p",{className:"text-orange-100 text-sm",children:"Apply for paid drops"})]}),Ns.jsx("button",{onClick:()=>A(!0),className:"w-full bg-pr-surface-card/20 hover:bg-pr-surface-card/30 backdrop-blur-sm rounded-lg py-2 px-4 text-sm font-medium transition-colors",children:"Master Key Status"})]}),Ns.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl p-6 text-white",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Ut,{className:"w-6 h-6"}),Ns.jsx("span",{className:"text-lg font-medium",children:"Gems"})]}),Ns.jsx("div",{className:"w-8 h-8 bg-pr-surface-card/20 rounded-lg flex items-center justify-center",children:Ns.jsx("span",{className:"text-xs font-bold",children:"GEM"})})]}),Ns.jsxs("div",{className:"mb-4",children:[Ns.jsx("p",{className:"text-3xl font-bold",children:a?.gems_balance||"0"}),Ns.jsx("p",{className:"text-purple-100 text-sm",children:"Earn from completed drops"})]}),Ns.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[Ns.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("Buy More Gems button clicked!"),console.log("Current showGemStoreModal state:",F),console.log("Current userData:",a),z(!0),console.log("Setting showGemStoreModal to true"),setTimeout(()=>{console.log("showGemStoreModal after timeout:",F)},100)},className:"bg-pr-surface-card/20 hover:bg-pr-surface-card/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors",children:"Buy More"}),Ns.jsx("button",{onClick:Y,className:"bg-pr-surface-card/20 hover:bg-pr-surface-card/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors",children:"Convert"}),Ns.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("Withdraw Gems button clicked!"),console.log("Current showWithdrawalModal state:",I),R(!0),console.log("Setting showWithdrawalModal to true")},disabled:(a?.gems_balance||0)<200,className:"bg-pr-surface-card/20 hover:bg-pr-surface-card/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Withdraw"})]})]}),Ns.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-amber-600 rounded-2xl p-6 text-white",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(is,{className:"w-6 h-6"}),Ns.jsx("span",{className:"text-lg font-medium",children:"Gold"})]}),Ns.jsx("div",{className:"w-8 h-8 bg-pr-surface-card/20 rounded-lg flex items-center justify-center",children:Ns.jsx("span",{className:"text-xs font-bold",children:"AU"})})]}),Ns.jsxs("div",{className:"mb-4",children:[Ns.jsx("p",{className:"text-3xl font-bold",children:a?.gold_collected||"0"}),Ns.jsx("p",{className:"text-yellow-100 text-sm",children:"Prestige currency"})]}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Ns.jsx("button",{onClick:()=>D(!0),className:"bg-pr-surface-card/20 hover:bg-pr-surface-card/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors",children:"Gold Shop"}),Ns.jsx("button",{onClick:()=>B(!0),className:"bg-pr-surface-card/20 hover:bg-pr-surface-card/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors",children:"Achievements"})]})]})]}),H&&H.balance>0&&Ns.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-6 text-white",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Bt,{className:"w-6 h-6"}),Ns.jsx("span",{className:"text-lg font-medium",children:"USD Balance"})]}),Ns.jsx(ps,{className:"w-6 h-6 opacity-75"})]}),Ns.jsxs("div",{className:"mb-4",children:[Ns.jsxs("p",{className:"text-4xl font-bold",children:["$",(H?.balance||0).toFixed(2)]}),Ns.jsx("p",{className:"text-green-100 text-sm",children:"Available for withdrawal"})]}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsx("button",{className:"flex-1 bg-pr-surface-card/20 hover:bg-pr-surface-card/30 backdrop-blur-sm rounded-lg py-2 px-4 text-sm font-medium transition-colors",children:"Withdraw"}),Ns.jsx("button",{onClick:()=>L(!0),className:"flex-1 bg-pr-surface-card/20 hover:bg-pr-surface-card/30 backdrop-blur-sm rounded-lg py-2 px-4 text-sm font-medium transition-colors",children:"Payment Methods"})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 shadow-sm border border-pr-surface-3",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsx("h2",{className:"text-xl font-semibold text-pr-text-1",children:"Staking Rewards"}),Ns.jsx("span",{className:"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700 px-3 py-1 rounded-full text-sm font-medium",children:"12.5% APY"})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("p",{className:"text-2xl font-bold text-pr-text-1",children:"0"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Staked PromoGems"})]}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"0.00"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Pending Rewards"})]}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("p",{className:"text-2xl font-bold text-green-600",children:"$0.00"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Total Earned"})]})]}),Ns.jsx("div",{className:"mt-6 pt-6 border-t border-pr-surface-3",children:Ns.jsx("button",{className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-3 rounded-lg font-medium transition-all duration-200",children:"Start Staking PromoGems"})})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl shadow-sm border border-pr-surface-3",children:[Ns.jsx("div",{className:"border-b border-pr-surface-3",children:Ns.jsxs("nav",{className:"flex space-x-8 px-6",children:[Ns.jsx("button",{onClick:()=>O("overview"),className:"py-4 border-b-2 font-medium text-sm "+("overview"===C?"border-orange-500 text-orange-600":"border-transparent text-pr-text-2 hover:text-pr-text-1"),children:"Overview"}),Ns.jsx("button",{onClick:()=>O("transactions"),className:"py-4 border-b-2 font-medium text-sm "+("transactions"===C?"border-orange-500 text-orange-600":"border-transparent text-pr-text-2 hover:text-pr-text-1"),children:"Transactions"})]})}),Ns.jsxs("div",{className:"p-6",children:["overview"===C&&Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsx(Dq,{userData:a,transactions:r}),Ns.jsx(Iq,{holdings:i,loading:o,onList:e=>{w(e),_(!0)},onView:e=>navigate(`/portfolio/holdings/${e.content_id}`)}),Ns.jsx(Rq,{listings:d,loading:p}),Ns.jsx($q,{incoming:x,outgoing:g,loading:v,onAccept:async e=>{try{await(async e=>{const t=await la(`/api/shares/offers/${e}/accept`,{method:"POST",credentials:"include"});if(!t.ok){const e=await t.json().catch(()=>({}));throw new Error(e.error||"Failed to accept offer")}return t.json()})(e),await Promise.all([W(),K(),V()])}catch(t){console.error("Failed to accept offer:",t),alert(t instanceof Error?t.message:"Failed to accept offer")}}})]}),"transactions"===C&&Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Transaction History"}),Ns.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-pr-surface-3 rounded-lg hover:bg-pr-surface-2 transition-colors",children:[Ns.jsx(Zt,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Filter"})]})]}),Ns.jsx("div",{className:"space-y-3",children:r.length>0?r.map(e=>{return Ns.jsxs("div",{className:"flex items-center justify-between p-4 bg-pr-surface-2 rounded-lg",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("div",{className:"w-10 h-10 bg-pr-surface-card rounded-full flex items-center justify-center shadow-sm",children:G(e.transaction_type)}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-medium text-pr-text-1",children:e.description||e.transaction_type.replace("_"," ")}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:[new Date(e.created_at).toLocaleDateString(),"  ",e.currency_type]})]})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsxs("p",{className:"font-semibold "+(t=e.amount,t>=0?"text-green-600":"text-red-600"),children:[e.amount>=0?"+":"","$",Math.abs(e.amount).toFixed(2)]}),Ns.jsx("p",{className:"text-sm text-pr-text-2 capitalize",children:e.status})]})]},e.id);var t}):Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx(ps,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-2",children:"No transactions yet"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Your transaction history will appear here once you start earning."})]})})]})]})]}),!a&&Ns.jsx(wm,{}),Ns.jsx(Vs,{user:a,isOpen:E,onClose:()=>{console.log("Closing Currency Modal"),P(!1)},onSuccess:q}),Ns.jsx(Hs,{user:a,isOpen:T,onClose:()=>A(!1),onSuccess:q}),Ns.jsx(sa,{user:a,isOpen:M,onClose:()=>D(!1),onPurchase:q}),Ns.jsx(bm,{user:a,isOpen:I,onClose:()=>{console.log("Closing Withdrawal Modal"),R(!1)},onSuccess:q}),Ns.jsx(Nm,{isOpen:N,onClose:()=>_(!1),holding:j,onSuccess:()=>{W(),K(),V()}}),Ns.jsx(vm,{user:a,isOpen:$,onClose:()=>L(!1),onSuccess:q}),Ns.jsx(jm,{user:a,isOpen:F,onClose:()=>{console.log("Closing Gem Store Modal"),z(!1)},onSuccess:q}),Ns.jsx(aa,{user:a,isOpen:U,onClose:()=>B(!1)})]})}function Fq({isOpen:e,onClose:t,channel:r,user:s,onSuccess:a}){const[n,i]=u.useState(""),[l,o]=u.useState(!1),[c,d]=u.useState("");if(!e||!r)return null;const m=(()=>{if("function"==typeof r.icon)return r.icon;switch(r.iconKey||r.icon){case"Shield":return Vr;case"Rocket":return zr;case"Star":return Zr;case"TrendingUp":return as;default:return hr}})(),p=()=>{const e={green:"from-green-500 to-emerald-600",blue:"from-blue-500 to-cyan-600",purple:"from-purple-500 to-pink-600",orange:"from-orange-500 to-red-600"};return e[r.color]||e.blue},h=(()=>{const e=parseFloat(n)||0;if(0===e)return{daily:0,total:0,final:0};const t=r.lockPeriod,s=e*(r.baseMultiplier-1);return{daily:s/t,total:s,final:e+s}})(),x=n&&parseFloat(n)>=r.minDeposit&&parseFloat(n)<=r.maxDeposit&&parseFloat(n)<=(s?.gems_balance||0);return Ns.jsx(Us,{isOpen:e,onClose:t,maxWidth:"md",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex max-h-[85vh] flex-col overflow-hidden rounded-2xl",children:[Ns.jsxs("div",{className:`bg-gradient-to-r ${p()} px-6 pt-6 pb-4 text-white`,children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-pr-surface-2",children:Ns.jsx(m,{className:"h-6 w-6"})}),Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-xl font-bold",children:r.name}),Ns.jsxs("span",{className:`inline-block rounded-full px-2 py-1 text-xs font-medium ${(()=>{switch(r.riskLevel){case"low":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"high":return"text-red-600 bg-red-100";default:return"text-pr-text-2 bg-pr-surface-2"}})()} text-pr-text-1`,children:[r.riskLevel.toUpperCase()," RISK"]})]})]}),Ns.jsx("button",{onClick:t,className:"rounded-lg p-2 text-white/80 transition-colors hover:text-white","aria-label":"Close staking modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]}),Ns.jsx("p",{className:"mt-4 text-white/90",children:r.description})]}),Ns.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-6 pt-4 space-y-6",children:[Ns.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ns.jsxs("div",{className:"text-center p-3 bg-pr-surface-2 rounded-lg",children:[Ns.jsx("div",{className:"text-lg font-bold text-pr-text-1",children:r.lockPeriod}),Ns.jsx("div",{className:"text-sm text-pr-text-2",children:"Days Locked"})]}),Ns.jsxs("div",{className:"text-center p-3 bg-pr-surface-2 rounded-lg",children:[Ns.jsxs("div",{className:"text-lg font-bold text-green-600",children:[r.expectedApr,"%"]}),Ns.jsx("div",{className:"text-sm text-pr-text-2",children:"Expected APR"})]}),Ns.jsxs("div",{className:"text-center p-3 bg-pr-surface-2 rounded-lg",children:[Ns.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[r.baseMultiplier,"x"]}),Ns.jsx("div",{className:"text-sm text-pr-text-2",children:"Multiplier"})]}),Ns.jsxs("div",{className:"text-center p-3 bg-pr-surface-2 rounded-lg",children:[Ns.jsx("div",{className:"text-lg font-bold text-purple-600",children:s?.gems_balance||0}),Ns.jsx("div",{className:"text-sm text-pr-text-2",children:"Your Balance"})]})]}),Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"font-semibold text-pr-text-1 mb-3",children:"Channel Features"}),Ns.jsx("div",{className:"space-y-2",children:r.features.map((e,t)=>Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("div",{className:`w-2 h-2 rounded-full bg-gradient-to-r ${p()}`}),Ns.jsx("span",{className:"text-sm text-pr-text-1",children:e})]},t))})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Stake Amount (Gems)"}),Ns.jsxs("div",{className:"relative",children:[Ns.jsx("input",{type:"number",value:n,onChange:e=>i(e.target.value),placeholder:`Min: ${r.minDeposit}, Max: ${r.maxDeposit}`,className:"w-full px-4 py-3 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",min:r.minDeposit,max:Math.min(r.maxDeposit,s?.gems_balance||0)}),Ns.jsx("button",{onClick:()=>{const e=Math.min(s?.gems_balance||0,r.maxDeposit);i(e.toString())},className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-sm text-purple-600 hover:text-purple-700 font-medium",children:"MAX"})]}),Ns.jsxs("div",{className:"flex justify-between text-xs text-pr-text-2 mt-1",children:[Ns.jsxs("span",{children:["Min: ",r.minDeposit," gems"]}),Ns.jsxs("span",{children:["Max: ",Math.min(r.maxDeposit,s?.gems_balance||0)," gems"]})]})]}),n&&parseFloat(n)>0&&Ns.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4 border border-green-200",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[Ns.jsx(vt,{className:"w-5 h-5 text-green-600"}),Ns.jsx("h3",{className:"font-semibold text-pr-text-1",children:"Projected Rewards"})]}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("div",{className:"text-sm text-pr-text-2",children:"Daily Reward"}),Ns.jsxs("div",{className:"font-bold text-green-600",children:["+",h.daily.toFixed(2)," Gems"]})]}),Ns.jsxs("div",{children:[Ns.jsx("div",{className:"text-sm text-pr-text-2",children:"Total Rewards"}),Ns.jsxs("div",{className:"font-bold text-green-600",children:["+",h.total.toFixed(2)," Gems"]})]}),Ns.jsxs("div",{className:"col-span-2",children:[Ns.jsx("div",{className:"text-sm text-pr-text-2",children:"Final Amount"}),Ns.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[h.final.toFixed(2)," Gems"]})]})]})]}),Ns.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:Ns.jsxs("div",{className:"flex items-start space-x-3",children:[Ns.jsx(Pt,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-semibold text-yellow-800",children:"Important Notice"}),Ns.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:["Your gems will be locked for ",r.lockPeriod," days. Early withdrawal may result in penalties. Rewards are distributed daily and automatically compounded."]})]})]})}),c&&Ns.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:Ns.jsx("p",{className:"text-sm text-red-700",children:c})}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsx("button",{onClick:t,className:"flex-1 px-6 py-3 border border-pr-surface-3 text-pr-text-1 rounded-lg hover:bg-pr-surface-2 transition-colors",children:"Cancel"}),Ns.jsx("button",{onClick:async()=>{if(x){o(!0),d("");try{const e=await fetch("/api/growth/staking",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({channel_id:r.id,amount:parseFloat(n)})});if(e.ok)a(),t(),i("");else{const t=await e.json();d(t.error||"Failed to stake gems")}}catch(e){d("Network error occurred")}finally{o(!1)}}},disabled:!x||l,className:"flex-1 px-6 py-3 rounded-lg font-medium transition-all duration-200 "+(x&&!l?`bg-gradient-to-r ${p()} hover:opacity-90 text-white`:"bg-pr-surface-3 text-pr-text-2 cursor-not-allowed"),children:l?"Staking...":`Stake ${n||"0"} Gems`})]})]})]})})}function zq({isOpen:e,onClose:t,onSuccess:r}){const[s,a]=u.useState({title:"",description:"",category:"Technology",funding_goal:"",min_pledge:"",duration_days:"30"}),[n,i]=u.useState([{amount:25,title:"Early Supporter",description:"Get early access and exclusive updates",estimatedDelivery:"March 2025"}]),[l,o]=u.useState(!1),[c,d]=u.useState("");if(!e)return null;const m=(e,t,r)=>{const s=[...n];s[e]={...s[e],[t]:r},i(s)};return Ns.jsx(Us,{isOpen:e,onClose:t,maxWidth:"2xl",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex max-h-[85vh] flex-col overflow-hidden rounded-2xl bg-pr-surface-card",children:[Ns.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 px-6 pt-6 pb-4 text-white",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-pr-surface-2",children:Ns.jsx(zr,{className:"h-6 w-6"})}),Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-xl font-bold",children:"Create Funding Project"}),Ns.jsx("p",{className:"text-blue-100",children:"Launch your creative project"})]})]}),Ns.jsx("button",{onClick:t,className:"rounded-lg p-2 text-white/80 transition-colors hover:text-white","aria-label":"Close funding project modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]})}),Ns.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),s.title&&s.description&&s.funding_goal)if(parseFloat(s.funding_goal)<1e3)d("Minimum funding goal is 1,000 gems");else{o(!0),d("");try{const e=await fetch("/api/growth/funding/projects",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...s,funding_goal:parseFloat(s.funding_goal),min_pledge:parseFloat(s.min_pledge)||25,duration_days:parseInt(s.duration_days),reward_tiers:n})});if(e.ok)r(),t(),a({title:"",description:"",category:"Technology",funding_goal:"",min_pledge:"",duration_days:"30"}),i([{amount:25,title:"Early Supporter",description:"Get early access and exclusive updates",estimatedDelivery:"March 2025"}]);else{const t=await e.json();d(t.error||"Failed to create project")}}catch(l){d("Network error occurred")}finally{o(!1)}}else d("Please fill in all required fields")},className:"flex-1 overflow-y-auto px-6 py-6 space-y-6",children:[Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Project Details"}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Project Title *"}),Ns.jsx("input",{type:"text",value:s.title,onChange:e=>a({...s,title:e.target.value}),placeholder:"Enter your project title",className:"w-full px-4 py-3 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Description *"}),Ns.jsx("textarea",{value:s.description,onChange:e=>a({...s,description:e.target.value}),placeholder:"Describe your project, goals, and what makes it special",rows:4,className:"w-full px-4 py-3 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Category"}),Ns.jsx("select",{value:s.category,onChange:e=>a({...s,category:e.target.value}),className:"w-full px-4 py-3 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:["Technology","Film","Music","Art","Games","Fashion","Food","Publishing","Design","Education","Health","Other"].map(e=>Ns.jsx("option",{value:e,children:e},e))})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Duration (Days)"}),Ns.jsxs("select",{value:s.duration_days,onChange:e=>a({...s,duration_days:e.target.value}),className:"w-full px-4 py-3 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[Ns.jsx("option",{value:"30",children:"30 days"}),Ns.jsx("option",{value:"45",children:"45 days"}),Ns.jsx("option",{value:"60",children:"60 days"}),Ns.jsx("option",{value:"90",children:"90 days"})]})]})]}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Funding Goal (Gems) *"}),Ns.jsx("input",{type:"number",value:s.funding_goal,onChange:e=>a({...s,funding_goal:e.target.value}),placeholder:"10000",min:"1000",className:"w-full px-4 py-3 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Minimum Pledge (Gems)"}),Ns.jsx("input",{type:"number",value:s.min_pledge,onChange:e=>a({...s,min_pledge:e.target.value}),placeholder:"25",min:"1",className:"w-full px-4 py-3 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Reward Tiers"}),Ns.jsxs("button",{type:"button",onClick:()=>{i([...n,{amount:100,title:"",description:"",estimatedDelivery:"April 2025"}])},className:"flex items-center space-x-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",children:[Ns.jsx(Rr,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Add Tier"})]})]}),n.map((e,t)=>Ns.jsxs("div",{className:"border border-pr-surface-3 rounded-lg p-4",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Ns.jsxs("h4",{className:"font-medium text-pr-text-1",children:["Tier ",t+1]}),n.length>1&&Ns.jsx("button",{type:"button",onClick:()=>(e=>{n.length>1&&i(n.filter((t,r)=>r!==e))})(t),className:"text-red-600 hover:text-red-700",children:Ns.jsx(Nr,{className:"w-4 h-4"})})]}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-xs font-medium text-pr-text-2 mb-1",children:"Pledge Amount (Gems)"}),Ns.jsx("input",{type:"number",value:e.amount,onChange:e=>m(t,"amount",parseInt(e.target.value)||0),className:"w-full px-3 py-2 text-sm border border-pr-surface-3 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1"})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-xs font-medium text-pr-text-2 mb-1",children:"Estimated Delivery"}),Ns.jsx("input",{type:"text",value:e.estimatedDelivery,onChange:e=>m(t,"estimatedDelivery",e.target.value),placeholder:"March 2025",className:"w-full px-3 py-2 text-sm border border-pr-surface-3 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),Ns.jsxs("div",{className:"mb-3",children:[Ns.jsx("label",{className:"block text-xs font-medium text-pr-text-2 mb-1",children:"Reward Title"}),Ns.jsx("input",{type:"text",value:e.title,onChange:e=>m(t,"title",e.target.value),placeholder:"Early Access",className:"w-full px-3 py-2 text-sm border border-pr-surface-3 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-xs font-medium text-pr-text-2 mb-1",children:"Reward Description"}),Ns.jsx("textarea",{value:e.description,onChange:e=>m(t,"description",e.target.value),placeholder:"Describe what backers will receive",rows:2,className:"w-full px-3 py-2 text-sm border border-pr-surface-3 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]},t))]}),c&&Ns.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:Ns.jsx("p",{className:"text-sm text-red-700",children:c})}),Ns.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-pr-surface-3",children:[Ns.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 border border-pr-surface-3 text-pr-text-1 rounded-lg hover:bg-pr-surface-2 transition-colors",children:"Cancel"}),Ns.jsx("button",{type:"submit",disabled:l,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Creating...":"Launch Project"})]})]})]})})}function Uq({isOpen:e,onClose:t,user:r,onSuccess:s,policies:a}){const[n,i]=u.useState("pro"),[l,o]=u.useState(!1),[c,d]=u.useState(""),[m,p]=u.useState("select");if(!e)return null;const h=Array.isArray(a)?a:[],x=h.find(e=>e.id===n)||h[0]||null,f=!!x&&(r?.follower_count||0)>=(x.minFollowers||0),g=!!x&&(r?.gems_balance||0)>=(x.monthlyPremium||0),b=e=>e?Ns.jsx(At,{className:"w-4 h-4 text-green-600"}):Ns.jsx(hs,{className:"w-4 h-4 text-gray-400"});return Ns.jsx(Us,{isOpen:e,onClose:t,maxWidth:"4xl",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex max-h-[85vh] flex-col overflow-hidden rounded-2xl bg-pr-surface-card",children:[Ns.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 px-6 pt-6 pb-4 text-white",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-pr-surface-2",children:Ns.jsx(Vr,{className:"h-6 w-6"})}),Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-xl font-bold",children:"Social Shield Protection"}),Ns.jsx("p",{className:"text-orange-100",children:"Protect your social media earnings"})]})]}),Ns.jsx("button",{onClick:t,className:"rounded-lg p-2 text-white/80 transition-colors hover:text-white","aria-label":"Close social shield modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]})}),Ns.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-6",children:["select"===m&&Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:Ns.jsxs("div",{className:"flex items-start space-x-3",children:[Ns.jsx(Pt,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-semibold text-yellow-800",children:"Why You Need Social Shield"}),Ns.jsxs("ul",{className:"text-sm text-yellow-700 mt-2 space-y-1",children:[Ns.jsx("li",{children:" Algorithm changes can reduce reach by up to 80%"}),Ns.jsx("li",{children:" Account bans eliminate income overnight"}),Ns.jsx("li",{children:" Content strikes impact monetization for weeks"}),Ns.jsx("li",{children:" Platform issues can cause significant follower loss"})]})]})]})}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[0===h.length&&Ns.jsx("div",{className:"col-span-full bg-pr-surface-2 border border-dashed border-pr-surface-3 rounded-lg p-6 text-center text-sm text-pr-text-2",children:"No policies available right now. Check back soon!"}),h.map(e=>{const t=n===e.id,s=(r?.follower_count||0)>=e.minFollowers;return Ns.jsxs("div",{className:"border-2 rounded-xl overflow-hidden cursor-pointer transition-all "+(t?"border-orange-500 ring-2 ring-orange-100":s?"border-pr-surface-3 hover:border-orange-300":"border-pr-surface-3 opacity-60"),onClick:()=>s&&i(e.id),children:["pro"===e.id&&Ns.jsx("div",{className:"bg-orange-500 text-white text-center py-2 text-sm font-medium",children:"Most Popular"}),Ns.jsxs("div",{className:"p-4",children:[Ns.jsxs("div",{className:"text-center mb-4",children:[Ns.jsx("h3",{className:"text-lg font-bold text-pr-text-1",children:e.name}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mb-2",children:e.description}),Ns.jsxs("div",{className:"text-2xl font-bold text-pr-text-1",children:[e.monthlyPremium," Gems",Ns.jsx("span",{className:"text-sm font-normal text-pr-text-2",children:"/month"})]}),Ns.jsxs("div",{className:"text-sm text-pr-text-2",children:["Up to $",e.maxCoverage.toLocaleString()," coverage"]})]}),Ns.jsxs("div",{className:"space-y-3 mb-4",children:[Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1 mb-2",children:"Coverage:"}),Ns.jsx("ul",{className:"space-y-1",children:Object.entries(e.coverage).map(([e,t])=>Ns.jsxs("li",{className:"flex items-center space-x-2",children:[b(t),Ns.jsx("span",{className:"text-xs "+(t?"text-pr-text-1":"text-gray-400"),children:e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())})]},e))})]}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1 mb-2",children:"Platforms:"}),Ns.jsx("div",{className:"flex flex-wrap gap-1",children:e.platforms.map(e=>Ns.jsx("span",{className:"px-2 py-1 bg-pr-surface-2 text-pr-text-1 rounded text-xs",children:e},e))})]}),Ns.jsxs("div",{className:"text-xs text-pr-text-2 pt-2 border-t border-pr-border",children:[Ns.jsxs("div",{children:["Deductible: ",e.deductible," gems"]}),Ns.jsxs("div",{className:"flex items-center space-x-1",children:[Ns.jsx(us,{className:"w-3 h-3"}),Ns.jsxs("span",{children:["Min followers: ",e.minFollowers.toLocaleString()]})]})]})]}),!s&&Ns.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-2",children:Ns.jsxs("p",{className:"text-xs text-red-700",children:["Requires ",e.minFollowers.toLocaleString()," followers"]})})]})]},e.id)})]}),Ns.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[Ns.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Your Status"}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(us,{className:"w-4 h-4 text-blue-600"}),Ns.jsxs("span",{className:"text-blue-700",children:["Followers: ",(r?.follower_count||0).toLocaleString()]})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Ht,{className:"w-4 h-4 text-blue-600"}),Ns.jsxs("span",{className:"text-blue-700",children:["Gem Balance: ",r?.gems_balance||0]})]})]})]}),c&&Ns.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:Ns.jsx("p",{className:"text-sm text-red-700",children:c})}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsx("button",{onClick:t,className:"flex-1 px-6 py-3 border border-pr-surface-3 text-pr-text-1 rounded-lg hover:bg-pr-surface-2 transition-colors",children:"Cancel"}),Ns.jsxs("button",{onClick:()=>p("confirm"),disabled:!f||!g,className:"flex-1 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:["Continue with ",x?.name]})]})]}),"confirm"===m&&x&&Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Confirm Your Subscription"}),Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-4 mb-4",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ns.jsx("span",{className:"font-medium text-pr-text-1",children:x.name}),Ns.jsxs("span",{className:"font-bold text-pr-text-1",children:[x.monthlyPremium," Gems/month"]})]}),Ns.jsxs("div",{className:"text-sm text-pr-text-2",children:["Maximum coverage: $",x.maxCoverage.toLocaleString()]}),Ns.jsxs("div",{className:"text-sm text-pr-text-2",children:["Deductible: ",x.deductible," gems per claim"]})]}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1",children:"Terms & Conditions"}),Ns.jsxs("div",{className:"text-sm text-pr-text-2 space-y-2",children:[Ns.jsx("p",{children:" Your subscription will auto-renew monthly"}),Ns.jsx("p",{children:" Claims must be filed within 7 days of incident"}),Ns.jsx("p",{children:" Coverage begins 24 hours after subscription activation"}),Ns.jsx("p",{children:" You can cancel anytime without penalty"}),Ns.jsx("p",{children:" Payouts are processed within 5-10 business days"})]})]})]}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsx("button",{onClick:()=>p("select"),className:"flex-1 px-6 py-3 border border-pr-surface-3 text-pr-text-1 rounded-lg hover:bg-pr-surface-2 transition-colors",children:"Back"}),Ns.jsx("button",{onClick:async()=>{if(x&&f&&g){o(!0),d("");try{const e=await fetch("/api/growth/shield/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({policy_id:n})});if(e.ok)s(),t(),p("select");else{const t=await e.json();d(t.error||"Failed to subscribe to shield")}}catch(e){d("Network error occurred")}finally{o(!1)}}},disabled:l,className:"flex-1 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white rounded-lg font-medium transition-all duration-200 disabled:opacity-50",children:l?"Subscribing...":`Subscribe for ${x.monthlyPremium} Gems`})]})]})]})]})})}const Bq=async(e,t)=>{try{const t=await fetch(e,{credentials:"include"});if(!t.ok)throw new Error(`Request failed with status ${t.status}`);return await t.json()}catch(r){return console.warn(`Falling back for ${e}:`,r instanceof Error?r.message:r),(e=>"function"==typeof e?e():e)(t)}},qq=e=>[{id:"foundation-growth",name:"Foundation Growth",description:"Balanced staking pool focused on retention and engagement.",lock_period_days:45,base_multiplier:1.4,risk_level:"medium",min_amount:150,max_amount:7500,expected_apr:18.5,icon:Object.keys(e)[0]||"TrendingUp",color:"emerald",features:["Boosted engagement rewards","Weekly treasury reports","Auto-compound"],participant_count:182,total_deposited:96500},{id:"creator-accelerator",name:"Creator Accelerator",description:"High-yield pool backing top creators and launch drops.",lock_period_days:75,base_multiplier:2.1,risk_level:"high",min_amount:500,max_amount:2e4,expected_apr:28,icon:Object.keys(e)[1]||"Rocket",color:"purple",features:["Launch drop priority","Risk-adjusted backfill","Creator insurance"],participant_count:94,total_deposited:184e3},{id:"stability-shield",name:"Stability Shield",description:"Protected staking for conservative growth portfolios.",lock_period_days:30,base_multiplier:1.1,risk_level:"low",min_amount:50,max_amount:5e3,expected_apr:9.5,icon:Object.keys(e)[2]||"Shield",color:"cyan",features:["Principal protection","Daily liquidity window","Auto rollover"],participant_count:312,total_deposited:142500}],Wq=()=>[{id:"position-1",channel_id:"foundation-growth",amount:750,multiplier:1.4,lock_until:new Date(Date.now()+216e7).toISOString(),earned_so_far:86,status:"active"},{id:"position-2",channel_id:"stability-shield",amount:300,multiplier:1.1,lock_until:new Date(Date.now()+10368e5).toISOString(),earned_so_far:18,status:"withdrawable"}];function Kq(){const[e,t]=u.useState(null),[r,s]=u.useState(!0),[a,n]=u.useState("overview"),[i,l]=u.useState([]),[o,c]=u.useState([]),[d,m]=u.useState([]),[p,h]=u.useState([]),[x,f]=u.useState(null),[g,b]=u.useState(!1),[v,y]=u.useState(!1),[j,w]=u.useState(!1);u.useEffect(()=>{N()},[]);const N=async()=>{try{const e={TrendingUp:as,Rocket:zr,Star:Zr,Shield:Vr,Diamond:Ut,Target:ts},[r,s,a,n,i]=await Promise.all([Bq("/api/users/me",{user:{id:"growth-demo-user",email:"growth@promorang.com",username:"growth_creator",display_name:"Growth Creator",user_type:"creator",points_balance:12500,gems_balance:980,keys_balance:24,gold_collected:12,follower_count:42e3,created_at:new Date(Date.now()-7776e6).toISOString(),updated_at:(new Date).toISOString(),avatar_url:"https://api.dicebear.com/7.x/avataaars/svg?seed=growth_hub",user_tier:"premium"}}),Bq("/api/growth/channels",{channels:qq(e)}),Bq("/api/growth/staking",{positions:Wq()}),Bq("/api/growth/funding/projects",{projects:[{id:101,creator_id:12,creator_name:"Creator Collective",creator_avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=collective",title:"Creator Success Toolkit",description:"Launch an interactive toolkit that teaches new creators how to monetize within 30 days.",target_amount:5e4,amount_raised:24850,backer_count:186,days_left:18,min_pledge:75,status:"active",featured:!0,rewardTiers:[{amount:75,title:"Supporter",description:"Early access + invite to creator roundtable",estimatedDelivery:"45 days",backerCount:120},{amount:350,title:"Partner",description:"Custom growth audit & promo spotlight",estimatedDelivery:"60 days",backerCount:42}]},{id:102,creator_id:27,creator_name:"Community Capital",creator_avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=community_capital",title:"Growth Hub Community Fund",description:"Back emerging creators through pooled capital and mentorship credits.",target_amount:8e4,amount_raised:61200,backer_count:265,days_left:9,min_pledge:120,status:"active",featured:!1,rewardTiers:[{amount:120,title:"Backer",description:"Badge + quarterly impact report",estimatedDelivery:"30 days",backerCount:188},{amount:600,title:"Angel",description:"Board invite + co-marketing slots",estimatedDelivery:"75 days",backerCount:26}]}]}),Bq("/api/growth/shield/policies",{policies:[{id:"policy-1",name:"Social Safeguard",description:"Covers platform bans and sudden algorithm changes for verified creators.",premium_amount:45,coverage_amount:7500,deductible:250,min_followers:1e3,coverage:{platformBan:!0,algorithmChange:!0,contentStrike:!0,monetizationLoss:!0,followerLoss:!1},platforms:["instagram","youtube","tiktok"]},{id:"policy-2",name:"Monetization Guard",description:"Income replacement for monetization suspension and CPM volatility.",premium_amount:65,coverage_amount:12e3,deductible:400,min_followers:5e3,coverage:{platformBan:!1,algorithmChange:!0,contentStrike:!0,monetizationLoss:!0,followerLoss:!0},platforms:["youtube","twitch"]}]})]);t(r?.user||r||null);const o=(s?.channels||qq(e)).map((t,r)=>{const s=t.icon_key??t.iconKey??t.icon??"Shield",a=e[s]||Vr;return{id:t.id??`channel-${r}`,name:t.name??"Growth Channel",description:t.description??"Ecosystem staking opportunity",lockPeriod:t.lock_period_days??t.lockPeriodDays??t.lockPeriod??30,baseMultiplier:t.base_multiplier??t.baseMultiplier??1.2,riskLevel:t.risk_level??t.riskLevel??"medium",minDeposit:t.min_amount??t.minDeposit??100,maxDeposit:t.max_amount??t.maxDeposit??1e4,totalDeposited:t.total_deposited??t.totalDeposited??0,participantCount:t.participant_count??t.participantCount??0,expectedApr:t.expected_apr??t.expectedApr??t.apy??12,icon:a,color:t.color||["blue","green","purple"][r%3],features:t.features||["Daily rewards","Auto-compound"]}});m(o);const d=(a?.positions||Wq()).map((e,t)=>({id:e.id??`position-${t}`,channelId:e.channel_id??e.channelId??o[0]?.id??"channel-1",amount:e.amount??0,multiplier:e.multiplier??1,lockUntil:e.lock_until??e.lockUntil??(new Date).toISOString(),earnedSoFar:e.earned_so_far??e.earnedSoFar??0,status:e.status??"active"}));l(d);const u=(n?.projects||[{id:101,creator_id:12,creator_name:"Creator Collective",creator_avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=collective",title:"Creator Success Toolkit",description:"Launch an interactive toolkit that teaches new creators how to monetize within 30 days.",target_amount:5e4,amount_raised:24850,backer_count:186,days_left:18,min_pledge:75,status:"active",featured:!0,rewardTiers:[{amount:75,title:"Supporter",description:"Early access + invite to creator roundtable",estimatedDelivery:"45 days",backerCount:120},{amount:350,title:"Partner",description:"Custom growth audit & promo spotlight",estimatedDelivery:"60 days",backerCount:42}]},{id:102,creator_id:27,creator_name:"Community Capital",creator_avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=community_capital",title:"Growth Hub Community Fund",description:"Back emerging creators through pooled capital and mentorship credits.",target_amount:8e4,amount_raised:61200,backer_count:265,days_left:9,min_pledge:120,status:"active",featured:!1,rewardTiers:[{amount:120,title:"Backer",description:"Badge + quarterly impact report",estimatedDelivery:"30 days",backerCount:188},{amount:600,title:"Angel",description:"Board invite + co-marketing slots",estimatedDelivery:"75 days",backerCount:26}]}]).map((e,t)=>({id:e.id??t,creatorId:e.creator_id??e.creatorId??0,creatorName:e.creator_name??e.creatorName??"Growth Creator",creatorAvatar:e.creator_avatar??e.creatorAvatar??`https://api.dicebear.com/7.x/avataaars/svg?seed=growth_${t}`,title:e.title??"Growth initiative",description:e.description??"Help accelerate our platform metrics.",category:e.category??"growth",fundingGoal:e.target_amount??e.fundingGoal??1e4,currentFunding:e.amount_raised??e.currentFunding??2500,backerCount:e.backer_count??e.backerCount??Math.floor(40*Math.random())+10,daysLeft:e.days_left??e.daysLeft??14,minPledge:e.min_pledge??e.minPledge??50,rewardTiers:e.rewardTiers??[{amount:50,title:"Supporter",description:"Early updates & access",estimatedDelivery:"30 days",backerCount:42},{amount:250,title:"Champion",description:"Private workshop + rewards",estimatedDelivery:"45 days",backerCount:18}],featured:Boolean(e.featured),status:e.status??"active"}));c(u);const p=(i?.policies||[{id:"policy-1",name:"Social Safeguard",description:"Covers platform bans and sudden algorithm changes for verified creators.",premium_amount:45,coverage_amount:7500,deductible:250,min_followers:1e3,coverage:{platformBan:!0,algorithmChange:!0,contentStrike:!0,monetizationLoss:!0,followerLoss:!1},platforms:["instagram","youtube","tiktok"]},{id:"policy-2",name:"Monetization Guard",description:"Income replacement for monetization suspension and CPM volatility.",premium_amount:65,coverage_amount:12e3,deductible:400,min_followers:5e3,coverage:{platformBan:!1,algorithmChange:!0,contentStrike:!0,monetizationLoss:!0,followerLoss:!0},platforms:["youtube","twitch"]}]).map((e,t)=>({id:e.id??`shield-${t}`,name:e.name??"Growth Shield",description:e.description??"Protects against platform volatility.",coverage:e.coverage??{platformBan:!0,algorithmChange:!0,contentStrike:!0,monetizationLoss:!0,followerLoss:!1},monthlyPremium:e.premium_amount??e.monthlyPremium??49,maxCoverage:e.coverage_amount??e.maxCoverage??5e3,deductible:e.deductible??250,platforms:e.platforms??["instagram","youtube"],minFollowers:e.min_followers??e.minFollowers??1e3}));h(p)}catch(e){console.error("Failed to fetch growth hub data:",e)}finally{s(!1)}},_=[{id:"stable",name:"Stable Growth",description:"Low-risk staking with steady returns. Perfect for conservative investors.",lockPeriod:30,baseMultiplier:1.2,riskLevel:"low",minDeposit:100,maxDeposit:1e4,totalDeposited:125e3,participantCount:234,expectedApr:12.5,icon:Vr,color:"green",features:["Principal protection","Daily rewards","Auto-compound","Early withdrawal (penalty)"]},{id:"growth",name:"Growth Accelerator",description:"Medium-risk channel focused on platform growth metrics and user acquisition.",lockPeriod:90,baseMultiplier:1.8,riskLevel:"medium",minDeposit:250,maxDeposit:25e3,totalDeposited:89e3,participantCount:156,expectedApr:28.7,icon:as,color:"blue",features:["Growth bonuses","Platform rewards","Referral multipliers","Quarterly bonuses"]},{id:"venture",name:"Venture Pool",description:"High-risk, high-reward pool investing in emerging creators and technologies.",lockPeriod:180,baseMultiplier:3.2,riskLevel:"high",minDeposit:500,maxDeposit:5e4,totalDeposited:67e3,participantCount:89,expectedApr:45.8,icon:zr,color:"purple",features:["Creator equity","Tech innovation rewards","Exclusive opportunities","Governance rights"]},{id:"creator",name:"Creator Fund",description:"Support emerging creators while earning from their success.",lockPeriod:60,baseMultiplier:2.1,riskLevel:"medium",minDeposit:200,maxDeposit:15e3,totalDeposited:45e3,participantCount:78,expectedApr:32.1,icon:Zr,color:"orange",features:["Creator revenue share","Content access","Meet & greet events","Portfolio tracking"]}],k=Array.from({length:30},(e,t)=>{const r=new Date;return r.setDate(r.getDate()-(29-t)),{date:r.toISOString().split("T")[0],totalStaked:Math.floor(5e4*Math.random())+3e5,activeProjects:Math.floor(10*Math.random())+25,fundingVolume:Math.floor(25e3*Math.random())+75e3,premiumsCollected:Math.floor(5e3*Math.random())+15e3,rewardsDistributed:Math.floor(2e4*Math.random())+5e4}}),S=d.length>0?d:_,C=S.reduce((e,t)=>e+t.totalDeposited,0),O=S.reduce((e,t)=>e+t.participantCount,0),E=S.length?S.reduce((e,t)=>e+t.expectedApr,0)/S.length:0,P=e=>{switch(e){case"low":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"high":return"text-red-600 bg-red-100";default:return"text-pr-text-2 bg-pr-surface-2"}},T=e=>{const t={green:"from-green-500 to-emerald-600",blue:"from-blue-500 to-cyan-600",purple:"from-purple-500 to-pink-600",orange:"from-orange-500 to-red-600"};return t[e]||t.blue};return r?Ns.jsx("div",{className:"flex items-center justify-center h-64",children:Ns.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):Ns.jsxs("div",{className:"space-y-8",children:[Ns.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-blue-600 to-cyan-600 rounded-2xl p-8 text-white",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Growth Hub"}),Ns.jsx("p",{className:"text-purple-100 text-lg",children:"Amplify your earnings through staking, funding, and protection"})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsx("div",{className:"text-sm text-purple-200",children:"Your Portfolio Value"}),Ns.jsxs("div",{className:"text-3xl font-bold",children:[i.reduce((e,t)=>e+t.amount+t.earnedSoFar,0).toFixed(0)," Gems"]})]})]})}),Ns.jsx("div",{className:"border-b border-pr-surface-3",children:Ns.jsx("nav",{className:"flex space-x-8",children:[{id:"overview",label:"Overview",icon:Nt},{id:"channels",label:"Growth Channels",icon:as},{id:"funding",label:"Creator Funding",icon:zr},{id:"shield",label:"Social Shield",icon:Vr},{id:"economy",label:"Platform Economy",icon:kt}].map(e=>{const t=e.icon;return Ns.jsxs("button",{onClick:()=>n(e.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors "+(a===e.id?"border-purple-500 text-purple-600":"border-transparent text-pr-text-2 hover:text-pr-text-1 hover:border-pr-surface-3"),children:[Ns.jsx(t,{className:"w-4 h-4"}),Ns.jsx("span",{children:e.label})]},e.id)})})}),"overview"===a&&Ns.jsxs("div",{className:"space-y-8",children:[Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[Ns.jsx(Mq,{title:"Active Stakes",value:i.filter(e=>"active"===e.status).length.toString(),change:12.5,changeType:"increase",icon:Ns.jsx(hr,{className:"w-5 h-5"}),trend:[]}),Ns.jsx(Mq,{title:"Total Earnings",value:`${i.reduce((e,t)=>e+t.earnedSoFar,0).toFixed(1)} Gems`,change:8.3,changeType:"increase",icon:Ns.jsx(Ut,{className:"w-5 h-5"}),trend:[]}),Ns.jsx(Mq,{title:"Projects Backed",value:"3",change:50,changeType:"increase",icon:Ns.jsx(rr,{className:"w-5 h-5"}),trend:[]}),Ns.jsx(Mq,{title:"Shield Coverage",value:"$5,000",change:0,changeType:"increase",icon:Ns.jsx(Vr,{className:"w-5 h-5"}),trend:[]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-6",children:"Your Active Positions"}),i.length>0?Ns.jsx("div",{className:"space-y-4",children:i.map(e=>{const t=S.find(t=>t.id===e.channelId),r=t?.icon||hr,s=Math.ceil((new Date(e.lockUntil).getTime()-(new Date).getTime())/864e5);return Ns.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg p-4 border border-pr-surface-3",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-4",children:[Ns.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${T(t?.color||"blue")} rounded-xl flex items-center justify-center text-white`,children:Ns.jsx(r,{className:"w-6 h-6"})}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1",children:t?.name}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:[e.amount," Gems staked"]})]})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsxs("div",{className:"text-lg font-bold text-green-600",children:["+",e.earnedSoFar," Gems"]}),Ns.jsxs("div",{className:"text-sm text-pr-text-2",children:[s," days left"]})]})]}),Ns.jsxs("div",{className:"mt-4",children:[Ns.jsxs("div",{className:"flex items-center justify-between text-sm text-pr-text-2 mb-2",children:[Ns.jsx("span",{children:"Progress"}),Ns.jsxs("span",{children:[(e.earnedSoFar/(e.amount*(e.multiplier-1))*100).toFixed(1),"%"]})]}),Ns.jsx("div",{className:"w-full bg-pr-surface-3 rounded-full h-2",children:Ns.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,e.earnedSoFar/(e.amount*(e.multiplier-1))*100)}%`}})})]})]},e.id)})}):Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx(hr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-2",children:"No Active Positions"}),Ns.jsx("p",{className:"text-pr-text-2 mb-6",children:"Start growing your gems through our staking channels"}),Ns.jsx("button",{onClick:()=>n("channels"),className:"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200",children:"Explore Growth Channels"})]})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[Ns.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:Ns.jsx(as,{className:"w-6 h-6 text-green-600"})}),Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"font-semibold text-pr-text-1",children:"Platform Growth"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Last 30 days"})]})]}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Total Staked"}),Ns.jsxs("span",{className:"font-semibold",children:[C.toLocaleString()," Gems"]})]}),Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Active Stakers"}),Ns.jsx("span",{className:"font-semibold",children:O.toLocaleString()})]}),Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Avg APR"}),Ns.jsxs("span",{className:"font-semibold text-green-600",children:[E.toFixed(1),"%"]})]})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[Ns.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:Ns.jsx(zr,{className:"w-6 h-6 text-blue-600"})}),Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"font-semibold text-pr-text-1",children:"Creator Funding"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Active projects"})]})]}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Live Projects"}),Ns.jsx("span",{className:"font-semibold",children:o.length})]}),Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Total Funding"}),Ns.jsxs("span",{className:"font-semibold",children:["$",o.reduce((e,t)=>e+t.currentFunding,0).toLocaleString()]})]}),Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Success Rate"}),Ns.jsx("span",{className:"font-semibold text-green-600",children:"87%"})]})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[Ns.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:Ns.jsx(Vr,{className:"w-6 h-6 text-purple-600"})}),Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"font-semibold text-pr-text-1",children:"Social Shield"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Protection status"})]})]}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Coverage Level"}),Ns.jsx("span",{className:"font-semibold",children:"Pro Shield"})]}),Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Max Coverage"}),Ns.jsx("span",{className:"font-semibold",children:"$5,000"})]}),Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Status"}),Ns.jsx("span",{className:"font-semibold text-green-600",children:"Active"})]})]})]})]})]}),"channels"===a&&Ns.jsxs("div",{className:"space-y-8",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1",children:"Growth Channels"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Lock your gems for higher multipliers and platform rewards"})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsx("div",{className:"text-sm text-pr-text-2",children:"Your Available Balance"}),Ns.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[e?.gems_balance||0," Gems"]})]})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[0===d.length&&Ns.jsx("div",{className:"col-span-full bg-pr-surface-2 border border-dashed border-pr-surface-3 rounded-lg p-6 text-center text-sm text-pr-text-2",children:"Growth channels are being configured. Check back soon."}),S.map(e=>{const t=e.icon;return Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl border border-pr-surface-3 shadow-sm overflow-hidden hover:shadow-md transition-all duration-200",children:[Ns.jsxs("div",{className:`bg-gradient-to-r ${T(e.color)} p-6 text-white`,children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("div",{className:"w-12 h-12 bg-pr-surface-card/20 rounded-xl flex items-center justify-center",children:Ns.jsx(t,{className:"w-6 h-6"})}),Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-xl font-bold",children:e.name}),Ns.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${P(e.riskLevel)} text-pr-text-1`,children:[e.riskLevel.toUpperCase()," RISK"]})]})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsxs("div",{className:"text-2xl font-bold",children:[e.expectedApr.toFixed(1),"%"]}),Ns.jsx("div",{className:"text-sm opacity-75",children:"Expected APR"})]})]}),Ns.jsx("p",{className:"text-white/90",children:e.description})]}),Ns.jsxs("div",{className:"p-6",children:[Ns.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[Ns.jsxs("div",{children:[Ns.jsx("div",{className:"text-sm text-pr-text-2",children:"Lock Period"}),Ns.jsxs("div",{className:"font-semibold",children:[e.lockPeriod," days"]})]}),Ns.jsxs("div",{children:[Ns.jsx("div",{className:"text-sm text-pr-text-2",children:"Multiplier"}),Ns.jsxs("div",{className:"font-semibold",children:[e.baseMultiplier,"x"]})]}),Ns.jsxs("div",{children:[Ns.jsx("div",{className:"text-sm text-pr-text-2",children:"Min Deposit"}),Ns.jsxs("div",{className:"font-semibold",children:[e.minDeposit," Gems"]})]}),Ns.jsxs("div",{children:[Ns.jsx("div",{className:"text-sm text-pr-text-2",children:"Participants"}),Ns.jsx("div",{className:"font-semibold",children:e.participantCount})]})]}),Ns.jsxs("div",{className:"mb-6",children:[Ns.jsx("div",{className:"text-sm text-pr-text-2 mb-2",children:"Features"}),Ns.jsx("div",{className:"space-y-1",children:e.features.map((e,t)=>Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(At,{className:"w-4 h-4 text-green-600"}),Ns.jsx("span",{className:"text-sm text-pr-text-1",children:e})]},t))})]}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-4",children:[Ns.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Total Deposited"}),Ns.jsxs("span",{className:"font-semibold",children:[e.totalDeposited.toLocaleString()," Gems"]})]}),Ns.jsx("div",{className:"w-full bg-pr-surface-3 rounded-full h-2 mt-2",children:Ns.jsx("div",{className:`bg-gradient-to-r ${T(e.color)} h-2 rounded-full transition-all duration-300`,style:{width:`${Math.min(100,e.totalDeposited/e.maxDeposit*100)}%`}})})]}),Ns.jsxs("button",{onClick:()=>{f(e),b(!0)},className:`w-full bg-gradient-to-r ${T(e.color)} hover:opacity-90 text-white py-3 px-4 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2`,children:[Ns.jsx(hr,{className:"w-4 h-4"}),Ns.jsxs("span",{children:["Stake in ",e.name]})]})]})]})]},e.id)})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[Ns.jsx(vt,{className:"w-6 h-6 text-blue-600"}),Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1",children:"Staking Calculator"})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Amount (Gems)"}),Ns.jsx("input",{type:"number",placeholder:"1000",className:"w-full px-3 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Channel"}),Ns.jsx("select",{className:"w-full px-3 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:S.map(e=>Ns.jsx("option",{value:e.id,children:e.name},e.id))})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Estimated Rewards"}),Ns.jsx("div",{className:"px-3 py-2 bg-green-50 border border-green-200 rounded-lg text-green-800 font-medium",children:"+250 Gems"})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Total Return"}),Ns.jsx("div",{className:"px-3 py-2 bg-blue-50 border border-blue-200 rounded-lg text-blue-800 font-medium",children:"1,250 Gems"})]})]})]})]}),"funding"===a&&Ns.jsxs("div",{className:"space-y-8",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1",children:"Creator Funding"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Support innovative projects and earn from their success"})]}),Ns.jsxs("button",{onClick:()=>y(!0),className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 flex items-center space-x-2",children:[Ns.jsx(Rr,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Create Project"})]})]}),Ns.jsx("div",{className:"space-y-6",children:o.filter(e=>e.featured).map(e=>Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl border border-pr-surface-3 shadow-sm overflow-hidden",children:[Ns.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 border-b border-pr-surface-3",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[Ns.jsx(Zr,{className:"w-5 h-5 text-yellow-500"}),Ns.jsx("span",{className:"text-sm font-medium text-yellow-700",children:"Featured Project"})]}),Ns.jsxs("div",{className:"flex items-start justify-between",children:[Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("h3",{className:"text-xl font-bold text-pr-text-1 mb-2",children:e.title}),Ns.jsx("p",{className:"text-pr-text-2 mb-4",children:e.description}),Ns.jsxs("div",{className:"flex items-center space-x-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("img",{src:e.creatorAvatar,alt:e.creatorName,className:"w-8 h-8 rounded-full"}),Ns.jsx("span",{className:"font-medium text-pr-text-1",children:e.creatorName})]}),Ns.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:e.category})]})]}),Ns.jsxs("div",{className:"text-right ml-6",children:[Ns.jsxs("div",{className:"text-2xl font-bold text-pr-text-1",children:["$",e.currentFunding.toLocaleString()]}),Ns.jsxs("div",{className:"text-sm text-pr-text-2",children:["of $",e.fundingGoal.toLocaleString()," goal"]})]})]})]}),Ns.jsxs("div",{className:"p-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-6",children:[Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"text-lg font-bold text-pr-text-1",children:e.backerCount}),Ns.jsx("div",{className:"text-sm text-pr-text-2",children:"Backers"})]}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"text-lg font-bold text-pr-text-1",children:e.daysLeft}),Ns.jsx("div",{className:"text-sm text-pr-text-2",children:"Days Left"})]}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsxs("div",{className:"text-lg font-bold text-green-600",children:[(e.currentFunding/e.fundingGoal*100).toFixed(0),"%"]}),Ns.jsx("div",{className:"text-sm text-pr-text-2",children:"Funded"})]})]}),Ns.jsx("button",{onClick:()=>{},className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200",children:"Back This Project"})]}),Ns.jsx("div",{className:"w-full bg-pr-surface-3 rounded-full h-3 mb-4",children:Ns.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,e.currentFunding/e.fundingGoal*100)}%`}})}),Ns.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.rewardTiers.slice(0,3).map((e,t)=>Ns.jsxs("div",{className:"border border-pr-surface-3 rounded-lg p-4",children:[Ns.jsxs("div",{className:"text-lg font-bold text-pr-text-1 mb-2",children:["$",e.amount]}),Ns.jsx("h4",{className:"font-semibold text-pr-text-1 mb-2",children:e.title}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mb-3",children:e.description}),Ns.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ns.jsxs("span",{className:"text-pr-text-2",children:[e.backerCount," backers"]}),Ns.jsx("span",{className:"text-blue-600",children:e.estimatedDelivery})]})]},t))})]})]},e.id))}),Ns.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.filter(e=>!e.featured).map(e=>Ns.jsx("div",{className:"bg-pr-surface-card rounded-xl border border-pr-surface-3 shadow-sm overflow-hidden hover:shadow-md transition-all duration-200",children:Ns.jsxs("div",{className:"p-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[Ns.jsx("img",{src:e.creatorAvatar,alt:e.creatorName,className:"w-10 h-10 rounded-full"}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1",children:e.creatorName}),Ns.jsx("span",{className:"text-sm text-pr-text-2",children:e.category})]})]}),Ns.jsx("h3",{className:"text-lg font-bold text-pr-text-1 mb-2",children:e.title}),Ns.jsx("p",{className:"text-pr-text-2 mb-4 line-clamp-2",children:e.description}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsxs("div",{className:"flex justify-between text-sm",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Funding Progress"}),Ns.jsxs("span",{className:"font-medium",children:["$",e.currentFunding.toLocaleString()," / $",e.fundingGoal.toLocaleString()]})]}),Ns.jsx("div",{className:"w-full bg-pr-surface-3 rounded-full h-2",children:Ns.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,e.currentFunding/e.fundingGoal*100)}%`}})}),Ns.jsxs("div",{className:"flex justify-between text-sm text-pr-text-2",children:[Ns.jsxs("span",{children:[e.backerCount," backers"]}),Ns.jsxs("span",{children:[e.daysLeft," days left"]})]})]}),Ns.jsx("button",{className:"w-full mt-4 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white py-2 px-4 rounded-lg font-medium transition-all duration-200",children:"View Project"})]})},e.id))})]}),"shield"===a&&Ns.jsxs("div",{className:"space-y-8",children:[Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1 mb-2",children:"Social Shield"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Protect your social media earnings with comprehensive insurance coverage"})]}),Ns.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-xl p-6",children:Ns.jsxs("div",{className:"flex items-start space-x-4",children:[Ns.jsx(Pt,{className:"w-6 h-6 text-orange-600 mt-1"}),Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"font-semibold text-orange-900 mb-2",children:"Why You Need Social Shield"}),Ns.jsxs("ul",{className:"text-orange-800 space-y-1 text-sm",children:[Ns.jsx("li",{children:" Platform algorithm changes can reduce your reach by up to 80%"}),Ns.jsx("li",{children:" Account bans can eliminate months of income overnight"}),Ns.jsx("li",{children:" Content strikes can impact monetization for weeks"}),Ns.jsx("li",{children:" Follower loss from platform issues affects future earnings"})]})]})]})}),Ns.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{id:"basic",name:"Basic Shield",coverage:{platformBan:!1,algorithmChange:!0,contentStrike:!0,monetizationLoss:!1,followerLoss:!1},monthlyPremium:29,maxCoverage:1e3,deductible:50,platforms:["Instagram","TikTok"],minFollowers:1e3},{id:"pro",name:"Pro Shield",coverage:{platformBan:!0,algorithmChange:!0,contentStrike:!0,monetizationLoss:!0,followerLoss:!1},monthlyPremium:79,maxCoverage:5e3,deductible:100,platforms:["Instagram","TikTok","YouTube","Twitter"],minFollowers:5e3},{id:"enterprise",name:"Enterprise Shield",coverage:{platformBan:!0,algorithmChange:!0,contentStrike:!0,monetizationLoss:!0,followerLoss:!0},monthlyPremium:199,maxCoverage:25e3,deductible:250,platforms:["Instagram","TikTok","YouTube","Twitter","LinkedIn","Twitch"],minFollowers:25e3}].map(e=>Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl border-2 shadow-sm overflow-hidden "+("pro"===e.id?"border-blue-500 ring-2 ring-blue-100":"border-pr-surface-3"),children:["pro"===e.id&&Ns.jsx("div",{className:"bg-blue-500 text-white text-center py-2 text-sm font-medium",children:"Most Popular"}),Ns.jsxs("div",{className:"p-6",children:[Ns.jsxs("div",{className:"text-center mb-6",children:[Ns.jsx("h3",{className:"text-xl font-bold text-pr-text-1 mb-2",children:e.name}),Ns.jsxs("div",{className:"text-3xl font-bold text-pr-text-1",children:["$",e.monthlyPremium,Ns.jsx("span",{className:"text-sm font-normal text-pr-text-2",children:"/month"})]}),Ns.jsxs("div",{className:"text-sm text-pr-text-2",children:["Up to $",e.maxCoverage.toLocaleString()," coverage"]})]}),Ns.jsxs("div",{className:"space-y-4 mb-6",children:[Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1 mb-2",children:"Coverage Includes:"}),Ns.jsx("ul",{className:"space-y-2",children:Object.entries(e.coverage).map(([e,t])=>Ns.jsxs("li",{className:"flex items-center space-x-2",children:[t?Ns.jsx(At,{className:"w-4 h-4 text-green-600"}):Ns.jsx(At,{className:"w-4 h-4 text-gray-400"}),Ns.jsx("span",{className:"text-sm "+(t?"text-pr-text-1":"text-gray-400"),children:e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())})]},e))})]}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1 mb-2",children:"Platforms:"}),Ns.jsx("div",{className:"flex flex-wrap gap-2",children:e.platforms.map(e=>Ns.jsx("span",{className:"px-2 py-1 bg-pr-surface-2 text-pr-text-1 rounded text-xs",children:e},e))})]}),Ns.jsxs("div",{className:"text-sm text-pr-text-2",children:[Ns.jsxs("div",{children:["Deductible: $",e.deductible]}),Ns.jsxs("div",{children:["Min followers: ",e.minFollowers.toLocaleString()]})]})]}),Ns.jsxs("button",{onClick:()=>w(!0),className:"w-full py-3 px-4 rounded-lg font-medium transition-all duration-200 "+("pro"===e.id?"bg-blue-500 hover:bg-blue-600 text-white":"bg-pr-surface-2 hover:bg-pr-surface-3 text-pr-text-1"),children:["Get ",e.name]})]})]},e.id))}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Recent Claims"}),Ns.jsxs("div",{className:"text-center py-8 text-pr-text-2",children:[Ns.jsx(Vr,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),Ns.jsx("p",{children:"No claims yet - you're well protected!"})]})]})]}),"economy"===a&&Ns.jsxs("div",{className:"space-y-8",children:[Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1 mb-2",children:"Platform Economy"}),Ns.jsx("p",{className:"text-pr-text-2",children:"How your participation drives the entire Promorang ecosystem"})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[Ns.jsx(Mq,{title:"Total Value Locked",value:`${C.toLocaleString()} Gems`,change:23.4,changeType:"increase",icon:Ns.jsx(hr,{className:"w-5 h-5"}),trend:k.slice(-7).map(e=>({date:e.date,value:e.totalStaked}))}),Ns.jsx(Mq,{title:"Active Projects",value:o.length.toString(),change:15.2,changeType:"increase",icon:Ns.jsx(zr,{className:"w-5 h-5"}),trend:k.slice(-7).map(e=>({date:e.date,value:e.activeProjects}))}),Ns.jsx(Mq,{title:"Funding Volume",value:`$${o.reduce((e,t)=>e+t.currentFunding,0).toLocaleString()}`,change:31.7,changeType:"increase",icon:Ns.jsx(Bt,{className:"w-5 h-5"}),trend:k.slice(-7).map(e=>({date:e.date,value:e.fundingVolume}))}),Ns.jsx(Mq,{title:"Shield Premiums",value:"$47,000",change:8.9,changeType:"increase",icon:Ns.jsx(Vr,{className:"w-5 h-5"}),trend:k.slice(-7).map(e=>({date:e.date,value:e.premiumsCollected}))})]}),Ns.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-6",children:"Economic Flow"}),Ns.jsx(Tq,{data:k.map(e=>({date:e.date,value:e.rewardsDistributed,secondary:e.fundingVolume})),height:300,primaryKey:"value",secondaryKey:"secondary",primaryColor:"#10b981",secondaryColor:"#3b82f6"}),Ns.jsxs("div",{className:"flex justify-center space-x-6 mt-4 text-sm",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),Ns.jsx("span",{className:"text-pr-text-2",children:"Rewards Distributed"})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),Ns.jsx("span",{className:"text-pr-text-2",children:"Funding Volume"})]})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-6",children:"Value Distribution"}),Ns.jsx(Pq,{data:[{name:"Staking Rewards",value:45,color:"#10b981"},{name:"Creator Funding",value:30,color:"#3b82f6"},{name:"Shield Reserves",value:15,color:"#8b5cf6"},{name:"Platform Development",value:10,color:"#f59e0b"}],height:300})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-6",children:"How Growth Hub Stimulates the Economy"}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{className:"flex items-start space-x-3",children:[Ns.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:Ns.jsx(as,{className:"w-4 h-4 text-green-600"})}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1",children:"Staking Creates Liquidity"}),Ns.jsx("p",{className:"text-pr-text-2 text-sm",children:"When you stake gems, they're used to fund platform operations, creator rewards, and new feature development."})]})]}),Ns.jsxs("div",{className:"flex items-start space-x-3",children:[Ns.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:Ns.jsx(zr,{className:"w-4 h-4 text-blue-600"})}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1",children:"Funding Drives Innovation"}),Ns.jsx("p",{className:"text-pr-text-2 text-sm",children:"Creator funding projects introduce new content types and engagement methods, expanding earning opportunities."})]})]}),Ns.jsxs("div",{className:"flex items-start space-x-3",children:[Ns.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:Ns.jsx(Vr,{className:"w-4 h-4 text-purple-600"})}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1",children:"Shield Stabilizes Earnings"}),Ns.jsx("p",{className:"text-pr-text-2 text-sm",children:"Social Shield premiums create a safety net that encourages more users to participate confidently."})]})]})]}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{className:"flex items-start space-x-3",children:[Ns.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:Ns.jsx($t,{className:"w-4 h-4 text-orange-600"})}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1",children:"Network Effects"}),Ns.jsx("p",{className:"text-pr-text-2 text-sm",children:"More participants mean better rates, higher liquidity, and stronger protection for everyone."})]})]}),Ns.jsxs("div",{className:"flex items-start space-x-3",children:[Ns.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:Ns.jsx(ts,{className:"w-4 h-4 text-red-600"})}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1",children:"Value Alignment"}),Ns.jsx("p",{className:"text-pr-text-2 text-sm",children:"Your success directly correlates with platform growth, creating aligned incentives for long-term value creation."})]})]}),Ns.jsxs("div",{className:"flex items-start space-x-3",children:[Ns.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0",children:Ns.jsx(cr,{className:"w-4 h-4 text-yellow-600"})}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1",children:"Continuous Innovation"}),Ns.jsx("p",{className:"text-pr-text-2 text-sm",children:"Funds from Growth Hub activities are reinvested into new earning opportunities and platform improvements."})]})]})]})]})]})]}),Ns.jsx(Fq,{isOpen:g,onClose:()=>b(!1),channel:x,user:e,onSuccess:N}),Ns.jsx(zq,{isOpen:v,onClose:()=>y(!1),user:e,onSuccess:N}),Ns.jsx(Uq,{isOpen:j,onClose:()=>w(!1),user:e,onSuccess:N,policies:p})]})}function Vq(e){const t=e?.metadata?.pool??{};return{id:e.id,title:e.title??"Untitled Drop",description:e.description??"",createdAt:e.created_at??"",gemsReward:Number(e.gems_reward??0),keysCost:Number(e.keys_cost??0),status:e.status??"active",gemPoolRemaining:Number(t.remaining??0),gemPoolTotal:Number(t.total??0)}}function Hq({user:e,isOpen:t,onClose:r,onSuccess:s}){const[a,n]=u.useState(""),[i,l]=u.useState(!1),[o,c]=u.useState(null),[d,m]=u.useState(!1);if(!t||!e)return null;const p=e=>{const t=document.createElement("div");t.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 animate-pulse",t.innerHTML=`\n      <div class="flex items-center space-x-3">\n        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">\n          <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>\n        </svg>\n        <div>\n          <div class="font-bold">Referral Success!</div>\n          <div class="text-sm">You earned ${e} points!</div>\n        </div>\n      </div>\n    `,document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},4e3)};return Ns.jsx(Us,{isOpen:t,onClose:r,maxWidth:"2xl",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex flex-col gap-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between border-b border-pr-surface-3 pb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(us,{className:"h-6 w-6 text-purple-600"}),Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"Referral Program"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Invite friends and earn together"})]})]}),Ns.jsx("button",{onClick:r,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close referral modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]}),Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"rounded-2xl border border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50 p-6",children:[Ns.jsx("h3",{className:"mb-4 text-lg font-semibold text-purple-900",children:"Your Referral Code"}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:space-x-3",children:[Ns.jsx("code",{className:"flex-1 rounded-xl border bg-pr-surface-card px-4 py-3 text-center font-mono text-lg",children:e.referral_code}),Ns.jsx("button",{onClick:async()=>{const t=`https://promorang.com?ref=${e.referral_code}`;await navigator.clipboard.writeText(t),m(!0),setTimeout(()=>m(!1),2e3)},className:"rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-3 font-medium text-white transition-colors hover:from-purple-600 hover:to-pink-600",children:d?"Copied!":"Copy Link"})]}),Ns.jsx("p",{className:"text-sm text-purple-700",children:"Share your referral code to earn bonus rewards when friends join Promorang."})]})]}),Ns.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[Ns.jsx("div",{className:"rounded-2xl border border-pr-surface-3 p-4",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(Xt,{className:"h-5 w-5 text-pink-600"}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1",children:"Earn Together"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Both you and your friend earn rewards"})]})]}),Ns.jsx("span",{className:"text-sm font-medium text-purple-600",children:"+500 points"})]})}),Ns.jsx("div",{className:"rounded-2xl border border-pr-surface-3 p-4",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(us,{className:"h-5 w-5 text-blue-600"}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1",children:"Track Progress"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"See the status of your referrals"})]})]}),Ns.jsx("span",{className:"text-sm font-medium text-blue-600",children:"Real-time"})]})})]}),Ns.jsxs("div",{className:"rounded-2xl border border-pr-surface-3 p-6",children:[Ns.jsx("h3",{className:"mb-4 text-lg font-semibold text-pr-text-1",children:"Have a referral code?"}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"mb-2 block text-sm font-medium text-pr-text-1",children:"Enter your friend's code"}),Ns.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[Ns.jsx("input",{type:"text",value:a,onChange:e=>n(e.target.value.toUpperCase()),placeholder:"PROMO-1234",className:"flex-1 rounded-xl border border-pr-surface-3 px-4 py-3 uppercase focus:border-transparent focus:ring-2 focus:ring-purple-500"}),Ns.jsx("button",{onClick:async()=>{if(a.trim()){l(!0),c(null);try{const e=await fetch("/api/users/process-referral",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({referral_code:a.toUpperCase()})});if(e.ok){const t=await e.json();s(),r(),p(t.referred_reward)}else{const t=await e.json();c(t.error||"Failed to process referral")}}catch(e){console.error("Referral processing failed:",e),c("Network error occurred")}finally{l(!1)}}else c("Please enter a referral code")},disabled:i,className:"rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 px-6 py-3 font-medium text-white transition-colors hover:from-purple-600 hover:to-pink-600 disabled:cursor-not-allowed disabled:opacity-50",children:i?"Processing...":"Apply Code"})]})]}),o&&Ns.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-red-700",children:o}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"When you enter a friend's referral code, you'll both earn bonus rewards once they complete their first challenge."})]})]}),Ns.jsxs("div",{className:"rounded-2xl border border-purple-300 border-dashed bg-pr-surface-2 p-6",children:[Ns.jsx("h3",{className:"mb-4 text-lg font-semibold text-purple-900",children:"Referral Tips"}),Ns.jsxs("ul",{className:"space-y-3 text-sm text-purple-700",children:[Ns.jsx("li",{children:" Share your code with creators who love growing their audience"}),Ns.jsx("li",{children:" You'll earn bonus points when they complete their first drop"}),Ns.jsx("li",{children:" There's no limit to how many friends you can refer"})]})]}),e.referred_by&&Ns.jsx("div",{className:"rounded-2xl border border-green-200 bg-green-50 p-4",children:Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(St,{className:"h-6 w-6 text-green-600"}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-medium text-green-900",children:"Referral Applied"}),Ns.jsxs("p",{className:"text-sm text-green-700",children:["You joined using code: ",e.referred_by]})]})]})}),Ns.jsxs("div",{className:"rounded-2xl border border-yellow-200 bg-gradient-to-br from-yellow-50 to-orange-50 p-6",children:[Ns.jsx("h4",{className:"mb-3 font-medium text-yellow-900",children:"Earning Potential"}),Ns.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:"500"}),Ns.jsx("div",{className:"text-sm text-yellow-600",children:"Points per referral"})]}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:""}),Ns.jsx("div",{className:"text-sm text-yellow-600",children:"No limit on referrals"})]})]})]})]})]})})}function Gq({user:e,applicationId:t,dropTitle:r,isOpen:s,onClose:a,onSuccess:n}){const[i,l]=u.useState("url"),[o,c]=u.useState(""),[d,m]=u.useState(""),[p,h]=u.useState(!1),[x,f]=u.useState(null);if(!s||!e)return null;const g=()=>{c(""),m(""),l("url"),f(null)},b=e=>{try{return new URL(e),!0}catch(t){return!1}},v=()=>{const e=document.createElement("div");e.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 animate-pulse",e.innerHTML='\n      <div class="flex items-center space-x-3">\n        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">\n          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>\n        </svg>\n        <div>\n          <div class="font-bold">Submission Sent!</div>\n          <div class="text-sm">Your work has been submitted for review</div>\n        </div>\n      </div>\n    ',document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},4e3)};return Ns.jsx(Us,{isOpen:s,onClose:a,maxWidth:"2xl",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex max-h-[85vh] flex-col overflow-hidden rounded-2xl bg-pr-surface-card",children:[Ns.jsxs("div",{className:"flex items-center justify-between border-b border-pr-surface-3 px-6 py-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(cs,{className:"h-6 w-6 text-purple-600"}),Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"Submit Your Work"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:r})]})]}),Ns.jsx("button",{onClick:a,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close drop submission modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]}),Ns.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6 space-y-6",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-3",children:"Submission Type"}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Ns.jsxs("button",{onClick:()=>l("url"),className:"p-4 rounded-xl border-2 transition-colors "+("url"===i?"border-purple-500 bg-purple-50":"border-pr-surface-3 hover:border-pr-surface-3"),children:[Ns.jsx(dr,{className:"w-6 h-6 mx-auto mb-2 text-purple-600"}),Ns.jsx("div",{className:"text-sm font-medium",children:"URL Link"}),Ns.jsx("div",{className:"text-xs text-pr-text-2",children:"Submit a link to your work"})]}),Ns.jsxs("button",{onClick:()=>l("text"),className:"p-4 rounded-xl border-2 transition-colors "+("text"===i?"border-purple-500 bg-purple-50":"border-pr-surface-3 hover:border-pr-surface-3"),children:[Ns.jsx(Yt,{className:"w-6 h-6 mx-auto mb-2 text-purple-600"}),Ns.jsx("div",{className:"text-sm font-medium",children:"Text Content"}),Ns.jsx("div",{className:"text-xs text-pr-text-2",children:"Submit text directly"})]})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"url"===i?"URL Link *":"Text Content *"}),"url"===i?Ns.jsx("input",{type:"url",value:o,onChange:e=>c(e.target.value),placeholder:"https://example.com/your-work",className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):Ns.jsx("textarea",{value:o,onChange:e=>c(e.target.value),placeholder:"Enter your text content here...",rows:6,className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Additional Notes (Optional)"}),Ns.jsx("textarea",{value:d,onChange:e=>m(e.target.value),placeholder:"Any additional context or notes about your submission...",rows:3,className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),Ns.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[Ns.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Submission Guidelines"}),Ns.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[Ns.jsx("li",{children:" Ensure your submission meets all drop requirements"}),Ns.jsx("li",{children:" Double-check URLs are accessible and working"}),Ns.jsx("li",{children:" Include any relevant context in the additional notes"}),Ns.jsx("li",{children:" Your submission will be reviewed within 24-48 hours"})]})]}),x&&Ns.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-start space-x-3",children:[Ns.jsx(Pt,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),Ns.jsx("p",{className:"text-sm text-red-700",children:x})]}),Ns.jsxs("div",{className:"flex justify-end",children:[Ns.jsx("button",{onClick:a,className:"px-4 py-2 border border-pr-surface-3 rounded-lg text-pr-text-1 font-medium hover:bg-pr-surface-2 transition-colors",children:"Cancel"}),Ns.jsxs("button",{onClick:async()=>{if(o.trim())if("url"!==i||b(o)){h(!0),f(null);try{const e=await fetch(`/api/drop-applications/${t}/submit`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({submission_type:i,submission_data:o,submission_notes:d})});if(e.ok)n(),a(),g(),v();else{const t=await e.json();f(t.error||"Submission failed")}}catch(e){console.error("Submission failed:",e),f("Network error occurred")}finally{h(!1)}}else f("Please provide a valid URL");else f("Please provide your submission data")},disabled:p,className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-medium flex items-center space-x-2 hover:from-purple-600 hover:to-pink-600 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[p?Ns.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):Ns.jsx(qr,{className:"w-4 h-4"}),Ns.jsx("span",{children:p?"Submitting...":"Submit Work"})]})]})]})]})})}function Yq({application:e,onSubmissionSuccess:t}){const[r,s]=u.useState(!1),a=e.drop_title?.toLowerCase().includes("[demo]")||e.drop_title?.toLowerCase().includes("demo")||e.application_message?.toLowerCase().includes("demo"),n="approved"===e.status,i="approved"===e.status;return Ns.jsxs(Ns.Fragment,{children:[Ns.jsxs("div",{className:"rounded-2xl p-6 border "+(a?"bg-orange-50 border-orange-200":"bg-pr-surface-2 border-pr-border"),children:[a&&Ns.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-lg px-3 py-2 mb-4 text-center",children:Ns.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm font-medium",children:[Ns.jsx("span",{children:""}),Ns.jsx("span",{children:"DEMO APPLICATION - No real gems earned"}),Ns.jsx("span",{children:""})]})}),Ns.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ns.jsxs("div",{className:"flex-1",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1",children:e.drop_title}),e.advertiser_brand_name&&Ns.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-medium",children:e.advertiser_brand_name})]}),Ns.jsx("p",{className:"text-pr-text-2 mb-3",children:e.application_message}),Ns.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[Ns.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${(e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"completed":return"bg-purple-100 text-purple-800";case"rejected":return"bg-red-100 text-red-800";case"submitted":return"bg-orange-100 text-orange-800";default:return"bg-pr-surface-2 text-pr-text-1"}})(e.status)}`,children:[(e=>{switch(e){case"completed":return Ns.jsx(At,{className:"w-4 h-4"});case"pending":case"submitted":return Ns.jsx(Rt,{className:"w-4 h-4"});case"rejected":return Ns.jsx(Pt,{className:"w-4 h-4"});default:return null}})(e.status),Ns.jsx("span",{children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),a&&Ns.jsx("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs font-medium",children:"DEMO"}),e.review_score&&Ns.jsxs("span",{className:"text-sm text-pr-text-2",children:["Score: ",e.review_score,"/10"]}),i&&Ns.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full animate-pulse",children:"Submission Required"})]})]}),Ns.jsxs("div",{className:"text-right ml-6",children:[Ns.jsx("div",{className:"text-sm text-pr-text-2 mb-1",children:a?"Demo Earned":"Earned"}),Ns.jsxs("div",{className:"font-semibold "+(a?"text-orange-600":"text-purple-600"),children:[e.gems_earned," gems ",a&&"(Demo)"]}),Ns.jsxs("div",{className:"text-sm text-pr-text-2 mt-1",children:["Cost: ",e.key_cost," keys"]})]})]}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 text-pr-text-2",children:[Ns.jsx(yt,{className:"w-4 h-4"}),Ns.jsxs("span",{className:"text-sm",children:["Applied ",new Date(e.applied_at).toLocaleDateString()]})]}),Ns.jsxs("div",{className:"flex items-center space-x-3",children:[e.completed_at&&Ns.jsxs("div",{className:"text-green-600 font-medium text-sm",children:["Completed ",new Date(e.completed_at).toLocaleDateString()]}),n&&Ns.jsxs("button",{onClick:()=>s(!0),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-2 text-white "+(a?"bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600":"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600"),children:[Ns.jsx(cs,{className:"w-4 h-4"}),Ns.jsx("span",{children:a?"Demo Submit":"Submit Work"})]})]})]})]}),Ns.jsx(Gq,{user:null,applicationId:e.id,dropTitle:e.drop_title,isOpen:r,onClose:()=>s(!1),onSuccess:()=>{t(),s(!1)}})]})}function Jq({user:e,isOpen:t,onClose:r,onSuccess:s}){const[a,n]=u.useState(1),[i,l]=u.useState(!1),[o,c]=u.useState(null),[d,m]=u.useState({full_name:"",instagram_username:"",phone_number:"",email:"",follower_count:""}),[p,h]=u.useState(null);if(!t||!e)return null;return Ns.jsx(Us,{isOpen:t,onClose:r,maxWidth:"2xl",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex max-h-[85vh] flex-col overflow-hidden",children:[Ns.jsx("div",{className:"border-b border-pr-surface-3 px-6 pt-6 pb-4",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(as,{className:"h-5 w-5 text-blue-600"}),Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"Influence Rewards"})]}),Ns.jsx("button",{onClick:r,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close influence rewards modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]})}),Ns.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-6 pt-4",children:[1===a&&Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4",children:Ns.jsx(us,{className:"w-8 h-8 text-white"})}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-2",children:"Earn Points from Your Influence"}),Ns.jsx("p",{className:"text-pr-text-2 text-sm",children:"Get dynamic monthly points based on your real social media follower count"})]}),Ns.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4",children:[Ns.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"How It Works"}),Ns.jsxs("div",{className:"space-y-2 text-sm text-blue-700",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(At,{className:"w-4 h-4 text-blue-600"}),Ns.jsx("span",{children:"Your follower count  0.01 = monthly points"})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(At,{className:"w-4 h-4 text-blue-600"}),Ns.jsx("span",{children:"Points refresh monthly - no rollover"})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(At,{className:"w-4 h-4 text-blue-600"}),Ns.jsx("span",{children:"Must re-verify each month to maintain points"})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(At,{className:"w-4 h-4 text-blue-600"}),Ns.jsx("span",{children:"Minimum 500 followers required"})]})]})]}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsx("h4",{className:"font-medium text-pr-text-1",children:"Enter Your Information"}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ns.jsxs("div",{children:[Ns.jsxs("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:[Ns.jsx(ds,{className:"w-4 h-4 inline mr-1"}),"Full Name *"]}),Ns.jsx("input",{type:"text",value:d.full_name,onChange:e=>m({...d,full_name:e.target.value}),placeholder:"Enter your full name",className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),Ns.jsxs("div",{children:[Ns.jsxs("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:[Ns.jsx(ir,{className:"w-4 h-4 inline mr-1"}),"Instagram Username *"]}),Ns.jsx("input",{type:"text",value:d.instagram_username,onChange:e=>m({...d,instagram_username:e.target.value}),placeholder:"@yourusername",className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),Ns.jsxs("div",{children:[Ns.jsxs("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:[Ns.jsx(Mr,{className:"w-4 h-4 inline mr-1"}),"Phone Number *"]}),Ns.jsx("input",{type:"tel",value:d.phone_number,onChange:e=>m({...d,phone_number:e.target.value}),placeholder:"+1 (555) 123-4567",className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),Ns.jsxs("div",{children:[Ns.jsxs("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:[Ns.jsx(gr,{className:"w-4 h-4 inline mr-1"}),"Email Address *"]}),Ns.jsx("input",{type:"email",value:d.email,onChange:e=>m({...d,email:e.target.value}),placeholder:"your@email.com",className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),Ns.jsxs("div",{children:[Ns.jsxs("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:[Ns.jsx(us,{className:"w-4 h-4 inline mr-1"}),"Current Follower Count *"]}),Ns.jsx("input",{type:"number",min:"500",value:d.follower_count,onChange:e=>m({...d,follower_count:e.target.value}),placeholder:"e.g. 5000",className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),d.follower_count&&Ns.jsx("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("span",{className:"text-sm text-green-700",children:"Monthly Points:"}),Ns.jsxs("span",{className:"font-bold text-green-800",children:[(x=parseInt(d.follower_count)||0,Math.floor(.01*x))," points"]})]})})]})]}),o&&Ns.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:Ns.jsxs("div",{className:"flex items-start space-x-2",children:[Ns.jsx(Pt,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),Ns.jsx("p",{className:"text-sm text-red-700",children:o})]})}),Ns.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:Ns.jsxs("div",{className:"flex items-start space-x-2",children:[Ns.jsx(Pt,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),Ns.jsxs("div",{className:"text-sm text-yellow-800",children:[Ns.jsx("p",{className:"font-medium mb-1",children:"Important Notes:"}),Ns.jsxs("ul",{className:"space-y-1",children:[Ns.jsx("li",{children:" Your information will be verified through our Many Chat integration"}),Ns.jsx("li",{children:" Points are awarded monthly and do not carry over"}),Ns.jsx("li",{children:" You must re-register each month to maintain your rewards"}),Ns.jsx("li",{children:" Minimum 500 followers required"})]})]})]})}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 border border-pr-surface-3 rounded-lg text-pr-text-1 font-medium hover:bg-pr-surface-2 transition-colors",children:"Cancel"}),Ns.jsx("button",{onClick:async()=>{if(d.full_name&&d.instagram_username&&d.phone_number&&d.email&&d.follower_count)if(parseInt(d.follower_count)<500)c("Minimum 500 followers required for influence rewards");else{l(!0),c(null);try{const e=await fetch("/api/users/register-influence-rewards",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({full_name:d.full_name,platform:"instagram",platform_username:d.instagram_username,phone_number:d.phone_number,email:d.email,follower_count:parseInt(d.follower_count)})});if(e.ok){const t=await e.json();h(t),n(2)}else{const t=await e.json();c(t.error||"Registration failed")}}catch(e){console.error("Influence rewards registration failed:",e),c("Network error occurred")}finally{l(!1)}}else c("Please fill in all required fields")},disabled:i,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",children:i?"Processing...":"Register for Rewards"})]})]}),2===a&&p&&Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Ns.jsx(At,{className:"w-8 h-8 text-green-600"})}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-2",children:"Registration Successful!"}),Ns.jsxs("p",{className:"text-pr-text-2 text-sm",children:["Your influence rewards have been calculated for ",(()=>{const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`})()]})]}),Ns.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-6",children:Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"Platform:"}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(ir,{className:"w-4 h-4 text-pink-600"}),Ns.jsx("span",{className:"font-medium",children:"Instagram"})]})]}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"Username:"}),Ns.jsxs("span",{className:"font-medium",children:["@",p.platform_username]})]}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"Followers:"}),Ns.jsx("span",{className:"font-bold text-blue-600",children:p.follower_count.toLocaleString()})]}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"Monthly Points:"}),Ns.jsxs("span",{className:"font-bold text-green-600",children:[p.points_calculated," points"]})]}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("span",{className:"text-sm text-pr-text-1",children:"Current Month:"}),Ns.jsx("span",{className:"font-medium",children:p.current_month})]})]})}),Ns.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:Ns.jsxs("div",{className:"flex items-start space-x-2",children:[Ns.jsx(yt,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),Ns.jsxs("div",{className:"text-sm text-blue-800",children:[Ns.jsx("p",{className:"font-medium mb-1",children:"Next Steps:"}),Ns.jsxs("p",{children:["Your registration has been submitted for verification through our Many Chat system. You'll be able to claim your ",p.points_calculated," points once verification is complete."]})]})]})}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsx("button",{onClick:async()=>{l(!0),c(null);try{const e=await fetch("/api/users/claim-influence-points",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({})});if(e.ok)await e.json(),s(),r(),n(1),m({full_name:"",instagram_username:"",phone_number:"",email:"",follower_count:""});else{const t=await e.json();c(t.error||"Failed to claim points")}}catch(e){console.error("Point claiming failed:",e),c("Network error occurred")}finally{l(!1)}},disabled:i,className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 disabled:opacity-50 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",children:i?"Checking...":"Claim Points (if verified)"}),Ns.jsx("button",{onClick:()=>{n(1),h(null),c(null)},className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg text-pr-text-1 font-medium hover:bg-pr-surface-2 transition-colors",children:"Register Different Account"})]}),o&&Ns.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:Ns.jsxs("div",{className:"flex items-start space-x-2",children:[Ns.jsx(Pt,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),Ns.jsx("p",{className:"text-sm text-red-700",children:o})]})})]})]})]})});var x}function Zq({isOpen:e,onClose:t,user:r,onSuccess:s}){const[a,n]=u.useState({}),[i,l]=u.useState({instagram:"",twitter:"",linkedin:"",facebook:"",youtube:"",tiktok:""}),[o,c]=u.useState(!1),[d,m]=u.useState(!1),[p,h]=u.useState(!1),[x,f]=u.useState({});u.useEffect(()=>{if(e&&r&&(n({username:r.username||"",display_name:r.display_name||"",bio:r.bio||"",avatar_url:r.avatar_url||"",banner_url:r.banner_url||"",website_url:r.website_url||"",social_links:r.social_links||""}),r.social_links))try{const e=JSON.parse(r.social_links);l({instagram:e.instagram||"",twitter:e.twitter||"",linkedin:e.linkedin||"",facebook:e.facebook||"",youtube:e.youtube||"",tiktok:e.tiktok||""})}catch(t){console.error("Failed to parse social links:",t)}},[e,r]);const g=(e,t)=>{const r=e.target.files?.[0];r&&(r.type.startsWith("image/")?r.size>5242880?f(e=>({...e,[t]:"Image size must be less than 5MB."})):(f(e=>{const r={...e};return delete r[t],r}),(async(e,t)=>{"avatar"===t?m(!0):h(!0);try{const r=new FormData;r.append("image",e);const s=await fetch("/api/images/upload",{method:"POST",credentials:"include",body:r});if(!s.ok)throw new Error("Upload failed");const a=await s.json();n("avatar"===t?e=>({...e,avatar_url:a.url}):e=>({...e,banner_url:a.url}))}catch(r){console.error("Image upload failed:",r),f(e=>({...e,[t]:"Failed to upload image. Please try again."}))}finally{"avatar"===t?m(!1):h(!1)}})(r,t)):f(e=>({...e,[t]:"Please select an image file."})))},b=e=>{switch(e){case"instagram":return Ns.jsx(ir,{className:"w-4 h-4"});case"twitter":return Ns.jsx(os,{className:"w-4 h-4"});case"linkedin":return Ns.jsx(ur,{className:"w-4 h-4"});case"facebook":return Ns.jsx(Gt,{className:"w-4 h-4"});case"youtube":return Ns.jsx(xs,{className:"w-4 h-4"});case"tiktok":return Ns.jsx("div",{className:"w-4 h-4 bg-black rounded text-white text-xs flex items-center justify-center font-bold",children:"T"});default:return Ns.jsx(er,{className:"w-4 h-4"})}},v=e=>{switch(e){case"instagram":case"twitter":case"tiktok":return"@username";case"linkedin":case"facebook":return"username or profile URL";case"youtube":return"channel name or URL";default:return"username"}};return e?Ns.jsx(Us,{isOpen:e,onClose:t,maxWidth:"4xl",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex flex-col gap-6",children:[Ns.jsxs("div",{className:"-mx-6 -mt-6 flex items-center justify-between border-b border-pr-border px-6 py-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-r from-orange-500 to-red-500",children:Ns.jsx(ds,{className:"h-5 w-5 text-white"})}),Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-xl font-semibold text-pr-text-1",children:"Edit Profile"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Update your profile information and appearance"})]})]}),Ns.jsx("button",{onClick:t,className:"rounded-xl p-2 transition-colors hover:bg-pr-surface-2",children:Ns.jsx(hs,{className:"h-5 w-5 text-pr-text-2"})})]}),Ns.jsxs("div",{className:"space-y-8",children:[Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Profile Images"}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"mb-3 block text-sm font-medium text-pr-text-1",children:"Banner Image"}),Ns.jsxs("div",{className:"relative",children:[Ns.jsxs("div",{className:"h-48 w-full overflow-hidden rounded-xl bg-gradient-to-r from-orange-500 via-red-500 to-pink-500",children:[a.banner_url?Ns.jsx("img",{src:a.banner_url,alt:"Banner preview",className:"h-full w-full object-cover"}):Ns.jsx("div",{className:"h-full w-full bg-gradient-to-r from-orange-500 via-red-500 to-pink-500"}),Ns.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40",children:Ns.jsxs("label",{className:"flex cursor-pointer items-center space-x-2 rounded-xl bg-pr-surface-card px-4 py-2 text-pr-text-1 transition-colors hover:bg-pr-surface-2",children:[p?Ns.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-gray-600 border-t-transparent"}):Ns.jsx(jt,{className:"h-4 w-4"}),Ns.jsx("span",{className:"text-sm font-medium",children:p?"Uploading...":"Change Banner"}),Ns.jsx("input",{type:"file",accept:"image/*",onChange:e=>g(e,"banner"),className:"hidden",disabled:p})]})})]}),x.banner&&Ns.jsxs("p",{className:"mt-2 flex items-center space-x-1 text-sm text-red-600",children:[Ns.jsx(Pt,{className:"h-4 w-4"}),Ns.jsx("span",{children:x.banner})]})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"mb-3 block text-sm font-medium text-pr-text-1",children:"Profile Picture"}),Ns.jsxs("div",{className:"flex items-center space-x-6",children:[Ns.jsxs("div",{className:"relative",children:[Ns.jsx("img",{src:a.avatar_url||"/default-avatar.png",alt:"Profile picture",className:"h-24 w-24 rounded-2xl border-4 border-white object-cover shadow-lg"}),Ns.jsxs("label",{className:"absolute -bottom-2 -right-2 flex h-8 w-8 cursor-pointer items-center justify-center rounded-xl bg-orange-500 text-white transition-colors hover:bg-orange-600",children:[d?Ns.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}):Ns.jsx(jt,{className:"h-4 w-4"}),Ns.jsx("input",{type:"file",accept:"image/*",onChange:e=>g(e,"avatar"),className:"hidden",disabled:d})]})]}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("p",{className:"mb-2 text-sm text-pr-text-2",children:"Upload a new profile picture. Use a square image for best results."}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Supported formats: JPG, PNG, GIF (max 5MB)"})]})]}),x.avatar&&Ns.jsxs("p",{className:"mt-2 flex items-center space-x-1 text-sm text-red-600",children:[Ns.jsx(Pt,{className:"h-4 w-4"}),Ns.jsx("span",{children:x.avatar})]})]})]}),Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Basic Information"}),Ns.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"mb-2 block text-sm font-medium text-pr-text-1",children:"Username"}),Ns.jsx("input",{type:"text",value:a.username||"",onChange:e=>n({...a,username:e.target.value}),className:"w-full rounded-xl border px-4 py-3 transition-colors focus:border-transparent focus:ring-2 focus:ring-orange-500 "+(x.username?"border-red-300 bg-red-50":"border-pr-surface-3"),placeholder:"Enter username"}),x.username&&Ns.jsxs("p",{className:"mt-1 flex items-center space-x-1 text-sm text-red-600",children:[Ns.jsx(Pt,{className:"h-4 w-4"}),Ns.jsx("span",{children:x.username})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"mb-2 block text-sm font-medium text-pr-text-1",children:"Display Name"}),Ns.jsx("input",{type:"text",value:a.display_name||"",onChange:e=>n({...a,display_name:e.target.value}),className:"w-full rounded-xl border border-pr-surface-3 px-4 py-3 transition-colors focus:border-transparent focus:ring-2 focus:ring-orange-500",placeholder:"Enter display name"})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"mb-2 block text-sm font-medium text-pr-text-1",children:"Bio"}),Ns.jsx("textarea",{value:a.bio||"",onChange:e=>n({...a,bio:e.target.value}),placeholder:"Tell us about yourself...",rows:4,className:"w-full resize-none rounded-xl border px-4 py-3 transition-colors focus:border-transparent focus:ring-2 focus:ring-orange-500 "+(x.bio?"border-red-300 bg-red-50":"border-pr-surface-3")}),Ns.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[x.bio&&Ns.jsxs("p",{className:"flex items-center space-x-1 text-sm text-red-600",children:[Ns.jsx(Pt,{className:"h-4 w-4"}),Ns.jsx("span",{children:x.bio})]}),Ns.jsxs("p",{className:"ml-auto text-xs text-pr-text-2",children:[(a.bio||"").length,"/500 characters"]})]})]})]}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Website"}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"mb-2 block text-sm font-medium text-pr-text-1",children:"Website URL"}),Ns.jsxs("div",{className:"relative",children:[Ns.jsx(er,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),Ns.jsx("input",{type:"url",value:a.website_url||"",onChange:e=>n({...a,website_url:e.target.value}),className:"w-full rounded-xl border pl-12 pr-4 py-3 transition-colors focus:border-transparent focus:ring-2 focus:ring-orange-500 "+(x.website_url?"border-red-300 bg-red-50":"border-pr-surface-3"),placeholder:"https://yourwebsite.com"})]}),x.website_url&&Ns.jsxs("p",{className:"mt-1 flex items-center space-x-1 text-sm text-red-600",children:[Ns.jsx(Pt,{className:"h-4 w-4"}),Ns.jsx("span",{children:x.website_url})]})]})]}),Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Social Media"}),Ns.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:Object.entries(i).map(([e,t])=>Ns.jsxs("div",{children:[Ns.jsx("label",{className:"mb-2 block text-sm font-medium capitalize text-pr-text-1",children:e}),Ns.jsxs("div",{className:"relative",children:[Ns.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:b(e)}),Ns.jsx("input",{type:"text",value:t,onChange:t=>l({...i,[e]:t.target.value}),className:"w-full rounded-xl border border-pr-surface-3 pl-12 pr-4 py-3 transition-colors focus:border-transparent focus:ring-2 focus:ring-orange-500",placeholder:v(e)})]})]},e))})]}),x.general&&Ns.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4",children:Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(Pt,{className:"h-5 w-5 text-red-600"}),Ns.jsx("p",{className:"text-red-700",children:x.general})]})})]}),Ns.jsxs("div",{className:"-mx-6 -mb-6 flex items-center justify-end gap-4 border-t border-pr-border bg-pr-surface-2 px-6 py-6",children:[Ns.jsx("button",{onClick:t,className:"px-6 py-3 text-pr-text-1 transition-colors hover:text-pr-text-1",disabled:o,children:"Cancel"}),Ns.jsx("button",{onClick:async()=>{if((()=>{const e={};if(a.username&&a.username.length<3&&(e.username="Username must be at least 3 characters long"),a.username&&!/^[a-zA-Z0-9_]+$/.test(a.username)&&(e.username="Username can only contain letters, numbers, and underscores"),a.bio&&a.bio.length>500&&(e.bio="Bio must be less than 500 characters"),a.website_url&&a.website_url)try{new URL(a.website_url)}catch{e.website_url="Please enter a valid URL"}return f(e),0===Object.keys(e).length})()){c(!0);try{const e=Object.entries(i).filter(([e,t])=>""!==t.trim()).reduce((e,[t,r])=>({...e,[t]:r}),{}),r={...a,social_links:Object.keys(e).length>0?JSON.stringify(e):""},n=await fetch("/api/users/profile",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)});if(!n.ok){const e=await n.json();throw new Error(e.error||"Failed to update profile")}const l=await n.json();s(l),t()}catch(e){console.error("Failed to update profile:",e),f({general:e instanceof Error?e.message:"Failed to update profile"})}finally{c(!1)}}},disabled:o||d||p,className:"flex items-center space-x-2 rounded-xl bg-gradient-to-r from-orange-500 to-red-500 px-8 py-3 font-medium text-white transition-all duration-200 hover:from-orange-600 hover:to-red-600 disabled:from-gray-400 disabled:to-gray-500",children:o?Ns.jsxs(Ns.Fragment,{children:[Ns.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),Ns.jsx("span",{children:"Saving..."})]}):Ns.jsxs(Ns.Fragment,{children:[Ns.jsx(St,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Save Changes"})]})})]})]})}):null}function Qq({isOpen:e,onClose:t,holding:r,sellerId:s,onSuccess:a}){const[n,i]=u.useState(()=>r?Math.max(1,Math.ceil(.25*r.owned_shares)):1),[l,o]=u.useState(()=>r?.current_price||0),[c,d]=u.useState(""),[m,p]=u.useState(!1),[h,x]=u.useState(null);if(u.useEffect(()=>{r&&e&&(i(Math.min(Math.max(1,Math.ceil(.25*r.owned_shares)),r.owned_shares)),o(r.current_price),d(""),x(null))},[r,e]),!e||!r)return null;const f=()=>{m||(i(Math.min(Math.max(1,Math.ceil(.25*r.owned_shares)),r.owned_shares)),o(r.current_price),d(""),x(null),t())};return Ns.jsx(Us,{isOpen:e,onClose:f,maxWidth:"lg",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex flex-col gap-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between border-b border-pr-surface-3 pb-4",children:[Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-xl font-semibold text-pr-text-1",children:"Make an Offer"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:r.content_title})]}),Ns.jsx("button",{onClick:f,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close make offer modal",children:Ns.jsx("span",{className:"text-lg leading-none",children:""})})]}),Ns.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),r)if(n<=0||l<=0)x("Enter a valid quantity and offer price.");else{p(!0),x(null);try{await(async e=>{const t=await la("/api/shares/offers",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){const e=await t.json().catch(()=>({}));throw new Error(e.error||"Failed to submit offer")}return t.json()})({content_id:r.content_id,seller_id:s,quantity:n,bid_price:l,message:c}),a?.(),f()}catch(t){x(t instanceof Error?t.message:"Failed to submit offer")}finally{p(!1)}}},className:"space-y-6",children:[Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1",children:"Quantity"}),Ns.jsx("input",{type:"number",min:1,value:n,onChange:e=>i(Number(e.target.value)),className:"mt-2 w-full rounded-lg border border-pr-surface-3 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),Ns.jsxs("p",{className:"mt-1 text-xs text-pr-text-2",children:["Seller holds ",r.owned_shares," shares"]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1",children:"Offer Price (per share)"}),Ns.jsx("input",{type:"number",min:.01,step:.01,value:l,onChange:e=>o(Number(e.target.value)),className:"mt-2 w-full rounded-lg border border-pr-surface-3 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),Ns.jsxs("p",{className:"mt-1 text-xs text-pr-text-2",children:["Current price ",r.current_price.toFixed(2)]})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1",children:"Message (optional)"}),Ns.jsx("textarea",{rows:3,value:c,onChange:e=>d(e.target.value),placeholder:"Share context or terms for your offer",className:"mt-2 w-full rounded-lg border border-pr-surface-3 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),Ns.jsx("div",{className:"bg-pr-surface-2 rounded-lg p-4 text-sm text-pr-text-2",children:Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{children:"Total offer value"}),Ns.jsxs("span",{className:"font-medium text-pr-text-1",children:["$",(n*l).toFixed(2)]})]})}),h&&Ns.jsx("p",{className:"text-sm text-red-600",children:h}),Ns.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[Ns.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 text-sm font-medium text-pr-text-2 hover:text-pr-text-1",children:"Cancel"}),Ns.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg shadow-sm hover:bg-blue-700 disabled:opacity-60",children:m?"Submitting":"Submit Offer"})]})]})]})})}function Xq(e){if("object"!=typeof e||null===e)return null;const t=e;return{id:String(t.id??""),email:t.email??"",username:t.username??"unknown_user",displayName:t.display_name??t.username??"Unknown User",avatarUrl:t.profile_image??null,bio:t.bio??"",location:t.location??"",xp:Number(t.xp_points??0),level:Number(t.level??1),followers:Number(t.follower_count??0),following:Number(t.following_count??0),dropsCompleted:0,sharesOwned:0,social:{},referral_code:t.referral_code,createdAt:t.created_at??""}}function eW({isPublicProfile:e=!1,useUserId:t=!1}){const{user:r}=Ls(),{username:s,id:a}=Ce(),n=ke(),i=Os||"",l=u.useCallback(e=>`${i}${e}`,[i]),[o,c]=u.useState(Xq(r)),[d,m]=u.useState(!0),[p,h]=u.useState(!1),[x,f]=u.useState("overview"),[g,b]=u.useState(!1),[v,y]=u.useState([]),[j,w]=u.useState([]),[N,_]=u.useState([]),[k,S]=u.useState([]),[C,O]=u.useState([]),[E,P]=u.useState(null),[T,A]=u.useState(!1),[M,D]=u.useState(!1),[I,R]=u.useState(!1),[$,L]=u.useState(!1),[F,z]=u.useState(!1),[U,B]=u.useState(!1),[q,W]=u.useState(!1),[K,V]=u.useState(null),[H,G]=u.useState(!1),[Y,J]=u.useState(null),[Z,Q]=u.useState(!1),[X,ee]=u.useState(null),te=u.useCallback(async t=>{if(e||!t)return y([]),void A(!1);A(!0);try{const e=await fetch(l(`/api/users/${t}/content`),{credentials:"include"});if(e.ok){const t=await e.json();y(Array.isArray(t)?t:[])}else y([])}catch(r){console.error("Failed to fetch user content:",r),y([])}finally{A(!1)}},[e,l]),re=u.useCallback(async(t,r)=>{if(e||!t||r)D(!1);else{D(!0);try{const e=await fetch(l(`/api/users/${t}/drops`),{credentials:"include"});if(e.ok){const t=await e.json(),r=Array.isArray(t)?t.map(e=>Vq(e)):[];w(r)}else w([])}catch(s){console.error("Failed to fetch user drops:",s),w([])}finally{D(!1)}}},[e,l]),se=u.useCallback(async(t,r)=>{if(e||!t||r)P(null);else try{const e=await fetch(l(`/api/users/${t}/leaderboard-position`),{credentials:"include"});if(e.ok){const t=await e.json();P("object"==typeof t&&null!==t?t:null)}}catch(s){console.error("Failed to fetch leaderboard position:",s)}},[e,l]),ae=u.useCallback(async(t,r)=>{if(e||!t||r)return _([]),void R(!1);R(!0);try{const e=await fetch(l("/api/users/drop-applications"),{credentials:"include"});if(e.ok){const t=await e.json();_(Array.isArray(t)?t:[])}else _([])}catch(s){console.error("Failed to fetch user applications:",s),_([])}finally{R(!1)}},[e,l]),ne=u.useCallback(async()=>{if(s||a)try{let e;if(t&&a)e=`/api/users/public/id/${a}`;else{if(!s)throw new Error("No user identifier provided");e=`/api/users/public/${s}`}const r=await fetch(l(e));if(!r.ok)throw new Error("User not found");const n=await r.json();c(Xq(n.user)),y(Array.isArray(n.content)?n.content:[]),w(Array.isArray(n.drops)?n.drops.map(e=>Vq(e)):[]),P("object"==typeof n.leaderboard_position&&null!==n.leaderboard_position?n.leaderboard_position:null)}catch(e){console.error("Failed to fetch public profile:",e)}finally{m(!1)}},[s,a,t,l]),ie=u.useCallback(async()=>{if(r&&!e)return c(Xq(r)),void m(!1);try{const e=localStorage.getItem("authToken"),t={"Content-Type":"application/json"};e&&(t.Authorization=`Bearer ${e}`);const r=await fetch(l("/api/users/me"),{headers:t,credentials:"include"});if(r.ok){const e=await r.json(),t=e?.user||e?.data?.user||e;t&&t.id&&c(Xq(t))}}catch(t){console.error("Failed to fetch user profile:",t)}finally{m(!1)}},[r,e,l]);u.useEffect(()=>{e&&(s||a)?ne():ie();if("true"===new URLSearchParams(window.location.search).get("openInfluenceRewards")){B(!0);const e=window.location.pathname;window.history.replaceState({},"",e)}},[ne,ie,e,s,a]),u.useEffect(()=>{if(!o)return;(async()=>{const e=await Om(String(o.id));S(e.filter(e=>"private"!==e.visibility));const t=await(async e=>{try{const t=e?`?userId=${encodeURIComponent(e)}`:"",r=await la(`/api/portfolio/predictions${t}`,{credentials:"include"});return r.ok&&(await r.json()).predictions||km()}catch(t){return console.error("Failed to fetch predictions:",t),km()}})(String(o.id));O(t)})()},[o?.id]);const le=e=>{switch(e){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";default:return"bg-pr-surface-2 text-pr-text-1"}},oe=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"completed":return"bg-purple-100 text-purple-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-pr-surface-2 text-pr-text-1"}},ce=u.useMemo(()=>{return(e=o)?{id:e.id,mocha_user_id:e.id,email:e.email,username:e.username,display_name:e.displayName,first_name:void 0,last_name:void 0,bio:e.bio,profile_image:e.avatarUrl??"",cover_image:"",website:"",location:e.location,social_links:JSON.stringify(e.social),role:"user",points_balance:0,gems_balance:0,keys_balance:0,xp_points:e.xp,level:e.level,total_earnings:0,total_withdrawn:0,is_verified:!1,is_banned:!1,last_login:e.createdAt,created_at:e.createdAt,updated_at:e.createdAt,google_user_data:void 0}:null;var e},[o]);u.useEffect(()=>{if(!o?.id||e)return;const t=o.id?String(o.id):null,s=!!r&&!r.id;te(t),re(t,s),se(t,s)},[se,te,re,e,o?.id,r]),u.useEffect(()=>{if(!o?.id||e)return;const t=o.id?String(o.id):null,s=!!r&&!r.id;ae(t,s)},[ae,e,o?.id,r]);const de=u.useCallback(e=>{c(Xq(e)),b(!1)},[]),ue=u.useCallback(e=>{o&&(ee(e),Q(!0))},[o]);if(d)return Ns.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:Ns.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})});if(!(o||d||e||r))return Ns.jsx("div",{className:"max-w-2xl mx-auto text-center py-12 px-6",children:Ns.jsxs("div",{className:"bg-pr-surface-card rounded-2xl shadow-sm border border-pr-border p-8",children:[Ns.jsx(ds,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1 mb-2",children:"User Not Found"}),Ns.jsx("p",{className:"text-pr-text-2 mb-6",children:e?"The user you're looking for doesn't exist or may have been removed.":"There was an issue loading your profile. Please try refreshing the page."}),Ns.jsx(Ze,{to:"/",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200",children:"Go to Home"})]})});const me=e?[{id:"overview",label:"Overview",icon:ds},{id:"content",label:"Content",icon:Yt,count:v.length},..."advertiser"===o?.user_type?[{id:"drops",label:"Drops Created",icon:fs,count:j.length}]:[],{id:"achievements",label:"Achievements",icon:ht}]:[{id:"overview",label:"Overview",icon:ds},{id:"content",label:"Content",icon:Yt,count:v.length},{id:"drops",label:"Drops Created",icon:fs,count:j.length},{id:"applications",label:"Applications",icon:br,count:N.length},{id:"achievements",label:"Achievements",icon:ht}];return Ns.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8",children:[Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsx("h1",{className:"text-3xl font-bold text-pr-text-1",children:e?`${o?.display_name||o?.username||"User"}'s Profile`:"Profile"}),Ns.jsx("p",{className:"text-pr-text-2",children:e?"View public profile and activity":"Manage your account and view your activity"})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-2xl shadow-sm border border-pr-border overflow-hidden",children:[Ns.jsx("div",{className:"relative h-48 bg-gradient-to-r from-orange-500 via-red-500 to-pink-500",children:o?.avatarUrl?Ns.jsxs("div",{className:"relative w-full h-full",children:[Ns.jsx("img",{src:o.avatarUrl,alt:"Profile banner",className:"w-full h-full object-cover"}),Ns.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-500/20 via-red-500/20 to-pink-500/20"})]}):Ns.jsx("div",{className:"w-full h-full bg-gradient-to-r from-orange-500 via-red-500 to-pink-500"})}),Ns.jsxs("div",{className:"px-6 lg:px-8 pb-8",children:[Ns.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end lg:justify-between -mt-16 space-y-6 lg:space-y-0",children:[Ns.jsx("div",{className:"relative z-10",children:Ns.jsx("div",{className:"relative",children:Ns.jsx("img",{src:o?.avatarUrl||"/default-avatar.png",alt:"Profile",className:"w-32 h-32 rounded-2xl border-4 border-white shadow-xl object-cover bg-pr-surface-card"})})}),!e&&Ns.jsxs("button",{onClick:()=>b(!0),className:"lg:mb-4 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium flex items-center space-x-2 transition-all duration-200 shadow-lg hover:shadow-xl self-start lg:self-auto",children:[Ns.jsx(Tr,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Edit Profile"})]})]}),Ns.jsxs("div",{className:"mt-6 space-y-4",children:[Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-3xl font-bold text-pr-text-1 mb-2",children:o?.displayName||o?.username||"User"}),Ns.jsxs("div",{className:"flex items-center space-x-2 text-pr-text-2",children:[Ns.jsxs("span",{children:["@",o?.username||"username-not-set"]}),Ns.jsx("span",{children:""}),Ns.jsxs("span",{children:["Level ",o?.level||1]}),!1]}),E&&Ns.jsxs("div",{className:"flex flex-wrap items-center gap-6 mt-3",children:[Ns.jsx(zs,{content:"Daily leaderboard rank",compact:!0,children:Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(is,{className:"w-4 h-4 text-yellow-600"}),Ns.jsx("span",{className:"text-sm text-pr-text-2",children:"Daily Rank"}),Ns.jsxs("span",{className:"font-semibold text-yellow-700",children:["#",E.daily_rank??"N/A"]})]})}),Ns.jsx(zs,{content:"Activity score",compact:!0,children:Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("span",{className:"text-sm text-pr-text-2",children:"Score:"}),Ns.jsx("span",{className:"font-semibold text-pr-text-1",children:"number"==typeof E?.composite_score?E.composite_score.toFixed(1):"0.0"})]})})]})]}),o?.social&&Object.keys(o.social).length>0?Ns.jsx("div",{className:"flex flex-wrap items-center gap-4 p-4 bg-pr-surface-2 rounded-xl",children:Object.entries(o.social).map(([e,t])=>Ns.jsxs("div",{className:"flex items-center space-x-1 text-pr-text-2",children:[Ns.jsxs("span",{className:"text-sm font-medium capitalize",children:[e,":"]}),Ns.jsx("span",{className:"text-sm",children:t})]},e))}):null,Ns.jsx("div",{className:"p-4 bg-pr-surface-2 rounded-xl",children:Ns.jsx("p",{className:"text-pr-text-1 leading-relaxed",children:o?.bio||(e?"No bio available.":"No bio yet. Click edit to add one!")})})]})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-2xl shadow-sm border border-pr-border overflow-hidden",children:[Ns.jsx("div",{className:"border-b border-pr-border",children:Ns.jsx("nav",{className:"flex overflow-x-auto px-6 lg:px-8",children:me.map(e=>{const t=e.icon;return Ns.jsxs("button",{onClick:()=>f(e.id),className:"py-4 px-1 mr-8 border-b-2 font-medium text-sm flex items-center space-x-2 whitespace-nowrap transition-colors "+(x===e.id?"border-orange-500 text-orange-600":"border-transparent text-pr-text-2 hover:text-pr-text-1 hover:border-pr-surface-3"),children:[Ns.jsx(t,{className:"w-4 h-4"}),Ns.jsx("span",{children:e.label}),void 0!==e.count&&Ns.jsx("span",{className:"bg-pr-surface-2 text-pr-text-2 px-2 py-1 rounded-full text-xs font-medium",children:e.count})]},e.id)})})}),Ns.jsxs("div",{className:"p-6 lg:p-8",children:["overview"===x&&Ns.jsxs("div",{className:"space-y-8",children:[Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[!e&&ce&&Ns.jsx("div",{className:"bg-pr-surface-card rounded-2xl p-6 border border-pr-surface-3",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-medium text-green-700",children:"Total Earnings"}),Ns.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["$",(ce.total_earnings??0).toFixed(2)]})]}),Ns.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:Ns.jsx(Bt,{className:"w-6 h-6 text-green-600"})})]})}),Ns.jsx("div",{className:"bg-pr-surface-card rounded-2xl p-6 border border-pr-surface-3",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-medium text-blue-700",children:"XP Points"}),Ns.jsx("p",{className:"text-2xl font-bold text-blue-900",children:(o?.xp||0).toLocaleString()})]}),Ns.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:Ns.jsx(Zr,{className:"w-6 h-6 text-blue-600"})})]})}),Ns.jsx("div",{className:"bg-pr-surface-card rounded-2xl p-6 border border-pr-surface-3",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-medium text-purple-700",children:"Followers"}),Ns.jsx("p",{className:"text-2xl font-bold text-purple-900",children:(o?.followers||0).toLocaleString()})]}),Ns.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:Ns.jsx(us,{className:"w-6 h-6 text-purple-600"})})]})}),Ns.jsx("div",{className:"bg-pr-surface-card rounded-2xl p-6 border border-pr-surface-3",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-medium text-yellow-700",children:"Level"}),Ns.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:o?.level||1})]}),Ns.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center",children:Ns.jsx(ht,{className:"w-6 h-6 text-yellow-600"})})]})})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-2xl p-6 border border-pr-border",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Level Progress"}),Ns.jsxs("span",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium",children:["Level ",o?.level||1]})]}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsxs("div",{className:"flex justify-between text-sm text-pr-text-2",children:[Ns.jsxs("span",{children:[(o?.xp||0).toLocaleString()," XP"]}),Ns.jsxs("span",{children:[(1e3*((o?.level||1)+1)).toLocaleString()," XP"]})]}),Ns.jsx("div",{className:"w-full bg-pr-surface-3 rounded-full h-3",children:Ns.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 h-3 rounded-full transition-all duration-300",style:{width:`${(e=>{const t=o?.level||1,r=1e3*t,s=(e-r)/(1e3*(t+1)-r)*100;return Math.max(0,Math.min(100,s))})(o?.xp||0)}%`}})}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:e?"0 day activity streak":1e3*((o?.level||1)+1)-(o?.xp||0)+" XP until next level"})]})]}),!e&&Ns.jsxs("div",{className:"bg-pr-surface-card border border-pr-surface-3 rounded-2xl p-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:Ns.jsx(as,{className:"w-6 h-6 text-blue-600"})}),Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Influence Rewards"}),Ns.jsx("p",{className:"text-sm text-blue-700",children:"Earn monthly points based on your follower count"})]})]}),Ns.jsx("button",{onClick:()=>B(!0),className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:"Get Rewards"})]}),Ns.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-4",children:[Ns.jsx("div",{className:"text-sm text-blue-700",children:"Formula"}),Ns.jsx("div",{className:"font-bold text-blue-900",children:"Followers  0.01"})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-4",children:[Ns.jsx("div",{className:"text-sm text-blue-700",children:"Reset"}),Ns.jsx("div",{className:"font-bold text-blue-900",children:"Monthly"})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-4",children:[Ns.jsx("div",{className:"text-sm text-blue-700",children:"Min Followers"}),Ns.jsx("div",{className:"font-bold text-blue-900",children:"1,000"})]})]})]}),!e&&Ns.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-100 rounded-2xl p-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-purple-900",children:"Referral Program"}),Ns.jsx("button",{onClick:()=>z(!0),className:"bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-colors",children:"Manage Referrals"})]}),Ns.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-medium text-purple-900",children:"Your Referral Code"}),Ns.jsx("p",{className:"text-sm text-purple-700",children:"Share this code and earn when friends join!"})]}),Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("code",{className:"bg-pr-surface-card px-4 py-2 rounded-xl border font-mono text-lg",children:o?.referral_code??"N/A"}),Ns.jsx(zs,{content:p?"Copied!":"Copy code",compact:!0,children:Ns.jsx("button",{onClick:async()=>{o?.referral_code&&(await navigator.clipboard.writeText(o.referral_code),h(!0),setTimeout(()=>h(!1),2e3))},className:"p-2 bg-purple-500 hover:bg-purple-600 text-white rounded-xl transition-colors",children:p?Ns.jsx(St,{className:"w-4 h-4"}):Ns.jsx(Lt,{className:"w-4 h-4"})})})]})]})]}),Ns.jsx(rW,{holdings:k,isOwner:!e||r&&o&&r.id===o.id,onOffer:ue,onView:e=>n(`/portfolio/holdings/${e.content_id}`)}),Ns.jsx(sW,{predictions:C,onView:e=>n(`/prediction/${e.id}`)})]}),"content"===x&&Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1",children:"Your Content"}),Ns.jsx(Ze,{to:"/create",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200",children:"Create New Content"})]}),T?Ns.jsx("div",{className:"flex items-center justify-center h-32",children:Ns.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full"})}):v.length>0?Ns.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(t=>{return Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-2xl p-6 border border-pr-border hover:shadow-md transition-all duration-200",children:[Ns.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[(r=t.platform,"youtube"===r.toLowerCase()?Ns.jsx(ms,{className:"w-4 h-4"}):Ns.jsx(ar,{className:"w-4 h-4"})),Ns.jsx("span",{className:"text-sm font-medium text-pr-text-2 capitalize",children:t.platform})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[!e&&Ns.jsxs(Ns.Fragment,{children:[Ns.jsx(zs,{content:"Edit content",compact:!0,children:Ns.jsx("button",{onClick:()=>(e=>{V(e),W(!0)})(t),className:"p-1 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded transition-colors",children:Ns.jsx(Tr,{className:"w-4 h-4"})})}),Ns.jsx(zs,{content:"Delete content",compact:!0,children:Ns.jsx("button",{onClick:()=>(e=>{J(e),G(!0)})(t),className:"p-1 text-red-600 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:Ns.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ns.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]}),Ns.jsx(Ze,{to:`/content/${t.id}`,className:"text-orange-600 hover:text-orange-700 transition-colors",children:Ns.jsx(Kt,{className:"w-4 h-4"})})]})]}),Ns.jsx("h4",{className:"font-semibold text-pr-text-1 mb-2 line-clamp-2",children:t.title}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mb-4 line-clamp-2",children:t.description}),Ns.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ns.jsxs("span",{className:"text-pr-text-2",children:[t.available_shares||0,"/",t.total_shares||0," shares"]}),Ns.jsxs("span",{className:"font-semibold text-green-600",children:["$",(t.share_price||0).toFixed(2),"/share"]})]})]},t.id);var r})}):Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx(Yt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1 mb-2",children:"No Content Yet"}),Ns.jsx("p",{className:"text-pr-text-2 mb-6",children:"Start creating content to build your portfolio"}),Ns.jsx(Ze,{to:"/create",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200",children:"Create Your First Content"})]})]}),"drops"===x&&Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1",children:"Drops You Created"}),!e&&o&&"advertiser"===o.user_type&&Ns.jsx(Ze,{to:"/earn?create=proof",className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200",children:"Create New Drop"})]}),M?Ns.jsx("div",{className:"flex items-center justify-center h-32",children:Ns.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full"})}):j.length>0?Ns.jsx("div",{className:"space-y-4",children:j.map(e=>Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-2xl p-6 border border-pr-border",children:[Ns.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1 mb-2",children:e.title}),Ns.jsx("p",{className:"text-pr-text-2 mb-3",children:e.description}),Ns.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[Ns.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${le(e.difficulty)}`,children:e.difficulty.charAt(0).toUpperCase()+e.difficulty.slice(1)}),Ns.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${oe(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),Ns.jsxs("span",{className:"text-sm text-pr-text-2",children:[e.current_participants||0," participants"]})]})]}),Ns.jsxs("div",{className:"text-right ml-6",children:[Ns.jsx("div",{className:"text-sm text-pr-text-2 mb-1",children:"Reward"}),Ns.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[e.gemsReward||0," gems"]}),Ns.jsxs("div",{className:"text-sm text-pr-text-2 mt-1",children:["Cost: ",e.keysCost||0," keys"]})]})]}),Ns.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 text-pr-text-2",children:[Ns.jsx(yt,{className:"w-4 h-4"}),Ns.jsxs("span",{children:["Created ",new Date(e.createdAt).toLocaleDateString()]})]}),Ns.jsxs("div",{className:"flex items-center space-x-2 text-pr-text-2",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Pool:"}),Ns.jsx("span",{className:"font-medium text-purple-600",children:`${e.gemPoolRemaining??0}/${e.gemPoolTotal??0} gems`})]})]})]},e.id))}):Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx(fs,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1 mb-2",children:"No Drops Created"}),Ns.jsx("p",{className:"text-pr-text-2 mb-6",children:"Create your first drop to start earning"}),Ns.jsx(Ze,{to:"/earn?create=proof",className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200",children:"Create Your First Drop"})]})]}),"applications"===x&&Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1",children:"Your Applications"}),I?Ns.jsx("div",{className:"flex items-center justify-center h-32",children:Ns.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full"})}):N.length>0?Ns.jsx("div",{className:"space-y-4",children:N.map(e=>Ns.jsx(Yq,{application:e,onSubmissionSuccess:()=>{ae()}},e.id))}):Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx(br,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1 mb-2",children:"No Applications Yet"}),Ns.jsx("p",{className:"text-pr-text-2 mb-6",children:"Apply to drops to start earning rewards"}),Ns.jsx(Ze,{to:"/earn",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200",children:"Browse Opportunities"})]})]}),"achievements"===x&&Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1",children:"Achievements"}),Ns.jsx("button",{onClick:()=>L(!0),className:"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200",children:"View All"})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Ns.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-6 border border-yellow-100 text-center",children:[Ns.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Ns.jsx(is,{className:"w-8 h-8 text-yellow-600"})}),Ns.jsx("h4",{className:"font-semibold text-yellow-900 mb-2",children:"First Steps"}),Ns.jsx("p",{className:"text-sm text-yellow-700",children:"Complete your first drop application"})]}),Ns.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl p-6 border border-blue-100 text-center",children:[Ns.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Ns.jsx(Zr,{className:"w-8 h-8 text-blue-600"})}),Ns.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Content Creator"}),Ns.jsx("p",{className:"text-sm text-blue-700",children:"Share your first piece of content"})]}),Ns.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 border border-purple-100 text-center",children:[Ns.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Ns.jsx(ht,{className:"w-8 h-8 text-purple-600"})}),Ns.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"Influencer"}),Ns.jsx("p",{className:"text-sm text-purple-700",children:"Reach 100 followers"})]})]})]})]})]}),ce&&Ns.jsx(Zq,{isOpen:g,onClose:()=>b(!1),user:ce,onSuccess:de}),ce&&Ns.jsx(aa,{isOpen:$,onClose:()=>L(!1),user:ce}),ce&&Ns.jsx(Hq,{isOpen:F,onClose:()=>z(!1),user:ce,onSuccess:()=>{ie()}}),ce&&Ns.jsx(Jq,{isOpen:U,onClose:()=>B(!1),user:ce,onSuccess:()=>{ie()}}),Ns.jsx(Qq,{isOpen:Z,onClose:()=>Q(!1),holding:X,sellerId:o?.id?String(o.id):void 0}),K&&Ns.jsx(Bu,{isOpen:q,onClose:()=>{W(!1),V(null)},onSuccess:e=>{W(!1),V(null),y(t=>t.map(t=>t.id===e.id?e:t))},content:K}),Ns.jsx(qu,{isOpen:H,onClose:()=>{G(!1),J(null)},onConfirm:async()=>{if(Y)try{const e=await fetch(l(`/api/content/${Y.id}`),{method:"DELETE",credentials:"include"});if(e.ok)y(e=>e.filter(e=>e.id!==Y.id)),G(!1),J(null);else{const t=await e.json();alert(t.error||"Failed to delete content")}}catch(e){console.error("Error deleting content:",e),alert("Failed to delete content")}},title:"Delete Content",message:`Are you sure you want to delete "${Y?.title}"? This action cannot be undone and will remove all associated data.`,confirmText:"Delete",cancelText:"Cancel",type:"danger"})]})}const tW=eW;function rW({holdings:e,isOwner:t,onOffer:r,onView:s}){const a=e.filter(e=>"private"!==e.visibility);return a.length?Ns.jsxs("div",{className:"bg-pr-surface-card rounded-2xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Public Holdings"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:t?"Only holdings you set to public are visible to others.":"Shared portfolio highlights from this creator."})]}),Ns.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-slate-100 text-slate-700",children:[a.length," assets"]})]}),Ns.jsx("div",{className:"space-y-3",children:a.map(e=>Ns.jsxs("div",{className:"flex items-center justify-between bg-pr-surface-2 rounded-xl p-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("img",{src:e.content_thumbnail,alt:e.content_title,className:"w-12 h-12 rounded-lg object-cover"}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-semibold text-pr-text-1",children:e.content_title}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:[e.owned_shares," shares  Avg $",e.avg_cost.toFixed(2),"  Now $",e.current_price.toFixed(2)]})]})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("button",{onClick:()=>s(e),className:"px-3 py-1.5 text-sm font-medium border border-pr-surface-3 text-pr-text-2 rounded-lg hover:bg-pr-surface-2",children:"View"}),!t&&Ns.jsx("button",{onClick:()=>r(e),className:"px-3 py-1.5 text-sm font-medium border border-blue-200 text-blue-600 rounded-lg hover:bg-blue-50",children:"Make offer"})]})]},e.content_id))})]}):null}function sW({predictions:e,onView:t}){return e.length?Ns.jsxs("div",{className:"bg-pr-surface-card rounded-2xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Prediction History"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Public predictions and outcomes shared by this creator."})]}),Ns.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-700",children:[e.length," entries"]})]}),Ns.jsx("div",{className:"space-y-3",children:e.map(e=>Ns.jsxs("div",{className:"flex items-center justify-between bg-pr-surface-2 rounded-xl p-4",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-medium text-pr-text-1",children:e.content_title}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:[e.platform.toUpperCase(),"  ",new Date(e.created_at).toLocaleDateString()]})]}),Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsxs("div",{className:"text-right",children:[Ns.jsx("p",{className:"text-sm text-pr-text-2 capitalize",children:e.prediction_side}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"settled"===e.status&&e.result?`Result: ${e.result}`:`Status: ${e.status}`})]}),Ns.jsx("button",{onClick:()=>t(e),className:"px-3 py-1.5 text-sm font-medium border border-pr-surface-3 text-pr-text-2 rounded-lg hover:bg-pr-surface-2",children:"View"})]})]},e.id))})]}):null}function aW({isOpen:e,onClose:t,contentId:r,contentTitle:s,isOwner:a,currentRevenue:n,sharePrice:i,totalShares:l,onSuccess:o}){const[c,d]=u.useState(0),[m,p]=u.useState("USD"),[h,x]=u.useState(!1),[f,g]=u.useState("tip");if(!e)return null;const b=()=>l>0?(n+("Points"===m?c/1e3:c))/l:0,v=e=>{switch(e){case"USD":default:return Ns.jsx(Bt,{className:"w-4 h-4"});case"Gems":return Ns.jsx(Qt,{className:"w-4 h-4"});case"Points":return Ns.jsx(fs,{className:"w-4 h-4"})}};return Ns.jsx(Us,{isOpen:e,onClose:t,maxWidth:"md",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex max-h-[85vh] flex-col overflow-hidden",children:[Ns.jsxs("div",{className:"flex items-center justify-between border-b border-pr-surface-3 px-6 pt-6 pb-4",children:[Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:a?"Fund or Receive Tips":"Tip Creator"}),Ns.jsx("button",{onClick:t,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close content funding modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]}),Ns.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-6",children:[Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-4 mb-6",children:[Ns.jsx("h3",{className:"font-medium text-pr-text-1 mb-2",children:s}),Ns.jsxs("div",{className:"text-sm text-pr-text-2 space-y-1",children:[Ns.jsxs("div",{children:["Current Revenue: $",n.toFixed(2)]}),Ns.jsxs("div",{children:["Share Price: $",i.toFixed(4)]}),Ns.jsxs("div",{children:["Total Shares: ",l]})]})]}),a&&Ns.jsxs("div",{className:"mb-6",children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Action"}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Ns.jsx("button",{type:"button",onClick:()=>g("fund"),className:"p-3 border rounded-lg text-sm font-medium transition-all "+("fund"===f?"border-purple-500 bg-purple-50 text-purple-700":"border-pr-surface-3 hover:border-gray-400"),children:"Fund Content"}),Ns.jsx("button",{type:"button",onClick:()=>g("tip"),className:"p-3 border rounded-lg text-sm font-medium transition-all "+("tip"===f?"border-green-500 bg-green-50 text-green-700":"border-pr-surface-3 hover:border-gray-400"),children:"Enable Tips"})]}),Ns.jsx("p",{className:"text-xs text-pr-text-2 mt-2",children:"fund"===f?"Add your own money to increase content value":"Allow others to tip and increase content value"})]}),Ns.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!(c<=0)){x(!0);try{const e="fund"===f?`/api/content/${r}/fund`:`/api/content/${r}/tip`,s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({amount:c,currency_type:m})});if(s.ok){const e=await s.json();o(e.new_revenue,e.new_share_price),t(),d(0)}else{const e=await s.json();alert(e.error||`Failed to ${f} content`)}}catch(s){console.error(`Failed to ${f} content:`,s),alert(`Failed to ${f} content. Please try again.`)}finally{x(!1)}}},className:"space-y-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Currency"}),Ns.jsx("div",{className:"grid grid-cols-3 gap-2",children:["USD","Gems","Points"].map(e=>Ns.jsxs("button",{type:"button",onClick:()=>p(e),className:"p-3 border rounded-lg text-sm font-medium transition-all flex items-center justify-center space-x-2 "+(m===e?"border-orange-500 bg-orange-50 text-orange-700":"border-pr-surface-3 hover:border-gray-400"),children:[v(e),Ns.jsx("span",{children:e})]},e))})]}),Ns.jsxs("div",{children:[Ns.jsxs("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:["Amount ","Points"===m&&"(1000 Points = $1 USD)"]}),Ns.jsx("input",{type:"number",min:"0",step:"Points"===m?"100":"0.01",value:c||"",onChange:e=>d(Number(e.target.value)),className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:`Enter ${m.toLowerCase()} amount`,required:!0})]}),c>0&&Ns.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[Ns.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Preview Impact"}),Ns.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[Ns.jsxs("div",{children:["New Revenue: $",(n+("Points"===m?c/1e3:c)).toFixed(2)]}),Ns.jsxs("div",{children:["New Share Price: $",b().toFixed(4)]}),Ns.jsxs("div",{className:"text-xs text-blue-600 mt-2",children:["Share price increase: $",(b()-i).toFixed(4)]})]})]}),Ns.jsx("button",{type:"submit",disabled:h||c<=0,className:"w-full rounded-lg bg-gradient-to-r from-orange-500 to-red-500 py-3 font-medium text-white transition-all duration-200 hover:from-orange-600 hover:to-red-600 disabled:opacity-50",children:h?"Processing...":("fund"===f?"Fund":"Tip")+" Content"})]})]})]})})}function nW({contentId:e,currentUser:t,isOwner:r=!1}){const[s,a]=u.useState([]),[n,i]=u.useState(""),[l,o]=u.useState(null),[c,d]=u.useState(""),[m,p]=u.useState(!1),[h,x]=u.useState(!1);u.useEffect(()=>{f()},[e]);const f=async()=>{if(e){p(!0);try{const t=await fetch(`/api/content/${e}/comments`,{credentials:"include"});if(t.ok){const e=await t.json();a(e)}}catch(t){console.error("Failed to fetch comments:",t)}finally{p(!1)}}},g=async(r,s)=>{if(r.trim()&&t){x(!0);try{if(!(await fetch(`/api/content/${e}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({comment_text:r.trim(),parent_comment_id:s||null})})).ok)throw new Error("Failed to post comment");await f(),s?(d(""),o(null)):i("")}catch(a){console.error("Error posting comment:",a),alert("Failed to post comment. Please try again.")}finally{x(!1)}}},b=e=>{const t=new Date(e),r=(new Date).getTime()-t.getTime(),s=Math.floor(r/6e4),a=Math.floor(r/36e5),n=Math.floor(r/864e5);return s<60?`${s}m ago`:a<24?`${a}h ago`:n<7?`${n}d ago`:t.toLocaleDateString()},v=({comment:e,isReply:s=!1})=>{const a=t?.id===e.user_id;return Ns.jsxs("div",{className:(s?"ml-8 border-l-2 border-pr-surface-3 pl-4":"")+" mb-4",children:[Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-4",children:[Ns.jsxs("div",{className:"flex items-start justify-between mb-2",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Fs,{username:e.user_username,displayName:e.user_display_name,avatarUrl:e.user_avatar,size:"sm"}),Ns.jsx("span",{className:"text-xs text-pr-text-2",children:b(e.created_at)}),e.is_pinned&&Ns.jsxs("div",{className:"flex items-center space-x-1 bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs",children:[Ns.jsx(Dr,{className:"w-3 h-3"}),Ns.jsx("span",{children:"Pinned"})]})]}),(a||r)&&Ns.jsxs("div",{className:"relative group",children:[Ns.jsx("button",{className:"text-gray-400 hover:text-pr-text-2 p-1",children:Ns.jsx(Wt,{className:"w-4 h-4"})}),Ns.jsxs("div",{className:"absolute right-0 top-full bg-pr-surface-card border border-pr-surface-3 rounded-lg shadow-lg z-10 min-w-32 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all",children:[r&&!e.is_pinned&&Ns.jsxs("button",{onClick:()=>(async e=>{if(r)try{(await fetch(`/api/content/comments/${e}/pin`,{method:"POST",credentials:"include"})).ok&&await f()}catch(t){console.error("Error pinning comment:",t)}})(e.id),className:"w-full text-left px-3 py-2 text-sm hover:bg-pr-surface-2 flex items-center space-x-2",children:[Ns.jsx(Dr,{className:"w-3 h-3"}),Ns.jsx("span",{children:"Pin"})]}),(a||r)&&Ns.jsxs("button",{onClick:()=>(async e=>{if(t&&window.confirm("Are you sure you want to delete this comment?"))try{(await fetch(`/api/content/comments/${e}`,{method:"DELETE",credentials:"include"})).ok&&await f()}catch(r){console.error("Error deleting comment:",r),alert("Failed to delete comment.")}})(e.id),className:"w-full text-left px-3 py-2 text-sm hover:bg-pr-surface-2 text-red-600 flex items-center space-x-2",children:[Ns.jsx(ss,{className:"w-3 h-3"}),Ns.jsx("span",{children:"Delete"})]})]})]})]}),Ns.jsx("p",{className:"text-pr-text-1 mb-3 whitespace-pre-wrap",children:e.comment_text}),Ns.jsxs("div",{className:"flex items-center space-x-4",children:[Ns.jsxs("button",{onClick:()=>(async e=>{if(t)try{(await fetch(`/api/content/comments/${e}/like`,{method:"POST",credentials:"include"})).ok&&await f()}catch(r){console.error("Error liking comment:",r)}})(e.id),disabled:!t,className:`flex items-center space-x-1 text-sm transition-colors ${e.has_liked?"text-red-500":"text-pr-text-2 hover:text-red-500"} ${t?"":"cursor-not-allowed opacity-50"}`,children:[Ns.jsx(rr,{className:"w-4 h-4 "+(e.has_liked?"fill-current":"")}),Ns.jsx("span",{children:e.likes_count||0})]}),!s&&t&&Ns.jsxs("button",{onClick:()=>o(l===e.id?null:e.id),className:"flex items-center space-x-1 text-sm text-pr-text-2 hover:text-blue-500 transition-colors",children:[Ns.jsx(Fr,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Reply"})]})]}),l===e.id&&Ns.jsx("div",{className:"mt-3 pt-3 border-t border-pr-surface-3",children:Ns.jsxs("div",{className:"flex space-x-2",children:[Ns.jsx("textarea",{value:c,onChange:e=>d(e.target.value),placeholder:"Write a reply...",className:"flex-1 p-2 border border-pr-surface-3 rounded-lg text-sm resize-none",rows:2}),Ns.jsxs("div",{className:"flex flex-col space-y-1",children:[Ns.jsx("button",{onClick:()=>g(c,e.id),disabled:!c.trim()||h,className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:Ns.jsx(qr,{className:"w-4 h-4"})}),Ns.jsx("button",{onClick:()=>{o(null),d("")},className:"text-pr-text-2 hover:text-pr-text-1 p-2",children:""})]})]})})]}),e.replies&&e.replies.length>0&&Ns.jsx("div",{className:"mt-3",children:e.replies.map(e=>Ns.jsx(v,{comment:e,isReply:!0},e.id))})]})};return m?Ns.jsx("div",{className:"flex items-center justify-center py-8",children:Ns.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full"})}):Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-3 pb-4 border-b border-pr-surface-3",children:[Ns.jsx(wr,{className:"w-5 h-5 text-blue-600"}),Ns.jsxs("h3",{className:"text-lg font-semibold text-pr-text-1",children:["Comments (",s.length,")"]})]}),t?Ns.jsx("div",{className:"space-y-3",children:Ns.jsxs("div",{className:"flex items-start space-x-3",children:[Ns.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:t.display_name?.[0]||t.username?.[0]||"U"}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("textarea",{value:n,onChange:e=>i(e.target.value),placeholder:"Share your thoughts...",className:"w-full p-3 border border-pr-surface-3 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3}),Ns.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Be respectful and constructive in your comments"}),Ns.jsxs("button",{onClick:()=>g(n),disabled:!n.trim()||h,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 transition-colors",children:[h?Ns.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):Ns.jsx(qr,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Post Comment"})]})]})]})]})}):Ns.jsxs("div",{className:"bg-pr-surface-2 border border-pr-surface-3 rounded-lg p-4 text-center",children:[Ns.jsx("p",{className:"text-pr-text-2 mb-2",children:"Sign in to join the conversation"}),Ns.jsx("button",{onClick:()=>window.location.href="/auth/google",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Sign In to Comment"})]}),Ns.jsx("div",{className:"space-y-4",children:s.length>0?s.map(e=>Ns.jsx(v,{comment:e},e.id)):Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx(wr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),Ns.jsx("h4",{className:"text-lg font-medium text-pr-text-1 mb-2",children:"No comments yet"}),Ns.jsx("p",{className:"text-pr-text-2",children:t?"Be the first to share your thoughts!":"Sign in to start the conversation."})]})})]})}function iW({isOpen:e,onClose:t,onSponsor:r,contentTitle:s,userGems:a}){const[n,i]=u.useState(null);if(!e)return null;const l=[{id:"quick",name:"Quick Boost",gems:25,multiplier:1.5,duration:1,description:"1.5x visibility for 1 hour",icon:Ns.jsx(fs,{className:"w-5 h-5"}),color:"from-blue-500 to-cyan-500"},{id:"popular",name:"Popular Boost",gems:50,multiplier:2,duration:6,description:"2x visibility for 6 hours",icon:Ns.jsx(Zr,{className:"w-5 h-5"}),color:"from-purple-500 to-pink-500"},{id:"daily",name:"Daily Featured",gems:100,multiplier:3,duration:24,description:"3x visibility for 24 hours",icon:Ns.jsx(zt,{className:"w-5 h-5"}),color:"from-orange-500 to-red-500"},{id:"premium",name:"Premium Spotlight",gems:200,multiplier:4,duration:72,description:"4x visibility for 3 days",icon:Ns.jsx(Jt,{className:"w-5 h-5"}),color:"from-red-500 to-pink-500"},{id:"viral",name:"Viral Campaign",gems:500,multiplier:6,duration:168,description:"6x visibility for 1 week",icon:Ns.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:Ns.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),color:"from-yellow-500 to-orange-500"}],o=e=>{if(e<24)return`${e} hour${1!==e?"s":""}`;if(e<168){const t=Math.floor(e/24);return`${t} day${1!==t?"s":""}`}{const t=Math.floor(e/168);return`${t} week${1!==t?"s":""}`}};return Ns.jsx(Us,{isOpen:e,onClose:t,maxWidth:"2xl",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex max-h-[85vh] flex-col overflow-hidden rounded-2xl bg-pr-surface-card",children:[Ns.jsx("div",{className:"px-6 pt-6 pb-4",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1",children:"Sponsor Content"}),Ns.jsx("button",{onClick:t,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close sponsorship modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]})}),Ns.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-6 space-y-6",children:[Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"mb-2 font-semibold text-pr-text-1",children:s}),Ns.jsx("p",{className:"text-sm text-pr-text-2 leading-relaxed",children:"Sponsoring content boosts its visibility in user feeds and gives it priority placement. Multiple sponsors can boost the same content, increasing its reach exponentially. Your brand will be credited as a sponsor to all users who see this content."})]}),Ns.jsxs("div",{children:[Ns.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[Ns.jsx("span",{className:"text-sm font-medium text-pr-text-1",children:"Your Gem Balance"}),Ns.jsxs("span",{className:"text-lg font-semibold text-purple-600",children:[a," gems"]})]}),Ns.jsx("div",{className:"h-3 w-full rounded-full bg-pr-surface-3",children:Ns.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-300",style:{width:`${Math.min(100,a/500*100)}%`}})})]}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsx("h4",{className:"text-lg font-semibold text-pr-text-1",children:"Choose Your Sponsorship Package"}),Ns.jsx("div",{className:"grid gap-4",children:l.map(e=>Ns.jsx("div",{className:`cursor-pointer rounded-xl border p-4 transition-all duration-200 ${n?.id===e.id?"border-purple-500 bg-purple-50 shadow-lg scale-[1.02]":"border-pr-surface-3 hover:border-pr-surface-3 hover:shadow-md"} ${e.gems>a?"cursor-not-allowed opacity-50":""}`,onClick:()=>{e.gems<=a&&i(e)},children:Ns.jsxs("div",{className:"flex items-start justify-between",children:[Ns.jsxs("div",{className:"flex items-start space-x-4",children:[Ns.jsx("div",{className:`rounded-xl bg-gradient-to-r ${e.color} p-3 text-white`,children:e.icon}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsxs("div",{className:"mb-1 flex items-center space-x-2",children:[Ns.jsx("h5",{className:"font-semibold text-pr-text-1",children:e.name}),"popular"===e.id&&Ns.jsx("span",{className:"rounded-full bg-orange-100 px-2 py-1 text-xs font-medium text-orange-700",children:"Most Popular"}),"viral"===e.id&&Ns.jsx("span",{className:"rounded-full bg-yellow-100 px-2 py-1 text-xs font-medium text-yellow-700",children:"Best Value"})]}),Ns.jsx("p",{className:"mb-2 text-sm text-pr-text-2",children:e.description}),Ns.jsxs("div",{className:"flex items-center space-x-4 text-xs text-pr-text-2",children:[Ns.jsxs("div",{className:"flex items-center space-x-1",children:[Ns.jsx(Rt,{className:"h-3 w-3"}),Ns.jsxs("span",{children:["Duration: ",o(e.duration)]})]}),Ns.jsxs("div",{className:"flex items-center space-x-1",children:[Ns.jsx(fs,{className:"h-3 w-3"}),Ns.jsxs("span",{children:[e.multiplier,"x visibility boost"]})]})]})]})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsx("p",{className:"text-2xl font-bold text-purple-600",children:e.gems}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"gems"}),e.gems>a&&Ns.jsx("p",{className:"mt-1 text-xs text-red-500",children:"Insufficient gems"})]})]})},e.id))})]}),n&&Ns.jsxs("div",{className:"rounded-xl border border-purple-200 bg-gradient-to-r from-purple-50 to-pink-50 p-4",children:[Ns.jsx("h5",{className:"mb-2 font-semibold text-purple-900",children:"Sponsorship Preview"}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Ns.jsxs("div",{children:[Ns.jsx("span",{className:"text-purple-700",children:"Package:"}),Ns.jsx("span",{className:"ml-2 font-medium text-purple-900",children:n.name})]}),Ns.jsxs("div",{children:[Ns.jsx("span",{className:"text-purple-700",children:"Duration:"}),Ns.jsx("span",{className:"ml-2 font-medium text-purple-900",children:o(n.duration)})]}),Ns.jsxs("div",{children:[Ns.jsx("span",{className:"text-purple-700",children:"Visibility Boost:"}),Ns.jsxs("span",{className:"ml-2 font-medium text-purple-900",children:[n.multiplier,"x"]})]}),Ns.jsxs("div",{children:[Ns.jsx("span",{className:"text-purple-700",children:"Cost:"}),Ns.jsxs("span",{className:"ml-2 font-medium text-purple-900",children:[n.gems," gems"]})]})]}),Ns.jsx("div",{className:"mt-3 border-t border-purple-200 pt-3 text-xs text-purple-700",children:"Your brand name will be displayed as a sponsor on this content. Multiple sponsors can boost the same content for increased visibility."})]}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsx("button",{onClick:()=>{n&&r(n.gems,n.multiplier,n.duration)},disabled:!n||n?.gems>a,className:"w-full rounded-xl bg-gradient-to-r from-purple-600 to-indigo-600 px-6 py-4 font-semibold text-white shadow-lg transition-all duration-200 hover:from-purple-700 hover:to-indigo-700 disabled:cursor-not-allowed disabled:opacity-50",children:n?`Sponsor for ${n.gems} gems`:"Select a sponsorship package"}),Ns.jsx("button",{onClick:t,className:"w-full rounded-xl border border-pr-surface-3 px-6 py-3 font-medium text-pr-text-1 transition-all duration-200 hover:border-gray-400",children:"Cancel"})]}),Ns.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4",children:[Ns.jsx("h5",{className:"mb-2 font-medium text-blue-900",children:" Sponsorship Benefits"}),Ns.jsxs("ul",{className:"space-y-1 text-sm text-blue-700",children:[Ns.jsx("li",{children:" Your brand appears on sponsored content"}),Ns.jsx("li",{children:" Content gets priority placement in feeds"}),Ns.jsx("li",{children:" Multiple sponsors increase total visibility boost"}),Ns.jsx("li",{children:" Reach engaged users interested in the content topic"}),Ns.jsx("li",{children:" Analytics provided on sponsorship performance"})]})]})]})]})})}const lW=["https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=1400&q=80&sat=-10","https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&w=1400&q=80&sat=-10","https://images.unsplash.com/photo-1522542550221-31fd19575a2d?auto=format&fit=crop&w=1400&q=80&sat=-10","https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?auto=format&fit=crop&w=1400&q=80&sat=-10","https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1400&q=80&sat=-10"],oW=e=>{const t=Math.abs(Number(e)||0)%lW.length;return`${lW[t]}&sig=${e??t}`},cW=(e,t)=>{const r=(e=>({id:e,creator_id:1e3+e,creator_username:"demo_creator",creator_name:"Demo Creator",creator_avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=demo_content",platform:"instagram",platform_url:"https://instagram.com/promorang",title:"Demo Growth Content Spotlight",description:"Experience a highlight clip from our creator community. Monitor engagement, share prices, and revenue performance in real time.",media_url:oW(e),total_shares:3500,available_shares:1240,engagement_shares_total:3200,engagement_shares_remaining:880,share_price:12.5,current_revenue:8450,performance_metrics:JSON.stringify({impressions:98e3,clicks:12500,conversions:1320,engagement_rate:.128}),views_count:98e3,likes_count:15420,comments_count:2450,reposts_count:1200,is_demo:!0,is_sponsored:!1,created_at:new Date(Date.now()-1728e5).toISOString(),updated_at:(new Date).toISOString()}))(t);if(!e||"object"!=typeof e)return r;const s=Number(e.id??t??r.id),a="string"==typeof e.performance_metrics?e.performance_metrics:JSON.stringify({impressions:e.impressions??r.views_count??0,clicks:e.clicks??0,conversions:e.conversions??0,engagement_rate:e.engagement_rate??.07}),n=e.media_url&&/^https?:\/\//i.test(e.media_url)?e.media_url:oW(s);return{id:s,creator_id:Number(e.creator_id??r.creator_id),creator_username:e.creator_username??r.creator_username,creator_name:e.creator_name??r.creator_name,creator_avatar:e.creator_avatar??r.creator_avatar,platform:e.platform??r.platform,platform_url:e.platform_url??e.content_url??r.platform_url,title:e.title??r.title,description:e.description??r.description,media_url:n,total_shares:Number(e.total_shares??r.total_shares),available_shares:Number(e.available_shares??r.available_shares),engagement_shares_total:Number(e.engagement_shares_total??r.engagement_shares_total),engagement_shares_remaining:Number(e.engagement_shares_remaining??r.engagement_shares_remaining),share_price:Number(e.share_price??r.share_price),current_revenue:Number(e.current_revenue??r.current_revenue),performance_metrics:a,views_count:Number(e.views_count??e.impressions??r.views_count),likes_count:Number(e.likes_count??e.likes??r.likes_count),comments_count:Number(e.comments_count??e.comments??r.comments_count),reposts_count:Number(e.reposts_count??e.shares??r.reposts_count),is_demo:Boolean(e.is_demo??r.is_demo),is_sponsored:Boolean(e.is_sponsored??r.is_sponsored),created_at:e.created_at??r.created_at,updated_at:e.updated_at??e.created_at??r.updated_at}},dW=e=>({likes:14500+e%500,comments:2800+e%250,shares:1200+e%150,views:98e3+e%5e3,internal_moves:420+e%80,external_moves:215+e%40,total_engagement:14500+e%1e3});const uW=function(){const{id:e}=Ce(),t=ke(),r=Os||"",s=e=>`${r}${e}`,[a,n]=u.useState(null),[i,l]=u.useState([]),[o,c]=u.useState(null),[d,m]=u.useState(null),[p,h]=u.useState(!0),[x,f]=u.useState(!1),[g,b]=u.useState(!1),[v,y]=u.useState(!1),[j,w]=u.useState(!1),[N,_]=u.useState(!1),[k,S]=u.useState(!1),[C,O]=u.useState({has_liked:!1,has_saved:!1}),[E,P]=u.useState(!1),[T,A]=u.useState(null),[M,D]=u.useState(!1),I=a?.title?.toLowerCase().includes("[demo]")||a?.title?.toLowerCase().includes("demo")||a?.description?.toLowerCase().includes("demo"),R=o&&a&&(o.id===a.creator_id||o.username===a.creator_name||o.display_name===a.creator_name);u.useEffect(()=>{let t=!0;return(async()=>{if(e){h(!0);try{await Promise.all([$(t),L(t),F(t),z(t),U(t)])}catch(r){console.error("ContentDetail initial load failed:",r)}finally{t&&h(!1)}}})(),()=>{t=!1}},[e]);const $=async(t=!0)=>{const r=Number(e??Date.now());try{const a=await fetch(s(`/api/content/${e}`),{credentials:"include",headers:na()});if(a.ok){const e=await a.json();t&&n(cW(e?.content??e,r))}else t&&n(cW(null,r))}catch(a){console.error("Failed to fetch content:",a),t&&n(cW(null,r))}},L=async()=>{try{const e=na(),t=await fetch(s("/api/users/me/wallets"),{credentials:"include",headers:e});if(t.ok){const e=await t.json();l(e)}}catch(e){console.error("Failed to fetch wallets:",e)}},F=async()=>{try{const e=na(),t=await fetch(s("/api/users/me"),{credentials:"include",headers:e});if(t.ok){const e=await t.json();c(e)}}catch(e){console.error("Failed to fetch user data:",e)}},z=async()=>{const t=Number(e??Date.now());try{const r=await fetch(s(`/api/content/${e}/metrics`),{credentials:"include",headers:na()});if(r.ok){const e=await r.json();m(e)}else m(dW(t))}catch(r){console.error("Failed to fetch metrics:",r),m(dW(t))}},U=async()=>{if(e)try{const t=na(),r=await fetch(s(`/api/content/${e}/sponsorship`),{credentials:"include",headers:t});if(r.ok){const e=await r.json();A(e)}}catch(t){console.error("Failed to fetch sponsorship data:",t)}},B=async t=>{try{if("like"===t&&C.has_liked)return void alert("You have already liked this content!");if("save"===t&&C.has_saved)return void alert("Content already saved to your collection!");if("share"===t)return void b(!0);const r=await fetch(s("/api/users/social-action"),{method:"POST",headers:{"Content-Type":"application/json",...na()},credentials:"include",body:JSON.stringify({action_type:t,reference_id:a?.id,reference_type:"content"})});if(r.ok){const t=await r.json();q(t),await z(),await F(),await $(),await(async()=>{if(o&&e)try{const t=na(),r=await fetch(s(`/api/content/${e}/user-status`),{credentials:"include",headers:t});if(r.ok){const e=await r.json();O(e)}}catch(t){console.error("Failed to fetch user status:",t)}})()}else{const e=await r.json();e.error&&alert(e.error)}}catch(r){console.error(`Failed to record ${t} action:`,r)}},q=e=>{const t=document.createElement("div");t.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-pulse",t.innerHTML=`\n      <div class="flex items-center space-x-2">\n        <span>+${e.points_earned} points!</span>\n        <span class="text-xs">(${e.multiplier.toFixed(1)}x multiplier)</span>\n      </div>\n    `,document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},3e3)},W=e=>{const t={like:.1,comment:.3,save:.5,share:1,repost:.2}[e]||0,r=o?(e=>{switch(e){case"super":return 2;case"premium":return 1.5;default:return 1}})(o.user_tier):1;return Math.floor(t*r*10)/10},K=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString();if(p)return Ns.jsx("div",{className:"flex items-center justify-center h-64",children:Ns.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})});if(!a)return Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1 mb-4",children:"Content not found"}),Ns.jsx("button",{onClick:()=>t("/dashboard"),className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Go Back Home"})]});const V=d||{likes:0,comments:0,shares:0,views:0,internal_moves:0,external_moves:0};return Ns.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[I&&Ns.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-xl p-6 shadow-lg",children:[Ns.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-2",children:[Ns.jsx("span",{className:"text-2xl",children:""}),Ns.jsx("h2",{className:"text-xl font-bold",children:"DEMO CONTENT"}),Ns.jsx("span",{className:"text-2xl",children:""})]}),Ns.jsx("p",{className:"text-center text-orange-100",children:"This is demo content for testing purposes. No real money or value transfers will occur."})]}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-4",children:[Ns.jsx("button",{onClick:()=>t("/dashboard"),className:"flex items-center justify-center w-10 h-10 rounded-full bg-pr-surface-2 hover:bg-pr-surface-3 transition-colors",children:Ns.jsx(ut,{className:"w-5 h-5 text-pr-text-2"})}),Ns.jsxs("div",{children:[Ns.jsxs("h1",{className:"text-2xl font-bold text-pr-text-1",children:["Content Details ",I&&Ns.jsx("span",{className:"text-orange-600",children:"(Demo)"})]}),Ns.jsx("p",{className:"text-pr-text-2",children:I?"Demo investment simulation - no real value":"Investment opportunity analysis"}),Ns.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[a.is_demo&&Ns.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200 flex items-center space-x-1",children:[Ns.jsx(Yr,{className:"w-3 h-3"}),Ns.jsx("span",{children:"Demo"})]}),a.is_sponsored&&Ns.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-gradient-to-r from-orange-100 to-amber-100 text-orange-800 border border-orange-200 flex items-center space-x-1",children:[Ns.jsx(es,{className:"w-3 h-3"}),Ns.jsx("span",{children:"Sponsored"})]}),void 0!==a.views_count&&Ns.jsxs("div",{className:"flex items-center space-x-1 text-pr-text-2",children:[Ns.jsx(Ht,{className:"w-4 h-4"}),Ns.jsxs("span",{className:"text-sm",children:[V.views?.toLocaleString()||a.views_count.toLocaleString()," views"]})]})]})]})]}),R&&Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(zs,{content:"Edit content",children:Ns.jsxs("button",{onClick:()=>_(!0),className:"flex items-center space-x-2 px-4 py-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",children:[Ns.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ns.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Ns.jsx("span",{className:"hidden sm:inline",children:"Edit"})]})}),Ns.jsx(zs,{content:"Delete content",children:Ns.jsxs("button",{onClick:()=>S(!0),className:"flex items-center space-x-2 px-4 py-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",children:[Ns.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ns.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Ns.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})})]})]}),Ns.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[Ns.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl border overflow-hidden "+(I?"border-orange-300 bg-orange-50/30":a.is_sponsored?"ring-2 ring-orange-200 ring-opacity-50":"border-pr-surface-3"),children:[I&&Ns.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white px-4 py-2 text-center",children:Ns.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm font-medium",children:[Ns.jsx("span",{children:""}),Ns.jsx("span",{children:"DEMO CONTENT - No real value transfers"}),Ns.jsx("span",{children:""})]})}),a.is_sponsored&&!I&&Ns.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white px-4 py-2 text-center",children:Ns.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm font-medium",children:[Ns.jsx(es,{className:"w-4 h-4"}),Ns.jsx("span",{children:"SPONSORED CONTENT"}),Ns.jsx(es,{className:"w-4 h-4"})]})}),Ns.jsx("div",{className:"p-6 pb-4",children:Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white text-xl",children:(e=>{switch(e){case"instagram":return"";case"tiktok":return"";case"youtube":return"";case"twitter":return"";case"linkedin":return"";default:return""}})(a.platform)}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx(Fs,{username:a.creator_name,displayName:a.creator_name||"Creator",avatarUrl:a.creator_avatar,className:"font-semibold text-pr-text-1 hover:text-orange-600 transition-colors",showAvatar:!1}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[R&&Ns.jsx("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full text-xs font-medium",children:"YOUR CONTENT"}),I&&Ns.jsx("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs font-medium",children:"DEMO"}),Ns.jsx("span",{className:"text-sm text-pr-text-2 capitalize",children:a.platform})]})]}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"2 hours ago"})]})]})}),a.media_url&&Ns.jsx("div",{className:"relative",children:Ns.jsx("img",{src:a.media_url,alt:a.title,className:"w-full h-96 object-cover"})}),Ns.jsxs("div",{className:"p-6",children:[Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1 mb-3",children:a.title}),a.description&&Ns.jsx("p",{className:"text-pr-text-1 mb-6 leading-relaxed",children:a.description}),Ns.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"flex items-center justify-center space-x-1 text-red-500 mb-1",children:Ns.jsx(rr,{className:"w-5 h-5"})}),Ns.jsx("p",{className:"text-lg font-bold text-pr-text-1",children:K(V.likes)}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Likes"})]}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"flex items-center justify-center space-x-1 text-blue-500 mb-1",children:Ns.jsx(wr,{className:"w-5 h-5"})}),Ns.jsx("p",{className:"text-lg font-bold text-pr-text-1",children:K(V.comments)}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Comments"})]}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"flex items-center justify-center space-x-1 text-green-500 mb-1",children:Ns.jsx(Kr,{className:"w-5 h-5"})}),Ns.jsx("p",{className:"text-lg font-bold text-pr-text-1",children:K(V.shares)}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Shares"})]}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"flex items-center justify-center space-x-1 text-purple-500 mb-1",children:Ns.jsx(Ht,{className:"w-5 h-5"})}),Ns.jsx("p",{className:"text-lg font-bold text-pr-text-1",children:K(V.views)}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Views"})]})]}),Ns.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[Ns.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"Platform Activity"}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("p",{className:"text-lg font-bold text-blue-900",children:V.internal_moves||0}),Ns.jsx("p",{className:"text-xs text-blue-700",children:"Internal Moves"})]}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("p",{className:"text-lg font-bold text-purple-900",children:V.external_moves||0}),Ns.jsx("p",{className:"text-xs text-purple-700",children:"External Moves"})]})]})]}),a.engagement_shares_total>0&&Ns.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6 mb-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center",children:Ns.jsx($t,{className:"w-6 h-6 text-white"})}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-semibold text-green-900",children:"Free Engagement Shares"}),Ns.jsx("p",{className:"text-sm text-green-700",children:"Earn by engaging with this content!"})]})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsx("div",{className:"text-3xl font-bold text-green-600",children:a.engagement_shares_remaining}),Ns.jsx("div",{className:"text-sm text-green-500",children:"remaining"})]})]}),Ns.jsxs("div",{className:"mb-4",children:[Ns.jsxs("div",{className:"flex justify-between items-center mb-2",children:[Ns.jsx("span",{className:"text-sm font-medium text-green-700",children:"Progress"}),Ns.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[a.engagement_shares_total-a.engagement_shares_remaining," / ",a.engagement_shares_total]})]}),Ns.jsx("div",{className:"w-full bg-green-200 rounded-full h-3 overflow-hidden",children:Ns.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-3 rounded-full transition-all duration-500",style:{width:(a.engagement_shares_total-a.engagement_shares_remaining)/a.engagement_shares_total*100+"%"}})})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-700",children:[Ns.jsx(rr,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Like for 1 share"})]}),Ns.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-700",children:[Ns.jsx(wr,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Comment for 3 shares"})]}),Ns.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-700",children:[Ns.jsx(Kr,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Share for 5 shares"})]})]})]}),Ns.jsx("div",{className:"mb-6",children:Ns.jsx(zs,{content:"Perform actions on the original platform for 10x points!",position:"top",children:Ns.jsxs("button",{onClick:()=>y(!0),className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-6 py-4 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center space-x-3 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[Ns.jsx("span",{className:"text-xl",children:""}),Ns.jsx("span",{children:"Perform External Move"}),Ns.jsx("span",{className:"bg-pr-surface-card/20 px-3 py-1 rounded-full text-sm font-bold",children:"10x Points!"})]})})}),Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-xl p-4 mb-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Ns.jsx("span",{className:"text-sm font-medium text-pr-text-2 uppercase tracking-wide",children:"Quick Actions"}),Ns.jsx("span",{className:"text-xs text-gray-400",children:"Reduced points"})]}),Ns.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{action:"like",icon:rr,color:C.has_liked?"text-red-500 bg-red-50":"hover:text-red-500",disabled:C.has_liked},{action:"comment",icon:wr,color:"hover:text-blue-500",disabled:!1},{action:"repost",icon:Lr,color:"hover:text-purple-500",disabled:!1},{action:"save",icon:ft,color:C.has_saved?"text-yellow-500 bg-yellow-50":"hover:text-yellow-500",disabled:C.has_saved}].map(({action:e,icon:t,color:r,disabled:s})=>Ns.jsx(zs,{content:s&&"like"===e?"Already liked!":s&&"save"===e?"Already saved!":`+${W(e)} points`,compact:!0,children:Ns.jsxs("button",{onClick:()=>B(e),disabled:s,className:`flex flex-col items-center p-3 rounded-lg transition-colors hover:bg-pr-surface-card ${r} ${s?"cursor-not-allowed opacity-75":""}`,children:[Ns.jsx(t,{className:`w-5 h-5 mb-1 ${C.has_liked&&"like"===e?"fill-current":""} ${C.has_saved&&"save"===e?"fill-current":""}`}),Ns.jsx("span",{className:"text-xs text-pr-text-2 capitalize",children:e}),Ns.jsx("span",{className:"text-xs text-green-600 font-medium",children:s&&("like"===e||"save"===e)?"":`+${W(e)}`})]})},e))})]}),Ns.jsx("div",{className:"pt-4 border-t border-pr-border",children:Ns.jsxs("a",{href:a.platform_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 text-purple-600 hover:text-purple-700 transition-colors",children:[Ns.jsx(Kt,{className:"w-4 h-4"}),Ns.jsxs("span",{children:["View on ",a.platform]})]})})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl border border-pr-surface-3 p-6",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Performance Analytics"}),Ns.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[Ns.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-4 rounded-lg",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[Ns.jsx(as,{className:"w-5 h-5 text-green-600"}),Ns.jsx("span",{className:"text-sm font-medium text-green-800",children:"Engagement Rate"})]}),Ns.jsx("p",{className:"text-xl font-bold text-green-900",children:"8.7%"}),Ns.jsx("p",{className:"text-xs text-green-600",children:"+2.3% from avg"})]}),Ns.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-lg",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[Ns.jsx(yt,{className:"w-5 h-5 text-blue-600"}),Ns.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Growth Rate"})]}),Ns.jsx("p",{className:"text-xl font-bold text-blue-900",children:"15.2%"}),Ns.jsx("p",{className:"text-xs text-blue-600",children:"Last 24 hours"})]}),Ns.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 p-4 rounded-lg",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[Ns.jsx(Bt,{className:"w-5 h-5 text-purple-600"}),Ns.jsx("span",{className:"text-sm font-medium text-purple-800",children:"Revenue/View"})]}),Ns.jsx("p",{className:"text-xl font-bold text-purple-900",children:"$0.0032"}),Ns.jsx("p",{className:"text-xs text-purple-600",children:"Industry avg: $0.0028"})]}),Ns.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 p-4 rounded-lg",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[Ns.jsx(us,{className:"w-5 h-5 text-orange-600"}),Ns.jsx("span",{className:"text-sm font-medium text-orange-800",children:"Reach"})]}),Ns.jsx("p",{className:"text-xl font-bold text-orange-900",children:"1.2M"}),Ns.jsx("p",{className:"text-xs text-orange-600",children:"Unique users"})]})]})]}),Ns.jsx("div",{className:"bg-pr-surface-card rounded-xl border border-pr-surface-3 p-6",children:Ns.jsx(nW,{contentId:a.id,currentUser:o,isOwner:R||!1})})]}),Ns.jsxs("div",{className:"space-y-6",children:[T&&Ns.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[Ns.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20",children:Ns.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),Ns.jsx("span",{className:"font-semibold text-purple-900",children:"Sponsored Content"}),T.sponsor_count>1&&Ns.jsxs("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-xs font-medium",children:[T.sponsor_count," Sponsors"]})]}),Ns.jsxs("p",{className:"text-sm text-purple-700 mb-3",children:["This content receives ",T.total_boost_multiplier||T.boost_multiplier,"x visibility boost",T.sponsor_count>1&&" from multiple sponsors"]}),Ns.jsxs("div",{className:"space-y-2",children:[T.sponsor_names&&T.sponsor_names.length>0?Ns.jsxs("div",{className:"text-sm text-purple-700",children:[Ns.jsx("span",{className:"font-medium",children:"Sponsored by:"}),Ns.jsxs("div",{className:"mt-1",children:[T.sponsor_names.slice(0,3).map((e,t)=>Ns.jsx("span",{className:"inline-block bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-xs font-medium mr-2 mb-1",children:e},t)),T.sponsor_names.length>3&&Ns.jsxs("span",{className:"text-xs text-purple-600",children:["+",T.sponsor_names.length-3," more"]})]})]}):Ns.jsxs("div",{className:"text-sm text-purple-700",children:[Ns.jsx("span",{className:"font-medium",children:"Primary Sponsor:"})," ",T.primary_sponsor||T.advertiser_name||"Advertiser"]}),Ns.jsxs("div",{className:"flex items-center justify-between text-xs text-purple-600 pt-2 border-t border-purple-200",children:[Ns.jsxs("span",{children:[T.total_gems_allocated||T.gems_allocated," gems invested"]}),Ns.jsxs("span",{children:[T.sponsor_count||1," active sponsorship",1!==(T.sponsor_count||1)?"s":""]})]})]})]}),"advertiser"===o?.user_type&&!R&&Ns.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[Ns.jsx(ts,{className:"w-5 h-5 text-blue-600"}),Ns.jsx("span",{className:"font-semibold text-blue-900",children:T?"Boost Further":"Sponsor This Content"})]}),Ns.jsx("p",{className:"text-sm text-blue-700 mb-3",children:T?"Add your sponsorship to boost visibility even more! Multiple sponsors can collaborate to maximize reach.":"Boost this content's visibility and reach more users. Sponsored content appears higher in feeds and gets priority placement."}),T&&Ns.jsx("div",{className:"bg-blue-100 rounded-lg p-3 mb-3",children:Ns.jsxs("div",{className:"text-xs text-blue-700",children:[Ns.jsxs("div",{className:"flex justify-between items-center",children:[Ns.jsx("span",{children:"Current boost:"}),Ns.jsxs("span",{className:"font-semibold",children:[T.total_boost_multiplier||T.boost_multiplier,"x"]})]}),Ns.jsxs("div",{className:"flex justify-between items-center",children:[Ns.jsx("span",{children:"Active sponsors:"}),Ns.jsx("span",{className:"font-semibold",children:T.sponsor_count||1})]})]})}),Ns.jsxs("button",{onClick:()=>P(!0),className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-4 py-3 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2",children:[Ns.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:Ns.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),Ns.jsx("span",{children:T?"Add Your Sponsorship":"Sponsor This Content"})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl border border-pr-surface-3 p-6",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Investment Details"}),Ns.jsxs("div",{className:"space-y-4 mb-6",children:[Ns.jsxs("div",{className:"flex justify-between items-center",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Share Price"}),Ns.jsxs("span",{className:"text-xl font-bold text-green-600",children:["$",(a.share_price||0).toFixed(4)]})]}),Ns.jsxs("div",{className:"flex justify-between items-center",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Available Shares"}),Ns.jsx("span",{className:"font-semibold text-pr-text-1",children:a.available_shares||0})]}),Ns.jsxs("div",{className:"flex justify-between items-center",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Total Shares"}),Ns.jsx("span",{className:"font-semibold text-pr-text-1",children:a.total_shares||0})]}),Ns.jsxs("div",{className:"flex justify-between items-center",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Engagement Shares"}),Ns.jsxs("span",{className:"font-semibold text-orange-600",children:[a.engagement_shares_remaining||0,"/",a.engagement_shares_total||0]})]}),Ns.jsxs("div",{className:"flex justify-between items-center",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Current Revenue"}),Ns.jsxs("span",{className:"font-semibold text-purple-600",children:["$",(a.current_revenue||0).toFixed(2)]})]})]}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsx(zs,{content:I?"Demo content - no real value transfers":"Tip creator & boost content value",children:Ns.jsxs("button",{onClick:()=>D(!0),className:"w-full px-4 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2 "+(I?"bg-orange-100 hover:bg-orange-200 text-orange-700":"bg-purple-100 hover:bg-purple-200 text-purple-700"),children:[Ns.jsx(Xt,{className:"w-4 h-4"}),Ns.jsx("span",{children:I?"Demo Tip Creator":"Tip Creator"})]})}),Ns.jsx("button",{onClick:()=>f(!0),disabled:0===a.available_shares,className:"w-full px-6 py-3 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-white "+(I?"bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600":"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600"),children:0===a.available_shares?"Sold Out":I?"Demo Shares":"Buy Shares"}),Ns.jsxs("button",{onClick:()=>t("/invest/social-forecasts"),className:"w-full bg-blue-100 hover:bg-blue-200 text-blue-700 px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[Ns.jsx(ts,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Make Performance Forecast"})]}),I&&Ns.jsx("div",{className:"bg-orange-100 border border-orange-200 rounded-lg p-3",children:Ns.jsx("p",{className:"text-xs text-orange-700 text-center",children:" This is demo content. No real purchases or value transfers will occur."})})]})]}),Ns.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Market Insights"}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"24h Volume"}),Ns.jsx("span",{className:"font-semibold text-pr-text-1",children:"$1,247"})]}),Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Price Change"}),Ns.jsx("span",{className:"font-semibold text-green-600",children:"+7.2%"})]}),Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Investors"}),Ns.jsx("span",{className:"font-semibold text-pr-text-1",children:"23"})]}),Ns.jsxs("div",{className:"flex justify-between",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"ROI Potential"}),Ns.jsx("span",{className:"font-semibold text-purple-600",children:"High"})]})]})]})]})]}),a&&Ns.jsxs(Ns.Fragment,{children:[Ns.jsx($c,{content:a,wallet:Array.isArray(i)?i.find(e=>"USD"===e.currency_type):void 0,isOpen:x,onClose:()=>f(!1),onPurchase:async(e,t)=>{try{if(!(await fetch(s("/api/content/buy-shares"),{method:"POST",headers:{"Content-Type":"application/json",...na()},credentials:"include",body:JSON.stringify({content_id:e.id,shares_count:t})})).ok)throw new Error("Purchase failed");await $(),await L(),await z()}catch(r){throw console.error("Failed to buy shares:",r),r}}}),Ns.jsx(Yc,{user:o,contentId:a.id,contentTitle:a.title,isOpen:g,onClose:()=>b(!1),onSuccess:()=>{F(),z()}}),Ns.jsx(Jc,{user:o,contentId:a.id,contentTitle:a.title,contentPlatform:a.platform,contentUrl:a.platform_url,isOpen:v,onClose:()=>y(!1),onSuccess:()=>{F(),z()}}),Ns.jsx(aW,{isOpen:j,onClose:()=>w(!1),contentId:a.id,contentTitle:a.title,isOwner:!1,currentRevenue:a.current_revenue||0,sharePrice:a.share_price||0,totalShares:a.total_shares||0,onSuccess:(e,t)=>{w(!1),a&&n({...a,current_revenue:e,share_price:t}),F()}}),Ns.jsx(Bu,{isOpen:N,onClose:()=>_(!1),onSuccess:e=>{_(!1),n(e),z()},content:a}),Ns.jsx(qu,{isOpen:k,onClose:()=>S(!1),onConfirm:async()=>{if(a)try{const e=await fetch(s(`/api/content/${a.id}`),{method:"DELETE",credentials:"include",headers:na()});if(e.ok)t("/dashboard");else{const t=await e.json();alert(t.error||"Failed to delete content")}}catch(e){console.error("Error deleting content:",e),alert("Failed to delete content")}},title:"Delete Content",message:`Are you sure you want to delete "${a.title}"? This action cannot be undone and will remove all associated data.`,confirmText:"Delete",cancelText:"Cancel",type:"danger"}),Ns.jsx(iW,{isOpen:E,onClose:()=>P(!1),onSponsor:async(e,t,r)=>{if(a)try{const n=await fetch(s(`/api/content/${a.id}/sponsor`),{method:"POST",headers:{"Content-Type":"application/json",...na()},credentials:"include",body:JSON.stringify({gems_allocated:e,boost_multiplier:t,duration_hours:r})});if(n.ok)P(!1),await U(),await F(),alert(`Content sponsored successfully! It will receive ${t}x visibility boost for ${r} hours.`);else{const e=await n.json();alert(e.error||"Failed to sponsor content")}}catch(n){console.error("Error sponsoring content:",n),alert("Failed to sponsor content")}},contentTitle:a.title,userGems:o?.gems_balance||0}),Ns.jsx(am,{content:a,isOpen:M,onClose:()=>D(!1),onTip:async(e,t)=>{try{if(!(await fetch(s("/api/content/tip"),{method:"POST",headers:{"Content-Type":"application/json",...na()},credentials:"include",body:JSON.stringify({content_id:e.id,tip_amount:t})})).ok)throw new Error("Tip failed");{const r=document.createElement("div");r.className="fixed top-4 right-4 bg-purple-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-bounce",r.innerHTML=`\n          <div class="flex items-center space-x-2">\n            <span class="text-lg"></span>\n            <div>\n              <div class="font-semibold">Tip sent!</div>\n              <div class="text-xs opacity-90">Tipped ${t} gems to ${e.creator_name||e.creator_username||"creator"}</div>\n            </div>\n          </div>\n        `,document.body.appendChild(r),setTimeout(()=>{document.body.contains(r)&&document.body.removeChild(r)},4e3),F()}}catch(r){throw console.error("Failed to send tip:",r),r}}})]})]})};function mW(){const{holdingId:e}=Ce(),t=ke(),[r,s]=u.useState(null),[a,n]=u.useState(!0);if(u.useEffect(()=>{if(!e)return;(async()=>{n(!0);const t=await(async(e,t)=>{try{const r=t?`?userId=${encodeURIComponent(t)}`:"",s=await la(`/api/portfolio/holdings/${e}${r}`,{credentials:"include"});return s.ok?s.json():Sm(e)}catch(r){return console.error("Failed to fetch holding detail:",r),Sm(e)}})(e);s(t),n(!1)})()},[e]),!e)return Ns.jsxs("div",{className:"p-6",children:[Ns.jsxs("button",{onClick:()=>t(-1),className:"inline-flex items-center text-sm text-pr-text-2 hover:text-pr-text-1",children:[Ns.jsx(ut,{className:"w-4 h-4 mr-2"})," Back"]}),Ns.jsx("p",{className:"mt-6 text-pr-text-2",children:"Holding not found."})]});if(a||!r)return Ns.jsxs("div",{className:"p-6",children:[Ns.jsxs("button",{onClick:()=>t(-1),className:"inline-flex items-center text-sm text-pr-text-2 hover:text-pr-text-1",children:[Ns.jsx(ut,{className:"w-4 h-4 mr-2"})," Back"]}),Ns.jsx("div",{className:"mt-10 flex justify-center",children:Ns.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})})]});const{holding:i,content:l,performance:o,marketplace:c}=r;return Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsx("div",{className:"flex items-center justify-between",children:Ns.jsxs("button",{onClick:()=>t(-1),className:"inline-flex items-center text-sm text-pr-text-2 hover:text-pr-text-1",children:[Ns.jsx(ut,{className:"w-4 h-4 mr-2"})," Back to portfolio"]})}),Ns.jsx("div",{className:"bg-pr-surface-card rounded-2xl border border-pr-surface-3 shadow-sm p-6",children:Ns.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-4",children:[Ns.jsx("img",{src:i.content_thumbnail,alt:i.content_title,className:"w-20 h-20 rounded-xl object-cover"}),Ns.jsxs("div",{children:[Ns.jsx("h1",{className:"text-2xl font-semibold text-pr-text-1",children:i.content_title}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:[i.creator_name,"  ",i.platform.toUpperCase()]}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mt-1",children:l.description})]})]}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ns.jsxs("div",{className:"text-right",children:[Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Shares Owned"}),Ns.jsx("p",{className:"text-lg font-semibold text-pr-text-1",children:i.owned_shares})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Market Value"}),Ns.jsxs("p",{className:"text-lg font-semibold text-pr-text-1",children:["$",i.market_value.toFixed(2)]})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Unrealized Gain"}),Ns.jsxs("p",{className:"text-lg font-semibold "+(i.unrealized_gain>=0?"text-green-600":"text-red-600"),children:[i.unrealized_gain>=0?"+":"","$",i.unrealized_gain.toFixed(2)]})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Available to sell"}),Ns.jsx("p",{className:"text-lg font-semibold text-pr-text-1",children:i.available_to_sell})]})]})]})}),Ns.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Ns.jsxs("div",{className:"lg:col-span-2 bg-pr-surface-card border border-pr-surface-3 rounded-2xl p-6 shadow-sm",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsx("h2",{className:"text-lg font-semibold text-pr-text-1",children:"Performance history"}),Ns.jsxs("span",{className:"inline-flex items-center text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700",children:[Ns.jsx(as,{className:"w-3 h-3 mr-1"})," 30 day trend"]})]}),Ns.jsx("div",{className:"space-y-2",children:o.history.map(e=>Ns.jsxs("div",{className:"flex items-center justify-between text-sm text-pr-text-2",children:[Ns.jsx("span",{children:e.date}),Ns.jsxs("span",{children:["$",e.price.toFixed(2),"  ",e.volume," shares traded"]})]},e.date))})]}),Ns.jsxs("div",{className:"bg-pr-surface-card border border-pr-surface-3 rounded-2xl p-6 shadow-sm",children:[Ns.jsx("h2",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Activity"}),Ns.jsx("div",{className:"space-y-3",children:o.ledger.map(e=>Ns.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("div",{className:"w-9 h-9 bg-pr-surface-2 rounded-full flex items-center justify-center",children:"purchase"===e.type?Ns.jsx(dt,{className:"w-4 h-4 text-green-600"}):Ns.jsx(Bt,{className:"w-4 h-4 text-purple-600"})}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-medium text-pr-text-1 capitalize",children:e.type}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:new Date(e.timestamp).toLocaleString()})]})]}),Ns.jsx("div",{className:"text-right text-sm text-pr-text-1",children:e.quantity?`${e.quantity} shares @ $${e.price.toFixed(2)}`:`$${e.price.toFixed(2)}`})]},e.id))})]})]}),Ns.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ns.jsxs("div",{className:"bg-pr-surface-card border border-pr-surface-3 rounded-2xl p-6 shadow-sm",children:[Ns.jsx("h2",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Marketplace listings"}),Ns.jsx("div",{className:"space-y-3",children:c.listings.length?c.listings.map(e=>Ns.jsxs("div",{className:"flex items-center justify-between bg-pr-surface-2 rounded-lg px-4 py-3",children:[Ns.jsxs("div",{children:[Ns.jsxs("p",{className:"text-sm font-medium text-pr-text-1",children:[e.quantity," shares"]}),Ns.jsxs("p",{className:"text-xs text-pr-text-2 capitalize",children:["Status: ",e.status]})]}),Ns.jsxs("div",{className:"text-sm font-semibold text-pr-text-1",children:["$",e.ask_price.toFixed(2)]})]},e.id)):Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"No listing history yet."})})]}),Ns.jsxs("div",{className:"bg-pr-surface-card border border-pr-surface-3 rounded-2xl p-6 shadow-sm",children:[Ns.jsx("h2",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Recent offers"}),Ns.jsx("div",{className:"space-y-3",children:c.offers.length?c.offers.map(e=>Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg px-4 py-3",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsxs("p",{className:"text-sm font-medium text-pr-text-1",children:[e.quantity," shares @ $",e.bid_price.toFixed(2)]}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:e.buyer_name})]}),Ns.jsx("span",{className:"text-xs font-semibold text-orange-600",children:e.status})]}),e.message&&Ns.jsxs("p",{className:"text-xs text-pr-text-2 mt-2",children:["",e.message,""]})]},e.id)):Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"No offers yet."})})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card border border-pr-surface-3 rounded-2xl p-6 shadow-sm",children:[Ns.jsx("h2",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Content performance overview"}),Ns.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[Ns.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[Ns.jsx("p",{className:"text-xs uppercase tracking-wide text-orange-600",children:"Total views"}),Ns.jsx("p",{className:"text-xl font-semibold text-orange-900",children:l.total_views.toLocaleString()})]}),Ns.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[Ns.jsx("p",{className:"text-xs uppercase tracking-wide text-blue-600",children:"Engagement rate"}),Ns.jsxs("p",{className:"text-xl font-semibold text-blue-900",children:[l.engagement_rate,"%"]})]}),Ns.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[Ns.jsx("p",{className:"text-xs uppercase tracking-wide text-purple-600",children:"Earnings to date"}),Ns.jsxs("p",{className:"text-xl font-semibold text-purple-900",children:["$",l.earnings_to_date.toFixed(2)]})]}),Ns.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[Ns.jsx("p",{className:"text-xs uppercase tracking-wide text-green-600",children:"Last trade"}),Ns.jsx("p",{className:"text-xl font-semibold text-green-900",children:i.last_trade_at?new Date(i.last_trade_at).toLocaleDateString():"N/A"})]})]})]})]})}function pW(){const{predictionId:e}=Ce(),t=ke(),[r,s]=u.useState(null),[a,n]=u.useState(!0);if(u.useEffect(()=>{if(!e)return;(async()=>{n(!0);const t=await(async e=>{try{const t=await la(`/api/portfolio/predictions/${e}`,{credentials:"include"});return t.ok?t.json():Cm(e)}catch(t){return console.error("Failed to fetch prediction detail:",t),Cm(e)}})(e);s(t),n(!1)})()},[e]),!e)return Ns.jsxs("div",{className:"p-6",children:[Ns.jsxs("button",{onClick:()=>t(-1),className:"inline-flex items-center text-sm text-pr-text-2 hover:text-pr-text-1",children:[Ns.jsx(ut,{className:"w-4 h-4 mr-2"})," Back"]}),Ns.jsx("p",{className:"mt-6 text-pr-text-2",children:"Prediction not found."})]});if(a||!r)return Ns.jsxs("div",{className:"p-6",children:[Ns.jsxs("button",{onClick:()=>t(-1),className:"inline-flex items-center text-sm text-pr-text-2 hover:text-pr-text-1",children:[Ns.jsx(ut,{className:"w-4 h-4 mr-2"})," Back to predictions"]}),Ns.jsx("div",{className:"mt-10 flex justify-center",children:Ns.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})})]});const{prediction:i,forecast:l,trajectory:o,participants:c}=r;return Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsx("div",{className:"flex items-center justify-between",children:Ns.jsxs("button",{onClick:()=>t(-1),className:"inline-flex items-center text-sm text-pr-text-2 hover:text-pr-text-1",children:[Ns.jsx(ut,{className:"w-4 h-4 mr-2"})," Back"]})}),Ns.jsx("div",{className:"bg-pr-surface-card rounded-2xl border border-pr-surface-3 shadow-sm p-6",children:Ns.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[Ns.jsxs("div",{children:[Ns.jsx("h1",{className:"text-2xl font-semibold text-pr-text-1",children:i.content_title}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:[i.platform.toUpperCase(),"  Placed ",new Date(i.created_at).toLocaleDateString()]}),Ns.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-xs text-pr-text-2 uppercase tracking-wide",children:"Side"}),Ns.jsx("p",{className:"text-base font-semibold text-pr-text-1 capitalize",children:i.prediction_side})]}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-xs text-pr-text-2 uppercase tracking-wide",children:"Stake"}),Ns.jsxs("p",{className:"text-base font-semibold text-pr-text-1",children:["$",i.amount.toFixed(2)]})]}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-xs text-pr-text-2 uppercase tracking-wide",children:"Potential payout"}),Ns.jsxs("p",{className:"text-base font-semibold text-pr-text-1",children:["$",i.potential_payout.toFixed(2)]})]}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-xs text-pr-text-2 uppercase tracking-wide",children:"Status"}),Ns.jsx("p",{className:"text-base font-semibold text-orange-600 capitalize",children:i.status})]})]})]}),Ns.jsxs("div",{className:"bg-orange-50 rounded-2xl p-4 border border-orange-200",children:[Ns.jsx("p",{className:"text-xs uppercase tracking-wide text-orange-600",children:"Forecast target"}),Ns.jsxs("p",{className:"text-2xl font-semibold text-orange-900",children:[l.metric,"  ",l.target]}),Ns.jsxs("p",{className:"text-sm text-orange-700 mt-2",children:["Odds ",l.odds.toFixed(2),"x"]}),Ns.jsxs("p",{className:"text-xs text-orange-700 mt-1",children:["Expires ",new Date(l.expires_at).toLocaleString()]})]})]})}),Ns.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Ns.jsxs("div",{className:"lg:col-span-2 bg-pr-surface-card border border-pr-surface-3 rounded-2xl p-6 shadow-sm",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsx("h2",{className:"text-lg font-semibold text-pr-text-1",children:"Trajectory"}),Ns.jsxs("span",{className:"inline-flex items-center text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700",children:[Ns.jsx(wt,{className:"w-3 h-3 mr-1"})," Trend overview"]})]}),Ns.jsx("div",{className:"space-y-2",children:o.map(e=>Ns.jsxs("div",{className:"flex items-center justify-between text-sm text-pr-text-2",children:[Ns.jsx("span",{children:e.date}),Ns.jsxs("span",{children:["Actual ",e.actual.toLocaleString(),"  Expected ",e.expected.toLocaleString()]})]},e.date))})]}),Ns.jsxs("div",{className:"bg-pr-surface-card border border-pr-surface-3 rounded-2xl p-6 shadow-sm",children:[Ns.jsx("h2",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Projection notes"}),Ns.jsx("p",{className:"text-sm text-pr-text-2 leading-relaxed",children:l.creator_projection})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card border border-pr-surface-3 rounded-2xl p-6 shadow-sm",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(us,{className:"w-4 h-4 text-purple-600"}),Ns.jsx("h2",{className:"text-lg font-semibold text-pr-text-1",children:"Participants"})]}),Ns.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-purple-100 text-purple-700",children:[c.length," active"]})]}),Ns.jsx("div",{className:"space-y-3",children:c.map((e,t)=>Ns.jsxs("div",{className:"flex items-center justify-between bg-pr-surface-2 rounded-lg px-4 py-3",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-medium text-pr-text-1",children:e.username}),Ns.jsx("p",{className:"text-xs text-pr-text-2 capitalize",children:e.side})]}),Ns.jsxs("div",{className:"text-right text-sm text-pr-text-2",children:[Ns.jsxs("p",{children:["$",e.amount.toFixed(2)]}),Ns.jsx("p",{className:"text-xs text-pr-text-2 capitalize",children:e.status})]})]},`${e.username}-${t}`))})]})]})}function hW({isOpen:e,onClose:t,onSuccess:r,drop:s}){const[a,n]=u.useState({title:s.title,description:s.description,drop_type:s.drop_type,difficulty:s.difficulty,key_cost:s.key_cost,gem_reward_base:s.gem_reward_base,gem_pool_total:s.gem_pool_total,follower_threshold:s.follower_threshold,time_commitment:s.time_commitment||"",requirements:s.requirements||"",deliverables:s.deliverables||"",deadline_at:s.deadline_at?s.deadline_at.split("T")[0]:"",max_participants:s.max_participants||void 0,platform:s.platform||"",content_url:s.content_url||"",move_cost_points:s.move_cost_points,key_reward_amount:s.key_reward_amount,is_proof_drop:s.is_proof_drop,is_paid_drop:s.is_paid_drop,reward_logic:""}),[i,l]=u.useState(!1),[o,c]=u.useState(null);if(u.useEffect(()=>{s&&n({title:s.title,description:s.description,drop_type:s.drop_type,difficulty:s.difficulty,key_cost:s.key_cost,gem_reward_base:s.gem_reward_base,gem_pool_total:s.gem_pool_total,follower_threshold:s.follower_threshold,time_commitment:s.time_commitment||"",requirements:s.requirements||"",deliverables:s.deliverables||"",deadline_at:s.deadline_at?s.deadline_at.split("T")[0]:"",max_participants:s.max_participants||void 0,platform:s.platform||"",content_url:s.content_url||"",move_cost_points:s.move_cost_points,key_reward_amount:s.key_reward_amount,is_proof_drop:s.is_proof_drop,is_paid_drop:s.is_paid_drop,reward_logic:""})},[s]),!e)return null;return Ns.jsx(Us,{isOpen:e,onClose:t,maxWidth:"4xl",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex max-h-[85vh] flex-col overflow-hidden rounded-xl bg-pr-surface-card",children:[Ns.jsxs("div",{className:"flex items-center justify-between border-b border-pr-surface-3 px-6 py-6",children:[Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"Edit Drop"}),Ns.jsx("button",{onClick:t,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2",disabled:i,"aria-label":"Close edit drop modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]}),Ns.jsxs("form",{onSubmit:async e=>{e.preventDefault(),l(!0),c(null);try{const e={...a,deadline_at:a.deadline_at?new Date(a.deadline_at).toISOString():void 0};if(!Lu.safeParse(e).success)return void c("Please check all required fields");const n=await fetch(`/api/drops/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(n.ok){const e=await n.json();r(e.drop),t()}else{const e=await n.json();c(e.error||"Failed to update drop")}}catch(n){console.error("Error updating drop:",n),c("Failed to update drop")}finally{l(!1)}},className:"flex-1 overflow-y-auto px-6 py-6 space-y-6",children:[o&&Ns.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:o}),Ns.jsxs("div",{className:"bg-pr-surface-2 border border-pr-surface-3 rounded-lg p-4",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-2",children:"Drop Type"}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[s.is_proof_drop&&Ns.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:"Proof Drop - Free to apply"}),s.is_paid_drop&&Ns.jsx("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium",children:"Paid Drop - Costs keys, rewards gems"}),!s.is_proof_drop&&!s.is_paid_drop&&Ns.jsx("span",{className:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-medium",children:"Move Drop - Social actions for keys"})]}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mt-2",children:"Drop type cannot be changed after creation"})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ns.jsxs("div",{className:"md:col-span-2",children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Title *"}),Ns.jsx("input",{type:"text",value:a.title,onChange:e=>n({...a,title:e.target.value}),className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"Enter drop title",required:!0,disabled:i})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Drop Category *"}),Ns.jsx("select",{value:a.drop_type,onChange:e=>n({...a,drop_type:e.target.value}),className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",required:!0,disabled:i,children:zu.options.map(e=>Ns.jsx("option",{value:e,children:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},e))})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Difficulty *"}),Ns.jsx("select",{value:a.difficulty,onChange:e=>n({...a,difficulty:e.target.value}),className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",required:!0,disabled:i,children:Uu.options.map(e=>Ns.jsx("option",{value:e,className:"capitalize",children:e},e))})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Description *"}),Ns.jsx("textarea",{value:a.description,onChange:e=>n({...a,description:e.target.value}),rows:4,className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"Describe what needs to be done...",required:!0,disabled:i})]}),s.is_paid_drop&&Ns.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Paid Drop Settings"}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Key Cost"}),Ns.jsx("input",{type:"number",min:"1",value:a.key_cost,onChange:e=>n({...a,key_cost:Number(e.target.value)}),className:"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:i})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Gem Reward"}),Ns.jsx("input",{type:"number",min:"1",value:a.gem_reward_base,onChange:e=>n({...a,gem_reward_base:Number(e.target.value)}),className:"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:i})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Total Gem Pool"}),Ns.jsx("input",{type:"number",min:"0",value:a.gem_pool_total,onChange:e=>n({...a,gem_pool_total:Number(e.target.value)}),className:"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:i})]})]})]}),!s.is_proof_drop&&!s.is_paid_drop&&Ns.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-orange-900 mb-4",children:"Move Drop Settings"}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-orange-700 mb-2",children:"Points Cost"}),Ns.jsx("input",{type:"number",min:"1",value:a.move_cost_points,onChange:e=>n({...a,move_cost_points:Number(e.target.value)}),className:"w-full px-4 py-2 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:i})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-orange-700 mb-2",children:"Keys Reward"}),Ns.jsx("input",{type:"number",min:"1",value:a.key_reward_amount,onChange:e=>n({...a,key_reward_amount:Number(e.target.value)}),className:"w-full px-4 py-2 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:i})]})]})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Min. Followers Required"}),Ns.jsx("input",{type:"number",min:"0",value:a.follower_threshold,onChange:e=>n({...a,follower_threshold:Number(e.target.value)}),className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"0",disabled:i})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Max Participants"}),Ns.jsx("input",{type:"number",min:"1",value:a.max_participants||"",onChange:e=>n({...a,max_participants:e.target.value?Number(e.target.value):void 0}),className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"Unlimited",disabled:i})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Time Commitment"}),Ns.jsx("input",{type:"text",value:a.time_commitment,onChange:e=>n({...a,time_commitment:e.target.value}),className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"e.g., 2-3 hours",disabled:i})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Deadline"}),Ns.jsx("input",{type:"date",value:a.deadline_at,onChange:e=>n({...a,deadline_at:e.target.value}),className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",disabled:i})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Platform"}),Ns.jsx("input",{type:"text",value:a.platform,onChange:e=>n({...a,platform:e.target.value}),className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"e.g., Instagram, TikTok",disabled:i})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Content URL"}),Ns.jsx("input",{type:"url",value:a.content_url,onChange:e=>n({...a,content_url:e.target.value}),className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"https://...",disabled:i})]})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Requirements"}),Ns.jsx("textarea",{value:a.requirements,onChange:e=>n({...a,requirements:e.target.value}),rows:4,className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"What are the requirements to participate?",disabled:i})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Deliverables"}),Ns.jsx("textarea",{value:a.deliverables,onChange:e=>n({...a,deliverables:e.target.value}),rows:4,className:"w-full px-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"What should participants deliver?",disabled:i})]})]}),Ns.jsxs("div",{className:"flex items-center justify-end space-x-4 border-t border-pr-surface-3 pt-4",children:[Ns.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 rounded-lg border border-pr-surface-3 text-pr-text-1 hover:bg-pr-surface-2 transition-colors",disabled:i,children:"Cancel"}),Ns.jsxs("button",{type:"submit",disabled:i,className:"inline-flex items-center space-x-2 px-6 py-3 rounded-lg bg-gradient-to-r from-orange-500 to-red-500 text-white font-semibold hover:from-orange-600 hover:to-red-600 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[i?Ns.jsx(pr,{className:"w-5 h-5 animate-spin"}):Ns.jsx(Ur,{className:"w-5 h-5"}),Ns.jsx("span",{children:i?"Saving...":"Save Changes"})]})]})]})]})})}function xW(){const{id:e,taskId:t,dropId:r}=Ce(),s=r??t??e??null,a=ke(),[n,i]=u.useState(null),[l,o]=u.useState(null),[c,d]=u.useState(null),[m,p]=u.useState(null),[h,x]=u.useState(!0),[f,g]=u.useState(!1),[b,v]=u.useState(""),[y,j]=u.useState(!1),[w,N]=u.useState(!1),[_,k]=u.useState(!1),[S,C]=u.useState(!1),O=n?.title?.toLowerCase().includes("[demo]")||n?.title?.toLowerCase().includes("demo")||n?.description?.toLowerCase().includes("demo");u.useEffect(()=>{s?(E(),A(),P(),T()):x(!1)},[s]),u.useEffect(()=>{if(n&&c){const e=n.creator_id===c.id;console.log("Checking creator status:",{dropCreatorId:n.creator_id,userId:c.id,isCreator:e}),j(e)}},[n,c]);const E=async()=>{if(!s)return console.warn("No drop ID provided for TaskDetail route"),x(!1),void a("/not-found",{state:{title:"Invalid Drop ID",message:"No drop ID was provided in the URL. Please check the link and try again."}});if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s)&&isNaN(parseInt(s,10)))return console.warn("Invalid drop ID format:",s),void a("/not-found",{state:{title:"Invalid Drop ID",message:"The drop ID in the URL is not in a valid format. Please check the link and try again."}});try{console.log("Fetching drop detail for ID:",s);const e=await Ms(`/drops/${s}`);if(!e||!e.id)throw console.warn("Malformed drop data received:",e),new Error("Invalid drop data format");console.log("Drop data received:",e),i(e)}catch(e){console.error("Failed to fetch drop:",e),a("/error",{state:{title:"Error Loading Drop",message:"Unable to load the drop. Please try again later."}})}finally{x(!1)}},P=async()=>{try{const e=await Ms("/users/me");console.log("Database user data received:",e),console.log("Database user id:",e?.id),d(e)}catch(e){console.error("Failed to fetch user data:",e)}},T=async()=>{try{const e=await Ms("/users/master-key-status");p(e.has_master_key)}catch(e){console.error("Failed to fetch master key status:",e),p({is_activated:!0,proof_drops_completed:3,proof_drops_required:3,last_activated_at:new Date(Date.now()-72e5).toISOString()})}},A=async()=>{try{const e=await Ms("/users/drop-applications"),t=String(n?.id??s??""),r=e.find(e=>String(e.drop_id)===t);o(r||null)}catch(e){console.error("Failed to check application:",e);const t=String(n?.id??s??""),r=(()=>{const e=c?.id??"demo-user";return[{id:1,drop_id:String(n?.id??s??"demo-drop"),user_id:e,status:"approved",application_message:"Looking forward to contributing to this drop! I have prior experience delivering high-quality content on tight deadlines.",submission_url:"https://drive.google.com/demo-submission",gems_earned:120,applied_at:new Date(Date.now()-432e6).toISOString(),completed_at:new Date(Date.now()-1728e5).toISOString(),paid_at:new Date(Date.now()-864e5).toISOString(),submission_notes:"Approved with premium placement.",review_score:4.8,created_at:new Date(Date.now()-432e6).toISOString(),updated_at:new Date(Date.now()-864e5).toISOString()}]})().find(e=>String(e.drop_id)===t);o(r||null)}};return h?Ns.jsx("div",{className:"flex items-center justify-center h-64",children:Ns.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):n?Ns.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[O&&Ns.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-xl p-6 shadow-lg",children:[Ns.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-2",children:[Ns.jsx("span",{className:"text-2xl",children:""}),Ns.jsx("h2",{className:"text-xl font-bold",children:"DEMO CONTENT"}),Ns.jsx("span",{className:"text-2xl",children:""})]}),Ns.jsx("p",{className:"text-center text-orange-100",children:"This is demo content for testing purposes. No real gems will be awarded even if the interface suggests otherwise."})]}),!O&&Ns.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl p-4 shadow-lg",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(Xt,{className:"w-6 h-6"}),Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"font-semibold",children:"Bonus Reward Available!"}),Ns.jsx("p",{className:"text-sm text-purple-100",children:"Complete this drop to earn exclusive rewards"})]})]}),Ns.jsx("button",{onClick:()=>a("/rewards"),className:"bg-pr-surface-card/20 hover:bg-pr-surface-card/30 backdrop-blur-sm px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"View Rewards"})]})}),Ns.jsxs("div",{className:"flex items-center space-x-4",children:[Ns.jsx("button",{onClick:()=>a("/earn"),className:"flex items-center justify-center w-10 h-10 rounded-full bg-pr-surface-2 hover:bg-pr-surface-3 transition-colors",children:Ns.jsx(ut,{className:"w-5 h-5 text-pr-text-2"})}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsxs("h1",{className:"text-2xl font-bold text-pr-text-1",children:["Drop Details ",O&&Ns.jsx("span",{className:"text-orange-600",children:"(Demo)"})]}),Ns.jsx("p",{className:"text-pr-text-2",children:O?"Demo earning opportunity - no real rewards":"Earning opportunity"})]}),y&&Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsxs("button",{onClick:()=>{N(!0)},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[Ns.jsx(Jr,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Edit"})]}),Ns.jsxs("button",{onClick:()=>k(!0),className:"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:[Ns.jsx(ss,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Delete"})]})]})]}),Ns.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[Ns.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[Ns.jsx("div",{className:"bg-pr-surface-card rounded-xl overflow-hidden border border-pr-surface-3",children:Ns.jsxs("div",{className:"relative",children:[Ns.jsx("img",{src:(e=>{if(n?.content_url)return n.content_url;switch(e){case"content_clipping":case"engagement":return"https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=800&h=400&fit=crop";case"reviews":return"https://images.unsplash.com/photo-1556155092-490a1ba16284?w=800&h=400&fit=crop";case"ugc_creation":return"https://images.unsplash.com/photo-1558403194-611308249627?w=800&h=400&fit=crop";case"affiliate_referral":return"https://images.unsplash.com/photo-1516251193007-45ef944ab0c6?w=800&h=400&fit=crop";case"surveys":return"https://images.unsplash.com/photo-1432888622747-4eb9a8efeb07?w=800&h=400&fit=crop";default:return"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=800&h=400&fit=crop"}})(n.drop_type),alt:n.title,className:"w-full h-64 object-cover"}),Ns.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30"}),Ns.jsx("div",{className:"absolute top-4 right-4",children:Ns.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${(e=>{switch(e){case"easy":return"text-green-400 bg-pr-surface-2 border border-green-500/60";case"medium":return"text-yellow-400 bg-pr-surface-2 border border-yellow-500/60";case"hard":return"text-red-400 bg-pr-surface-2 border border-red-500/60";default:return"text-pr-text-2 bg-pr-surface-2 border border-pr-surface-3"}})(n.difficulty)}`,children:n.difficulty})}),Ns.jsx("div",{className:"absolute top-4 left-4",children:n.is_proof_drop?Ns.jsx("div",{className:"bg-green-500/90 backdrop-blur-sm px-2 py-1 rounded-full",children:Ns.jsx("span",{className:"text-white text-sm font-medium",children:"Proof Drop"})}):n.is_paid_drop?Ns.jsx("div",{className:"bg-purple-500/90 backdrop-blur-sm px-2 py-1 rounded-full",children:Ns.jsx("span",{className:"text-white text-sm font-medium",children:"Paid Drop"})}):Ns.jsx("div",{className:"bg-orange-500/90 backdrop-blur-sm px-2 py-1 rounded-full",children:Ns.jsx("span",{className:"text-white text-sm font-medium",children:"Move Drop"})})}),Ns.jsxs("div",{className:"absolute bottom-4 left-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[Ns.jsx("span",{className:"text-3xl",children:(e=>{switch(e){case"content_clipping":return"";case"reviews":return"";case"ugc_creation":return"";case"affiliate_referral":return"";case"surveys":return"";case"challenges_events":return"";default:return""}})(n.drop_type)}),Ns.jsx("span",{className:"text-white bg-black bg-opacity-30 px-3 py-1 rounded-full text-sm font-medium",children:((e,t="General")=>(e&&e.trim().length>0?e:t).replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()))(n.drop_type)})]}),Ns.jsx("h1",{className:"text-3xl font-bold text-white drop-shadow-lg mb-1",children:n.title}),Ns.jsxs("div",{className:"flex items-center space-x-4",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Ut,{className:"w-6 h-6 text-purple-300 drop-shadow"}),Ns.jsx("p",{className:"text-2xl font-bold text-white drop-shadow-lg",children:n.gem_reward_base})]}),Ns.jsx("p",{className:"text-white/80 drop-shadow",children:"Gems reward"})]})]})]})}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl border border-pr-surface-3 p-6",children:[Ns.jsx("h2",{className:"text-xl font-semibold text-pr-text-1 mb-4",children:"Description"}),Ns.jsx("p",{className:"text-pr-text-1 leading-relaxed",children:n.description})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.requirements&&Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl border border-pr-surface-3 p-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Ns.jsx(At,{className:"w-5 h-5 text-green-600"}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Requirements"})]}),Ns.jsx("p",{className:"text-pr-text-1 leading-relaxed",children:n.requirements})]}),n.deliverables&&Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl border border-pr-surface-3 p-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Ns.jsx(ts,{className:"w-5 h-5 text-blue-600"}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Deliverables"})]}),Ns.jsx("p",{className:"text-pr-text-1 leading-relaxed",children:n.deliverables})]})]}),c&&m&&Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl border border-pr-surface-3 p-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Ns.jsx(Vr,{className:"w-5 h-5 text-purple-600"}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Master Key Status"})]}),Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-4 mb-4 border border-pr-surface-3",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ns.jsx("span",{className:"text-sm text-pr-text-2",children:"Today's Master Key"}),Ns.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium border "+(m.is_activated?"text-green-400 border-green-500/60 bg-pr-surface-1":"text-orange-400 border-orange-500/60 bg-pr-surface-1"),children:m.is_activated?"Activated":"Not Activated"})]}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("span",{className:"text-sm text-pr-text-2",children:"Proof Drops Completed"}),Ns.jsxs("span",{className:"text-sm font-medium text-pr-text-1",children:[m.proof_drops_completed,"/",m.proof_drops_required]})]})]}),!m.is_activated&&Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:["Complete ",m.proof_drops_required-m.proof_drops_completed," more proof drops to activate your Master Key and unlock the ability to use Keys for drops."]})]}),c&&Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl border border-pr-surface-3 p-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Ns.jsx(fs,{className:"w-5 h-5 text-blue-600"}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Your Balance"})]}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ns.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[Ns.jsx(lr,{className:"w-4 h-4 text-orange-600"}),Ns.jsx("span",{className:"text-sm font-medium text-pr-text-1",children:"Keys"})]}),Ns.jsx("p",{className:"text-xl font-bold text-pr-text-1",children:c.keys_balance})]}),Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-3",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[Ns.jsx(Ut,{className:"w-4 h-4 text-purple-600"}),Ns.jsx("span",{className:"text-sm font-medium text-pr-text-1",children:"Gems"})]}),Ns.jsx("p",{className:"text-xl font-bold text-pr-text-1",children:c.gems_balance})]})]}),c.keys_balance<n.key_cost&&Ns.jsx("div",{className:"mt-3 p-3 bg-pr-surface-2 border border-red-500/60 rounded-lg",children:Ns.jsxs("p",{className:"text-sm text-red-400",children:["You need ",n.key_cost-c.keys_balance," more keys to apply for this drop."]})})]}),l?Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl border border-pr-surface-3 p-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Ns.jsx(Yt,{className:"w-5 h-5 text-blue-600"}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Your Application"})]}),Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-4 mb-4",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ns.jsx("span",{className:"text-sm text-pr-text-2",children:"Status"}),Ns.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(e=>{switch(e){case"pending":return"text-yellow-400 bg-pr-surface-2 border border-yellow-500/60";case"approved":return"text-blue-400 bg-pr-surface-2 border border-blue-500/60";case"rejected":return"text-red-400 bg-pr-surface-2 border border-red-500/60";case"completed":return"text-green-400 bg-pr-surface-2 border border-green-500/60";case"paid":return"text-purple-400 bg-pr-surface-2 border border-purple-500/60";default:return"text-pr-text-2 bg-pr-surface-2 border border-pr-surface-3"}})(l.status)}`,children:l.status})]}),Ns.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ns.jsx("span",{className:"text-sm text-pr-text-2",children:"Applied"}),Ns.jsx("span",{className:"text-sm text-pr-text-1",children:new Date(l.applied_at).toLocaleDateString()})]}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("span",{className:"text-sm text-pr-text-2",children:"Keys Used"}),Ns.jsx("span",{className:"text-sm text-pr-text-1",children:n.key_cost})]})]}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"font-medium text-pr-text-1 mb-2",children:"Your Message"}),Ns.jsx("p",{className:"text-pr-text-1 text-sm leading-relaxed",children:l.application_message})]}),l.gems_earned>0&&Ns.jsx("div",{className:"mt-4 p-3 bg-pr-surface-2 border border-green-500/60 rounded-lg",children:Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Ut,{className:"w-4 h-4 text-green-400"}),Ns.jsxs("span",{className:"text-sm font-medium text-green-300",children:["Earned ",l.gems_earned," gems!"]})]})})]}):Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl border border-pr-surface-3 p-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Ns.jsx(ds,{className:"w-5 h-5 text-orange-600"}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Apply for this Drop"})]}),c&&(c.keys_balance<n.key_cost||!m?.is_activated)&&Ns.jsxs("div",{className:"mb-4 p-4 bg-pr-surface-2 border border-yellow-500/60 rounded-lg",children:[Ns.jsx("h4",{className:"font-medium text-pr-text-1 mb-2",children:"Requirements not met:"}),Ns.jsxs("ul",{className:"text-sm text-pr-text-2 space-y-1",children:[c.keys_balance<n.key_cost&&Ns.jsxs("li",{children:[" Need ",n.key_cost-c.keys_balance," more keys"]}),!m?.is_activated&&Ns.jsx("li",{children:" Master Key must be activated for today"})]})]}),Ns.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),n&&b.trim()){g(!0);try{await Ds(`/drops/${n?.id??s}/apply`,{application_message:b}),await Promise.all([A(),P(),T()]),v("")}catch(t){console.error("Failed to apply:",t),alert("Failed to apply to drop")}finally{g(!1)}}},className:"space-y-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Why are you the right person for this drop?"}),Ns.jsx("textarea",{value:b,onChange:e=>v(e.target.value),rows:4,className:"w-full px-4 py-3 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Tell us about your relevant experience and why you'd be perfect for this drop...",required:!0})]}),Ns.jsx("button",{type:"submit",disabled:f||!b.trim()||!c||c.keys_balance<n.key_cost||!m?.is_activated,className:"w-full px-6 py-3 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-white "+(O?"bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600":"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600"),children:f?"Submitting...":`${O?"Demo Apply":"Apply Now"} (${n.key_cost} keys)`})]})]})]}),Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl border border-pr-surface-3 p-6",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Drop Information"}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(lr,{className:"w-4 h-4 text-orange-600"}),Ns.jsx("span",{className:"text-pr-text-2",children:"Key Cost"})]}),Ns.jsx("span",{className:"font-bold text-orange-600",children:n.key_cost})]}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Ut,{className:"w-4 h-4 text-purple-600"}),Ns.jsx("span",{className:"text-pr-text-2",children:"Gem Reward"})]}),Ns.jsx("span",{className:"font-bold text-purple-600",children:n.gem_reward_base})]}),n.gem_pool_total>0&&Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(fs,{className:"w-4 h-4 text-blue-600"}),Ns.jsx("span",{className:"text-pr-text-2",children:"Pool Remaining"})]}),Ns.jsx("span",{className:"font-semibold text-pr-text-1",children:n.gem_pool_remaining})]}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(us,{className:"w-4 h-4 text-blue-600"}),Ns.jsx("span",{className:"text-pr-text-2",children:"Participants"})]}),Ns.jsxs("span",{className:"font-semibold text-pr-text-1",children:[n.current_participants,"/",n.max_participants||""]})]}),n.follower_threshold>0&&Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Zr,{className:"w-4 h-4 text-yellow-600"}),Ns.jsx("span",{className:"text-pr-text-2",children:"Min. Followers"})]}),Ns.jsxs("span",{className:"font-semibold text-pr-text-1",children:[n.follower_threshold,"+"]})]}),n.time_commitment&&Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Rt,{className:"w-4 h-4 text-purple-600"}),Ns.jsx("span",{className:"text-pr-text-2",children:"Time"})]}),Ns.jsx("span",{className:"font-semibold text-pr-text-1",children:n.time_commitment})]}),n.deadline_at&&Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(yt,{className:"w-4 h-4 text-red-600"}),Ns.jsx("span",{className:"text-pr-text-2",children:"Deadline"})]}),Ns.jsx("span",{className:"font-semibold text-pr-text-1",children:new Date(n.deadline_at).toLocaleDateString()})]})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Posted By"}),Ns.jsx(Fs,{username:n.creator_name,displayName:n.creator_name||"Drop Creator",avatarUrl:n.creator_avatar,className:"flex items-center space-x-3",size:"lg"}),Ns.jsx("div",{className:"mt-2",children:Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Verified creator"})}),Ns.jsx("div",{className:"mt-4 pt-4 border-t border-pr-surface-3",children:Ns.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-lg font-bold text-pr-text-1",children:"12"}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Drops Posted"})]}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-lg font-bold text-pr-text-1",children:"4.8"}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Avg Rating"})]})]})})]}),Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-xl p-6 border border-pr-surface-3",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[Ns.jsx(Pt,{className:"w-5 h-5 text-blue-400"}),Ns.jsx("h3",{className:"font-semibold text-pr-text-1",children:"Pro Tips"})]}),Ns.jsxs("ul",{className:"text-sm text-pr-text-2 space-y-2",children:[Ns.jsx("li",{children:" Ensure you have enough keys before applying"}),Ns.jsx("li",{children:" Activate your Master Key daily"}),Ns.jsx("li",{children:" Read all requirements carefully"}),Ns.jsx("li",{children:" Submit high-quality work on time"}),Ns.jsx("li",{children:" Communicate with the drop creator"})]})]})]})]}),n&&w&&Ns.jsx(hW,{isOpen:w,onClose:()=>N(!1),onSuccess:e=>{i(e),N(!1)},drop:n}),Ns.jsx(qu,{isOpen:_,onClose:()=>k(!1),onConfirm:async()=>{C(!0);try{await Is(`/drops/${n.id}`),a("/earn")}catch(e){console.error("Failed to delete drop:",e),alert("Failed to delete drop")}finally{C(!1),k(!1)}},title:"Delete Drop",message:"Are you sure you want to delete this drop? This action cannot be undone and will remove all applications.",confirmText:"Delete",cancelText:"Cancel",type:"danger",loading:S})]}):Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1 mb-4",children:"Drop not found"}),Ns.jsx("button",{onClick:()=>a("/earn"),className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Browse Drops"})]})}function fW({isOpen:e,onClose:t,onSave:r,currentBrandData:s={},loading:a=!1}){const[n,i]=u.useState({brand_name:s.brand_name||"",brand_description:s.brand_description||"",brand_website:s.brand_website||"",brand_email:s.brand_email||"",brand_phone:s.brand_phone||""}),[l,o]=u.useState(null),[c,d]=u.useState(s.brand_logo_url||""),[m,p]=u.useState(!1),h=u.useRef(null),x=(e,t)=>{i(r=>({...r,[e]:t}))};return e?Ns.jsx(Us,{isOpen:e,onClose:t,maxWidth:"2xl",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex max-h-[85vh] flex-col overflow-hidden rounded-2xl bg-pr-surface-card shadow-2xl",children:[Ns.jsxs("div",{className:"flex items-center justify-between border-b border-pr-surface-3 px-6 py-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-r from-blue-500 to-purple-500",children:Ns.jsx(gt,{className:"h-5 w-5 text-white"})}),Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-xl font-semibold text-pr-text-1",children:"Brand Profile"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Set up your brand representation"})]})]}),Ns.jsx("button",{onClick:t,className:"rounded-lg p-2 text-gray-400 transition-colors hover:text-pr-text-2","aria-label":"Close brand profile modal",children:Ns.jsx(hs,{className:"h-5 w-5"})})]}),Ns.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6 space-y-6",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-3",children:"Brand Logo"}),Ns.jsxs("div",{className:"flex items-center space-x-4",children:[Ns.jsx("div",{className:"w-20 h-20 bg-pr-surface-2 rounded-xl flex items-center justify-center overflow-hidden border-2 border-dashed border-pr-surface-3",children:c?Ns.jsx("img",{src:c,alt:"Brand logo",className:"w-full h-full object-cover"}):Ns.jsx(jt,{className:"w-8 h-8 text-gray-400"})}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsxs("button",{type:"button",onClick:()=>h.current?.click(),disabled:m,className:"bg-pr-surface-2 hover:bg-pr-surface-3 disabled:opacity-50 text-pr-text-1 px-4 py-2 rounded-lg font-medium transition-colors flex items-center space-x-2",children:[Ns.jsx(cs,{className:"w-4 h-4"}),Ns.jsx("span",{children:m?"Uploading...":"Upload Logo"})]}),Ns.jsx("p",{className:"text-xs text-pr-text-2 mt-1",children:"PNG, JPG up to 5MB. Square format recommended."})]})]}),Ns.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:e=>{const t=e.target.files?.[0];if(t){if(!t.type.startsWith("image/"))return void alert("Please select an image file");if(t.size>5242880)return void alert("Please select an image smaller than 5MB");o(t);const e=new FileReader;e.onload=e=>{d(e.target?.result)},e.readAsDataURL(t)}},className:"hidden"})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{htmlFor:"brand_name",className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Brand Name *"}),Ns.jsxs("div",{className:"relative",children:[Ns.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),Ns.jsx("input",{id:"brand_name",type:"text",value:n.brand_name,onChange:e=>x("brand_name",e.target.value),placeholder:"Enter your brand name",className:"w-full pl-10 pr-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{htmlFor:"brand_description",className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Brand Description"}),Ns.jsxs("div",{className:"relative",children:[Ns.jsx(Yt,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),Ns.jsx("textarea",{id:"brand_description",value:n.brand_description,onChange:e=>x("brand_description",e.target.value),placeholder:"Describe your brand, mission, and values",rows:3,className:"w-full pl-10 pr-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{htmlFor:"brand_website",className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Website"}),Ns.jsxs("div",{className:"relative",children:[Ns.jsx(er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),Ns.jsx("input",{id:"brand_website",type:"url",value:n.brand_website,onChange:e=>x("brand_website",e.target.value),placeholder:"https://yourbrand.com",className:"w-full pl-10 pr-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{htmlFor:"brand_email",className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Brand Email"}),Ns.jsxs("div",{className:"relative",children:[Ns.jsx(gr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),Ns.jsx("input",{id:"brand_email",type:"email",value:n.brand_email,onChange:e=>x("brand_email",e.target.value),placeholder:"contact@yourbrand.com",className:"w-full pl-10 pr-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{htmlFor:"brand_phone",className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Phone Number"}),Ns.jsxs("div",{className:"relative",children:[Ns.jsx(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),Ns.jsx("input",{id:"brand_phone",type:"tel",value:n.brand_phone,onChange:e=>x("brand_phone",e.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-3 border border-pr-surface-3 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),n.brand_name&&Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-xl p-4",children:[Ns.jsx("h4",{className:"text-sm font-medium text-pr-text-1 mb-3",children:"Preview"}),Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("div",{className:"w-12 h-12 bg-pr-surface-card rounded-lg flex items-center justify-center overflow-hidden border border-pr-surface-3",children:c?Ns.jsx("img",{src:c,alt:"Brand logo",className:"w-full h-full object-cover"}):Ns.jsx(gt,{className:"w-6 h-6 text-gray-400"})}),Ns.jsxs("div",{children:[Ns.jsx("div",{className:"font-medium text-pr-text-1",children:n.brand_name}),n.brand_description&&Ns.jsx("div",{className:"text-sm text-pr-text-2 line-clamp-1",children:n.brand_description})]})]})]})]}),Ns.jsxs("div",{className:"flex items-center justify-end space-x-4 border-t border-pr-surface-3 px-6 py-6",children:[Ns.jsx("button",{onClick:t,className:"px-6 py-2 text-pr-text-1 hover:text-pr-text-1 font-medium transition-colors",children:"Cancel"}),Ns.jsx("button",{onClick:async()=>{if(!n.brand_name.trim())return void alert("Brand name is required");let e=c;if(l&&(e=await(async()=>{if(!l)return c||"";p(!0);try{const e=new FormData;e.append("image",l);const t=await fetch("/api/upload/image",{method:"POST",credentials:"include",body:e});return t.ok?(await t.json()).url||"":(console.error("Failed to upload logo"),"")}catch(e){return console.error("Error uploading logo:",e),""}finally{p(!1)}})(),!e.trim()))return void alert("Failed to upload logo. Please try again.");const t={...n,brand_logo_url:e||""};r(t)},disabled:a||m||!n.brand_name.trim(),className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-2 rounded-xl font-medium transition-all duration-200 flex items-center space-x-2",children:a?Ns.jsxs(Ns.Fragment,{children:[Ns.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),Ns.jsx("span",{children:"Saving..."})]}):Ns.jsxs(Ns.Fragment,{children:[Ns.jsx(St,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Save Brand Profile"})]})})]})]})}):null}let gW=null,bW=0,vW=null,yW=0;const jW=e=>"object"==typeof e&&null!==e,wW=()=>{gW=null,bW=0},NW=()=>{vW=null,yW=0},_W=async e=>{try{return await e.json()}catch(t){return console.warn("[Advertiser API] failed to parse JSON response",t),null}},kW={async getPlans(e=!1){if(!e&&gW&&Date.now()<bW)return gW;try{const e=await la("/api/advertisers/subscription/plans"),t=await _W(e);if(!e.ok){const r=t?.message||`Failed to load plans (${e.status})`;throw new Error(r)}if(!t||"success"!==t.status)throw new Error(t?.message||"Failed to load plans");const r=(e=>jW(e)?{plans:Array.isArray(e.plans)?e.plans:[],currentTier:"string"==typeof e.current_tier?e.current_tier:"string"==typeof e.currentTier?e.currentTier:"free"}:{plans:[],currentTier:"free"})(t.data);return gW=r,bW=Date.now()+6e4,r}catch(t){return console.error("[Advertiser API] getPlans",t),wW(),{plans:[],currentTier:"free"}}},async upgrade(e){try{const t=await la("/api/advertisers/subscription/upgrade",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:e})}),r=await _W(t);if(!t.ok){const e=r?.message||`HTTP ${t.status}`;throw new Error(e)}if(!r||"success"!==r.status)throw new Error(r?.message||"Failed to upgrade plan");return wW(),{...r.data,message:r.message}}catch(t){throw console.error("[Advertiser API] upgrade",t),t}},async listCoupons(e=!1){if(!e&&vW&&Date.now()<yW)return vW;try{const e=await la("/api/advertisers/coupons"),t=await _W(e);if(!e.ok){const r=t?.message||`Failed to load coupons (${e.status})`;throw new Error(r)}if(!t||"success"!==t.status)throw new Error(t?.message||"Failed to load coupons");const r=(e=>jW(e)?{coupons:Array.isArray(e.coupons)?e.coupons.map(e=>({...e,assignments:Array.isArray(e.assignments)?e.assignments:[]})):[],redemptions:Array.isArray(e.redemptions)?e.redemptions:[]}:{coupons:[],redemptions:[]})(t.data);return vW=r,yW=Date.now()+3e4,r}catch(t){return console.error("[Advertiser API] listCoupons",t),NW(),{coupons:[],redemptions:[]}}},async createCoupon(e){try{const t=await la("/api/advertisers/coupons",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await _W(t);if(!t.ok){throw new Error(r?.message||"Failed to create coupon")}if(!r||"success"!==r.status)throw new Error(r?.message||"Failed to create coupon");return NW(),r.data.coupon}catch(t){throw console.error("[Advertiser API] createCoupon",t),t}},async assignCoupon(e,t){try{const r=await la(`/api/advertisers/coupons/${e}/assign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await _W(r);if(!r.ok){throw new Error(s?.message||"Failed to assign coupon")}if(!s||"success"!==s.status)throw new Error(s?.message||"Failed to assign coupon");return NW(),s.data.assignment}catch(r){throw console.error("[Advertiser API] assignCoupon",r),r}},async redeemCoupon(e,t){try{const r=await la(`/api/advertisers/coupons/${e}/redeem`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await _W(r);if(!r.ok){throw new Error(s?.message||"Failed to redeem coupon")}if(!s||"success"!==s.status)throw new Error(s?.message||"Failed to redeem coupon");return NW(),s.data}catch(r){throw console.error("[Advertiser API] redeemCoupon",r),r}},async listCampaigns(){try{const e=await la("/api/advertisers/campaigns"),t=await _W(e);if(!e.ok){const r=t?.message||`Failed to load campaigns (${e.status})`;throw new Error(r)}if(!t||"success"!==t.status)throw new Error(t?.message||"Failed to load campaigns");return Array.isArray(t.data.campaigns)?t.data.campaigns:[]}catch(e){return console.error("[Advertiser API] listCampaigns",e),[]}},async getCampaign(e){try{const t=await la(`/api/advertisers/campaigns/${e}`),r=await _W(t);if(!t.ok){const e=r?.message||`Failed to load campaign (${t.status})`;throw new Error(e)}if(!r||"success"!==r.status)throw new Error(r?.message||"Failed to load campaign");return r.data}catch(t){return console.error("[Advertiser API] getCampaign",t),null}},async getCoupon(e){try{const t=await la(`/api/advertisers/coupons/${e}`),r=await _W(t);if(!t.ok){const e=r?.message||`Failed to load coupon (${t.status})`;throw new Error(e)}if(!r||"success"!==r.status)throw new Error(r?.message||"Failed to load coupon");return r.data}catch(t){return console.error("[Advertiser API] getCoupon",t),null}},async updateCampaign(e,t){try{const r=await la(`/api/advertisers/campaigns/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await _W(r);if(!r.ok){const e=s?.message||`Failed to update campaign (${r.status})`;throw new Error(e)}if(!s||"success"!==s.status)throw new Error(s?.message||"Failed to update campaign");return s.data.campaign}catch(r){throw console.error("[Advertiser API] updateCampaign",r),r}},async deleteCampaign(e){try{const t=await la(`/api/advertisers/campaigns/${e}`,{method:"DELETE"}),r=await _W(t);if(!t.ok){const e=r?.message||`Failed to delete campaign (${t.status})`;throw new Error(e)}return!0}catch(t){throw console.error("[Advertiser API] deleteCampaign",t),t}},async addCampaignFunds(e,t,r="mock"){try{const s=await la(`/api/advertisers/campaigns/${e}/funds`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:t,provider:r})}),a=await _W(s);if(!s.ok){const e=a?.message||`Failed to add funds (${s.status})`;throw new Error(e)}if(!a||"success"!==a.status)throw new Error(a?.message||"Failed to add funds");return a.data}catch(s){throw console.error("[Advertiser API] addCampaignFunds",s),s}},async addCampaignContent(e,t){try{const r=await la(`/api/advertisers/campaigns/${e}/content`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await _W(r);if(!r.ok){const e=s?.message||`Failed to add content (${r.status})`;throw new Error(e)}if(!s||"success"!==s.status)throw new Error(s?.message||"Failed to add content");return s.data.content}catch(r){throw console.error("[Advertiser API] addCampaignContent",r),r}},async getCampaignDrops(e){try{const t=await la(`/api/advertisers/campaigns/${e}/drops`),r=await _W(t);if(!t.ok){const e=r?.message||`Failed to load drops (${t.status})`;throw new Error(e)}if(!r||"success"!==r.status)throw new Error(r?.message||"Failed to load drops");return r.data.drops}catch(t){return console.error("[Advertiser API] getCampaignDrops",t),[]}}};function SW({showHeader:e=!0,basePath:t="/campaigns"}){const[r,s]=u.useState([]),[a,n]=u.useState(!0),[i,l]=u.useState("");u.useEffect(()=>{(async()=>{try{n(!0);const e=(await kW.listCampaigns()).map(e=>({id:e.id,name:e.name,status:e.status,startDate:e.start_date,endDate:e.end_date||"",budget:e.total_budget,spent:e.budget_spent,impressions:e.performance?.impressions||0,clicks:e.performance?.clicks||0,ctr:e.performance?.impressions&&e.performance.impressions>0?(e.performance?.clicks||0)/e.performance.impressions*100:0,cpc:0,drops:0,participants:0}));s(e)}catch(e){console.error("Failed to fetch campaigns:",e),l("Failed to load campaigns. Please try again later.")}finally{n(!1)}})()},[]);const o=e=>{const t="px-2 py-1 rounded-full text-xs font-medium";switch(e){case"active":return`${t} bg-green-100 text-green-700`;case"paused":return`${t} bg-yellow-100 text-yellow-700`;case"completed":return`${t} bg-pr-surface-2 text-pr-text-1`;default:return`${t} bg-blue-100 text-blue-700`}},c=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),d=e=>new Intl.NumberFormat("en-US").format(e);if(a)return Ns.jsx("div",{className:"flex items-center justify-center h-64",children:Ns.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})});if(i)return Ns.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:Ns.jsxs("div",{className:"flex",children:[Ns.jsx("div",{className:"flex-shrink-0",children:Ns.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Ns.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),Ns.jsx("div",{className:"ml-3",children:Ns.jsx("p",{className:"text-sm text-red-700",children:i})})]})});const m=`${t}/new`;return Ns.jsxs("div",{className:"space-y-6",children:[e&&Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1",children:"Campaigns"}),Ns.jsx("p",{className:"mt-1 text-sm text-pr-text-2",children:"Create and manage your marketing campaigns"})]}),Ns.jsx(Oc,{asChild:!0,children:Ns.jsxs(Ze,{to:m,className:"flex items-center space-x-2",children:[Ns.jsx(Rr,{className:"h-4 w-4"}),Ns.jsx("span",{children:"New Campaign"})]})})]}),Ns.jsx("div",{className:"bg-pr-surface-card shadow overflow-hidden sm:rounded-lg",children:0===r.length?Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx(_t,{className:"mx-auto h-12 w-12 text-gray-400"}),Ns.jsx("h3",{className:"mt-2 text-lg font-medium text-pr-text-1",children:"No campaigns"}),Ns.jsx("p",{className:"mt-1 text-sm text-pr-text-2",children:"Get started by creating a new campaign."}),Ns.jsx("div",{className:"mt-6",children:Ns.jsx(Oc,{asChild:!0,children:Ns.jsxs(Ze,{to:m,className:"inline-flex items-center",children:[Ns.jsx(Rr,{className:"-ml-1 mr-2 h-5 w-5"}),"New Campaign"]})})})]}):Ns.jsx("ul",{className:"divide-y divide-gray-200",children:r.map(e=>Ns.jsx("li",{className:"hover:bg-pr-surface-2",children:Ns.jsx(Ze,{to:`${t}/${e.id}`,className:"block",children:Ns.jsxs("div",{className:"px-4 py-4 sm:px-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center",children:[Ns.jsx("p",{className:"text-lg font-medium text-indigo-600 truncate",children:e.name}),Ns.jsx("div",{className:"ml-2",children:Ns.jsx("span",{className:o(e.status),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})})]}),Ns.jsx("div",{className:"ml-2 flex-shrink-0 flex",children:Ns.jsxs("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:[c(e.spent)," of ",c(e.budget)]})})]}),Ns.jsxs("div",{className:"mt-2 sm:flex sm:justify-between",children:[Ns.jsx("div",{className:"sm:flex",children:Ns.jsxs("p",{className:"flex items-center text-sm text-pr-text-2",children:[Ns.jsx(yt,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),new Date(e.startDate).toLocaleDateString(),e.endDate&&Ns.jsxs(Ns.Fragment,{children:[Ns.jsx("span",{className:"mx-1",children:"-"}),new Date(e.endDate).toLocaleDateString()]})]})}),Ns.jsxs("div",{className:"mt-2 flex items-center text-sm text-pr-text-2 sm:mt-0",children:[Ns.jsx(us,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),Ns.jsxs("p",{children:[d(e.participants)," participants"]}),Ns.jsx("span",{className:"mx-1",children:""}),Ns.jsx(Bt,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),Ns.jsxs("p",{children:["CPC: ",c(e.cpc)]})]})]}),"draft"!==e.status&&Ns.jsxs("div",{className:"mt-2",children:[Ns.jsxs("div",{className:"flex justify-between text-sm text-pr-text-2",children:[Ns.jsxs("div",{className:"flex items-center",children:[Ns.jsx(ts,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),Ns.jsxs("span",{children:[d(e.impressions)," impressions"]})]}),Ns.jsxs("span",{className:"text-sm font-medium",children:[e.ctr.toFixed(1),"% CTR"]})]}),Ns.jsx("div",{className:"mt-1 w-full bg-pr-surface-3 rounded-full h-2",children:Ns.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(100,e.spent/e.budget*100)}%`}})})]})]})})},e.id))})})]})}const CW={free:Ns.jsx(fs,{className:"w-5 h-5 text-orange-500"}),premium:Ns.jsx(Yr,{className:"w-5 h-5 text-purple-500"}),super:Ns.jsx(zt,{className:"w-5 h-5 text-yellow-500"})};function OW({isOpen:e,onClose:t,plans:r,currentTier:s,onSelect:a,isSubmitting:n}){const i=u.useMemo(()=>r.slice().sort((e,t)=>e.price-t.price),[r]);return e?Ns.jsx(Us,{isOpen:e,onClose:t,maxWidth:"4xl",showCloseButton:!1,children:Ns.jsxs("div",{className:"flex max-h-[85vh] flex-col overflow-hidden rounded-2xl bg-pr-surface-card shadow-xl",children:[Ns.jsxs("div",{className:"flex items-center justify-between border-b border-pr-border px-6 py-4",children:[Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-xl font-semibold text-pr-text-1",children:"Upgrade Advertiser Plan"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Choose a plan to unlock more drops, advanced analytics, and exclusive incentive tools."})]}),Ns.jsx("button",{onClick:t,className:"rounded-full px-3 py-1 text-sm text-pr-text-2 transition-colors hover:bg-pr-surface-2",children:"Close"})]}),Ns.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:Ns.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:i.map(e=>{const t=e.id===s;return Ns.jsxs("div",{className:"flex flex-col rounded-xl border p-5 shadow-sm transition-all "+(t?"border-blue-500 bg-blue-50/60 shadow-blue-100":"border-pr-surface-3 hover:border-blue-400 hover:shadow-md"),children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[CW[e.id]??Ns.jsx(fs,{className:"w-5 h-5 text-orange-500"}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 capitalize",children:e.name})]}),t&&Ns.jsxs("span",{className:"inline-flex items-center space-x-1 rounded-full bg-blue-100 px-2 py-1 text-xs font-medium text-blue-700",children:[Ns.jsx(St,{className:"h-3 w-3"}),Ns.jsx("span",{children:"Current"})]})]}),Ns.jsxs("div",{className:"mt-4",children:[Ns.jsx("div",{className:"text-3xl font-bold text-pr-text-1",children:0===e.price?"Free":`$${e.price}`}),e.price>0&&Ns.jsxs("span",{className:"text-sm text-pr-text-2",children:["/ ",e.billingInterval]})]}),Ns.jsx("ul",{className:"mt-4 space-y-2 text-sm text-pr-text-2",children:e.features.map(e=>Ns.jsxs("li",{className:"flex items-start space-x-2",children:[Ns.jsx(St,{className:"mt-0.5 h-4 w-4 flex-shrink-0 text-green-500"}),Ns.jsx("span",{children:e})]},e))}),Ns.jsx("button",{onClick:()=>a(e.id),disabled:t||n,className:"mt-6 w-full rounded-lg px-4 py-2 text-sm font-medium transition-colors "+(t?"cursor-default bg-pr-surface-2 text-pr-text-2":"bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:from-blue-600 hover:to-purple-600 disabled:opacity-60"),children:t?"Selected Plan":`Choose ${e.name}`})]},e.id)})})})]})}):null}const EW=()=>{const e=new Date,t=new Date(e.getTime()+2592e6);return{title:"",description:"",reward_type:"coupon",value:10,value_unit:"percentage",quantity_total:10,start_date:e.toISOString().split("T")[0],end_date:t.toISOString().split("T")[0]}};function PW({coupons:e,redemptions:t,drops:r=[],onRefresh:s}){const[a,n]=u.useState(!1),[i,l]=u.useState(EW),[o,c]=u.useState(!1),[d,m]=u.useState(null),[p,h]=u.useState(""),[x,f]=u.useState("top-10"),[g,b]=u.useState(null),v=u.useMemo(()=>e.reduce((e,t)=>e+(t.quantity_total-t.quantity_remaining),0),[e]),y=[{id:"top-5",label:"Top 5 Overall"},{id:"top-10",label:"Top 10 Overall"},{id:"top-25",label:"Top 25 Overall"},{id:"growth-leaders",label:"Growth Leaders (Weekly)"}],j=()=>{l(EW()),h(""),f("top-10")};return Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-xl font-semibold text-pr-text-1",children:"Giveaways & Coupons"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Incentivize creators by attaching rewards to drops or leaderboard milestones."})]}),Ns.jsxs("button",{onClick:()=>{j(),n(!0)},className:"inline-flex items-center space-x-2 rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-2 text-sm font-medium text-white shadow-sm transition-all hover:from-purple-600 hover:to-pink-600",children:[Ns.jsx(Rr,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Create Incentive"})]})]}),Ns.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[Ns.jsx("div",{className:"rounded-xl border border-pr-surface-3 p-4",children:Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(rs,{className:"h-8 w-8 text-purple-500"}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Active Incentives"}),Ns.jsx("p",{className:"text-2xl font-semibold text-pr-text-1",children:e.length})]})]})}),Ns.jsx("div",{className:"rounded-xl border border-pr-surface-3 p-4",children:Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(Xt,{className:"h-8 w-8 text-orange-500"}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Rewards Distributed"}),Ns.jsx("p",{className:"text-2xl font-semibold text-pr-text-1",children:v})]})]})}),Ns.jsx("div",{className:"rounded-xl border border-pr-surface-3 p-4",children:Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(us,{className:"h-8 w-8 text-emerald-500"}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Recent Redemptions"}),Ns.jsx("p",{className:"text-2xl font-semibold text-pr-text-1",children:t.length})]})]})})]}),a&&Ns.jsxs("form",{onSubmit:async e=>{e.preventDefault(),c(!0);try{await kW.createCoupon({...i,quantity_total:Number(i.quantity_total),value:Number(i.value)}),j(),n(!1),s()}catch(t){console.error("Failed to create coupon",t),alert("Failed to create coupon. Please try again.")}finally{c(!1)}},className:"rounded-2xl border border-dashed border-purple-200 bg-purple-50/50 p-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Create New Incentive"}),Ns.jsx("button",{type:"button",onClick:()=>n(!1),className:"rounded-full px-3 py-1 text-sm text-pr-text-2 hover:bg-pr-surface-2",children:"Cancel"})]}),Ns.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsx("label",{className:"text-sm font-medium text-pr-text-1",children:"Title"}),Ns.jsx("input",{required:!0,value:i.title,onChange:e=>l(t=>({...t,title:e.target.value})),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200",placeholder:"e.g. 25% Off Premium Upgrade"})]}),Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsx("label",{className:"text-sm font-medium text-pr-text-1",children:"Reward Type"}),Ns.jsxs("select",{value:i.reward_type,onChange:e=>l(t=>({...t,reward_type:e.target.value})),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200",children:[Ns.jsx("option",{value:"coupon",children:"Coupon (percentage/flat discount)"}),Ns.jsx("option",{value:"giveaway",children:"Giveaway (physical/virtual item)"}),Ns.jsx("option",{value:"credit",children:"Credit (gems/keys)"})]})]})]}),Ns.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-4",children:[Ns.jsxs("div",{className:"space-y-2 md:col-span-2",children:[Ns.jsx("label",{className:"text-sm font-medium text-pr-text-1",children:"Description"}),Ns.jsx("textarea",{rows:3,value:i.description,onChange:e=>l(t=>({...t,description:e.target.value})),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200",placeholder:"Let creators know what this incentive offers and how to qualify."})]}),Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsx("label",{className:"text-sm font-medium text-pr-text-1",children:"Reward Value"}),Ns.jsx("input",{type:"number",min:0,value:i.value,onChange:e=>l(t=>({...t,value:Number(e.target.value)})),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200"})]}),Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsx("label",{className:"text-sm font-medium text-pr-text-1",children:"Unit"}),Ns.jsxs("select",{value:i.value_unit,onChange:e=>l(t=>({...t,value_unit:e.target.value})),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200",children:[Ns.jsx("option",{value:"percentage",children:"%"}),Ns.jsx("option",{value:"usd",children:"USD"}),Ns.jsx("option",{value:"gems",children:"Gems"}),Ns.jsx("option",{value:"keys",children:"Keys"}),Ns.jsx("option",{value:"item",children:"Item"})]})]})]}),Ns.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-4",children:[Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsx("label",{className:"text-sm font-medium text-pr-text-1",children:"Quantity"}),Ns.jsx("input",{type:"number",min:1,required:!0,value:i.quantity_total,onChange:e=>l(t=>({...t,quantity_total:Number(e.target.value)})),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200"})]}),Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsx("label",{className:"text-sm font-medium text-pr-text-1",children:"Start Date"}),Ns.jsx("input",{type:"date",value:i.start_date,onChange:e=>l(t=>({...t,start_date:e.target.value})),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200"})]}),Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsx("label",{className:"text-sm font-medium text-pr-text-1",children:"End Date"}),Ns.jsx("input",{type:"date",value:i.end_date,onChange:e=>l(t=>({...t,end_date:e.target.value})),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200"})]}),Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsx("label",{className:"text-sm font-medium text-pr-text-1",children:"Leaderboard Target"}),Ns.jsx("select",{value:x,onChange:e=>f(e.target.value),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200",children:y.map(e=>Ns.jsx("option",{value:e.id,children:e.label},e.id))})]})]}),Ns.jsxs("button",{type:"submit",disabled:o,className:"mt-6 inline-flex items-center justify-center space-x-2 rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:from-purple-600 hover:to-pink-600 disabled:opacity-60",children:[o?Ns.jsx(pr,{className:"h-4 w-4 animate-spin"}):Ns.jsx(Xt,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Create Incentive"})]})]}),Ns.jsx("div",{className:"grid gap-4 lg:grid-cols-2",children:e.map(e=>Ns.jsxs("div",{className:"rounded-2xl border border-pr-surface-3 bg-pr-surface-card p-5 shadow-sm",children:[Ns.jsxs("div",{className:"flex items-start justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("span",{className:"inline-flex items-center rounded-full bg-purple-100 px-2 py-1 text-xs font-medium text-purple-600",children:"giveaway"===e.reward_type?"Giveaway":"credit"===e.reward_type?"Credit":"Coupon"}),Ns.jsx("h3",{className:"mt-2 text-lg font-semibold text-pr-text-1",children:e.title}),e.description&&Ns.jsx("p",{className:"mt-1 text-sm text-pr-text-2",children:e.description})]}),Ns.jsxs("div",{className:"text-right text-sm text-pr-text-2",children:[Ns.jsxs("p",{children:[e.quantity_remaining," of ",e.quantity_total," remaining"]}),Ns.jsxs("p",{className:"mt-1",children:["Valid until ",new Date(e.end_date||"").toLocaleDateString()]})]})]}),Ns.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[Ns.jsxs("div",{className:"rounded-lg bg-purple-50 p-3 text-sm text-purple-700",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 font-medium",children:[Ns.jsx(_t,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Assignments"})]}),Ns.jsx("ul",{className:"mt-2 space-y-1",children:e.assignments.length>0?e.assignments.map(e=>Ns.jsxs("li",{className:"flex items-center space-x-2 text-xs text-purple-600",children:[Ns.jsx(Mt,{className:"h-3.5 w-3.5"}),Ns.jsxs("span",{children:["drop"===e.target_type?"Drop:":"Leaderboard:"," ",e.target_label]})]},e.id)):Ns.jsx("li",{className:"text-xs text-purple-500",children:"No assignments yet."})})]}),Ns.jsxs("div",{className:"rounded-lg border border-dashed border-pr-surface-3 p-3 text-sm",children:[Ns.jsx("p",{className:"font-medium text-pr-text-1",children:"Quick Assign"}),Ns.jsxs("div",{className:"mt-3 space-y-3",children:[Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsx("label",{className:"text-xs font-medium text-pr-text-2",children:"Attach to Drop"}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsxs("select",{value:p,onChange:e=>h(e.target.value),className:"flex-1 rounded-lg border border-pr-surface-3 px-2 py-1 text-sm focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200",children:[Ns.jsx("option",{value:"",children:"Select drop"}),r.map(e=>Ns.jsx("option",{value:String(e.id),children:e.title},e.id))]}),Ns.jsx("button",{onClick:()=>(async e=>{if(p){m(e);try{const t=r.find(e=>String(e.id)===p);await kW.assignCoupon(e,{target_type:"drop",target_id:p,target_label:t?.title||p}),h(""),s()}catch(t){console.error("Failed to assign coupon",t),alert("Failed to assign coupon to drop.")}finally{m(null)}}else alert("Select a drop first.")})(e.id),disabled:d===e.id,className:"rounded-lg bg-purple-500 px-2 py-1 text-xs font-medium text-white hover:bg-purple-600 disabled:opacity-60",children:d===e.id?"Assigning...":"Attach"})]})]}),Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsx("label",{className:"text-xs font-medium text-pr-text-2",children:"Leaderboard Reward"}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("select",{value:x,onChange:e=>f(e.target.value),className:"flex-1 rounded-lg border border-pr-surface-3 px-2 py-1 text-sm focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200",children:y.map(e=>Ns.jsx("option",{value:e.id,children:e.label},e.id))}),Ns.jsx("button",{onClick:()=>(async e=>{m(e);try{const t=y.find(e=>e.id===x);await kW.assignCoupon(e,{target_type:"leaderboard",target_id:x,target_label:t?.label||x}),s()}catch(t){console.error("Failed to assign coupon to leaderboard",t),alert("Failed to assign coupon to leaderboard.")}finally{m(null)}})(e.id),disabled:d===e.id,className:"rounded-lg bg-blue-500 px-2 py-1 text-xs font-medium text-white hover:bg-blue-600 disabled:opacity-60",children:d===e.id?"Assigning...":"Incentivize"})]})]})]})]})]}),Ns.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[Ns.jsxs("button",{onClick:()=>(async e=>{const t=prompt("Enter recipient name for redemption (for demo)");if(null!==t){b(e);try{await kW.redeemCoupon(e,{user_name:t}),s()}catch(r){console.error("Failed to redeem coupon",r),alert("Failed to redeem coupon.")}finally{b(null)}}})(e.id),disabled:g===e.id,className:"inline-flex items-center space-x-1 rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs font-medium text-emerald-700 hover:bg-emerald-100 disabled:opacity-60",children:[Ns.jsx(Mt,{className:"h-3.5 w-3.5"}),Ns.jsx("span",{children:g===e.id?"Redeeming":"Record Redemption"})]}),"expired"===e.status&&Ns.jsxs("span",{className:"inline-flex items-center space-x-1 rounded-full border border-red-200 bg-red-50 px-3 py-1 text-xs font-medium text-red-600",children:[Ns.jsx(It,{className:"h-3.5 w-3.5"}),Ns.jsx("span",{children:"Expired"})]})]})]},e.id))}),t.length>0&&Ns.jsxs("div",{className:"rounded-2xl border border-pr-surface-3 bg-pr-surface-card",children:[Ns.jsx("div",{className:"flex items-center justify-between border-b border-pr-border px-5 py-4",children:Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-semibold text-pr-text-1",children:"Recent Redemptions"}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Track who has redeemed your incentives"})]})}),Ns.jsx("div",{className:"divide-y divide-gray-100",children:t.map(e=>Ns.jsxs("div",{className:"flex items-center justify-between px-5 py-3 text-sm",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-medium text-pr-text-1",children:e.user_name}),Ns.jsxs("p",{className:"text-xs text-pr-text-2",children:["Redeemed ",e.reward_value," ","percentage"===e.reward_unit?"%":e.reward_unit.toUpperCase()]})]}),Ns.jsx("div",{className:"text-right text-xs text-pr-text-2",children:Ns.jsx("p",{children:new Date(e.redeemed_at).toLocaleString()})})]},e.id))})]})]})}let TW=class extends u.Component{constructor(){super(...arguments),t(this,"state",{hasError:!1}),t(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.reload()}),t(this,"handleGoHome",()=>{window.location.href="/dashboard"})}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error(" Error caught by boundary:",e),console.error(" Error location:",t),console.error(" Component stack:",t.componentStack),this.setState({error:e,errorInfo:t})}render(){if(this.state.hasError){if(this.props.fallback){const e=this.props.fallback;return"function"==typeof e?e(this.state.error,this.handleReset):e}return Ns.jsx("div",{className:"min-h-screen-dynamic bg-pr-surface-2 flex items-center justify-center px-4",children:Ns.jsxs("div",{className:"max-w-md w-full bg-pr-surface-card rounded-xl shadow-lg p-8 text-center",children:[Ns.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Ns.jsx(ns,{className:"w-8 h-8 text-red-600"})}),Ns.jsx("h1",{className:"text-2xl font-bold text-pr-text-1 mb-2",children:"Oops! Something went wrong"}),Ns.jsx("p",{className:"text-pr-text-2 mb-6",children:"We encountered an unexpected error. Our team has been notified and is working on a fix."}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsxs("button",{onClick:this.handleReset,className:"w-full bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[Ns.jsx($r,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Try Again"})]}),Ns.jsxs("button",{onClick:this.handleGoHome,className:"w-full bg-pr-surface-2 hover:bg-pr-surface-3 text-pr-text-1 px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[Ns.jsx(sr,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Go Home"})]})]}),!1]})})}return this.props.children}};const AW=(e="mock")=>({provider:e,url:`${"undefined"!=typeof window?window.location.origin:Os||"http://localhost:5173"}/payments/mock-checkout?provider=${e}`,status:"mock"}),MW=e=>{switch((e||"").toLowerCase()){case"stripe":return"stripe";case"coinbase":case"coinbase-commerce":return"coinbase";default:return"mock"}},DW={async listProviders(){try{const e=await la("/api/payments/providers");if(!e.ok)throw new Error(`Failed to load payment providers (${e.status})`);const t=await e.json().catch(()=>null);if(!t||"object"!=typeof t)throw new Error("Invalid providers response");return{providers:Array.isArray(t.data?.providers)?t.data.providers.map(e=>({provider:MW(e?.provider),enabled:Boolean(e?.enabled),ready:Boolean(e?.ready),publishableKey:e?.publishableKey,mode:"live"===e?.mode?"live":"mock"})):[],defaultProvider:MW(t.data?.defaultProvider||Cs.defaultProvider)}}catch(e){console.warn("[Payments] Falling back to config providers",e);const t=Cs.enabled;return{providers:[{provider:"stripe",enabled:t&&Boolean(Cs.stripePublishableKey),ready:t&&Boolean(Cs.stripePublishableKey),publishableKey:Cs.stripePublishableKey,mode:t&&Cs.stripePublishableKey?"live":"mock"},{provider:"coinbase",enabled:t&&Boolean(Cs.coinbaseCommerceKey),ready:t&&Boolean(Cs.coinbaseCommerceKey),publishableKey:Cs.coinbaseCommerceKey,mode:t&&Cs.coinbaseCommerceKey?"live":"mock"},{provider:"mock",enabled:!t,ready:!0,mode:"mock"}],defaultProvider:MW(Cs.defaultProvider)}}},async startCheckout(e){const t=e.provider||MW(Cs.defaultProvider);if(!t||!e.planId)throw new Error("provider and planId required");if(!Cs.enabled)return AW(t);try{const r=await la("/api/payments/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:t,plan_id:e.planId,success_url:e.successUrl,cancel_url:e.cancelUrl,metadata:e.metadata})}),s=await r.json().catch(()=>null);if(!r.ok||!s||"success"!==s.status)throw new Error(s?.message||"Checkout unavailable");const a=s.data||{};if(!a.url)throw new Error("Checkout response missing URL");return{provider:MW(a.provider||t),url:a.url,status:"ready"===a.status?"ready":"mock",expiresAt:a.expiresAt}}catch(r){return console.warn("[Payments] Falling back to mock checkout",r),AW(t)}}},IW=()=>Ns.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 p-6 text-center text-sm text-red-700",children:"Unable to load incentive tools right now. Please refresh or try again later."}),RW=e=>"object"==typeof e&&null!==e;function $W(){const{user:e}=Ls(),t=Ne(),r=ke(),[s,a]=u.useState(null),[n,i]=u.useState(null),[l,o]=u.useState([]),[c,d]=u.useState(!0),[m,p]=u.useState(null),[h,x]=u.useState(!0),[f,g]=u.useState(""),[b,v]=u.useState(!1),[y,j]=u.useState(!1),[w,N]=u.useState([]),[_,k]=u.useState("free"),[S,C]=u.useState(!1),[O,E]=u.useState(!1),[P,T]=u.useState(!1),[A,M]=u.useState({coupons:[],redemptions:[]}),[D,I]=u.useState(!1),[R,$]=u.useState([]),[L,F]=u.useState("mock"),[z,U]=u.useState(!1),[B,q]=u.useState(null),W=u.useCallback(async()=>{try{const e=await la("/api/users/me");if(!e.ok)return void console.error("Failed to fetch user data:",e.status);const t=await e.json();if(!RW(t))return void console.error("Unexpected user payload shape");const r=RW(t.user)?t.user:t;a(r)}catch(e){console.error("Failed to fetch user data:",e),g("Failed to load user data"),x(!1)}},[]),K=u.useCallback(async()=>{if(s)try{const e=await la("/api/advertisers/dashboard"),t=await e.json();if(!e.ok)throw new Error(`Failed to load dashboard (${e.status})`);if(!RW(t)||"success"!==t.status&&"error"!==t.status)throw new Error("Invalid dashboard payload");const r=t;if("success"!==r.status)return console.error("Dashboard payload error:",r.message),void i({drops:[],analytics:[],user_tier:"advertiser"===s.user_type?s.user_type:"free"});i(r.data)}catch(e){console.error("Failed to fetch dashboard data:",e),i({drops:[],analytics:[],user_tier:"advertiser"===s.user_type?s.user_type:"free"})}finally{x(!1)}},[s]),V=u.useCallback(async()=>{try{const e=await la("/api/advertisers/suggested-content"),t=await e.json();if(!e.ok)throw new Error(`Failed to load suggested content (${e.status})`);if(!RW(t)||"success"!==t.status&&"error"!==t.status)throw new Error("Invalid suggested content payload");const r=t;if("success"!==r.status)return console.error("Suggested content payload error:",r.message),void o([]);o(Array.isArray(r.data)?r.data:[])}catch(e){console.error("Failed to fetch suggested content:",e),o([])}finally{d(!1)}},[]),H=u.useCallback(async()=>{C(!0);try{const e=await kW.getPlans();N(e.plans),k(e.currentTier||"free")}catch(e){console.error("Failed to fetch plans",e)}finally{C(!1)}},[]),G=u.useCallback(async()=>{if(!Cs.enabled)return $([]),void F("mock");U(!0),q(null);try{const e=await DW.listProviders();$(e.providers),F(e.defaultProvider)}catch(e){console.error("Failed to fetch payment providers",e),$([]),q("Unable to reach payment providers right now.")}finally{U(!1)}},[]),Y=u.useCallback(async()=>{I(!0);try{const e=await kW.listCoupons();M({coupons:e.coupons||[],redemptions:e.redemptions||[]})}catch(e){console.error("Failed to fetch coupons",e),M({coupons:[],redemptions:[]})}finally{I(!1)}},[]);u.useEffect(()=>{e&&W()},[e,W]),u.useEffect(()=>{s&&(K(),V(),Y())},[s,K,V,Y]),u.useEffect(()=>{const t=()=>{!document.hidden&&e&&W()};return document.addEventListener("visibilitychange",t),()=>document.removeEventListener("visibilitychange",t)},[e,W]),u.useEffect(()=>{e&&W()},[t?.pathname,e,W]),u.useEffect(()=>{const e=e=>{"advertiser_conversion"===e.key&&"true"===e.newValue&&(localStorage.removeItem("advertiser_conversion"),W())};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[W]),u.useEffect(()=>{"#converted"===window.location.hash&&e&&(window.history.replaceState({},"",window.location.pathname),setTimeout(()=>{W()},500))},[e,W]),u.useEffect(()=>{e&&(H(),G())},[e,H,G]);const J=Array.from({length:30},(e,t)=>{const r=new Date;return r.setDate(r.getDate()-(29-t)),{date:r.toISOString().split("T")[0],applications:Math.floor(50*Math.random())+10,conversions:Math.floor(20*Math.random())+5,impressions:Math.floor(1e3*Math.random())+200,clicks:Math.floor(100*Math.random())+20,spent:Math.floor(500*Math.random())+100,participants:Math.floor(30*Math.random())+5}}),Z=(e=>{switch(e){case"super":return{name:"Super Advertiser",color:"text-yellow-600 bg-yellow-50",inventory:"Weekly: 500 moves, 25 proof drops, 15 paid drops",features:["Premium analytics","Priority support","Custom targeting","Advanced reporting","Create proof & paid drops"]};case"premium":return{name:"Premium Advertiser",color:"text-purple-600 bg-purple-50",inventory:"Weekly: 200 moves, 15 proof drops, 8 paid drops",features:["Advanced analytics","Priority support","Custom targeting","Create proof & paid drops"]};default:return{name:"Free Advertiser",color:"text-pr-text-2 bg-pr-surface-2",inventory:"Monthly Sample: 50 moves, 5 proof drops",features:["Basic analytics","Standard support","Create proof drops only","Sponsor content with gems"]}}})(n?.user_tier||"free"),Q=n?.drops?n.drops.reduce((e,t)=>({totalDrops:e.totalDrops+1,totalParticipants:e.totalParticipants+(t.total_applications??0),totalGems:e.totalGems+(t.gem_reward_base??0)}),{totalDrops:0,totalParticipants:0,totalGems:0}):{totalDrops:0,totalParticipants:0,totalGems:0},X=e=>{switch(e){case"stripe":return"Stripe";case"coinbase":return"Coinbase Commerce";default:return"Mock"}},ee=e=>e.enabled?e.ready?"Ready":"Configured":"Disabled",te="/advertiser/campaigns"===t.pathname||t.pathname.startsWith("/advertiser/campaigns/")||"/campaigns"===t.pathname||t.pathname.startsWith("/campaigns/");return h?Ns.jsx("div",{className:"flex items-center justify-center h-64",children:Ns.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):f?Ns.jsx("div",{className:"max-w-4xl mx-auto",children:Ns.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[Ns.jsx("h2",{className:"text-xl font-semibold text-red-900 mb-2",children:"Error Loading Dashboard"}),Ns.jsx("p",{className:"text-red-700 mb-4",children:f}),Ns.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-xl font-medium transition-colors",children:"Refresh Page"})]})}):s?"advertiser"!==s.user_type?Ns.jsx("div",{className:"max-w-4xl mx-auto",children:Ns.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-8 text-center",children:[Ns.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:Ns.jsx(yr,{className:"w-8 h-8 text-blue-600"})}),Ns.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"Become an Advertiser"}),Ns.jsx("p",{className:"text-blue-700 mb-6 max-w-md mx-auto",children:"Your account is not yet set up for advertising. Click below to become an advertiser and start creating marketing campaigns."}),Ns.jsx(Ze,{to:"/advertiser/onboarding",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-4 rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:"Become an Advertiser"}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mt-4",children:"Free to get started  No setup fees  Create your first campaign"})]})}):n?Ns.jsxs("div",{className:"space-y-6",children:[te?Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1",children:"Campaigns"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Manage your marketing campaigns and track performance"})]}),Ns.jsxs(Oc,{onClick:()=>r("/campaigns/new"),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200",children:[Ns.jsx(Dt,{className:"w-4 h-4"}),Ns.jsx("span",{children:"New Campaign"})]})]}),Ns.jsx(SW,{showHeader:!1,basePath:"/advertiser/campaigns"})]}):Ns.jsxs(Ns.Fragment,{children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("div",{className:"flex items-center space-x-4",children:Ns.jsx("div",{children:s?.brand_name?Ns.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[Ns.jsx("div",{className:"w-12 h-12 bg-pr-surface-2 rounded-xl flex items-center justify-center overflow-hidden border border-pr-surface-3",children:s?.brand_logo_url?Ns.jsx("img",{src:s.brand_logo_url,alt:"Brand logo",className:"w-full h-full object-cover"}):Ns.jsx(gt,{className:"w-6 h-6 text-gray-400"})}),Ns.jsxs("div",{children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("h1",{className:"text-3xl font-bold text-pr-text-1",children:s.brand_name}),Ns.jsx("button",{onClick:()=>v(!0),className:"text-gray-400 hover:text-pr-text-2 transition-colors",title:"Edit brand profile",children:Ns.jsx(Jr,{className:"w-5 h-5"})})]}),Ns.jsx("p",{className:"text-pr-text-2",children:s?.brand_description||"Manage your campaigns and track performance"})]})]}):Ns.jsxs("div",{children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx("h1",{className:"text-3xl font-bold text-pr-text-1",children:"Advertiser Dashboard"}),Ns.jsxs("button",{onClick:()=>v(!0),className:"bg-blue-100 hover:bg-blue-200 text-blue-600 px-3 py-1 rounded-lg text-sm font-medium transition-colors flex items-center space-x-1",children:[Ns.jsx(gt,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Set up brand"})]})]}),Ns.jsx("p",{className:"text-pr-text-2 mt-2",children:"Manage your campaigns and track performance"})]})})}),Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("div",{className:`px-4 py-2 rounded-lg ${Z.color}`,children:Ns.jsx("span",{className:"font-medium",children:Z.name})}),Ns.jsx("button",{onClick:()=>v(!0),className:"text-gray-400 hover:text-pr-text-2 transition-colors p-2 rounded-lg hover:bg-pr-surface-2",title:"Brand settings",children:Ns.jsx(Wr,{className:"w-5 h-5"})})]})]}),Ns.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[Ns.jsxs("div",{className:"rounded-2xl border border-blue-200 bg-blue-50/60 p-6 shadow-sm",children:[Ns.jsxs("div",{className:"flex items-start justify-between",children:[Ns.jsxs("div",{children:[Ns.jsxs("div",{className:"flex items-center space-x-2 text-sm font-medium text-blue-600",children:[Ns.jsx(zt,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Advertiser Plan"})]}),Ns.jsx("h3",{className:"mt-1 text-2xl font-semibold text-pr-text-1 capitalize",children:_}),Ns.jsx("p",{className:"mt-2 text-sm text-blue-700",children:"Unlock larger incentive budgets, deeper analytics, and leaderboards targeting with Premium plans."})]}),Ns.jsx("div",{className:"text-right text-sm text-blue-700",children:S?Ns.jsxs("div",{className:"flex items-center space-x-1 text-xs text-blue-500",children:[Ns.jsx(pr,{className:"h-3.5 w-3.5 animate-spin"}),Ns.jsx("span",{children:"Loading plans"})]}):Ns.jsx("button",{onClick:()=>E(!0),className:"rounded-full bg-gradient-to-r from-blue-500 to-purple-500 px-4 py-2 text-xs font-semibold text-white shadow-sm transition hover:from-blue-600 hover:to-purple-600",children:"Upgrade Plan"})})]}),w.length>0&&Ns.jsx("ul",{className:"mt-4 grid gap-2 text-sm text-blue-800 md:grid-cols-2",children:w.find(e=>e.id===_)?.features?.slice(0,4).map(e=>Ns.jsxs("li",{className:"flex items-center space-x-2",children:[Ns.jsx(Mt,{className:"h-4 w-4 text-blue-500"}),Ns.jsx("span",{children:e})]},e))||Ns.jsx("li",{className:"text-sm text-blue-700",children:"Compare plans to see everything you unlock."})}),Ns.jsxs("div",{className:"mt-6 rounded-xl border border-blue-100 bg-pr-surface-card/70 p-4",children:[Ns.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold text-blue-700",children:[Ns.jsx("span",{children:"Payment Providers"}),z?Ns.jsxs("span",{className:"flex items-center space-x-1 text-blue-500",children:[Ns.jsx(pr,{className:"h-3.5 w-3.5 animate-spin"}),Ns.jsx("span",{children:"Checking"})]}):null]}),Cs.enabled?B?Ns.jsx("p",{className:"mt-3 text-sm text-red-600",children:B}):0===R.length?Ns.jsx("p",{className:"mt-3 text-sm text-blue-600",children:"No payment providers configured yet."}):Ns.jsx("ul",{className:"mt-3 space-y-2",children:R.map(e=>Ns.jsxs("li",{className:"flex items-center justify-between rounded-lg bg-blue-50 px-3 py-2 text-sm text-blue-700",children:[Ns.jsxs("div",{children:[Ns.jsx("span",{className:"font-semibold",children:X(e.provider)}),L===e.provider&&Ns.jsx("span",{className:"ml-2 rounded-full bg-blue-200 px-2 py-0.5 text-xs font-semibold text-blue-700",children:"Default"}),e.publishableKey&&Ns.jsxs("span",{className:"block text-xs text-blue-500",children:["Key  ",e.publishableKey.slice(0,12),""]})]}),Ns.jsx("span",{className:"text-xs font-semibold "+(e.enabled?"text-emerald-600":"text-pr-text-2"),children:ee(e)})]},e.provider))}):Ns.jsx("p",{className:"mt-3 text-sm text-blue-600",children:"Payments are currently disabled. Our team will process upgrades manually."})]})]}),Ns.jsxs("div",{className:"rounded-2xl border border-purple-200 bg-pr-surface-card p-6 shadow-sm",children:[Ns.jsx("div",{className:"flex items-start justify-between",children:Ns.jsxs("div",{children:[Ns.jsxs("div",{className:"flex items-center space-x-2 text-sm font-medium text-purple-600",children:[Ns.jsx(rs,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Giveaways & Coupons"})]}),Ns.jsx("h3",{className:"mt-1 text-xl font-semibold text-pr-text-1",children:"Incentive Highlights"}),Ns.jsx("p",{className:"mt-2 text-sm text-pr-text-2",children:"Design rewards for top leaderboard performers or attach coupons directly to high-value drops."})]})}),Ns.jsxs("div",{className:"mt-4 grid gap-3 text-sm text-pr-text-2 md:grid-cols-2",children:[Ns.jsxs("div",{className:"rounded-lg bg-purple-50 px-3 py-2",children:[Ns.jsx("p",{className:"font-medium text-purple-700",children:"Leaderboard Incentives"}),Ns.jsx("p",{children:"Deliver exclusive rewards automatically to top ranked creators."})]}),Ns.jsxs("div",{className:"rounded-lg bg-purple-50 px-3 py-2",children:[Ns.jsx("p",{className:"font-medium text-purple-700",children:"Drop Attachments"}),Ns.jsx("p",{children:"Motivate applicants with coupons and giveaways baked into campaign briefs."})]})]})]})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 shadow-sm border border-pr-surface-3",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Sample Inventory"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Use monthly samples to test promotions before upgrading"})]}),Ns.jsx("div",{className:"bg-orange-100 text-orange-600 px-3 py-1 rounded-full text-xs font-medium",children:"Monthly"})]}),Ns.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[Ns.jsxs("div",{className:"text-center p-3 bg-pr-surface-2 rounded-lg",children:[Ns.jsx("h4",{className:"text-sm font-medium text-pr-text-2",children:"Moves"}),Ns.jsxs("p",{className:"text-xl font-semibold text-pr-text-1",children:[n?.monthly_inventory?.moves_used??0,"/50"]})]}),Ns.jsxs("div",{className:"text-center p-3 bg-pr-surface-2 rounded-lg",children:[Ns.jsx("h4",{className:"text-sm font-medium text-pr-text-2",children:"Proof Drops"}),Ns.jsxs("p",{className:"text-xl font-semibold text-pr-text-1",children:[n?.monthly_inventory?.proof_drops_used??0,"/5"]})]}),Ns.jsxs("div",{className:"text-center p-3 bg-pr-surface-2 rounded-lg",children:[Ns.jsx("h4",{className:"text-sm font-medium text-pr-text-2",children:"Paid Drops"}),Ns.jsx("p",{className:"text-xl font-semibold text-pr-text-1",children:"Upgrade"})]})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 shadow-sm border border-pr-surface-3",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Weekly Allocation"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Upgrade to unlock weekly inventory packs"})]}),Ns.jsx("div",{className:"bg-purple-100 text-purple-600 px-3 py-1 rounded-full text-xs font-medium",children:"Upgrade"})]}),Ns.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[Ns.jsxs("div",{className:"text-center p-3 bg-pr-surface-2 rounded-lg",children:[Ns.jsx("h4",{className:"text-sm font-medium text-pr-text-2",children:"Moves"}),Ns.jsx("p",{className:"text-xl font-semibold text-pr-text-1",children:"200"}),Ns.jsx("span",{className:"text-xs text-pr-text-2",children:"Premium tier"})]}),Ns.jsxs("div",{className:"text-center p-3 bg-pr-surface-2 rounded-lg",children:[Ns.jsx("h4",{className:"text-sm font-medium text-pr-text-2",children:"Proof Drops"}),Ns.jsx("p",{className:"text-xl font-semibold text-pr-text-1",children:"15"})]}),Ns.jsxs("div",{className:"text-center p-3 bg-pr-surface-2 rounded-lg",children:[Ns.jsx("h4",{className:"text-sm font-medium text-pr-text-2",children:"Paid Drops"}),Ns.jsx("p",{className:"text-xl font-semibold text-pr-text-1",children:"8"})]})]})]})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[Ns.jsx(Mq,{title:"Total Drops",value:Q.totalDrops,change:12,changeType:"increase",icon:Ns.jsx(Nt,{className:"w-5 h-5"}),trend:J.slice(-7).map(e=>({date:e.date,value:Math.floor(20*Math.random())+5}))}),Ns.jsx(Mq,{title:"Total Participants",value:Q.totalParticipants.toLocaleString(),change:8,changeType:"increase",icon:Ns.jsx(us,{className:"w-5 h-5"}),trend:J.slice(-7).map(e=>({date:e.date,value:e.participants}))}),Ns.jsx(Mq,{title:"Gems Distributed",value:Q.totalGems.toFixed(1),change:15,changeType:"increase",icon:Ns.jsx(Ut,{className:"w-5 h-5"}),trend:J.slice(-7).map(e=>({date:e.date,value:e.spent}))}),Ns.jsx(Mq,{title:"Avg. Engagement",value:`${n.analytics.length>0?(n.analytics.reduce((e,t)=>e+(t.engagement_rate??0),0)/n.analytics.length).toFixed(1):"8.5"}%`,change:3,changeType:"increase",icon:Ns.jsx(as,{className:"w-5 h-5"}),trend:J.slice(-7).map(e=>({date:e.date,value:Math.floor(20*Math.random())+5}))})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl shadow-sm border border-pr-surface-3",children:[Ns.jsx("div",{className:"p-6 border-b border-pr-surface-3",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center",children:Ns.jsx(Yr,{className:"w-5 h-5 text-white"})}),Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Suggested Content to Sponsor"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"High-performing content perfect for your brand"})]})]}),Ns.jsxs("div",{className:"flex items-center space-x-2 text-sm text-pr-text-2",children:[Ns.jsx(Kt,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Last updated just now"})]})]})}),Ns.jsx("div",{className:"p-6",children:c?Ns.jsx("div",{className:"text-center py-8 text-pr-text-2",children:"Loading suggestions..."}):l.length>0?Ns.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.slice(0,6).map(e=>{const t=(e=>{const t={"quick-boost":{name:"Quick Boost",gems:25,hours:1,multiplier:1.5},"popular-boost":{name:"Popular Boost",gems:50,hours:6,multiplier:2},"daily-featured":{name:"Daily Feature",gems:100,hours:24,multiplier:3},"premium-spotlight":{name:"Premium Spotlight",gems:200,hours:72,multiplier:4},"viral-campaign":{name:"Viral Campaign",gems:500,hours:168,multiplier:6}};return t[e]||t["quick-boost"]})(e.suggested_package);return Ns.jsxs("div",{className:"border border-pr-surface-3 rounded-lg p-4 hover:border-purple-300 transition-colors",children:[Ns.jsxs("div",{className:"flex items-start justify-between mb-3",children:[Ns.jsxs("div",{className:"flex-1",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[Ns.jsx("span",{className:"text-xs font-medium text-purple-600 bg-purple-50 px-2 py-1 rounded-full",children:e.platform}),e.is_trending&&Ns.jsx("span",{className:"text-xs font-medium text-orange-600 bg-orange-50 px-2 py-1 rounded-full",children:"Trending"})]}),Ns.jsx("h4",{className:"font-semibold text-pr-text-1",children:e.title}),Ns.jsx("p",{className:"text-sm text-pr-text-2 line-clamp-2 mt-1",children:e.description})]}),Ns.jsx("button",{className:"text-gray-400 hover:text-pr-text-2 transition-colors",onClick:()=>window.open(e.platform_url,"_blank"),children:Ns.jsx(Kt,{className:"w-4 h-4"})})]}),Ns.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center text-sm mb-3",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-semibold text-pr-text-1",children:e.total_engagement}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Engagement"})]}),Ns.jsxs("div",{children:[Ns.jsxs("p",{className:"font-semibold text-pr-text-1",children:[e.engagement_rate,"%"]}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Eng. Rate"})]}),Ns.jsxs("div",{children:[Ns.jsxs("p",{className:"font-semibold text-pr-text-1",children:[e.roi_potential,"%"]}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"ROI Potential"})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-3 mb-3",children:[Ns.jsx("div",{className:"text-xs text-pr-text-2 mb-1",children:"Suggested Package:"}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("div",{className:"font-medium text-pr-text-1",children:t.name}),Ns.jsxs("div",{className:"text-xs text-pr-text-2",children:[t.hours,"h  ",t.multiplier,"x boost"]})]}),Ns.jsxs("div",{className:"flex items-center space-x-1 text-purple-600 font-semibold",children:[Ns.jsx(Ut,{className:"w-3 h-3"}),Ns.jsx("span",{children:t.gems})]})]})]}),Ns.jsx("button",{onClick:()=>(e=>p(e))(e),className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-2 px-4 rounded-lg font-medium transition-all duration-200 text-sm",children:"Sponsor This Content"})]},e.id)})}):Ns.jsxs("div",{className:"text-center py-8",children:[Ns.jsx(Yr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),Ns.jsx("h4",{className:"text-lg font-semibold text-pr-text-1 mb-2",children:"No suggestions available"}),Ns.jsx("p",{className:"text-pr-text-2",children:"We'll find great content for you to sponsor soon!"})]})})]}),Ns.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Campaign Performance"}),Ns.jsxs("div",{className:"flex items-center space-x-2 text-sm text-pr-text-2",children:[Ns.jsx(yt,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Last 30 days"})]})]}),Ns.jsx(Aq,{data:J,height:300,metrics:[{key:"applications",name:"Applications",color:"#f97316"},{key:"conversions",name:"Conversions",color:"#10b981"},{key:"clicks",name:"Clicks",color:"#3b82f6"}]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-6",children:"Drop Type Distribution"}),Ns.jsx(Pq,{data:[{name:"Content Creation",value:45,color:"#f97316"},{name:"Social Sharing",value:30,color:"#8b5cf6"},{name:"Reviews",value:15,color:"#10b981"},{name:"Surveys",value:10,color:"#3b82f6"}],height:300})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-6",children:"Key Performance Indicators"}),Ns.jsx(Eq,{data:[{metric:"Click-through Rate",value:4.2},{metric:"Conversion Rate",value:12.8},{metric:"Engagement Rate",value:8.5},{metric:"Application Rate",value:15.3},{metric:"Completion Rate",value:78.9}],height:300})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-6",children:"Spending & Engagement Trends"}),Ns.jsx(Tq,{data:J.map(e=>({date:e.date,value:e.spent,secondary:e.impressions/10})),height:300,primaryKey:"value",secondaryKey:"secondary",primaryColor:"#f97316",secondaryColor:"#8b5cf6"})]})]}),D?Ns.jsx("div",{className:"flex items-center justify-center rounded-2xl border border-dashed border-purple-200 bg-purple-50/40 p-12",children:Ns.jsxs("div",{className:"flex flex-col items-center space-y-3 text-purple-600",children:[Ns.jsx(pr,{className:"h-6 w-6 animate-spin"}),Ns.jsx("p",{className:"text-sm font-medium",children:"Loading incentive toolkit"})]})}):Ns.jsx(TW,{fallback:Ns.jsx(IW,{}),children:Ns.jsx(PW,{coupons:A.coupons,redemptions:A.redemptions,drops:n.drops,onRefresh:Y})}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl p-6 border border-pr-surface-3 shadow-sm",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-6",children:"Real-time Campaign Metrics"}),Ns.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[Ns.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[Ns.jsx(Ht,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),Ns.jsx("p",{className:"text-2xl font-bold text-blue-900",children:"24.3K"}),Ns.jsx("p",{className:"text-sm text-blue-600",children:"Impressions"})]}),Ns.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[Ns.jsx(Sr,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),Ns.jsx("p",{className:"text-2xl font-bold text-green-900",children:"1.2K"}),Ns.jsx("p",{className:"text-sm text-green-600",children:"Clicks"})]}),Ns.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[Ns.jsx(ts,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),Ns.jsx("p",{className:"text-2xl font-bold text-purple-900",children:"156"}),Ns.jsx("p",{className:"text-sm text-purple-600",children:"Applications"})]}),Ns.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[Ns.jsx(us,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),Ns.jsx("p",{className:"text-2xl font-bold text-orange-900",children:"89"}),Ns.jsx("p",{className:"text-sm text-orange-600",children:"Conversions"})]}),Ns.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[Ns.jsx(Bt,{className:"w-6 h-6 text-yellow-600 mx-auto mb-2"}),Ns.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:"$0.78"}),Ns.jsx("p",{className:"text-sm text-yellow-600",children:"Cost/Convert"})]}),Ns.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[Ns.jsx(as,{className:"w-6 h-6 text-red-600 mx-auto mb-2"}),Ns.jsx("p",{className:"text-2xl font-bold text-red-900",children:"4.2%"}),Ns.jsx("p",{className:"text-sm text-red-600",children:"CTR"})]})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl shadow-sm border border-pr-surface-3",children:[Ns.jsx("div",{className:"p-6 border-b border-pr-surface-3",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Recent Drops"}),"advertiser"===s?.user_type&&Ns.jsxs("div",{className:"flex space-x-2",children:[Ns.jsxs("button",{onClick:()=>window.location.href="/earn?create=proof",className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200",children:[Ns.jsx(Rr,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Create Proof Drop"})]}),"free"!==n?.user_tier&&Ns.jsxs("button",{onClick:()=>window.location.href="/earn?create=paid",className:"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200",children:[Ns.jsx(Rr,{className:"w-4 h-4"}),Ns.jsx("span",{children:"Create Paid Drop"})]})]})]})}),Ns.jsx("div",{className:"p-6",children:n.drops.length>0?Ns.jsx("div",{className:"space-y-4",children:n.drops.slice(0,5).map(e=>Ns.jsxs("div",{className:"flex items-center justify-between p-4 bg-pr-surface-2 rounded-lg",children:[Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("h4",{className:"font-medium text-pr-text-1",children:e.title}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mt-1",children:e.description}),Ns.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-pr-text-2",children:[Ns.jsxs("span",{className:"flex items-center space-x-1",children:[Ns.jsx(us,{className:"w-4 h-4"}),Ns.jsxs("span",{children:[e.total_applications," applicants"]})]}),Ns.jsxs("span",{className:"flex items-center space-x-1",children:[Ns.jsx(Ut,{className:"w-4 h-4"}),Ns.jsxs("span",{children:[e.gem_reward_base," gems"]})]}),Ns.jsxs("span",{className:"flex items-center space-x-1",children:[Ns.jsx(yt,{className:"w-4 h-4"}),Ns.jsx("span",{children:new Date(e.created_at).toLocaleDateString()})]})]})]}),Ns.jsx("div",{className:"flex items-center space-x-2",children:Ns.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("active"===e.status?"text-green-600 bg-green-100":"text-pr-text-2 bg-pr-surface-2"),children:e.status})})]},e.id))}):Ns.jsxs("div",{className:"text-center py-8",children:[Ns.jsx(Nt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),Ns.jsx("h4",{className:"text-lg font-semibold text-pr-text-1 mb-2",children:"No drops yet"}),Ns.jsx("p",{className:"text-pr-text-2 mb-4",children:"Create your first drop to start engaging with creators."}),"advertiser"===s?.user_type&&Ns.jsx("button",{onClick:()=>window.location.href="/earn?create=proof",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-2 rounded-lg font-medium",children:"Create Your First Drop"})]})})]}),n.analytics.length>0&&Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl shadow-sm border border-pr-surface-3",children:[Ns.jsx("div",{className:"p-6 border-b border-pr-surface-3",children:Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Performance Analytics"})}),Ns.jsx("div",{className:"overflow-x-auto",children:Ns.jsxs("table",{className:"w-full",children:[Ns.jsx("thead",{className:"bg-pr-surface-2",children:Ns.jsxs("tr",{children:[Ns.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-pr-text-2 uppercase tracking-wider",children:"Period"}),Ns.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-pr-text-2 uppercase tracking-wider",children:"Drops"}),Ns.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-pr-text-2 uppercase tracking-wider",children:"Participants"}),Ns.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-pr-text-2 uppercase tracking-wider",children:"Gems Spent"}),Ns.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-pr-text-2 uppercase tracking-wider",children:"Impressions"}),Ns.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-pr-text-2 uppercase tracking-wider",children:"Engagement"})]})}),Ns.jsx("tbody",{className:"bg-pr-surface-card divide-y divide-gray-200",children:n.analytics.slice(0,10).map(e=>Ns.jsxs("tr",{className:"hover:bg-pr-surface-2",children:[Ns.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-pr-text-1",children:[new Date(e.period_start).toLocaleDateString()," -"," ",new Date(e.period_end).toLocaleDateString()]}),Ns.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-pr-text-1",children:e.drops_created??0}),Ns.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-pr-text-1",children:e.total_participants??0}),Ns.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-pr-text-1",children:(e.gems_spent??0).toFixed(1)}),Ns.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-pr-text-1",children:(e.impressions??0).toLocaleString()}),Ns.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-pr-text-1",children:[(e.engagement_rate??0).toFixed(1),"%"]})]},e.id))})]})})]})]}),m&&Ns.jsx(iW,{isOpen:!0,onClose:()=>p(null),onSponsor:async(e,t,r)=>{if(m)try{(await fetch("/api/content/sponsor",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({contentId:m.id,gemAmount:e,boostMultiplier:t,durationHours:r})})).ok?(p(null),V()):console.error("Failed to sponsor content")}catch(s){console.error("Error sponsoring content:",s)}},contentTitle:m.title,userGems:s?.gems_balance??0}),Ns.jsx(OW,{isOpen:O,onClose:()=>E(!1),plans:w,currentTier:_,onSelect:async e=>{T(!0);try{const t=w.find(t=>t.id===e),r=R.find(e=>e.enabled&&e.ready)?.provider||L;if(Cs.enabled&&r&&"mock"!==r){const s=await DW.startCheckout({planId:e,provider:r,successUrl:`${window.location.origin}/advertiser?upgrade=success&plan=${e}`,cancelUrl:`${window.location.origin}/advertiser?upgrade=cancelled`,metadata:{planName:t?.name}});if(s?.url&&"mock"!==s.status)return E(!1),T(!1),void(window.location.href=s.url)}const s=await kW.upgrade(e);k(s?.plan?.id||e),s?.message&&alert(s.message),H()}catch(t){console.error("Failed to upgrade plan",t),alert("Unable to upgrade plan right now. Please try again later.")}finally{T(!1),E(!1)}},isSubmitting:P}),Ns.jsx(fW,{isOpen:b,onClose:()=>v(!1),onSave:async e=>{j(!0);try{const t=await fetch("/api/users/brand-profile",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(t.ok)v(!1),W();else{const e=await t.json();alert(e.error||"Failed to save brand profile")}}catch(t){console.error("Error saving brand profile:",t),alert("Failed to save brand profile")}finally{j(!1)}},currentBrandData:s??void 0,loading:y})]}):Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx(us,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1 mb-2",children:"Loading Dashboard..."}),Ns.jsx("p",{className:"text-pr-text-2",children:"Please wait while we load your advertiser dashboard."})]}):null}function LW(){const{user:e,demoLogin:t}=Ls(),r=ke(),[s,a]=u.useState(!1),[n,i]=u.useState(null);return Ns.jsxs("div",{className:"min-h-screen-dynamic bg-gradient-to-br from-orange-50 via-red-50 to-purple-50",children:[Ns.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-orange-500 to-red-500",children:[Ns.jsx("div",{className:"absolute inset-0 bg-black/10"}),Ns.jsx("div",{className:"relative z-10 px-6 py-20",children:Ns.jsxs("div",{className:"max-w-4xl mx-auto text-center text-white",children:[Ns.jsx("div",{className:"flex justify-center mb-6",children:Ns.jsx("div",{className:"w-16 h-16 bg-pr-surface-card/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:Ns.jsx(yr,{className:"w-8 h-8"})})}),Ns.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-6",children:"Advertise on Promorang"}),Ns.jsx("p",{className:"text-xl md:text-2xl mb-8 text-orange-100 max-w-3xl mx-auto",children:"Connect with thousands of creators and build authentic campaigns that drive real engagement"}),Ns.jsxs("div",{className:"flex items-center justify-center space-x-8 text-orange-100",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(us,{className:"w-5 h-5"}),Ns.jsx("span",{children:"50k+ Active Creators"})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(as,{className:"w-5 h-5"}),Ns.jsx("span",{children:"95% Completion Rate"})]}),Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Zr,{className:"w-5 h-5"}),Ns.jsx("span",{children:"4.9 Average Rating"})]})]})]})})]}),Ns.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-16",children:[Ns.jsxs("div",{className:"mb-16",children:[Ns.jsx("h2",{className:"text-4xl font-bold text-center text-pr-text-1 mb-12",children:"Why Choose Promorang for Advertising?"}),Ns.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[Ns.jsxs("div",{className:"bg-pr-surface-card rounded-2xl p-8 shadow-sm border border-pr-surface-3 hover:shadow-lg transition-shadow",children:[Ns.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mb-6",children:Ns.jsx(ts,{className:"w-6 h-6 text-blue-600"})}),Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1 mb-4",children:"Moves & Proof System"}),Ns.jsx("p",{className:"text-pr-text-2",children:'Create "moves" that help users earn keys for their Master Key progression, and "proof drops" that contribute to daily activation requirements.'})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-2xl p-8 shadow-sm border border-pr-surface-3 hover:shadow-lg transition-shadow",children:[Ns.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mb-6",children:Ns.jsx(Nt,{className:"w-6 h-6 text-green-600"})}),Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1 mb-4",children:"Flexible Inventory System"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Start with free monthly samples, then upgrade to weekly inventory allocations for moves, proof drops, and paid opportunities."})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-2xl p-8 shadow-sm border border-pr-surface-3 hover:shadow-lg transition-shadow",children:[Ns.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mb-6",children:Ns.jsx(Bt,{className:"w-6 h-6 text-purple-600"})}),Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1 mb-4",children:"Gem Sponsorship System"}),Ns.jsx("p",{className:"text-pr-text-2",children:"All advertisers can allocate gems to sponsor any content, boosting visibility and engagement regardless of tier level."})]})]})]}),Ns.jsxs("div",{className:"mb-16",children:[Ns.jsx("h2",{className:"text-4xl font-bold text-center text-pr-text-1 mb-4",children:"Advertiser Tiers"}),Ns.jsx("p",{className:"text-center text-pr-text-2 mb-12 text-lg",children:"Choose the tier that matches your advertising needs and scale"}),Ns.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:Object.entries({free:{name:"Free Advertiser",color:"text-pr-text-2 bg-pr-surface-2 border-pr-surface-3",inventory:"Monthly Sample: 50 moves, 5 proof drops",features:["Basic analytics","Standard support","Create proof drops only","Sponsor any content with gems"]},premium:{name:"Premium Advertiser",color:"text-purple-600 bg-purple-50 border-purple-200",inventory:"Weekly: 200 moves, 15 proof drops, 8 paid drops",features:["Advanced analytics","Priority support","Custom targeting","Create proof & paid drops","Sponsor content with gems"]},super:{name:"Super Advertiser",color:"text-yellow-600 bg-yellow-50 border-yellow-200",inventory:"Weekly: 500 moves, 25 proof drops, 15 paid drops",features:["Premium analytics","Priority support","Custom targeting","Advanced reporting","Create proof & paid drops","Sponsor content with gems"]}}).map(([e,t])=>Ns.jsxs("div",{className:`border-2 rounded-2xl p-8 ${t.color} relative`,children:["premium"===e&&Ns.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:Ns.jsx("span",{className:"bg-purple-500 text-white px-4 py-1 rounded-full text-sm font-medium",children:"Most Popular"})}),Ns.jsxs("div",{className:"text-center mb-6",children:[Ns.jsxs("div",{className:"flex justify-center mb-4",children:["free"===e&&Ns.jsx(fs,{className:"w-8 h-8 text-pr-text-2"}),"premium"===e&&Ns.jsx(Zr,{className:"w-8 h-8 text-purple-600"}),"super"===e&&Ns.jsx(zt,{className:"w-8 h-8 text-yellow-600"})]}),Ns.jsx("h3",{className:"text-2xl font-bold mb-2",children:t.name}),Ns.jsx("p",{className:"text-lg font-semibold",children:t.inventory}),Ns.jsx("p",{className:"text-sm opacity-75",children:"free"===e?"Sample inventory allocation":"Weekly inventory allocation"})]}),Ns.jsx("ul",{className:"space-y-3 mb-6",children:t.features.map((e,t)=>Ns.jsxs("li",{className:"flex items-center space-x-2",children:[Ns.jsx(At,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),Ns.jsx("span",{className:"text-sm",children:e})]},t))}),"free"===e&&Ns.jsx("p",{className:"text-xs opacity-75 text-center",children:"Free tier can create proof drops and sponsor content. Upgrade to create paid drops."})]},e))})]}),Ns.jsxs("div",{className:"mb-16",children:[Ns.jsx("h2",{className:"text-4xl font-bold text-center text-pr-text-1 mb-12",children:"How It Works"}),Ns.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:Ns.jsx("span",{className:"text-white font-bold text-xl",children:"1"})}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-2",children:"Create Campaigns"}),Ns.jsx("p",{className:"text-pr-text-2 text-sm",children:"Set up drops with your requirements, budget, and target audience"})]}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:Ns.jsx("span",{className:"text-white font-bold text-xl",children:"2"})}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-2",children:"Creators Apply"}),Ns.jsx("p",{className:"text-pr-text-2 text-sm",children:"Qualified creators apply to your campaigns with their proposals"})]}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:Ns.jsx("span",{className:"text-white font-bold text-xl",children:"3"})}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-2",children:"Review & Approve"}),Ns.jsx("p",{className:"text-pr-text-2 text-sm",children:"Review submissions and approve the best content for your brand"})]}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:Ns.jsx("span",{className:"text-white font-bold text-xl",children:"4"})}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-2",children:"Track Results"}),Ns.jsx("p",{className:"text-pr-text-2 text-sm",children:"Monitor performance and measure ROI with detailed analytics"})]})]})]}),Ns.jsx("div",{className:"bg-pr-surface-card rounded-2xl shadow-lg border border-pr-surface-3 p-12 text-center",children:Ns.jsxs("div",{className:"max-w-2xl mx-auto",children:[Ns.jsx("h2",{className:"text-3xl font-bold text-pr-text-1 mb-4",children:"Ready to Start Advertising?"}),Ns.jsx("p",{className:"text-pr-text-2 mb-8 text-lg",children:"Join hundreds of brands already using Promorang to create authentic, high-performing campaigns"}),n&&Ns.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-6",children:Ns.jsx("p",{className:"text-sm text-red-700",children:n})}),Ns.jsx("button",{onClick:async()=>{if(e){a(!0),i(null);try{const e=await fetch("/api/users/become-advertiser",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`},credentials:"include"});if(e.ok){const t=await e.json();if(t.token&&t.user)return localStorage.setItem("authToken",t.token),localStorage.setItem("advertiser_conversion","true"),void(window.location.href="/advertiser#converted");localStorage.setItem("advertiser_conversion","true"),window.location.href="/advertiser#converted"}else{const t=await e.json();i(t.error||"Failed to become advertiser")}}catch(t){console.error("Error becoming advertiser:",t),i("Network error occurred")}finally{a(!1)}}else r("/?error=auth_required")},disabled:s,className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold px-8 py-4 rounded-xl text-lg transition-all duration-200 transform hover:scale-105 shadow-lg flex items-center space-x-2 mx-auto",children:s?Ns.jsxs(Ns.Fragment,{children:[Ns.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),Ns.jsx("span",{children:"Setting up your account..."})]}):Ns.jsxs(Ns.Fragment,{children:[Ns.jsx("span",{children:"Become an Advertiser"}),Ns.jsx(mt,{className:"w-5 h-5"})]})}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mt-4",children:"Free to get started  No setup fees  Pay only for completed work"})]})})]})]})}function FW(){const e=Ne(),t=[{name:"Dashboard",path:"/advertiser",icon:or},{name:"Campaigns",path:"/advertiser/campaigns",icon:yr},{name:"Coupons",path:"/advertiser/coupons",icon:Xt}];return Ns.jsx(pa,{children:Ns.jsxs("div",{className:"min-h-screen-dynamic bg-pr-surface-2",children:[Ns.jsx("div",{className:"bg-pr-surface-card border-b border-pr-surface-3",children:Ns.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Ns.jsx("nav",{className:"flex space-x-8","aria-label":"Tabs",children:t.map(t=>{const r=t.icon,s="/advertiser"===(a=t.path)?e.pathname===a:e.pathname.startsWith(a);var a;return Ns.jsxs(Ze,{to:t.path,className:`\n                      flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors\n                      ${s?"border-blue-500 text-blue-600":"border-transparent text-pr-text-2 hover:text-pr-text-1 hover:border-pr-surface-3"}\n                    `,children:[Ns.jsx(r,{className:"h-5 w-5"}),Ns.jsx("span",{children:t.name})]},t.name)})})})}),Ns.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Ns.jsx(Fe,{})})]})})}function zW(){const e=ke(),[t,r]=u.useState([]),[s,a]=u.useState(!0),[n,i]=u.useState("");u.useEffect(()=>{(async()=>{try{a(!0);const e=await kW.listCoupons();r(e.coupons||[])}catch(e){console.error("Failed to fetch coupons:",e),i("Failed to load coupons. Please try again later.")}finally{a(!1)}})()},[]);const l=e=>{const t="px-2 py-1 rounded-full text-xs font-medium";switch(e){case"active":return`${t} bg-green-100 text-green-700`;case"expired":return`${t} bg-pr-surface-2 text-pr-text-1`;case"depleted":return`${t} bg-red-100 text-red-700`;default:return`${t} bg-blue-100 text-blue-700`}};return s?Ns.jsx("div",{className:"flex items-center justify-center h-64",children:Ns.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):n?Ns.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:Ns.jsxs("div",{className:"flex",children:[Ns.jsx("div",{className:"flex-shrink-0",children:Ns.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Ns.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),Ns.jsx("div",{className:"ml-3",children:Ns.jsx("p",{className:"text-sm text-red-700",children:n})})]})}):Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[Ns.jsxs("div",{children:[Ns.jsx("h1",{className:"text-2xl font-bold text-pr-text-1",children:"Coupons & Rewards"}),Ns.jsx("p",{className:"mt-1 text-sm text-pr-text-2",children:"Manage coupon codes and rewards for your campaigns"})]}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsxs(Oc,{variant:"outline",onClick:()=>e("/advertiser/coupons/analytics"),className:"flex items-center space-x-2",children:[Ns.jsx(_t,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Analytics"})]}),Ns.jsxs(Oc,{variant:"outline",onClick:()=>e("/advertiser/coupons/bulk"),className:"flex items-center space-x-2",children:[Ns.jsx(Rr,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Bulk Create"})]}),Ns.jsxs(Oc,{className:"flex items-center space-x-2",children:[Ns.jsx(Rr,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Create Coupon"})]})]})]}),Ns.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:Ns.jsxs("div",{className:"flex",children:[Ns.jsx("div",{className:"flex-shrink-0",children:Ns.jsx(Xt,{className:"h-5 w-5 text-blue-400"})}),Ns.jsxs("div",{className:"ml-3",children:[Ns.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"How Coupons Work"}),Ns.jsx("div",{className:"mt-2 text-sm text-blue-700",children:Ns.jsx("p",{children:"Coupons can be assigned to campaigns, drops, or leaderboard positions. When creators meet the conditions, they automatically receive the coupon code. Track redemptions and manage inventory from this dashboard."})})]})]})}),t.length>0?Ns.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:t.map(e=>Ns.jsxs(Ze,{to:`/advertiser/coupons/${e.id}`,className:"bg-pr-surface-card rounded-lg shadow-sm border border-pr-surface-3 p-6 hover:shadow-md transition-shadow",children:[Ns.jsxs("div",{className:"flex items-start justify-between",children:[Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:e.title}),Ns.jsx("p",{className:"mt-1 text-sm text-pr-text-2",children:e.description})]}),Ns.jsx("span",{className:l(e.status),children:e.status})]}),Ns.jsxs("div",{className:"mt-4 space-y-2",children:[Ns.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Reward"}),Ns.jsxs("span",{className:"font-medium text-pr-text-1",children:[e.value," ",e.value_unit]})]}),Ns.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Ns.jsx("span",{className:"text-pr-text-2",children:"Remaining"}),Ns.jsxs("span",{className:"font-medium text-pr-text-1",children:[e.quantity_remaining," / ",e.quantity_total]})]})]}),Ns.jsx("div",{className:"mt-4 pt-4 border-t border-pr-surface-3",children:Ns.jsxs("div",{className:"flex items-center space-x-4 text-xs text-pr-text-2",children:[Ns.jsxs("span",{className:"flex items-center space-x-1",children:[Ns.jsx(yt,{className:"h-3 w-3"}),Ns.jsxs("span",{children:["Expires ",new Date(e.end_date).toLocaleDateString()]})]}),e.assignments&&e.assignments.length>0&&Ns.jsxs("span",{className:"flex items-center space-x-1",children:[Ns.jsx(us,{className:"h-3 w-3"}),Ns.jsxs("span",{children:[e.assignments.length," assigned"]})]})]})})]},e.id))}):Ns.jsxs("div",{className:"text-center py-12 bg-pr-surface-card rounded-lg border border-pr-surface-3",children:[Ns.jsx(Xt,{className:"mx-auto h-12 w-12 text-gray-400"}),Ns.jsx("h3",{className:"mt-2 text-sm font-medium text-pr-text-1",children:"No coupons yet"}),Ns.jsx("p",{className:"mt-1 text-sm text-pr-text-2",children:"Get started by creating your first coupon."}),Ns.jsx("div",{className:"mt-6",children:Ns.jsxs(Oc,{className:"flex items-center space-x-2",children:[Ns.jsx(Rr,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Create Coupon"})]})})]})]})}function UW(){const{id:e}=Ce(),t=ke(),[r,s]=u.useState(null),[a,n]=u.useState(!0),[i,l]=u.useState("");u.useEffect(()=>{(async()=>{if(!e)return l("No coupon ID provided"),void n(!1);try{n(!0);const t=await kW.getCoupon(e);if(!t)return void l("Coupon not found");s(t)}catch(t){console.error("Failed to fetch coupon:",t),l("Failed to load coupon details. Please try again later.")}finally{n(!1)}})()},[e]);if(a)return Ns.jsx("div",{className:"flex items-center justify-center h-64",children:Ns.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})});if(i||!r)return Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs(Oc,{variant:"outline",onClick:()=>t(-1),children:[Ns.jsx(ut,{className:"mr-2 h-4 w-4"}),"Back"]}),Ns.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:Ns.jsx("p",{className:"text-sm text-red-700",children:i||"Coupon not found"})})]});const{coupon:o}=r,c=o.quantity_total>0?(o.quantity_total-o.quantity_remaining)/o.quantity_total*100:0;return Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-4",children:[Ns.jsx(Oc,{variant:"outline",size:"icon",onClick:()=>t(-1),children:Ns.jsx(ut,{className:"h-4 w-4"})}),Ns.jsxs("div",{children:[Ns.jsx("h1",{className:"text-2xl font-bold text-pr-text-1",children:o.title}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mt-1",children:o.description})]})]}),Ns.jsx("span",{className:(e=>{const t="px-3 py-1 rounded-full text-sm font-medium";switch(e){case"active":return`${t} bg-green-100 text-green-700`;case"expired":return`${t} bg-pr-surface-2 text-pr-text-1`;case"depleted":return`${t} bg-red-100 text-red-700`;default:return`${t} bg-blue-100 text-blue-700`}})(o.status),children:o.status})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg shadow-sm border border-pr-surface-3 p-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Xt,{className:"h-5 w-5 text-blue-600"}),Ns.jsx("span",{className:"text-sm font-medium text-pr-text-2",children:"Reward Value"})]}),Ns.jsxs("p",{className:"mt-2 text-2xl font-bold text-pr-text-1",children:[o.value," ",o.value_unit]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg shadow-sm border border-pr-surface-3 p-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Or,{className:"h-5 w-5 text-green-600"}),Ns.jsx("span",{className:"text-sm font-medium text-pr-text-2",children:"Remaining"})]}),Ns.jsxs("p",{className:"mt-2 text-2xl font-bold text-pr-text-1",children:[o.quantity_remaining," / ",o.quantity_total]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg shadow-sm border border-pr-surface-3 p-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(as,{className:"h-5 w-5 text-purple-600"}),Ns.jsx("span",{className:"text-sm font-medium text-pr-text-2",children:"Redemption Rate"})]}),Ns.jsxs("p",{className:"mt-2 text-2xl font-bold text-pr-text-1",children:[c.toFixed(1),"%"]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg shadow-sm border border-pr-surface-3 p-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(us,{className:"h-5 w-5 text-orange-600"}),Ns.jsx("span",{className:"text-sm font-medium text-pr-text-2",children:"Assignments"})]}),Ns.jsx("p",{className:"mt-2 text-2xl font-bold text-pr-text-1",children:o.assignments?.length||0})]})]}),o.assignments&&o.assignments.length>0&&Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg shadow-sm border border-pr-surface-3",children:[Ns.jsxs("div",{className:"p-6 border-b border-pr-surface-3",children:[Ns.jsx("h2",{className:"text-lg font-semibold text-pr-text-1",children:"Assignments"}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mt-1",children:"Where this coupon is currently assigned"})]}),Ns.jsx("div",{className:"divide-y divide-gray-200",children:o.assignments.map(e=>Ns.jsxs("div",{className:"p-6 flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-medium text-pr-text-1",children:e.target_label}),Ns.jsxs("p",{className:"text-sm text-pr-text-2 mt-1",children:["Type: ",e.target_type,"  Assigned ",new Date(e.assigned_at).toLocaleDateString()]})]}),Ns.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("active"===e.status?"bg-green-100 text-green-700":"bg-pr-surface-2 text-pr-text-1"),children:e.status})]},e.id))})]}),o.redemptions&&o.redemptions.length>0&&Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg shadow-sm border border-pr-surface-3",children:[Ns.jsxs("div",{className:"p-6 border-b border-pr-surface-3",children:[Ns.jsx("h2",{className:"text-lg font-semibold text-pr-text-1",children:"Recent Redemptions"}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mt-1",children:"Latest coupon redemptions by creators"})]}),Ns.jsx("div",{className:"overflow-x-auto",children:Ns.jsxs("table",{className:"w-full",children:[Ns.jsx("thead",{className:"bg-pr-surface-2",children:Ns.jsxs("tr",{children:[Ns.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-pr-text-2 uppercase",children:"User"}),Ns.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-pr-text-2 uppercase",children:"Reward"}),Ns.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-pr-text-2 uppercase",children:"Redeemed"}),Ns.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-pr-text-2 uppercase",children:"Status"})]})}),Ns.jsx("tbody",{className:"bg-pr-surface-card divide-y divide-gray-200",children:o.redemptions.slice(0,10).map(e=>Ns.jsxs("tr",{children:[Ns.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-pr-text-1",children:e.user_name||"Unknown User"}),Ns.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-pr-text-1",children:[e.reward_value," ",e.reward_unit]}),Ns.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-pr-text-2",children:new Date(e.redeemed_at).toLocaleDateString()}),Ns.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ns.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("completed"===e.status?"bg-green-100 text-green-700":"bg-pr-surface-2 text-pr-text-1"),children:e.status})})]},e.id))})]})})]}),o.conditions&&Object.keys(o.conditions).length>0&&Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg shadow-sm border border-pr-surface-3 p-6",children:[Ns.jsx("h2",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Conditions"}),Ns.jsx("div",{className:"space-y-2",children:Object.entries(o.conditions).map(([e,t])=>Ns.jsxs("div",{className:"flex justify-between text-sm",children:[Ns.jsx("span",{className:"text-pr-text-2",children:e.replace(/_/g," ")}),Ns.jsx("span",{className:"font-medium text-pr-text-1",children:String(t)})]},e))})]})]})}const BW=u.createContext(void 0);function qW({children:e}){const[t,r]=u.useState([]),s=u.useCallback(e=>{r(t=>t.filter(t=>t.id!==e))},[]),a=u.useCallback(({title:e,description:t,type:a="default",duration:n=5e3})=>{const i=Math.random().toString(36).substr(2,9);return r(r=>[...r,{id:i,title:e,description:t,type:a}]),n&&setTimeout(()=>s(i),n),i},[s]),n=u.useMemo(()=>({toasts:t,toast:a,dismissToast:s}),[t,a,s]);return Ns.jsxs(BW.Provider,{value:n,children:[e,Ns.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(e=>Ns.jsx(WW,{id:e.id,title:e.title,description:e.description,type:e.type,onDismiss:()=>s(e.id)},e.id))})]})}const WW=({title:e,description:t,type:r="default",onDismiss:s})=>Ns.jsx("div",{className:`p-4 rounded-md shadow-lg max-w-sm ${{default:"bg-pr-surface-card border border-pr-surface-3",destructive:"bg-red-50 border-red-200 text-red-700",success:"bg-green-50 border-green-200 text-green-700",warning:"bg-yellow-50 border-yellow-200 text-yellow-700",info:"bg-blue-50 border-blue-200 text-blue-700"}[r]}`,children:Ns.jsxs("div",{className:"flex justify-between items-start",children:[Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("h3",{className:"font-medium",children:e}),t&&Ns.jsx("p",{className:"text-sm mt-1",children:t})]}),Ns.jsx("button",{onClick:s,className:"ml-4 text-pr-text-2 hover:text-pr-text-1","aria-label":"Dismiss",children:Ns.jsx(hs,{className:"h-4 w-4"})})]})}),KW=()=>{const e=u.useContext(BW);if(!e)throw new Error("useToast must be used within a ToastProvider");return e};function VW(){const e=ke(),{toast:t}=KW(),[r,s]=u.useState([]),[a,n]=u.useState(!1),i=()=>{const e=new Date,t=new Date(e.getTime()+2592e6);s([...r,{id:`temp-${Date.now()}`,title:"",description:"",reward_type:"coupon",value:10,value_unit:"percentage",quantity_total:100,start_date:e.toISOString().split("T")[0],end_date:t.toISOString().split("T")[0]}])},l=(e,t,a)=>{s(r.map(r=>r.id===e?{...r,[t]:a}:r))};return Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-4",children:[Ns.jsx(Oc,{variant:"outline",size:"icon",onClick:()=>e(-1),children:Ns.jsx(ut,{className:"h-4 w-4"})}),Ns.jsxs("div",{children:[Ns.jsx("h1",{className:"text-2xl font-bold text-pr-text-1",children:"Bulk Coupon Creation"}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mt-1",children:"Create multiple coupons at once or import from CSV"})]})]}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsxs(Oc,{variant:"outline",onClick:()=>{const e=["Title,Description,Reward Type,Value,Value Unit,Quantity,Start Date,End Date","25% Off Premium,Discount on premium subscription,coupon,25,percentage,100,2025-01-01,2025-12-31","100 Bonus Gems,Free gems reward,credit,100,gems,50,2025-01-01,2025-06-30","Creator Merch Pack,Exclusive merchandise,giveaway,1,item,25,2025-01-01,2025-03-31"].join("\n"),t=new Blob([e],{type:"text/csv"}),r=URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download="coupon_template.csv",s.click(),URL.revokeObjectURL(r)},children:[Ns.jsx(qt,{className:"h-4 w-4 mr-2"}),"Download Template"]}),Ns.jsxs("label",{children:[Ns.jsx("input",{type:"file",accept:".csv",className:"hidden",onChange:e=>{const a=e.target.files?.[0];if(!a)return;const n=new FileReader;n.onload=e=>{const a=e.target?.result,n=a.split("\n").slice(1).filter(e=>e.trim()).map((e,t)=>{const[r,s,a,n,i,l,o,c]=e.split(",").map(e=>e.trim());return{id:`imported-${Date.now()}-${t}`,title:r,description:s,reward_type:a,value:parseFloat(n)||0,value_unit:i,quantity_total:parseInt(l)||0,start_date:o,end_date:c}});s([...r,...n]),t({title:"Import Successful",description:`Imported ${n.length} coupon(s) from CSV.`})},n.readAsText(a)}}),Ns.jsxs(Oc,{variant:"outline",as:"span",children:[Ns.jsx(cs,{className:"h-4 w-4 mr-2"}),"Import CSV"]})]})]})]}),Ns.jsxs("div",{className:"flex justify-between items-center bg-blue-50 border border-blue-200 rounded-lg p-4",children:[Ns.jsxs("div",{className:"text-sm text-blue-700",children:[r.length," coupon(s) ready to create"]}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsxs(Oc,{onClick:i,variant:"outline",children:[Ns.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Add Coupon"]}),Ns.jsx(Oc,{onClick:async()=>{if(0===r.length)return void t({title:"No Coupons",description:"Please add at least one coupon to create."});const s=r.filter(e=>!e.title||e.value<=0||e.quantity_total<=0);if(s.length>0)t({title:"Validation Error",description:`${s.length} coupon(s) have invalid data. Please check title, value, and quantity.`});else{n(!0);try{let s=0,n=0;for(const e of r)try{await kW.createCoupon({title:e.title,description:e.description,reward_type:e.reward_type,value:e.value,value_unit:e.value_unit,quantity_total:e.quantity_total,start_date:e.start_date,end_date:e.end_date}),s++}catch(a){console.error(`Failed to create coupon: ${e.title}`,a),n++}t({title:"Bulk Creation Complete",description:`Successfully created ${s} coupon(s). ${n>0?`${n} failed.`:""}`}),s>0&&e("/advertiser/coupons")}catch(a){console.error("Bulk creation error:",a),t({title:"Error",description:"Failed to create coupons. Please try again."})}finally{n(!1)}}},disabled:a||0===r.length,className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:a?"Creating...":`Create ${r.length} Coupon(s)`})]})]}),r.length>0?Ns.jsx("div",{className:"space-y-4",children:r.map((e,t)=>Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg border border-pr-surface-3 p-6",children:[Ns.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ns.jsxs("h3",{className:"text-lg font-semibold text-pr-text-1",children:["Coupon #",t+1]}),Ns.jsxs("div",{className:"flex space-x-2",children:[Ns.jsx(Oc,{variant:"outline",size:"sm",onClick:()=>(e=>{s([...r,{...e,id:`temp-${Date.now()}`,title:`${e.title} (Copy)`}])})(e),children:Ns.jsx(Lt,{className:"h-4 w-4"})}),Ns.jsx(Oc,{variant:"outline",size:"sm",onClick:()=>{return t=e.id,void s(r.filter(e=>e.id!==t));var t},children:Ns.jsx(ss,{className:"h-4 w-4"})})]})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-1",children:"Title *"}),Ns.jsx("input",{type:"text",value:e.title,onChange:t=>l(e.id,"title",t.target.value),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2",placeholder:"e.g. 25% Off Premium"})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-1",children:"Reward Type"}),Ns.jsxs("select",{value:e.reward_type,onChange:t=>l(e.id,"reward_type",t.target.value),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2",children:[Ns.jsx("option",{value:"coupon",children:"Coupon"}),Ns.jsx("option",{value:"giveaway",children:"Giveaway"}),Ns.jsx("option",{value:"credit",children:"Credit"})]})]}),Ns.jsxs("div",{className:"md:col-span-2",children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-1",children:"Description"}),Ns.jsx("textarea",{value:e.description,onChange:t=>l(e.id,"description",t.target.value),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2",rows:2,placeholder:"Describe the reward..."})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-1",children:"Value *"}),Ns.jsx("input",{type:"number",value:e.value,onChange:t=>l(e.id,"value",parseFloat(t.target.value)),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2",min:"0"})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-1",children:"Unit"}),Ns.jsxs("select",{value:e.value_unit,onChange:t=>l(e.id,"value_unit",t.target.value),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2",children:[Ns.jsx("option",{value:"percentage",children:"%"}),Ns.jsx("option",{value:"usd",children:"USD"}),Ns.jsx("option",{value:"gems",children:"Gems"}),Ns.jsx("option",{value:"keys",children:"Keys"}),Ns.jsx("option",{value:"item",children:"Item"})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-1",children:"Quantity *"}),Ns.jsx("input",{type:"number",value:e.quantity_total,onChange:t=>l(e.id,"quantity_total",parseInt(t.target.value)),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2",min:"1"})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-1",children:"Start Date"}),Ns.jsx("input",{type:"date",value:e.start_date,onChange:t=>l(e.id,"start_date",t.target.value),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2"})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-1",children:"End Date"}),Ns.jsx("input",{type:"date",value:e.end_date,onChange:t=>l(e.id,"end_date",t.target.value),className:"w-full rounded-lg border border-pr-surface-3 px-3 py-2"})]})]})]},e.id))}):Ns.jsxs("div",{className:"text-center py-12 bg-pr-surface-card rounded-lg border border-pr-surface-3",children:[Ns.jsx(Rr,{className:"mx-auto h-12 w-12 text-gray-400"}),Ns.jsx("h3",{className:"mt-2 text-sm font-medium text-pr-text-1",children:"No coupons yet"}),Ns.jsx("p",{className:"mt-1 text-sm text-pr-text-2",children:"Get started by adding a coupon or importing from CSV."}),Ns.jsx("div",{className:"mt-6 flex justify-center space-x-3",children:Ns.jsxs(Oc,{onClick:i,children:[Ns.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Add Coupon"]})})]})]})}function HW(){const e=ke(),[t,r]=u.useState(null),[s,a]=u.useState(!0),[n,i]=u.useState("30d");u.useEffect(()=>{l()},[n]);const l=async()=>{try{a(!0);r({total_coupons:15,total_assigned:342,total_redeemed:187,redemption_rate:54.7,total_value_distributed:4235.5,top_performing_coupons:[{id:"1",title:"25% Off Premium",assignments:89,redemptions:67,redemption_rate:75.3},{id:"2",title:"100 Bonus Gems",assignments:124,redemptions:58,redemption_rate:46.8},{id:"3",title:"Creator Merch Pack",assignments:67,redemptions:42,redemption_rate:62.7}],assignments_by_source:{"Drop Completion":156,Leaderboard:98,"Content Engagement":88},redemptions_over_time:[{date:"2025-01-01",count:12},{date:"2025-01-02",count:18},{date:"2025-01-03",count:15},{date:"2025-01-04",count:22},{date:"2025-01-05",count:19}]})}catch(e){console.error("Failed to fetch analytics:",e)}finally{a(!1)}};return s?Ns.jsx("div",{className:"flex items-center justify-center h-64",children:Ns.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):t?Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-4",children:[Ns.jsx(Oc,{variant:"outline",size:"icon",onClick:()=>e(-1),children:Ns.jsx(ut,{className:"h-4 w-4"})}),Ns.jsxs("div",{children:[Ns.jsx("h1",{className:"text-2xl font-bold text-pr-text-1",children:"Coupon Analytics"}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mt-1",children:"Track performance and ROI of your coupon campaigns"})]})]}),Ns.jsxs("div",{className:"flex space-x-3",children:[Ns.jsxs("select",{value:n,onChange:e=>i(e.target.value),className:"rounded-lg border border-pr-surface-3 px-4 py-2",children:[Ns.jsx("option",{value:"7d",children:"Last 7 Days"}),Ns.jsx("option",{value:"30d",children:"Last 30 Days"}),Ns.jsx("option",{value:"90d",children:"Last 90 Days"}),Ns.jsx("option",{value:"all",children:"All Time"})]}),Ns.jsxs(Oc,{variant:"outline",onClick:()=>{if(!t)return;const e=["Metric,Value",`Total Coupons,${t.total_coupons}`,`Total Assigned,${t.total_assigned}`,`Total Redeemed,${t.total_redeemed}`,`Redemption Rate,${t.redemption_rate}%`,`Total Value Distributed,$${t.total_value_distributed}`,"","Top Performing Coupons","Title,Assignments,Redemptions,Redemption Rate",...t.top_performing_coupons.map(e=>`${e.title},${e.assignments},${e.redemptions},${e.redemption_rate}%`)].join("\n"),r=new Blob([e],{type:"text/csv"}),s=URL.createObjectURL(r),a=document.createElement("a");a.href=s,a.download=`coupon-analytics-${(new Date).toISOString().split("T")[0]}.csv`,a.click(),URL.revokeObjectURL(s)},children:[Ns.jsx(qt,{className:"h-4 w-4 mr-2"}),"Export Report"]})]})]}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg shadow-sm border border-pr-surface-3 p-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[Ns.jsx(Xt,{className:"h-5 w-5 text-purple-600"}),Ns.jsx("span",{className:"text-sm font-medium text-pr-text-2",children:"Total Coupons"})]}),Ns.jsx("p",{className:"text-3xl font-bold text-pr-text-1",children:t.total_coupons})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg shadow-sm border border-pr-surface-3 p-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[Ns.jsx(us,{className:"h-5 w-5 text-blue-600"}),Ns.jsx("span",{className:"text-sm font-medium text-pr-text-2",children:"Assigned"})]}),Ns.jsx("p",{className:"text-3xl font-bold text-pr-text-1",children:t.total_assigned})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg shadow-sm border border-pr-surface-3 p-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[Ns.jsx(as,{className:"h-5 w-5 text-green-600"}),Ns.jsx("span",{className:"text-sm font-medium text-pr-text-2",children:"Redeemed"})]}),Ns.jsx("p",{className:"text-3xl font-bold text-pr-text-1",children:t.total_redeemed})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg shadow-sm border border-pr-surface-3 p-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[Ns.jsx(yt,{className:"h-5 w-5 text-orange-600"}),Ns.jsx("span",{className:"text-sm font-medium text-pr-text-2",children:"Redemption Rate"})]}),Ns.jsxs("p",{className:"text-3xl font-bold text-pr-text-1",children:[t.redemption_rate,"%"]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg shadow-sm border border-pr-surface-3 p-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[Ns.jsx(Bt,{className:"h-5 w-5 text-emerald-600"}),Ns.jsx("span",{className:"text-sm font-medium text-pr-text-2",children:"Value Distributed"})]}),Ns.jsxs("p",{className:"text-3xl font-bold text-pr-text-1",children:["$",t.total_value_distributed.toFixed(0)]})]})]}),Ns.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg shadow-sm border border-pr-surface-3 p-6",children:[Ns.jsx("h2",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Top Performing Coupons"}),Ns.jsx("div",{className:"space-y-4",children:t.top_performing_coupons.map((e,t)=>Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-purple-100 text-purple-600 font-bold text-sm",children:t+1}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-medium text-pr-text-1",children:e.title}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:[e.redemptions," / ",e.assignments," redeemed"]})]})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsxs("p",{className:"text-lg font-bold text-green-600",children:[e.redemption_rate,"%"]}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"rate"})]})]},e.id))})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg shadow-sm border border-pr-surface-3 p-6",children:[Ns.jsx("h2",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Assignments by Source"}),Ns.jsx("div",{className:"space-y-4",children:Object.entries(t.assignments_by_source).map(([e,r])=>{const s=(r/Object.values(t.assignments_by_source).reduce((e,t)=>e+t,0)*100).toFixed(1);return Ns.jsxs("div",{children:[Ns.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[Ns.jsx("span",{className:"font-medium text-pr-text-1",children:e}),Ns.jsxs("span",{className:"text-pr-text-2",children:[r," (",s,"%)"]})]}),Ns.jsx("div",{className:"w-full bg-pr-surface-3 rounded-full h-2",children:Ns.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all",style:{width:`${s}%`}})})]},e)})})]})]}),Ns.jsxs("div",{className:"bg-pr-surface-card rounded-lg shadow-sm border border-pr-surface-3 p-6",children:[Ns.jsx("h2",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Redemptions Over Time"}),Ns.jsx("div",{className:"h-64 flex items-end space-x-2",children:t.redemptions_over_time.map((e,r)=>{const s=Math.max(...t.redemptions_over_time.map(e=>e.count)),a=e.count/s*100;return Ns.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[Ns.jsx("div",{className:"w-full bg-gradient-to-t from-purple-500 to-pink-500 rounded-t transition-all hover:opacity-80",style:{height:`${a}%`},title:`${e.count} redemptions`}),Ns.jsx("p",{className:"text-xs text-pr-text-2 mt-2",children:new Date(e.date).getDate()})]},r)})})]}),Ns.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-6",children:[Ns.jsx("h2",{className:"text-lg font-semibold text-pr-text-1 mb-3",children:" Insights & Recommendations"}),Ns.jsxs("ul",{className:"space-y-2 text-sm text-pr-text-1",children:[Ns.jsxs("li",{className:"flex items-start space-x-2",children:[Ns.jsx("span",{className:"text-green-600 mt-0.5",children:""}),Ns.jsxs("span",{children:["Your redemption rate of ",t.redemption_rate,"% is above the industry average of 45%."]})]}),Ns.jsxs("li",{className:"flex items-start space-x-2",children:[Ns.jsx("span",{className:"text-blue-600 mt-0.5",children:""}),Ns.jsx("span",{children:"Drop completion rewards have the highest assignment rate. Consider creating more drop-based campaigns."})]}),Ns.jsxs("li",{className:"flex items-start space-x-2",children:[Ns.jsx("span",{className:"text-orange-600 mt-0.5",children:"!"}),Ns.jsx("span",{children:"Consider sending reminder emails for coupons expiring soon to boost redemption rates."})]})]})]})]}):Ns.jsx("div",{children:"Failed to load analytics"})}const GW=u.createContext(null);function YW({value:e,defaultValue:t,onValueChange:r,children:s,className:a}){const[n,i]=u.useState(t),l=e??n,o=u.useCallback(e=>{i(e),r?.(e)},[r]),c=u.useMemo(()=>({value:l,onSelect:o}),[l,o]);return Ns.jsx(GW.Provider,{value:c,children:Ns.jsx("div",{className:a,children:s})})}function JW({children:e,className:t}){return Ns.jsx("div",{role:"tablist",className:t,children:e})}function ZW({value:e,children:t,className:r}){const s=u.useContext(GW);if(!s)throw new Error("TabsTrigger must be used within Tabs");const a=s.value===e;return Ns.jsx("button",{type:"button",role:"tab","data-state":a?"active":"inactive","aria-selected":a,className:Ec("inline-flex items-center border-b-2 border-transparent px-3 py-2 text-sm font-medium transition",a?"border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700",r),onClick:()=>s.onSelect(e),children:t})}function QW({value:e,children:t,className:r}){const s=u.useContext(GW);if(!s)throw new Error("TabsContent must be used within Tabs");const a=s.value===e;return Ns.jsx("div",{role:"tabpanel","data-state":a?"active":"inactive",className:Ec(a?"block":"hidden",r),children:a?t:null})}function XW(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function eK(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const tK=6048e5;let rK={};function sK(){return rK}function aK(e,t){const r=sK(),s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=XW(e),n=a.getDay(),i=(n<s?7:0)+n-s;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function nK(e){return aK(e,{weekStartsOn:1})}function iK(e){const t=XW(e),r=t.getFullYear(),s=eK(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=nK(s),n=eK(e,0);n.setFullYear(r,0,4),n.setHours(0,0,0,0);const i=nK(n);return t.getTime()>=a.getTime()?r+1:t.getTime()>=i.getTime()?r:r-1}function lK(e){const t=XW(e);return t.setHours(0,0,0,0),t}function oK(e){const t=XW(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function cK(e){if(!(t=e,t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)||"number"==typeof e))return!1;var t;const r=XW(e);return!isNaN(Number(r))}const dK={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function uK(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const mK={date:uK({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:uK({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:uK({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},pK={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function hK(e){return(t,r)=>{let s;if("formatting"===(r?.context?String(r.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=r?.width?String(r.width):t;s=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=r?.width?String(r.width):e.defaultWidth;s=e.values[a]||e.values[t]}return s[e.argumentCallback?e.argumentCallback(t):t]}}function xK(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],n=t.match(a);if(!n)return null;const i=n[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],o=Array.isArray(l)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r;return}(l,e=>e.test(i)):function(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r;return}(l,e=>e.test(i));let c;c=e.valueCallback?e.valueCallback(o):o,c=r.valueCallback?r.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}var fK;const gK={code:"en-US",formatDistance:(e,t,r)=>{let s;const a=dK[e];return s="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s},formatLong:mK,formatRelative:(e,t,r,s)=>pK[e],localize:{ordinalNumber:(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:hK({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:hK({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:hK({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:hK({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:hK({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(fK={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const r=e.match(fK.matchPattern);if(!r)return null;const s=r[0],a=e.match(fK.parsePattern);if(!a)return null;let n=fK.valueCallback?fK.valueCallback(a[0]):a[0];return n=t.valueCallback?t.valueCallback(n):n,{value:n,rest:e.slice(s.length)}}),era:xK({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:xK({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:xK({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:xK({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:xK({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function bK(e){const t=XW(e),r=function(e,t){const r=lK(e),s=lK(t),a=+r-oK(r),n=+s-oK(s);return Math.round((a-n)/864e5)}(t,function(e){const t=XW(e),r=eK(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}(t));return r+1}function vK(e){const t=XW(e),r=+nK(t)-+function(e){const t=iK(e),r=eK(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),nK(r)}(t);return Math.round(r/tK)+1}function yK(e,t){const r=XW(e),s=r.getFullYear(),a=sK(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,i=eK(e,0);i.setFullYear(s+1,0,n),i.setHours(0,0,0,0);const l=aK(i,t),o=eK(e,0);o.setFullYear(s,0,n),o.setHours(0,0,0,0);const c=aK(o,t);return r.getTime()>=l.getTime()?s+1:r.getTime()>=c.getTime()?s:s-1}function jK(e,t){const r=XW(e),s=+aK(r,t)-+function(e,t){const r=sK(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=yK(e,t),n=eK(e,0);return n.setFullYear(a,0,s),n.setHours(0,0,0,0),aK(n,t)}(r,t);return Math.round(s/tK)+1}function wK(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const NK={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return wK("yy"===t?s%100:s,t.length)},M(e,t){const r=e.getMonth();return"M"===t?String(r+1):wK(r+1,2)},d:(e,t)=>wK(e.getDate(),t.length),a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>wK(e.getHours()%12||12,t.length),H:(e,t)=>wK(e.getHours(),t.length),m:(e,t)=>wK(e.getMinutes(),t.length),s:(e,t)=>wK(e.getSeconds(),t.length),S(e,t){const r=t.length,s=e.getMilliseconds();return wK(Math.trunc(s*Math.pow(10,r-3)),t.length)}},_K="midnight",kK="noon",SK="morning",CK="afternoon",OK="evening",EK="night",PK={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if("yo"===t){const t=e.getFullYear(),s=t>0?t:1-t;return r.ordinalNumber(s,{unit:"year"})}return NK.y(e,t)},Y:function(e,t,r,s){const a=yK(e,s),n=a>0?a:1-a;if("YY"===t){return wK(n%100,2)}return"Yo"===t?r.ordinalNumber(n,{unit:"year"}):wK(n,t.length)},R:function(e,t){return wK(iK(e),t.length)},u:function(e,t){return wK(e.getFullYear(),t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return wK(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return wK(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return NK.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return wK(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=jK(e,s);return"wo"===t?r.ordinalNumber(a,{unit:"week"}):wK(a,t.length)},I:function(e,t,r){const s=vK(e);return"Io"===t?r.ordinalNumber(s,{unit:"week"}):wK(s,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):NK.d(e,t)},D:function(e,t,r){const s=bK(e);return"Do"===t?r.ordinalNumber(s,{unit:"dayOfYear"}):wK(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),n=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(n);case"ee":return wK(n,2);case"eo":return r.ordinalNumber(n,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),n=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(n);case"cc":return wK(n,t.length);case"co":return r.ordinalNumber(n,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=0===s?7:s;switch(t){case"i":return String(a);case"ii":return wK(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(a=12===s?kK:0===s?_K:s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(a=s>=17?OK:s>=12?CK:s>=4?SK:EK,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return NK.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):NK.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return"Ko"===t?r.ordinalNumber(s,{unit:"hour"}):wK(s,t.length)},k:function(e,t,r){let s=e.getHours();return 0===s&&(s=24),"ko"===t?r.ordinalNumber(s,{unit:"hour"}):wK(s,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):NK.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):NK.s(e,t)},S:function(e,t){return NK.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(0===s)return"Z";switch(t){case"X":return AK(s);case"XXXX":case"XX":return MK(s);default:return MK(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return AK(s);case"xxxx":case"xx":return MK(s);default:return MK(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+TK(s,":");default:return"GMT"+MK(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+TK(s,":");default:return"GMT"+MK(s,":")}},t:function(e,t,r){return wK(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,r){return wK(e.getTime(),t.length)}};function TK(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),n=s%60;return 0===n?r+String(a):r+String(a)+t+wK(n,2)}function AK(e,t){if(e%60==0){return(e>0?"-":"+")+wK(Math.abs(e)/60,2)}return MK(e,t)}function MK(e,t=""){const r=e>0?"-":"+",s=Math.abs(e);return r+wK(Math.trunc(s/60),2)+t+wK(s%60,2)}const DK=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},IK=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},RK={p:IK,P:(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return DK(e,t);let n;switch(s){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",DK(s,t)).replace("{{time}}",IK(a,t))}},$K=/^D+$/,LK=/^Y+$/,FK=["D","DD","YY","YYYY"];const zK=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,UK=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,BK=/^'([^]*?)'?$/,qK=/''/g,WK=/[a-zA-Z]/;function KK(e,t,r){const s=sK(),a=s.locale??gK,n=s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,i=s.weekStartsOn??s.locale?.options?.weekStartsOn??0,l=XW(e);if(!cK(l))throw new RangeError("Invalid time value");let o=t.match(UK).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,RK[t])(e,a.formatLong)}return e}).join("").match(zK).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:VK(e)};if(PK[t])return{isToken:!0,value:e};if(t.match(WK))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});a.localize.preprocessor&&(o=a.localize.preprocessor(l,o));const c={firstWeekContainsDate:n,weekStartsOn:i,locale:a};return o.map(r=>{if(!r.isToken)return r.value;const s=r.value;(function(e){return LK.test(e)}(s)||function(e){return $K.test(e)}(s))&&function(e,t,r){const s=function(e,t,r){const s="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,r);if(console.warn(s),FK.includes(e))throw new RangeError(s)}(s,t,String(e));return(0,PK[s[0]])(l,s,a.localize,c)}).join("")}function VK(e){const t=e.match(BK);return t?t[1].replace(qK,"'"):e}const HK=u.forwardRef(({className:e="",...t},r)=>Ns.jsx("input",{ref:r,className:`block w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-400 focus:border-orange-500 focus:outline-none focus:ring-1 focus:ring-orange-500 disabled:cursor-not-allowed disabled:bg-gray-100 disabled:text-gray-500 ${e}`.trim(),...t}));function GK({isOpen:e,onClose:t,onSubmit:r,isSubmitting:s}){const[a,n]=u.useState(1e3);if(!e)return null;return Ns.jsx(Us,{isOpen:e,onClose:t,maxWidth:"md",children:Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsx("div",{className:"flex items-center justify-between",children:Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Add Funds to Campaign"})}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Amount (USD)"}),Ns.jsx(HK,{type:"number",min:"1",value:a,onChange:e=>n(Number(e.target.value)),placeholder:"Enter amount"})]}),Ns.jsxs("div",{className:"flex justify-end space-x-3",children:[Ns.jsx(Oc,{variant:"outline",onClick:t,disabled:s,children:"Cancel"}),Ns.jsx(Oc,{onClick:async()=>{await r(a)},disabled:s||a<=0,children:s?"Adding...":"Add Funds"})]})]})]})})}HK.displayName="Input";const YK=u.forwardRef(({className:e="",...t},r)=>Ns.jsx("textarea",{ref:r,className:`block w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 disabled:cursor-not-allowed disabled:bg-gray-100 ${e}`,...t}));YK.displayName="Textarea";const JK=u.createContext(null),ZK=()=>{const e=u.useContext(JK);if(!e)throw new Error("Select components must be used within a Select");return e};function QK({value:e,defaultValue:t,onValueChange:r,children:s}){const[a,n]=React.useState(!1),[i,l]=React.useState(t),[o,c]=React.useState([]),d=e??i,u=React.useCallback(e=>{l(e),r?.(e)},[r]),m=React.useCallback(e=>(c(t=>{const r=t.findIndex(t=>t.value===e.value);if(r>=0){const s=[...t];return s[r]=e,s}return[...t,e]}),()=>{c(t=>t.filter(t=>t.value!==e.value))}),[]);return Ns.jsx(JK.Provider,{value:{value:d,open:a,setOpen:n,onValueChange:u,registerItem:m,items:o},children:Ns.jsx("div",{className:"relative inline-block w-full",children:s})})}const XK=u.forwardRef(({className:e="",children:t,...r},s)=>{const{setOpen:a,open:n}=ZK();return Ns.jsxs("button",{type:"button",ref:s,className:`flex w-full items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-2 text-left text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 ${e}`,"aria-haspopup":"listbox","aria-expanded":n,onClick:()=>a(!n),...r,children:[t,Ns.jsx("svg",{className:"ml-2 h-4 w-4 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:Ns.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.7a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0L5.25 8.29a.75.75 0 01-.02-1.08z",clipRule:"evenodd"})})]})});function eV({placeholder:e}){const{value:t,items:r}=ZK(),s=r.find(e=>e.value===t);return Ns.jsx("span",{className:"flex-1 truncate text-sm text-gray-900",children:s?s.label:e??"Select an option"})}function tV({className:e="",children:t,...r}){const{open:s}=ZK();return s?Ns.jsx("div",{role:"listbox",className:`absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md border border-gray-200 bg-white py-1 shadow-lg focus:outline-none ${e}`,...r,children:t}):null}XK.displayName="SelectTrigger";const rV=u.forwardRef(({className:e="",children:t,value:r,...s},a)=>{const{value:n,onValueChange:i,setOpen:l,registerItem:o}=ZK();React.useEffect(()=>o({value:r,label:t}),[t,o,r]);const c=n===r,d=()=>{i(r),l(!1)};return Ns.jsx("div",{ref:a,role:"option","aria-selected":c,className:`flex cursor-pointer items-center px-3 py-2 text-sm text-gray-900 hover:bg-gray-100 ${c?"bg-gray-100 font-medium":""} ${e}`,onClick:d,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),d())},tabIndex:0,...s,children:t})});function sV({isOpen:e,onClose:t,onSubmit:r,isSubmitting:s}){const[a,n]=u.useState({title:"",description:"",platform:"instagram",media_url:""});if(!e)return null;return Ns.jsx(Us,{isOpen:e,onClose:t,maxWidth:"md",showCloseButton:!1,children:Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Add Campaign Content"}),Ns.jsx("button",{onClick:t,className:"text-gray-400 hover:text-pr-text-2 transition-colors",children:Ns.jsx(hs,{className:"w-5 h-5"})})]}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Title *"}),Ns.jsx(HK,{value:a.title,onChange:e=>n({...a,title:e.target.value}),placeholder:"Content title"})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Platform *"}),Ns.jsxs(QK,{value:a.platform,onValueChange:e=>n({...a,platform:e}),children:[Ns.jsx(XK,{children:Ns.jsx(eV,{})}),Ns.jsxs(tV,{children:[Ns.jsx(rV,{value:"instagram",children:"Instagram"}),Ns.jsx(rV,{value:"tiktok",children:"TikTok"}),Ns.jsx(rV,{value:"youtube",children:"YouTube"}),Ns.jsx(rV,{value:"twitter",children:"Twitter"}),Ns.jsx(rV,{value:"facebook",children:"Facebook"})]})]})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Description"}),Ns.jsx(YK,{value:a.description,onChange:e=>n({...a,description:e.target.value}),placeholder:"Content description",rows:3})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Media URL"}),Ns.jsx(HK,{value:a.media_url,onChange:e=>n({...a,media_url:e.target.value}),placeholder:"https://..."})]}),Ns.jsxs("div",{className:"flex justify-end space-x-3",children:[Ns.jsx(Oc,{variant:"outline",onClick:t,disabled:s,children:"Cancel"}),Ns.jsx(Oc,{onClick:async()=>{await r(a),n({title:"",description:"",platform:"instagram",media_url:""})},disabled:s||!a.title||!a.platform,children:s?"Adding...":"Add Content"})]})]})]})})}rV.displayName="SelectItem";const aV={active:"bg-green-100 text-green-800",paused:"bg-yellow-100 text-yellow-800",draft:"bg-blue-100 text-blue-800",completed:"bg-pr-surface-2 text-pr-text-1"};function nV(){const{id:e,campaignId:t}=Ce(),r=e??t,s=ke(),{toast:a}=KW(),[n,i]=u.useState(null),[l,o]=u.useState([]),[c,d]=u.useState([]),[m,p]=u.useState(!0),[h,x]=u.useState(""),[f,g]=u.useState("overview"),[b,v]=u.useState(!1),[y,j]=u.useState(!1);u.useEffect(()=>{(async()=>{if(!r)return x("No campaign ID provided"),void p(!1);try{p(!0);const e=await kW.getCampaign(r);if(!e||!e.campaign)return void x("Campaign not found");const t={id:e.campaign.id,name:e.campaign.name,status:e.campaign.status,objective:e.campaign.objective||"",description:"",startDate:e.campaign.start_date,endDate:e.campaign.end_date||"",budget:e.campaign.total_budget,spent:e.campaign.budget_spent,dailyBudget:0,impressions:e.campaign.performance?.impressions||0,clicks:e.campaign.performance?.clicks||0,ctr:e.campaign.performance?.impressions>0?e.campaign.performance.clicks/e.campaign.performance.impressions*100:0,cpc:e.campaign.performance?.clicks>0?e.campaign.performance.spend/e.campaign.performance.clicks:0,drops:0,participants:0,bidStrategy:"lowest_cost",bidAmount:0,targetCtr:2,targetCpc:.5,createdAt:e.campaign.created_at,updatedAt:e.campaign.updated_at};i(t),o(e.content||[])}catch(e){console.error("Failed to fetch campaign:",e),x("Failed to load campaign details. Please try again later.")}finally{p(!1)}})()},[r]);const w=async e=>{if(n)try{v(!0),await new Promise(e=>setTimeout(e,500)),i({...n,status:e,updatedAt:(new Date).toISOString()}),a({title:"Campaign updated",description:`Campaign status changed to ${e}`,type:"success"})}catch(t){console.error("Failed to update campaign status:",t),a({title:"Update failed",description:"Failed to update campaign status",type:"destructive"})}finally{v(!1)}},[N,_]=u.useState(!1),[k,S]=u.useState(!1),[C,O]=u.useState(!1),[E,P]=u.useState(!1),T=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(e),A=e=>new Intl.NumberFormat("en-US").format(e),M=e=>KK(new Date(e),"MMM d, yyyy");if(m)return Ns.jsx("div",{className:"flex items-center justify-center h-64",children:Ns.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})});if(h)return Ns.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:Ns.jsxs("div",{className:"flex",children:[Ns.jsx("div",{className:"flex-shrink-0",children:Ns.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Ns.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),Ns.jsx("div",{className:"ml-3",children:Ns.jsx("p",{className:"text-sm text-red-700",children:h})})]})});if(!n)return Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1",children:"Campaign not found"}),Ns.jsx("p",{className:"mt-1 text-sm text-pr-text-2",children:"The requested campaign could not be found."}),Ns.jsx("div",{className:"mt-6",children:Ns.jsxs(Oc,{onClick:()=>s(-1),variant:"outline",children:[Ns.jsx(ut,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to Campaigns"]})})]});const D=n.endDate?(e=>{const t=new Date,r=new Date(e).getTime()-t.getTime();return Math.ceil(r/864e5)})(n.endDate):null,I=n.spent/n.budget*100,R=n.spent/(Math.ceil(((new Date).getTime()-new Date(n.startDate).getTime())/864e5)||1),$=n.dailyBudget>0?new Date(Date.now()+(n.budget-n.spent)/n.dailyBudget*24*60*60*1e3):null;return Ns.jsxs(Ns.Fragment,{children:[Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[Ns.jsxs("div",{className:"flex items-center space-x-4",children:[Ns.jsxs(Oc,{variant:"outline",onClick:()=>s(-1),className:"h-8 w-8 p-0",children:[Ns.jsx(ut,{className:"h-4 w-4"}),Ns.jsx("span",{className:"sr-only",children:"Back"})]}),Ns.jsxs("div",{children:[Ns.jsx("h1",{className:"text-2xl font-bold text-pr-text-1",children:n.name}),Ns.jsxs("div",{className:"flex items-center mt-1 space-x-2",children:[Ns.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${aV[n.status]}`,children:n.status.charAt(0).toUpperCase()+n.status.slice(1)}),Ns.jsxs("span",{className:"text-sm text-pr-text-2",children:[M(n.startDate),n.endDate&&` - ${M(n.endDate)}`,null!==D&&Ns.jsxs("span",{className:"ml-1",children:["(",D>0?`${D} days left`:"Ended",")"]})]})]})]})]}),Ns.jsxs("div",{className:"flex space-x-2",children:["active"===n.status&&Ns.jsxs(Oc,{variant:"outline",onClick:()=>w("paused"),disabled:b,children:[Ns.jsx(Pr,{className:"mr-2 h-4 w-4"}),"Pause"]}),("paused"===n.status||"draft"===n.status)&&Ns.jsxs(Oc,{onClick:()=>w("active"),disabled:b,children:[Ns.jsx(Ir,{className:"mr-2 h-4 w-4"}),"paused"===n.status?"Resume":"Activate"]}),Ns.jsx(Oc,{variant:"outline",asChild:!0,children:Ns.jsxs(Ze,{to:`/campaigns/${n.id}/edit`,children:[Ns.jsx(Jr,{className:"mr-2 h-4 w-4"}),"Edit"]})}),Ns.jsxs(Oc,{variant:"outline",size:"icon",children:[Ns.jsx(Wt,{className:"h-4 w-4"}),Ns.jsx("span",{className:"sr-only",children:"More"})]})]})]}),Ns.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[Ns.jsx("div",{className:"bg-pr-surface-card overflow-hidden shadow rounded-lg",children:Ns.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[Ns.jsxs("div",{className:"flex items-center",children:[Ns.jsx("div",{className:"flex-shrink-0 bg-blue-500 rounded-md p-3",children:Ns.jsx(Bt,{className:"h-6 w-6 text-white"})}),Ns.jsx("div",{className:"ml-5 w-0 flex-1",children:Ns.jsxs("dl",{children:[Ns.jsx("dt",{className:"text-sm font-medium text-pr-text-2 truncate",children:"Total Budget"}),Ns.jsx("dd",{className:"flex items-baseline",children:Ns.jsx("div",{className:"text-2xl font-semibold text-pr-text-1",children:T(n.budget)})})]})})]}),Ns.jsxs("div",{className:"mt-4",children:[Ns.jsxs("div",{className:"text-sm text-pr-text-2",children:[Ns.jsx("span",{className:"font-medium text-pr-text-1",children:T(n.spent)})," spent",Ns.jsx("span",{className:"mx-1",children:""}),Ns.jsxs("span",{children:[T(n.budget-n.spent)," remaining"]})]}),Ns.jsx("div",{className:"mt-2 w-full bg-pr-surface-3 rounded-full h-2",children:Ns.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(100,I)}%`}})})]})]})}),Ns.jsx("div",{className:"bg-pr-surface-card overflow-hidden shadow rounded-lg",children:Ns.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[Ns.jsxs("div",{className:"flex items-center",children:[Ns.jsx("div",{className:"flex-shrink-0 bg-green-500 rounded-md p-3",children:Ns.jsx(us,{className:"h-6 w-6 text-white"})}),Ns.jsx("div",{className:"ml-5 w-0 flex-1",children:Ns.jsxs("dl",{children:[Ns.jsx("dt",{className:"text-sm font-medium text-pr-text-2 truncate",children:"Participants"}),Ns.jsx("dd",{className:"flex items-baseline",children:Ns.jsx("div",{className:"text-2xl font-semibold text-pr-text-1",children:A(n.participants)})})]})})]}),Ns.jsx("div",{className:"mt-4",children:Ns.jsxs("div",{className:"text-sm text-pr-text-2",children:[Ns.jsx("span",{className:"font-medium text-pr-text-1",children:n.drops})," drops"]})})]})}),Ns.jsx("div",{className:"bg-pr-surface-card overflow-hidden shadow rounded-lg",children:Ns.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[Ns.jsxs("div",{className:"flex items-center",children:[Ns.jsx("div",{className:"flex-shrink-0 bg-purple-500 rounded-md p-3",children:Ns.jsx(_t,{className:"h-6 w-6 text-white"})}),Ns.jsx("div",{className:"ml-5 w-0 flex-1",children:Ns.jsxs("dl",{children:[Ns.jsx("dt",{className:"text-sm font-medium text-pr-text-2 truncate",children:"Impressions"}),Ns.jsx("dd",{className:"flex items-baseline",children:Ns.jsx("div",{className:"text-2xl font-semibold text-pr-text-1",children:A(n.impressions)})})]})})]}),Ns.jsx("div",{className:"mt-4",children:Ns.jsxs("div",{className:"text-sm text-pr-text-2",children:[Ns.jsx("span",{className:"font-medium text-pr-text-1",children:A(n.clicks)})," clicks",Ns.jsx("span",{className:"mx-1",children:""}),Ns.jsxs("span",{children:[n.ctr,"% CTR"]})]})})]})}),Ns.jsx("div",{className:"bg-pr-surface-card overflow-hidden shadow rounded-lg",children:Ns.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[Ns.jsxs("div",{className:"flex items-center",children:[Ns.jsx("div",{className:"flex-shrink-0 bg-yellow-500 rounded-md p-3",children:Ns.jsx(ts,{className:"h-6 w-6 text-white"})}),Ns.jsx("div",{className:"ml-5 w-0 flex-1",children:Ns.jsxs("dl",{children:[Ns.jsx("dt",{className:"text-sm font-medium text-pr-text-2 truncate",children:"Performance"}),Ns.jsxs("dd",{className:"flex items-baseline",children:[Ns.jsx("div",{className:"text-2xl font-semibold text-pr-text-1",children:T(n.cpc)}),Ns.jsx("div",{className:"ml-2 flex items-baseline text-sm font-semibold text-green-600",children:Ns.jsx("span",{children:(n.cpc<n.targetCpc?" ":" ")+Math.abs(n.cpc-n.targetCpc).toFixed(2)})})]})]})})]}),Ns.jsx("div",{className:"mt-4",children:Ns.jsx("div",{className:"text-sm text-pr-text-2",children:Ns.jsxs("span",{children:["Target: ",T(n.targetCpc)," CPC"]})})})]})})]}),Ns.jsx("div",{className:"bg-pr-surface-card shadow overflow-hidden sm:rounded-lg",children:Ns.jsxs(YW,{defaultValue:"overview",onValueChange:g,className:"w-full",children:[Ns.jsx("div",{className:"border-b border-pr-surface-3",children:Ns.jsxs(JW,{className:"bg-transparent p-0 rounded-none",children:[Ns.jsx(ZW,{value:"overview",className:"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none",children:"Overview"}),Ns.jsx(ZW,{value:"performance",className:"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none",children:"Performance"}),Ns.jsxs(ZW,{value:"content",className:"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none",children:["Content (",l.length,")"]}),Ns.jsx(ZW,{value:"settings",className:"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none",children:"Settings"})]})}),Ns.jsxs("div",{className:"p-6",children:[Ns.jsx(QW,{value:"overview",children:Ns.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-3",children:[Ns.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[Ns.jsxs("section",{className:"bg-pr-surface-2 p-4 rounded-lg",children:[Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-4",children:"Campaign Summary"}),Ns.jsx("p",{className:"text-pr-text-1",children:n.description||"No description provided."}),Ns.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-4 sm:grid-cols-2",children:[Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"text-sm font-medium text-pr-text-2",children:"Objective"}),Ns.jsx("p",{className:"mt-1 text-sm text-pr-text-1 capitalize",children:n.objective.replace("_"," ")})]}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"text-sm font-medium text-pr-text-2",children:"Bid Strategy"}),Ns.jsx("p",{className:"mt-1 text-sm text-pr-text-1 capitalize",children:"lowest_cost"===n.bidStrategy?"Lowest Cost":"cost_cap"===n.bidStrategy?"Cost Cap":"Bid Cap"})]}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"text-sm font-medium text-pr-text-2",children:"Daily Budget"}),Ns.jsx("p",{className:"mt-1 text-sm text-pr-text-1",children:T(n.dailyBudget)})]}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"text-sm font-medium text-pr-text-2",children:"Est. End Date"}),Ns.jsx("p",{className:"mt-1 text-sm text-pr-text-1",children:$?M($.toISOString()):"N/A"})]})]})]}),Ns.jsxs("section",{children:[Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-4",children:"Recent Activity"}),Ns.jsx("div",{className:"bg-pr-surface-card shadow overflow-hidden sm:rounded-md",children:Ns.jsxs("ul",{className:"divide-y divide-gray-200",children:[Ns.jsx("li",{className:"px-4 py-4 sm:px-6",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("p",{className:"text-sm font-medium text-indigo-600 truncate",children:"Campaign created"}),Ns.jsx("div",{className:"ml-2 flex-shrink-0",children:Ns.jsx("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:M(n.createdAt)})})]})}),Ns.jsx("li",{className:"px-4 py-4 sm:px-6",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("p",{className:"text-sm font-medium text-indigo-600 truncate",children:"Campaign started"}),Ns.jsx("div",{className:"ml-2 flex-shrink-0",children:Ns.jsx("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:M(n.startDate)})})]})}),n.updatedAt!==n.createdAt&&Ns.jsx("li",{className:"px-4 py-4 sm:px-6",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("p",{className:"text-sm font-medium text-indigo-600 truncate",children:"Campaign updated"}),Ns.jsx("div",{className:"ml-2 flex-shrink-0",children:Ns.jsx("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:M(n.updatedAt)})})]})})]})})]})]}),Ns.jsxs("div",{className:"space-y-8",children:[Ns.jsxs("section",{children:[Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-4",children:"Quick Actions"}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsxs(Oc,{variant:"outline",className:"w-full justify-start",onClick:async()=>{if(r)try{a({title:"Refreshing data",description:"Fetching latest campaign metrics...",type:"info"});const e=await kW.getCampaign(r);if(e&&e.campaign){const t={id:e.campaign.id,name:e.campaign.name,status:e.campaign.status,objective:e.campaign.objective||"",description:"",startDate:e.campaign.start_date,endDate:e.campaign.end_date||"",budget:e.campaign.total_budget,spent:e.campaign.budget_spent,dailyBudget:0,impressions:e.campaign.performance?.impressions||0,clicks:e.campaign.performance?.clicks||0,ctr:e.campaign.performance?.impressions>0?e.campaign.performance.clicks/e.campaign.performance.impressions*100:0,cpc:e.campaign.performance?.clicks>0?e.campaign.performance.spend/e.campaign.performance.clicks:0,drops:0,participants:0,bidStrategy:"lowest_cost",bidAmount:0,targetCtr:2,targetCpc:.5,createdAt:e.campaign.created_at,updatedAt:e.campaign.updated_at};i(t),setMetrics(e.metrics||[]),a({title:"Data refreshed",description:"Campaign metrics updated successfully",type:"success"})}}catch(e){console.error("Failed to refresh campaign:",e),a({title:"Refresh failed",description:"Failed to refresh campaign data",type:"destructive"})}},children:[Ns.jsx($r,{className:"mr-2 h-4 w-4"}),"Refresh Data"]}),Ns.jsxs(Oc,{variant:"outline",className:"w-full justify-start",onClick:()=>{O(!0)},children:[Ns.jsx(Bt,{className:"mr-2 h-4 w-4"}),"Add Funds"]}),Ns.jsxs(Oc,{variant:"outline",className:"w-full justify-start",onClick:()=>{_(!0)},children:[Ns.jsx(Rr,{className:"mr-2 h-4 w-4"}),"Add Content"]}),Ns.jsxs(Oc,{variant:"outline",className:"w-full justify-start text-red-600 hover:text-red-600",onClick:async()=>{if(n){if(!y)return j(!0),a({title:"Confirm deletion",description:"Click delete again to confirm",type:"warning"}),void setTimeout(()=>j(!1),3e3);try{await kW.deleteCampaign(n.id),a({title:"Campaign deleted",description:"Campaign has been deleted successfully",type:"success"}),s("/advertiser/campaigns")}catch(e){console.error("Failed to delete campaign:",e),a({title:"Delete failed",description:"Failed to delete campaign",type:"destructive"})}}},children:[Ns.jsx(ss,{className:"mr-2 h-4 w-4"}),y?"Confirm Delete?":"Delete Campaign"]})]})]}),Ns.jsxs("section",{children:[Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-4",children:"Performance Summary"}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{children:[Ns.jsxs("div",{className:"flex justify-between text-sm text-pr-text-2 mb-1",children:[Ns.jsx("span",{children:"Spend"}),Ns.jsxs("span",{className:"font-medium",children:[T(n.spent)," / ",T(n.budget)]})]}),Ns.jsx("div",{className:"w-full bg-pr-surface-3 rounded-full h-2",children:Ns.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(100,I)}%`}})})]}),Ns.jsxs("div",{children:[Ns.jsxs("div",{className:"flex justify-between text-sm text-pr-text-2 mb-1",children:[Ns.jsx("span",{children:"Daily Spend"}),Ns.jsxs("span",{className:"font-medium",children:[T(R)," / day"]})]}),Ns.jsx("div",{className:"w-full bg-pr-surface-3 rounded-full h-2",children:Ns.jsx("div",{className:Ec("h-2 rounded-full",R<=1.1*n.dailyBudget?"bg-green-500":"bg-yellow-500"),style:{width:`${Math.min(100,R/n.dailyBudget*100)}%`}})}),Ns.jsx("p",{className:"mt-1 text-xs text-pr-text-2",children:R>1.1*n.dailyBudget?"Spending faster than daily budget":R<.9*n.dailyBudget?"Spending slower than daily budget":"On track with daily budget"})]}),Ns.jsxs("div",{children:[Ns.jsxs("div",{className:"flex justify-between text-sm text-pr-text-2 mb-1",children:[Ns.jsx("span",{children:"CPC"}),Ns.jsxs("span",{className:"font-medium",children:[T(n.cpc),Ns.jsxs("span",{className:Ec("ml-1",n.cpc<=1.1*n.targetCpc?"text-green-600":"text-red-600"),children:["(",n.cpc<=n.targetCpc?"":"",Math.abs(n.cpc-n.targetCpc).toFixed(2),")"]})]})]}),Ns.jsx("div",{className:"w-full bg-pr-surface-3 rounded-full h-2",children:Ns.jsx("div",{className:Ec("h-2 rounded-full",n.cpc<=1.1*n.targetCpc?"bg-green-500":"bg-yellow-500"),style:{width:`${Math.min(100,n.cpc/(2*n.targetCpc)*100)}%`}})}),Ns.jsxs("p",{className:"mt-1 text-xs text-pr-text-2",children:["Target: ",T(n.targetCpc)]})]}),Ns.jsxs("div",{children:[Ns.jsxs("div",{className:"flex justify-between text-sm text-pr-text-2 mb-1",children:[Ns.jsx("span",{children:"CTR"}),Ns.jsxs("span",{className:"font-medium",children:[n.ctr,"%",Ns.jsxs("span",{className:Ec("ml-1",n.ctr>=.9*n.targetCtr?"text-green-600":"text-red-600"),children:["(",n.ctr>=n.targetCtr?"":"",Math.abs(n.ctr-n.targetCtr).toFixed(1),"%)"]})]})]}),Ns.jsx("div",{className:"w-full bg-pr-surface-3 rounded-full h-2",children:Ns.jsx("div",{className:Ec("h-2 rounded-full",n.ctr>=.9*n.targetCtr?"bg-green-500":"bg-yellow-500"),style:{width:`${Math.min(100,n.ctr/(1.5*n.targetCtr)*100)}%`}})}),Ns.jsxs("p",{className:"mt-1 text-xs text-pr-text-2",children:["Target: ",n.targetCtr,"%"]})]})]})]})]})]})}),Ns.jsx(QW,{value:"performance",children:Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-4",children:"Performance Over Time"}),Ns.jsx("div",{className:"bg-pr-surface-2 p-4 rounded-lg h-64 flex items-center justify-center",children:Ns.jsx("p",{className:"text-pr-text-2",children:"Performance chart will be displayed here"})})]}),Ns.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"text-sm font-medium text-pr-text-2 mb-2",children:"Top Performing Content"}),Ns.jsx("div",{className:"bg-pr-surface-card shadow overflow-hidden sm:rounded-md",children:Ns.jsx("ul",{className:"divide-y divide-gray-200",children:l.slice(0,3).map(e=>Ns.jsx("li",{className:"px-4 py-4 sm:px-6",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex-1 min-w-0",children:[Ns.jsx("p",{className:"text-sm font-medium text-indigo-600 truncate",children:e.title}),Ns.jsx("div",{className:"flex mt-1",children:Ns.jsxs("p",{className:"text-xs text-pr-text-2",children:[e.platform,"  ",e.creator]})})]}),Ns.jsx("div",{className:"ml-4 flex-shrink-0",children:Ns.jsxs("p",{className:"text-sm font-medium text-pr-text-1",children:[e.ctr,"% CTR"]})})]})},e.id))})})]}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"text-sm font-medium text-pr-text-2 mb-2",children:"Performance by Platform"}),Ns.jsx("div",{className:"bg-pr-surface-card shadow overflow-hidden sm:rounded-md",children:Ns.jsx("ul",{className:"divide-y divide-gray-200",children:Array.from(new Set(l.map(e=>e.platform))).map(e=>{const t=l.filter(t=>t.platform===e),r=t.reduce((e,t)=>e+t.spent,0),s=t.reduce((e,t)=>e+t.clicks,0),a=t.reduce((e,t)=>e+t.ctr,0)/t.length;return Ns.jsx("li",{className:"px-4 py-4 sm:px-6",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex-1 min-w-0",children:[Ns.jsx("p",{className:"text-sm font-medium text-pr-text-1",children:e}),Ns.jsx("div",{className:"flex mt-1",children:Ns.jsxs("p",{className:"text-xs text-pr-text-2",children:[t.length," ",1===t.length?"item":"items"]})})]}),Ns.jsxs("div",{className:"ml-4 flex-shrink-0",children:[Ns.jsx("p",{className:"text-sm text-pr-text-1",children:T(r)}),Ns.jsxs("p",{className:"text-xs text-pr-text-2",children:[s," clicks  ",a.toFixed(1),"% CTR"]})]})]})},e)})})})]})]}),Ns.jsxs("div",{children:[Ns.jsx("h4",{className:"text-sm font-medium text-pr-text-2 mb-2",children:"Recommendations"}),Ns.jsx("div",{className:"bg-pr-surface-card shadow overflow-hidden sm:rounded-md",children:Ns.jsxs("ul",{className:"divide-y divide-gray-200",children:[Ns.jsx("li",{className:"px-4 py-4 sm:px-6",children:Ns.jsxs("div",{className:"flex items-start",children:[Ns.jsx("div",{className:"flex-shrink-0 pt-0.5",children:Ns.jsx("div",{className:"flex items-center justify-center h-6 w-6 rounded-full bg-blue-100 text-blue-600",children:Ns.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:Ns.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})}),Ns.jsx("div",{className:"ml-3 flex-1",children:Ns.jsx("p",{className:"text-sm text-pr-text-1",children:"Your campaign is performing well! Consider increasing your daily budget to reach more people."})})]})}),Ns.jsx("li",{className:"px-4 py-4 sm:px-6",children:Ns.jsxs("div",{className:"flex items-start",children:[Ns.jsx("div",{className:"flex-shrink-0 pt-0.5",children:Ns.jsx("div",{className:"flex items-center justify-center h-6 w-6 rounded-full bg-blue-100 text-blue-600",children:Ns.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:Ns.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})}),Ns.jsx("div",{className:"ml-3 flex-1",children:Ns.jsx("p",{className:"text-sm text-pr-text-1",children:"Try A/B testing different ad creatives to improve your click-through rate."})})]})})]})})]})]})}),Ns.jsxs(QW,{value:"content",children:[Ns.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1",children:"Campaign Content"}),Ns.jsxs(Oc,{children:[Ns.jsx(Rr,{className:"mr-2 h-4 w-4"}),"Add Content"]})]}),Ns.jsx("div",{className:"bg-pr-surface-card shadow overflow-hidden sm:rounded-md",children:Ns.jsxs("ul",{className:"divide-y divide-gray-200",children:[l.map(e=>Ns.jsx("li",{className:"hover:bg-pr-surface-2",children:Ns.jsx(Ze,{to:`/content/${e.id}`,className:"block",children:Ns.jsxs("div",{className:"px-4 py-4 sm:px-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center",children:[Ns.jsx("p",{className:"text-lg font-medium text-indigo-600 truncate",children:e.title}),Ns.jsx("div",{className:"ml-2",children:Ns.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("live"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"approved"===e.status?"bg-blue-100 text-blue-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-pr-surface-2 text-pr-text-1"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})})]}),Ns.jsx("div",{className:"ml-2 flex-shrink-0 flex",children:Ns.jsxs("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:[T(e.spent)," of ",T(e.budget)]})})]}),Ns.jsxs("div",{className:"mt-2 sm:flex sm:justify-between",children:[Ns.jsx("div",{className:"sm:flex",children:Ns.jsxs("p",{className:"flex items-center text-sm text-pr-text-2",children:[Ns.jsx("span",{className:"font-medium text-pr-text-1",children:e.platform}),Ns.jsx("span",{className:"mx-1",children:""}),Ns.jsxs("span",{children:["by @",e.creator]})]})}),Ns.jsxs("div",{className:"mt-2 flex items-center text-sm text-pr-text-2 sm:mt-0",children:[Ns.jsx(_t,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),Ns.jsxs("p",{children:[A(e.impressions)," impressions"]}),Ns.jsx("span",{className:"mx-1",children:""}),Ns.jsxs("p",{children:[A(e.clicks)," clicks"]}),Ns.jsx("span",{className:"mx-1",children:""}),Ns.jsxs("p",{children:[e.ctr,"% CTR"]})]})]}),Ns.jsx("div",{className:"mt-2",children:Ns.jsx("div",{className:"w-full bg-pr-surface-3 rounded-full h-2",children:Ns.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(100,e.spent/e.budget*100)}%`}})})})]})})},e.id)),0===l.length&&Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx(_t,{className:"mx-auto h-12 w-12 text-gray-400"}),Ns.jsx("h3",{className:"mt-2 text-lg font-medium text-pr-text-1",children:"No content added yet"}),Ns.jsx("p",{className:"mt-1 text-sm text-pr-text-2",children:"Get started by adding content to your campaign."}),Ns.jsx("div",{className:"mt-6",children:Ns.jsxs(Oc,{children:[Ns.jsx(Rr,{className:"-ml-1 mr-2 h-5 w-5"}),"Add Content"]})})]})]})})]}),Ns.jsx(QW,{value:"settings",children:Ns.jsxs("div",{className:"space-y-8",children:[Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-4",children:"Campaign Settings"}),Ns.jsxs("div",{className:"bg-pr-surface-card shadow overflow-hidden sm:rounded-lg",children:[Ns.jsx("div",{className:"px-4 py-5 sm:px-6",children:Ns.jsx("h4",{className:"text-lg font-medium text-pr-text-1",children:"Basic Information"})}),Ns.jsx("div",{className:"border-t border-pr-surface-3 px-4 py-5 sm:px-6",children:Ns.jsxs("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2",children:[Ns.jsxs("div",{className:"sm:col-span-1",children:[Ns.jsx("dt",{className:"text-sm font-medium text-pr-text-2",children:"Campaign Name"}),Ns.jsx("dd",{className:"mt-1 text-sm text-pr-text-1",children:n.name})]}),Ns.jsxs("div",{className:"sm:col-span-1",children:[Ns.jsx("dt",{className:"text-sm font-medium text-pr-text-2",children:"Status"}),Ns.jsx("dd",{className:"mt-1",children:Ns.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${aV[n.status]}`,children:n.status.charAt(0).toUpperCase()+n.status.slice(1)})})]}),Ns.jsxs("div",{className:"sm:col-span-1",children:[Ns.jsx("dt",{className:"text-sm font-medium text-pr-text-2",children:"Start Date"}),Ns.jsx("dd",{className:"mt-1 text-sm text-pr-text-1",children:M(n.startDate)})]}),Ns.jsxs("div",{className:"sm:col-span-1",children:[Ns.jsx("dt",{className:"text-sm font-medium text-pr-text-2",children:"End Date"}),Ns.jsxs("dd",{className:"mt-1 text-sm text-pr-text-1",children:[n.endDate?M(n.endDate):"No end date",n.endDate&&null!==D&&Ns.jsxs("span",{className:"ml-2 text-pr-text-2",children:["(",D>0?`${D} days left`:"Ended",")"]})]})]}),Ns.jsxs("div",{className:"sm:col-span-2",children:[Ns.jsx("dt",{className:"text-sm font-medium text-pr-text-2",children:"Description"}),Ns.jsx("dd",{className:"mt-1 text-sm text-pr-text-1",children:n.description||"No description provided."})]})]})})]})]}),Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-4",children:"Budget & Bidding"}),Ns.jsxs("div",{className:"bg-pr-surface-card shadow overflow-hidden sm:rounded-lg",children:[Ns.jsx("div",{className:"px-4 py-5 sm:px-6",children:Ns.jsx("h4",{className:"text-lg font-medium text-pr-text-1",children:"Budget Settings"})}),Ns.jsxs("div",{className:"border-t border-pr-surface-3 px-4 py-5 sm:px-6",children:[Ns.jsxs("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2",children:[Ns.jsxs("div",{className:"sm:col-span-1",children:[Ns.jsx("dt",{className:"text-sm font-medium text-pr-text-2",children:"Total Budget"}),Ns.jsx("dd",{className:"mt-1 text-sm text-pr-text-1",children:T(n.budget)})]}),Ns.jsxs("div",{className:"sm:col-span-1",children:[Ns.jsx("dt",{className:"text-sm font-medium text-pr-text-2",children:"Daily Budget"}),Ns.jsx("dd",{className:"mt-1 text-sm text-pr-text-1",children:T(n.dailyBudget)})]}),Ns.jsxs("div",{className:"sm:col-span-1",children:[Ns.jsx("dt",{className:"text-sm font-medium text-pr-text-2",children:"Amount Spent"}),Ns.jsx("dd",{className:"mt-1 text-sm text-pr-text-1",children:T(n.spent)})]}),Ns.jsxs("div",{className:"sm:col-span-1",children:[Ns.jsx("dt",{className:"text-sm font-medium text-pr-text-2",children:"Remaining Budget"}),Ns.jsx("dd",{className:"mt-1 text-sm text-pr-text-1",children:T(n.budget-n.spent)})]})]}),Ns.jsxs("div",{className:"mt-6",children:[Ns.jsxs("div",{className:"flex justify-between text-sm text-pr-text-2 mb-1",children:[Ns.jsx("span",{children:"Budget Spent"}),Ns.jsxs("span",{children:[Math.round(I),"%"]})]}),Ns.jsx("div",{className:"w-full bg-pr-surface-3 rounded-full h-2",children:Ns.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(100,I)}%`}})})]})]})]}),Ns.jsxs("div",{className:"mt-6 bg-pr-surface-card shadow overflow-hidden sm:rounded-lg",children:[Ns.jsx("div",{className:"px-4 py-5 sm:px-6",children:Ns.jsx("h4",{className:"text-lg font-medium text-pr-text-1",children:"Bidding Strategy"})}),Ns.jsx("div",{className:"border-t border-pr-surface-3 px-4 py-5 sm:px-6",children:Ns.jsxs("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2",children:[Ns.jsxs("div",{className:"sm:col-span-1",children:[Ns.jsx("dt",{className:"text-sm font-medium text-pr-text-2",children:"Bid Strategy"}),Ns.jsx("dd",{className:"mt-1 text-sm text-pr-text-1 capitalize",children:"lowest_cost"===n.bidStrategy?"Lowest Cost":"cost_cap"===n.bidStrategy?"Cost Cap":"Bid Cap"})]}),"lowest_cost"!==n.bidStrategy&&Ns.jsxs("div",{className:"sm:col-span-1",children:[Ns.jsx("dt",{className:"text-sm font-medium text-pr-text-2",children:"cost_cap"===n.bidStrategy?"Cost Cap":"Bid Cap"}),Ns.jsx("dd",{className:"mt-1 text-sm text-pr-text-1",children:T(n.bidAmount)})]}),Ns.jsxs("div",{className:"sm:col-span-1",children:[Ns.jsx("dt",{className:"text-sm font-medium text-pr-text-2",children:"Target CPC"}),Ns.jsx("dd",{className:"mt-1 text-sm text-pr-text-1",children:T(n.targetCpc)})]}),Ns.jsxs("div",{className:"sm:col-span-1",children:[Ns.jsx("dt",{className:"text-sm font-medium text-pr-text-2",children:"Target CTR"}),Ns.jsxs("dd",{className:"mt-1 text-sm text-pr-text-1",children:[n.targetCtr,"%"]})]})]})})]})]}),Ns.jsx("div",{className:"pt-5",children:Ns.jsxs("div",{className:"flex justify-end space-x-3",children:[Ns.jsx(Oc,{variant:"outline",type:"button",onClick:()=>s(-1),children:"Cancel"}),Ns.jsxs(Oc,{type:"button",variant:"destructive",children:[Ns.jsx(ss,{className:"mr-2 h-4 w-4"}),"Delete Campaign"]}),Ns.jsxs(Oc,{type:"submit",children:[Ns.jsx(Ur,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})})]})})]})]})})]}),Ns.jsx(GK,{isOpen:C,onClose:()=>O(!1),onSubmit:async e=>{if(n)try{P(!0);const t=await kW.addCampaignFunds(n.id,e);i({...n,budget:t.new_total,updatedAt:(new Date).toISOString()}),O(!1),a({title:"Funds added",description:`Successfully added ${T(t.amount_added)} to campaign budget`,type:"success"})}catch(t){console.error("Failed to add funds:",t),a({title:"Add funds failed",description:"Failed to add funds to campaign",type:"destructive"})}finally{P(!1)}},isSubmitting:E}),Ns.jsx(sV,{isOpen:N,onClose:()=>_(!1),onSubmit:async e=>{if(n)try{S(!0);const t=await kW.addCampaignContent(n.id,e);o([...l,t]),_(!1),a({title:"Content added",description:"Campaign content added successfully",type:"success"})}catch(t){console.error("Failed to add content:",t),a({title:"Add content failed",description:"Failed to add campaign content",type:"destructive"})}finally{S(!1)}},isSubmitting:k})]})}function iV({selected:e,onChange:t,minDate:r,maxDate:s,className:a=""}){const n=e=>{if(!e)return"";return`${e.getFullYear()}-${`${e.getMonth()+1}`.padStart(2,"0")}-${`${e.getDate()}`.padStart(2,"0")}`};return Ns.jsx("input",{type:"date",className:`block w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 disabled:cursor-not-allowed disabled:bg-gray-100 ${a}`,value:n(e),onChange:e=>t((e=>{if(!e)return null;const[t,r,s]=e.split("-").map(Number);return new Date(t,r-1,s)})(e.target.value)),min:n(r??null),max:n(s??null)})}const lV="https://api.promorang.co";async function oV(e,t={}){const{skipAuth:r,headers:s,...a}=t,n="undefined"==typeof window||r?null:localStorage.getItem("auth_token"),i=new Headers({"Content-Type":"application/json",...s||{}});n&&!i.has("Authorization")&&i.set("Authorization",`Bearer ${n}`);const l=function(e){if("string"==typeof e&&(e.startsWith("http://")||e.startsWith("https://")))return e;const t=e.toString();return t.startsWith(lV)?t:`${lV}${t.startsWith("/")?"":"/"}${t}`}(e);try{const e=await fetch(l,{...a,headers:i,credentials:"include"});return await async function(e){const t=await e.json().catch(()=>({}));if(!e.ok){const r=new Error(t.error||"API request failed");throw r.status=e.status,r.data=t,r}return t}(e)}catch(o){throw console.error("API request failed:",o),o}}function cV(){const e=ke(),[t,r]=u.useState(!1),[s,a]=u.useState({name:"",objective:"engagement",description:"",startDate:new Date,endDate:null,budget:1e3,dailyBudget:100,bidStrategy:"lowest_cost",bidAmount:5,targetCtr:2,targetCpc:.5,campaignType:"standard",audienceSize:1e3,locations:[],interests:[]}),{moveBalance:n,moveCost:i,calculateMoveCost:l}=function(){const{user:e}=Ls(),[t,r]=u.useState(0),[s,a]=u.useState(null),[n,i]=u.useState(!1),[l,o]=u.useState(null);return u.useEffect(()=>{e&&(async()=>{try{const e=await oV("/api/users/me");if(!e.ok)throw new Error("Failed to load user");const t=await e.json();r(t.moves_balance||t.move_balance||0)}catch(e){console.error("Failed to fetch move balance:",e),o("Failed to load move balance")}})()},[e]),{moveBalance:t,moveCost:s,loading:n,error:l,calculateMoveCost:async e=>{i(!0),o(null);try{const t=await oV("/api/campaigns/calculate-move-cost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to calculate move cost");const r=await t.json();return a(r),r}catch(t){return console.error("Failed to calculate move cost:",t),o("Failed to calculate move cost"),null}finally{i(!1)}},hasEnoughMoves:e=>t>=e,refreshBalance:()=>{e&&oV("/api/users/me").then(async e=>{if(!e.ok)throw new Error("Failed to refresh balance");const t=await e.json();r(t.moves_balance||t.move_balance||0)}).catch(console.error)}}}(),[o,c]=u.useState(null),[d,m]=u.useState(!1);u.useEffect(()=>{(async()=>{const e=await l({campaignType:s.campaignType,duration:s.endDate?Math.ceil((s.endDate.getTime()-s.startDate.getTime())/864e5):7,audienceSize:s.audienceSize,locations:s.locations,interests:s.interests,isPremium:"premium"===s.campaignType});e&&(c(e.totalCost),m(n<e.totalCost))})()},[s,l,n]);const p=e=>{const{name:t,value:r}=e.target;a(e=>({...e,[t]:"name"===t||"description"===t?r:Number(r)}))},h=(e,t)=>{a(r=>({...r,[e]:t}))},x=(e,t)=>{a(r=>({...r,[e]:t}))};return Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-4",children:[Ns.jsxs(Oc,{variant:"outline",size:"icon",onClick:()=>e(-1),className:"h-8 w-8",children:[Ns.jsx(ut,{className:"h-4 w-4"}),Ns.jsx("span",{className:"sr-only",children:"Back"})]}),Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1",children:"Create Campaign"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Set up a new marketing campaign to promote your brand"})]})]}),Ns.jsx("form",{onSubmit:async t=>{if(t.preventDefault(),d)alert("You do not have enough moves to create this campaign. Please reduce the scope or purchase more moves.");else if(o){r(!0);try{const t=await fetch("/api/campaigns",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({...s,userId:localStorage.getItem("userId"),duration:s.endDate?Math.ceil((s.endDate.getTime()-s.startDate.getTime())/864e5):7})});if(!t.ok)throw new Error("Failed to create campaign");const r=await t.json();alert(`Campaign created successfully! ${r.movesSpent} moves deducted from your balance.`),e("/campaigns")}catch(a){console.error("Failed to create campaign:",a),alert(`Failed to create campaign: ${a.message}`)}finally{r(!1)}}else alert("Calculating move cost. Please wait...")},className:"space-y-8",children:Ns.jsxs("div",{className:"space-y-8",children:[null!==o&&Ns.jsxs("div",{className:Ec("p-4 rounded-lg border",d?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"),children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center space-x-3",children:[Ns.jsx(fs,{className:Ec("h-5 w-5",d?"text-red-500":"text-blue-500")}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-medium",children:d?"Not enough moves":"Move cost"}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:[o," moves required (you have ",n,")"]})]})]}),d?Ns.jsx(Oc,{variant:"outline",size:"sm",onClick:()=>e("/account/billing"),children:"Get More Moves"}):Ns.jsx("div",{className:"text-sm font-medium text-green-600",children:"Sufficient balance"})]}),i&&Ns.jsx("div",{className:"mt-3 pt-3 border-t border-pr-surface-3 text-xs text-pr-text-2",children:Ns.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Ns.jsx("div",{children:"Base cost:"}),Ns.jsxs("div",{className:"text-right",children:[i.baseCost," moves"]}),i.durationModifier>0&&Ns.jsxs(Ns.Fragment,{children:[Ns.jsxs("div",{children:["Duration (",i.durationModifier.toFixed(1),"x):"]}),Ns.jsxs("div",{className:"text-right",children:["+",Math.round(i.baseCost*i.durationModifier)," moves"]})]}),i.audienceModifier>0&&Ns.jsxs(Ns.Fragment,{children:[Ns.jsxs("div",{children:["Audience size (",i.audienceModifier.toFixed(1),"x):"]}),Ns.jsxs("div",{className:"text-right",children:["+",Math.round(i.baseCost*i.audienceModifier)," moves"]})]}),i.premiumModifier>0&&Ns.jsxs(Ns.Fragment,{children:[Ns.jsxs("div",{children:["Premium features (",i.premiumModifier.toFixed(1),"x):"]}),Ns.jsxs("div",{className:"text-right",children:["+",Math.round(i.baseCost*i.premiumModifier)," moves"]})]}),Ns.jsx("div",{className:"font-medium",children:"Total cost:"}),Ns.jsxs("div",{className:"text-right font-medium",children:[i.totalCost," moves"]})]})})]}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-lg font-medium",children:"Campaign Details"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Basic information about your campaign"})]}),Ns.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsx("label",{htmlFor:"campaignType",className:"block text-sm font-medium text-pr-text-1",children:"Campaign Type"}),Ns.jsxs(QK,{value:s.campaignType,onValueChange:e=>h("campaignType",e),children:[Ns.jsx(XK,{children:Ns.jsx(eV,{placeholder:"Select campaign type"})}),Ns.jsx(tV,{children:[{value:"proof",label:"Proof Drop",description:"Test with a small audience",cost:"10 moves"},{value:"standard",label:"Standard Campaign",description:"Reach a larger audience",cost:"50 moves"},{value:"premium",label:"Premium Campaign",description:"Maximum reach and features",cost:"100 moves"}].map(e=>Ns.jsx(rV,{value:e.value,children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("div",{className:"font-medium",children:e.label}),Ns.jsx("div",{className:"text-xs text-pr-text-2",children:e.description})]}),Ns.jsx("div",{className:"text-sm text-pr-text-2",children:e.cost})]})},e.value))})]})]}),Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsx("label",{htmlFor:"audienceSize",className:"block text-sm font-medium text-pr-text-1",children:"Target Audience Size"}),Ns.jsx(HK,{type:"number",name:"audienceSize",id:"audienceSize",min:"100",step:"100",value:s.audienceSize,onChange:p,required:!0}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Larger audiences may require more moves"})]}),Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-pr-text-1",children:"Campaign Name"}),Ns.jsx(HK,{type:"text",name:"name",id:"name",value:s.name,onChange:p,required:!0})]}),Ns.jsxs("div",{className:"sm:col-span-4",children:[Ns.jsx("label",{htmlFor:"objective",className:"block text-sm font-medium text-pr-text-1",children:"Campaign Objective"}),Ns.jsx("div",{className:"mt-1",children:Ns.jsxs(QK,{value:s.objective,onValueChange:e=>h("objective",e),children:[Ns.jsx(XK,{className:"w-full",children:Ns.jsx(eV,{placeholder:"Select an objective"})}),Ns.jsx(tV,{children:[{value:"awareness",label:"Brand Awareness"},{value:"engagement",label:"Engagement"},{value:"conversions",label:"Conversions"},{value:"traffic",label:"Traffic"},{value:"app_installs",label:"App Installs"},{value:"video_views",label:"Video Views"}].map(e=>Ns.jsx(rV,{value:e.value,children:Ns.jsxs("div",{className:"flex items-center",children:[Ns.jsx(ts,{className:"mr-2 h-4 w-4"}),e.label]})},e.value))})]})})]}),Ns.jsxs("div",{className:"sm:col-span-6",children:[Ns.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-pr-text-1",children:"Description (Optional)"}),Ns.jsx("div",{className:"mt-1",children:Ns.jsx(YK,{id:"description",name:"description",rows:3,value:s.description,onChange:p,className:"w-full",placeholder:"Describe the purpose of this campaign..."})})]})]})]}),Ns.jsx("div",{className:"bg-pr-surface-card shadow sm:rounded-lg",children:Ns.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[Ns.jsx("h3",{className:"text-lg font-medium leading-6 text-pr-text-1",children:"Schedule & Budget"}),Ns.jsx("p",{className:"mt-1 text-sm text-pr-text-2",children:"When and how much you want to spend"}),Ns.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[Ns.jsxs("div",{className:"sm:col-span-3",children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1",children:"Start Date"}),Ns.jsx("div",{className:"mt-1",children:Ns.jsx(iV,{selected:s.startDate,onChange:e=>x("startDate",e),minDate:new Date,className:"w-full"})})]}),Ns.jsxs("div",{className:"sm:col-span-3",children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1",children:"End Date (Optional)"}),Ns.jsx("div",{className:"mt-1",children:Ns.jsx(iV,{selected:s.endDate,onChange:e=>x("endDate",e),minDate:s.startDate,className:"w-full",isClearable:!0,placeholderText:"No end date"})})]}),Ns.jsxs("div",{className:"sm:col-span-3",children:[Ns.jsx("label",{htmlFor:"budget",className:"block text-sm font-medium text-pr-text-1",children:"Total Budget ($)"}),Ns.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[Ns.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:Ns.jsx(Bt,{className:"h-5 w-5 text-gray-400"})}),Ns.jsx(HK,{type:"number",name:"budget",id:"budget",value:s.budget,onChange:p,min:"1",step:"0.01",className:"pl-10",required:!0})]})]}),Ns.jsxs("div",{className:"sm:col-span-3",children:[Ns.jsx("label",{htmlFor:"dailyBudget",className:"block text-sm font-medium text-pr-text-1",children:"Daily Budget ($)"}),Ns.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[Ns.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:Ns.jsx(Bt,{className:"h-5 w-5 text-gray-400"})}),Ns.jsx(HK,{type:"number",name:"dailyBudget",id:"dailyBudget",value:s.dailyBudget,onChange:p,min:"1",step:"0.01",className:"pl-10",required:!0})]}),Ns.jsx("p",{className:"mt-1 text-xs text-pr-text-2",children:s.endDate?`~${Math.ceil(s.budget/s.dailyBudget)} days of runtime`:"Will run until budget is spent"})]})]})]})}),Ns.jsx("div",{className:"bg-pr-surface-card shadow sm:rounded-lg",children:Ns.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[Ns.jsx("h3",{className:"text-lg font-medium leading-6 text-pr-text-1",children:"Bidding & Optimization"}),Ns.jsx("p",{className:"mt-1 text-sm text-pr-text-2",children:"How you want to bid and optimize your campaign"}),Ns.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[Ns.jsxs("div",{className:"sm:col-span-3",children:[Ns.jsx("label",{htmlFor:"bidStrategy",className:"block text-sm font-medium text-pr-text-1",children:"Bid Strategy"}),Ns.jsx("div",{className:"mt-1",children:Ns.jsxs(QK,{value:s.bidStrategy,onValueChange:e=>h("bidStrategy",e),children:[Ns.jsx(XK,{className:"w-full",children:Ns.jsx(eV,{placeholder:"Select a bid strategy"})}),Ns.jsx(tV,{children:[{value:"lowest_cost",label:"Lowest Cost"},{value:"cost_cap",label:"Cost Cap"},{value:"bid_cap",label:"Bid Cap"}].map(e=>Ns.jsx(rV,{value:e.value,children:e.label},e.value))})]})}),Ns.jsxs("p",{className:"mt-1 text-xs text-pr-text-2",children:["lowest_cost"===s.bidStrategy&&"Automatically get the most results for your budget","cost_cap"===s.bidStrategy&&"Control your average cost per result","bid_cap"===s.bidStrategy&&"Set a maximum bid for each result"]})]}),"lowest_cost"!==s.bidStrategy&&Ns.jsxs("div",{className:"sm:col-span-3",children:[Ns.jsxs("label",{htmlFor:"bidAmount",className:"block text-sm font-medium text-pr-text-1",children:["cost_cap"===s.bidStrategy?"Cost Cap":"Bid Cap"," ($)"]}),Ns.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[Ns.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:Ns.jsx(Bt,{className:"h-5 w-5 text-gray-400"})}),Ns.jsx(HK,{type:"number",name:"bidAmount",id:"bidAmount",value:s.bidAmount,onChange:p,min:"0.01",step:"0.01",className:"pl-10",required:!0})]})]}),Ns.jsxs("div",{className:"sm:col-span-3",children:[Ns.jsx("label",{htmlFor:"targetCtr",className:"block text-sm font-medium text-pr-text-1",children:"Target CTR (%)"}),Ns.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[Ns.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:Ns.jsx(Ar,{className:"h-5 w-5 text-gray-400"})}),Ns.jsx(HK,{type:"number",name:"targetCtr",id:"targetCtr",value:s.targetCtr,onChange:p,min:"0.1",max:"100",step:"0.1",className:"pl-10"})]})]}),Ns.jsxs("div",{className:"sm:col-span-3",children:[Ns.jsx("label",{htmlFor:"targetCpc",className:"block text-sm font-medium text-pr-text-1",children:"Target CPC ($)"}),Ns.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[Ns.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:Ns.jsx(Bt,{className:"h-5 w-5 text-gray-400"})}),Ns.jsx(HK,{type:"number",name:"targetCpc",id:"targetCpc",value:s.targetCpc,onChange:p,min:"0.01",step:"0.01",className:"pl-10"})]})]})]})]})}),Ns.jsxs("div",{className:"flex justify-end space-x-3",children:[Ns.jsx(Oc,{type:"button",variant:"outline",onClick:()=>e(-1),disabled:t,children:"Cancel"}),Ns.jsx(Oc,{type:"submit",disabled:t||d,className:Ec("relative overflow-hidden",d&&"opacity-70 cursor-not-allowed"),children:t?"Creating...":d?"Not Enough Moves":Ns.jsxs(Ns.Fragment,{children:[Ns.jsxs("span",{className:"relative z-10",children:["Create Campaign (",o," moves)"]}),Ns.jsx("span",{className:"absolute inset-y-0 left-0 bg-blue-600",style:{width:`${Math.min(100,n/(o||1)*100)}%`,transition:"width 0.3s ease"}})]})})]})]})})]})}function dV(){const{campaignId:e}=Ce(),t=ke(),[r,s]=u.useState(""),[a,n]=u.useState(!0),[i,l]=u.useState(null);return u.useEffect(()=>{let t=!0;return(async()=>{if(!e)return n(!1),void l("Missing campaign identifier.");try{const r=await kW.getCampaign(e);if(!t)return;if(!r?.campaign)return l("Campaign not found."),void n(!1);s(r.campaign.name??"Campaign")}catch(r){console.error("[EditCampaign] Failed to load campaign",r),t&&l("We were unable to load that campaign.")}finally{t&&n(!1)}})(),()=>{t=!1}},[e]),a?Ns.jsxs("div",{className:"flex h-64 items-center justify-center text-pr-text-2",children:[Ns.jsx(pr,{className:"mr-2 h-5 w-5 animate-spin"}),"Loading campaign details"]}):i?Ns.jsxs("div",{className:"max-w-2xl space-y-6 rounded-xl border border-red-200 bg-red-50 p-6",children:[Ns.jsxs("div",{className:"flex items-center space-x-3 text-red-700",children:[Ns.jsx(yr,{className:"h-5 w-5"}),Ns.jsx("span",{className:"font-medium",children:i})]}),Ns.jsxs(Oc,{variant:"outline",onClick:()=>t(-1),children:[Ns.jsx(ut,{className:"mr-2 h-4 w-4"}),"Back to campaigns"]})]}):Ns.jsxs("div",{className:"space-y-8",children:[Ns.jsx("div",{className:"flex items-start justify-between gap-4",children:Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsxs(Oc,{variant:"outline",size:"icon",onClick:()=>t(-1),className:"h-8 w-8",children:[Ns.jsx(ut,{className:"h-4 w-4"}),Ns.jsx("span",{className:"sr-only",children:"Back"})]}),Ns.jsx("h1",{className:"text-2xl font-bold text-pr-text-1",children:"Edit Campaign"}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:["Detailed editing is coming soon. For now, you can review the campaign from the"," ",Ns.jsx(Ze,{to:`/campaigns/${e}`,className:"text-blue-600 underline",children:"campaign overview page"}),"."]})]})}),Ns.jsxs("div",{className:"rounded-xl border border-pr-surface-3 bg-pr-surface-card p-6 shadow-sm",children:[Ns.jsxs("div",{className:"flex items-center space-x-3 text-pr-text-1",children:[Ns.jsx(yr,{className:"h-5 w-5"}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-pr-text-2",children:"Campaign"}),Ns.jsx("p",{className:"text-lg font-semibold text-pr-text-1",children:r})]})]}),Ns.jsx("p",{className:"mt-4 text-sm text-pr-text-2",children:"The editing workflow is actively being built. If you need to change campaign settings, please reach out to the Promorang team or duplicate the campaign using the Create Campaign flow."})]})]})}function uV(){const[e,t]=u.useState([]),[r,s]=u.useState(null),[a,n]=u.useState(!0),[i,l]=u.useState(null),[o,c]=u.useState("available"),{toast:d}=KW();u.useEffect(()=>{m()},[o]);const m=async()=>{try{n(!0);const[e,r]=await Promise.all([em.listCoupons({status:o}),em.getStats()]);t(e.coupons),s(r)}catch(e){console.error("Failed to fetch rewards:",e),d({title:"Error",description:"Failed to load rewards. Please try again."})}finally{n(!1)}},p=e=>{switch(e){case"coupon":default:return Ns.jsx(Xt,{className:"h-5 w-5"});case"giveaway":return Ns.jsx(Yr,{className:"h-5 w-5"});case"credit":return Ns.jsx(is,{className:"h-5 w-5"})}};return a?Ns.jsx("div",{className:"flex items-center justify-center h-64",children:Ns.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{children:[Ns.jsx("h1",{className:"text-3xl font-bold text-pr-text-1",children:"Your Rewards"}),Ns.jsx("p",{className:"mt-2 text-pr-text-2",children:"Track and redeem your earned coupons, giveaways, and credits"})]}),r&&Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ns.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Total Earned"}),Ns.jsx("p",{className:"text-3xl font-bold mt-1",children:r.total_earned})]}),Ns.jsx(Xt,{className:"h-10 w-10 opacity-80"})]})}),Ns.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Available"}),Ns.jsx("p",{className:"text-3xl font-bold mt-1",children:r.available_count})]}),Ns.jsx(ts,{className:"h-10 w-10 opacity-80"})]})}),Ns.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Redeemed"}),Ns.jsx("p",{className:"text-3xl font-bold mt-1",children:r.total_redeemed})]}),Ns.jsx(Mt,{className:"h-10 w-10 opacity-80"})]})}),Ns.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-orange-100 text-sm font-medium",children:"Total Value"}),Ns.jsxs("p",{className:"text-3xl font-bold mt-1",children:["$",r.total_value.toFixed(0)]})]}),Ns.jsx(as,{className:"h-10 w-10 opacity-80"})]})})]}),Ns.jsx("div",{className:"border-b border-pr-surface-3",children:Ns.jsxs("nav",{className:"flex space-x-8",children:[Ns.jsx("button",{onClick:()=>c("available"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors "+("available"===o?"border-purple-500 text-purple-600":"border-transparent text-pr-text-2 hover:text-pr-text-1 hover:border-pr-surface-3"),children:"Available Rewards"}),Ns.jsx("button",{onClick:()=>c("redeemed"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors "+("redeemed"===o?"border-purple-500 text-purple-600":"border-transparent text-pr-text-2 hover:text-pr-text-1 hover:border-pr-surface-3"),children:"Redeemed"})]})}),e.length>0?Ns.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>{const t=em.isExpiringSoon(e),r=em.getDaysUntilExpiry(e);return Ns.jsxs("div",{className:"bg-pr-surface-card rounded-xl shadow-sm border border-pr-surface-3 overflow-hidden hover:shadow-md transition-shadow",children:[Ns.jsx("div",{className:"p-4 "+("coupon"===e.reward_type?"bg-gradient-to-r from-purple-500 to-pink-500":"giveaway"===e.reward_type?"bg-gradient-to-r from-orange-500 to-red-500":"bg-gradient-to-r from-blue-500 to-cyan-500"),children:Ns.jsxs("div",{className:"flex items-start justify-between text-white",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[p(e.reward_type),Ns.jsx("span",{className:"text-sm font-medium opacity-90",children:em.getSourceDisplay(e.source)})]}),Ns.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s=e.status,{available:"bg-green-100 text-green-700",redeemed:"bg-pr-surface-2 text-pr-text-1",expired:"bg-red-100 text-red-700",depleted:"bg-orange-100 text-orange-700"}[s]||"bg-blue-100 text-blue-700"}`,children:e.status})]})}),Ns.jsxs("div",{className:"p-6 space-y-4",children:[Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:e.title}),e.description&&Ns.jsx("p",{className:"mt-1 text-sm text-pr-text-2",children:e.description})]}),Ns.jsxs("div",{className:"flex items-center justify-between py-3 px-4 bg-pr-surface-2 rounded-lg",children:[Ns.jsx("span",{className:"text-sm text-pr-text-2",children:"Reward Value"}),Ns.jsx("span",{className:"text-lg font-bold text-pr-text-1",children:em.formatCouponValue(e)})]}),Ns.jsxs("div",{className:"space-y-2 text-sm text-pr-text-2",children:[Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(yt,{className:"h-4 w-4"}),Ns.jsxs("span",{children:["Earned ",new Date(e.earned_at).toLocaleDateString()]})]}),!e.is_redeemed&&Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Rt,{className:"h-4 w-4"}),Ns.jsx("span",{className:t?"text-orange-600 font-medium":"",children:r>0?`Expires in ${r} day${1!==r?"s":""}`:"Expires today"})]}),e.is_redeemed&&e.redeemed_at&&Ns.jsxs("div",{className:"flex items-center space-x-2",children:[Ns.jsx(Mt,{className:"h-4 w-4 text-green-600"}),Ns.jsxs("span",{children:["Redeemed ",new Date(e.redeemed_at).toLocaleDateString()]})]})]}),!e.is_redeemed&&"available"===e.status&&Ns.jsx(Oc,{onClick:()=>(async e=>{try{l(e);const t=await em.redeemCoupon(e);d({title:"Reward Claimed! ",description:t.instructions||t.message}),t.code&&setTimeout(()=>{d({title:"Your Coupon Code",description:`Code: ${t.code} - Copy this code to use at checkout`,duration:1e4})},500),m()}catch(t){console.error("Failed to redeem coupon:",t),d({title:"Redemption Failed",description:t.message||"Failed to redeem reward. Please try again."})}finally{l(null)}})(e.assignment_id),disabled:i===e.assignment_id,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:i===e.assignment_id?Ns.jsxs("span",{className:"flex items-center space-x-2",children:[Ns.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),Ns.jsx("span",{children:"Redeeming..."})]}):Ns.jsxs("span",{className:"flex items-center space-x-2",children:[Ns.jsx(Xt,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Redeem Now"})]})})]})]},e.assignment_id);var s})}):Ns.jsxs("div",{className:"text-center py-12 bg-pr-surface-card rounded-lg border border-pr-surface-3",children:[Ns.jsx(Xt,{className:"mx-auto h-16 w-16 text-gray-400"}),Ns.jsx("h3",{className:"mt-4 text-lg font-medium text-pr-text-1",children:"available"===o?"No available rewards":"No redeemed rewards yet"}),Ns.jsx("p",{className:"mt-2 text-sm text-pr-text-2",children:"available"===o?"Complete drops, engage with content, or climb the leaderboard to earn rewards!":"Redeemed rewards will appear here."})]})]})}function mV({className:e,...t}){return Ns.jsx("div",{className:Ec("rounded-xl border border-gray-200 bg-white shadow-sm",e),...t})}function pV(){const{toast:e}=KW(),[t,r]=u.useState(null),[s,a]=u.useState([]),[n,i]=u.useState(!0),[l,o]=u.useState(!1);u.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0);const e=await la("/api/referrals/stats"),t=await e.json();"success"===t.status&&t.data?r(t.data):r(null);const s=await la("/api/referrals/tiers"),n=await s.json();"success"===n.status&&n.data?.tiers?a(n.data.tiers):a([])}catch(t){console.error("Error fetching referral data:",t),e({title:"Error",description:"Failed to load referral data",type:"destructive"})}finally{i(!1)}},d=async()=>{if(!t)return;const r=t.summary.referral_code;if(!r)return void e({title:"Referral code not ready",description:"Your referral code is still being generated. Please try again shortly.",type:"destructive"});const s=`${window.location.origin}/auth?ref=${r}`;try{await navigator.clipboard.writeText(s),o(!0),e({title:"Copied!",description:"Referral link copied to clipboard",type:"success"}),setTimeout(()=>o(!1),2e3)}catch(a){console.error("Error copying:",a)}},m=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(e),p=e=>new Intl.NumberFormat("en-US").format(e);if(n)return Ns.jsx("div",{className:"min-h-screen-dynamic bg-pr-surface-background",children:Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:[Ns.jsx("div",{className:"h-10 w-64 bg-pr-surface-3 rounded-lg animate-pulse"}),Ns.jsx("div",{className:"h-32 rounded-2xl bg-gradient-to-r from-blue-200 to-purple-200 animate-pulse"}),Ns.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((e,t)=>Ns.jsxs("div",{className:"h-40 rounded-xl border border-pr-surface-3 bg-pr-surface-card p-6 animate-pulse",children:[Ns.jsx("div",{className:"h-4 w-24 bg-pr-surface-3 rounded mb-4"}),Ns.jsx("div",{className:"h-8 w-16 bg-pr-surface-3 rounded mb-4"}),Ns.jsx("div",{className:"h-3 w-32 bg-pr-surface-3 rounded"})]},`stat-skeleton-${t}`))}),Ns.jsx("div",{className:"h-12 w-full bg-pr-surface-3 rounded-lg animate-pulse"}),Ns.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((e,t)=>Ns.jsx("div",{className:"h-96 rounded-xl border border-pr-surface-3 bg-pr-surface-card p-6 animate-pulse",children:Ns.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[Ns.jsx("div",{className:"h-16 w-16 bg-pr-surface-3 rounded-full"}),Ns.jsx("div",{className:"h-5 w-24 bg-pr-surface-3 rounded"}),Ns.jsx("div",{className:"h-4 w-32 bg-pr-surface-3 rounded"}),Ns.jsx("div",{className:"h-16 w-full bg-pr-surface-3 rounded-lg"})]})},`tier-skeleton-${t}`))})]})});if(!t)return Ns.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1",children:"Unable to load referral data"}),Ns.jsx(Oc,{onClick:c,className:"mt-4",children:"Try Again"})]})});const h=t.summary.tier||null,x=h?.badge_color||"#6366F1",f=h?.badge_icon||"",g=h?.commission_rate??.05;return Ns.jsx("div",{className:"min-h-screen-dynamic bg-pr-surface-background",children:Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Ns.jsxs("div",{className:"mb-8",children:[Ns.jsx("h1",{className:"text-3xl font-bold text-pr-text-1 mb-2",children:"Referral Dashboard"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Earn rewards by inviting friends to Promorang"})]}),Ns.jsx(mV,{className:"mb-8 p-6 md:p-8 bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-xl",children:Ns.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("h3",{className:"text-lg md:text-xl font-semibold mb-3",children:"Your Referral Code"}),Ns.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[Ns.jsx("code",{className:"text-xl sm:text-2xl font-mono font-bold bg-pr-surface-card/20 px-4 py-2 rounded-lg break-all",children:t.summary.referral_code}),Ns.jsx(Oc,{variant:"outline",size:"sm",onClick:d,className:"bg-pr-surface-card/10 border-white/30 hover:bg-pr-surface-card/20 text-white",children:l?Ns.jsx(St,{className:"h-4 w-4"}):Ns.jsx(Lt,{className:"h-4 w-4"})})]})]}),Ns.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto",children:[Ns.jsxs(Oc,{onClick:d,className:"bg-pr-surface-card text-blue-600 hover:bg-pr-surface-2 w-full sm:w-auto",size:"lg",children:[Ns.jsx(Lt,{className:"mr-2 h-4 w-4"}),"Copy Link"]}),Ns.jsxs(Oc,{onClick:async()=>{if(!t)return;const r=t.summary.referral_code;if(!r)return void e({title:"Referral code not ready",description:"Your referral code is still being generated. Please try again shortly.",type:"destructive"});const s=`${window.location.origin}/auth?ref=${r}`,a=`Join Promorang and earn rewards! Use my referral code: ${r}`;if(navigator.share)try{await navigator.share({title:"Join Promorang",text:a,url:s})}catch(n){console.error("Error sharing:",n)}else d()},className:"bg-pr-surface-card/10 border border-white/30 hover:bg-pr-surface-card/20 text-white w-full sm:w-auto",size:"lg",children:[Ns.jsx(Kr,{className:"mr-2 h-4 w-4"}),"Share"]})]})]})}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[Ns.jsxs(mV,{className:"p-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-medium text-pr-text-2",children:"Total Referrals"}),Ns.jsx("p",{className:"text-3xl font-bold text-pr-text-1 mt-2",children:t.summary.total_referrals})]}),Ns.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center",children:Ns.jsx(us,{className:"h-6 w-6 text-blue-600"})})]}),Ns.jsxs("div",{className:"mt-4 flex items-center text-sm",children:[Ns.jsxs("span",{className:"text-green-600 font-medium",children:[t.summary.active_referrals," active"]}),Ns.jsx("span",{className:"text-pr-text-2 mx-2",children:""}),Ns.jsxs("span",{className:"text-pr-text-2",children:[t.summary.pending_referrals," pending"]})]})]}),Ns.jsxs(mV,{className:"p-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-medium text-pr-text-2",children:"Conversion Rate"}),Ns.jsxs("p",{className:"text-3xl font-bold text-pr-text-1 mt-2",children:[t.summary.conversion_rate,"%"]})]}),Ns.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-full flex items-center justify-center",children:Ns.jsx(as,{className:"h-6 w-6 text-green-600"})})]}),Ns.jsx("div",{className:"mt-4",children:Ns.jsx("div",{className:"w-full bg-pr-surface-3 rounded-full h-2",children:Ns.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${Math.min(100,parseFloat(t.summary.conversion_rate))}%`}})})})]}),Ns.jsxs(mV,{className:"p-6",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-medium text-pr-text-2",children:"Total Earnings"}),Ns.jsx("p",{className:"text-3xl font-bold text-pr-text-1 mt-2",children:m(t.summary.total_earnings.usd)})]}),Ns.jsx("div",{className:"h-12 w-12 bg-yellow-100 rounded-full flex items-center justify-center",children:Ns.jsx(Bt,{className:"h-6 w-6 text-yellow-600"})})]}),Ns.jsxs("div",{className:"mt-4 flex items-center text-sm text-pr-text-2",children:[Ns.jsxs("span",{children:[p(t.summary.total_earnings.gems)," gems"]}),Ns.jsx("span",{className:"mx-2",children:""}),Ns.jsxs("span",{children:[p(t.summary.total_earnings.points)," points"]})]})]}),Ns.jsxs(mV,{className:"p-6",style:h?{borderColor:x,borderWidth:2}:{},children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-medium text-pr-text-2",children:"Current Tier"}),Ns.jsx("p",{className:"text-2xl font-bold text-pr-text-1 mt-2",children:h?.tier_name||"Starter"})]}),Ns.jsx("div",{className:"h-12 w-12 rounded-full flex items-center justify-center text-2xl",style:{backgroundColor:`${x}20`},children:f})]}),Ns.jsxs("div",{className:"mt-4 text-sm text-pr-text-2",children:[(100*g).toFixed(1),"% commission rate"]})]})]}),Ns.jsxs(YW,{defaultValue:"referrals",className:"space-y-6",children:[Ns.jsxs(JW,{className:"bg-pr-surface-card border border-pr-surface-3",children:[Ns.jsx(ZW,{value:"referrals",children:"My Referrals"}),Ns.jsx(ZW,{value:"earnings",children:"Earnings History"}),Ns.jsx(ZW,{value:"tiers",children:"Tier Benefits"})]}),Ns.jsx(QW,{value:"referrals",children:Ns.jsxs(mV,{className:"p-6",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Your Referrals"}),0===t.referrals.length?Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx(us,{className:"mx-auto h-12 w-12 text-gray-400"}),Ns.jsx("h3",{className:"mt-2 text-sm font-medium text-pr-text-1",children:"No referrals yet"}),Ns.jsx("p",{className:"mt-1 text-sm text-pr-text-2",children:"Share your referral code to start earning!"}),Ns.jsxs(Oc,{onClick:d,className:"mt-4",children:[Ns.jsx(Kr,{className:"mr-2 h-4 w-4"}),"Share Referral Code"]})]}):Ns.jsx("div",{className:"space-y-4",children:t.referrals.map(e=>Ns.jsxs("div",{className:"flex items-center justify-between p-4 bg-pr-surface-2 rounded-lg hover:bg-pr-surface-2 transition-colors",children:[Ns.jsxs("div",{className:"flex items-center gap-4",children:[Ns.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-semibold",children:e.users?.display_name?.[0]||e.users?.username?.[0]||"?"}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-medium text-pr-text-1",children:e.users?.display_name||e.users?.username}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:["Joined ",new Date(e.created_at).toLocaleDateString()]})]})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("active"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status}),Ns.jsxs("p",{className:"text-sm text-pr-text-2 mt-1",children:["Earned: ",m(e.total_commission_paid)]})]})]},e.id))})]})}),Ns.jsx(QW,{value:"earnings",children:Ns.jsxs(mV,{className:"p-6",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Recent Earnings"}),0===t.recent_commissions.length?Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx(Bt,{className:"mx-auto h-12 w-12 text-gray-400"}),Ns.jsx("h3",{className:"mt-2 text-sm font-medium text-pr-text-1",children:"No earnings yet"}),Ns.jsx("p",{className:"mt-1 text-sm text-pr-text-2",children:"You'll earn commissions when your referrals complete activities"})]}):Ns.jsx("div",{className:"space-y-3",children:t.recent_commissions.map((e,t)=>Ns.jsxs("div",{className:"flex items-center justify-between p-4 bg-pr-surface-2 rounded-lg",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-medium text-pr-text-1 capitalize",children:e.earning_type.replace("_"," ")}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:new Date(e.paid_at||e.created_at).toLocaleDateString()})]}),Ns.jsx("div",{className:"text-right",children:Ns.jsxs("p",{className:"font-semibold text-green-600",children:["+",e.commission_amount," ",e.commission_currency]})})]},t))})]})}),Ns.jsx(QW,{value:"tiers",children:Ns.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map(e=>{const r=!!h&&e.tier_name===h.tier_name,s=t.summary.total_referrals>=e.min_referrals;return Ns.jsxs(mV,{className:`p-6 relative transition-all hover:shadow-lg ${r?"ring-2 ring-offset-2 shadow-xl":""} ${s?"":"opacity-60"}`,style:{ringColor:r?e.badge_color:void 0,borderColor:r?e.badge_color:void 0,borderWidth:r?"2px":void 0},children:[r&&Ns.jsx("div",{className:"absolute top-3 right-3",children:Ns.jsxs("div",{className:"flex items-center gap-1 bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-semibold",children:[Ns.jsx(ht,{className:"h-3 w-3"}),Ns.jsx("span",{children:"Current"})]})}),!s&&Ns.jsx("div",{className:"absolute inset-0 bg-gray-900/5 rounded-xl pointer-events-none"}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"inline-flex h-20 w-20 items-center justify-center rounded-full text-4xl mb-4 shadow-md",style:{backgroundColor:`${e.badge_color}20`,color:e.badge_color},children:e.badge_icon}),Ns.jsx("h3",{className:"text-xl font-bold text-pr-text-1 mb-1",children:e.tier_name}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mt-1",children:0===e.min_referrals?"Starting tier":`${e.min_referrals}+ referrals`}),Ns.jsxs("div",{className:"mt-4 py-3 px-4 rounded-lg shadow-sm",style:{backgroundColor:`${e.badge_color}10`},children:[Ns.jsxs("p",{className:"text-3xl font-bold",style:{color:e.badge_color},children:[(100*e.commission_rate).toFixed(1),"%"]}),Ns.jsx("p",{className:"text-xs text-pr-text-2 font-medium mt-1",children:"Commission Rate"})]}),Ns.jsx("div",{className:"mt-4 space-y-2 text-left",children:(e.perks||[]).map((e,t)=>Ns.jsxs("div",{className:"flex items-start gap-2 text-sm text-pr-text-1",children:[Ns.jsx(St,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),Ns.jsx("span",{children:e})]},t))}),!s&&Ns.jsx("div",{className:"mt-4 px-3 py-2 bg-pr-surface-2 rounded-lg",children:Ns.jsxs("p",{className:"text-sm font-semibold text-pr-text-1",children:[e.min_referrals-t.summary.total_referrals," more to unlock"]})}),s&&!r&&Ns.jsx("div",{className:"mt-4 px-3 py-2 bg-green-100 rounded-lg",children:Ns.jsx("p",{className:"text-sm font-semibold text-green-700",children:"Unlocked!"})})]})]},e.tier_level)})})})]}),Ns.jsxs(mV,{className:"mt-8 p-6 bg-pr-surface-card border border-pr-surface-3",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"How It Works"}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"inline-flex h-12 w-12 items-center justify-center rounded-full bg-blue-100 text-blue-600 mb-3",children:Ns.jsx(Kr,{className:"h-6 w-6"})}),Ns.jsx("h4",{className:"font-semibold text-pr-text-1 mb-2",children:"1. Share Your Code"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Share your unique referral code with friends, family, and followers"})]}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"inline-flex h-12 w-12 items-center justify-center rounded-full bg-purple-100 text-purple-600 mb-3",children:Ns.jsx(us,{className:"h-6 w-6"})}),Ns.jsx("h4",{className:"font-semibold text-pr-text-1 mb-2",children:"2. They Sign Up"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"When they join using your code, they become your referral"})]}),Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("div",{className:"inline-flex h-12 w-12 items-center justify-center rounded-full bg-green-100 text-green-600 mb-3",children:Ns.jsx(Bt,{className:"h-6 w-6"})}),Ns.jsx("h4",{className:"font-semibold text-pr-text-1 mb-2",children:"3. Earn Rewards"}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:["Earn ",(100*g).toFixed(0),"% commission on everything they earn"]})]})]})]})]})})}let hV=null;const xV=function(){if(hV)return hV;const e="https://dnysosmscoceplvcejkv.supabase.co";return hV=((e,t,r)=>new tc(e,t,r))(e,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRueXNvc21zY29jZXBsdmNlamt2Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MDU3NTY4NCwiZXhwIjoyMDc2MTUxNjg0fQ.kz_8w3HD1_Wm_BM8-4MUIaT2aInqxCQJwxfsDFzzJXo",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"sb-dnysosmscoceplvcejkv-auth-token",flowType:"pkce"},global:{headers:{"X-Client-Info":"promorang-x"}}}),console.log(" Supabase client initialized (singleton) with URL:",e),hV}();function fV(){const{theme:e,setTheme:t}=jc(),{user:r}=Ls(),[s,a]=u.useState(!1),[n,i]=u.useState(!1),l=[{value:"light",label:"Light Mode",description:"Clean and bright interface",icon:Xr},{value:"dark",label:"Dark Grey Mode",description:"Comfortable grey tones for reduced eye strain",icon:kr},{value:"black",label:"Pure Black (OLED)",description:"True black for OLED displays and maximum battery savings",icon:_r}];return Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1 mb-2",children:"Theme Preferences"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Choose your preferred color scheme"})]}),Ns.jsx("div",{className:"space-y-3",children:l.map(({value:n,label:l,description:o,icon:c})=>Ns.jsxs("button",{onClick:()=>(async e=>{if(t(e),r?.id){a(!0);try{const{error:t}=await xV.auth.updateUser({data:{theme:e}});t||(i(!0),setTimeout(()=>i(!1),2e3))}catch(s){console.error("Failed to save theme preference:",s)}finally{a(!1)}}})(n),disabled:s,className:`\n              w-full flex items-start gap-4 p-4 rounded-xl border-2 transition-all\n              ${e===n?"border-primary-500 bg-primary-50 dark:bg-primary-900/10":"border-pr-surface-3 hover:border-pr-surface-3 hover:bg-pr-surface-2"}\n              ${s?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n            `,children:[Ns.jsx("div",{className:`\n              p-3 rounded-lg flex-shrink-0\n              ${e===n?"bg-primary-500 text-white":"bg-pr-surface-2 text-pr-text-2"}\n            `,children:Ns.jsx(c,{className:"w-6 h-6"})}),Ns.jsxs("div",{className:"flex-1 text-left",children:[Ns.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ns.jsx("span",{className:"font-semibold "+(e===n?"text-primary-700 dark:text-primary-400":"text-pr-text-1"),children:l}),e===n&&Ns.jsx(St,{className:"w-5 h-5 text-primary-600 flex-shrink-0"})]}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:o})]})]},n))}),n&&Ns.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[Ns.jsx(St,{className:"w-5 h-5 text-green-600"}),Ns.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-400",children:"Theme preference saved successfully"})]}),Ns.jsx("div",{className:"pt-4 border-t border-pr-surface-3",children:Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Your theme preference is automatically synced across all your devices."})})]})}function gV(){const{user:e}=Ls(),[t,r]=u.useState({publicProfile:!0,followersOnly:!1,privateMode:!1,showPoints:!0,showKeys:!0,showGems:!0,showShares:!0,showPredictions:!0}),[s,a]=u.useState(!1),[n,i]=u.useState(!1);u.useEffect(()=>{l()},[e]);const l=async()=>{if(e?.id)try{const{data:{user:e}}=await xV.auth.getUser(),t=e?.user_metadata?.privacy;t&&r(e=>({...e,...t}))}catch(t){console.error("Failed to load privacy preferences:",t)}},o=e=>{r(t=>({...t,[e]:!t[e]}))};return Ns.jsxs("div",{className:"space-y-8",children:[Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1 mb-2",children:"Privacy & Visibility"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Control who can see your profile and activity"})]}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("h3",{className:"text-lg font-semibold text-pr-text-1 flex items-center gap-2",children:[Ns.jsx(er,{className:"w-5 h-5"}),"Profile Visibility"]}),Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsxs("label",{className:"flex items-center justify-between p-4 bg-pr-surface-2 rounded-lg cursor-pointer hover:bg-pr-surface-3 transition-colors",children:[Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("div",{className:"font-medium text-pr-text-1",children:"Public Profile"}),Ns.jsx("div",{className:"text-sm text-pr-text-2",children:"Anyone can view your profile and activity"})]}),Ns.jsx("input",{type:"checkbox",checked:t.publicProfile,onChange:()=>o("publicProfile"),className:"w-5 h-5 rounded border-pr-surface-3 text-primary-600 focus:ring-primary-500"})]}),Ns.jsxs("label",{className:"flex items-center justify-between p-4 bg-pr-surface-2 rounded-lg cursor-pointer hover:bg-pr-surface-3 transition-colors",children:[Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("div",{className:"font-medium text-pr-text-1",children:"Followers Only"}),Ns.jsx("div",{className:"text-sm text-pr-text-2",children:"Only your followers can see your content"})]}),Ns.jsx("input",{type:"checkbox",checked:t.followersOnly,onChange:()=>o("followersOnly"),className:"w-5 h-5 rounded border-pr-surface-3 text-primary-600 focus:ring-primary-500"})]}),Ns.jsxs("label",{className:"flex items-center justify-between p-4 bg-pr-surface-2 rounded-lg cursor-pointer hover:bg-pr-surface-3 transition-colors",children:[Ns.jsxs("div",{className:"flex-1",children:[Ns.jsxs("div",{className:"font-medium text-pr-text-1 flex items-center gap-2",children:[Ns.jsx(hr,{className:"w-4 h-4"}),"Private Mode"]}),Ns.jsx("div",{className:"text-sm text-pr-text-2",children:"Fully hidden except on required interactions"})]}),Ns.jsx("input",{type:"checkbox",checked:t.privateMode,onChange:()=>o("privateMode"),className:"w-5 h-5 rounded border-pr-surface-3 text-primary-600 focus:ring-primary-500"})]})]})]}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("h3",{className:"text-lg font-semibold text-pr-text-1 flex items-center gap-2",children:[Ns.jsx(Ht,{className:"w-5 h-5"}),"Activity Display"]}),Ns.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{key:"showPoints",label:"Show Points Balance",icon:""},{key:"showKeys",label:"Show Keys Balance",icon:""},{key:"showGems",label:"Show Gems Balance",icon:""},{key:"showShares",label:"Show Shares Owned",icon:""},{key:"showPredictions",label:"Show Predictions",icon:""}].map(({key:e,label:r,icon:s})=>Ns.jsxs("label",{className:"flex items-center justify-between p-3 bg-pr-surface-2 rounded-lg cursor-pointer hover:bg-pr-surface-3 transition-colors",children:[Ns.jsxs("div",{className:"flex items-center gap-2",children:[Ns.jsx("span",{className:"text-xl",children:s}),Ns.jsx("span",{className:"text-sm font-medium text-pr-text-1",children:r})]}),Ns.jsx("input",{type:"checkbox",checked:t[e],onChange:()=>o(e),className:"w-4 h-4 rounded border-pr-surface-3 text-primary-600 focus:ring-primary-500"})]},e))})]}),Ns.jsxs("div",{className:"flex items-center gap-4 pt-4 border-t border-pr-surface-3",children:[Ns.jsxs("button",{onClick:async()=>{if(e?.id){a(!0);try{const{error:e}=await xV.auth.updateUser({data:{privacy:t}});e||(i(!0),setTimeout(()=>i(!1),2e3))}catch(r){console.error("Failed to save privacy preferences:",r)}finally{a(!1)}}},disabled:s,className:"flex items-center gap-2 px-6 py-3 bg-primary-500 hover:bg-primary-600 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[Ns.jsx(Ur,{className:"w-5 h-5"}),s?"Saving...":"Save Privacy Settings"]}),n&&Ns.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:" Saved successfully"})]})]})}const bV=[{id:"beauty",label:"Beauty & Cosmetics",icon:""},{id:"fitness",label:"Fitness & Wellness",icon:""},{id:"tech",label:"Technology",icon:""},{id:"finance",label:"Finance & Investing",icon:""},{id:"automotive",label:"Automotive",icon:""},{id:"fashion",label:"Fashion & Style",icon:""},{id:"local",label:"Local Businesses",icon:""},{id:"food",label:"Food & Dining",icon:""},{id:"travel",label:"Travel & Tourism",icon:""},{id:"entertainment",label:"Entertainment",icon:""}],vV=[{id:"reels",label:"Reels / Short Videos",icon:ms},{id:"static",label:"Static Posts / Images",icon:ar},{id:"longform",label:"Long-form Content",icon:Yt}],yV=[{id:"content_shares",label:"Content Shares",icon:""},{id:"predictions",label:"Predictions & Forecasts",icon:""},{id:"tasks",label:"Tasks & Challenges",icon:""},{id:"ecommerce",label:"E-commerce Drops",icon:""},{id:"investments",label:"Investment Opportunities",icon:""}];function jV(){const{user:e}=Ls(),[t,r]=u.useState({categories:[],formats:["reels","static","longform"],blockedCreators:[],blockedBrands:[],opportunities:["content_shares","predictions","tasks","ecommerce"]}),[s,a]=u.useState(""),[n,i]=u.useState("creator"),[l,o]=u.useState(!1),[c,d]=u.useState(!1);u.useEffect(()=>{m()},[e]);const m=async()=>{if(e?.id)try{const{data:{user:e}}=await xV.auth.getUser(),t=e?.user_metadata?.contentPreferences;t&&r(e=>({...e,...t}))}catch(t){console.error("Failed to load content preferences:",t)}},p=()=>{if(!s.trim())return;const e="creator"===n?"blockedCreators":"blockedBrands";r(t=>({...t,[e]:[...t[e],s.trim()]})),a("")},h=(e,t)=>{const s="creator"===t?"blockedCreators":"blockedBrands";r(t=>({...t,[s]:t[s].filter(t=>t!==e)}))};return Ns.jsxs("div",{className:"space-y-8",children:[Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1 mb-2",children:"Content Preferences"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Customize your content feed and opportunities"})]}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("h3",{className:"text-lg font-semibold text-pr-text-1 flex items-center gap-2",children:[Ns.jsx(rr,{className:"w-5 h-5"}),"Preferred Categories"]}),Ns.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:bV.map(({id:e,label:s,icon:a})=>Ns.jsxs("label",{className:`\n                flex items-center gap-2 p-3 rounded-lg cursor-pointer transition-all border-2\n                ${t.categories.includes(e)?"bg-primary-50 dark:bg-primary-900/20 border-primary-500":"bg-pr-surface-2 border-pr-surface-3 hover:border-pr-surface-3"}\n              `,children:[Ns.jsx("input",{type:"checkbox",checked:t.categories.includes(e),onChange:()=>{return t=e,void r(e=>({...e,categories:e.categories.includes(t)?e.categories.filter(e=>e!==t):[...e.categories,t]}));var t},className:"sr-only"}),Ns.jsx("span",{className:"text-xl",children:a}),Ns.jsx("span",{className:"text-sm font-medium text-pr-text-1",children:s})]},e))})]}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"Content Formats"}),Ns.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:vV.map(({id:e,label:s,icon:a})=>Ns.jsxs("label",{className:`\n                flex items-center gap-3 p-4 rounded-lg cursor-pointer transition-all border-2\n                ${t.formats.includes(e)?"bg-primary-50 dark:bg-primary-900/20 border-primary-500":"bg-pr-surface-2 border-pr-surface-3 hover:border-pr-surface-3"}\n              `,children:[Ns.jsx("input",{type:"checkbox",checked:t.formats.includes(e),onChange:()=>{return t=e,void r(e=>({...e,formats:e.formats.includes(t)?e.formats.filter(e=>e!==t):[...e.formats,t]}));var t},className:"sr-only"}),Ns.jsx(a,{className:"w-5 h-5 text-pr-text-1"}),Ns.jsx("span",{className:"text-sm font-medium text-pr-text-1",children:s})]},e))})]}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("h3",{className:"text-lg font-semibold text-pr-text-1 flex items-center gap-2",children:[Ns.jsx(as,{className:"w-5 h-5"}),"Preferred Opportunities"]}),Ns.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:yV.map(({id:e,label:s,icon:a})=>Ns.jsxs("label",{className:`\n                flex items-center gap-2 p-3 rounded-lg cursor-pointer transition-all border-2\n                ${t.opportunities.includes(e)?"bg-primary-50 dark:bg-primary-900/20 border-primary-500":"bg-pr-surface-2 border-pr-surface-3 hover:border-pr-surface-3"}\n              `,children:[Ns.jsx("input",{type:"checkbox",checked:t.opportunities.includes(e),onChange:()=>{return t=e,void r(e=>({...e,opportunities:e.opportunities.includes(t)?e.opportunities.filter(e=>e!==t):[...e.opportunities,t]}));var t},className:"sr-only"}),Ns.jsx("span",{className:"text-xl",children:a}),Ns.jsx("span",{className:"text-sm font-medium text-pr-text-1",children:s})]},e))})]}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("h3",{className:"text-lg font-semibold text-pr-text-1 flex items-center gap-2",children:[Ns.jsx(Hr,{className:"w-5 h-5"}),"Block List"]}),Ns.jsxs("div",{className:"flex gap-2",children:[Ns.jsxs("select",{value:n,onChange:e=>i(e.target.value),className:"px-3 py-2 bg-pr-surface-2 border border-pr-surface-3 rounded-lg text-pr-text-1",children:[Ns.jsx("option",{value:"creator",children:"Creator"}),Ns.jsx("option",{value:"brand",children:"Brand"})]}),Ns.jsx("input",{type:"text",value:s,onChange:e=>a(e.target.value),onKeyPress:e=>"Enter"===e.key&&p(),placeholder:`Enter ${n} name...`,className:"flex-1 px-3 py-2 bg-pr-surface-2 border border-pr-surface-3 rounded-lg text-pr-text-1 placeholder-pr-text-2"}),Ns.jsx("button",{onClick:p,className:"px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white font-medium rounded-lg transition-colors",children:"Add"})]}),(t.blockedCreators.length>0||t.blockedBrands.length>0)&&Ns.jsxs("div",{className:"space-y-2",children:[t.blockedCreators.map(e=>Ns.jsxs("div",{className:"flex items-center justify-between p-2 bg-pr-surface-2 rounded-lg",children:[Ns.jsxs("span",{className:"text-sm text-pr-text-1",children:[Ns.jsx("span",{className:"font-medium",children:"Creator:"})," ",e]}),Ns.jsx("button",{onClick:()=>h(e,"creator"),className:"p-1 hover:bg-pr-surface-3 rounded transition-colors",children:Ns.jsx(hs,{className:"w-4 h-4 text-pr-text-2"})})]},e)),t.blockedBrands.map(e=>Ns.jsxs("div",{className:"flex items-center justify-between p-2 bg-pr-surface-2 rounded-lg",children:[Ns.jsxs("span",{className:"text-sm text-pr-text-1",children:[Ns.jsx("span",{className:"font-medium",children:"Brand:"})," ",e]}),Ns.jsx("button",{onClick:()=>h(e,"brand"),className:"p-1 hover:bg-pr-surface-3 rounded transition-colors",children:Ns.jsx(hs,{className:"w-4 h-4 text-pr-text-2"})})]},e))]})]}),Ns.jsxs("div",{className:"flex items-center gap-4 pt-4 border-t border-pr-surface-3",children:[Ns.jsxs("button",{onClick:async()=>{if(e?.id){o(!0);try{const{error:e}=await xV.auth.updateUser({data:{contentPreferences:t}});e||(d(!0),setTimeout(()=>d(!1),2e3))}catch(r){console.error("Failed to save content preferences:",r)}finally{o(!1)}}},disabled:l,className:"flex items-center gap-2 px-6 py-3 bg-primary-500 hover:bg-primary-600 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[Ns.jsx(Ur,{className:"w-5 h-5"}),l?"Saving...":"Save Preferences"]}),c&&Ns.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:" Saved successfully"})]})]})}const wV=[{id:"creator",label:"Creator",description:"Share content, build audience, earn from drops",icon:Er,features:["Create and share content","Participate in drops","Earn gems and rewards","Build follower base"],color:"purple"},{id:"merchant",label:"Merchant",description:"Sell products, manage inventory, run promotions",icon:Gr,features:["List products for sale","Manage inventory","Process orders","Run promotional campaigns"],color:"blue"},{id:"advertiser",label:"Advertiser",description:"Run campaigns, reach audiences, track performance",icon:yr,features:["Create marketing campaigns","Target specific audiences","Track campaign analytics","Manage ad budgets"],color:"orange"},{id:"investor",label:"Investor",description:"Invest in creators, track portfolios, earn returns",icon:as,features:["Invest in creator shares","Track portfolio performance","Earn from creator success","Access investment analytics"],color:"green"}];function NV(){const{user:e}=Ls(),[t,r]=u.useState(["creator"]),[s,a]=u.useState(!1),[n,i]=u.useState(!1);u.useEffect(()=>{l()},[e]);const l=async()=>{if(e?.id)try{const{data:{user:e}}=await xV.auth.getUser(),t=e?.user_metadata?.roles;t&&Array.isArray(t)&&t.length>0&&r(t)}catch(t){console.error("Failed to load roles:",t)}},o=(e,t)=>{const r={purple:t?"bg-purple-50 dark:bg-purple-900/20 border-purple-500 text-purple-700 dark:text-purple-400":"bg-pr-surface-2 border-pr-surface-3 hover:border-purple-300",blue:t?"bg-blue-50 dark:bg-blue-900/20 border-blue-500 text-blue-700 dark:text-blue-400":"bg-pr-surface-2 border-pr-surface-3 hover:border-blue-300",orange:t?"bg-orange-50 dark:bg-orange-900/20 border-orange-500 text-orange-700 dark:text-orange-400":"bg-pr-surface-2 border-pr-surface-3 hover:border-orange-300",green:t?"bg-green-50 dark:bg-green-900/20 border-green-500 text-green-700 dark:text-green-400":"bg-pr-surface-2 border-pr-surface-3 hover:border-green-300"};return r[e]||r.purple};return Ns.jsxs("div",{className:"space-y-8",children:[Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1 mb-2",children:"User Roles"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Select one or more roles to customize your experience"})]}),Ns.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:Ns.jsxs("div",{className:"flex items-start gap-3",children:[Ns.jsx(nr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),Ns.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:[Ns.jsx("p",{className:"font-medium mb-1",children:"Multiple Roles"}),Ns.jsx("p",{children:"You can select multiple roles simultaneously. Your dashboard and features will adapt based on your selected roles."})]})]})}),Ns.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:wV.map(e=>{const s=t.includes(e.id),a=e.icon;return Ns.jsxs("button",{onClick:()=>{return t=e.id,void r(e=>e.includes(t)?1===e.length?e:e.filter(e=>e!==t):[...e,t]);var t},className:`\n                text-left p-6 rounded-xl border-2 transition-all\n                ${o(e.color,s)}\n              `,children:[Ns.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[Ns.jsx("div",{className:`\n                  p-3 rounded-lg flex-shrink-0\n                  ${s?`bg-${e.color}-500 text-white`:"bg-pr-surface-3 text-pr-text-2"}\n                `,children:Ns.jsx(a,{className:"w-6 h-6"})}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("h3",{className:"text-lg font-bold text-pr-text-1 mb-1",children:e.label}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:e.description})]}),s&&Ns.jsx("div",{className:"w-6 h-6 rounded-full bg-primary-500 flex items-center justify-center flex-shrink-0",children:Ns.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Ns.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}),Ns.jsxs("div",{className:"space-y-2",children:[Ns.jsx("p",{className:"text-xs font-semibold text-pr-text-2 uppercase tracking-wide",children:"Key Features"}),Ns.jsx("ul",{className:"space-y-1",children:e.features.map((e,t)=>Ns.jsxs("li",{className:"flex items-start gap-2 text-sm text-pr-text-2",children:[Ns.jsx("span",{className:"text-primary-500 mt-0.5",children:""}),Ns.jsx("span",{children:e})]},t))})]})]},e.id)})}),t.length>0&&Ns.jsxs("div",{className:"bg-pr-surface-2 rounded-lg p-4",children:[Ns.jsxs("p",{className:"text-sm font-medium text-pr-text-1 mb-2",children:["Active Roles (",t.length,")"]}),Ns.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(e=>{const t=wV.find(t=>t.id===e);return t?Ns.jsx("span",{className:"px-3 py-1 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400 rounded-full text-sm font-medium",children:t.label},e):null})})]}),Ns.jsxs("div",{className:"flex items-center gap-4 pt-4 border-t border-pr-surface-3",children:[Ns.jsxs("button",{onClick:async()=>{if(e?.id){a(!0);try{const{error:e}=await xV.auth.updateUser({data:{roles:t}});e||(i(!0),setTimeout(()=>i(!1),2e3))}catch(r){console.error("Failed to save roles:",r)}finally{a(!1)}}},disabled:s,className:"flex items-center gap-2 px-6 py-3 bg-primary-500 hover:bg-primary-600 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[Ns.jsx(Ur,{className:"w-5 h-5"}),s?"Saving...":"Save Role Settings"]}),n&&Ns.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:" Saved successfully"})]})]})}function _V(){const[e,t]=u.useState("theme"),r=[{id:"theme",label:"Theme",icon:Er},{id:"privacy",label:"Privacy & Visibility",icon:Vr},{id:"content",label:"Content Preferences",icon:rr},{id:"roles",label:"User Roles",icon:us}];return Ns.jsxs("div",{className:"max-w-[1600px] 2xl:max-w-[1800px] mx-auto px-4 md:px-6 xl:px-8 2xl:px-12 py-6 pb-mobile-nav lg:pb-8",children:[Ns.jsxs("div",{className:"mb-8",children:[Ns.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Ns.jsx(Wr,{className:"w-8 h-8 text-primary-600"}),Ns.jsx("h1",{className:"text-3xl font-bold text-pr-text-1",children:"Settings"})]}),Ns.jsx("p",{className:"text-pr-text-2",children:"Manage your account preferences and settings"})]}),Ns.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[280px_1fr] gap-6",children:[Ns.jsx("nav",{className:"space-y-1",children:Ns.jsx("div",{className:"bg-pr-surface-1 rounded-xl border border-pr-surface-3 p-2 lg:sticky lg:top-6",children:r.map(({id:r,label:s,icon:a})=>Ns.jsxs("button",{onClick:()=>t(r),className:`\n                  w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all\n                  ${e===r?"bg-primary-500 text-white shadow-md":"text-pr-text-2 hover:bg-pr-surface-2 hover:text-pr-text-1"}\n                `,children:[Ns.jsx(a,{className:"w-5 h-5 flex-shrink-0"}),Ns.jsx("span",{className:"font-medium text-sm",children:s})]},r))})}),Ns.jsxs("div",{className:"bg-pr-surface-1 rounded-xl border border-pr-surface-3 p-6 lg:p-8",children:["theme"===e&&Ns.jsx(fV,{}),"privacy"===e&&Ns.jsx(gV,{}),"content"===e&&Ns.jsx(jV,{}),"roles"===e&&Ns.jsx(NV,{})]})]})]})}function kV(){const e=ke(),{toast:t}=KW(),[r,s]=u.useState([]),[a,n]=u.useState([]),[i,l]=u.useState(!0),[o,c]=u.useState(""),[d,m]=u.useState(""),[p,h]=u.useState("created_at"),[x,f]=u.useState("grid"),[g,b]=u.useState(!1);u.useEffect(()=>{v()},[d,p]);const v=async()=>{try{l(!0);const e=new URLSearchParams({status:"active",sort_by:p,limit:"50"});d&&e.append("category_id",d),o&&e.append("search",o);const t=await la(`/api/marketplace/products?${e.toString()}`),r=await t.json();"success"===r.status&&s(r.data.products);const a=await la("/api/marketplace/categories"),i=await a.json();"success"===i.status&&n(i.data.categories)}catch(e){console.error("Error fetching marketplace data:",e),t({title:"Error",description:"Failed to load marketplace",type:"destructive"})}finally{l(!1)}},y=()=>{v()},j=e=>{const t=[];return e.price_usd&&t.push(`$${e.price_usd.toFixed(2)}`),e.price_gems&&t.push(`${e.price_gems} `),e.price_gold&&t.push(`${e.price_gold} `),t.join(" or ")};return i?Ns.jsx("div",{className:"min-h-screen-dynamic bg-pr-surface-background",children:Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:[Ns.jsx("div",{className:"h-24 rounded-2xl bg-gradient-to-r from-purple-200/80 via-white to-blue-200/60 animate-pulse"}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[Ns.jsx("div",{className:"h-12 rounded-lg bg-pr-surface-card/70 border border-purple-100 animate-pulse flex-1"}),Ns.jsx("div",{className:"h-12 w-32 rounded-lg bg-pr-surface-card/70 border border-purple-100 animate-pulse"})]}),Ns.jsx("div",{className:"flex items-center gap-2 overflow-hidden",children:Array.from({length:5}).map((e,t)=>Ns.jsx("div",{className:"h-10 w-28 rounded-lg bg-pr-surface-card/70 border border-purple-100 animate-pulse"},`category-skeleton-${t}`))})]}),Ns.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((e,t)=>Ns.jsxs("div",{className:"rounded-xl border border-pr-surface-3 bg-pr-surface-card/80 p-4 space-y-4 animate-pulse",children:[Ns.jsx("div",{className:"relative pb-[100%] bg-pr-surface-3/60 rounded-lg"}),Ns.jsx("div",{className:"h-5 bg-pr-surface-3/70 rounded w-3/4"}),Ns.jsx("div",{className:"h-4 bg-pr-surface-3/60 rounded w-full"}),Ns.jsx("div",{className:"h-4 bg-pr-surface-3/50 rounded w-2/3"}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("div",{className:"h-4 w-24 bg-pr-surface-3/70 rounded"}),Ns.jsx("div",{className:"h-9 w-20 bg-pr-surface-3/70 rounded"})]})]},`card-skeleton-${t}`))})]})}):Ns.jsx("div",{className:"min-h-screen-dynamic bg-pr-surface-background",children:Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Ns.jsxs("div",{className:"mb-8",children:[Ns.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[Ns.jsxs("div",{children:[Ns.jsx("h1",{className:"text-3xl font-bold text-pr-text-1",children:"Marketplace"}),Ns.jsx("p",{className:"text-pr-text-2 mt-1",children:"Discover products from creators and brands"})]}),Ns.jsxs("div",{className:"flex items-center gap-3",children:[Ns.jsxs(Oc,{onClick:()=>b(!0),className:"bg-pr-surface-card text-pr-text-1 border border-pr-surface-3 hover:bg-pr-surface-2 md:hidden",variant:"ghost",children:[Ns.jsx(Zt,{className:"mr-2 h-4 w-4"}),"Filters"]}),Ns.jsxs(Oc,{onClick:()=>e("/merchant/dashboard"),className:"bg-gradient-to-r from-purple-600 to-blue-600",children:[Ns.jsx(Qr,{className:"mr-2 h-4 w-4"}),"Sell on Promorang"]})]})]}),Ns.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[Ns.jsxs("div",{className:"flex-1 relative",children:[Ns.jsx(Br,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"}),Ns.jsx("input",{type:"text",placeholder:"Search products...",value:o,onChange:e=>c(e.target.value),onKeyPress:e=>"Enter"===e.key&&y(),className:"w-full pl-11 pr-4 py-3 bg-pr-surface-1 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-pr-text-1 placeholder:text-gray-400"})]}),Ns.jsx(Oc,{onClick:y,className:"md:w-auto",children:"Search"})]})]}),Ns.jsx("div",{className:"mb-8 hidden md:block",children:Ns.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:[Ns.jsx("button",{onClick:()=>m(""),className:"px-4 py-2 rounded-lg whitespace-nowrap transition-colors "+(d?"bg-pr-surface-card text-pr-text-1 hover:bg-pr-surface-2 border border-pr-surface-3":"bg-blue-600 text-white"),children:"All Products"}),a.map(e=>Ns.jsxs("button",{onClick:()=>m(e.id),className:"px-4 py-2 rounded-lg whitespace-nowrap transition-colors flex items-center gap-2 "+(d===e.id?"bg-blue-600 text-white":"bg-pr-surface-card text-pr-text-1 hover:bg-pr-surface-2 border border-pr-surface-3"),children:[Ns.jsx("span",{children:e.icon}),Ns.jsx("span",{children:e.name})]},e.id))]})}),Ns.jsxs("div",{className:"hidden md:flex items-center justify-between mb-6",children:[Ns.jsxs("div",{className:"flex items-center gap-4",children:[Ns.jsxs("select",{value:p,onChange:e=>h(e.target.value),className:"px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[Ns.jsx("option",{value:"created_at",children:"Newest"}),Ns.jsx("option",{value:"sales_count",children:"Best Selling"}),Ns.jsx("option",{value:"rating",children:"Top Rated"}),Ns.jsx("option",{value:"price_usd",children:"Price: Low to High"})]}),Ns.jsxs("span",{className:"text-sm text-pr-text-2",children:[r.length," products"]})]}),Ns.jsxs("div",{className:"flex items-center gap-2",children:[Ns.jsx("button",{onClick:()=>f("grid"),className:"p-2 rounded-lg "+("grid"===x?"bg-blue-100 text-blue-600":"text-pr-text-2 hover:bg-pr-surface-2"),children:Ns.jsx(tr,{className:"h-5 w-5"})}),Ns.jsx("button",{onClick:()=>f("list"),className:"p-2 rounded-lg "+("list"===x?"bg-blue-100 text-blue-600":"text-pr-text-2 hover:bg-pr-surface-2"),children:Ns.jsx(mr,{className:"h-5 w-5"})})]})]}),g&&Ns.jsxs("div",{className:"md:hidden fixed inset-0 z-40",children:[Ns.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>b(!1),"aria-hidden":"true"}),Ns.jsxs("div",{className:"absolute inset-y-0 right-0 w-full max-w-sm bg-pr-surface-card shadow-2xl p-6 overflow-y-auto",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ns.jsx("h2",{className:"text-lg font-semibold text-pr-text-1",children:"Filters"}),Ns.jsx("button",{onClick:()=>b(!1),className:"p-2 rounded-full bg-pr-surface-2 text-pr-text-2 hover:text-pr-text-1","aria-label":"Close filters",children:Ns.jsx(hs,{className:"h-5 w-5"})})]}),Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-sm font-medium text-pr-text-1 mb-3",children:"Sort by"}),Ns.jsxs("select",{value:p,onChange:e=>h(e.target.value),className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[Ns.jsx("option",{value:"created_at",children:"Newest"}),Ns.jsx("option",{value:"sales_count",children:"Best Selling"}),Ns.jsx("option",{value:"rating",children:"Top Rated"}),Ns.jsx("option",{value:"price_usd",children:"Price: Low to High"})]})]}),Ns.jsxs("div",{children:[Ns.jsx("h3",{className:"text-sm font-medium text-pr-text-1 mb-3",children:"Categories"}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Ns.jsx("button",{onClick:()=>m(""),className:"px-4 py-2 rounded-lg text-sm transition-colors "+(d?"bg-pr-surface-card text-pr-text-1 hover:bg-pr-surface-2 border border-pr-surface-3":"bg-blue-600 text-white"),children:"All Products"}),a.map(e=>Ns.jsxs("button",{onClick:()=>m(e.id),className:"px-4 py-2 rounded-lg text-sm transition-colors flex items-center gap-2 "+(d===e.id?"bg-blue-600 text-white":"bg-pr-surface-card text-pr-text-1 hover:bg-pr-surface-2 border border-pr-surface-3"),children:[Ns.jsx("span",{children:e.icon}),Ns.jsx("span",{children:e.name})]},e.id))]})]}),Ns.jsx(Oc,{className:"w-full",onClick:()=>b(!1),children:"Apply filters"})]})]})]}),0===r.length?Ns.jsxs("div",{className:"text-center py-16",children:[Ns.jsx(Qr,{className:"mx-auto h-16 w-16 text-purple-400"}),Ns.jsx("h3",{className:"mt-4 text-xl font-semibold text-pr-text-1",children:"No products match your filters"}),Ns.jsx("p",{className:"mt-2 text-sm text-pr-text-2 max-w-md mx-auto",children:"Try adjusting your filters or browse featured collections to discover creators and brands."}),Ns.jsxs("div",{className:"mt-6 flex flex-wrap justify-center gap-3",children:[Ns.jsx(Oc,{onClick:()=>m(""),className:"bg-blue-600 hover:bg-blue-700",children:"View all products"}),Ns.jsx(Oc,{variant:"outline",onClick:()=>e("/marketplace"),className:"border-purple-500 text-purple-600 hover:bg-purple-50",children:"Explore featured picks"})]})]}):Ns.jsx("div",{className:"grid"===x?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:r.map(r=>Ns.jsxs(mV,{className:"overflow-hidden hover:shadow-xl transition-shadow cursor-pointer "+("list"===x?"flex flex-row":""),onClick:()=>e(`/marketplace/product/${r.id}`),children:[r.is_featured&&Ns.jsx("div",{className:"absolute top-2 right-2 z-10",children:Ns.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[Ns.jsx(Yr,{className:"h-3 w-3 mr-1"}),"Featured"]})}),Ns.jsx("div",{className:"list"===x?"w-48 flex-shrink-0":"relative pb-[100%]",children:Ns.jsx("img",{src:r.images[0]||"https://via.placeholder.com/400",alt:r.name,className:"list"===x?"w-full h-full object-cover":"absolute inset-0 w-full h-full object-cover"})}),Ns.jsxs("div",{className:"p-4 flex-1",children:[Ns.jsx("div",{className:"flex items-start justify-between mb-2",children:Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("h3",{className:"font-semibold text-pr-text-1 line-clamp-2",children:r.name}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mt-1 line-clamp-2",children:r.short_description})]})}),Ns.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Ns.jsxs("div",{className:"flex items-center text-yellow-500",children:[Ns.jsx(Zr,{className:"h-4 w-4 fill-current"}),Ns.jsx("span",{className:"text-sm font-medium ml-1",children:r.rating.toFixed(1)})]}),Ns.jsxs("span",{className:"text-sm text-pr-text-2",children:["(",r.review_count,")"]}),Ns.jsx("span",{className:"text-sm text-pr-text-2",children:""}),Ns.jsxs("span",{className:"text-sm text-pr-text-2",children:[r.sales_count," sold"]})]}),Ns.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Ns.jsx("img",{src:r.merchant_stores.logo_url||"https://via.placeholder.com/32",alt:r.merchant_stores.store_name,className:"h-6 w-6 rounded-full"}),Ns.jsx("span",{className:"text-sm text-pr-text-2",children:r.merchant_stores.store_name})]}),Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("div",{className:"font-bold text-lg text-pr-text-1",children:j(r)}),Ns.jsxs(Oc,{size:"sm",onClick:e=>{e.stopPropagation(),(async e=>{try{const r=await la("/api/marketplace/cart/items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:e,quantity:1})});"success"===(await r.json()).status&&t({title:"Added to cart",description:"Product added to your cart",type:"success"})}catch(r){console.error("Error adding to cart:",r),t({title:"Error",description:"Failed to add to cart",type:"destructive"})}})(r.id)},className:"bg-blue-600 hover:bg-blue-700",children:[Ns.jsx(Gr,{className:"h-4 w-4 mr-1"}),"Add"]})]})]})]},r.id))})]})})}function SV(){const{productId:e}=Ce(),t=ke(),{toast:r}=KW(),[s,a]=u.useState(null),[n,i]=u.useState([]),[l,o]=u.useState(!0),[c,d]=u.useState(0),[m,p]=u.useState(1);u.useEffect(()=>{e&&(h(),x())},[e]);const h=async()=>{try{const t=await la(`/api/marketplace/products/${e}`),r=await t.json();"success"===r.status&&a(r.data.product)}catch(t){console.error("Error fetching product:",t)}finally{o(!1)}},x=async()=>{try{const t=await la(`/api/marketplace/products/${e}/reviews`),r=await t.json();"success"===r.status&&i(r.data.reviews)}catch(t){console.error("Error fetching reviews:",t)}},f=async()=>{try{const t=await la("/api/marketplace/cart/items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:e,quantity:m})});"success"===(await t.json()).status&&r({title:"Added to cart",description:`${m} item(s) added to your cart`,type:"success"})}catch(t){console.error("Error adding to cart:",t),r({title:"Error",description:"Failed to add to cart",type:"destructive"})}},g=u.useMemo(()=>{if(!s)return"";const e=[];if(null!=s.price_usd){const t=Number(s.price_usd);e.push(`$${t.toFixed(2)}`)}if(null!=s.price_gems){const t=Number(s.price_gems);e.push(`${t} `)}if(null!=s.price_gold){const t=Number(s.price_gold);e.push(`${t} `)}return e.join(" or ")},[s?.price_usd,s?.price_gems,s?.price_gold]),b=u.useMemo(()=>{if(!s||null==s.rating)return 0;const e=Number(s.rating);return Number.isNaN(e)?0:Number(e.toFixed(1))},[s?.rating]),v=u.useMemo(()=>{const e=s?.merchant_stores?.rating;if(null==e)return null;const t=Number(e);return Number.isNaN(t)?null:Number(t.toFixed(1))},[s?.merchant_stores?.rating]),y=u.useMemo(()=>s?.review_count??0,[s?.review_count]);if(l)return Ns.jsx("div",{className:"min-h-screen-dynamic bg-pr-surface-2",children:Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:[Ns.jsx("div",{className:"h-10 w-32 bg-pr-surface-3 rounded-lg animate-pulse"}),Ns.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsx("div",{className:"relative pb-[100%] bg-pr-surface-card rounded-xl border border-pr-surface-3 animate-pulse"}),Ns.jsx("div",{className:"grid grid-cols-4 gap-2",children:Array.from({length:4}).map((e,t)=>Ns.jsx("div",{className:"relative pb-[100%] bg-pr-surface-3 rounded-lg animate-pulse"},`thumb-skeleton-${t}`))})]}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsx("div",{className:"h-8 bg-pr-surface-3 rounded-lg w-3/4 animate-pulse"}),Ns.jsx("div",{className:"h-4 bg-pr-surface-3 rounded-lg w-full animate-pulse"}),Ns.jsx("div",{className:"h-4 bg-pr-surface-3 rounded-lg w-2/3 animate-pulse"}),Ns.jsx("div",{className:"h-20 bg-pr-surface-card rounded-xl border border-pr-surface-3 animate-pulse"}),Ns.jsx("div",{className:"h-10 bg-pr-surface-3 rounded-lg w-40 animate-pulse"}),Ns.jsx("div",{className:"h-12 bg-pr-surface-3 rounded-lg w-48 animate-pulse"}),Ns.jsx("div",{className:"grid grid-cols-3 gap-3",children:Array.from({length:3}).map((e,t)=>Ns.jsx("div",{className:"h-11 bg-pr-surface-3 rounded-lg animate-pulse"},`action-skeleton-${t}`))})]})]}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsx("div",{className:"h-10 w-60 bg-pr-surface-3 rounded-lg animate-pulse"}),Ns.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:Array.from({length:4}).map((e,t)=>Ns.jsx("div",{className:"h-40 bg-pr-surface-card rounded-xl border border-pr-surface-3 animate-pulse"},`tab-skeleton-${t}`))})]})]})});if(!s)return Ns.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1",children:"Product not found"}),Ns.jsxs(Oc,{onClick:()=>t("/marketplace"),className:"mt-4",children:[Ns.jsx(ut,{className:"mr-2 h-4 w-4"}),"Back to Marketplace"]})]})});const j=s.is_unlimited||s.inventory_count>0;return Ns.jsxs("div",{className:"min-h-screen-dynamic bg-pr-surface-2",children:[Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-28 md:pb-8",children:[Ns.jsxs(Oc,{variant:"outline",onClick:()=>t(-1),className:"mb-6",children:[Ns.jsx(ut,{className:"mr-2 h-4 w-4"}),"Back"]}),Ns.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[Ns.jsxs("div",{children:[Ns.jsx("div",{className:"relative pb-[100%] bg-pr-surface-card rounded-lg overflow-hidden mb-4 shadow-sm",children:Ns.jsx("img",{src:s.images[c]||"https://via.placeholder.com/600",alt:s.name,className:"absolute inset-0 w-full h-full object-cover"})}),s.images.length>1&&Ns.jsx("div",{className:"hidden md:grid grid-cols-4 gap-2",children:s.images.map((e,t)=>Ns.jsx("button",{onClick:()=>d(t),className:"relative pb-[100%] rounded-lg overflow-hidden border transition-shadow "+(c===t?"border-blue-600 shadow-sm":"border-transparent"),children:Ns.jsx("img",{src:e,alt:`${s.name} ${t+1}`,className:"absolute inset-0 w-full h-full object-cover"})},t))}),s.images.length>1&&Ns.jsx("div",{className:"md:hidden flex gap-3 overflow-x-auto pb-2 -mx-4 px-4",children:s.images.map((e,t)=>Ns.jsx("button",{onClick:()=>d(t),className:"flex-shrink-0 w-24 h-24 rounded-lg overflow-hidden border transition-transform "+(c===t?"border-blue-600 scale-105":"border-transparent"),children:Ns.jsx("img",{src:e,alt:`${s.name} ${t+1}`,className:"w-full h-full object-cover"})},`mobile-thumb-${t}`))})]}),Ns.jsxs("div",{children:[Ns.jsx("h1",{className:"text-3xl font-bold text-pr-text-1 mb-2",children:s.name}),Ns.jsx("p",{className:"text-pr-text-2 mb-4",children:s.short_description}),Ns.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[Ns.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(e=>Ns.jsx(Zr,{className:"h-5 w-5 "+(e<=Math.round(b)?"text-yellow-500 fill-current":"text-gray-300")},e))}),Ns.jsxs("span",{className:"text-sm text-pr-text-2",children:[b.toFixed(1)," (",s.review_count??0," reviews)"]}),Ns.jsx("span",{className:"text-sm text-pr-text-2",children:""}),Ns.jsxs("span",{className:"text-sm text-pr-text-2",children:[s.sales_count," sold"]})]}),Ns.jsxs("div",{className:"flex items-center gap-3 p-4 bg-pr-surface-card rounded-lg mb-6 cursor-pointer hover:bg-pr-surface-2",onClick:()=>t(`/marketplace/store/${s.merchant_stores.store_slug}`),children:[Ns.jsx("img",{src:s.merchant_stores.logo_url||"https://via.placeholder.com/48",alt:s.merchant_stores.store_name,className:"h-12 w-12 rounded-full"}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-semibold text-pr-text-1",children:s.merchant_stores.store_name}),Ns.jsxs("div",{className:"flex items-center",children:[Ns.jsx(Zr,{className:"h-4 w-4 text-yellow-500 fill-current mr-1"}),Ns.jsx("span",{className:"text-sm text-pr-text-2",children:null!=v?v.toFixed(1):"New"})]})]}),Ns.jsx(Qr,{className:"ml-auto h-5 w-5 text-gray-400"})]}),Ns.jsxs("div",{className:"mb-6",children:[Ns.jsx("div",{className:"text-3xl font-bold text-pr-text-1 mb-2",children:g}),!j&&Ns.jsx("p",{className:"text-red-600 font-medium",children:"Out of Stock"}),j&&!s.is_unlimited&&Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:[s.inventory_count," available"]})]}),j&&Ns.jsxs("div",{className:"mb-6",children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Quantity"}),Ns.jsxs("div",{className:"flex items-center gap-3",children:[Ns.jsx("button",{onClick:()=>p(Math.max(1,m-1)),className:"px-4 py-2 border border-pr-surface-3 rounded-lg hover:bg-pr-surface-2",children:"-"}),Ns.jsx("span",{className:"text-lg font-medium w-12 text-center",children:m}),Ns.jsx("button",{onClick:()=>p(m+1),className:"px-4 py-2 border border-pr-surface-3 rounded-lg hover:bg-pr-surface-2",disabled:!s.is_unlimited&&m>=s.inventory_count,children:"+"})]})]}),Ns.jsxs("div",{className:"flex gap-3 mb-6",children:[Ns.jsxs(Oc,{onClick:f,disabled:!j,className:"flex-1 bg-blue-600 hover:bg-blue-700",size:"lg",children:[Ns.jsx(Gr,{className:"mr-2 h-5 w-5"}),"Add to Cart"]}),Ns.jsx(Oc,{variant:"outline",size:"lg",children:Ns.jsx(rr,{className:"h-5 w-5"})}),Ns.jsx(Oc,{variant:"outline",size:"lg",children:Ns.jsx(Kr,{className:"h-5 w-5"})})]}),s.tags.length>0&&Ns.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((e,t)=>Ns.jsx("span",{className:"px-3 py-1 bg-pr-surface-2 text-pr-text-1 text-sm rounded-full",children:e},t))})]})]}),Ns.jsxs(YW,{defaultValue:"description",className:"mb-8",children:[Ns.jsxs(JW,{className:"flex-wrap",children:[Ns.jsx(ZW,{value:"description",children:"Description"}),Ns.jsxs(ZW,{value:"reviews",children:["Reviews (",s.review_count,")"]})]}),Ns.jsx(QW,{value:"description",children:Ns.jsx(mV,{className:"p-6",children:Ns.jsx("div",{className:"prose max-w-none",children:Ns.jsx("p",{className:"text-pr-text-1 whitespace-pre-wrap",children:s.description})})})}),Ns.jsx(QW,{value:"reviews",children:Ns.jsxs("div",{className:"space-y-6",children:[Ns.jsx(mV,{className:"p-6 bg-blue-50/40 border-blue-100",children:Ns.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm uppercase tracking-wide text-blue-600 font-semibold",children:"Customer satisfaction"}),Ns.jsxs("div",{className:"flex items-end gap-3 mt-2",children:[Ns.jsx("span",{className:"text-4xl font-bold text-blue-900",children:b.toFixed(1)}),Ns.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(e=>Ns.jsx(Zr,{className:"h-5 w-5 "+(e<=Math.round(b)?"text-blue-500 fill-current":"text-blue-100")},`avg-star-${e}`))})]}),Ns.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Based on ",y," review",1===y?"":"s"]})]}),Ns.jsx("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[{label:"5 stars",percentage:Math.round(n.filter(e=>5===e.rating).length/Math.max(y,1)*100)},{label:"4 stars",percentage:Math.round(n.filter(e=>4===e.rating).length/Math.max(y,1)*100)},{label:"3 stars",percentage:Math.round(n.filter(e=>3===e.rating).length/Math.max(y,1)*100)},{label:"2 stars & below",percentage:Math.round(n.filter(e=>e.rating<=2).length/Math.max(y,1)*100)}].map(e=>Ns.jsxs("div",{className:"space-y-1",children:[Ns.jsxs("div",{className:"flex items-center justify-between text-sm text-blue-900",children:[Ns.jsx("span",{children:e.label}),Ns.jsxs("span",{children:[Number.isNaN(e.percentage)?0:e.percentage,"%"]})]}),Ns.jsx("div",{className:"h-2 rounded-full bg-blue-100 overflow-hidden",children:Ns.jsx("div",{className:"h-full bg-blue-500",style:{width:`${Number.isNaN(e.percentage)?0:e.percentage}%`}})})]},e.label))})]})}),0===n.length?Ns.jsxs(mV,{className:"p-6 text-center",children:[Ns.jsx(Yr,{className:"mx-auto h-10 w-10 text-blue-400"}),Ns.jsx("h3",{className:"mt-4 text-lg font-semibold text-pr-text-1",children:"No reviews yet"}),Ns.jsx("p",{className:"mt-2 text-sm text-pr-text-2",children:"Be the first to share your experience with this product and help the community."})]}):Ns.jsx("div",{className:"space-y-4",children:n.map(e=>Ns.jsx(mV,{className:"p-6",children:Ns.jsxs("div",{className:"flex items-start gap-4",children:[Ns.jsx("img",{src:e.users.profile_image||"https://via.placeholder.com/48",alt:e.users.display_name,className:"h-12 w-12 rounded-full"}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-2",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"font-semibold text-pr-text-1",children:e.users.display_name||e.users.username}),Ns.jsxs("div",{className:"flex items-center flex-wrap gap-2 text-sm",children:[Ns.jsx("div",{className:"flex",children:[1,2,3,4,5].map(t=>Ns.jsx(Zr,{className:"h-4 w-4 "+(t<=e.rating?"text-yellow-500 fill-current":"text-gray-300")},`${e.id}-star-${t}`))}),e.is_verified_purchase&&Ns.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:[Ns.jsx(St,{className:"h-3 w-3 mr-1"}),"Verified Purchase"]})]})]}),Ns.jsx("span",{className:"text-sm text-pr-text-2",children:new Date(e.created_at).toLocaleDateString()})]}),e.title&&Ns.jsx("h4",{className:"font-semibold text-pr-text-1 mb-2",children:e.title}),Ns.jsx("p",{className:"text-pr-text-1 whitespace-pre-line",children:e.review_text})]})]})},e.id))})]})})]})]}),j&&Ns.jsx("div",{className:"md:hidden fixed inset-x-0 bottom-0 z-40 bg-pr-surface-card/95 backdrop-blur border-t border-pr-surface-3 p-4 shadow-lg",children:Ns.jsxs("div",{className:"flex items-center justify-between gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-xs uppercase text-pr-text-2",children:"Total"}),Ns.jsx("p",{className:"text-lg font-semibold text-pr-text-1",children:g})]}),Ns.jsxs(Oc,{onClick:f,disabled:!j,className:"flex-1 bg-blue-600 hover:bg-blue-700",size:"lg",children:[Ns.jsx(Gr,{className:"mr-2 h-5 w-5"}),"Add to cart"]})]})})]})}function CV(){const e=ke(),{toast:t}=KW(),[r,s]=u.useState(null),[a,n]=u.useState(!0),[i,l]=u.useState(null);u.useEffect(()=>{o()},[]);const o=async()=>{try{const e=await fetch("/api/marketplace/cart",{credentials:"include"}),t=await e.json();"success"===t.status&&s(t.data.cart)}catch(e){console.error("Error fetching cart:",e),t({title:"Error",description:"Failed to load cart",type:"destructive"})}finally{n(!1)}},c=async(e,r)=>{if(!(r<1)){l(e);try{const t=await fetch(`/api/marketplace/cart/items/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({quantity:r})});"success"===(await t.json()).status&&await o()}catch(s){console.error("Error updating quantity:",s),t({title:"Error",description:"Failed to update quantity",type:"destructive"})}finally{l(null)}}},d=e=>{const t=[];return e.price_usd&&t.push(`$${e.price_usd.toFixed(2)}`),e.price_gems&&t.push(`${e.price_gems} `),e.price_gold&&t.push(`${e.price_gold} `),t.join(" or ")};if(a)return Ns.jsx("div",{className:"min-h-screen-dynamic bg-pr-surface-2",children:Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:[Ns.jsx("div",{className:"h-10 w-64 bg-pr-surface-3 rounded-lg animate-pulse"}),Ns.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[Ns.jsx("div",{className:"lg:col-span-2 space-y-6",children:Array.from({length:2}).map((e,t)=>Ns.jsxs("div",{className:"space-y-4 rounded-xl border border-pr-surface-3 bg-pr-surface-card p-6 animate-pulse",children:[Ns.jsx("div",{className:"h-5 w-40 bg-pr-surface-3 rounded"}),Ns.jsx("div",{className:"space-y-4",children:Array.from({length:2}).map((e,r)=>Ns.jsxs("div",{className:"flex gap-4",children:[Ns.jsx("div",{className:"w-24 h-24 bg-pr-surface-3 rounded-lg"}),Ns.jsxs("div",{className:"flex-1 space-y-3",children:[Ns.jsx("div",{className:"h-4 bg-pr-surface-3 rounded w-3/4"}),Ns.jsx("div",{className:"h-4 bg-pr-surface-3 rounded w-1/2"}),Ns.jsx("div",{className:"h-10 bg-pr-surface-3 rounded w-40"})]}),Ns.jsx("div",{className:"w-20 h-6 bg-pr-surface-3 rounded"})]},`item-skeleton-${t}-${r}`))})]},`cart-skeleton-${t}`))}),Ns.jsx("div",{className:"space-y-4",children:Ns.jsxs("div",{className:"rounded-xl border border-pr-surface-3 bg-pr-surface-card p-6 animate-pulse",children:[Ns.jsx("div",{className:"h-5 w-32 bg-pr-surface-3 rounded mb-4"}),Ns.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((e,t)=>Ns.jsx("div",{className:"h-4 bg-pr-surface-3 rounded"},`summary-line-${t}`))}),Ns.jsx("div",{className:"h-11 bg-pr-surface-3 rounded mt-6"}),Ns.jsx("div",{className:"h-11 bg-pr-surface-2 rounded mt-3"})]})})]})]})});const m=u.useMemo(()=>r&&r.cart_items?r.cart_items.reduce((e,t)=>(t.price_usd&&(e.usd+=t.price_usd*t.quantity),t.price_gems&&(e.gems+=t.price_gems*t.quantity),t.price_gold&&(e.gold+=t.price_gold*t.quantity),e),{usd:0,gems:0,gold:0}):{usd:0,gems:0,gold:0},[r]),p=u.useMemo(()=>r&&r.cart_items?r.cart_items.reduce((e,t)=>{const r=t.products.merchant_stores.store_slug;return e[r]||(e[r]={storeName:t.products.merchant_stores.store_name,items:[]}),e[r].items.push(t),e},{}):{},[r]),h=!r||!r.cart_items||0===r.cart_items.length;return Ns.jsxs("div",{className:"min-h-screen-dynamic bg-pr-surface-2",children:[Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-36 lg:pb-8",children:[Ns.jsxs("div",{className:"mb-8",children:[Ns.jsxs("h1",{className:"text-3xl font-bold text-pr-text-1 flex items-center gap-3",children:[Ns.jsx(Gr,{className:"h-8 w-8"}),"Shopping Cart"]}),Ns.jsx("p",{className:"text-pr-text-2 mt-1",children:h?"Your cart is empty":`${r.cart_items.length} item(s) in your cart`})]}),h?Ns.jsxs("div",{className:"text-center py-12",children:[Ns.jsx(Hr,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-2",children:"Your cart is empty"}),Ns.jsx("p",{className:"text-pr-text-2 mb-6",children:"Start shopping to add items to your cart"}),Ns.jsx(Oc,{onClick:()=>e("/marketplace"),className:"bg-blue-600 hover:bg-blue-700",children:"Browse Marketplace"})]}):Ns.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[Ns.jsx("div",{className:"lg:col-span-2 space-y-6",children:Object.entries(p).map(([r,s])=>Ns.jsxs(mV,{className:"p-6",children:[Ns.jsxs("h3",{className:"font-semibold text-lg text-pr-text-1 mb-4 flex items-center gap-2",children:[Ns.jsx(Hr,{className:"h-5 w-5"}),s.storeName]}),Ns.jsx("div",{className:"space-y-4",children:s.items.map(r=>Ns.jsxs("div",{className:"flex gap-4 pb-4 border-b last:border-b-0",children:[Ns.jsx("img",{src:r.products.images[0]||"https://via.placeholder.com/100",alt:r.products.name,className:"w-24 h-24 object-cover rounded-lg cursor-pointer hover:opacity-80",onClick:()=>e(`/marketplace/product/${r.product_id}`)}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1 mb-1 cursor-pointer hover:text-blue-600",onClick:()=>e(`/marketplace/product/${r.product_id}`),children:r.products.name}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mb-2",children:d(r)}),Ns.jsxs("div",{className:"flex items-center gap-3",children:[Ns.jsxs("div",{className:"flex items-center border border-pr-surface-3 rounded-lg",children:[Ns.jsx("button",{onClick:()=>c(r.id,r.quantity-1),disabled:i===r.id||r.quantity<=1,className:"px-3 py-1 hover:bg-pr-surface-2 disabled:opacity-50","aria-label":"Decrease quantity",children:Ns.jsx(Nr,{className:"h-4 w-4"})}),Ns.jsx("span",{className:"px-4 py-1 border-x border-pr-surface-3 min-w-[3rem] text-center",children:r.quantity}),Ns.jsx("button",{onClick:()=>c(r.id,r.quantity+1),disabled:i===r.id||!r.products.is_unlimited&&r.quantity>=r.products.inventory_count,className:"px-3 py-1 hover:bg-pr-surface-2 disabled:opacity-50","aria-label":"Increase quantity",children:Ns.jsx(Rr,{className:"h-4 w-4"})})]}),Ns.jsx("button",{onClick:()=>(async e=>{l(e);try{const r=await fetch(`/api/marketplace/cart/items/${e}`,{method:"DELETE",credentials:"include"});"success"===(await r.json()).status&&(await o(),t({title:"Removed",description:"Item removed from cart",type:"success"}))}catch(r){console.error("Error removing item:",r),t({title:"Error",description:"Failed to remove item",type:"destructive"})}finally{l(null)}})(r.id),disabled:i===r.id,className:"text-red-600 hover:text-red-700 disabled:opacity-50",children:Ns.jsx(ss,{className:"h-5 w-5"})})]}),!r.products.is_unlimited&&r.quantity>=r.products.inventory_count&&Ns.jsxs("p",{className:"text-sm text-red-600 mt-2",children:["Maximum available: ",r.products.inventory_count]})]}),Ns.jsx("div",{className:"text-right",children:Ns.jsxs("p",{className:"font-semibold text-pr-text-1",children:[r.price_usd&&`$${(r.price_usd*r.quantity).toFixed(2)}`,r.price_gems&&r.price_gems*r.quantity+" ",r.price_gold&&r.price_gold*r.quantity+" "]})})]},r.id))})]},r))}),Ns.jsx("div",{className:"lg:col-span-1",children:Ns.jsxs(mV,{className:"p-6 sticky top-8",children:[Ns.jsx("h3",{className:"font-semibold text-lg text-pr-text-1 mb-4",children:"Order Summary"}),Ns.jsxs("div",{className:"space-y-3 mb-6",children:[Ns.jsxs("div",{className:"flex justify-between text-pr-text-2",children:[Ns.jsx("span",{children:"Subtotal"}),Ns.jsxs("div",{className:"text-right",children:[m.usd>0&&Ns.jsxs("div",{children:["$",m.usd.toFixed(2)]}),m.gems>0&&Ns.jsxs("div",{children:[m.gems," "]}),m.gold>0&&Ns.jsxs("div",{children:[m.gold," "]})]})]}),Ns.jsxs("div",{className:"flex justify-between text-pr-text-2",children:[Ns.jsx("span",{children:"Shipping"}),Ns.jsx("span",{children:"Calculated at checkout"})]}),Ns.jsxs("div",{className:"border-t pt-3 flex justify-between font-semibold text-lg",children:[Ns.jsx("span",{children:"Total"}),Ns.jsxs("div",{className:"text-right",children:[m.usd>0&&Ns.jsxs("div",{children:["$",m.usd.toFixed(2)]}),m.gems>0&&Ns.jsxs("div",{children:[m.gems," "]}),m.gold>0&&Ns.jsxs("div",{children:[m.gold," "]})]})]})]}),Ns.jsxs(Oc,{onClick:()=>e("/checkout"),className:"w-full bg-blue-600 hover:bg-blue-700",size:"lg",children:["Proceed to Checkout",Ns.jsx(mt,{className:"ml-2 h-5 w-5"})]}),Ns.jsx(Oc,{variant:"outline",onClick:()=>e("/marketplace"),className:"w-full mt-3",children:"Continue Shopping"})]})})]})]}),!h&&Ns.jsx("div",{className:"lg:hidden fixed inset-x-0 bottom-0 z-40 bg-pr-surface-card/95 backdrop-blur border-t border-pr-surface-3 px-4 py-4 shadow-[0_-4px_12px_rgba(99,102,241,0.08)]",children:Ns.jsxs("div",{className:"flex items-center justify-between gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-xs uppercase tracking-wide text-pr-text-2",children:"Total"}),Ns.jsxs("div",{className:"text-sm font-semibold text-pr-text-1 space-y-1",children:[m.usd>0&&Ns.jsxs("div",{children:["$",m.usd.toFixed(2)]}),m.gems>0&&Ns.jsxs("div",{children:[m.gems," "]}),m.gold>0&&Ns.jsxs("div",{children:[m.gold," "]})]})]}),Ns.jsxs(Oc,{onClick:()=>e("/checkout"),className:"flex-1 bg-blue-600 hover:bg-blue-700",size:"lg",children:["Proceed to checkout",Ns.jsx(mt,{className:"ml-2 h-5 w-5"})]})]})})]})}function OV(){const e=ke(),{toast:t}=KW(),[r,s]=u.useState(null),[a,n]=u.useState(!0),[i,l]=u.useState(!1),[o,c]=u.useState("stripe"),[d,m]=u.useState({street:"",city:"",state:"",zip:"",country:"US"}),[p,h]=u.useState({email:"",phone:""}),[x,f]=u.useState({});u.useEffect(()=>{g()},[]);const g=async()=>{try{const t=await fetch("/api/marketplace/cart",{credentials:"include"}),r=await t.json();"success"===r.status&&(s(r.data.cart),r.data.cart&&r.data.cart.cart_items&&0!==r.data.cart.cart_items.length||e("/cart"))}catch(t){console.error("Error fetching cart:",t)}finally{n(!1)}},b=u.useMemo(()=>r&&r.cart_items?r.cart_items.reduce((e,t)=>(t.price_usd&&(e.usd+=t.price_usd*t.quantity),t.price_gems&&(e.gems+=t.price_gems*t.quantity),t.price_gold&&(e.gold+=t.price_gold*t.quantity),e),{usd:0,gems:0,gold:0}):{usd:0,gems:0,gold:0},[r]),v=u.useMemo(()=>r&&r.cart_items?r.cart_items.reduce((e,t)=>{const r=t.products.merchant_stores.id;return e[r]||(e[r]={storeName:t.products.merchant_stores.store_name,items:[]}),e[r].items.push(t),e},{}):{},[r]),y=u.useMemo(()=>Boolean(p.email.trim()),[p.email]),j=u.useMemo(()=>Boolean(d.street.trim()&&d.city.trim()&&d.state.trim()&&d.zip.trim()),[d]),w=u.useMemo(()=>[{title:"Contact",description:"Email and phone",complete:y},{title:"Shipping",description:"Delivery address",complete:j},{title:"Payment",description:"Choose payment",complete:!!o},{title:"Review",description:"Confirm order",complete:!1}],[y,o,j]),N=u.useMemo(()=>{const e=w.findIndex(e=>!e.complete);return-1===e?w.length-1:e},[w]),_=async()=>{const r={};if(p.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p.email)||(r.email="Enter a valid email address"):r.email="Email is required",d.street.trim()||(r.street="Street address is required"),d.city.trim()||(r.city="City is required"),d.state.trim()||(r.state="State is required"),d.zip.trim()||(r.zip="ZIP code is required"),Object.keys(r).length>0)return f(r),void t({title:"Missing information",description:"Please complete the highlighted fields before placing your order.",type:"destructive"});f({}),l(!0);try{const r=Object.keys(v);for(const e of r){const t=await fetch("/api/marketplace/orders",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({store_id:e,payment_method:o,shipping_address:d,customer_notes:""})}),r=await t.json();if("success"!==r.status)throw new Error(r.message||"Order creation failed");{const e=await fetch(`/api/marketplace/orders/${r.data.order.id}/pay`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}),t=await e.json();if("success"!==t.status)throw new Error(t.message||"Payment failed")}}t({title:"Success!",description:"Your order has been placed successfully",type:"success"}),e("/orders")}catch(s){console.error("Error processing checkout:",s),t({title:"Error",description:s.message||"Failed to process order",type:"destructive"})}finally{l(!1)}};return a?Ns.jsx("div",{className:"flex items-center justify-center min-h-screen-dynamic",children:Ns.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):Ns.jsxs("div",{className:"min-h-screen-dynamic bg-pr-surface-2",children:[Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-36 lg:pb-12",children:[Ns.jsxs(Oc,{variant:"outline",onClick:()=>e("/cart"),className:"mb-6",children:[Ns.jsx(ut,{className:"mr-2 h-4 w-4"}),"Back to Cart"]}),Ns.jsx("h1",{className:"text-3xl font-bold text-pr-text-1 mb-6",children:"Checkout"}),Ns.jsx("div",{className:"mb-10",children:Ns.jsx("ol",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:w.map((e,t)=>{const r=t===N,s=e.complete&&t<N;return Ns.jsxs("li",{className:"rounded-xl border p-4 transition-all "+(s?"border-blue-600 bg-blue-50":r?"border-blue-400 bg-pr-surface-card shadow-sm":"border-pr-surface-3 bg-pr-surface-card"),children:[Ns.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Ns.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full border-2 text-sm font-semibold "+(s?"border-blue-600 bg-blue-600 text-white":r?"border-blue-500 text-blue-600":"border-pr-surface-3 text-pr-text-2"),children:s?Ns.jsx(St,{className:"h-4 w-4"}):t+1}),Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-semibold text-pr-text-1",children:e.title}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:e.description})]})]}),r&&Ns.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"Currently editing"})]},e.title)})})}),Ns.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[Ns.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[Ns.jsxs(mV,{className:"p-6",children:[Ns.jsx("h2",{className:"text-xl font-semibold text-pr-text-1 mb-4",children:"Contact Information"}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Email *"}),Ns.jsx("input",{type:"email",value:p.email,onChange:e=>{h({...p,email:e.target.value}),x.email&&f(e=>({...e,email:""}))},className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(x.email?"border-red-500 focus:ring-red-500":"border-pr-surface-3"),placeholder:"your@email.com",required:!0}),x.email&&Ns.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.email})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Phone (optional)"}),Ns.jsx("input",{type:"tel",value:p.phone,onChange:e=>h({...p,phone:e.target.value}),className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+1 (555) 000-0000"})]})]})]}),Ns.jsxs(mV,{className:"p-6",children:[Ns.jsx("h2",{className:"text-xl font-semibold text-pr-text-1 mb-4",children:"Shipping Address"}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Street Address"}),Ns.jsx("input",{type:"text",value:d.street,onChange:e=>{m({...d,street:e.target.value}),x.street&&f(e=>({...e,street:""}))},className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(x.street?"border-red-500 focus:ring-red-500":"border-pr-surface-3"),placeholder:"123 Main St"}),x.street&&Ns.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.street})]}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"City"}),Ns.jsx("input",{type:"text",value:d.city,onChange:e=>{m({...d,city:e.target.value}),x.city&&f(e=>({...e,city:""}))},className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(x.city?"border-red-500 focus:ring-red-500":"border-pr-surface-3"),placeholder:"New York"}),x.city&&Ns.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.city})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"State"}),Ns.jsx("input",{type:"text",value:d.state,onChange:e=>{m({...d,state:e.target.value}),x.state&&f(e=>({...e,state:""}))},className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(x.state?"border-red-500 focus:ring-red-500":"border-pr-surface-3"),placeholder:"NY"}),x.state&&Ns.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.state})]})]}),Ns.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"ZIP Code"}),Ns.jsx("input",{type:"text",value:d.zip,onChange:e=>{m({...d,zip:e.target.value}),x.zip&&f(e=>({...e,zip:""}))},className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(x.zip?"border-red-500 focus:ring-red-500":"border-pr-surface-3"),placeholder:"10001"}),x.zip&&Ns.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.zip})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Country"}),Ns.jsxs("select",{value:d.country,onChange:e=>m({...d,country:e.target.value}),className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[Ns.jsx("option",{value:"US",children:"United States"}),Ns.jsx("option",{value:"CA",children:"Canada"}),Ns.jsx("option",{value:"UK",children:"United Kingdom"})]})]})]})]})]}),Ns.jsxs(mV,{className:"p-6",children:[Ns.jsx("h2",{className:"text-xl font-semibold text-pr-text-1 mb-4",children:"Payment Method"}),Ns.jsxs("div",{className:"space-y-3",children:[b.usd>0&&Ns.jsxs("button",{onClick:()=>c("stripe"),className:"w-full p-4 border-2 rounded-lg flex items-center gap-3 transition-colors "+("stripe"===o?"border-blue-600 bg-blue-50":"border-pr-surface-3 hover:border-gray-400"),children:[Ns.jsx("div",{className:"h-5 w-5 rounded-full border-2 flex items-center justify-center "+("stripe"===o?"border-blue-600":"border-pr-surface-3"),children:"stripe"===o&&Ns.jsx("div",{className:"h-3 w-3 rounded-full bg-blue-600"})}),Ns.jsx(Ft,{className:"h-6 w-6 text-pr-text-1"}),Ns.jsxs("div",{className:"flex-1 text-left",children:[Ns.jsx("p",{className:"font-medium text-pr-text-1",children:"Credit / Debit Card"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Pay with Stripe"})]}),Ns.jsxs("span",{className:"font-semibold text-pr-text-1",children:["$",b.usd.toFixed(2)]})]}),b.gems>0&&Ns.jsxs("button",{onClick:()=>c("gems"),className:"w-full p-4 border-2 rounded-lg flex items-center gap-3 transition-colors "+("gems"===o?"border-purple-600 bg-purple-50":"border-pr-surface-3 hover:border-gray-400"),children:[Ns.jsx("div",{className:"h-5 w-5 rounded-full border-2 flex items-center justify-center "+("gems"===o?"border-purple-600":"border-pr-surface-3"),children:"gems"===o&&Ns.jsx("div",{className:"h-3 w-3 rounded-full bg-purple-600"})}),Ns.jsx($t,{className:"h-6 w-6 text-purple-600"}),Ns.jsxs("div",{className:"flex-1 text-left",children:[Ns.jsx("p",{className:"font-medium text-pr-text-1",children:"Gems"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Pay with your gems balance"})]}),Ns.jsxs("span",{className:"font-semibold text-pr-text-1",children:[b.gems," "]})]}),b.gold>0&&Ns.jsxs("button",{onClick:()=>c("gold"),className:"w-full p-4 border-2 rounded-lg flex items-center gap-3 transition-colors "+("gold"===o?"border-yellow-600 bg-yellow-50":"border-pr-surface-3 hover:border-gray-400"),children:[Ns.jsx("div",{className:"h-5 w-5 rounded-full border-2 flex items-center justify-center "+("gold"===o?"border-yellow-600":"border-pr-surface-3"),children:"gold"===o&&Ns.jsx("div",{className:"h-3 w-3 rounded-full bg-yellow-600"})}),Ns.jsx(zt,{className:"h-6 w-6 text-yellow-600"}),Ns.jsxs("div",{className:"flex-1 text-left",children:[Ns.jsx("p",{className:"font-medium text-pr-text-1",children:"Gold"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Pay with your gold balance"})]}),Ns.jsxs("span",{className:"font-semibold text-pr-text-1",children:[b.gold," "]})]})]})]})]}),Ns.jsx("div",{className:"lg:col-span-1",children:Ns.jsxs(mV,{className:"p-6 sticky top-8",children:[Ns.jsx("h2",{className:"text-xl font-semibold text-pr-text-1 mb-4",children:"Order Summary"}),r&&r.cart_items&&Ns.jsx("div",{className:"space-y-3 mb-6",children:r.cart_items.map(e=>Ns.jsxs("div",{className:"flex gap-3",children:[Ns.jsx("img",{src:e.products.images[0]||"https://via.placeholder.com/60",alt:e.products.name,className:"w-16 h-16 object-cover rounded"}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("p",{className:"text-sm font-medium text-pr-text-1 line-clamp-2",children:e.products.name}),Ns.jsxs("p",{className:"text-sm text-pr-text-2",children:["Qty: ",e.quantity]})]})]},e.id))}),Ns.jsxs("div",{className:"border-t pt-4 space-y-2 mb-6",children:[Ns.jsxs("div",{className:"flex justify-between text-pr-text-2",children:[Ns.jsx("span",{children:"Subtotal"}),Ns.jsxs("div",{className:"text-right",children:[b.usd>0&&Ns.jsxs("div",{children:["$",b.usd.toFixed(2)]}),b.gems>0&&Ns.jsxs("div",{children:[b.gems," "]}),b.gold>0&&Ns.jsxs("div",{children:[b.gold," "]})]})]}),Ns.jsxs("div",{className:"flex justify-between text-pr-text-2",children:[Ns.jsx("span",{children:"Shipping"}),Ns.jsx("span",{children:"Free"})]}),Ns.jsxs("div",{className:"border-t pt-2 flex justify-between font-semibold text-lg",children:[Ns.jsx("span",{children:"Total"}),Ns.jsxs("div",{className:"text-right",children:[b.usd>0&&Ns.jsxs("div",{children:["$",b.usd.toFixed(2)]}),b.gems>0&&Ns.jsxs("div",{children:[b.gems," "]}),b.gold>0&&Ns.jsxs("div",{children:[b.gold," "]})]})]})]}),Ns.jsx(Oc,{onClick:_,disabled:i,className:"w-full bg-blue-600 hover:bg-blue-700",size:"lg",children:i?Ns.jsx(Ns.Fragment,{children:"Processing..."}):Ns.jsxs(Ns.Fragment,{children:[Ns.jsx(hr,{className:"mr-2 h-5 w-5"}),"Place Order"]})}),Ns.jsx("p",{className:"text-xs text-pr-text-2 text-center mt-4",children:"Your payment information is secure and encrypted"})]})})]})]}),Ns.jsx("div",{className:"lg:hidden fixed inset-x-0 bottom-0 z-40 bg-pr-surface-card/95 backdrop-blur border-t border-pr-surface-3 px-4 py-4 shadow-[0_-4px_12px_rgba(15,23,42,0.08)]",children:Ns.jsxs("div",{className:"flex items-center justify-between gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-xs uppercase tracking-wide text-pr-text-2",children:"Total"}),Ns.jsxs("div",{className:"text-sm font-semibold text-pr-text-1 space-y-1",children:[b.usd>0&&Ns.jsxs("div",{children:["$",b.usd.toFixed(2)]}),b.gems>0&&Ns.jsxs("div",{children:[b.gems," "]}),b.gold>0&&Ns.jsxs("div",{children:[b.gold," "]})]})]}),Ns.jsx(Oc,{onClick:_,disabled:i,className:"flex-1 bg-blue-600 hover:bg-blue-700",size:"lg",children:i?"Processing":"Place order"})]})})]})}const EV={pending:{label:"Pending",icon:Rt,color:"text-yellow-600 bg-yellow-100"},paid:{label:"Paid",icon:At,color:"text-green-600 bg-green-100"},processing:{label:"Processing",icon:Or,color:"text-blue-600 bg-blue-100"},shipped:{label:"Shipped",icon:ls,color:"text-purple-600 bg-purple-100"},delivered:{label:"Delivered",icon:At,color:"text-green-600 bg-green-100"},completed:{label:"Completed",icon:At,color:"text-green-600 bg-green-100"},cancelled:{label:"Cancelled",icon:It,color:"text-red-600 bg-red-100"}};function PV(){const e=ke(),[t,r]=u.useState([]),[s,a]=u.useState(!0);u.useEffect(()=>{n()},[]);const n=async()=>{try{const e=await fetch("/api/marketplace/orders",{credentials:"include"}),t=await e.json();"success"===t.status&&r(t.data.orders)}catch(e){console.error("Error fetching orders:",e)}finally{a(!1)}},i=e=>{const t=[];return e.total_usd>0&&t.push(`$${e.total_usd.toFixed(2)}`),e.total_gems>0&&t.push(`${e.total_gems} `),e.total_gold>0&&t.push(`${e.total_gold} `),t.join(" + ")};return s?Ns.jsx("div",{className:"flex items-center justify-center min-h-screen-dynamic",children:Ns.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):Ns.jsx("div",{className:"min-h-screen-dynamic bg-pr-surface-2",children:Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Ns.jsxs("div",{className:"mb-8",children:[Ns.jsx("h1",{className:"text-3xl font-bold text-pr-text-1",children:"Order History"}),Ns.jsx("p",{className:"text-pr-text-2 mt-1",children:"View and track your orders"})]}),0===t.length?Ns.jsxs(mV,{className:"p-12 text-center",children:[Ns.jsx(Or,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-2",children:"No orders yet"}),Ns.jsx("p",{className:"text-pr-text-2 mb-6",children:"Start shopping to see your orders here"}),Ns.jsx(Oc,{onClick:()=>e("/marketplace"),className:"bg-blue-600 hover:bg-blue-700",children:"Browse Marketplace"})]}):Ns.jsx("div",{className:"space-y-4",children:t.map(t=>{const r=EV[t.status]?.icon||Or,s=EV[t.status]?.color||"text-pr-text-2 bg-pr-surface-2",a=EV[t.status]?.label||t.status;return Ns.jsxs(mV,{className:"p-6 hover:shadow-lg transition-shadow",children:[Ns.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ns.jsxs("div",{children:[Ns.jsxs("h3",{className:"font-semibold text-lg text-pr-text-1",children:["Order #",t.order_number]}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),Ns.jsxs("p",{className:"text-sm text-pr-text-2 mt-1",children:["From: ",t.merchant_stores.store_name]})]}),Ns.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${s}`,children:[Ns.jsx(r,{className:"h-4 w-4 mr-1"}),a]})]}),Ns.jsxs("div",{className:"flex gap-4 mb-4",children:[t.order_items.slice(0,3).map((e,t)=>Ns.jsx("img",{src:e.product_image||"https://via.placeholder.com/80",alt:e.product_name,className:"w-20 h-20 object-cover rounded-lg"},t)),t.order_items.length>3&&Ns.jsx("div",{className:"w-20 h-20 bg-pr-surface-2 rounded-lg flex items-center justify-center",children:Ns.jsxs("span",{className:"text-pr-text-2 font-medium",children:["+",t.order_items.length-3]})})]}),Ns.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Total"}),Ns.jsx("p",{className:"font-semibold text-lg text-pr-text-1",children:i(t)})]}),Ns.jsx(Oc,{variant:"outline",onClick:()=>e(`/orders/${t.id}`),children:"View Details"})]})]},t.id)})})]})})}function TV(){const{storeSlug:e}=Ce(),t=ke(),{toast:r}=KW(),[s,a]=u.useState(null),[n,i]=u.useState([]),[l,o]=u.useState(!0),[c,d]=u.useState("grid");u.useEffect(()=>{e&&(m(),p())},[e]);const m=async()=>{try{const t=await fetch(`/api/marketplace/stores/${e}`,{credentials:"include"}),r=await t.json();"success"===r.status&&a(r.data.store)}catch(t){console.error("Error fetching store:",t),r({title:"Error",description:"Failed to load store",type:"destructive"})}finally{o(!1)}},p=async()=>{try{const t=await fetch(`/api/marketplace/stores/${e}/products`,{credentials:"include"}),r=await t.json();"success"===r.status&&i(r.data.products)}catch(t){console.error("Error fetching products:",t)}},h=e=>{const t=[];return e.price_usd&&t.push(`$${e.price_usd.toFixed(2)}`),e.price_gems&&t.push(`${e.price_gems} `),e.price_gold&&t.push(`${e.price_gold} `),t.join(" or ")};return l?Ns.jsx("div",{className:"flex items-center justify-center min-h-screen-dynamic",children:Ns.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?Ns.jsxs("div",{className:"min-h-screen-dynamic bg-pr-surface-2",children:[s.banner_url&&Ns.jsx("div",{className:"relative h-64 bg-gradient-to-r from-blue-600 to-purple-600",children:Ns.jsx("img",{src:s.banner_url,alt:s.store_name,className:"w-full h-full object-cover"})}),Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ns.jsx("div",{className:"relative -mt-16 mb-8",children:Ns.jsx(mV,{className:"p-6",children:Ns.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[Ns.jsx("img",{src:s.logo_url||"https://via.placeholder.com/120",alt:s.store_name,className:"w-32 h-32 rounded-lg object-cover border-4 border-white shadow-lg"}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("div",{className:"flex items-start justify-between",children:Ns.jsxs("div",{children:[Ns.jsx("h1",{className:"text-3xl font-bold text-pr-text-1 mb-2",children:s.store_name}),Ns.jsx("p",{className:"text-pr-text-2 mb-3",children:s.description}),Ns.jsxs("div",{className:"flex items-center gap-4 text-sm text-pr-text-2",children:[Ns.jsxs("div",{className:"flex items-center",children:[Ns.jsx(Zr,{className:"h-4 w-4 text-yellow-500 fill-current mr-1"}),Ns.jsx("span",{className:"font-medium",children:s.rating.toFixed(1)}),Ns.jsxs("span",{className:"ml-1",children:["(",s.review_count," reviews)"]})]}),Ns.jsx("span",{children:""}),Ns.jsxs("span",{children:[s.total_products," products"]}),Ns.jsx("span",{children:""}),Ns.jsxs("span",{children:[s.total_orders," orders"]})]})]})}),Ns.jsxs("div",{className:"mt-4 flex flex-wrap gap-3",children:[s.contact_email&&Ns.jsxs("a",{href:`mailto:${s.contact_email}`,className:"inline-flex items-center px-3 py-1.5 bg-pr-surface-2 text-pr-text-1 rounded-lg hover:bg-pr-surface-3 text-sm",children:[Ns.jsx(gr,{className:"h-4 w-4 mr-2"}),"Contact"]}),Object.entries(s.social_links||{}).map(([e,t])=>Ns.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1.5 bg-pr-surface-2 text-pr-text-1 rounded-lg hover:bg-pr-surface-3 text-sm",children:[Ns.jsx(Kt,{className:"h-4 w-4 mr-2"}),e]},e))]})]})]})})}),Ns.jsxs("div",{className:"mb-8",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1",children:"Products"}),Ns.jsxs("div",{className:"flex items-center gap-2",children:[Ns.jsx("button",{onClick:()=>d("grid"),className:"p-2 rounded-lg "+("grid"===c?"bg-blue-100 text-blue-600":"text-pr-text-2 hover:bg-pr-surface-2"),children:Ns.jsx(tr,{className:"h-5 w-5"})}),Ns.jsx("button",{onClick:()=>d("list"),className:"p-2 rounded-lg "+("list"===c?"bg-blue-100 text-blue-600":"text-pr-text-2 hover:bg-pr-surface-2"),children:Ns.jsx(mr,{className:"h-5 w-5"})})]})]}),0===n.length?Ns.jsxs(mV,{className:"p-12 text-center",children:[Ns.jsx(Qr,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-2",children:"No products yet"}),Ns.jsx("p",{className:"text-pr-text-2",children:"This store hasn't listed any products"})]}):Ns.jsx("div",{className:"grid"===c?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:n.map(e=>Ns.jsxs(mV,{className:"overflow-hidden hover:shadow-xl transition-shadow cursor-pointer "+("list"===c?"flex flex-row":""),onClick:()=>t(`/marketplace/product/${e.id}`),children:[Ns.jsx("div",{className:"list"===c?"w-48 flex-shrink-0":"relative pb-[100%]",children:Ns.jsx("img",{src:e.images[0]||"https://via.placeholder.com/400",alt:e.name,className:"list"===c?"w-full h-full object-cover":"absolute inset-0 w-full h-full object-cover"})}),Ns.jsxs("div",{className:"p-4 flex-1",children:[Ns.jsx("h3",{className:"font-semibold text-pr-text-1 line-clamp-2 mb-2",children:e.name}),Ns.jsx("p",{className:"text-sm text-pr-text-2 line-clamp-2 mb-3",children:e.short_description}),Ns.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Ns.jsxs("div",{className:"flex items-center text-yellow-500",children:[Ns.jsx(Zr,{className:"h-4 w-4 fill-current"}),Ns.jsx("span",{className:"text-sm font-medium ml-1",children:e.rating.toFixed(1)})]}),Ns.jsx("span",{className:"text-sm text-pr-text-2",children:""}),Ns.jsxs("span",{className:"text-sm text-pr-text-2",children:[e.sales_count," sold"]})]}),Ns.jsx("div",{className:"font-bold text-lg text-pr-text-1",children:h(e)})]})]},e.id))})]})]})]}):Ns.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1",children:"Store not found"}),Ns.jsx(Oc,{onClick:()=>t("/marketplace"),className:"mt-4",children:"Back to Marketplace"})]})})}function AV(){const e=ke(),{toast:t}=KW(),[r,s]=u.useState(null),[a,n]=u.useState([]),[i,l]=u.useState([]),[o,c]=u.useState(!0),[d,m]=u.useState(!1),[p,h]=u.useState({store_name:"",description:"",contact_email:""});u.useEffect(()=>{x()},[]);const x=async()=>{try{const e=await fetch("/api/marketplace/my-store",{credentials:"include"}),t=await e.json();"success"===t.status&&t.data.store?(s(t.data.store),f(t.data.store.id),g(t.data.store.id)):m(!0)}catch(e){console.error("Error fetching merchant data:",e)}finally{c(!1)}},f=async e=>{try{const t=await fetch(`/api/marketplace/stores/${e}/products`,{credentials:"include"}),r=await t.json();"success"===r.status&&n(r.data.products)}catch(t){console.error("Error fetching products:",t)}},g=async e=>{try{const t=await fetch(`/api/marketplace/stores/${e}/orders`,{credentials:"include"}),r=await t.json();"success"===r.status&&l(r.data.orders)}catch(t){console.error("Error fetching orders:",t)}},b=async e=>{e.preventDefault();try{const e=await fetch("/api/marketplace/stores",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(p)}),r=await e.json();"success"===r.status&&(t({title:"Success!",description:"Your store has been created",type:"success"}),s(r.data.store),m(!1))}catch(r){console.error("Error creating store:",r),t({title:"Error",description:"Failed to create store",type:"destructive"})}};return o?Ns.jsx("div",{className:"flex items-center justify-center min-h-screen-dynamic",children:Ns.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d?Ns.jsx("div",{className:"min-h-screen-dynamic bg-pr-surface-2 flex items-center justify-center p-4",children:Ns.jsxs(mV,{className:"max-w-2xl w-full p-8",children:[Ns.jsxs("div",{className:"text-center mb-8",children:[Ns.jsx(Qr,{className:"mx-auto h-16 w-16 text-blue-600 mb-4"}),Ns.jsx("h1",{className:"text-3xl font-bold text-pr-text-1 mb-2",children:"Create Your Store"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Start selling on Promorang marketplace"})]}),Ns.jsxs("form",{onSubmit:b,className:"space-y-6",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Store Name *"}),Ns.jsx("input",{type:"text",value:p.store_name,onChange:e=>h({...p,store_name:e.target.value}),className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"My Awesome Store",required:!0})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Description"}),Ns.jsx("textarea",{value:p.description,onChange:e=>h({...p,description:e.target.value}),className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"Tell customers about your store..."})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Contact Email *"}),Ns.jsx("input",{type:"email",value:p.contact_email,onChange:e=>h({...p,contact_email:e.target.value}),className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"store@example.com",required:!0})]}),Ns.jsx(Oc,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",size:"lg",children:"Create Store"})]})]})}):r?Ns.jsx("div",{className:"min-h-screen-dynamic bg-pr-surface-2",children:Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Ns.jsx("div",{className:"mb-8",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("h1",{className:"text-3xl font-bold text-pr-text-1",children:r.store_name}),Ns.jsx("p",{className:"text-pr-text-2 mt-1",children:"Manage your store and products"})]}),Ns.jsxs("div",{className:"flex gap-3",children:[Ns.jsxs(Oc,{variant:"outline",onClick:()=>e(`/marketplace/store/${r.store_slug}`),children:[Ns.jsx(Qr,{className:"mr-2 h-4 w-4"}),"View Store"]}),Ns.jsxs(Oc,{onClick:()=>e("/merchant/products/new"),className:"bg-blue-600 hover:bg-blue-700",children:[Ns.jsx(Rr,{className:"mr-2 h-4 w-4"}),"Add Product"]})]})]})}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[Ns.jsx(mV,{className:"p-6",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-medium text-pr-text-2",children:"Total Sales"}),Ns.jsxs("p",{className:"text-2xl font-bold text-pr-text-1 mt-2",children:["$",r.total_sales.toFixed(2)]})]}),Ns.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-full flex items-center justify-center",children:Ns.jsx(Bt,{className:"h-6 w-6 text-green-600"})})]})}),Ns.jsx(mV,{className:"p-6",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-medium text-pr-text-2",children:"Total Orders"}),Ns.jsx("p",{className:"text-2xl font-bold text-pr-text-1 mt-2",children:r.total_orders})]}),Ns.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center",children:Ns.jsx(Hr,{className:"h-6 w-6 text-blue-600"})})]})}),Ns.jsx(mV,{className:"p-6",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-medium text-pr-text-2",children:"Products"}),Ns.jsx("p",{className:"text-2xl font-bold text-pr-text-1 mt-2",children:r.total_products})]}),Ns.jsx("div",{className:"h-12 w-12 bg-purple-100 rounded-full flex items-center justify-center",children:Ns.jsx(Or,{className:"h-6 w-6 text-purple-600"})})]})}),Ns.jsx(mV,{className:"p-6",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-medium text-pr-text-2",children:"Store Rating"}),Ns.jsx("p",{className:"text-2xl font-bold text-pr-text-1 mt-2",children:r.rating.toFixed(1)})]}),Ns.jsx("div",{className:"h-12 w-12 bg-yellow-100 rounded-full flex items-center justify-center",children:Ns.jsx(Zr,{className:"h-6 w-6 text-yellow-600"})})]})})]}),Ns.jsxs(YW,{defaultValue:"products",children:[Ns.jsxs(JW,{children:[Ns.jsxs(ZW,{value:"products",children:["Products (",a.length,")"]}),Ns.jsxs(ZW,{value:"orders",children:["Orders (",i.length,")"]})]}),Ns.jsx(QW,{value:"products",className:"mt-6",children:0===a.length?Ns.jsxs(mV,{className:"p-12 text-center",children:[Ns.jsx(Or,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-2",children:"No products yet"}),Ns.jsx("p",{className:"text-pr-text-2 mb-6",children:"Start by adding your first product"}),Ns.jsxs(Oc,{onClick:()=>e("/merchant/products/new"),className:"bg-blue-600 hover:bg-blue-700",children:[Ns.jsx(Rr,{className:"mr-2 h-4 w-4"}),"Add Product"]})]}):Ns.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(t=>Ns.jsxs(mV,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[Ns.jsxs("div",{className:"relative pb-[75%]",children:[Ns.jsx("img",{src:t.images[0]||"https://via.placeholder.com/400",alt:t.name,className:"absolute inset-0 w-full h-full object-cover"}),Ns.jsx("span",{className:"absolute top-2 right-2 px-2 py-1 rounded text-xs font-medium "+("active"===t.status?"bg-green-100 text-green-800":"bg-pr-surface-2 text-pr-text-1"),children:t.status})]}),Ns.jsxs("div",{className:"p-4",children:[Ns.jsx("h3",{className:"font-semibold text-pr-text-1 mb-2 line-clamp-2",children:t.name}),Ns.jsxs("div",{className:"flex items-center justify-between text-sm text-pr-text-2 mb-3",children:[Ns.jsxs("span",{children:["Stock: ",t.inventory_count]}),Ns.jsxs("span",{children:[t.sales_count," sold"]})]}),Ns.jsxs("div",{className:"flex gap-2",children:[Ns.jsx(Oc,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>e(`/merchant/products/${t.id}/edit`),children:"Edit"}),Ns.jsx(Oc,{variant:"outline",size:"sm",onClick:()=>e(`/marketplace/product/${t.id}`),children:"View"})]})]})]},t.id))})}),Ns.jsx(QW,{value:"orders",className:"mt-6",children:0===i.length?Ns.jsxs(mV,{className:"p-12 text-center",children:[Ns.jsx(Hr,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-2",children:"No orders yet"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Orders will appear here when customers make purchases"})]}):Ns.jsx("div",{className:"space-y-4",children:i.map(e=>Ns.jsx(mV,{className:"p-6",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsxs("h3",{className:"font-semibold text-pr-text-1",children:["Order #",e.order_number]}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mt-1",children:e.users.display_name||e.users.username}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:new Date(e.created_at).toLocaleDateString()})]}),Ns.jsxs("div",{className:"text-right",children:[Ns.jsxs("p",{className:"font-semibold text-pr-text-1",children:[e.total_usd>0&&`$${e.total_usd.toFixed(2)}`,e.total_gems>0&&`${e.total_gems} `,e.total_gold>0&&`${e.total_gold} `]}),Ns.jsx("span",{className:"inline-block mt-2 px-2 py-1 rounded text-xs font-medium "+("paid"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status})]})]})},e.id))})})]})]})}):null}function MV(){const e=ke(),{toast:t}=KW(),[r,s]=u.useState(null),[a,n]=u.useState([]),[i,l]=u.useState(!0),[o,c]=u.useState(!1),[d,m]=u.useState(!1);u.useEffect(()=>{p()},[]);const p=async()=>{try{l(!0);const e=await As("/operator/me");if(s(e.operator??null),e.operator){const e=await As("/operator/hubs");n(e.hubs||[])}else n([])}catch(e){console.error("Failed to load operator data",e),t({title:"Error",description:"Failed to load operator dashboard",type:"destructive"})}finally{l(!1)}},h=async()=>{try{c(!0);const e={handle:`hub_${Math.random().toString(36).substring(2,8)}`,display_name:"Season Operator",type:"operator"},r=await As("/operator",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});s(r.operator),t({title:"Operator created",description:"You can now create and manage season hubs.",type:"success"}),p()}catch(e){console.error("Failed to create operator",e),t({title:"Error",description:"Failed to create operator profile",type:"destructive"})}finally{c(!1)}},x=async()=>{try{m(!0);const e={name:"My First Season",slug:"my-first-season",description:"Your first operator hub on Promorang.",access_type:"open"},r=await As("/operator/hubs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});n(e=>[r.hub,...e]),t({title:"Season hub created",description:"You can share this hub with your community.",type:"success"})}catch(e){console.error("Failed to create hub",e),t({title:"Error",description:"Failed to create season hub",type:"destructive"})}finally{m(!1)}};if(i)return Ns.jsx("div",{className:"flex items-center justify-center min-h-screen-dynamic",children:Ns.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!r)return Ns.jsx("div",{className:"min-h-screen-dynamic flex items-center justify-center bg-pr-surface-2",children:Ns.jsx(mV,{className:"max-w-xl w-full p-8 text-center",children:Ns.jsxs("div",{className:"flex flex-col items-center gap-4",children:[Ns.jsx(or,{className:"h-12 w-12 text-purple-600"}),Ns.jsx("h1",{className:"text-2xl font-bold text-pr-text-1",children:"Operate a Season"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Turn your audience, brand, or community into a Season Hub on Promorang."}),Ns.jsx("p",{className:"text-xs text-pr-text-2/80 max-w-md",children:"As an operator you orchestrate campaigns, manage season hubs, and connect brands with the right creators."}),Ns.jsxs(Oc,{size:"lg",className:"mt-4 bg-purple-600 hover:bg-purple-700",onClick:h,disabled:o,children:[Ns.jsx(Yr,{className:"mr-2 h-4 w-4"}),o?"Creating":"Create Operator Profile"]})]})})});const f=a.filter(e=>"active"===e.status),g=12*a.length,b=8*a.length;return Ns.jsx("div",{className:"min-h-screen-dynamic bg-pr-surface-2",children:Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:[Ns.jsx("div",{className:"bg-gradient-to-br from-purple-600 via-blue-600 to-cyan-500 rounded-2xl p-8 text-white shadow-xl",children:Ns.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[Ns.jsxs("div",{className:"space-y-3",children:[Ns.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/20 backdrop-blur-sm text-xs uppercase tracking-wide font-semibold",children:[Ns.jsx(Yr,{className:"h-4 w-4"}),Ns.jsx("span",{children:"Season Operator"})]}),Ns.jsx("h1",{className:"text-4xl font-bold",children:r.display_name||"Your Season Hub"}),Ns.jsx("p",{className:"text-white/90 text-lg max-w-2xl",children:"Orchestrate campaigns, manage season hubs, and connect brands with top creators in your ecosystem."})]}),Ns.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[Ns.jsxs(Oc,{size:"lg",onClick:x,disabled:d,className:"bg-white text-purple-600 hover:bg-white/90 font-semibold shadow-lg",children:[Ns.jsx(Dt,{className:"mr-2 h-5 w-5"}),d?"Creating...":"Create New Hub"]}),Ns.jsxs(Oc,{size:"lg",variant:"outline",onClick:()=>e("/marketplace"),className:"bg-white/10 text-white border-white/30 hover:bg-white/20 backdrop-blur-sm",children:[Ns.jsx(zr,{className:"mr-2 h-5 w-5"}),"Explore Marketplace"]})]})]})}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[Ns.jsxs(mV,{className:"p-6 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 border-purple-200 dark:border-purple-700",children:[Ns.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ns.jsx("div",{className:"p-3 bg-purple-600 rounded-xl",children:Ns.jsx(or,{className:"h-6 w-6 text-white"})}),Ns.jsxs("div",{className:"flex items-center gap-1 text-emerald-600 dark:text-emerald-400 text-sm font-semibold",children:[Ns.jsx(as,{className:"h-4 w-4"}),Ns.jsxs("span",{children:["+",a.length>0?12:0,"%"]})]})]}),Ns.jsxs("div",{className:"space-y-1",children:[Ns.jsx("p",{className:"text-sm text-pr-text-2 font-medium",children:"Total Hubs"}),Ns.jsx("p",{className:"text-3xl font-bold text-pr-text-1",children:a.length}),Ns.jsxs("p",{className:"text-xs text-pr-text-2",children:[f.length," active, ",a.length-f.length," pending"]})]})]}),Ns.jsxs(mV,{className:"p-6 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-blue-200 dark:border-blue-700",children:[Ns.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ns.jsx("div",{className:"p-3 bg-blue-600 rounded-xl",children:Ns.jsx(us,{className:"h-6 w-6 text-white"})}),Ns.jsxs("div",{className:"flex items-center gap-1 text-emerald-600 dark:text-emerald-400 text-sm font-semibold",children:[Ns.jsx(as,{className:"h-4 w-4"}),Ns.jsx("span",{children:"+23%"})]})]}),Ns.jsxs("div",{className:"space-y-1",children:[Ns.jsx("p",{className:"text-sm text-pr-text-2 font-medium",children:"Active Creators"}),Ns.jsx("p",{className:"text-3xl font-bold text-pr-text-1",children:g}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Across all your hubs"})]})]}),Ns.jsxs(mV,{className:"p-6 bg-gradient-to-br from-cyan-50 to-cyan-100 dark:from-cyan-900/20 dark:to-cyan-800/20 border-cyan-200 dark:border-cyan-700",children:[Ns.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ns.jsx("div",{className:"p-3 bg-cyan-600 rounded-xl",children:Ns.jsx(yr,{className:"h-6 w-6 text-white"})}),Ns.jsxs("div",{className:"flex items-center gap-1 text-emerald-600 dark:text-emerald-400 text-sm font-semibold",children:[Ns.jsx(as,{className:"h-4 w-4"}),Ns.jsx("span",{children:"+18%"})]})]}),Ns.jsxs("div",{className:"space-y-1",children:[Ns.jsx("p",{className:"text-sm text-pr-text-2 font-medium",children:"Campaigns"}),Ns.jsx("p",{className:"text-3xl font-bold text-pr-text-1",children:b}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Running this month"})]})]}),Ns.jsxs(mV,{className:"p-6 bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 border-emerald-200 dark:border-emerald-700",children:[Ns.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ns.jsx("div",{className:"p-3 bg-emerald-600 rounded-xl",children:Ns.jsx(ct,{className:"h-6 w-6 text-white"})}),Ns.jsxs("div",{className:"flex items-center gap-1 text-emerald-600 dark:text-emerald-400 text-sm font-semibold",children:[Ns.jsx(as,{className:"h-4 w-4"}),Ns.jsx("span",{children:"+8%"})]})]}),Ns.jsxs("div",{className:"space-y-1",children:[Ns.jsx("p",{className:"text-sm text-pr-text-2 font-medium",children:"Engagement Rate"}),Ns.jsxs("p",{className:"text-3xl font-bold text-pr-text-1",children:[67,"%"]}),Ns.jsx("p",{className:"text-xs text-pr-text-2",children:"Above platform average"})]})]})]}),Ns.jsxs(YW,{defaultValue:"hubs",className:"space-y-6",children:[Ns.jsxs(JW,{className:"grid w-full grid-cols-4 lg:w-auto lg:inline-grid",children:[Ns.jsxs(ZW,{value:"hubs",className:"gap-2",children:[Ns.jsx(or,{className:"h-4 w-4"}),Ns.jsx("span",{className:"hidden sm:inline",children:"My Hubs"}),Ns.jsx("span",{className:"sm:hidden",children:"Hubs"})]}),Ns.jsxs(ZW,{value:"analytics",className:"gap-2",children:[Ns.jsx(Nt,{className:"h-4 w-4"}),Ns.jsx("span",{className:"hidden sm:inline",children:"Analytics"}),Ns.jsx("span",{className:"sm:hidden",children:"Stats"})]}),Ns.jsxs(ZW,{value:"campaigns",className:"gap-2",children:[Ns.jsx(yr,{className:"h-4 w-4"}),Ns.jsx("span",{className:"hidden sm:inline",children:"Campaigns"}),Ns.jsx("span",{className:"sm:hidden",children:"Camps"})]}),Ns.jsxs(ZW,{value:"tools",className:"gap-2",children:[Ns.jsx(fs,{className:"h-4 w-4"}),Ns.jsx("span",{className:"hidden sm:inline",children:"Tools"}),Ns.jsx("span",{className:"sm:hidden",children:"Tools"})]})]}),Ns.jsx(QW,{value:"hubs",className:"space-y-6",children:0===a.length?Ns.jsx(mV,{className:"p-12 text-center bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/10 dark:to-blue-900/10 border-dashed",children:Ns.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[Ns.jsx("div",{className:"p-4 bg-purple-100 dark:bg-purple-900/30 rounded-full w-20 h-20 mx-auto flex items-center justify-center",children:Ns.jsx(or,{className:"h-10 w-10 text-purple-600 dark:text-purple-400"})}),Ns.jsx("h3",{className:"text-xl font-semibold text-pr-text-1",children:"Create Your First Hub"}),Ns.jsx("p",{className:"text-pr-text-2",children:"Season hubs are your command center for running campaigns, coordinating creators, and tracking performance."}),Ns.jsxs(Oc,{size:"lg",className:"bg-purple-600 hover:bg-purple-700",onClick:x,disabled:d,children:[Ns.jsx(Dt,{className:"mr-2 h-5 w-5"}),d?"Creating Hub":"Create Season Hub"]})]})}):Ns.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:a.map(t=>Ns.jsx(mV,{className:"p-6 hover:shadow-lg transition-all cursor-pointer group bg-pr-surface-card border border-pr-surface-3 hover:border-purple-400",onClick:()=>e(`/club/${t.slug}`),children:Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsx("div",{className:"flex items-start justify-between",children:Ns.jsxs("div",{className:"flex-1",children:[Ns.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Ns.jsx("h3",{className:"text-xl font-bold text-pr-text-1 group-hover:text-purple-600 transition-colors",children:t.name}),Ns.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] uppercase tracking-wide font-semibold "+("active"===t.status?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"),children:t.status})]}),Ns.jsx("p",{className:"text-sm text-pr-text-2 line-clamp-2",children:t.description||"Season hub for your campaigns, drops, and community activations."})]})}),Ns.jsxs("div",{className:"flex items-center gap-4 text-sm text-pr-text-2",children:[Ns.jsxs("div",{className:"flex items-center gap-1",children:[Ns.jsx(us,{className:"h-4 w-4"}),Ns.jsxs("span",{children:[Math.floor(50*Math.random())+10," creators"]})]}),Ns.jsxs("div",{className:"flex items-center gap-1",children:[Ns.jsx(yr,{className:"h-4 w-4"}),Ns.jsxs("span",{children:[Math.floor(12*Math.random())+3," campaigns"]})]}),Ns.jsxs("div",{className:"flex items-center gap-1",children:[Ns.jsx(ct,{className:"h-4 w-4"}),Ns.jsxs("span",{children:[Math.floor(30*Math.random())+50,"% active"]})]})]}),Ns.jsxs("div",{className:"pt-4 border-t border-pr-surface-3 flex items-center justify-between",children:[Ns.jsxs("div",{className:"flex items-center gap-2 text-xs text-pr-text-2",children:[Ns.jsx("span",{className:"font-mono bg-pr-surface-2 px-2 py-1 rounded",children:t.slug}),Ns.jsx("span",{className:"px-2 py-1 rounded "+("open"===t.access_type?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400"),children:"open"===t.access_type?"Open Access":"Invite Only"})]}),Ns.jsxs(Oc,{size:"sm",variant:"ghost",onClick:r=>{r.stopPropagation(),e(`/club/${t.slug}`)},className:"group-hover:bg-purple-100 dark:group-hover:bg-purple-900/30",children:["View Hub",Ns.jsx(pt,{className:"ml-1 h-4 w-4"})]})]})]})},t.id))})}),Ns.jsxs(QW,{value:"analytics",className:"space-y-6",children:[Ns.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Ns.jsxs(mV,{className:"p-6 bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/10 dark:to-cyan-900/10",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsx("h3",{className:"font-semibold text-pr-text-1",children:"Total Reach"}),Ns.jsx(Nt,{className:"h-5 w-5 text-blue-600"})]}),Ns.jsx("p",{className:"text-3xl font-bold text-pr-text-1",children:"2.4M"}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mt-1",children:"Impressions this month"}),Ns.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-emerald-600 dark:text-emerald-400",children:[Ns.jsx(as,{className:"h-4 w-4"}),Ns.jsx("span",{children:"+32% from last month"})]})]}),Ns.jsxs(mV,{className:"p-6 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/10 dark:to-pink-900/10",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsx("h3",{className:"font-semibold text-pr-text-1",children:"Conversion Rate"}),Ns.jsx(ts,{className:"h-5 w-5 text-purple-600"})]}),Ns.jsx("p",{className:"text-3xl font-bold text-pr-text-1",children:"8.7%"}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mt-1",children:"Campaign completion rate"}),Ns.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-emerald-600 dark:text-emerald-400",children:[Ns.jsx(as,{className:"h-4 w-4"}),Ns.jsx("span",{children:"+5.2% from last month"})]})]}),Ns.jsxs(mV,{className:"p-6 bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/10 dark:to-teal-900/10",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ns.jsx("h3",{className:"font-semibold text-pr-text-1",children:"Revenue"}),Ns.jsx(ct,{className:"h-5 w-5 text-emerald-600"})]}),Ns.jsx("p",{className:"text-3xl font-bold text-pr-text-1",children:"$12.4K"}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mt-1",children:"Total earnings"}),Ns.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-emerald-600 dark:text-emerald-400",children:[Ns.jsx(as,{className:"h-4 w-4"}),Ns.jsx("span",{children:"+18% from last month"})]})]})]}),Ns.jsxs(mV,{className:"p-6",children:[Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1 mb-4",children:"Performance Overview"}),Ns.jsx("div",{className:"h-64 flex items-center justify-center bg-pr-surface-1 rounded-lg border border-pr-surface-3",children:Ns.jsx("p",{className:"text-pr-text-2",children:"Analytics charts coming soon"})})]})]}),Ns.jsx(QW,{value:"campaigns",className:"space-y-6",children:Ns.jsxs(mV,{className:"p-6 bg-pr-surface-card border border-pr-surface-3",children:[Ns.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-xl font-bold text-pr-text-1",children:"Active Campaigns"}),Ns.jsx("p",{className:"text-pr-text-2 mt-1",children:"Manage campaigns across all your hubs"})]}),Ns.jsxs(Oc,{onClick:()=>e("/marketplace"),className:"bg-cyan-600 hover:bg-cyan-700",children:[Ns.jsx(Dt,{className:"mr-2 h-4 w-4"}),"New Campaign"]})]}),Ns.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[1,2,3].map(e=>Ns.jsxs(mV,{className:"p-4 bg-pr-surface-1 border border-pr-surface-3 hover:border-cyan-400 transition-colors cursor-pointer",children:[Ns.jsxs("div",{className:"flex items-start justify-between mb-3",children:[Ns.jsxs("div",{children:[Ns.jsxs("h4",{className:"font-semibold text-pr-text-1",children:["Campaign #",e]}),Ns.jsxs("p",{className:"text-sm text-pr-text-2 mt-1",children:["Running across ",Math.floor(3*Math.random())+1," hubs"]})]}),Ns.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400",children:"Active"})]}),Ns.jsxs("div",{className:"flex items-center gap-4 text-sm text-pr-text-2",children:[Ns.jsxs("div",{className:"flex items-center gap-1",children:[Ns.jsx(us,{className:"h-4 w-4"}),Ns.jsx("span",{children:Math.floor(30*Math.random())+10})]}),Ns.jsxs("div",{className:"flex items-center gap-1",children:[Ns.jsx(yt,{className:"h-4 w-4"}),Ns.jsxs("span",{children:[Math.floor(20*Math.random())+5,"d left"]})]}),Ns.jsxs("div",{className:"flex items-center gap-1",children:[Ns.jsx(ts,{className:"h-4 w-4"}),Ns.jsxs("span",{children:[Math.floor(40*Math.random())+60,"%"]})]})]})]},e))})]})}),Ns.jsx(QW,{value:"tools",className:"space-y-6",children:Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ns.jsx(mV,{className:"p-6 bg-pr-surface-card border border-pr-surface-3 hover:border-purple-400 transition-colors cursor-pointer",onClick:()=>e("/marketplace"),children:Ns.jsxs("div",{className:"flex items-start gap-4",children:[Ns.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-xl",children:Ns.jsx(yr,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("h3",{className:"font-semibold text-pr-text-1 mb-2",children:"Drops & Content"}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mb-3",children:"Create challenges and drops, then route creators to them from your hub or the marketplace."}),Ns.jsxs(Oc,{size:"sm",variant:"outline",children:["Open Marketplace",Ns.jsx(pt,{className:"ml-1 h-4 w-4"})]})]})]})}),Ns.jsx(mV,{className:"p-6 bg-pr-surface-card border border-pr-surface-3 hover:border-emerald-400 transition-colors cursor-pointer",onClick:()=>e("/leaderboard"),children:Ns.jsxs("div",{className:"flex items-start gap-4",children:[Ns.jsx("div",{className:"p-3 bg-emerald-100 dark:bg-emerald-900/30 rounded-xl",children:Ns.jsx(is,{className:"h-6 w-6 text-emerald-600 dark:text-emerald-400"})}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("h3",{className:"font-semibold text-pr-text-1 mb-2",children:"Predictions & Leaderboards"}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mb-3",children:"Surface creator performance in public leaderboards and prediction markets."}),Ns.jsxs(Oc,{size:"sm",variant:"outline",children:["View Leaderboard",Ns.jsx(pt,{className:"ml-1 h-4 w-4"})]})]})]})}),Ns.jsx(mV,{className:"p-6 bg-pr-surface-card border border-pr-surface-3 hover:border-blue-400 transition-colors cursor-pointer",onClick:()=>e("/dashboard"),children:Ns.jsxs("div",{className:"flex items-start gap-4",children:[Ns.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-xl",children:Ns.jsx(wt,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("h3",{className:"font-semibold text-pr-text-1 mb-2",children:"Sponsorships"}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mb-3",children:"Position your hubs as programmable inventory for brands and sponsors."}),Ns.jsxs(Oc,{size:"sm",variant:"outline",children:["Advertiser View",Ns.jsx(pt,{className:"ml-1 h-4 w-4"})]})]})]})}),Ns.jsx(mV,{className:"p-6 bg-pr-surface-card border border-pr-surface-3 hover:border-cyan-400 transition-colors cursor-pointer",children:Ns.jsxs("div",{className:"flex items-start gap-4",children:[Ns.jsx("div",{className:"p-3 bg-cyan-100 dark:bg-cyan-900/30 rounded-xl",children:Ns.jsx(Kr,{className:"h-6 w-6 text-cyan-600 dark:text-cyan-400"})}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsx("h3",{className:"font-semibold text-pr-text-1 mb-2",children:"Share & Promote"}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mb-3",children:"Get shareable links and embed codes for your hubs and campaigns."}),Ns.jsxs(Oc,{size:"sm",variant:"outline",children:["Get Links",Ns.jsx(Lt,{className:"ml-1 h-4 w-4"})]})]})]})})]})})]})]})})}function DV(){const{hubSlug:e}=Ce(),t=ke(),{toast:r}=KW(),[s,a]=u.useState(null),[n,i]=u.useState(!0);u.useEffect(()=>{e&&l()},[e]);const l=async()=>{try{i(!0);const t=await As(`/operator/hubs/${encodeURIComponent(e)}`);a(t.hub)}catch(t){console.error("Failed to load hub",t),r({title:"Hub not found",description:"This season hub may be inactive or does not exist.",type:"destructive"}),a(null)}finally{i(!1)}};if(n)return Ns.jsx("div",{className:"flex items-center justify-center min-h-screen-dynamic",children:Ns.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})});if(!s)return Ns.jsx("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("h1",{className:"text-2xl font-bold text-pr-text-1 mb-3",children:"Season hub not found"}),Ns.jsx("p",{className:"text-pr-text-2 mb-6",children:"This link may be expired or the hub is not active."}),Ns.jsxs(Oc,{onClick:()=>t("/dashboard"),children:[Ns.jsx(ut,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]})]})});const o=s.theme_config?.primaryColor||"#7C3AED",c=s.theme_config?.accentColor||"#FBBF24";return Ns.jsxs("div",{className:"min-h-screen-dynamic bg-pr-surface-2",children:[Ns.jsx("div",{className:"relative py-12",style:{background:`linear-gradient(135deg, ${o}, ${c})`},children:Ns.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center gap-8",children:[Ns.jsx("div",{className:"flex-shrink-0",children:Ns.jsx("div",{className:"h-24 w-24 rounded-3xl bg-pr-surface-card flex items-center justify-center shadow-xl border border-white/20 overflow-hidden",children:s.theme_config?.logoUrl?Ns.jsx("img",{src:s.theme_config.logoUrl,alt:s.name,className:"h-full w-full object-cover"}):Ns.jsx(zr,{className:"h-12 w-12 text-white"})})}),Ns.jsxs("div",{className:"flex-1 text-left text-white",children:[Ns.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-3",children:s.name}),Ns.jsx("p",{className:"text-white/90 mb-3",children:s.description||"A creator-led season hub powered by Promorang."}),s.operator&&Ns.jsxs("p",{className:"text-sm text-white/80",children:["Operated by ",Ns.jsxs("span",{className:"font-semibold",children:["@",s.operator.handle]}),s.operator.display_name?`  ${s.operator.display_name}`:""]})]})]})}),Ns.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-6",children:[Ns.jsxs(mV,{className:"p-6 flex flex-col md:flex-row items-center justify-between gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("h2",{className:"text-lg font-semibold text-pr-text-1 mb-1",children:"Season Overview"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"This is an early preview of the Season Operator system. Soon, you'll see active challenges, predictions, and leaderboards for this hub."})]}),Ns.jsxs("div",{className:"flex gap-3",children:[Ns.jsxs(Oc,{variant:"outline",onClick:()=>t("/earn"),children:[Ns.jsx(us,{className:"mr-2 h-4 w-4"}),"Explore Earn"]}),Ns.jsxs(Oc,{variant:"outline",onClick:()=>t("/growth-hub"),children:[Ns.jsx(is,{className:"mr-2 h-4 w-4"}),"Growth Hub"]})]})]}),Ns.jsxs(mV,{className:"p-6",children:[Ns.jsx("h3",{className:"text-md font-semibold text-pr-text-1 mb-2",children:"Challenges & Predictions"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"In future iterations, this section will show live challenges, prediction games, and seasonal tasks configured by the operator."})]}),Ns.jsxs(mV,{className:"p-6",children:[Ns.jsx("h3",{className:"text-md font-semibold text-pr-text-1 mb-2",children:"Leaderboard"}),Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Players who participate across this hub's campaigns will appear on a local leaderboard, while still contributing to Promorang's global rankings."})]})]})]})}function IV(){const{productId:e}=Ce(),t=ke(),{toast:r}=KW(),[s,a]=u.useState(!1),[n,i]=u.useState([]),[l,o]=u.useState({name:"",short_description:"",description:"",category_id:"",price_usd:"",price_gems:"",price_gold:"",inventory_count:"",is_digital:!1,tags:[],images:[]}),[c,d]=u.useState(""),[m,p]=u.useState("");u.useEffect(()=>{h(),e&&x()},[e]);const h=async()=>{try{const e=await la("/api/marketplace/categories"),t=await e.json();"success"===t.status&&i(t.data.categories)}catch(e){console.error("Error fetching categories:",e)}},x=async()=>{try{const t=await la(`/api/marketplace/products/${e}`),r=await t.json();if("success"===r.status){const e=r.data.product;o({name:e.name,short_description:e.short_description||"",description:e.description||"",category_id:e.category_id||"",price_usd:e.price_usd?.toString()||"",price_gems:e.price_gems?.toString()||"",price_gold:e.price_gold?.toString()||"",inventory_count:e.inventory_count?.toString()||"",is_digital:e.is_digital,tags:e.tags||[],images:e.images||[]})}}catch(t){console.error("Error fetching product:",t)}},f=()=>{c&&!l.tags.includes(c)&&(o({...l,tags:[...l.tags,c]}),d(""))};return Ns.jsx("div",{className:"min-h-screen-dynamic bg-pr-surface-2",children:Ns.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Ns.jsxs(Oc,{variant:"outline",onClick:()=>t(-1),className:"mb-6",children:[Ns.jsx(ut,{className:"mr-2 h-4 w-4"}),"Back"]}),Ns.jsx("h1",{className:"text-3xl font-bold text-pr-text-1 mb-8",children:e?"Edit Product":"Add New Product"}),Ns.jsxs("form",{onSubmit:async s=>{s.preventDefault(),a(!0);try{const s={...l,price_usd:l.price_usd?parseFloat(l.price_usd):null,price_gems:l.price_gems?parseInt(l.price_gems):null,price_gold:l.price_gold?parseInt(l.price_gold):null,inventory_count:l.inventory_count?parseInt(l.inventory_count):0},a=e?`/api/marketplace/products/${e}`:"/api/marketplace/products",n=e?"PATCH":"POST",i=await la(a,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),o=await i.json();if("success"!==o.status)throw new Error(o.message);r({title:"Success!",description:e?"Product updated":"Product created",type:"success"}),t("/merchant/dashboard")}catch(n){console.error("Error saving product:",n),r({title:"Error",description:n.message||"Failed to save product",type:"destructive"})}finally{a(!1)}},className:"space-y-6",children:[Ns.jsxs(mV,{className:"p-6",children:[Ns.jsx("h2",{className:"text-xl font-semibold text-pr-text-1 mb-4",children:"Basic Information"}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Product Name *"}),Ns.jsx("input",{type:"text",value:l.name,onChange:e=>o({...l,name:e.target.value}),className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Short Description"}),Ns.jsx("input",{type:"text",value:l.short_description,onChange:e=>o({...l,short_description:e.target.value}),className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Brief description for product cards"})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Full Description"}),Ns.jsx("textarea",{value:l.description,onChange:e=>o({...l,description:e.target.value}),className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500",rows:6,placeholder:"Detailed product description"})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Category"}),Ns.jsxs("select",{value:l.category_id,onChange:e=>o({...l,category_id:e.target.value}),className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500",children:[Ns.jsx("option",{value:"",children:"Select a category"}),n.map(e=>Ns.jsx("option",{value:e.id,children:e.name},e.id))]})]})]})]}),Ns.jsxs(mV,{className:"p-6",children:[Ns.jsx("h2",{className:"text-xl font-semibold text-pr-text-1 mb-4",children:"Pricing"}),Ns.jsx("p",{className:"text-sm text-pr-text-2 mb-4",children:"Set at least one price option"}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Price (USD)"}),Ns.jsx("input",{type:"number",step:"0.01",value:l.price_usd,onChange:e=>o({...l,price_usd:e.target.value}),className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"29.99"})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Price (Gems) "}),Ns.jsx("input",{type:"number",value:l.price_gems,onChange:e=>o({...l,price_gems:e.target.value}),className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"2999"})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Price (Gold) "}),Ns.jsx("input",{type:"number",value:l.price_gold,onChange:e=>o({...l,price_gold:e.target.value}),className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"299"})]})]})]}),Ns.jsxs(mV,{className:"p-6",children:[Ns.jsx("h2",{className:"text-xl font-semibold text-pr-text-1 mb-4",children:"Inventory"}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{className:"flex items-center gap-3",children:[Ns.jsx("input",{type:"checkbox",checked:l.is_digital,onChange:e=>o({...l,is_digital:e.target.checked}),className:"h-4 w-4 text-blue-600 rounded"}),Ns.jsx("label",{className:"text-sm font-medium text-pr-text-1",children:"Digital Product (unlimited stock)"})]}),!l.is_digital&&Ns.jsxs("div",{children:[Ns.jsx("label",{className:"block text-sm font-medium text-pr-text-1 mb-2",children:"Inventory Count"}),Ns.jsx("input",{type:"number",value:l.inventory_count,onChange:e=>o({...l,inventory_count:e.target.value}),className:"w-full px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"100"})]})]})]}),Ns.jsxs(mV,{className:"p-6",children:[Ns.jsx("h2",{className:"text-xl font-semibold text-pr-text-1 mb-4",children:"Images"}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{className:"flex gap-2",children:[Ns.jsx("input",{type:"url",value:m,onChange:e=>p(e.target.value),className:"flex-1 px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/image.jpg"}),Ns.jsx(Oc,{type:"button",onClick:()=>{m&&!l.images.includes(m)&&(o({...l,images:[...l.images,m]}),p(""))},children:Ns.jsx(Rr,{className:"h-4 w-4"})})]}),l.images.length>0&&Ns.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:l.images.map((e,t)=>Ns.jsxs("div",{className:"relative group",children:[Ns.jsx("img",{src:e,alt:`Product ${t+1}`,className:"w-full h-32 object-cover rounded-lg"}),Ns.jsx("button",{type:"button",onClick:()=>(e=>{o({...l,images:l.images.filter(t=>t!==e)})})(e),className:"absolute top-2 right-2 p-1 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:Ns.jsx(hs,{className:"h-4 w-4"})})]},t))})]})]}),Ns.jsxs(mV,{className:"p-6",children:[Ns.jsx("h2",{className:"text-xl font-semibold text-pr-text-1 mb-4",children:"Tags"}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{className:"flex gap-2",children:[Ns.jsx("input",{type:"text",value:c,onChange:e=>d(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),f()),className:"flex-1 px-4 py-2 border border-pr-surface-3 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Add a tag"}),Ns.jsx(Oc,{type:"button",onClick:f,children:Ns.jsx(Rr,{className:"h-4 w-4"})})]}),l.tags.length>0&&Ns.jsx("div",{className:"flex flex-wrap gap-2",children:l.tags.map((e,t)=>Ns.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[e,Ns.jsx("button",{type:"button",onClick:()=>(e=>{o({...l,tags:l.tags.filter(t=>t!==e)})})(e),className:"hover:text-blue-900",children:Ns.jsx(hs,{className:"h-3 w-3"})})]},t))})]})]}),Ns.jsxs("div",{className:"flex gap-3",children:[Ns.jsx(Oc,{type:"submit",disabled:s,className:"flex-1 bg-blue-600 hover:bg-blue-700",size:"lg",children:s?"Saving...":e?"Update Product":"Create Product"}),Ns.jsx(Oc,{type:"button",variant:"outline",onClick:()=>t(-1),size:"lg",children:"Cancel"})]})]})]})})}function RV(){const e=ke(),[t,r]=u.useState([]),[s,a]=u.useState(!0),[n,i]=u.useState(!1),[l,o]=u.useState(!1),[c,d]=u.useState(!0),[m,p]=u.useState(1),[h,x]=u.useState("following"),f=u.useRef(null);u.useEffect(()=>{r([]),p(1),d(!0),g(1,!0)},[h]),u.useEffect(()=>{const e=new IntersectionObserver(e=>{e[0].isIntersecting&&c&&!s&&!n&&b()},{threshold:.1}),t=f.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},[c,s,n]);const g=async(e=1,t=!1)=>{try{t?a(!0):i(!0);const s="following"===h?"/api/social/feed":"/api/social/feed?type=trending",n=`${s}${s.includes("?")?"&":"?"}page=${e}&limit=10`,l=await fetch(n,{credentials:"include"}),o=await l.json();if("success"===o.status){const e=o.data.activities||[];r(r=>t?e:[...r,...e]),d(10===e.length)}}catch(s){console.error("Error fetching feed:",s)}finally{a(!1),i(!1),o(!1)}},b=u.useCallback(()=>{const e=m+1;p(e),g(e,!1)},[m]),v=e=>{switch(e){case"drop_completion":return Ns.jsx(fs,{className:"h-5 w-5 text-yellow-500"});case"product_purchase":return Ns.jsx(Hr,{className:"h-5 w-5 text-blue-500"});case"referral":return Ns.jsx(us,{className:"h-5 w-5 text-purple-500"});case"achievement":return Ns.jsx(ht,{className:"h-5 w-5 text-orange-500"});case"review":return Ns.jsx(wr,{className:"h-5 w-5 text-green-500"});default:return Ns.jsx(as,{className:"h-5 w-5 text-pr-text-2"})}},y=e=>{switch(e){case"drop_completion":return"bg-yellow-50 border-yellow-200";case"product_purchase":return"bg-blue-50 border-blue-200";case"referral":return"bg-purple-50 border-purple-200";case"achievement":return"bg-orange-50 border-orange-200";case"review":return"bg-green-50 border-green-200";default:return"bg-pr-surface-2 border-pr-surface-3"}},j=e=>{const t=new Date,r=new Date(e),s=Math.floor((t.getTime()-r.getTime())/1e3);return s<60?"just now":s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:s<604800?`${Math.floor(s/86400)}d ago`:r.toLocaleDateString()};return s&&0===t.length?Ns.jsx("div",{className:"min-h-screen-dynamic bg-pr-surface-2",children:Ns.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-6",children:[Ns.jsx("div",{className:"h-10 w-64 bg-pr-surface-3 rounded-lg animate-pulse"}),Ns.jsx("div",{className:"h-12 w-full bg-pr-surface-3 rounded-lg animate-pulse"}),Array.from({length:5}).map((e,t)=>Ns.jsx("div",{className:"rounded-xl border border-pr-surface-3 bg-pr-surface-card p-6 space-y-4 animate-pulse",children:Ns.jsxs("div",{className:"flex gap-4",children:[Ns.jsx("div",{className:"w-12 h-12 bg-pr-surface-3 rounded-full"}),Ns.jsxs("div",{className:"flex-1 space-y-3",children:[Ns.jsx("div",{className:"h-4 bg-pr-surface-3 rounded w-3/4"}),Ns.jsx("div",{className:"h-4 bg-pr-surface-3 rounded w-full"}),Ns.jsx("div",{className:"h-4 bg-pr-surface-3 rounded w-2/3"}),Ns.jsx("div",{className:"h-32 bg-pr-surface-3 rounded-lg"}),Ns.jsxs("div",{className:"flex gap-4",children:[Ns.jsx("div",{className:"h-4 w-16 bg-pr-surface-3 rounded"}),Ns.jsx("div",{className:"h-4 w-16 bg-pr-surface-3 rounded"})]})]})]})},`skeleton-${t}`))]})}):Ns.jsx("div",{className:"min-h-screen-dynamic bg-pr-surface-2",children:Ns.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Ns.jsxs("div",{className:"mb-8",children:[Ns.jsx("h1",{className:"text-3xl font-bold text-pr-text-1 mb-2",children:"Activity Feed"}),Ns.jsx("p",{className:"text-pr-text-2",children:"See what's happening in the Promorang community"})]}),Ns.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ns.jsx(YW,{value:h,onValueChange:x,className:"flex-1",children:Ns.jsxs(JW,{children:[Ns.jsx(ZW,{value:"following",children:"Following"}),Ns.jsx(ZW,{value:"trending",children:"Trending"}),Ns.jsx(ZW,{value:"all",children:"Everyone"})]})}),Ns.jsx("button",{onClick:async()=>{o(!0),p(1),d(!0),await g(1,!0)},disabled:l,className:"p-2 rounded-lg hover:bg-pr-surface-2 transition-colors disabled:opacity-50","aria-label":"Refresh feed",children:Ns.jsx($r,{className:"h-5 w-5 text-pr-text-2 "+(l?"animate-spin":"")})})]}),Ns.jsx(YW,{value:h,onValueChange:x,children:Ns.jsx(QW,{value:h,children:0===t.length?Ns.jsxs(mV,{className:"p-12 text-center",children:[Ns.jsx(as,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),Ns.jsx("h3",{className:"text-lg font-medium text-pr-text-1 mb-2",children:"No activities yet"}),Ns.jsx("p",{className:"text-pr-text-2 mb-6",children:"following"===h?"Follow users to see their activities here":"Be the first to complete a drop or make a purchase!"})]}):Ns.jsxs(Ns.Fragment,{children:[Ns.jsx("div",{className:"space-y-4",children:t.map(t=>Ns.jsx(mV,{className:`p-6 hover:shadow-lg transition-shadow cursor-pointer border-l-4 ${y(t.activity_type)}`,onClick:()=>{"drop_completion"===t.activity_type?e("/earn"):"product_purchase"===t.activity_type&&e("/marketplace")},children:Ns.jsxs("div",{className:"flex gap-4",children:[Ns.jsx("img",{src:t.user.profile_image||"https://via.placeholder.com/48",alt:t.user.display_name,className:"w-12 h-12 rounded-full cursor-pointer",onClick:r=>{r.stopPropagation(),e(`/profile/${t.user.username}`)}}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsxs("div",{className:"flex items-start justify-between mb-2",children:[Ns.jsxs("div",{className:"flex items-center gap-2",children:[Ns.jsx("span",{className:"font-semibold text-pr-text-1",children:t.user.display_name||t.user.username}),t.user.is_verified&&Ns.jsx("span",{className:"text-blue-500",children:""}),Ns.jsx("span",{className:"text-pr-text-2",children:""}),Ns.jsx("span",{className:"text-sm text-pr-text-2",children:j(t.created_at)})]}),v(t.activity_type)]}),Ns.jsx("h3",{className:"font-medium text-pr-text-1 mb-1",children:t.title}),t.description&&Ns.jsx("p",{className:"text-pr-text-2 text-sm mb-3",children:t.description}),t.image_url&&Ns.jsx("img",{src:t.image_url,alt:"",className:"w-full h-48 object-cover rounded-lg mb-3"}),Ns.jsxs("div",{className:"flex items-center gap-4 text-sm text-pr-text-2",children:[Ns.jsxs("button",{className:"flex items-center gap-1 hover:text-red-600 transition-colors",children:[Ns.jsx(rr,{className:"h-4 w-4"}),Ns.jsx("span",{children:t.likes_count})]}),Ns.jsxs("button",{className:"flex items-center gap-1 hover:text-blue-600 transition-colors",children:[Ns.jsx(wr,{className:"h-4 w-4"}),Ns.jsx("span",{children:t.comments_count})]})]})]})]})},t.id))}),n&&Ns.jsx("div",{className:"py-8 flex justify-center",children:Ns.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),c&&!n&&Ns.jsx("div",{ref:f,className:"h-4"}),!c&&t.length>0&&Ns.jsx("p",{className:"text-center text-sm text-pr-text-2 py-8",children:"You've reached the end of the feed"})]})})})]})})}function $V(){const{username:e}=Ce(),t=ke(),{toast:r}=KW(),[s,a]=u.useState(null),[n,i]=u.useState(!0),[l,o]=u.useState(!1),[c,d]=u.useState(!1),[m,p]=u.useState([]),[h,x]=u.useState(!0),[f,g]=u.useState(null),b=u.useCallback(async()=>{if(e)try{const t=await fetch(`/api/users/${e}`,{credentials:"include"}),r=await t.json();"success"===r.status&&(a(r.data.user),o(r.data.is_following),d(r.data.is_own_profile))}catch(t){console.error("Error fetching profile:",t)}finally{i(!1)}},[e]),v=u.useCallback(async e=>{try{x(!0),g(null);const t=await fetch(`/api/users/${e}/activity`,{credentials:"include"}),r=await t.json();t.ok&&"success"===r.status?p(r.data.activities||[]):(p([]),g(r.error||"Unable to load activity timeline"))}catch(t){console.error("Error fetching user activity:",t),g("Network error while loading activity"),p([])}finally{x(!1)}},[]);u.useEffect(()=>{e&&b()},[b,e]),u.useEffect(()=>{s?.id&&v(s.id)},[v,s?.id]);const y=u.useMemo(()=>m.map(e=>({...e,timestamp:new Date(e.created_at)})).sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime()),[m]),j=e=>{switch(e){case"drop_completion":return Ns.jsx(fs,{className:"w-4 h-4 text-amber-500"});case"product_purchase":return Ns.jsx(Gr,{className:"w-4 h-4 text-blue-500"});case"referral":return Ns.jsx(us,{className:"w-4 h-4 text-purple-500"});case"achievement":return Ns.jsx(is,{className:"w-4 h-4 text-orange-500"});case"social_share":return Ns.jsx(Kr,{className:"w-4 h-4 text-pink-500"});case"engagement":return Ns.jsx(rr,{className:"w-4 h-4 text-rose-500"});default:return Ns.jsx(ct,{className:"w-4 h-4 text-gray-400"})}};return n?Ns.jsx("div",{className:"flex items-center justify-center min-h-screen-dynamic",children:Ns.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?Ns.jsxs("div",{className:"min-h-screen-dynamic bg-pr-surface-2",children:[Ns.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-48"}),Ns.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ns.jsx("div",{className:"relative -mt-32 mb-8",children:Ns.jsx(mV,{className:"p-6",children:Ns.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[Ns.jsx("img",{src:s.profile_image||"https://via.placeholder.com/120",alt:s.display_name,className:"w-32 h-32 rounded-full border-4 border-white shadow-lg"}),Ns.jsxs("div",{className:"flex-1",children:[Ns.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ns.jsxs("div",{children:[Ns.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ns.jsx("h1",{className:"text-2xl font-bold text-pr-text-1",children:s.display_name||s.username}),s.is_verified&&Ns.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[Ns.jsx(St,{className:"h-3 w-3 mr-1"}),"Verified"]}),s.referral_tier&&"bronze"!==s.referral_tier&&Ns.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium "+("platinum"===s.referral_tier?"bg-purple-100 text-purple-800":"gold"===s.referral_tier?"bg-yellow-100 text-yellow-800":"bg-pr-surface-2 text-pr-text-1"),children:s.referral_tier.toUpperCase()})]}),Ns.jsxs("p",{className:"text-pr-text-2",children:["@",s.username]})]}),Ns.jsx("div",{className:"flex gap-2",children:c?Ns.jsxs(Oc,{variant:"outline",onClick:()=>t("/settings/profile"),children:[Ns.jsx(Wr,{className:"mr-2 h-4 w-4"}),"Edit Profile"]}):Ns.jsx(Oc,{onClick:async()=>{if(s)try{const e=!l;o(e);const t=`/api/social/follow/${s.id}`,n=e?"POST":"DELETE";await fetch(t,{method:n,credentials:"include"}),r({title:e?"Following":"Unfollowed",description:`You ${e?"are now following":"unfollowed"} ${s.display_name}`,type:"success"}),a(t=>t?{...t,followers_count:t.followers_count+(e?1:-1)}:null)}catch(e){console.error("Error toggling follow:",e),o(!l)}},className:l?"bg-pr-surface-3 text-pr-text-1 hover:bg-pr-surface-3":"bg-blue-600 hover:bg-blue-700",children:l?"Following":"Follow"})})]}),s.bio&&Ns.jsx("p",{className:"text-pr-text-1 mb-4",children:s.bio}),Ns.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-pr-text-2 mb-4",children:[s.website_url&&Ns.jsxs("a",{href:s.website_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 hover:text-blue-600",children:[Ns.jsx(dr,{className:"h-4 w-4"}),s.website_url.replace(/^https?:\/\//,"")]}),Ns.jsxs("div",{className:"flex items-center gap-1",children:[Ns.jsx(yt,{className:"h-4 w-4"}),"Joined ",new Date(s.created_at).toLocaleDateString("en-US",{month:"long",year:"numeric"})]})]}),Ns.jsxs("div",{className:"flex gap-6",children:[Ns.jsxs("button",{onClick:()=>t(`/profile/${e}/followers`),className:"hover:underline",children:[Ns.jsx("span",{className:"font-semibold text-pr-text-1",children:s.followers_count}),Ns.jsx("span",{className:"text-pr-text-2 ml-1",children:"Followers"})]}),Ns.jsxs("button",{onClick:()=>t(`/profile/${e}/following`),className:"hover:underline",children:[Ns.jsx("span",{className:"font-semibold text-pr-text-1",children:s.following_count}),Ns.jsx("span",{className:"text-pr-text-2 ml-1",children:"Following"})]}),Ns.jsxs("div",{children:[Ns.jsx("span",{className:"font-semibold text-pr-text-1",children:s.connections_count}),Ns.jsx("span",{className:"text-pr-text-2 ml-1",children:"Connections"})]})]})]})]})})}),Ns.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[Ns.jsx(mV,{className:"p-6",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-medium text-pr-text-2",children:"Drops Completed"}),Ns.jsx("p",{className:"text-2xl font-bold text-pr-text-1 mt-2",children:s.drops_completed||0})]}),Ns.jsx("div",{className:"h-12 w-12 bg-yellow-100 rounded-full flex items-center justify-center",children:Ns.jsx(fs,{className:"h-6 w-6 text-yellow-600"})})]})}),Ns.jsx(mV,{className:"p-6",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-medium text-pr-text-2",children:"Products Sold"}),Ns.jsx("p",{className:"text-2xl font-bold text-pr-text-1 mt-2",children:s.products_sold||0})]}),Ns.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center",children:Ns.jsx(Hr,{className:"h-6 w-6 text-blue-600"})})]})}),Ns.jsx(mV,{className:"p-6",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-medium text-pr-text-2",children:"Referrals Made"}),Ns.jsx("p",{className:"text-2xl font-bold text-pr-text-1 mt-2",children:s.referrals_made||0})]}),Ns.jsx("div",{className:"h-12 w-12 bg-purple-100 rounded-full flex items-center justify-center",children:Ns.jsx(us,{className:"h-6 w-6 text-purple-600"})})]})}),Ns.jsx(mV,{className:"p-6",children:Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsxs("div",{children:[Ns.jsx("p",{className:"text-sm font-medium text-pr-text-2",children:"Total Earnings"}),Ns.jsxs("p",{className:"text-2xl font-bold text-pr-text-1 mt-2",children:["$",s.total_earnings||0]})]}),Ns.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-full flex items-center justify-center",children:Ns.jsx(as,{className:"h-6 w-6 text-green-600"})})]})})]}),Ns.jsxs(YW,{defaultValue:"activity",className:"space-y-6",children:[Ns.jsxs("div",{className:"relative",children:[Ns.jsxs(JW,{className:"w-full flex md:inline-flex gap-2 overflow-x-auto md:overflow-visible pb-2 md:pb-0 -mx-4 px-4 md:mx-0 md:px-0 hide-scrollbar",children:[Ns.jsx(ZW,{value:"activity",className:"min-w-[120px] justify-center whitespace-nowrap px-4 py-2 text-sm md:text-base",children:"Activity"}),Ns.jsx(ZW,{value:"drops",className:"min-w-[120px] justify-center whitespace-nowrap px-4 py-2 text-sm md:text-base",children:"Drops"}),Ns.jsx(ZW,{value:"products",className:"min-w-[120px] justify-center whitespace-nowrap px-4 py-2 text-sm md:text-base",children:"Products"}),Ns.jsx(ZW,{value:"reviews",className:"min-w-[120px] justify-center whitespace-nowrap px-4 py-2 text-sm md:text-base",children:"Reviews"})]}),Ns.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 w-6 bg-gradient-to-r from-white to-transparent md:hidden"}),Ns.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 w-6 bg-gradient-to-l from-white to-transparent md:hidden"})]}),Ns.jsx(QW,{value:"activity",children:Ns.jsx(mV,{className:"p-6",children:h?Ns.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((e,t)=>Ns.jsxs("div",{className:"flex gap-4",children:[Ns.jsx("div",{className:"w-10 h-10 rounded-full bg-pr-surface-3 animate-pulse"}),Ns.jsxs("div",{className:"flex-1 space-y-2",children:[Ns.jsx("div",{className:"h-4 w-1/3 bg-pr-surface-3 rounded animate-pulse"}),Ns.jsx("div",{className:"h-4 w-3/4 bg-pr-surface-3 rounded animate-pulse"}),Ns.jsx("div",{className:"h-3 w-1/2 bg-pr-surface-3 rounded animate-pulse"})]})]},`activity-skeleton-${t}`))}):f?Ns.jsxs("div",{className:"text-center py-8",children:[Ns.jsx("p",{className:"text-sm text-red-500 mb-2",children:f}),Ns.jsx(Oc,{variant:"outline",size:"sm",onClick:()=>s&&v(s.id),children:"Retry"})]}):0===y.length?Ns.jsxs("div",{className:"text-center py-10",children:[Ns.jsx(ct,{className:"mx-auto h-10 w-10 text-gray-300 mb-3"}),Ns.jsx("h3",{className:"text-lg font-semibold text-pr-text-1",children:"No activity yet"}),Ns.jsxs("p",{className:"text-sm text-pr-text-2 mt-1",children:["When ",s.display_name||s.username," completes drops, referrals, or purchases, they will appear here."]})]}):Ns.jsx("div",{className:"space-y-6",children:y.map(e=>{return Ns.jsxs("div",{className:"flex gap-4",children:[Ns.jsx("div",{className:"flex-shrink-0 mt-1",children:Ns.jsx("div",{className:"w-10 h-10 rounded-full bg-pr-surface-2 flex items-center justify-center border border-pr-surface-3",children:j(e.activity_type)})}),Ns.jsxs("div",{className:"flex-1 space-y-1",children:[Ns.jsxs("div",{className:"flex items-center justify-between",children:[Ns.jsx("h4",{className:"font-semibold text-pr-text-1",children:e.title}),Ns.jsx("span",{className:"text-xs text-pr-text-2",children:(t=e.timestamp,t.toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}))})]}),e.description&&Ns.jsx("p",{className:"text-sm text-pr-text-2",children:e.description}),e.metadata&&Object.keys(e.metadata).length>0&&Ns.jsx("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs text-pr-text-2",children:Object.entries(e.metadata).slice(0,4).map(([e,t])=>Ns.jsxs("div",{className:"flex items-center gap-2",children:[Ns.jsxs("span",{className:"font-medium text-pr-text-2 capitalize",children:[e.replace(/_/g," "),":"]}),Ns.jsx("span",{className:"truncate",children:"object"==typeof t?JSON.stringify(t):String(t)})]},e))})]})]},e.id);var t})})})}),Ns.jsx(QW,{value:"drops",children:Ns.jsx(mV,{className:"p-6",children:Ns.jsx("p",{className:"text-pr-text-2 text-center",children:"Completed drops coming soon"})})}),Ns.jsx(QW,{value:"products",children:Ns.jsx(mV,{className:"p-6",children:Ns.jsx("p",{className:"text-pr-text-2 text-center",children:"Products coming soon"})})}),Ns.jsx(QW,{value:"reviews",children:Ns.jsx(mV,{className:"p-6",children:Ns.jsx("p",{className:"text-pr-text-2 text-center",children:"Reviews coming soon"})})})]})]})]}):Ns.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1",children:"User not found"}),Ns.jsx(Oc,{onClick:()=>t(-1),className:"mt-4",children:"Go Back"})]})})}const LV=(...e)=>{console.log("[API]",...e)};class FV extends Error{constructor(e,r,s,a){super(e),t(this,"code"),t(this,"status"),t(this,"details"),this.name="ApiError",this.code=r,this.status=s,this.details=a}}const zV=async e=>{let t;LV(`Handling response from ${e.url} [${e.status}]`);try{t=await e.json(),LV("Response data:",t)}catch(r){LV("Failed to parse JSON response:",r),t=void 0}if(!e.ok){const r=("object"==typeof t&&null!==t?t:{}).error??{},s={code:r.code??"UNKNOWN_ERROR",message:r.message??`HTTP Error ${e.status}: ${e.statusText}`,details:r.details??{status:e.status,statusText:e.statusText}};throw console.error(`API Error [${e.status}]:`,{url:e.url,status:e.status,error:s,responseHeaders:Object.fromEntries(e.headers.entries())}),new FV(s.message,s.code,e.status,s.details)}return{data:t,status:e.status}},UV=(...e)=>{const t=new Headers;return e.forEach(e=>{if(!e)return;new Headers(e).forEach((e,r)=>{t.set(r,e)})}),t},BV=async(e,t={})=>{const r=`${Os}${e}`;LV(`GET ${r}`,{options:t});try{const s=UV({"Content-Type":"application/json"},na(),t.headers);LV("Request headers:",Object.fromEntries(s.entries()));const a=await fetch(r,{...t,method:"GET",headers:s,credentials:t.credentials??"include"});return LV(`Response received for GET ${e}:`,{status:a.status,statusText:a.statusText,headers:Object.fromEntries(a.headers.entries())}),zV(a)}catch(s){if(LV(`Error in GET ${e}:`,s),s instanceof FV)throw s;throw new FV("Network error occurred","NETWORK_ERROR",0,{url:e,method:"GET",originalError:s instanceof Error?s.message:String(s)})}},qV=(...e)=>{console.log("[ContentService]",...e)},WV="/api/content",KV=async e=>{qV(`Fetching content with ID: ${e}`);try{const t=await BV(`${WV}/${e}`);qV("Content fetched successfully:",t.data);const r=t.data?.content;if(!r)throw new Error("No content data received from API");return r}catch(t){qV("Error fetching content:",t);const e=t instanceof Error?t.message:String(t);throw new Error(`Failed to fetch content: ${e}`)}},VV=()=>{const{id:e}=Ce();ke();const[t,r]=u.useState(null),[s,a]=u.useState(!0),[n,i]=u.useState(null),[l,o]=u.useState("");return u.useEffect(()=>{console.log("Environment:",{NODE_ENV:"production",VITE_API_URL:"https://api.promorang.co",location:window.location.href,pathname:window.location.pathname,search:window.location.search}),o("https://api.promorang.co");(async()=>{if(!e)return i("No content ID provided"),void a(!1);console.log("Starting to fetch content for ID:",e);try{const t=`https://api.promorang.co/api/content/${e}`;console.log("Testing direct fetch to:",t),console.log("Trying contentService.getContent...");const s=await KV(e);console.log("Content data received via service:",s),r(s)}catch(t){console.error("Error with content service:",t);try{console.log("Falling back to direct fetch...");const t=await fetch(`https://api.promorang.co/api/content/${e}`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();console.log("Direct fetch successful:",s),r(s)}catch(s){console.error("Direct fetch failed:",s),i(s.message||"Failed to load content")}}finally{a(!1)}})()},[e]),s?Ns.jsxs("div",{className:"container mx-auto p-4",children:[Ns.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Loading Content..."}),Ns.jsxs("div",{className:"space-y-4",children:[Ns.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[Ns.jsx("h2",{className:"font-semibold mb-2",children:"Debug Information:"}),Ns.jsxs("pre",{className:"text-sm bg-pr-surface-card p-2 rounded border",children:["Content ID: ",e||"N/A","API Base: ",l||"Not set","Check the browser console for detailed logs."]})]}),Ns.jsx(Oc,{onClick:()=>window.location.reload(),variant:"outline",className:"mt-4",children:"Refresh Page"})]})]}):n?Ns.jsxs("div",{className:"container mx-auto p-4",children:[Ns.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[Ns.jsx("strong",{className:"font-bold",children:"Error: "}),Ns.jsx("span",{className:"block sm:inline",children:n})]}),Ns.jsx("div",{className:"mt-4",children:Ns.jsx(Oc,{onClick:()=>window.location.reload(),variant:"outline",children:"Reload Page"})})]}):Ns.jsxs("div",{className:"container mx-auto p-4",children:[Ns.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Content Details"}),Ns.jsx("pre",{className:"bg-pr-surface-2 p-4 rounded overflow-auto",children:JSON.stringify(t,null,2)})]})};function HV({title:e,message:t}){const r=ke(),s=Ne().state,a=e||s?.title||"Page Not Found",n=t||s?.message||"The page you are looking for might have been removed or is temporarily unavailable.";return Ns.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen-dynamic bg-pr-surface-card text-pr-text-1 px-4 py-12",children:Ns.jsxs("div",{className:"max-w-md w-full text-center",children:[Ns.jsx("h1",{className:"text-5xl font-bold text-red-500 mb-4",children:a}),Ns.jsx("p",{className:"text-lg text-pr-text-2 mb-8",children:n}),Ns.jsx("button",{onClick:()=>r("/"),className:"px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors duration-200",children:"Back to Home"})]})})}function GV(){const e=ke();return u.useEffect(()=>{(async()=>{const{data:t,error:r}=await xV.auth.getSession();if(r)return console.error("OAuth callback error:",r),void e("/auth",{replace:!0});t?.session?(console.log(" Session loaded:",t.session),e("/dashboard",{replace:!0})):e("/auth",{replace:!0})})()},[e]),Ns.jsx("div",{className:"flex h-screen-dynamic items-center justify-center",children:Ns.jsx("p",{className:"text-sm text-pr-text-2",children:"Finishing sign-in"})})}function YV({email:e,onEmailChange:t,onBack:r}){const[s,a]=u.useState(!1),{toast:n}=KW();return Ns.jsxs("div",{className:"w-full space-y-6",children:[Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1",children:"Reset your password"}),Ns.jsx("p",{className:"mt-2 text-sm text-pr-text-2",children:"Enter your email address and we'll send you a link to reset your password."})]}),Ns.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),e){a(!0);try{const{error:t}=await xV.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/auth/reset-password?type=recovery`});if(t)throw t;n({title:"Check your email",description:"We've sent you a link to reset your password.",type:"success"})}catch(r){console.error("Password reset error:",r),n({title:"Error",description:r.message||"Failed to send password reset email",type:"destructive"})}finally{a(!1)}}},className:"space-y-6",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-pr-text-1",children:"Email address"}),Ns.jsx("div",{className:"mt-1",children:Ns.jsx(HK,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:e=>t(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-pr-surface-3 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"you@example.com"})})]}),Ns.jsx("div",{children:Ns.jsx(Oc,{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:s,children:s?"Sending reset link...":"Send reset link"})})]}),Ns.jsxs("div",{className:"mt-6",children:[Ns.jsxs("div",{className:"relative",children:[Ns.jsx("div",{className:"absolute inset-0 flex items-center",children:Ns.jsx("div",{className:"w-full border-t border-pr-surface-3"})}),Ns.jsx("div",{className:"relative flex justify-center text-sm",children:Ns.jsx("span",{className:"px-2 bg-pr-surface-card text-pr-text-2",children:"Remembered your password?"})})]}),Ns.jsx("div",{className:"mt-6",children:Ns.jsx(Oc,{type:"button",variant:"outline",className:"w-full flex justify-center py-2 px-4 border border-pr-surface-3 rounded-md shadow-sm text-sm font-medium text-pr-text-1 bg-pr-surface-card hover:bg-pr-surface-2 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:r,children:"Back to sign in"})})]})]})}function JV({onSuccess:e}){const[t,r]=u.useState(""),[s,a]=u.useState(""),[n,i]=u.useState(""),[l,o]=u.useState(!1),[c,d]=u.useState(!0);rt();const{toast:m}=KW(),p=ke();u.useEffect(()=>{(async()=>{const{data:{session:e}}=await xV.auth.getSession();e||(d(!1),m({title:"Invalid or expired link",description:"The password reset link is invalid or has expired. Please request a new one.",type:"destructive"}))})()},[m]);return c?Ns.jsxs("div",{className:"w-full space-y-6",children:[Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1",children:"Choose a new password"}),Ns.jsx("p",{className:"mt-2 text-sm text-pr-text-2",children:"Create a new password that's secure and easy to remember."})]}),n&&Ns.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded",children:Ns.jsxs("div",{className:"flex",children:[Ns.jsx("div",{className:"flex-shrink-0",children:Ns.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Ns.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),Ns.jsx("div",{className:"ml-3",children:Ns.jsx("p",{className:"text-sm text-red-700",children:n})})]})}),Ns.jsxs("form",{onSubmit:async r=>{if(r.preventDefault(),t===s)if(t.length<8)i("Password must be at least 8 characters long");else{o(!0),i("");try{const{error:r}=await xV.auth.updateUser({password:t});if(r)throw r;window.history.replaceState({},document.title,window.location.pathname),m({title:"Password updated",description:"Your password has been updated successfully. You can now sign in with your new password.",type:"success"}),e?e():p("/auth")}catch(a){console.error("Password update error:",a),i(a.message||"Failed to update password. The link may have expired.")}finally{o(!1)}}else i("Passwords do not match")},className:"space-y-6",children:[Ns.jsxs("div",{children:[Ns.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-pr-text-1",children:"New Password"}),Ns.jsx("div",{className:"mt-1",children:Ns.jsx(HK,{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,minLength:8,value:t,onChange:e=>r(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-pr-surface-3 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:""})}),Ns.jsx("p",{className:"mt-1 text-xs text-pr-text-2",children:"Must be at least 8 characters long"})]}),Ns.jsxs("div",{children:[Ns.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-pr-text-1",children:"Confirm New Password"}),Ns.jsx("div",{className:"mt-1",children:Ns.jsx(HK,{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,minLength:8,value:s,onChange:e=>a(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-pr-surface-3 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:""})})]}),Ns.jsx("div",{children:Ns.jsx(Oc,{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:l,children:l?"Updating password...":"Update Password"})})]})]}):Ns.jsxs("div",{className:"text-center",children:[Ns.jsx("h2",{className:"text-2xl font-bold text-pr-text-1",children:"Invalid or Expired Link"}),Ns.jsx("p",{className:"mt-2 text-sm text-pr-text-2",children:"The password reset link is invalid or has expired. Please request a new one."}),Ns.jsx("div",{className:"mt-6",children:Ns.jsx(Oc,{type:"button",onClick:()=>p("/auth/reset-password"),className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Request New Reset Link"})})]})}function ZV({children:e,title:t,subtitle:r}){return Ns.jsxs("div",{className:"min-h-screen-dynamic bg-pr-surface-2 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[Ns.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[Ns.jsx(Ze,{to:"/",className:"flex justify-center",children:Ns.jsx("img",{className:"h-12 w-auto",src:"/logo.svg",alt:"Your Company"})}),Ns.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-pr-text-1",children:t}),r&&Ns.jsx("p",{className:"mt-2 text-center text-sm text-pr-text-2",children:r})]}),Ns.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:Ns.jsx("div",{className:"bg-pr-surface-card py-8 px-4 shadow sm:rounded-lg sm:px-10",children:e})})]})}function QV(){const[e]=rt(),t=ke(),[r,s]=u.useState(""),a=e.get("access_token"),n=e.get("type");return a&&"recovery"===n?Ns.jsx(ZV,{title:"Reset Your Password",children:Ns.jsx(JV,{})}):Ns.jsx(ZV,{title:"Forgot Password",children:Ns.jsx(YV,{email:r,onEmailChange:s,onBack:()=>t("/auth")})})}const XV=3e5;function eH(){return function(){const e=Ls(),t=ke(),{toast:r}=KW(),[s,a]=u.useState(!1),n=u.useRef(null),i=u.useRef(null),l=u.useRef(s);u.useEffect(()=>{l.current=s},[s]);const o=u.useCallback(()=>{n.current&&clearTimeout(n.current),i.current&&clearTimeout(i.current),a(!1),i.current=setTimeout(()=>{a(!0),r({title:"Session Expiring Soon",description:"You will be logged out due to inactivity in 5 minutes.",type:"warning",duration:1e4}),n.current=setTimeout(async()=>{try{await e.signOut(),t("/auth",{state:{sessionExpired:!0}}),r({title:"Session Expired",description:"You have been logged out due to inactivity.",type:"info"})}catch(s){console.error("Error during sign out:",s),r({title:"Error",description:"Failed to sign out. Please try again.",type:"destructive"})}},XV)},15e5)},[e,t,r]);u.useEffect(()=>{const e=["mousedown","mousemove","keypress","scroll","touchstart"],t=()=>{l.current&&r({title:"Session Extended",description:"Your session has been extended due to activity.",type:"success"}),o()};return e.forEach(e=>{window.addEventListener(e,t,{passive:!0})}),o(),()=>{e.forEach(e=>{window.removeEventListener(e,t)}),n.current&&clearTimeout(n.current),i.current&&clearTimeout(i.current)}},[o,r])}(),u.useEffect(()=>{},[]),null}function tH({children:e}){const{user:t,isLoading:r}=Ls(),s=Ne();return console.log("ProtectedRoute check:",{user:!!t,isLoading:r,path:s.pathname}),r?Ns.jsx("div",{className:"min-h-screen-dynamic flex items-center justify-center",children:Ns.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):t?Ns.jsx(Ns.Fragment,{children:e}):(console.log("No user, redirecting to /auth from:",s.pathname),Ns.jsx(Le,{to:"/auth",state:{from:s},replace:!0}))}console.log(" App.tsx: Starting to load...");const rH=({children:e})=>Ns.jsx(tH,{children:Ns.jsx(pa,{children:e})});function sH(){const{user:e}=Ls(),t=Ne(),r=new URLSearchParams(t.search),s=Object.fromEntries(r.entries()),a=(()=>{if(!e)return;return[e?.slug,e?.profile_slug,e?.username,e?.user_metadata?.username,e?.profile?.username,e?.email?e.email.split("@")[0]:void 0,e?.id?String(e.id):void 0].find(e=>"string"==typeof e&&e.trim().length>0)})();if(!a)return console.warn("[Redirect] Missing profile slug",{userId:e?.id}),Ns.jsx(Le,{to:"/error",state:{message:"Profile unavailable"},replace:!0});console.log("[Redirect]",{userSlug:a,from:t.pathname});const n=Zs(a,Object.keys(s).length?s:void 0);return Ns.jsx(Le,{to:n,replace:!0})}function aH({children:e,redirectAuthenticated:t=!0,redirectTo:r="/dashboard"}){const{user:s}=Ls(),a=Ne();if(t&&s){const e=a.state?.from?.pathname||r;return Ns.jsx(Le,{to:e,replace:!0})}return Ns.jsx(Ns.Fragment,{children:e})}const nH=()=>Ns.jsx("div",{className:"min-h-screen-dynamic flex items-center justify-center",children:Ns.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-2 border-orange-500 border-t-transparent"})}),iH=()=>Ns.jsxs(Be,{children:[Ns.jsx(ze,{path:"/auth",element:Ns.jsx(aH,{children:Ns.jsx(Rc,{})})}),Ns.jsx(ze,{path:"/auth/callback",element:Ns.jsx(GV,{})}),Ns.jsx(ze,{path:"/auth/v1/callback",element:Ns.jsx(GV,{})}),Ns.jsx(ze,{path:"/oauth/callback",element:Ns.jsx(GV,{})}),Ns.jsx(ze,{path:"/auth/reset-password",element:Ns.jsx(aH,{children:Ns.jsx(QV,{})})}),Ns.jsx(ze,{path:"/auth/update-password",element:Ns.jsx(aH,{children:Ns.jsx(QV,{})})}),Ns.jsx(ze,{path:"/signup",element:Ns.jsx(Le,{to:"/auth",replace:!0})}),Ns.jsx(ze,{path:"/",element:Ns.jsx(aH,{redirectAuthenticated:!1,children:Ns.jsx(Ic,{})})}),Ns.jsx(ze,{path:"/dashboard",element:Ns.jsx(rH,{children:Ns.jsx(nm,{})})}),Ns.jsx(ze,{path:"/leaderboard",element:Ns.jsx(rH,{children:Ns.jsx(Es,{})})}),Ns.jsx(ze,{path:"/earn",element:Ns.jsx(rH,{children:Ns.jsx(om,{})})}),Ns.jsx(ze,{path:"/create",element:Ns.jsx(rH,{children:Ns.jsx(xm,{})})}),Ns.jsx(ze,{path:"/invest",element:Ns.jsx(rH,{children:Ns.jsx(gm,{})})}),Ns.jsx(ze,{path:"/wallet",element:Ns.jsx(rH,{children:Ns.jsx(Lq,{})})}),Ns.jsx(ze,{path:"/rewards",element:Ns.jsx(rH,{children:Ns.jsx(uV,{})})}),Ns.jsx(ze,{path:"/growth-hub",element:Ns.jsx(rH,{children:Ns.jsx(Kq,{})})}),Ns.jsx(ze,{path:"/settings",element:Ns.jsx(rH,{children:Ns.jsx(_V,{})})}),Ns.jsx(ze,{path:"/profile",element:Ns.jsx(rH,{children:Ns.jsx(sH,{})})}),Ns.jsx(ze,{path:"/profile/:username",element:Ns.jsx(rH,{children:Ns.jsx(tW,{})})}),Ns.jsx(ze,{path:"/users/:username",element:Ns.jsx(rH,{children:Ns.jsx(eW,{isPublicProfile:!0})})}),Ns.jsx(ze,{path:"/users/id/:id",element:Ns.jsx(rH,{children:Ns.jsx(eW,{isPublicProfile:!0,useUserId:!0})})}),Ns.jsx(ze,{path:"/holding/:holdingId",element:Ns.jsx(rH,{children:Ns.jsx(mW,{})})}),Ns.jsx(ze,{path:"/portfolio/holdings/:holdingId",element:Ns.jsx(rH,{children:Ns.jsx(mW,{})})}),Ns.jsx(ze,{path:"/prediction/:predictionId",element:Ns.jsx(rH,{children:Ns.jsx(pW,{})})}),Ns.jsx(ze,{path:"/task/:taskId",element:Ns.jsx(rH,{children:Ns.jsx(xW,{})})}),Ns.jsx(ze,{path:"/advertiser/onboarding",element:Ns.jsx(rH,{children:Ns.jsx(LW,{})})}),Ns.jsxs(ze,{path:"/advertiser",element:Ns.jsx(tH,{children:Ns.jsx(FW,{})}),children:[Ns.jsx(ze,{index:!0,element:Ns.jsx($W,{})}),Ns.jsx(ze,{path:"campaigns",element:Ns.jsx(SW,{basePath:"/advertiser/campaigns"})}),Ns.jsx(ze,{path:"campaigns/:campaignId",element:Ns.jsx(nV,{})}),Ns.jsx(ze,{path:"campaigns/:campaignId/edit",element:Ns.jsx(dV,{})}),Ns.jsx(ze,{path:"coupons",element:Ns.jsx(zW,{})}),Ns.jsx(ze,{path:"coupons/bulk",element:Ns.jsx(VW,{})}),Ns.jsx(ze,{path:"coupons/analytics",element:Ns.jsx(HW,{})}),Ns.jsx(ze,{path:"coupons/:id",element:Ns.jsx(UW,{})})]}),Ns.jsx(ze,{path:"/campaigns",element:Ns.jsx(rH,{children:Ns.jsx(SW,{})})}),Ns.jsx(ze,{path:"/campaigns/new",element:Ns.jsx(rH,{children:Ns.jsx(cV,{})})}),Ns.jsx(ze,{path:"/campaigns/:campaignId",element:Ns.jsx(rH,{children:Ns.jsx(nV,{})})}),Ns.jsx(ze,{path:"/campaigns/:campaignId/edit",element:Ns.jsx(rH,{children:Ns.jsx(dV,{})})}),Ns.jsx(ze,{path:"/content/:id",element:Ns.jsx(tH,{children:Ns.jsx(uW,{})})}),Ns.jsx(ze,{path:"/test-content/:id",element:Ns.jsx(VV,{})}),Ns.jsx(ze,{path:"/referrals",element:Ns.jsx(rH,{children:Ns.jsx(pV,{})})}),Ns.jsx(ze,{path:"/marketplace",element:Ns.jsx(rH,{children:Ns.jsx(kV,{})})}),Ns.jsx(ze,{path:"/marketplace/product/:productId",element:Ns.jsx(rH,{children:Ns.jsx(SV,{})})}),Ns.jsx(ze,{path:"/marketplace/store/:storeSlug",element:Ns.jsx(rH,{children:Ns.jsx(TV,{})})}),Ns.jsx(ze,{path:"/cart",element:Ns.jsx(rH,{children:Ns.jsx(CV,{})})}),Ns.jsx(ze,{path:"/checkout",element:Ns.jsx(rH,{children:Ns.jsx(OV,{})})}),Ns.jsx(ze,{path:"/orders",element:Ns.jsx(rH,{children:Ns.jsx(PV,{})})}),Ns.jsx(ze,{path:"/merchant/dashboard",element:Ns.jsx(rH,{children:Ns.jsx(AV,{})})}),Ns.jsx(ze,{path:"/merchant/products/new",element:Ns.jsx(rH,{children:Ns.jsx(IV,{})})}),Ns.jsx(ze,{path:"/merchant/products/:productId/edit",element:Ns.jsx(rH,{children:Ns.jsx(IV,{})})}),Ns.jsx(ze,{path:"/operator",element:Ns.jsx(rH,{children:Ns.jsx(MV,{})})}),Ns.jsx(ze,{path:"/club/:hubSlug",element:Ns.jsx(rH,{children:Ns.jsx(DV,{})})}),Ns.jsx(ze,{path:"/feed",element:Ns.jsx(rH,{children:Ns.jsx(RV,{})})}),Ns.jsx(ze,{path:"/profile/:username",element:Ns.jsx(rH,{children:Ns.jsx($V,{})})}),Ns.jsx(ze,{path:"/home",element:Ns.jsx(Le,{to:"/dashboard",replace:!0})}),Ns.jsx(ze,{path:"/not-found",element:Ns.jsx(HV,{})}),Ns.jsx(ze,{path:"/error",element:Ns.jsx(_s,{})}),Ns.jsx(ze,{path:"*",element:Ns.jsx(HV,{})})]});function lH(){return u.useEffect(()=>{const e=e=>{console.error("Global error caught:",e.error)},t=e=>{console.error("Unhandled promise rejection:",e.reason)};return window.addEventListener("error",e),window.addEventListener("unhandledrejection",t),()=>{window.removeEventListener("error",e),window.removeEventListener("unhandledrejection",t)}},[]),Ns.jsx(pc,{children:Ns.jsx(Ge,{children:Ns.jsx($s,{children:Ns.jsxs(qW,{children:[Ns.jsx(eH,{}),Ns.jsx(hc,{}),Ns.jsx(u.Suspense,{fallback:Ns.jsx(nH,{}),children:Ns.jsx(iH,{})})]})})})})}class oH extends u.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){if(this.state.hasError){const e=this.state.error instanceof Error?this.state.error.message:"An unknown error occurred";return this.props.fallback??Ns.jsxs("div",{className:"p-6 text-red-600",children:[Ns.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Something went wrong"}),Ns.jsx("p",{className:"text-sm",children:e})]})}return this.props.children}}console.log(" main.tsx: Starting application..."),E.createRoot(document.getElementById("root")).render(Ns.jsx(u.StrictMode,{children:Ns.jsx(yc,{children:Ns.jsx(oH,{children:Ns.jsx(u.Suspense,{fallback:Ns.jsx("div",{className:"flex items-center justify-center min-h-screen-dynamic",children:Ns.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}),children:Ns.jsx(lH,{})})})})}));
