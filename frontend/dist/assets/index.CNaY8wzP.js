var e=Object.defineProperty,t=(t,r,n)=>((t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n)(t,"symbol"!=typeof r?r+"":r,n);function r(e,t){for(var r=0;r<t.length;r++){const n=t[r];if("string"!=typeof n&&!Array.isArray(n))for(const t in n)if("default"!==t&&!(t in e)){const r=Object.getOwnPropertyDescriptor(n,t);r&&Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:()=>n[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var s,i,o={exports:{}},l={};function c(){if(s)return l;s=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,f={};function g(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||p}function y(){}function b(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var v=b.prototype=new y;v.constructor=b,x(v,g.prototype),v.isPureReactComponent=!0;var j=Array.isArray,w=Object.prototype.hasOwnProperty,N={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function k(t,r,n){var a,s={},i=null,o=null;if(null!=r)for(a in void 0!==r.ref&&(o=r.ref),void 0!==r.key&&(i=""+r.key),r)w.call(r,a)&&!_.hasOwnProperty(a)&&(s[a]=r[a]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(a in l=t.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:e,type:t,key:i,ref:o,props:s,_owner:N.current}}function S(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var C=/\/+/g;function O(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(r,n,a,s,i){var o=typeof r;"undefined"!==o&&"boolean"!==o||(r=null);var l=!1;if(null===r)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(r.$$typeof){case e:case t:l=!0}}if(l)return i=i(l=r),r=""===s?"."+O(l,0):s,j(i)?(a="",null!=r&&(a=r.replace(C,"$&/")+"/"),E(i,n,a,"",function(e){return e})):null!=i&&(S(i)&&(i=function(t,r){return{$$typeof:e,type:t.type,key:r,ref:t.ref,props:t.props,_owner:t._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+r)),n.push(i)),1;if(l=0,s=""===s?".":s+":",j(r))for(var c=0;c<r.length;c++){var d=s+O(o=r[c],c);l+=E(o,n,a,d,i)}else if(d=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=m&&e[m]||e["@@iterator"])?e:null}(r),"function"==typeof d)for(r=d.call(r),c=0;!(o=r.next()).done;)l+=E(o=o.value,n,a,d=s+O(o,c++),i);else if("object"===o)throw n=String(r),Error("Objects are not valid as a React child (found: "+("[object Object]"===n?"object with keys {"+Object.keys(r).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,r){if(null==e)return e;var n=[],a=0;return E(e,n,"","",function(e){return t.call(r,e,a++)}),n}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},M={transition:null},D={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:M,ReactCurrentOwner:N};function I(){throw Error("act(...) is not supported in production builds of React.")}return l.Children={map:P,forEach:function(e,t,r){P(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},l.Component=g,l.Fragment=r,l.Profiler=a,l.PureComponent=b,l.StrictMode=n,l.Suspense=d,l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,l.act=I,l.cloneElement=function(t,r,n){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var a=x({},t.props),s=t.key,i=t.ref,o=t._owner;if(null!=r){if(void 0!==r.ref&&(i=r.ref,o=N.current),void 0!==r.key&&(s=""+r.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in r)w.call(r,c)&&!_.hasOwnProperty(c)&&(a[c]=void 0===r[c]&&void 0!==l?l[c]:r[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:e,type:t.type,key:s,ref:i,props:a,_owner:o}},l.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},l.createElement=k,l.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},l.createRef=function(){return{current:null}},l.forwardRef=function(e){return{$$typeof:c,render:e}},l.isValidElement=S,l.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:T}},l.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},l.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},l.unstable_act=I,l.useCallback=function(e,t){return A.current.useCallback(e,t)},l.useContext=function(e){return A.current.useContext(e)},l.useDebugValue=function(){},l.useDeferredValue=function(e){return A.current.useDeferredValue(e)},l.useEffect=function(e,t){return A.current.useEffect(e,t)},l.useId=function(){return A.current.useId()},l.useImperativeHandle=function(e,t,r){return A.current.useImperativeHandle(e,t,r)},l.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},l.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},l.useMemo=function(e,t){return A.current.useMemo(e,t)},l.useReducer=function(e,t,r){return A.current.useReducer(e,t,r)},l.useRef=function(e){return A.current.useRef(e)},l.useState=function(e){return A.current.useState(e)},l.useSyncExternalStore=function(e,t,r){return A.current.useSyncExternalStore(e,t,r)},l.useTransition=function(){return A.current.useTransition()},l.version="18.3.1",l}function d(){return i||(i=1,o.exports=c()),o.exports}var u=d();const h=n(u),m=r({__proto__:null,default:h},[u]);"undefined"!=typeof window&&(window.React=h);var p,x,f,g,y,b={},v={exports:{}},j={},w={exports:{}},N={};function _(){return x||(x=1,w.exports=(p||(p=1,function(e){function t(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,s=e[n];if(!(0<a(s,t)))break e;e[n]=t,e[r]=s,r=n}}function r(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,s=e.length,i=s>>>1;n<i;){var o=2*(n+1)-1,l=e[o],c=o+1,d=e[c];if(0>a(l,r))c<s&&0>a(d,l)?(e[n]=d,e[c]=r,n=c):(e[n]=l,e[o]=r,n=o);else{if(!(c<s&&0>a(d,r)))break e;e[n]=d,e[c]=r,n=c}}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],c=[],d=1,u=null,h=3,m=!1,p=!1,x=!1,f="function"==typeof setTimeout?setTimeout:null,g="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var a=r(c);null!==a;){if(null===a.callback)n(c);else{if(!(a.startTime<=e))break;n(c),a.sortIndex=a.expirationTime,t(l,a)}a=r(c)}}function v(e){if(x=!1,b(e),!p)if(null!==r(l))p=!0,A(j);else{var t=r(c);null!==t&&M(v,t.startTime-e)}}function j(t,a){p=!1,x&&(x=!1,g(k),k=-1),m=!0;var s=h;try{for(b(a),u=r(l);null!==u&&(!(u.expirationTime>a)||t&&!O());){var i=u.callback;if("function"==typeof i){u.callback=null,h=u.priorityLevel;var o=i(u.expirationTime<=a);a=e.unstable_now(),"function"==typeof o?u.callback=o:u===r(l)&&n(l),b(a)}else n(l);u=r(l)}if(null!==u)var d=!0;else{var f=r(c);null!==f&&M(v,f.startTime-a),d=!1}return d}finally{u=null,h=s,m=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,N=!1,_=null,k=-1,S=5,C=-1;function O(){return!(e.unstable_now()-C<S)}function E(){if(null!==_){var t=e.unstable_now();C=t;var r=!0;try{r=_(!0,t)}finally{r?w():(N=!1,_=null)}}else N=!1}if("function"==typeof y)w=function(){y(E)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,T=P.port2;P.port1.onmessage=E,w=function(){T.postMessage(null)}}else w=function(){f(E,0)};function A(e){_=e,N||(N=!0,w())}function M(t,r){k=f(function(){t(e.unstable_now())},r)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||m||(p=!0,A(j))},e.unstable_forceFrameRate=function(e){0>e||125<e||(S=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var r=h;h=t;try{return e()}finally{h=r}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=h;h=e;try{return t()}finally{h=r}},e.unstable_scheduleCallback=function(n,a,s){var i=e.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?i+s:i,n){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return n={id:d++,callback:a,priorityLevel:n,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(n.sortIndex=s,t(c,n),null===r(l)&&n===r(c)&&(x?(g(k),k=-1):x=!0,M(v,s-i))):(n.sortIndex=o,t(l,n),p||m||(p=!0,A(j))),n},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(e){var t=h;return function(){var r=h;h=t;try{return e.apply(this,arguments)}finally{h=r}}}}(N)),N)),w.exports}function k(){if(f)return j;f=1;var e=d(),t=_();function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,a={};function s(e,t){i(e,t),i(e+"Capture",t)}function i(e,t){for(a[e]=t,e=0;e<t.length;e++)n.add(t[e])}var o=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},h={};function m(e,t,r,n,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var p={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){p[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];p[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){p[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){p[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){p[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){p[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){p[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){p[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){p[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function y(e,t,r,n){var a=p.hasOwnProperty(t)?p[t]:null;(null!==a?0!==a.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,a,n)&&(r=null),n||null===a?function(e){return!!l.call(h,e)||!l.call(u,e)&&(c.test(e)?h[e]=!0:(u[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=null===r?3!==a.type&&"":r:(t=a.attributeName,n=a.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(a=a.type)||4===a&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x,g);p[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x,g);p[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x,g);p[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){p[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),p.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){p[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,v=Symbol.for("react.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),O=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),I=Symbol.iterator;function R(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=I&&e[I]||e["@@iterator"])?e:null}var $,L=Object.assign;function F(e){if(void 0===$)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);$=t&&t[1]||""}return"\n"+$+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"==typeof c.stack){for(var a=c.stack.split("\n"),s=n.stack.split("\n"),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==s[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case N:return"Fragment";case w:return"Portal";case S:return"Profiler";case k:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case O:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return q(e(t))}catch(r){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=V(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Y(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var r=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Z(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=K(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function X(e,t){Q(e,t);var r=K(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?te(e,t.type,r):t.hasOwnProperty("defaultValue")&&te(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ee(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function te(e,t,r){"number"===t&&Y(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var re=Array.isArray;function ne(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+K(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(r(92));if(re(n)){if(1<n.length)throw Error(r(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ie(e,t){var r=K(t.value),n=K(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var de,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((de=de||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=de.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function me(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xe=["Webkit","ms","Moz","O"];function fe(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),a=fe(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}Object.keys(pe).forEach(function(e){xe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(r(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var je=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,_e=null,ke=null;function Se(e){if(e=va(e)){if("function"!=typeof Ne)throw Error(r(280));var t=e.stateNode;t&&(t=wa(t),Ne(e.stateNode,e.type,t))}}function Ce(e){_e?ke?ke.push(e):ke=[e]:_e=e}function Oe(){if(_e){var e=_e,t=ke;if(ke=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ee(e,t){return e(t)}function Pe(){}var Te=!1;function Ae(e,t,r){if(Te)return e(t,r);Te=!0;try{return Ee(e,t,r)}finally{Te=!1,(null!==_e||null!==ke)&&(Pe(),Oe())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var a=wa(n);if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(r(231,t,typeof n));return n}var De=!1;if(o)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){De=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ue){De=!1}function Re(e,t,r,n,a,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var $e=!1,Le=null,Fe=!1,ze=null,Ue={onError:function(e){$e=!0,Le=e}};function Be(e,t,r,n,a,s,i,o,l){$e=!1,Le=null,Re.apply(Ue,arguments)}function qe(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(qe(e)!==e)throw Error(r(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,a=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(a=s.return)){n=a;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ke(s),e;if(i===a)return Ke(s),t;i=i.sibling}throw Error(r(188))}if(n.return!==a.return)n=s,a=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,a=i;break}if(l===a){o=!0,a=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,a=s;break}if(l===a){o=!0,a=i,n=s;break}l=l.sibling}if(!o)throw Error(r(189))}}if(n.alternate!==a)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=t.unstable_scheduleCallback,Ye=t.unstable_cancelCallback,Je=t.unstable_shouldYield,Ze=t.unstable_requestPaint,Qe=t.unstable_now,Xe=t.unstable_getCurrentPriorityLevel,et=t.unstable_ImmediatePriority,tt=t.unstable_UserBlockingPriority,rt=t.unstable_NormalPriority,nt=t.unstable_LowPriority,at=t.unstable_IdlePriority,st=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/ct|0)|0},lt=Math.log,ct=Math.LN2;var dt=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mt(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&r;if(0!==i){var o=i&~a;0!==o?n=ht(o):0!==(s&=i)&&(n=ht(s))}else 0!==(i=r&~a)?n=ht(i):0!==s&&(n=ht(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&a)&&((a=n&-n)>=(s=t&-t)||16===a&&4194240&s))return t;if(4&n&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(r=31-ot(t)),n|=e[r],t&=~a;return n}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function xt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=dt;return!(4194240&(dt<<=1))&&(dt=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function yt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=r}function bt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ot(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var vt=0;function jt(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var wt,Nt,_t,kt,St,Ct=!1,Ot=[],Et=null,Pt=null,Tt=null,At=new Map,Mt=new Map,Dt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function $t(e,t,r,n,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=va(t))&&Nt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Lt(e){var t=ba(e.target);if(null!==t){var r=qe(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=We(r)))return e.blockedOn=t,void St(e.priority,function(){_t(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=va(r))&&Nt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);je=n,r.target.dispatchEvent(n),je=null,t.shift()}return!0}function zt(e,t,r){Ft(e)&&r.delete(t)}function Ut(){Ct=!1,null!==Et&&Ft(Et)&&(Et=null),null!==Pt&&Ft(Pt)&&(Pt=null),null!==Tt&&Ft(Tt)&&(Tt=null),At.forEach(zt),Mt.forEach(zt)}function Bt(e,r){e.blockedOn===r&&(e.blockedOn=null,Ct||(Ct=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ut)))}function qt(e){function t(t){return Bt(t,e)}if(0<Ot.length){Bt(Ot[0],e);for(var r=1;r<Ot.length;r++){var n=Ot[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Et&&Bt(Et,e),null!==Pt&&Bt(Pt,e),null!==Tt&&Bt(Tt,e),At.forEach(t),Mt.forEach(t),r=0;r<Dt.length;r++)(n=Dt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Dt.length&&null===(r=Dt[0]).blockedOn;)Lt(r),null===r.blockedOn&&Dt.shift()}var Wt=b.ReactCurrentBatchConfig,Kt=!0;function Vt(e,t,r,n){var a=vt,s=Wt.transition;Wt.transition=null;try{vt=1,Gt(e,t,r,n)}finally{vt=a,Wt.transition=s}}function Ht(e,t,r,n){var a=vt,s=Wt.transition;Wt.transition=null;try{vt=4,Gt(e,t,r,n)}finally{vt=a,Wt.transition=s}}function Gt(e,t,r,n){if(Kt){var a=Jt(e,t,r,n);if(null===a)Kn(e,t,n,Yt,r),Rt(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return Et=$t(Et,e,t,r,n,a),!0;case"dragenter":return Pt=$t(Pt,e,t,r,n,a),!0;case"mouseover":return Tt=$t(Tt,e,t,r,n,a),!0;case"pointerover":var s=a.pointerId;return At.set(s,$t(At.get(s)||null,e,t,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,Mt.set(s,$t(Mt.get(s)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(Rt(e,n),4&t&&-1<It.indexOf(e)){for(;null!==a;){var s=va(a);if(null!==s&&wt(s),null===(s=Jt(e,t,r,n))&&Kn(e,t,n,Yt,r),s===a)break;a=s}null!==a&&n.stopPropagation()}else Kn(e,t,n,null,r)}}var Yt=null;function Jt(e,t,r,n){if(Yt=null,null!==(e=ba(e=we(n))))if(null===(t=qe(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case et:return 1;case tt:return 4;case rt:case nt:return 16;case at:return 536870912;default:return 16}default:return 16}}var Qt=null,Xt=null,er=null;function tr(){if(er)return er;var e,t,r=Xt,n=r.length,a="value"in Qt?Qt.value:Qt.textContent,s=a.length;for(e=0;e<n&&r[e]===a[e];e++);var i=n-e;for(t=1;t<=i&&r[n-t]===a[s-t];t++);return er=a.slice(e,1<t?1-t:void 0)}function rr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nr(){return!0}function ar(){return!1}function sr(e){function t(t,r,n,a,s){for(var i in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nr:ar,this.isPropagationStopped=ar,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nr)},persist:function(){},isPersistent:nr}),t}var ir,or,lr,cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dr=sr(cr),ur=L({},cr,{view:0,detail:0}),hr=sr(ur),mr=L({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lr&&(lr&&"mousemove"===e.type?(ir=e.screenX-lr.screenX,or=e.screenY-lr.screenY):or=ir=0,lr=e),ir)},movementY:function(e){return"movementY"in e?e.movementY:or}}),pr=sr(mr),xr=sr(L({},mr,{dataTransfer:0})),fr=sr(L({},ur,{relatedTarget:0})),gr=sr(L({},cr,{animationName:0,elapsedTime:0,pseudoElement:0})),yr=L({},cr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),br=sr(yr),vr=sr(L({},cr,{data:0})),jr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _r(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nr[e])&&!!t[e]}function kr(){return _r}var Sr=L({},ur,{key:function(e){if(e.key){var t=jr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(e){return"keypress"===e.type?rr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cr=sr(Sr),Or=sr(L({},mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Er=sr(L({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr})),Pr=sr(L({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tr=L({},mr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ar=sr(Tr),Mr=[9,13,27,32],Dr=o&&"CompositionEvent"in window,Ir=null;o&&"documentMode"in document&&(Ir=document.documentMode);var Rr=o&&"TextEvent"in window&&!Ir,$r=o&&(!Dr||Ir&&8<Ir&&11>=Ir),Lr=String.fromCharCode(32),Fr=!1;function zr(e,t){switch(e){case"keyup":return-1!==Mr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Br=!1;var qr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qr[e.type]:"textarea"===t}function Kr(e,t,r,n){Ce(n),0<(t=Hn(t,"onChange")).length&&(r=new dr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Vr=null,Hr=null;function Gr(e){Fn(e,0)}function Yr(e){if(G(ja(e)))return e}function Jr(e,t){if("change"===e)return t}var Zr=!1;if(o){var Qr;if(o){var Xr="oninput"in document;if(!Xr){var en=document.createElement("div");en.setAttribute("oninput","return;"),Xr="function"==typeof en.oninput}Qr=Xr}else Qr=!1;Zr=Qr&&(!document.documentMode||9<document.documentMode)}function tn(){Vr&&(Vr.detachEvent("onpropertychange",rn),Hr=Vr=null)}function rn(e){if("value"===e.propertyName&&Yr(Hr)){var t=[];Kr(t,Hr,e,we(e)),Ae(Gr,t)}}function nn(e,t,r){"focusin"===e?(tn(),Hr=r,(Vr=t).attachEvent("onpropertychange",rn)):"focusout"===e&&tn()}function an(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yr(Hr)}function sn(e,t){if("click"===e)return Yr(t)}function on(e,t){if("input"===e||"change"===e)return Yr(t)}var ln="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function cn(e,t){if(ln(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!l.call(t,a)||!ln(e[a],t[a]))return!1}return!0}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var r,n=dn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dn(n)}}function hn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mn(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=Y((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function xn(e){var t=mn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&hn(r.ownerDocument.documentElement,r)){if(null!==n&&pn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=void 0===n.end?s:Math.min(n.end,a),!e.extend&&s>n&&(a=n,n=s,s=a),a=un(r,s);var i=un(r,n);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fn=o&&"documentMode"in document&&11>=document.documentMode,gn=null,yn=null,bn=null,vn=!1;function jn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;vn||null==gn||gn!==Y(n)||("selectionStart"in(n=gn)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},bn&&cn(bn,n)||(bn=n,0<(n=Hn(yn,"onSelect")).length&&(t=new dr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gn)))}function wn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Nn={animationend:wn("Animation","AnimationEnd"),animationiteration:wn("Animation","AnimationIteration"),animationstart:wn("Animation","AnimationStart"),transitionend:wn("Transition","TransitionEnd")},_n={},kn={};function Sn(e){if(_n[e])return _n[e];if(!Nn[e])return e;var t,r=Nn[e];for(t in r)if(r.hasOwnProperty(t)&&t in kn)return _n[e]=r[t];return e}o&&(kn=document.createElement("div").style,"AnimationEvent"in window||(delete Nn.animationend.animation,delete Nn.animationiteration.animation,delete Nn.animationstart.animation),"TransitionEvent"in window||delete Nn.transitionend.transition);var Cn=Sn("animationend"),On=Sn("animationiteration"),En=Sn("animationstart"),Pn=Sn("transitionend"),Tn=new Map,An="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mn(e,t){Tn.set(e,t),s(t,[e])}for(var Dn=0;Dn<An.length;Dn++){var In=An[Dn];Mn(In.toLowerCase(),"on"+(In[0].toUpperCase()+In.slice(1)))}Mn(Cn,"onAnimationEnd"),Mn(On,"onAnimationIteration"),Mn(En,"onAnimationStart"),Mn("dblclick","onDoubleClick"),Mn("focusin","onFocus"),Mn("focusout","onBlur"),Mn(Pn,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$n=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rn));function Ln(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,a,s,i,o,l,c){if(Be.apply(this,arguments),$e){if(!$e)throw Error(r(198));var d=Le;$e=!1,Le=null,Fe||(Fe=!0,ze=d)}}(a,t,void 0,e),e.currentTarget=null}function Fn(e,t){t=!!(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;Ln(a,o,c),s=l}else for(i=0;i<n.length;i++){if(l=(o=n[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;Ln(a,o,c),s=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zn(e,t){var r=t[fa];void 0===r&&(r=t[fa]=new Set);var n=e+"__bubble";r.has(n)||(Wn(t,e,2,!1),r.add(n))}function Un(e,t,r){var n=0;t&&(n|=4),Wn(r,e,n,t)}var Bn="_reactListening"+Math.random().toString(36).slice(2);function qn(e){if(!e[Bn]){e[Bn]=!0,n.forEach(function(t){"selectionchange"!==t&&($n.has(t)||Un(t,!1,e),Un(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bn]||(t[Bn]=!0,Un("selectionchange",!1,t))}}function Wn(e,t,r,n){switch(Zt(t)){case 1:var a=Vt;break;case 4:a=Ht;break;default:a=Gt}r=a.bind(null,t,r,e),a=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Kn(e,t,r,n,a){var s=n;if(!(1&t||2&t||null===n))e:for(;;){if(null===n)return;var i=n.tag;if(3===i||4===i){var o=n.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=n.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=ba(o)))return;if(5===(l=i.tag)||6===l){n=s=i;continue e}o=o.parentNode}}n=n.return}Ae(function(){var n=s,a=we(r),i=[];e:{var o=Tn.get(e);if(void 0!==o){var l=dr,c=e;switch(e){case"keypress":if(0===rr(r))break e;case"keydown":case"keyup":l=Cr;break;case"focusin":c="focus",l=fr;break;case"focusout":c="blur",l=fr;break;case"beforeblur":case"afterblur":l=fr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=xr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Er;break;case Cn:case On:case En:l=gr;break;case Pn:l=Pr;break;case"scroll":l=hr;break;case"wheel":l=Ar;break;case"copy":case"cut":case"paste":l=br;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Or}var d=!!(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=n;null!==p;){var x=(m=p).stateNode;if(5===m.tag&&null!==x&&(m=x,null!==h&&(null!=(x=Me(p,h))&&d.push(Vn(p,x,m)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,r,a),i.push({event:o,listeners:d}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===je||!(c=r.relatedTarget||r.fromElement)||!ba(c)&&!c[xa])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?ba(c):null)&&(c!==(u=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(d=pr,x="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Or,x="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?o:ja(l),m=null==c?o:ja(c),(o=new d(x,p+"leave",l,r,a)).target=u,o.relatedTarget=m,x=null,ba(a)===n&&((d=new d(h,p+"enter",c,r,a)).target=m,d.relatedTarget=u,x=d),u=x,l&&c)e:{for(h=c,p=0,m=d=l;m;m=Gn(m))p++;for(m=0,x=h;x;x=Gn(x))m++;for(;0<p-m;)d=Gn(d),p--;for(;0<m-p;)h=Gn(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Gn(d),h=Gn(h)}d=null}else d=null;null!==l&&Yn(i,o,l,d,!1),null!==c&&null!==u&&Yn(i,u,c,d,!0)}if("select"===(l=(o=n?ja(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var f=Jr;else if(Wr(o))if(Zr)f=on;else{f=an;var g=nn}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(f=sn);switch(f&&(f=f(e,n))?Kr(i,f,r,a):(g&&g(e,o,n),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&te(o,"number",o.value)),g=n?ja(n):window,e){case"focusin":(Wr(g)||"true"===g.contentEditable)&&(gn=g,yn=n,bn=null);break;case"focusout":bn=yn=gn=null;break;case"mousedown":vn=!0;break;case"contextmenu":case"mouseup":case"dragend":vn=!1,jn(i,r,a);break;case"selectionchange":if(fn)break;case"keydown":case"keyup":jn(i,r,a)}var y;if(Dr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Br?zr(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&($r&&"ko"!==r.locale&&(Br||"onCompositionStart"!==b?"onCompositionEnd"===b&&Br&&(y=tr()):(Xt="value"in(Qt=a)?Qt.value:Qt.textContent,Br=!0)),0<(g=Hn(n,b)).length&&(b=new vr(b,e,null,r,a),i.push({event:b,listeners:g}),y?b.data=y:null!==(y=Ur(r))&&(b.data=y))),(y=Rr?function(e,t){switch(e){case"compositionend":return Ur(t);case"keypress":return 32!==t.which?null:(Fr=!0,Lr);case"textInput":return(e=t.data)===Lr&&Fr?null:e;default:return null}}(e,r):function(e,t){if(Br)return"compositionend"===e||!Dr&&zr(e,t)?(e=tr(),er=Xt=Qt=null,Br=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $r&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Hn(n,"onBeforeInput")).length&&(a=new vr("onBeforeInput","beforeinput",null,r,a),i.push({event:a,listeners:n}),a.data=y))}Fn(i,t)})}function Vn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Hn(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=Me(e,r))&&n.unshift(Vn(e,s,a)),null!=(s=Me(e,t))&&n.push(Vn(e,s,a))),e=e.return}return n}function Gn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yn(e,t,r,n,a){for(var s=t._reactName,i=[];null!==r&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Me(r,s))&&i.unshift(Vn(r,l,o)):a||null!=(l=Me(r,s))&&i.push(Vn(r,l,o))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var Jn=/\r\n?/g,Zn=/\u0000|\uFFFD/g;function Qn(e){return("string"==typeof e?e:""+e).replace(Jn,"\n").replace(Zn,"")}function Xn(e,t,n){if(t=Qn(t),Qn(e)!==t&&n)throw Error(r(425))}function ea(){}var ta=null,ra=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var aa="function"==typeof setTimeout?setTimeout:void 0,sa="function"==typeof clearTimeout?clearTimeout:void 0,ia="function"==typeof Promise?Promise:void 0,oa="function"==typeof queueMicrotask?queueMicrotask:void 0!==ia?function(e){return ia.resolve(null).then(e).catch(la)}:aa;function la(e){setTimeout(function(){throw e})}function ca(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0===n)return e.removeChild(a),void qt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=a}while(r);qt(t)}function da(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var ha=Math.random().toString(36).slice(2),ma="__reactFiber$"+ha,pa="__reactProps$"+ha,xa="__reactContainer$"+ha,fa="__reactEvents$"+ha,ga="__reactListeners$"+ha,ya="__reactHandles$"+ha;function ba(e){var t=e[ma];if(t)return t;for(var r=e.parentNode;r;){if(t=r[xa]||r[ma]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ua(e);null!==e;){if(r=e[ma])return r;e=ua(e)}return t}r=(e=r).parentNode}return null}function va(e){return!(e=e[ma]||e[xa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ja(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function wa(e){return e[pa]||null}var Na=[],_a=-1;function ka(e){return{current:e}}function Sa(e){0>_a||(e.current=Na[_a],Na[_a]=null,_a--)}function Ca(e,t){_a++,Na[_a]=e.current,e.current=t}var Oa={},Ea=ka(Oa),Pa=ka(!1),Ta=Oa;function Aa(e,t){var r=e.type.contextTypes;if(!r)return Oa;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in r)s[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ma(e){return null!=(e=e.childContextTypes)}function Da(){Sa(Pa),Sa(Ea)}function Ia(e,t,n){if(Ea.current!==Oa)throw Error(r(168));Ca(Ea,t),Ca(Pa,n)}function Ra(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,"function"!=typeof a.getChildContext)return n;for(var s in a=a.getChildContext())if(!(s in t))throw Error(r(108,W(e)||"Unknown",s));return L({},n,a)}function $a(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Oa,Ta=Ea.current,Ca(Ea,e),Ca(Pa,Pa.current),!0}function La(e,t,n){var a=e.stateNode;if(!a)throw Error(r(169));n?(e=Ra(e,t,Ta),a.__reactInternalMemoizedMergedChildContext=e,Sa(Pa),Sa(Ea),Ca(Ea,e)):Sa(Pa),Ca(Pa,n)}var Fa=null,za=!1,Ua=!1;function Ba(e){null===Fa?Fa=[e]:Fa.push(e)}function qa(){if(!Ua&&null!==Fa){Ua=!0;var e=0,t=vt;try{var r=Fa;for(vt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Fa=null,za=!1}catch(S$){throw null!==Fa&&(Fa=Fa.slice(e+1)),Ge(et,qa),S$}finally{vt=t,Ua=!1}}return null}var Wa=[],Ka=0,Va=null,Ha=0,Ga=[],Ya=0,Ja=null,Za=1,Qa="";function Xa(e,t){Wa[Ka++]=Ha,Wa[Ka++]=Va,Va=e,Ha=t}function es(e,t,r){Ga[Ya++]=Za,Ga[Ya++]=Qa,Ga[Ya++]=Ja,Ja=e;var n=Za;e=Qa;var a=32-ot(n)-1;n&=~(1<<a),r+=1;var s=32-ot(t)+a;if(30<s){var i=a-a%5;s=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Za=1<<32-ot(t)+a|r<<a|n,Qa=s+e}else Za=1<<s|r<<a|n,Qa=e}function ts(e){null!==e.return&&(Xa(e,1),es(e,1,0))}function rs(e){for(;e===Va;)Va=Wa[--Ka],Wa[Ka]=null,Ha=Wa[--Ka],Wa[Ka]=null;for(;e===Ja;)Ja=Ga[--Ya],Ga[Ya]=null,Qa=Ga[--Ya],Ga[Ya]=null,Za=Ga[--Ya],Ga[Ya]=null}var ns=null,as=null,ss=!1,is=null;function os(e,t){var r=Tc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function ls(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,as=da(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,as=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ja?{id:Za,overflow:Qa}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Tc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ns=e,as=null,!0);default:return!1}}function cs(e){return!(!(1&e.mode)||128&e.flags)}function ds(e){if(ss){var t=as;if(t){var n=t;if(!ls(e,t)){if(cs(e))throw Error(r(418));t=da(n.nextSibling);var a=ns;t&&ls(e,t)?os(a,n):(e.flags=-4097&e.flags|2,ss=!1,ns=e)}}else{if(cs(e))throw Error(r(418));e.flags=-4097&e.flags|2,ss=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!ss)return us(e),ss=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=as)){if(cs(e))throw ms(),Error(r(418));for(;t;)os(e,t),t=da(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){as=da(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}as=null}}else as=ns?da(e.stateNode.nextSibling):null;return!0}function ms(){for(var e=as;e;)e=da(e.nextSibling)}function ps(){as=ns=null,ss=!1}function xs(e){null===is?is=[e]:is.push(e)}var fs=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var a=n.stateNode}if(!a)throw Error(r(147,e));var s=a,i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=s.refs;null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(r(284));if(!n._owner)throw Error(r(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bs(e){return(0,e._init)(e._payload)}function vs(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function n(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=$c(r,e.mode,n)).return=e,t):((t=s(t,r)).return=e,t)}function c(e,t,r,n){var a=r.type;return a===N?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===M&&bs(a)===t.type)?((n=s(t,r.props)).ref=gs(e,t,r),n.return=e,n):((n=Dc(r.type,r.key,r.props,null,e.mode,n)).ref=gs(e,t,r),n.return=e,n)}function d(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Lc(r,e.mode,n)).return=e,t):((t=s(t,r.children||[])).return=e,t)}function u(e,t,r,n,a){return null===t||7!==t.tag?((t=Ic(r,e.mode,n,a)).return=e,t):((t=s(t,r)).return=e,t)}function h(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=$c(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case v:return(r=Dc(t.type,t.key,t.props,null,e.mode,r)).ref=gs(e,null,t),r.return=e,r;case w:return(t=Lc(t,e.mode,r)).return=e,t;case M:return h(e,(0,t._init)(t._payload),r)}if(re(t)||R(t))return(t=Ic(t,e.mode,r,null)).return=e,t;ys(e,t)}return null}function m(e,t,r,n){var a=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r)return null!==a?null:l(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case v:return r.key===a?c(e,t,r,n):null;case w:return r.key===a?d(e,t,r,n):null;case M:return m(e,t,(a=r._init)(r._payload),n)}if(re(r)||R(r))return null!==a?null:u(e,t,r,n,null);ys(e,r)}return null}function p(e,t,r,n,a){if("string"==typeof n&&""!==n||"number"==typeof n)return l(t,e=e.get(r)||null,""+n,a);if("object"==typeof n&&null!==n){switch(n.$$typeof){case v:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case w:return d(t,e=e.get(null===n.key?r:n.key)||null,n,a);case M:return p(e,t,r,(0,n._init)(n._payload),a)}if(re(n)||R(n))return u(t,e=e.get(r)||null,n,a,null);ys(t,n)}return null}return function l(c,d,u,x){if("object"==typeof u&&null!==u&&u.type===N&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case v:e:{for(var f=u.key,g=d;null!==g;){if(g.key===f){if((f=u.type)===N){if(7===g.tag){n(c,g.sibling),(d=s(g,u.props.children)).return=c,c=d;break e}}else if(g.elementType===f||"object"==typeof f&&null!==f&&f.$$typeof===M&&bs(f)===g.type){n(c,g.sibling),(d=s(g,u.props)).ref=gs(c,g,u),d.return=c,c=d;break e}n(c,g);break}t(c,g),g=g.sibling}u.type===N?((d=Ic(u.props.children,c.mode,x,u.key)).return=c,c=d):((x=Dc(u.type,u.key,u.props,null,c.mode,x)).ref=gs(c,d,u),x.return=c,c=x)}return o(c);case w:e:{for(g=u.key;null!==d;){if(d.key===g){if(4===d.tag&&d.stateNode.containerInfo===u.containerInfo&&d.stateNode.implementation===u.implementation){n(c,d.sibling),(d=s(d,u.children||[])).return=c,c=d;break e}n(c,d);break}t(c,d),d=d.sibling}(d=Lc(u,c.mode,x)).return=c,c=d}return o(c);case M:return l(c,d,(g=u._init)(u._payload),x)}if(re(u))return function(r,s,o,l){for(var c=null,d=null,u=s,x=s=0,f=null;null!==u&&x<o.length;x++){u.index>x?(f=u,u=null):f=u.sibling;var g=m(r,u,o[x],l);if(null===g){null===u&&(u=f);break}e&&u&&null===g.alternate&&t(r,u),s=i(g,s,x),null===d?c=g:d.sibling=g,d=g,u=f}if(x===o.length)return n(r,u),ss&&Xa(r,x),c;if(null===u){for(;x<o.length;x++)null!==(u=h(r,o[x],l))&&(s=i(u,s,x),null===d?c=u:d.sibling=u,d=u);return ss&&Xa(r,x),c}for(u=a(r,u);x<o.length;x++)null!==(f=p(u,r,x,o[x],l))&&(e&&null!==f.alternate&&u.delete(null===f.key?x:f.key),s=i(f,s,x),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach(function(e){return t(r,e)}),ss&&Xa(r,x),c}(c,d,u,x);if(R(u))return function(s,o,l,c){var d=R(l);if("function"!=typeof d)throw Error(r(150));if(null==(l=d.call(l)))throw Error(r(151));for(var u=d=null,x=o,f=o=0,g=null,y=l.next();null!==x&&!y.done;f++,y=l.next()){x.index>f?(g=x,x=null):g=x.sibling;var b=m(s,x,y.value,c);if(null===b){null===x&&(x=g);break}e&&x&&null===b.alternate&&t(s,x),o=i(b,o,f),null===u?d=b:u.sibling=b,u=b,x=g}if(y.done)return n(s,x),ss&&Xa(s,f),d;if(null===x){for(;!y.done;f++,y=l.next())null!==(y=h(s,y.value,c))&&(o=i(y,o,f),null===u?d=y:u.sibling=y,u=y);return ss&&Xa(s,f),d}for(x=a(s,x);!y.done;f++,y=l.next())null!==(y=p(x,s,f,y.value,c))&&(e&&null!==y.alternate&&x.delete(null===y.key?f:y.key),o=i(y,o,f),null===u?d=y:u.sibling=y,u=y);return e&&x.forEach(function(e){return t(s,e)}),ss&&Xa(s,f),d}(c,d,u,x);ys(c,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==d&&6===d.tag?(n(c,d.sibling),(d=s(d,u)).return=c,c=d):(n(c,d),(d=$c(u,c.mode,x)).return=c,c=d),o(c)):n(c,d)}}var js=vs(!0),ws=vs(!1),Ns=ka(null),_s=null,ks=null,Ss=null;function Cs(){Ss=ks=_s=null}function Os(e){var t=Ns.current;Sa(Ns),e._currentValue=t}function Es(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ps(e,t){_s=e,Ss=ks=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(Ss!==e)if(e={context:e,memoizedValue:t,next:null},null===ks){if(null===_s)throw Error(r(308));ks=e,_s.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var As=null;function Ms(e){null===As?As=[e]:As.push(e)}function Ds(e,t,r,n){var a=t.interleaved;return null===a?(r.next=r,Ms(t)):(r.next=a.next,a.next=r),t.interleaved=r,Is(e,n)}function Is(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Rs=!1;function $s(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ls(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,2&Ol){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Is(e,r)}return null===(a=n.interleaved)?(t.next=t,Ms(n)):(t.next=a.next,a.next=t),n.interleaved=t,Is(e,r)}function Us(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,bt(e,r)}}function Bs(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?a=s=i:s=s.next=i,r=r.next}while(null!==r);null===s?a=s=t:s=s.next=t}else a=s=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function qs(e,t,r,n){var a=e.updateQueue;Rs=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=a.baseState;for(i=0,d=c=l=null,o=s;;){var h=o.lane,m=o.eventTime;if((n&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,x=o;switch(h=t,m=r,x.tag){case 1:if("function"==typeof(p=x.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=x.payload)?p.call(m,u,h):p))break e;u=L({},u,h);break e;case 2:Rs=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,i|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===d&&(l=u),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Rl|=i,e.lanes=i,e.memoizedState=u}}function Ws(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],s=a.callback;if(null!==s){if(a.callback=null,a=n,"function"!=typeof s)throw Error(r(191,s));s.call(a)}}}var Ks={},Vs=ka(Ks),Hs=ka(Ks),Gs=ka(Ks);function Ys(e){if(e===Ks)throw Error(r(174));return e}function Js(e,t){switch(Ca(Gs,t),Ca(Hs,e),Ca(Vs,Ks),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sa(Vs),Ca(Vs,t)}function Zs(){Sa(Vs),Sa(Hs),Sa(Gs)}function Qs(e){Ys(Gs.current);var t=Ys(Vs.current),r=ce(t,e.type);t!==r&&(Ca(Hs,e),Ca(Vs,r))}function Xs(e){Hs.current===e&&(Sa(Vs),Sa(Hs))}var ei=ka(0);function ti(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ri=[];function ni(){for(var e=0;e<ri.length;e++)ri[e]._workInProgressVersionPrimary=null;ri.length=0}var ai=b.ReactCurrentDispatcher,si=b.ReactCurrentBatchConfig,ii=0,oi=null,li=null,ci=null,di=!1,ui=!1,hi=0,mi=0;function pi(){throw Error(r(321))}function xi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ln(e[r],t[r]))return!1;return!0}function fi(e,t,n,a,s,i){if(ii=i,oi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ai.current=null===e||null===e.memoizedState?Xi:eo,e=n(a,s),ui){i=0;do{if(ui=!1,hi=0,25<=i)throw Error(r(301));i+=1,ci=li=null,t.updateQueue=null,ai.current=to,e=n(a,s)}while(ui)}if(ai.current=Qi,t=null!==li&&null!==li.next,ii=0,ci=li=oi=null,di=!1,t)throw Error(r(300));return e}function gi(){var e=0!==hi;return hi=0,e}function yi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ci?oi.memoizedState=ci=e:ci=ci.next=e,ci}function bi(){if(null===li){var e=oi.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===ci?oi.memoizedState:ci.next;if(null!==t)ci=t,li=e;else{if(null===e)throw Error(r(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===ci?oi.memoizedState=ci=e:ci=ci.next=e}return ci}function vi(e,t){return"function"==typeof t?t(e):t}function ji(e){var t=bi(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var a=li,s=a.baseQueue,i=n.pending;if(null!==i){if(null!==s){var o=s.next;s.next=i.next,i.next=o}a.baseQueue=s=i,n.pending=null}if(null!==s){i=s.next,a=a.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((ii&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=a):c=c.next=h,oi.lanes|=u,Rl|=u}d=d.next}while(null!==d&&d!==i);null===c?o=a:c.next=l,ln(a,t.memoizedState)||(bo=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=c,n.lastRenderedState=a}if(null!==(e=n.interleaved)){s=e;do{i=s.lane,oi.lanes|=i,Rl|=i,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wi(e){var t=bi(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var a=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{i=e(i,o.action),o=o.next}while(o!==s);ln(i,t.memoizedState)||(bo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,a]}function Ni(){}function _i(e,t){var n=oi,a=bi(),s=t(),i=!ln(a.memoizedState,s);if(i&&(a.memoizedState=s,bo=!0),a=a.queue,Ri(Ci.bind(null,n,a,e),[e]),a.getSnapshot!==t||i||null!==ci&&1&ci.memoizedState.tag){if(n.flags|=2048,Ti(9,Si.bind(null,n,a,s,t),void 0,null),null===El)throw Error(r(349));30&ii||ki(n,t,s)}return s}function ki(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=oi.updateQueue)?(t={lastEffect:null,stores:null},oi.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Si(e,t,r,n){t.value=r,t.getSnapshot=n,Oi(t)&&Ei(e)}function Ci(e,t,r){return r(function(){Oi(t)&&Ei(e)})}function Oi(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ln(e,r)}catch(n){return!0}}function Ei(e){var t=Is(e,1);null!==t&&rc(t,e,1,-1)}function Pi(e){var t=yi();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t.queue=e,e=e.dispatch=Gi.bind(null,oi,e),[t.memoizedState,e]}function Ti(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=oi.updateQueue)?(t={lastEffect:null,stores:null},oi.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Ai(){return bi().memoizedState}function Mi(e,t,r,n){var a=yi();oi.flags|=e,a.memoizedState=Ti(1|t,r,void 0,void 0===n?null:n)}function Di(e,t,r,n){var a=bi();n=void 0===n?null:n;var s=void 0;if(null!==li){var i=li.memoizedState;if(s=i.destroy,null!==n&&xi(n,i.deps))return void(a.memoizedState=Ti(t,r,s,n))}oi.flags|=e,a.memoizedState=Ti(1|t,r,s,n)}function Ii(e,t){return Mi(8390656,8,e,t)}function Ri(e,t){return Di(2048,8,e,t)}function $i(e,t){return Di(4,2,e,t)}function Li(e,t){return Di(4,4,e,t)}function Fi(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zi(e,t,r){return r=null!=r?r.concat([e]):null,Di(4,4,Fi.bind(null,t,e),r)}function Ui(){}function Bi(e,t){var r=bi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&xi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function qi(e,t){var r=bi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&xi(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Wi(e,t,r){return 21&ii?(ln(r,t)||(r=ft(),oi.lanes|=r,Rl|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=r)}function Ki(e,t){var r=vt;vt=0!==r&&4>r?r:4,e(!0);var n=si.transition;si.transition={};try{e(!1),t()}finally{vt=r,si.transition=n}}function Vi(){return bi().memoizedState}function Hi(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Yi(e))Ji(t,r);else if(null!==(r=Ds(e,t,r,n))){rc(r,e,n,ec()),Zi(r,t,n)}}function Gi(e,t,r){var n=tc(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Yi(e))Ji(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,r);if(a.hasEagerState=!0,a.eagerState=o,ln(o,i)){var l=t.interleaved;return null===l?(a.next=a,Ms(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(r=Ds(e,t,a,n))&&(rc(r,e,n,a=ec()),Zi(r,t,n))}}function Yi(e){var t=e.alternate;return e===oi||null!==t&&t===oi}function Ji(e,t){ui=di=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Zi(e,t,r){if(4194240&r){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,bt(e,r)}}var Qi={readContext:Ts,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Xi={readContext:Ts,useCallback:function(e,t){return yi().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:Ii,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,Mi(4194308,4,Fi.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Mi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mi(4,2,e,t)},useMemo:function(e,t){var r=yi();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=yi();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Hi.bind(null,oi,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},yi().memoizedState=e},useState:Pi,useDebugValue:Ui,useDeferredValue:function(e){return yi().memoizedState=e},useTransition:function(){var e=Pi(!1),t=e[0];return e=Ki.bind(null,e[1]),yi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=oi,s=yi();if(ss){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===El)throw Error(r(349));30&ii||ki(a,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Ii(Ci.bind(null,a,i,e),[e]),a.flags|=2048,Ti(9,Si.bind(null,a,i,n,t),void 0,null),n},useId:function(){var e=yi(),t=El.identifierPrefix;if(ss){var r=Qa;t=":"+t+"R"+(r=(Za&~(1<<32-ot(Za)-1)).toString(32)+r),0<(r=hi++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=mi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eo={readContext:Ts,useCallback:Bi,useContext:Ts,useEffect:Ri,useImperativeHandle:zi,useInsertionEffect:$i,useLayoutEffect:Li,useMemo:qi,useReducer:ji,useRef:Ai,useState:function(){return ji(vi)},useDebugValue:Ui,useDeferredValue:function(e){return Wi(bi(),li.memoizedState,e)},useTransition:function(){return[ji(vi)[0],bi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:_i,useId:Vi,unstable_isNewReconciler:!1},to={readContext:Ts,useCallback:Bi,useContext:Ts,useEffect:Ri,useImperativeHandle:zi,useInsertionEffect:$i,useLayoutEffect:Li,useMemo:qi,useReducer:wi,useRef:Ai,useState:function(){return wi(vi)},useDebugValue:Ui,useDeferredValue:function(e){var t=bi();return null===li?t.memoizedState=e:Wi(t,li.memoizedState,e)},useTransition:function(){return[wi(vi)[0],bi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:_i,useId:Vi,unstable_isNewReconciler:!1};function ro(e,t){if(e&&e.defaultProps){for(var r in t=L({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function no(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:L({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var ao={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),s=Fs(n,a);s.payload=t,null!=r&&(s.callback=r),null!==(t=zs(e,s,a))&&(rc(t,e,a,n),Us(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),s=Fs(n,a);s.tag=1,s.payload=t,null!=r&&(s.callback=r),null!==(t=zs(e,s,a))&&(rc(t,e,a,n),Us(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),a=Fs(r,n);a.tag=2,null!=t&&(a.callback=t),null!==(t=zs(e,a,n))&&(rc(t,e,n,r),Us(t,e,n))}};function so(e,t,r,n,a,s,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!cn(r,n)||!cn(a,s))}function io(e,t,r){var n=!1,a=Oa,s=t.contextType;return"object"==typeof s&&null!==s?s=Ts(s):(a=Ma(t)?Ta:Ea.current,s=(n=null!=(n=t.contextTypes))?Aa(e,a):Oa),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ao,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function oo(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ao.enqueueReplaceState(t,t.state,null)}function lo(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},$s(e);var s=t.contextType;"object"==typeof s&&null!==s?a.context=Ts(s):(s=Ma(t)?Ta:Ea.current,a.context=Aa(e,s)),a.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,r),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&ao.enqueueReplaceState(a,a.state,null),qs(e,r,a,n),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4194308)}function co(e,t){try{var r="",n=t;do{r+=B(n),n=n.return}while(n);var a=r}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function uo(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}var ho="function"==typeof WeakMap?WeakMap:Map;function mo(e,t,r){(r=Fs(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Wl||(Wl=!0,Kl=n)},r}function po(e,t,r){(r=Fs(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(r.callback=function(){"function"!=typeof n&&(null===Vl?Vl=new Set([this]):Vl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function xo(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new ho;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=kc.bind(null,e,t,r),t.then(e,e))}function fo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function go(e,t,r,n,a){return 1&e.mode?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Fs(-1,1)).tag=2,zs(r,t,1))),r.lanes|=1),e)}var yo=b.ReactCurrentOwner,bo=!1;function vo(e,t,r,n){t.child=null===e?ws(t,null,r,n):js(t,e.child,r,n)}function jo(e,t,r,n,a){r=r.render;var s=t.ref;return Ps(t,a),n=fi(e,t,r,n,s,a),r=gi(),null===e||bo?(ss&&r&&ts(t),t.flags|=1,vo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wo(e,t,a))}function wo(e,t,r,n,a){if(null===e){var s=r.type;return"function"!=typeof s||Ac(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Dc(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,No(e,t,s,n,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((r=null!==(r=r.compare)?r:cn)(i,n)&&e.ref===t.ref)return Wo(e,t,a)}return t.flags|=1,(e=Mc(s,n)).ref=t.ref,e.return=t,t.child=e}function No(e,t,r,n,a){if(null!==e){var s=e.memoizedProps;if(cn(s,n)&&e.ref===t.ref){if(bo=!1,t.pendingProps=n=s,0===(e.lanes&a))return t.lanes=e.lanes,Wo(e,t,a);131072&e.flags&&(bo=!0)}}return So(e,t,r,n,a)}function _o(e,t,r){var n=t.pendingProps,a=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(1&t.mode){if(!(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ca(Ml,Al),Al|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,Ca(Ml,Al),Al|=n}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ca(Ml,Al),Al|=r;else null!==s?(n=s.baseLanes|r,t.memoizedState=null):n=r,Ca(Ml,Al),Al|=n;return vo(e,t,a,r),t.child}function ko(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,r,n,a){var s=Ma(r)?Ta:Ea.current;return s=Aa(t,s),Ps(t,a),r=fi(e,t,r,n,s,a),n=gi(),null===e||bo?(ss&&n&&ts(t),t.flags|=1,vo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wo(e,t,a))}function Co(e,t,r,n,a){if(Ma(r)){var s=!0;$a(t)}else s=!1;if(Ps(t,a),null===t.stateNode)qo(e,t),io(t,r,n),lo(t,r,n,a),n=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=r.contextType;"object"==typeof c&&null!==c?c=Ts(c):c=Aa(t,c=Ma(r)?Ta:Ea.current);var d=r.getDerivedStateFromProps,u="function"==typeof d||"function"==typeof i.getSnapshotBeforeUpdate;u||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==n||l!==c)&&oo(t,i,n,c),Rs=!1;var h=t.memoizedState;i.state=h,qs(t,n,i,a),l=t.memoizedState,o!==n||h!==l||Pa.current||Rs?("function"==typeof d&&(no(t,r,d,n),l=t.memoizedState),(o=Rs||so(t,r,o,n,h,l,c))?(u||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),i.props=n,i.state=l,i.context=c,n=o):("function"==typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Ls(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:ro(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"==typeof(l=r.contextType)&&null!==l?l=Ts(l):l=Aa(t,l=Ma(r)?Ta:Ea.current);var m=r.getDerivedStateFromProps;(d="function"==typeof m||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==u||h!==l)&&oo(t,i,n,l),Rs=!1,h=t.memoizedState,i.state=h,qs(t,n,i,a);var p=t.memoizedState;o!==u||h!==p||Pa.current||Rs?("function"==typeof m&&(no(t,r,m,n),p=t.memoizedState),(c=Rs||so(t,r,c,n,h,p,l)||!1)?(d||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(n,p,l),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,p,l)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),i.props=n,i.state=p,i.context=l,n=c):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Oo(e,t,r,n,s,a)}function Oo(e,t,r,n,a,s){ko(e,t);var i=!!(128&t.flags);if(!n&&!i)return a&&La(t,r,!1),Wo(e,t,s);n=t.stateNode,yo.current=t;var o=i&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&i?(t.child=js(t,e.child,null,s),t.child=js(t,null,o,s)):vo(e,t,o,s),t.memoizedState=n.state,a&&La(t,r,!0),t.child}function Eo(e){var t=e.stateNode;t.pendingContext?Ia(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ia(0,t.context,!1),Js(e,t.containerInfo)}function Po(e,t,r,n,a){return ps(),xs(a),t.flags|=256,vo(e,t,r,n),t.child}var To,Ao,Mo,Do,Io={dehydrated:null,treeContext:null,retryLane:0};function Ro(e){return{baseLanes:e,cachePool:null,transitions:null}}function $o(e,t,n){var a,s=t.pendingProps,i=ei.current,o=!1,l=!!(128&t.flags);if((a=l)||(a=(null===e||null!==e.memoizedState)&&!!(2&i)),a?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ca(ei,1&i),null===e)return ds(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},1&s||null===o?o=Rc(l,s,0,null):(o.childLanes=0,o.pendingProps=l),e=Ic(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ro(n),t.memoizedState=Io,e):Lo(t,l));if(null!==(i=e.memoizedState)&&null!==(a=i.dehydrated))return function(e,t,n,a,s,i,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,a=uo(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=a.fallback,s=t.mode,a=Rc({mode:"visible",children:a.children},s,0,null),(i=Ic(i,s,o,null)).flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,1&t.mode&&js(t,e.child,null,o),t.child.memoizedState=Ro(o),t.memoizedState=Io,i);if(!(1&t.mode))return Fo(e,t,o,null);if("$!"===s.data){if(a=s.nextSibling&&s.nextSibling.dataset)var l=a.dgst;return a=l,Fo(e,t,o,a=uo(i=Error(r(419)),a,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(a=El)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(a.suspendedLanes|o))?0:s)&&s!==i.retryLane&&(i.retryLane=s,Is(e,s),rc(a,e,s,-1))}return xc(),Fo(e,t,o,a=uo(Error(r(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,as=da(s.nextSibling),ns=t,ss=!0,is=null,null!==e&&(Ga[Ya++]=Za,Ga[Ya++]=Qa,Ga[Ya++]=Ja,Za=e.id,Qa=e.overflow,Ja=t),t=Lo(t,a.children),t.flags|=4096,t)}(e,t,l,s,a,i,n);if(o){o=s.fallback,l=t.mode,a=(i=e.child).sibling;var c={mode:"hidden",children:s.children};return 1&l||t.child===i?(s=Mc(i,c)).subtreeFlags=14680064&i.subtreeFlags:((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null),null!==a?o=Mc(a,o):(o=Ic(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Ro(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Io,s}return e=(o=e.child).sibling,s=Mc(o,{mode:"visible",children:s.children}),!(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Lo(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,r,n){return null!==n&&xs(n),js(t,e.child,null,r),(e=Lo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Es(e.return,t,r)}function Uo(e,t,r,n,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function Bo(e,t,r){var n=t.pendingProps,a=n.revealOrder,s=n.tail;if(vo(e,t,n.children,r),2&(n=ei.current))n=1&n|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,r,t);else if(19===e.tag)zo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ca(ei,n),1&t.mode)switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===ti(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Uo(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ti(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Uo(t,!0,r,null,s);break;case"together":Uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function qo(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ko(e,t){if(!ss)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Vo(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Ho(e,t,n){var s=t.pendingProps;switch(rs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vo(t),null;case 1:case 17:return Ma(t.type)&&Da(),Vo(t),null;case 3:return s=t.stateNode,Zs(),Sa(Pa),Sa(Ea),ni(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==is&&(ic(is),is=null))),Ao(e,t),Vo(t),null;case 5:Xs(t);var i=Ys(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Mo(e,t,n,s,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(r(166));return Vo(t),null}if(e=Ys(Vs.current),hs(t)){s=t.stateNode,n=t.type;var o=t.memoizedProps;switch(s[ma]=t,s[pa]=o,e=!!(1&t.mode),n){case"dialog":zn("cancel",s),zn("close",s);break;case"iframe":case"object":case"embed":zn("load",s);break;case"video":case"audio":for(i=0;i<Rn.length;i++)zn(Rn[i],s);break;case"source":zn("error",s);break;case"img":case"image":case"link":zn("error",s),zn("load",s);break;case"details":zn("toggle",s);break;case"input":Z(s,o),zn("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},zn("invalid",s);break;case"textarea":se(s,o),zn("invalid",s)}for(var l in be(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"==typeof c?s.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xn(s.textContent,c,e),i=["children",c]):"number"==typeof c&&s.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xn(s.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zn("scroll",s)}switch(n){case"input":H(s),ee(s,o,!0);break;case"textarea":H(s),oe(s);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(s.onclick=ea)}s=i,t.updateQueue=s,null!==s&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof s.is?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),"select"===n&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[ma]=t,e[pa]=s,To(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,s),n){case"dialog":zn("cancel",e),zn("close",e),i=s;break;case"iframe":case"object":case"embed":zn("load",e),i=s;break;case"video":case"audio":for(i=0;i<Rn.length;i++)zn(Rn[i],e);i=s;break;case"source":zn("error",e),i=s;break;case"img":case"image":case"link":zn("error",e),zn("load",e),i=s;break;case"details":zn("toggle",e),i=s;break;case"input":Z(e,s),i=J(e,s),zn("invalid",e);break;case"option":default:i=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},i=L({},s,{value:void 0}),zn("invalid",e);break;case"textarea":se(e,s),i=ae(e,s),zn("invalid",e)}for(o in be(n,i),c=i)if(c.hasOwnProperty(o)){var d=c[o];"style"===o?ge(e,d):"dangerouslySetInnerHTML"===o?null!=(d=d?d.__html:void 0)&&he(e,d):"children"===o?"string"==typeof d?("textarea"!==n||""!==d)&&me(e,d):"number"==typeof d&&me(e,""+d):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=d&&"onScroll"===o&&zn("scroll",e):null!=d&&y(e,o,d,l))}switch(n){case"input":H(e),ee(e,s,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=s.value&&e.setAttribute("value",""+K(s.value));break;case"select":e.multiple=!!s.multiple,null!=(o=s.value)?ne(e,!!s.multiple,o,!1):null!=s.defaultValue&&ne(e,!!s.multiple,s.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=ea)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vo(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,s);else{if("string"!=typeof s&&null===t.stateNode)throw Error(r(166));if(n=Ys(Gs.current),Ys(Vs.current),hs(t)){if(s=t.stateNode,n=t.memoizedProps,s[ma]=t,(o=s.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xn(s.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xn(s.nodeValue,n,!!(1&e.mode))}o&&(t.flags|=4)}else(s=(9===n.nodeType?n:n.ownerDocument).createTextNode(s))[ma]=t,t.stateNode=s}return Vo(t),null;case 13:if(Sa(ei),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ss&&null!==as&&1&t.mode&&!(128&t.flags))ms(),ps(),t.flags|=98560,o=!1;else if(o=hs(t),null!==s&&null!==s.dehydrated){if(null===e){if(!o)throw Error(r(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(r(317));o[ma]=t}else ps(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vo(t),o=!1}else null!==is&&(ic(is),is=null),o=!0;if(!o)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,1&t.mode&&(null===e||1&ei.current?0===Dl&&(Dl=3):xc())),null!==t.updateQueue&&(t.flags|=4),Vo(t),null);case 4:return Zs(),Ao(e,t),null===e&&qn(t.stateNode.containerInfo),Vo(t),null;case 10:return Os(t.type._context),Vo(t),null;case 19:if(Sa(ei),null===(o=t.memoizedState))return Vo(t),null;if(s=!!(128&t.flags),null===(l=o.rendering))if(s)Ko(o,!1);else{if(0!==Dl||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=ti(e))){for(t.flags|=128,Ko(o,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;null!==n;)e=s,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ca(ei,1&ei.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Bl&&(t.flags|=128,s=!0,Ko(o,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=ti(l))){if(t.flags|=128,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ko(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ss)return Vo(t),null}else 2*Qe()-o.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,s=!0,Ko(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=ei.current,Ca(ei,s?1&n|2:1&n),t):(Vo(t),null);case 22:case 23:return uc(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&1&t.mode?!!(1073741824&Al)&&(Vo(t),6&t.subtreeFlags&&(t.flags|=8192)):Vo(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function Go(e,t){switch(rs(t),t.tag){case 1:return Ma(t.type)&&Da(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Zs(),Sa(Pa),Sa(Ea),ni(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(Sa(ei),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sa(ei),null;case 4:return Zs(),null;case 10:return Os(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}To=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ao=function(){},Mo=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Ys(Vs.current);var i,o=null;switch(r){case"input":s=J(e,s),n=J(e,n),o=[];break;case"select":s=L({},s,{value:void 0}),n=L({},n,{value:void 0}),o=[];break;case"textarea":s=ae(e,s),n=ae(e,n),o=[];break;default:"function"!=typeof s.onClick&&"function"==typeof n.onClick&&(e.onclick=ea)}for(d in be(r,n),r=null,s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&null!=s[d])if("style"===d){var l=s[d];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(a.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in n){var c=n[d];if(l=null!=s?s[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(o||(o=[]),o.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(d,c)):"children"===d?"string"!=typeof c&&"number"!=typeof c||(o=o||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(a.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&zn("scroll",e),o||l===c||(o=[])):(o=o||[]).push(d,c))}r&&(o=o||[]).push("style",r);var d=o;(t.updateQueue=d)&&(t.flags|=4)}},Do=function(e,t,r,n){r!==n&&(t.flags|=4)};var Yo=!1,Jo=!1,Zo="function"==typeof WeakSet?WeakSet:Set,Qo=null;function Xo(e,t){var r=e.ref;if(null!==r)if("function"==typeof r)try{r(null)}catch(n){_c(e,t,n)}else r.current=null}function el(e,t,r){try{r()}catch(n){_c(e,t,n)}}var tl=!1;function rl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&el(t,r,s)}a=a.next}while(a!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function al(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"==typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ma],delete t[pa],delete t[fa],delete t[ga],delete t[ya])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=ea));else if(4!==n&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var dl=null,ul=!1;function hl(e,t,r){for(r=r.child;null!==r;)ml(e,t,r),r=r.sibling}function ml(e,t,r){if(it&&"function"==typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,r)}catch(o){}switch(r.tag){case 5:Jo||Xo(r,t);case 6:var n=dl,a=ul;dl=null,hl(e,t,r),ul=a,null!==(dl=n)&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dl.removeChild(r.stateNode));break;case 18:null!==dl&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?ca(e.parentNode,r):1===e.nodeType&&ca(e,r),qt(e)):ca(dl,r.stateNode));break;case 4:n=dl,a=ul,dl=r.stateNode.containerInfo,ul=!0,hl(e,t,r),dl=n,ul=a;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){a=n=n.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(2&s||4&s)&&el(r,t,i),a=a.next}while(a!==n)}hl(e,t,r);break;case 1:if(!Jo&&(Xo(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){_c(r,t,o)}hl(e,t,r);break;case 21:hl(e,t,r);break;case 22:1&r.mode?(Jo=(n=Jo)||null!==r.memoizedState,hl(e,t,r),Jo=n):hl(e,t,r);break;default:hl(e,t,r)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Zo),t.forEach(function(t){var n=Oc.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function xl(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var s=n[a];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(r(160));ml(i,o,s),dl=null,ul=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(d){_c(s,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)fl(t,e),t=t.sibling}function fl(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xl(t,e),gl(e),4&a){try{rl(3,e,e.return),nl(3,e)}catch(O$){_c(e,e.return,O$)}try{rl(5,e,e.return)}catch(O$){_c(e,e.return,O$)}}break;case 1:xl(t,e),gl(e),512&a&&null!==n&&Xo(n,n.return);break;case 5:if(xl(t,e),gl(e),512&a&&null!==n&&Xo(n,n.return),32&e.flags){var s=e.stateNode;try{me(s,"")}catch(O$){_c(e,e.return,O$)}}if(4&a&&null!=(s=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Q(s,i),ve(l,o);var d=ve(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(s,h):"dangerouslySetInnerHTML"===u?he(s,h):"children"===u?me(s,h):y(s,u,h,d)}switch(l){case"input":X(s,i);break;case"textarea":ie(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?ne(s,!!i.multiple,p,!1):m!==!!i.multiple&&(null!=i.defaultValue?ne(s,!!i.multiple,i.defaultValue,!0):ne(s,!!i.multiple,i.multiple?[]:"",!1))}s[pa]=i}catch(O$){_c(e,e.return,O$)}}break;case 6:if(xl(t,e),gl(e),4&a){if(null===e.stateNode)throw Error(r(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(O$){_c(e,e.return,O$)}}break;case 3:if(xl(t,e),gl(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(O$){_c(e,e.return,O$)}break;case 4:default:xl(t,e),gl(e);break;case 13:xl(t,e),gl(e),8192&(s=e.child).flags&&(i=null!==s.memoizedState,s.stateNode.isHidden=i,!i||null!==s.alternate&&null!==s.alternate.memoizedState||(Ul=Qe())),4&a&&pl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Jo=(d=Jo)||u,xl(t,e),Jo=d):xl(t,e),gl(e),8192&a){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&1&e.mode)for(Qo=e,u=e.child;null!==u;){for(h=Qo=u;null!==Qo;){switch(p=(m=Qo).child,m.tag){case 0:case 11:case 14:case 15:rl(4,m,m.return);break;case 1:Xo(m,m.return);var x=m.stateNode;if("function"==typeof x.componentWillUnmount){a=m,n=m.return;try{t=a,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(O$){_c(a,n,O$)}}break;case 5:Xo(m,m.return);break;case 22:if(null!==m.memoizedState){jl(h);continue}}null!==p?(p.return=m,Qo=p):jl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{s=h.stateNode,d?"function"==typeof(i=s.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=null!=(c=h.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(O$){_c(e,e.return,O$)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(O$){_c(e,e.return,O$)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:xl(t,e),gl(e),4&a&&pl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var a=n;break e}n=n.return}throw Error(r(160))}switch(a.tag){case 5:var s=a.stateNode;32&a.flags&&(me(s,""),a.flags&=-33),cl(e,ol(e),s);break;case 3:case 4:var i=a.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(r(161))}}catch(o){_c(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,r){Qo=e,bl(e)}function bl(e,t,r){for(var n=!!(1&e.mode);null!==Qo;){var a=Qo,s=a.child;if(22===a.tag&&n){var i=null!==a.memoizedState||Yo;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=Yo;var c=Jo;if(Yo=i,(Jo=l)&&!c)for(Qo=a;null!==Qo;)l=(i=Qo).child,22===i.tag&&null!==i.memoizedState?wl(a):null!==l?(l.return=i,Qo=l):wl(a);for(;null!==s;)Qo=s,bl(s),s=s.sibling;Qo=a,Yo=o,Jo=c}vl(e)}else 8772&a.subtreeFlags&&null!==s?(s.return=a,Qo=s):vl(e)}}function vl(e){for(;null!==Qo;){var t=Qo;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Jo||nl(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!Jo)if(null===n)a.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:ro(t.type,n.memoizedProps);a.componentDidUpdate(s,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ws(t,i,a);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ws(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(r(163))}Jo||512&t.flags&&al(t)}catch(C$){_c(t,t.return,C$)}}if(t===e){Qo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qo=n;break}Qo=t.return}}function jl(e){for(;null!==Qo;){var t=Qo;if(t===e){Qo=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Qo=r;break}Qo=t.return}}function wl(e){for(;null!==Qo;){var t=Qo;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nl(4,t)}catch(l){_c(t,r,l)}break;case 1:var n=t.stateNode;if("function"==typeof n.componentDidMount){var a=t.return;try{n.componentDidMount()}catch(l){_c(t,a,l)}}var s=t.return;try{al(t)}catch(l){_c(t,s,l)}break;case 5:var i=t.return;try{al(t)}catch(l){_c(t,i,l)}}}catch(l){_c(t,t.return,l)}if(t===e){Qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qo=o;break}Qo=t.return}}var Nl,_l=Math.ceil,kl=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Ol=0,El=null,Pl=null,Tl=0,Al=0,Ml=ka(0),Dl=0,Il=null,Rl=0,$l=0,Ll=0,Fl=null,zl=null,Ul=0,Bl=1/0,ql=null,Wl=!1,Kl=null,Vl=null,Hl=!1,Gl=null,Yl=0,Jl=0,Zl=null,Ql=-1,Xl=0;function ec(){return 6&Ol?Qe():-1!==Ql?Ql:Ql=Qe()}function tc(e){return 1&e.mode?2&Ol&&0!==Tl?Tl&-Tl:null!==fs.transition?(0===Xl&&(Xl=ft()),Xl):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Zt(e.type):1}function rc(e,t,n,a){if(50<Jl)throw Jl=0,Zl=null,Error(r(185));yt(e,n,a),2&Ol&&e===El||(e===El&&(!(2&Ol)&&($l|=n),4===Dl&&oc(e,Tl)),nc(e,a),1===n&&0===Ol&&!(1&t.mode)&&(Bl=Qe()+500,za&&qa()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-ot(s),o=1<<i,l=a[i];-1===l?0!==(o&r)&&0===(o&n)||(a[i]=pt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var n=mt(e,e===El?Tl:0);if(0===n)null!==r&&Ye(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ye(r),1===t)0===e.tag?function(e){za=!0,Ba(e)}(lc.bind(null,e)):Ba(lc.bind(null,e)),oa(function(){!(6&Ol)&&qa()}),r=null;else{switch(jt(n)){case 1:r=et;break;case 4:r=tt;break;case 16:default:r=rt;break;case 536870912:r=at}r=Ec(r,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ac(e,t){if(Ql=-1,Xl=0,6&Ol)throw Error(r(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var a=mt(e,e===El?Tl:0);if(0===a)return null;if(30&a||0!==(a&e.expiredLanes)||t)t=fc(e,a);else{t=a;var s=Ol;Ol|=2;var i=pc();for(El===e&&Tl===t||(ql=null,Bl=Qe()+500,hc(e,t));;)try{yc();break}catch(l){mc(e,l)}Cs(),kl.current=i,Ol=s,null!==Pl?t=0:(El=null,Tl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(s=xt(e))&&(a=s,t=sc(e,s))),1===t)throw n=Il,hc(e,0),oc(e,a),nc(e,Qe()),n;if(6===t)oc(e,a);else{if(s=e.current.alternate,!(30&a||function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!ln(s(),a))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)||(t=fc(e,a),2===t&&(i=xt(e),0!==i&&(a=i,t=sc(e,i))),1!==t)))throw n=Il,hc(e,0),oc(e,a),nc(e,Qe()),n;switch(e.finishedWork=s,e.finishedLanes=a,t){case 0:case 1:throw Error(r(345));case 2:case 5:jc(e,zl,ql);break;case 3:if(oc(e,a),(130023424&a)===a&&10<(t=Ul+500-Qe())){if(0!==mt(e,0))break;if(((s=e.suspendedLanes)&a)!==a){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=aa(jc.bind(null,e,zl,ql),t);break}jc(e,zl,ql);break;case 4:if(oc(e,a),(4194240&a)===a)break;for(t=e.eventTimes,s=-1;0<a;){var o=31-ot(a);i=1<<o,(o=t[o])>s&&(s=o),a&=~i}if(a=s,10<(a=(120>(a=Qe()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*_l(a/1960))-a)){e.timeoutHandle=aa(jc.bind(null,e,zl,ql),a);break}jc(e,zl,ql);break;default:throw Error(r(329))}}}return nc(e,Qe()),e.callbackNode===n?ac.bind(null,e):null}function sc(e,t){var r=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=fc(e,t))&&(t=zl,zl=r,null!==t&&ic(t)),e}function ic(e){null===zl?zl=e:zl.push.apply(zl,e)}function oc(e,t){for(t&=~Ll,t&=~$l,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),n=1<<r;e[r]=-1,t&=~n}}function lc(e){if(6&Ol)throw Error(r(327));wc();var t=mt(e,0);if(!(1&t))return nc(e,Qe()),null;var n=fc(e,t);if(0!==e.tag&&2===n){var a=xt(e);0!==a&&(t=a,n=sc(e,a))}if(1===n)throw n=Il,hc(e,0),oc(e,t),nc(e,Qe()),n;if(6===n)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,zl,ql),nc(e,Qe()),null}function cc(e,t){var r=Ol;Ol|=1;try{return e(t)}finally{0===(Ol=r)&&(Bl=Qe()+500,za&&qa())}}function dc(e){null!==Gl&&0===Gl.tag&&!(6&Ol)&&wc();var t=Ol;Ol|=1;var r=Cl.transition,n=vt;try{if(Cl.transition=null,vt=1,e)return e()}finally{vt=n,Cl.transition=r,!(6&(Ol=t))&&qa()}}function uc(){Al=Ml.current,Sa(Ml)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,sa(r)),null!==Pl)for(r=Pl.return;null!==r;){var n=r;switch(rs(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&Da();break;case 3:Zs(),Sa(Pa),Sa(Ea),ni();break;case 5:Xs(n);break;case 4:Zs();break;case 13:case 19:Sa(ei);break;case 10:Os(n.type._context);break;case 22:case 23:uc()}r=r.return}if(El=e,Pl=e=Mc(e.current,null),Tl=Al=t,Dl=0,Il=null,Ll=$l=Rl=0,zl=Fl=null,null!==As){for(t=0;t<As.length;t++)if(null!==(n=(r=As[t]).interleaved)){r.interleaved=null;var a=n.next,s=r.pending;if(null!==s){var i=s.next;s.next=a,n.next=i}r.pending=n}As=null}return e}function mc(e,t){for(;;){var n=Pl;try{if(Cs(),ai.current=Qi,di){for(var a=oi.memoizedState;null!==a;){var s=a.queue;null!==s&&(s.pending=null),a=a.next}di=!1}if(ii=0,ci=li=oi=null,ui=!1,hi=0,Sl.current=null,null===n||null===n.return){Dl=1,Il=t,Pl=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var d=c,u=l,h=u.tag;if(!(1&u.mode||0!==h&&11!==h&&15!==h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=fo(o);if(null!==p){p.flags&=-257,go(p,o,l,0,t),1&p.mode&&xo(i,d,t),c=d;var x=(t=p).updateQueue;if(null===x){var f=new Set;f.add(c),t.updateQueue=f}else x.add(c);break e}if(!(1&t)){xo(i,d,t),xc();break e}c=Error(r(426))}else if(ss&&1&l.mode){var g=fo(o);if(null!==g){!(65536&g.flags)&&(g.flags|=256),go(g,o,l,0,t),xs(co(c,l));break e}}i=c=co(c,l),4!==Dl&&(Dl=2),null===Fl?Fl=[i]:Fl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Bs(i,mo(0,c,t));break e;case 1:l=c;var y=i.type,b=i.stateNode;if(!(128&i.flags||"function"!=typeof y.getDerivedStateFromError&&(null===b||"function"!=typeof b.componentDidCatch||null!==Vl&&Vl.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Bs(i,po(i,l,t));break e}}i=i.return}while(null!==i)}vc(n)}catch(v){t=v,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function pc(){var e=kl.current;return kl.current=Qi,null===e?Qi:e}function xc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===El||!(268435455&Rl)&&!(268435455&$l)||oc(El,Tl)}function fc(e,t){var n=Ol;Ol|=2;var a=pc();for(El===e&&Tl===t||(ql=null,hc(e,t));;)try{gc();break}catch(S$){mc(e,S$)}if(Cs(),Ol=n,kl.current=a,null!==Pl)throw Error(r(261));return El=null,Tl=0,Dl}function gc(){for(;null!==Pl;)bc(Pl)}function yc(){for(;null!==Pl&&!Je();)bc(Pl)}function bc(e){var t=Nl(e.alternate,e,Al);e.memoizedProps=e.pendingProps,null===t?vc(e):Pl=t,Sl.current=null}function vc(e){var t=e;do{var r=t.alternate;if(e=t.return,32768&t.flags){if(null!==(r=Go(r,t)))return r.flags&=32767,void(Pl=r);if(null===e)return Dl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(r=Ho(r,t,Al)))return void(Pl=r);if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Dl&&(Dl=5)}function jc(e,t,n){var a=vt,s=Cl.transition;try{Cl.transition=null,vt=1,function(e,t,n,a){do{wc()}while(null!==Gl);if(6&Ol)throw Error(r(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ot(r),s=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~s}}(e,i),e===El&&(Pl=El=null,Tl=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Hl||(Hl=!0,Ec(rt,function(){return wc(),null})),i=!!(15990&n.flags),!!(15990&n.subtreeFlags)||i){i=Cl.transition,Cl.transition=null;var o=vt;vt=1;var l=Ol;Ol|=4,Sl.current=null,function(e,t){if(ta=Kt,pn(e=mn())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var s=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{n.nodeType,i.nodeType}catch(j){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==i||0!==a&&3!==h.nodeType||(c=o+a),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++d===s&&(l=o),m===i&&++u===a&&(c=o),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ra={focusedElem:e,selectionRange:n},Kt=!1,Qo=t;null!==Qo;)if(e=(t=Qo).child,1028&t.subtreeFlags&&null!==e)e.return=t,Qo=e;else for(;null!==Qo;){t=Qo;try{var x=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==x){var f=x.memoizedProps,g=x.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?f:ro(t.type,f),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(r(163))}}catch(j){_c(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,Qo=e;break}Qo=t.return}x=tl,tl=!1}(e,n),fl(n,e),xn(ra),Kt=!!ta,ra=ta=null,e.current=n,yl(n),Ze(),Ol=l,vt=o,Cl.transition=i}else e.current=n;if(Hl&&(Hl=!1,Gl=e,Yl=s),i=e.pendingLanes,0===i&&(Vl=null),function(e){if(it&&"function"==typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),nc(e,Qe()),null!==t)for(a=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],a(s.value,{componentStack:s.stack,digest:s.digest});if(Wl)throw Wl=!1,e=Kl,Kl=null,e;!!(1&Yl)&&0!==e.tag&&wc(),i=e.pendingLanes,1&i?e===Zl?Jl++:(Jl=0,Zl=e):Jl=0,qa()}(e,t,n,a)}finally{Cl.transition=s,vt=a}return null}function wc(){if(null!==Gl){var e=jt(Yl),t=Cl.transition,n=vt;try{if(Cl.transition=null,vt=16>e?16:e,null===Gl)var a=!1;else{if(e=Gl,Gl=null,Yl=0,6&Ol)throw Error(r(331));var s=Ol;for(Ol|=4,Qo=e.current;null!==Qo;){var i=Qo,o=i.child;if(16&Qo.flags){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Qo=d;null!==Qo;){var u=Qo;switch(u.tag){case 0:case 11:case 15:rl(8,u,i)}var h=u.child;if(null!==h)h.return=u,Qo=h;else for(;null!==Qo;){var m=(u=Qo).sibling,p=u.return;if(sl(u),u===d){Qo=null;break}if(null!==m){m.return=p,Qo=m;break}Qo=p}}}var x=i.alternate;if(null!==x){var f=x.child;if(null!==f){x.child=null;do{var g=f.sibling;f.sibling=null,f=g}while(null!==f)}}Qo=i}}if(2064&i.subtreeFlags&&null!==o)o.return=i,Qo=o;else e:for(;null!==Qo;){if(2048&(i=Qo).flags)switch(i.tag){case 0:case 11:case 15:rl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Qo=y;break e}Qo=i.return}}var b=e.current;for(Qo=b;null!==Qo;){var v=(o=Qo).child;if(2064&o.subtreeFlags&&null!==v)v.return=o,Qo=v;else e:for(o=b;null!==Qo;){if(2048&(l=Qo).flags)try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(w){_c(l,l.return,w)}if(l===o){Qo=null;break e}var j=l.sibling;if(null!==j){j.return=l.return,Qo=j;break e}Qo=l.return}}if(Ol=s,qa(),it&&"function"==typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(w){}a=!0}return a}finally{vt=n,Cl.transition=t}}return!1}function Nc(e,t,r){e=zs(e,t=mo(0,t=co(r,t),1),1),t=ec(),null!==e&&(yt(e,1,t),nc(e,t))}function _c(e,t,r){if(3===e.tag)Nc(e,e,r);else for(;null!==t;){if(3===t.tag){Nc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Vl||!Vl.has(n))){t=zs(t,e=po(t,e=co(r,e),1),1),e=ec(),null!==t&&(yt(t,1,e),nc(t,e));break}}t=t.return}}function kc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,El===e&&(Tl&r)===r&&(4===Dl||3===Dl&&(130023424&Tl)===Tl&&500>Qe()-Ul?hc(e,0):Ll|=r),nc(e,t)}function Sc(e,t){0===t&&(1&e.mode?(t=ut,!(130023424&(ut<<=1))&&(ut=4194304)):t=1);var r=ec();null!==(e=Is(e,t))&&(yt(e,t,r),nc(e,r))}function Cc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Sc(e,r)}function Oc(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(r(314))}null!==a&&a.delete(t),Sc(e,n)}function Ec(e,t){return Ge(e,t)}function Pc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,r,n){return new Pc(e,t,r,n)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var r=e.alternate;return null===r?((r=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Dc(e,t,n,a,s,i){var o=2;if(a=e,"function"==typeof e)Ac(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case N:return Ic(n.children,s,i,t);case k:o=8,s|=8;break;case S:return(e=Tc(12,n,t,2|s)).elementType=S,e.lanes=i,e;case P:return(e=Tc(13,n,t,s)).elementType=P,e.lanes=i,e;case T:return(e=Tc(19,n,t,s)).elementType=T,e.lanes=i,e;case D:return Rc(n,s,i,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case O:o=9;break e;case E:o=11;break e;case A:o=14;break e;case M:o=16,a=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=Tc(o,n,t,s)).elementType=e,t.type=a,t.lanes=i,t}function Ic(e,t,r,n){return(e=Tc(7,e,n,t)).lanes=r,e}function Rc(e,t,r,n){return(e=Tc(22,e,n,t)).elementType=D,e.lanes=r,e.stateNode={isHidden:!1},e}function $c(e,t,r){return(e=Tc(6,e,null,t)).lanes=r,e}function Lc(e,t,r){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function zc(e,t,r,n,a,s,i,o,l){return e=new Fc(e,t,r,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Tc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$s(s),e}function Uc(e){if(!e)return Oa;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ma(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var n=e.type;if(Ma(n))return Ra(e,n,t)}return t}function Bc(e,t,r,n,a,s,i,o,l){return(e=zc(r,n,!0,e,0,s,0,o,l)).context=Uc(null),r=e.current,(s=Fs(n=ec(),a=tc(r))).callback=null!=t?t:null,zs(r,s,a),e.current.lanes=a,yt(e,a,n),nc(e,n),e}function qc(e,t,r,n){var a=t.current,s=ec(),i=tc(a);return r=Uc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Fs(s,i)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=zs(a,t,i))&&(rc(e,a,i,s),Us(e,a,i)),i}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Vc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pa.current)bo=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return bo=!1,function(e,t,r){switch(t.tag){case 3:Eo(t),ps();break;case 5:Qs(t);break;case 1:Ma(t.type)&&$a(t);break;case 4:Js(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Ca(Ns,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ca(ei,1&ei.current),t.flags|=128,null):0!==(r&t.child.childLanes)?$o(e,t,r):(Ca(ei,1&ei.current),null!==(e=Wo(e,t,r))?e.sibling:null);Ca(ei,1&ei.current);break;case 19:if(n=0!==(r&t.childLanes),128&e.flags){if(n)return Bo(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ca(ei,ei.current),n)break;return null;case 22:case 23:return t.lanes=0,_o(e,t,r)}return Wo(e,t,r)}(e,t,n);bo=!!(131072&e.flags)}else bo=!1,ss&&1048576&t.flags&&es(t,Ha,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;qo(e,t),e=t.pendingProps;var s=Aa(t,Ea.current);Ps(t,n),s=fi(null,t,a,e,s,n);var i=gi();return t.flags|=1,"object"==typeof s&&null!==s&&"function"==typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ma(a)?(i=!0,$a(t)):i=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,$s(t),s.updater=ao,t.stateNode=s,s._reactInternals=t,lo(t,a,e,n),t=Oo(null,t,a,!0,i,n)):(t.tag=0,ss&&i&&ts(t),vo(null,t,s,n),t=t.child),t;case 16:a=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,a=(s=a._init)(a._payload),t.type=a,s=t.tag=function(e){if("function"==typeof e)return Ac(e)?1:0;if(null!=e){if((e=e.$$typeof)===E)return 11;if(e===A)return 14}return 2}(a),e=ro(a,e),s){case 0:t=So(null,t,a,e,n);break e;case 1:t=Co(null,t,a,e,n);break e;case 11:t=jo(null,t,a,e,n);break e;case 14:t=wo(null,t,a,ro(a.type,e),n);break e}throw Error(r(306,a,""))}return t;case 0:return a=t.type,s=t.pendingProps,So(e,t,a,s=t.elementType===a?s:ro(a,s),n);case 1:return a=t.type,s=t.pendingProps,Co(e,t,a,s=t.elementType===a?s:ro(a,s),n);case 3:e:{if(Eo(t),null===e)throw Error(r(387));a=t.pendingProps,s=(i=t.memoizedState).element,Ls(e,t),qs(t,a,null,n);var o=t.memoizedState;if(a=o.element,i.isDehydrated){if(i={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Po(e,t,a,n,s=co(Error(r(423)),t));break e}if(a!==s){t=Po(e,t,a,n,s=co(Error(r(424)),t));break e}for(as=da(t.stateNode.containerInfo.firstChild),ns=t,ss=!0,is=null,n=ws(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),a===s){t=Wo(e,t,n);break e}vo(e,t,a,n)}t=t.child}return t;case 5:return Qs(t),null===e&&ds(t),a=t.type,s=t.pendingProps,i=null!==e?e.memoizedProps:null,o=s.children,na(a,s)?o=null:null!==i&&na(a,i)&&(t.flags|=32),ko(e,t),vo(e,t,o,n),t.child;case 6:return null===e&&ds(t),null;case 13:return $o(e,t,n);case 4:return Js(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=js(t,null,a,n):vo(e,t,a,n),t.child;case 11:return a=t.type,s=t.pendingProps,jo(e,t,a,s=t.elementType===a?s:ro(a,s),n);case 7:return vo(e,t,t.pendingProps,n),t.child;case 8:case 12:return vo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Ca(Ns,a._currentValue),a._currentValue=o,null!==i)if(ln(i.value,o)){if(i.children===s.children&&!Pa.current){t=Wo(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===a){if(1===i.tag){(c=Fs(-1,n&-n)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Es(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(r(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Es(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}vo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,a=t.pendingProps.children,Ps(t,n),a=a(s=Ts(s)),t.flags|=1,vo(e,t,a,n),t.child;case 14:return s=ro(a=t.type,t.pendingProps),wo(e,t,a,s=ro(a.type,s),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:ro(a,s),qo(e,t),t.tag=1,Ma(a)?(e=!0,$a(t)):e=!1,Ps(t,n),io(t,a,s),lo(t,a,s,n),Oo(null,t,a,!0,e,n);case 19:return Bo(e,t,n);case 22:return _o(e,t,n)}throw Error(r(156,t.tag))};var Hc="function"==typeof reportError?reportError:function(e){};function Gc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Xc(e,t,r,n,a){var s=r._reactRootContainer;if(s){var i=s;if("function"==typeof a){var o=a;a=function(){var e=Wc(i);o.call(e)}}qc(t,i,e,a)}else i=function(e,t,r,n,a){if(a){if("function"==typeof n){var s=n;n=function(){var e=Wc(i);s.call(e)}}var i=Bc(t,n,e,0,null,!1,0,"",Qc);return e._reactRootContainer=i,e[xa]=i.current,qn(8===e.nodeType?e.parentNode:e),dc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"==typeof n){var o=n;n=function(){var e=Wc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[xa]=l.current,qn(8===e.nodeType?e.parentNode:e),dc(function(){qc(t,l,r,n)}),l}(r,t,e,a,n);return Wc(i)}Yc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));qc(e,t,null,null)},Yc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){qc(null,e,null,null)}),t[xa]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Dt.length&&0!==t&&t<Dt[r].priority;r++);Dt.splice(r,0,e),0===r&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ht(t.pendingLanes);0!==r&&(bt(t,1|r),nc(t,Qe()),!(6&Ol)&&(Bl=Qe()+500,qa()))}break;case 13:dc(function(){var t=Is(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),Vc(e,1)}},Nt=function(e){if(13===e.tag){var t=Is(e,134217728);if(null!==t)rc(t,e,134217728,ec());Vc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),r=Is(e,t);if(null!==r)rc(r,e,t,ec());Vc(e,t)}},kt=function(){return vt},St=function(e,t){var r=vt;try{return vt=e,t()}finally{vt=r}},Ne=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var s=wa(a);if(!s)throw Error(r(90));G(a),X(a,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=cc,Pe=dc;var ed={usingClientEntryPoint:!1,Events:[va,ja,wa,Ce,Oe,cc]},td={findFiberByHostInstance:ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{st=nd.inject(rd),it=nd}catch(ue){}}return j.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,j.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(r(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,n)},j.createRoot=function(e,t){if(!Jc(e))throw Error(r(299));var n=!1,a="",s=Hc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,a,s),e[xa]=t.current,qn(8===e.nodeType?e.parentNode:e),new Gc(t)},j.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},j.flushSync=function(e){return dc(e)},j.hydrate=function(e,t,n){if(!Zc(t))throw Error(r(200));return Xc(null,e,t,!0,n)},j.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(r(405));var a=null!=n&&n.hydratedSources||null,s=!1,i="",o=Hc;if(null!=n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,s,0,i,o),e[xa]=t.current,qn(e),a)for(e=0;e<a.length;e++)s=(s=(n=a[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Yc(t)},j.render=function(e,t,n){if(!Zc(t))throw Error(r(200));return Xc(null,e,t,!1,n)},j.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(r(40));return!!e._reactRootContainer&&(dc(function(){Xc(null,null,e,!1,function(){e._reactRootContainer=null,e[xa]=null})}),!0)},j.unstable_batchedUpdates=cc,j.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!Zc(n))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return Xc(e,t,n,!1,a)},j.version="18.3.1-next-f1338f8080-20240426",j}function S(){if(g)return v.exports;return g=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),v.exports=k(),v.exports}var C,O,E=function(){if(y)return b;y=1;var e=S();return b.createRoot=e.createRoot,b.hydrateRoot=e.hydrateRoot,b}(),P=S();function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T.apply(this,arguments)}(O=C||(C={})).Pop="POP",O.Push="PUSH",O.Replace="REPLACE";const A="popstate";function M(e){return void 0===e&&(e={}),function(e,t,r,n){void 0===n&&(n={});let{window:a=document.defaultView,v5Compat:s=!1}=n,i=a.history,o=C.Pop,l=null,c=d();null==c&&(c=0,i.replaceState(T({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function u(){o=C.Pop;let e=d(),t=null==e?null:e-c;c=e,l&&l({action:o,location:x.location,delta:t})}function h(e,t){o=C.Push;let r=$(x.location,e,t);c=d()+1;let n=R(r,c),u=x.createHref(r);try{i.pushState(n,"",u)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;a.location.assign(u)}s&&l&&l({action:o,location:x.location,delta:1})}function m(e,t){o=C.Replace;let r=$(x.location,e,t);c=d();let n=R(r,c),a=x.createHref(r);i.replaceState(n,"",a),s&&l&&l({action:o,location:x.location,delta:0})}function p(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,r="string"==typeof e?e:L(e);return r=r.replace(/ $/,"%20"),D(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}let x={get action(){return o},get location(){return e(a,i)},listen(e){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(A,u),l=e,()=>{a.removeEventListener(A,u),l=null}},createHref:e=>t(a,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:m,go:e=>i.go(e)};return x}(function(e,t){let{pathname:r,search:n,hash:a}=e.location;return $("",{pathname:r,search:n,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:L(t)},0,e)}function D(e,t){if(!1===e||null==e)throw new Error(t)}function I(e,t){if(!e)try{throw new Error(t)}catch(S$){}}function R(e,t){return{usr:e.state,key:e.key,idx:t}}function $(e,t,r,n){return void 0===r&&(r=null),T({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?F(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function L(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function F(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}var z,U;function B(e,t,r){return void 0===r&&(r="/"),function(e,t,r){let n="string"==typeof t?F(t):t,a=re(n.pathname||"/",r);if(null==a)return null;let s=q(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let i=null;for(let o=0;null==i&&o<s.length;++o){let e=te(a);i=X(s[o],e)}return i}(e,t,r)}function q(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let a=(e,a,s)=>{let i={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(D(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(n.length));let o=ie([n,i.relativePath]),l=r.concat(i);e.children&&e.children.length>0&&(D(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),q(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:Q(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of W(e.path))a(e,t,n);else a(e,t)}),t}function W(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===n.length)return a?[s,""]:[s];let i=W(n.join("/")),o=[];return o.push(...i.map(e=>""===e?s:[s,e].join("/"))),a&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}(U=z||(z={})).data="data",U.deferred="deferred",U.redirect="redirect",U.error="error";const K=/^:[\w-]+$/,V=3,H=2,G=1,Y=10,J=-2,Z=e=>"*"===e;function Q(e,t){let r=e.split("/"),n=r.length;return r.some(Z)&&(n+=J),t&&(n+=H),r.filter(e=>!Z(e)).reduce((e,t)=>e+(K.test(t)?V:""===t?G:Y),n)}function X(e,t,r){let{routesMeta:n}=e,a={},s="/",i=[];for(let o=0;o<n.length;++o){let e=n[o],r=o===n.length-1,l="/"===s?t:t.slice(s.length)||"/",c=ee({path:e.relativePath,caseSensitive:e.caseSensitive,end:r},l),d=e.route;if(!c)return null;Object.assign(a,c.params),i.push({params:a,pathname:ie([s,c.pathname]),pathnameBase:oe(ie([s,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(s=ie([s,c.pathnameBase]))}return i}function ee(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);I("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let s=new RegExp(a,t?void 0:"i");return[s,n]}(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((e,t,r)=>{let{paramName:n,isOptional:a}=t;if("*"===n){let e=o[r]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[r];return e[n]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:i,pattern:e}}function te(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return I(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function re(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function ne(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ae(e,t){let r=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function se(e,t,r,n){let a;void 0===n&&(n=!1),"string"==typeof e?a=F(e):(a=T({},e),D(!a.pathname||!a.pathname.includes("?"),ne("?","pathname","search",a)),D(!a.pathname||!a.pathname.includes("#"),ne("#","pathname","hash",a)),D(!a.search||!a.search.includes("#"),ne("#","search","hash",a)));let s,i=""===e||""===a.pathname,o=i?"/":a.pathname;if(null==o)s=r;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:a=""}="string"==typeof e?F(e):e,s=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:s,search:le(n),hash:ce(a)}}(a,s),c=o&&"/"!==o&&o.endsWith("/"),d=(i||"."===o)&&r.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}const ie=e=>e.join("/").replace(/\/\/+/g,"/"),oe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),le=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",ce=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const de=["post","put","patch","delete"];new Set(de);const ue=["get",...de];function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},he.apply(this,arguments)}new Set(ue);const me=u.createContext(null),pe=u.createContext(null),xe=u.createContext(null),fe=u.createContext(null),ge=u.createContext({outlet:null,matches:[],isDataRoute:!1}),ye=u.createContext(null);function be(){return null!=u.useContext(fe)}function ve(){return be()||D(!1),u.useContext(fe).location}function je(e){u.useContext(xe).static||u.useLayoutEffect(e)}function we(){let{isDataRoute:e}=u.useContext(ge);return e?function(){let{router:e}=function(){let e=u.useContext(me);return e||D(!1),e}(Pe.UseNavigateStable),t=Ae(Te.UseNavigateStable),r=u.useRef(!1);return je(()=>{r.current=!0}),u.useCallback(function(n,a){void 0===a&&(a={}),r.current&&("number"==typeof n?e.navigate(n):e.navigate(n,he({fromRouteId:t},a)))},[e,t])}():function(){be()||D(!1);let e=u.useContext(me),{basename:t,future:r,navigator:n}=u.useContext(xe),{matches:a}=u.useContext(ge),{pathname:s}=ve(),i=JSON.stringify(ae(a,r.v7_relativeSplatPath)),o=u.useRef(!1);return je(()=>{o.current=!0}),u.useCallback(function(r,a){if(void 0===a&&(a={}),!o.current)return;if("number"==typeof r)return void n.go(r);let l=se(r,JSON.parse(i),s,"path"===a.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:ie([t,l.pathname])),(a.replace?n.replace:n.push)(l,a.state,a)},[t,n,i,s,e])}()}function Ne(){let{matches:e}=u.useContext(ge),t=e[e.length-1];return t?t.params:{}}function _e(e,t){let{relative:r}=void 0===t?{}:t,{future:n}=u.useContext(xe),{matches:a}=u.useContext(ge),{pathname:s}=ve(),i=JSON.stringify(ae(a,n.v7_relativeSplatPath));return u.useMemo(()=>se(e,JSON.parse(i),s,"path"===r),[e,i,s,r])}function ke(e,t){return function(e,t,r,n){be()||D(!1);let{navigator:a}=u.useContext(xe),{matches:s}=u.useContext(ge),i=s[s.length-1],o=i?i.params:{};!i||i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let c,d=ve();if(t){var h;let e="string"==typeof t?F(t):t;"/"===l||(null==(h=e.pathname)?void 0:h.startsWith(l))||D(!1),c=e}else c=d;let m=c.pathname||"/",p=m;if("/"!==l){let e=l.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=B(e,{pathname:p}),f=function(e,t,r,n){var a;void 0===t&&(t=[]);void 0===r&&(r=null);void 0===n&&(n=null);if(null==e){var s;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(s=n)&&s.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let i=e,o=null==(a=r)?void 0:a.errors;if(null!=o){let e=i.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||D(!1),i=i.slice(0,Math.min(i.length,e+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let e=i[d];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=d),e.route.id){let{loaderData:t,errors:n}=r,a=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||a){l=!0,i=c>=0?i.slice(0,c+1):[i[0]];break}}}return i.reduceRight((e,n,a)=>{let s,d=!1,h=null,m=null;var p;r&&(s=o&&n.route.id?o[n.route.id]:void 0,h=n.route.errorElement||Ce,l&&(c<0&&0===a?(Me[p="route-fallback"]||(Me[p]=!0),d=!0,m=null):c===a&&(d=!0,m=n.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,a+1)),f=()=>{let t;return t=s?h:d?m:n.route.Component?u.createElement(n.route.Component,null):n.route.element?n.route.element:e,u.createElement(Ee,{match:n,routeContext:{outlet:e,matches:x,isDataRoute:null!=r},children:t})};return r&&(n.route.ErrorBoundary||n.route.errorElement||0===a)?u.createElement(Oe,{location:r.location,revalidation:r.revalidation,component:h,error:s,children:f(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):f()},null)}(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},o,e.params),pathname:ie([l,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:ie([l,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,r,n);if(t&&f)return u.createElement(fe.Provider,{value:{location:he({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:C.Pop}},f);return f}(e,t)}function Se(){let e=function(){var e;let t=u.useContext(ye),r=function(){let e=u.useContext(pe);return e||D(!1),e}(),n=Ae();if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[n]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),r?u.createElement("pre",{style:n},r):null,null)}const Ce=u.createElement(Se,null);class Oe extends u.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){}render(){return void 0!==this.state.error?u.createElement(ge.Provider,{value:this.props.routeContext},u.createElement(ye.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ee(e){let{routeContext:t,match:r,children:n}=e,a=u.useContext(me);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),u.createElement(ge.Provider,{value:t},n)}var Pe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Pe||{}),Te=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Te||{});function Ae(e){let t=function(){let e=u.useContext(ge);return e||D(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||D(!1),r.route.id}const Me={};function De(e){let{to:t,replace:r,state:n,relative:a}=e;be()||D(!1);let{future:s,static:i}=u.useContext(xe),{matches:o}=u.useContext(ge),{pathname:l}=ve(),c=we(),d=se(t,ae(o,s.v7_relativeSplatPath),l,"path"===a),h=JSON.stringify(d);return u.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:a}),[c,h,a,r,n]),null}function Ie(e){D(!1)}function Re(e){let{basename:t="/",children:r=null,location:n,navigationType:a=C.Pop,navigator:s,static:i=!1,future:o}=e;be()&&D(!1);let l=t.replace(/^\/*/,"/"),c=u.useMemo(()=>({basename:l,navigator:s,static:i,future:he({v7_relativeSplatPath:!1},o)}),[l,o,s,i]);"string"==typeof n&&(n=F(n));let{pathname:d="/",search:h="",hash:m="",state:p=null,key:x="default"}=n,f=u.useMemo(()=>{let e=re(d,l);return null==e?null:{location:{pathname:e,search:h,hash:m,state:p,key:x},navigationType:a}},[l,d,h,m,p,x,a]);return null==f?null:u.createElement(xe.Provider,{value:c},u.createElement(fe.Provider,{children:r,value:f}))}function $e(e){let{children:t,location:r}=e;return ke(Le(t),r)}function Le(e,t){void 0===t&&(t=[]);let r=[];return u.Children.forEach(e,(e,n)=>{if(!u.isValidElement(e))return;let a=[...t,n];if(e.type===u.Fragment)return void r.push.apply(r,Le(e.props.children,a));e.type!==Ie&&D(!1),e.props.index&&e.props.children&&D(!1);let s={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=Le(e.props.children,a)),r.push(s)}),r}function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fe.apply(this,arguments)}function ze(e){return void 0===e&&(e=""),new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(e=>[r,e]):[[r,n]])},[]))}new Promise(()=>{});const Ue=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(S$){}const Be=m.startTransition;function qe(e){let{basename:t,children:r,future:n,window:a}=e,s=u.useRef();null==s.current&&(s.current=M({window:a,v5Compat:!0}));let i=s.current,[o,l]=u.useState({action:i.action,location:i.location}),{v7_startTransition:c}=n||{},d=u.useCallback(e=>{c&&Be?Be(()=>l(e)):l(e)},[l,c]);return u.useLayoutEffect(()=>i.listen(d),[i,d]),u.useEffect(()=>{return null==(e=n)||e.v7_startTransition,void(null==e||e.v7_relativeSplatPath);var e},[n]),u.createElement(Re,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}const We="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Ke=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ve=u.forwardRef(function(e,t){let r,{onClick:n,relative:a,reloadDocument:s,replace:i,state:o,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,m=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,Ue),{basename:p}=u.useContext(xe),x=!1;if("string"==typeof c&&Ke.test(c)&&(r=c,We))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),r=re(t.pathname,p);t.origin===e.origin&&null!=r?c=r+t.search+t.hash:x=!0}catch(S$){}let f=function(e,t){let{relative:r}=void 0===t?{}:t;be()||D(!1);let{basename:n,navigator:a}=u.useContext(xe),{hash:s,pathname:i,search:o}=_e(e,{relative:r}),l=i;return"/"!==n&&(l="/"===i?n:ie([n,i])),a.createHref({pathname:l,search:o,hash:s})}(c,{relative:a}),g=function(e,t){let{target:r,replace:n,state:a,preventScrollReset:s,relative:i,viewTransition:o}=void 0===t?{}:t,l=we(),c=ve(),d=_e(e,{relative:i});return u.useCallback(t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,r)){t.preventDefault();let r=void 0!==n?n:L(c)===L(d);l(e,{replace:r,state:a,preventScrollReset:s,relative:i,viewTransition:o})}},[c,l,d,n,a,r,e,s,i,o])}(c,{replace:i,state:o,target:l,preventScrollReset:d,relative:a,viewTransition:h});return u.createElement("a",Fe({},m,{href:r||f,onClick:x||s?n:function(e){n&&n(e),e.defaultPrevented||g(e)},ref:t,target:l}))});var He,Ge,Ye,Je;function Ze(e){let t=u.useRef(ze(e)),r=u.useRef(!1),n=ve(),a=u.useMemo(()=>function(e,t){let r=ze(e);return t&&t.forEach((e,n)=>{r.has(n)||t.getAll(n).forEach(e=>{r.append(n,e)})}),r}(n.search,r.current?null:t.current),[n.search]),s=we(),i=u.useCallback((e,t)=>{const n=ze("function"==typeof e?e(a):e);r.current=!0,s("?"+n,t)},[s,a]);return[a,i]}(Ge=He||(He={})).UseScrollRestoration="useScrollRestoration",Ge.UseSubmit="useSubmit",Ge.UseSubmitFetcher="useSubmitFetcher",Ge.UseFetcher="useFetcher",Ge.useViewTransitionState="useViewTransitionState",(Je=Ye||(Ye={})).UseFetcher="useFetcher",Je.UseFetchers="useFetchers",Je.UseScrollRestoration="useScrollRestoration";const Qe=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Xe=(...e)=>e.filter((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),et=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var tt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const rt=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:i,...o},l)=>u.createElement("svg",{ref:l,...tt,width:t,height:t,stroke:e,strokeWidth:n?24*Number(r)/Number(t):r,className:Xe("lucide",a),...!s&&!et(o)&&{"aria-hidden":"true"},...o},[...i.map(([e,t])=>u.createElement(e,t)),...Array.isArray(s)?s:[s]])),nt=(e,t)=>{const r=u.forwardRef(({className:r,...n},a)=>{return u.createElement(rt,{ref:a,iconNode:t,className:Xe(`lucide-${s=Qe(e),s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...n});var s});return r.displayName=Qe(e),r},at=nt("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),st=nt("arrow-down-left",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]),it=nt("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ot=nt("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),lt=nt("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),ct=nt("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),dt=nt("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),ut=nt("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),ht=nt("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),mt=nt("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),pt=nt("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),xt=nt("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),ft=nt("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),gt=nt("chart-line",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),yt=nt("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),bt=nt("chart-no-axes-column",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),vt=nt("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),jt=nt("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),wt=nt("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Nt=nt("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),_t=nt("chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]),kt=nt("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),St=nt("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Ct=nt("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Ot=nt("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),Et=nt("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Pt=nt("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Tt=nt("coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),At=nt("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Mt=nt("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Dt=nt("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),It=nt("diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]),Rt=nt("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),$t=nt("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Lt=nt("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Ft=nt("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),zt=nt("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ut=nt("facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),Bt=nt("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),qt=nt("flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),Wt=nt("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),Kt=nt("gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]),Vt=nt("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),Ht=nt("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Gt=nt("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Yt=nt("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),Jt=nt("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Zt=nt("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Qt=nt("instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),Xt=nt("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),er=nt("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),tr=nt("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),rr=nt("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),nr=nt("linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),ar=nt("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),sr=nt("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ir=nt("log-in",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),or=nt("log-out",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),lr=nt("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),cr=nt("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),dr=nt("medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),ur=nt("megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]),hr=nt("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),mr=nt("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),pr=nt("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),xr=nt("mouse-pointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]),fr=nt("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),gr=nt("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),yr=nt("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),br=nt("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),vr=nt("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),jr=nt("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]),wr=nt("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),Nr=nt("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),_r=nt("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),kr=nt("repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),Sr=nt("reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]),Cr=nt("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),Or=nt("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Er=nt("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Pr=nt("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Tr=nt("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ar=nt("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Mr=nt("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Dr=nt("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),Ir=nt("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Rr=nt("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),$r=nt("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),Lr=nt("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Fr=nt("ticket-percent",[["path",{d:"M2 9a3 3 0 1 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 1 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"1l48ns"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]),zr=nt("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Ur=nt("trending-up",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Br=nt("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),qr=nt("trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Wr=nt("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),Kr=nt("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Vr=nt("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Hr=nt("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Gr=nt("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),Yr=nt("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),Jr=nt("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Zr=nt("youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),Qr=nt("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function Xr(e){const t=function(e){const t=`${e.message}|${e.timestamp}|${e.url}`;let r=0;for(let n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n),r&=r;return`ERR-${Math.abs(r).toString(16).toUpperCase().slice(-8).padStart(8,"0")}`}(e),r=function(e){try{const t=JSON.stringify(e);return btoa(t)}catch(S$){return""}}(e);window.location.replace(`/error?code=${t}&data=${r}`)}function en(e,t,r,n){const a=function(e,t,r,n){return{message:"string"==typeof e?e:e.message,stack:"object"==typeof e?e.stack:void 0,timestamp:Date.now(),url:window.location.href,userAgent:navigator.userAgent,userId:n,component:t,action:r}}(e,t,r,n);Xr(a)}var tn,rn,nn={exports:{}},an={};var sn=(rn||(rn=1,nn.exports=function(){if(tn)return an;tn=1;var e=d(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function i(e,r,i){var o,l={},c=null,d=null;for(o in void 0!==i&&(c=""+i),void 0!==r.key&&(c=""+r.key),void 0!==r.ref&&(d=r.ref),r)n.call(r,o)&&!s.hasOwnProperty(o)&&(l[o]=r[o]);if(e&&e.defaultProps)for(o in r=e.defaultProps)void 0===l[o]&&(l[o]=r[o]);return{$$typeof:t,type:e,key:c,ref:d,props:l,_owner:a.current}}return an.Fragment=r,an.jsx=i,an.jsxs=i,an}()),nn.exports);function on({title:e,message:t}={}){const[r]=Ze(),n=we(),a=ve(),[s,i]=u.useState(null),[o,l]=u.useState(!1),c=r.get("code")||"ERR-UNKNOWN",d=r.get("data");a.state;u.useEffect(()=>{if(d)try{const e=function(e){try{const t=atob(e);return JSON.parse(t)}catch(S$){return null}}(d);i(e)}catch(e){}},[d]);return sn.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center px-4",children:sn.jsxs("div",{className:"max-w-lg w-full bg-white rounded-2xl shadow-xl overflow-hidden",children:[sn.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 px-8 py-6 text-white",children:sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:sn.jsx(Br,{className:"w-6 h-6"})}),sn.jsxs("div",{children:[sn.jsx("h1",{className:"text-2xl font-bold",children:"upload"===s?.component?"Upload Failed":"payment"===s?.component?"Payment Error":"auth"===s?.component?"Authentication Error":"create_content"===s?.action?"Content Creation Failed":"Something Went Wrong"}),sn.jsxs("p",{className:"text-red-100 text-sm",children:["Error Code: ",c]})]})]})}),sn.jsxs("div",{className:"px-8 py-6",children:[sn.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"upload"===s?.component?"We couldn't process your file upload. This might be due to file size, format, or network issues.":"payment"===s?.component?"There was an issue processing your payment. Your card was not charged.":"auth"===s?.component?"We couldn't verify your identity. Please try signing in again.":"create_content"===s?.action?"We couldn't create your content. Your data has been preserved and you can try again.":"We encountered an unexpected error. Our team has been automatically notified."}),sn.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Error Reference"}),sn.jsx("p",{className:"text-lg font-mono text-gray-900",children:c})]}),sn.jsxs("button",{onClick:async()=>{try{await navigator.clipboard.writeText(c),l(!0),setTimeout(()=>l(!1),2e3)}catch(e){}},className:"flex items-center space-x-1 px-3 py-2 bg-white rounded-lg hover:bg-gray-100 transition-colors",children:[o?sn.jsx(St,{className:"w-4 h-4 text-green-600"}):sn.jsx(At,{className:"w-4 h-4 text-gray-600"}),sn.jsx("span",{className:"text-sm text-gray-600",children:o?"Copied!":"Copy"})]})]})}),s&&sn.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[sn.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"What happened?"}),sn.jsxs("p",{className:"text-sm text-blue-700 mb-2",children:["Time: ",(h=s.timestamp,new Date(h).toLocaleString())]}),s.action&&sn.jsxs("p",{className:"text-sm text-blue-700",children:["Action: ",s.action.replace("_"," ")]})]}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsxs("button",{onClick:()=>{window.location.reload()},className:"w-full bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[sn.jsx(_r,{className:"w-5 h-5"}),sn.jsx("span",{children:"Try Again"})]}),sn.jsxs("button",{onClick:()=>{n("/dashboard")},className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[sn.jsx(Yt,{className:"w-5 h-5"}),sn.jsx("span",{children:"Back to Home"})]})]}),sn.jsx("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg",children:sn.jsxs("p",{className:"text-sm text-yellow-800",children:[sn.jsx("strong",{children:"Need help?"})," Share your error code ",sn.jsx("span",{className:"font-mono",children:c})," with our support team for faster assistance."]})})]})]})});var h}const ln={defaultProvider:"stripe",stripePublishableKey:"",coinbaseCommerceKey:"",enabled:!0};"undefined"!=typeof window&&(window.__API_CONFIG={env:"production",viteApiUrl:"https://api.promorang.co",apiBase:"https://api.promorang.co",payments:ln,timestamp:(new Date).toISOString()});const cn="https://api.promorang.co".replace(/\/+$/,"").replace(/\/api$/,"");function dn(){const[e,t]=u.useState("daily"),[r,n]=u.useState([]),[a,s]=u.useState(!0);u.useEffect(()=>{i()},[e]);const i=async()=>{s(!0);try{const t=`${cn||""}/api/leaderboard/${e}`,r=await fetch(t,{credentials:"include"});if(!r.ok)throw new Error(`Leaderboard request failed with ${r.status}`);const a=await r.json();n(Array.isArray(a)?a:[])}catch(t){n([])}finally{s(!1)}},o=e=>{switch(e){case 1:return sn.jsx(Dt,{className:"w-6 h-6 text-yellow-500"});case 2:return sn.jsx(dr,{className:"w-6 h-6 text-gray-400"});case 3:return sn.jsx(dr,{className:"w-6 h-6 text-amber-600"});default:return sn.jsxs("div",{className:"w-6 h-6 flex items-center justify-center text-gray-600 font-bold text-sm",children:["#",e]})}},l=e=>{switch(e){case 1:return"bg-gradient-to-r from-yellow-50 to-amber-50 border-yellow-200";case 2:return"bg-gradient-to-r from-gray-50 to-slate-50 border-gray-200";case 3:return"bg-gradient-to-r from-amber-50 to-orange-50 border-amber-200";default:return"bg-white border-gray-200"}};return a?sn.jsx("div",{className:"flex items-center justify-center h-64",children:sn.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):sn.jsxs("div",{className:"space-y-6",children:[sn.jsx("div",{className:"flex items-center justify-between",children:sn.jsxs("div",{children:[sn.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center space-x-3",children:[sn.jsx(qr,{className:"w-8 h-8 text-yellow-500"}),sn.jsx("span",{children:"Leaderboard"})]}),sn.jsx("p",{className:"text-gray-600 mt-2",children:"Top performers in the Promorang economy"})]})}),sn.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:sn.jsx("div",{className:"flex space-x-4",children:[{key:"daily",label:"Today",icon:Qr},{key:"weekly",label:"This Week",icon:Ur},{key:"monthly",label:"This Month",icon:Rr}].map(r=>{const n=r.icon;return sn.jsxs("button",{onClick:()=>t(r.key),className:"flex items-center space-x-2 px-6 py-3 rounded-lg font-medium transition-all duration-200 "+(e===r.key?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[sn.jsx(n,{className:"w-4 h-4"}),sn.jsx("span",{children:r.label})]},r.key)})})}),sn.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-6",children:[sn.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Composite Score Formula"}),sn.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),sn.jsx("span",{className:"text-sm text-purple-700",children:"Points  0.25"})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),sn.jsx("span",{className:"text-sm text-purple-700",children:"Gems  0.40"})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),sn.jsx("span",{className:"text-sm text-purple-700",children:"Keys  0.15"})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),sn.jsx("span",{className:"text-sm text-purple-700",children:"Gold  0.20"})]})]})]}),sn.jsx("div",{className:"space-y-3",children:r.length>0?r.map((e,t)=>{const r=t+1;return sn.jsx("div",{className:`border rounded-xl p-6 transition-all duration-200 hover:shadow-md ${l(r)}`,children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-4",children:[o(r),sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("img",{src:e.avatar_url||"/default-avatar.png",alt:e.display_name,className:"w-12 h-12 rounded-full object-cover"}),sn.jsxs("div",{children:[sn.jsx("h3",{className:"font-semibold text-gray-900",children:e.display_name||"Anonymous User"}),sn.jsxs("p",{className:"text-sm text-gray-600",children:["@",e.username||"user"]})]})]})]}),sn.jsxs("div",{className:"flex items-center space-x-6",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Rr,{className:"w-4 h-4 text-blue-600"}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("p",{className:"font-semibold text-gray-900",children:e.points_earned.toLocaleString()}),sn.jsx("p",{className:"text-xs text-gray-600",children:"Points"})]})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(It,{className:"w-4 h-4 text-purple-600"}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("p",{className:"font-semibold text-gray-900",children:e.gems_earned.toLocaleString()}),sn.jsx("p",{className:"text-xs text-gray-600",children:"Gems"})]})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Xt,{className:"w-4 h-4 text-orange-600"}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("p",{className:"font-semibold text-gray-900",children:e.keys_used}),sn.jsx("p",{className:"text-xs text-gray-600",children:"Keys"})]})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(dr,{className:"w-4 h-4 text-yellow-600"}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("p",{className:"font-semibold text-gray-900",children:e.gold_collected}),sn.jsx("p",{className:"text-xs text-gray-600",children:"Gold"})]})]}),sn.jsxs("div",{className:"text-center ml-6 pl-6 border-l border-gray-300",children:[sn.jsx("p",{className:"text-xl font-bold text-gray-900",children:e.composite_score.toFixed(1)}),sn.jsx("p",{className:"text-xs text-gray-600",children:"Score"})]})]})]})},e.id)}):sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx(qr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),sn.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Rankings Yet"}),sn.jsx("p",{className:"text-gray-600 mb-4",children:"Be the first to earn points and climb the leaderboard!"}),sn.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[sn.jsx("p",{children:" Complete drops to earn gems"}),sn.jsx("p",{children:" Engage with content to earn points"}),sn.jsx("p",{children:" Collect gold for prestige"})]})]})}),r.length>0&&sn.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Competition Stats"}),sn.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[sn.jsxs("div",{className:"text-center",children:[sn.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.reduce((e,t)=>e+t.points_earned,0).toLocaleString()}),sn.jsx("p",{className:"text-sm text-gray-600",children:"Total Points"})]}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("p",{className:"text-2xl font-bold text-purple-600",children:r.reduce((e,t)=>e+t.gems_earned,0).toLocaleString()}),sn.jsx("p",{className:"text-sm text-gray-600",children:"Total Gems"})]}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("p",{className:"text-2xl font-bold text-orange-600",children:r.reduce((e,t)=>e+t.keys_used,0)}),sn.jsx("p",{className:"text-sm text-gray-600",children:"Keys Used"})]}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:r.reduce((e,t)=>e+t.gold_collected,0)}),sn.jsx("p",{className:"text-sm text-gray-600",children:"Gold Earned"})]})]})]})]})}let un=class extends Error{constructor(e,r,n){super(e),t(this,"status"),t(this,"code"),t(this,"details"),t(this,"endpoint"),t(this,"timestamp"),t(this,"response"),t(this,"statusText"),t(this,"originalMessage"),this.name="ApiError",this.status=r,this.code=n.code,this.details=n.details,this.endpoint=n.endpoint,this.response=n.response,this.statusText=n.statusText,this.originalMessage=n.originalMessage,this.timestamp=(new Date).toISOString()}toJSON(){return{name:this.name,message:this.message,status:this.status,code:this.code,details:this.details,endpoint:this.endpoint,timestamp:this.timestamp,response:this.response,statusText:this.statusText,originalMessage:this.originalMessage}}};function hn(){return localStorage.getItem("access_token")}async function mn(e,t={}){const{returnRawResponse:r=!1,...n}=t;try{const a=`https://api.promorang.co/api${e}`,s=function(){const e=hn();return e?{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}:{"Content-Type":"application/json"}}(),i=new Headers({"Content-Type":"application/json",...s,...t.headers||{}}),o=await fetch(a,{...n,headers:i,credentials:"include"});if(r)return o;const l=o.clone();let c;try{const e=await l.text();try{c=e?JSON.parse(e):{}}catch(S$){c={message:e}}}catch(S$){c={message:"Failed to read response"}}if(401===o.status)throw localStorage.removeItem("access_token"),new un(c.message||"Unauthorized - Please log in again",o.status,{code:c.code||"UNAUTHORIZED",details:c.details||"Authentication required",endpoint:e,response:c,statusText:o.statusText});if(!o.ok){const t=c?.message||c?.error||o.statusText||"An error occurred";throw new un(t,o.status,{code:c?.code||"API_ERROR",details:c,endpoint:e,statusText:o.statusText})}return c?void 0!==c.data?c.data:c:{status:o.status}}catch(a){if(a instanceof un)throw a;throw new un(a instanceof Error?a.message:"An unknown error occurred",500,{code:"REQUEST_FAILED",details:a,endpoint:e,originalMessage:a instanceof Error?a.message:"Failed to process request"})}}const pn=(e,t={})=>mn(e,{...t,method:"GET"}),xn=(e,t,r={})=>mn(e,{...r,method:"POST",headers:{"Content-Type":"application/json",...r.headers},body:t?JSON.stringify(t):void 0}),fn=(e,t={})=>mn(e,{...t,method:"DELETE"}),gn=u.createContext(void 0),yn=({children:e})=>{const[t,r]=u.useState(null),[n,a]=u.useState(!0),s=we();u.useEffect(()=>{(async()=>{try{const n=localStorage.getItem("access_token");if(n){try{if(1e3*JSON.parse(atob(n.split(".")[1])).exp>Date.now())try{const e=await pn("/users/me"),t=e?.user||e?.data?.user;if(t&&t.id)return r(t),void a(!1)}catch(e){}}catch(t){}localStorage.removeItem("access_token")}}catch(e){localStorage.removeItem("access_token")}finally{a(!1)}})()},[]);const i=u.useCallback(async(e,t)=>{try{a(!0);const i=await xn("/auth/login",{email:e,password:t});if(i&&"object"==typeof i){const t=i.token||i?.data?.token,a=i.user||i?.data?.user;if(t){!function(e){localStorage.setItem("access_token",e)}(t);localStorage.getItem("access_token");if(a)return r(a),s("/dashboard"),{success:!0,user:a,token:t};try{const e=await pn("/auth/me"),n=e.user||e?.data?.user;if(n)return r(n),s("/dashboard"),{success:!0,user:n,token:t}}catch(n){}return{success:!0,user:{id:"",email:e,username:e.split("@")[0],email_verified:!1},token:t,message:"Logged in but could not fetch full profile"}}}throw new Error(i?.error?.message||i?.message||"Invalid response format from server")}catch(i){const e=i instanceof Error?i.message:"Failed to sign in";return{success:!1,error:{message:e,code:"SIGN_IN_ERROR"},message:e}}finally{a(!1)}},[s]),o={creator:async()=>i("creator@demo.com","demo123"),investor:async()=>i("investor@demo.com","demo123"),advertiser:async()=>i("advertiser@demo.com","demo123")},l=u.useCallback(async()=>{try{a(!0);try{await xn("/auth/logout",{})}catch(e){}localStorage.removeItem("access_token"),r(null),s("/auth")}catch(e){localStorage.removeItem("access_token"),r(null),s("/auth")}finally{a(!1)}},[s]),c={user:t,isLoading:n,signIn:i,signOut:l,demoLogin:o,isAuthenticated:!!t};return sn.jsx(gn.Provider,{value:c,children:e})},bn=()=>{const e=u.useContext(gn);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e};function vn({username:e,userId:t,displayName:r,avatarUrl:n,className:a="",showAvatar:s=!0,size:i="md"}){const o={sm:"w-6 h-6 text-xs",md:"w-8 h-8 text-sm",lg:"w-10 h-10 text-base"};if(!e&&!t)return sn.jsxs("div",{className:`flex items-center space-x-2 ${a}`,children:[s&&sn.jsx("div",{className:`${o[i]} rounded-full overflow-hidden bg-gray-200 flex items-center justify-center`,children:n?sn.jsx("img",{src:n,alt:r||"User",className:"w-full h-full object-cover"}):sn.jsx(Vr,{className:"w-1/2 h-1/2 text-gray-500"})}),sn.jsx("span",{className:"font-medium text-gray-900",children:r||"User"})]});const l=e?`/users/${e}`:t?`/users/id/${t}`:"#";return sn.jsxs(Ve,{to:l,className:`flex items-center space-x-2 hover:text-orange-600 transition-colors ${a}`,children:[s&&sn.jsx("div",{className:`${o[i]} rounded-full overflow-hidden bg-gray-200 flex items-center justify-center`,children:n?sn.jsx("img",{src:n,alt:r||e||`User #${t}`,className:"w-full h-full object-cover"}):sn.jsx(Vr,{className:"w-1/2 h-1/2 text-gray-500"})}),sn.jsx("span",{className:"font-medium",children:r||e||`User #${t}`})]})}function jn({content:e,children:t,position:r="auto",delay:n=300,disabled:a=!1,className:s="",maxWidth:i,allowWrap:o=!0,compact:l=!1}){const[c,d]=u.useState(!1),[h,m]=u.useState("top"),p=u.useRef(null),x=u.useRef(null),f=u.useRef(null);u.useEffect(()=>()=>{p.current&&(clearTimeout(p.current),p.current=null)},[]);const g=()=>{a||(p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{d(!0),setTimeout(()=>(()=>{if(!x.current||!f.current)return;const e=x.current.getBoundingClientRect(),t=f.current.getBoundingClientRect(),n=window.innerWidth,a=window.innerHeight,s=e.top,i=a-e.bottom,o=e.left,l=n-e.right,c=t.height||40,d=t.width||120;let u="top";if("auto"===r)u=s>=c+8?"top":i>=c+8?"bottom":l>=d+8?"right":o>=d+8?"left":s>=i?"top":"bottom";else switch(r){case"top":u=s>=c+8?"top":"bottom";break;case"bottom":u=i>=c+8?"bottom":"top";break;case"left":u=o>=d+8?"left":"right";break;case"right":u=l>=d+8?"right":"left"}m(u)})(),0)},n))},y=()=>{d(!1),p.current&&clearTimeout(p.current)};return a||!e?sn.jsx(sn.Fragment,{children:t}):sn.jsxs("div",{ref:x,className:`relative inline-block ${s}`,onMouseEnter:g,onMouseLeave:y,onFocus:g,onBlur:y,children:[t,c&&sn.jsxs("div",{ref:f,className:`\n      absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg \n      pointer-events-none transition-all duration-200 ease-out leading-5\n      ${c?"opacity-100 scale-100":"opacity-0 scale-95"}\n     ${{top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2"}[h]}`,style:{maxWidth:(()=>{if(i)return i;const t="string"==typeof e?e.length:100;return l||t<20?"180px":t<40?"220px":t<80?"280px":"320px"})(),minWidth:l?"auto":"120px",whiteSpace:o?"normal":"nowrap",wordWrap:o?"break-word":"normal",hyphens:o?"auto":"none"},role:"tooltip","aria-hidden":!c,children:[e,sn.jsx("div",{className:`absolute ${{top:"top-full left-1/2 transform -translate-x-1/2 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-900",left:"left-full top-1/2 transform -translate-y-1/2 border-t-4 border-b-4 border-l-4 border-transparent border-l-gray-900",right:"right-full top-1/2 transform -translate-y-1/2 border-t-4 border-b-4 border-r-4 border-transparent border-r-gray-900"}[h]}`})]})]})}function wn({isOpen:e,onClose:t}){const{user:r}=bn(),[n,a]=u.useState([]),[s,i]=u.useState(!1);u.useEffect(()=>{e&&r&&o()},[e,r]);const o=async()=>{i(!0);try{const e=[{id:"1",type:"achievement",title:"Achievement Unlocked!",message:'You earned the "First Steps" achievement and received 50 gold!',timestamp:new Date(Date.now()-18e5),read:!1,data:{achievement:"first_steps",gold_reward:50}},{id:"2",type:"reward",title:"Points Earned",message:"You earned 25 points from sharing content!",timestamp:new Date(Date.now()-72e5),read:!1,data:{points_earned:25,action:"content_share"}},{id:"3",type:"system",title:"Master Key Activated",message:"Your master key for today has been activated. You can now apply to drops!",timestamp:new Date(Date.now()-144e5),read:!0},{id:"4",type:"social",title:"New Follower",message:"PromoCreator just followed you!",timestamp:new Date(Date.now()-288e5),read:!0,actionUrl:"/users/promocreator"}];a(e)}catch(e){}finally{i(!1)}},l=e=>{switch(e){case"achievement":return sn.jsx(qr,{className:"w-5 h-5 text-yellow-600"});case"reward":return sn.jsx(Tt,{className:"w-5 h-5 text-blue-600"});case"system":return sn.jsx(Zt,{className:"w-5 h-5 text-purple-600"});case"social":return sn.jsx(Rr,{className:"w-5 h-5 text-pink-600"});case"warning":return sn.jsx(kt,{className:"w-5 h-5 text-orange-600"});default:return sn.jsx(dt,{className:"w-5 h-5 text-gray-600"})}},c=e=>{const t=(new Date).getTime()-e.getTime(),r=Math.floor(t/6e4),n=Math.floor(t/36e5),a=Math.floor(t/864e5);return r<60?`${r}m ago`:n<24?`${n}h ago`:`${a}d ago`},d=n.filter(e=>!e.read).length;return e?sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-50 pt-16",children:sn.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md mx-4 max-h-[80vh] flex flex-col",children:[sn.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(dt,{className:"w-6 h-6 text-orange-600"}),sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Notifications"}),d>0&&sn.jsx("span",{className:"bg-orange-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:d})]}),sn.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),d>0&&sn.jsx("div",{className:"px-6 py-3 border-b border-gray-100",children:sn.jsxs("button",{onClick:async()=>{a(e=>e.map(e=>({...e,read:!0})))},className:"flex items-center space-x-2 text-sm text-orange-600 hover:text-orange-700 font-medium",children:[sn.jsx(jt,{className:"w-4 h-4"}),sn.jsx("span",{children:"Mark all as read"})]})}),sn.jsx("div",{className:"flex-1 overflow-y-auto",children:s?sn.jsxs("div",{className:"p-6 text-center",children:[sn.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full mx-auto mb-2"}),sn.jsx("p",{className:"text-sm text-gray-600",children:"Loading notifications..."})]}):0===n.length?sn.jsxs("div",{className:"p-6 text-center",children:[sn.jsx(dt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),sn.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No notifications"}),sn.jsx("p",{className:"text-sm text-gray-600",children:"You're all caught up!"})]}):sn.jsx("div",{className:"divide-y divide-gray-100",children:n.map(e=>sn.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors cursor-pointer "+(e.read?"":"bg-blue-50 border-l-4 border-l-blue-500"),onClick:()=>{e.read||(async e=>{a(t=>t.map(t=>t.id===e?{...t,read:!0}:t))})(e.id),e.actionUrl&&(window.location.href=e.actionUrl)},children:sn.jsxs("div",{className:"flex items-start space-x-3",children:[sn.jsx("div",{className:"flex-shrink-0 mt-1",children:l(e.type)}),sn.jsxs("div",{className:"flex-1 min-w-0",children:[sn.jsxs("div",{className:"flex items-start justify-between",children:[sn.jsx("h4",{className:"text-sm font-medium "+(e.read?"text-gray-700":"text-gray-900"),children:e.title}),sn.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap ml-2",children:c(e.timestamp)})]}),sn.jsx("p",{className:"text-sm mt-1 "+(e.read?"text-gray-600":"text-gray-800"),children:e.message}),e.data&&sn.jsxs("div",{className:"mt-2 flex items-center space-x-4",children:[e.data.gold_reward&&sn.jsxs("div",{className:"flex items-center space-x-1 text-xs text-yellow-700 bg-yellow-100 px-2 py-1 rounded",children:[sn.jsx(qr,{className:"w-3 h-3"}),sn.jsxs("span",{children:["+",e.data.gold_reward," Gold"]})]}),e.data.points_earned&&sn.jsxs("div",{className:"flex items-center space-x-1 text-xs text-blue-700 bg-blue-100 px-2 py-1 rounded",children:[sn.jsx(Tt,{className:"w-3 h-3"}),sn.jsxs("span",{children:["+",e.data.points_earned," Points"]})]})]})]})]})},e.id))})}),sn.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:sn.jsx("p",{className:"text-xs text-gray-600 text-center",children:"Stay tuned for more updates and achievements!"})})]})}):null}function Nn({user:e,isOpen:t,onClose:r,onSuccess:n}){const[a,s]=u.useState("points"),[i,o]=u.useState(1),[l,c]=u.useState(!1),[d,h]=u.useState(null);if(!t||!e)return null;const m={points:{keys:500},gems:{keys:2}},p=()=>"points"===a?e.points_balance:e.gems_balance,x=()=>i*m[a].keys,f=p()>=x();return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:sn.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-6",children:[sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Convert Currency"}),sn.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Convert from:"}),sn.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[sn.jsxs("button",{onClick:()=>s("points"),className:"p-4 rounded-lg border-2 transition-colors "+("points"===a?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[sn.jsx(Tt,{className:"w-5 h-5 text-blue-600"}),sn.jsx("span",{className:"font-medium",children:"Points"})]}),sn.jsxs("p",{className:"text-sm text-gray-600",children:["Balance: ",e.points_balance]}),sn.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"500 pts = 1 key"})]}),sn.jsxs("button",{onClick:()=>s("gems"),className:"p-4 rounded-lg border-2 transition-colors "+("gems"===a?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[sn.jsx(Rr,{className:"w-5 h-5 text-purple-600"}),sn.jsx("span",{className:"font-medium",children:"Gems"})]}),sn.jsxs("p",{className:"text-sm text-gray-600",children:["Balance: ",e.gems_balance]}),sn.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"2 gems = 1 key"})]})]})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Keys to get:"}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("button",{type:"button",onClick:()=>o(Math.max(1,i-1)),disabled:i<=1,className:"w-8 h-8 bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed rounded text-gray-700 font-bold",children:"-"}),sn.jsx("input",{type:"number",value:i,onChange:e=>o(Math.max(1,parseInt(e.target.value)||1)),min:"1",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 text-center"}),sn.jsx("button",{type:"button",onClick:()=>o(i+1),className:"w-8 h-8 bg-gray-200 hover:bg-gray-300 rounded text-gray-700 font-bold",children:"+"})]}),sn.jsx("div",{className:"flex space-x-2 mt-2",children:[1,3,5,10].map(e=>sn.jsxs("button",{onClick:()=>o(e),className:"px-3 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded-full text-gray-700",children:[e," key",e>1?"s":""]},e))})]}),sn.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-3",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:["points"===a?sn.jsx(Tt,{className:"w-5 h-5 text-blue-600"}):sn.jsx(Rr,{className:"w-5 h-5 text-purple-600"}),sn.jsx("span",{className:"font-medium capitalize",children:a})]}),sn.jsx(ot,{className:"w-4 h-4 text-gray-400"}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Xt,{className:"w-5 h-5 text-orange-600"}),sn.jsx("span",{className:"font-medium",children:"Keys"})]})]}),sn.jsxs("div",{className:"flex items-center justify-between text-lg font-bold",children:[sn.jsxs("span",{className:"points"===a?"text-blue-600":"text-purple-600",children:["-",x().toLocaleString()]}),sn.jsxs("span",{className:"text-orange-600",children:["+",i]})]}),sn.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mt-2",children:[sn.jsxs("span",{children:["Remaining: ",(p()-x()).toLocaleString()]}),sn.jsxs("span",{children:["New total: ",e.keys_balance+i]})]})]}),"points"===a&&sn.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(kt,{className:"w-4 h-4 text-blue-600"}),sn.jsx("span",{className:"text-sm text-blue-700",children:"Daily limit: 3 keys from points conversion"})]})}),d&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:sn.jsx("p",{className:"text-sm text-red-700",children:d})}),sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),sn.jsx("button",{onClick:async()=>{if(f&&!(i<1)){c(!0),h(null);try{const e=await fetch("/api/users/convert",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({from_currency:a,to_currency:"keys",amount:i})});if(e.ok)n(),r(),o(1);else{const t=await e.json();h(t.error||"Conversion failed")}}catch(e){h("Network error occurred")}finally{c(!1)}}},disabled:!f||l||i<1,className:"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2",children:l?sn.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):sn.jsxs(sn.Fragment,{children:[sn.jsx(St,{className:"w-4 h-4"}),sn.jsx("span",{children:"Convert"})]})})]})]})]})})}function _n({user:e,isOpen:t,onClose:r,onSuccess:n}){const[a,s]=u.useState(!1),[i,o]=u.useState(null),[l,c]=u.useState(null);u.useEffect(()=>{t&&e&&d()},[t,e]);const d=async()=>{try{const e=await pn("/users/master-key-status"),t=e?.status||e;t&&o(t)}catch(e){}};if(!t||!e)return null;const h=(e=>{switch(e){case"super":return{name:"Super",required:1,color:"text-yellow-600",bgColor:"bg-yellow-50"};case"premium":return{name:"Premium",required:2,color:"text-purple-600",bgColor:"bg-purple-50"};default:return{name:"Free",required:5,color:"text-gray-600",bgColor:"bg-gray-50"}}})(e.user_tier),m=i?.is_activated||!1,p=!!i&&i.proof_drops_completed>=i.proof_drops_required;return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:sn.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-lg mx-4",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-6",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Mr,{className:"w-6 h-6 text-purple-600"}),sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Master Key System"})]}),sn.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{className:`${h.bgColor} border border-purple-200 rounded-lg p-4`,children:[sn.jsxs("div",{className:"flex items-center justify-between mb-3",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Rr,{className:`w-5 h-5 ${h.color}`}),sn.jsxs("span",{className:`font-semibold ${h.color}`,children:[h.name," Tier"]})]}),sn.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h.color} bg-white`,children:[h.required," proof drop",h.required>1?"s":""," required"]})]}),sn.jsxs("p",{className:"text-sm text-gray-700",children:["Complete ",h.required," proof drop",h.required>1?"s":""," daily to activate your Master Key and unlock the ability to apply for paid drops."]})]}),sn.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-3",children:[sn.jsx("h3",{className:"font-semibold text-gray-900",children:"Today's Progress"}),sn.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-medium "+(m?"text-green-600 bg-green-100":"text-orange-600 bg-orange-100"),children:m?"Activated":"Not Activated"})]}),i&&sn.jsxs("div",{className:"space-y-3",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("span",{className:"text-sm text-gray-600",children:"Proof Drops Completed"}),sn.jsxs("span",{className:"font-semibold text-gray-900",children:[i.proof_drops_completed,"/",i.proof_drops_required]})]}),sn.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:sn.jsx("div",{className:"h-2 rounded-full transition-all duration-300 "+(m?"bg-green-500":"bg-orange-500"),style:{width:`${Math.min(100,i.proof_drops_completed/i.proof_drops_required*100)}%`}})}),!m&&i.proof_drops_completed>0&&sn.jsxs("p",{className:"text-sm text-gray-600",children:[i.proof_drops_required-i.proof_drops_completed," more proof drop",i.proof_drops_required-i.proof_drops_completed>1?"s":""," needed"]})]})]}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsx("h3",{className:"font-semibold text-gray-900",children:"Master Key Benefits"}),sn.jsxs("div",{className:"space-y-2",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(St,{className:"w-4 h-4 text-green-600"}),sn.jsx("span",{className:"text-sm text-gray-700",children:"Apply for paid drops using Keys"})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(St,{className:"w-4 h-4 text-green-600"}),sn.jsx("span",{className:"text-sm text-gray-700",children:"Earn Gems from completed drops"})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(St,{className:"w-4 h-4 text-green-600"}),sn.jsx("span",{className:"text-sm text-gray-700",children:"Access to premium opportunities"})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(St,{className:"w-4 h-4 text-green-600"}),sn.jsx("span",{className:"text-sm text-gray-700",children:"Higher earning potential"})]})]})]}),!m&&sn.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[sn.jsx(Qr,{className:"w-4 h-4 text-blue-600"}),sn.jsx("span",{className:"font-medium text-blue-900",children:"How to Earn Proof Drops"})]}),sn.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[sn.jsx("li",{children:" Complete free social actions (likes, comments, shares)"}),sn.jsx("li",{children:" Participate in community challenges"}),sn.jsx("li",{children:" Engage with content daily"}),sn.jsx("li",{children:" Maintain your daily streak"})]})]}),l&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:sn.jsx("p",{className:"text-sm text-red-700",children:l})}),sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Close"}),!m&&sn.jsx("button",{onClick:async()=>{s(!0),c(null);try{const e=await xn("/users/activate-master-key",{});!1!==e?.success?(await d(),n()):c(e?.error||"Activation failed")}catch(e){c("Network error occurred")}finally{s(!1)}},disabled:!p||a,className:"flex-1 bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2",children:a?sn.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):p?sn.jsxs(sn.Fragment,{children:[sn.jsx(Mr,{className:"w-4 h-4"}),sn.jsx("span",{children:"Activate"})]}):sn.jsxs(sn.Fragment,{children:[sn.jsx(Pt,{className:"w-4 h-4"}),sn.jsx("span",{children:"Complete Proofs"})]})}),m&&sn.jsxs("div",{className:"flex-1 bg-green-100 text-green-700 px-4 py-2 rounded-lg font-medium flex items-center justify-center space-x-2",children:[sn.jsx(St,{className:"w-4 h-4"}),sn.jsx("span",{children:"Activated"})]})]})]})]})})}const kn=e=>encodeURIComponent(e),Sn=(e,t)=>`/profile/${kn(e)}${(e=>{if(!e)return"";const t=Object.entries(e).filter(([,e])=>null!=e);return 0===t.length?"":`?${new URLSearchParams(Object.fromEntries(t)).toString()}`})(t)}`,Cn=e=>`/task/${kn(e)}`;function On({user:e,isOpen:t,onClose:r,onSuccess:n}){const[a,s]=u.useState(1),[i,o]=u.useState(""),[l,c]=u.useState(!1),[d,h]=u.useState(!1),[m,p]=u.useState(null);if(!t||!e)return null;const x=e.username||(e.email?e.email.split("@")[0]:void 0)||"me",f=(e=>{switch(e){case"super":return 1e3;case"premium":return 750;default:return 500}})(e.user_tier);return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:sn.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-6",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Qt,{className:"w-6 h-6 text-pink-600"}),sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Instagram Verification"})]}),sn.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),1===a&&sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-pink-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:sn.jsx(Qt,{className:"w-8 h-8 text-white"})}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Connect Your Instagram"}),sn.jsxs("p",{className:"text-gray-600 text-sm",children:["Verify your Instagram account to earn ",f," PromoPoints monthly"]})]}),sn.jsxs("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 border border-pink-200 rounded-lg p-4",children:[sn.jsx("h4",{className:"font-medium text-pink-900 mb-2",children:"Monthly Benefits"}),sn.jsxs("div",{className:"space-y-2 text-sm text-pink-700",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("span",{children:"Your Tier:"}),sn.jsx("span",{className:"font-semibold capitalize",children:e.user_tier})]}),sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("span",{children:"Monthly Points:"}),sn.jsxs("span",{className:"font-bold text-pink-600",children:[f," points"]})]}),sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("span",{children:"Key Equivalent:"}),sn.jsxs("span",{className:"font-medium",children:[Math.floor(f/500)," keys"]})]})]})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instagram Username"}),sn.jsx("input",{type:"text",value:i,onChange:e=>o(e.target.value),placeholder:"@yourusername",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent"})]}),m&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:sn.jsx("p",{className:"text-sm text-red-700",children:m})}),sn.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-lg p-4 mt-6",children:[sn.jsxs("h4",{className:"font-medium text-blue-900 mb-2 flex items-center space-x-2",children:[sn.jsx(Ur,{className:"w-4 h-4"}),sn.jsx("span",{children:"Want Even More Rewards?"})]}),sn.jsxs("p",{className:"text-sm text-blue-700 mb-4",children:["Try our new ",sn.jsx("strong",{children:"Influence Rewards"})," program! Earn dynamic monthly points based on your actual follower count (followers  0.01)."]}),sn.jsxs("div",{className:"flex items-center justify-between text-sm",children:[sn.jsxs("div",{className:"space-y-1",children:[sn.jsx("div",{className:"text-blue-600",children:" 5,000 followers = 50 points/month"}),sn.jsx("div",{className:"text-blue-600",children:" 10,000 followers = 100 points/month"}),sn.jsx("div",{className:"text-blue-600",children:" 50,000 followers = 500 points/month"})]}),sn.jsx("button",{onClick:()=>{r(),window.location.href=Sn(x,{openInfluenceRewards:"true"})},className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",children:"Learn More"})]})]}),sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),sn.jsx("button",{onClick:async()=>{if(i.trim()){c(!0),p(null);try{const e=await fetch("/api/users/register-instagram",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({instagram_username:i})});if(e.ok)s(2);else{const t=await e.json();p(t.error||"Registration failed")}}catch(e){p("Network error occurred")}finally{c(!1)}}else p("Please enter your Instagram username")},disabled:l||!i.trim(),className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",children:l?"Registering...":"Continue"})]})]}),2===a&&sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:sn.jsx(St,{className:"w-8 h-8 text-green-600"})}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Send Verification DM"}),sn.jsx("p",{className:"text-gray-600 text-sm",children:"Send a DM to @promorangco on Instagram with the word below"})]}),sn.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-medium text-gray-900",children:"Message to send:"}),sn.jsx("code",{className:"text-lg font-mono bg-white px-3 py-2 rounded border mt-2 block",children:"promopoints"})]}),sn.jsx("button",{onClick:()=>(async e=>{await navigator.clipboard.writeText(e),h(!0),setTimeout(()=>h(!1),2e3)})("promopoints"),className:"p-2 bg-gray-200 hover:bg-gray-300 rounded transition-colors",title:"Copy message",children:d?sn.jsx(jt,{className:"w-4 h-4 text-green-600"}):sn.jsx(At,{className:"w-4 h-4"})})]})}),sn.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[sn.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Next Steps:"}),sn.jsxs("ol",{className:"text-sm text-blue-700 space-y-1",children:[sn.jsx("li",{children:"1. Open Instagram and go to @promorangco"}),sn.jsxs("li",{children:["2. Send a DM with exactly: ",sn.jsx("strong",{children:"promopoints"})]}),sn.jsx("li",{children:"3. Wait for verification (usually within 24 hours)"}),sn.jsx("li",{children:"4. Return here to claim your monthly points"})]})]}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsx("button",{onClick:async()=>{c(!0),p(null);try{const e=await fetch("/api/users/claim-instagram-points",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({})});if(e.ok)await e.json(),n(),r(),s(1),o("");else{const t=await e.json();p(t.error||"Failed to claim points")}}catch(e){p("Network error occurred")}finally{c(!1)}},disabled:l,className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 disabled:opacity-50 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",children:l?"Checking...":"Claim Points (if verified)"}),sn.jsx("button",{onClick:()=>{s(1),o(""),p(null)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Try Different Username"})]}),sn.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-4 mt-6",children:[sn.jsxs("h4",{className:"font-medium text-purple-900 mb-2 flex items-center space-x-2",children:[sn.jsx(Ur,{className:"w-4 h-4"}),sn.jsx("span",{children:"Maximize Your Instagram Earning Potential!"})]}),sn.jsxs("p",{className:"text-sm text-purple-700 mb-4",children:["While you wait for verification, explore our ",sn.jsx("strong",{children:"Influence Rewards"})," program for dynamic monthly points based on your follower count."]}),sn.jsx("button",{onClick:()=>{r(),window.location.href=Sn(x,{openInfluenceRewards:"true"})},className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",children:"Discover Influence Rewards"})]}),m&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:sn.jsx("p",{className:"text-sm text-red-700",children:m})})]})]})})}const En={free:{premium:{points:7500,gems:200},super:{points:15e3,gems:450}},premium:{super:{points:9e3,gems:275}},super:{}};function Pn({user:e,isOpen:t,onClose:r,onSuccess:n}){const[a,s]=u.useState(En),[i,o]=u.useState(""),[l,c]=u.useState("points"),[d,h]=u.useState(!1),[m,p]=u.useState(null),[x,f]=u.useState(!1);u.useEffect(()=>{t&&y()},[t]);const g=e=>{const t={...En,...e||{}};return Object.fromEntries(Object.entries(t).map(([e,t])=>[e.toLowerCase(),Object.fromEntries(Object.entries(t).map(([e,t])=>[e.toLowerCase(),t]))]))},y=async()=>{try{f(!0);const e=localStorage.getItem("authToken"),t=await fetch("/api/users/upgrade-costs",{credentials:"include",headers:e?{Authorization:`Bearer ${e}`}:void 0});if(!t.ok)throw new Error(`Failed to load upgrade costs: ${t.status}`);const r=await t.json();r&&"object"==typeof r&&!Array.isArray(r)?s(g(r)):s(g(En))}catch(e){s(g(En))}f(!1)};if(!t||!e)return null;const b=(e.user_tier||"free").toLowerCase(),v=a[b]||{},j=Object.keys(v).length>0,w=e=>{switch(e){case"super":return{name:"Super User",icon:Dt,color:"text-yellow-600",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",benefits:["2.0x point multiplier for all actions","1 proof drop required for Master Key","1,000 monthly Instagram points","Priority support","Exclusive events access","Advanced analytics"]};case"premium":return{name:"Premium User",icon:Rr,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200",benefits:["1.5x point multiplier for all actions","2 proof drops required for Master Key","750 monthly Instagram points","Priority support","Advanced analytics"]};default:return{name:"Free User",icon:Qr,color:"text-gray-600",bgColor:"bg-gray-50",borderColor:"border-gray-200",benefits:["1.0x point multiplier","5 proof drops required for Master Key","500 monthly Instagram points","Standard support"]}}},N=(t,r)=>{const n=v[t]?.[r];if(!n)return!1;return("points"===r?e.points_balance:e.gems_balance)>=n},_=w(b);return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:sn.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-6",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Rr,{className:"w-6 h-6 text-orange-600"}),sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Upgrade Your Tier"})]}),sn.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsxs("div",{className:"mb-6",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Current Tier"}),sn.jsx("div",{className:`border-2 ${_.borderColor} ${_.bgColor} rounded-lg p-4`,children:sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(_.icon,{className:`w-8 h-8 ${_.color}`}),sn.jsxs("div",{children:[sn.jsx("h4",{className:`text-lg font-semibold ${_.color}`,children:_.name}),sn.jsx("p",{className:"text-sm text-gray-600",children:"Your current membership level"})]})]})})]}),sn.jsxs("div",{className:"space-y-4",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Available Upgrades"}),!j&&!x&&sn.jsx("div",{className:"border border-dashed border-gray-300 rounded-lg p-6 text-center text-sm text-gray-500",children:"No higher tiers available right now. Check back later for new membership levels."}),x&&sn.jsx("div",{className:"border border-gray-200 rounded-lg p-6 text-center text-sm text-gray-500",children:"Loading upgrade options..."}),Object.keys(v).map(e=>{const t=e.toLowerCase(),r=w(t),n=v[e];return sn.jsx("div",{className:"border-2 rounded-lg p-6 cursor-pointer transition-all duration-200 "+(i===t?`${r.borderColor} ${r.bgColor}`:"border-gray-200 hover:border-gray-300"),onClick:()=>o(t),children:sn.jsxs("div",{className:"flex items-start justify-between",children:[sn.jsxs("div",{className:"flex-1",children:[sn.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[sn.jsx(r.icon,{className:`w-8 h-8 ${r.color}`}),sn.jsxs("div",{children:[sn.jsx("h4",{className:`text-lg font-semibold ${i===t?r.color:"text-gray-900"}`,children:r.name}),sn.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[sn.jsxs("div",{className:"flex items-center space-x-1",children:[sn.jsx(Tt,{className:"w-4 h-4 text-blue-600"}),sn.jsxs("span",{children:[n.points.toLocaleString()," points"]})]}),sn.jsx("span",{className:"text-gray-400",children:"or"}),sn.jsxs("div",{className:"flex items-center space-x-1",children:[sn.jsx(Kt,{className:"w-4 h-4 text-purple-600"}),sn.jsxs("span",{children:[n.gems," gems"]})]})]})]})]}),sn.jsx("div",{className:"space-y-2",children:r.benefits.map((e,t)=>sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(St,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),sn.jsx("span",{className:"text-sm text-gray-700",children:e})]},t))})]}),i===t&&sn.jsx("div",{className:"ml-4",children:sn.jsx(ot,{className:`w-6 h-6 ${r.color}`})})]})},e)})]}),i&&sn.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[sn.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Choose Payment Method"}),sn.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[sn.jsxs("button",{onClick:()=>c("points"),disabled:!N(i,"points"),className:`p-4 rounded-lg border-2 transition-colors ${"points"===l?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"} ${N(i,"points")?"":"opacity-50 cursor-not-allowed"}`,children:[sn.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[sn.jsx(Tt,{className:"w-5 h-5 text-blue-600"}),sn.jsx("span",{className:"font-medium",children:"Points"})]}),sn.jsx("p",{className:"text-lg font-bold text-blue-600",children:v[i]?.points.toLocaleString()}),sn.jsxs("p",{className:"text-xs text-gray-600",children:["Balance: ",e.points_balance.toLocaleString()]}),!N(i,"points")&&sn.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Insufficient balance"})]}),sn.jsxs("button",{onClick:()=>c("gems"),disabled:!N(i,"gems"),className:`p-4 rounded-lg border-2 transition-colors ${"gems"===l?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"} ${N(i,"gems")?"":"opacity-50 cursor-not-allowed"}`,children:[sn.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[sn.jsx(Kt,{className:"w-5 h-5 text-purple-600"}),sn.jsx("span",{className:"font-medium",children:"Gems"})]}),sn.jsx("p",{className:"text-lg font-bold text-purple-600",children:v[i]?.gems}),sn.jsxs("p",{className:"text-xs text-gray-600",children:["Balance: ",e.gems_balance]}),!N(i,"gems")&&sn.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Insufficient balance"})]})]})]}),m&&sn.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-lg p-3",children:sn.jsx("p",{className:"text-sm text-red-700",children:m})}),sn.jsxs("div",{className:"flex space-x-3 mt-6",children:[sn.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),sn.jsx("button",{onClick:async()=>{if(i){h(!0),p(null);try{const e=localStorage.getItem("authToken"),t=await fetch("/api/users/upgrade-tier",{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},credentials:"include",body:JSON.stringify({target_tier:i,payment_method:l})});if(t.ok)n(),r(),o("");else{const e=await t.json();p(e.error||"Upgrade failed")}}catch(e){p("Network error occurred")}finally{h(!1)}}},disabled:!i||!N(i,l)||d,className:"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",children:d?"Upgrading...":`Upgrade to ${i?w(i).name:""}`})]})]})})}function Tn({isOpen:e,onClose:t}){const[r,n]=u.useState(""),[a,s]=u.useState({content:[],drops:[],users:[]}),[i,o]=u.useState(!1),[l,c]=u.useState("all"),d=[{id:"content-demo-1",title:"Launch Campaign: Social Buzz",description:"Highlight reel from the recent product launch activation.",platform:"instagram",creator_name:"Demo Creator",share_price:12.5},{id:"content-demo-2",title:"Creator Toolkit Walkthrough",description:"Step-by-step guide on monetizing content in 30 days.",platform:"youtube",creator_name:"Creator Collective",share_price:18}],h=[{id:"drop-demo-1",title:"Product Review Blitz",description:"Create authentic reviews for the new premium bundle.",gem_reward_base:120,key_cost:4,status:"active"},{id:"drop-demo-2",title:"Launch Day Engagement Sprint",description:"Boost engagement metrics during launch weekend.",gem_reward_base:95,key_cost:3,status:"active"}],m=[{id:"user-demo-1",username:"demo_creator",display_name:"Demo Creator",user_type:"creator",follower_count:42e3},{id:"user-demo-2",username:"growth_analyst",display_name:"Growth Analyst",user_type:"advertiser",follower_count:12500}],p=e=>{const t=e.toLowerCase();return{content:d.filter(e=>e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)),drops:h.filter(e=>e.title.toLowerCase().includes(t)),users:m.filter(e=>e.username.toLowerCase().includes(t)||e.display_name.toLowerCase().includes(t))}};u.useEffect(()=>{if(r.length>=2){const e=setTimeout(()=>{x()},300);return()=>clearTimeout(e)}s({content:[],drops:[],users:[]})},[r]);const x=async()=>{if(!(r.trim().length<2)){o(!0);try{const e=await fetch(`/api/search?q=${encodeURIComponent(r)}`,{credentials:"include"});if(e.ok){const t=await e.json();s(t)}else s(p(r))}catch(e){s(p(r))}finally{o(!1)}}};if(!e)return null;const f=(()=>{switch(l){case"content":return{content:a.content,drops:[],users:[]};case"drops":return{content:[],drops:a.drops,users:[]};case"users":return{content:[],drops:[],users:a.users};default:return a}})(),g=(a.content?.length||0)+(a.drops?.length||0)+(a.users?.length||0);return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center pt-20 z-50",children:sn.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl mx-4 max-h-[80vh] overflow-hidden",children:[sn.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[sn.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Search Promorang"}),sn.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-5 h-5"})})]}),sn.jsx("div",{className:"p-6 border-b border-gray-200",children:sn.jsxs("div",{className:"relative",children:[sn.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),sn.jsx("input",{type:"text",placeholder:"Search for content, drops, users...",value:r,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-lg",autoFocus:!0}),i&&sn.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:sn.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-orange-500 border-t-transparent rounded-full"})})]})}),r.length>=2&&g>0&&sn.jsx("div",{className:"px-6 py-3 border-b border-gray-200",children:sn.jsx("div",{className:"flex space-x-4",children:[{id:"all",label:"All",count:g},{id:"content",label:"Content",count:a.content?.length||0},{id:"drops",label:"Drops",count:a.drops?.length||0},{id:"users",label:"Users",count:a.users?.length||0}].map(e=>sn.jsxs("button",{onClick:()=>c(e.id),className:"px-3 py-2 rounded-lg text-sm font-medium flex items-center space-x-2 "+(l===e.id?"bg-orange-100 text-orange-700":"text-gray-600 hover:bg-gray-100"),children:[sn.jsx("span",{children:e.label}),sn.jsx("span",{className:"bg-gray-200 text-gray-600 px-2 py-1 rounded-full text-xs",children:e.count})]},e.id))})}),sn.jsx("div",{className:"max-h-96 overflow-y-auto",children:r.length<2?sn.jsxs("div",{className:"p-12 text-center",children:[sn.jsx(Er,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Search Promorang"}),sn.jsx("p",{className:"text-gray-600",children:"Find content, drops, and users across the platform"})]}):0!==g||i?sn.jsxs("div",{className:"p-6 space-y-6",children:[f.content?.length>0&&sn.jsxs("div",{children:[sn.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[sn.jsx(Bt,{className:"w-5 h-5 mr-2 text-orange-600"}),"Content (",f.content.length,")"]}),sn.jsx("div",{className:"space-y-3",children:f.content.map(e=>sn.jsxs(Ve,{to:`/content/${e.id}`,onClick:t,className:"flex items-center space-x-4 p-4 hover:bg-gray-50 rounded-lg transition-colors",children:[sn.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:sn.jsx(Rr,{className:"w-6 h-6 text-orange-600"})}),sn.jsxs("div",{className:"flex-1 min-w-0",children:[sn.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:e.title}),sn.jsx("p",{className:"text-sm text-gray-600 truncate",children:e.description}),sn.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[sn.jsx("span",{className:"text-xs text-gray-500 capitalize",children:e.platform}),sn.jsxs("span",{className:"text-xs text-gray-500",children:["by ",e.creator_name]}),sn.jsxs("span",{className:"text-xs font-medium text-green-600",children:["$",e.share_price,"/share"]})]})]})]},e.id))})]}),f.drops?.length>0&&sn.jsxs("div",{children:[sn.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[sn.jsx(Qr,{className:"w-5 h-5 mr-2 text-purple-600"}),"Drops (",f.drops.length,")"]}),sn.jsx("div",{className:"space-y-3",children:f.drops.map(e=>sn.jsxs(Ve,{to:"/earn",onClick:t,className:"flex items-center space-x-4 p-4 hover:bg-gray-50 rounded-lg transition-colors",children:[sn.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:sn.jsx(Rt,{className:"w-6 h-6 text-purple-600"})}),sn.jsxs("div",{className:"flex-1 min-w-0",children:[sn.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:e.title}),sn.jsx("p",{className:"text-sm text-gray-600 truncate",children:e.description}),sn.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[sn.jsx("span",{className:"text-xs text-gray-500 capitalize",children:(e.drop_type||"engagement").replace("_"," ")}),sn.jsxs("span",{className:"text-xs text-gray-500",children:["by ",e.creator_name||"Promorang Team"]}),sn.jsxs("span",{className:"text-xs font-medium text-purple-600",children:[e.gem_reward_base??0," gems"]}),sn.jsxs("span",{className:"text-xs text-gray-500",children:[e.current_participants??0," participants"]})]})]})]},e.id))})]}),f.users?.length>0&&sn.jsxs("div",{children:[sn.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[sn.jsx(Hr,{className:"w-5 h-5 mr-2 text-blue-600"}),"Users (",f.users.length,")"]}),sn.jsx("div",{className:"space-y-3",children:f.users.map(e=>sn.jsxs(Ve,{to:`/users/${e.username||e.id}`,onClick:t,className:"flex items-center space-x-4 p-4 hover:bg-gray-50 rounded-lg transition-colors",children:[sn.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden",children:sn.jsx("img",{src:e.avatar_url||"/default-avatar.png",alt:e.display_name,className:"w-full h-full object-cover"})}),sn.jsxs("div",{className:"flex-1 min-w-0",children:[sn.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:e.display_name||"Anonymous User"}),sn.jsxs("p",{className:"text-sm text-gray-600",children:["@",e.username||"user"]}),sn.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[sn.jsxs("span",{className:"text-xs text-gray-500",children:["Level ",e.level]}),sn.jsxs("span",{className:"text-xs text-gray-500 capitalize",children:[e.user_tier," tier"]}),sn.jsxs("span",{className:"text-xs text-gray-500",children:[e.follower_count," followers"]})]})]})]},e.id))})]})]}):sn.jsxs("div",{className:"p-12 text-center",children:[sn.jsx(Er,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No results found"}),sn.jsx("p",{className:"text-gray-600",children:"Try different keywords or browse categories"})]})})]})})}function An({user:e,isOpen:t,onClose:r,onPurchase:n}){const[a,s]=u.useState(!1),[i,o]=u.useState("upgrades"),[l,c]=u.useState([]);u.useEffect(()=>{t&&e&&d()},[t,e]);const d=async()=>{try{const e=await fetch("/api/users/gold-purchases",{credentials:"include"});if(e.ok){const t=await e.json();c(t)}}catch(e){}},h=e=>{const t=document.createElement("div");t.className="fixed top-4 right-4 bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 animate-pulse",t.innerHTML=`\n      <div class="flex items-center space-x-3">\n        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">\n          <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>\n        </svg>\n        <div>\n          <div class="font-bold">Purchase Successful!</div>\n          <div class="text-sm">${e} activated</div>\n        </div>\n      </div>\n    `,document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},3e3)},m=e=>{const t={crown:Dt,zap:Qr,star:Rr,shield:Mr,award:ct}[e]||Rr;return sn.jsx(t,{className:"w-6 h-6"})},p=[{id:"upgrades",name:"Tier Upgrades",icon:Dt},{id:"multipliers",name:"Boosts",icon:Qr},{id:"profile",name:"Profile",icon:ct}],x=[{id:"premium_upgrade",name:"Premium Tier Upgrade",description:"Upgrade to Premium tier with 1.5x points multiplier and exclusive perks",icon:"crown",category:"upgrades",gold_cost:500,effect_data:{tier:"premium"}},{id:"super_upgrade",name:"Super Tier Upgrade",description:"Upgrade to Super tier with 2x points multiplier and maximum benefits",icon:"crown",category:"upgrades",gold_cost:1e3,effect_data:{tier:"super"}},{id:"key_multiplier_24h",name:"24h Key Multiplier",description:"Double key earnings from all actions for 24 hours",icon:"zap",category:"multipliers",gold_cost:200,duration:"24 hours",effect_data:{multiplier:2,duration_hours:24,type:"key_earnings"}},{id:"xp_boost_7d",name:"7-Day XP Boost",description:"Triple XP gains from all activities for 7 days",icon:"star",category:"multipliers",gold_cost:300,duration:"7 days",effect_data:{multiplier:3,duration_hours:168,type:"xp_earnings"}},{id:"golden_badge",name:"Golden Badge",description:"Display a prestigious golden badge on your profile",icon:"award",category:"profile",gold_cost:150,effect_data:{badge_type:"golden",permanent:!0}},{id:"profile_boost",name:"Profile Boost",description:"Enhanced visibility in leaderboards and search for 30 days",icon:"shield",category:"profile",gold_cost:250,duration:"30 days",effect_data:{boost_type:"visibility",duration_hours:720}}].filter(e=>e.category===i);return t?sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:sn.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[sn.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-amber-500 p-6 text-white",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(Dt,{className:"w-8 h-8"}),sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-2xl font-bold",children:"Gold Shop"}),sn.jsx("p",{className:"text-yellow-100",children:"Spend your gold on exclusive upgrades and boosts"})]})]}),sn.jsx("button",{onClick:r,className:"text-white hover:text-yellow-200 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsx("div",{className:"mt-4 bg-white/20 rounded-xl p-4",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("span",{className:"text-yellow-100",children:"Your Gold Balance"}),sn.jsx("span",{className:"text-2xl font-bold",children:e?.gold_collected||0})]})})]}),sn.jsx("div",{className:"border-b border-gray-200 px-6",children:sn.jsx("div",{className:"flex space-x-8 py-4",children:p.map(e=>{const t=e.icon;return sn.jsxs("button",{onClick:()=>o(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-lg font-medium text-sm transition-colors "+(i===e.id?"bg-yellow-100 text-yellow-700":"text-gray-600 hover:text-gray-900"),children:[sn.jsx(t,{className:"w-4 h-4"}),sn.jsx("span",{children:e.name})]},e.id)})})}),sn.jsx("div",{className:"p-6 max-h-96 overflow-y-auto",children:sn.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(t=>{const r=(e=>l.some(t=>t.item_name===e.name&&(!t.expires_at||new Date(t.expires_at)>new Date)))(t),i=(t=>e&&e.gold_collected>=t.gold_cost)(t);return sn.jsx("div",{className:"p-6 rounded-2xl border transition-all duration-200 "+(r?"border-green-200 bg-green-50":i?"border-gray-200 bg-white hover:shadow-md":"border-gray-200 bg-gray-50"),children:sn.jsxs("div",{className:"flex items-start space-x-4",children:[sn.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center "+(r?"bg-green-100 text-green-600":"bg-gradient-to-r from-yellow-500 to-amber-500 text-white"),children:r?sn.jsx(jt,{className:"w-6 h-6"}):m(t.icon)}),sn.jsxs("div",{className:"flex-1",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-2",children:[sn.jsx("h3",{className:"font-semibold text-gray-900",children:t.name}),t.duration&&sn.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:t.duration})]}),sn.jsx("p",{className:"text-sm text-gray-600 mb-4",children:t.description}),sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Dt,{className:"w-4 h-4 text-yellow-600"}),sn.jsxs("span",{className:"font-semibold text-yellow-700",children:[t.gold_cost," Gold"]})]}),sn.jsx("button",{onClick:()=>(async t=>{if(e&&!(e.gold_collected<t.gold_cost)){s(!0);try{const e=await fetch("/api/users/gold-purchase",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({item_type:t.category,item_name:t.name,gold_cost:t.gold_cost,effect_data:JSON.stringify(t.effect_data)})});if(e.ok)n(),d(),h(t.name);else{const t=await e.json();alert(t.error||"Purchase failed")}}catch(r){alert("Purchase failed")}finally{s(!1)}}})(t),disabled:a||r||!i,className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 "+(r?"bg-green-100 text-green-700 cursor-not-allowed":i?"bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-600 hover:to-amber-600 text-white":"bg-gray-200 text-gray-500 cursor-not-allowed"),children:a?"Processing...":r?"Owned":i?"Purchase":"Not Enough Gold"})]})]})]})},t.id)})})})]})}):null}function Mn({user:e,isOpen:t,onClose:r}){const[n,a]=u.useState([]),[s,i]=u.useState(!0),[o,l]=u.useState("all");u.useEffect(()=>{t&&e&&c()},[t,e]);const c=async()=>{try{const e=await fetch("/api/users/achievements",{credentials:"include"});if(e.ok){const t=await e.json();a(Array.isArray(t)?t:[])}else a(d())}catch(e){a(d())}finally{i(!1)}},d=()=>[{id:1,name:"First Steps",description:"Complete your first drop application",icon:"star",category:"progression",criteria_type:"count",criteria_value:1,criteria_field:"applications",gold_reward:5,xp_reward:100,is_completed:!1,progress:0},{id:2,name:"Content Creator",description:"Share your first piece of content",icon:"file-text",category:"creation",criteria_type:"count",criteria_value:1,criteria_field:"content_pieces",gold_reward:10,xp_reward:200,is_completed:!1,progress:0},{id:3,name:"Social Butterfly",description:"Reach 100 followers",icon:"users",category:"social",criteria_type:"count",criteria_value:100,criteria_field:"followers",gold_reward:25,xp_reward:500,is_completed:!1,progress:e?.follower_count||0},{id:4,name:"Level Up",description:"Reach level 5",icon:"arrow-up",category:"progression",criteria_type:"level",criteria_value:5,criteria_field:"level",gold_reward:15,xp_reward:300,is_completed:(e?.level||0)>=5,progress:e?.level||0},{id:5,name:"Big Spender",description:"Earn 1000 points",icon:"coins",category:"earning",criteria_type:"count",criteria_value:1e3,criteria_field:"points",gold_reward:20,xp_reward:400,is_completed:(e?.points_balance||0)>=1e3,progress:e?.points_balance||0},{id:6,name:"Master Creator",description:"Create 5 pieces of content",icon:"crown",category:"creation",criteria_type:"count",criteria_value:5,criteria_field:"content_pieces",gold_reward:50,xp_reward:1e3,is_completed:!1,progress:0}],h=(e,t)=>{const r=document.createElement("div");r.className="fixed top-4 right-4 bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 animate-pulse",r.innerHTML=`\n      <div class="flex items-center space-x-3">\n        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">\n          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>\n        </svg>\n        <div>\n          <div class="font-bold">Achievement Unlocked!</div>\n          <div class="text-sm">+${e} Gold, +${t} XP</div>\n        </div>\n      </div>\n    `,document.body.appendChild(r),setTimeout(()=>{document.body.contains(r)&&document.body.removeChild(r)},4e3)},m=e=>{const t={star:Rr,"file-text":ct,zap:qr,heart:Rr,calendar:ct,crown:qr,trophy:qr,"arrow-up":Rr,coins:ct,users:Rr}[e]||Rr;return sn.jsx(t,{className:"w-6 h-6"})},p=e=>({engagement:"from-blue-500 to-cyan-500",creation:"from-purple-500 to-pink-500",earning:"from-green-500 to-emerald-500",progression:"from-orange-500 to-red-500",currency:"from-yellow-500 to-amber-500",social:"from-indigo-500 to-purple-500"}[e]||"from-gray-500 to-slate-500"),x=n&&n.length>0?["all",...new Set(n.map(e=>e.category))]:["all"],f=n&&n.length>0?"all"===o?n:n.filter(e=>e.category===o):[],g=n&&n.length>0?n.filter(e=>e.is_completed).length:0,y=n&&n.length>0?n.filter(e=>e.is_completed).reduce((e,t)=>e+t.gold_reward,0):0;return t?sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:sn.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[sn.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 p-6 text-white",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(qr,{className:"w-8 h-8"}),sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-2xl font-bold",children:"Achievements"}),sn.jsx("p",{className:"text-yellow-100",children:"Track your progress and earn rewards"})]})]}),sn.jsx("button",{onClick:r,className:"text-white hover:text-yellow-200 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6",children:[sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"text-2xl font-bold",children:g}),sn.jsx("div",{className:"text-yellow-100 text-sm",children:"Completed"})]}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"text-2xl font-bold",children:n?.length||0}),sn.jsx("div",{className:"text-yellow-100 text-sm",children:"Total"})]}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"text-2xl font-bold",children:y}),sn.jsx("div",{className:"text-yellow-100 text-sm",children:"Gold Earned"})]})]})]}),sn.jsx("div",{className:"border-b border-gray-200 px-6",children:sn.jsx("div",{className:"flex space-x-8 overflow-x-auto py-4",children:x.map(e=>sn.jsx("button",{onClick:()=>l(e),className:"px-4 py-2 rounded-lg font-medium text-sm whitespace-nowrap transition-colors "+(o===e?"bg-orange-100 text-orange-700":"text-gray-600 hover:text-gray-900"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}),sn.jsx("div",{className:"p-6 max-h-96 overflow-y-auto",children:s?sn.jsx("div",{className:"flex items-center justify-center h-32",children:sn.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full"})}):sn.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f&&f.length>0?f.map(e=>sn.jsxs("div",{className:"relative p-6 rounded-2xl border transition-all duration-200 "+(e.is_completed?"border-green-200 bg-green-50":"border-gray-200 bg-white hover:shadow-md"),children:[sn.jsxs("div",{className:"flex items-start space-x-4",children:[sn.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center bg-gradient-to-r ${p(e.category)} text-white`,children:m(e.icon)}),sn.jsxs("div",{className:"flex-1",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-2",children:[sn.jsx("h3",{className:"font-semibold text-gray-900",children:e.name}),e.is_completed&&sn.jsx(St,{className:"w-5 h-5 text-green-600"})]}),sn.jsx("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),!e.is_completed&&sn.jsxs("div",{className:"mb-3",children:[sn.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[sn.jsx("span",{children:"Progress"}),sn.jsxs("span",{children:[e.progress,"/",e.criteria_value]})]}),sn.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:sn.jsx("div",{className:`h-2 rounded-full bg-gradient-to-r ${p(e.category)}`,style:{width:`${Math.min(100,e.progress/e.criteria_value*100)}%`}})})]}),sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[e.gold_reward>0&&sn.jsxs("div",{className:"flex items-center space-x-1 text-yellow-600",children:[sn.jsx(Vt,{className:"w-4 h-4"}),sn.jsxs("span",{children:[e.gold_reward," Gold"]})]}),e.xp_reward>0&&sn.jsxs("div",{className:"flex items-center space-x-1 text-blue-600",children:[sn.jsx(Rr,{className:"w-4 h-4"}),sn.jsxs("span",{children:[e.xp_reward," XP"]})]})]}),e.progress>=e.criteria_value&&!e.is_completed&&sn.jsx("button",{onClick:()=>(async e=>{try{const t=await fetch(`/api/users/achievements/${e}/claim`,{method:"POST",credentials:"include"});if(t.ok){const e=await t.json();h(e.gold_reward,e.xp_reward),c()}}catch(t){}})(e.id),className:"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200",children:"Claim"})]})]})]}),e.progress<e.criteria_value&&!e.is_completed&&sn.jsx("div",{className:"absolute inset-0 bg-gray-100 bg-opacity-50 rounded-2xl flex items-center justify-center",children:sn.jsx(sr,{className:"w-8 h-8 text-gray-400"})})]},e.id)):sn.jsxs("div",{className:"col-span-full text-center py-12",children:[sn.jsx(qr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),sn.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Achievements Yet"}),sn.jsx("p",{className:"text-gray-600",children:"Complete tasks and reach milestones to unlock achievements!"})]})})})]})}):null}var Dn=function(e,t){return(Dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function In(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Dn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var Rn=function(){return Rn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Rn.apply(this,arguments)};function $n(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}function Ln(e,t,r,n){var a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(i=(s<3?a(i):s>3?a(t,r,i):a(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function Fn(e,t){return function(r,n){t(r,n,e)}}function zn(e,t,r,n,a,s){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,l=n.kind,c="getter"===l?"get":"setter"===l?"set":"value",d=!t&&e?n.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),h=!1,m=r.length-1;m>=0;m--){var p={};for(var x in n)p[x]="access"===x?{}:n[x];for(var x in n.access)p.access[x]=n.access[x];p.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(i(e||null))};var f=(0,r[m])("accessor"===l?{get:u.get,set:u.set}:u[c],p);if("accessor"===l){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=i(f.get))&&(u.get=o),(o=i(f.set))&&(u.set=o),(o=i(f.init))&&a.unshift(o)}else(o=i(f))&&("field"===l?a.unshift(o):u[c]=o)}d&&Object.defineProperty(d,n.name,u),h=!0}function Un(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function Bn(e){return"symbol"==typeof e?e:"".concat(e)}function qn(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function Wn(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function Kn(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(S$){s(S$)}}function o(e){try{l(n.throw(e))}catch(S$){s(S$)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})}function Vn(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(a=s.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(S$){o=[6,S$],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Hn=Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function Gn(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||Hn(t,e,r)}function Yn(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jn(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,s=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(a)throw a.error}}return i}function Zn(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Jn(arguments[t]));return e}function Qn(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,a++)n[a]=s[i];return n}function Xn(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}function ea(e){return this instanceof ea?(this.v=e,this):new ea(e)}function ta(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,a=r.apply(e,t||[]),s=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),n[Symbol.asyncIterator]=function(){return this},n;function i(e,t){a[e]&&(n[e]=function(t){return new Promise(function(r,n){s.push([e,t,r,n])>1||o(e,t)})},t&&(n[e]=t(n[e])))}function o(e,t){try{(r=a[e](t)).value instanceof ea?Promise.resolve(r.value.v).then(l,c):d(s[0][2],r)}catch(S$){d(s[0][3],S$)}var r}function l(e){o("next",e)}function c(e){o("throw",e)}function d(e,t){e(t),s.shift(),s.length&&o(s[0][0],s[0][1])}}function ra(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,a){t[n]=e[n]?function(t){return(r=!r)?{value:ea(e[n](t)),done:!1}:a?a(t):t}:a}}function na(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=Yn(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,a){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,a,(t=e[r](t)).done,t.value)})}}}function aa(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var sa=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},ia=function(e){return(ia=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)};function oa(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=ia(e),n=0;n<r.length;n++)"default"!==r[n]&&Hn(t,e,r[n]);return sa(t,e),t}function la(e){return e&&e.__esModule?e:{default:e}}function ca(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function da(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r}function ua(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function ha(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if("function"!=typeof n)throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(S$){return Promise.reject(S$)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var ma="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function pa(e){function t(t){e.error=e.hasError?new ma(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,n=0;return function a(){for(;r=e.stack.pop();)try{if(!r.async&&1===n)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(a,function(e){return t(e),a()})}else n|=1}catch(S$){t(S$)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function xa(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,n,a,s){return r?t?".jsx":".js":!n||a&&s?n+a+"."+s.toLowerCase()+"js":e}):e}const fa={__extends:In,__assign:Rn,__rest:$n,__decorate:Ln,__param:Fn,__esDecorate:zn,__runInitializers:Un,__propKey:Bn,__setFunctionName:qn,__metadata:Wn,__awaiter:Kn,__generator:Vn,__createBinding:Hn,__exportStar:Gn,__values:Yn,__read:Jn,__spread:Zn,__spreadArrays:Qn,__spreadArray:Xn,__await:ea,__asyncGenerator:ta,__asyncDelegator:ra,__asyncValues:na,__makeTemplateObject:aa,__importStar:oa,__importDefault:la,__classPrivateFieldGet:ca,__classPrivateFieldSet:da,__classPrivateFieldIn:ua,__addDisposableResource:ha,__disposeResources:pa,__rewriteRelativeImportExtension:xa},ga=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:ha,get __assign(){return Rn},__asyncDelegator:ra,__asyncGenerator:ta,__asyncValues:na,__await:ea,__awaiter:Kn,__classPrivateFieldGet:ca,__classPrivateFieldIn:ua,__classPrivateFieldSet:da,__createBinding:Hn,__decorate:Ln,__disposeResources:pa,__esDecorate:zn,__exportStar:Gn,__extends:In,__generator:Vn,__importDefault:la,__importStar:oa,__makeTemplateObject:aa,__metadata:Wn,__param:Fn,__propKey:Bn,__read:Jn,__rest:$n,__rewriteRelativeImportExtension:xa,__runInitializers:Un,__setFunctionName:qn,__spread:Zn,__spreadArray:Xn,__spreadArrays:Qn,__values:Yn,default:fa},Symbol.toStringTag,{value:"Module"}));class ya extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class ba extends ya{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class va extends ya{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ja extends ya{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var wa,Na;(Na=wa||(wa={})).Any="any",Na.ApNortheast1="ap-northeast-1",Na.ApNortheast2="ap-northeast-2",Na.ApSouth1="ap-south-1",Na.ApSoutheast1="ap-southeast-1",Na.ApSoutheast2="ap-southeast-2",Na.CaCentral1="ca-central-1",Na.EuCentral1="eu-central-1",Na.EuWest1="eu-west-1",Na.EuWest2="eu-west-2",Na.EuWest3="eu-west-3",Na.SaEast1="sa-east-1",Na.UsEast1="us-east-1",Na.UsWest1="us-west-1",Na.UsWest2="us-west-2";class _a{constructor(e,{headers:t={},customFetch:r,region:n=wa.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Kn(this,arguments,void 0,function*(e,t={}){var r;try{const{headers:n,method:a,body:s,signal:i}=t;let o={},{region:l}=t;l||(l=this.region);const c=new URL(`${this.url}/${e}`);let d;l&&"any"!==l&&(o["x-region"]=l,c.searchParams.set("forceFunctionRegion",l)),s&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)?"undefined"!=typeof Blob&&s instanceof Blob||s instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",d=s):"string"==typeof s?(o["Content-Type"]="text/plain",d=s):"undefined"!=typeof FormData&&s instanceof FormData?d=s:(o["Content-Type"]="application/json",d=JSON.stringify(s)):d=s;const u=yield this.fetch(c.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:d,signal:i}).catch(e=>{if("AbortError"===e.name)throw e;throw new ba(e)}),h=u.headers.get("x-relay-error");if(h&&"true"===h)throw new va(u);if(!u.ok)throw new ja(u);let m,p=(null!==(r=u.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return m="application/json"===p?yield u.json():"application/octet-stream"===p||"application/pdf"===p?yield u.blob():"text/event-stream"===p?u:"multipart/form-data"===p?yield u.formData():yield u.text(),{data:m,error:null,response:u}}catch(n){return n instanceof Error&&"AbortError"===n.name?{data:null,error:new ba(n)}:{data:null,error:n,response:n instanceof ja||n instanceof va?n.context:void 0}}})}}var ka={};const Sa=a(ga);var Ca,Oa,Ea,Pa,Ta,Aa,Ma,Da={},Ia={},Ra={},$a={},La={},Fa={};function za(){if(Ca)return Fa;Ca=1,Object.defineProperty(Fa,"__esModule",{value:!0});class e extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}return Fa.default=e,Fa}function Ua(){if(Oa)return La;Oa=1,Object.defineProperty(La,"__esModule",{value:!0});const e=Sa.__importDefault(za());return La.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(t,r){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async t=>{var r,n,a,s;let i=null,o=null,l=null,c=t.status,d=t.statusText;if(t.ok){if("HEAD"!==this.method){const e=await t.text();""===e||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(r=this.headers.get("Accept"))||void 0===r?void 0:r.includes("application/vnd.pgrst.plan+text"))?e:JSON.parse(e))}const e=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),s=null===(a=t.headers.get("content-range"))||void 0===a?void 0:a.split("/");e&&s&&s.length>1&&(l=parseInt(s[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,d="Not Acceptable"):o=1===o.length?o[0]:null)}else{const r=await t.text();try{i=JSON.parse(r),Array.isArray(i)&&404===t.status&&(o=[],i=null,c=200,d="OK")}catch(u){404===t.status&&""===r?(c=204,d="No Content"):i={message:r}}if(i&&this.isMaybeSingle&&(null===(s=null==i?void 0:i.details)||void 0===s?void 0:s.includes("0 rows"))&&(i=null,c=200,d="OK"),i&&this.shouldThrowOnError)throw new e.default(i)}return{error:i,data:o,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,r,n;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(r=null==e?void 0:e.stack)&&void 0!==r?r:""}`,hint:"",code:`${null!==(n=null==e?void 0:e.code)&&void 0!==n?n:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,r)}returns(){return this}overrideTypes(){return this}},La}function Ba(){if(Ea)return $a;Ea=1,Object.defineProperty($a,"__esModule",{value:!0});const e=Sa.__importDefault(Ua());class t extends e.default{select(e){let t=!1;const r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}={}){const s=a?`${a}.order`:"order",i=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const a=void 0===n?"offset":`${n}.offset`,s=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(s,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:s="text"}={}){var i;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}return $a.default=t,$a}function qa(){if(Pa)return Ra;Pa=1,Object.defineProperty(Ra,"__esModule",{value:!0});const e=Sa.__importDefault(Ba()),t=new RegExp("[,()]");class r extends e.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,r){const n=Array.from(new Set(r)).map(e=>"string"==typeof e&&t.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let a="";"plain"===n?a="pl":"phrase"===n?a="ph":"websearch"===n&&(a="w");const s=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}return Ra.default=r,Ra}function Wa(){if(Ta)return Ia;Ta=1,Object.defineProperty(Ia,"__esModule",{value:!0});const e=Sa.__importDefault(qa());return Ia.default=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(t,r){const{head:n=!1,count:a}=null!=r?r:{},s=n?"HEAD":"GET";let i=!1;const o=(null!=t?t:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",o),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var a;if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(e.length>0){const t=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:s=!0}={}){var i;if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),void 0!==r&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(e.length>0){const t=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(t,{count:r}={}){var n;return r&&this.headers.append("Prefer",`count=${r}`),new e.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete({count:t}={}){var r;return t&&this.headers.append("Prefer",`count=${t}`),new e.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}},Ia}var Ka=function(){if(Ma)return ka;Ma=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.PostgrestError=ka.PostgrestBuilder=ka.PostgrestTransformBuilder=ka.PostgrestFilterBuilder=ka.PostgrestQueryBuilder=ka.PostgrestClient=void 0;const e=Sa,t=e.__importDefault(function(){if(Aa)return Da;Aa=1,Object.defineProperty(Da,"__esModule",{value:!0});const e=Sa,t=e.__importDefault(Wa()),r=e.__importDefault(qa());class n{constructor(e,{headers:t={},schema:r,fetch:n}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=n}from(e){const r=new URL(`${this.url}/${e}`);return new t.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new n(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:a=!1,count:s}={}){var i;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||a?(o=n?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(o="POST",c=t);const d=new Headers(this.headers);return s&&d.set("Prefer",`count=${s}`),new r.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}return Da.default=n,Da}());ka.PostgrestClient=t.default;const r=e.__importDefault(Wa());ka.PostgrestQueryBuilder=r.default;const n=e.__importDefault(qa());ka.PostgrestFilterBuilder=n.default;const a=e.__importDefault(Ba());ka.PostgrestTransformBuilder=a.default;const s=e.__importDefault(Ua());ka.PostgrestBuilder=s.default;const i=e.__importDefault(za());return ka.PostgrestError=i.default,ka.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:s.default,PostgrestError:i.default},ka}();const Va=n(Ka),Ha=r({__proto__:null,default:Va},[Ka]),{PostgrestClient:Ga,PostgrestQueryBuilder:Ya,PostgrestFilterBuilder:Ja,PostgrestTransformBuilder:Za,PostgrestBuilder:Qa,PostgrestError:Xa}=Va||Ha;class es{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){const e=process.versions;if(e&&e.node){const t=e.node,r=parseInt(t.replace(/^v/,"").split(".")[0]);return r>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const ts=1e4;var rs,ns,as,ss,is,os,ls,cs,ds,us,hs;(ns=rs||(rs={}))[ns.connecting=0]="connecting",ns[ns.open=1]="open",ns[ns.closing=2]="closing",ns[ns.closed=3]="closed",(ss=as||(as={})).closed="closed",ss.errored="errored",ss.joined="joined",ss.joining="joining",ss.leaving="leaving",(os=is||(is={})).close="phx_close",os.error="phx_error",os.join="phx_join",os.reply="phx_reply",os.leave="phx_leave",os.access_token="access_token",(ls||(ls={})).websocket="websocket",(ds=cs||(cs={})).Connecting="connecting",ds.Open="open",ds.Closing="closing",ds.Closed="closed";class ms{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),a=t.getUint8(2);let s=this.HEADER_LENGTH+2;const i=r.decode(e.slice(s,s+n));s+=n;const o=r.decode(e.slice(s,s+a));s+=a;return{ref:null,topic:i,event:o,payload:JSON.parse(r.decode(e.slice(s,e.byteLength)))}}}class ps{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(hs=us||(us={})).abstime="abstime",hs.bool="bool",hs.date="date",hs.daterange="daterange",hs.float4="float4",hs.float8="float8",hs.int2="int2",hs.int4="int4",hs.int4range="int4range",hs.int8="int8",hs.int8range="int8range",hs.json="json",hs.jsonb="jsonb",hs.money="money",hs.numeric="numeric",hs.oid="oid",hs.reltime="reltime",hs.text="text",hs.time="time",hs.timestamp="timestamp",hs.timestamptz="timestamptz",hs.timetz="timetz",hs.tsrange="tsrange",hs.tstzrange="tstzrange";const xs=(e,t,r={})=>{var n;const a=null!==(n=r.skipTypes)&&void 0!==n?n:[];return t?Object.keys(t).reduce((r,n)=>(r[n]=fs(n,e,t,a),r),{}):{}},fs=(e,t,r,n)=>{const a=t.find(t=>t.name===e),s=null==a?void 0:a.type,i=r[e];return s&&!n.includes(s)?gs(s,i):ys(i)},gs=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return ws(t,r)}switch(e){case us.bool:return bs(t);case us.float4:case us.float8:case us.int2:case us.int4:case us.int8:case us.numeric:case us.oid:return vs(t);case us.json:case us.jsonb:return js(t);case us.timestamp:return Ns(t);case us.abstime:case us.date:case us.daterange:case us.int4range:case us.int8range:case us.money:case us.reltime:case us.text:case us.time:case us.timestamptz:case us.timetz:case us.tsrange:case us.tstzrange:default:return ys(t)}},ys=e=>e,bs=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},vs=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},js=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},ws=(e,t)=>{if("string"!=typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const s=e.slice(1,r);try{n=JSON.parse("["+s+"]")}catch(a){n=s?s.split(","):[]}return n.map(e=>gs(t,e))}return e},Ns=e=>"string"==typeof e?e.replace(" ","T"):e,_s=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class ks{constructor(e,t,r={},n=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ss,Cs,Os,Es,Ps,Ts,As,Ms;(Cs=Ss||(Ss={})).SYNC="sync",Cs.JOIN="join",Cs.LEAVE="leave";class Ds{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ds.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=Ds.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],n()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Ds.syncDiff(this.state,e,t,r),n())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){const a=this.cloneDeep(e),s=this.transformState(t),i={},o={};return this.map(a,(e,t)=>{s[e]||(o[e]=t)}),this.map(s,(e,t)=>{const r=a[e];if(r){const n=t.map(e=>e.presence_ref),a=r.map(e=>e.presence_ref),s=t.filter(e=>a.indexOf(e.presence_ref)<0),l=r.filter(e=>n.indexOf(e.presence_ref)<0);s.length>0&&(i[e]=s),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:o},r,n)}static syncDiff(e,t,r,n){const{joins:a,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(a,(t,n)=>{var a;const s=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(n),s.length>0){const r=e[t].map(e=>e.presence_ref),n=s.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...n)}r(t,s,n)}),this.map(s,(t,r)=>{let a=e[t];if(!a)return;const s=r.map(e=>e.presence_ref);a=a.filter(e=>s.indexOf(e.presence_ref)<0),e[t]=a,n(t,a,r),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(Es=Os||(Os={})).ALL="*",Es.INSERT="INSERT",Es.UPDATE="UPDATE",Es.DELETE="DELETE",(Ts=Ps||(Ps={})).BROADCAST="broadcast",Ts.PRESENCE="presence",Ts.POSTGRES_CHANGES="postgres_changes",Ts.SYSTEM="system",(Ms=As||(As={})).SUBSCRIBED="SUBSCRIBED",Ms.TIMED_OUT="TIMED_OUT",Ms.CLOSED="CLOSED",Ms.CHANNEL_ERROR="CHANNEL_ERROR";class Is{constructor(e,t={config:{}},r){var n,a;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=as.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ks(this,is.join,this.params,this.timeout),this.rejoinTimer=new ps(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=as.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=as.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=as.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=as.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=as.errored,this.rejoinTimer.scheduleTimeout())}),this._on(is.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Ds(this),this.broadcastEndpointURL=_s(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(a=null===(n=this.params.config)||void 0===n?void 0:n.broadcast)||void 0===a?void 0:a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==as.closed){const{config:{broadcast:s,presence:i,private:o}}=this.params,l=null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==n?n:[],c=!!this.bindings[Ps.PRESENCE]&&this.bindings[Ps.PRESENCE].length>0||!0===(null===(a=this.params.config.presence)||void 0===a?void 0:a.enabled),d={},u={broadcast:s,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(As.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(As.CLOSED)),this.updateJoinPayload(Object.assign({config:u},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var r;if(this.socket.setAuth(),void 0!==t){const n=this.bindings.postgres_changes,a=null!==(r=null==n?void 0:n.length)&&void 0!==r?r:0,s=[];for(let r=0;r<a;r++){const a=n[r],{filter:{event:i,schema:o,table:l,filter:c}}=a,d=t&&t[r];if(!d||d.event!==i||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=as.errored,void(null==e||e(As.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},a),{id:d.id}))}return this.bindings.postgres_changes=s,void(e&&e(As.SUBSCRIBED))}null==e||e(As.SUBSCRIBED)}).receive("error",t=>{this.state=as.errored,null==e||e(As.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(As.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===as.joined&&e===Ps.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var n;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(null==t)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},i=await this._fetchWithTimeout(this.broadcastEndpointURL,s,null!==(n=r.timeout)&&void 0!==n?n:this.timeout);if(202===i.status)return{success:!0};let o=i.statusText;try{const e=await i.json();o=e.error||e.message||o}catch(l){}return Promise.reject(new Error(o))}async send(e,t={}){var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var n,a,s;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(a=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===a?void 0:a.broadcast)||void 0===s?void 0:s.ack)||r("ok"),i.receive("ok",()=>r("ok")),i.receive("error",()=>r("error")),i.receive("timeout",()=>r("timed out"))});{const{event:s,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=as.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(is.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new ks(this,is.leave,{},e),r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null==r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=as.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const n=new AbortController,a=setTimeout(()=>n.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(a),s}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new ks(this,e,t,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,a;const s=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=is;if(r&&[i,o,l,c].indexOf(s)>=0&&r!==this._joinRef())return;let d=this._onMessage(s,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===s}).map(e=>e.callback(d,r)):null===(a=this.bindings[s])||void 0===a||a.filter(e=>{var r,n,a,i,o,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,i=null===(r=e.filter)||void 0===r?void 0:r.event;return s&&(null===(n=t.ids)||void 0===n?void 0:n.includes(s))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const r=null===(o=null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===r||r===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:r,commit_timestamp:n,type:a,errors:s}=e,i={schema:t,table:r,commit_timestamp:n,eventType:a,new:{},old:{},errors:s};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,r)})}_isClosed(){return this.state===as.closed}_isJoined(){return this.state===as.joined}_isJoining(){return this.state===as.joining}_isLeaving(){return this.state===as.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const n=e.toLocaleLowerCase(),a={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&Is.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(is.close,{},e)}_onError(e){this._on(is.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=as.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=xs(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=xs(e.columns,e.old_record)),t}}const Rs=()=>{},$s=25e3,Ls=10,Fs=100,zs=[1e3,2e3,5e3,1e4];class Us{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ts,this.transport=null,this.heartbeatIntervalMs=$s,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Rs,this.ref=0,this.reconnectTimer=null,this.logger=Rs,this.conn=null,this.sendBuffer=[],this.serializer=new ms,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),!(null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${ls.websocket}`,this.httpEndpoint=_s(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=es.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case rs.connecting:return cs.Connecting;case rs.open:return cs.Open;case rs.closing:return cs.Closing;default:return cs.Closed}}isConnected(){return this.connectionState()===cs.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(e=>e.topic===r);if(n)return n;{const r=new Is(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:n,ref:a}=e,s=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${r} (${a})`,n),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(S$){this.log("error","error in heartbeat callback",S$)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},Fs)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(S$){this.log("error","error in heartbeat callback",S$)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(S$){this.log("error","error in heartbeat callback",S$)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(S$){this.log("error","error in heartbeat callback",S$)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:n,ref:a}=e,s=a?`(${a})`:"",i=n.status||"";this.log("receive",`${i} ${t} ${r} ${s}`.trim(),n),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,n,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(is.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const r={access_token:t,version:"realtime-js/2.79.0"};t&&e.updateJoinPayload(r),e.joinedOnce&&e._isJoined()&&e._push(is.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(S$){this.log("error",`error in ${e} callback`,S$)}})}catch(S$){this.log("error",`error triggering ${e} callbacks`,S$)}}_setupReconnectionTimer(){this.reconnectTimer=new ps(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ls)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,n,a,s,i,o,l,c;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null==e?void 0:e.timeout)&&void 0!==r?r:ts,this.heartbeatIntervalMs=null!==(n=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==n?n:$s,this.worker=null!==(a=null==e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(s=null==e?void 0:e.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(i=null==e?void 0:e.heartbeatCallback)&&void 0!==i?i:Rs,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null==e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>zs[e-1]||1e4,this.encode=null!==(l=null==e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null==e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class Bs extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function qs(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Ws extends Bs{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ks extends Bs{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Vs=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),Hs=e=>{if(Array.isArray(e))return e.map(e=>Hs(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,r])=>{const n=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[n]=Hs(r)}),t},Gs=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null===(t=e.error)||void 0===t?void 0:t.message)||JSON.stringify(e)},Ys=(e,t,r)=>Kn(void 0,void 0,void 0,function*(){const n=yield Response;e instanceof n&&!(null==r?void 0:r.noResolveJson)?e.json().then(r=>{const n=e.status||500,a=(null==r?void 0:r.statusCode)||n+"";t(new Ws(Gs(r),n,a))}).catch(e=>{t(new Ks(Gs(e),e))}):t(new Ks(Gs(e),e))}),Js=(e,t,r,n)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&n?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(n)?(a.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,(null==t?void 0:t.duplex)&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r)):a};function Zs(e,t,r,n,a,s){return Kn(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(r,Js(t,n,a,s)).then(e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>Ys(e,o,n))})})}function Qs(e,t,r,n){return Kn(this,void 0,void 0,function*(){return Zs(e,"GET",t,r,n)})}function Xs(e,t,r,n,a){return Kn(this,void 0,void 0,function*(){return Zs(e,"POST",t,n,a,r)})}function ei(e,t,r,n,a){return Kn(this,void 0,void 0,function*(){return Zs(e,"PUT",t,n,a,r)})}function ti(e,t,r,n,a){return Kn(this,void 0,void 0,function*(){return Zs(e,"DELETE",t,n,a,r)})}class ri{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return Kn(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(qs(e))return{data:null,error:e};throw e}})}}var ni;class ai{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[ni]="BlobDownloadBuilder",this.promise=null}asStream(){return new ri(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Kn(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(qs(e))return{data:null,error:e};throw e}})}}ni=Symbol.toStringTag;const si={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ii={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class oi{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Vs(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,n){return Kn(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},ii),n);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const o=s.metadata;if("undefined"!=typeof Blob&&r instanceof Blob)a=new FormData,a.append("cacheControl",s.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",r);else if("undefined"!=typeof FormData&&r instanceof FormData)a=r,a.has("cacheControl")||a.append("cacheControl",s.cacheControl),o&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(o));else{a=r,i["cache-control"]=`max-age=${s.cacheControl}`,i["content-type"]=s.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)));("undefined"!=typeof ReadableStream&&a instanceof ReadableStream||a&&"object"==typeof a&&"pipe"in a&&"function"==typeof a.pipe)&&!s.duplex&&(s.duplex="half")}(null==n?void 0:n.headers)&&(i=Object.assign(Object.assign({},i),n.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?ei:Xs)(this.fetch,`${this.url}/object/${c}`,a,Object.assign({headers:i},(null==s?void 0:s.duplex)?{duplex:s.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(qs(a))return{data:null,error:a};throw a}})}upload(e,t,r){return Kn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return Kn(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),s=this._getFinalPath(a),i=new URL(this.url+`/object/upload/sign/${s}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:ii.upsert},n),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,s["cache-control"]=`max-age=${t.cacheControl}`,s["content-type"]=t.contentType);return{data:{path:a,fullPath:(yield ei(this.fetch,i.toString(),e,{headers:s})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qs(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return Kn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(n["x-upsert"]="true");const a=yield Xs(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),s=new URL(this.url+a.url),i=s.searchParams.get("token");if(!i)throw new Bs("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:i},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qs(r))return{data:null,error:r};throw r}})}update(e,t,r){return Kn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Kn(this,void 0,void 0,function*(){try{return{data:yield Xs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qs(n))return{data:null,error:n};throw n}})}copy(e,t,r){return Kn(this,void 0,void 0,function*(){try{return{data:{path:(yield Xs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qs(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,r){return Kn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),a=yield Xs(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const s=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qs(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return Kn(this,void 0,void 0,function*(){try{const n=yield Xs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:n.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${a}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qs(n))return{data:null,error:n};throw n}})}download(e,t){const r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),a=n?`?${n}`:"",s=this._getFinalPath(e);return new ai(()=>Qs(this.fetch,`${this.url}/${r}/${s}${a}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return Kn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Qs(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Hs(e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qs(r))return{data:null,error:r};throw r}})}exists(e){return Kn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,n){return Kn(this,void 0,void 0,function*(){return Zs(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qs(r)&&r instanceof Ks){const e=r.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==a&&n.push(a);const s=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&n.push(i);let o=n.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${o}`)}}}remove(e){return Kn(this,void 0,void 0,function*(){try{return{data:yield ti(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qs(t))return{data:null,error:t};throw t}})}list(e,t,r){return Kn(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},si),t),{prefix:e||""});return{data:yield Xs(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qs(n))return{data:null,error:n};throw n}})}listV2(e,t){return Kn(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Xs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qs(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const li="2.79.0",ci={"X-Client-Info":`storage-js/${li}`};class di{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const a=new URL(e);if(null==n?void 0:n.useNewHostname){/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."))}this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ci),t),this.fetch=Vs(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Kn(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield Qs(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qs(t))return{data:null,error:t};throw t}})}getBucket(e){return Kn(this,void 0,void 0,function*(){try{return{data:yield Qs(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qs(t))return{data:null,error:t};throw t}})}createBucket(e){return Kn(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield Xs(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qs(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Kn(this,void 0,void 0,function*(){try{return{data:yield ei(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qs(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Kn(this,void 0,void 0,function*(){try{return{data:yield Xs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qs(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Kn(this,void 0,void 0,function*(){try{return{data:yield ti(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qs(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class ui{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ci),t),this.fetch=Vs(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Kn(this,void 0,void 0,function*(){try{return{data:yield Xs(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qs(t))return{data:null,error:t};throw t}})}listBuckets(e){return Kn(this,void 0,void 0,function*(){try{const t=new URLSearchParams;void 0!==(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),void 0!==(null==e?void 0:e.offset)&&t.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&t.set("search",e.search);const r=t.toString(),n=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Qs(this.fetch,n,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qs(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Kn(this,void 0,void 0,function*(){try{return{data:yield ti(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qs(t))return{data:null,error:t};throw t}})}}const hi={"X-Client-Info":`storage-js/${li}`,"Content-Type":"application/json"};class mi extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function pi(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}class xi extends mi{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class fi extends mi{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var gi,yi;(yi=gi||(gi={})).InternalError="InternalError",yi.S3VectorConflictException="S3VectorConflictException",yi.S3VectorNotFoundException="S3VectorNotFoundException",yi.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",yi.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",yi.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded";const bi=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),vi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ji=(e,t,r,n)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return n?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(n)?(a.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function wi(e,t,r,n,a,s){return Kn(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(r,ji(t,n,a,s)).then(e=>{if(!e.ok)throw e;if(null==n?void 0:n.noResolveJson)return e;const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>i(e)).catch(e=>((e,t,r)=>Kn(void 0,void 0,void 0,function*(){if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==r?void 0:r.noResolveJson)){const r=e.status||500,n=e;if("function"==typeof n.json)n.json().then(e=>{const n=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||r+"";t(new xi(vi(e),r,n))}).catch(()=>{const e=r+"",a=n.statusText||`HTTP ${r} error`;t(new xi(a,r,e))});else{const e=r+"",a=n.statusText||`HTTP ${r} error`;t(new xi(a,r,e))}}else t(new fi(vi(e),e))}))(e,o,n))})})}function Ni(e,t,r,n,a){return Kn(this,void 0,void 0,function*(){return wi(e,"POST",t,n,a,r)})}class _i{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hi),t),this.fetch=bi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Kn(this,void 0,void 0,function*(){try{return{data:(yield Ni(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pi(t))return{data:null,error:t};throw t}})}getIndex(e,t){return Kn(this,void 0,void 0,function*(){try{return{data:yield Ni(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pi(r))return{data:null,error:r};throw r}})}listIndexes(e){return Kn(this,void 0,void 0,function*(){try{return{data:yield Ni(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pi(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return Kn(this,void 0,void 0,function*(){try{return{data:(yield Ni(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pi(r))return{data:null,error:r};throw r}})}}class ki{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hi),t),this.fetch=bi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Kn(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ni(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pi(t))return{data:null,error:t};throw t}})}getVectors(e){return Kn(this,void 0,void 0,function*(){try{return{data:yield Ni(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pi(t))return{data:null,error:t};throw t}})}listVectors(e){return Kn(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return{data:yield Ni(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pi(t))return{data:null,error:t};throw t}})}queryVectors(e){return Kn(this,void 0,void 0,function*(){try{return{data:yield Ni(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pi(t))return{data:null,error:t};throw t}})}deleteVectors(e){return Kn(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ni(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pi(t))return{data:null,error:t};throw t}})}}class Si{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hi),t),this.fetch=bi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Kn(this,void 0,void 0,function*(){try{return{data:(yield Ni(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pi(t))return{data:null,error:t};throw t}})}getBucket(e){return Kn(this,void 0,void 0,function*(){try{return{data:yield Ni(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pi(t))return{data:null,error:t};throw t}})}listBuckets(){return Kn(this,arguments,void 0,function*(e={}){try{return{data:yield Ni(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pi(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Kn(this,void 0,void 0,function*(){try{return{data:(yield Ni(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pi(t))return{data:null,error:t};throw t}})}}class Ci extends Si{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Oi(this.url,this.headers,e,this.fetch)}}class Oi extends _i{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Kn(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Kn(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Kn(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Kn(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Ei(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Ei extends ki{constructor(e,t,r,n,a){super(e,t,a),this.vectorBucketName=r,this.indexName=n}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Kn(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Kn(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Kn(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Kn(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Kn(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Pi extends di{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new oi(this.url,this.headers,e,this.fetch)}get vectors(){return new Ci(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ui(this.url+"/iceberg",this.headers,this.fetch)}}let Ti="";Ti="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Ai={headers:{"X-Client-Info":`supabase-js-${Ti}/2.79.0`}},Mi={schema:"public"},Di={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ii={},Ri=(e,t,r)=>{const n=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(r),a=Headers;return async(r,s)=>{var i;const o=null!==(i=await t())&&void 0!==i?i:e;let l=new a(null==s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),n(r,Object.assign(Object.assign({},s),{headers:l}))}};const $i="2.79.0",Li=3e4,Fi=9e4,zi={"X-Client-Info":`gotrue-js/${$i}`},Ui="X-Supabase-Api-Version",Bi={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},qi=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Wi extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Ki(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class Vi extends Wi{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class Hi extends Wi{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Gi extends Wi{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class Yi extends Gi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Ji extends Gi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zi extends Gi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Qi extends Gi{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Xi extends Gi{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class eo extends Gi{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function to(e){return Ki(e)&&"AuthRetryableFetchError"===e.name}class ro extends Gi{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class no extends Gi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ao="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),so=" \t\n\r=".split(""),io=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<so.length;t+=1)e[so[t].charCodeAt(0)]=-2;for(let t=0;t<ao.length;t+=1)e[ao[t].charCodeAt(0)]=t;return e})();function oo(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(ao[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(ao[e]),t.queuedBits-=6}}function lo(e,t,r){const n=io[e];if(!(n>-1)){if(-2===n)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function co(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,n,r)};for(let i=0;i<e.length;i+=1)lo(e.charCodeAt(i),a,s);return t.join("")}function uo(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function ho(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)lo(e.charCodeAt(a),r,n);return new Uint8Array(t)}function mo(e){const t=[];return function(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const t=1024*(n-55296)&65535;n=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}uo(n,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function po(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};return e.forEach(e=>oo(e,r,n)),oo(null,r,n),t.join("")}const xo=()=>"undefined"!=typeof window&&"undefined"!=typeof document,fo={tested:!1,writable:!1},go=()=>{if(!xo())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(S$){return!1}if(fo.tested)return fo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),fo.tested=!0,fo.writable=!0}catch(S$){fo.tested=!0,fo.writable=!1}return fo.writable};const yo=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),bo=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},vo=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(n){return r}},jo=async(e,t)=>{await e.removeItem(t)};class wo{constructor(){this.promise=new wo.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function No(e){const t=e.split(".");if(3!==t.length)throw new no("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!qi.test(t[r]))throw new no("JWT not in base64url format");return{header:JSON.parse(co(t[0])),payload:JSON.parse(co(t[1])),signature:ho(t[2]),raw:{header:t[0],payload:t[1]}}}function _o(e){return("0"+e.toString(16)).substr(-2)}async function ko(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function So(e,t,r=!1){const n=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,_o).join("")}();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await bo(e,`${t}-code-verifier`,a);const s=await ko(n);return[s,n===s?"plain":"s256"]}wo.promiseConstructor=Promise;const Co=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Oo=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Eo(e){if(!Oo.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Po(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function To(e){return JSON.parse(JSON.stringify(e))}const Ao=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Mo=[502,503,504];async function Do(e){var t,r;if(!("object"==typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"==typeof r.json))throw new eo(Ao(e),0);if(Mo.includes(e.status))throw new eo(Ao(e),e.status);let n,a;try{n=await e.json()}catch(S$){throw new Hi(Ao(S$),S$)}const s=function(e){const t=e.headers.get(Ui);if(!t)return null;if(!t.match(Co))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(S$){return null}}(e);if(s&&s.getTime()>=Bi.timestamp&&"object"==typeof n&&n&&"string"==typeof n.code?a=n.code:"object"==typeof n&&n&&"string"==typeof n.error_code&&(a=n.error_code),a){if("weak_password"===a)throw new ro(Ao(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new Yi}else if("object"==typeof n&&n&&"object"==typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new ro(Ao(n),e.status,n.weak_password.reasons);throw new Vi(Ao(n),e.status||500,a)}async function Io(e,t,r,n){var a;const s=Object.assign({},null==n?void 0:n.headers);s[Ui]||(s[Ui]=Bi.name),(null==n?void 0:n.jwt)&&(s.Authorization=`Bearer ${n.jwt}`);const i=null!==(a=null==n?void 0:n.query)&&void 0!==a?a:{};(null==n?void 0:n.redirectTo)&&(i.redirect_to=n.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,r,n,a,s){const i=((e,t,r,n)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))})(t,n,a,s);let o;try{o=await e(r,Object.assign({},i))}catch(S$){throw new eo(Ao(S$),0)}o.ok||await Do(o);if(null==n?void 0:n.noResolveJson)return o;try{return await o.json()}catch(S$){await Do(S$)}}(e,t,r+o,{headers:s,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}function Ro(e){var t;let r=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function $o(e){const t=Ro(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Lo(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Fo(e){return{data:e,error:null}}function zo(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s}=e,i=$n(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s},user:Object.assign({},i)},error:null}}function Uo(e){return e}const Bo=["global","local","others"];class qo{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=yo(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Bo[0]){if(Bo.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Bo.join(", ")}`);try{return await Io(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ki(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Io(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Lo})}catch(r){if(Ki(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=$n(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null==r?void 0:r.newEmail,delete n.newEmail),await Io(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:zo,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(Ki(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Io(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Lo})}catch(t){if(Ki(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,a,s,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Io(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(a=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==a?a:""},xform:Uo});if(c.error)throw c.error;const d=await c.json(),u=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Ki(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Eo(e);try{return await Io(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Lo})}catch(t){if(Ki(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Eo(e);try{return await Io(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Lo})}catch(r){if(Ki(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Eo(e);try{return await Io(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Lo})}catch(r){if(Ki(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Eo(e.userId);try{const{data:t,error:r}=await Io(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(Ki(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Eo(e.userId),Eo(e.id);try{return{data:await Io(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ki(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,n,a,s,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Io(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(a=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==a?a:""},xform:Uo});if(c.error)throw c.error;const d=await c.json(),u=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Ki(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await Io(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(Ki(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Io(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(Ki(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Io(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(r){if(Ki(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Io(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(Ki(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Io(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(Ki(t))return{data:null,error:t};throw t}}}function Wo(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ko=!!(globalThis&&go()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Vo extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ho extends Vo{}async function Go(e,t,r){const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort()},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async n=>{if(!n){if(0===t)throw new Ho(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ko)try{await globalThis.navigator.locks.query()}catch(S$){}return await r()}try{return await r()}finally{}}))}function Yo(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Jo(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class Zo extends Error{constructor({message:e,code:t,cause:r,name:n}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(a=null!=n?n:r instanceof Error?r.name:void 0)&&void 0!==a?a:"Unknown Error",this.code=t}}class Qo extends Zo{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Xo({error:e,options:t}){var r,n,a;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new Zo({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if(!0===(null===(r=s.authenticatorSelection)||void 0===r?void 0:r.requireResidentKey))return new Zo({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if("conditional"===t.mediation&&"required"===(null===(n=s.authenticatorSelection)||void 0===n?void 0:n.userVerification))return new Zo({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if("required"===(null===(a=s.authenticatorSelection)||void 0===a?void 0:a.userVerification))return new Zo({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if("InvalidStateError"===e.name)return new Zo({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if("NotAllowedError"===e.name)return new Zo({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("NotSupportedError"===e.name){return 0===s.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new Zo({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Zo({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e})}if("SecurityError"===e.name){const t=window.location.hostname;if(!il(t))return new Zo({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(s.rp.id!==t)return new Zo({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Zo({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new Zo({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Zo({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function el({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new Zo({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if("NotAllowedError"===e.name)return new Zo({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("SecurityError"===e.name){const t=window.location.hostname;if(!il(t))return new Zo({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(r.rpId!==t)return new Zo({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new Zo({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Zo({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}const tl=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function rl(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=$n(e,["challenge","user","excludeCredentials"]),s=ho(t).buffer,i=Object.assign(Object.assign({},r),{id:ho(r.id).buffer}),o=Object.assign(Object.assign({},a),{challenge:s,user:i});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:ho(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}function nl(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=$n(e,["challenge","allowCredentials"]),a=ho(t).buffer,s=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];s.allowCredentials[e]=Object.assign(Object.assign({},t),{id:ho(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return s}function al(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:po(new Uint8Array(e.response.attestationObject)),clientDataJSON:po(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function sl(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:po(new Uint8Array(a.authenticatorData)),clientDataJSON:po(new Uint8Array(a.clientDataJSON)),signature:po(new Uint8Array(a.signature)),userHandle:a.userHandle?po(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function il(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function ol(){var e,t;return!!(xo()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const ll={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},cl={userVerification:"preferred",hints:["security-key"]};function dl(...e){const t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),r=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),n={};for(const a of e)if(a)for(const e in a){const s=a[e];if(void 0!==s)if(Array.isArray(s))n[e]=s;else if(r(s))n[e]=s;else if(t(s)){const r=n[e];t(r)?n[e]=dl(r,s):n[e]=dl(s)}else n[e]=s}return n}class ul{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:n},a){try{const{data:s,error:i}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!s)return{data:null,error:i};const o=null!=n?n:tl.createNewAbortSignal();if("create"===s.webauthn.type){const{user:e}=s.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${r}`),e.displayName||(e.displayName=e.name)}switch(s.webauthn.type){case"create":{const t=function(e,t){return dl(ll,e,t||{})}(s.webauthn.credential_options.publicKey,null==a?void 0:a.create),{data:r,error:n}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Qo("Browser returned unexpected credential type",t)}:{data:null,error:new Qo("Empty credential response",t)}}catch(t){return{data:null,error:Xo({error:t,options:e})}}}({publicKey:t,signal:o});return r?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:r}},error:null}:{data:null,error:n}}case"request":{const t=function(e,t){return dl(cl,e,t||{})}(s.webauthn.credential_options.publicKey,null==a?void 0:a.request),{data:r,error:n}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Qo("Browser returned unexpected credential type",t)}:{data:null,error:new Qo("Empty credential response",t)}}catch(t){return{data:null,error:el({error:t,options:e})}}}(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:t,signal:o}));return r?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:r}},error:null}:{data:null,error:n}}}}catch(s){return Ki(s)?{data:null,error:s}:{data:null,error:new Hi("Unexpected error in challenge",s)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:r=("undefined"!=typeof window?[window.location.origin]:void 0),signal:n}},a){if(!t)return{data:null,error:new Wi("rpId is required for WebAuthn authentication")};try{if(!ol())return{data:null,error:new Hi("Browser does not support WebAuthn",null)};const{data:s,error:i}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:n},{request:a});if(!s)return{data:null,error:i};const{webauthn:o}=s;return this._verify({factorId:e,challengeId:s.challengeId,webauthn:{type:o.type,rpId:t,rpOrigins:r,credential_response:o.credential_response}})}catch(s){return Ki(s)?{data:null,error:s}:{data:null,error:new Hi("Unexpected error in authenticate",s)}}}async _register({friendlyName:e,rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:r=("undefined"!=typeof window?[window.location.origin]:void 0),signal:n},a){if(!t)return{data:null,error:new Wi("rpId is required for WebAuthn registration")};try{if(!ol())return{data:null,error:new Hi("Browser does not support WebAuthn",null)};const{data:s,error:i}=await this._enroll({friendlyName:e});if(!s)return await this.client.mfa.listFactors().then(t=>{var r;return null===(r=t.data)||void 0===r?void 0:r.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:i};const{data:o,error:l}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:n},{create:a});return o?this._verify({factorId:s.id,challengeId:o.challengeId,webauthn:{rpId:t,rpOrigins:r,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:l}}catch(s){return Ki(s)?{data:null,error:s}:{data:null,error:new Hi("Unexpected error in register",s)}}}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(S$){"undefined"!=typeof self&&(self.globalThis=self)}}();const hl={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:zi,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function ml(e,t,r){return await r()}const pl={};class xl{get jwks(){var e,t;return null!==(t=null===(e=pl[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){pl[this.storageKey]=Object.assign(Object.assign({},pl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=pl[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){pl[this.storageKey]=Object.assign(Object.assign({},pl[this.storageKey]),{cachedAt:e})}constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=xl.nextInstanceID,xl.nextInstanceID+=1,this.instanceID>0&&xo();const n=Object.assign(Object.assign({},hl),e);if(this.logDebugMessages=!!n.debug,"function"==typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new qo({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=yo(n.fetch),this.lock=n.lock||ml,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,this.throwOnError=n.throwOnError,n.lock?this.lock=n.lock:xo()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Go:this.lock=ml,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ul(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:go()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Wo(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=Wo(this.memoryStorage)),xo()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(S$){}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${$i}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},r="none";if(xo()&&(t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(S$){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),xo()&&this.detectSessionInUrl&&"none"!==r){const{data:n,error:a}=await this._getSessionFromURL(t,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return Ki(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:i}=n;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ki(t)?this._returnResult({error:t}):this._returnResult({error:new Hi("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const a=await Io(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:Ro}),{data:s,error:i}=a;if(i||!s)return this._returnResult({data:{user:null,session:null},error:i});const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(a){if(Ki(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var t,r,n;try{let a;if("email"in e){const{email:r,password:n,options:s}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await So(this.storage,this.storageKey)),a=await Io(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==s?void 0:s.emailRedirectTo,body:{email:r,password:n,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:i,code_challenge_method:o},xform:Ro})}else{if(!("phone"in e))throw new Zi("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:i}=e;a=await Io(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:s,data:null!==(r=null==i?void 0:i.data)&&void 0!==r?r:{},channel:null!==(n=null==i?void 0:i.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Ro})}}const{data:s,error:i}=a;if(i||!s)return this._returnResult({data:{user:null,session:null},error:i});const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(a){if(Ki(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:n,options:a}=e;t=await Io(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:$o})}else{if(!("phone"in e))throw new Zi("You must provide either an email or phone number and a password");{const{phone:r,password:n,options:a}=e;t=await Io(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:$o})}}const{data:r,error:n}=t;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!r||!r.session||!r.user){const e=new Ji;return this._returnResult({data:{user:null,session:null},error:e})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(t){if(Ki(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,n,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,n,a,s,i,o,l,c,d,u;let h,m;if("message"in e)h=e.message,m=e.signature;else{const{chain:d,wallet:u,statement:p,options:x}=e;let f;if(xo())if("object"==typeof u)f=u;else{const e=window;if(!("ethereum"in e)||"object"!=typeof e.ethereum||!("request"in e.ethereum)||"function"!=typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");f=e.ethereum}else{if("object"!=typeof u||!(null==x?void 0:x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");f=u}const g=new URL(null!==(t=null==x?void 0:x.url)&&void 0!==t?t:window.location.href),y=await f.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!y||0===y.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const b=Yo(y[0]);let v=null===(r=null==x?void 0:x.signInWithEthereum)||void 0===r?void 0:r.chainId;if(!v){const e=await f.request({method:"eth_chainId"});v=parseInt(e,16)}h=function(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:s=new Date,nonce:i,notBefore:o,requestId:l,resources:c,scheme:d,uri:u,version:h}=e;if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!u)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const m=`${d?`${d}://${n}`:n} wants you to sign in with your Ethereum account:\n${Yo(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let p=`URI: ${u}\nVersion: ${h}\nChain ID: ${r}${i?`\nNonce: ${i}`:""}\nIssued At: ${s.toISOString()}`;if(a&&(p+=`\nExpiration Time: ${a.toISOString()}`),o&&(p+=`\nNot Before: ${o.toISOString()}`),l&&(p+=`\nRequest ID: ${l}`),c){let e="\nResources:";for(const t of c){if(!t||"string"!=typeof t)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}p+=e}return`${m}\n${p}`}({domain:g.host,address:b,statement:p,uri:g.href,version:"1",chainId:v,nonce:null===(n=null==x?void 0:x.signInWithEthereum)||void 0===n?void 0:n.nonce,issuedAt:null!==(s=null===(a=null==x?void 0:x.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==s?s:new Date,expirationTime:null===(i=null==x?void 0:x.signInWithEthereum)||void 0===i?void 0:i.expirationTime,notBefore:null===(o=null==x?void 0:x.signInWithEthereum)||void 0===o?void 0:o.notBefore,requestId:null===(l=null==x?void 0:x.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null==x?void 0:x.signInWithEthereum)||void 0===c?void 0:c.resources}),m=await f.request({method:"personal_sign",params:[Jo(h),b]})}try{const{data:t,error:r}=await Io(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:m},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(u=e.options)||void 0===u?void 0:u.captchaToken}}:null),xform:Ro});if(r)throw r;if(!t||!t.session||!t.user){const e=new Ji;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(p){if(Ki(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSolana(e){var t,r,n,a,s,i,o,l,c,d,u,h;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:x,options:f}=e;let g;if(xo())if("object"==typeof h)g=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");g=e.solana}else{if("object"!=typeof h||!(null==f?void 0:f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=h}const y=new URL(null!==(t=null==f?void 0:f.url)&&void 0!==t?t:window.location.href);if("signIn"in g&&g.signIn){const e=await g.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==f?void 0:f.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),x?{statement:x}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in g&&"function"==typeof g.signMessage&&"publicKey"in g&&"object"==typeof g&&g.publicKey&&"toBase58"in g.publicKey&&"function"==typeof g.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${y.host} wants you to sign in with your Solana account:`,g.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!==(n=null===(r=null==f?void 0:f.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==n?n:(new Date).toISOString()}`,...(null===(a=null==f?void 0:f.signInWithSolana)||void 0===a?void 0:a.notBefore)?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...(null===(s=null==f?void 0:f.signInWithSolana)||void 0===s?void 0:s.expirationTime)?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...(null===(i=null==f?void 0:f.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...(null===(o=null==f?void 0:f.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...(null===(l=null==f?void 0:f.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null==f?void 0:f.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...f.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await g.signMessage((new TextEncoder).encode(m),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:r}=await Io(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:po(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Ro});if(r)throw r;if(!t||!t.session||!t.user){const e=new Ji;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(x){if(Ki(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(e){const t=await vo(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(null!=t?t:"").split("/");try{const{data:t,error:a}=await Io(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ro});if(await jo(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!t||!t.session||!t.user){const e=new Ji;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!=n?n:null}),error:a})}catch(a){if(Ki(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:a,nonce:s}=e,i=await Io(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Ro}),{data:o,error:l}=i;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const e=new Ji;return this._returnResult({data:{user:null,session:null},error:e})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:o,error:l})}catch(t){if(Ki(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,n,a,s;try{if("email"in e){const{email:n,options:a}=e;let s=null,i=null;"pkce"===this.flowType&&([s,i]=await So(this.storage,this.storageKey));const{error:o}=await Io(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(r=null==a?void 0:a.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:s,code_challenge_method:i},redirectTo:null==a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}if("phone"in e){const{phone:t,options:r}=e,{data:i,error:o}=await Io(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(a=null==r?void 0:r.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!==(s=null==r?void 0:r.channel)&&void 0!==s?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o})}throw new Zi("You must provide either an email or phone number.")}catch(i){if(Ki(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async verifyOtp(e){var t,r;try{let n,a;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:s,error:i}=await Io(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:Ro});if(i)throw i;if(!s){throw new Error("An error occurred on token verification.")}const o=s.session,l=s.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(n){if(Ki(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(e){var t,r,n;try{let a=null,s=null;"pkce"===this.flowType&&([a,s]=await So(this.storage,this.storageKey));const i=await Io(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:Fo});return this._returnResult(i)}catch(a){if(Ki(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Yi;const{error:n}=await Io(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(e){if(Ki(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:a}=e,{error:s}=await Io(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},redirectTo:null==a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}if("phone"in e){const{phone:r,type:n,options:a}=e,{data:s,error:i}=await Io(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null==s?void 0:s.message_id},error:i})}throw new Zi("You must provide either an email or phone number and a type")}catch(t){if(Ki(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(S$){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(S$){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await vo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<Fi;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const t=await vo(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=Po()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const t={value:this.suppressGetSessionWarning};e.user=function(e,t){return new Proxy(e,{get:(e,r,n)=>{if("__isInsecureUserWarningProxy"===r)return!0;if("symbol"==typeof r){const t=r.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t||"Symbol(nodejs.util.inspect.custom)"===t)return Reflect.get(e,r,n)}return t.value||"string"!=typeof r||(t.value=!0),Reflect.get(e,r,n)}})}(e.user,t),t.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Io(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Lo}):await this._useSession(async e=>{var t,r,n;const{data:a,error:s}=e;if(s)throw s;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Io(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0,xform:Lo}):{data:{user:null},error:new Yi}})}catch(t){if(Ki(t))return function(e){return Ki(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await jo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:n,error:a}=r;if(a)throw a;if(!n.session)throw new Yi;const s=n.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await So(this.storage,this.storageKey));const{data:l,error:c}=await Io(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:s.access_token,xform:Lo});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(r){if(Ki(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Yi;const t=Date.now()/1e3;let r=t,n=!0,a=null;const{payload:s}=No(e.access_token);if(s.exp&&(r=s.exp,n=r<=t),n){const{data:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:n,error:s}=await this._getUser(e.access_token);if(s)throw s;a={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(t){if(Ki(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:n,error:a}=t;if(a)throw a;e=null!==(r=n.session)&&void 0!==r?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new Yi;const{data:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(Ki(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!xo())throw new Qi("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Qi(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Xi("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Qi("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Xi("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:a,refresh_token:s,expires_in:i,expires_at:o,token_type:l}=e;if(!(a&&i&&s&&l))throw new Qi("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;o&&(u=parseInt(o));const{data:h,error:m}=await this._getUser(a);if(m)throw m;const p={provider_token:r,provider_refresh_token:n,access_token:a,expires_in:d,expires_at:u,refresh_token:s,token_type:l,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:p,redirectType:e.type},error:null})}catch(r){if(Ki(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await vo(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:n,error:a}=t;if(a)return this._returnResult({error:a});const s=null===(r=n.session)||void 0===r?void 0:r.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!function(e){return Ki(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await jo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{const{data:{session:n},error:a}=t;if(a)throw a;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(a){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a)}})}async resetPasswordForEmail(e,t={}){let r=null,n=null;"pkce"===this.flowType&&([r,n]=await So(this.storage,this.storageKey,!0));try{return await Io(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(Ki(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null})}catch(t){if(Ki(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:n}=await this._useSession(async t=>{var r,n,a,s,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await Io(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(s=o.session)||void 0===s?void 0:s.access_token)&&void 0!==i?i:void 0})});if(n)throw n;return xo()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==r?void 0:r.url),this._returnResult({data:{provider:e.provider,url:null==r?void 0:r.url},error:null})}catch(r){if(Ki(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:n,data:{session:a}}=t;if(n)throw n;const{options:s,provider:i,token:o,access_token:l,nonce:c}=e,d=await Io(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!==(r=null==a?void 0:a.access_token)&&void 0!==r?r:void 0,body:{provider:i,id_token:o,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:Ro}),{data:u,error:h}=d;return h?this._returnResult({data:{user:null,session:null},error:h}):u&&u.session&&u.user?(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("USER_UPDATED",u.session)),this._returnResult({data:u,error:h})):this._returnResult({data:{user:null,session:null},error:new Ji})}catch(n){if(Ki(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;const{data:a,error:s}=t;if(s)throw s;return await Io(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(n=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0})})}catch(t){if(Ki(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const a=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Io(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ro})),n=(e,t)=>{const r=200*Math.pow(2,e);return t&&to(t)&&Date.now()+r-a<Li},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await r(a);if(!n(a,null,t))return void e(t)}catch(S$){if(!n(a,S$))return void t(S$)}})()}))}catch(a){if(this._debug(t,"error",a),Ki(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(t,"end")}var r,n}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),xo()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await vo(this.storage,this.storageKey);if(a&&this.userStorage){let t=await vo(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await bo(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:Po()}else if(a&&!a.user&&!a.user){const e=await vo(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(a.user=e.user,await jo(this.storage,this.storageKey+"-user"),await bo(this.storage,this.storageKey,a)):a.user=Po()}if(this._debug(r,"session from storage",a),!this._isValidSession(a))return this._debug(r,"session is not valid"),void(null!==a&&await this._removeSession());const s=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<Fi;if(this._debug(r,`session has${s?"":" not"} expired with margin of 90000s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(to(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null==e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(n){this._debug(r,"error getting user data, skipping SIGNED_IN notification",n)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return void this._debug(r,"error",a)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Yi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new wo;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new Yi;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={data:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(a){if(this._debug(n,"error",a),Ki(a)){const e={data:null,error:a};return to(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],a=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(S$){n.push(S$)}});if(await Promise.all(a),n.length>0){for(let e=0;e<n.length;e+=1);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await bo(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const n=To(e);await bo(this.storage,this.storageKey,n)}else{const e=To(t);await bo(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await jo(this.storage,this.storageKey),await jo(this.storage,this.storageKey+"-code-verifier"),await jo(this.storage,this.storageKey+"-user"),this.userStorage&&await jo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&xo()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(S$){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Li);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*r.expires_at-e)/Li);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&await this._callRefreshToken(r.refresh_token)})}catch(S$){}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(S$){if(!(S$.isAcquireTimeout||S$ instanceof Vo))throw S$;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!xo()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const[e,t]=await So(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});n.push(r.toString())}if(null==r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;return a?this._returnResult({data:null,error:a}):await Io(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Ki(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;const{data:a,error:s}=t;if(s)return this._returnResult({data:null,error:s});const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await Io(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(r=null==a?void 0:a.session)||void 0===r?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===o.type&&(null===(n=null==o?void 0:o.totp)||void 0===n?void 0:n.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),this._returnResult({data:o,error:null}))})}catch(t){if(Ki(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?al(e.webauthn.credential_response):sl(e.webauthn.credential_response)})}:{code:e.code}),{data:i,error:o}=await Io(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:s,headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token});return o?this._returnResult({data:null,error:o}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),this._returnResult({data:i,error:o}))})}catch(t){if(Ki(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;if(a)return this._returnResult({data:null,error:a});const s=await Io(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token});if(s.error)return s;const{data:i}=s;if("webauthn"!==i.type)return{data:i,error:null};switch(i.webauthn.type){case"create":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:rl(i.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:nl(i.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Ki(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(e=null==t?void 0:t.factors)&&void 0!==e?e:[])n.all.push(a),"verified"===a.status&&n[a.factor_type].push(a);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=No(r.access_token);let s=null;a.aal&&(s=a.aal);let i=s;(null!==(t=null===(e=r.user.factors)||void 0===e?void 0:e.filter(e=>"verified"===e.status))&&void 0!==t?t:[]).length>0&&(i="aal2");return{data:{currentLevel:s,nextLevel:i,currentAuthenticationMethods:a.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Io(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new Yi})})}catch(t){if(Ki(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!n)return this._returnResult({data:null,error:new Yi});const s=await Io(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return s.data&&s.data.redirect_url&&xo()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(Ki(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!n)return this._returnResult({data:null,error:new Yi});const s=await Io(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return s.data&&s.data.redirect_url&&xo()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(Ki(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(t=>t.kid===e);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(t=>t.kid===e),r&&this.jwks_cached_at+6e5>n)return r;const{data:a,error:s}=await Io(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return a.keys&&0!==a.keys.length?(this.jwks=a,this.jwks_cached_at=n,r=a.keys.find(t=>t.kid===e),r||null):null}async getClaims(e,t={}){try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});r=e.session.access_token}const{header:n,payload:a,signature:s,raw:{header:i,payload:o}}=No(r);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=n.alg&&!n.alg.startsWith("HS")&&n.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(n.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:a,header:n,signature:s},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(n.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,d,s,mo(`${i}.${o}`))))throw new no("Invalid JWT signature");return{data:{claims:a,header:n,signature:s},error:null}}catch(r){if(Ki(r))return this._returnResult({data:null,error:r});throw r}}}xl.nextInstanceID=0;const fl=xl;class gl extends fl{constructor(e){super(e)}}class yl{constructor(e,t,r){var n,a,s;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null==e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((r=t).endsWith("/")?r:r+"/")}catch(n){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var r}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l=function(e,t){var r,n;const{db:a,auth:s,realtime:i,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),a),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(r=null==u?void 0:u.headers)&&void 0!==r?r:{}),null!==(n=null==o?void 0:o.headers)&&void 0!==n?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=r?r:{},{db:Mi,realtime:Ii,auth:Object.assign(Object.assign({},Di),{storageKey:o}),global:Ai});this.storageKey=null!==(n=l.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(a=l.global.headers)&&void 0!==a?a:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(s=l.auth)&&void 0!==s?s:{},this.headers,l.global.fetch),this.fetch=Ri(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new Ga(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new Pi(this.storageUrl.href,this.headers,this.fetch,null==r?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new _a(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,storageKey:s,flowType:i,lock:o,debug:l,throwOnError:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new gl({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,flowType:i,lock:o,debug:l,throwOnError:c,fetch:u,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new Us(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}!function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);!!t&&parseInt(t[1],10)}();const bl=(vl="https://dnysosmscoceplvcejkv.supabase.co",jl="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRueXNvc21zY29jZXBsdmNlamt2Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MDU3NTY4NCwiZXhwIjoyMDc2MTUxNjg0fQ.kz_8w3HD1_Wm_BM8-4MUIaT2aInqxCQJwxfsDFzzJXo",wl={auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"sb-dnysosmscoceplvcejkv-auth-token"},db:{schema:"public, auth"},global:{headers:{"X-Client-Info":"promorang-x"}}},new yl(vl,jl,wl));var vl,jl,wl;const Nl=(e={})=>{if("undefined"==typeof window)return{...e};const t=hn();return t?{...e,Authorization:`Bearer ${t}`}:{...e}},_l=e=>{if(!e)return cn;if(/^https?:\/\//i.test(e))return e;return`${cn||""}${e.startsWith("/")?e:`/${e}`}`},kl=async(e,t={})=>{const r=new Headers(t.headers||{}),n=hn();return n&&r.set("Authorization",`Bearer ${n}`),fetch(_l(e),{...t,headers:r,credentials:t.credentials??"include"})};if("undefined"!=typeof window&&!window.__PROMORANG_FETCH_PATCHED__){const e=window.fetch.bind(window);window.__PROMORANG_FETCH_PATCHED__=!0,window.fetch=(t,r)=>{if("string"==typeof t)return t.startsWith("/api")?e(_l(t),r):e(t,r);if(t instanceof Request){const n=new URL(t.url,window.location.origin);if(n.origin===window.location.origin&&n.pathname.startsWith("/api")){const a=new Request(_l(n.pathname+n.search),t);return e(a,r)}return e(t,r)}if(t instanceof URL){if(t.origin===window.location.origin&&t.pathname.startsWith("/api")){const n=new URL(_l(t.pathname+t.search));return e(n,r)}return e(t,r)}return e(t,r)}}function Sl({children:e}){const{user:t,signOut:r}=bn(),n=ve(),a=we(),[s,i]=u.useState(null),[o,l]=u.useState(!1),[c,d]=u.useState(!1),[h,m]=u.useState(!1),[p,x]=u.useState(!1),[f,g]=u.useState(!1),[y,b]=u.useState(!1),[v,j]=u.useState(!1),[w,N]=u.useState(!1),[_,k]=u.useState(!1),[S,C]=u.useState(!1),[O,E]=u.useState(!1),{unreadCount:P}=function(){const{user:e}=bn(),[t,r]=u.useState(0);u.useEffect(()=>{if(e){const t=localStorage.getItem(`notifications_unread_${e.id}`);r(t?parseInt(t):0)}},[e]);const n=u.useCallback(n=>{if(!e)return;const s=t+1;r(s),localStorage.setItem(`notifications_unread_${e.id}`,s.toString()),a(n.message,"info")},[e,t]),a=u.useCallback((e,t="info")=>{const r=document.createElement("div");r.className="fixed top-20 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm transform transition-all duration-300 translate-x-full",r.className+=` ${{success:"bg-green-500 text-white",error:"bg-red-500 text-white",warning:"bg-yellow-500 text-white",info:"bg-blue-500 text-white"}[t]}`,r.textContent=e,document.body.appendChild(r),setTimeout(()=>{r.style.transform="translateX(0)"},100),setTimeout(()=>{r.style.transform="translateX(100%)",setTimeout(()=>{document.body.contains(r)&&document.body.removeChild(r)},300)},3e3)},[]);return{unreadCount:t,addNotification:n,showToast:a}}(),T=cn||"",A=e=>`${T}${e}`;u.useEffect(()=>{t&&M()},[t]),u.useEffect(()=>{const e=e=>{(e.metaKey||e.ctrlKey)&&"k"===e.key&&(e.preventDefault(),g(!0)),"Escape"===e.key&&(b(!1),j(!1),N(!1),k(!1))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]),u.useEffect(()=>{const e=e=>{const t=e.target;t.closest(".user-menu")||t.closest(".wallet-menu")||(b(!1),j(!1))};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]);const M=async()=>{try{const e=Nl(),t=await fetch(A("/api/users/me"),{credentials:"include",headers:e});if(t.ok){const e=await t.json();e&&"object"==typeof e&&i(e)}}catch(e){}},D=(()=>{const e=[{name:"Home",href:"/dashboard",icon:Yt},{name:"Earn",href:"/earn",icon:Rt},{name:"Create",href:"/create",icon:Nr},{name:"Invest",href:"/invest",icon:Ur},{name:"Growth Hub",href:"/growth-hub",icon:Cr}];return s&&"advertiser"===s.user_type&&e.push({name:"Dashboard",href:"/advertiser",icon:Tr}),e})(),I=e=>n.pathname===e||n.pathname.startsWith(e+"/"),R=()=>s?(s.points_balance||0)+(s.keys_balance||0)+(s.gems_balance||0)+(s.gold_collected||0):0,$=s?.username||(s?.email?s.email.split("@")[0]:void 0)||(t?.username?String(t.username):void 0)||(t?.email?t.email.split("@")[0]:void 0)||"me",L=Sn($),F=e=>{switch(j(!1),e){case"instagram":m(!0);break;case"masterkey":d(!0);break;case"convert":l(!0);break;case"leaderboard":a("/leaderboard");break;case"growthhub":a("/growth-hub");break;case"wallet":a("/wallet");break;case"goldshop":C(!0);break;case"achievements":E(!0)}},z=e=>{switch(b(!1),e){case"profile":a(L);break;case"upgrade":x(!0);break;case"advertiser":s&&"advertiser"===s.user_type?a("/advertiser"):a("/advertiser/onboarding");break;case"logout":(async()=>{try{await r(),localStorage.clear(),sessionStorage.clear();try{await fetch(A("/api/auth/logout"),{method:"POST",credentials:"include"})}catch(e){}a("/",{replace:!0})}catch(t){try{localStorage.clear(),sessionStorage.clear()}catch(n){}a("/",{replace:!0})}})()}};return sn.jsxs("div",{className:"min-h-screen bg-gray-50",children:[sn.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:sn.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:sn.jsxs("div",{className:"flex justify-between items-center h-16",children:[sn.jsx("div",{className:"flex items-center space-x-4",children:sn.jsx(Ve,{to:"/dashboard",className:"flex items-center space-x-3 group",children:sn.jsx("img",{src:"https://mocha-cdn.com/0198f6f0-5737-78cb-955a-4b0907aa1065/Promorang_logo_FULL-02.png",alt:"Promorang",className:"h-10 w-10 transition-transform group-hover:scale-105"})})}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(jn,{content:"Search (K)",position:"bottom",compact:!0,children:sn.jsxs("button",{onClick:()=>g(!0),className:"hidden md:flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:[sn.jsx(Er,{className:"w-4 h-4 text-gray-600"}),sn.jsx("span",{className:"text-sm text-gray-600",children:"Search..."}),sn.jsx("kbd",{className:"hidden lg:inline-flex items-center px-2 py-1 text-xs font-medium text-gray-500 bg-white border border-gray-300 rounded",children:"K"})]})}),sn.jsx(jn,{content:"Notifications",position:"bottom",compact:!0,children:sn.jsxs("button",{onClick:()=>k(!0),className:"hidden md:flex relative p-2 text-gray-400 hover:text-gray-600 transition-colors rounded-lg hover:bg-gray-100",children:[sn.jsx(dt,{className:"w-5 h-5"}),P>0&&sn.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center",children:P>9?"9+":P})]})}),(t||s)&&sn.jsxs("div",{className:"relative wallet-menu hidden md:block",children:[sn.jsx(jn,{content:"Your wallet balance",position:"bottom",compact:!0,children:sn.jsxs("button",{onClick:()=>j(!v),className:"flex items-center space-x-2 px-3 py-2 bg-gradient-to-r from-blue-50 to-purple-50 hover:from-blue-100 hover:to-purple-100 rounded-lg transition-all duration-200 border border-blue-200/50 shadow-sm hover:shadow-md",children:[sn.jsx(Yr,{className:"w-4 h-4 text-blue-600"}),sn.jsx("span",{className:"hidden sm:inline text-sm font-semibold text-blue-900 min-w-0",children:R().toLocaleString()}),sn.jsx(wt,{className:"w-4 h-4 text-blue-600 transition-transform "+(v?"rotate-180":"")})]})}),v&&sn.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[sn.jsx("div",{className:"px-4 py-2 border-b border-gray-100",children:sn.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Your Balances"})}),sn.jsxs("div",{className:"py-2",children:[sn.jsx(jn,{content:"Earn points from engagement",position:"left",children:sn.jsxs("button",{onClick:()=>F("instagram"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(Tt,{className:"w-4 h-4 text-blue-600"}),sn.jsx("span",{className:"text-sm text-gray-700",children:"Points"})]}),sn.jsx("span",{className:"text-sm font-medium text-blue-900",children:s?.points_balance||0})]})}),sn.jsx(jn,{content:"Unlock premium features",position:"left",children:sn.jsxs("button",{onClick:()=>F("masterkey"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(Xt,{className:"w-4 h-4 text-orange-600"}),sn.jsx("span",{className:"text-sm text-gray-700",children:"Keys"})]}),sn.jsx("span",{className:"text-sm font-medium text-orange-900",children:s?.keys_balance||0})]})}),sn.jsx(jn,{content:"Premium currency from drops",position:"left",children:sn.jsxs("button",{onClick:()=>F("convert"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(Rr,{className:"w-4 h-4 text-purple-600"}),sn.jsx("span",{className:"text-sm text-gray-700",children:"Gems"})]}),sn.jsx("span",{className:"text-sm font-medium text-purple-900",children:s?.gems_balance||0})]})}),(s?.gold_collected||0)>0&&sn.jsx(jn,{content:"Achievement rewards",position:"left",children:sn.jsxs("button",{onClick:()=>F("goldshop"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(qr,{className:"w-4 h-4 text-yellow-600"}),sn.jsx("span",{className:"text-sm text-gray-700",children:"Gold"})]}),sn.jsx("span",{className:"text-sm font-medium text-yellow-900",children:s?.gold_collected||0})]})})]}),sn.jsxs("div",{className:"border-t border-gray-100 pt-2",children:[sn.jsx(jn,{content:"Full wallet management",position:"left",compact:!0,children:sn.jsxs("button",{onClick:()=>F("wallet"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3",children:[sn.jsx(Yr,{className:"w-4 h-4 text-blue-600"}),sn.jsx("span",{className:"text-sm text-gray-700",children:"View Full Wallet"})]})}),sn.jsx(jn,{content:"Put your gems to work",position:"left",compact:!0,children:sn.jsxs("button",{onClick:()=>F("growthhub"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3",children:[sn.jsx(Cr,{className:"w-4 h-4 text-blue-600"}),sn.jsx("span",{className:"text-sm text-gray-700",children:"Explore Growth Hub"})]})}),sn.jsx(jn,{content:"View rankings",position:"left",compact:!0,children:sn.jsxs("button",{onClick:()=>F("leaderboard"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3",children:[sn.jsx(qr,{className:"w-4 h-4 text-purple-600"}),sn.jsx("span",{className:"text-sm text-gray-700",children:"View Rankings"})]})})]})]})]}),sn.jsxs("div",{className:"relative user-menu hidden md:block",children:[sn.jsxs("button",{onClick:()=>b(!y),className:"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-all duration-200 group",children:[sn.jsx(vn,{username:s?.username||t?.email?.split("@")[0],displayName:s?.display_name||t?.google_user_data?.name||t?.google_user_data?.given_name,avatarUrl:s?.avatar_url||t?.google_user_data?.picture,className:"flex items-center space-x-2",size:"sm"}),sn.jsxs("div",{className:"hidden lg:block text-left ml-2",children:[sn.jsx("div",{className:"text-sm font-medium text-gray-900 truncate max-w-32",children:t?.google_user_data?.given_name||t?.google_user_data?.name||t?.email?.split("@")[0]||"User"}),sn.jsxs("div",{className:"flex items-center space-x-1",children:["super"===(s?.user_tier||"free")&&sn.jsx(Dt,{className:"w-3 h-3 text-yellow-600"}),"premium"===(s?.user_tier||"free")&&sn.jsx(Rr,{className:"w-3 h-3 text-purple-600"}),"free"===(s?.user_tier||"free")&&sn.jsx(Rr,{className:"w-3 h-3 text-gray-600"}),sn.jsx("span",{className:"text-xs font-medium "+("super"===(s?.user_tier||"free")?"text-yellow-700":"premium"===(s?.user_tier||"free")?"text-purple-700":"text-gray-700"),children:(s?.user_tier||"free").charAt(0).toUpperCase()+(s?.user_tier||"free").slice(1)})]})]}),sn.jsx(wt,{className:"w-4 h-4 text-gray-400 transition-transform group-hover:text-gray-600 "+(y?"rotate-180":"")})]}),y&&sn.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[sn.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[sn.jsx("div",{className:"text-sm font-medium text-gray-900",children:s?.display_name||t?.google_user_data?.name||t?.google_user_data?.given_name||t?.email?.split("@")[0]||"User"}),sn.jsx("div",{className:"text-xs text-gray-500",children:t?.email})]}),sn.jsxs("div",{className:"py-2",children:[sn.jsxs("button",{onClick:()=>z("profile"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3",children:[sn.jsx(Vr,{className:"w-4 h-4 text-gray-600"}),sn.jsx("span",{className:"text-sm text-gray-700",children:"Profile"})]}),s&&sn.jsx(jn,{content:"Upgrade to Premium or Super tier for better rewards",position:"left",children:sn.jsxs("button",{onClick:()=>z("upgrade"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3",children:[sn.jsx(Dt,{className:"w-4 h-4 text-purple-600"}),sn.jsx("span",{className:"text-sm text-gray-700",children:"Upgrade Tier"})]})}),sn.jsx(jn,{content:"Create and manage marketing drops for your business",position:"left",children:sn.jsxs("button",{onClick:()=>z("advertiser"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3",children:[sn.jsx(ur,{className:"w-4 h-4 text-orange-600"}),sn.jsx("span",{className:"text-sm text-gray-700",children:s&&"advertiser"===s.user_type?"Advertiser Dashboard":"Become Advertiser"})]})})]}),sn.jsx("div",{className:"border-t border-gray-100 pt-2",children:sn.jsxs("button",{onClick:()=>z("logout"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3 text-red-600",children:[sn.jsx(or,{className:"w-4 h-4"}),sn.jsx("span",{className:"text-sm",children:"Sign Out"})]})})]})]})]})]})})}),w&&sn.jsx("div",{className:"lg:hidden fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>N(!1),children:sn.jsxs("div",{className:"fixed inset-y-0 right-0 w-80 bg-white shadow-xl overflow-y-auto",onClick:e=>e.stopPropagation(),children:[sn.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gradient-to-r from-orange-50 to-red-50",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-3",children:[sn.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Menu"}),sn.jsx("button",{onClick:()=>N(!1),className:"p-2 text-gray-400 hover:text-gray-600",children:sn.jsx(Jr,{className:"w-5 h-5"})})]}),sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(vn,{username:s?.username||t?.email?.split("@")[0],displayName:s?.display_name||t?.google_user_data?.name||t?.google_user_data?.given_name||"User",avatarUrl:s?.avatar_url||t?.google_user_data?.picture,className:"flex items-center space-x-3",size:"md"}),sn.jsxs("div",{className:"flex-1 min-w-0",children:[sn.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:s?.display_name||t?.google_user_data?.name||t?.google_user_data?.given_name||t?.email?.split("@")[0]||"User"}),sn.jsxs("div",{className:"flex items-center space-x-1",children:["super"===(s?.user_tier||"free")&&sn.jsx(Dt,{className:"w-3 h-3 text-yellow-600"}),"premium"===(s?.user_tier||"free")&&sn.jsx(Rr,{className:"w-3 h-3 text-purple-600"}),"free"===(s?.user_tier||"free")&&sn.jsx(Rr,{className:"w-3 h-3 text-gray-600"}),sn.jsxs("span",{className:"text-xs font-medium "+("super"===(s?.user_tier||"free")?"text-yellow-700":"premium"===(s?.user_tier||"free")?"text-purple-700":"text-gray-700"),children:[(s?.user_tier||"free").charAt(0).toUpperCase()+(s?.user_tier||"free").slice(1)," Tier"]})]})]})]})]}),sn.jsxs("div",{className:"p-4 space-y-2",children:[sn.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:"Quick Actions"}),sn.jsxs("button",{onClick:()=>{g(!0),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[sn.jsx(Er,{className:"w-5 h-5 text-gray-600"}),sn.jsx("span",{className:"font-medium",children:"Search"})]}),sn.jsxs("button",{onClick:()=>{k(!0),N(!1)},className:"w-full flex items-center justify-between px-3 py-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(dt,{className:"w-5 h-5 text-gray-600"}),sn.jsx("span",{className:"font-medium",children:"Notifications"})]}),P>0&&sn.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:P>9?"9+":P})]})]}),(t||s)&&sn.jsxs("div",{className:"px-4 pb-4",children:[sn.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:"Wallet"}),sn.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-3 mb-3",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-2",children:[sn.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Balance"}),sn.jsx("span",{className:"text-lg font-bold text-blue-900",children:R().toLocaleString()})]}),sn.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[sn.jsxs("div",{className:"flex items-center space-x-1",children:[sn.jsx(Tt,{className:"w-3 h-3 text-blue-600"}),sn.jsxs("span",{children:[(s?.points_balance||0).toLocaleString()," pts"]})]}),sn.jsxs("div",{className:"flex items-center space-x-1",children:[sn.jsx(Xt,{className:"w-3 h-3 text-orange-600"}),sn.jsxs("span",{children:[s?.keys_balance||0," keys"]})]}),sn.jsxs("div",{className:"flex items-center space-x-1",children:[sn.jsx(Rr,{className:"w-3 h-3 text-purple-600"}),sn.jsxs("span",{children:[s?.gems_balance||0," gems"]})]}),(s?.gold_collected||0)>0&&sn.jsxs("div",{className:"flex items-center space-x-1",children:[sn.jsx(qr,{className:"w-3 h-3 text-yellow-600"}),sn.jsxs("span",{children:[s?.gold_collected||0," gold"]})]})]})]}),sn.jsxs("div",{className:"space-y-1",children:[sn.jsxs("button",{onClick:()=>{F("wallet"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[sn.jsx(Yr,{className:"w-4 h-4 text-blue-600"}),sn.jsx("span",{className:"text-sm",children:"Full Wallet"})]}),sn.jsxs("button",{onClick:()=>{F("convert"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[sn.jsx(Rr,{className:"w-4 h-4 text-purple-600"}),sn.jsx("span",{className:"text-sm",children:"Convert Currency"})]}),sn.jsxs("button",{onClick:()=>{F("masterkey"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[sn.jsx(Xt,{className:"w-4 h-4 text-orange-600"}),sn.jsx("span",{className:"text-sm",children:"Master Key"})]})]})]}),sn.jsxs("div",{className:"px-4 pb-4",children:[sn.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:"Account"}),sn.jsxs("div",{className:"space-y-1",children:[sn.jsxs("button",{onClick:()=>{z("profile"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[sn.jsx(Vr,{className:"w-4 h-4 text-gray-600"}),sn.jsx("span",{className:"text-sm",children:"Profile"})]}),(t||s)&&sn.jsxs("button",{onClick:()=>{z("upgrade"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[sn.jsx(Dt,{className:"w-4 h-4 text-purple-600"}),sn.jsx("span",{className:"text-sm",children:"Upgrade Tier"})]}),sn.jsxs("button",{onClick:()=>{F("achievements"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[sn.jsx(qr,{className:"w-4 h-4 text-yellow-600"}),sn.jsx("span",{className:"text-sm",children:"Achievements"})]}),sn.jsxs("button",{onClick:()=>{F("leaderboard"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[sn.jsx(qr,{className:"w-4 h-4 text-purple-600"}),sn.jsx("span",{className:"text-sm",children:"Leaderboard"})]}),sn.jsxs("button",{onClick:()=>{F("instagram"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[sn.jsx(Rr,{className:"w-4 h-4 text-pink-600"}),sn.jsx("span",{className:"text-sm",children:"Instagram Rewards"})]})]})]}),sn.jsxs("div",{className:"px-4 pb-4",children:[sn.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:"Business"}),sn.jsxs("button",{onClick:()=>{z("advertiser"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[sn.jsx(ur,{className:"w-4 h-4 text-orange-600"}),sn.jsx("span",{className:"text-sm",children:s&&"advertiser"===s.user_type?"Advertiser Dashboard":"Become Advertiser"})]})]}),sn.jsx("div",{className:"px-4 pb-6 border-t border-gray-200 pt-4",children:sn.jsxs("button",{onClick:()=>{z("logout"),N(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[sn.jsx(or,{className:"w-4 h-4"}),sn.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})})]})}),sn.jsx("nav",{className:"hidden lg:block bg-white border-b border-gray-200 shadow-sm",children:sn.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:sn.jsx("div",{className:"flex space-x-8",children:D.map(e=>{const t=e.icon;return sn.jsxs(Ve,{to:e.href,className:"flex items-center space-x-2 px-3 py-4 text-sm font-medium border-b-2 transition-colors "+(I(e.href)?"border-orange-500 text-orange-600":"border-transparent text-gray-700 hover:text-gray-900 hover:border-gray-300"),children:[sn.jsx(t,{className:"w-5 h-5"}),sn.jsx("span",{children:e.name})]},e.name)})})})}),sn.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-30",children:sn.jsxs("div",{className:"flex",children:[sn.jsxs(Ve,{to:"/home",className:"flex-1 flex flex-col items-center justify-center py-3 px-1 transition-colors "+(I("/dashboard")?"text-orange-600":"text-gray-400 hover:text-gray-600"),children:[sn.jsx(Yt,{className:"w-5 h-5"}),sn.jsx("span",{className:"text-xs mt-1 font-medium leading-tight",children:"Home"})]}),sn.jsxs(Ve,{to:"/earn",className:"flex-1 flex flex-col items-center justify-center py-3 px-1 transition-colors "+(I("/earn")?"text-orange-600":"text-gray-400 hover:text-gray-600"),children:[sn.jsx(Rt,{className:"w-5 h-5"}),sn.jsx("span",{className:"text-xs mt-1 font-medium leading-tight",children:"Earn"})]}),sn.jsxs(Ve,{to:"/create",className:"flex-1 flex flex-col items-center justify-center py-3 px-1 transition-colors "+(I("/create")?"text-orange-600":"text-gray-400 hover:text-gray-600"),children:[sn.jsx(Nr,{className:"w-5 h-5"}),sn.jsx("span",{className:"text-xs mt-1 font-medium leading-tight",children:"Create"})]}),sn.jsxs(Ve,{to:"/invest",className:"flex-1 flex flex-col items-center justify-center py-3 px-1 transition-colors "+(I("/invest")?"text-orange-600":"text-gray-400 hover:text-gray-600"),children:[sn.jsx(Ur,{className:"w-5 h-5"}),sn.jsx("span",{className:"text-xs mt-1 font-medium leading-tight",children:"Invest"})]}),sn.jsxs("button",{onClick:()=>N(!w),className:"flex-1 flex flex-col items-center justify-center py-3 px-1 transition-colors "+(w?"text-orange-600":"text-gray-400 hover:text-gray-600"),children:[sn.jsx(hr,{className:"w-5 h-5"}),sn.jsx("span",{className:"text-xs mt-1 font-medium leading-tight",children:"More"})]})]})}),sn.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-20 lg:pb-8",children:e}),sn.jsx(Nn,{user:s,isOpen:o,onClose:()=>l(!1),onSuccess:M}),sn.jsx(_n,{user:s,isOpen:c,onClose:()=>d(!1),onSuccess:M}),sn.jsx(On,{user:s,isOpen:h,onClose:()=>m(!1),onSuccess:M}),sn.jsx(Pn,{user:s,isOpen:p,onClose:()=>x(!1),onSuccess:M}),sn.jsx(Tn,{isOpen:f,onClose:()=>g(!1)}),sn.jsx(wn,{isOpen:_,onClose:()=>k(!1)}),sn.jsx(An,{user:s,isOpen:S,onClose:()=>C(!1),onPurchase:M}),sn.jsx(Mn,{user:s,isOpen:O,onClose:()=>E(!1)})]})}const Cl=new class{constructor(){t(this,"queue",[]),t(this,"isReporting",!1),t(this,"retryCount",0)}async reportError(e,t={},r){const n={error:e,context:t,componentStack:r,timestamp:(new Date).toISOString(),url:"undefined"!=typeof window?window.location.href:"",userAgent:"undefined"!=typeof navigator?navigator.userAgent:""};this.queue.push(n),await this.processQueue()}async processQueue(){if(this.isReporting||0===this.queue.length)return;this.isReporting=!0;const e=this.queue[0];try{const t=await fetch("/api/report-error",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to report error: ${t.statusText}`);this.queue.shift(),this.retryCount=0,this.queue.length>0&&setTimeout(()=>this.processQueue(),0)}catch(t){if(this.retryCount++,this.retryCount<=3){const e=5e3*Math.pow(2,this.retryCount-1);setTimeout(()=>this.processQueue(),e)}else this.queue.shift(),this.retryCount=0,this.queue.length>0&&setTimeout(()=>this.processQueue(),0)}finally{this.isReporting=!1}}setUserContext(e){}};class Ol extends u.Component{constructor(e){super(e),t(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null,showDetails:!1})}),t(this,"handleReportError",async()=>{const{error:e,errorInfo:t}=this.state;if(e){this.setState({isReporting:!0});try{await Cl.reportError(e,{userReported:!0,componentStack:t?.componentStack,location:window.location.href,timestamp:(new Date).toISOString()},t?.componentStack),this.setState({reportSubmitted:!0})}catch(r){}finally{this.setState({isReporting:!1})}}}),t(this,"toggleDetails",()=>{this.setState(e=>({showDetails:!e.showDetails}))}),this.state={hasError:!1,error:null,errorInfo:null,showDetails:!1,isReporting:!1,reportSubmitted:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({errorInfo:t});const{onError:r,context:n}=this.props;Cl.reportError(e,{...n,componentStack:t.componentStack},t.componentStack),r&&r(e,t)}render(){const{hasError:e,error:t,errorInfo:r,showDetails:n,isReporting:a,reportSubmitted:s}=this.state,{children:i,fallback:o}=this.props;return e?o||sn.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:sn.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-2xl",children:[sn.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),sn.jsx("p",{className:"text-gray-600 mb-6",children:"We're sorry, but an unexpected error occurred. Our team has been notified."}),sn.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[sn.jsx("button",{onClick:this.handleRetry,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Try Again"}),!s&&sn.jsx("button",{onClick:this.handleReportError,disabled:a,className:`px-4 py-2 ${a?"bg-gray-400":"bg-green-600 hover:bg-green-700"} text-white rounded-md transition-colors`,children:a?"Sending...":"Report Error"}),sn.jsx("button",{onClick:this.toggleDetails,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:n?"Hide Details":"Show Details"})]}),n&&t&&sn.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-md overflow-auto max-h-64",children:[sn.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Error Details:"}),sn.jsx("pre",{className:"text-sm text-red-600 whitespace-pre-wrap",children:t.toString()}),r?.componentStack&&sn.jsxs(sn.Fragment,{children:[sn.jsx("h4",{className:"font-medium text-gray-800 mt-4 mb-2",children:"Component Stack:"}),sn.jsx("pre",{className:"text-xs text-gray-600 overflow-auto",children:r.componentStack})]})]}),s&&sn.jsx("div",{className:"mt-4 p-3 bg-green-50 text-green-700 rounded-md",children:"Thank you for reporting this issue. Our team has been notified."})]})}):i}}function El(e,t=null,r=!0){const[n,a]=u.useState(t),[s,i]=u.useState(!1),[o,l]=u.useState(null),c=u.useCallback(async()=>{try{i(!0),l(null);const t=await e();return a(t),t}catch(t){const e=t instanceof Error?t:new Error("An unknown error occurred");throw l(e),e}finally{i(!1)}},[e]);return u.useEffect(()=>{r&&c().catch(()=>{})},[c,r]),{data:n,loading:s,error:o,execute:c,setData:a}}const Pl="inline-flex items-center justify-center font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-orange-500 disabled:opacity-50 disabled:pointer-events-none",Tl={primary:"bg-orange-600 text-white hover:bg-orange-700 active:bg-orange-800",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 active:bg-gray-300",outline:"border border-gray-300 bg-transparent hover:bg-gray-50 active:bg-gray-100",ghost:"hover:bg-gray-100 active:bg-gray-200",link:"text-orange-600 hover:underline underline-offset-4 p-0 h-auto",destructive:"bg-red-600 text-white hover:bg-red-700 active:bg-red-800"},Al={sm:"h-8 px-3 text-sm rounded-lg",md:"h-10 px-4 py-2 text-base rounded-xl",lg:"h-12 px-6 text-lg rounded-xl"},Ml={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"},Dl=u.forwardRef(({className:e="",type:t="button",variant:r="primary",size:n="md",isLoading:a=!1,loadingText:s,leftIcon:i,rightIcon:o,children:l,disabled:c,asChild:d=!1,...m},p)=>{if(d&&u.isValidElement(l))return u.cloneElement(l,{ref:p,className:`${Pl} ${Tl[r]} ${Al[n]} ${e} ${l.props.className||""}`.trim(),disabled:c||a,...m});const x=a&&void 0!==s?s:l,f=[Pl,Tl[r],Al[n],e,a||c?"cursor-not-allowed":"cursor-pointer"].filter(Boolean).join(" ");return sn.jsxs("button",{ref:p,type:t,className:f,disabled:c||a,...m,children:[a&&sn.jsx(ar,{className:`animate-spin ${Ml[n]} mr-2`}),!a&&i&&h.cloneElement(i,{className:`${Ml[n]} mr-2 ${i.props.className||""}`.trim()}),x,!a&&o&&h.cloneElement(o,{className:`${Ml[n]} ml-2 ${o.props.className||""}`.trim()})]})});Dl.displayName="Button";const Il=Dl;function Rl(...e){return e.filter(Boolean).join(" ")}const $l=({icon:e,title:t,description:r,payout:n,bgColorClass:a="bg-blue-100",textColorClass:s="text-blue-600",className:i=""})=>sn.jsxs("div",{className:Rl("bg-white rounded-2xl p-6 shadow-sm border border-gray-100","hover:shadow-lg transition-all duration-200 hover:-translate-y-1",i),children:[sn.jsx("div",{className:Rl("rounded-xl p-3 w-fit mb-4",a),children:e}),sn.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:t}),sn.jsx("p",{className:"text-gray-600 mb-4",children:r}),sn.jsx("div",{className:Rl("font-semibold text-sm",s),children:n})]});function Ll({className:e="",count:t=1,height:r,width:n,circle:a=!1,rounded:s="md",style:i,...o}){const l={none:"rounded-none",sm:"rounded-sm",md:"rounded",lg:"rounded-lg",full:"rounded-full"},c=Array.from({length:t}).map((t,c)=>sn.jsx("div",{className:Rl("animate-pulse bg-gray-200 dark:bg-gray-700",a?"rounded-full":l[s],e),style:{height:r||"1.25rem",width:a?r||"1.25rem":n||"100%",...i},...o},c));return sn.jsx(sn.Fragment,{children:c})}$l.displayName="FeatureCard";const Fl=async()=>(await new Promise(e=>setTimeout(e,1e3)),{earners:127+Math.floor(50*Math.random()),payout:.3+.5*Math.random(),earnings:12+Math.floor(10*Math.random()),activeCampaigns:24+Math.floor(10*Math.random()),totalPayouts:125e3+Math.floor(5e4*Math.random())}),zl=async()=>(await new Promise(e=>setTimeout(e,800)),[{id:"tasks",icon:sn.jsx(Qr,{className:"w-8 h-8 text-blue-600"}),title:"Complete Tasks",description:"Micro-tasks and content creation",payout:"$25 avg",bgColorClass:"bg-blue-100",textColorClass:"text-blue-600"},{id:"invest",icon:sn.jsx(Ur,{className:"w-8 h-8 text-green-600"}),title:"Invest in Content",description:"Own shares of viral content",payout:"12.5% ROI",bgColorClass:"bg-green-100",textColorClass:"text-green-600"},{id:"predictions",icon:sn.jsx(Lr,{className:"w-8 h-8 text-purple-600"}),title:"Social Predictions",description:"Predict content performance",payout:"87% win rate",bgColorClass:"bg-purple-100",textColorClass:"text-purple-600"},{id:"brands",icon:sn.jsx(Hr,{className:"w-8 h-8 text-orange-600"}),title:"Brand Partnerships",description:"Collaborate with 500+ brands",payout:"Fair compensation",bgColorClass:"bg-orange-100",textColorClass:"text-orange-600"}]),Ul=({error:e,onRetry:t})=>sn.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-lg my-6",children:sn.jsxs("div",{className:"flex",children:[sn.jsx("div",{className:"flex-shrink-0",children:sn.jsx(Br,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),sn.jsxs("div",{className:"ml-3",children:[sn.jsxs("p",{className:"text-sm text-red-700",children:["Failed to load data: ",e.message]}),sn.jsx("div",{className:"mt-2",children:sn.jsx(Il,{variant:"outline",size:"sm",leftIcon:sn.jsx(_r,{className:"w-4 h-4"}),onClick:t,className:"text-sm",children:"Try again"})})]})]})});function Bl(){const{user:e,signIn:t,signOut:r}=bn(),n=we(),[a,s]=u.useState({earners:0,payout:0,earnings:0,activeCampaigns:0,totalPayouts:0}),{data:i,execute:o}=El(Fl,null,!0),{data:l,loading:c,error:d,execute:h}=El(zl,null,!0);u.useEffect(()=>{i&&s(i)},[i]),u.useEffect(()=>{if(!i)return;const e=setInterval(()=>{o().catch(console.error)},1e4);return()=>clearInterval(e)},[i,o]);const[m,p]=u.useState({loading:null}),x=u.useCallback(async e=>{try{p({loading:e});const r=`${e}@demo.com`;(await t(r,"demo123")).error}catch(r){}finally{p({loading:null})}},[t]);return sn.jsxs("div",{className:"min-h-screen bg-white",children:[sn.jsx("nav",{className:"bg-white/95 backdrop-blur-md border-b border-gray-100 sticky top-0 z-50 shadow-sm",children:sn.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:sn.jsxs("div",{className:"flex justify-between items-center h-16",children:[sn.jsx("div",{className:"flex items-center",children:sn.jsx("img",{src:"https://mocha-cdn.com/0198f6f0-5737-78cb-955a-4b0907aa1065/Promorang_logo_extended-03.png",alt:"Promorang",className:"h-8 w-auto transition-transform hover:scale-105"})}),sn.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[sn.jsx("a",{href:"#features",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"Features"}),sn.jsx("a",{href:"#how-it-works",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"How it Works"}),sn.jsx("a",{href:"#success-stories",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"Success Stories"})]}),sn.jsx("div",{className:"flex items-center space-x-4",children:e?sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(Il,{onClick:()=>n("/dashboard"),variant:"primary",size:"md",rightIcon:sn.jsx(ot,{className:"w-4 h-4"}),children:"Go to Dashboard"}),sn.jsx(Il,{onClick:()=>r(),variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-800 hover:bg-red-50",title:"Development logout (for testing)",children:" Logout"})]}):sn.jsxs(sn.Fragment,{children:[sn.jsx(Il,{onClick:()=>n("/auth"),variant:"ghost",size:"md",children:"Sign In"}),sn.jsx(Il,{onClick:()=>n("/auth"),variant:"primary",size:"md",rightIcon:sn.jsx(ot,{className:"w-4 h-4"}),children:"Start Earning"})]})})]})})}),!e&&sn.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-b border-gray-100 py-4",children:sn.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:sn.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-2 sm:space-y-0 sm:space-x-6",children:[sn.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Quick Demo:"}),sn.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[sn.jsx(Il,{onClick:()=>x("creator"),variant:"outline",size:"sm",className:"bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200",isLoading:"creator"===m.loading,loadingText:"Loading...",children:"Creator Demo"}),sn.jsx(Il,{onClick:()=>x("investor"),variant:"outline",size:"sm",className:"bg-purple-50 hover:bg-purple-100 text-purple-700 border-purple-200",isLoading:"investor"===m.loading,loadingText:"Loading...",children:"Investor Demo"}),sn.jsx(Il,{onClick:()=>x("advertiser"),variant:"outline",size:"sm",className:"bg-orange-50 hover:bg-orange-100 text-orange-700 border-orange-200",isLoading:"advertiser"===m.loading,loadingText:"Loading...",children:"Advertiser Demo"})]})]})})}),sn.jsxs("section",{className:"relative bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 py-16 lg:py-24 overflow-hidden",children:[sn.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.03'%3E%3Ccircle cx='30' cy='30' r='30'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")",opacity:.5}}),sn.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:sn.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[sn.jsxs("div",{className:"inline-flex items-center bg-green-100 text-green-800 px-4 py-2 rounded-full text-sm font-semibold mb-8 animate-pulse",children:[sn.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-ping"}),sn.jsx("span",{className:"font-bold",children:a.earners.toLocaleString()})," early creators earning"]}),sn.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 leading-tight mb-6",children:["Monetize Your Social Influence",sn.jsx("span",{className:"block bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Effortlessly"})]}),sn.jsxs("p",{className:"text-xl sm:text-2xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:["Join our early community and start earning from day one.",sn.jsx("span",{className:"font-semibold text-gray-900",children:" No followers required."})]}),sn.jsxs("div",{className:"flex flex-wrap justify-center gap-6 mb-10 text-sm",children:[sn.jsxs("div",{className:"flex items-center bg-white/60 backdrop-blur-sm rounded-full px-4 py-2",children:[sn.jsx(St,{className:"w-4 h-4 text-green-500 mr-2"}),sn.jsx("span",{className:"font-medium",children:"Start in 60 seconds"})]}),sn.jsxs("div",{className:"flex items-center bg-white/60 backdrop-blur-sm rounded-full px-4 py-2",children:[sn.jsx(St,{className:"w-4 h-4 text-green-500 mr-2"}),sn.jsx("span",{className:"font-medium",children:"Grow with social media"})]}),sn.jsxs("div",{className:"flex items-center bg-white/60 backdrop-blur-sm rounded-full px-4 py-2",children:[sn.jsx(St,{className:"w-4 h-4 text-green-500 mr-2"}),sn.jsx("span",{className:"font-medium",children:"Zero fees"})]})]}),sn.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[e?sn.jsx(Il,{onClick:()=>n("/dashboard"),variant:"primary",size:"lg",rightIcon:sn.jsx(ot,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"}),className:"group",children:"Go to Dashboard"}):sn.jsx(Il,{onClick:()=>n("/auth"),variant:"primary",size:"lg",rightIcon:sn.jsx(ot,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"}),className:"group",children:"Start Earning Today"}),sn.jsx(Il,{variant:"outline",size:"lg",leftIcon:sn.jsx(wr,{className:"w-5 h-5"}),children:"See How it Works"})]}),sn.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-gray-200 shadow-lg max-w-md mx-auto",children:[sn.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Early earnings this week:"}),sn.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",a.payout.toFixed(1),"k"]}),sn.jsxs("div",{className:"text-xs text-gray-500",children:["Average per early user: $",a.earnings]})]})]})})]}),sn.jsx("section",{className:"bg-gradient-to-r from-orange-50 to-red-50 border-b border-gray-100 py-16",children:sn.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:sn.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between space-y-8 lg:space-y-0 lg:space-x-12",children:[sn.jsxs("div",{className:"lg:w-1/2",children:[sn.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Brands & Businesses"}),sn.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"Connect with authentic creators and build campaigns that drive real engagement from day one."}),sn.jsxs("div",{className:"space-y-3 mb-6",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(St,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),sn.jsx("span",{className:"text-gray-700",children:"Work with vetted early adopters"})]}),sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(St,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),sn.jsx("span",{className:"text-gray-700",children:"Track campaign performance"})]}),sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(St,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),sn.jsx("span",{className:"text-gray-700",children:"Start with free sample campaigns"})]})]}),sn.jsx("button",{onClick:()=>{n(e?"/advertiser/onboarding":"/auth")},className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl",children:e?"Go to Advertising":"Start Advertising"})]}),sn.jsx("div",{className:"lg:w-1/2",children:sn.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg",children:[sn.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Early Advertiser Benefits"}),sn.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[sn.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[sn.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:"Free"}),sn.jsx("div",{className:"text-sm text-blue-700",children:"Sample campaigns"})]}),sn.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[sn.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:"95%"}),sn.jsx("div",{className:"text-sm text-purple-700",children:"Completion rate"})]}),sn.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[sn.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:"127"}),sn.jsx("div",{className:"text-sm text-green-700",children:"Early creators"})]}),sn.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[sn.jsx("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:"4.8"}),sn.jsx("div",{className:"text-sm text-orange-700",children:"Campaign rating"})]})]})]})})]})})}),sn.jsx("section",{className:"bg-white border-b border-gray-100 py-12",children:sn.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[sn.jsx("p",{className:"text-center text-gray-500 text-sm mb-8",children:"Creators earn across these platforms"}),sn.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-8 items-center",children:[{name:"Instagram",icon:"",color:"from-purple-500 to-pink-500",url:"https://instagram.com"},{name:"TikTok",icon:"",color:"from-gray-900 to-gray-700",url:"https://tiktok.com"},{name:"YouTube",icon:"",color:"from-red-600 to-red-500",url:"https://youtube.com"},{name:"Twitter",icon:"",color:"from-blue-500 to-blue-400",url:"https://twitter.com"},{name:"LinkedIn",icon:"",color:"from-blue-700 to-blue-600",url:"https://linkedin.com"},{name:"Facebook",icon:"",color:"from-blue-600 to-blue-500",url:"https://facebook.com"}].map(e=>sn.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"group text-center hover:scale-110 transition-all duration-200",children:[sn.jsx("div",{className:`bg-gradient-to-tr ${e.color} rounded-xl h-14 w-14 mx-auto flex items-center justify-center text-white font-bold text-xl group-hover:shadow-lg transition-shadow mb-2`,children:e.icon}),sn.jsx("p",{className:"text-xs text-gray-600 group-hover:text-gray-900 transition-colors",children:e.name})]},e.name))})]})}),sn.jsx("section",{id:"features",className:"py-20 bg-gray-50",children:sn.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[sn.jsxs("div",{className:"text-center mb-16",children:[sn.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Four Ways to Earn"}),sn.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Multiple income streams designed for creators, investors, and brands"})]}),c?sn.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>sn.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[sn.jsx(Ll,{className:"w-12 h-12 rounded-xl mb-4"}),sn.jsx(Ll,{className:"h-6 w-3/4 mb-3"}),sn.jsx(Ll,{className:"h-4 w-full mb-4"}),sn.jsx(Ll,{className:"h-4 w-1/2"})]},e))}):d?sn.jsx(Ul,{error:d,onRetry:h}):l?sn.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:l.map(e=>sn.jsx($l,{icon:e.icon,title:e.title,description:e.description,payout:e.payout,bgColorClass:e.bgColorClass,textColorClass:e.textColorClass},e.id))}):null]})}),sn.jsx("section",{id:"how-it-works",className:"py-20 bg-white",children:sn.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[sn.jsxs("div",{className:"text-center mb-16",children:[sn.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Start Earning in 3 Steps"}),sn.jsx("p",{className:"text-xl text-gray-600",children:"Simple. Fast. Profitable."})]}),sn.jsx("div",{className:"grid lg:grid-cols-3 gap-12 max-w-4xl mx-auto",children:[{step:"1",title:"Sign Up Free",description:"Create your account in under 2 minutes",colorClass:"bg-gradient-to-r from-blue-500 to-blue-600"},{step:"2",title:"Choose Your Path",description:"Select earning methods that fit your style",colorClass:"bg-gradient-to-r from-purple-500 to-purple-600"},{step:"3",title:"Get Paid",description:"Withdraw earnings instantly to your account",colorClass:"bg-gradient-to-r from-green-500 to-green-600"}].map((e,t)=>sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:`${e.colorClass} rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-6 text-white font-bold text-2xl shadow-lg`,children:e.step}),sn.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:e.title}),sn.jsx("p",{className:"text-gray-600",children:e.description})]},t))})]})}),sn.jsxs("section",{className:"py-20 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-700 text-white relative overflow-hidden",children:[sn.jsx("div",{className:"absolute inset-0 bg-black opacity-20"}),sn.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[sn.jsx("h2",{className:"text-3xl font-bold mb-12",children:"Growing with Our Early Community"}),sn.jsxs("div",{className:"grid lg:grid-cols-4 gap-8 mb-12",children:[sn.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[sn.jsx("div",{className:"text-4xl font-bold mb-2 text-yellow-300",children:a.earners.toLocaleString()}),sn.jsx("div",{className:"text-blue-100",children:"Early Adopters"})]}),sn.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[sn.jsxs("div",{className:"text-4xl font-bold mb-2 text-green-300",children:["$",a.payout.toFixed(1),"k"]}),sn.jsx("div",{className:"text-blue-100",children:"Paid Out So Far"})]}),sn.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[sn.jsx("div",{className:"text-4xl font-bold mb-2 text-pink-300",children:"4.8"}),sn.jsx("div",{className:"text-blue-100",children:"Early User Rating"})]}),sn.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[sn.jsxs("div",{className:"text-4xl font-bold mb-2 text-orange-300",children:["$",a.earnings]}),sn.jsx("div",{className:"text-blue-100",children:"Average Weekly Earnings"})]})]}),sn.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl px-8 py-6 inline-block",children:sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(Dr,{className:"w-6 h-6 animate-pulse"}),sn.jsx("span",{className:"font-bold text-lg",children:"Be part of something new from the ground up"})]})})]})]}),sn.jsx("section",{id:"success-stories",className:"py-20 bg-gray-50",children:sn.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[sn.jsxs("div",{className:"text-center mb-16",children:[sn.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Real People, Real Results"}),sn.jsx("p",{className:"text-xl text-gray-600",children:"Success stories from our community"})]}),sn.jsx("div",{className:"grid lg:grid-cols-3 gap-8",children:[{name:"Sarah Chen",role:"Early Creator",earnings:"$247",timeframe:"first month",quote:"Made $25 on my first day with zero followers. Love being an early adopter!"},{name:"Mike Rodriguez",role:"Beta Tester",earnings:"$384",timeframe:"2 months",quote:"Getting in early feels amazing. The platform has real potential."},{name:"Local Coffee Co.",role:"Early Brand Partner",earnings:"Great reach",timeframe:"6 weeks",quote:"Loving the authentic engagement from real early users. Quality over quantity."}].map((e,t)=>sn.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-100",children:[sn.jsxs("div",{className:"flex items-center mb-6",children:[sn.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full mr-4"}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-bold text-gray-900",children:e.name}),sn.jsx("p",{className:"text-gray-600 text-sm",children:e.role})]})]}),sn.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-4",children:[sn.jsx("div",{className:"text-lg font-bold text-green-600",children:e.earnings}),sn.jsxs("div",{className:"text-xs text-green-700",children:["in ",e.timeframe]})]}),sn.jsxs("p",{className:"text-gray-700 italic",children:['"',e.quote,'"']}),sn.jsx("div",{className:"flex items-center text-yellow-500 mt-4",children:[...Array(5)].map((e,t)=>sn.jsx(Rr,{className:"w-4 h-4 fill-current"},t))})]},t))})]})}),sn.jsx("section",{className:"py-20 bg-gray-900 text-white",children:sn.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[sn.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-6",children:"Your Financial Freedom Starts Now"}),sn.jsx("p",{className:"text-xl text-gray-300 mb-8",children:"Join thousands of creators already earning on Promorang"}),sn.jsxs("button",{onClick:()=>{n(e?"/dashboard":"/auth")},className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-12 py-4 rounded-xl font-semibold text-lg transition-all duration-200 shadow-xl hover:shadow-2xl transform hover:-translate-y-1 inline-flex items-center",children:[e?"Go to Dashboard":"Start Earning Today",sn.jsx(Nt,{className:"ml-2 w-5 h-5"})]}),sn.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[sn.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:sn.jsxs("div",{className:"font-bold text-green-300 flex items-center justify-center",children:[sn.jsx(St,{className:"w-4 h-4 mr-2"}),"100% Free to Start"]})}),sn.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:sn.jsxs("div",{className:"font-bold text-yellow-300 flex items-center justify-center",children:[sn.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Grow Your Wealth"]})}),sn.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:sn.jsxs("div",{className:"font-bold text-blue-300 flex items-center justify-center",children:[sn.jsx(Mr,{className:"w-4 h-4 mr-2"}),"Secure & Trusted"]})})]})]})}),sn.jsx("footer",{className:"bg-gray-50 border-t border-gray-200 py-12",children:sn.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[sn.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[sn.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[sn.jsx("img",{src:"https://mocha-cdn.com/0198f6f0-5737-78cb-955a-4b0907aa1065/Promorang_logo_extended-03.png",alt:"Promorang",className:"h-8 w-auto mr-4"}),sn.jsx("p",{className:"text-gray-600 text-sm",children:"Transform your influence into income"})]}),sn.jsxs("div",{className:"flex space-x-8 text-sm text-gray-600",children:[sn.jsx("a",{href:"#",className:"hover:text-gray-900 transition-colors",children:"Privacy"}),sn.jsx("a",{href:"#",className:"hover:text-gray-900 transition-colors",children:"Terms"}),sn.jsx("a",{href:"#",className:"hover:text-gray-900 transition-colors",children:"Support"})]})]}),sn.jsx("div",{className:"border-t border-gray-200 mt-8 pt-8 text-center text-gray-500 text-sm",children:sn.jsx("p",{children:" 2024 Promorang. All rights reserved."})})]})})]})}function ql(){const{signIn:e,signUp:t,signInWithOAuth:r,demoLogin:n,isPending:a}=bn(),s=we(),[i,o]=u.useState(!1),[l,c]=u.useState(!1),[d,h]=u.useState({email:"",password:"",username:"",display_name:""}),[m,p]=u.useState(null),x=async e=>{p(null);try{const t=await n[e]();t.error?p("string"==typeof t.error?t.error:t.error.message||"Demo login failed"):s("/dashboard")}catch(t){const e=t instanceof Error?t.message:"Failed to login with demo account. Please try again.";p(e)}};return sn.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:sn.jsxs("div",{className:"max-w-md w-full space-y-8",children:[sn.jsxs("div",{className:"text-center",children:[sn.jsx("img",{src:"https://mocha-cdn.com/0198f6f0-5737-78cb-955a-4b0907aa1065/Promorang_logo_extended-03.png",alt:"Promorang",className:"h-12 w-auto mx-auto mb-4"}),sn.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:i?"Create Account":"Welcome Back"}),sn.jsx("p",{className:"mt-2 text-gray-600",children:i?"Join thousands of creators earning on Promorang":"Sign in to your account to continue earning"})]}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsx("p",{className:"text-center text-sm text-gray-500 font-medium",children:"Quick Demo Login:"}),sn.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[sn.jsx("button",{onClick:()=>x("creator"),disabled:a,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:opacity-50",children:sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:sn.jsx(Vr,{className:"w-4 h-4 text-blue-600"})}),sn.jsxs("div",{className:"text-left",children:[sn.jsx("div",{className:"font-medium",children:"Demo Creator"}),sn.jsx("div",{className:"text-xs text-gray-500",children:"creator@demo.com"})]})]})}),sn.jsx("button",{onClick:()=>x("investor"),disabled:a,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors disabled:opacity-50",children:sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:sn.jsx(Vr,{className:"w-4 h-4 text-purple-600"})}),sn.jsxs("div",{className:"text-left",children:[sn.jsx("div",{className:"font-medium",children:"Demo Investor"}),sn.jsx("div",{className:"text-xs text-gray-500",children:"investor@demo.com"})]})]})}),sn.jsx("button",{onClick:()=>x("advertiser"),disabled:a,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors disabled:opacity-50",children:sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:sn.jsx(Vr,{className:"w-4 h-4 text-orange-600"})}),sn.jsxs("div",{className:"text-left",children:[sn.jsx("div",{className:"font-medium",children:"Demo Advertiser"}),sn.jsx("div",{className:"text-xs text-gray-500",children:"advertiser@demo.com"})]})]})})]})]}),sn.jsxs("div",{className:"relative",children:[sn.jsx("div",{className:"absolute inset-0 flex items-center",children:sn.jsx("div",{className:"w-full border-t border-gray-300"})}),sn.jsx("div",{className:"relative flex justify-center text-sm",children:sn.jsx("span",{className:"px-2 bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 text-gray-500",children:"Or continue with"})})]}),sn.jsxs("button",{onClick:async()=>{p("");const e=await r("google");e?.error&&p(e.error)},disabled:a,className:"w-full flex justify-center items-center px-4 py-3 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:opacity-50",children:[sn.jsx(_t,{className:"w-5 h-5 mr-3 text-red-500"}),"Continue with Google"]}),sn.jsxs("div",{className:"relative",children:[sn.jsx("div",{className:"absolute inset-0 flex items-center",children:sn.jsx("div",{className:"w-full border-t border-gray-300"})}),sn.jsx("div",{className:"relative flex justify-center text-sm",children:sn.jsx("span",{className:"px-2 bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 text-gray-500",children:"Or use email"})})]}),sn.jsxs("form",{className:"space-y-6",onSubmit:async r=>{r.preventDefault(),p("");try{if(i){if(!d.email||!d.password||!d.username)return void p("Please fill in all required fields");const e=await t(d.email,d.password);e.error?p("string"==typeof e.error?e.error:e.error.message||"Signup failed"):e.requiresConfirmation?p("Please check your email to confirm your account."):s("/dashboard")}else{if(!d.email||!d.password)return void p("Please enter email and password");const t=await e(d.email,d.password);t.error?p("string"==typeof t.error?t.error:t.error.message||"Login failed"):s("/dashboard")}}catch(n){const e=n instanceof Error?n.message:"An unexpected error occurred. Please try again.";p(e)}},children:[m&&sn.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:"string"==typeof m?m:m instanceof Error?m.message:"An error occurred"}),sn.jsxs("div",{children:[sn.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),sn.jsxs("div",{className:"relative",children:[sn.jsx(lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),sn.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:d.email,onChange:e=>h({...d,email:e.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your email"})]})]}),i&&sn.jsxs(sn.Fragment,{children:[sn.jsxs("div",{children:[sn.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),sn.jsxs("div",{className:"relative",children:[sn.jsx(Vr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),sn.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:d.username,onChange:e=>h({...d,username:e.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Choose a username"})]})]}),sn.jsxs("div",{children:[sn.jsx("label",{htmlFor:"display_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name (Optional)"}),sn.jsxs("div",{className:"relative",children:[sn.jsx(Vr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),sn.jsx("input",{id:"display_name",name:"display_name",type:"text",value:d.display_name,onChange:e=>h({...d,display_name:e.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Your display name"})]})]})]}),sn.jsxs("div",{children:[sn.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),sn.jsxs("div",{className:"relative",children:[sn.jsx(sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),sn.jsx("input",{id:"password",name:"password",type:l?"text":"password",required:!0,value:d.password,onChange:e=>h({...d,password:e.target.value}),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:i?"Create a password":"Enter your password"}),sn.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?sn.jsx(Ft,{className:"w-5 h-5"}):sn.jsx(zt,{className:"w-5 h-5"})})]}),!i&&sn.jsx("div",{className:"mt-1 text-right",children:sn.jsx("a",{href:"/auth/reset-password",className:"text-sm font-medium text-blue-600 hover:text-blue-500 hover:underline",onClick:e=>{e.preventDefault(),s("/auth/reset-password")},children:"Forgot password?"})})]}),sn.jsx("button",{type:"submit",disabled:a,className:"w-full flex justify-center items-center px-4 py-3 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:a?sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),sn.jsx("span",{children:i?"Creating Account...":"Signing In..."})]}):sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("span",{children:i?"Create Account":"Sign In"}),sn.jsx(ot,{className:"w-4 h-4"})]})})]}),sn.jsx("div",{className:"text-center",children:sn.jsxs("p",{className:"text-sm text-gray-600",children:[i?"Already have an account?":"Don't have an account?",sn.jsx("button",{type:"button",onClick:()=>{o(!i),p(""),h({email:"",password:"",username:"",display_name:""})},className:"ml-1 font-medium text-blue-600 hover:text-blue-500 transition-colors",children:i?"Sign in instead":"Create one here"})]})}),sn.jsx("div",{className:"text-center",children:sn.jsx("button",{onClick:()=>s("/"),className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:" Back to Home"})})]})})}function Wl({content:e,wallet:t,isOpen:r,onClose:n,onPurchase:a}){const[s,i]=u.useState(1),[o,l]=u.useState(!1);if(!r)return null;const c=s*e.share_price,d=t&&t.balance>=c,h=Math.min(e.available_shares,t?Math.floor(t.balance/e.share_price):0);return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:sn.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-6",children:[sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Buy Content Shares"}),sn.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsxs("div",{className:"space-y-4",children:[sn.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[sn.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:e.title}),sn.jsxs("div",{className:"flex items-center justify-between text-sm",children:[sn.jsx("span",{className:"text-gray-600",children:"Platform:"}),sn.jsx("span",{className:"font-medium capitalize",children:e.platform})]}),sn.jsxs("div",{className:"flex items-center justify-between text-sm",children:[sn.jsx("span",{className:"text-gray-600",children:"Price per share:"}),sn.jsxs("span",{className:"font-bold text-green-600",children:["$",e.share_price.toFixed(2)]})]}),sn.jsxs("div",{className:"flex items-center justify-between text-sm",children:[sn.jsx("span",{className:"text-gray-600",children:"Available:"}),sn.jsxs("span",{className:"font-medium",children:[e.available_shares," shares"]})]})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of shares"}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("button",{type:"button",onClick:()=>i(Math.max(1,s-1)),disabled:s<=1,className:"w-8 h-8 bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed rounded text-gray-700 font-bold",children:"-"}),sn.jsx("input",{type:"number",value:s,onChange:e=>i(Math.max(1,Math.min(h,parseInt(e.target.value)||1))),min:"1",max:h,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-center"}),sn.jsx("button",{type:"button",onClick:()=>i(Math.min(h,s+1)),disabled:s>=h,className:"w-8 h-8 bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed rounded text-gray-700 font-bold",children:"+"})]}),sn.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Max: ",h," shares"]})]}),sn.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-2",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Rt,{className:"w-4 h-4 text-blue-600"}),sn.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Your Balance:"})]}),sn.jsxs("span",{className:"font-bold text-blue-900",children:["$",(t?.balance||0).toFixed(2)]})]}),sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Ur,{className:"w-4 h-4 text-green-600"}),sn.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Cost:"})]}),sn.jsxs("span",{className:"font-bold text-gray-900",children:["$",c.toFixed(2)]})]})]}),!d&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:sn.jsxs("p",{className:"text-sm text-red-700",children:["Insufficient balance to purchase ",s," shares"]})}),sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),sn.jsx("button",{onClick:async()=>{if(d&&!(s<1)){l(!0);try{await a(e,s),n()}catch(t){}finally{l(!1)}}},disabled:!d||o||s<1,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",children:o?"Processing...":`Buy ${s} Share${s>1?"s":""}`})]})]})]})})}const Kl=()=>[{id:"listing-demo-1",content_id:"content-demo-1",content_title:"Launch Campaign: Social Buzz",content_thumbnail:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=600&q=80",owner_id:"00000000-0000-0000-0000-000000000001",owner_name:"Demo Creator",quantity:60,remaining_quantity:40,ask_price:12.5,market_price:12.2,status:"active",created_at:new Date(Date.now()-72e5).toISOString(),expires_at:new Date(Date.now()+1728e5).toISOString()}],Vl=()=>[{id:"offer-demo-1",content_id:"content-demo-1",buyer_id:"00000000-0000-0000-0000-000000000005",seller_id:"00000000-0000-0000-0000-000000000001",quantity:25,bid_price:12.75,status:"pending",message:"Happy to take at a slight premium. Can settle within 24h.",content_title:"Launch Campaign: Social Buzz",created_at:new Date(Date.now()-108e5).toISOString(),expires_at:new Date(Date.now()+756e5).toISOString()},{id:"offer-demo-2",content_id:"content-demo-2",buyer_id:"00000000-0000-0000-0000-000000000001",seller_id:"00000000-0000-0000-0000-000000000004",quantity:30,bid_price:18,status:"pending",message:"Would love to take this block before the next update drop.",content_title:"Creator Toolkit Walkthrough",created_at:new Date(Date.now()-216e5).toISOString(),expires_at:new Date(Date.now()+108e6).toISOString()}],Hl=async e=>{try{const t=await kl(`/api/shares/offers?role=${e}`,{credentials:"include"});if(!t.ok)return Vl();return(await t.json()).offers||Vl()}catch(t){return Vl()}},Gl=async e=>{try{const t=await kl("/api/shares/create",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e.userId,target_url:e.targetUrl,campaign_id:e.campaignId,content_id:e.contentId})});if(!t.ok){const e=await t.json().catch(()=>({}));throw new Error(e.error||"Unable to create share link")}return(await t.json()).data}catch(t){throw t instanceof Error?t:new Error("Failed to create share link")}},Yl="telemetry.session-id",Jl=[];let Zl=null;const Ql=()=>{if("undefined"==typeof window)return`srv-${Date.now()}`;let e=sessionStorage.getItem(Yl);if(!e){e="undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():`session-${Math.random().toString(36).slice(2,10)}`,sessionStorage.setItem(Yl,e)}return e},Xl=()=>{Zl||(Zl=setTimeout(()=>{ec()},3e3))},ec=async()=>{if(Zl&&(clearTimeout(Zl),Zl=null),0===Jl.length)return;const e=Jl.splice(0,Jl.length);try{await kl("/api/telemetry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(t){Jl.unshift(...e),Xl()}};function tc(e,t={},r={}){const n={session_id:Ql(),event_type:e,payload:t,user_id:r.userId};Jl.push(n),Xl()}function rc({user:e,contentId:t,contentTitle:r,isOpen:n,onClose:a,onSuccess:s}){const[i,o]=u.useState("instagram"),[l,c]=u.useState(""),[d,h]=u.useState(""),[m,p]=u.useState(!1),[x,f]=u.useState(!1),[g,y]=u.useState(null),b=u.useMemo(()=>{if(!e)return 0;const t="super"===e.user_tier?2:"premium"===e.user_tier?1.5:1;return Math.floor(10*t)},[e]);if(u.useEffect(()=>{if(!n||!e?.id||!t)return;const r=`${window.location.origin}/content/${t}`;c(""),h(""),(async()=>{p(!0),y(null);try{const n=await Gl({userId:e.id,targetUrl:r,contentId:t});c(n.url),h(n.id),tc("share_created",{shareId:n.id,contentId:t??null,platform:i},{userId:e.id}),s()}catch(n){y(n instanceof Error?n.message:"Unable to generate share link")}finally{p(!1)}})()},[n,e?.id,t]),!n||!e)return null;const v=async e=>{try{await navigator.clipboard.writeText(e),f(!0),setTimeout(()=>f(!1),2e3)}catch(t){}},j=r?`Check out this content: "${r}" on Promorang!`:"Discover amazing content and earn while you engage on Promorang!",w=`${j} ${l||"https://promorang.com"}`,N=[{id:"facebook",label:"Facebook",icon:sn.jsx(Ut,{className:"w-4 h-4"}),handler:()=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(l)}`,"_blank","width=600,height=400")},{id:"twitter",label:"Twitter",icon:sn.jsx(Wr,{className:"w-4 h-4"}),handler:()=>{const e=encodeURIComponent(w);window.open(`https://twitter.com/intent/tweet?text=${e}`,"_blank","width=600,height=400")}},{id:"whatsapp",label:"WhatsApp",icon:sn.jsx(mr,{className:"w-4 h-4"}),handler:()=>window.open(`https://wa.me/?text=${encodeURIComponent(w)}`,"_blank")},{id:"email",label:"Email",icon:sn.jsx(lr,{className:"w-4 h-4"}),handler:()=>{const e=encodeURIComponent("Check out this content on Promorang"),t=encodeURIComponent(w);window.location.href=`mailto:?subject=${e}&body=${t}`}}];return sn.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:sn.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md shadow-2xl",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-6",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Ar,{className:"w-6 h-6 text-orange-600"}),sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Share Content"})]}),sn.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsxs("div",{className:"space-y-6",children:[sn.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-lg p-4",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsx("span",{className:"text-sm font-medium text-orange-900",children:"Share Rewards"}),sn.jsxs("p",{className:"text-xs text-orange-700 mt-1",children:["Base 10 pts  tier multiplier (",e.user_tier,")"]})]}),sn.jsx("span",{className:"text-2xl font-bold text-orange-600",children:b})]})}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Platform"}),sn.jsx("div",{className:"grid grid-cols-2 gap-2",children:["instagram","tiktok","twitter","facebook","linkedin"].map(e=>sn.jsx("button",{onClick:()=>o(e),className:"p-3 rounded-lg border-2 transition "+(i===e?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"),children:sn.jsx("span",{className:"text-sm font-medium capitalize",children:e})},e))})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Suggested Share Text"}),sn.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[sn.jsx("p",{className:"text-sm text-gray-700 mb-2",children:w}),sn.jsxs("button",{onClick:()=>v(w),className:"flex items-center space-x-2 text-sm font-medium text-orange-600 hover:text-orange-700",children:[x?sn.jsx(jt,{className:"w-4 h-4"}):sn.jsx(At,{className:"w-4 h-4"}),sn.jsx("span",{children:x?"Copied!":"Copy Text"})]})]})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Share Link"}),sn.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:m?sn.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[sn.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-gray-300 border-t-transparent rounded-full"}),sn.jsx("span",{children:"Generating secure link"})]}):l?sn.jsxs(sn.Fragment,{children:[sn.jsx("p",{className:"text-sm text-gray-700 break-all mb-2",children:l}),sn.jsxs("div",{className:"flex items-center gap-3",children:[sn.jsxs("button",{onClick:()=>v(l),className:"flex items-center space-x-2 text-sm text-blue-600 hover:text-blue-700",children:[x?sn.jsx(jt,{className:"w-4 h-4"}):sn.jsx(At,{className:"w-4 h-4"}),sn.jsx("span",{children:x?"Link Copied!":"Copy Link"})]}),sn.jsxs("button",{onClick:async()=>{if(!e?.id||!t)return;const r=`${window.location.origin}/content/${t}`;p(!0),y(null);try{const n=await Gl({userId:e.id,targetUrl:r,contentId:t});c(n.url),h(n.id),tc("share_created",{shareId:n.id,contentId:t??null,platform:i,regenerated:!0},{userId:e.id}),s()}catch(n){y(n instanceof Error?n.message:"Unable to regenerate share link")}finally{p(!1)}},className:"flex items-center space-x-2 text-sm text-gray-500 hover:text-gray-700",children:[sn.jsx(_r,{className:"w-4 h-4"}),sn.jsx("span",{children:"Refresh link"})]})]})]}):sn.jsx("p",{className:"text-sm text-red-600",children:g||"Unable to generate link. Try again shortly."})}),sn.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Use this link in your post or bio. Rewards trigger automatically when we detect qualified engagement."})]}),sn.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[sn.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"How It Works"}),sn.jsxs("ol",{className:"text-sm text-blue-700 space-y-1",children:[sn.jsx("li",{children:"1. Copy the suggested text or craft your own message."}),sn.jsx("li",{children:"2. Share the secure link on your selected platform."}),sn.jsxs("li",{children:["3. Earn ",b," points when your share drives engagement."]})]})]}),g&&!m&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:sn.jsx("p",{className:"text-sm text-red-700",children:g})}),sn.jsx("div",{className:"grid grid-cols-2 gap-2",children:N.map(e=>sn.jsxs("button",{onClick:e.handler,disabled:!l,className:"flex items-center justify-center space-x-2 p-3 bg-gray-900 text-white rounded-lg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-800 transition-colors",children:[e.icon,sn.jsx("span",{children:e.label})]},e.id))}),"undefined"!=typeof navigator&&"share"in navigator&&l&&sn.jsxs("button",{onClick:()=>navigator.share?.({title:r,text:j,url:l}),className:"w-full flex items-center justify-center space-x-2 p-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-colors",children:[sn.jsx(Ar,{className:"w-4 h-4"}),sn.jsx("span",{children:"Share via"})]}),sn.jsx("div",{className:"flex justify-end",children:sn.jsx("button",{onClick:a,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Close"})})]})]})})}function nc({user:e,contentId:t,contentTitle:r,contentPlatform:n,contentUrl:a,isOpen:s,onClose:i,onSuccess:o}){const[l,c]=u.useState("like"),[d,h]=u.useState(""),[m,p]=u.useState(null),[x,f]=u.useState(!1),[g,y]=u.useState(null);if(!s||!e)return null;const b=[{id:"like",name:"Like",description:"Like the post on the original platform",icon:""},{id:"comment",name:"Comment",description:"Leave a meaningful comment",icon:""},{id:"share",name:"Share/Repost",description:"Share or repost the content",icon:""},{id:"save",name:"Save/Bookmark",description:"Save or bookmark the content",icon:""},{id:"repost",name:"Story/Repost",description:"Share to your story or timeline",icon:""}],v=(()=>{const t={like:10,comment:30,save:50,share:100,repost:120}[l]||10,r=(e=>{switch(e){case"super":return 2;case"premium":return 1.5;default:return 1}})(e.user_tier),n=Math.floor(t*r);return{points:n,keys:Math.ceil(n/20),multiplier:r}})();return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:sn.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-6",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Lt,{className:"w-6 h-6 text-purple-600"}),sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"External Move"})]}),sn.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsxs("div",{className:"space-y-6",children:[r&&sn.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[sn.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:r}),sn.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[sn.jsx("span",{className:"capitalize",children:n}),a&&sn.jsxs(sn.Fragment,{children:[sn.jsx("span",{children:""}),sn.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-700 underline",children:"View Original"})]})]})]}),sn.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-4",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-2",children:[sn.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Reward for External Move"}),sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("span",{className:"text-2xl font-bold text-purple-600",children:v.points}),sn.jsx("span",{className:"text-sm text-purple-700",children:"points"}),sn.jsxs("div",{className:"flex items-center space-x-1",children:[sn.jsx(Xt,{className:"w-4 h-4 text-orange-500"}),sn.jsx("span",{className:"text-sm font-bold text-orange-600",children:v.keys})]})]})]}),sn.jsxs("div",{className:"text-xs text-purple-700",children:["10x more than in-app actions  ",v.multiplier,"x ",e.user_tier," tier multiplier"]})]}),sn.jsxs("div",{children:[sn.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["What did you do on ",n,"?"]}),sn.jsx("div",{className:"grid grid-cols-1 gap-2",children:b.map(e=>sn.jsx("button",{onClick:()=>c(e.id),className:"p-3 rounded-lg border-2 text-left transition-colors "+(l===e.id?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("span",{className:"text-xl",children:e.icon}),sn.jsxs("div",{children:[sn.jsx("div",{className:"font-medium",children:e.name}),sn.jsx("div",{className:"text-sm text-gray-600",children:e.description})]})]})},e.id))})]}),sn.jsxs("div",{className:"space-y-4",children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Proof of Action *"}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Link to your action (optional if uploading image)"}),sn.jsx("input",{type:"url",value:d,onChange:e=>h(e.target.value),placeholder:"https://instagram.com/p/your-post/...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Or upload a screenshot"}),sn.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-purple-400 transition-colors",children:[sn.jsx("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files?.[0];t&&p(t)},className:"hidden",id:"proof-upload"}),sn.jsx("label",{htmlFor:"proof-upload",className:"cursor-pointer",children:m?sn.jsxs("div",{className:"space-y-2",children:[sn.jsx(St,{className:"w-8 h-8 text-green-600 mx-auto"}),sn.jsx("p",{className:"text-sm font-medium text-green-700",children:m.name}),sn.jsx("p",{className:"text-xs text-gray-600",children:"Click to change"})]}):sn.jsxs("div",{className:"space-y-2",children:[sn.jsx(ft,{className:"w-8 h-8 text-gray-400 mx-auto"}),sn.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload screenshot"}),sn.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG up to 10MB"})]})})]})]})]}),sn.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[sn.jsx(kt,{className:"w-4 h-4 text-blue-600"}),sn.jsx("span",{className:"font-medium text-blue-900",children:"How it works"})]}),sn.jsxs("ol",{className:"text-sm text-blue-700 space-y-1 pl-4",children:[sn.jsxs("li",{children:["1. Go to the original content on ",n]}),sn.jsxs("li",{children:["2. Perform the selected action (",b.find(e=>e.id===l)?.name,")"]}),sn.jsx("li",{children:"3. Copy the URL or take a screenshot as proof"}),sn.jsxs("li",{children:["4. Submit here to earn ",v.points," points + ",v.keys," keys!"]})]})]}),g&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:sn.jsx("p",{className:"text-sm text-red-700",children:g})}),sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsx("button",{onClick:i,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),sn.jsx("button",{onClick:async()=>{if(d.trim()||m){f(!0),y(null);try{let e="";if(m){(new FormData).append("image",m),e=URL.createObjectURL(m)}const r=await fetch("/api/users/external-move",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({move_type:l,content_id:t,content_platform:n,content_url:a,proof_url:d||e,proof_type:m?"image":"url"})});if(r.ok){const e=await r.json();o(),i();const t=document.createElement("div");t.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-bounce",t.innerHTML=`\n          <div class="flex items-center space-x-2">\n            <span class="text-lg"></span>\n            <div>\n              <div class="font-semibold">+${e.points_earned} points!</div>\n              <div class="text-xs opacity-90">+${e.keys_earned} keys  External move verified</div>\n            </div>\n          </div>\n        `,document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},4e3),h(""),p(null),c("like")}else{const e=await r.json();y(e.error||"Failed to record external move")}}catch(e){y("Network error occurred")}finally{f(!1)}}else y("Please provide proof URL or upload a screenshot")},disabled:!d.trim()&&!m||x,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2",children:x?sn.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):sn.jsxs(sn.Fragment,{children:[sn.jsx(Kr,{className:"w-4 h-4"}),sn.jsx("span",{children:"Submit Proof"})]})})]})]})]})})}var ac,sc,ic;"undefined"!=typeof window&&window.addEventListener("beforeunload",()=>{if(0===Jl.length)return;const e=JSON.stringify(Jl.splice(0,Jl.length));navigator.sendBeacon?.("/api/telemetry",e)}),(sc=ac||(ac={})).assertEqual=e=>{},sc.assertIs=function(e){},sc.assertNever=function(e){throw new Error},sc.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},sc.getValidEnumValues=e=>{const t=sc.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),r={};for(const n of t)r[n]=e[n];return sc.objectValues(r)},sc.objectValues=e=>sc.objectKeys(e).map(function(t){return e[t]}),sc.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},sc.find=(e,t)=>{for(const r of e)if(t(r))return r},sc.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,sc.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},sc.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(ic||(ic={})).mergeShapes=(e,t)=>({...e,...t});const oc=ac.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),lc=e=>{switch(typeof e){case"undefined":return oc.undefined;case"string":return oc.string;case"number":return Number.isNaN(e)?oc.nan:oc.number;case"boolean":return oc.boolean;case"function":return oc.function;case"bigint":return oc.bigint;case"symbol":return oc.symbol;case"object":return Array.isArray(e)?oc.array:null===e?oc.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?oc.promise:"undefined"!=typeof Map&&e instanceof Map?oc.map:"undefined"!=typeof Set&&e instanceof Set?oc.set:"undefined"!=typeof Date&&e instanceof Date?oc.date:oc.object;default:return oc.unknown}},cc=ac.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class dc extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(n);else if("invalid_return_type"===a.code)n(a.returnTypeError);else if("invalid_arguments"===a.code)n(a.argumentsError);else if(0===a.path.length)r._errors.push(t(a));else{let e=r,n=0;for(;n<a.path.length;){const r=a.path[n];n===a.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(a))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof dc))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ac.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},r=[];for(const n of this.issues)if(n.path.length>0){const r=n.path[0];t[r]=t[r]||[],t[r].push(e(n))}else r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}dc.create=e=>new dc(e);const uc=(e,t)=>{let r;switch(e.code){case cc.invalid_type:r=e.received===oc.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case cc.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,ac.jsonStringifyReplacer)}`;break;case cc.unrecognized_keys:r=`Unrecognized key(s) in object: ${ac.joinValues(e.keys,", ")}`;break;case cc.invalid_union:r="Invalid input";break;case cc.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ac.joinValues(e.options)}`;break;case cc.invalid_enum_value:r=`Invalid enum value. Expected ${ac.joinValues(e.options)}, received '${e.received}'`;break;case cc.invalid_arguments:r="Invalid function arguments";break;case cc.invalid_return_type:r="Invalid function return type";break;case cc.invalid_date:r="Invalid date";break;case cc.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:ac.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case cc.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case cc.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case cc.custom:r="Invalid input";break;case cc.invalid_intersection_types:r="Intersection results could not be merged";break;case cc.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case cc.not_finite:r="Number must be finite";break;default:r=t.defaultError,ac.assertNever(e)}return{message:r}};let hc=uc;function mc(e,t){const r=hc,n=(e=>{const{data:t,path:r,errorMaps:n,issueData:a}=e,s=[...r,...a.path||[]],i={...a,path:s};if(void 0!==a.message)return{...a,path:s,message:a.message};let o="";const l=n.filter(e=>!!e).slice().reverse();for(const c of l)o=c(i,{data:t,defaultError:o}).message;return{...a,path:s,message:o}})({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===uc?void 0:uc].filter(e=>!!e)});e.common.issues.push(n)}class pc{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return xc;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const n of t){const e=await n.key,t=await n.value;r.push({key:e,value:t})}return pc.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:a}=n;if("aborted"===t.status)return xc;if("aborted"===a.status)return xc;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"===t.value||void 0===a.value&&!n.alwaysSet||(r[t.value]=a.value)}return{status:e.value,value:r}}}const xc=Object.freeze({status:"aborted"}),fc=e=>({status:"dirty",value:e}),gc=e=>({status:"valid",value:e}),yc=e=>"aborted"===e.status,bc=e=>"dirty"===e.status,vc=e=>"valid"===e.status,jc=e=>"undefined"!=typeof Promise&&e instanceof Promise;var wc,Nc;(Nc=wc||(wc={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},Nc.toString=e=>"string"==typeof e?e:e?.message;class _c{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const kc=(e,t)=>{if(vc(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new dc(e.common.issues);return this._error=t,this._error}}};function Sc(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:a};return{errorMap:(t,a)=>{const{message:s}=e;return"invalid_enum_value"===t.code?{message:s??a.defaultError}:void 0===a.data?{message:s??n??a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:s??r??a.defaultError}},description:a}}class Cc{get description(){return this._def.description}_getType(e){return lc(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:lc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new pc,ctx:{common:e.parent.common,data:e.data,parsedType:lc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(jc(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lc(e)},n=this._parseSync({data:e,path:r.path,parent:r});return kc(r,n)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lc(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:t});return vc(r)?{value:r.value}:{issues:t.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>vc(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lc(e)},n=this._parse({data:e,path:r.path,parent:r}),a=await(jc(n)?n:Promise.resolve(n));return kc(r,a)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{const a=e(t),s=()=>n.addIssue({code:cc.custom,...r(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(s(),!1)):!!a||(s(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new Sd({schema:this,typeName:Id.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return Cd.create(this,this._def)}nullable(){return Od.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return dd.create(this)}promise(){return kd.create(this,this._def)}or(e){return md.create([this,e],this._def)}and(e){return xd.create(this,e,this._def)}transform(e){return new Sd({...Sc(this._def),schema:this,typeName:Id.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Ed({...Sc(this._def),innerType:this,defaultValue:t,typeName:Id.ZodDefault})}brand(){return new Ad({typeName:Id.ZodBranded,type:this,...Sc(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Pd({...Sc(this._def),innerType:this,catchValue:t,typeName:Id.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Md.create(this,e)}readonly(){return Dd.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Oc=/^c[^\s-]{8,}$/i,Ec=/^[0-9a-z]+$/,Pc=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Tc=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ac=/^[a-z0-9_-]{21}$/i,Mc=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Dc=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ic=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Rc;const $c=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Lc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Fc=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,zc=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Uc=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Bc=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,qc="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Wc=new RegExp(`^${qc}$`);function Kc(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function Vc(e){return new RegExp(`^${Kc(e)}$`)}function Hc(e){let t=`${qc}T${Kc(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function Gc(e,t){return!("v4"!==t&&t||!$c.test(e))||!("v6"!==t&&t||!Fc.test(e))}function Yc(e,t){if(!Mc.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return"object"==typeof a&&null!==a&&((!("typ"in a)||"JWT"===a?.typ)&&(!!a.alg&&(!t||a.alg===t)))}catch{return!1}}function Jc(e,t){return!("v4"!==t&&t||!Lc.test(e))||!("v6"!==t&&t||!zc.test(e))}class Zc extends Cc{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==oc.string){const t=this._getOrReturnCtx(e);return mc(t,{code:cc.invalid_type,expected:oc.string,received:t.parsedType}),xc}const t=new pc;let r;for(const n of this._def.checks)if("min"===n.kind)e.data.length<n.value&&(r=this._getOrReturnCtx(e,r),mc(r,{code:cc.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("max"===n.kind)e.data.length>n.value&&(r=this._getOrReturnCtx(e,r),mc(r,{code:cc.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("length"===n.kind){const a=e.data.length>n.value,s=e.data.length<n.value;(a||s)&&(r=this._getOrReturnCtx(e,r),a?mc(r,{code:cc.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):s&&mc(r,{code:cc.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),t.dirty())}else if("email"===n.kind)Ic.test(e.data)||(r=this._getOrReturnCtx(e,r),mc(r,{validation:"email",code:cc.invalid_string,message:n.message}),t.dirty());else if("emoji"===n.kind)Rc||(Rc=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Rc.test(e.data)||(r=this._getOrReturnCtx(e,r),mc(r,{validation:"emoji",code:cc.invalid_string,message:n.message}),t.dirty());else if("uuid"===n.kind)Tc.test(e.data)||(r=this._getOrReturnCtx(e,r),mc(r,{validation:"uuid",code:cc.invalid_string,message:n.message}),t.dirty());else if("nanoid"===n.kind)Ac.test(e.data)||(r=this._getOrReturnCtx(e,r),mc(r,{validation:"nanoid",code:cc.invalid_string,message:n.message}),t.dirty());else if("cuid"===n.kind)Oc.test(e.data)||(r=this._getOrReturnCtx(e,r),mc(r,{validation:"cuid",code:cc.invalid_string,message:n.message}),t.dirty());else if("cuid2"===n.kind)Ec.test(e.data)||(r=this._getOrReturnCtx(e,r),mc(r,{validation:"cuid2",code:cc.invalid_string,message:n.message}),t.dirty());else if("ulid"===n.kind)Pc.test(e.data)||(r=this._getOrReturnCtx(e,r),mc(r,{validation:"ulid",code:cc.invalid_string,message:n.message}),t.dirty());else if("url"===n.kind)try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),mc(r,{validation:"url",code:cc.invalid_string,message:n.message}),t.dirty()}else if("regex"===n.kind){n.regex.lastIndex=0;n.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),mc(r,{validation:"regex",code:cc.invalid_string,message:n.message}),t.dirty())}else if("trim"===n.kind)e.data=e.data.trim();else if("includes"===n.kind)e.data.includes(n.value,n.position)||(r=this._getOrReturnCtx(e,r),mc(r,{code:cc.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),t.dirty());else if("toLowerCase"===n.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===n.kind)e.data=e.data.toUpperCase();else if("startsWith"===n.kind)e.data.startsWith(n.value)||(r=this._getOrReturnCtx(e,r),mc(r,{code:cc.invalid_string,validation:{startsWith:n.value},message:n.message}),t.dirty());else if("endsWith"===n.kind)e.data.endsWith(n.value)||(r=this._getOrReturnCtx(e,r),mc(r,{code:cc.invalid_string,validation:{endsWith:n.value},message:n.message}),t.dirty());else if("datetime"===n.kind){Hc(n).test(e.data)||(r=this._getOrReturnCtx(e,r),mc(r,{code:cc.invalid_string,validation:"datetime",message:n.message}),t.dirty())}else if("date"===n.kind){Wc.test(e.data)||(r=this._getOrReturnCtx(e,r),mc(r,{code:cc.invalid_string,validation:"date",message:n.message}),t.dirty())}else if("time"===n.kind){Vc(n).test(e.data)||(r=this._getOrReturnCtx(e,r),mc(r,{code:cc.invalid_string,validation:"time",message:n.message}),t.dirty())}else"duration"===n.kind?Dc.test(e.data)||(r=this._getOrReturnCtx(e,r),mc(r,{validation:"duration",code:cc.invalid_string,message:n.message}),t.dirty()):"ip"===n.kind?Gc(e.data,n.version)||(r=this._getOrReturnCtx(e,r),mc(r,{validation:"ip",code:cc.invalid_string,message:n.message}),t.dirty()):"jwt"===n.kind?Yc(e.data,n.alg)||(r=this._getOrReturnCtx(e,r),mc(r,{validation:"jwt",code:cc.invalid_string,message:n.message}),t.dirty()):"cidr"===n.kind?Jc(e.data,n.version)||(r=this._getOrReturnCtx(e,r),mc(r,{validation:"cidr",code:cc.invalid_string,message:n.message}),t.dirty()):"base64"===n.kind?Uc.test(e.data)||(r=this._getOrReturnCtx(e,r),mc(r,{validation:"base64",code:cc.invalid_string,message:n.message}),t.dirty()):"base64url"===n.kind?Bc.test(e.data)||(r=this._getOrReturnCtx(e,r),mc(r,{validation:"base64url",code:cc.invalid_string,message:n.message}),t.dirty()):ac.assertNever(n);return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:cc.invalid_string,...wc.errToObj(r)})}_addCheck(e){return new Zc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...wc.errToObj(e)})}url(e){return this._addCheck({kind:"url",...wc.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...wc.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...wc.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...wc.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...wc.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...wc.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...wc.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...wc.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...wc.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...wc.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...wc.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...wc.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...wc.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...wc.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...wc.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...wc.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...wc.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...wc.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...wc.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...wc.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...wc.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...wc.errToObj(t)})}nonempty(e){return this.min(1,wc.errToObj(e))}trim(){return new Zc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Zc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Zc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Qc(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}Zc.create=e=>new Zc({checks:[],typeName:Id.ZodString,coerce:e?.coerce??!1,...Sc(e)});class Xc extends Cc{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==oc.number){const t=this._getOrReturnCtx(e);return mc(t,{code:cc.invalid_type,expected:oc.number,received:t.parsedType}),xc}let t;const r=new pc;for(const n of this._def.checks)if("int"===n.kind)ac.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),mc(t,{code:cc.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty());else if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),mc(t,{code:cc.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),mc(t,{code:cc.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else"multipleOf"===n.kind?0!==Qc(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),mc(t,{code:cc.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),mc(t,{code:cc.not_finite,message:n.message}),r.dirty()):ac.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,wc.toString(t))}gt(e,t){return this.setLimit("min",e,!1,wc.toString(t))}lte(e,t){return this.setLimit("max",e,!0,wc.toString(t))}lt(e,t){return this.setLimit("max",e,!1,wc.toString(t))}setLimit(e,t,r,n){return new Xc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:wc.toString(n)}]})}_addCheck(e){return new Xc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:wc.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:wc.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:wc.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:wc.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:wc.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:wc.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:wc.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:wc.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:wc.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&ac.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Xc.create=e=>new Xc({checks:[],typeName:Id.ZodNumber,coerce:e?.coerce||!1,...Sc(e)});class ed extends Cc{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==oc.bigint)return this._getInvalidInput(e);let t;const r=new pc;for(const n of this._def.checks)if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),mc(t,{code:cc.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),mc(t,{code:cc.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),mc(t,{code:cc.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):ac.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return mc(t,{code:cc.invalid_type,expected:oc.bigint,received:t.parsedType}),xc}gte(e,t){return this.setLimit("min",e,!0,wc.toString(t))}gt(e,t){return this.setLimit("min",e,!1,wc.toString(t))}lte(e,t){return this.setLimit("max",e,!0,wc.toString(t))}lt(e,t){return this.setLimit("max",e,!1,wc.toString(t))}setLimit(e,t,r,n){return new ed({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:wc.toString(n)}]})}_addCheck(e){return new ed({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:wc.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:wc.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:wc.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:wc.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:wc.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ed.create=e=>new ed({checks:[],typeName:Id.ZodBigInt,coerce:e?.coerce??!1,...Sc(e)});class td extends Cc{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==oc.boolean){const t=this._getOrReturnCtx(e);return mc(t,{code:cc.invalid_type,expected:oc.boolean,received:t.parsedType}),xc}return gc(e.data)}}td.create=e=>new td({typeName:Id.ZodBoolean,coerce:e?.coerce||!1,...Sc(e)});class rd extends Cc{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==oc.date){const t=this._getOrReturnCtx(e);return mc(t,{code:cc.invalid_type,expected:oc.date,received:t.parsedType}),xc}if(Number.isNaN(e.data.getTime())){return mc(this._getOrReturnCtx(e),{code:cc.invalid_date}),xc}const t=new pc;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),mc(r,{code:cc.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),mc(r,{code:cc.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):ac.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new rd({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:wc.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:wc.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}rd.create=e=>new rd({checks:[],coerce:e?.coerce||!1,typeName:Id.ZodDate,...Sc(e)});class nd extends Cc{_parse(e){if(this._getType(e)!==oc.symbol){const t=this._getOrReturnCtx(e);return mc(t,{code:cc.invalid_type,expected:oc.symbol,received:t.parsedType}),xc}return gc(e.data)}}nd.create=e=>new nd({typeName:Id.ZodSymbol,...Sc(e)});class ad extends Cc{_parse(e){if(this._getType(e)!==oc.undefined){const t=this._getOrReturnCtx(e);return mc(t,{code:cc.invalid_type,expected:oc.undefined,received:t.parsedType}),xc}return gc(e.data)}}ad.create=e=>new ad({typeName:Id.ZodUndefined,...Sc(e)});class sd extends Cc{_parse(e){if(this._getType(e)!==oc.null){const t=this._getOrReturnCtx(e);return mc(t,{code:cc.invalid_type,expected:oc.null,received:t.parsedType}),xc}return gc(e.data)}}sd.create=e=>new sd({typeName:Id.ZodNull,...Sc(e)});class id extends Cc{constructor(){super(...arguments),this._any=!0}_parse(e){return gc(e.data)}}id.create=e=>new id({typeName:Id.ZodAny,...Sc(e)});class od extends Cc{constructor(){super(...arguments),this._unknown=!0}_parse(e){return gc(e.data)}}od.create=e=>new od({typeName:Id.ZodUnknown,...Sc(e)});class ld extends Cc{_parse(e){const t=this._getOrReturnCtx(e);return mc(t,{code:cc.invalid_type,expected:oc.never,received:t.parsedType}),xc}}ld.create=e=>new ld({typeName:Id.ZodNever,...Sc(e)});class cd extends Cc{_parse(e){if(this._getType(e)!==oc.undefined){const t=this._getOrReturnCtx(e);return mc(t,{code:cc.invalid_type,expected:oc.void,received:t.parsedType}),xc}return gc(e.data)}}cd.create=e=>new cd({typeName:Id.ZodVoid,...Sc(e)});class dd extends Cc{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==oc.array)return mc(t,{code:cc.invalid_type,expected:oc.array,received:t.parsedType}),xc;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,a=t.data.length<n.exactLength.value;(e||a)&&(mc(t,{code:e?cc.too_big:cc.too_small,minimum:a?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(mc(t,{code:cc.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(mc(t,{code:cc.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new _c(t,e,t.path,r)))).then(e=>pc.mergeArray(r,e));const a=[...t.data].map((e,r)=>n.type._parseSync(new _c(t,e,t.path,r)));return pc.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new dd({...this._def,minLength:{value:e,message:wc.toString(t)}})}max(e,t){return new dd({...this._def,maxLength:{value:e,message:wc.toString(t)}})}length(e,t){return new dd({...this._def,exactLength:{value:e,message:wc.toString(t)}})}nonempty(e){return this.min(1,e)}}function ud(e){if(e instanceof hd){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=Cd.create(ud(n))}return new hd({...e._def,shape:()=>t})}return e instanceof dd?new dd({...e._def,type:ud(e.element)}):e instanceof Cd?Cd.create(ud(e.unwrap())):e instanceof Od?Od.create(ud(e.unwrap())):e instanceof fd?fd.create(e.items.map(e=>ud(e))):e}dd.create=(e,t)=>new dd({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Id.ZodArray,...Sc(t)});class hd extends Cc{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=ac.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==oc.object){const t=this._getOrReturnCtx(e);return mc(t,{code:cc.invalid_type,expected:oc.object,received:t.parsedType}),xc}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:a}=this._getCached(),s=[];if(!(this._def.catchall instanceof ld&&"strip"===this._def.unknownKeys))for(const o in r.data)a.includes(o)||s.push(o);const i=[];for(const o of a){const e=n[o],t=r.data[o];i.push({key:{status:"valid",value:o},value:e._parse(new _c(r,t,r.path,o)),alwaysSet:o in r.data})}if(this._def.catchall instanceof ld){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of s)i.push({key:{status:"valid",value:t},value:{status:"valid",value:r.data[t]}});else if("strict"===e)s.length>0&&(mc(r,{code:cc.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const n=r.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new _c(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of i){const r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>pc.mergeObjectSync(t,e)):pc.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return wc.errToObj,new hd({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{const n=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:wc.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new hd({...this._def,unknownKeys:"strip"})}passthrough(){return new hd({...this._def,unknownKeys:"passthrough"})}extend(e){return new hd({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new hd({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Id.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new hd({...this._def,catchall:e})}pick(e){const t={};for(const r of ac.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new hd({...this._def,shape:()=>t})}omit(e){const t={};for(const r of ac.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new hd({...this._def,shape:()=>t})}deepPartial(){return ud(this)}partial(e){const t={};for(const r of ac.objectKeys(this.shape)){const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}return new hd({...this._def,shape:()=>t})}required(e){const t={};for(const r of ac.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof Cd;)e=e._def.innerType;t[r]=e}return new hd({...this._def,shape:()=>t})}keyof(){return wd(ac.objectKeys(this.shape))}}hd.create=(e,t)=>new hd({shape:()=>e,unknownKeys:"strip",catchall:ld.create(),typeName:Id.ZodObject,...Sc(t)}),hd.strictCreate=(e,t)=>new hd({shape:()=>e,unknownKeys:"strict",catchall:ld.create(),typeName:Id.ZodObject,...Sc(t)}),hd.lazycreate=(e,t)=>new hd({shape:e,unknownKeys:"strip",catchall:ld.create(),typeName:Id.ZodObject,...Sc(t)});class md extends Cc{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const r=e.map(e=>new dc(e.ctx.common.issues));return mc(t,{code:cc.invalid_union,unionErrors:r}),xc});{let e;const n=[];for(const s of r){const r={...t,common:{...t.common,issues:[]},parent:null},a=s._parseSync({data:t.data,path:t.path,parent:r});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const a=n.map(e=>new dc(e));return mc(t,{code:cc.invalid_union,unionErrors:a}),xc}}get options(){return this._def.options}}function pd(e,t){const r=lc(e),n=lc(t);if(e===t)return{valid:!0,data:e};if(r===oc.object&&n===oc.object){const r=ac.objectKeys(t),n=ac.objectKeys(e).filter(e=>-1!==r.indexOf(e)),a={...e,...t};for(const s of n){const r=pd(e[s],t[s]);if(!r.valid)return{valid:!1};a[s]=r.data}return{valid:!0,data:a}}if(r===oc.array&&n===oc.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const a=pd(e[n],t[n]);if(!a.valid)return{valid:!1};r.push(a.data)}return{valid:!0,data:r}}return r===oc.date&&n===oc.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}md.create=(e,t)=>new md({options:e,typeName:Id.ZodUnion,...Sc(t)});class xd extends Cc{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(yc(e)||yc(n))return xc;const a=pd(e.value,n.value);return a.valid?((bc(e)||bc(n))&&t.dirty(),{status:t.value,value:a.data}):(mc(r,{code:cc.invalid_intersection_types}),xc)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}xd.create=(e,t,r)=>new xd({left:e,right:t,typeName:Id.ZodIntersection,...Sc(r)});class fd extends Cc{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==oc.array)return mc(r,{code:cc.invalid_type,expected:oc.array,received:r.parsedType}),xc;if(r.data.length<this._def.items.length)return mc(r,{code:cc.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),xc;!this._def.rest&&r.data.length>this._def.items.length&&(mc(r,{code:cc.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new _c(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>pc.mergeArray(t,e)):pc.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new fd({...this._def,rest:e})}}fd.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new fd({items:e,typeName:Id.ZodTuple,rest:null,...Sc(t)})};class gd extends Cc{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==oc.object)return mc(r,{code:cc.invalid_type,expected:oc.object,received:r.parsedType}),xc;const n=[],a=this._def.keyType,s=this._def.valueType;for(const i in r.data)n.push({key:a._parse(new _c(r,i,r.path,i)),value:s._parse(new _c(r,r.data[i],r.path,i)),alwaysSet:i in r.data});return r.common.async?pc.mergeObjectAsync(t,n):pc.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new gd(t instanceof Cc?{keyType:e,valueType:t,typeName:Id.ZodRecord,...Sc(r)}:{keyType:Zc.create(),valueType:e,typeName:Id.ZodRecord,...Sc(t)})}}class yd extends Cc{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==oc.map)return mc(r,{code:cc.invalid_type,expected:oc.map,received:r.parsedType}),xc;const n=this._def.keyType,a=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:n._parse(new _c(r,e,r.path,[s,"key"])),value:a._parse(new _c(r,t,r.path,[s,"value"]))}));if(r.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const r of s){const n=await r.key,a=await r.value;if("aborted"===n.status||"aborted"===a.status)return xc;"dirty"!==n.status&&"dirty"!==a.status||t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}})}{const e=new Map;for(const r of s){const n=r.key,a=r.value;if("aborted"===n.status||"aborted"===a.status)return xc;"dirty"!==n.status&&"dirty"!==a.status||t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}}}}yd.create=(e,t,r)=>new yd({valueType:t,keyType:e,typeName:Id.ZodMap,...Sc(r)});class bd extends Cc{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==oc.set)return mc(r,{code:cc.invalid_type,expected:oc.set,received:r.parsedType}),xc;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(mc(r,{code:cc.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(mc(r,{code:cc.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const a=this._def.valueType;function s(e){const r=new Set;for(const n of e){if("aborted"===n.status)return xc;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const i=[...r.data.values()].map((e,t)=>a._parse(new _c(r,e,r.path,t)));return r.common.async?Promise.all(i).then(e=>s(e)):s(i)}min(e,t){return new bd({...this._def,minSize:{value:e,message:wc.toString(t)}})}max(e,t){return new bd({...this._def,maxSize:{value:e,message:wc.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}bd.create=(e,t)=>new bd({valueType:e,minSize:null,maxSize:null,typeName:Id.ZodSet,...Sc(t)});class vd extends Cc{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}vd.create=(e,t)=>new vd({getter:e,typeName:Id.ZodLazy,...Sc(t)});class jd extends Cc{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return mc(t,{received:t.data,code:cc.invalid_literal,expected:this._def.value}),xc}return{status:"valid",value:e.data}}get value(){return this._def.value}}function wd(e,t){return new Nd({values:e,typeName:Id.ZodEnum,...Sc(t)})}jd.create=(e,t)=>new jd({value:e,typeName:Id.ZodLiteral,...Sc(t)});class Nd extends Cc{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return mc(t,{expected:ac.joinValues(r),received:t.parsedType,code:cc.invalid_type}),xc}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return mc(t,{received:t.data,code:cc.invalid_enum_value,options:r}),xc}return gc(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Nd.create(e,{...this._def,...t})}exclude(e,t=this._def){return Nd.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}Nd.create=wd;class _d extends Cc{_parse(e){const t=ac.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==oc.string&&r.parsedType!==oc.number){const e=ac.objectValues(t);return mc(r,{expected:ac.joinValues(e),received:r.parsedType,code:cc.invalid_type}),xc}if(this._cache||(this._cache=new Set(ac.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=ac.objectValues(t);return mc(r,{received:r.data,code:cc.invalid_enum_value,options:e}),xc}return gc(e.data)}get enum(){return this._def.values}}_d.create=(e,t)=>new _d({values:e,typeName:Id.ZodNativeEnum,...Sc(t)});class kd extends Cc{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==oc.promise&&!1===t.common.async)return mc(t,{code:cc.invalid_type,expected:oc.promise,received:t.parsedType}),xc;const r=t.parsedType===oc.promise?t.data:Promise.resolve(t.data);return gc(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}kd.create=(e,t)=>new kd({type:e,typeName:Id.ZodPromise,...Sc(t)});class Sd extends Cc{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Id.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,a={addIssue:e=>{mc(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===n.type){const e=n.transform(r.data,a);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return xc;const n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?xc:"dirty"===n.status||"dirty"===t.value?fc(n.value):n});{if("aborted"===t.value)return xc;const n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?xc:"dirty"===n.status||"dirty"===t.value?fc(n.value):n}}if("refinement"===n.type){const e=e=>{const t=n.refinement(e,a);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?xc:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?xc:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!vc(e))return xc;const s=n.transform(e.value,a);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>vc(e)?Promise.resolve(n.transform(e.value,a)).then(e=>({status:t.value,value:e})):xc)}ac.assertNever(n)}}Sd.create=(e,t,r)=>new Sd({schema:e,typeName:Id.ZodEffects,effect:t,...Sc(r)}),Sd.createWithPreprocess=(e,t,r)=>new Sd({schema:t,effect:{type:"preprocess",transform:e},typeName:Id.ZodEffects,...Sc(r)});class Cd extends Cc{_parse(e){return this._getType(e)===oc.undefined?gc(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Cd.create=(e,t)=>new Cd({innerType:e,typeName:Id.ZodOptional,...Sc(t)});class Od extends Cc{_parse(e){return this._getType(e)===oc.null?gc(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Od.create=(e,t)=>new Od({innerType:e,typeName:Id.ZodNullable,...Sc(t)});class Ed extends Cc{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===oc.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Ed.create=(e,t)=>new Ed({innerType:e,typeName:Id.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...Sc(t)});class Pd extends Cc{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return jc(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new dc(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new dc(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Pd.create=(e,t)=>new Pd({innerType:e,typeName:Id.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...Sc(t)});class Td extends Cc{_parse(e){if(this._getType(e)!==oc.nan){const t=this._getOrReturnCtx(e);return mc(t,{code:cc.invalid_type,expected:oc.nan,received:t.parsedType}),xc}return{status:"valid",value:e.data}}}Td.create=e=>new Td({typeName:Id.ZodNaN,...Sc(e)});class Ad extends Cc{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Md extends Cc{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?xc:"dirty"===e.status?(t.dirty(),fc(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})()}{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?xc:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new Md({in:e,out:t,typeName:Id.ZodPipeline})}}class Dd extends Cc{_parse(e){const t=this._def.innerType._parse(e),r=e=>(vc(e)&&(e.value=Object.freeze(e.value)),e);return jc(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}var Id,Rd;Dd.create=(e,t)=>new Dd({innerType:e,typeName:Id.ZodReadonly,...Sc(t)}),(Rd=Id||(Id={})).ZodString="ZodString",Rd.ZodNumber="ZodNumber",Rd.ZodNaN="ZodNaN",Rd.ZodBigInt="ZodBigInt",Rd.ZodBoolean="ZodBoolean",Rd.ZodDate="ZodDate",Rd.ZodSymbol="ZodSymbol",Rd.ZodUndefined="ZodUndefined",Rd.ZodNull="ZodNull",Rd.ZodAny="ZodAny",Rd.ZodUnknown="ZodUnknown",Rd.ZodNever="ZodNever",Rd.ZodVoid="ZodVoid",Rd.ZodArray="ZodArray",Rd.ZodObject="ZodObject",Rd.ZodUnion="ZodUnion",Rd.ZodDiscriminatedUnion="ZodDiscriminatedUnion",Rd.ZodIntersection="ZodIntersection",Rd.ZodTuple="ZodTuple",Rd.ZodRecord="ZodRecord",Rd.ZodMap="ZodMap",Rd.ZodSet="ZodSet",Rd.ZodFunction="ZodFunction",Rd.ZodLazy="ZodLazy",Rd.ZodLiteral="ZodLiteral",Rd.ZodEnum="ZodEnum",Rd.ZodEffects="ZodEffects",Rd.ZodNativeEnum="ZodNativeEnum",Rd.ZodOptional="ZodOptional",Rd.ZodNullable="ZodNullable",Rd.ZodDefault="ZodDefault",Rd.ZodCatch="ZodCatch",Rd.ZodPromise="ZodPromise",Rd.ZodBranded="ZodBranded",Rd.ZodPipeline="ZodPipeline",Rd.ZodReadonly="ZodReadonly";const $d=Zc.create,Ld=Xc.create,Fd=td.create,zd=id.create;ld.create;const Ud=dd.create,Bd=hd.create;md.create,xd.create,fd.create;const qd=gd.create,Wd=Nd.create;kd.create,Cd.create,Od.create,Bd({username:$d().optional(),display_name:$d().optional(),bio:$d().optional(),profile_image:$d().optional(),cover_image:$d().optional(),website:$d().optional(),location:$d().optional(),social_links:$d().optional()}),Bd({title:$d(),description:$d(),drop_type:$d(),platform:$d(),content_url:$d().url(),reward_amount:Ld().min(0),reward_currency:$d(),start_date:$d(),end_date:$d(),max_participants:Ld().min(1).optional(),requirements:qd(zd()),is_public:Fd().default(!0),is_featured:Fd().default(!1),is_approved:Fd().default(!1),status:Wd(["draft","active","completed","cancelled"]).default("draft"),difficulty:$d().optional(),category:$d().optional(),tags:Ud($d()).optional(),is_paid_drop:Fd().default(!1)}),Bd({application_message:$d()}),Bd({action:$d(),target_id:$d(),target_type:$d()}),Bd({from_currency:Wd(["points","gems"]),to_currency:Wd(["keys"]),amount:Ld().min(1)}),Bd({date:$d().optional()}),Bd({amount:Ld().min(200),payment_method:$d(),payment_details:qd(zd())}),Bd({payment_method:$d(),preference_data:qd(zd()),is_default:Fd().optional()}),Bd({package_id:$d(),gems:Ld().min(1),amount:Ld().min(.01),payment_method:$d()}),Bd({content_id:Ld().optional(),platform:$d(),content_url:$d(),metric:$d(),target_value:Ld(),end_date:$d(),description:$d().optional()}),Bd({prediction_amount:Ld().min(1),prediction_side:Wd(["over","under"]),forecast_id:$d()}),Bd({platform:$d(),content_url:$d(),metric:$d(),target_value:Ld(),end_date:$d(),initial_side:Wd(["over","under"])}),Bd({bet_amount:Ld().min(1),bet_side:Wd(["over","under"])});const Kd=Bd({platform:Wd(["instagram","tiktok","youtube","twitter","linkedin"]),title:$d().min(1),description:$d().optional(),content_url:$d().url(),thumbnail_url:$d().url().optional(),total_shares:Ld().min(1),share_price:Ld().min(0)});function Vd({isOpen:e,onClose:t,onSuccess:r,content:n}){const[a,s]=u.useState({platform:n.platform,title:n.title,description:n.description||"",platform_url:n.platform_url,media_url:n.media_url||"",total_shares:n.total_shares,share_price:n.share_price}),[i,o]=u.useState(!1),[l,c]=u.useState(null);if(u.useEffect(()=>{n&&s({platform:n.platform,title:n.title,description:n.description||"",platform_url:n.platform_url,media_url:n.media_url||"",total_shares:n.total_shares,share_price:n.share_price})},[n]),!e)return null;return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:sn.jsxs("div",{className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[sn.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Content"}),sn.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:i,children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsxs("form",{onSubmit:async e=>{e.preventDefault(),o(!0),c(null);try{if(!Kd.safeParse(a).success)return void c("Please check all required fields");const e=await fetch(`/api/content/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)});if(e.ok){const n=await e.json();r(n.content),t()}else{const t=await e.json();c(t.error||"Failed to update content")}}catch(s){c("Failed to update content")}finally{o(!1)}},className:"p-6 space-y-6",children:[l&&sn.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:l}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Platform *"}),sn.jsxs("select",{value:a.platform,onChange:e=>s({...a,platform:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",required:!0,disabled:i,children:[sn.jsx("option",{value:"",children:"Select platform"}),sn.jsx("option",{value:"instagram",children:"Instagram"}),sn.jsx("option",{value:"tiktok",children:"TikTok"}),sn.jsx("option",{value:"youtube",children:"YouTube"}),sn.jsx("option",{value:"twitter",children:"Twitter"}),sn.jsx("option",{value:"linkedin",children:"LinkedIn"})]})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Shares *"}),sn.jsx("input",{type:"number",min:"1",max:"1000",value:a.total_shares,onChange:e=>s({...a,total_shares:parseInt(e.target.value)||0}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",required:!0,disabled:i})]})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),sn.jsx("input",{type:"text",value:a.title,onChange:e=>s({...a,title:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"Enter content title",required:!0,disabled:i})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),sn.jsx("textarea",{value:a.description,onChange:e=>s({...a,description:e.target.value}),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"Describe your content...",disabled:i})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Platform URL *"}),sn.jsx("input",{type:"url",value:a.platform_url,onChange:e=>s({...a,platform_url:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"https://instagram.com/p/...",required:!0,disabled:i})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Media URL"}),sn.jsx("input",{type:"url",value:a.media_url,onChange:e=>s({...a,media_url:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"https://example.com/image.jpg",disabled:i})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Share Price (USD) *"}),sn.jsx("input",{type:"number",step:"0.0001",min:"0",value:a.share_price,onChange:e=>s({...a,share_price:parseFloat(e.target.value)||0}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"0.0100",required:!0,disabled:i})]}),sn.jsxs("div",{className:"flex space-x-4 pt-6 border-t border-gray-200",children:[sn.jsx("button",{type:"button",onClick:t,disabled:i,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),sn.jsx("button",{type:"submit",disabled:i,className:"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 disabled:opacity-50 flex items-center justify-center space-x-2",children:i?sn.jsxs(sn.Fragment,{children:[sn.jsx(ar,{className:"w-4 h-4 animate-spin"}),sn.jsx("span",{children:"Updating..."})]}):sn.jsxs(sn.Fragment,{children:[sn.jsx(Or,{className:"w-4 h-4"}),sn.jsx("span",{children:"Update Content"})]})})]})]})]})})}function Hd({isOpen:e,onClose:t,onConfirm:r,title:n,message:a,confirmText:s="Confirm",cancelText:i="Cancel",type:o="warning",loading:l=!1}){if(!e)return null;return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:sn.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[(()=>{switch(o){case"danger":return sn.jsx(Br,{className:"w-6 h-6 text-red-600"});case"success":return sn.jsx(St,{className:"w-6 h-6 text-green-600"});case"info":return sn.jsx(Zt,{className:"w-6 h-6 text-blue-600"});default:return sn.jsx(Br,{className:"w-6 h-6 text-yellow-600"})}})(),sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:n})]}),sn.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:l,children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsx("p",{className:"text-gray-600 mb-6",children:a}),sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsx("button",{onClick:t,disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors disabled:opacity-50",children:i}),sn.jsx("button",{onClick:r,disabled:l,className:`flex-1 px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 ${(()=>{switch(o){case"danger":return"bg-red-600 hover:bg-red-700 text-white";case"success":return"bg-green-600 hover:bg-green-700 text-white";case"info":return"bg-blue-600 hover:bg-blue-700 text-white";default:return"bg-yellow-600 hover:bg-yellow-700 text-white"}})()}`,children:l?sn.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[sn.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),sn.jsx("span",{children:"Processing..."})]}):s})]})]})})}function Gd({isOpen:e,onClose:t,contentId:r,contentTitle:n,contentUrl:a}){const[s,i]=u.useState(!1);if(!e)return null;const o=a||`${window.location.origin}/content/${r}`,l=`Check out this amazing content: "${n}" on Promorang!`;return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:sn.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-6",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Ar,{className:"w-6 h-6 text-blue-600"}),sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Share Content"})]}),sn.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[sn.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:n}),sn.jsx("p",{className:"text-sm text-gray-600 break-all",children:o})]}),sn.jsxs("div",{className:"space-y-4",children:[sn.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(o),i(!0),setTimeout(()=>i(!1),2e3)}catch(e){}},className:"w-full flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:sn.jsxs("div",{className:"flex items-center space-x-3",children:[s?sn.jsx(jt,{className:"w-5 h-5 text-green-600"}):sn.jsx(At,{className:"w-5 h-5 text-gray-600"}),sn.jsx("span",{className:"font-medium text-gray-900",children:s?"Copied!":"Copy Link"})]})}),sn.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[sn.jsxs("button",{onClick:()=>{const e=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(o)}`;window.open(e,"_blank","width=600,height=400")},className:"flex items-center justify-center space-x-2 p-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[sn.jsx(Ut,{className:"w-4 h-4"}),sn.jsx("span",{children:"Facebook"})]}),sn.jsxs("button",{onClick:()=>{const e=`https://twitter.com/intent/tweet?text=${encodeURIComponent(`${l} ${o}`)}`;window.open(e,"_blank","width=600,height=400")},className:"flex items-center justify-center space-x-2 p-3 bg-sky-500 text-white rounded-lg hover:bg-sky-600 transition-colors",children:[sn.jsx(Wr,{className:"w-4 h-4"}),sn.jsx("span",{children:"Twitter"})]}),sn.jsxs("button",{onClick:()=>{const e=`https://wa.me/?text=${encodeURIComponent(`${l} ${o}`)}`;window.open(e,"_blank")},className:"flex items-center justify-center space-x-2 p-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[sn.jsx(mr,{className:"w-4 h-4"}),sn.jsx("span",{children:"WhatsApp"})]}),sn.jsxs("button",{onClick:()=>{const e=encodeURIComponent("Check out this content on Promorang"),t=encodeURIComponent(`${l}\n\n${o}`);window.location.href=`mailto:?subject=${e}&body=${t}`},className:"flex items-center justify-center space-x-2 p-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[sn.jsx("span",{className:"text-sm",children:""}),sn.jsx("span",{children:"Email"})]})]}),"undefined"!=typeof window&&"share"in navigator&&sn.jsxs("button",{onClick:async()=>{if(navigator.share)try{await navigator.share({title:n,text:l,url:o})}catch(e){}},className:"w-full flex items-center justify-center space-x-2 p-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-colors",children:[sn.jsx(Ar,{className:"w-4 h-4"}),sn.jsx("span",{children:"Share via..."})]})]}),sn.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-3",children:sn.jsxs("p",{className:"text-xs text-blue-700",children:[" ",sn.jsx("strong",{children:"Tip:"})," Share this content to earn points and help creators grow their audience!"]})})]})})}function Yd({isOpen:e,onClose:t,user:r}){const[n,a]=u.useState([]),[s,i]=u.useState(!1);u.useEffect(()=>{e&&r&&o()},[e,r]);const o=async()=>{i(!0);try{const e=await fetch("/api/users/saved-content",{credentials:"include"});if(e.ok){const t=await e.json();a(t)}}catch(e){}finally{i(!1)}},l=e=>{switch(e){case"instagram":return"";case"tiktok":return"";case"youtube":return"";case"twitter":return"";case"linkedin":return"";default:return""}};return e?sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:sn.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[80vh] flex flex-col",children:[sn.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(ut,{className:"w-6 h-6 text-orange-600"}),sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Saved Content"}),sn.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-sm",children:n.length})]}),sn.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s?sn.jsx("div",{className:"flex items-center justify-center py-12",children:sn.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):0===n.length?sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx(ut,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),sn.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No saved content yet"}),sn.jsx("p",{className:"text-gray-600 mb-4",children:"Save content you want to revisit later by clicking the bookmark icon."}),sn.jsx("button",{onClick:t,className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Explore Content"})]}):sn.jsx("div",{className:"space-y-4",children:n.map(e=>{return sn.jsx("div",{className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors",children:sn.jsxs("div",{className:"flex items-start space-x-4",children:[sn.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center text-white text-xl flex-shrink-0",children:l(e.content_platform)}),sn.jsxs("div",{className:"flex-1 min-w-0",children:[sn.jsxs("div",{className:"flex items-start justify-between mb-2",children:[sn.jsx("h4",{className:"font-medium text-gray-900 truncate pr-2",children:e.content_title}),sn.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[sn.jsx("button",{onClick:()=>window.open(`/content/${e.content_id}`,"_blank"),className:"text-blue-600 hover:text-blue-700 p-1 rounded transition-colors",title:"View content",children:sn.jsx(zt,{className:"w-4 h-4"})}),sn.jsx("button",{onClick:()=>window.open(e.content_url,"_blank"),className:"text-purple-600 hover:text-purple-700 p-1 rounded transition-colors",title:"View original",children:sn.jsx(Lt,{className:"w-4 h-4"})}),sn.jsx("button",{onClick:()=>(async e=>{try{(await fetch(`/api/users/saved-content/${e}`,{method:"DELETE",credentials:"include"})).ok&&a(t=>t.filter(t=>t.content_id!==e))}catch(t){}})(e.content_id),className:"text-red-600 hover:text-red-700 p-1 rounded transition-colors",title:"Remove from saved",children:sn.jsx(zr,{className:"w-4 h-4"})})]})]}),sn.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[sn.jsx("div",{className:"flex items-center space-x-1",children:sn.jsxs("span",{children:["by ",e.creator_name]})}),sn.jsx("div",{className:"flex items-center space-x-1",children:sn.jsx("span",{className:"capitalize",children:e.content_platform})}),sn.jsxs("div",{className:"flex items-center space-x-1",children:[sn.jsx(xt,{className:"w-3 h-3"}),sn.jsxs("span",{children:["Saved ",(t=e.created_at,new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))]})]})]})]})]})},e.id);var t})})}),n.length>0&&sn.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:sn.jsx("p",{className:"text-xs text-gray-600 text-center",children:" Tip: Saved content is private and only visible to you. Use this to build your personal content library!"})})]})}):null}function Jd({variant:e,text:t,icon:r,onClick:n,disabled:a}){return sn.jsxs("button",{onClick:e=>n?.(e),disabled:a,className:`text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-2 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:hover:shadow-none ${(()=>{switch(e){case"orange":return"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600";case"blue":return"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600";case"purple":return"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600";default:return"bg-gray-500 hover:bg-gray-600"}})()}`,"aria-label":t,children:[r,sn.jsx("span",{children:t})]})}function Zd({content:e}){const t="number"==typeof e.share_price?e.share_price:Number(e.share_price??0),r=Number.isFinite(t)&&t>0?t:null;return sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"text-lg font-bold text-gray-900",children:r?`$${r.toFixed(2)}`:""}),sn.jsx("div",{className:"text-xs text-gray-500",children:"per share"})]})}function Qd({content:e}){const t=e.available_shares??0;return sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"text-lg font-bold text-blue-600",children:t>0?t:"0"}),sn.jsx("div",{className:"text-xs text-gray-500",children:"available"})]})}function Xd({content:e,onBuyShares:t,onPredict:r,onTip:n,onExternalMove:a,currentUser:s,onEdit:i,onDelete:o}){const l=e.available_shares??0,c=e.engagement_shares_remaining??0,d=t=>r=>{r.stopPropagation(),r.preventDefault(),t?.(e)},u=l<=0?c>0?"Paid shares are sold out. Share early to claim the remaining engagement shares.":"All shares have been claimed. Check back soon for the next drop.":c>0?"Paid shares are available. Share early to also lock in the limited engagement shares.":void 0;return sn.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 sm:gap-3 mt-4",children:[sn.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-3",children:[sn.jsx(Zd,{content:e}),sn.jsx(Qd,{content:e})]}),sn.jsxs("div",{className:"flex items-center justify-center sm:justify-end gap-2 flex-wrap",children:[sn.jsx(Jd,{variant:"orange",text:"Buy Shares",icon:sn.jsx(Ur,{className:"w-4 h-4"}),onClick:d(t),disabled:l<=0}),sn.jsx(Jd,{variant:"blue",text:"Predict",icon:sn.jsx(Lr,{className:"w-4 h-4"}),onClick:d(r)}),sn.jsx(Jd,{variant:"purple",text:"Tip Creator",icon:sn.jsx(Vt,{className:"w-4 h-4"}),onClick:d(n)})]}),u&&sn.jsx("p",{className:"text-xs text-gray-600 bg-gray-50 border border-gray-100 rounded-lg px-3 py-2",children:u}),s?.id===e.creator_id&&sn.jsxs("div",{className:"flex items-center justify-center sm:justify-end space-x-2 pt-3 border-t border-gray-100",children:[sn.jsx("button",{onClick:t=>{t.stopPropagation(),i?.(e)},className:"text-blue-600 hover:text-blue-800 text-sm font-medium px-3 py-1 rounded-md hover:bg-blue-50 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]","aria-label":"Edit content",children:"Edit"}),sn.jsx("span",{className:"text-gray-300",children:""}),sn.jsx("button",{onClick:t=>{t.stopPropagation(),o?.(e)},className:"text-red-600 hover:text-red-800 text-sm font-medium px-3 py-1 rounded-md hover:bg-red-50 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]","aria-label":"Delete content",children:"Delete"})]}),sn.jsx("div",{className:"pt-3 border-t border-gray-100",children:sn.jsxs("button",{onClick:t=>{t.stopPropagation(),a?.(e)},className:"flex items-center justify-center space-x-2 px-4 py-2 text-sm text-gray-600 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] w-full sm:w-auto","aria-label":"Move to external platform",children:[sn.jsx(Lt,{className:"w-4 h-4"}),sn.jsx("span",{children:"Move to External"})]})})]})}function eu({icon:e,count:t,action:r,onClick:n,color:a="gray"}){return sn.jsxs("button",{onClick:n,className:`flex items-center space-x-1 text-gray-500 ${(()=>{switch(a){case"red":return"hover:text-red-500";case"blue":return"hover:text-blue-500";case"purple":return"hover:text-purple-500";case"green":return"hover:text-green-500";default:return"hover:text-gray-700"}})()} transition-all duration-200 hover:scale-[1.05] active:scale-[0.95] px-2 py-1 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-400/50`,"aria-label":`${r} (${t})`,children:[sn.jsx(e,{className:"w-4 h-4","aria-hidden":"true"}),sn.jsx("span",{className:"text-sm",children:t})]})}function tu({content:e,onSocialAction:t,onShare:r,onComment:n}){return sn.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 pt-4 border-t border-gray-100",children:[sn.jsxs("div",{className:"flex items-center justify-center sm:justify-start space-x-1 flex-wrap",children:[void 0!==e.views_count&&sn.jsxs("div",{className:"flex items-center space-x-1 text-gray-500 px-2 py-1 transition-all duration-200 hover:text-gray-700 hover:bg-gray-50 rounded-md",children:[sn.jsx(zt,{className:"w-4 h-4"}),sn.jsxs("span",{className:"text-sm",children:[(a=e.views_count,a>=1e6?(a/1e6).toFixed(1)+"M":a>=1e3?(a/1e3).toFixed(1)+"K":a.toString())," views"]})]}),sn.jsxs("div",{className:"flex items-center space-x-1",children:[sn.jsx(eu,{icon:Gt,count:e.likes_count||0,action:"like",onClick:()=>t?.("like",e.id),color:"red"}),sn.jsx(eu,{icon:mr,count:e.comments_count||0,action:"comment",onClick:()=>n?.(e),color:"blue"}),sn.jsx(eu,{icon:kr,count:e.reposts_count||0,action:"repost",onClick:()=>t?.("repost",e.id),color:"purple"}),sn.jsx(eu,{icon:Ar,count:0,action:"share",onClick:()=>r?.(e),color:"green"})]})]}),e.engagement_shares_total>0&&sn.jsxs("div",{className:"flex items-center justify-center sm:justify-end space-x-2 text-xs text-gray-500",role:"group","aria-label":"Engagement progress",children:[sn.jsxs("div",{className:"flex items-center space-x-1",children:[sn.jsx("div",{className:"w-20 h-2 bg-gray-200 rounded-full overflow-hidden",role:"progressbar","aria-valuenow":e.engagement_shares_total-e.engagement_shares_remaining,"aria-valuemin":0,"aria-valuemax":e.engagement_shares_total,"aria-label":`${e.engagement_shares_remaining} free shares remaining out of ${e.engagement_shares_total} total`,children:sn.jsx("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:(e.engagement_shares_total-e.engagement_shares_remaining)/e.engagement_shares_total*100+"%"}})}),sn.jsxs("span",{className:"text-green-600 font-medium","aria-label":`${e.engagement_shares_remaining} free shares remaining`,children:[e.engagement_shares_remaining,"/",e.engagement_shares_total]})]}),sn.jsx("span",{children:"free shares"})]})]});var a}function ru({content:e,onBuyShares:t,onShare:r,onSocialAction:n,onExternalMove:a,onTip:s,currentUser:i,onEdit:o,onDelete:l,onComment:c,onNavigate:d,onPredict:u,isSponsored:h}){const m=()=>{d&&d(e)},p=e=>null==e||Number.isNaN(e)?"0":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString(),x=e.total_shares??0,f=e.available_shares??0,g=Math.max(x-f,0),y=e.engagement_shares_remaining??0,b="number"==typeof e.current_revenue?e.current_revenue:Number(e.current_revenue)||0,v=e.created_at?new Date(e.created_at):null,j=v&&!Number.isNaN(v.getTime())?v.toLocaleDateString():"Recently";return sn.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5 cursor-pointer hover:shadow-lg transition-all duration-200 hover:border-gray-200 max-w-[720px] mx-auto w-full focus-within:outline focus-within:outline-2 focus-within:outline-primary/40 focus-within:ring-2 focus-within:ring-primary/20 "+(h||e.is_sponsored?"ring-2 ring-orange-200 ring-opacity-50":""),onClick:m,tabIndex:0,role:"article","aria-label":`Content by ${e.creator_name||e.creator_username||"Unknown Creator"}: ${e.title}`,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),m())},children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[e.is_demo&&sn.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200 flex items-center space-x-1 transition-all duration-200 hover:bg-purple-200 hover:scale-[1.02]",children:[sn.jsx(Dr,{className:"w-3 h-3"}),sn.jsx("span",{children:"Demo"})]}),(h||e.is_sponsored)&&sn.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-gradient-to-r from-orange-100 to-amber-100 text-orange-800 border border-orange-200 flex items-center space-x-1 transition-all duration-200 hover:bg-orange-200 hover:scale-[1.02]",children:[sn.jsx($r,{className:"w-3 h-3"}),sn.jsx("span",{children:"Sponsored"})]})]}),void 0!==e.views_count&&sn.jsxs("div",{className:"flex items-center space-x-1 text-gray-500 transition-all duration-200 hover:text-gray-700 hover:bg-gray-50 px-2 py-1 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-400/50",role:"text","aria-label":`${p(e.views_count)} views`,children:[sn.jsx(zt,{className:"w-4 h-4","aria-hidden":"true"}),sn.jsxs("span",{className:"text-sm",children:[p(e.views_count)," views"]})]})]}),e.media_url&&sn.jsx("div",{className:"mb-4 rounded-lg overflow-hidden bg-gray-50",onClick:e=>e.stopPropagation(),children:sn.jsx("img",{src:e.media_url,alt:e.title,className:"w-full h-48 object-cover hover:scale-105 transition-transform duration-200",onError:e=>{e.target.style.display="none"}})}),sn.jsxs("div",{className:"mb-4",onClick:e=>e.stopPropagation(),children:[sn.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-2 hover:text-orange-600 transition-colors leading-tight cursor-pointer focus:outline-none focus:text-orange-600",children:e.title}),e.description&&sn.jsx("p",{className:"text-gray-600 text-sm leading-relaxed line-clamp-2 mb-3",children:e.description}),sn.jsxs("div",{className:"flex items-start justify-between mb-3",children:[sn.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[sn.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center text-white font-semibold text-sm transition-all duration-200 hover:scale-[1.05] cursor-pointer focus:outline-none focus:ring-2 focus:ring-orange-400/50 focus:scale-[1.05]","aria-label":`Creator: ${e.creator_name||e.creator_username||"Unknown"}`,children:(e.creator_name||e.creator_username||"U")[0].toUpperCase()}),sn.jsxs("div",{className:"flex-1",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("span",{className:"font-semibold text-gray-900 text-base hover:text-orange-600 transition-colors cursor-pointer focus:outline-none focus:text-orange-600",role:"text","aria-label":`Creator name: ${e.creator_name||e.creator_username||"Unknown Creator"}`,children:e.creator_name||e.creator_username||"Unknown Creator"}),sn.jsx("span",{className:"text-gray-400",children:""}),sn.jsx("span",{className:"text-sm text-gray-500",children:j}),e.platform&&sn.jsxs(sn.Fragment,{children:[sn.jsx("span",{className:"text-gray-400",children:""}),sn.jsx("span",{className:"text-sm text-gray-500 capitalize",children:e.platform})]})]}),sn.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[sn.jsxs("span",{className:"text-xs text-gray-500",children:[p(g)," shares owned"]}),sn.jsx("span",{className:"text-xs text-gray-400",children:""}),sn.jsxs("span",{className:"text-xs text-gray-500",children:[p(x)," total shares"]}),y>0&&sn.jsxs(sn.Fragment,{children:[sn.jsx("span",{className:"text-xs text-gray-400",children:""}),sn.jsxs("span",{className:"text-xs text-green-600 font-medium",children:[p(y)," free shares available"]})]})]})]})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsxs("div",{className:"flex items-center space-x-1 text-green-600 mb-1 transition-all duration-200 hover:text-green-700 hover:bg-green-50 px-2 py-1 rounded-md cursor-pointer focus:outline-none focus:ring-2 focus:ring-green-400/50",role:"text","aria-label":`Current revenue: $${b.toFixed(2)}`,children:[sn.jsx(Ur,{className:"w-4 h-4"}),sn.jsxs("span",{className:"text-sm font-semibold",children:["$",b.toFixed(2)]})]}),sn.jsx("div",{className:"text-xs text-gray-500",children:"Current Revenue"})]})]}),e.platform_url&&sn.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-100 transition-all duration-200 hover:bg-gray-100 hover:border-gray-200",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Lt,{className:"w-4 h-4 text-gray-500","aria-hidden":"true"}),sn.jsxs("span",{className:"text-sm text-gray-600",children:["View on ",e.platform]})]}),sn.jsx("a",{href:e.platform_url,target:"_blank",rel:"noopener noreferrer",className:"text-orange-600 hover:text-orange-800 text-sm font-medium transition-all duration-200 hover:bg-orange-50 px-2 py-1 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-400/50 focus:bg-orange-50",onClick:e=>e.stopPropagation(),"aria-label":`Open content on ${e.platform} (opens in new tab)`,children:"Open Link"})]})})]}),sn.jsx(tu,{content:e,onSocialAction:n,onShare:r,onComment:c}),sn.jsx(Xd,{content:e,onBuyShares:t,onPredict:u,onTip:s,currentUser:i,onEdit:o,onDelete:l})]})}function nu({drop:e,onApply:t}){const r=we(),n=e.preview_image||e.content_url||`https://images.unsplash.com/photo-1503264116251-35a269479413?auto=format&fit=crop&w=1200&q=80&sat=-15&sig=${e.id}`;return sn.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5 cursor-pointer hover:shadow-lg transition-all duration-200 hover:border-gray-200",onClick:()=>{r(Cn(String(e.id)))},children:[sn.jsx("div",{className:"mb-4 -mx-5 -mt-5",children:sn.jsx("div",{className:"h-40 w-full overflow-hidden rounded-t-xl",children:sn.jsx("img",{src:n,alt:e.title,className:"h-full w-full object-cover transition-transform duration-300 hover:scale-105",onError:t=>{t.target.src=`https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=1200&q=80&sig=${e.id}`}})})}),sn.jsxs("div",{className:"flex items-start justify-between mb-4",children:[sn.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[sn.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:(e.creator_name||"U")[0].toUpperCase()}),sn.jsxs("div",{className:"flex-1",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("span",{className:"font-semibold text-gray-900 text-base hover:text-purple-600 transition-colors",children:e.creator_name||"Unknown Creator"}),sn.jsx("span",{className:"text-gray-400",children:""}),sn.jsx("span",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),sn.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[sn.jsxs("span",{className:"text-xs text-gray-500",children:[e.current_participants," participants"]}),sn.jsx("span",{className:"text-xs text-gray-400",children:""}),sn.jsx("span",{className:"text-xs text-gray-500",children:e.platform||"Any platform"})]})]})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsxs("div",{className:"flex items-center space-x-1 text-purple-600 mb-1",children:[sn.jsx(ct,{className:"w-4 h-4"}),sn.jsxs("span",{className:"text-sm font-semibold",children:[e.gem_pool_remaining," gems"]})]}),sn.jsx("div",{className:"text-xs text-gray-500",children:"Pool Remaining"})]})]}),sn.jsxs("div",{className:"mb-4",onClick:e=>e.stopPropagation(),children:[sn.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-2 hover:text-purple-600 transition-colors leading-tight",children:e.title}),e.description&&sn.jsx("p",{className:"text-gray-600 text-sm leading-relaxed line-clamp-2",children:e.description})]}),sn.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[sn.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${(e=>{switch((e||"").toLowerCase()){case"active":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"completed":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),sn.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${(e=>{switch((e||"").toLowerCase()){case"easy":return"bg-green-100 text-green-800 border-green-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"hard":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(e.difficulty)}`,children:((e,t="Unknown")=>{const r=e&&e.trim().length>0?e:t;return r.charAt(0).toUpperCase()+r.slice(1)})(e.difficulty)}),e.is_proof_drop&&sn.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:"Proof Drop"}),e.is_paid_drop&&sn.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800 border border-emerald-200",children:"Paid Drop"})]}),sn.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[sn.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[sn.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[sn.jsx(Lr,{className:"w-4 h-4 text-orange-500"}),sn.jsx("span",{className:"text-xs text-gray-500",children:"Cost"})]}),sn.jsx("div",{className:"text-lg font-bold text-gray-900",children:e.key_cost}),sn.jsx("div",{className:"text-xs text-gray-500",children:"keys"})]}),sn.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[sn.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[sn.jsx(Rr,{className:"w-4 h-4 text-yellow-500"}),sn.jsx("span",{className:"text-xs text-gray-500",children:"Reward"})]}),sn.jsx("div",{className:"text-lg font-bold text-purple-600",children:e.gem_reward_base}),sn.jsx("div",{className:"text-xs text-gray-500",children:"gems"})]}),sn.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[sn.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[sn.jsx(Ur,{className:"w-4 h-4 text-green-500"}),sn.jsx("span",{className:"text-xs text-gray-500",children:"ROI"})]}),sn.jsxs("div",{className:"text-lg font-bold text-green-600",children:[0===e.key_cost?0:(e.gem_reward_base/e.key_cost).toFixed(1),"x"]}),sn.jsx("div",{className:"text-xs text-gray-500",children:"per key"})]}),sn.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[sn.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[sn.jsx(Hr,{className:"w-4 h-4 text-blue-500"}),sn.jsx("span",{className:"text-xs text-gray-500",children:"Participants"})]}),sn.jsx("div",{className:"text-lg font-bold text-blue-600",children:e.current_participants}),sn.jsx("div",{className:"text-xs text-gray-500",children:"joined"})]})]}),sn.jsxs("div",{className:"flex items-center justify-between mb-4 text-sm text-gray-600",children:[sn.jsxs("div",{className:"flex items-center space-x-1",children:[sn.jsx(Pt,{className:"w-4 h-4"}),sn.jsx("span",{children:e.deadline_at?(e=>{const t=new Date(e),r=new Date,n=t.getTime()-r.getTime(),a=Math.ceil(n/864e5);return a<0?`${Math.abs(a)} days overdue`:0===a?"Due today":1===a?"Due tomorrow":`${a} days left`})(e.deadline_at):"No deadline"})]}),e.requirements&&sn.jsxs("div",{className:"text-xs",children:["Requirements: ",e.requirements.length>30?e.requirements.substring(0,30)+"...":e.requirements]})]}),sn.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[sn.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[sn.jsx(xt,{className:"w-4 h-4"}),sn.jsxs("span",{children:["Created ",new Date(e.created_at).toLocaleDateString()]})]}),sn.jsx("button",{onClick:r=>{r.stopPropagation(),t?.(e)},className:"px-6 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-2 "+("active"===e.status?.toLowerCase()?"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white hover:shadow-lg hover:-translate-y-0.5":"bg-gray-100 text-gray-500 cursor-not-allowed"),disabled:"active"!==e.status?.toLowerCase(),children:"active"===e.status?.toLowerCase()?sn.jsxs(sn.Fragment,{children:[sn.jsx("span",{children:"Apply Now"}),sn.jsx(Lr,{className:"w-4 h-4"})]}):sn.jsxs(sn.Fragment,{children:[sn.jsx("span",{children:"Not Available"}),sn.jsx(Pt,{className:"w-4 h-4"})]})})]})]})}Bd({content_id:Ld(),shares_count:Ld().min(1)}),Wd(["instagram","tiktok","youtube","twitter"]),Wd(["content_clipping","reviews","ugc_creation","affiliate_referral","surveys","challenges_events","engagement"]),Wd(["easy","medium","hard"]),Wd(["social_media","content_creation","marketing","review","survey"]),Wd(["easy","medium","hard"]);const au=()=>sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-orange-100 to-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:sn.jsx(Ur,{className:"w-12 h-12 text-orange-500"})}),sn.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No personalized content yet"}),sn.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"We're building your personalized feed based on your interests and activity. Check back soon or explore other content in the meantime!"}),sn.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[sn.jsxs("button",{onClick:()=>window.location.href="/create",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 mx-auto sm:mx-0",children:[sn.jsx(Nr,{className:"w-4 h-4"}),sn.jsx("span",{children:"Create Content"})]}),sn.jsxs("button",{onClick:()=>{window.location.reload()},className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center space-x-2 mx-auto sm:mx-0",children:[sn.jsx(_r,{className:"w-4 h-4"}),sn.jsx("span",{children:"Refresh Feed"})]})]})]});function su({isOpen:e,onClose:t,forecast:r,onPredictionPlaced:n}){const[a,s]=u.useState("over"),[i,o]=u.useState(""),[l,c]=u.useState(!1),[d,h]=u.useState(""),[m,p]=u.useState({balance:0});u.useEffect(()=>{e&&x()},[e]);const x=async()=>{try{const e=await fetch("/api/users/me/wallets");if(e.ok){const t=(await e.json()).find(e=>"USD"===e.currency_type);p({balance:t?.balance||0})}}catch(e){}},f=i?(parseFloat(i)*r.odds).toFixed(2):"0";return e?sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:sn.jsxs("div",{className:"bg-white rounded-lg max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[sn.jsx("div",{className:"p-6 border-b border-gray-200",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[sn.jsx(Ur,{className:"w-5 h-5 mr-2 text-blue-600"}),"Make Your Prediction"]}),sn.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:sn.jsx(Jr,{className:"w-6 h-6"})})]})}),sn.jsxs("div",{className:"p-6",children:[sn.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-3",children:[sn.jsx("h3",{className:"font-medium text-gray-900",children:"Forecast Details"}),sn.jsx("span",{className:"text-sm text-gray-500",children:r.platform})]}),r.content_title&&sn.jsx("p",{className:"text-sm text-gray-700 mb-2",children:r.content_title}),sn.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[sn.jsxs("div",{children:[sn.jsx("p",{className:"text-gray-500",children:"Metric"}),sn.jsxs("p",{className:"font-medium flex items-center",children:[sn.jsx(Lr,{className:"w-4 h-4 mr-1 text-blue-600"}),r.forecast_type," ",r.target_value.toLocaleString()]})]}),sn.jsxs("div",{children:[sn.jsx("p",{className:"text-gray-500",children:"Current Pool"}),sn.jsxs("p",{className:"font-medium text-green-600",children:["$",r.pool_size.toFixed(2)]})]}),sn.jsxs("div",{children:[sn.jsx("p",{className:"text-gray-500",children:"Odds"}),sn.jsxs("p",{className:"font-medium text-blue-600",children:[r.odds,"x payout"]})]}),sn.jsxs("div",{children:[sn.jsx("p",{className:"text-gray-500",children:"Time Left"}),sn.jsxs("p",{className:"font-medium flex items-center",children:[sn.jsx(Pt,{className:"w-4 h-4 mr-1 text-gray-400"}),(e=>{const t=new Date,r=new Date(e).getTime()-t.getTime();if(r<=0)return"Expired";const n=Math.floor(r/36e5),a=Math.floor(r%36e5/6e4);if(n>24){return`${Math.floor(n/24)}d ${n%24}h`}return`${n}h ${a}m`})(r.expires_at)]})]})]}),sn.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[sn.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Creator's Prediction"}),sn.jsxs("p",{className:"text-sm font-medium text-blue-600",children:[r.creator_side.toUpperCase(),"  $",r.creator_initial_amount.toFixed(2)," staked"]})]})]}),sn.jsxs("form",{onSubmit:async e=>{e.preventDefault(),c(!0),h("");try{const e=await fetch(`/api/social-forecasts/${r.id}/predict`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prediction_amount:parseFloat(i),prediction_side:a})});if(e.ok)n(),t(),o(""),s("over");else{const t=await e.json();h(t.error||"Failed to place prediction")}}catch(l){h("Failed to place prediction")}finally{c(!1)}},className:"space-y-6",children:[d&&sn.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex items-center",children:[sn.jsx(kt,{className:"w-4 h-4 text-red-600 mr-2"}),sn.jsx("p",{className:"text-red-600 text-sm",children:d})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Your Prediction"}),sn.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[sn.jsx("button",{type:"button",onClick:()=>s("over"),className:"p-4 rounded-lg border-2 transition-colors "+("over"===a?"border-green-500 bg-green-50 text-green-700":"border-gray-200 bg-white text-gray-700 hover:border-green-300"),children:sn.jsxs("div",{className:"text-center",children:[sn.jsx("p",{className:"font-semibold",children:"OVER"}),sn.jsxs("p",{className:"text-xs mt-1",children:["Will exceed ",r.target_value.toLocaleString()]})]})}),sn.jsx("button",{type:"button",onClick:()=>s("under"),className:"p-4 rounded-lg border-2 transition-colors "+("under"===a?"border-red-500 bg-red-50 text-red-700":"border-gray-200 bg-white text-gray-700 hover:border-red-300"),children:sn.jsxs("div",{className:"text-center",children:[sn.jsx("p",{className:"font-semibold",children:"UNDER"}),sn.jsxs("p",{className:"text-xs mt-1",children:["Will not reach ",r.target_value.toLocaleString()]})]})})]})]}),sn.jsxs("div",{children:[sn.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[sn.jsx(Rt,{className:"w-4 h-4 inline mr-1"}),"Prediction Amount (USD)"]}),sn.jsx("input",{type:"number",step:"0.01",placeholder:"Enter amount",value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:"1",max:m.balance}),sn.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mt-1",children:[sn.jsxs("span",{children:["Available: $",m.balance.toFixed(2)]}),sn.jsx("span",{children:"Min: $1.00"})]})]}),sn.jsx("div",{className:"grid grid-cols-4 gap-2",children:[5,10,25,50].map(e=>sn.jsxs("button",{type:"button",onClick:()=>o(e.toString()),disabled:e>m.balance,className:"py-2 px-3 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:["$",e]},e))}),i&&sn.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[sn.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Prediction Summary"}),sn.jsxs("div",{className:"space-y-2 text-sm",children:[sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"Your prediction:"}),sn.jsx("span",{className:"font-medium text-blue-600",children:a.toUpperCase()})]}),sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"Amount staked:"}),sn.jsxs("span",{className:"font-medium",children:["$",i]})]}),sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"Potential payout:"}),sn.jsxs("span",{className:"font-medium text-green-600",children:["$",f]})]}),sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"Potential profit:"}),sn.jsxs("span",{className:"font-medium text-green-600",children:["$",(parseFloat(f)-parseFloat(i)).toFixed(2)]})]})]})]}),sn.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[sn.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),sn.jsx("button",{type:"submit",disabled:l||!i||parseFloat(i)>m.balance,className:`px-6 py-2 rounded-lg font-medium transition-colors ${"over"===a?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"} disabled:opacity-50 disabled:cursor-not-allowed`,children:l?"Placing...":`Predict ${a.toUpperCase()} $${i||"0"}`})]})]})]})]})}):null}function iu({content:e,isOpen:t,onClose:r,onTip:n}){const[a,s]=u.useState(1),[i,o]=u.useState(!1);return t?sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:sn.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[sn.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:(e.creator_name||e.creator_username||"U")[0].toUpperCase()}),sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Tip Creator"}),sn.jsxs("p",{className:"text-sm text-gray-600",children:["Support ",e.creator_name||e.creator_username||"this creator"]})]})]}),sn.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsxs("div",{className:"p-6",children:[sn.jsxs("div",{className:"mb-6",children:[sn.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Select Tip Amount"}),sn.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose how many gems you'd like to tip"}),sn.jsx("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[1,5,10,25,50,100].map(e=>sn.jsx("button",{onClick:()=>s(e),className:"py-2 px-3 rounded-lg text-sm font-medium transition-all duration-200 "+(a===e?"bg-purple-500 text-white ring-2 ring-purple-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:sn.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[sn.jsx(Tt,{className:"w-4 h-4"}),sn.jsx("span",{children:e})]})},e))}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("div",{className:"flex-1",children:sn.jsx("input",{type:"number",min:"1",max:"1000",value:a,onChange:e=>s(Math.max(1,parseInt(e.target.value)||1)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Custom amount"})}),sn.jsxs("div",{className:"flex items-center space-x-1 text-gray-500",children:[sn.jsx(Tt,{className:"w-4 h-4"}),sn.jsx("span",{className:"text-sm",children:"gems"})]})]})]}),sn.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsx("p",{className:"text-sm text-gray-600",children:"You're tipping"}),sn.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[sn.jsx(Tt,{className:"w-5 h-5 inline mr-1 text-purple-500"}),a," gems"]})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsx("p",{className:"text-xs text-gray-500",children:"Creator receives"}),sn.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",(.01*a).toFixed(2)]})]})]})}),sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsx("button",{onClick:r,className:"flex-1 py-2 px-4 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),sn.jsx("button",{onClick:async()=>{if(!(a<1)){o(!0);try{await n(e,a),r(),s(1)}catch(t){}finally{o(!1)}}},disabled:i||a<1,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-2 px-4 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:i?sn.jsxs(sn.Fragment,{children:[sn.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),sn.jsx("span",{children:"Sending..."})]}):sn.jsxs(sn.Fragment,{children:[sn.jsx(Vt,{className:"w-4 h-4"}),sn.jsx("span",{children:"Send Tip"})]})})]})]})]})}):null}function ou(){const{user:e,signOut:t}=bn(),r=we(),[n,a]=u.useState([]),[s,i]=u.useState([]),[o,l]=u.useState([]),[c,d]=u.useState(null),[,h]=u.useState(!0),[m,p]=u.useState("for-you"),[x,f]=u.useState([]),[g,y]=u.useState(!1),[b,v]=u.useState(!1),[j,w]=u.useState(!1),[,N]=u.useState(!1),[_,k]=u.useState(null),[S,C]=u.useState(null),[O,E]=u.useState(null),[P,T]=u.useState(!1),[A,M]=u.useState(null),[D,I]=u.useState(!1),[R,$]=u.useState(null),[L,F]=u.useState(!1),[z,U]=u.useState(null),[B,q]=u.useState(!1),[W,K]=u.useState(!1),[V,H]=u.useState(null),[G,Y]=u.useState(!1),[J,Z]=u.useState(null),[Q,X]=u.useState(!1),ee=c?.username||(c?.email?c.email.split("@")[0]:void 0)||(e?.username?String(e.username):void 0)||(e?.email?e.email.split("@")[0]:void 0)||"me",te=Sn(ee);u.useEffect(()=>{ne(),ae();const e=e=>{Q&&!e.target.closest(".user-menu")&&X(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[Q]),u.useEffect(()=>{tc("growth_feed_view",{source:"home_feed"},{userId:e?.id||c?.id})},[]);const re=t=>{tc("growth_content_open",{contentId:t.id,source:m},{userId:e?.id||c?.id}),r(`/content/${t.id}`)},ne=async()=>{try{const[e,t,r,n]=await Promise.all([pn("/content"),pn("/drops?limit=10"),pn("/users/me/wallets"),pn("/content/sponsored")]);a(Array.isArray(e)?e:[]),i(Array.isArray(t)?t.slice(0,5):[]),l(Array.isArray(r)?r:[]),f(Array.isArray(n)?n:[])}catch(e){a([]),i([]),l([]),f([])}finally{h(!1)}},ae=async()=>{try{const e=await pn("/users/me"),t=e?.user||e?.data?.user;t&&d(t)}catch(e){e instanceof Error&&"status"in e&&401===e.status&&(await t(),r("/auth?expired=1"))}},se=async(e,t)=>{try{const r=await xn("/users/social-action",{action_type:e,reference_id:t,reference_type:"content"});r&&(ie(r),ae())}catch(r){}},ie=e=>{const t=document.createElement("div");t.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-pulse",t.innerHTML=`\n      <div class="flex items-center space-x-2">\n        <span>+${e.points_earned} points!</span>\n        <span class="text-xs">(${e.multiplier.toFixed(1)}x multiplier)</span>\n      </div>\n    `,document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},3e3)},oe=e=>{k(e),y(!0)},le=e=>{U({id:e.id,title:e.title}),F(!0)},ce=e=>{H(e),K(!0)},de=e=>{M(e),T(!0)},ue=e=>{Z(e),Y(!0)},he=e=>{$(e),I(!0)},me=()=>{const e=[];x.forEach(t=>{e.push({type:"content",data:t,isSponsored:!0})});const t=n.filter(e=>!x.some(t=>t.id===e.id));let r=0,a=0;for(;r<t.length||a<s.length;)r<t.length&&(e.push({type:"content",data:t[r]}),r++),r<t.length&&(e.push({type:"content",data:t[r]}),r++),a<s.length&&(e.push({type:"drop",data:s[a]}),a++);return e.slice(0,15)},pe=c?c.master_key_activated_at?0===c.points_streak_days?{text:"Start Your Streak",subtext:"Engage with content today to begin earning streaks",action:()=>p("social"),color:"from-blue-500 to-purple-500",icon:sn.jsx(qt,{className:"w-5 h-5"})}:c.gems_balance<10?{text:"Get More Gems",subtext:"Purchase gems to access paid drops and predictions",route:"/invest/portfolio",color:"from-purple-500 to-pink-500",icon:sn.jsx(It,{className:"w-5 h-5"})}:{text:"Explore Growth Hub",subtext:"Stake gems, fund projects, and secure your earnings",route:"/growth-hub",color:"from-green-500 to-emerald-500",icon:sn.jsx(Ur,{className:"w-5 h-5"})}:{text:"Activate Master Key",subtext:"Complete a Proof Drop to unlock premium features",route:"/earn?type=proof",color:"from-orange-500 to-red-500",icon:sn.jsx(Lr,{className:"w-5 h-5"})}:null;return sn.jsxs("div",{className:"min-h-screen bg-gray-50",children:[sn.jsx("div",{className:"h-16"}),sn.jsx("div",{className:"fixed top-4 right-4 z-50",children:sn.jsxs("div",{className:"relative",children:[sn.jsxs("button",{onClick:()=>X(!Q),className:"user-menu flex items-center space-x-2 p-2 rounded-lg bg-white shadow-md hover:shadow-lg transition-all","aria-expanded":Q,"aria-haspopup":"true",children:[sn.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:(c?.display_name||c?.username||e?.email||"U")[0].toUpperCase()}),sn.jsx("span",{className:"flex items-center text-sm font-medium text-gray-700",children:c?.display_name||c?.username||"Account"}),sn.jsx(ot,{className:"w-4 h-4 text-gray-600 transition-transform duration-200 "+(Q?"rotate-90":"")})]}),Q&&sn.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[sn.jsxs("button",{onClick:()=>{r(te),X(!1)},className:"w-full flex items-center space-x-3 px-4 py-2 text-left text-gray-700 hover:bg-gray-100 transition-colors",children:[sn.jsx(Vr,{className:"w-4 h-4"}),sn.jsx("span",{children:"Profile"})]}),sn.jsxs("button",{onClick:()=>{r("/growth-hub"),X(!1)},className:"w-full flex items-center space-x-3 px-4 py-2 text-left text-gray-700 hover:bg-gray-100 transition-colors",children:[sn.jsx(Ur,{className:"w-4 h-4"}),sn.jsx("span",{children:"Growth Hub"})]}),sn.jsxs("button",{onClick:()=>{r("/advertiser"),X(!1)},className:"w-full flex items-center space-x-3 px-4 py-2 text-left text-gray-700 hover:bg-gray-100 transition-colors",children:[sn.jsx(Tr,{className:"w-4 h-4"}),sn.jsx("span",{children:"Advertiser"})]}),sn.jsx("hr",{className:"my-1 border-gray-200"}),sn.jsxs("button",{onClick:()=>{(async()=>{await t(),r("/auth")})(),X(!1)},className:"w-full flex items-center space-x-3 px-4 py-2 text-left text-red-600 hover:bg-red-50 transition-colors",children:[sn.jsx(or,{className:"w-4 h-4"}),sn.jsx("span",{children:"Logout"})]})]})]})}),sn.jsx("div",{className:"max-w-4xl mx-auto space-y-6 p-4",children:sn.jsxs("div",{className:"bg-gradient-to-br from-orange-500 via-red-500 to-pink-500 rounded-2xl p-6 text-white relative overflow-hidden shadow-lg",children:[sn.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='white' fill-opacity='0.1'%3E%3Cpath d='M30 30c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/svg%3E\")"}}),sn.jsxs("div",{className:"relative z-10",children:[sn.jsxs("div",{className:"flex items-start justify-between mb-6",children:[sn.jsxs("div",{children:[sn.jsxs("h1",{className:"text-3xl font-bold mb-2 leading-tight",children:["Welcome back, ",e?.google_user_data?.given_name||"Creator","! "]}),sn.jsx("p",{className:"text-orange-100 text-base",children:"Ready to turn your influence into income?"})]}),c&&sn.jsxs("div",{className:"text-right",children:[sn.jsxs("div",{className:"flex items-center space-x-2 justify-end mb-1",children:[(e=>{switch(e){case"super":return sn.jsx(Dt,{className:"w-4 h-4 text-yellow-600"});case"premium":return sn.jsx(Rr,{className:"w-4 h-4 text-purple-600"});default:return sn.jsx(Qr,{className:"w-4 h-4 text-gray-600"})}})(c.user_tier),sn.jsx("span",{className:"text-base font-semibold capitalize",children:c.user_tier})]}),sn.jsxs("div",{className:"text-sm text-orange-200",children:[(e=>{switch(e){case"super":return 2;case"premium":return 1.5;default:return 1}})(c.user_tier),"x multiplier"]}),c.points_streak_days>0&&sn.jsxs("div",{className:"flex items-center justify-end space-x-1 mt-1",children:[sn.jsx(qt,{className:"w-4 h-4 text-orange-300"}),sn.jsxs("span",{className:"text-sm text-orange-200",children:[c.points_streak_days," day streak"]})]})]})]}),c&&sn.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[{value:(c.points_balance||0).toLocaleString(),label:"Points",icon:sn.jsx(Tt,{className:"w-5 h-5"}),color:"text-blue-200"},{value:c.keys_balance||0,label:"Keys",icon:sn.jsx(Lr,{className:"w-5 h-5"}),color:"text-orange-200"},{value:(c.gems_balance||0).toFixed(1),label:"Gems",icon:sn.jsx(It,{className:"w-5 h-5"}),color:"text-purple-200"},{value:"View",label:"Saved",icon:sn.jsx(ut,{className:"w-5 h-5"}),color:"text-green-200",action:()=>{q(!0)}}].map((e,t)=>sn.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 text-center hover:bg-white/20 transition-all duration-200 cursor-pointer hover:-translate-y-1 "+(e.action?"cursor-pointer":""),onClick:e.action||void 0,children:[sn.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[sn.jsx("span",{className:e.color,children:e.icon}),sn.jsx("span",{className:"text-sm text-white/90 font-medium",children:e.label})]}),sn.jsx("p",{className:"text-xl font-bold text-white",children:e.value})]},t))}),pe&&sn.jsx("button",{onClick:()=>{pe&&(pe.route?r(pe.route,pe.options):pe.action&&pe.action())},className:`w-full bg-gradient-to-r ${pe.color} hover:shadow-xl text-white rounded-xl p-5 transition-all duration-200 hover:-translate-y-1 hover:scale-[1.02]`,children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"text-left",children:[sn.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[pe.icon,sn.jsx("span",{className:"font-semibold text-lg",children:pe.text})]}),sn.jsx("p",{className:"text-white/90 text-base",children:pe.subtext})]}),sn.jsx(ot,{className:"w-6 h-6 opacity-75"})]})})]})]})}),sn.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[sn.jsx("div",{className:"border-b border-gray-200",children:sn.jsx("nav",{className:"flex",children:[{key:"for-you",label:"For You",icon:sn.jsx(Rr,{className:"w-5 h-5"})},{key:"social",label:"Social Feed",icon:sn.jsx(at,{className:"w-5 h-5"})},{key:"drops",label:"Opportunities",icon:sn.jsx(Rt,{className:"w-5 h-5"})}].map(t=>sn.jsxs("button",{onClick:()=>(t=>{p(t),tc("growth_tab_selected",{tab:t},{userId:e?.id||c?.id})})(t.key),className:"flex-1 flex items-center justify-center space-x-2 py-4 px-6 font-medium text-base transition-all duration-200 "+(m===t.key?"border-b-2 border-orange-500 text-orange-600 bg-orange-50 shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"),children:[t.icon,sn.jsx("span",{children:t.label})]},t.key))})}),sn.jsxs("div",{className:"p-6",children:["for-you"===m&&sn.jsx("div",{className:"space-y-6",children:me().length>0?sn.jsxs(sn.Fragment,{children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[sn.jsx(qt,{className:"w-5 h-5 text-orange-500"}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Trending opportunities for you"})]}),me().map((e,t)=>sn.jsx("div",{children:"content"===e.type?sn.jsx(ru,{content:e.data,onBuyShares:oe,onShare:le,onSocialAction:se,onTip:ce,onNavigate:re,onPredict:ue,currentUser:c,onEdit:de,onDelete:he,isSponsored:e.isSponsored}):sn.jsx(nu,{drop:e.data})},t))]}):sn.jsx(au,{})}),"social"===m&&sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{className:"flex items-center justify-between bg-blue-50 border border-blue-200 rounded-lg p-3",children:[sn.jsxs("div",{className:"text-sm text-blue-700",children:["Showing ",n.length," content pieces"]}),sn.jsx("button",{onClick:ne,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Refresh Feed"})]}),n.length>0?[...x.map(e=>sn.jsx(ru,{content:e,onBuyShares:oe,onShare:le,onSocialAction:se,onTip:ce,onNavigate:re,onPredict:ue,currentUser:c,onEdit:de,onDelete:he,isSponsored:!0},`sponsored-${e.id}`)),...n.filter(e=>!x.some(t=>t.id===e.id)).map(e=>sn.jsx(ru,{content:e,onBuyShares:oe,onShare:le,onSocialAction:se,onTip:ce,onNavigate:re,onPredict:ue,currentUser:c,onEdit:de,onDelete:he},e.id))]:sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:sn.jsx(Ur,{className:"w-12 h-12 text-gray-400"})}),sn.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No content yet"}),sn.jsx("p",{className:"text-gray-600 mb-4",children:"Be the first to create and share content!"}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsxs("button",{onClick:()=>window.location.href="/create",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 mx-auto",children:[sn.jsx(Plus,{className:"w-4 h-4"}),sn.jsx("span",{children:"Create Content"})]}),sn.jsx("button",{onClick:ne,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Check for new content"})]})]})]}),"drops"===m&&sn.jsx("div",{className:"space-y-4",children:s.length>0?s.map(e=>sn.jsx(nu,{drop:e},e.id)):sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:sn.jsx(Rt,{className:"w-12 h-12 text-gray-400"})}),sn.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No opportunities available"}),sn.jsx("p",{className:"text-gray-600 mb-4",children:"Check back later for new earning opportunities!"}),sn.jsx("button",{onClick:()=>window.location.href="/earn",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200",children:"Browse All Opportunities"})]})})]})]}),_&&sn.jsx(Wl,{content:_,wallet:o?.find(e=>"USD"===e.currency_type),isOpen:g,onClose:()=>{y(!1),k(null)},onPurchase:async(e,t)=>{try{await xn("/content/buy-shares",{content_id:e.id,shares_count:t}),await ne()}catch(r){throw r}}}),sn.jsx(rc,{user:c,contentId:S?.id,contentTitle:S?.title,isOpen:b,onClose:()=>{v(!1),C(null)},onSuccess:()=>{ae(),ne()}}),sn.jsx(nc,{user:c,contentId:O?.id,contentTitle:O?.title,contentPlatform:O?.platform,contentUrl:O?.url,isOpen:j,onClose:()=>{w(!1),E(null)},onSuccess:()=>{ae(),ne()}}),A&&sn.jsx(Vd,{isOpen:P,onClose:()=>{T(!1),M(null)},onSuccess:handleEditSuccess,content:A}),sn.jsx(Hd,{isOpen:D,onClose:()=>{I(!1),$(null)},onConfirm:async()=>{if(R)try{await fn(`/content/${R.id}`),a(e=>e.filter(e=>e.id!==R.id)),I(!1),$(null)}catch(e){alert("Failed to delete content")}},title:"Delete Content",message:`Are you sure you want to delete "${R?.title}"? This action cannot be undone and will remove all associated data.`,confirmText:"Delete",cancelText:"Cancel",type:"danger"}),z&&sn.jsx(Gd,{isOpen:L,onClose:()=>{F(!1),U(null)},contentId:z.id,contentTitle:z.title}),sn.jsx(Yd,{isOpen:B,onClose:()=>q(!1),user:c}),V&&sn.jsx(iu,{content:V,isOpen:W,onClose:()=>{K(!1),H(null)},onTip:async(e,t)=>{try{await xn("/content/tip",{content_id:e.id,tip_amount:t});const r=document.createElement("div");r.className="fixed top-4 right-4 bg-purple-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-bounce",r.innerHTML=`\n        <div class="flex items-center space-x-2">\n          <span class="text-lg"></span>\n          <div>\n            <div class="font-semibold">Tip sent!</div>\n            <div class="text-xs opacity-90">Tipped ${t} gems to ${e.creator_name||e.creator_username||"creator"}</div>\n          </div>\n        </div>\n      `,document.body.appendChild(r),setTimeout(()=>{document.body.contains(r)&&document.body.removeChild(r)},4e3),ae()}catch(r){throw r}}}),J&&sn.jsx(su,{forecast:{id:J.id,creator_name:J.creator_name||J.creator_username||"Unknown",platform:J.platform||"Unknown",content_url:J.platform_url||"",content_title:J.title,forecast_type:"engagement",target_value:1e3,current_value:500,odds:2.5,pool_size:250,creator_initial_amount:100,creator_side:"over",expires_at:new Date(Date.now()+6048e5).toISOString()},isOpen:G,onClose:()=>{Y(!1),Z(null)},onPredictionPlaced:()=>{Y(!1),Z(null),ne()}})]})}const lu=["content_clipping","reviews","ugc_creation","affiliate_referral","paid_content","action_required"],cu=["easy","medium","hard"];function du(){const{user:e}=bn(),t=ve(),[r,n]=u.useState([]),[a,s]=u.useState(null),[i,o]=u.useState(!0),[l,c]=u.useState(!1),[d,h]=u.useState(""),[m,p]=u.useState(""),[x,f]=u.useState("");u.useEffect(()=>{y(),e&&g()},[e]),u.useEffect(()=>{const e=new URLSearchParams(t.search).get("create");"proof"!==e&&"paid"!==e||!a||"advertiser"!==a.user_type||c(!0)},[t,a]);const g=async()=>{try{const e=await pn("/users/me");s(e)}catch(e){}},y=async()=>{try{const e=await pn("/drops");n(Array.isArray(e)?e:[])}catch(e){n([])}finally{o(!1)}},b=r.filter(e=>{const t=e.title||"",r=e.description||"",n=e.drop_type||"",a=e.difficulty||"";return(t.toLowerCase().includes(d.toLowerCase())||r.toLowerCase().includes(d.toLowerCase()))&&(!m||n===m)&&(!x||a===x)});return i?sn.jsx("div",{className:"flex items-center justify-center h-64",children:sn.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Earn"}),sn.jsx("p",{className:"text-gray-600 mt-2",children:"Discover earning drops that match your skills"})]}),a&&"advertiser"===a.user_type&&sn.jsxs("button",{onClick:()=>c(!0),className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200 shadow-lg",children:[sn.jsx(Nr,{className:"w-5 h-5"}),sn.jsx("span",{children:"Create Drop"})]})]}),sn.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[sn.jsxs("div",{className:"relative",children:[sn.jsx(Er,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),sn.jsx("input",{type:"text",placeholder:"Search drops...",value:d,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),sn.jsxs("select",{value:m,onChange:e=>p(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[sn.jsx("option",{value:"",children:"All Drop Types"}),lu.map(e=>sn.jsx("option",{value:e,children:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},e))]}),sn.jsxs("select",{value:x,onChange:e=>f(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[sn.jsx("option",{value:"",children:"All Difficulties"}),cu.map(e=>sn.jsx("option",{value:e,className:"capitalize",children:e},e))]}),sn.jsxs("button",{className:"flex items-center justify-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[sn.jsx(Wt,{className:"w-5 h-5 text-gray-500"}),sn.jsx("span",{children:"More Filters"})]})]})}),sn.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(e=>sn.jsx(hu,{drop:e},e.id))}),0===b.length&&sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:sn.jsx(Er,{className:"w-12 h-12 text-gray-400"})}),sn.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No drops found"}),sn.jsx("p",{className:"text-gray-600",children:"Try adjusting your search criteria or create a new drop."})]}),l&&a&&"advertiser"===a.user_type&&sn.jsx(mu,{onClose:()=>c(!1),onSuccess:()=>{c(!1),y()}})]})}const uu=(e,t="General")=>(e&&e.trim().length>0?e:t).replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase());function hu({drop:e}){const t=we(),r=()=>{t(Cn(String(e.id)))},n=e.title?.toLowerCase().includes("[demo]")||e.title?.toLowerCase().includes("demo")||e.description?.toLowerCase().includes("demo"),a=e=>{switch((e||"").toLowerCase()){case"easy":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"hard":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return sn.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-shadow",children:[n&&sn.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white px-4 py-2 text-center",children:sn.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm font-medium",children:[sn.jsx("span",{children:""}),sn.jsx("span",{children:"DEMO DROP - No real gems awarded"}),sn.jsx("span",{children:""})]})}),sn.jsxs("div",{className:"relative cursor-pointer",onClick:r,children:[sn.jsx("img",{src:(t=>{if(e?.content_url)return e.content_url;switch((t||"").toLowerCase()){case"content_clipping":return"https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=400&h=250&fit=crop";case"reviews":return"https://images.unsplash.com/photo-1556155092-490a1ba16284?w=400&h=250&fit=crop";case"ugc_creation":return"https://images.unsplash.com/photo-1558403194-611308249627?w=400&h=250&fit=crop";case"affiliate_referral":return"https://images.unsplash.com/photo-1516251193007-45ef944ab0c6?w=400&h=250&fit=crop";case"surveys":return"https://images.unsplash.com/photo-1432888622747-4eb9a8efeb07?w=400&h=250&fit=crop";default:return"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=400&h=250&fit=crop"}})(e.drop_type),alt:e.title,className:"w-full h-48 object-cover hover:opacity-95 transition-opacity"}),sn.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20"}),sn.jsxs("div",{className:"absolute top-4 right-4 flex space-x-2",children:[n&&sn.jsx("span",{className:"bg-orange-500/90 backdrop-blur-sm text-white px-2 py-1 rounded-full text-xs font-medium",children:"DEMO"}),sn.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${a(e.difficulty)}`,children:e.difficulty})]}),sn.jsx("div",{className:"absolute top-4 left-4",children:e.is_proof_drop?sn.jsx("div",{className:"bg-green-500/90 backdrop-blur-sm px-2 py-1 rounded-full",children:sn.jsx("span",{className:"text-white text-sm font-medium",children:"Proof Drop"})}):e.is_paid_drop?sn.jsx("div",{className:"bg-purple-500/90 backdrop-blur-sm px-2 py-1 rounded-full",children:sn.jsx("span",{className:"text-white text-sm font-medium",children:"Paid Drop"})}):sn.jsxs("div",{className:"flex items-center space-x-1 bg-orange-500/90 backdrop-blur-sm px-2 py-1 rounded-full",children:[sn.jsx(Xt,{className:"w-3 h-3 text-white"}),sn.jsx("span",{className:"text-white text-sm font-medium",children:e.key_cost})]})}),sn.jsxs("div",{className:"absolute bottom-4 left-4",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(It,{className:"w-6 h-6 text-purple-300 drop-shadow"}),sn.jsxs("p",{className:"text-3xl font-bold text-white drop-shadow-lg",children:[e.gem_reward_base,n&&sn.jsx("span",{className:"text-lg opacity-80",children:" (Demo)"})]})]}),sn.jsx("p",{className:"text-sm text-white/80 drop-shadow",children:n?"Demo gems (no real value)":"Gems reward"})]})]}),sn.jsxs("div",{className:"p-6",children:[sn.jsx("div",{className:"flex items-start justify-between mb-3",children:sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("span",{className:"text-xl",children:(e=>{switch(e||""){case"content_clipping":return"";case"reviews":return"";case"ugc_creation":return"";case"affiliate_referral":return"";case"surveys":return"";case"challenges_events":return"";default:return""}})(e.drop_type)}),e.is_proof_drop?sn.jsx("div",{className:"flex items-center space-x-1 text-sm bg-green-100 px-2 py-1 rounded",children:sn.jsx("span",{className:"font-medium text-green-700",children:"Proof Drop - Free"})}):e.is_paid_drop?sn.jsx("div",{className:"flex items-center space-x-1 text-sm bg-purple-100 px-2 py-1 rounded",children:sn.jsx("span",{className:"font-medium text-purple-700",children:"Paid Drop"})}):sn.jsxs("div",{className:"flex items-center space-x-1 text-sm",children:[sn.jsx(Xt,{className:"w-3 h-3 text-orange-600"}),sn.jsxs("span",{className:"font-medium text-orange-700",children:[e.key_cost," keys"]})]})]})}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 cursor-pointer hover:text-orange-600 transition-colors",onClick:r,children:e.title}),sn.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:e.description||"No description available."}),sn.jsx("div",{className:"mb-4",children:sn.jsx(vn,{username:e.creator_name,displayName:e.creator_name,avatarUrl:e.creator_avatar,className:"flex items-center space-x-2",size:"sm"})}),sn.jsxs("div",{className:"space-y-2 mb-6",children:[sn.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[sn.jsx(Hr,{className:"w-4 h-4"}),sn.jsxs("span",{children:[e.current_participants,"/",e.max_participants||""," participants"]})]}),e.follower_threshold>0&&sn.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[sn.jsx(Rr,{className:"w-4 h-4"}),sn.jsxs("span",{children:[e.follower_threshold,"+ followers required"]})]}),e.deadline_at&&sn.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[sn.jsx(xt,{className:"w-4 h-4"}),sn.jsxs("span",{children:["Due ",new Date(e.deadline_at).toLocaleDateString()]})]}),e.time_commitment&&sn.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[sn.jsx(Pt,{className:"w-4 h-4"}),sn.jsx("span",{children:e.time_commitment})]}),e.gem_pool_total>0&&sn.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[sn.jsx(It,{className:"w-4 h-4"}),sn.jsxs("span",{children:[e.gem_pool_remaining??e.gem_pool_total," gems remaining in pool"]})]})]}),sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("span",{className:`text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full ${a(e.difficulty)}`,children:uu(e.drop_type)}),sn.jsx("div",{className:"flex space-x-2",children:sn.jsx("button",{onClick:r,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"View Details"})})]})]})]})}const mu=({onClose:e,onSuccess:t})=>{const r=ve(),n=new URLSearchParams(r.search).get("create"),a=()=>"paid"===n?"paid":"move"===n?"move":"proof",[s,i]=u.useState(!1),[o,l]=u.useState(!1),[c,d]=u.useState("upload"),[h,m]=u.useState(null),[p,x]=u.useState(null),[f,g]=u.useState(a()),y=u.useRef(null),[b,v]=u.useState(()=>{return{title:"",description:"",drop_type:"content_clipping",difficulty:"easy",key_cost:"paid"===(e=a())?1:0,gem_reward_base:"paid"===e?50:0,gem_pool_total:0,follower_threshold:0,time_commitment:"",requirements:"",deliverables:"",deadline_at:"",max_participants:void 0,platform:"",content_url:"",is_proof_drop:"proof"===e,is_paid_drop:"paid"===e,move_cost_points:0,key_reward_amount:0,move_actions:[]};var e});u.useEffect(()=>{v(e=>({...e,is_proof_drop:"proof"===f,is_paid_drop:"paid"===f,key_cost:"paid"===f?1:0,gem_reward_base:"paid"===f?50:0}))},[f]);return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:sn.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[sn.jsxs("div",{className:"flex justify-between items-center mb-4",children:[sn.jsx("h2",{className:"text-xl font-bold",children:"Create New Drop"}),sn.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700","aria-label":"Close modal",children:""})]}),sn.jsxs("form",{onSubmit:async r=>{r.preventDefault(),i(!0);try{let r=b.content_url;if("upload"===c&&p)try{r=await(async e=>{try{l(!0);const t=await new Promise((t,r)=>{const n=new FileReader;n.onload=()=>{const e=n.result;t(e.split(",")[1])},n.onerror=r,n.readAsDataURL(e)});return(await xn("/content/upload-image",{image:t,filename:e.name,contentType:e.type,description:b.title||"Marketing drop",platform:b.platform||"general"})).url}catch(t){return"https://images.unsplash.com/photo-1516251193007-45ef944ab0c6?w=800&h=600&fit=crop&crop=center"}finally{l(!1)}})(p)}catch(n){return void alert("Failed to upload image. Please try again.")}else if("link"===c&&b.content_url)try{if(!(await fetch(b.content_url,{method:"HEAD"})).ok)throw new Error("Invalid image URL")}catch(n){return void alert("Please provide a valid image URL")}try{await xn("/drops",{...b,content_url:r,drop_type:"proof"===f?"content_clipping":"paid"===f?"paid_content":"action_required",difficulty:b.difficulty||"easy",deadline_at:b.deadline_at||null,max_participants:b.max_participants||null,key_cost:"paid"===f?b.key_cost||1:0,gem_reward_base:"paid"===f?b.gem_reward_base||50:0,is_proof_drop:"proof"===f,is_paid_drop:"paid"===f,move_cost_points:"move"===f&&b.move_cost_points||0,key_reward_amount:"move"===f&&b.key_reward_amount||0}),t(),e()}catch(n){throw n}}catch(n){alert(n instanceof Error?n.message:"Failed to create drop")}finally{i(!1)}},className:"space-y-4",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Drop Type"}),sn.jsx("div",{className:"flex space-x-4",children:["proof","paid","move"].map(e=>sn.jsxs("label",{className:"flex items-center",children:[sn.jsx("input",{type:"radio",className:"h-4 w-4 text-orange-500",checked:f===e,onChange:()=>g(e)}),sn.jsx("span",{className:"ml-2 capitalize",children:e})]},e))})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),sn.jsx("input",{type:"text",className:"w-full p-2 border rounded",value:b.title,onChange:e=>v({...b,title:e.target.value}),required:!0})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),sn.jsx("textarea",{className:"w-full p-2 border rounded",rows:3,value:b.description,onChange:e=>v({...b,description:e.target.value}),required:!0})]}),sn.jsxs("div",{className:"flex space-x-4",children:[sn.jsxs("div",{className:"flex-1",children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Difficulty"}),sn.jsxs("select",{className:"w-full p-2 border rounded",value:b.difficulty,onChange:e=>v({...b,difficulty:e.target.value}),children:[sn.jsx("option",{value:"easy",children:"Easy"}),sn.jsx("option",{value:"medium",children:"Medium"}),sn.jsx("option",{value:"hard",children:"Hard"})]})]}),"paid"===f&&sn.jsxs("div",{className:"flex-1",children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Key Cost"}),sn.jsx("input",{type:"number",min:"1",className:"w-full p-2 border rounded",value:b.key_cost,onChange:e=>v({...b,key_cost:Number(e.target.value)}),required:"paid"===f})]})]}),sn.jsxs("div",{children:[sn.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[sn.jsxs("label",{className:"flex items-center",children:[sn.jsx("input",{type:"radio",className:"h-4 w-4 text-orange-500",checked:"upload"===c,onChange:()=>d("upload")}),sn.jsx("span",{className:"ml-2",children:"Upload Image"})]}),sn.jsxs("label",{className:"flex items-center",children:[sn.jsx("input",{type:"radio",className:"h-4 w-4 text-orange-500",checked:"link"===c,onChange:()=>d("link")}),sn.jsx("span",{className:"ml-2",children:"Image URL"})]})]}),"upload"===c?sn.jsxs("div",{children:[sn.jsx("input",{type:"file",ref:y,onChange:e=>{if(e.target.files&&e.target.files[0]){const t=e.target.files[0];x(t);const r=new FileReader;r.onload=e=>{e.target?.result&&m(e.target.result)},r.readAsDataURL(t)}},accept:"image/*",className:"hidden"}),sn.jsx("button",{type:"button",onClick:()=>y.current?.click(),className:"w-full p-2 border-2 border-dashed border-gray-300 rounded-md text-gray-500 hover:border-orange-500 hover:text-orange-500 transition-colors",children:o?"Uploading...":"Choose an image"}),h&&sn.jsxs("div",{className:"mt-2 relative",children:[sn.jsx("img",{src:h,alt:"Preview",className:"max-h-40 rounded"}),sn.jsx("button",{type:"button",onClick:()=>{x(null),m(null),y.current&&(y.current.value="")},className:"absolute top-1 right-1 bg-black bg-opacity-50 text-white rounded-full p-1 hover:bg-opacity-75","aria-label":"Remove image",children:""})]})]}):sn.jsx("input",{type:"url",className:"w-full p-2 border rounded",placeholder:"https://example.com/image.jpg",value:b.content_url,onChange:e=>v({...b,content_url:e.target.value}),required:!0})]}),sn.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[sn.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded-md text-gray-700 hover:bg-gray-50",disabled:s,children:"Cancel"}),sn.jsx("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 disabled:opacity-50",disabled:s||o,children:s?"Creating...":"Create Drop"})]})]})]})})};function pu(e){return{handleError:(t,r,n)=>{en(t,e,r,n)},handleApiError:(t,r,n)=>{!function(e,t,r,n){const a=e.status||e.response?.status,s=e.message||e.response?.data?.error||String(e);([500,502,503,504].includes(a)||["internal server error","service unavailable","gateway timeout","database error","authentication failed"].some(e=>s.toLowerCase().includes(e)))&&en(new Error(`API Error (${a}): ${s}`),t,r,n)}(t,e,r,n)},withErrorHandling:async(t,r,n)=>async function(e,t,r,n){try{return await e()}catch(a){throw en(a instanceof Error?a:new Error(String(a)),t,r,n),a}}(t,e,r,n)}}const xu=["instagram","tiktok","youtube","linkedin","twitter"];function fu(){bn();const e=pu("Create"),[t,r]=u.useState("post"),[n,a]=u.useState({platform:"instagram",title:"",description:"",platform_url:"",media_url:"",total_shares:100,share_price:0}),[s,i]=u.useState(!1),[o,l]=u.useState(0),[c,d]=u.useState(!1),[h,m]=u.useState(null),[p,x]=u.useState(""),[f,g]=u.useState("url"),[y,b]=u.useState(!1),v=u.useRef(null),j=()=>{m(null),p&&(URL.revokeObjectURL(p),x("")),a({...n,media_url:""}),v.current&&(v.current.value="")},w=e=>{switch(e){case"instagram":return sn.jsx(Qt,{className:"w-5 h-5"});case"twitter":return sn.jsx(Wr,{className:"w-5 h-5"});case"youtube":return sn.jsx(Zr,{className:"w-5 h-5"});case"linkedin":return sn.jsx(nr,{className:"w-5 h-5"});case"tiktok":return sn.jsx(fr,{className:"w-5 h-5"});default:return sn.jsx(rr,{className:"w-5 h-5"})}},N=e=>{switch(e){case"instagram":return"from-pink-500 to-purple-600";case"twitter":return"from-blue-400 to-blue-600";case"youtube":return"from-red-500 to-red-600";case"linkedin":return"from-blue-600 to-blue-800";case"tiktok":return"from-black to-gray-800";default:return"from-gray-500 to-gray-600"}};return sn.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create"}),sn.jsx("p",{className:"text-gray-600 mt-2",children:"Share your content and unlock earning opportunities"})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsx("p",{className:"text-sm text-gray-500",children:"Need to create marketing campaigns?"}),sn.jsx("p",{className:"text-xs text-gray-400",children:'Check "Become Advertiser" in your profile menu'})]})]}),sn.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[sn.jsx("div",{className:"border-b border-gray-200",children:sn.jsxs("nav",{className:"flex space-x-8 px-6",children:[sn.jsx("button",{onClick:()=>r("post"),className:"py-4 border-b-2 font-medium text-sm "+("post"===t?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Share Existing Content"}),sn.jsx("button",{onClick:()=>r("upload"),className:"py-4 border-b-2 font-medium text-sm "+("upload"===t?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Upload New Content"})]})}),sn.jsxs("div",{className:"p-6",children:["post"===t&&sn.jsxs("form",{onSubmit:async t=>{t.preventDefault(),d(!0);try{if(n.media_url&&"url"===f){const t=await(async e=>{try{const t=await fetch(e,{method:"HEAD"}),r=t.headers.get("content-type");return t.ok&&r?.startsWith("image/")||!1}catch{return!1}})(n.media_url);if(!t){const t=new Error("The provided image URL is not accessible. Please check the URL or upload an image file instead.");return e.handleError(t,"invalid_image_url"),void d(!1)}}const t={...n,share_price:s&&o>0?o/n.total_shares:0},u=await fetch("/api/content",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(u.ok){const e=await u.json();if(s&&o>0)try{await fetch(`/api/content/${e.contentId}/fund`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({amount:o,currency_type:"Gems"})})}catch(r){}a({platform:"instagram",title:"",description:"",platform_url:"",media_url:"",total_shares:100,share_price:0}),i(!1),l(0),j(),g("url");const t=document.createElement("div");t.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-bounce",t.innerHTML='\n          <div class="flex items-center space-x-2">\n            <span class="text-lg"></span>\n            <div>\n              <div class="font-semibold">Content Created!</div>\n              <div class="text-xs opacity-90">Redirecting to your content page...</div>\n            </div>\n          </div>\n        ',document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t),window.location.href=`/content/${e.contentId}`},2e3)}else{let t="Failed to create content. Please try again.",r=null;try{const e=await u.json();if(e.error&&(t=e.error),e.details&&(r=e.details),e.field_errors){t=`Validation failed: ${e.field_errors.map(e=>`${e.field}: ${e.message}`).join(", ")}`}}catch(c){}const n=u.status>=500,a=t.includes("database")||t.includes("Database"),s=400===u.status&&t.includes("Validation");if(n||a){const n=new Error(`${t}${r?` - ${r}`:""}`);e.handleError(n,"create_content")}else{const e=document.createElement("div");e.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-3 rounded-lg shadow-lg z-50",e.innerHTML=`\n            <div class="flex items-center space-x-2">\n              <span></span>\n              <div>\n                <div class="font-semibold">Content Creation Failed</div>\n                <div class="text-xs opacity-90">${t}</div>\n                ${s?'<div class="text-xs opacity-75 mt-1">Please check all form fields and try again</div>':""}\n              </div>\n            </div>\n          `,document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},8e3)}}}catch(u){const t=u instanceof Error?u:new Error("Failed to create content. Please check your connection and try again.");e.handleError(t,"create_content_network")}finally{d(!1)}},className:"space-y-6",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Platform"}),sn.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:xu.map(e=>sn.jsxs("button",{type:"button",onClick:()=>a({...n,platform:e}),className:"p-4 border rounded-lg flex flex-col items-center space-y-2 transition-all "+(n.platform===e?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-300 hover:border-gray-400"),children:[sn.jsx("div",{className:`w-8 h-8 rounded-lg bg-gradient-to-br ${N(e)} flex items-center justify-center text-white`,children:w(e)}),sn.jsx("span",{className:"text-sm font-medium capitalize",children:e})]},e))})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content Title"}),sn.jsx("input",{type:"text",required:!0,value:n.title,onChange:e=>a({...n,title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"My amazing content piece..."})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Platform URL"}),sn.jsx("input",{type:"url",required:!0,value:n.platform_url,onChange:e=>a({...n,platform_url:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"https://instagram.com/p/..."})]})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),sn.jsx("textarea",{rows:3,value:n.description,onChange:e=>a({...n,description:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Describe your content..."})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Media Content (Optional)"}),sn.jsxs("div",{className:"flex space-x-4 mb-4",children:[sn.jsxs("button",{type:"button",onClick:()=>{g("url"),j()},className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+("url"===f?"bg-orange-100 text-orange-700 border border-orange-300":"bg-gray-100 text-gray-600 border border-gray-300 hover:bg-gray-200"),children:[sn.jsx(rr,{className:"w-4 h-4 inline mr-2"}),"Use URL"]}),sn.jsxs("button",{type:"button",onClick:()=>{g("file"),a({...n,media_url:""})},className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+("file"===f?"bg-orange-100 text-orange-700 border border-orange-300":"bg-gray-100 text-gray-600 border border-gray-300 hover:bg-gray-200"),children:[sn.jsx(Kr,{className:"w-4 h-4 inline mr-2"}),"Upload File"]})]}),"url"===f?sn.jsxs("div",{children:[sn.jsx("input",{type:"url",value:n.media_url,onChange:e=>a({...n,media_url:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Direct link to image..."}),sn.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Make sure the image URL is publicly accessible and ends with .jpg, .png, .gif, or .webp"})]}):sn.jsx("div",{className:"space-y-4",children:h?sn.jsxs("div",{className:"border border-gray-300 rounded-lg p-4",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-3",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:sn.jsx(Jt,{className:"w-5 h-5 text-orange-600"})}),sn.jsxs("div",{children:[sn.jsx("p",{className:"font-medium text-gray-900",children:h.name}),sn.jsxs("p",{className:"text-sm text-gray-500",children:[(h.size/1024/1024).toFixed(2)," MB"]}),y&&sn.jsx("p",{className:"text-xs text-blue-600",children:"Uploading..."})]})]}),sn.jsx("button",{type:"button",onClick:j,className:"p-1 text-gray-400 hover:text-red-500 transition-colors",disabled:y,children:sn.jsx(Jr,{className:"w-5 h-5"})})]}),p&&sn.jsxs("div",{className:"relative",children:[sn.jsx("img",{src:p,alt:"Preview",className:"w-full h-48 object-cover rounded-lg"}),y&&sn.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-lg",children:sn.jsxs("div",{className:"text-white text-center",children:[sn.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-white border-t-transparent rounded-full mx-auto mb-2"}),sn.jsx("p",{className:"text-sm",children:"Processing image..."})]})})]})]}):sn.jsxs("div",{onClick:()=>v.current?.click(),className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-orange-400 hover:bg-orange-50 transition-all",children:[sn.jsx(Kr,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),sn.jsx("p",{className:"text-gray-600 mb-2",children:"Click to upload or drag and drop"}),sn.jsx("p",{className:"text-sm text-gray-500",children:"Images (JPG, PNG, GIF, WEBP)  Max 10 MB"}),sn.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:async t=>{const r=t.target.files?.[0];if(r){if(!["image/jpeg","image/png","image/gif","image/webp"].includes(r.type)){const t=new Error("Please upload a valid image file (JPG, PNG, GIF, WEBP).");return void e.handleError(t,"invalid_file_type")}if(r.size>15728640){const t=new Error("File size must be less than 15MB. Please compress your image or use a URL instead.");return void e.handleError(t,"file_too_large")}m(r);const t=URL.createObjectURL(r);x(t);try{const e=await(async e=>{try{b(!0);const t=await new Promise(t=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(e.split(",")[1])},r.readAsDataURL(e)}),r=await fetch("/api/content/upload-image",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({fileName:e.name,fileType:e.type,fileData:t})});if(!r.ok)throw new Error("Upload failed");const n=await r.json();if(n.fallback){const e=document.createElement("div");e.className="fixed top-4 right-4 bg-yellow-500 text-white px-4 py-3 rounded-lg shadow-lg z-50",e.innerHTML=`\n          <div class="flex items-center space-x-2">\n            <span></span>\n            <div>\n              <div class="font-semibold">Image Upload Notice</div>\n              <div class="text-xs opacity-90">${n.fallbackReason||"Using fallback image"}</div>\n            </div>\n          </div>\n        `,document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},5e3)}return n.imageUrl}catch(t){try{const e=await fetch("/api/content/generate-placeholder",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({description:n.title||"Social media content",platform:n.platform})});if(e.ok){const t=await e.json(),r=document.createElement("div");return r.className="fixed top-4 right-4 bg-orange-500 text-white px-4 py-3 rounded-lg shadow-lg z-50",r.innerHTML='\n            <div class="flex items-center space-x-2">\n              <span></span>\n              <div>\n                <div class="font-semibold">Using Placeholder Image</div>\n                <div class="text-xs opacity-90">Original upload failed, but your content will still be created</div>\n              </div>\n            </div>\n          ',document.body.appendChild(r),setTimeout(()=>{document.body.contains(r)&&document.body.removeChild(r)},4e3),t.imageUrl}}catch(r){}const e="https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=800&h=600&fit=crop&crop=center",a=document.createElement("div");return a.className="fixed top-4 right-4 bg-orange-500 text-white px-4 py-3 rounded-lg shadow-lg z-50",a.innerHTML='\n        <div class="flex items-center space-x-2">\n          <span></span>\n          <div>\n            <div class="font-semibold">Using Default Image</div>\n            <div class="text-xs opacity-90">Upload service temporarily unavailable</div>\n          </div>\n        </div>\n      ',document.body.appendChild(a),setTimeout(()=>{document.body.contains(a)&&document.body.removeChild(a)},4e3),e}finally{b(!1)}})(r);a({...n,media_url:e})}catch(s){const t=s instanceof Error?s.message:String(s);if(t.includes("too large")||t.includes("Invalid file type")){const r=s instanceof Error?s:new Error(t);e.handleError(r,"upload_image")}else{const e=document.createElement("div");e.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-3 rounded-lg shadow-lg z-50",e.innerHTML='\n            <div class="flex items-center space-x-2">\n              <span></span>\n              <div>\n                <div class="font-semibold">Upload Failed</div>\n                <div class="text-xs opacity-90">Please try again or use an image URL instead</div>\n              </div>\n            </div>\n          ',document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},5e3)}j()}}},className:"hidden"})]})})]}),sn.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[sn.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Investment Settings"}),sn.jsxs("div",{className:"mb-4",children:[sn.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Total Shares Available"}),sn.jsx("input",{type:"number",min:"100",max:"1000",value:n.total_shares,onChange:e=>a({...n,total_shares:Math.max(100,Number(e.target.value))}),className:"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),sn.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Minimum 100 shares required"})]}),sn.jsx("div",{className:"mb-4",children:sn.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[sn.jsx("input",{type:"checkbox",checked:s,onChange:e=>{i(e.target.checked),e.target.checked||(l(0),a({...n,share_price:0}))},className:"w-4 h-4 text-purple-600 border-purple-300 rounded focus:ring-purple-500"}),sn.jsxs("div",{children:[sn.jsx("span",{className:"text-sm font-medium text-purple-700",children:"Fund content with gems"}),sn.jsx("p",{className:"text-xs text-purple-600",children:"Give your content initial value by funding it with gems"})]})]})}),s&&sn.jsxs("div",{className:"mb-4",children:[sn.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Gem Funding Amount"}),sn.jsx("input",{type:"number",min:"1",step:"1",value:o||"",onChange:e=>{const t=Number(e.target.value);l(t),a({...n,share_price:t>0?t/n.total_shares:0})},className:"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter gems to fund content"}),sn.jsxs("div",{className:"text-xs text-purple-600 mt-1 space-y-1",children:[sn.jsxs("p",{children:["This will be split across all ",n.total_shares," shares"]}),o>0&&sn.jsxs("p",{children:["Share price: ",(o/n.total_shares).toFixed(4)," gems per share"]})]})]}),sn.jsx("div",{className:"bg-purple-100 border border-purple-300 rounded-lg p-3",children:sn.jsxs("p",{className:"text-sm text-purple-700",children:[sn.jsx("strong",{children:"Total shares:"})," ",n.total_shares,s&&o>0&&sn.jsxs(sn.Fragment,{children:[sn.jsx("br",{}),sn.jsx("strong",{children:"Total funding:"})," ",o," gems",sn.jsx("br",{}),sn.jsx("strong",{children:"Value per share:"})," ",(o/n.total_shares).toFixed(4)," gems"]}),!s&&sn.jsxs(sn.Fragment,{children:[sn.jsx("br",{}),sn.jsx("strong",{children:"Initial value:"})," Free shares (investors can add value later)"]})]})})]}),sn.jsx("button",{type:"submit",disabled:c||y,className:"w-full bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white py-3 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Creating...":y?"Processing Image...":"Create Content Post"})]}),"upload"===t&&sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center",children:[sn.jsx(Kr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Upload your content"}),sn.jsx("p",{className:"text-gray-600 mb-4",children:"Drag and drop your files here, or click to browse"}),sn.jsx("button",{className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200",children:"Choose Files"}),sn.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Supports: Images (JPG, PNG, WEBP), Videos (MP4, MOV), Documents (PDF, DOC)"})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[sn.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[sn.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center mx-auto mb-4",children:sn.jsx(ft,{className:"w-6 h-6 text-white"})}),sn.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Photos"}),sn.jsx("p",{className:"text-sm text-blue-700",children:"High-quality images for social sharing"})]}),sn.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6 text-center",children:[sn.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center mx-auto mb-4",children:sn.jsx(Gr,{className:"w-6 h-6 text-white"})}),sn.jsx("h3",{className:"font-semibold text-purple-900 mb-2",children:"Videos"}),sn.jsx("p",{className:"text-sm text-purple-700",children:"Engaging video content for maximum reach"})]}),sn.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 text-center",children:[sn.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center mx-auto mb-4",children:sn.jsx(Bt,{className:"w-6 h-6 text-white"})}),sn.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"Documents"}),sn.jsx("p",{className:"text-sm text-green-700",children:"Educational and informational content"})]})]}),sn.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Direct Upload Coming Soon"}),sn.jsx("p",{className:"text-gray-600",children:"We're working on direct upload functionality. For now, please use the \"Share Existing Content\" tab to upload images and link to content you've posted on social platforms."})]})]})]})]})]})}function gu({isOpen:e,onClose:t,onForecastCreated:r}){const[n,a]=u.useState({content_id:"",platform:"instagram",content_url:"",forecast_type:"views",target_value:"",odds:"2",expires_at:"",initial_amount:"",initial_side:"over"}),[s,i]=u.useState([]),[o,l]=u.useState(!1),[c,d]=u.useState(""),[h,m]=u.useState({balance:0});u.useEffect(()=>{if(e){p(),x();const e=new Date;e.setDate(e.getDate()+1),a(t=>({...t,expires_at:e.toISOString().slice(0,16)}))}},[e]);const p=async()=>{try{const e=await fetch("/api/content");if(e.ok){const t=await e.json();i(t.slice(0,20))}}catch(e){}},x=async()=>{try{const e=await fetch("/api/users/me/wallets");if(e.ok){const t=(await e.json()).find(e=>"USD"===e.currency_type);m({balance:t?.balance||0})}}catch(e){}},f=n.initial_amount?(parseFloat(n.initial_amount)*parseFloat(n.odds)).toFixed(2):"0";return e?sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:sn.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[sn.jsxs("div",{className:"p-6 border-b border-gray-200",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[sn.jsx(Ur,{className:"w-5 h-5 mr-2 text-blue-600"}),"Create Social Forecast"]}),sn.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Create a prediction market by putting up your own initial stake. Others can then predict on your forecast."})]}),sn.jsxs("form",{onSubmit:async e=>{e.preventDefault(),l(!0),d("");try{const e=await fetch("/api/social-forecasts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n,content_id:n.content_id?parseInt(n.content_id):void 0,target_value:parseInt(n.target_value),odds:parseFloat(n.odds),initial_amount:parseFloat(n.initial_amount)})});if(e.ok)r(),t(),a({content_id:"",platform:"instagram",content_url:"",forecast_type:"views",target_value:"",odds:"2",expires_at:"",initial_amount:"",initial_side:"over"});else{const t=await e.json();d(t.error||"Failed to create forecast")}}catch(s){d("Failed to create forecast")}finally{l(!1)}},className:"p-6 space-y-6",children:[c&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:sn.jsx("p",{className:"text-red-600 text-sm",children:c})}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content to Forecast On"}),sn.jsxs("div",{className:"space-y-3",children:[s.length>0&&sn.jsxs("div",{children:[sn.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Select from Promorang content:"}),sn.jsx("div",{className:"max-h-32 overflow-y-auto border border-gray-200 rounded-lg",children:s.map(e=>sn.jsxs("button",{type:"button",onClick:()=>(e=>{a(t=>({...t,content_id:e.id.toString(),platform:e.platform,content_url:e.platform_url}))})(e),className:"w-full text-left p-3 border-b border-gray-100 hover:bg-gray-50 "+(n.content_id===e.id.toString()?"bg-blue-50 border-l-4 border-l-blue-500":""),children:[sn.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.title}),sn.jsxs("div",{className:"text-xs text-gray-500",children:[e.platform,"  by ",e.creator_name]})]},e.id))})]}),sn.jsxs("div",{children:[sn.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Or enter external content URL:"}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[sn.jsxs("select",{value:n.platform,onChange:e=>a({...n,platform:e.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[sn.jsx("option",{value:"instagram",children:"Instagram"}),sn.jsx("option",{value:"tiktok",children:"TikTok"}),sn.jsx("option",{value:"youtube",children:"YouTube"}),sn.jsx("option",{value:"twitter",children:"Twitter"})]}),sn.jsx("input",{type:"url",placeholder:"Content URL",value:n.content_url,onChange:e=>a({...n,content_url:e.target.value,content_id:""}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]})]})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[sn.jsxs("div",{children:[sn.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[sn.jsx(Lr,{className:"w-4 h-4 inline mr-1"}),"Metric to Predict"]}),sn.jsxs("select",{value:n.forecast_type,onChange:e=>a({...n,forecast_type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[sn.jsx("option",{value:"views",children:"Views"}),sn.jsx("option",{value:"likes",children:"Likes"}),sn.jsx("option",{value:"shares",children:"Shares"}),sn.jsx("option",{value:"comments",children:"Comments"})]})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Value"}),sn.jsx("input",{type:"number",placeholder:"e.g., 10000",value:n.target_value,onChange:e=>a({...n,target_value:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:"1"})]})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payout Odds (multiplier)"}),sn.jsxs("select",{value:n.odds,onChange:e=>a({...n,odds:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[sn.jsx("option",{value:"1.5",children:"1.5x"}),sn.jsx("option",{value:"2",children:"2x"}),sn.jsx("option",{value:"2.5",children:"2.5x"}),sn.jsx("option",{value:"3",children:"3x"}),sn.jsx("option",{value:"4",children:"4x"}),sn.jsx("option",{value:"5",children:"5x"})]})]}),sn.jsxs("div",{children:[sn.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[sn.jsx(Pt,{className:"w-4 h-4 inline mr-1"}),"Expires At"]}),sn.jsx("input",{type:"datetime-local",value:n.expires_at,onChange:e=>a({...n,expires_at:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:(new Date).toISOString().slice(0,16)})]})]}),sn.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[sn.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Your Initial Prediction & Stake"}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Prediction"}),sn.jsxs("select",{value:n.initial_side,onChange:e=>a({...n,initial_side:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[sn.jsx("option",{value:"over",children:"OVER (will exceed target)"}),sn.jsx("option",{value:"under",children:"UNDER (will not reach target)"})]})]}),sn.jsxs("div",{children:[sn.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[sn.jsx(Rt,{className:"w-4 h-4 inline mr-1"}),"Initial Stake (USD)"]}),sn.jsx("input",{type:"number",step:"0.01",placeholder:"Amount to stake",value:n.initial_amount,onChange:e=>a({...n,initial_amount:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:"1",max:h.balance}),sn.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Available: $",h.balance.toFixed(2)]})]})]}),n.initial_amount&&sn.jsxs("div",{className:"mt-3 p-3 bg-white rounded-lg border border-blue-200",children:[sn.jsxs("p",{className:"text-sm text-gray-600",children:["Your stake: ",sn.jsxs("span",{className:"font-medium",children:["$",n.initial_amount]})]}),sn.jsxs("p",{className:"text-sm text-gray-600",children:["Potential payout if correct: ",sn.jsxs("span",{className:"font-medium text-green-600",children:["$",f]})]}),sn.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This creates the initial pool that others can predict against"})]})]}),sn.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[sn.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),sn.jsx("button",{type:"submit",disabled:o||!n.content_url||!n.target_value||!n.initial_amount,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Creating...":"Create Forecast"})]})]})]})}):null}function yu(){const[e,t]=u.useState("forecasts"),[r,n]=u.useState([]),[a,s]=u.useState([]),[i,o]=u.useState([]),[l,c]=u.useState([]),[d,h]=u.useState(!0),[m,p]=u.useState(!1),[x,f]=u.useState(!1),[g,y]=u.useState(null);u.useEffect(()=>{b()},[e]);const b=async()=>{h(!0);try{if("forecasts"===e){const e=await fetch("/api/social-forecasts");if(e.ok){const t=await e.json();n(t)}}else if("my-forecasts"===e){const e=await fetch("/api/users/forecasts",{credentials:"include"});if(e.ok){const t=await e.json();s(t)}else s([])}else if("my-created"===e){const e=await fetch("/api/users/created-forecasts",{credentials:"include"});if(e.ok){const t=await e.json();o(t)}else o([])}else if("content"===e){const e=await fetch("/api/content");if(e.ok){const t=await e.json();c(t)}}}catch(t){}finally{h(!1)}},v=(e,t)=>"number"!=typeof e||Number.isNaN(e)?"":e.toLocaleString(void 0,t),j=e=>"number"!=typeof e||Number.isNaN(e)?"":e.toLocaleString(void 0,{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),w=e=>{const t=new Date,r=new Date(e).getTime()-t.getTime();if(r<=0)return"Expired";const n=Math.floor(r/36e5),a=Math.floor(r%36e5/6e4);if(n>24){return`${Math.floor(n/24)}d ${n%24}h`}return`${n}h ${a}m`},N=e=>{switch(e){case"active":return"text-green-600 bg-green-100";case"expired":default:return"text-gray-600 bg-gray-100";case"resolved":return"text-blue-600 bg-blue-100"}},_=({forecast:e})=>{const t=new Date(e.expires_at)<=new Date;return sn.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[sn.jsxs("div",{className:"flex items-start justify-between mb-4",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("img",{src:e.creator_avatar||"/api/placeholder/32/32",alt:e.creator_name,className:"w-8 h-8 rounded-full"}),sn.jsxs("div",{children:[sn.jsx("p",{className:"font-medium text-gray-900",children:e.creator_name}),sn.jsx("p",{className:"text-xs text-gray-500",children:e.platform})]})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N(e.status)}`,children:e.status}),sn.jsx("a",{href:e.content_url,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-gray-600",children:sn.jsx(Lt,{className:"w-4 h-4"})})]})]}),e.content_title&&sn.jsxs("div",{className:"mb-3 p-3 bg-gray-50 rounded-lg",children:[sn.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.content_title}),sn.jsx("p",{className:"text-xs text-gray-500",children:e.content_platform})]}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Lr,{className:"w-4 h-4 text-blue-600"}),sn.jsxs("span",{className:"text-sm font-medium",children:[e.forecast_type," ",v(e.target_value)]})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsx("p",{className:"text-sm text-gray-600",children:"Pool"}),sn.jsx("p",{className:"font-semibold text-green-600",children:j(e.pool_size)})]})]}),sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Pt,{className:"w-4 h-4 text-gray-400"}),sn.jsx("span",{className:"text-sm text-gray-600",children:w(e.expires_at)})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsx("p",{className:"text-sm text-gray-600",children:"Odds"}),sn.jsx("p",{className:"font-semibold text-blue-600",children:"number"!=typeof e.odds||Number.isNaN(e.odds)?"":`${e.odds}x`})]})]}),e.creator_side&&e.creator_initial_amount>0&&sn.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[sn.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Creator's Prediction"}),sn.jsxs("p",{className:"text-sm font-medium text-blue-600",children:[e.creator_side.toUpperCase(),"  ",j(e.creator_initial_amount)," staked"]})]}),!t&&sn.jsx("button",{onClick:()=>(e=>{y(e),f(!0)})(e),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Make Your Prediction"})]})]})},k=({forecast:e})=>{const t="resolved"===e.forecast_status,r=t&&e.actual_payout>0;return sn.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[sn.jsxs("div",{className:"flex items-start justify-between mb-4",children:[sn.jsxs("div",{children:[sn.jsxs("p",{className:"font-medium text-gray-900",children:[e.forecast_type," forecast by ",e.creator_name]}),sn.jsx("p",{className:"text-sm text-gray-600",children:e.platform})]}),sn.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N(e.forecast_status)}`,children:e.forecast_status})]}),sn.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[sn.jsxs("div",{children:[sn.jsx("p",{className:"text-xs text-gray-500",children:"Your Prediction"}),sn.jsx("p",{className:"font-medium text-blue-600",children:e.prediction_side.toUpperCase()})]}),sn.jsxs("div",{children:[sn.jsx("p",{className:"text-xs text-gray-500",children:"Amount Staked"}),sn.jsxs("p",{className:"font-medium",children:["$",e.prediction_amount.toFixed(2)]})]}),sn.jsxs("div",{children:[sn.jsx("p",{className:"text-xs text-gray-500",children:"Target Value"}),sn.jsx("p",{className:"font-medium",children:e.target_value.toLocaleString()})]}),sn.jsxs("div",{children:[sn.jsx("p",{className:"text-xs text-gray-500",children:"Current Value"}),sn.jsx("p",{className:"font-medium",children:e.current_value.toLocaleString()})]})]}),t?sn.jsx("div",{className:"p-3 rounded-lg "+(r?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:sn.jsxs("p",{className:"text-sm font-medium "+(r?"text-green-600":"text-red-600"),children:[r?"Won!":"Lost","  ",r?`+$${e.actual_payout.toFixed(2)}`:`$${e.prediction_amount.toFixed(2)} lost`]})}):sn.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[sn.jsxs("p",{className:"text-sm text-gray-600",children:["Potential payout: ",sn.jsxs("span",{className:"font-medium text-green-600",children:["$",e.potential_payout.toFixed(2)]})]}),sn.jsxs("p",{className:"text-xs text-gray-500",children:["Expires: ",w(e.expires_at)]})]})]})},S=({content:e})=>sn.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[sn.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[sn.jsx("img",{src:e.creator_avatar||"/api/placeholder/32/32",alt:e.creator_name,className:"w-8 h-8 rounded-full"}),sn.jsxs("div",{children:[sn.jsx("p",{className:"font-medium text-gray-900",children:e.creator_name}),sn.jsx("p",{className:"text-xs text-gray-500",children:e.platform})]})]}),sn.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:e.title}),sn.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[sn.jsxs("div",{children:[sn.jsx("p",{className:"text-xs text-gray-500",children:"Share Price"}),sn.jsxs("p",{className:"font-medium",children:["$",e.share_price.toFixed(2)]})]}),sn.jsxs("div",{children:[sn.jsx("p",{className:"text-xs text-gray-500",children:"Available"}),sn.jsxs("p",{className:"font-medium",children:[e.available_shares,"/",e.total_shares]})]})]}),sn.jsx("div",{className:"bg-green-50 rounded-lg p-3 mb-4",children:sn.jsxs("p",{className:"text-sm text-green-600 font-medium",children:["Revenue: $",e.current_revenue.toFixed(2)]})}),sn.jsx("button",{className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors",children:"Buy Shares"})]});return sn.jsxs("div",{className:"min-h-screen bg-gray-50",children:[sn.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-8",children:[sn.jsxs("div",{children:[sn.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Investment Hub"}),sn.jsx("p",{className:"text-gray-600",children:"Create forecasts, make predictions, and invest in creator success"})]}),sn.jsxs("button",{onClick:()=>p(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[sn.jsx(Nr,{className:"w-4 h-4"}),sn.jsx("span",{children:"Create Forecast"})]})]}),sn.jsx("div",{className:"border-b border-gray-200 mb-8",children:sn.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"forecasts",label:"All Forecasts",icon:Ur},{id:"my-forecasts",label:"My Predictions",icon:Hr},{id:"my-created",label:"My Forecasts",icon:Lr},{id:"content",label:"Content Shares",icon:Rt}].map(r=>sn.jsxs("button",{onClick:()=>t(r.id),className:"flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm "+(e===r.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[sn.jsx(r.icon,{className:"w-4 h-4"}),sn.jsx("span",{children:r.label})]},r.id))})}),d?sn.jsx("div",{className:"flex items-center justify-center py-12",children:sn.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:["forecasts"===e&&r.map(e=>sn.jsx(_,{forecast:e},e.id)),"my-forecasts"===e&&a.map(e=>sn.jsx(k,{forecast:e},e.id)),"my-created"===e&&i.map(e=>sn.jsx(_,{forecast:e},e.id)),"content"===e&&l.map(e=>sn.jsx(S,{content:e},e.id))]}),!d&&sn.jsxs(sn.Fragment,{children:["forecasts"===e&&0===r.length&&sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx(Ur,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),sn.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Active Forecasts"}),sn.jsx("p",{className:"text-gray-600 mb-4",children:"Be the first to create a prediction market! Put up your own stake and let others predict on your forecast."}),sn.jsx("button",{onClick:()=>p(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create First Forecast"})]}),"my-forecasts"===e&&0===a.length&&sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx(Hr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),sn.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Predictions Yet"}),sn.jsx("p",{className:"text-gray-600",children:"Browse active forecasts and make your first prediction to start earning!"})]}),"my-created"===e&&0===i.length&&sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx(Lr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),sn.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Created Forecasts"}),sn.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first prediction market by putting up initial stake and letting others predict against you!"}),sn.jsx("button",{onClick:()=>p(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create Forecast"})]}),"content"===e&&0===l.length&&sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx(Rt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),sn.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Content Available"}),sn.jsx("p",{className:"text-gray-600",children:"No content shares are currently available for investment."})]})]})]}),sn.jsx(gu,{isOpen:m,onClose:()=>p(!1),onForecastCreated:()=>{b(),p(!1)}}),g&&sn.jsx(su,{isOpen:x,onClose:()=>f(!1),forecast:g,onPredictionPlaced:()=>{b()}})]})}function bu({user:e,isOpen:t,onClose:r,onSuccess:n}){const[a,s]=u.useState("amount"),[i,o]=u.useState(200),[l,c]=u.useState(""),[d,h]=u.useState({}),[m,p]=u.useState([]),[x,f]=u.useState([]),[g,y]=u.useState(!1),[b,v]=u.useState(null),[j,w]=u.useState(!1);u.useEffect(()=>{t&&(N(),_())},[t]);const N=async()=>{try{const e=await fetch("/api/withdrawal/methods",{credentials:"include"}),t=await e.json();p(t)}catch(e){}},_=async()=>{try{const e=await fetch("/api/users/payment-preferences",{credentials:"include"}),t=await e.json();f(t)}catch(e){}};if(!t||!e)return null;const k=(e.gems_balance||0)>=200,S=m.find(e=>e.method_name===l),C=S?i*S.fee_percentage/100:0,O=i-C,E=e=>e.startsWith("crypto_")?sn.jsx(Mt,{className:"w-5 h-5"}):"bank_account"===e?sn.jsx(mt,{className:"w-5 h-5"}):"paypal"===e||"payoneer"===e?sn.jsx(lr,{className:"w-5 h-5"}):sn.jsx(Rt,{className:"w-5 h-5"}),P=e=>{const t=m.find(t=>t.method_name===e);if(!t)return[];try{return JSON.parse(t.required_fields)}catch{return[]}},T=e=>({wallet_address:"Wallet Address",network:"Network",email_address:"Email Address",account_holder_name:"Account Holder Name",bank_name:"Bank Name",account_number:"Account Number",routing_number:"Routing Number",swift_code:"SWIFT Code",country:"Country",full_name:"Full Name",address_line_1:"Address Line 1",address_line_2:"Address Line 2 (Optional)",city:"City",state:"State/Province",postal_code:"Postal Code",phone_number:"Phone Number"}[e]||e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())),A=e=>"email_address"===e?"email":"phone_number"===e?"tel":"text",M=e=>!e.includes("optional")&&"address_line_2"!==e,D=()=>{s("amount"),o(200),c(""),h({}),v(null),w(!1)},I=()=>{D(),r()},R=i>=200&&i<=(e.gems_balance||0),$=""!==l;return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:sn.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-6",children:[sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Withdraw Gems"}),sn.jsx("button",{onClick:I,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),k?sn.jsxs("div",{className:"space-y-6",children:[sn.jsx("div",{className:"flex items-center space-x-2 mb-6",children:["amount","method","details","confirm"].map((e,t)=>sn.jsxs("div",{className:"flex items-center",children:[sn.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium "+(a===e?"bg-purple-500 text-white":["amount","method","details","confirm"].indexOf(a)>t?"bg-green-500 text-white":"bg-gray-200 text-gray-600"),children:t+1}),t<3&&sn.jsx("div",{className:"w-12 h-0.5 bg-gray-200 mx-2"})]},e))}),"amount"===a&&sn.jsxs("div",{className:"space-y-4",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Withdrawal Amount (Gems)"}),sn.jsxs("div",{className:"space-y-2",children:[sn.jsx("input",{type:"number",value:i,onChange:e=>o(Math.max(200,parseInt(e.target.value)||200)),min:"200",max:e.gems_balance||0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"}),sn.jsx("div",{className:"flex space-x-2",children:[200,500,1e3,e.gems_balance||0].filter((e,t,r)=>r.indexOf(e)===t&&e>=200).map(t=>sn.jsx("button",{onClick:()=>o(t),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-full text-gray-700",children:t===e.gems_balance?"Max":t.toLocaleString()},t))})]})]}),sn.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[sn.jsxs("div",{className:"flex items-center justify-between text-sm",children:[sn.jsx("span",{children:"Available Balance:"}),sn.jsxs("span",{className:"font-medium",children:[e.gems_balance," gems"]})]}),sn.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[sn.jsx("span",{children:"Withdrawal Fee (2.5%):"}),sn.jsxs("span",{className:"font-medium",children:["~",Math.ceil(.025*i)," gems"]})]})]}),sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsx("button",{onClick:I,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),sn.jsx("button",{onClick:()=>s("method"),disabled:!R,className:"flex-1 bg-purple-500 hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Next"})]})]}),"method"===a&&sn.jsxs("div",{className:"space-y-4",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Payment Method"}),x.length>0&&sn.jsxs("div",{className:"mb-4",children:[sn.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Saved Methods"}),sn.jsx("div",{className:"grid grid-cols-1 gap-2",children:x.map(e=>{const t=m.find(t=>t.method_name===e.payment_method);if(!t)return null;let r="";try{const t=JSON.parse(e.preference_data);r=t.email_address?t.email_address:t.wallet_address?`${t.wallet_address.slice(0,6)}...${t.wallet_address.slice(-4)}`:t.account_number?`****${t.account_number.slice(-4)}`:"Saved method"}catch{r="Saved method"}return sn.jsx("button",{onClick:()=>{c(e.payment_method),h(JSON.parse(e.preference_data))},className:"w-full p-3 border-2 rounded-lg text-left transition-colors "+(l===e.payment_method?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:sn.jsxs("div",{className:"flex items-center space-x-3",children:[E(e.payment_method),sn.jsxs("div",{children:[sn.jsx("p",{className:"font-medium",children:t.display_name}),sn.jsx("p",{className:"text-sm text-gray-500",children:r})]}),e.is_default&&sn.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:"Default"})]})},e.id)})}),sn.jsxs("div",{className:"relative my-4",children:[sn.jsx("div",{className:"absolute inset-0 flex items-center",children:sn.jsx("div",{className:"w-full border-t border-gray-300"})}),sn.jsx("div",{className:"relative flex justify-center text-sm",children:sn.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or choose a new method"})})]})]}),sn.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:m.filter(e=>e.is_active).map(e=>sn.jsxs("button",{onClick:()=>c(e.method_name),className:"p-4 border-2 rounded-lg text-left transition-colors "+(l===e.method_name?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:[sn.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[E(e.method_name),sn.jsx("span",{className:"font-medium",children:e.display_name})]}),sn.jsx("p",{className:"text-xs text-gray-500",children:e.processing_time}),sn.jsxs("p",{className:"text-xs text-gray-500",children:["Min: ",e.min_amount," gems"]})]},e.method_name))})]}),sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsx("button",{onClick:()=>s("amount"),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Back"}),sn.jsx("button",{onClick:()=>s("details"),disabled:!$,className:"flex-1 bg-purple-500 hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Next"})]})]}),"details"===a&&S&&sn.jsxs("div",{className:"space-y-4",children:[sn.jsxs("div",{children:[sn.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:S.display_name}),sn.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Processing time: ",S.processing_time]})]}),sn.jsx("div",{className:"space-y-4",children:P(l).map(e=>sn.jsxs("div",{children:[sn.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[T(e),M(e)&&sn.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),"network"===e&&l.startsWith("crypto_")?sn.jsxs("select",{value:d[e]||"",onChange:t=>h(r=>({...r,[e]:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:M(e),children:[sn.jsx("option",{value:"",children:"Select Network"}),sn.jsx("option",{value:"mainnet",children:"Mainnet"}),sn.jsx("option",{value:"ethereum",children:"Ethereum (ERC-20)"}),sn.jsx("option",{value:"bsc",children:"Binance Smart Chain (BEP-20)"}),sn.jsx("option",{value:"polygon",children:"Polygon"}),sn.jsx("option",{value:"arbitrum",children:"Arbitrum"})]}):"country"===e?sn.jsxs("select",{value:d[e]||"",onChange:t=>h(r=>({...r,[e]:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:M(e),children:[sn.jsx("option",{value:"",children:"Select Country"}),sn.jsx("option",{value:"US",children:"United States"}),sn.jsx("option",{value:"CA",children:"Canada"}),sn.jsx("option",{value:"GB",children:"United Kingdom"}),sn.jsx("option",{value:"AU",children:"Australia"}),sn.jsx("option",{value:"DE",children:"Germany"}),sn.jsx("option",{value:"FR",children:"France"}),sn.jsx("option",{value:"IT",children:"Italy"}),sn.jsx("option",{value:"ES",children:"Spain"}),sn.jsx("option",{value:"NL",children:"Netherlands"}),sn.jsx("option",{value:"SE",children:"Sweden"}),sn.jsx("option",{value:"NO",children:"Norway"}),sn.jsx("option",{value:"DK",children:"Denmark"}),sn.jsx("option",{value:"FI",children:"Finland"}),sn.jsx("option",{value:"JP",children:"Japan"}),sn.jsx("option",{value:"KR",children:"South Korea"}),sn.jsx("option",{value:"SG",children:"Singapore"}),sn.jsx("option",{value:"HK",children:"Hong Kong"}),sn.jsx("option",{value:"IN",children:"India"}),sn.jsx("option",{value:"BR",children:"Brazil"}),sn.jsx("option",{value:"MX",children:"Mexico"})]}):sn.jsx("input",{type:A(e),value:d[e]||"",onChange:t=>h(r=>({...r,[e]:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:M(e),placeholder:"wallet_address"===e?"Enter your wallet address":""})]},e))}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("input",{type:"checkbox",id:"saveAsDefault",checked:j,onChange:e=>w(e.target.checked),className:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"}),sn.jsx("label",{htmlFor:"saveAsDefault",className:"text-sm text-gray-700",children:"Save this payment method for future withdrawals"})]}),sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsx("button",{onClick:()=>s("method"),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Back"}),sn.jsx("button",{onClick:()=>s("confirm"),disabled:!P(l).every(e=>!M(e)||d[e]&&""!==d[e].trim()),className:"flex-1 bg-purple-500 hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Review"})]})]}),"confirm"===a&&S&&sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{children:[sn.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Review Withdrawal Request"}),sn.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"Withdrawal Amount:"}),sn.jsxs("span",{className:"font-medium",children:[i," gems"]})]}),sn.jsxs("div",{className:"flex justify-between",children:[sn.jsxs("span",{className:"text-gray-600",children:["Processing Fee (",S.fee_percentage,"%):"]}),sn.jsxs("span",{className:"font-medium text-red-600",children:["-",C.toFixed(2)," gems"]})]}),sn.jsx("div",{className:"border-t pt-2",children:sn.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[sn.jsx("span",{children:"Net Amount:"}),sn.jsxs("span",{className:"text-green-600",children:[O.toFixed(2)," gems"]})]})})]}),sn.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[sn.jsxs("h4",{className:"font-medium text-gray-900 mb-2",children:["Payment Method: ",S.display_name]}),sn.jsx("div",{className:"text-sm text-gray-600 space-y-1",children:Object.entries(d).map(([e,t])=>sn.jsxs("div",{className:"flex justify-between",children:[sn.jsxs("span",{className:"capitalize",children:[T(e),":"]}),sn.jsx("span",{className:"font-mono",children:e.includes("address")&&t.length>20?`${t.slice(0,8)}...${t.slice(-8)}`:t})]},e))})]}),sn.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:sn.jsxs("div",{className:"flex items-start space-x-3",children:[sn.jsx(Br,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),sn.jsxs("div",{className:"text-sm text-yellow-800",children:[sn.jsx("p",{className:"font-medium mb-1",children:"Important Notice:"}),sn.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[sn.jsx("li",{children:"Withdrawal requests cannot be cancelled once submitted"}),sn.jsxs("li",{children:["Processing time: ",S.processing_time]}),sn.jsx("li",{children:"Ensure all payment details are correct"}),sn.jsx("li",{children:"You will receive an email confirmation once processed"})]})]})]})})]}),b&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:sn.jsx("p",{className:"text-sm text-red-700",children:b})}),sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsx("button",{onClick:()=>s("details"),disabled:g,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Back"}),sn.jsx("button",{onClick:async()=>{y(!0),v(null);try{j&&await fetch("/api/users/payment-preferences",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({payment_method:l,preference_data:d,is_default:!0})});const e=await fetch("/api/withdrawal/request",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({amount:i,payment_method:l,payment_details:d})});if(e.ok)n(),r(),D();else{const t=await e.json();v(t.error||"Withdrawal request failed")}}catch(e){v("Network error occurred")}finally{y(!1)}},disabled:g,className:"flex-1 bg-green-500 hover:bg-green-600 disabled:opacity-50 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:g?sn.jsx(ar,{className:"w-4 h-4 animate-spin"}):sn.jsxs(sn.Fragment,{children:[sn.jsx(St,{className:"w-4 h-4"}),sn.jsx("span",{children:"Submit Withdrawal"})]})})]})]})]}):sn.jsxs("div",{className:"text-center py-8",children:[sn.jsx(Br,{className:"w-12 h-12 text-yellow-500 mx-auto mb-4"}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Insufficient Gems"}),sn.jsx("p",{className:"text-gray-600 mb-4",children:"You need at least 200 gems to request a withdrawal."}),sn.jsxs("p",{className:"text-sm text-gray-500",children:["Current balance: ",e.gems_balance||0," gems"]}),sn.jsx("button",{onClick:I,className:"mt-4 px-6 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors",children:"Close"})]})]})})}function vu({user:e,isOpen:t,onClose:r,onSuccess:n}){const[a,s]=u.useState([]),[i,o]=u.useState([]),[l,c]=u.useState(!1),[d,h]=u.useState(null),[m,p]=u.useState(""),[x,f]=u.useState({}),[g,y]=u.useState(!1),[b,v]=u.useState(null);u.useEffect(()=>{t&&j()},[t]);const j=async()=>{try{const[e,t]=await Promise.all([fetch("/api/users/payment-preferences",{credentials:"include"}),fetch("/api/withdrawal/methods",{credentials:"include"})]),r=await e.json(),n=await t.json();s(r),o(n)}catch(e){}};if(!t||!e)return null;const w=e=>e.startsWith("crypto_")?sn.jsx(Mt,{className:"w-5 h-5"}):"bank_account"===e?sn.jsx(mt,{className:"w-5 h-5"}):"paypal"===e||"payoneer"===e?sn.jsx(lr,{className:"w-5 h-5"}):sn.jsx(Mt,{className:"w-5 h-5"}),N=e=>{const t=i.find(t=>t.method_name===e);if(!t)return[];try{return JSON.parse(t.required_fields)}catch{return[]}},_=e=>({wallet_address:"Wallet Address",network:"Network",email_address:"Email Address",account_holder_name:"Account Holder Name",bank_name:"Bank Name",account_number:"Account Number",routing_number:"Routing Number",swift_code:"SWIFT Code",country:"Country",full_name:"Full Name",address_line_1:"Address Line 1",address_line_2:"Address Line 2",city:"City",state:"State/Province",postal_code:"Postal Code",phone_number:"Phone Number"}[e]||e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())),k=e=>{try{const t=JSON.parse(e.preference_data);return t.email_address?t.email_address:t.wallet_address?`${t.wallet_address.slice(0,8)}...${t.wallet_address.slice(-6)}`:t.account_number?`****${t.account_number.slice(-4)}`:t.full_name?t.full_name:"Payment method"}catch{return"Payment method"}},S=()=>{c(!1),h(null),p(""),f({}),v(null)};return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:sn.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-6",children:[sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Payment Preferences"}),sn.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Saved Payment Methods"}),sn.jsxs("button",{onClick:()=>c(!0),className:"flex items-center space-x-2 px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-medium transition-colors",children:[sn.jsx(Nr,{className:"w-4 h-4"}),sn.jsx("span",{children:"Add Method"})]})]}),0===a.length?sn.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[sn.jsx(Mt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No payment methods saved"}),sn.jsx("p",{className:"text-gray-600 mb-4",children:"Add a payment method to make withdrawals easier"}),sn.jsx("button",{onClick:()=>c(!0),className:"px-6 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-medium transition-colors",children:"Add Payment Method"})]}):sn.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(e=>{const t=i.find(t=>t.method_name===e.payment_method);return sn.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[sn.jsxs("div",{className:"flex items-start justify-between mb-3",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[w(e.payment_method),sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-medium text-gray-900",children:t?.display_name}),sn.jsx("p",{className:"text-sm text-gray-600",children:k(e)})]})]}),e.is_default&&sn.jsxs("span",{className:"flex items-center space-x-1 text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:[sn.jsx(Rr,{className:"w-3 h-3"}),sn.jsx("span",{children:"Default"})]})]}),sn.jsxs("div",{className:"flex space-x-2",children:[!e.is_default&&sn.jsx("button",{onClick:()=>(async e=>{try{(await fetch(`/api/users/payment-preferences/${e}/set-default`,{method:"POST",credentials:"include"})).ok&&(await j(),n())}catch(t){}})(e.id),className:"flex-1 text-xs px-3 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"Set Default"}),sn.jsxs("button",{onClick:()=>(e=>{h(e.id),p(e.payment_method);try{f(JSON.parse(e.preference_data))}catch{f({})}c(!0)})(e),className:"flex-1 text-xs px-3 py-1 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition-colors flex items-center justify-center space-x-1",children:[sn.jsx(yr,{className:"w-3 h-3"}),sn.jsx("span",{children:"Edit"})]}),sn.jsxs("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this payment method?"))try{(await fetch(`/api/users/payment-preferences/${e}`,{method:"DELETE",credentials:"include"})).ok&&(await j(),n())}catch(t){}})(e.id),className:"flex-1 text-xs px-3 py-1 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors flex items-center justify-center space-x-1",children:[sn.jsx(zr,{className:"w-3 h-3"}),sn.jsx("span",{children:"Delete"})]})]})]},e.id)})})]}),l&&sn.jsxs("div",{className:"border-t pt-6",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:d?"Edit Payment Method":"Add Payment Method"}),sn.jsxs("div",{className:"space-y-4",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),sn.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:i.filter(e=>e.is_active).map(e=>sn.jsxs("button",{onClick:()=>p(e.method_name),disabled:null!==d,className:`p-3 border-2 rounded-lg text-left transition-colors ${m===e.method_name?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"} ${d?"opacity-50 cursor-not-allowed":""}`,children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[w(e.method_name),sn.jsx("span",{className:"font-medium text-sm",children:e.display_name})]}),sn.jsx("p",{className:"text-xs text-gray-500",children:e.processing_time})]},e.method_name))})]}),m&&sn.jsxs("div",{className:"space-y-3",children:[sn.jsx("h4",{className:"font-medium text-gray-900",children:"Payment Details"}),N(m).map(e=>sn.jsxs("div",{children:[sn.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[_(e),"address_line_2"!==e&&sn.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),"network"===e&&m.startsWith("crypto_")?sn.jsxs("select",{value:x[e]||"",onChange:t=>f(r=>({...r,[e]:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[sn.jsx("option",{value:"",children:"Select Network"}),sn.jsx("option",{value:"mainnet",children:"Mainnet"}),sn.jsx("option",{value:"ethereum",children:"Ethereum (ERC-20)"}),sn.jsx("option",{value:"bsc",children:"Binance Smart Chain (BEP-20)"}),sn.jsx("option",{value:"polygon",children:"Polygon"}),sn.jsx("option",{value:"arbitrum",children:"Arbitrum"})]}):"country"===e?sn.jsxs("select",{value:x[e]||"",onChange:t=>f(r=>({...r,[e]:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[sn.jsx("option",{value:"",children:"Select Country"}),sn.jsx("option",{value:"US",children:"United States"}),sn.jsx("option",{value:"CA",children:"Canada"}),sn.jsx("option",{value:"GB",children:"United Kingdom"}),sn.jsx("option",{value:"AU",children:"Australia"}),sn.jsx("option",{value:"DE",children:"Germany"}),sn.jsx("option",{value:"FR",children:"France"}),sn.jsx("option",{value:"IT",children:"Italy"}),sn.jsx("option",{value:"ES",children:"Spain"}),sn.jsx("option",{value:"NL",children:"Netherlands"}),sn.jsx("option",{value:"JP",children:"Japan"}),sn.jsx("option",{value:"SG",children:"Singapore"}),sn.jsx("option",{value:"IN",children:"India"}),sn.jsx("option",{value:"BR",children:"Brazil"}),sn.jsx("option",{value:"MX",children:"Mexico"})]}):sn.jsx("input",{type:"email_address"===e?"email":"phone_number"===e?"tel":"text",value:x[e]||"",onChange:t=>f(r=>({...r,[e]:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:"address_line_2"!==e})]},e))]}),b&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:sn.jsx("p",{className:"text-sm text-red-700",children:b})}),sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),sn.jsx("button",{onClick:async()=>{if(m&&0!==Object.keys(x).length){y(!0),v(null);try{const e=await fetch("/api/users/payment-preferences",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({payment_method:m,preference_data:x,is_default:0===a.length})});if(e.ok)await j(),S(),n();else{const t=await e.json();v(t.error||"Failed to save payment preference")}}catch(e){v("Network error occurred")}finally{y(!1)}}},disabled:!m||g||N(m).some(e=>"address_line_2"!==e&&(!x[e]||""===x[e].trim())),className:"flex-1 bg-purple-500 hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-colors",children:g?"Saving...":d?"Update Method":"Save Method"})]})]})]})]})]})})}const ju=[{id:"starter",gems:10,price:11,bonus:0},{id:"basic",gems:25,price:27.5,bonus:0},{id:"popular",gems:47,price:55,bonus:3,popular:!0,savings:"Best Value"},{id:"premium",gems:88,price:110,bonus:12,savings:"12% Bonus"},{id:"ultimate",gems:210,price:275,bonus:40,savings:"16% Bonus"}];function wu({user:e,isOpen:t,onClose:r}){const[n,a]=u.useState("popular"),[s,i]=u.useState(!1),[o,l]=u.useState(null);if(!t)return null;const c=ju.find(e=>e.id===n);return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:sn.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[sn.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:sn.jsx(It,{className:"w-6 h-6 text-white"})}),sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Gem Store"}),sn.jsx("p",{className:"text-sm text-gray-600",children:"Purchase gems to participate in drops and forecasts"})]})]}),sn.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),!e&&sn.jsx("div",{className:"p-6",children:sn.jsxs("div",{className:"text-center py-8",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Loading user data..."}),sn.jsx("p",{className:"text-gray-600 mb-4",children:"Please wait while we load your account information."}),sn.jsx("p",{className:"text-xs text-red-600",children:"Debug: User data is null - check console for details"}),sn.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600",children:"Reload Page"})]})}),e&&sn.jsxs("div",{className:"p-6",children:[sn.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 mb-6",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(It,{className:"w-8 h-8 text-purple-600"}),sn.jsxs("div",{children:[sn.jsx("p",{className:"text-lg font-semibold text-purple-900",children:"Current Balance"}),sn.jsx("p",{className:"text-sm text-purple-600",children:"Your gem wallet"})]})]}),sn.jsx("p",{className:"text-3xl font-bold text-purple-900",children:e.gems_balance})]})}),sn.jsxs("div",{className:"mb-6",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Choose Your Package"}),sn.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ju.map(e=>sn.jsxs("div",{onClick:()=>a(e.id),className:"relative border-2 rounded-xl p-6 cursor-pointer transition-all duration-200 "+(n===e.id?"border-purple-500 bg-purple-50 shadow-lg scale-105":"border-gray-200 hover:border-gray-300 hover:shadow-md"),children:[e.popular&&sn.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:sn.jsxs("span",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1",children:[sn.jsx(Rr,{className:"w-3 h-3"}),sn.jsx("span",{children:"Most Popular"})]})}),e.savings&&!e.popular&&sn.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:sn.jsx("span",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-3 py-1 rounded-full text-xs font-medium",children:e.savings})}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4",children:sn.jsx(It,{className:"w-8 h-8 text-white"})}),sn.jsx("h4",{className:"text-lg font-semibold text-gray-900 capitalize mb-2",children:e.id}),sn.jsxs("div",{className:"mb-4",children:[sn.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",e.price]}),sn.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-1",children:[sn.jsxs("span",{className:"text-lg font-semibold text-purple-600",children:[e.gems," gems"]}),e.bonus>0&&sn.jsxs(sn.Fragment,{children:[sn.jsx("span",{className:"text-gray-400",children:"+"}),sn.jsxs("span",{className:"text-lg font-semibold text-green-600",children:[e.bonus," bonus"]})]})]}),sn.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Total: ",e.gems+e.bonus," gems"]})]}),sn.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[sn.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[sn.jsx(Qr,{className:"w-4 h-4 text-orange-500"}),sn.jsx("span",{children:"Participate in drops"})]}),sn.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[sn.jsx(Mt,{className:"w-4 h-4 text-blue-500"}),sn.jsx("span",{children:"Place predictions"})]}),e.bonus>0&&sn.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[sn.jsx(Rr,{className:"w-4 h-4 text-yellow-500"}),sn.jsxs("span",{children:[Math.round(e.bonus/e.gems*100),"% bonus gems"]})]})]})]})]},e.id))})]}),sn.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[sn.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[sn.jsx(Mr,{className:"w-5 h-5 text-green-600"}),sn.jsx("h4",{className:"font-medium text-gray-900",children:"Secure Payment"})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),sn.jsx("span",{children:"256-bit SSL encryption"})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),sn.jsx("span",{children:"PCI DSS compliant"})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),sn.jsx("span",{children:"Powered by Stripe"})]})]})]}),c&&sn.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6",children:[sn.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Purchase Summary"}),sn.jsxs("div",{className:"space-y-2",children:[sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"Package:"}),sn.jsx("span",{className:"font-medium capitalize",children:c.id})]}),sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"Base Gems:"}),sn.jsx("span",{className:"font-medium",children:c.gems})]}),c.bonus>0&&sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"Bonus Gems:"}),sn.jsxs("span",{className:"font-medium text-green-600",children:["+",c.bonus]})]}),sn.jsxs("div",{className:"border-t pt-2",children:[sn.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[sn.jsx("span",{children:"Total Gems:"}),sn.jsx("span",{className:"text-purple-600",children:c.gems+c.bonus})]}),sn.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[sn.jsx("span",{children:"Total Price:"}),sn.jsxs("span",{children:["$",c.price]})]})]})]})]}),o&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-6",children:sn.jsx("p",{className:"text-sm text-red-700",children:o})}),sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsx("button",{onClick:r,disabled:s,className:"flex-1 px-6 py-3 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),sn.jsx("button",{onClick:async()=>{const e=ju.find(e=>e.id===n);if(e){i(!0),l(null);try{const t=await fetch("/api/payments/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({package_id:n,gems:e.gems+e.bonus,price:e.price})});if(t.ok){const{checkout_url:e}=await t.json();window.location.href=e}else{const e=await t.json();l(e.error||"Failed to create payment session")}}catch(t){l("Payment processing failed. Please try again.")}finally{i(!1)}}},disabled:s||!c,className:"flex-2 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2",children:s?sn.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}):sn.jsxs(sn.Fragment,{children:[sn.jsx(Mt,{className:"w-5 h-5"}),sn.jsxs("span",{children:["Purchase $",c?.price," - ",c?c.gems+c.bonus:0," Gems"]})]})})]}),sn.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"By purchasing gems, you agree to our Terms of Service. Gems are virtual currency and have no real-world value. All sales are final and non-refundable."})]})]})})}function Nu(){const{user:e,redirectToLogin:t}=bn(),[r,n]=u.useState(null),[a,s]=u.useState(!1);return sn.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mt-6",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[sn.jsx(Br,{className:"w-5 h-5 text-yellow-600"}),sn.jsx("h3",{className:"text-lg font-semibold text-yellow-800",children:"Authentication Debugger"})]}),sn.jsxs("div",{className:"space-y-4",children:[sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsxs("button",{onClick:async()=>{s(!0);try{const t=document.cookie,r=t.includes("mocha_session_token"),a=Nl(),s=await fetch("/api/users/me",{credentials:"include",headers:a}),i=await s.text();let o=null;try{o=JSON.parse(i)}catch(S$){}const l=await fetch("/api/app/users/me",{credentials:"include",headers:a}),c=await l.text();let d=null;try{d=JSON.parse(c)}catch(S$){}const u={timestamp:(new Date).toISOString(),cookies:{present:!!t,count:t.split(";").length,hasSessionToken:r,raw:t},mochaAuth:{status:s.status,statusText:s.statusText,data:o,headers:Object.fromEntries(s.headers.entries())},appUser:{status:l.status,statusText:l.statusText,data:d,headers:Object.fromEntries(l.headers.entries())},reactAuth:{hasUser:!!e,user:e}};n(u)}catch(t){n({error:t instanceof Error?t.message:"Unknown error"})}finally{s(!1)}},disabled:a,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[a?sn.jsx(_r,{className:"w-4 h-4 animate-spin"}):sn.jsx(St,{className:"w-4 h-4"}),sn.jsx("span",{children:a?"Testing...":"Run Full Auth Test"})]}),sn.jsx("button",{onClick:()=>{localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{const t=e.indexOf("="),r=t>-1?e.substr(0,t):e;document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/",document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain="+window.location.hostname}),alert("All data cleared. Please refresh the page.")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Clear All Data"}),sn.jsxs("button",{onClick:async()=>{try{await t()}catch(e){alert("Login redirect failed. Check console for details.")}},className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[sn.jsx(ir,{className:"w-4 h-4"}),sn.jsx("span",{children:"Force Login"})]})]}),r&&sn.jsxs("div",{className:"bg-white rounded-lg p-4 border",children:[sn.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Debug Results:"}),sn.jsx("pre",{className:"text-xs text-gray-700 overflow-auto max-h-96 bg-gray-50 p-3 rounded",children:JSON.stringify(r,null,2)})]}),sn.jsxs("div",{className:"text-sm text-yellow-700",children:[sn.jsx("p",{children:sn.jsx("strong",{children:"Instructions:"})}),sn.jsxs("ol",{className:"list-decimal list-inside space-y-1 mt-2",children:[sn.jsx("li",{children:'Click "Run Full Auth Test" to diagnose authentication issues'}),sn.jsx("li",{children:'If authentication is broken, try "Clear All Data" then "Force Login"'}),sn.jsx("li",{children:"Check the debug results to see exactly what's failing"}),sn.jsx("li",{children:"All debug info is also logged to the browser console"})]})]})]})]})}function _u({isOpen:e,onClose:t,holding:r,onSuccess:n}){const[a,s]=u.useState(()=>r?Math.min(r.available_to_sell,r.owned_shares):0),[i,o]=u.useState(()=>r?.current_price||0),[l,c]=u.useState(!1),[d,h]=u.useState(null);if(u.useEffect(()=>{r&&e&&(s(Math.min(r.available_to_sell,r.owned_shares)),o(r.current_price),h(null))},[r,e]),!e||!r)return null;const m=()=>{l||(s(Math.min(r.available_to_sell,r.owned_shares)),o(r.current_price),h(null),t())};return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:sn.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full mx-4",children:[sn.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"List Shares for Resale"}),sn.jsx("p",{className:"text-sm text-gray-500",children:r.content_title})]}),sn.jsx("button",{onClick:m,className:"text-gray-400 hover:text-gray-600","aria-label":"Close list shares modal",children:""})]}),sn.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),r)if(a<=0||i<=0)h("Enter a valid quantity and price.");else{c(!0),h(null);try{await(async e=>{const t=await kl("/api/shares/listings",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){const e=await t.json().catch(()=>({}));throw new Error(e.error||"Failed to create listing")}return t.json()})({content_id:r.content_id,content_title:r.content_title,content_thumbnail:r.content_thumbnail,quantity:a,ask_price:i}),n?.(),m()}catch(t){h(t instanceof Error?t.message:"Failed to create listing")}finally{c(!1)}}},className:"p-6 space-y-6",children:[sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity"}),sn.jsx("input",{type:"number",min:1,max:r.available_to_sell,value:a,onChange:e=>s(Number(e.target.value)),className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),sn.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Available: ",r.available_to_sell," shares"]})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ask Price (per share)"}),sn.jsx("input",{type:"number",min:.01,step:.01,value:i,onChange:e=>o(Number(e.target.value)),className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),sn.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Market price ",r.current_price.toFixed(2)]})]})]}),sn.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-sm text-gray-600",children:[sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{children:"Estimated proceeds"}),sn.jsxs("span",{className:"font-medium text-gray-900",children:["$",(a*i).toFixed(2)]})]}),sn.jsxs("div",{className:"flex justify-between mt-2",children:[sn.jsx("span",{children:"Transaction fee (2.5%)"}),sn.jsxs("span",{children:["$",(a*i*.025).toFixed(2)]})]}),sn.jsxs("div",{className:"flex justify-between mt-2 text-green-600 font-semibold",children:[sn.jsx("span",{children:"Net payout"}),sn.jsxs("span",{children:["$",(a*i*.975).toFixed(2)]})]})]}),d&&sn.jsx("p",{className:"text-sm text-red-600",children:d}),sn.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[sn.jsx("button",{type:"button",onClick:m,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800",children:"Cancel"}),sn.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg shadow-sm hover:bg-orange-700 disabled:opacity-60",children:l?"Listing":"List Shares"})]})]})]})})}const ku=()=>[{content_id:"content-demo-1",content_title:"Launch Campaign: Social Buzz",content_thumbnail:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=600&q=80",creator_id:"00000000-0000-0000-0000-000000000001",creator_name:"Demo Creator",creator_avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=demo_content",platform:"instagram",owned_shares:180,available_to_sell:60,avg_cost:8.75,current_price:12.5,market_value:2250,unrealized_gain:675,day_change_pct:3.2,week_change_pct:8.5,month_change_pct:22.4,last_trade_at:new Date(Date.now()-72e5).toISOString(),is_listed:!0,listing_id:"listing-demo-1",visibility:"public"},{content_id:"content-demo-2",content_title:"Creator Toolkit Walkthrough",content_thumbnail:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&w=600&q=80",creator_id:"00000000-0000-0000-0000-000000000002",creator_name:"Creator Collective",creator_avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=creator_collective",platform:"youtube",owned_shares:95,available_to_sell:95,avg_cost:15,current_price:18.75,market_value:1781.25,unrealized_gain:356.25,day_change_pct:1.2,week_change_pct:4.7,month_change_pct:12.8,last_trade_at:new Date(Date.now()-216e5).toISOString(),is_listed:!1,visibility:"public"}],Su=()=>[{id:"prediction-demo-1",forecast_id:"forecast-demo-1",content_title:"Creator Toolkit Walkthrough",platform:"youtube",prediction_side:"over",amount:150,potential_payout:315,status:"active",result:void 0,created_at:new Date(Date.now()-2592e5).toISOString(),resolved_at:void 0},{id:"prediction-demo-2",forecast_id:"forecast-demo-2",content_title:"Launch Day Reach",platform:"instagram",prediction_side:"under",amount:80,potential_payout:152,status:"settled",result:"won",created_at:new Date(Date.now()-10368e5).toISOString(),resolved_at:new Date(Date.now()-864e6).toISOString()}],Cu=e=>{const t=ku(),r=t.find(t=>t.content_id===e)||t[0],n=Date.now();return{holding:r,content:{description:"Behind-the-scenes look at the launch strategy, featuring creator testimonials and performance metrics.",genres:["Campaign Spotlight","Community"],tags:["launch","growth","community"],published_at:new Date(n-6048e5).toISOString(),total_views:128e3,engagement_rate:12.4,earnings_to_date:4320},performance:{history:Array.from({length:14},(e,t)=>({date:new Date(n-24*(13-t)*60*60*1e3).toISOString().split("T")[0],price:r.current_price*(.85+.01*t),volume:Math.round(120*Math.random()+40)})),ledger:[{id:"txn-1",type:"purchase",quantity:r.owned_shares,price:r.avg_cost,timestamp:new Date(n-10368e5).toISOString()},{id:"txn-2",type:"dividend",quantity:0,price:120,timestamp:new Date(n-3456e5).toISOString()}]},marketplace:{listings:[{id:"listing-history-1",quantity:40,ask_price:11.8,status:"filled",filled_at:new Date(n-432e6).toISOString()}],offers:[{id:"offer-history-1",quantity:30,bid_price:12.6,status:"pending",buyer_name:"Marketplace Analyst",message:"Happy to take this block before launch day finale."}]}}},Ou=e=>{const t=Su(),r=t.find(t=>t.id===e)||t[0],n=Date.now();return{prediction:r,forecast:{metric:"7-day reach",target:"125K",odds:2.1,expires_at:new Date(n+3456e5).toISOString(),creator_projection:"Over performance expected due to paid boosts and influencer cross-promotions scheduled mid-week."},trajectory:Array.from({length:10},(e,t)=>{const r=new Date(n-24*(9-t)*60*60*1e3),a=6e4+6500*t+Math.round(2500*Math.random());return{date:r.toISOString().split("T")[0],actual:a,expected:55e3+7e3*t}}),participants:[{username:"growth_analyst",amount:150,side:"over",status:"active"},{username:"launch_partner",amount:90,side:"under",status:"active"}]}},Eu=async e=>{try{const t=e?`?userId=${encodeURIComponent(e)}`:"",r=await kl(`/api/portfolio/holdings${t}`,{credentials:"include"});if(!r.ok)return ku();return(await r.json()).holdings||ku()}catch(t){return ku()}};function Pu(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Pu(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Tu(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Pu(e))&&(n&&(n+=" "),n+=t);return n}var Au=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Mu(e){return"string"==typeof e&&Au.includes(e)}var Du=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Iu(e){return"string"==typeof e&&Du.includes(e)}function Ru(e){return"string"==typeof e&&e.startsWith("data-")}function $u(e){var t=Object.entries(e).filter(e=>{var[t]=e;return Iu(t)||Ru(t)});return Object.fromEntries(t)}function Lu(e){return null==e?null:u.isValidElement(e)&&"object"==typeof e.props&&null!==e.props?$u(e.props):"object"!=typeof e||Array.isArray(e)?null:$u(e)}function Fu(e){var t=Object.entries(e).filter(e=>{var[t]=e;return Iu(t)||Ru(t)||Mu(t)});return Object.fromEntries(t)}function zu(e){return null==e?null:u.isValidElement(e)?Fu(e.props):"object"!=typeof e||Array.isArray(e)?null:Fu(e)}var Uu=["children","width","height","viewBox","className","style","title","desc"];function Bu(){return Bu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bu.apply(null,arguments)}var qu=u.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:i,style:o,title:l,desc:c}=e,d=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,Uu),h=s||{width:n,height:a,x:0,y:0},m=Tu("recharts-surface",i);return u.createElement("svg",Bu({},Fu(d),{className:m,width:n,height:a,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),u.createElement("title",null,l),u.createElement("desc",null,c),r)}),Wu=["children","className"];function Ku(){return Ku=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ku.apply(null,arguments)}var Vu=u.forwardRef((e,t)=>{var{children:r,className:n}=e,a=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,Wu),s=Tu("recharts-layer",n);return u.createElement("g",Ku({className:s},Fu(a),{ref:t}),r)}),Hu=u.createContext(null);function Gu(e){return function(){return e}}const Yu=Math.cos,Ju=Math.sin,Zu=Math.sqrt,Qu=Math.PI,Xu=2*Qu,eh=Math.PI,th=2*eh,rh=1e-6,nh=th-rh;function ah(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class sh{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?ah:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ah;const r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,n){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,t,r,n,a,s){this._append`C${+e},${+t},${+r},${+n},${this._x1=+a},${this._y1=+s}`}arcTo(e,t,r,n,a){if(e=+e,t=+t,r=+r,n=+n,(a=+a)<0)throw new Error(`negative radius: ${a}`);let s=this._x1,i=this._y1,o=r-e,l=n-t,c=s-e,d=i-t,u=c*c+d*d;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(u>rh)if(Math.abs(d*o-l*c)>rh&&a){let h=r-s,m=n-i,p=o*o+l*l,x=h*h+m*m,f=Math.sqrt(p),g=Math.sqrt(u),y=a*Math.tan((eh-Math.acos((p+u-x)/(2*f*g)))/2),b=y/g,v=y/f;Math.abs(b-1)>rh&&this._append`L${e+b*c},${t+b*d}`,this._append`A${a},${a},0,0,${+(d*h>c*m)},${this._x1=e+v*o},${this._y1=t+v*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,r,n,a,s){if(e=+e,t=+t,s=!!s,(r=+r)<0)throw new Error(`negative radius: ${r}`);let i=r*Math.cos(n),o=r*Math.sin(n),l=e+i,c=t+o,d=1^s,u=s?n-a:a-n;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>rh||Math.abs(this._y1-c)>rh)&&this._append`L${l},${c}`,r&&(u<0&&(u=u%th+th),u>nh?this._append`A${r},${r},0,1,${d},${e-i},${t-o}A${r},${r},0,1,${d},${this._x1=l},${this._y1=c}`:u>rh&&this._append`A${r},${r},0,${+(u>=eh)},${d},${this._x1=e+r*Math.cos(a)},${this._y1=t+r*Math.sin(a)}`)}rect(e,t,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function ih(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError(`invalid digits: ${r}`);t=e}return e},()=>new sh(t)}function oh(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function lh(e){this._context=e}function ch(e){return new lh(e)}function dh(e){return e[0]}function uh(e){return e[1]}function hh(e,t){var r=Gu(!0),n=null,a=ch,s=null,i=ih(o);function o(o){var l,c,d,u=(o=oh(o)).length,h=!1;for(null==n&&(s=a(d=i())),l=0;l<=u;++l)!(l<u&&r(c=o[l],l,o))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(c,l,o),+t(c,l,o));if(d)return s=null,d+""||null}return e="function"==typeof e?e:void 0===e?dh:Gu(e),t="function"==typeof t?t:void 0===t?uh:Gu(t),o.x=function(t){return arguments.length?(e="function"==typeof t?t:Gu(+t),o):e},o.y=function(e){return arguments.length?(t="function"==typeof e?e:Gu(+e),o):t},o.defined=function(e){return arguments.length?(r="function"==typeof e?e:Gu(!!e),o):r},o.curve=function(e){return arguments.length?(a=e,null!=n&&(s=a(n)),o):a},o.context=function(e){return arguments.length?(null==e?n=s=null:s=a(n=e),o):n},o}function mh(e,t,r){var n=null,a=Gu(!0),s=null,i=ch,o=null,l=ih(c);function c(c){var d,u,h,m,p,x=(c=oh(c)).length,f=!1,g=new Array(x),y=new Array(x);for(null==s&&(o=i(p=l())),d=0;d<=x;++d){if(!(d<x&&a(m=c[d],d,c))===f)if(f=!f)u=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=d-1;h>=u;--h)o.point(g[h],y[h]);o.lineEnd(),o.areaEnd()}f&&(g[d]=+e(m,d,c),y[d]=+t(m,d,c),o.point(n?+n(m,d,c):g[d],r?+r(m,d,c):y[d]))}if(p)return o=null,p+""||null}function d(){return hh().defined(a).curve(i).context(s)}return e="function"==typeof e?e:void 0===e?dh:Gu(+e),t="function"==typeof t?t:Gu(void 0===t?0:+t),r="function"==typeof r?r:void 0===r?uh:Gu(+r),c.x=function(t){return arguments.length?(e="function"==typeof t?t:Gu(+t),n=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:Gu(+t),c):e},c.x1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:Gu(+e),c):n},c.y=function(e){return arguments.length?(t="function"==typeof e?e:Gu(+e),r=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:Gu(+e),c):t},c.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Gu(+e),c):r},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(r)},c.lineX1=function(){return d().x(n).y(t)},c.defined=function(e){return arguments.length?(a="function"==typeof e?e:Gu(!!e),c):a},c.curve=function(e){return arguments.length?(i=e,null!=s&&(o=i(s)),c):i},c.context=function(e){return arguments.length?(null==e?s=o=null:o=i(s=e),c):s},c}lh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class ph{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}const xh={draw(e,t){const r=Zu(t/Qu);e.moveTo(r,0),e.arc(0,0,r,0,Xu)}},fh={draw(e,t){const r=Zu(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},gh=Zu(1/3),yh=2*gh,bh={draw(e,t){const r=Zu(t/yh),n=r*gh;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},vh={draw(e,t){const r=Zu(t),n=-r/2;e.rect(n,n,r,r)}},jh=Ju(Qu/10)/Ju(7*Qu/10),wh=Ju(Xu/10)*jh,Nh=-Yu(Xu/10)*jh,_h={draw(e,t){const r=Zu(.8908130915292852*t),n=wh*r,a=Nh*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const t=Xu*s/5,i=Yu(t),o=Ju(t);e.lineTo(o*r,-i*r),e.lineTo(i*n-o*a,o*n+i*a)}e.closePath()}},kh=Zu(3),Sh={draw(e,t){const r=-Zu(t/(3*kh));e.moveTo(0,2*r),e.lineTo(-kh*r,-r),e.lineTo(kh*r,-r),e.closePath()}},Ch=-.5,Oh=Zu(3)/2,Eh=1/Zu(12),Ph=3*(Eh/2+1),Th={draw(e,t){const r=Zu(t/Ph),n=r/2,a=r*Eh,s=n,i=r*Eh+r,o=-s,l=i;e.moveTo(n,a),e.lineTo(s,i),e.lineTo(o,l),e.lineTo(Ch*n-Oh*a,Oh*n+Ch*a),e.lineTo(Ch*s-Oh*i,Oh*s+Ch*i),e.lineTo(Ch*o-Oh*l,Oh*o+Ch*l),e.lineTo(Ch*n+Oh*a,Ch*a-Oh*n),e.lineTo(Ch*s+Oh*i,Ch*i-Oh*s),e.lineTo(Ch*o+Oh*l,Ch*l-Oh*o),e.closePath()}};function Ah(){}function Mh(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Dh(e){this._context=e}function Ih(e){this._context=e}function Rh(e){this._context=e}function $h(e){this._context=e}function Lh(e){return e<0?-1:1}function Fh(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),o=(s*a+i*n)/(n+a);return(Lh(s)+Lh(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function zh(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Uh(e,t,r){var n=e._x0,a=e._y0,s=e._x1,i=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,a+o*t,s-o,i-o*r,s,i)}function Bh(e){this._context=e}function qh(e){this._context=new Wh(e)}function Wh(e){this._context=e}function Kh(e){this._context=e}function Vh(e){var t,r,n=e.length-1,a=new Array(n),s=new Array(n),i=new Array(n);for(a[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,s[n-1]=7,i[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/s[t-1],s[t]-=r,i[t]-=r*i[t-1];for(a[n-1]=i[n-1]/s[n-1],t=n-2;t>=0;--t)a[t]=(i[t]-a[t+1])/s[t];for(s[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function Hh(e,t){this._context=e,this._t=t}function Gh(e,t){if((a=e.length)>1)for(var r,n,a,s=1,i=e[t[0]],o=i.length;s<a;++s)for(n=i,i=e[t[s]],r=0;r<o;++r)i[r][1]+=i[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}function Yh(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Jh(e,t){return e[t]}function Zh(e){const t=[];return t.key=e,t}Dh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Mh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Mh(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Ih.prototype={areaStart:Ah,areaEnd:Ah,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Mh(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Rh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Mh(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},$h.prototype={areaStart:Ah,areaEnd:Ah,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},Bh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Uh(this,this._t0,zh(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Uh(this,zh(this,r=Fh(this,e,t)),r);break;default:Uh(this,this._t0,r=Fh(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(qh.prototype=Object.create(Bh.prototype)).point=function(e,t){Bh.prototype.point.call(this,t,e)},Wh.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}},Kh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=Vh(e),a=Vh(t),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[i],t[i]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Hh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};var Qh,Xh={},em={};function tm(){return Qh||(Qh=1,e=em,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isUnsafeProperty=function(e){return"__proto__"===e}),em;var e}var rm,nm={};function am(){return rm||(rm=1,e=nm,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}),nm;var e}var sm,im={};function om(){return sm||(sm=1,e=im,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.toKey=function(e){return"string"==typeof e||"symbol"==typeof e?e:Object.is(e?.valueOf?.(),-0)?"-0":String(e)}),im;var e}var lm,cm,dm,um,hm,mm={},pm={};function xm(){return lm||(lm=1,e=pm,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.toString=function e(t){if(null==t)return"";if("string"==typeof t)return t;if(Array.isArray(t))return t.map(e).join(",");const r=String(t);return"0"===r&&Object.is(Number(t),-0)?"-0":r}),pm;var e}function fm(){return cm||(cm=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xm(),r=om();e.toPath=function(e){if(Array.isArray(e))return e.map(r.toKey);if("symbol"==typeof e)return[e];const n=[],a=(e=t.toString(e)).length;if(0===a)return n;let s=0,i="",o="",l=!1;for(46===e.charCodeAt(0)&&(n.push(""),s++);s<a;){const t=e[s];o?"\\"===t&&s+1<a?(s++,i+=e[s]):t===o?o="":i+=t:l?'"'===t||"'"===t?o=t:"]"===t?(l=!1,n.push(i),i=""):i+=t:"["===t?(l=!0,i&&(n.push(i),i="")):"."===t?i&&(n.push(i),i=""):i+=t,s++}return i&&n.push(i),n}}(mm)),mm}function gm(){return dm||(dm=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tm(),r=am(),n=om(),a=fm();e.get=function e(s,i,o){if(null==s)return o;switch(typeof i){case"string":{if(t.isUnsafeProperty(i))return o;const n=s[i];return void 0===n?r.isDeepKey(i)?e(s,a.toPath(i),o):o:n}case"number":case"symbol":{"number"==typeof i&&(i=n.toKey(i));const e=s[i];return void 0===e?o:e}default:{if(Array.isArray(i))return function(e,r,n){if(0===r.length)return n;let a=e;for(let s=0;s<r.length;s++){if(null==a)return n;if(t.isUnsafeProperty(r[s]))return n;a=a[r[s]]}if(void 0===a)return n;return a}(s,i,o);if(i=Object.is(i?.valueOf(),-0)?"-0":String(i),t.isUnsafeProperty(i))return o;const e=s[i];return void 0===e?o:e}}}}(Xh)),Xh}function ym(){return hm?um:(hm=1,um=gm().get)}const bm=n(ym());var vm=e=>0===e?0:e>0?1:-1,jm=e=>"number"==typeof e&&e!=+e,wm=e=>"string"==typeof e&&e.indexOf("%")===e.length-1,Nm=e=>("number"==typeof e||e instanceof Number)&&!jm(e),_m=e=>Nm(e)||"string"==typeof e,km=0,Sm=e=>{var t=++km;return"".concat(e||"").concat(t)},Cm=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!Nm(e)&&"string"!=typeof e)return n;if(wm(e)){if(null==t)return n;var s=e.indexOf("%");r=t*parseFloat(e.slice(0,s))/100}else r=+e;return jm(r)&&(r=n),a&&null!=t&&r>t&&(r=t),r},Om=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++){if(r[e[n]])return!0;r[e[n]]=!0}return!1};function Em(e,t,r){return Nm(e)&&Nm(t)?e+r*(t-e):t}function Pm(e,t,r){if(e&&e.length)return e.find(e=>e&&("function"==typeof t?t(e):bm(e,t))===r)}var Tm=e=>null==e,Am=e=>Tm(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),Mm=["type","size","sizeType"];function Dm(){return Dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dm.apply(null,arguments)}function Im(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Rm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Im(Object(r),!0).forEach(function(t){$m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Im(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $m(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Lm={symbolCircle:xh,symbolCross:fh,symbolDiamond:bh,symbolSquare:vh,symbolStar:_h,symbolTriangle:Sh,symbolWye:Th},Fm=Math.PI/180,zm=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=Rm(Rm({},function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,Mm)),{},{type:t,size:r,sizeType:n}),s="circle";"string"==typeof t&&(s=t);var{className:i,cx:o,cy:l}=a,c=Fu(a);return o===+o&&l===+l&&r===+r?u.createElement("path",Dm({},c,{className:Tu("recharts-symbols",i),transform:"translate(".concat(o,", ").concat(l,")"),d:(()=>{var e=(e=>{var t="symbol".concat(Am(e));return Lm[t]||xh})(s),t=function(e,t){let r=null,n=ih(a);function a(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return e="function"==typeof e?e:Gu(e||xh),t="function"==typeof t?t:Gu(void 0===t?64:+t),a.type=function(t){return arguments.length?(e="function"==typeof t?t:Gu(t),a):e},a.size=function(e){return arguments.length?(t="function"==typeof e?e:Gu(+e),a):t},a.context=function(e){return arguments.length?(r=e??null,a):r},a}().type(e).size(((e,t,r)=>{if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*Fm;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.tan(n)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(r,n,s)),a=t();if(null!==a)return a})()})):null};zm.registerSymbol=(e,t)=>{Lm["symbol".concat(Am(e))]=t};var Um=(e,t)=>{if(!e||"function"==typeof e||"boolean"==typeof e)return null;var r=e;if(u.isValidElement(e)&&(r=e.props),"object"!=typeof r&&"function"!=typeof r)return null;var n={};return Object.keys(r).forEach(e=>{Mu(e)&&(n[e]=t=>r[e](r,t))}),n},Bm=(e,t,r)=>{if(null===e||"object"!=typeof e&&"function"!=typeof e)return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];Mu(a)&&"function"==typeof s&&(n||(n={}),n[a]=((e,t,r)=>n=>(e(t,r,n),null))(s,t,r))}),n};function qm(){return qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qm.apply(null,arguments)}function Wm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Km(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Vm=32;class Hm extends u.PureComponent{renderIcon(e,t){var{inactiveColor:r}=this.props,n=16,a=Vm/6,s=Vm/3,i=e.inactive?r:e.color,o=null!=t?t:e.type;if("none"===o)return null;if("plainline"===o)return u.createElement("line",{strokeWidth:4,fill:"none",stroke:i,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:n,x2:Vm,y2:n,className:"recharts-legend-icon"});if("line"===o)return u.createElement("path",{strokeWidth:4,fill:"none",stroke:i,d:"M0,".concat(n,"h").concat(s,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(n,"\n            H").concat(Vm,"M").concat(2*s,",").concat(n,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(n),className:"recharts-legend-icon"});if("rect"===o)return u.createElement("path",{stroke:"none",fill:i,d:"M0,".concat(4,"h").concat(Vm,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(u.isValidElement(e.legendIcon)){var l=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wm(Object(r),!0).forEach(function(t){Km(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e);return delete l.legendIcon,u.cloneElement(e.legendIcon,l)}return u.createElement(zm,{fill:i,cx:n,cy:n,size:Vm,sizeType:"diameter",type:o})}renderItems(){var{payload:e,iconSize:t,layout:r,formatter:n,inactiveColor:a,iconType:s}=this.props,i={x:0,y:0,width:Vm,height:Vm},o={display:"horizontal"===r?"inline-block":"block",marginRight:10},l={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((e,r)=>{var c=e.formatter||n,d=Tu({"recharts-legend-item":!0,["legend-item-".concat(r)]:!0,inactive:e.inactive});if("none"===e.type)return null;var h=e.inactive?a:e.color,m=c?c(e.value,e,r):e.value;return u.createElement("li",qm({className:d,style:o,key:"legend-item-".concat(r)},Bm(this.props,e,r)),u.createElement(qu,{width:t,height:t,viewBox:i,style:l,"aria-label":"".concat(m," legend icon")},this.renderIcon(e,s)),u.createElement("span",{className:"recharts-legend-item-text",style:{color:h}},m))})}render(){var{payload:e,layout:t,align:r}=this.props;if(!e||!e.length)return null;var n={padding:0,margin:0,textAlign:"horizontal"===t?r:"left"};return u.createElement("ul",{className:"recharts-default-legend",style:n},this.renderItems())}}Km(Hm,"displayName","Legend"),Km(Hm,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Gm,Ym={},Jm={};function Zm(){return Gm||(Gm=1,e=Jm,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.uniqBy=function(e,t){const r=new Map;for(let n=0;n<e.length;n++){const a=e[n],s=t(a);r.has(s)||r.set(s,a)}return Array.from(r.values())}),Jm;var e}var Qm,Xm={};function ep(){return Qm||(Qm=1,e=Xm,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.identity=function(e){return e}),Xm;var e}var tp,rp,np={},ap={},sp={};function ip(){return tp||(tp=1,e=sp,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}),sp;var e}function op(){return rp||(rp=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ip();e.isArrayLike=function(e){return null!=e&&"function"!=typeof e&&t.isLength(e.length)}}(ap)),ap}var lp,cp,dp={};function up(){return lp||(lp=1,e=dp,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isObjectLike=function(e){return"object"==typeof e&&null!==e}),dp;var e}function hp(){return cp||(cp=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=op(),r=up();e.isArrayLikeObject=function(e){return r.isObjectLike(e)&&t.isArrayLike(e)}}(np)),np}var mp,pp={},xp={};function fp(){return mp||(mp=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gm();e.property=function(e){return function(r){return t.get(r,e)}}}(xp)),xp}var gp,yp={},bp={},vp={},jp={};function wp(){return gp||(gp=1,e=jp,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isObject=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)}),jp;var e}var Np,_p={};function kp(){return Np||(Np=1,e=_p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isPrimitive=function(e){return null==e||"object"!=typeof e&&"function"!=typeof e}),_p;var e}var Sp,Cp,Op,Ep={};function Pp(){return Sp||(Sp=1,e=Ep,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.eq=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}),Ep;var e}function Tp(){return Cp||(Cp=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wp(),r=kp(),n=Pp();function a(e,o,l,c){if(o===e)return!0;switch(typeof o){case"object":return function(e,t,n,a){if(null==t)return!0;if(Array.isArray(t))return s(e,t,n,a);if(t instanceof Map)return function(e,t,r,n){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[a,s]of t.entries()){if(!1===r(e.get(a),s,a,e,t,n))return!1}return!0}(e,t,n,a);if(t instanceof Set)return i(e,t,n,a);const o=Object.keys(t);if(null==e)return 0===o.length;if(0===o.length)return!0;if(a?.has(t))return a.get(t)===e;a?.set(t,e);try{for(let s=0;s<o.length;s++){const i=o[s];if(!r.isPrimitive(e)&&!(i in e))return!1;if(void 0===t[i]&&void 0!==e[i])return!1;if(null===t[i]&&null!==e[i])return!1;if(!n(e[i],t[i],i,e,t,a))return!1}return!0}finally{a?.delete(t)}}(e,o,l,c);case"function":return Object.keys(o).length>0?a(e,{...o},l,c):n.eq(e,o);default:return t.isObject(e)?"string"!=typeof o||""===o:n.eq(e,o)}}function s(e,t,r,n){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const a=new Set;for(let s=0;s<t.length;s++){const i=t[s];let o=!1;for(let l=0;l<e.length;l++){if(a.has(l))continue;let c=!1;if(r(e[l],i,s,e,t,n)&&(c=!0),c){a.add(l),o=!0;break}}if(!o)return!1}return!0}function i(e,t,r,n){return 0===t.size||e instanceof Set&&s([...e],[...t],r,n)}e.isMatchWith=function e(t,r,n){return"function"!=typeof n?e(t,r,()=>{}):a(t,r,function e(t,r,s,i,o,l){const c=n(t,r,s,i,o,l);return void 0!==c?Boolean(c):a(t,r,e,l)},new Map)},e.isSetMatch=i}(vp)),vp}function Ap(){return Op||(Op=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tp();e.isMatch=function(e,r){return t.isMatchWith(e,r,()=>{})}}(bp)),bp}var Mp,Dp={},Ip={},Rp={};function $p(){return Mp||(Mp=1,e=Rp,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}),Rp;var e}var Lp,Fp={};function zp(){return Lp||(Lp=1,e=Fp,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}),Fp;var e}var Up,Bp={};function qp(){return Up||(Up=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});e.argumentsTag="[object Arguments]",e.arrayBufferTag="[object ArrayBuffer]",e.arrayTag="[object Array]",e.bigInt64ArrayTag="[object BigInt64Array]",e.bigUint64ArrayTag="[object BigUint64Array]",e.booleanTag="[object Boolean]",e.dataViewTag="[object DataView]",e.dateTag="[object Date]",e.errorTag="[object Error]",e.float32ArrayTag="[object Float32Array]",e.float64ArrayTag="[object Float64Array]",e.functionTag="[object Function]",e.int16ArrayTag="[object Int16Array]",e.int32ArrayTag="[object Int32Array]",e.int8ArrayTag="[object Int8Array]",e.mapTag="[object Map]",e.numberTag="[object Number]",e.objectTag="[object Object]",e.regexpTag="[object RegExp]",e.setTag="[object Set]",e.stringTag="[object String]",e.symbolTag="[object Symbol]",e.uint16ArrayTag="[object Uint16Array]",e.uint32ArrayTag="[object Uint32Array]",e.uint8ArrayTag="[object Uint8Array]",e.uint8ClampedArrayTag="[object Uint8ClampedArray]"}(Bp)),Bp}var Wp,Kp,Vp,Hp,Gp={};function Yp(){return Wp||(Wp=1,e=Gp,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}),Gp;var e}function Jp(){return Kp||(Kp=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$p(),r=zp(),n=qp(),a=kp(),s=Yp();function i(e,t,l,c=new Map,d=void 0){const u=d?.(e,t,l,c);if(void 0!==u)return u;if(a.isPrimitive(e))return e;if(c.has(e))return c.get(e);if(Array.isArray(e)){const t=new Array(e.length);c.set(e,t);for(let r=0;r<e.length;r++)t[r]=i(e[r],r,l,c,d);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;c.set(e,t);for(const[r,n]of e)t.set(r,i(n,r,l,c,d));return t}if(e instanceof Set){const t=new Set;c.set(e,t);for(const r of e)t.add(i(r,void 0,l,c,d));return t}if("undefined"!=typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(s.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);c.set(e,t);for(let r=0;r<e.length;r++)t[r]=i(e[r],r,l,c,d);return t}if(e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return c.set(e,t),o(t,e,l,c,d),t}if("undefined"!=typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return c.set(e,t),o(t,e,l,c,d),t}if("undefined"!=typeof Blob&&e instanceof Blob){const t=new Blob([e],{type:e.type});return c.set(e,t),o(t,e,l,c,d),t}if(e instanceof Error){const t=new e.constructor;return c.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,o(t,e,l,c,d),t}if(e instanceof Boolean){const t=new Boolean(e.valueOf());return c.set(e,t),o(t,e,l,c,d),t}if(e instanceof Number){const t=new Number(e.valueOf());return c.set(e,t),o(t,e,l,c,d),t}if(e instanceof String){const t=new String(e.valueOf());return c.set(e,t),o(t,e,l,c,d),t}if("object"==typeof e&&function(e){switch(r.getTag(e)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return c.set(e,t),o(t,e,l,c,d),t}return e}function o(e,r,n=e,a,s){const o=[...Object.keys(r),...t.getSymbols(r)];for(let t=0;t<o.length;t++){const l=o[t],c=Object.getOwnPropertyDescriptor(e,l);(null==c||c.writable)&&(e[l]=i(r[l],l,n,a,s))}}e.cloneDeepWith=function(e,t){return i(e,void 0,e,new Map,t)},e.cloneDeepWithImpl=i,e.copyProperties=o}(Ip)),Ip}function Zp(){return Vp||(Vp=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jp();e.cloneDeep=function(e){return t.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}}(Dp)),Dp}function Qp(){return Hp||(Hp=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ap(),r=Zp();e.matches=function(e){return e=r.cloneDeep(e),r=>t.isMatch(r,e)}}(yp)),yp}var Xp,ex,tx={},rx={},nx={};function ax(){return Xp||(Xp=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jp(),r=qp();e.cloneDeepWith=function(e,n){return t.cloneDeepWith(e,(a,s,i,o)=>{const l=n?.(a,s,i,o);if(void 0!==l)return l;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case r.numberTag:case r.stringTag:case r.booleanTag:{const r=new e.constructor(e?.valueOf());return t.copyProperties(r,e),r}case r.argumentsTag:{const r={};return t.copyProperties(r,e),r.length=e.length,r[Symbol.iterator]=e[Symbol.iterator],r}default:return}})}}(nx)),nx}function sx(){return ex||(ex=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ax();e.cloneDeep=function(e){return t.cloneDeepWith(e)}}(rx)),rx}var ix,ox={},lx={};function cx(){return ix||(ix=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;e.isIndex=function(e,r=Number.MAX_SAFE_INTEGER){switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<r;case"symbol":return!1;case"string":return t.test(e)}}}(lx)),lx}var dx,ux,hx,mx,px,xx,fx,gx={};function yx(){return dx||(dx=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zp();e.isArguments=function(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===t.getTag(e)}}(gx)),gx}function bx(){return ux||(ux=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=am(),r=cx(),n=yx(),a=fm();e.has=function(e,s){let i;if(i=Array.isArray(s)?s:"string"==typeof s&&t.isDeepKey(s)&&null==e?.[s]?a.toPath(s):[s],0===i.length)return!1;let o=e;for(let t=0;t<i.length;t++){const e=i[t];if(null==o||!Object.hasOwn(o,e)){if(!((Array.isArray(o)||n.isArguments(o))&&r.isIndex(e)&&e<o.length))return!1}o=o[e]}return!0}}(ox)),ox}function vx(){return hx||(hx=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ap(),r=om(),n=sx(),a=gm(),s=bx();e.matchesProperty=function(e,i){switch(typeof e){case"object":Object.is(e?.valueOf(),-0)&&(e="-0");break;case"number":e=r.toKey(e)}return i=n.cloneDeep(i),function(r){const n=a.get(r,e);return void 0===n?s.has(r,e):void 0===i?void 0===n:t.isMatch(n,i)}}}(tx)),tx}function jx(){return mx||(mx=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ep(),r=fp(),n=Qp(),a=vx();e.iteratee=function(e){if(null==e)return t.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?a.matchesProperty(e[0],e[1]):n.matches(e);case"string":case"symbol":case"number":return r.property(e)}}}(pp)),pp}function wx(){return fx?xx:(fx=1,xx=(px||(px=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zm(),r=ep(),n=hp(),a=jx();e.uniqBy=function(e,s=r.identity){return n.isArrayLikeObject(e)?t.uniqBy(Array.from(e),a.iteratee(s)):[]}}(Ym)),Ym).uniqBy)}const Nx=n(wx());function _x(e,t,r){return!0===t?Nx(e,r):"function"==typeof t?Nx(e,t):e}var kx,Sx,Cx,Ox,Ex={exports:{}},Px={},Tx={exports:{}},Ax={};function Mx(){return Sx||(Sx=1,Tx.exports=function(){if(kx)return Ax;kx=1;var e=d(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=e.useState,n=e.useEffect,a=e.useLayoutEffect,s=e.useDebugValue;function i(e){var r=e.getSnapshot;e=e.value;try{var n=r();return!t(e,n)}catch(a){return!0}}var o="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var o=t(),l=r({inst:{value:o,getSnapshot:t}}),c=l[0].inst,d=l[1];return a(function(){c.value=o,c.getSnapshot=t,i(c)&&d({inst:c})},[e,o,t]),n(function(){return i(c)&&d({inst:c}),e(function(){i(c)&&d({inst:c})})},[e]),s(o),o};return Ax.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:o,Ax}()),Tx.exports}var Dx=(Ox||(Ox=1,Ex.exports=function(){if(Cx)return Px;Cx=1;var e=d(),t=Mx(),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=t.useSyncExternalStore,a=e.useRef,s=e.useEffect,i=e.useMemo,o=e.useDebugValue;return Px.useSyncExternalStoreWithSelector=function(e,t,l,c,d){var u=a(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=i(function(){function e(e){if(!s){if(s=!0,n=e,e=c(e),void 0!==d&&h.hasValue){var t=h.value;if(d(t,e))return a=t}return a=e}if(t=a,r(n,e))return t;var i=c(e);return void 0!==d&&d(t,i)?(n=e,t):(n=e,a=i)}var n,a,s=!1,i=void 0===l?null:l;return[function(){return e(t())},null===i?void 0:function(){return e(i())}]},[t,l,c,d]);var m=n(e,u[0],u[1]);return s(function(){h.hasValue=!0,h.value=m},[m]),o(m),m},Px}()),Ex.exports),Ix=u.createContext(null),Rx=e=>e,$x=()=>{var e=u.useContext(Ix);return e?e.store.dispatch:Rx},Lx=()=>{},Fx=()=>Lx,zx=(e,t)=>e===t;function Ux(e){var t=u.useContext(Ix);return Dx.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Fx,t?t.store.getState:Lx,t?t.store.getState:Lx,t?e:Lx,zx)}var Bx=e=>Array.isArray(e)?e:[e];function qx(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(e=>"function"==typeof e)){const r=e.map(e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e).join(", ");throw new TypeError(`${t}[${r}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}var Wx="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function Kx(){return{s:0,v:void 0,o:null,p:null}}function Vx(e,t={}){let r={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:n}=t;let a,s=0;function i(){let t=r;const{length:i}=arguments;for(let e=0,r=i;e<r;e++){const r=arguments[e];if("function"==typeof r||"object"==typeof r&&null!==r){let e=t.o;null===e&&(t.o=e=new WeakMap);const n=e.get(r);void 0===n?(t=Kx(),e.set(r,t)):t=n}else{let e=t.p;null===e&&(t.p=e=new Map);const n=e.get(r);void 0===n?(t=Kx(),e.set(r,t)):t=n}}const o=t;let l;if(1===t.s)l=t.v;else if(l=e.apply(null,arguments),s++,n){const e=a?.deref?.()??a;null!=e&&n(e,l)&&(l=e,0!==s&&s--);a="object"==typeof l&&null!==l||"function"==typeof l?new Wx(l):l}return o.s=1,o.v=l,l}return i.clearCache=()=>{r={s:0,v:void 0,o:null,p:null},i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function Hx(e,...t){const r="function"==typeof e?{memoize:e,memoizeOptions:t}:e,n=(...e)=>{let t,n=0,a=0,s={},i=e.pop();"object"==typeof i&&(s=i,i=e.pop()),function(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}(i,`createSelector expects an output function after the inputs, but received: [${typeof i}]`);const o={...r,...s},{memoize:l,memoizeOptions:c=[],argsMemoize:d=Vx,argsMemoizeOptions:u=[]}=o,h=Bx(c),m=Bx(u),p=qx(e),x=l(function(){return n++,i.apply(null,arguments)},...h),f=d(function(){a++;const e=function(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}(p,arguments);return t=x.apply(null,e),t},...m);return Object.assign(f,{resultFunc:i,memoizedResultFunc:x,dependencies:p,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>t,recomputations:()=>n,resetRecomputations:()=>{n=0},memoize:l,argsMemoize:d})};return Object.assign(n,{withTypes:()=>n}),n}var Gx,Yx=Hx(Vx),Jx=Object.assign((e,t=Yx)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const r=Object.keys(e);return t(r.map(t=>e[t]),(...e)=>e.reduce((e,t,n)=>(e[r[n]]=t,e),{}))},{withTypes:()=>Jx}),Zx={},Qx={},Xx={};function ef(){return Gx||(Gx=1,function(e){function t(e){return"symbol"==typeof e?1:null===e?2:void 0===e?3:e!=e?4:0}Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});e.compareValues=(e,r,n)=>{if(e!==r){const a=t(e),s=t(r);if(a===s&&0===a){if(e<r)return"desc"===n?1:-1;if(e>r)return"desc"===n?-1:1}return"desc"===n?s-a:a-s}return 0}}(Xx)),Xx}var tf,rf,nf,af={},sf={};function of(){return tf||(tf=1,e=sf,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isSymbol=function(e){return"symbol"==typeof e||e instanceof Symbol}),sf;var e}function lf(){return rf||(rf=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=of(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;e.isKey=function(e,a){return!Array.isArray(e)&&(!("number"!=typeof e&&"boolean"!=typeof e&&null!=e&&!t.isSymbol(e))||("string"==typeof e&&(n.test(e)||!r.test(e))||null!=a&&Object.hasOwn(a,e)))}}(af)),af}function cf(){return nf||(nf=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ef(),r=lf(),n=fm();e.orderBy=function(e,a,s,i){if(null==e)return[];s=i?void 0:s,Array.isArray(e)||(e=Object.values(e)),Array.isArray(a)||(a=null==a?[null]:[a]),0===a.length&&(a=[null]),Array.isArray(s)||(s=null==s?[]:[s]),s=s.map(e=>String(e));const o=(e,t)=>{let r=e;for(let n=0;n<t.length&&null!=r;++n)r=r[t[n]];return r},l=a.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"==typeof e||Array.isArray(e)||r.isKey(e)?e:{key:e,path:n.toPath(e)}));return e.map(e=>({original:e,criteria:l.map(t=>((e,t)=>null==t||null==e?t:"object"==typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:o(t,e.path):"function"==typeof e?e(t):Array.isArray(e)?o(t,e):"object"==typeof t?t[e]:t)(t,e))})).slice().sort((e,r)=>{for(let n=0;n<l.length;n++){const a=t.compareValues(e.criteria[n],r.criteria[n],s[n]);if(0!==a)return a}return 0}).map(e=>e.original)}}(Qx)),Qx}var df,uf={};function hf(){return df||(df=1,e=uf,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.flatten=function(e,t=1){const r=[],n=Math.floor(t),a=(e,t)=>{for(let s=0;s<e.length;s++){const i=e[s];Array.isArray(i)&&t<n?a(i,t+1):r.push(i)}};return a(e,0),r}),uf;var e}var mf,pf,xf,ff,gf={};function yf(){return mf||(mf=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cx(),r=op(),n=wp(),a=Pp();e.isIterateeCall=function(e,s,i){return!!n.isObject(i)&&(!!("number"==typeof s&&r.isArrayLike(i)&&t.isIndex(s)&&s<i.length||"string"==typeof s&&s in i)&&a.eq(i[s],e))}}(gf)),gf}function bf(){return ff?xf:(ff=1,xf=(pf||(pf=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cf(),r=hf(),n=yf();e.sortBy=function(e,...a){const s=a.length;return s>1&&n.isIterateeCall(e,a[0],a[1])?a=[]:s>2&&n.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),t.orderBy(e,r.flatten(a),["asc"])}}(Zx)),Zx).sortBy)}const vf=n(bf());var jf=e=>e.legend.settings,wf=Yx([e=>e.legend.payload,jf],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?vf(n,r):n});function Nf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,r]=u.useState({height:0,left:0,top:0,width:0}),n=u.useCallback(e=>{if(null!=e){var n=e.getBoundingClientRect(),a={height:n.height,left:n.left,top:n.top,width:n.width};(Math.abs(a.height-t.height)>1||Math.abs(a.left-t.left)>1||Math.abs(a.top-t.top)>1||Math.abs(a.width-t.width)>1)&&r({height:a.height,left:a.left,top:a.top,width:a.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function _f(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var kf=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),Sf=()=>Math.random().toString(36).substring(7).split("").join("."),Cf={INIT:`@@redux/INIT${Sf()}`,REPLACE:`@@redux/REPLACE${Sf()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Sf()}`};function Of(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function Ef(e,t,r){if("function"!=typeof e)throw new Error(_f(2));if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(_f(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(_f(1));return r(Ef)(e,t)}let n=e,a=t,s=new Map,i=s,o=0,l=!1;function c(){i===s&&(i=new Map,s.forEach((e,t)=>{i.set(t,e)}))}function d(){if(l)throw new Error(_f(3));return a}function u(e){if("function"!=typeof e)throw new Error(_f(4));if(l)throw new Error(_f(5));let t=!0;c();const r=o++;return i.set(r,e),function(){if(t){if(l)throw new Error(_f(6));t=!1,c(),i.delete(r),s=null}}}function h(e){if(!Of(e))throw new Error(_f(7));if(void 0===e.type)throw new Error(_f(8));if("string"!=typeof e.type)throw new Error(_f(17));if(l)throw new Error(_f(9));try{l=!0,a=n(a,e)}finally{l=!1}return(s=i).forEach(e=>{e()}),e}h({type:Cf.INIT});return{dispatch:h,subscribe:u,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw new Error(_f(10));n=e,h({type:Cf.REPLACE})},[kf]:function(){const e=u;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(_f(11));function r(){const e=t;e.next&&e.next(d())}r();return{unsubscribe:e(r)}},[kf](){return this}}}}}function Pf(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const n=t[s];"function"==typeof e[n]&&(r[n]=e[n])}const n=Object.keys(r);let a;try{!function(e){Object.keys(e).forEach(t=>{const r=e[t];if(void 0===r(void 0,{type:Cf.INIT}))throw new Error(_f(12));if(void 0===r(void 0,{type:Cf.PROBE_UNKNOWN_ACTION()}))throw new Error(_f(13))})}(r)}catch(S$){a=S$}return function(e={},t){if(a)throw a;let s=!1;const i={};for(let a=0;a<n.length;a++){const o=n[a],l=r[o],c=e[o],d=l(c,t);if(void 0===d)throw t&&t.type,new Error(_f(14));i[o]=d,s=s||d!==c}return s=s||n.length!==Object.keys(e).length,s?i:e}}function Tf(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...r)=>e(t(...r)))}function Af(e){return Of(e)&&"type"in e&&"string"==typeof e.type}var Mf=Symbol.for("immer-nothing"),Df=Symbol.for("immer-draftable"),If=Symbol.for("immer-state");function Rf(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var $f=Object.getPrototypeOf;function Lf(e){return!!e&&!!e[If]}function Ff(e){return!!e&&(Bf(e)||Array.isArray(e)||!!e[Df]||!!e.constructor?.[Df]||Hf(e)||Gf(e))}var zf=Object.prototype.constructor.toString(),Uf=new WeakMap;function Bf(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if("function"!=typeof r)return!1;let n=Uf.get(r);return void 0===n&&(n=Function.toString.call(r),Uf.set(r,n)),n===zf}function qf(e,t,r=!0){if(0===Wf(e)){(r?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)})}else e.forEach((r,n)=>t(n,r,e))}function Wf(e){const t=e[If];return t?t.type_:Array.isArray(e)?1:Hf(e)?2:Gf(e)?3:0}function Kf(e,t){return 2===Wf(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Vf(e,t,r){const n=Wf(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function Hf(e){return e instanceof Map}function Gf(e){return e instanceof Set}function Yf(e){return e.copy_||e.base_}function Jf(e,t){if(Hf(e))return new Map(e);if(Gf(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Bf(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[If];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const a=r[n],s=t[a];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create($f(e),t)}{const t=$f(e);if(null!==t&&r)return{...e};const n=Object.create(t);return Object.assign(n,e)}}function Zf(e,t=!1){return Xf(e)||Lf(e)||!Ff(e)||(Wf(e)>1&&Object.defineProperties(e,{set:Qf,add:Qf,clear:Qf,delete:Qf}),Object.freeze(e),t&&Object.values(e).forEach(e=>Zf(e,!0))),e}var Qf={value:function(){Rf(2)}};function Xf(e){return null===e||"object"!=typeof e||Object.isFrozen(e)}var eg,tg={};function rg(e){const t=tg[e];return t||Rf(0),t}function ng(){return eg}function ag(e,t){t&&(rg("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function sg(e){ig(e),e.drafts_.forEach(lg),e.drafts_=null}function ig(e){e===eg&&(eg=e.parent_)}function og(e){return eg={drafts_:[],parent_:eg,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function lg(e){const t=e[If];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function cg(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[If].modified_&&(sg(t),Rf(4)),Ff(e)&&(e=dg(t,e),t.parent_||hg(t,e)),t.patches_&&rg("Patches").generateReplacementPatches_(r[If].base_,e,t.patches_,t.inversePatches_)):e=dg(t,r,[]),sg(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Mf?e:void 0}function dg(e,t,r){if(Xf(t))return t;const n=e.immer_.shouldUseStrictIteration(),a=t[If];if(!a)return qf(t,(n,s)=>ug(e,a,t,n,s,r),n),t;if(a.scope_!==e)return t;if(!a.modified_)return hg(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const t=a.copy_;let s=t,i=!1;3===a.type_&&(s=new Set(t),t.clear(),i=!0),qf(s,(n,s)=>ug(e,a,t,n,s,r,i),n),hg(e,t,!1),r&&e.patches_&&rg("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function ug(e,t,r,n,a,s,i){if(null==a)return;if("object"!=typeof a&&!i)return;const o=Xf(a);if(!o||i){if(Lf(a)){const i=dg(e,a,s&&t&&3!==t.type_&&!Kf(t.assigned_,n)?s.concat(n):void 0);if(Vf(r,n,i),!Lf(i))return;e.canAutoFreeze_=!1}else i&&r.add(a);if(Ff(a)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;if(t&&t.base_&&t.base_[n]===a&&o)return;dg(e,a),t&&t.scope_.parent_||"symbol"==typeof n||!(Hf(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))||hg(e,a)}}}function hg(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Zf(t,r)}var mg={get(e,t){if(t===If)return e;const r=Yf(e);if(!Kf(r,t))return function(e,t,r){const n=fg(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!Ff(n)?n:n===xg(e.base_,t)?(yg(e),e.copy_[t]=bg(n,e)):n},has:(e,t)=>t in Yf(e),ownKeys:e=>Reflect.ownKeys(Yf(e)),set(e,t,r){const n=fg(Yf(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=xg(Yf(e),t),i=n?.[If];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((a=r)===(s=n)?0!==a||1/a==1/s:a!=a&&s!=s)&&(void 0!==r||Kf(e.base_,t)))return!0;yg(e),gg(e)}var a,s;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==xg(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,yg(e),gg(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=Yf(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){Rf(11)},getPrototypeOf:e=>$f(e.base_),setPrototypeOf(){Rf(12)}},pg={};function xg(e,t){const r=e[If];return(r?Yf(r):e)[t]}function fg(e,t){if(!(t in e))return;let r=$f(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=$f(r)}}function gg(e){e.modified_||(e.modified_=!0,e.parent_&&gg(e.parent_))}function yg(e){e.copy_||(e.copy_=Jf(e.base_,e.scope_.immer_.useStrictShallowCopy_))}qf(mg,(e,t)=>{pg[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),pg.deleteProperty=function(e,t){return pg.set.call(this,e,t,void 0)},pg.set=function(e,t,r){return mg.set.call(this,e[0],t,r,e[0])};function bg(e,t){const r=Hf(e)?rg("MapSet").proxyMap_(e,t):Gf(e)?rg("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:ng(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=mg;r&&(a=[n],s=pg);const{revoke:i,proxy:o}=Proxy.revocable(a,s);return n.draft_=o,n.revoke_=i,o}(e,t);return(t?t.scope_:ng()).drafts_.push(r),r}function vg(e){return Lf(e)||Rf(10),jg(e)}function jg(e){if(!Ff(e)||Xf(e))return e;const t=e[If];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Jf(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Jf(e,!0);return qf(r,(e,t)=>{Vf(r,e,jg(t))},n),t&&(t.finalized_=!1),r}var wg=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const n=this;return function(e=r,...a){return n.produce(e,e=>t.call(this,e,...a))}}let n;if("function"!=typeof t&&Rf(6),void 0!==r&&"function"!=typeof r&&Rf(7),Ff(e)){const a=og(this),s=bg(e,void 0);let i=!0;try{n=t(s),i=!1}finally{i?sg(a):ig(a)}return ag(a,r),cg(n,a)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===Mf&&(n=void 0),this.autoFreeze_&&Zf(n,!0),r){const t=[],a=[];rg("Patches").generateReplacementPatches_(e,n,t,a),r(t,a)}return n}Rf(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,t=>e(t,...r));let r,n;return[this.produce(e,t,(e,t)=>{r=e,n=t}),r,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"==typeof e?.useStrictIteration&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ff(e)||Rf(8),Lf(e)&&(e=vg(e));const t=og(this),r=bg(e,void 0);return r[If].isManual_=!0,ig(t),r}finishDraft(e,t){const r=e&&e[If];r&&r.isManual_||Rf(9);const{scope_:n}=r;return ag(n,t),cg(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=rg("Patches").applyPatches_;return Lf(e)?n(e,t):this.produce(e,e=>n(e,t))}},Ng=wg.produce,_g=wg.setUseStrictIteration.bind(wg);function kg(e){return({dispatch:t,getState:r})=>n=>a=>"function"==typeof a?a(t,r,e):n(a)}var Sg=kg(),Cg=kg,Og="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Tf:Tf.apply(null,arguments)};function Eg(e,t){function r(...r){if(t){let n=t(...r);if(!n)throw new Error(_y(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:r[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=t=>Af(t)&&t.type===e,r}var Pg=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function Tg(e){return Ff(e)?Ng(e,()=>{}):e}function Ag(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}var Mg="RTK_autoBatch",Dg=()=>e=>({payload:e,meta:{[Mg]:!0}}),Ig=e=>t=>{setTimeout(t,e)},Rg=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,i=!1;const o=new Set,l="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Ig(10):"callback"===e.type?e.queueNotification:Ig(e.timeout),c=()=>{i=!1,s&&(s=!1,o.forEach(e=>e()))};return Object.assign({},n,{subscribe(e){const t=n.subscribe(()=>a&&e());return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){try{return a=!e?.meta?.[Mg],s=!a,s&&(i||(i=!0,l(c))),n.dispatch(e)}finally{a=!0}}})};function $g(e){const t=function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:a=!0}=e??{};let s=new Pg;return t&&("boolean"==typeof t?s.push(Sg):s.push(Cg(t.extraArgument))),s},{reducer:r,middleware:n,devTools:a=!0,preloadedState:s,enhancers:i}=e||{};let o,l;if("function"==typeof r)o=r;else{if(!Of(r))throw new Error(_y(1));o=Pf(r)}l="function"==typeof n?n(t):t();let c=Tf;a&&(c=Og({trace:!1,..."object"==typeof a&&a}));const d=function(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(_f(15))};const i={getState:a.getState,dispatch:(e,...t)=>s(e,...t)},o=e.map(e=>e(i));return s=Tf(...o)(a.dispatch),{...a,dispatch:s}}}(...l),u=(e=>function(t){const{autoBatch:r=!0}=t??{};let n=new Pg(e);return r&&n.push(Rg("object"==typeof r?r:void 0)),n})(d);return Ef(o,s,c(..."function"==typeof i?i(u):u()))}function Lg(e){const t={},r=[];let n;const a={addCase(e,r){const n="string"==typeof e?e:e.type;if(!n)throw new Error(_y(28));if(n in t)throw new Error(_y(29));return t[n]=r,a},addAsyncThunk:(e,n)=>(n.pending&&(t[e.pending.type]=n.pending),n.rejected&&(t[e.rejected.type]=n.rejected),n.fulfilled&&(t[e.fulfilled.type]=n.fulfilled),n.settled&&r.push({matcher:e.settled,reducer:n.settled}),a),addMatcher:(e,t)=>(r.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(n=e,a)};return e(a),[t,r,n]}_g(!1);var Fg=(e=21)=>{let t="",r=e;for(;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},zg=Symbol.for("rtk-slice-createasyncthunk");function Ug(e,t){return`${e}/${t}`}function Bg({creators:e}={}){const t=e?.asyncThunk?.[zg];return function(e){const{name:r,reducerPath:n=r}=e;if(!r)throw new Error(_y(11));const a=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},s=Object.keys(a),i={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){const r="string"==typeof e?e:e.type;if(!r)throw new Error(_y(12));if(r in i.sliceCaseReducersByType)throw new Error(_y(13));return i.sliceCaseReducersByType[r]=t,o},addMatcher:(e,t)=>(i.sliceMatchers.push({matcher:e,reducer:t}),o),exposeAction:(e,t)=>(i.actionCreators[e]=t,o),exposeCaseReducer:(e,t)=>(i.sliceCaseReducersByName[e]=t,o)};function l(){const[t={},r=[],n]="function"==typeof e.extraReducers?Lg(e.extraReducers):[e.extraReducers],a={...t,...i.sliceCaseReducersByType};return function(e,t){let r,[n,a,s]=Lg(t);if("function"==typeof e)r=()=>Tg(e());else{const t=Tg(e);r=()=>t}function i(e=r(),t){let i=[n[t.type],...a.filter(({matcher:e})=>e(t)).map(({reducer:e})=>e)];return 0===i.filter(e=>!!e).length&&(i=[s]),i.reduce((e,r)=>{if(r){if(Lf(e)){const n=r(e,t);return void 0===n?e:n}if(Ff(e))return Ng(e,e=>r(e,t));{const n=r(e,t);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}}return e},e)}return i.getInitialState=r,i}(e.initialState,e=>{for(let t in a)e.addCase(t,a[t]);for(let t of i.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)})}s.forEach(n=>{const s=a[n],i={reducerName:n,type:Ug(r,n),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function({type:e,reducerName:t,createNotation:r},n,a){let s,i;if("reducer"in n){if(r&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(n))throw new Error(_y(17));s=n.reducer,i=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,i?Eg(e,i):Eg(e))}(i,s,o):function({type:e,reducerName:t},r,n,a){if(!a)throw new Error(_y(18));const{payloadCreator:s,fulfilled:i,pending:o,rejected:l,settled:c,options:d}=r,u=a(e,s,d);n.exposeAction(t,u),i&&n.addCase(u.fulfilled,i);o&&n.addCase(u.pending,o);l&&n.addCase(u.rejected,l);c&&n.addMatcher(u.settled,c);n.exposeCaseReducer(t,{fulfilled:i||Kg,pending:o||Kg,rejected:l||Kg,settled:c||Kg})}(i,s,o,t)});const c=e=>e,d=new Map,u=new WeakMap;let h;function m(e,t){return h||(h=l()),h(e,t)}function p(){return h||(h=l()),h.getInitialState()}function x(t,r=!1){function n(e){let a=e[t];return void 0===a&&r&&(a=Ag(u,n,p)),a}function a(t=c){const n=Ag(d,r,()=>new WeakMap);return Ag(n,t,()=>{const n={};for(const[a,s]of Object.entries(e.selectors??{}))n[a]=qg(s,t,()=>Ag(u,t,p),r);return n})}return{reducerPath:t,getSelectors:a,get selectors(){return a(n)},selectSlice:n}}const f={name:r,reducer:m,actions:i.actionCreators,caseReducers:i.sliceCaseReducersByName,getInitialState:p,...x(n),injectInto(e,{reducerPath:t,...r}={}){const a=t??n;return e.inject({reducerPath:a,reducer:m},r),{...f,...x(a,!0)}}};return f}}function qg(e,t,r,n){function a(a,...s){let i=t(a);return void 0===i&&n&&(i=r()),e(i,...s)}return a.unwrapped=e,a}var Wg=Bg();function Kg(){}var Vg="listener",Hg="completed",Gg="cancelled",Yg=`task-${Gg}`,Jg=`task-${Hg}`,Zg=`${Vg}-${Gg}`,Qg=`${Vg}-${Hg}`,Xg=class{constructor(e){t(this,"name","TaskAbortError"),t(this,"message"),this.code=e,this.message=`task ${Gg} (reason: ${e})`}},ey=(e,t)=>{if("function"!=typeof e)throw new TypeError(_y(32))},ty=()=>{},ry=(e,t=ty)=>(e.catch(t),e),ny=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ay=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},sy=e=>{if(e.aborted){const{reason:t}=e;throw new Xg(t)}};function iy(e,t){let r=ty;return new Promise((n,a)=>{const s=()=>a(new Xg(e.reason));e.aborted?s():(r=ny(e,s),t.finally(()=>r()).then(n,a))}).finally(()=>{r=ty})}var oy=e=>t=>ry(iy(e,t).then(t=>(sy(e),t))),ly=e=>{const t=oy(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:cy}=Object,dy={},uy="listenerMiddleware",hy=(e,t)=>(r,n)=>{ey(r);const a=new AbortController;var s;s=a,ny(e,()=>ay(s,e.reason));const i=(async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Xg?"cancelled":"rejected",error:r}}finally{t?.()}})(async()=>{sy(e),sy(a.signal);const t=await r({pause:oy(a.signal),delay:ly(a.signal),signal:a.signal});return sy(a.signal),t},()=>ay(a,Jg));return n?.autoJoin&&t.push(i.catch(ty)),{result:oy(e)(i),cancel(){ay(a,Yg)}}},my=(e,t)=>(r,n)=>ry((async(r,n)=>{sy(t);let a=()=>{};const s=[new Promise((t,n)=>{let s=e({predicate:r,effect:(e,r)=>{r.unsubscribe(),t([e,r.getState(),r.getOriginalState()])}});a=()=>{s(),n()}})];null!=n&&s.push(new Promise(e=>setTimeout(e,n,null)));try{const e=await iy(t,Promise.race(s));return sy(t),e}finally{a()}})(r,n)),py=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=Eg(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(_y(21));return ey(s),{predicate:a,type:t,effect:s}},xy=cy(e=>{const{type:t,predicate:r,effect:n}=py(e);return{id:Fg(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(_y(22))}}},{withTypes:()=>xy}),fy=(e,t)=>{const{type:r,effect:n,predicate:a}=py(t);return Array.from(e.values()).find(e=>("string"==typeof r?e.type===r:e.predicate===a)&&e.effect===n)},gy=e=>{e.pending.forEach(e=>{ay(e,Zg)})},yy=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},by=cy(Eg(`${uy}/add`),{withTypes:()=>by}),vy=Eg(`${uy}/removeAll`),jy=cy(Eg(`${uy}/remove`),{withTypes:()=>jy}),wy=(...e)=>{},Ny=(e={})=>{const t=new Map,r=new Map,{extra:n,onError:a=wy}=e;ey(a);const s=e=>(e=>(e.unsubscribe=()=>t.delete(e.id),t.set(e.id,e),t=>{e.unsubscribe(),t?.cancelActive&&gy(e)}))(fy(t,e)??xy(e));cy(s,{withTypes:()=>s});const i=e=>{const r=fy(t,e);return r&&(r.unsubscribe(),e.cancelActive&&gy(r)),!!r};cy(i,{withTypes:()=>i});const o=async(e,i,o,l)=>{const c=new AbortController,d=my(s,c.signal),u=[];try{e.pending.add(c),(e=>{const t=r.get(e)??0;r.set(e,t+1)})(e),await Promise.resolve(e.effect(i,cy({},o,{getOriginalState:l,condition:(e,t)=>d(e,t).then(Boolean),take:d,delay:ly(c.signal),pause:oy(c.signal),extra:n,signal:c.signal,fork:hy(c.signal,u),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,r)=>{e!==c&&(ay(e,Zg),r.delete(e))})},cancel:()=>{ay(c,Zg),e.pending.delete(c)},throwIfCancelled:()=>{sy(c.signal)}})))}catch(h){h instanceof Xg||yy(a,h,{raisedBy:"effect"})}finally{await Promise.all(u),ay(c,Qg),(e=>{const t=r.get(e)??1;1===t?r.delete(e):r.set(e,t-1)})(e),e.pending.delete(c)}},l=((e,t)=>()=>{for(const e of t.keys())gy(e);e.clear()})(t,r);return{middleware:e=>r=>n=>{if(!Af(n))return r(n);if(by.match(n))return s(n.payload);if(vy.match(n))return void l();if(jy.match(n))return i(n.payload);let c=e.getState();const d=()=>{if(c===dy)throw new Error(_y(23));return c};let u;try{if(u=r(n),t.size>0){const r=e.getState(),s=Array.from(t.values());for(const t of s){let s=!1;try{s=t.predicate(n,r,c)}catch(h){s=!1,yy(a,h,{raisedBy:"predicate"})}s&&o(t,n,e,d)}}}finally{c=dy}return u},startListening:s,stopListening:i,clearListeners:l}};function _y(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ky=Wg({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,a,s;e.margin.top=null!==(r=t.payload.top)&&void 0!==r?r:0,e.margin.right=null!==(n=t.payload.right)&&void 0!==n?n:0,e.margin.bottom=null!==(a=t.payload.bottom)&&void 0!==a?a:0,e.margin.left=null!==(s=t.payload.left)&&void 0!==s?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:Sy,setLayout:Cy,setChartSize:Oy,setScale:Ey}=ky.actions,Py=ky.reducer;function Ty(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ay(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ty(Object(r),!0).forEach(function(t){My(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ty(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function My(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Dy=Math.PI/180,Iy=e=>180*e/Math.PI,Ry=(e,t,r,n)=>({x:e+Math.cos(-Dy*n)*r,y:t+Math.sin(-Dy*n)*r}),$y=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},Ly=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,i=((e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)})({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var o=(r-a)/i,l=Math.acos(o);return n>s&&(l=2*Math.PI-l),{radius:i,angle:Iy(l),angleInRadian:l}},Fy=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360);return e+360*Math.min(a,s)},zy=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=Ly({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(a<i||a>o)return null;if(0===a)return null;var l,{startAngle:c,endAngle:d}=(e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-360*s,endAngle:r-360*s}})(t),u=s;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;l=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;l=u>=d&&u<=c}return l?Ay(Ay({},t),{},{radius:a,angle:Fy(u,t)}):null};function Uy(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function By(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function qy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?By(Object(r),!0).forEach(function(t){Wy(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):By(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Wy(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ky(e,t,r){return Tm(e)||Tm(t)?r:_m(t)?bm(e,t,r):"function"==typeof t?t(e):r}var Vy=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,Hy=(e,t,r,n)=>{if(n)return e.map(e=>e.coordinate);var a,s,i=e.map(e=>(e.coordinate===t&&(a=!0),e.coordinate===r&&(s=!0),e.coordinate));return a||i.push(t),s||i.push(r),i},Gy=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:i,realScaleType:o,isCategorical:l,categoricalDomain:c,tickCount:d,ticks:u,niceTicks:h,axisType:m}=e;if(!i)return null;var p="scaleBand"===o&&i.bandwidth?i.bandwidth()/2:2,x="category"===a&&i.bandwidth?i.bandwidth()/p:0;return x="angleAxis"===m&&s&&s.length>=2?2*vm(s[0]-s[1])*x:x,u||h?(u||h||[]).map((e,t)=>{var r=n?n.indexOf(e):e;return{coordinate:i(r)+x,value:e,offset:x,index:t}}).filter(e=>!jm(e.coordinate)):l&&c?c.map((e,t)=>({coordinate:i(e)+x,value:e,index:t,offset:x})):i.ticks&&null!=d?i.ticks(d).map((e,t)=>({coordinate:i(e)+x,value:e,offset:x,index:t})):i.domain().map((e,t)=>({coordinate:i(e)+x,value:n?n[e]:e,index:t,offset:x}))},Yy=1e-4,Jy={sign:e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,i=0;i<t;++i){var o=jm(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1])}},expand:function(e,t){if((n=e.length)>0){for(var r,n,a,s=0,i=e[0].length;s<i;++s){for(a=r=0;r<n;++r)a+=e[r][s][1]||0;if(a)for(r=0;r<n;++r)e[r][s][1]/=a}Gh(e,t)}},none:Gh,silhouette:function(e,t){if((r=e.length)>0){for(var r,n=0,a=e[t[0]],s=a.length;n<s;++n){for(var i=0,o=0;i<r;++i)o+=e[i][n][1]||0;a[n][1]+=a[n][0]=-o/2}Gh(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,a,s=0,i=1;i<n;++i){for(var o=0,l=0,c=0;o<a;++o){for(var d=e[t[o]],u=d[i][1]||0,h=(u-(d[i-1][1]||0))/2,m=0;m<o;++m){var p=e[t[m]];h+=(p[i][1]||0)-(p[i-1][1]||0)}l+=u,c+=h*u}r[i-1][1]+=r[i-1][0]=s,l&&(s-=c/l)}r[i-1][1]+=r[i-1][0]=s,Gh(e,t)}},positive:e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var i=jm(e[s][r][1])?e[s][r][0]:e[s][r][1];i>=0?(e[s][r][0]=a,e[s][r][1]=a+i,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}}},Zy=(e,t,r)=>{var n=Jy[r],a=function(){var e=Gu([]),t=Yh,r=Gh,n=Jh;function a(a){var s,i,o=Array.from(e.apply(this,arguments),Zh),l=o.length,c=-1;for(const e of a)for(s=0,++c;s<l;++s)(o[s][c]=[0,+n(e,o[s].key,c,a)]).data=e;for(s=0,i=oh(t(o));s<l;++s)o[i[s]].index=s;return r(o,i),o}return a.keys=function(t){return arguments.length?(e="function"==typeof t?t:Gu(Array.from(t)),a):e},a.value=function(e){return arguments.length?(n="function"==typeof e?e:Gu(+e),a):n},a.order=function(e){return arguments.length?(t=null==e?Yh:"function"==typeof e?e:Gu(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(r=e??Gh,a):r},a}().keys(t).value((e,t)=>+Ky(e,t,0)).order(Yh).offset(n);return a(e)};function Qy(e){return null==e?void 0:String(e)}function Xy(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:s,dataKey:i}=e;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!Tm(a[t.dataKey])){var o=Pm(r,"value",a[t.dataKey]);if(o)return o.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var l=Ky(a,Tm(i)?t.dataKey:i);return Tm(l)?null:t.scale(l)}var eb=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:i}=e;if("category"===t.type)return r[i]?r[i].coordinate+n:null;var o=Ky(s,t.dataKey,t.scale.domain()[i]);return Tm(o)?null:t.scale(o)-a/2+n},tb=(e,t,r)=>{var n;if(null!=e)return[(n=Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:i}=s,o=i.reduce((e,n)=>{var a,s=Uy(n,t,r),i=(a=s.flat(2).filter(Nm),[Math.min(...a),Math.max(...a)]);return[Math.min(e[0],i[0]),Math.max(e[1],i[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))[0]===1/0?0:n[0],n[1]===-1/0?0:n[1]]},rb=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nb=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ab=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=vf(t,e=>e.coordinate),s=1/0,i=1,o=a.length;i<o;i++){var l=a[i],c=a[i-1];s=Math.min((l.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function sb(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return qy(qy({},t),{},{dataKey:r,payload:n,value:a,name:s})}function ib(e,t){return e?String(e):"string"==typeof t?t:void 0}var ob=e=>e.layout.width,lb=e=>e.layout.height,cb=e=>e.layout.scale,db=e=>e.layout.margin,ub=Yx(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),hb=Yx(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),mb="data-recharts-item-index",pb="data-recharts-item-data-key";function xb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xb(Object(r),!0).forEach(function(t){gb(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xb(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function gb(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yb,bb,vb,jb,wb,Nb=Yx([ob,lb,db,e=>e.brush.height,function(e){return hb(e).reduce((e,t)=>"left"!==t.orientation||t.mirror||t.hide?e:e+("number"==typeof t.width?t.width:60),0)},function(e){return hb(e).reduce((e,t)=>"right"!==t.orientation||t.mirror||t.hide?e:e+("number"==typeof t.width?t.width:60),0)},function(e){return ub(e).reduce((e,t)=>"top"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},function(e){return ub(e).reduce((e,t)=>"bottom"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},jf,e=>e.legend.size],(e,t,r,n,a,s,i,o,l,c)=>{var d={left:(r.left||0)+a,right:(r.right||0)+s},u=fb(fb({},{top:(r.top||0)+i,bottom:(r.bottom||0)+o}),d),h=u.bottom;u.bottom+=n,u=((e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:o}=t;if(("vertical"===o||"horizontal"===o&&"middle"===i)&&"center"!==s&&Nm(e[s]))return qy(qy({},e),{},{[s]:e[s]+(n||0)});if(("horizontal"===o||"vertical"===o&&"center"===s)&&"middle"!==i&&Nm(e[i]))return qy(qy({},e),{},{[i]:e[i]+(a||0)})}return e})(u,l,c);var m=e-u.left-u.right,p=t-u.top-u.bottom;return fb(fb({brushBottom:h},u),{},{width:Math.max(m,0),height:Math.max(p,0)})}),_b=Yx(Nb,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),kb=Yx(ob,lb,(e,t)=>({x:0,y:0,width:e,height:t})),Sb=u.createContext(null),Cb=()=>null!=u.useContext(Sb),Ob=e=>e.brush,Eb=Yx([Ob,Nb,db],(e,t,r)=>({height:e.height,x:Nm(e.x)?e.x:t.left,y:Nm(e.y)?e.y:t.top+t.height+t.brushBottom-((null==r?void 0:r.bottom)||0),width:Nm(e.width)?e.width:t.width})),Pb={},Tb={},Ab={};function Mb(){return yb||(yb=1,e=Ab,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.debounce=function(e,t,{signal:r,edges:n}={}){let a,s=null;const i=null!=n&&n.includes("leading"),o=null==n||n.includes("trailing"),l=()=>{null!==s&&(e.apply(a,s),a=void 0,s=null)};let c=null;const d=()=>{null!=c&&clearTimeout(c),c=setTimeout(()=>{c=null,o&&l(),u()},t)},u=()=>{null!==c&&(clearTimeout(c),c=null),a=void 0,s=null},h=function(...e){if(r?.aborted)return;a=this,s=e;const t=null==c;d(),i&&t&&l()};return h.schedule=d,h.cancel=u,h.flush=()=>{l()},r?.addEventListener("abort",u,{once:!0}),h}),Ab;var e}function Db(){return bb||(bb=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mb();e.debounce=function(e,r=0,n={}){"object"!=typeof n&&(n={});const{leading:a=!1,trailing:s=!0,maxWait:i}=n,o=Array(2);let l;a&&(o[0]="leading"),s&&(o[1]="trailing");let c=null;const d=t.debounce(function(...t){l=e.apply(this,t),c=null},r,{edges:o}),u=function(...t){return null!=i&&(null===c&&(c=Date.now()),Date.now()-c>=i)?(l=e.apply(this,t),c=Date.now(),d.cancel(),d.schedule(),l):(d.apply(this,t),l)};return u.cancel=d.cancel,u.flush=()=>(d.flush(),l),u}}(Tb)),Tb}function Ib(){return wb||(wb=1,jb=(vb||(vb=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Db();e.throttle=function(e,r=0,n={}){const{leading:a=!0,trailing:s=!0}=n;return t.debounce(e,r,{leading:a,maxWait:r,trailing:s})}}(Pb)),Pb).throttle),jb}const Rb=n(Ib());var $b=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a]},Lb=(e,t,r)=>{var{width:n="100%",height:a="100%",aspect:s,maxHeight:i}=r,o=wm(n)?e:Number(n),l=wm(a)?t:Number(a);return s&&s>0&&(o?l=o/s:l&&(o=l*s),i&&l>i&&(l=i)),{calculatedWidth:o,calculatedHeight:l}},Fb={width:0,height:0,overflow:"visible"},zb={width:0,overflowX:"visible"},Ub={height:0,overflowY:"visible"},Bb={},qb=e=>{var{width:t,height:r}=e,n=wm(t),a=wm(r);return n&&a?Fb:n?zb:a?Ub:Bb};function Wb(e){return Number.isFinite(e)}function Kb(e){return"number"==typeof e&&e>0&&Number.isFinite(e)}function Vb(){return Vb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vb.apply(null,arguments)}function Hb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Gb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hb(Object(r),!0).forEach(function(t){Yb(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hb(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Yb(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jb=u.createContext({width:-1,height:-1});function Zb(e){var{children:t,width:r,height:n}=e,a=u.useMemo(()=>({width:r,height:n}),[r,n]);return r<=0||n<=0?null:u.createElement(Jb.Provider,{value:a},t)}var Qb=()=>u.useContext(Jb),Xb=u.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:s,minWidth:i=0,minHeight:o,maxHeight:l,children:c,debounce:d=0,id:h,className:m,onResize:p,style:x={}}=e,f=u.useRef(null),g=u.useRef();g.current=p,u.useImperativeHandle(t,()=>f.current);var[y,b]=u.useState({containerWidth:n.width,containerHeight:n.height}),v=u.useCallback((e,t)=>{b(r=>{var n=Math.round(e),a=Math.round(t);return r.containerWidth===n&&r.containerHeight===a?r:{containerWidth:n,containerHeight:a}})},[]);u.useEffect(()=>{var e=e=>{var t,{width:r,height:n}=e[0].contentRect;v(r,n),null===(t=g.current)||void 0===t||t.call(g,r,n)};d>0&&(e=Rb(e,d,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:r,height:n}=f.current.getBoundingClientRect();return v(r,n),t.observe(f.current),()=>{t.disconnect()}},[v,d]);var{containerWidth:j,containerHeight:w}=y;$b(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:N,calculatedHeight:_}=Lb(j,w,{width:a,height:s,aspect:r,maxHeight:l});return $b(N>0||_>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",N,_,a,s,i,o,r),u.createElement("div",{id:h?"".concat(h):void 0,className:Tu("recharts-responsive-container",m),style:Gb(Gb({},x),{},{width:a,height:s,minWidth:i,minHeight:o,maxHeight:l}),ref:f},u.createElement("div",{style:qb({width:a,height:s})},u.createElement(Zb,{width:N,height:_},c)))}),ev=u.forwardRef((e,t)=>{var r=Qb();if(Kb(r.width)&&Kb(r.height))return e.children;var{width:n,height:a}=function(e){var{width:t,height:r,aspect:n}=e,a=t,s=r;return void 0===a&&void 0===s?(a="100%",s="100%"):void 0===a?a=n&&n>0?void 0:"100%":void 0===s&&(s=n&&n>0?void 0:"100%"),{width:a,height:s}}({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:s,calculatedHeight:i}=Lb(void 0,void 0,{width:n,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return Nm(s)&&Nm(i)?u.createElement(Zb,{width:s,height:i},e.children):u.createElement(Xb,Vb({},e,{width:n,height:a,ref:t}))}),tv=()=>{var e,t=Cb(),r=Ux(_b),n=Ux(Eb),a=null===(e=Ux(Ob))||void 0===e?void 0:e.padding;return t&&n&&a?{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}:r},rv={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},nv=()=>{var e;return null!==(e=Ux(Nb))&&void 0!==e?e:rv},av=()=>Ux(ob),sv=()=>Ux(lb),iv=e=>e.layout.layoutType,ov=()=>Ux(iv),lv=e=>{var t=$x(),r=Cb(),{width:n,height:a}=e,s=Qb(),i=n,o=a;return s&&(i=s.width>0?s.width:n,o=s.height>0?s.height:a),u.useEffect(()=>{!r&&Kb(i)&&Kb(o)&&t(Oy({width:i,height:o}))},[t,r,i,o]),null},cv=Wg({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Dg()},removeLegendPayload:{reducer(e,t){var r=vg(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Dg()}}}),{setLegendSize:dv,setLegendSettings:uv,addLegendPayload:hv,removeLegendPayload:mv}=cv.actions,pv=cv.reducer,xv=["contextPayload"];function fv(){return fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fv.apply(null,arguments)}function gv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gv(Object(r),!0).forEach(function(t){bv(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function bv(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vv(e){return e.value}function jv(e){var{contextPayload:t}=e,r=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,xv),n=_x(t,e.payloadUniqBy,vv),a=yv(yv({},r),{},{payload:n});return u.isValidElement(e.content)?u.cloneElement(e.content,a):"function"==typeof e.content?u.createElement(e.content,a):u.createElement(Hm,a)}function wv(e){var t=$x();return u.useEffect(()=>{t(uv(e))},[t,e]),null}function Nv(e){var t=$x();return u.useEffect(()=>(t(dv(e)),()=>{t(dv({width:0,height:0}))}),[t,e]),null}function _v(e){var t=Ux(wf),r=u.useContext(Hu),n=Ux(e=>e.layout.margin),{width:a,height:s,wrapperStyle:i,portal:o}=e,[l,c]=Nf([t]),d=av(),h=sv();if(null==d||null==h)return null;var m=d-(n.left||0)-(n.right||0),p=kv.getWidthOrHeight(e.layout,s,a,m),x=o?i:yv(yv({position:"absolute",width:(null==p?void 0:p.width)||a||"auto",height:(null==p?void 0:p.height)||s||"auto"},function(e,t,r,n,a,s){var i,o,{layout:l,align:c,verticalAlign:d}=t;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(i="center"===c&&"vertical"===l?{left:((n||0)-s.width)/2}:"right"===c?{right:r&&r.right||0}:{left:r&&r.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(o="middle"===d?{top:((a||0)-s.height)/2}:"bottom"===d?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),yv(yv({},i),o)}(i,e,n,d,h,l)),i),f=null!=o?o:r;if(null==f)return null;var g=u.createElement("div",{className:"recharts-legend-wrapper",style:x,ref:c},u.createElement(wv,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),u.createElement(Nv,{width:l.width,height:l.height}),u.createElement(jv,fv({},e,p,{margin:n,chartWidth:d,chartHeight:h,contextPayload:t})));return P.createPortal(g,f)}class kv extends u.PureComponent{static getWidthOrHeight(e,t,r,n){return"vertical"===e&&Nm(t)?{height:t}:"horizontal"===e?{width:r||n}:null}render(){return u.createElement(_v,this.props)}}function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sv.apply(null,arguments)}function Cv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ov(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cv(Object(r),!0).forEach(function(t){Ev(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ev(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pv(e){return Array.isArray(e)&&_m(e[0])&&_m(e[1])?e.join(" ~ "):e}bv(kv,"displayName","Legend"),bv(kv,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});var Tv=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:i,itemSorter:o,wrapperClassName:l,labelClassName:c,label:d,labelFormatter:h,accessibilityLayer:m=!1}=e,p=Ov({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=Ov({margin:0},a),f=!Tm(d),g=f?d:"",y=Tu("recharts-default-tooltip",l),b=Tu("recharts-tooltip-label",c);f&&h&&null!=s&&(g=h(d,s));var v=m?{role:"status","aria-live":"assertive"}:{};return u.createElement("div",Sv({className:y,style:p},v),u.createElement("p",{className:b,style:x},u.isValidElement(g)?g:"".concat(g)),(()=>{if(s&&s.length){var e=(o?vf(s,o):s).map((e,r)=>{if("none"===e.type)return null;var a=e.formatter||i||Pv,{value:o,name:l}=e,c=o,d=l;if(a){var h=a(o,l,e,r,s);if(Array.isArray(h))[c,d]=h;else{if(null==h)return null;c=h}}var m=Ov({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},n);return u.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(r),style:m},_m(d)?u.createElement("span",{className:"recharts-tooltip-item-name"},d):null,_m(d)?u.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,u.createElement("span",{className:"recharts-tooltip-item-value"},c),u.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return u.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},Av="recharts-tooltip-wrapper",Mv={visibility:"hidden"};function Dv(e){var{coordinate:t,translateX:r,translateY:n}=e;return Tu(Av,{["".concat(Av,"-right")]:Nm(r)&&t&&Nm(t.x)&&r>=t.x,["".concat(Av,"-left")]:Nm(r)&&t&&Nm(t.x)&&r<t.x,["".concat(Av,"-bottom")]:Nm(n)&&t&&Nm(t.y)&&n>=t.y,["".concat(Av,"-top")]:Nm(n)&&t&&Nm(t.y)&&n<t.y})}function Iv(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=e;if(s&&Nm(s[n]))return s[n];var d=r[n]-o-(a>0?a:0),u=r[n]+a;if(t[n])return i[n]?d:u;var h=l[n];return null==h?0:i[n]?d<h?Math.max(u,h):Math.max(d,h):null==c?0:u+o>h+c?Math.max(d,h):Math.max(u,h)}function Rv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rv(Object(r),!0).forEach(function(t){Lv(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Lv(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Fv extends u.PureComponent{constructor(){super(...arguments),Lv(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Lv(this,"handleKeyDown",e=>{var t,r,n,a;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(r=this.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==t?t:0,y:null!==(n=null===(a=this.props.coordinate)||void 0===a?void 0:a.y)&&void 0!==n?n:0}})})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:t,animationDuration:r,animationEasing:n,children:a,coordinate:s,hasPayload:i,isAnimationActive:o,offset:l,position:c,reverseDirection:d,useTranslate3d:h,viewBox:m,wrapperStyle:p,lastBoundingBox:x,innerRef:f,hasPortalFromProps:g}=this.props,{cssClasses:y,cssProperties:b}=function(e){var t,r,n,{allowEscapeViewBox:a,coordinate:s,offsetTopLeft:i,position:o,reverseDirection:l,tooltipBox:c,useTranslate3d:d,viewBox:u}=e;return t=c.height>0&&c.width>0&&s?function(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}({translateX:r=Iv({allowEscapeViewBox:a,coordinate:s,key:"x",offsetTopLeft:i,position:o,reverseDirection:l,tooltipDimension:c.width,viewBox:u,viewBoxDimension:u.width}),translateY:n=Iv({allowEscapeViewBox:a,coordinate:s,key:"y",offsetTopLeft:i,position:o,reverseDirection:l,tooltipDimension:c.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:d}):Mv,{cssProperties:t,cssClasses:Dv({translateX:r,translateY:n,coordinate:s})}}({allowEscapeViewBox:t,coordinate:s,offsetTopLeft:l,position:c,reverseDirection:d,tooltipBox:{height:x.height,width:x.width},useTranslate3d:h,viewBox:m}),v=g?{}:$v($v({transition:o&&e?"transform ".concat(r,"ms ").concat(n):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&i?"visible":"hidden",position:"absolute",top:0,left:0}),j=$v($v({},v),{},{visibility:!this.state.dismissed&&e&&i?"visible":"hidden"},p);return u.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:j,ref:f},a)}}var zv=!1,Uv=!("undefined"!=typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout),Bv=()=>Ux(e=>e.rootProps.accessibilityLayer);function qv(){return qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qv.apply(null,arguments)}function Wv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Kv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wv(Object(r),!0).forEach(function(t){Vv(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Vv(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Hv={curveBasisClosed:function(e){return new Ih(e)},curveBasisOpen:function(e){return new Rh(e)},curveBasis:function(e){return new Dh(e)},curveBumpX:function(e){return new ph(e,!0)},curveBumpY:function(e){return new ph(e,!1)},curveLinearClosed:function(e){return new $h(e)},curveLinear:ch,curveMonotoneX:function(e){return new Bh(e)},curveMonotoneY:function(e){return new qh(e)},curveNatural:function(e){return new Kh(e)},curveStep:function(e){return new Hh(e,.5)},curveStepAfter:function(e){return new Hh(e,1)},curveStepBefore:function(e){return new Hh(e,0)}},Gv=e=>Wb(e.x)&&Wb(e.y),Yv=e=>e.x,Jv=e=>e.y,Zv=e=>{var t,{type:r="linear",points:n=[],baseLine:a,layout:s,connectNulls:i=!1}=e,o=((e,t)=>{if("function"==typeof e)return e;var r="curve".concat(Am(e));return"curveMonotone"!==r&&"curveBump"!==r||!t?Hv[r]||ch:Hv["".concat(r).concat("vertical"===t?"Y":"X")]})(r,s),l=i?n.filter(Gv):n;if(Array.isArray(a)){var c=i?a.filter(e=>Gv(e)):a,d=l.map((e,t)=>Kv(Kv({},e),{},{base:c[t]}));return(t="vertical"===s?mh().y(Jv).x1(Yv).x0(e=>e.base.x):mh().x(Yv).y1(Jv).y0(e=>e.base.y)).defined(Gv).curve(o),t(d)}return(t="vertical"===s&&Nm(a)?mh().y(Jv).x1(Yv).x0(a):Nm(a)?mh().x(Yv).y1(Jv).y0(a):hh().x(Yv).y(Jv)).defined(Gv).curve(o),t(l)},Qv=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if(!(r&&r.length||n))return null;var s=r&&r.length?Zv(e):n;return u.createElement("path",qv({},$u(e),Um(e),{className:Tu("recharts-curve",t),d:null===s?void 0:s,ref:a}))},Xv=["x","y","top","left","width","height","className"];function ej(){return ej=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ej.apply(null,arguments)}function tj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rj(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var nj=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),aj=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:i=0,className:o}=e,l=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tj(Object(r),!0).forEach(function(t){rj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({x:t,y:r,top:n,left:a,width:s,height:i},function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,Xv));return Nm(t)&&Nm(r)&&Nm(s)&&Nm(i)&&Nm(n)&&Nm(a)?u.createElement("path",ej({},Fu(l),{className:Tu("recharts-cross",o),d:nj(t,r,s,i,n,a)})):null};function sj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ij(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oj(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sj(Object(r),!0).forEach(function(t){ij(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e),n=t;return Object.keys(t).reduce((e,t)=>(void 0===e[t]&&void 0!==n[t]&&(e[t]=n[t]),e),r)}function lj(){}function cj(e){return null!=e}function dj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function uj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dj(Object(r),!0).forEach(function(t){hj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function hj(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var mj=(e,t,r)=>e.map(e=>{return"".concat((n=e,n.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())))," ").concat(t,"ms ").concat(r);var n}).join(","),pj=(e,t)=>Object.keys(t).reduce((r,n)=>uj(uj({},r),{},{[n]:e(n,t[n])}),{});function xj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xj(Object(r),!0).forEach(function(t){gj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function gj(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yj=(e,t,r)=>e+(t-e)*r,bj=e=>{var{from:t,to:r}=e;return t!==r},vj=(e,t,r)=>{var n=pj((t,r)=>{if(bj(r)){var[n,a]=e(r.from,r.to,r.velocity);return fj(fj({},r),{},{from:n,velocity:a})}return r},t);return r<1?pj((e,t)=>bj(t)?fj(fj({},t),{},{velocity:yj(t.velocity,n[e].velocity,r),from:yj(t.from,n[e].from,r)}):t,t):vj(e,n,r-1)};function jj(e,t,r,n,a,s){var i,o=n.reduce((r,n)=>fj(fj({},r),{},{[n]:{from:e[n],velocity:0,to:t[n]}}),{}),l=null,c=n=>{i||(i=n);var d=(n-i)/r.dt;o=vj(r,o,d),a(fj(fj(fj({},e),t),pj((e,t)=>t.from,o))),i=n,Object.values(o).filter(bj).length&&(l=s.setTimeout(c))};return()=>(l=s.setTimeout(c),()=>{l()})}const wj=(e,t,r,n,a,s)=>{var i,o,l=(i=e,o=t,[Object.keys(i),Object.keys(o)].reduce((e,t)=>e.filter(e=>t.includes(e))));return!0===r.isStepper?jj(e,t,r,l,a,s):function(e,t,r,n,a,s,i){var o,l=null,c=a.reduce((r,n)=>fj(fj({},r),{},{[n]:[e[n],t[n]]}),{}),d=a=>{o||(o=a);var u=(a-o)/n,h=pj((e,t)=>yj(...t,r(u)),c);if(s(fj(fj(fj({},e),t),h)),u<1)l=i.setTimeout(d);else{var m=pj((e,t)=>yj(...t,r(1)),c);s(fj(fj(fj({},e),t),m))}};return()=>(l=i.setTimeout(d),()=>{l()})}(e,t,r,n,l,a,s)};var Nj=1e-4,_j=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],kj=(e,t)=>e.map((e,r)=>e*t**r).reduce((e,t)=>e+t),Sj=(e,t)=>r=>{var n=_j(e,t);return kj(n,r)},Cj=function(){for(var e,t,r,n,a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];if(1===s.length)switch(s[0]){case"linear":[e,r,t,n]=[0,0,1,1];break;case"ease":[e,r,t,n]=[.25,.1,.25,1];break;case"ease-in":[e,r,t,n]=[.42,0,1,1];break;case"ease-out":[e,r,t,n]=[.42,0,.58,1];break;case"ease-in-out":[e,r,t,n]=[0,0,.58,1];break;default:var o=s[0].split("(");"cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length&&([e,r,t,n]=o[1].split(")")[0].split(",").map(e=>parseFloat(e)))}else 4===s.length&&([e,r,t,n]=s);var l,c,d=Sj(e,t),u=Sj(r,n),h=(l=e,c=t,e=>{var t=[..._j(l,c).map((e,t)=>e*t).slice(1),0];return kj(t,e)}),m=e=>e>1?1:e<0?0:e,p=e=>{for(var t=e>1?1:e,r=t,n=0;n<8;++n){var a=d(r)-t,s=h(r);if(Math.abs(a-t)<Nj||s<Nj)return u(r);r=m(r-a/s)}return u(r)};return p.isStepper=!1,p},Oj=e=>{if("string"==typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Cj(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:r=8,dt:n=17}=e,a=(e,a,s)=>{var i=s+(-(e-a)*t-s*r)*n/1e3,o=s*n/1e3+e;return Math.abs(o-a)<Nj&&Math.abs(i)<Nj?[a,0]:[o,i]};return a.isStepper=!0,a.dt=n,a}();default:if("cubic-bezier"===e.split("(")[0])return Cj(e)}return"function"==typeof e?e:null};class Ej{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=performance.now(),n=null,a=s=>{s-r>=t?e(s):"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(a))};return n=requestAnimationFrame(a),()=>{cancelAnimationFrame(n)}}}function Pj(){return e=new Ej,t=()=>null,r=!1,n=null,a=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var i=s,[o,...l]=i;return"number"==typeof o?void(n=e.setTimeout(a.bind(null,l),o)):(a(o),void(n=e.setTimeout(a.bind(null,l))))}"string"==typeof s&&t(s),"object"==typeof s&&t(s),"function"==typeof s&&s()}},{stop:()=>{r=!0},start:e=>{r=!1,n&&(n(),n=null),a(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e};var e,t,r,n,a}var Tj=u.createContext(Pj);var Aj={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Mj={t:0},Dj={t:1};function Ij(e){var t,r,n,a=oj(e,Aj),{isActive:s,canBegin:i,duration:o,easing:l,begin:c,onAnimationEnd:d,onAnimationStart:h,children:m}=a,p=(t=a.animationId,r=a.animationManager,n=u.useContext(Tj),u.useMemo(()=>null!=r?r:n(t),[t,r,n])),[x,f]=u.useState(s?Mj:Dj),g=u.useRef(null);return u.useEffect(()=>{s||f(Dj)},[s]),u.useEffect(()=>{if(!s||!i)return lj;var e=wj(Mj,Dj,Oj(l),o,f,p.getTimeoutController());return p.start([h,c,()=>{g.current=e()},o,d]),()=>{p.stop(),g.current&&g.current(),d()}},[s,i,o,l,c,h,d,p]),m(x.t)}function Rj(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",r=u.useRef(Sm(t)),n=u.useRef(e);return n.current!==e&&(r.current=Sm(t),n.current=e),r.current}var $j=["radius"],Lj=["radius"];function Fj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function zj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fj(Object(r),!0).forEach(function(t){Uj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Uj(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bj(){return Bj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bj.apply(null,arguments)}function qj(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Wj=(e,t,r,n,a)=>{var s,i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0;if(i>0&&a instanceof Array){for(var d=[0,0,0,0],u=0;u<4;u++)d[u]=a[u]>i?i:a[u];s="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(s+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),s+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(s+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,",\n        ").concat(e+r,",").concat(t+o*d[1])),s+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(s+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,",\n        ").concat(e+r-l*d[2],",").concat(t+n)),s+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(s+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+n-o*d[3])),s+="Z"}else if(i>0&&a===+a&&a>0){var h=Math.min(i,a);s="M ".concat(e,",").concat(t+o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+r-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*h,"\n            L ").concat(e+r,",").concat(t+n-o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r-l*h,",").concat(t+n,"\n            L ").concat(e+l*h,",").concat(t+n,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*h," Z")}else s="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return s},Kj={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Vj=e=>{var t=oj(e,Kj),r=u.useRef(null),[n,a]=u.useState(-1);u.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&a(e)}catch(t){}},[]);var{x:s,y:i,width:o,height:l,radius:c,className:d}=t,{animationEasing:h,animationDuration:m,animationBegin:p,isAnimationActive:x,isUpdateAnimationActive:f}=t,g=u.useRef(o),y=u.useRef(l),b=u.useRef(s),v=u.useRef(i),j=Rj(u.useMemo(()=>({x:s,y:i,width:o,height:l,radius:c}),[s,i,o,l,c]),"rectangle-");if(s!==+s||i!==+i||o!==+o||l!==+l||0===o||0===l)return null;var w=Tu("recharts-rectangle",d);if(!f){var N=Fu(t),{radius:_}=N,k=qj(N,$j);return u.createElement("path",Bj({},k,{radius:"number"==typeof c?c:void 0,className:w,d:Wj(s,i,o,l,c)}))}var S=g.current,C=y.current,O=b.current,E=v.current,P="0px ".concat(-1===n?1:n,"px"),T="".concat(n,"px 0px"),A=mj(["strokeDasharray"],m,"string"==typeof h?h:void 0);return u.createElement(Ij,{animationId:j,key:j,canBegin:n>0,duration:m,easing:h,isActive:f,begin:p},e=>{var n,a=Em(S,o,e),d=Em(C,l,e),h=Em(O,s,e),m=Em(E,i,e);r.current&&(g.current=a,y.current=d,b.current=h,v.current=m),n=x?e>0?{transition:A,strokeDasharray:T}:{strokeDasharray:P}:{strokeDasharray:T};var p=Fu(t),{radius:f}=p,j=qj(p,Lj);return u.createElement("path",Bj({},j,{radius:"number"==typeof c?c:void 0,className:w,d:Wj(h,m,a,d,c),ref:r,style:zj(zj({},n),t.style)}))})};function Hj(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e;return{points:[Ry(t,r,n,a),Ry(t,r,n,s)],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function Gj(){return Gj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gj.apply(null,arguments)}var Yj=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:o,cornerIsExternal:l}=e,c=o*(i?1:-1)+n,d=Math.asin(o/c)/Dy,u=l?a:a+s*d,h=l?a-s*d:a;return{center:Ry(t,r,c,u),circleTangency:Ry(t,r,n,u),lineTangency:Ry(t,r,c*Math.cos(d*Dy),h),theta:d}},Jj=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=e,o=((e,t)=>vm(t-e)*Math.min(Math.abs(t-e),359.999))(s,i),l=s+o,c=Ry(t,r,a,s),d=Ry(t,r,a,l),u="M ".concat(c.x,",").concat(c.y,"\n    A ").concat(a,",").concat(a,",0,\n    ").concat(+(Math.abs(o)>180),",").concat(+(s>l),",\n    ").concat(d.x,",").concat(d.y,"\n  ");if(n>0){var h=Ry(t,r,n,s),m=Ry(t,r,n,l);u+="L ".concat(m.x,",").concat(m.y,"\n            A ").concat(n,",").concat(n,",0,\n            ").concat(+(Math.abs(o)>180),",").concat(+(s<=l),",\n            ").concat(h.x,",").concat(h.y," Z")}else u+="L ".concat(t,",").concat(r," Z");return u},Zj={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Qj=e=>{var t=oj(e,Zj),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d,className:h}=t;if(s<a||c===d)return null;var m,p=Tu("recharts-sector",h),x=s-a,f=Cm(i,x,0,!0);return m=f>0&&Math.abs(c-d)<360?(e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:o,startAngle:l,endAngle:c}=e,d=vm(c-l),{circleTangency:u,lineTangency:h,theta:m}=Yj({cx:t,cy:r,radius:a,angle:l,sign:d,cornerRadius:s,cornerIsExternal:o}),{circleTangency:p,lineTangency:x,theta:f}=Yj({cx:t,cy:r,radius:a,angle:c,sign:-d,cornerRadius:s,cornerIsExternal:o}),g=o?Math.abs(l-c):Math.abs(l-c)-m-f;if(g<0)return i?"M ".concat(h.x,",").concat(h.y,"\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*s,",0\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*-s,",0\n      "):Jj({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:l,endAngle:c});var y="M ".concat(h.x,",").concat(h.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(u.x,",").concat(u.y,"\n    A").concat(a,",").concat(a,",0,").concat(+(g>180),",").concat(+(d<0),",").concat(p.x,",").concat(p.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,"\n  ");if(n>0){var{circleTangency:b,lineTangency:v,theta:j}=Yj({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:w,lineTangency:N,theta:_}=Yj({cx:t,cy:r,radius:n,angle:c,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),k=o?Math.abs(l-c):Math.abs(l-c)-j-_;if(k<0&&0===s)return"".concat(y,"L").concat(t,",").concat(r,"Z");y+="L".concat(N.x,",").concat(N.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(w.x,",").concat(w.y,"\n      A").concat(n,",").concat(n,",0,").concat(+(k>180),",").concat(+(d>0),",").concat(b.x,",").concat(b.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,"Z")}else y+="L".concat(t,",").concat(r,"Z");return y})({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(f,x/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}):Jj({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:c,endAngle:d}),u.createElement("path",Gj({},Fu(t),{className:p,d:m}))};function Xj(e,t,r){var n,a,s,i;if("horizontal"===e)s=n=t.x,a=r.top,i=r.top+r.height;else if("vertical"===e)i=a=t.y,n=r.left,s=r.left+r.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return Hj(t);var{cx:o,cy:l,innerRadius:c,outerRadius:d,angle:u}=t,h=Ry(o,l,c,u),m=Ry(o,l,d,u);n=h.x,a=h.y,s=m.x,i=m.y}return[{x:n,y:a},{x:s,y:i}]}var ew,tw,rw,nw,aw,sw={},iw={},ow={};function lw(){return ew||(ew=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=of();e.toNumber=function(e){return t.isSymbol(e)?NaN:Number(e)}}(ow)),ow}function cw(){return tw||(tw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lw();e.toFinite=function(e){if(!e)return 0===e?e:0;if((e=t.toNumber(e))===1/0||e===-1/0){return(e<0?-1:1)*Number.MAX_VALUE}return e==e?e:0}}(iw)),iw}function dw(){return aw?nw:(aw=1,nw=(rw||(rw=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yf(),r=cw();e.range=function(e,n,a){a&&"number"!=typeof a&&t.isIterateeCall(e,n,a)&&(n=a=void 0),e=r.toFinite(e),void 0===n?(n=e,e=0):n=r.toFinite(n),a=void 0===a?e<n?1:-1:r.toFinite(a);const s=Math.max(Math.ceil((n-e)/(a||1)),0),i=new Array(s);for(let t=0;t<s;t++)i[t]=e,e+=a;return i}}(sw)),sw).range)}const uw=n(dw());function hw(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function mw(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function pw(e){let t,r,n;function a(e,n,a=0,s=e.length){if(a<s){if(0!==t(n,n))return s;do{const t=a+s>>>1;r(e[t],n)<0?a=t+1:s=t}while(a<s)}return a}return 2!==e.length?(t=hw,r=(t,r)=>hw(e(t),r),n=(t,r)=>e(t)-r):(t=e===hw||e===mw?e:xw,r=e,n=e),{left:a,center:function(e,t,r=0,s=e.length){const i=a(e,t,r,s-1);return i>r&&n(e[i-1],t)>-n(e[i],t)?i-1:i},right:function(e,n,a=0,s=e.length){if(a<s){if(0!==t(n,n))return s;do{const t=a+s>>>1;r(e[t],n)<=0?a=t+1:s=t}while(a<s)}return a}}}function xw(){return 0}function fw(e){return null===e?NaN:+e}const gw=pw(hw).right;pw(fw).center;class yw extends Map{constructor(e,t=vw){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[r,n]of e)this.set(r,n)}get(e){return super.get(bw(this,e))}has(e){return super.has(bw(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},r){const n=t(r);e.has(n)&&(r=e.get(n),e.delete(n));return r}(this,e))}}function bw({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function vw(e){return null!==e&&"object"==typeof e?e.valueOf():e}function jw(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}const ww=Math.sqrt(50),Nw=Math.sqrt(10),_w=Math.sqrt(2);function kw(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=ww?10:s>=Nw?5:s>=_w?2:1;let o,l,c;return a<0?(c=Math.pow(10,-a)/i,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,a)*i,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=r&&r<2?kw(e,t,2*r):[o,l,c]}function Sw(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const n=t<e,[a,s,i]=n?kw(t,e,r):kw(e,t,r);if(!(s>=a))return[];const o=s-a+1,l=new Array(o);if(n)if(i<0)for(let c=0;c<o;++c)l[c]=(s-c)/-i;else for(let c=0;c<o;++c)l[c]=(s-c)*i;else if(i<0)for(let c=0;c<o;++c)l[c]=(a+c)/-i;else for(let c=0;c<o;++c)l[c]=(a+c)*i;return l}function Cw(e,t,r){return kw(e=+e,t=+t,r=+r)[2]}function Ow(e,t,r){r=+r;const n=(t=+t)<(e=+e),a=n?Cw(t,e,r):Cw(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function Ew(e,t){let r;for(const n of e)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);return r}function Pw(e,t){let r;for(const n of e)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);return r}function Tw(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=void 0===a?jw:function(e=hw){if(e===hw)return jw;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}(a);n>r;){if(n-r>600){const s=n-r+1,i=t-r+1,o=Math.log(s),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(s-l)/s)*(i-s/2<0?-1:1);Tw(e,t,Math.max(r,Math.floor(t-i*l/s+c)),Math.min(n,Math.floor(t+(s-i)*l/s+c)),a)}const s=e[t];let i=r,o=n;for(Aw(e,r,t),a(e[n],s)>0&&Aw(e,r,n);i<o;){for(Aw(e,i,o),++i,--o;a(e[i],s)<0;)++i;for(;a(e[o],s)>0;)--o}0===a(e[r],s)?Aw(e,r,o):(++o,Aw(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function Aw(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Mw(e,t,r=fw){if((n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),i=+r(e[s],s,e);return i+(+r(e[s+1],s+1,e)-i)*(a-s)}}function Dw(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Iw(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const Rw=Symbol("implicit");function $w(){var e=new yw,t=[],r=[],n=Rw;function a(a){let s=e.get(a);if(void 0===s){if(n!==Rw)return n;e.set(a,s=t.push(a)-1)}return r[s%r.length]}return a.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new yw;for(const n of r)e.has(n)||e.set(n,t.push(n)-1);return a},a.range=function(e){return arguments.length?(r=Array.from(e),a):r.slice()},a.unknown=function(e){return arguments.length?(n=e,a):n},a.copy=function(){return $w(t,r).unknown(n)},Dw.apply(a,arguments),a}function Lw(){var e,t,r=$w().unknown(void 0),n=r.domain,a=r.range,s=0,i=1,o=!1,l=0,c=0,d=.5;function u(){var r=n().length,u=i<s,h=u?i:s,m=u?s:i;e=(m-h)/Math.max(1,r-l+2*c),o&&(e=Math.floor(e)),h+=(m-h-e*(r-l))*d,t=e*(1-l),o&&(h=Math.round(h),t=Math.round(t));var p=function(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=0|Math.max(0,Math.ceil((t-e)/r)),s=new Array(a);++n<a;)s[n]=e+n*r;return s}(r).map(function(t){return h+e*t});return a(u?p.reverse():p)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),u()):n()},r.range=function(e){return arguments.length?([s,i]=e,s=+s,i=+i,u()):[s,i]},r.rangeRound=function(e){return[s,i]=e,s=+s,i=+i,o=!0,u()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(o=!!e,u()):o},r.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),u()):l},r.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),u()):l},r.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},r.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},r.copy=function(){return Lw(n(),[s,i]).round(o).paddingInner(l).paddingOuter(c).align(d)},Dw.apply(u(),arguments)}function Fw(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Fw(t())},e}function zw(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Uw(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Bw(){}var qw=.7,Ww=1/qw,Kw="\\s*([+-]?\\d+)\\s*",Vw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gw=/^#([0-9a-f]{3,8})$/,Yw=new RegExp(`^rgb\\(${Kw},${Kw},${Kw}\\)$`),Jw=new RegExp(`^rgb\\(${Hw},${Hw},${Hw}\\)$`),Zw=new RegExp(`^rgba\\(${Kw},${Kw},${Kw},${Vw}\\)$`),Qw=new RegExp(`^rgba\\(${Hw},${Hw},${Hw},${Vw}\\)$`),Xw=new RegExp(`^hsl\\(${Vw},${Hw},${Hw}\\)$`),eN=new RegExp(`^hsla\\(${Vw},${Hw},${Hw},${Vw}\\)$`),tN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function rN(){return this.rgb().formatHex()}function nN(){return this.rgb().formatRgb()}function aN(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Gw.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?sN(t):3===r?new lN(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?iN(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?iN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Yw.exec(e))?new lN(t[1],t[2],t[3],1):(t=Jw.exec(e))?new lN(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Zw.exec(e))?iN(t[1],t[2],t[3],t[4]):(t=Qw.exec(e))?iN(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Xw.exec(e))?pN(t[1],t[2]/100,t[3]/100,1):(t=eN.exec(e))?pN(t[1],t[2]/100,t[3]/100,t[4]):tN.hasOwnProperty(e)?sN(tN[e]):"transparent"===e?new lN(NaN,NaN,NaN,0):null}function sN(e){return new lN(e>>16&255,e>>8&255,255&e,1)}function iN(e,t,r,n){return n<=0&&(e=t=r=NaN),new lN(e,t,r,n)}function oN(e,t,r,n){return 1===arguments.length?((a=e)instanceof Bw||(a=aN(a)),a?new lN((a=a.rgb()).r,a.g,a.b,a.opacity):new lN):new lN(e,t,r,n??1);var a}function lN(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function cN(){return`#${mN(this.r)}${mN(this.g)}${mN(this.b)}`}function dN(){const e=uN(this.opacity);return`${1===e?"rgb(":"rgba("}${hN(this.r)}, ${hN(this.g)}, ${hN(this.b)}${1===e?")":`, ${e})`}`}function uN(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hN(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function mN(e){return((e=hN(e))<16?"0":"")+e.toString(16)}function pN(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new fN(e,t,r,n)}function xN(e){if(e instanceof fN)return new fN(e.h,e.s,e.l,e.opacity);if(e instanceof Bw||(e=aN(e)),!e)return new fN;if(e instanceof fN)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),i=NaN,o=s-a,l=(s+a)/2;return o?(i=t===s?(r-n)/o+6*(r<n):r===s?(n-t)/o+2:(t-r)/o+4,o/=l<.5?s+a:2-s-a,i*=60):o=l>0&&l<1?0:i,new fN(i,o,l,e.opacity)}function fN(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function gN(e){return(e=(e||0)%360)<0?e+360:e}function yN(e){return Math.max(0,Math.min(1,e||0))}function bN(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}zw(Bw,aN,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:rN,formatHex:rN,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return xN(this).formatHsl()},formatRgb:nN,toString:nN}),zw(lN,oN,Uw(Bw,{brighter(e){return e=null==e?Ww:Math.pow(Ww,e),new lN(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?qw:Math.pow(qw,e),new lN(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new lN(hN(this.r),hN(this.g),hN(this.b),uN(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cN,formatHex:cN,formatHex8:function(){return`#${mN(this.r)}${mN(this.g)}${mN(this.b)}${mN(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:dN,toString:dN})),zw(fN,function(e,t,r,n){return 1===arguments.length?xN(e):new fN(e,t,r,n??1)},Uw(Bw,{brighter(e){return e=null==e?Ww:Math.pow(Ww,e),new fN(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?qw:Math.pow(qw,e),new fN(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new lN(bN(e>=240?e-240:e+120,a,n),bN(e,a,n),bN(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new fN(gN(this.h),yN(this.s),yN(this.l),uN(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=uN(this.opacity);return`${1===e?"hsl(":"hsla("}${gN(this.h)}, ${100*yN(this.s)}%, ${100*yN(this.l)}%${1===e?")":`, ${e})`}`}}));const vN=e=>()=>e;function jN(e){return 1===(e=+e)?wN:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}(t,r,e):vN(isNaN(t)?r:t)}}function wN(e,t){var r=t-e;return r?function(e,t){return function(r){return e+r*t}}(e,r):vN(isNaN(e)?t:e)}const NN=function e(t){var r=jN(t);function n(e,t){var n=r((e=oN(e)).r,(t=oN(t)).r),a=r(e.g,t.g),s=r(e.b,t.b),i=wN(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=a(t),e.b=s(t),e.opacity=i(t),e+""}}return n.gamma=e,n}(1);function _N(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,a=t.slice();return function(s){for(r=0;r<n;++r)a[r]=e[r]*(1-s)+t[r]*s;return a}}function kN(e,t){var r,n=t?t.length:0,a=e?Math.min(n,e.length):0,s=new Array(a),i=new Array(n);for(r=0;r<a;++r)s[r]=AN(e[r],t[r]);for(;r<n;++r)i[r]=t[r];return function(e){for(r=0;r<a;++r)i[r]=s[r](e);return i}}function SN(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function CN(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function ON(e,t){var r,n={},a={};for(r in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)r in e?n[r]=AN(e[r],t[r]):a[r]=t[r];return function(e){for(r in n)a[r]=n[r](e);return a}}var EN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,PN=new RegExp(EN.source,"g");function TN(e,t){var r,n,a,s=EN.lastIndex=PN.lastIndex=0,i=-1,o=[],l=[];for(e+="",t+="";(r=EN.exec(e))&&(n=PN.exec(t));)(a=n.index)>s&&(a=t.slice(s,a),o[i]?o[i]+=a:o[++i]=a),(r=r[0])===(n=n[0])?o[i]?o[i]+=n:o[++i]=n:(o[++i]=null,l.push({i,x:CN(r,n)})),s=PN.lastIndex;return s<t.length&&(a=t.slice(s),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)o[(r=l[n]).i]=r.x(e);return o.join("")})}function AN(e,t){var r,n,a=typeof t;return null==t||"boolean"===a?vN(t):("number"===a?CN:"string"===a?(r=aN(t))?(t=r,NN):TN:t instanceof aN?NN:t instanceof Date?SN:(n=t,!ArrayBuffer.isView(n)||n instanceof DataView?Array.isArray(t)?kN:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?ON:CN:_N))(e,t)}function MN(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function DN(e){return+e}var IN=[0,1];function RN(e){return e}function $N(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r});var r}function LN(e,t,r){var n=e[0],a=e[1],s=t[0],i=t[1];return a<n?(n=$N(a,n),s=r(i,s)):(n=$N(n,a),s=r(s,i)),function(e){return s(n(e))}}function FN(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=$N(e[i],e[i+1]),s[i]=r(t[i],t[i+1]);return function(t){var r=gw(e,t,1,n)-1;return s[r](a[r](t))}}function zN(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function UN(){var e,t,r,n,a,s,i=IN,o=IN,l=AN,c=RN;function d(){var e,t,r,l=Math.min(i.length,o.length);return c!==RN&&(e=i[0],t=i[l-1],e>t&&(r=e,e=t,t=r),c=function(r){return Math.max(e,Math.min(t,r))}),n=l>2?FN:LN,a=s=null,u}function u(t){return null==t||isNaN(t=+t)?r:(a||(a=n(i.map(e),o,l)))(e(c(t)))}return u.invert=function(r){return c(t((s||(s=n(o,i.map(e),CN)))(r)))},u.domain=function(e){return arguments.length?(i=Array.from(e,DN),d()):i.slice()},u.range=function(e){return arguments.length?(o=Array.from(e),d()):o.slice()},u.rangeRound=function(e){return o=Array.from(e),l=MN,d()},u.clamp=function(e){return arguments.length?(c=!!e||RN,d()):c!==RN},u.interpolate=function(e){return arguments.length?(l=e,d()):l},u.unknown=function(e){return arguments.length?(r=e,u):r},function(r,n){return e=r,t=n,d()}}function BN(){return UN()(RN,RN)}function qN(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function WN(e){return(e=qN(Math.abs(e)))?e[1]:NaN}var KN,VN=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function HN(e){if(!(t=VN.exec(e)))throw new Error("invalid format: "+e);var t;return new GN({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function GN(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function YN(e,t){var r=qN(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}HN.prototype=GN.prototype,GN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const JN={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>YN(100*e,t),r:YN,s:function(e,t){var r=qN(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(KN=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+qN(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ZN(e){return e}var QN,XN,e_,t_=Array.prototype.map,r_=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function n_(e){var t,r,n=void 0===e.grouping||void 0===e.thousands?ZN:(t=t_.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var a=e.length,s=[],i=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),s.push(e.substring(a-=o,a+o)),!((l+=o+1)>n));)o=t[i=(i+1)%t.length];return s.reverse().join(r)}),a=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?ZN:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(t_.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=HN(e)).fill,r=e.align,u=e.sign,h=e.symbol,m=e.zero,p=e.width,x=e.comma,f=e.precision,g=e.trim,y=e.type;"n"===y?(x=!0,y="g"):JN[y]||(void 0===f&&(f=12),g=!0,y="g"),(m||"0"===t&&"="===r)&&(m=!0,t="0",r="=");var b="$"===h?a:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",v="$"===h?s:/[%p]/.test(y)?l:"",j=JN[y],w=/[defgprs%]/.test(y);function N(e){var a,s,l,h=b,N=v;if("c"===y)N=j(e)+N,e="";else{var _=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:j(Math.abs(e),f),g&&(e=function(e){e:for(var t,r=e.length,n=1,a=-1;n<r;++n)switch(e[n]){case".":a=t=n;break;case"0":0===a&&(a=n),t=n;break;default:if(!+e[n])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),_&&0===+e&&"+"!==u&&(_=!1),h=(_?"("===u?u:c:"-"===u||"("===u?"":u)+h,N=("s"===y?r_[8+KN/3]:"")+N+(_&&"("===u?")":""),w)for(a=-1,s=e.length;++a<s;)if(48>(l=e.charCodeAt(a))||l>57){N=(46===l?i+e.slice(a+1):e.slice(a))+N,e=e.slice(0,a);break}}x&&!m&&(e=n(e,1/0));var k=h.length+e.length+N.length,S=k<p?new Array(p-k+1).join(t):"";switch(x&&m&&(e=n(S+e,S.length?p-N.length:1/0),S=""),r){case"<":e=h+e+N+S;break;case"=":e=h+S+e+N;break;case"^":e=S.slice(0,k=S.length>>1)+h+e+N+S.slice(k);break;default:e=S+h+e+N}return o(e)}return f=void 0===f?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,f)):Math.max(0,Math.min(20,f)),N.toString=function(){return e+""},N}return{format:u,formatPrefix:function(e,t){var r=u(((e=HN(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(WN(t)/3))),a=Math.pow(10,-n),s=r_[8+n/3];return function(e){return r(a*e)+s}}}}function a_(e,t,r,n){var a,s=Ow(e,t,r);switch((n=HN(n??",f")).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(WN(t)/3)))-WN(Math.abs(e)))}(s,i))||(n.precision=a),e_(n,i);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,WN(t)-WN(e))+1}(s,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=a-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(a=function(e){return Math.max(0,-WN(Math.abs(e)))}(s))||(n.precision=a-2*("%"===n.type))}return XN(n)}function s_(e){var t=e.domain;return e.ticks=function(e){var r=t();return Sw(r[0],r[r.length-1],e??10)},e.tickFormat=function(e,r){var n=t();return a_(n[0],n[n.length-1],e??10,r)},e.nice=function(r){null==r&&(r=10);var n,a,s=t(),i=0,o=s.length-1,l=s[i],c=s[o],d=10;for(c<l&&(a=l,l=c,c=a,a=i,i=o,o=a);d-- >0;){if((a=Cw(l,c,r))===n)return s[i]=l,s[o]=c,t(s);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}n=a}return e},e}function i_(e,t){var r,n=0,a=(e=e.slice()).length-1,s=e[n],i=e[a];return i<s&&(r=n,n=a,a=r,r=s,s=i,i=r),e[n]=t.floor(s),e[a]=t.ceil(i),e}function o_(e){return Math.log(e)}function l_(e){return Math.exp(e)}function c_(e){return-Math.log(-e)}function d_(e){return-Math.exp(-e)}function u_(e){return isFinite(e)?+("1e"+e):e<0?0:e}function h_(e){return(t,r)=>-e(-t,r)}function m_(e){const t=e(o_,l_),r=t.domain;let n,a,s=10;function i(){return n=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(s),a=function(e){return 10===e?u_:e===Math.E?Math.exp:t=>Math.pow(e,t)}(s),r()[0]<0?(n=h_(n),a=h_(a),e(c_,d_)):e(o_,l_),t}return t.base=function(e){return arguments.length?(s=+e,i()):s},t.domain=function(e){return arguments.length?(r(e),i()):r()},t.ticks=e=>{const t=r();let i=t[0],o=t[t.length-1];const l=o<i;l&&([i,o]=[o,i]);let c,d,u=n(i),h=n(o);const m=null==e?10:+e;let p=[];if(!(s%1)&&h-u<m){if(u=Math.floor(u),h=Math.ceil(h),i>0){for(;u<=h;++u)for(c=1;c<s;++c)if(d=u<0?c/a(-u):c*a(u),!(d<i)){if(d>o)break;p.push(d)}}else for(;u<=h;++u)for(c=s-1;c>=1;--c)if(d=u>0?c/a(-u):c*a(u),!(d<i)){if(d>o)break;p.push(d)}2*p.length<m&&(p=Sw(i,o,m))}else p=Sw(u,h,Math.min(h-u,m)).map(a);return l?p.reverse():p},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===s?"s":","),"function"!=typeof r&&(s%1||null!=(r=HN(r)).precision||(r.trim=!0),r=XN(r)),e===1/0)return r;const i=Math.max(1,s*e/t.ticks().length);return e=>{let t=e/a(Math.round(n(e)));return t*s<s-.5&&(t*=s),t<=i?r(e):""}},t.nice=()=>r(i_(r(),{floor:e=>a(Math.floor(n(e))),ceil:e=>a(Math.ceil(n(e)))})),t}function p_(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function x_(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function f_(e){var t=1,r=e(p_(t),x_(t));return r.constant=function(r){return arguments.length?e(p_(t=+r),x_(t)):t},s_(r)}function g_(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function y_(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function b_(e){return e<0?-e*e:e*e}function v_(e){var t=e(RN,RN),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(RN,RN):.5===r?e(y_,b_):e(g_(r),g_(1/r)):r},s_(t)}function j_(){var e=v_(UN());return e.copy=function(){return zN(e,j_()).exponent(e.exponent())},Dw.apply(e,arguments),e}function w_(e){return Math.sign(e)*e*e}QN=n_({thousands:",",grouping:[3],currency:["$",""]}),XN=QN.format,e_=QN.formatPrefix;const N_=new Date,__=new Date;function k_(e,t,r,n){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=t=>(e(t=new Date(+t)),t),a.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),a.round=e=>{const t=a(e),r=a.ceil(e);return e-t<r-e?t:r},a.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),a.range=(r,n,s)=>{const i=[];if(r=a.ceil(r),s=null==s?1:Math.floor(s),!(r<n&&s>0))return i;let o;do{i.push(o=new Date(+r)),t(r,s),e(r)}while(o<r&&r<n);return i},a.filter=r=>k_(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}),r&&(a.count=(t,n)=>(N_.setTime(+t),__.setTime(+n),e(N_),e(__),Math.floor(r(N_,__))),a.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(n?t=>n(t)%e===0:t=>a.count(0,t)%e===0):a:null)),a}const S_=k_(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);S_.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?k_(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):S_:null),S_.range;const C_=1e3,O_=6e4,E_=36e5,P_=864e5,T_=6048e5,A_=2592e6,M_=31536e6,D_=k_(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*C_)},(e,t)=>(t-e)/C_,e=>e.getUTCSeconds());D_.range;const I_=k_(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*C_)},(e,t)=>{e.setTime(+e+t*O_)},(e,t)=>(t-e)/O_,e=>e.getMinutes());I_.range;const R_=k_(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*O_)},(e,t)=>(t-e)/O_,e=>e.getUTCMinutes());R_.range;const $_=k_(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*C_-e.getMinutes()*O_)},(e,t)=>{e.setTime(+e+t*E_)},(e,t)=>(t-e)/E_,e=>e.getHours());$_.range;const L_=k_(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*E_)},(e,t)=>(t-e)/E_,e=>e.getUTCHours());L_.range;const F_=k_(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*O_)/P_,e=>e.getDate()-1);F_.range;const z_=k_(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/P_,e=>e.getUTCDate()-1);z_.range;const U_=k_(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/P_,e=>Math.floor(e/P_));function B_(e){return k_(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*O_)/T_)}U_.range;const q_=B_(0),W_=B_(1),K_=B_(2),V_=B_(3),H_=B_(4),G_=B_(5),Y_=B_(6);function J_(e){return k_(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/T_)}q_.range,W_.range,K_.range,V_.range,H_.range,G_.range,Y_.range;const Z_=J_(0),Q_=J_(1),X_=J_(2),ek=J_(3),tk=J_(4),rk=J_(5),nk=J_(6);Z_.range,Q_.range,X_.range,ek.range,tk.range,rk.range,nk.range;const ak=k_(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth());ak.range;const sk=k_(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth());sk.range;const ik=k_(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ik.every=e=>isFinite(e=Math.floor(e))&&e>0?k_(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null,ik.range;const ok=k_(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function lk(e,t,r,n,a,s){const i=[[D_,1,C_],[D_,5,5e3],[D_,15,15e3],[D_,30,3e4],[s,1,O_],[s,5,3e5],[s,15,9e5],[s,30,18e5],[a,1,E_],[a,3,108e5],[a,6,216e5],[a,12,432e5],[n,1,P_],[n,2,1728e5],[r,1,T_],[t,1,A_],[t,3,7776e6],[e,1,M_]];function o(t,r,n){const a=Math.abs(r-t)/n,s=pw(([,,e])=>e).right(i,a);if(s===i.length)return e.every(Ow(t/M_,r/M_,n));if(0===s)return S_.every(Math.max(Ow(t,r,n),1));const[o,l]=i[a/i[s-1][2]<i[s][2]/a?s-1:s];return o.every(l)}return[function(e,t,r){const n=t<e;n&&([e,t]=[t,e]);const a=r&&"function"==typeof r.range?r:o(e,t,r),s=a?a.range(e,+t+1):[];return n?s.reverse():s},o]}ok.every=e=>isFinite(e=Math.floor(e))&&e>0?k_(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null,ok.range;const[ck,dk]=lk(ok,sk,Z_,U_,L_,R_),[uk,hk]=lk(ik,ak,q_,F_,$_,I_);function mk(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function pk(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function xk(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var fk,gk,yk,bk={"-":"",_:" ",0:"0"},vk=/^\s*\d+/,jk=/^%/,wk=/[\\^$*+?|[\]().{}]/g;function Nk(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function _k(e){return e.replace(wk,"\\$&")}function kk(e){return new RegExp("^(?:"+e.map(_k).join("|")+")","i")}function Sk(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function Ck(e,t,r){var n=vk.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Ok(e,t,r){var n=vk.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Ek(e,t,r){var n=vk.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Pk(e,t,r){var n=vk.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Tk(e,t,r){var n=vk.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function Ak(e,t,r){var n=vk.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function Mk(e,t,r){var n=vk.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Dk(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Ik(e,t,r){var n=vk.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function Rk(e,t,r){var n=vk.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function $k(e,t,r){var n=vk.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Lk(e,t,r){var n=vk.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function Fk(e,t,r){var n=vk.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function zk(e,t,r){var n=vk.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Uk(e,t,r){var n=vk.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Bk(e,t,r){var n=vk.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function qk(e,t,r){var n=vk.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Wk(e,t,r){var n=jk.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Kk(e,t,r){var n=vk.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Vk(e,t,r){var n=vk.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function Hk(e,t){return Nk(e.getDate(),t,2)}function Gk(e,t){return Nk(e.getHours(),t,2)}function Yk(e,t){return Nk(e.getHours()%12||12,t,2)}function Jk(e,t){return Nk(1+F_.count(ik(e),e),t,3)}function Zk(e,t){return Nk(e.getMilliseconds(),t,3)}function Qk(e,t){return Zk(e,t)+"000"}function Xk(e,t){return Nk(e.getMonth()+1,t,2)}function eS(e,t){return Nk(e.getMinutes(),t,2)}function tS(e,t){return Nk(e.getSeconds(),t,2)}function rS(e){var t=e.getDay();return 0===t?7:t}function nS(e,t){return Nk(q_.count(ik(e)-1,e),t,2)}function aS(e){var t=e.getDay();return t>=4||0===t?H_(e):H_.ceil(e)}function sS(e,t){return e=aS(e),Nk(H_.count(ik(e),e)+(4===ik(e).getDay()),t,2)}function iS(e){return e.getDay()}function oS(e,t){return Nk(W_.count(ik(e)-1,e),t,2)}function lS(e,t){return Nk(e.getFullYear()%100,t,2)}function cS(e,t){return Nk((e=aS(e)).getFullYear()%100,t,2)}function dS(e,t){return Nk(e.getFullYear()%1e4,t,4)}function uS(e,t){var r=e.getDay();return Nk((e=r>=4||0===r?H_(e):H_.ceil(e)).getFullYear()%1e4,t,4)}function hS(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Nk(t/60|0,"0",2)+Nk(t%60,"0",2)}function mS(e,t){return Nk(e.getUTCDate(),t,2)}function pS(e,t){return Nk(e.getUTCHours(),t,2)}function xS(e,t){return Nk(e.getUTCHours()%12||12,t,2)}function fS(e,t){return Nk(1+z_.count(ok(e),e),t,3)}function gS(e,t){return Nk(e.getUTCMilliseconds(),t,3)}function yS(e,t){return gS(e,t)+"000"}function bS(e,t){return Nk(e.getUTCMonth()+1,t,2)}function vS(e,t){return Nk(e.getUTCMinutes(),t,2)}function jS(e,t){return Nk(e.getUTCSeconds(),t,2)}function wS(e){var t=e.getUTCDay();return 0===t?7:t}function NS(e,t){return Nk(Z_.count(ok(e)-1,e),t,2)}function _S(e){var t=e.getUTCDay();return t>=4||0===t?tk(e):tk.ceil(e)}function kS(e,t){return e=_S(e),Nk(tk.count(ok(e),e)+(4===ok(e).getUTCDay()),t,2)}function SS(e){return e.getUTCDay()}function CS(e,t){return Nk(Q_.count(ok(e)-1,e),t,2)}function OS(e,t){return Nk(e.getUTCFullYear()%100,t,2)}function ES(e,t){return Nk((e=_S(e)).getUTCFullYear()%100,t,2)}function PS(e,t){return Nk(e.getUTCFullYear()%1e4,t,4)}function TS(e,t){var r=e.getUTCDay();return Nk((e=r>=4||0===r?tk(e):tk.ceil(e)).getUTCFullYear()%1e4,t,4)}function AS(){return"+0000"}function MS(){return"%"}function DS(e){return+e}function IS(e){return Math.floor(+e/1e3)}function RS(e){return new Date(e)}function $S(e){return e instanceof Date?+e:+new Date(+e)}function LS(e,t,r,n,a,s,i,o,l,c){var d=BN(),u=d.invert,h=d.domain,m=c(".%L"),p=c(":%S"),x=c("%I:%M"),f=c("%I %p"),g=c("%a %d"),y=c("%b %d"),b=c("%B"),v=c("%Y");function j(e){return(l(e)<e?m:o(e)<e?p:i(e)<e?x:s(e)<e?f:n(e)<e?a(e)<e?g:y:r(e)<e?b:v)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?h(Array.from(e,$S)):h().map(RS)},d.ticks=function(t){var r=h();return e(r[0],r[r.length-1],t??10)},d.tickFormat=function(e,t){return null==t?j:c(t)},d.nice=function(e){var r=h();return e&&"function"==typeof e.range||(e=t(r[0],r[r.length-1],e??10)),e?h(i_(r,e)):d},d.copy=function(){return zN(d,LS(e,t,r,n,a,s,i,o,l,c))},d}function FS(){var e,t,r,n,a,s=0,i=1,o=RN,l=!1;function c(t){return null==t||isNaN(t=+t)?a:o(0===r?.5:(t=(n(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var r,n;return arguments.length?([r,n]=t,o=e(r,n),c):[o(0),o(1)]}}return c.domain=function(a){return arguments.length?([s,i]=a,e=n(s=+s),t=n(i=+i),r=e===t?0:1/(t-e),c):[s,i]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=d(AN),c.rangeRound=d(MN),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return n=a,e=a(s),t=a(i),r=e===t?0:1/(t-e),c}}function zS(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function US(){var e=v_(FS());return e.copy=function(){return zS(e,US()).exponent(e.exponent())},Iw.apply(e,arguments)}function BS(){var e,t,r,n,a,s,i,o=0,l=.5,c=1,d=1,u=RN,h=!1;function m(e){return isNaN(e=+e)?i:(e=.5+((e=+s(e))-t)*(d*e<d*t?n:a),u(h?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var r,n,a;return arguments.length?([r,n,a]=t,u=function(e,t){void 0===t&&(t=e,e=AN);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return s[t](e-t)}}(e,[r,n,a]),m):[u(0),u(.5),u(1)]}}return m.domain=function(i){return arguments.length?([o,l,c]=i,e=s(o=+o),t=s(l=+l),r=s(c=+c),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),d=t<e?-1:1,m):[o,l,c]},m.clamp=function(e){return arguments.length?(h=!!e,m):h},m.interpolator=function(e){return arguments.length?(u=e,m):u},m.range=p(AN),m.rangeRound=p(MN),m.unknown=function(e){return arguments.length?(i=e,m):i},function(i){return s=i,e=i(o),t=i(l),r=i(c),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),d=t<e?-1:1,m}}function qS(){var e=v_(BS());return e.copy=function(){return zS(e,qS()).exponent(e.exponent())},Iw.apply(e,arguments)}!function(e){fk=function(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,i=e.shortDays,o=e.months,l=e.shortMonths,c=kk(a),d=Sk(a),u=kk(s),h=Sk(s),m=kk(i),p=Sk(i),x=kk(o),f=Sk(o),g=kk(l),y=Sk(l),b={a:function(e){return i[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:Hk,e:Hk,f:Qk,g:cS,G:uS,H:Gk,I:Yk,j:Jk,L:Zk,m:Xk,M:eS,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:DS,s:IS,S:tS,u:rS,U:nS,V:sS,w:iS,W:oS,x:null,X:null,y:lS,Y:dS,Z:hS,"%":MS},v={a:function(e){return i[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:mS,e:mS,f:yS,g:ES,G:TS,H:pS,I:xS,j:fS,L:gS,m:bS,M:vS,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:DS,s:IS,S:jS,u:wS,U:NS,V:kS,w:SS,W:CS,x:null,X:null,y:OS,Y:PS,Z:AS,"%":MS},j={a:function(e,t,r){var n=m.exec(t.slice(r));return n?(e.w=p.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=u.exec(t.slice(r));return n?(e.w=h.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=g.exec(t.slice(r));return n?(e.m=y.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=x.exec(t.slice(r));return n?(e.m=f.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return _(e,t,r,n)},d:$k,e:$k,f:qk,g:Mk,G:Ak,H:Fk,I:Fk,j:Lk,L:Bk,m:Rk,M:zk,p:function(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=d.get(n[0].toLowerCase()),r+n[0].length):-1},q:Ik,Q:Kk,s:Vk,S:Uk,u:Ok,U:Ek,V:Pk,w:Ck,W:Tk,x:function(e,t,n){return _(e,r,t,n)},X:function(e,t,r){return _(e,n,t,r)},y:Mk,Y:Ak,Z:Dk,"%":Wk};function w(e,t){return function(r){var n,a,s,i=[],o=-1,l=0,c=e.length;for(r instanceof Date||(r=new Date(+r));++o<c;)37===e.charCodeAt(o)&&(i.push(e.slice(l,o)),null!=(a=bk[n=e.charAt(++o)])?n=e.charAt(++o):a="e"===n?" ":"0",(s=t[n])&&(n=s(r,a)),i.push(n),l=o+1);return i.push(e.slice(l,o)),i.join("")}}function N(e,t){return function(r){var n,a,s=xk(1900,void 0,1);if(_(s,e,r+="",0)!=r.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(a=(n=pk(xk(s.y,0,1))).getUTCDay(),n=a>4||0===a?Q_.ceil(n):Q_(n),n=z_.offset(n,7*(s.V-1)),s.y=n.getUTCFullYear(),s.m=n.getUTCMonth(),s.d=n.getUTCDate()+(s.w+6)%7):(a=(n=mk(xk(s.y,0,1))).getDay(),n=a>4||0===a?W_.ceil(n):W_(n),n=F_.offset(n,7*(s.V-1)),s.y=n.getFullYear(),s.m=n.getMonth(),s.d=n.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),a="Z"in s?pk(xk(s.y,0,1)).getUTCDay():mk(xk(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(a+5)%7:s.w+7*s.U-(a+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,pk(s)):mk(s)}}function _(e,t,r,n){for(var a,s,i=0,o=t.length,l=r.length;i<o;){if(n>=l)return-1;if(37===(a=t.charCodeAt(i++))){if(a=t.charAt(i++),!(s=j[a in bk?t.charAt(i++):a])||(n=s(e,r,n))<0)return-1}else if(a!=r.charCodeAt(n++))return-1}return n}return b.x=w(r,b),b.X=w(n,b),b.c=w(t,b),v.x=w(r,v),v.X=w(n,v),v.c=w(t,v),{format:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",v);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}(e),gk=fk.format,fk.parse,yk=fk.utcFormat,fk.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const WS=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Lw,scaleDiverging:function e(){var t=s_(BS()(RN));return t.copy=function(){return zS(t,e())},Iw.apply(t,arguments)},scaleDivergingLog:function e(){var t=m_(BS()).domain([.1,1,10]);return t.copy=function(){return zS(t,e()).base(t.base())},Iw.apply(t,arguments)},scaleDivergingPow:qS,scaleDivergingSqrt:function(){return qS.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function e(){var t=f_(BS());return t.copy=function(){return zS(t,e()).constant(t.constant())},Iw.apply(t,arguments)},scaleIdentity:function e(t){var r;function n(e){return null==e||isNaN(e=+e)?r:e}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,DN),n):t.slice()},n.unknown=function(e){return arguments.length?(r=e,n):r},n.copy=function(){return e(t).unknown(r)},t=arguments.length?Array.from(t,DN):[0,1],s_(n)},scaleImplicit:Rw,scaleLinear:function e(){var t=BN();return t.copy=function(){return zN(t,e())},Dw.apply(t,arguments),s_(t)},scaleLog:function e(){const t=m_(UN()).domain([1,10]);return t.copy=()=>zN(t,e()).base(t.base()),Dw.apply(t,arguments),t},scaleOrdinal:$w,scalePoint:function(){return Fw(Lw.apply(null,arguments).paddingInner(1))},scalePow:j_,scaleQuantile:function e(){var t,r=[],n=[],a=[];function s(){var e=0,t=Math.max(1,n.length);for(a=new Array(t-1);++e<t;)a[e-1]=Mw(r,e/t);return i}function i(e){return null==e||isNaN(e=+e)?t:n[gw(a,e)]}return i.invertExtent=function(e){var t=n.indexOf(e);return t<0?[NaN,NaN]:[t>0?a[t-1]:r[0],t<a.length?a[t]:r[r.length-1]]},i.domain=function(e){if(!arguments.length)return r.slice();r=[];for(let t of e)null==t||isNaN(t=+t)||r.push(t);return r.sort(hw),s()},i.range=function(e){return arguments.length?(n=Array.from(e),s()):n.slice()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.quantiles=function(){return a.slice()},i.copy=function(){return e().domain(r).range(n).unknown(t)},Dw.apply(i,arguments)},scaleQuantize:function e(){var t,r=0,n=1,a=1,s=[.5],i=[0,1];function o(e){return null!=e&&e<=e?i[gw(s,e,0,a)]:t}function l(){var e=-1;for(s=new Array(a);++e<a;)s[e]=((e+1)*n-(e-a)*r)/(a+1);return o}return o.domain=function(e){return arguments.length?([r,n]=e,r=+r,n=+n,l()):[r,n]},o.range=function(e){return arguments.length?(a=(i=Array.from(e)).length-1,l()):i.slice()},o.invertExtent=function(e){var t=i.indexOf(e);return t<0?[NaN,NaN]:t<1?[r,s[0]]:t>=a?[s[a-1],n]:[s[t-1],s[t]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return s.slice()},o.copy=function(){return e().domain([r,n]).range(i).unknown(t)},Dw.apply(s_(o),arguments)},scaleRadial:function e(){var t,r=BN(),n=[0,1],a=!1;function s(e){var n=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(r(e));return isNaN(n)?t:a?Math.round(n):n}return s.invert=function(e){return r.invert(w_(e))},s.domain=function(e){return arguments.length?(r.domain(e),s):r.domain()},s.range=function(e){return arguments.length?(r.range((n=Array.from(e,DN)).map(w_)),s):n.slice()},s.rangeRound=function(e){return s.range(e).round(!0)},s.round=function(e){return arguments.length?(a=!!e,s):a},s.clamp=function(e){return arguments.length?(r.clamp(e),s):r.clamp()},s.unknown=function(e){return arguments.length?(t=e,s):t},s.copy=function(){return e(r.domain(),n).round(a).clamp(r.clamp()).unknown(t)},Dw.apply(s,arguments),s_(s)},scaleSequential:function e(){var t=s_(FS()(RN));return t.copy=function(){return zS(t,e())},Iw.apply(t,arguments)},scaleSequentialLog:function e(){var t=m_(FS()).domain([1,10]);return t.copy=function(){return zS(t,e()).base(t.base())},Iw.apply(t,arguments)},scaleSequentialPow:US,scaleSequentialQuantile:function e(){var t=[],r=RN;function n(e){if(null!=e&&!isNaN(e=+e))return r((gw(t,e,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(hw),n},n.interpolator=function(e){return arguments.length?(r=e,n):r},n.range=function(){return t.map((e,n)=>r(n/(t.length-1)))},n.quantiles=function(e){return Array.from({length:e+1},(r,n)=>function(e,t){if((r=(e=Float64Array.from(function*(e){for(let t of e)null!=t&&(t=+t)>=t&&(yield t)}(e))).length)&&!isNaN(t=+t)){if(t<=0||r<2)return Pw(e);if(t>=1)return Ew(e);var r,n=(r-1)*t,a=Math.floor(n),s=Ew(Tw(e,a).subarray(0,a+1));return s+(Pw(e.subarray(a+1))-s)*(n-a)}}(t,n/e))},n.copy=function(){return e(r).domain(t)},Iw.apply(n,arguments)},scaleSequentialSqrt:function(){return US.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function e(){var t=f_(FS());return t.copy=function(){return zS(t,e()).constant(t.constant())},Iw.apply(t,arguments)},scaleSqrt:function(){return j_.apply(null,arguments).exponent(.5)},scaleSymlog:function e(){var t=f_(UN());return t.copy=function(){return zN(t,e()).constant(t.constant())},Dw.apply(t,arguments)},scaleThreshold:function e(){var t,r=[.5],n=[0,1],a=1;function s(e){return null!=e&&e<=e?n[gw(r,e,0,a)]:t}return s.domain=function(e){return arguments.length?(r=Array.from(e),a=Math.min(r.length,n.length-1),s):r.slice()},s.range=function(e){return arguments.length?(n=Array.from(e),a=Math.min(r.length,n.length-1),s):n.slice()},s.invertExtent=function(e){var t=n.indexOf(e);return[r[t-1],r[t]]},s.unknown=function(e){return arguments.length?(t=e,s):t},s.copy=function(){return e().domain(r).range(n).unknown(t)},Dw.apply(s,arguments)},scaleTime:function(){return Dw.apply(LS(uk,hk,ik,ak,q_,F_,$_,I_,D_,gk).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return Dw.apply(LS(ck,dk,ok,sk,Z_,z_,L_,R_,D_,yk).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},tickFormat:a_},Symbol.toStringTag,{value:"Module"}));var KS=e=>e.chartData,VS=Yx([KS],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),HS=(e,t,r,n)=>n?VS(e):KS(e);function GS(e){if(Array.isArray(e)&&2===e.length){var[t,r]=e;if(Wb(t)&&Wb(r))return!0}return!1}function YS(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function JS(e,t){if(t&&"function"!=typeof e&&Array.isArray(e)&&2===e.length){var r,n,[a,s]=e;if(Wb(a))r=a;else if("function"==typeof a)return;if(Wb(s))n=s;else if("function"==typeof s)return;var i=[r,n];if(GS(i))return i}}var ZS,QS=1e9,XS=!0,eC="[DecimalError] ",tC=eC+"Invalid argument: ",rC=eC+"Exponent out of range: ",nC=Math.floor,aC=Math.pow,sC=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,iC=1e7,oC=9007199254740991,lC=nC(1286742750677284.5),cC={};function dC(e,t){var r,n,a,s,i,o,l,c,d=e.constructor,u=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),XS?vC(t,u):t;if(l=e.d,c=t.d,i=e.e,a=t.e,l=l.slice(),s=i-a){for(s<0?(n=l,s=-s,o=c.length):(n=c,a=i,o=l.length),s>(o=(i=Math.ceil(u/7))>o?i+1:o+1)&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for((o=l.length)-(s=c.length)<0&&(s=o,n=c,c=l,l=n),r=0;s;)r=(l[--s]=l[s]+c[s]+r)/iC|0,l[s]%=iC;for(r&&(l.unshift(r),++a),o=l.length;0==l[--o];)l.pop();return t.d=l,t.e=a,XS?vC(t,u):t}function uC(e,t,r){if(e!==~~e||e<t||e>r)throw Error(tC+e)}function hC(e){var t,r,n,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)(r=7-(n=e[t]+"").length)&&(s+=gC(r)),s+=n;(r=7-(n=(i=e[t])+"").length)&&(s+=gC(r))}else if(0===i)return"0";for(;i%10==0;)i/=10;return s+i}cC.absoluteValue=cC.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},cC.comparedTo=cC.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(t=0,r=(n=s.d.length)<(a=e.d.length)?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1},cC.decimalPlaces=cC.dp=function(){var e=this,t=e.d.length-1,r=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},cC.dividedBy=cC.div=function(e){return mC(this,new this.constructor(e))},cC.dividedToIntegerBy=cC.idiv=function(e){var t=this.constructor;return vC(mC(this,new t(e),0,1),t.precision)},cC.equals=cC.eq=function(e){return!this.cmp(e)},cC.exponent=function(){return xC(this)},cC.greaterThan=cC.gt=function(e){return this.cmp(e)>0},cC.greaterThanOrEqualTo=cC.gte=function(e){return this.cmp(e)>=0},cC.isInteger=cC.isint=function(){return this.e>this.d.length-2},cC.isNegative=cC.isneg=function(){return this.s<0},cC.isPositive=cC.ispos=function(){return this.s>0},cC.isZero=function(){return 0===this.s},cC.lessThan=cC.lt=function(e){return this.cmp(e)<0},cC.lessThanOrEqualTo=cC.lte=function(e){return this.cmp(e)<1},cC.logarithm=cC.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(ZS))throw Error(eC+"NaN");if(r.s<1)throw Error(eC+(r.s?"NaN":"-Infinity"));return r.eq(ZS)?new n(0):(XS=!1,t=mC(yC(r,s),yC(e,s),s),XS=!0,vC(t,a))},cC.minus=cC.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?jC(t,e):dC(t,(e.s=-e.s,e))},cC.modulo=cC.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(!(e=new n(e)).s)throw Error(eC+"NaN");return r.s?(XS=!1,t=mC(r,e,0,1).times(e),XS=!0,r.minus(t)):vC(new n(r),a)},cC.naturalExponential=cC.exp=function(){return pC(this)},cC.naturalLogarithm=cC.ln=function(){return yC(this)},cC.negated=cC.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},cC.plus=cC.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?dC(t,e):jC(t,(e.s=-e.s,e))},cC.precision=cC.sd=function(e){var t,r,n,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(tC+e);if(t=xC(a)+1,r=7*(n=a.d.length-1)+1,n=a.d[n]){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},cC.squareRoot=cC.sqrt=function(){var e,t,r,n,a,s,i,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(eC+"NaN")}for(e=xC(o),XS=!1,0==(a=Math.sqrt(+o))||a==1/0?(((t=hC(o.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=nC((e+1)/2)-(e<0||e%2),n=new l(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new l(a.toString()),a=i=(r=l.precision)+3;;)if(n=(s=n).plus(mC(o,s,i+2)).times(.5),hC(s.d).slice(0,i)===(t=hC(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&"4999"==t){if(vC(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if("9999"!=t)break;i+=4}return XS=!0,vC(n,r)},cC.times=cC.mul=function(e){var t,r,n,a,s,i,o,l,c,d=this,u=d.constructor,h=d.d,m=(e=new u(e)).d;if(!d.s||!e.s)return new u(0);for(e.s*=d.s,r=d.e+e.e,(l=h.length)<(c=m.length)&&(s=h,h=m,m=s,i=l,l=c,c=i),s=[],n=i=l+c;n--;)s.push(0);for(n=c;--n>=0;){for(t=0,a=l+n;a>n;)o=s[a]+m[n]*h[a-n-1]+t,s[a--]=o%iC|0,t=o/iC|0;s[a]=(s[a]+t)%iC|0}for(;!s[--i];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,XS?vC(e,u.precision):e},cC.toDecimalPlaces=cC.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(uC(e,0,QS),void 0===t?t=n.rounding:uC(t,0,8),vC(r,e+xC(r)+1,t))},cC.toExponential=function(e,t){var r,n=this,a=n.constructor;return void 0===e?r=wC(n,!0):(uC(e,0,QS),void 0===t?t=a.rounding:uC(t,0,8),r=wC(n=vC(new a(n),e+1,t),!0,e+1)),r},cC.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return void 0===e?wC(a):(uC(e,0,QS),void 0===t?t=s.rounding:uC(t,0,8),r=wC((n=vC(new s(a),e+xC(a)+1,t)).abs(),!1,e+xC(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)},cC.toInteger=cC.toint=function(){var e=this,t=e.constructor;return vC(new t(e),xC(e)+1,t.rounding)},cC.toNumber=function(){return+this},cC.toPower=cC.pow=function(e){var t,r,n,a,s,i,o=this,l=o.constructor,c=+(e=new l(e));if(!e.s)return new l(ZS);if(!(o=new l(o)).s){if(e.s<1)throw Error(eC+"Infinity");return o}if(o.eq(ZS))return o;if(n=l.precision,e.eq(ZS))return vC(o,n);if(i=(t=e.e)>=(r=e.d.length-1),s=o.s,i){if((r=c<0?-c:c)<=oC){for(a=new l(ZS),t=Math.ceil(n/7+4),XS=!1;r%2&&NC((a=a.times(o)).d,t),0!==(r=nC(r/2));)NC((o=o.times(o)).d,t);return XS=!0,e.s<0?new l(ZS).div(a):vC(a,n)}}else if(s<0)throw Error(eC+"NaN");return s=s<0&&1&e.d[Math.max(t,r)]?-1:1,o.s=1,XS=!1,a=e.times(yC(o,n+12)),XS=!0,(a=pC(a)).s=s,a},cC.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return void 0===e?n=wC(a,(r=xC(a))<=s.toExpNeg||r>=s.toExpPos):(uC(e,1,QS),void 0===t?t=s.rounding:uC(t,0,8),n=wC(a=vC(new s(a),e,t),e<=(r=xC(a))||r<=s.toExpNeg,e)),n},cC.toSignificantDigits=cC.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(uC(e,1,QS),void 0===t?t=r.rounding:uC(t,0,8)),vC(new r(this),e,t)},cC.toString=cC.valueOf=cC.val=cC.toJSON=cC[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=xC(e),r=e.constructor;return wC(e,t<=r.toExpNeg||t>=r.toExpPos)};var mC=function(){function e(e,t){var r,n=0,a=e.length;for(e=e.slice();a--;)r=e[a]*t+n,e[a]=r%iC|0,n=r/iC|0;return n&&e.unshift(n),e}function t(e,t,r,n){var a,s;if(r!=n)s=r>n?1:-1;else for(a=s=0;a<r;a++)if(e[a]!=t[a]){s=e[a]>t[a]?1:-1;break}return s}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*iC+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,a,s,i){var o,l,c,d,u,h,m,p,x,f,g,y,b,v,j,w,N,_,k=n.constructor,S=n.s==a.s?1:-1,C=n.d,O=a.d;if(!n.s)return new k(n);if(!a.s)throw Error(eC+"Division by zero");for(l=n.e-a.e,N=O.length,j=C.length,p=(m=new k(S)).d=[],c=0;O[c]==(C[c]||0);)++c;if(O[c]>(C[c]||0)&&--l,(y=null==s?s=k.precision:i?s+(xC(n)-xC(a))+1:s)<0)return new k(0);if(y=y/7+2|0,c=0,1==N)for(d=0,O=O[0],y++;(c<j||d)&&y--;c++)b=d*iC+(C[c]||0),p[c]=b/O|0,d=b%O|0;else{for((d=iC/(O[0]+1)|0)>1&&(O=e(O,d),C=e(C,d),N=O.length,j=C.length),v=N,f=(x=C.slice(0,N)).length;f<N;)x[f++]=0;(_=O.slice()).unshift(0),w=O[0],O[1]>=iC/2&&++w;do{d=0,(o=t(O,x,N,f))<0?(g=x[0],N!=f&&(g=g*iC+(x[1]||0)),(d=g/w|0)>1?(d>=iC&&(d=iC-1),1==(o=t(u=e(O,d),x,h=u.length,f=x.length))&&(d--,r(u,N<h?_:O,h))):(0==d&&(o=d=1),u=O.slice()),(h=u.length)<f&&u.unshift(0),r(x,u,f),-1==o&&(o=t(O,x,N,f=x.length))<1&&(d++,r(x,N<f?_:O,f)),f=x.length):0===o&&(d++,x=[0]),p[c++]=d,o&&x[0]?x[f++]=C[v]||0:(x=[C[v]],f=1)}while((v++<j||void 0!==x[0])&&y--)}return p[0]||p.shift(),m.e=l,vC(m,i?s+xC(m)+1:s)}}();function pC(e,t){var r,n,a,s,i,o=0,l=0,c=e.constructor,d=c.precision;if(xC(e)>16)throw Error(rC+xC(e));if(!e.s)return new c(ZS);for(XS=!1,i=d,s=new c(.03125);e.abs().gte(.1);)e=e.times(s),l+=5;for(i+=Math.log(aC(2,l))/Math.LN10*2+5|0,r=n=a=new c(ZS),c.precision=i;;){if(n=vC(n.times(e),i),r=r.times(++o),hC((s=a.plus(mC(n,r,i))).d).slice(0,i)===hC(a.d).slice(0,i)){for(;l--;)a=vC(a.times(a),i);return c.precision=d,null==t?(XS=!0,vC(a,d)):a}a=s}}function xC(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function fC(e,t,r){if(t>e.LN10.sd())throw XS=!0,r&&(e.precision=r),Error(eC+"LN10 precision limit exceeded");return vC(new e(e.LN10),t)}function gC(e){for(var t="";e--;)t+="0";return t}function yC(e,t){var r,n,a,s,i,o,l,c,d,u=1,h=e,m=h.d,p=h.constructor,x=p.precision;if(h.s<1)throw Error(eC+(h.s?"NaN":"-Infinity"));if(h.eq(ZS))return new p(0);if(null==t?(XS=!1,c=x):c=t,h.eq(10))return null==t&&(XS=!0),fC(p,c);if(c+=10,p.precision=c,n=(r=hC(m)).charAt(0),s=xC(h),!(Math.abs(s)<15e14))return l=fC(p,c+2,x).times(s+""),h=yC(new p(n+"."+r.slice(1)),c-10).plus(l),p.precision=x,null==t?(XS=!0,vC(h,x)):h;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=hC((h=h.times(e)).d)).charAt(0),u++;for(s=xC(h),n>1?(h=new p("0."+r),s++):h=new p(n+"."+r.slice(1)),o=i=h=mC(h.minus(ZS),h.plus(ZS),c),d=vC(h.times(h),c),a=3;;){if(i=vC(i.times(d),c),hC((l=o.plus(mC(i,new p(a),c))).d).slice(0,c)===hC(o.d).slice(0,c))return o=o.times(2),0!==s&&(o=o.plus(fC(p,c+2,x).times(s+""))),o=mC(o,new p(u),c),p.precision=x,null==t?(XS=!0,vC(o,x)):o;o=l,a+=2}}function bC(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(n,a)){if(a-=n,r=r-n-1,e.e=nC(r/7),e.d=[],n=(r+1)%7,r<0&&(n+=7),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=7;n<a;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),XS&&(e.e>lC||e.e<-lC))throw Error(rC+r)}else e.s=0,e.e=0,e.d=[0];return e}function vC(e,t,r){var n,a,s,i,o,l,c,d,u=e.d;for(i=1,s=u[0];s>=10;s/=10)i++;if((n=t-i)<0)n+=7,a=t,c=u[d=0];else{if((d=Math.ceil((n+1)/7))>=(s=u.length))return e;for(c=s=u[d],i=1;s>=10;s/=10)i++;a=(n%=7)-7+i}if(void 0!==r&&(o=c/(s=aC(10,i-a-1))%10|0,l=t<0||void 0!==u[d+1]||c%s,l=r<4?(o||l)&&(0==r||r==(e.s<0?3:2)):o>5||5==o&&(4==r||l||6==r&&(n>0?a>0?c/aC(10,i-a):0:u[d-1])%10&1||r==(e.s<0?8:7))),t<1||!u[0])return l?(s=xC(e),u.length=1,t=t-s-1,u[0]=aC(10,(7-t%7)%7),e.e=nC(-t/7)||0):(u.length=1,u[0]=e.e=e.s=0),e;if(0==n?(u.length=d,s=1,d--):(u.length=d+1,s=aC(10,7-n),u[d]=a>0?(c/aC(10,i-a)%aC(10,a)|0)*s:0),l)for(;;){if(0==d){(u[0]+=s)==iC&&(u[0]=1,++e.e);break}if(u[d]+=s,u[d]!=iC)break;u[d--]=0,s=1}for(n=u.length;0===u[--n];)u.pop();if(XS&&(e.e>lC||e.e<-lC))throw Error(rC+xC(e));return e}function jC(e,t){var r,n,a,s,i,o,l,c,d,u,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),XS?vC(t,m):t;if(l=e.d,u=t.d,n=t.e,c=e.e,l=l.slice(),i=c-n){for((d=i<0)?(r=l,i=-i,o=u.length):(r=u,n=c,o=l.length),i>(a=Math.max(Math.ceil(m/7),o)+2)&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for((d=(a=l.length)<(o=u.length))&&(o=a),a=0;a<o;a++)if(l[a]!=u[a]){d=l[a]<u[a];break}i=0}for(d&&(r=l,l=u,u=r,t.s=-t.s),o=l.length,a=u.length-o;a>0;--a)l[o++]=0;for(a=u.length;a>i;){if(l[--a]<u[a]){for(s=a;s&&0===l[--s];)l[s]=iC-1;--l[s],l[a]+=iC}l[a]-=u[a]}for(;0===l[--o];)l.pop();for(;0===l[0];l.shift())--n;return l[0]?(t.d=l,t.e=n,XS?vC(t,m):t):new h(0)}function wC(e,t,r){var n,a=xC(e),s=hC(e.d),i=s.length;return t?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+gC(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+gC(-a-1)+s,r&&(n=r-i)>0&&(s+=gC(n))):a>=i?(s+=gC(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+gC(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=gC(n))),e.s<0?"-"+s:s}function NC(e,t){if(e.length>t)return e.length=t,!0}function _C(e){if(!e||"object"!=typeof e)throw Error(eC+"Object expected");var t,r,n,a=["precision",1,QS,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(n=e[r=a[t]])){if(!(nC(n)===n&&n>=a[t+1]&&n<=a[t+2]))throw Error(tC+r+": "+n);this[r]=n}if(void 0!==(n=e[r="LN10"])){if(n!=Math.LN10)throw Error(tC+r+": "+n);this[r]=new this(n)}return this}var kC=function e(t){var r,n,a;function s(e){var t=this;if(!(t instanceof s))return new s(e);if(t.constructor=s,e instanceof s)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(tC+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):bC(t,e.toString())}if("string"!=typeof e)throw Error(tC+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!sC.test(e))throw Error(tC+e);bC(t,e)}if(s.prototype=cC,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=e,s.config=s.set=_C,void 0===t&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<a.length;)t.hasOwnProperty(n=a[r++])||(t[n]=this[n]);return s.config(t),s}({precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"});ZS=new kC(1);const SC=kC;var CC=e=>e,OC={},EC=e=>e===OC,PC=e=>function t(){return 0===arguments.length||1===arguments.length&&EC(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},TC=(e,t)=>1===e?t:PC(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(e=>e!==OC).length;return s>=e?t(...n):TC(e-s,PC(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];var s=n.map(e=>EC(e)?r.shift():e);return t(...s,...r)}))}),AC=e=>TC(e.length,e),MC=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},DC=AC((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(e=>t[e]).map(e)),IC=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),RC=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((e,r)=>{var n;return e===(null===(n=t)||void 0===n?void 0:n[r])})?r:(t=a,r=e(...a))}};function $C(e){return 0===e?1:Math.floor(new SC(e).abs().log(10).toNumber())+1}function LC(e,t,r){for(var n=new SC(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}AC((e,t,r)=>{var n=+e;return n+r*(+t-n)}),AC((e,t,r)=>{var n=t-+e;return(r-e)/(n=n||1/0)}),AC((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var FC=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},zC=(e,t,r)=>{if(e.lte(0))return new SC(0);var n=$C(e.toNumber()),a=new SC(10).pow(n),s=e.div(a),i=1!==n?.05:.1,o=new SC(Math.ceil(s.div(i).toNumber())).add(r).mul(i).mul(a);return new SC(t?o.toNumber():Math.ceil(o.toNumber()))},UC=(e,t,r)=>{var n=new SC(1),a=new SC(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new SC(10).pow($C(e)-1),a=new SC(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new SC(Math.floor(e)))}else 0===e?a=new SC(Math.floor((t-1)/2)):r||(a=new SC(Math.floor(e)));var i=Math.floor((t-1)/2);return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return CC;var n=t.reverse(),a=n[0],s=n.slice(1);return function(){return s.reduce((e,t)=>t(e),a(...arguments))}}(DC(e=>a.add(new SC(e-i).mul(n)).toNumber()),MC)(0,t)},BC=function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new SC(0),tickMin:new SC(0),tickMax:new SC(0)};var s,i=zC(new SC(t).sub(e).div(r-1),n,a);s=e<=0&&t>=0?new SC(0):(s=new SC(e).add(t).div(2)).sub(new SC(s).mod(i));var o=Math.ceil(s.sub(e).div(i).toNumber()),l=Math.ceil(new SC(t).sub(s).div(i).toNumber()),c=o+l+1;return c>r?BC(e,t,r,n,a+1):(c<r&&(l=t>0?l+(r-c):l,o=t>0?o:o+(r-c)),{step:i,tickMin:s.sub(new SC(o).mul(i)),tickMax:s.add(new SC(l).mul(i))})};var qC=RC(function(e){var[t,r]=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Math.max(n,2),[i,o]=FC([t,r]);if(i===-1/0||o===1/0){var l=o===1/0?[i,...MC(0,n-1).map(()=>1/0)]:[...MC(0,n-1).map(()=>-1/0),o];return t>r?IC(l):l}if(i===o)return UC(i,n,a);var{step:c,tickMin:d,tickMax:u}=BC(i,o,s,a,0),h=LC(d,u.add(new SC(.1).mul(c)),c);return t>r?IC(h):h}),WC=RC(function(e,t){var[r,n]=e,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[s,i]=FC([r,n]);if(s===-1/0||i===1/0)return[r,n];if(s===i)return[s];var o=Math.max(t,2),l=zC(new SC(i).sub(s).div(o-1),a,0),c=[...LC(new SC(s),new SC(i),l),i];return!1===a&&(c=c.map(e=>Math.round(e))),r>n?IC(c):c}),KC=e=>e.rootProps.maxBarSize,VC=e=>e.rootProps.barCategoryGap,HC=e=>e.rootProps.stackOffset,GC=e=>e.options.chartName,YC=e=>e.rootProps.syncId,JC=e=>e.rootProps.syncMethod,ZC=e=>e.options.eventEmitter,QC=0,XC="auto",eO=!0,tO=!1,rO=!0,nO=0,aO="auto",sO=!0,iO=5,oO=(e,t)=>{if(e&&t)return null!=e&&e.reversed?[t[1],t[0]]:t},lO={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:QC,includeHidden:!1,name:void 0,reversed:!1,scale:XC,tick:eO,tickCount:void 0,ticks:void 0,type:"category",unit:void 0},cO={allowDataOverflow:tO,allowDecimals:!1,allowDuplicatedCategory:rO,dataKey:void 0,domain:void 0,id:nO,includeHidden:!1,name:void 0,reversed:!1,scale:aO,tick:sO,tickCount:iO,ticks:void 0,type:"number",unit:void 0},dO={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,dataKey:void 0,domain:void 0,id:QC,includeHidden:!1,name:void 0,reversed:!1,scale:XC,tick:eO,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},uO={allowDataOverflow:tO,allowDecimals:!1,allowDuplicatedCategory:rO,dataKey:void 0,domain:void 0,id:nO,includeHidden:!1,name:void 0,reversed:!1,scale:aO,tick:sO,tickCount:iO,ticks:void 0,type:"category",unit:void 0},hO=(e,t)=>null!=e.polarAxis.angleAxis[t]?e.polarAxis.angleAxis[t]:"radial"===e.layout.layoutType?dO:lO,mO=(e,t)=>null!=e.polarAxis.radiusAxis[t]?e.polarAxis.radiusAxis[t]:"radial"===e.layout.layoutType?uO:cO,pO=e=>e.polarOptions,xO=Yx([ob,lb,Nb],$y),fO=Yx([pO,xO],(e,t)=>{if(null!=e)return Cm(e.innerRadius,t,0)}),gO=Yx([pO,xO],(e,t)=>{if(null!=e)return Cm(e.outerRadius,t,.8*t)}),yO=Yx([pO],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]});Yx([hO,yO],oO);var bO=Yx([xO,fO,gO],(e,t,r)=>{if(null!=e&&null!=t&&null!=r)return[t,r]});Yx([mO,bO],oO);var vO=Yx([iv,pO,fO,gO,ob,lb],(e,t,r,n,a,s)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=r&&null!=n){var{cx:i,cy:o,startAngle:l,endAngle:c}=t;return{cx:Cm(i,a,a/2),cy:Cm(o,s,s/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:c,clockWise:!1}}}),jO=(e,t)=>t,wO=(e,t,r)=>r;function NO(e){return null==e?void 0:e.id}var _O=e=>{var t=iv(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},kO=e=>e.tooltip.settings.axisId,SO=e=>{var t=_O(e),r=kO(e);return KO(e,t,r)},CO=Yx([SO],e=>null==e?void 0:e.dataKey);function OO(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:s}=r,i=new Map;return e.forEach(e=>{var t,r=null!==(t=e.data)&&void 0!==t?t:n;if(null!=r&&0!==r.length){var o=NO(e);r.forEach((t,r)=>{var n,l=null==s||a?r:String(Ky(t,s,null)),c=Ky(t,e.dataKey,0);n=i.has(l)?i.get(l):{},Object.assign(n,{[o]:c}),i.set(l,n)})}}),Array.from(i.values())}function EO(e){return null!=e.stackId&&null!=e.dataKey}var PO=(e,t)=>e===t||null!=e&&null!=t&&(e[0]===t[0]&&e[1]===t[1]);function TO(e,t){return!(!Array.isArray(e)||!Array.isArray(t)||0!==e.length||0!==t.length)||e===t}function AO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function MO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?AO(Object(r),!0).forEach(function(t){DO(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function DO(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var IO=[0,"auto"],RO={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},$O=(e,t)=>e.cartesianAxis.xAxis[t],LO=(e,t)=>{var r=$O(e,t);return r??RO},FO={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:IO,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},zO=(e,t)=>e.cartesianAxis.yAxis[t],UO=(e,t)=>{var r=zO(e,t);return r??FO},BO={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},qO=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??BO},WO=(e,t,r)=>{switch(t){case"xAxis":return LO(e,r);case"yAxis":return UO(e,r);case"zAxis":return qO(e,r);case"angleAxis":return hO(e,r);case"radiusAxis":return mO(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},KO=(e,t,r)=>{switch(t){case"xAxis":return LO(e,r);case"yAxis":return UO(e,r);case"angleAxis":return hO(e,r);case"radiusAxis":return mO(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},VO=e=>e.graphicalItems.cartesianItems.some(e=>"bar"===e.type)||e.graphicalItems.polarItems.some(e=>"radialBar"===e.type);function HO(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var GO=e=>e.graphicalItems.cartesianItems,YO=Yx([jO,wO],HO),JO=(e,t,r)=>e.filter(r).filter(e=>!0===(null==t?void 0:t.includeHidden)||!e.hide),ZO=Yx([GO,WO,YO],JO,{memoizeOptions:{resultEqualityCheck:TO}}),QO=Yx([ZO],e=>e.filter(e=>"area"===e.type||"bar"===e.type).filter(EO)),XO=e=>e.filter(e=>!("stackId"in e)||void 0===e.stackId),eE=Yx([ZO],XO),tE=e=>e.map(e=>e.data).filter(Boolean).flat(1),rE=Yx([ZO],tE,{memoizeOptions:{resultEqualityCheck:TO}}),nE=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},aE=Yx([rE,HS],nE),sE=(e,t,r)=>null!=(null==t?void 0:t.dataKey)?e.map(e=>({value:Ky(e,t.dataKey)})):r.length>0?r.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:Ky(e,t)}))):e.map(e=>({value:e})),iE=Yx([aE,WO,ZO],sE);function oE(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function lE(e){if(_m(e)||e instanceof Date){var t=Number(e);if(Wb(t))return t}}function cE(e){if(Array.isArray(e)){var t=[lE(e[0]),lE(e[1])];return GS(t)?t:void 0}var r=lE(e);if(null!=r)return[r,r]}function dE(e){return e.map(lE).filter(cj)}var uE=Yx([QO,HS,SO],OO),hE=(e,t,r)=>{var n=t.reduce((e,t)=>(null==t.stackId||(null==e[t.stackId]&&(e[t.stackId]=[]),e[t.stackId].push(t)),e),{});return Object.fromEntries(Object.entries(n).map(t=>{var[n,a]=t,s=a.map(NO);return[n,{stackedData:Zy(e,s,r),graphicalItems:a}]}))},mE=Yx([uE,QO,HC],hE),pE=(e,t,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=t;if(null==n&&"zAxis"!==r){var i=tb(e,a,s);if(null==i||0!==i[0]||0!==i[1])return i}},xE=Yx([WO],e=>e.allowDataOverflow),fE=e=>{var t;if(null==e||!("domain"in e))return IO;if(null!=e.domain)return e.domain;if(null!=e.ticks){if("number"===e.type){var r=dE(e.ticks);return[Math.min(...r),Math.max(...r)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null==e?void 0:e.domain)&&void 0!==t?t:IO},gE=Yx([WO],fE),yE=Yx([gE,xE],JS),bE=Yx([mE,KS,jO,yE],pE,{memoizeOptions:{resultEqualityCheck:PO}}),vE=e=>e.errorBars,jE=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.filter(Boolean);if(0!==n.length){var a=n.flat();return[Math.min(...a),Math.max(...a)]}},wE=(e,t,r,n,a)=>{var s,i;if(r.length>0&&e.forEach(e=>{r.forEach(r=>{var o,l,c=null===(o=n[r.id])||void 0===o?void 0:o.filter(e=>oE(a,e)),d=Ky(e,null!==(l=t.dataKey)&&void 0!==l?l:r.dataKey),u=function(e,t,r){return!r||"number"!=typeof t||jm(t)?[]:r.length?dE(r.flatMap(r=>{var n,a,s=Ky(e,r.dataKey);if(Array.isArray(s)?[n,a]=s:n=a=s,Wb(n)&&Wb(a))return[t-n,t+a]})):[]}(e,d,c);if(u.length>=2){var h=Math.min(...u),m=Math.max(...u);(null==s||h<s)&&(s=h),(null==i||m>i)&&(i=m)}var p=cE(d);null!=p&&(s=null==s?p[0]:Math.min(s,p[0]),i=null==i?p[1]:Math.max(i,p[1]))})}),null!=(null==t?void 0:t.dataKey)&&e.forEach(e=>{var r=cE(Ky(e,t.dataKey));null!=r&&(s=null==s?r[0]:Math.min(s,r[0]),i=null==i?r[1]:Math.max(i,r[1]))}),Wb(s)&&Wb(i))return[s,i]},NE=Yx([aE,WO,eE,vE,jO],wE,{memoizeOptions:{resultEqualityCheck:PO}});function _E(e){var{value:t}=e;if(_m(t)||t instanceof Date)return t}var kE=e=>e.referenceElements.dots,SE=(e,t,r)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===r:e.yAxisId===r),CE=Yx([kE,jO,wO],SE),OE=e=>e.referenceElements.areas,EE=Yx([OE,jO,wO],SE),PE=e=>e.referenceElements.lines,TE=Yx([PE,jO,wO],SE),AE=(e,t)=>{var r=dE(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},ME=Yx(CE,jO,AE),DE=(e,t)=>{var r=dE(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},IE=Yx([EE,jO],DE),RE=(e,t)=>{var r=dE(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},$E=Yx(TE,jO,RE),LE=Yx(ME,$E,IE,(e,t,r)=>jE(e,r,t)),FE=(e,t,r,n,a,s,i,o)=>null!=r?r:function(e,t,r){if(r||null!=t){if("function"==typeof e&&null!=t)try{var n=e(t,r);if(GS(n))return YS(n,t,r)}catch(m){}if(Array.isArray(e)&&2===e.length){var a,s,[i,o]=e;if("auto"===i)null!=t&&(a=Math.min(...t));else if(Nm(i))a=i;else if("function"==typeof i)try{null!=t&&(a=i(null==t?void 0:t[0]))}catch(p){}else if("string"==typeof i&&rb.test(i)){var l=rb.exec(i);if(null==l||null==t)a=void 0;else{var c=+l[1];a=t[0]-c}}else a=null==t?void 0:t[0];if("auto"===o)null!=t&&(s=Math.max(...t));else if(Nm(o))s=o;else if("function"==typeof o)try{null!=t&&(s=o(null==t?void 0:t[1]))}catch(x){}else if("string"==typeof o&&nb.test(o)){var d=nb.exec(o);if(null==d||null==t)s=void 0;else{var u=+d[1];s=t[1]+u}}else s=null==t?void 0:t[1];var h=[a,s];if(GS(h))return null==t?h:YS(h,t,r)}}}(t,"vertical"===i&&"xAxis"===o||"horizontal"===i&&"yAxis"===o?jE(n,s,a):jE(s,a),e.allowDataOverflow),zE=Yx([WO,gE,yE,bE,NE,LE,iv,jO],FE,{memoizeOptions:{resultEqualityCheck:PO}}),UE=[0,1],BE=(e,t,r,n,a,s,i)=>{if(null!=e&&null!=r&&0!==r.length||void 0!==i){var{dataKey:o,type:l}=e,c=Vy(t,s);return c&&null==o?uw(0,r.length):"category"===l?((e,t,r)=>{var n=e.map(_E).filter(e=>null!=e);return r&&(null==t.dataKey||t.allowDuplicatedCategory&&Om(n))?uw(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))})(n,e,c):"expand"===a?UE:i}},qE=Yx([WO,iv,aE,iE,HC,jO,zE],BE),WE=(e,t,r,n,a)=>{if(null!=e){var{scale:s,type:i}=e;if("auto"===s)return"radial"===t&&"radiusAxis"===a?"band":"radial"===t&&"angleAxis"===a?"linear":"category"===i&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":"category"===i?"band":"linear";if("string"==typeof s){var o="scale".concat(Am(s));return o in WS?o:"point"}}},KE=Yx([WO,iv,VO,GC,jO],WE);function VE(e,t,r,n){if(null!=r&&null!=n){if("function"==typeof e.scale)return e.scale.copy().domain(r).range(n);var a=function(e){if(null!=e){if(e in WS)return WS[e]();var t="scale".concat(Am(e));return t in WS?WS[t]():void 0}}(t);if(null!=a){var s=a.domain(r).range(n);return(e=>{var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-Yy,s=Math.max(n[0],n[1])+Yy,i=e(t[0]),o=e(t[r-1]);(i<a||i>s||o<a||o>s)&&e.domain([t[0],t[r-1]])}})(s),s}}}var HE=(e,t,r)=>{var n=fE(t);if("auto"===r||"linear"===r)return null!=t&&t.tickCount&&Array.isArray(n)&&("auto"===n[0]||"auto"===n[1])&&GS(e)?qC(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&GS(e)?WC(e,t.tickCount,t.allowDecimals):void 0},GE=Yx([qE,KO,KE],HE),YE=(e,t,r,n)=>{if("angleAxis"!==n&&"number"===(null==e?void 0:e.type)&&GS(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],i=t[1],o=r[r.length-1];return[Math.min(a,s),Math.max(i,o)]}return t},JE=Yx([WO,qE,GE,jO],YE),ZE=Yx(iE,WO,(e,t)=>{if(t&&"number"===t.type){var r=1/0,n=Array.from(dE(e.map(e=>e.value))).sort((e,t)=>e-t);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(0===a)return 1/0;for(var s=0;s<n.length-1;s++){var i=n[s+1]-n[s];r=Math.min(r,i)}return r/a}}),QE=Yx(ZE,iv,VC,Nb,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Wb(e))return 0;var s="vertical"===t?n.height:n.width;if("gap"===a)return e*s/2;if("no-gap"===a){var i=Cm(r,e*s),o=e*s/2;return o-i-(o-i)/s*i}return 0}),XE=Yx(LO,(e,t)=>{var r=LO(e,t);return null==r||"string"!=typeof r.padding?0:QE(e,"xAxis",t,r.padding)},(e,t)=>{var r,n;if(null==e)return{left:0,right:0};var{padding:a}=e;return"string"==typeof a?{left:t,right:t}:{left:(null!==(r=a.left)&&void 0!==r?r:0)+t,right:(null!==(n=a.right)&&void 0!==n?n:0)+t}}),eP=Yx(UO,(e,t)=>{var r=UO(e,t);return null==r||"string"!=typeof r.padding?0:QE(e,"yAxis",t,r.padding)},(e,t)=>{var r,n;if(null==e)return{top:0,bottom:0};var{padding:a}=e;return"string"==typeof a?{top:t,bottom:t}:{top:(null!==(r=a.top)&&void 0!==r?r:0)+t,bottom:(null!==(n=a.bottom)&&void 0!==n?n:0)+t}}),tP=Yx([Nb,XE,Eb,Ob,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),rP=Yx([Nb,iv,eP,Eb,Ob,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:"horizontal"===t?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),nP=(e,t,r,n)=>{var a;switch(t){case"xAxis":return tP(e,r,n);case"yAxis":return rP(e,r,n);case"zAxis":return null===(a=qO(e,r))||void 0===a?void 0:a.range;case"angleAxis":return yO(e);case"radiusAxis":return bO(e,r);default:return}},aP=Yx([WO,nP],oO),sP=Yx([WO,KE,JE,aP],VE);function iP(e,t){return e.id<t.id?-1:e.id>t.id?1:0}Yx([ZO,vE,jO],(e,t,r)=>e.flatMap(e=>t[e.id]).filter(Boolean).filter(e=>oE(r,e)));var oP=(e,t)=>t,lP=(e,t,r)=>r,cP=Yx(ub,oP,lP,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(iP)),dP=Yx(hb,oP,lP,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(iP)),uP=(e,t)=>({width:e.width,height:t.height}),hP=Yx(Nb,LO,uP),mP=Yx(lb,Nb,cP,oP,lP,(e,t,r,n,a)=>{var s,i={};return r.forEach(r=>{var o=uP(t,r);null==s&&(s=((e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}})(t,n,e));var l="top"===n&&!a||"bottom"===n&&a;i[r.id]=s-Number(l)*o.height,s+=(l?-1:1)*o.height}),i}),pP=Yx(ob,Nb,dP,oP,lP,(e,t,r,n,a)=>{var s,i={};return r.forEach(r=>{var o=((e,t)=>({width:"number"==typeof t.width?t.width:60,height:e.height}))(t,r);null==s&&(s=((e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}})(t,n,e));var l="left"===n&&!a||"right"===n&&a;i[r.id]=s-Number(l)*o.width,s+=(l?-1:1)*o.width}),i}),xP=Yx([Nb,LO,(e,t)=>{var r=LO(e,t);if(null!=r)return mP(e,r.orientation,r.mirror)},(e,t)=>t],(e,t,r,n)=>{if(null!=t){var a=null==r?void 0:r[n];return null==a?{x:e.left,y:0}:{x:e.left,y:a}}}),fP=Yx([Nb,UO,(e,t)=>{var r=UO(e,t);if(null!=r)return pP(e,r.orientation,r.mirror)},(e,t)=>t],(e,t,r,n)=>{if(null!=t){var a=null==r?void 0:r[n];return null==a?{x:0,y:e.top}:{x:a,y:e.top}}}),gP=Yx(Nb,UO,(e,t)=>({width:"number"==typeof t.width?t.width:60,height:e.height})),yP=(e,t,r)=>{switch(t){case"xAxis":return hP(e,r).width;case"yAxis":return gP(e,r).height;default:return}},bP=(e,t,r,n)=>{if(null!=r){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,o=Vy(e,n),l=t.map(e=>e.value);return i&&o&&"category"===s&&a&&Om(l)?l:void 0}},vP=Yx([iv,iE,WO,jO],bP),jP=(e,t,r,n)=>{if(null!=r&&null!=r.dataKey){var{type:a,scale:s}=r;return!Vy(e,n)||"number"!==a&&"auto"===s?void 0:t.map(e=>e.value)}},wP=Yx([iv,iE,KO,jO],jP),NP=Yx([iv,(e,t,r)=>{switch(t){case"xAxis":return LO(e,r);case"yAxis":return UO(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},KE,sP,vP,wP,nP,GE,jO],(e,t,r,n,a,s,i,o,l)=>{if(null==t)return null;var c=Vy(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:s,duplicateDomain:a,isCategorical:c,niceTicks:o,range:i,realScaleType:r,scale:n}}),_P=Yx([iv,KO,KE,sP,GE,nP,vP,wP,jO],(e,t,r,n,a,s,i,o,l)=>{if(null!=t&&null!=n){var c=Vy(e,l),{type:d,ticks:u,tickCount:h}=t,m="scaleBand"===r&&"function"==typeof n.bandwidth?n.bandwidth()/2:2,p="category"===d&&n.bandwidth?n.bandwidth()/m:0;p="angleAxis"===l&&null!=s&&s.length>=2?2*vm(s[0]-s[1])*p:p;var x=u||a;return x?x.map((e,t)=>{var r=i?i.indexOf(e):e;return{index:t,coordinate:n(r)+p,value:e,offset:p}}).filter(e=>!jm(e.coordinate)):c&&o?o.map((e,t)=>({coordinate:n(e)+p,value:e,index:t,offset:p})):n.ticks?n.ticks(h).map(e=>({coordinate:n(e)+p,value:e,offset:p})):n.domain().map((e,t)=>({coordinate:n(e)+p,value:i?i[e]:e,index:t,offset:p}))}}),kP=Yx([iv,KO,sP,nP,vP,wP,jO],(e,t,r,n,a,s,i)=>{if(null!=t&&null!=r&&null!=n&&n[0]!==n[1]){var o=Vy(e,i),{tickCount:l}=t,c=0;return c="angleAxis"===i&&(null==n?void 0:n.length)>=2?2*vm(n[0]-n[1])*c:c,o&&s?s.map((e,t)=>({coordinate:r(e)+c,value:e,index:t,offset:c})):r.ticks?r.ticks(l).map(e=>({coordinate:r(e)+c,value:e,offset:c})):r.domain().map((e,t)=>({coordinate:r(e)+c,value:a?a[e]:e,index:t,offset:c}))}}),SP=Yx(WO,sP,(e,t)=>{if(null!=e&&null!=t)return MO(MO({},e),{},{scale:t})}),CP=Yx([WO,KE,qE,aP],VE);Yx((e,t,r)=>qO(e,r),CP,(e,t)=>{if(null!=e&&null!=t)return MO(MO({},e),{},{scale:t})});var OP=Yx([iv,ub,hb],(e,t,r)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),EP=e=>e.options.defaultTooltipEventType,PP=e=>e.options.validateTooltipEventTypes;function TP(e,t,r){if(null==e)return t;var n=e?"axis":"item";return null==r?t:r.includes(n)?n:t}function AP(e,t){return TP(t,EP(e),PP(e))}var MP=(e,t)=>{var r,n=Number(t);if(!jm(n)&&null!=t)return n>=0?null==e||null===(r=e[n])||void 0===r?void 0:r.value:void 0},DP={active:!1,index:null,dataKey:void 0,coordinate:void 0},IP=Wg({name:"tooltip",initialState:{itemInteraction:{click:DP,hover:DP},axisInteraction:{click:DP,hover:DP},keyboardInteraction:DP,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Dg()},removeTooltipEntrySettings:{reducer(e,t){var r=vg(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Dg()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:RP,removeTooltipEntrySettings:$P,setTooltipSettingsState:LP,setActiveMouseOverItemIndex:FP,mouseLeaveItem:zP,mouseLeaveChart:UP,setActiveClickItemIndex:BP,setMouseOverAxisIndex:qP,setMouseClickAxisIndex:WP,setSyncInteraction:KP,setKeyboardInteraction:VP}=IP.actions,HP=IP.reducer;function GP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function YP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?GP(Object(r),!0).forEach(function(t){JP(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GP(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function JP(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ZP=(e,t,r,n)=>{if(null==t)return DP;var a=function(e,t,r){return"axis"===t?"click"===r?e.axisInteraction.click:e.axisInteraction.hover:"click"===r?e.itemInteraction.click:e.itemInteraction.hover}(e,t,r);if(null==a)return DP;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var s=!0===e.settings.active;if(null!=a.index){if(s)return YP(YP({},a),{},{active:!0})}else if(null!=n)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return YP(YP({},DP),{},{coordinate:a.coordinate})},QP=(e,t)=>{var r=null==e?void 0:e.index;if(null==r)return null;var n=Number(r);if(!Wb(n))return r;var a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(0,Math.min(n,a)))},XP=(e,t,r,n,a,s,i,o)=>{if(null!=s&&null!=o){var l=i[0],c=null==l?void 0:o(l.positions,s);if(null!=c)return c;var d=null==a?void 0:a[Number(s)];if(d)return"horizontal"===r?{x:d.coordinate,y:(n.top+t)/2}:{x:(n.left+e)/2,y:d.coordinate}}},eT=(e,t,r,n)=>{return"axis"===t?e.tooltipItemPayloads:0===e.tooltipItemPayloads.length?[]:null==(a="hover"===r?e.itemInteraction.hover.dataKey:e.itemInteraction.click.dataKey)&&null!=n?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.dataKey)===a});var a},tT=e=>e.options.tooltipPayloadSearcher,rT=e=>e.tooltip;function nT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function aT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nT(Object(r),!0).forEach(function(t){sT(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nT(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function sT(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var iT=(e,t,r,n,a,s,i)=>{if(null!=t&&null!=s){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:d}=r;return e.reduce((e,r)=>{var u,h,m,{dataDefinedOnItem:p,settings:x}=r,f=function(e,t){return null!=e?e:t}(p,o),g=Array.isArray(f)?Uy(f,c,d):f,y=null!==(u=null==x?void 0:x.dataKey)&&void 0!==u?u:n,b=null==x?void 0:x.nameKey;(h=n&&Array.isArray(g)&&!Array.isArray(g[0])&&"axis"===i?Pm(g,n,a):s(g,t,l,b),Array.isArray(h))?h.forEach(t=>{var r=aT(aT({},x),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(sb({tooltipEntrySettings:r,dataKey:t.dataKey,payload:t.payload,value:Ky(t.payload,t.dataKey),name:t.name}))}):e.push(sb({tooltipEntrySettings:x,dataKey:y,payload:h,value:Ky(h,y),name:null!==(m=Ky(h,b))&&void 0!==m?m:null==x?void 0:x.name}));return e},[])}},oT=Yx([SO,iv,VO,GC,_O],WE),lT=Yx([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),cT=Yx([_O,kO],HO),dT=Yx([lT,SO,cT],JO,{memoizeOptions:{resultEqualityCheck:TO}}),uT=Yx([dT],e=>e.filter(EO)),hT=Yx([dT],tE,{memoizeOptions:{resultEqualityCheck:TO}}),mT=Yx([hT,KS],nE),pT=Yx([uT,KS,SO],OO),xT=Yx([mT,SO,dT],sE),fT=Yx([SO],fE),gT=Yx([SO],e=>e.allowDataOverflow),yT=Yx([fT,gT],JS),bT=Yx([dT],e=>e.filter(EO)),vT=Yx([pT,bT,HC],hE),jT=Yx([vT,KS,_O,yT],pE),wT=Yx([dT],XO),NT=Yx([mT,SO,wT,vE,_O],wE,{memoizeOptions:{resultEqualityCheck:PO}}),_T=Yx([kE,_O,kO],SE),kT=Yx([_T,_O],AE),ST=Yx([OE,_O,kO],SE),CT=Yx([ST,_O],DE),OT=Yx([PE,_O,kO],SE),ET=Yx([OT,_O],RE),PT=Yx([kT,ET,CT],jE),TT=Yx([SO,fT,yT,jT,NT,PT,iv,_O],FE),AT=Yx([SO,iv,mT,xT,HC,_O,TT],BE),MT=Yx([AT,SO,oT],HE),DT=Yx([SO,AT,MT,_O],YE),IT=e=>{var t=_O(e),r=kO(e);return nP(e,t,r,!1)},RT=Yx([SO,IT],oO),$T=Yx([SO,oT,DT,RT],VE),LT=Yx([iv,xT,SO,_O],bP),FT=Yx([iv,xT,SO,_O],jP),zT=Yx([iv,SO,oT,$T,IT,LT,FT,_O],(e,t,r,n,a,s,i,o)=>{if(t){var{type:l}=t,c=Vy(e,o);if(n){var d="scaleBand"===r&&n.bandwidth?n.bandwidth()/2:2,u="category"===l&&n.bandwidth?n.bandwidth()/d:0;return u="angleAxis"===o&&null!=a&&(null==a?void 0:a.length)>=2?2*vm(a[0]-a[1])*u:u,c&&i?i.map((e,t)=>({coordinate:n(e)+u,value:e,index:t,offset:u})):n.domain().map((e,t)=>({coordinate:n(e)+u,value:s?s[e]:e,index:t,offset:u}))}}}),UT=Yx([EP,PP,e=>e.tooltip.settings],(e,t,r)=>TP(r.shared,e,t)),BT=e=>e.tooltip.settings.trigger,qT=e=>e.tooltip.settings.defaultIndex,WT=Yx([rT,UT,BT,qT],ZP),KT=Yx([WT,mT],QP),VT=Yx([zT,KT],MP),HT=Yx([WT],e=>{if(e)return e.dataKey}),GT=Yx([rT,UT,BT,qT],eT),YT=Yx([ob,lb,iv,Nb,zT,qT,GT,tT],XP),JT=Yx([WT,YT],(e,t)=>null!=e&&e.coordinate?e.coordinate:t),ZT=Yx([WT],e=>e.active),QT=Yx([GT,KT,KS,CO,VT,tT,UT],iT),XT=Yx([QT],e=>{if(null!=e){var t=e.map(e=>e.payload).filter(e=>null!=e);return Array.from(new Set(t))}});function eA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eA(Object(r),!0).forEach(function(t){rA(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eA(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function rA(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var nA=()=>{var e=Ux(SO),t=Ux(zT),r=Ux($T);return ab(tA(tA({},e),{},{scale:r}),t)},aA=()=>Ux(GC),sA=(e,t)=>t,iA=(e,t,r)=>r,oA=(e,t,r,n)=>n,lA=Yx(zT,e=>vf(e,e=>e.coordinate)),cA=Yx([rT,sA,iA,oA],ZP),dA=Yx([cA,mT],QP),uA=Yx([rT,sA,iA,oA],eT),hA=Yx([ob,lb,iv,Nb,zT,oA,uA,tT],XP),mA=Yx([cA,hA],(e,t)=>{var r;return null!==(r=e.coordinate)&&void 0!==r?r:t}),pA=Yx(zT,dA,MP),xA=Yx([uA,dA,KS,CO,pA,tT,sA],iT),fA=Yx([cA],e=>({isActive:e.active,activeIndex:e.index}));function gA(){return gA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gA.apply(null,arguments)}function yA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yA(Object(r),!0).forEach(function(t){vA(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yA(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function vA(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jA(e){var t,r,{coordinate:n,payload:a,index:s,offset:i,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:d,chartName:h}=e,m=n,p=a,x=s;if(!c||!m||"ScatterChart"!==h&&"axis"!==d)return null;if("ScatterChart"===h)t=m,r=aj;else if("BarChart"===h)t=function(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-a:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-a,width:"horizontal"===e?n:r.width-1,height:"horizontal"===e?r.height-1:n}}(l,m,i,o),r=Vj;else if("radial"===l){var{cx:f,cy:g,radius:y,startAngle:b,endAngle:v}=Hj(m);t={cx:f,cy:g,startAngle:b,endAngle:v,innerRadius:y,outerRadius:y},r=Qj}else t={points:Xj(l,m,i)},r=Qv;var j="object"==typeof c&&"className"in c?c.className:void 0,w=bA(bA(bA(bA({stroke:"#ccc",pointerEvents:"none"},i),t),Lu(c)),{},{payload:p,payloadIndex:x,className:Tu("recharts-tooltip-cursor",j)});return u.isValidElement(c)?u.cloneElement(c,w):u.createElement(r,w)}function wA(e){var t=nA(),r=nv(),n=ov(),a=aA();return u.createElement(jA,gA({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var NA,_A=u.createContext(null),kA={exports:{}};var SA=(NA||(NA=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new a(n,s||e,i),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function i(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,a=[];if(0===this._eventsCount)return a;for(n in e=this._events)t.call(e,n)&&a.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,s=n.length,i=new Array(s);a<s;a++)i[a]=n[a].fn;return i},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,a,s,i){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,a),!0;case 5:return d.fn.call(d.context,t,n,a,s),!0;case 6:return d.fn.call(d.context,t,n,a,s,i),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var h,m=d.length;for(c=0;c<m;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,n);break;case 4:d[c].fn.call(d[c].context,t,n,a);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,a){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return i(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||a&&!o.once||n&&o.context!==n||i(this,s);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||a&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:i(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&i(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(kA)),kA.exports);var CA=new(n(SA)),OA="recharts.syncEvent.tooltip",EA="recharts.syncEvent.brush";function PA(e,t){if(t){var r=Number.parseInt(t,10);if(!jm(r))return null==e?void 0:e[r]}}var TA=Wg({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),AA=TA.reducer,{createEventEmitter:MA}=TA.actions;function DA(e){return e.tooltip.syncInteraction}var IA=Wg({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;null!=r&&(e.dataStartIndex=r),null!=n&&(e.dataEndIndex=n)}}}),{setChartData:RA,setDataStartEndIndexes:$A,setComputedData:LA}=IA.actions,FA=IA.reducer,zA=["x","y"];function UA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function BA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?UA(Object(r),!0).forEach(function(t){qA(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UA(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function qA(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var WA=()=>{};function KA(){var e=Ux(YC),t=Ux(ZC),r=$x(),n=Ux(JC),a=Ux(zT),s=ov(),i=tv(),o=Ux(e=>e.rootProps.className);u.useEffect(()=>{if(null==e)return WA;var o=(o,l,c)=>{var d;if(t!==c&&e===o)if("index"!==n){if(null!=a){var u;if("function"==typeof n){var h={activeTooltipIndex:null==l.payload.index?void 0:Number(l.payload.index),isTooltipActive:l.payload.active,activeIndex:null==l.payload.index?void 0:Number(l.payload.index),activeLabel:l.payload.label,activeDataKey:l.payload.dataKey,activeCoordinate:l.payload.coordinate},m=n(a,h);u=a[m]}else"value"===n&&(u=a.find(e=>String(e.value)===l.payload.label));var{coordinate:p}=l.payload;if(null!=u&&!1!==l.payload.active&&null!=p&&null!=i){var{x,y:f}=p,g=Math.min(x,i.x+i.width),y=Math.min(f,i.y+i.height),b={x:"horizontal"===s?u.coordinate:g,y:"horizontal"===s?y:u.coordinate},v=KP({active:l.payload.active,coordinate:b,dataKey:l.payload.dataKey,index:String(u.index),label:l.payload.label,sourceViewBox:l.payload.sourceViewBox});r(v)}else r(KP({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}))}}else if(i&&null!=l&&null!==(d=l.payload)&&void 0!==d&&d.coordinate&&l.payload.sourceViewBox){var j=l.payload.coordinate,{x:w,y:N}=j,_=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(j,zA),{x:k,y:S,width:C,height:O}=l.payload.sourceViewBox,E=BA(BA({},_),{},{x:i.x+(C?(w-k)/C:0)*i.width,y:i.y+(O?(N-S)/O:0)*i.height});r(BA(BA({},l),{},{payload:BA(BA({},l.payload),{},{coordinate:E})}))}else r(l)};return CA.on(OA,o),()=>{CA.off(OA,o)}},[o,r,t,e,n,a,s,i])}function VA(){var e=$x();u.useEffect(()=>{e(MA())},[e]),KA(),function(){var e=Ux(YC),t=Ux(ZC),r=$x();u.useEffect(()=>{if(null==e)return WA;var n=(n,a,s)=>{t!==s&&e===n&&r($A(a))};return CA.on(EA,n),()=>{CA.off(EA,n)}},[r,t,e])}()}function HA(e,t,r,n,a,s){var i=Ux(r=>((e,t,r)=>{if(null!=t){var n=rT(e);return"axis"===t?"hover"===r?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:"hover"===r?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}})(r,e,t)),o=Ux(ZC),l=Ux(YC),c=Ux(JC),d=Ux(DA),h=null==d?void 0:d.active,m=tv();u.useEffect(()=>{if(!h&&null!=l&&null!=o){var e=KP({active:s,coordinate:r,dataKey:i,index:a,label:"number"==typeof n?String(n):n,sourceViewBox:m});CA.emit(OA,l,e,o)}},[h,r,i,a,n,o,l,c,s,m])}function GA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function YA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?GA(Object(r),!0).forEach(function(t){JA(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GA(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function JA(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZA(e){return e.dataKey}var QA=[],XA={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Uv,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function eM(e){var t=oj(e,XA),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:i,filterNull:o,isAnimationActive:l,offset:c,payloadUniqBy:d,position:h,reverseDirection:m,useTranslate3d:p,wrapperStyle:x,cursor:f,shared:g,trigger:y,defaultIndex:b,portal:v,axisId:j}=t,w=$x(),N="number"==typeof b?String(b):b;u.useEffect(()=>{w(LP({shared:g,trigger:y,axisId:j,active:r,defaultIndex:N}))},[w,g,y,j,r,N]);var _=tv(),k=Bv(),S=function(e){return Ux(t=>AP(t,e))}(g),{activeIndex:C,isActive:O}=Ux(e=>fA(e,S,y,N)),E=Ux(e=>xA(e,S,y,N)),T=Ux(e=>pA(e,S,y,N)),A=Ux(e=>mA(e,S,y,N)),M=E,D=u.useContext(_A),I=null!=r?r:O,[R,$]=Nf([M,I]),L="axis"===S?T:void 0;HA(S,y,A,L,C,I);var F=null!=v?v:D;if(null==F)return null;var z=null!=M?M:QA;I||(z=QA),o&&z.length&&(z=_x(M.filter(e=>null!=e.value&&(!0!==e.hide||t.includeHidden)),d,ZA));var U=z.length>0,B=u.createElement(Fv,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:l,active:I,coordinate:A,hasPayload:U,offset:c,position:h,reverseDirection:m,useTranslate3d:p,viewBox:_,wrapperStyle:x,lastBoundingBox:R,innerRef:$,hasPortalFromProps:Boolean(v)},function(e,t){return u.isValidElement(e)?u.cloneElement(e,t):"function"==typeof e?u.createElement(e,t):u.createElement(Tv,t)}(i,YA(YA({},t),{},{payload:z,label:L,active:I,coordinate:A,accessibilityLayer:k})));return u.createElement(u.Fragment,null,P.createPortal(B,F),I&&u.createElement(wA,{cursor:f,tooltipEventType:S,coordinate:A,payload:M,index:C}))}var tM=e=>null;function rM(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}tM.displayName="Cell";function nM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function aM(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var sM=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nM(Object(r),!0).forEach(function(t){aM(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},{cacheSize:2e3,enableCache:!0}),iM=new class{constructor(e){rM(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}(sM.cacheSize),oM={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},lM="recharts_measurement_span";var cM=(e,t)=>{try{var r=document.getElementById(lM);r||((r=document.createElement("span")).setAttribute("id",lM),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,oM,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch(a){return{width:0,height:0}}},dM=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||Uv)return{width:0,height:0};if(!sM.enableCache)return cM(e,t);var r=function(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(o)}(e,t),n=iM.get(r);if(n)return n;var a=cM(e,t);return iM.set(r,a),a},uM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,hM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,mM=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,pM=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,xM={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},fM=Object.keys(xM),gM="NaN";class yM{static parse(e){var t,[,r,n]=null!==(t=pM.exec(e))&&void 0!==t?t:[];return new yM(parseFloat(r),null!=n?n:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,jm(e)&&(this.unit=""),""===t||mM.test(t)||(this.num=NaN,this.unit=""),fM.includes(t)&&(this.num=function(e,t){return e*xM[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new yM(NaN,""):new yM(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new yM(NaN,""):new yM(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new yM(NaN,""):new yM(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new yM(NaN,""):new yM(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return jm(this.num)}}function bM(e){if(e.includes(gM))return gM;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=null!==(r=uM.exec(t))&&void 0!==r?r:[],i=yM.parse(null!=n?n:""),o=yM.parse(null!=s?s:""),l="*"===a?i.multiply(o):i.divide(o);if(l.isNaN())return gM;t=t.replace(uM,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,d,u,h]=null!==(c=hM.exec(t))&&void 0!==c?c:[],m=yM.parse(null!=d?d:""),p=yM.parse(null!=h?h:""),x="+"===u?m.add(p):m.subtract(p);if(x.isNaN())return gM;t=t.replace(hM,x.toString())}return t}var vM=/\(([^()]*)\)/;function jM(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,r=e;null!=(t=vM.exec(r));){var[,n]=t;r=r.replace(vM,bM(n))}return r}(t),t=bM(t)}function wM(e){var t=function(e){try{return jM(e)}catch(t){return gM}}(e.slice(5,-1));return t===gM?"":t}var NM=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_M=["dx","dy","angle","className","breakAll"];function kM(){return kM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kM.apply(null,arguments)}function SM(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var CM=/[ \f\n\r\t\v\u2028\u2029]+/,OM=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];return Tm(t)||(a=r?t.toString().split(""):t.toString().split(CM)),{wordsWithComputedWidth:a.map(e=>({word:e,width:dM(e,n).width})),spaceWidth:r?0:dM("",n).width}}catch(s){return null}},EM=e=>[{words:Tm(e)?[]:e.toString().split(CM)}],PM=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=e;if((t||r)&&!Uv){var o=OM({breakAll:s,children:n,style:a});if(!o)return EM(n);var{wordsWithComputedWidth:l,spaceWidth:c}=o;return((e,t,r,n,a)=>{var{maxLines:s,children:i,style:o,breakAll:l}=e,c=Nm(s),d=i,u=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((e,t)=>{var{word:s,width:i}=t,o=e[e.length-1];if(o&&(null==n||a||o.width+i+r<Number(n)))o.words.push(s),o.width+=i+r;else{var l={words:[s],width:i};e.push(l)}return e},[])},h=u(t),m=e=>e.reduce((e,t)=>e.width>t.width?e:t);if(!c||a)return h;if(!(h.length>s||m(h).width>Number(n)))return h;for(var p,x=e=>{var t=d.slice(0,e),r=OM({breakAll:l,style:o,children:t+""}).wordsWithComputedWidth,a=u(r);return[a.length>s||m(a).width>Number(n),a]},f=0,g=d.length-1,y=0;f<=g&&y<=d.length-1;){var b=Math.floor((f+g)/2),v=b-1,[j,w]=x(v),[N]=x(b);if(j||N||(f=b+1),j&&N&&(g=b-1),!j&&N){p=w;break}y++}return p||h})({breakAll:s,children:n,maxLines:i,style:a},l,c,t,r)}return EM(n)},TM="#808080",AM=u.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:i=!1,textAnchor:o="start",verticalAnchor:l="end",fill:c=TM}=e,d=SM(e,NM),h=u.useMemo(()=>PM({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:m,dy:p,angle:x,className:f,breakAll:g}=d,y=SM(d,_M);if(!_m(r)||!_m(n)||0===h.length)return null;var b,v=r+(Nm(m)?m:0),j=n+(Nm(p)?p:0);switch(l){case"start":b=wM("calc(".concat(s,")"));break;case"middle":b=wM("calc(".concat((h.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:b=wM("calc(".concat(h.length-1," * -").concat(a,")"))}var w=[];if(i){var N=h[0].width,{width:_}=d;w.push("scale(".concat(Nm(_)?_/N:1,")"))}return x&&w.push("rotate(".concat(x,", ").concat(v,", ").concat(j,")")),w.length&&(y.transform=w.join(" ")),u.createElement("text",kM({},Fu(y),{ref:t,x:v,y:j,className:Tu("recharts-text",f),textAnchor:o,fill:c.includes("url")?TM:c}),h.map((e,t)=>{var r=e.words.join(g?"":" ");return u.createElement("tspan",{x:v,dy:0===t?b:a,key:"".concat(r,"-").concat(t)},r)}))});AM.displayName="Text";var MM=["labelRef"];function DM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function IM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?DM(Object(r),!0).forEach(function(t){RM(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function RM(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $M(){return $M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$M.apply(null,arguments)}var LM=u.createContext(null),FM=e=>{var{x:t,y:r,width:n,height:a,children:s}=e,i=u.useMemo(()=>({x:t,y:r,width:n,height:a}),[t,r,n,a]);return u.createElement(LM.Provider,{value:i},s)},zM=()=>{var e=u.useContext(LM),t=tv();return e||t},UM=u.createContext(null),BM=e=>null!=e&&"function"==typeof e,qM=(e,t,r,n,a)=>{var s,i,{offset:o,className:l}=e,{cx:c,cy:d,innerRadius:h,outerRadius:m,startAngle:p,endAngle:x,clockWise:f}=a,g=(h+m)/2,y=((e,t)=>vm(t-e)*Math.min(Math.abs(t-e),360))(p,x),b=y>=0?1:-1;switch(t){case"insideStart":s=p+b*o,i=f;break;case"insideEnd":s=x-b*o,i=!f;break;case"end":s=x+b*o,i=f;break;default:throw new Error("Unsupported position ".concat(t))}i=y<=0?i:!i;var v=Ry(c,d,g,s),j=Ry(c,d,g,s+359*(i?1:-1)),w="M".concat(v.x,",").concat(v.y,"\n    A").concat(g,",").concat(g,",0,1,").concat(i?0:1,",\n    ").concat(j.x,",").concat(j.y),N=Tm(e.id)?Sm("recharts-radial-line-"):e.id;return u.createElement("text",$M({},n,{dominantBaseline:"central",className:Tu("recharts-radial-bar-label",l)}),u.createElement("defs",null,u.createElement("path",{id:N,d:w})),u.createElement("textPath",{xlinkHref:"#".concat(N)},r))},WM=e=>"cx"in e&&Nm(e.cx),KM={offset:5};function VM(e){var t,r,n=oj(e,KM),{viewBox:a,position:s,value:i,children:o,content:l,className:c="",textBreakAll:d,labelRef:h}=n,m=(t=u.useContext(UM),r=Ux(vO),t||r),p=zM(),x=a||("center"===s?p:null!=m?m:p);if(!x||Tm(i)&&Tm(o)&&!u.isValidElement(l)&&"function"!=typeof l)return null;var f,g=IM(IM({},n),{},{viewBox:x});if(u.isValidElement(l)){var{labelRef:y}=g,b=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(g,MM);return u.cloneElement(l,b)}if("function"==typeof l){if(f=u.createElement(l,g),u.isValidElement(f))return f}else f=(e=>{var{value:t,formatter:r}=e,n=Tm(e.children)?t:e.children;return"function"==typeof r?r(n):n})(n);var v=WM(x),j=Fu(n);if(v&&("insideStart"===s||"insideEnd"===s||"end"===s))return qM(n,s,f,j,x);var w=v?((e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:o,endAngle:l}=e,c=(o+l)/2;if("outside"===r){var{x:d,y:u}=Ry(n,a,i+t,c);return{x:d,y:u,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:m,y:p}=Ry(n,a,h,c);return{x:m,y:p,textAnchor:"middle",verticalAnchor:"middle"}})(x,n.offset,n.position):((e,t)=>{var r,{parentViewBox:n,offset:a,position:s}=e;null==n||WM(n)||(r=n);var{x:i,y:o,width:l,height:c}=t,d=c>=0?1:-1,u=d*a,h=d>0?"end":"start",m=d>0?"start":"end",p=l>=0?1:-1,x=p*a,f=p>0?"end":"start",g=p>0?"start":"end";if("top"===s)return IM(IM({},{x:i+l/2,y:o-d*a,textAnchor:"middle",verticalAnchor:h}),r?{height:Math.max(o-r.y,0),width:l}:{});if("bottom"===s)return IM(IM({},{x:i+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:m}),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{});if("left"===s){var y={x:i-x,y:o+c/2,textAnchor:f,verticalAnchor:"middle"};return IM(IM({},y),r?{width:Math.max(y.x-r.x,0),height:c}:{})}if("right"===s){var b={x:i+l+x,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return IM(IM({},b),r?{width:Math.max(r.x+r.width-b.x,0),height:c}:{})}var v=r?{width:l,height:c}:{};return"insideLeft"===s?IM({x:i+x,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},v):"insideRight"===s?IM({x:i+l-x,y:o+c/2,textAnchor:f,verticalAnchor:"middle"},v):"insideTop"===s?IM({x:i+l/2,y:o+u,textAnchor:"middle",verticalAnchor:m},v):"insideBottom"===s?IM({x:i+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:h},v):"insideTopLeft"===s?IM({x:i+x,y:o+u,textAnchor:g,verticalAnchor:m},v):"insideTopRight"===s?IM({x:i+l-x,y:o+u,textAnchor:f,verticalAnchor:m},v):"insideBottomLeft"===s?IM({x:i+x,y:o+c-u,textAnchor:g,verticalAnchor:h},v):"insideBottomRight"===s?IM({x:i+l-x,y:o+c-u,textAnchor:f,verticalAnchor:h},v):s&&"object"==typeof s&&(Nm(s.x)||wm(s.x))&&(Nm(s.y)||wm(s.y))?IM({x:i+Cm(s.x,l),y:o+Cm(s.y,c),textAnchor:"end",verticalAnchor:"end"},v):IM({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},v)})(n,x);return u.createElement(AM,$M({ref:h,className:Tu("recharts-label",c)},j,w,{breakAll:d}),f)}VM.displayName="Label";function HM(e){var{label:t,labelRef:r}=e;return((e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return!0===e?u.createElement(VM,$M({key:"label-implicit"},n)):_m(e)?u.createElement(VM,$M({key:"label-implicit",value:e},n)):u.isValidElement(e)?e.type===VM?u.cloneElement(e,IM({key:"label-implicit"},n)):u.createElement(VM,$M({key:"label-implicit",content:e},n)):BM(e)?u.createElement(VM,$M({key:"label-implicit",content:e},n)):e&&"object"==typeof e?u.createElement(VM,$M({},e,{key:"label-implicit"},n)):null})(t,zM(),r)||null}var GM,YM={},JM={};function ZM(){return GM||(GM=1,e=JM,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.last=function(e){return e[e.length-1]}),JM;var e}var QM,XM,eD,tD,rD={};function nD(){return QM||(QM=1,e=rD,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}),rD;var e}function aD(){return tD?eD:(tD=1,eD=(XM||(XM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZM(),r=nD(),n=op();e.last=function(e){if(n.isArrayLike(e))return t.last(r.toArray(e))}}(YM)),YM).last)}const sD=n(aD());var iD=["valueAccessor"],oD=["dataKey","clockWise","id","textBreakAll"];function lD(){return lD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lD.apply(null,arguments)}function cD(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var dD=e=>Array.isArray(e.value)?sD(e.value):e.value,uD=u.createContext(void 0),hD=uD.Provider,mD=u.createContext(void 0),pD=mD.Provider;function xD(e){var{valueAccessor:t=dD}=e,r=cD(e,iD),{dataKey:n,clockWise:a,id:s,textBreakAll:i}=r,o=cD(r,oD),l=u.useContext(uD),c=u.useContext(mD),d=l||c;return d&&d.length?u.createElement(Vu,{className:"recharts-label-list"},d.map((e,a)=>{var l,c=Tm(n)?t(e,a):Ky(e&&e.payload,n),d=Tm(s)?{}:{id:"".concat(s,"-").concat(a)};return u.createElement(VM,lD({key:"label-".concat(a)},Fu(e),o,d,{fill:null!==(l=r.fill)&&void 0!==l?l:e.fill,parentViewBox:e.parentViewBox,value:c,textBreakAll:i,viewBox:e.viewBox,index:a}))})):null}function fD(e){var{label:t}=e;return t?!0===t?u.createElement(xD,{key:"labelList-implicit"}):u.isValidElement(t)||BM(t)?u.createElement(xD,{key:"labelList-implicit",content:t}):"object"==typeof t?u.createElement(xD,lD({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function gD(){return gD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gD.apply(null,arguments)}xD.displayName="LabelList";var yD=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=Tu("recharts-dot",a);return t===+t&&r===+r&&n===+n?u.createElement("circle",gD({},$u(e),Um(e),{className:s,cx:t,cy:r,r:n})):null},bD=e=>e.graphicalItems.polarItems,vD=Yx([jO,wO],HO),jD=Yx([bD,WO,vD],JO),wD=Yx([jD],tE),ND=Yx([wD,VS],nE),_D=Yx([ND,WO,jD],sE);Yx([ND,WO,jD],(e,t,r)=>r.length>0?e.flatMap(e=>r.flatMap(r=>{var n;return{value:Ky(e,null!==(n=t.dataKey)&&void 0!==n?n:r.dataKey),errorDomain:[]}})).filter(Boolean):null!=(null==t?void 0:t.dataKey)?e.map(e=>({value:Ky(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]})));var kD=()=>{},SD=Yx([ND,WO,jD,vE,jO],wE),CD=Yx([WO,gE,yE,kD,SD,kD,iv,jO],FE),OD=Yx([WO,iv,ND,_D,HC,jO,CD],BE),ED=Yx([OD,WO,KE],HE);Yx([WO,OD,ED,jO],YE);var PD=Wg({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:TD,removeRadiusAxis:AD,addAngleAxis:MD,removeAngleAxis:DD}=PD.actions,ID=PD.reducer;function RD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?RD(Object(r),!0).forEach(function(t){LD(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function LD(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var FD,zD,UD=Yx([bD,(e,t)=>t],(e,t)=>e.filter(e=>"pie"===e.type).find(e=>e.id===t)),BD=[],qD=(e,t,r)=>0===(null==r?void 0:r.length)?BD:r,WD=Yx([VS,UD,qD],(e,t,r)=>{var n,{chartData:a}=e;if(null!=t&&((n=null!=(null==t?void 0:t.data)&&t.data.length>0?t.data:a)&&n.length||null==r||(n=r.map(e=>$D($D({},t.presentationProps),e.props))),null!=n))return n}),KD=Yx([WD,UD,qD],(e,t,r)=>{if(null!=e&&null!=t)return e.map((e,n)=>{var a,s,i=Ky(e,t.nameKey,t.name);return s=null!=r&&null!==(a=r[n])&&void 0!==a&&null!==(a=a.props)&&void 0!==a&&a.fill?r[n].props.fill:"object"==typeof e&&null!=e&&"fill"in e?e.fill:t.fill,{value:ib(i,t.dataKey),color:s,payload:e,type:t.legendType}})}),VD=Yx([WD,UD,qD,Nb],(e,t,r,n)=>{if(null!=t&&null!=e)return function(e){var t,r,n,{pieSettings:a,displayedData:s,cells:i,offset:o}=e,{cornerRadius:l,startAngle:c,endAngle:d,dataKey:u,nameKey:h,tooltipType:m}=a,p=Math.abs(a.minAngle),x=XI(c,d),f=Math.abs(x),g=s.length<=1?0:null!==(t=a.paddingAngle)&&void 0!==t?t:0,y=s.filter(e=>0!==Ky(e,u,0)).length,b=f-y*p-(f>=360?y:y-1)*g,v=s.reduce((e,t)=>{var r=Ky(t,u,0);return e+(Nm(r)?r:0)},0);v>0&&(r=s.map((e,t)=>{var r,s=Ky(e,u,0),d=Ky(e,h,t),f=QI(a,o,e),y=(Nm(s)?s:0)/v,j=HI(HI({},e),i&&i[t]&&i[t].props),w=(r=t?n.endAngle+vm(x)*g*(0!==s?1:0):c)+vm(x)*((0!==s?p:0)+y*b),N=(r+w)/2,_=(f.innerRadius+f.outerRadius)/2,k=[{name:d,value:s,payload:j,dataKey:u,type:m}],S=Ry(f.cx,f.cy,_,N);return n=HI(HI(HI(HI({},a.presentationProps),{},{percent:y,cornerRadius:l,name:d,tooltipPayload:k,midAngle:N,middleRadius:_,tooltipPosition:S},j),f),{},{value:s,startAngle:r,endAngle:w,payload:j,paddingAngle:vm(x)*g})}));return r}({offset:n,pieSettings:t,displayedData:e,cells:r})}),HD={exports:{}},GD={};var YD=(zD||(zD=1,HD.exports=function(){if(FD)return GD;FD=1;var e,t=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen");function x(e){if("object"==typeof e&&null!==e){var p=e.$$typeof;switch(p){case t:switch(e=e.type){case n:case s:case a:case d:case u:return e;default:switch(e=e&&e.$$typeof){case l:case o:case c:case m:case h:case i:return e;default:return p}}case r:return p}}}return e=Symbol.for("react.module.reference"),GD.ContextConsumer=o,GD.ContextProvider=i,GD.Element=t,GD.ForwardRef=c,GD.Fragment=n,GD.Lazy=m,GD.Memo=h,GD.Portal=r,GD.Profiler=s,GD.StrictMode=a,GD.Suspense=d,GD.SuspenseList=u,GD.isAsyncMode=function(){return!1},GD.isConcurrentMode=function(){return!1},GD.isContextConsumer=function(e){return x(e)===o},GD.isContextProvider=function(e){return x(e)===i},GD.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},GD.isForwardRef=function(e){return x(e)===c},GD.isFragment=function(e){return x(e)===n},GD.isLazy=function(e){return x(e)===m},GD.isMemo=function(e){return x(e)===h},GD.isPortal=function(e){return x(e)===r},GD.isProfiler=function(e){return x(e)===s},GD.isStrictMode=function(e){return x(e)===a},GD.isSuspense=function(e){return x(e)===d},GD.isSuspenseList=function(e){return x(e)===u},GD.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===n||t===s||t===a||t===d||t===u||t===p||"object"==typeof t&&null!==t&&(t.$$typeof===m||t.$$typeof===h||t.$$typeof===i||t.$$typeof===o||t.$$typeof===c||t.$$typeof===e||void 0!==t.getModuleId)},GD.typeOf=x,GD}()),HD.exports),JD=e=>"string"==typeof e?e:e?e.displayName||e.name||"Component":"",ZD=null,QD=null,XD=e=>{if(e===ZD&&Array.isArray(QD))return QD;var t=[];return u.Children.forEach(e,e=>{Tm(e)||(YD.isFragment(e)?t=t.concat(XD(e.props.children)):t.push(e))}),QD=t,ZD=e,t};function eI(e,t){var r=[],n=[];return n=Array.isArray(t)?t.map(e=>JD(e)):[JD(t)],XD(e).forEach(e=>{var t=bm(e,"type.displayName")||bm(e,"type.name");-1!==n.indexOf(t)&&r.push(e)}),r}var tI,rI,nI,aI=e=>!e||"object"!=typeof e||!("clipDot"in e)||Boolean(e.clipDot),sI={};function iI(){return nI?rI:(nI=1,rI=(tI||(tI=1,e=sI,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isPlainObject=function(e){if("object"!=typeof e)return!1;if(null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){const t=e[Symbol.toStringTag];return null!=t&&!!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}),sI).isPlainObject);var e}const oI=n(iI());function lI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function cI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lI(Object(r),!0).forEach(function(t){dI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function dI(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uI(){return uI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uI.apply(null,arguments)}var hI=(e,t,r,n,a)=>{var s,i=r-n;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-i/2,",").concat(t+a),s+="L ".concat(e+r-i/2-n,",").concat(t+a),s+="L ".concat(e,",").concat(t," Z")},mI={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},pI=e=>{var t=oj(e,mI),{x:r,y:n,upperWidth:a,lowerWidth:s,height:i,className:o}=t,{animationEasing:l,animationDuration:c,animationBegin:d,isUpdateAnimationActive:h}=t,m=u.useRef(null),[p,x]=u.useState(-1),f=u.useRef(a),g=u.useRef(s),y=u.useRef(i),b=u.useRef(r),v=u.useRef(n),j=Rj(e,"trapezoid-");if(u.useEffect(()=>{if(m.current&&m.current.getTotalLength)try{var e=m.current.getTotalLength();e&&x(e)}catch(t){}},[]),r!==+r||n!==+n||a!==+a||s!==+s||i!==+i||0===a&&0===s||0===i)return null;var w=Tu("recharts-trapezoid",o);if(!h)return u.createElement("g",null,u.createElement("path",uI({},Fu(t),{className:w,d:hI(r,n,a,s,i)})));var N=f.current,_=g.current,k=y.current,S=b.current,C=v.current,O="0px ".concat(-1===p?1:p,"px"),E="".concat(p,"px 0px"),P=mj(["strokeDasharray"],c,l);return u.createElement(Ij,{animationId:j,key:j,canBegin:p>0,duration:c,easing:l,isActive:h,begin:d},e=>{var o=Em(N,a,e),l=Em(_,s,e),c=Em(k,i,e),d=Em(S,r,e),h=Em(C,n,e);m.current&&(f.current=o,g.current=l,y.current=c,b.current=d,v.current=h);var p=e>0?{transition:P,strokeDasharray:E}:{strokeDasharray:O};return u.createElement("path",uI({},Fu(t),{className:w,d:hI(d,h,o,l,c),ref:m,style:cI(cI({},p),t.style)}))})},xI=["option","shapeType","propTransformer","activeClassName","isActive"];function fI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fI(Object(r),!0).forEach(function(t){yI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function yI(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bI(e,t){return gI(gI({},t),e)}function vI(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return u.createElement(Vj,r);case"trapezoid":return u.createElement(pI,r);case"sector":return u.createElement(Qj,r);case"symbols":if(function(e){return"symbols"===e}(t))return u.createElement(zm,r);break;default:return null}}function jI(e){var t,{option:r,shapeType:n,propTransformer:a=bI,activeClassName:s="recharts-active-shape",isActive:i}=e,o=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,xI);if(u.isValidElement(r))t=u.cloneElement(r,gI(gI({},o),function(e){return u.isValidElement(e)?e.props:e}(r)));else if("function"==typeof r)t=r(o);else if(oI(r)&&"boolean"!=typeof r){var l=a(r,o);t=u.createElement(vI,{shapeType:n,elementProps:l})}else{var c=o;t=u.createElement(vI,{shapeType:n,elementProps:c})}return i?u.createElement(Vu,{className:s},t):t}var wI=(e,t)=>{var r=$x();return(n,a)=>s=>{null==e||e(n,a,s),r(FP({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},NI=e=>{var t=$x();return(r,n)=>a=>{null==e||e(r,n,a),t(zP())}},_I=(e,t)=>{var r=$x();return(n,a)=>s=>{null==e||e(n,a,s),r(BP({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function kI(e){var{fn:t,args:r}=e,n=$x(),a=Cb();return u.useLayoutEffect(()=>{if(!a){var e=t(r);return n(RP(e)),()=>{n($P(e))}}},[t,r,n,a]),null}var SI,CI=()=>{};function OI(e){var{legendPayload:t}=e,r=$x(),n=Cb();return u.useLayoutEffect(()=>n?CI:(r(hv(t)),()=>{r(mv(t))}),[r,n,t]),null}function EI(e){var{legendPayload:t}=e,r=$x(),n=Ux(iv);return u.useLayoutEffect(()=>"centric"!==n&&"radial"!==n?CI:(r(hv(t)),()=>{r(mv(t))}),[r,n,t]),null}var PI=null!==(SI=m["useId".toString()])&&void 0!==SI?SI:()=>{var[e]=u.useState(()=>Sm("uid-"));return e};var TI=u.createContext(void 0),AI=e=>{var t,r,n,{id:a,type:s,children:i}=e,o=(t="recharts-".concat(s),r=a,n=PI(),r||(t?"".concat(t,"-").concat(n):n));return u.createElement(TI.Provider,{value:o},i(o))},MI=Wg({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Dg()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,a=vg(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},prepare:Dg()},removeCartesianGraphicalItem:{reducer(e,t){var r=vg(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Dg()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Dg()},removePolarGraphicalItem:{reducer(e,t){var r=vg(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Dg()}}}),{addCartesianGraphicalItem:DI,replaceCartesianGraphicalItem:II,removeCartesianGraphicalItem:RI,addPolarGraphicalItem:$I,removePolarGraphicalItem:LI}=MI.actions,FI=MI.reducer;function zI(e){var t=$x(),r=u.useRef(null);return u.useLayoutEffect(()=>{null===r.current?t(DI(e)):r.current!==e&&t(II({prev:r.current,next:e})),r.current=e},[t,e]),u.useLayoutEffect(()=>()=>{r.current&&(t(RI(r.current)),r.current=null)},[t]),null}function UI(e){var t=$x();return u.useLayoutEffect(()=>(t($I(e)),()=>{t(LI(e))}),[t,e]),null}var BI=["onMouseEnter","onClick","onMouseLeave"],qI=["id"],WI=["id"];function KI(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function VI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function HI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?VI(Object(r),!0).forEach(function(t){GI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function GI(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YI(){return YI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},YI.apply(null,arguments)}function JI(e){var t=u.useMemo(()=>eI(e.children,tM),[e.children]),r=Ux(r=>KD(r,e.id,t));return null==r?null:u.createElement(EI,{legendPayload:r})}function ZI(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:o,hide:l,tooltipType:c}=e;return{dataDefinedOnItem:n.map(e=>e.tooltipPayload),positions:n.map(e=>e.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:r,name:ib(o,t),hide:l,type:c,color:i,unit:""}}}var QI=(e,t,r)=>{var{top:n,left:a,width:s,height:i}=t,o=$y(s,i),l=a+Cm(e.cx,s,s/2),c=n+Cm(e.cy,i,i/2),d=Cm(e.innerRadius,o,0),u=((e,t,r)=>Cm("function"==typeof t?t(e):t,r,.8*r))(r,e.outerRadius,o);return{cx:l,cy:c,innerRadius:d,outerRadius:u,maxRadius:e.maxRadius||Math.sqrt(s*s+i*i)/2}},XI=(e,t)=>vm(t-e)*Math.min(Math.abs(t-e),360);function eR(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:i}=r;if(!n||!a||!t)return null;var o=$u(r),l=Lu(a),c=Lu(s),d="object"==typeof a&&"offsetRadius"in a&&"number"==typeof a.offsetRadius&&a.offsetRadius||20,h=t.map((e,t)=>{var r,n,h=(e.startAngle+e.endAngle)/2,m=Ry(e.cx,e.cy,e.outerRadius+d,h),p=HI(HI(HI(HI({},o),e),{},{stroke:"none"},l),{},{index:t,textAnchor:(r=m.x,n=e.cx,r>n?"start":r<n?"end":"middle")},m),x=HI(HI(HI(HI({},o),e),{},{fill:"none",stroke:e.fill},c),{},{index:t,points:[Ry(e.cx,e.cy,e.outerRadius,h),m],key:"line"});return u.createElement(Vu,{key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(t)},s&&((e,t)=>{if(u.isValidElement(e))return u.cloneElement(e,t);if("function"==typeof e)return e(t);var r=Tu("recharts-pie-label-line","boolean"!=typeof e?e.className:"");return u.createElement(Qv,YI({},t,{type:"linear",className:r}))})(s,x),((e,t,r)=>{if(u.isValidElement(e))return u.cloneElement(e,t);var n=r;if("function"==typeof e&&(n=e(t),u.isValidElement(n)))return n;var a,s=Tu("recharts-pie-label-text",(a=e)&&"object"==typeof a&&"className"in a&&"string"==typeof a.className?a.className:"");return u.createElement(AM,YI({},t,{alignmentBaseline:"middle",className:s}),n)})(a,p,Ky(e,i)))});return u.createElement(Vu,{className:"recharts-pie-labels"},h)}function tR(e){var{sectors:t,props:r,showLabels:n}=e,{label:a}=r;return"object"==typeof a&&null!=a&&"position"in a?u.createElement(fD,{label:a}):u.createElement(eR,{sectors:t,props:r,showLabels:n})}function rR(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a}=e,s=Ux(KT),{onMouseEnter:i,onClick:o,onMouseLeave:l}=a,c=KI(a,BI),d=wI(i,a.dataKey),h=NI(l),m=_I(o,a.dataKey);return null==t||0===t.length?null:u.createElement(u.Fragment,null,t.map((e,i)=>{if(0===(null==e?void 0:e.startAngle)&&0===(null==e?void 0:e.endAngle)&&1!==t.length)return null;var o=r&&String(i)===s,l=o?r:s?n:null,p=HI(HI({},e),{},{stroke:e.stroke,tabIndex:-1,[mb]:i,[pb]:a.dataKey});return u.createElement(Vu,YI({key:"sector-".concat(null==e?void 0:e.startAngle,"-").concat(null==e?void 0:e.endAngle,"-").concat(e.midAngle,"-").concat(i),tabIndex:-1,className:"recharts-pie-sector"},Bm(c,e,i),{onMouseEnter:d(e,i),onMouseLeave:h(e,i),onClick:m(e,i)}),u.createElement(jI,YI({option:l,isActive:o,shapeType:"sector"},p)))}))}function nR(e){var{showLabels:t,sectors:r,children:n}=e,a=u.useMemo(()=>t&&r?r.map(e=>({value:e.value,payload:e.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:e.cx,cy:e.cy,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clockWise:!1},fill:e.fill})):[],[r,t]);return u.createElement(pD,{value:t?a:void 0},n)}function aR(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,activeShape:l,inactiveShape:c,onAnimationStart:d,onAnimationEnd:h}=t,m=Rj(t,"recharts-pie-"),p=r.current,[x,f]=u.useState(!1),g=u.useCallback(()=>{"function"==typeof h&&h(),f(!1)},[h]),y=u.useCallback(()=>{"function"==typeof d&&d(),f(!0)},[d]);return u.createElement(nR,{showLabels:!x,sectors:n},u.createElement(Ij,{animationId:m,begin:s,duration:i,isActive:a,easing:o,onAnimationStart:y,onAnimationEnd:g,key:m},e=>{var a=[],s=n&&n[0],i=null==s?void 0:s.startAngle;return null==n||n.forEach((t,r)=>{var n=p&&p[r],s=r>0?bm(t,"paddingAngle",0):0;if(n){var o=Em(n.endAngle-n.startAngle,t.endAngle-t.startAngle,e),l=HI(HI({},t),{},{startAngle:i+s,endAngle:i+o+s});a.push(l),i=l.endAngle}else{var{endAngle:c,startAngle:d}=t,u=Em(0,c-d,e),h=HI(HI({},t),{},{startAngle:i+s,endAngle:i+u+s});a.push(h),i=h.endAngle}}),r.current=a,u.createElement(Vu,null,u.createElement(rR,{sectors:a,activeShape:l,inactiveShape:c,allOtherPieProps:t}))}),u.createElement(tR,{showLabels:!x,sectors:n,props:t}),t.children)}var sR={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Uv,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function iR(e){var{id:t}=e,r=KI(e,qI),{hide:n,className:a,rootTabIndex:s}=e,i=u.useMemo(()=>eI(e.children,tM),[e.children]),o=Ux(e=>VD(e,t,i)),l=u.useRef(null),c=Tu("recharts-pie",a);return n||null==o?(l.current=null,u.createElement(Vu,{tabIndex:s,className:c})):u.createElement(u.Fragment,null,u.createElement(kI,{fn:ZI,args:HI(HI({},e),{},{sectors:o})}),u.createElement(Vu,{tabIndex:s,className:c},u.createElement(aR,{props:HI(HI({},r),{},{sectors:o}),previousSectorsRef:l})))}function oR(e){var t=oj(e,sR),{id:r}=t,n=KI(t,WI),a=$u(n);return u.createElement(AI,{id:r,type:"pie"},e=>u.createElement(u.Fragment,null,u.createElement(UI,{type:"pie",id:e,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:t.maxRadius}),u.createElement(JI,YI({},n,{id:e})),u.createElement(iR,YI({},n,{id:e}))))}function lR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function cR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lR(Object(r),!0).forEach(function(t){dR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function dR(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}oR.displayName="Pie";var uR=Wg({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Dg()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Dg()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Dg()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Dg()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Dg()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Dg()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,a=e.yAxis[r];if(a){var s=a.widthHistory||[];if(3===s.length&&s[0]===s[2]&&n===s[1]&&n!==a.width&&Math.abs(n-s[0])<=1)return;var i=[...s,n].slice(-3);e.yAxis[r]=cR(cR({},e.yAxis[r]),{},{width:n,widthHistory:i})}}}}),{addXAxis:hR,removeXAxis:mR,addYAxis:pR,removeYAxis:xR,addZAxis:fR,removeZAxis:gR,updateYAxisWidth:yR}=uR.actions,bR=uR.reducer,vR=Yx([Nb],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),jR=Yx([vR,ob,lb],(e,t,r)=>{if(e&&null!=t&&null!=r)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),wR=()=>Ux(jR);function NR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?NR(Object(r),!0).forEach(function(t){kR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function kR(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SR(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=Ux(KT),i=Ux(XT);if(null==t||null==i)return null;var o=t.find(e=>i.includes(e.payload));return Tm(o)?null:(e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(!1===a||null==t.x||null==t.y)return null;var i,o=_R(_R({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:null!=n?n:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Lu(a)),Um(a));return i=u.isValidElement(a)?u.cloneElement(a,o):"function"==typeof a?a(o):u.createElement(yD,o),u.createElement(Vu,{className:"recharts-active-dot"},i)})({point:o,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}var CR=["x","y"];function OR(){return OR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OR.apply(null,arguments)}function ER(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function PR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ER(Object(r),!0).forEach(function(t){TR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ER(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function TR(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AR(e,t){var{x:r,y:n}=e,a=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,CR),s="".concat(r),i=parseInt(s,10),o="".concat(n),l=parseInt(o,10),c="".concat(t.height||a.height),d=parseInt(c,10),u="".concat(t.width||a.width),h=parseInt(u,10);return PR(PR(PR(PR(PR({},t),a),i?{x:i}:{}),l?{y:l}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function MR(e){return u.createElement(jI,OR({shapeType:"rectangle",propTransformer:AR,activeClassName:"recharts-active-bar"},e))}var DR=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(r,n)=>{if(Nm(e))return e;var a=Nm(r)||Tm(r);return a?e(r,n):(a||function(){throw new Error("Invariant failed")}(),t)}},IR=Wg({name:"errorBars",initialState:{},reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:a}=t.payload;e[r]&&(e[r]=e[r].map(e=>e.dataKey===n.dataKey&&e.direction===n.direction?a:e))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(e=>e.dataKey!==n.dataKey||e.direction!==n.direction))}}}),{addErrorBar:RR,replaceErrorBar:$R,removeErrorBar:LR}=IR.actions,FR=IR.reducer,zR=["children"];var UR={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},BR=u.createContext(UR);function qR(e){var{children:t}=e,r=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,zR);return u.createElement(BR.Provider,{value:r},t)}function WR(e,t){var r,n,a=Ux(t=>LO(t,e)),s=Ux(e=>UO(e,t)),i=null!==(r=null==a?void 0:a.allowDataOverflow)&&void 0!==r?r:RO.allowDataOverflow,o=null!==(n=null==s?void 0:s.allowDataOverflow)&&void 0!==n?n:FO.allowDataOverflow;return{needClip:i||o,needClipX:i,needClipY:o}}function KR(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=wR(),{needClipX:s,needClipY:i,needClip:o}=WR(t,r);if(!o)return null;var{x:l,y:c,width:d,height:h}=a;return u.createElement("clipPath",{id:"clipPath-".concat(n)},u.createElement("rect",{x:s?l:l-d/2,y:i?c:c-h/2,width:s?d:2*d,height:i?h:2*h}))}var VR=["onMouseEnter","onMouseLeave","onClick"],HR=["value","background","tooltipPosition"],GR=["id"],YR=["onMouseEnter","onClick","onMouseLeave"];function JR(){return JR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JR.apply(null,arguments)}function ZR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function QR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ZR(Object(r),!0).forEach(function(t){XR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function XR(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e$(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var t$=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:ib(r,t),payload:e}]};function r$(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:ib(s,t),hide:i,type:e.tooltipType,color:e.fill,unit:o}}}function n$(e){var t=Ux(KT),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:i,onMouseLeave:o,onClick:l}=s,c=e$(s,VR),d=wI(i,n),h=NI(o),m=_I(l,n);if(!a||null==r)return null;var p=Lu(a);return u.createElement(u.Fragment,null,r.map((e,r)=>{var{value:s,background:i,tooltipPosition:o}=e,l=e$(e,HR);if(!i)return null;var x=d(e,r),f=h(e,r),g=m(e,r),y=QR(QR(QR(QR(QR({option:a,isActive:String(r)===t},l),{},{fill:"#eee"},i),p),Bm(c,e,r)),{},{onMouseEnter:x,onMouseLeave:f,onClick:g,dataKey:n,index:r,className:"recharts-bar-background-rectangle"});return u.createElement(MR,JR({key:"background-bar-".concat(r)},y))}))}function a$(e){var{showLabels:t,children:r,rects:n}=e,a=null==n?void 0:n.map(e=>{var t={x:e.x,y:e.y,width:e.width,height:e.height};return QR(QR({},t),{},{value:e.value,payload:e.payload,parentViewBox:e.parentViewBox,viewBox:t,fill:e.fill})});return u.createElement(hD,{value:t?a:void 0},r)}function s$(e){var{shape:t,activeBar:r,baseProps:n,entry:a,index:s,dataKey:i}=e,o=Ux(KT),l=Ux(HT),c=r&&String(s)===o&&(null==l||i===l),d=c?r:t;return u.createElement(MR,JR({},n,{name:String(n.name)},a,{isActive:c,option:d,index:s,dataKey:i}))}function i$(e){var{shape:t,baseProps:r,entry:n,index:a,dataKey:s}=e;return u.createElement(MR,JR({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:a,dataKey:s}))}function o$(e){var{data:t,props:r}=e,n=$u(r),{id:a}=n,s=e$(n,GR),{shape:i,dataKey:o,activeBar:l}=r,{onMouseEnter:c,onClick:d,onMouseLeave:h}=r,m=e$(r,YR),p=wI(c,o),x=NI(h),f=_I(d,o);return t?u.createElement(u.Fragment,null,t.map((e,t)=>u.createElement(Vu,JR({key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value,"-").concat(t),className:"recharts-bar-rectangle"},Bm(m,e,t),{onMouseEnter:p(e,t),onMouseLeave:x(e,t),onClick:f(e,t)}),l?u.createElement(s$,{shape:i,activeBar:l,baseProps:s,entry:e,index:t,dataKey:o}):u.createElement(i$,{shape:i,baseProps:s,entry:e,index:t,dataKey:o})))):null}function l$(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:l,onAnimationEnd:c,onAnimationStart:d}=t,h=r.current,m=Rj(t,"recharts-bar-"),[p,x]=u.useState(!1),f=!p,g=u.useCallback(()=>{"function"==typeof c&&c(),x(!1)},[c]),y=u.useCallback(()=>{"function"==typeof d&&d(),x(!0)},[d]);return u.createElement(a$,{showLabels:f,rects:n},u.createElement(Ij,{animationId:m,begin:i,duration:o,isActive:s,easing:l,onAnimationEnd:g,onAnimationStart:y,key:m},e=>{var s=1===e?n:null==n?void 0:n.map((t,r)=>{var n=h&&h[r];if(n)return QR(QR({},t),{},{x:Em(n.x,t.x,e),y:Em(n.y,t.y,e),width:Em(n.width,t.width,e),height:Em(n.height,t.height,e)});if("horizontal"===a){var s=Em(0,t.height,e);return QR(QR({},t),{},{y:t.y+t.height-s,height:s})}var i=Em(0,t.width,e);return QR(QR({},t),{},{width:i})});return e>0&&(r.current=null!=s?s:null),null==s?null:u.createElement(Vu,null,u.createElement(o$,{props:t,data:s}))}),u.createElement(fD,{label:t.label}),t.children)}function c$(e){var t=u.useRef(null);return u.createElement(l$,{previousRectanglesRef:t,props:e})}var d$=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ky(e,t)}};class u$ extends u.PureComponent{render(){var{hide:e,data:t,dataKey:r,className:n,xAxisId:a,yAxisId:s,needClip:i,background:o,id:l}=this.props;if(e||null==t)return null;var c=Tu("recharts-bar",n),d=l;return u.createElement(Vu,{className:c,id:l},i&&u.createElement("defs",null,u.createElement(KR,{clipPathId:d,xAxisId:a,yAxisId:s})),u.createElement(Vu,{className:"recharts-bar-rectangles",clipPath:i?"url(#clipPath-".concat(d,")"):void 0},u.createElement(n$,{data:t,dataKey:r,background:o,allOtherBarProps:this.props}),u.createElement(c$,this.props)))}}var h$={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Uv,legendType:"rect",minPointSize:0,xAxisId:0,yAxisId:0};function m$(e){var t,{xAxisId:r,yAxisId:n,hide:a,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:h}=e,{needClip:m}=WR(r,n),p=ov(),x=Cb(),f=eI(e.children,tM),g=Ux(t=>A$(t,r,n,x,e.id,f));if("vertical"!==p&&"horizontal"!==p)return null;var y=null==g?void 0:g[0];return t=null==y||null==y.height||null==y.width?0:"vertical"===p?y.height/2:y.width/2,u.createElement(qR,{xAxisId:r,yAxisId:n,data:g,dataPointFormatter:d$,errorBarOffset:t},u.createElement(u$,JR({},e,{layout:p,needClip:m,data:g,xAxisId:r,yAxisId:n,hide:a,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:h})))}function p$(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:o,xAxisTicks:l,yAxisTicks:c,stackedData:d,displayedData:u,offset:h,cells:m,parentViewBox:p}=e,x="horizontal"===t?o:i,f=d?x.scale.domain():null,g=(e=>{var{numericAxis:t}=e,r=t.scale.domain();if("number"===t.type){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]})({numericAxis:x});return u.map((e,u)=>{var x,y,b,v,j,w;d?x=((e,t)=>{if(!t||2!==t.length||!Nm(t[0])||!Nm(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!Nm(e[0])||e[0]<r)&&(a[0]=r),(!Nm(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a})(d[u],f):(x=Ky(e,r),Array.isArray(x)||(x=[g,x]));var N=DR(n,0)(x[1],u);if("horizontal"===t){var _,[k,S]=[o.scale(x[0]),o.scale(x[1])];y=eb({axis:i,ticks:l,bandSize:s,offset:a.offset,entry:e,index:u}),b=null!==(_=null!=S?S:k)&&void 0!==_?_:void 0,v=a.size;var C=k-S;if(j=jm(C)?0:C,w={x:y,y:h.top,width:v,height:h.height},Math.abs(N)>0&&Math.abs(j)<Math.abs(N)){var O=vm(j||N)*(Math.abs(N)-Math.abs(j));b-=O,j+=O}}else{var[E,P]=[i.scale(x[0]),i.scale(x[1])];if(y=E,b=eb({axis:o,ticks:c,bandSize:s,offset:a.offset,entry:e,index:u}),v=P-E,j=a.size,w={x:h.left,y:b,width:h.width,height:j},Math.abs(N)>0&&Math.abs(v)<Math.abs(N))v+=vm(v||N)*(Math.abs(N)-Math.abs(v))}return null==y||null==b||null==v||null==j?null:QR(QR({},e),{},{x:y,y:b,width:v,height:j,value:d?x:x[1],payload:e,background:w,tooltipPosition:{x:y+v/2,y:b+j/2},parentViewBox:p},m&&m[u]&&m[u].props)}).filter(Boolean)}function x$(e){var t=oj(e,h$),r=Cb();return u.createElement(AI,{id:t.id,type:"bar"},e=>u.createElement(u.Fragment,null,u.createElement(OI,{legendPayload:t$(t)}),u.createElement(kI,{fn:r$,args:t}),u.createElement(zI,{type:"bar",id:e,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:Qy(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),u.createElement(m$,JR({},t,{id:e}))))}var f$=u.memo(x$);function g$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g$(Object(r),!0).forEach(function(t){b$(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function b$(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}f$.displayName="Bar";var v$=Yx([GO,(e,t,r,n,a)=>a],(e,t)=>e.filter(e=>"bar"===e.type).find(e=>e.id===t)),j$=Yx([v$],e=>null==e?void 0:e.maxBarSize),w$=(e,t,r)=>{var n=null!=r?r:e;if(!Tm(n))return Cm(n,t,0)},N$=Yx([iv,GO,(e,t)=>t,(e,t,r)=>r,(e,t,r,n)=>n],(e,t,r,n,a)=>t.filter(t=>"horizontal"===e?t.xAxisId===r:t.yAxisId===n).filter(e=>e.isPanorama===a).filter(e=>!1===e.hide).filter(e=>"bar"===e.type)),_$=Yx([N$,e=>e.rootProps.barSize,(e,t,r)=>"horizontal"===iv(e)?yP(e,"xAxis",t):yP(e,"yAxis",r)],(e,t,r)=>{var n=e.filter(EO),a=e.filter(e=>null==e.stackId),s=n.reduce((e,t)=>(e[t.stackId]||(e[t.stackId]=[]),e[t.stackId].push(t),e),{});return[...Object.entries(s).map(e=>{var[n,a]=e;return{stackId:n,dataKeys:a.map(e=>e.dataKey),barSize:w$(t,r,a[0].barSize)}}),...a.map(e=>({stackId:void 0,dataKeys:[e.dataKey].filter(e=>null!=e),barSize:w$(t,r,e.barSize)}))]}),k$=(e,t,r,n)=>{var a,s;return"horizontal"===iv(e)?(a=SP(e,"xAxis",t,n),s=kP(e,"xAxis",t,n)):(a=SP(e,"yAxis",r,n),s=kP(e,"yAxis",r,n)),ab(a,s)};var S$,C$,O$,E$=Yx([_$,KC,e=>e.rootProps.barGap,VC,(e,t,r,n,a)=>{var s,i,o=v$(e,t,r,n,a);if(null!=o){var l,c,d=iv(e),u=KC(e),{maxBarSize:h}=o,m=Tm(h)?u:h;return"horizontal"===d?(l=SP(e,"xAxis",t,n),c=kP(e,"xAxis",t,n)):(l=SP(e,"yAxis",r,n),c=kP(e,"yAxis",r,n)),null!==(s=null!==(i=ab(l,c,!0))&&void 0!==i?i:m)&&void 0!==s?s:0}},k$,j$],(e,t,r,n,a,s,i)=>{var o=Tm(i)?t:i,l=function(e,t,r,n,a){var s=n.length;if(!(s<1)){var i,o=Cm(e,r,0,!0),l=[];if(Wb(n[0].barSize)){var c=!1,d=r/s,u=n.reduce((e,t)=>e+(t.barSize||0),0);(u+=(s-1)*o)>=r&&(u-=(s-1)*o,o=0),u>=r&&d>0&&(c=!0,u=s*(d*=.9));var h={offset:((r-u)/2|0)-o,size:0};i=n.reduce((e,t)=>{var r,n=[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:h.offset+h.size+o,size:c?d:null!==(r=t.barSize)&&void 0!==r?r:0}}];return h=n[n.length-1].position,n},l)}else{var m=Cm(t,r,0,!0);r-2*m-(s-1)*o<=0&&(o=0);var p=(r-2*m-(s-1)*o)/s;p>1&&(p>>=0);var x=Wb(a)?Math.min(p,a):p;i=n.reduce((e,t,r)=>[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:m+(p+o)*r+(p-x)/2,size:x}}],l)}return i}}(r,n,a!==s?a:s,e,o);return a!==s&&null!=l&&(l=l.map(e=>y$(y$({},e),{},{position:y$(y$({},e.position),{},{offset:e.position.offset-a/2})}))),l}),P$=Yx([E$,v$],(e,t)=>{if(null!=e&&null!=t){var r=e.find(e=>e.stackId===t.stackId&&null!=t.dataKey&&e.dataKeys.includes(t.dataKey));if(null!=r)return r.position}}),T$=Yx([(e,t,r,n)=>"horizontal"===iv(e)?mE(e,"yAxis",r,n):mE(e,"xAxis",t,n),v$],(e,t)=>{var r=NO(t);if(e&&null!=r&&null!=t){var{stackId:n}=t;if(null!=n){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(e=>e.key===r)}}}}),A$=Yx([Nb,kb,(e,t,r,n)=>SP(e,"xAxis",t,n),(e,t,r,n)=>SP(e,"yAxis",r,n),(e,t,r,n)=>kP(e,"xAxis",t,n),(e,t,r,n)=>kP(e,"yAxis",r,n),P$,iv,HS,k$,T$,v$,(e,t,r,n,a,s)=>s],(e,t,r,n,a,s,i,o,l,c,d,u,h)=>{var{chartData:m,dataStartIndex:p,dataEndIndex:x}=l;if(null!=u&&null!=i&&null!=t&&("horizontal"===o||"vertical"===o)&&null!=r&&null!=n&&null!=a&&null!=s&&null!=c){var f,{data:g}=u;if(null!=(f=null!=g&&g.length>0?g:null==m?void 0:m.slice(p,x+1)))return p$({layout:o,barSettings:u,pos:i,parentViewBox:t,bandSize:c,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:d,displayedData:f,offset:e,cells:h})}}),M$=e=>{var{chartData:t}=e,r=$x(),n=Cb();return u.useEffect(()=>n?()=>{}:(r(RA(t)),()=>{r(RA(void 0))}),[t,r,n]),null},D$={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},I$=Wg({name:"brush",initialState:D$,reducers:{setBrushSettings:(e,t)=>null==t.payload?D$:t.payload}}),{setBrushSettings:R$}=I$.actions,$$=I$.reducer;class L${static create(e){return new L$(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+n;case"end":var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}if(t){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var t=this.range(),r=t[0],n=t[t.length-1];return r<=n?e>=r&&e<=n:e>=n&&e<=r}}S$=L$,O$=1e-4,(C$=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(C$="EPS"))in S$?Object.defineProperty(S$,C$,{value:O$,enumerable:!0,configurable:!0,writable:!0}):S$[C$]=O$;var F$=Wg({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=vg(e).dots.findIndex(e=>e===t.payload);-1!==r&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=vg(e).areas.findIndex(e=>e===t.payload);-1!==r&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=vg(e).lines.findIndex(e=>e===t.payload);-1!==r&&e.lines.splice(r,1)}}}),{addDot:z$,removeDot:U$,addArea:B$,removeArea:q$,addLine:W$,removeLine:K$}=F$.actions,V$=F$.reducer,H$=u.createContext(void 0),G$=e=>{var{children:t}=e,[r]=u.useState("".concat(Sm("recharts"),"-clip")),n=wR();if(null==n)return null;var{x:a,y:s,width:i,height:o}=n;return u.createElement(H$.Provider,{value:r},u.createElement("defs",null,u.createElement("clipPath",{id:r},u.createElement("rect",{x:a,y:s,height:o,width:i}))),t)};function Y$(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function J$(e,t,r){if(t<1)return[];if(1===t&&void 0===r)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function Z$(e,t,r){return function(e){var{width:t,height:r}=e,n=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=n*Math.PI/180,s=Math.atan(r/t),i=a>s&&a<Math.PI-s?r/Math.sin(a):t/Math.cos(a);return Math.abs(i)}({width:e.width+t.width,height:e.height+t.height},r)}function Q$(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function X$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X$(Object(r),!0).forEach(function(t){tL(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tL(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rL(e,t,r){var n,{tick:a,ticks:s,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:u,angle:h}=e;if(!s||!s.length||!a)return[];if(Nm(c)||Uv)return null!==(n=function(e,t){return J$(e,t+1)}(s,Nm(c)?c:0))&&void 0!==n?n:[];var m=[],p="top"===l||"bottom"===l?"width":"height",x=u&&"width"===p?dM(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},f=(e,n)=>{var a="function"==typeof d?d(e.value,n):e.value;return"width"===p?Z$(dM(a,{fontSize:t,letterSpacing:r}),x,h):dM(a,{fontSize:t,letterSpacing:r})[p]},g=s.length>=2?vm(s[1].coordinate-s[0].coordinate):1,y=function(e,t,r){var n="width"===r,{x:a,y:s,width:i,height:o}=e;return 1===t?{start:n?a:s,end:n?a+i:s+o}:{start:n?a+i:s+o,end:n?a:s}}(i,g,p);return"equidistantPreserveStart"===c?function(e,t,r,n,a){for(var s,i=(n||[]).slice(),{start:o,end:l}=t,c=0,d=1,u=o,h=function(){var t=null==n?void 0:n[c];if(void 0===t)return{v:J$(n,d)};var s,i=c,h=()=>(void 0===s&&(s=r(t,i)),s),m=t.coordinate,p=0===c||Q$(e,m,h,u,l);p||(c=0,u=o,d+=1),p&&(u=m+e*(h()/2+a),c+=d)};d<=i.length;)if(s=h())return s.v;return[]}(g,y,f,s,o):(m="preserveStart"===c||"preserveStartEnd"===c?function(e,t,r,n,a,s){var i=(n||[]).slice(),o=i.length,{start:l,end:c}=t;if(s){var d=n[o-1],u=r(d,o-1),h=e*(d.coordinate+e*u/2-c);i[o-1]=d=eL(eL({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate}),Q$(e,d.tickCoord,()=>u,l,c)&&(c=d.tickCoord-e*(u/2+a),i[o-1]=eL(eL({},d),{},{isShow:!0}))}for(var m=s?o-1:o,p=function(t){var n,s=i[t],o=()=>(void 0===n&&(n=r(s,t)),n);if(0===t){var d=e*(s.coordinate-e*o()/2-l);i[t]=s=eL(eL({},s),{},{tickCoord:d<0?s.coordinate-d*e:s.coordinate})}else i[t]=s=eL(eL({},s),{},{tickCoord:s.coordinate});Q$(e,s.tickCoord,o,l,c)&&(l=s.tickCoord+e*(o()/2+a),i[t]=eL(eL({},s),{},{isShow:!0}))},x=0;x<m;x++)p(x);return i}(g,y,f,s,o,"preserveStartEnd"===c):function(e,t,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:o}=t,{end:l}=t,c=function(t){var n,c=s[t],d=()=>(void 0===n&&(n=r(c,t)),n);if(t===i-1){var u=e*(c.coordinate+e*d()/2-l);s[t]=c=eL(eL({},c),{},{tickCoord:u>0?c.coordinate-u*e:c.coordinate})}else s[t]=c=eL(eL({},c),{},{tickCoord:c.coordinate});Q$(e,c.tickCoord,d,o,l)&&(l=c.tickCoord-e*(d()/2+a),s[t]=eL(eL({},c),{},{isShow:!0}))},d=i-1;d>=0;d--)c(d);return s}(g,y,f,s,o),m.filter(e=>e.isShow))}var nL=["axisLine","width","height","className","hide","ticks"],aL=["viewBox"],sL=["viewBox"];function iL(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function oL(){return oL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oL.apply(null,arguments)}function lL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function cL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lL(Object(r),!0).forEach(function(t){dL(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function dL(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var uL={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function hL(e){var{x:t,y:r,width:n,height:a,orientation:s,mirror:i,axisLine:o,otherSvgProps:l}=e;if(!o)return null;var c=cL(cL(cL({},l),$u(o)),{},{fill:"none"});if("top"===s||"bottom"===s){var d=+("top"===s&&!i||"bottom"===s&&i);c=cL(cL({},c),{},{x1:t,y1:r+d*a,x2:t+n,y2:r+d*a})}else{var h=+("left"===s&&!i||"right"===s&&i);c=cL(cL({},c),{},{x1:t+h*n,y1:r,x2:t+h*n,y2:r+a})}return u.createElement("line",oL({},c,{className:Tu("recharts-cartesian-axis-line",bm(o,"className"))}))}function mL(e){var t,{option:r,tickProps:n,value:a}=e,s=Tu(n.className,"recharts-cartesian-axis-tick-value");if(u.isValidElement(r))t=u.cloneElement(r,cL(cL({},n),{},{className:s}));else if("function"==typeof r)t=r(cL(cL({},n),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";"boolean"!=typeof r&&(i=Tu(i,null==r?void 0:r.className)),t=u.createElement(AM,oL({},n,{className:i}),a)}return t}function pL(e){var{ticks:t=[],tick:r,tickLine:n,stroke:a,tickFormatter:s,unit:i,padding:o,tickTextProps:l,orientation:c,mirror:d,x:h,y:m,width:p,height:x,tickSize:f,tickMargin:g,fontSize:y,letterSpacing:b,getTicksConfig:v,events:j}=e,w=rL(cL(cL({},v),{},{ticks:t}),y,b),N=function(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}(c,d),_=function(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}(c,d),k=$u(v),S=Lu(r),C={};"object"==typeof n&&(C=n);var O=cL(cL({},k),{},{fill:"none"},C),E=w.map((e,t)=>{var{line:y,tick:b}=function(e,t,r,n,a,s,i,o,l){var c,d,u,h,m,p,x=o?-1:1,f=e.tickSize||i,g=Nm(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":c=d=e.coordinate,p=(u=(h=r+ +!o*a)-x*f)-x*l,m=g;break;case"left":u=h=e.coordinate,m=(c=(d=t+ +!o*n)-x*f)-x*l,p=g;break;case"right":u=h=e.coordinate,m=(c=(d=t+ +o*n)+x*f)+x*l,p=g;break;default:c=d=e.coordinate,p=(u=(h=r+ +o*a)+x*f)+x*l,m=g}return{line:{x1:c,y1:u,x2:d,y2:h},tick:{x:m,y:p}}}(e,h,m,p,x,c,f,d,g),v=cL(cL(cL(cL({textAnchor:N,verticalAnchor:_},k),{},{stroke:"none",fill:a},S),b),{},{index:t,payload:e,visibleTicksCount:w.length,tickFormatter:s,padding:o},l);return u.createElement(Vu,oL({className:"recharts-cartesian-axis-tick",key:"tick-".concat(e.value,"-").concat(e.coordinate,"-").concat(e.tickCoord)},Bm(j,e,t)),n&&u.createElement("line",oL({},O,y,{className:Tu("recharts-cartesian-axis-tick-line",bm(n,"className"))})),r&&u.createElement(mL,{option:r,tickProps:v,value:"".concat("function"==typeof s?s(e.value,t):e.value).concat(i||"")}))});return E.length>0?u.createElement("g",{className:"recharts-cartesian-axis-ticks"},E):null}var xL=u.forwardRef((e,t)=>{var{axisLine:r,width:n,height:a,className:s,hide:i,ticks:o}=e,l=iL(e,nL),[c,d]=u.useState(""),[h,m]=u.useState(""),p=u.useRef(null);u.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var t;return(e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,i=0;if(t){Array.from(t).forEach(e=>{if(e){var t=e.getBoundingClientRect();t.width>i&&(i=t.width)}});var o=r?r.getBoundingClientRect().width:0,l=i+(a+s)+o+(r?n:0);return Math.round(l)}return 0})({ticks:p.current,label:null===(t=e.labelRef)||void 0===t?void 0:t.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var x=u.useCallback(e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");p.current=t;var r=t[0];if(r){var n=window.getComputedStyle(r),a=n.fontSize,s=n.letterSpacing;a===c&&s===h||(d(a),m(s))}}},[c,h]);return i||null!=n&&n<=0||null!=a&&a<=0?null:u.createElement(Vu,{className:Tu("recharts-cartesian-axis",s),ref:x},u.createElement(hL,{x:e.x,y:e.y,width:n,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:$u(e)}),u.createElement(pL,{ticks:o,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:c,letterSpacing:h,getTicksConfig:e,events:l}),u.createElement(FM,{x:e.x,y:e.y,width:e.width,height:e.height},u.createElement(HM,{label:e.label,labelRef:e.labelRef}),e.children))}),fL=u.memo(xL,(e,t)=>{var{viewBox:r}=e,n=iL(e,aL),{viewBox:a}=t,s=iL(t,sL);return Y$(r,a)&&Y$(n,s)}),gL=u.forwardRef((e,t)=>{var r=oj(e,uL);return u.createElement(fL,oL({},r,{ref:t}))});gL.displayName="CartesianAxis";var yL=["x1","y1","x2","y2","key"],bL=["offset"],vL=["xAxisId","yAxisId"],jL=["xAxisId","yAxisId"];function wL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function NL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wL(Object(r),!0).forEach(function(t){_L(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _L(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kL(){return kL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kL.apply(null,arguments)}function SL(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var CL=e=>{var{fill:t}=e;if(!t||"none"===t)return null;var{fillOpacity:r,x:n,y:a,width:s,height:i,ry:o}=e;return u.createElement("rect",{x:n,y:a,ry:o,width:s,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function OL(e,t){var r;if(u.isValidElement(e))r=u.cloneElement(e,t);else if("function"==typeof e)r=e(t);else{var{x1:n,y1:a,x2:s,y2:i,key:o}=t,l=$u(SL(t,yL)),{offset:c}=l,d=SL(l,bL);r=u.createElement("line",kL({},d,{x1:n,y1:a,x2:s,y2:i,fill:"none",key:o}))}return r}function EL(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=SL(e,vL),l=a.map((e,a)=>{var s=NL(NL({},o),{},{x1:t,y1:e,x2:t+r,y2:e,key:"line-".concat(a),index:a});return OL(n,s)});return u.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function PL(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=SL(e,jL),l=a.map((e,a)=>{var s=NL(NL({},o),{},{x1:e,y1:t,x2:e,y2:t+r,key:"line-".concat(a),index:a});return OL(n,s)});return u.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function TL(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:i,horizontalPoints:o,horizontal:l=!0}=e;if(!l||!t||!t.length)return null;var c=o.map(e=>Math.round(e+a-a)).sort((e,t)=>e-t);a!==c[0]&&c.unshift(0);var d=c.map((e,o)=>{var l=!c[o+1]?a+i-e:c[o+1]-e;if(l<=0)return null;var d=o%t.length;return u.createElement("rect",{key:"react-".concat(o),y:e,x:n,height:l,width:s,stroke:"none",fill:t[d],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return u.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function AL(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:i,height:o,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var c=l.map(e=>Math.round(e+a-a)).sort((e,t)=>e-t);a!==c[0]&&c.unshift(0);var d=c.map((e,t)=>{var l=!c[t+1]?a+i-e:c[t+1]-e;if(l<=0)return null;var d=t%r.length;return u.createElement("rect",{key:"react-".concat(t),x:e,y:s,width:l,height:o,stroke:"none",fill:r[d],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return u.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var ML=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return Hy(rL(NL(NL(NL({},uL),r),{},{ticks:Gy(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},DL=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return Hy(rL(NL(NL(NL({},uL),r),{},{ticks:Gy(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},IL={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function RL(e){var t=av(),r=sv(),n=nv(),a=NL(NL({},oj(e,IL)),{},{x:Nm(e.x)?e.x:n.left,y:Nm(e.y)?e.y:n.top,width:Nm(e.width)?e.width:n.width,height:Nm(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:i,x:o,y:l,width:c,height:d,syncWithTicks:h,horizontalValues:m,verticalValues:p}=a,x=Cb(),f=Ux(e=>NP(e,"xAxis",s,x)),g=Ux(e=>NP(e,"yAxis",i,x));if(!Nm(c)||c<=0||!Nm(d)||d<=0||!Nm(o)||o!==+o||!Nm(l)||l!==+l)return null;var y=a.verticalCoordinatesGenerator||ML,b=a.horizontalCoordinatesGenerator||DL,{horizontalPoints:v,verticalPoints:j}=a;if(!(v&&v.length||"function"!=typeof b)){var w=m&&m.length,N=b({yAxis:g?NL(NL({},g),{},{ticks:w?m:g.ticks}):void 0,width:t,height:r,offset:n},!!w||h);$b(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(v=N)}if(!(j&&j.length||"function"!=typeof y)){var _=p&&p.length,k=y({xAxis:f?NL(NL({},f),{},{ticks:_?p:f.ticks}):void 0,width:t,height:r,offset:n},!!_||h);$b(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(j=k)}return u.createElement("g",{className:"recharts-cartesian-grid"},u.createElement(CL,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),u.createElement(TL,kL({},a,{horizontalPoints:v})),u.createElement(AL,kL({},a,{verticalPoints:j})),u.createElement(EL,kL({},a,{offset:n,horizontalPoints:v,xAxis:f,yAxis:g})),u.createElement(PL,kL({},a,{offset:n,verticalPoints:j,xAxis:f,yAxis:g})))}RL.displayName="CartesianGrid";var $L=(e,t,r,n)=>SP(e,"xAxis",t,n),LL=(e,t,r,n)=>kP(e,"xAxis",t,n),FL=(e,t,r,n)=>SP(e,"yAxis",r,n),zL=(e,t,r,n)=>kP(e,"yAxis",r,n),UL=Yx([iv,$L,FL,LL,zL],(e,t,r,n,a)=>Vy(e,"xAxis")?ab(t,n,!1):ab(r,a,!1));function BL(e){return"line"===e.type}var qL=Yx([GO,(e,t,r,n,a)=>a],(e,t)=>e.filter(BL).find(e=>e.id===t)),WL=Yx([iv,$L,FL,LL,zL,qL,UL,HS],(e,t,r,n,a,s,i,o)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:d}=o;if(null!=s&&null!=t&&null!=r&&null!=n&&null!=a&&0!==n.length&&0!==a.length&&null!=i){var u,{dataKey:h,data:m}=s;if(null!=(u=null!=m&&m.length>0?m:null==l?void 0:l.slice(c,d+1)))return function(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,dataKey:i,bandSize:o,displayedData:l}=e;return l.map((e,l)=>{var c=Ky(e,i);if("horizontal"===t)return{x:Xy({axis:r,ticks:a,bandSize:o,entry:e,index:l}),y:Tm(c)?null:n.scale(c),value:c,payload:e};var d=Tm(c)?null:r.scale(c),u=Xy({axis:n,ticks:s,bandSize:o,entry:e,index:l});return null==d||null==u?null:{x:d,y:u,value:c,payload:e}}).filter(Boolean)}({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:h,bandSize:i,displayedData:u})}});function KL(e){var t=Lu(e);if(null!=t){var{r,strokeWidth:n}=t,a=Number(r),s=Number(n);return(Number.isNaN(a)||a<0)&&(a=3),(Number.isNaN(s)||s<0)&&(s=2),{r:a,strokeWidth:s}}return{r:3,strokeWidth:2}}var VL=["id"],HL=["type","layout","connectNulls","needClip"],GL=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function YL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function JL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?YL(Object(r),!0).forEach(function(t){ZL(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ZL(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QL(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function XL(){return XL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},XL.apply(null,arguments)}var eF=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:ib(r,t),payload:e}]};function tF(e){var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:s,name:i,hide:o,unit:l}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:s,dataKey:t,nameKey:void 0,name:ib(i,t),hide:o,type:e.tooltipType,color:e.stroke,unit:l}}}var rF=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function nF(e,t){for(var r=e.length%2!=0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}function aF(e){var{clipPathId:t,points:r,props:n}=e,{dot:a,dataKey:s,needClip:i}=n;if(!function(e,t){return null!=e&&(!!t||1===e.length)}(r,a))return null;var{id:o}=n,l=QL(n,VL),c=aI(a),d=$u(l),h=zu(a),m=r.map((e,t)=>{var n=JL(JL(JL({key:"dot-".concat(t),r:3},d),h),{},{index:t,cx:e.x,cy:e.y,dataKey:s,value:e.value,payload:e.payload,points:r});return function(e,t){var r;if(u.isValidElement(e))r=u.cloneElement(e,t);else if("function"==typeof e)r=e(t);else{var n=Tu("recharts-line-dot","boolean"!=typeof e?e.className:"");r=u.createElement(yD,XL({},t,{className:n}))}return r}(a,n)}),p={clipPath:i?"url(#clipPath-".concat(c?"":"dots-").concat(t,")"):void 0};return u.createElement(Vu,XL({className:"recharts-line-dots",key:"dots"},p),m)}function sF(e){var{showLabels:t,children:r,points:n}=e,a=u.useMemo(()=>null==n?void 0:n.map(e=>{var t={x:e.x,y:e.y,width:0,height:0};return JL(JL({},t),{},{value:e.value,payload:e.payload,viewBox:t,parentViewBox:void 0,fill:void 0})}),[n]);return u.createElement(hD,{value:t?a:null},r)}function iF(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:a,props:s}=e,{type:i,layout:o,connectNulls:l,needClip:c}=s,d=JL(JL({},Fu(QL(s,HL))),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(t,")"):void 0,points:n,type:i,layout:o,connectNulls:l,strokeDasharray:null!=a?a:s.strokeDasharray});return u.createElement(u.Fragment,null,(null==n?void 0:n.length)>1&&u.createElement(Qv,XL({},d,{pathRef:r})),u.createElement(aF,{points:n,clipPathId:t,props:s}))}function oF(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:s}=e,{points:i,strokeDasharray:o,isAnimationActive:l,animationBegin:c,animationDuration:d,animationEasing:h,animateNewValues:m,width:p,height:x,onAnimationEnd:f,onAnimationStart:g}=r,y=a.current,b=Rj(r,"recharts-line-"),[v,j]=u.useState(!1),w=!v,N=u.useCallback(()=>{"function"==typeof f&&f(),j(!1)},[f]),_=u.useCallback(()=>{"function"==typeof g&&g(),j(!0)},[g]),k=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}(n.current),S=s.current;return u.createElement(sF,{points:i,showLabels:w},r.children,u.createElement(Ij,{animationId:b,begin:c,duration:d,isActive:l,easing:h,onAnimationEnd:N,onAnimationStart:_,key:b},e=>{var c,d=Em(S,k+S,e),h=Math.min(d,k);if(l)if(o){var f="".concat(o).split(/[,\s]+/gim).map(e=>parseFloat(e));c=((e,t,r)=>{var n=r.reduce((e,t)=>e+t);if(!n)return rF(t,e);for(var a=Math.floor(e/n),s=e%n,i=t-e,o=[],l=0,c=0;l<r.length;c+=r[l],++l)if(c+r[l]>s){o=[...r.slice(0,l),s-c];break}var d=o.length%2==0?[0,i]:[i];return[...nF(r,a),...o,...d].map(e=>"".concat(e,"px")).join(", ")})(h,k,f)}else c=rF(k,h);else c=null==o?void 0:String(o);if(y){var g=y.length/i.length,b=1===e?i:i.map((t,r)=>{var n=Math.floor(r*g);if(y[n]){var a=y[n];return JL(JL({},t),{},{x:Em(a.x,t.x,e),y:Em(a.y,t.y,e)})}return JL(JL({},t),{},m?{x:Em(2*p,t.x,e),y:Em(x/2,t.y,e)}:{x:t.x,y:t.y})});return a.current=b,u.createElement(iF,{props:r,points:b,clipPathId:t,pathRef:n,strokeDasharray:c})}return e>0&&k>0&&(a.current=i,s.current=h),u.createElement(iF,{props:r,points:i,clipPathId:t,pathRef:n,strokeDasharray:c})}),u.createElement(fD,{label:r.label}))}function lF(e){var{clipPathId:t,props:r}=e,n=u.useRef(null),a=u.useRef(0),s=u.useRef(null);return u.createElement(oF,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:a,pathRef:s})}var cF=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Ky(e.payload,t)});class dF extends u.Component{render(){var{hide:e,dot:t,points:r,className:n,xAxisId:a,yAxisId:s,top:i,left:o,width:l,height:c,id:d,needClip:h}=this.props;if(e)return null;var m=Tu("recharts-line",n),p=d,{r:x,strokeWidth:f}=KL(t),g=aI(t),y=2*x+f;return u.createElement(u.Fragment,null,u.createElement(Vu,{className:m},h&&u.createElement("defs",null,u.createElement(KR,{clipPathId:p,xAxisId:a,yAxisId:s}),!g&&u.createElement("clipPath",{id:"clipPath-dots-".concat(p)},u.createElement("rect",{x:o-y/2,y:i-y/2,width:l+y,height:c+y}))),u.createElement(qR,{xAxisId:a,yAxisId:s,data:r,dataPointFormatter:cF,errorBarOffset:0},u.createElement(lF,{props:this.props,clipPathId:p}))),u.createElement(SR,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var uF={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Uv,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function hF(e){var t=oj(e,uF),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:s,animationEasing:i,connectNulls:o,dot:l,hide:c,isAnimationActive:d,label:h,legendType:m,xAxisId:p,yAxisId:x,id:f}=t,g=QL(t,GL),{needClip:y}=WR(p,x),b=wR(),v=ov(),j=Cb(),w=Ux(e=>WL(e,p,x,j,f));if("horizontal"!==v&&"vertical"!==v||null==w||null==b)return null;var{height:N,width:_,x:k,y:S}=b;return u.createElement(dF,XL({},g,{id:f,connectNulls:o,dot:l,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:s,animationEasing:i,isAnimationActive:d,hide:c,label:h,legendType:m,xAxisId:p,yAxisId:x,points:w,layout:v,height:N,width:_,left:k,top:S,needClip:y}))}function mF(e){var t=oj(e,uF),r=Cb();return u.createElement(AI,{id:t.id,type:"line"},e=>u.createElement(u.Fragment,null,u.createElement(OI,{legendPayload:eF(t)}),u.createElement(kI,{fn:tF,args:t}),u.createElement(zI,{type:"line",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),u.createElement(hF,XL({},t,{id:e}))))}var pF=u.memo(mF);pF.displayName="Line";var xF=(e,t,r,n)=>SP(e,"xAxis",t,n),fF=(e,t,r,n)=>kP(e,"xAxis",t,n),gF=(e,t,r,n)=>SP(e,"yAxis",r,n),yF=(e,t,r,n)=>kP(e,"yAxis",r,n),bF=Yx([iv,xF,gF,fF,yF],(e,t,r,n,a)=>Vy(e,"xAxis")?ab(t,n,!1):ab(r,a,!1)),vF=Yx([GO,(e,t,r,n,a)=>a],(e,t)=>e.filter(e=>"area"===e.type).find(e=>e.id===t)),jF=Yx([iv,xF,gF,fF,yF,(e,t,r,n,a)=>{var s,i=vF(e,t,r,n,a);if(null!=i){var o,l=iv(e);if(null!=(o=Vy(l,"xAxis")?mE(e,"yAxis",r,n):mE(e,"xAxis",t,n))){var{stackId:c}=i,d=NO(i);if(null!=c&&null!=d){var u=null===(s=o[c])||void 0===s?void 0:s.stackedData;return null==u?void 0:u.find(e=>e.key===d)}}}},HS,bF,vF],(e,t,r,n,a,s,i,o,l)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:u}=i;if(null!=l&&("horizontal"===e||"vertical"===e)&&null!=t&&null!=r&&null!=n&&null!=a&&0!==n.length&&0!==a.length&&null!=o){var h,{data:m}=l;if(null!=(h=m&&m.length>0?m:null==c?void 0:c.slice(d,u+1))){return function(e){var t,{areaSettings:{connectNulls:r,baseValue:n,dataKey:a},stackedData:s,layout:i,chartBaseValue:o,xAxis:l,yAxis:c,displayedData:d,dataStartIndex:u,xAxisTicks:h,yAxisTicks:m,bandSize:p}=e,x=s&&s.length,f=qF(i,o,n,l,c),g="horizontal"===i,y=!1,b=d.map((e,t)=>{var n;x?n=s[u+t]:(n=Ky(e,a),Array.isArray(n)?y=!0:n=[f,n]);var i=null==n[1]||x&&!r&&null==Ky(e,a);return g?{x:Xy({axis:l,ticks:h,bandSize:p,entry:e,index:t}),y:i?null:c.scale(n[1]),value:n,payload:e}:{x:i?null:l.scale(n[1]),y:Xy({axis:c,ticks:m,bandSize:p,entry:e,index:t}),value:n,payload:e}});t=x||y?b.map(e=>{var t=Array.isArray(e.value)?e.value[0]:null;return g?{x:e.x,y:null!=t&&null!=e.y?c.scale(t):null,payload:e.payload}:{x:null!=t?l.scale(t):null,y:e.y,payload:e.payload}}):g?c.scale(f):l.scale(f);return{points:b,baseLine:t,isRange:y}}({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataStartIndex:d,areaSettings:l,stackedData:s,displayedData:h,chartBaseValue:void 0,bandSize:o})}}}),wF=["id"],NF=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function _F(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function kF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function SF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kF(Object(r),!0).forEach(function(t){CF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function CF(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OF(){return OF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OF.apply(null,arguments)}function EF(e,t){return e&&"none"!==e?e:t}var PF=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:EF(n,a),value:ib(r,t),payload:e}]};function TF(e){var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:s,name:i,hide:o,unit:l}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:s,dataKey:t,nameKey:void 0,name:ib(i,t),hide:o,type:e.tooltipType,color:EF(n,s),unit:l}}}function AF(e){var{clipPathId:t,points:r,props:n}=e,{needClip:a,dot:s,dataKey:i}=n;if(!function(e,t){return null!=e&&(!!t||1===e.length)}(r,s))return null;var o=aI(s),l=$u(n),c=zu(s),d=r.map((e,t)=>{var n=SF(SF(SF({key:"dot-".concat(t),r:3},l),c),{},{index:t,cx:e.x,cy:e.y,dataKey:i,value:e.value,payload:e.payload,points:r});return((e,t)=>{var r;if(u.isValidElement(e))r=u.cloneElement(e,t);else if("function"==typeof e)r=e(t);else{var n=Tu("recharts-area-dot","boolean"!=typeof e?e.className:"");r=u.createElement(yD,OF({},t,{className:n}))}return r})(s,n)}),h={clipPath:a?"url(#clipPath-".concat(o?"":"dots-").concat(t,")"):void 0};return u.createElement(Vu,OF({className:"recharts-area-dots"},h),d)}function MF(e){var{showLabels:t,children:r,points:n}=e,a=n.map(e=>{var t={x:e.x,y:e.y,width:0,height:0};return SF(SF({},t),{},{value:e.value,payload:e.payload,parentViewBox:void 0,viewBox:t,fill:void 0})});return u.createElement(hD,{value:t?a:null},r)}function DF(e){var{points:t,baseLine:r,needClip:n,clipPathId:a,props:s}=e,{layout:i,type:o,stroke:l,connectNulls:c,isRange:d}=s,{id:h}=s,m=_F(s,wF),p=$u(m);return u.createElement(u.Fragment,null,(null==t?void 0:t.length)>1&&u.createElement(Vu,{clipPath:n?"url(#clipPath-".concat(a,")"):void 0},u.createElement(Qv,OF({},p,{id:h,points:t,connectNulls:c,type:o,baseLine:r,layout:i,stroke:"none",className:"recharts-area-area"})),"none"!==l&&u.createElement(Qv,OF({},p,{className:"recharts-area-curve",layout:i,type:o,connectNulls:c,fill:"none",points:t})),"none"!==l&&d&&u.createElement(Qv,OF({},p,{className:"recharts-area-curve",layout:i,type:o,connectNulls:c,fill:"none",points:r}))),u.createElement(AF,{points:t,props:m,clipPathId:a}))}function IF(e){var{alpha:t,baseLine:r,points:n,strokeWidth:a}=e,s=n[0].y,i=n[n.length-1].y;if(!Wb(s)||!Wb(i))return null;var o=t*Math.abs(s-i),l=Math.max(...n.map(e=>e.x||0));return Nm(r)?l=Math.max(r,l):r&&Array.isArray(r)&&r.length&&(l=Math.max(...r.map(e=>e.x||0),l)),Nm(l)?u.createElement("rect",{x:0,y:s<i?s:s-o,width:l+(a?parseInt("".concat(a),10):1),height:Math.floor(o)}):null}function RF(e){var{alpha:t,baseLine:r,points:n,strokeWidth:a}=e,s=n[0].x,i=n[n.length-1].x;if(!Wb(s)||!Wb(i))return null;var o=t*Math.abs(s-i),l=Math.max(...n.map(e=>e.y||0));return Nm(r)?l=Math.max(r,l):r&&Array.isArray(r)&&r.length&&(l=Math.max(...r.map(e=>e.y||0),l)),Nm(l)?u.createElement("rect",{x:s<i?s:s-o,y:0,width:o,height:Math.floor(l+(a?parseInt("".concat(a),10):1))}):null}function $F(e){var{alpha:t,layout:r,points:n,baseLine:a,strokeWidth:s}=e;return"vertical"===r?u.createElement(IF,{alpha:t,points:n,baseLine:a,strokeWidth:s}):u.createElement(RF,{alpha:t,points:n,baseLine:a,strokeWidth:s})}function LF(e){var{needClip:t,clipPathId:r,props:n,previousPointsRef:a,previousBaselineRef:s}=e,{points:i,baseLine:o,isAnimationActive:l,animationBegin:c,animationDuration:d,animationEasing:h,onAnimationStart:m,onAnimationEnd:p}=n,x=Rj(n,"recharts-area-"),[f,g]=u.useState(!1),y=!f,b=u.useCallback(()=>{"function"==typeof p&&p(),g(!1)},[p]),v=u.useCallback(()=>{"function"==typeof m&&m(),g(!0)},[m]),j=a.current,w=s.current;return u.createElement(MF,{showLabels:y,points:i},n.children,u.createElement(Ij,{animationId:x,begin:c,duration:d,isActive:l,easing:h,onAnimationEnd:b,onAnimationStart:v,key:x},e=>{if(j){var c,d=j.length/i.length,h=1===e?i:i.map((t,r)=>{var n=Math.floor(r*d);if(j[n]){var a=j[n];return SF(SF({},t),{},{x:Em(a.x,t.x,e),y:Em(a.y,t.y,e)})}return t});return c=Nm(o)?Em(w,o,e):Tm(o)||jm(o)?Em(w,0,e):o.map((t,r)=>{var n=Math.floor(r*d);if(Array.isArray(w)&&w[n]){var a=w[n];return SF(SF({},t),{},{x:Em(a.x,t.x,e),y:Em(a.y,t.y,e)})}return t}),e>0&&(a.current=h,s.current=c),u.createElement(DF,{points:h,baseLine:c,needClip:t,clipPathId:r,props:n})}return e>0&&(a.current=i,s.current=o),u.createElement(Vu,null,l&&u.createElement("defs",null,u.createElement("clipPath",{id:"animationClipPath-".concat(r)},u.createElement($F,{alpha:e,points:i,baseLine:o,layout:n.layout,strokeWidth:n.strokeWidth}))),u.createElement(Vu,{clipPath:"url(#animationClipPath-".concat(r,")")},u.createElement(DF,{points:i,baseLine:o,needClip:t,clipPathId:r,props:n})))}),u.createElement(fD,{label:n.label}))}function FF(e){var{needClip:t,clipPathId:r,props:n}=e,a=u.useRef(null),s=u.useRef();return u.createElement(LF,{needClip:t,clipPathId:r,props:n,previousPointsRef:a,previousBaselineRef:s})}class zF extends u.PureComponent{render(){var{hide:e,dot:t,points:r,className:n,top:a,left:s,needClip:i,xAxisId:o,yAxisId:l,width:c,height:d,id:h,baseLine:m}=this.props;if(e)return null;var p=Tu("recharts-area",n),x=h,{r:f,strokeWidth:g}=KL(t),y=aI(t),b=2*f+g;return u.createElement(u.Fragment,null,u.createElement(Vu,{className:p},i&&u.createElement("defs",null,u.createElement(KR,{clipPathId:x,xAxisId:o,yAxisId:l}),!y&&u.createElement("clipPath",{id:"clipPath-dots-".concat(x)},u.createElement("rect",{x:s-b/2,y:a-b/2,width:c+b,height:d+b}))),u.createElement(FF,{needClip:i,clipPathId:x,props:this.props})),u.createElement(SR,{points:r,mainColor:EF(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(m)&&u.createElement(SR,{points:m,mainColor:EF(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var UF={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!Uv,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function BF(e){var t,r=oj(e,UF),{activeDot:n,animationBegin:a,animationDuration:s,animationEasing:i,connectNulls:o,dot:l,fill:c,fillOpacity:d,hide:h,isAnimationActive:m,legendType:p,stroke:x,xAxisId:f,yAxisId:g}=r,y=_F(r,NF),b=ov(),v=aA(),{needClip:j}=WR(f,g),w=Cb(),{points:N,isRange:_,baseLine:k}=null!==(t=Ux(t=>jF(t,f,g,w,e.id)))&&void 0!==t?t:{},S=wR();if("horizontal"!==b&&"vertical"!==b||null==S)return null;if("AreaChart"!==v&&"ComposedChart"!==v)return null;var{height:C,width:O,x:E,y:P}=S;return N&&N.length?u.createElement(zF,OF({},y,{activeDot:n,animationBegin:a,animationDuration:s,animationEasing:i,baseLine:k,connectNulls:o,dot:l,fill:c,fillOpacity:d,height:C,hide:h,layout:b,isAnimationActive:m,isRange:_,legendType:p,needClip:j,points:N,stroke:x,width:O,left:E,top:P,xAxisId:f,yAxisId:g})):null}var qF=(e,t,r,n,a)=>{var s=null!=r?r:t;if(Nm(s))return s;var i="horizontal"===e?a:n,o=i.scale.domain();if("number"===i.type){var l=Math.max(o[0],o[1]),c=Math.min(o[0],o[1]);return"dataMin"===s?c:"dataMax"===s||l<0?l:Math.max(Math.min(o[0],o[1]),0)}return"dataMin"===s?o[0]:"dataMax"===s?o[1]:o[0]};function WF(e){var t=oj(e,UF),r=Cb();return u.createElement(AI,{id:t.id,type:"area"},e=>u.createElement(u.Fragment,null,u.createElement(OI,{legendPayload:PF(t)}),u.createElement(kI,{fn:TF,args:t}),u.createElement(zI,{type:"area",id:e,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:Qy(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:r,connectNulls:t.connectNulls}),u.createElement(BF,OF({},t,{id:e}))))}var KF=u.memo(WF);KF.displayName="Area";var VF=["dangerouslySetInnerHTML","ticks"],HF=["id"],GF=["domain"],YF=["domain"];function JF(){return JF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JF.apply(null,arguments)}function ZF(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function QF(e){var t=$x();return u.useLayoutEffect(()=>(t(hR(e)),()=>{t(mR(e))}),[e,t]),null}var XF=e=>{var{xAxisId:t,className:r}=e,n=Ux(kb),a=Cb(),s="xAxis",i=Ux(e=>sP(e,s,t,a)),o=Ux(e=>_P(e,s,t,a)),l=Ux(e=>hP(e,t)),c=Ux(e=>xP(e,t)),d=Ux(e=>$O(e,t));if(null==l||null==c||null==d)return null;var{dangerouslySetInnerHTML:h,ticks:m}=e,p=ZF(e,VF),{id:x}=d,f=ZF(d,HF);return u.createElement(gL,JF({},p,f,{scale:i,x:c.x,y:c.y,width:l.width,height:l.height,className:Tu("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o}))},ez={allowDataOverflow:RO.allowDataOverflow,allowDecimals:RO.allowDecimals,allowDuplicatedCategory:RO.allowDuplicatedCategory,height:RO.height,hide:!1,mirror:RO.mirror,orientation:RO.orientation,padding:RO.padding,reversed:RO.reversed,scale:RO.scale,tickCount:RO.tickCount,type:RO.type,xAxisId:0},tz=e=>{var t,r,n,a,s,i=oj(e,ez);return u.createElement(u.Fragment,null,u.createElement(QF,{interval:null!==(t=i.interval)&&void 0!==t?t:"preserveEnd",id:i.xAxisId,scale:i.scale,type:i.type,padding:i.padding,allowDataOverflow:i.allowDataOverflow,domain:i.domain,dataKey:i.dataKey,allowDuplicatedCategory:i.allowDuplicatedCategory,allowDecimals:i.allowDecimals,tickCount:i.tickCount,includeHidden:null!==(r=i.includeHidden)&&void 0!==r&&r,reversed:i.reversed,ticks:i.ticks,height:i.height,orientation:i.orientation,mirror:i.mirror,hide:i.hide,unit:i.unit,name:i.name,angle:null!==(n=i.angle)&&void 0!==n?n:0,minTickGap:null!==(a=i.minTickGap)&&void 0!==a?a:5,tick:null===(s=i.tick)||void 0===s||s,tickFormatter:i.tickFormatter}),u.createElement(XF,i))},rz=(e,t)=>{var{domain:r}=e,n=ZF(e,GF),{domain:a}=t;return!!Y$(n,ZF(t,YF))&&(Array.isArray(r)&&2===r.length&&Array.isArray(a)&&2===a.length?r[0]===a[0]&&r[1]===a[1]:Y$({domain:r},{domain:a}))},nz=u.memo(tz,rz);nz.displayName="XAxis";var az=["dangerouslySetInnerHTML","ticks"],sz=["id"],iz=["domain"],oz=["domain"];function lz(){return lz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lz.apply(null,arguments)}function cz(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function dz(e){var t=$x();return u.useLayoutEffect(()=>(t(pR(e)),()=>{t(xR(e))}),[e,t]),null}var uz=e=>{var{yAxisId:t,className:r,width:n,label:a}=e,s=u.useRef(null),i=u.useRef(null),o=Ux(kb),l=Cb(),c=$x(),d="yAxis",h=Ux(e=>sP(e,d,t,l)),m=Ux(e=>gP(e,t)),p=Ux(e=>fP(e,t)),x=Ux(e=>_P(e,d,t,l)),f=Ux(e=>zO(e,t));if(u.useLayoutEffect(()=>{if("auto"===n&&m&&!BM(a)&&!u.isValidElement(a)&&null!=f){var e=s.current;if(e){var r=e.getCalculatedWidth();Math.round(m.width)!==Math.round(r)&&c(yR({id:t,width:r}))}}},[x,m,c,a,t,n,f]),null==m||null==p||null==f)return null;var{dangerouslySetInnerHTML:g,ticks:y}=e,b=cz(e,az),{id:v}=f,j=cz(f,sz);return u.createElement(gL,lz({},b,j,{ref:s,labelRef:i,scale:h,x:p.x,y:p.y,tickTextProps:"auto"===n?{width:void 0}:{width:n},width:m.width,height:m.height,className:Tu("recharts-".concat(d," ").concat(d),r),viewBox:o,ticks:x}))},hz={allowDataOverflow:FO.allowDataOverflow,allowDecimals:FO.allowDecimals,allowDuplicatedCategory:FO.allowDuplicatedCategory,hide:!1,mirror:FO.mirror,orientation:FO.orientation,padding:FO.padding,reversed:FO.reversed,scale:FO.scale,tickCount:FO.tickCount,type:FO.type,width:FO.width,yAxisId:0},mz=e=>{var t,r,n,a,s,i=oj(e,hz);return u.createElement(u.Fragment,null,u.createElement(dz,{interval:null!==(t=i.interval)&&void 0!==t?t:"preserveEnd",id:i.yAxisId,scale:i.scale,type:i.type,domain:i.domain,allowDataOverflow:i.allowDataOverflow,dataKey:i.dataKey,allowDuplicatedCategory:i.allowDuplicatedCategory,allowDecimals:i.allowDecimals,tickCount:i.tickCount,padding:i.padding,includeHidden:null!==(r=i.includeHidden)&&void 0!==r&&r,reversed:i.reversed,ticks:i.ticks,width:i.width,orientation:i.orientation,mirror:i.mirror,hide:i.hide,unit:i.unit,name:i.name,angle:null!==(n=i.angle)&&void 0!==n?n:0,minTickGap:null!==(a=i.minTickGap)&&void 0!==a?a:5,tick:null===(s=i.tick)||void 0===s||s,tickFormatter:i.tickFormatter}),u.createElement(uz,i))},pz=(e,t)=>{var{domain:r}=e,n=cz(e,iz),{domain:a}=t;return!!Y$(n,cz(t,oz))&&(Array.isArray(r)&&2===r.length&&Array.isArray(a)&&2===a.length?r[0]===a[0]&&r[1]===a[1]:Y$({domain:r},{domain:a}))},xz=u.memo(mz,pz);xz.displayName="YAxis";var fz,gz,yz={exports:{}},bz={};gz||(gz=1,yz.exports=function(){if(fz)return bz;fz=1;var e=d(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=e.useSyncExternalStore,n=e.useRef,a=e.useEffect,s=e.useMemo,i=e.useDebugValue;return bz.useSyncExternalStoreWithSelector=function(e,o,l,c,d){var u=n(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=s(function(){function e(e){if(!a){if(a=!0,r=e,e=c(e),void 0!==d&&h.hasValue){var s=h.value;if(d(s,e))return n=s}return n=e}if(s=n,t(r,e))return s;var i=c(e);return void 0!==d&&d(s,i)?(r=e,s):(r=e,n=i)}var r,n,a=!1,s=void 0===l?null:l;return[function(){return e(o())},null===s?void 0:function(){return e(s())}]},[o,l,c,d]);var m=r(e,u[0],u[1]);return a(function(){h.hasValue=!0,h.value=m},[m]),i(m),m},bz}()),yz.exports;var vz={notify(){},get:()=>[]};var jz=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),wz=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),Nz=(()=>jz||wz?u.useLayoutEffect:u.useEffect)(),_z=Symbol.for("react-redux-context"),kz="undefined"!=typeof globalThis?globalThis:{};function Sz(){if(!u.createContext)return{};const e=kz[_z]??(kz[_z]=new Map);let t=e.get(u.createContext);return t||(t=u.createContext(null),e.set(u.createContext,t)),t}var Cz=Sz();var Oz=function(e){const{children:t,context:r,serverState:n,store:a}=e,s=u.useMemo(()=>{const e=function(e){let t,r=vz,n=0,a=!1;function s(){l.onStateChange&&l.onStateChange()}function i(){n++,t||(t=e.subscribe(s),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){(()=>{let t=e;for(;t;)t.callback(),t=t.next})()},get(){const t=[];let r=e;for(;r;)t.push(r),r=r.next;return t},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){n&&null!==e&&(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}())}function o(){n--,t&&0===n&&(t(),t=void 0,r.clear(),r=vz)}const l={addNestedSub:function(e){i();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),o())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:s,isSubscribed:function(){return a},trySubscribe:function(){a||(a=!0,i())},tryUnsubscribe:function(){a&&(a=!1,o())},getListeners:()=>r};return l}(a);return{store:a,subscription:e,getServerState:n?()=>n:void 0}},[a,n]),i=u.useMemo(()=>a.getState(),[a]);Nz(()=>{const{subscription:e}=s;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),i!==a.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[s,i]);const o=r||Cz;return u.createElement(o.Provider,{value:s},t)},Ez=Yx([(e,t)=>t,iv,vO,_O,RT,zT,lA,Nb],(e,t,r,n,a,s,i,o)=>{if(e&&t&&n&&a&&s){var l=function(e,t,r,n,a){return"horizontal"===r||"vertical"===r?e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height?{x:e,y:t}:null:n?zy({x:e,y:t},n):null}(e.chartX,e.chartY,t,r,o);if(l){var c=((e,t)=>"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius)(l,t),d=((e,t,r,n,a)=>{var s,i=-1,o=null!==(s=null==t?void 0:t.length)&&void 0!==s?s:0;if(o<=1||null==e)return 0;if("angleAxis"===n&&null!=a&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<o;l++){var c=l>0?r[l-1].coordinate:r[o-1].coordinate,d=r[l].coordinate,u=l>=o-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(vm(d-c)!==vm(u-d)){var m=[];if(vm(u-d)===vm(a[1]-a[0])){h=u;var p=d+a[1]-a[0];m[0]=Math.min(p,(p+c)/2),m[1]=Math.max(p,(p+c)/2)}else{h=c;var x=u+a[1]-a[0];m[0]=Math.min(d,(x+d)/2),m[1]=Math.max(d,(x+d)/2)}var f=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>f[0]&&e<=f[1]||e>=m[0]&&e<=m[1]){({index:i}=r[l]);break}}else{var g=Math.min(c,u),y=Math.max(c,u);if(e>(g+d)/2&&e<=(y+d)/2){({index:i}=r[l]);break}}}else if(t)for(var b=0;b<o;b++)if(0===b&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:i}=t[b]);break}return i})(c,i,s,n,a),u=((e,t,r,n)=>{var a=t.find(e=>e&&e.index===r);if(a){if("horizontal"===e)return{x:a.coordinate,y:n.y};if("vertical"===e)return{x:n.x,y:a.coordinate};if("centric"===e){var s=a.coordinate,{radius:i}=n;return qy(qy(qy({},n),Ry(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var o=a.coordinate,{angle:l}=n;return qy(qy(qy({},n),Ry(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}})(t,s,d,l);return{activeIndex:String(d),activeCoordinate:u}}}}),Pz=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},Tz=Eg("mouseClick"),Az=Ny();Az.startListening({actionCreator:Tz,effect:(e,t)=>{var r=e.payload,n=Ez(t.getState(),Pz(r));null!=(null==n?void 0:n.activeIndex)&&t.dispatch(WP({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Mz=Eg("mouseMove"),Dz=Ny();Dz.startListening({actionCreator:Mz,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=AP(n,n.tooltip.settings.shared),s=Ez(n,Pz(r));"axis"===a&&(null!=(null==s?void 0:s.activeIndex)?t.dispatch(qP({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(UP()))}});var Iz={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},Rz=Wg({name:"rootProps",initialState:Iz,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(r=t.payload.barGap)&&void 0!==r?r:Iz.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),$z=Rz.reducer,{updateOptions:Lz}=Rz.actions,Fz=Wg({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:zz}=Fz.actions,Uz=Fz.reducer,Bz=Eg("keyDown"),qz=Eg("focus"),Wz=Ny();Wz.startListening({actionCreator:Bz,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip,a=e.payload;if("ArrowRight"===a||"ArrowLeft"===a||"Enter"===a){var s=Number(QP(n,mT(r))),i=zT(r);if("Enter"!==a){var o=s+("ArrowRight"===a?1:-1)*("left-to-right"===OP(r)?1:-1);if(!(null==i||o>=i.length||o<0)){var l=hA(r,"axis","hover",String(o));t.dispatch(VP({active:!0,activeIndex:o.toString(),activeDataKey:void 0,activeCoordinate:l}))}}else{var c=hA(r,"axis","hover",String(n.index));t.dispatch(VP({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:c}))}}}}}),Wz.startListening({actionCreator:qz,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip;if(!n.active&&null==n.index){var a=hA(r,"axis","hover",String("0"));t.dispatch(VP({activeDataKey:void 0,active:!0,activeIndex:"0",activeCoordinate:a}))}}}});var Kz=Eg("externalEvent"),Vz=Ny();Vz.startListening({actionCreator:Kz,effect:(e,t)=>{if(null!=e.payload.handler){var r=t.getState(),n={activeCoordinate:JT(r),activeDataKey:HT(r),activeIndex:KT(r),activeLabel:VT(r),activeTooltipIndex:KT(r),isTooltipActive:ZT(r)};e.payload.handler(n,e.payload.reactEvent)}}});var Hz=Yx([rT],e=>e.tooltipItemPayloads),Gz=Yx([Hz,tT,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(e=>e.settings.dataKey===n);if(null!=a){var{positions:s}=a;if(null!=s)return t(s,r)}}),Yz=Eg("touchMove"),Jz=Ny();Jz.startListening({actionCreator:Yz,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=AP(n,n.tooltip.settings.shared);if("axis"===a){var s=Ez(n,Pz({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));null!=(null==s?void 0:s.activeIndex)&&t.dispatch(qP({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if("item"===a){var i,o=r.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(mb),d=null!==(i=l.getAttribute(pb))&&void 0!==i?i:void 0,u=Gz(t.getState(),c,d);t.dispatch(FP({activeDataKey:d,activeIndex:c,activeCoordinate:u}))}}});var Zz=Pf({brush:$$,cartesianAxis:bR,chartData:FA,errorBars:FR,graphicalItems:FI,layout:Py,legend:pv,options:AA,polarAxis:ID,polarOptions:Uz,referenceElements:V$,rootProps:$z,tooltip:HP});function Qz(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=Cb(),s=u.useRef(null);if(a)return r;null==s.current&&(s.current=function(e){return $g({reducer:Zz,preloadedState:e,middleware:e=>e({serializableCheck:!1}).concat([Az.middleware,Dz.middleware,Wz.middleware,Vz.middleware,Jz.middleware]),enhancers:e=>{var t=e;return"function"==typeof e&&(t=e()),t.concat(Rg({type:"raf"}))},devTools:zv})}(t));var i=Ix;return u.createElement(Oz,{context:i,store:s.current},r)}function Xz(e){var{layout:t,margin:r}=e,n=$x(),a=Cb();return u.useEffect(()=>{a||(n(Cy(t)),n(Sy(r)))},[n,a,t,r]),null}function eU(e){var t=$x();return u.useEffect(()=>{t(Lz(e))},[t,e]),null}var tU=["children"];function rU(){return rU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rU.apply(null,arguments)}var nU={width:"100%",height:"100%",display:"block"},aU=u.forwardRef((e,t)=>{var r=av(),n=sv(),a=Bv();if(!Kb(r)||!Kb(n))return null;var s,i,{children:o,otherAttributes:l,title:c,desc:d}=e;return s="number"==typeof l.tabIndex?l.tabIndex:a?0:void 0,i="string"==typeof l.role?l.role:a?"application":void 0,u.createElement(qu,rU({},l,{title:c,desc:d,role:i,tabIndex:s,width:r,height:n,style:nU,ref:t}),o)}),sU=e=>{var{children:t}=e,r=Ux(Eb);if(!r)return null;var{width:n,height:a,y:s,x:i}=r;return u.createElement(qu,{width:n,height:a,x:i,y:s},t)},iU=u.forwardRef((e,t)=>{var{children:r}=e,n=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,tU);return Cb()?u.createElement(sU,null,r):u.createElement(aU,rU({ref:t},n),r)});function oU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function lU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oU(Object(r),!0).forEach(function(t){cU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function cU(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dU(){return dU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dU.apply(null,arguments)}var uU=()=>(VA(),null);function hU(e){if("number"==typeof e)return e;if("string"==typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var mU=u.forwardRef((e,t)=>{var r,n,a=u.useRef(null),[s,i]=u.useState({containerWidth:hU(null===(r=e.style)||void 0===r?void 0:r.width),containerHeight:hU(null===(n=e.style)||void 0===n?void 0:n.height)}),o=u.useCallback((e,t)=>{i(r=>{var n=Math.round(e),a=Math.round(t);return r.containerWidth===n&&r.containerHeight===a?r:{containerWidth:n,containerHeight:a}})},[]),l=u.useCallback(e=>{if("function"==typeof t&&t(e),null!=e){var{width:r,height:n}=e.getBoundingClientRect();o(r,n);var s=new ResizeObserver(e=>{var{width:t,height:r}=e[0].contentRect;o(t,r)});s.observe(e),a.current=s}},[t,o]);return u.useEffect(()=>()=>{var e=a.current;null!=e&&e.disconnect()},[o]),u.createElement(u.Fragment,null,u.createElement(lv,{width:s.containerWidth,height:s.containerHeight}),u.createElement("div",dU({ref:l},e)))}),pU=u.forwardRef((e,t)=>{var{width:r,height:n}=e,[a,s]=u.useState({containerWidth:hU(r),containerHeight:hU(n)}),i=u.useCallback((e,t)=>{s(r=>{var n=Math.round(e),a=Math.round(t);return r.containerWidth===n&&r.containerHeight===a?r:{containerWidth:n,containerHeight:a}})},[]),o=u.useCallback(e=>{if("function"==typeof t&&t(e),null!=e){var{width:r,height:n}=e.getBoundingClientRect();i(r,n)}},[t,i]);return u.createElement(u.Fragment,null,u.createElement(lv,{width:a.containerWidth,height:a.containerHeight}),u.createElement("div",dU({ref:o},e)))}),xU=u.forwardRef((e,t)=>{var{width:r,height:n}=e;return u.createElement(u.Fragment,null,u.createElement(lv,{width:r,height:n}),u.createElement("div",dU({ref:t},e)))}),fU=u.forwardRef((e,t)=>{var{width:r,height:n}=e;return wm(r)||wm(n)?u.createElement(pU,dU({},e,{ref:t})):u.createElement(xU,dU({},e,{ref:t}))});var gU=u.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:i,onDoubleClick:o,onMouseDown:l,onMouseEnter:c,onMouseLeave:d,onMouseMove:h,onMouseUp:m,onTouchEnd:p,onTouchMove:x,onTouchStart:f,style:g,width:y,responsive:b,dispatchTouchEvents:v=!0}=e,j=u.useRef(null),w=$x(),[N,_]=u.useState(null),[k,S]=u.useState(null),C=function(){var e=$x(),[t,r]=u.useState(null),n=Ux(cb);return u.useEffect(()=>{if(null!=t){var r=t.getBoundingClientRect().width/t.offsetWidth;Wb(r)&&r!==n&&e(Ey(r))}},[t,e,n]),r}(),O=Qb(),E=(null==O?void 0:O.width)>0?O.width:y,P=(null==O?void 0:O.height)>0?O.height:a,T=u.useCallback(e=>{C(e),"function"==typeof t&&t(e),_(e),S(e),null!=e&&(j.current=e)},[C,t,_,S]),A=u.useCallback(e=>{w(Tz(e)),w(Kz({handler:s,reactEvent:e}))},[w,s]),M=u.useCallback(e=>{w(Mz(e)),w(Kz({handler:c,reactEvent:e}))},[w,c]),D=u.useCallback(e=>{w(UP()),w(Kz({handler:d,reactEvent:e}))},[w,d]),I=u.useCallback(e=>{w(Mz(e)),w(Kz({handler:h,reactEvent:e}))},[w,h]),R=u.useCallback(()=>{w(qz())},[w]),$=u.useCallback(e=>{w(Bz(e.key))},[w]),L=u.useCallback(e=>{w(Kz({handler:i,reactEvent:e}))},[w,i]),F=u.useCallback(e=>{w(Kz({handler:o,reactEvent:e}))},[w,o]),z=u.useCallback(e=>{w(Kz({handler:l,reactEvent:e}))},[w,l]),U=u.useCallback(e=>{w(Kz({handler:m,reactEvent:e}))},[w,m]),B=u.useCallback(e=>{w(Kz({handler:f,reactEvent:e}))},[w,f]),q=u.useCallback(e=>{v&&w(Yz(e)),w(Kz({handler:x,reactEvent:e}))},[w,v,x]),W=u.useCallback(e=>{w(Kz({handler:p,reactEvent:e}))},[w,p]),K=function(e){return!0===e?mU:fU}(b);return u.createElement(_A.Provider,{value:N},u.createElement(Hu.Provider,{value:k},u.createElement(K,{width:null!=E?E:null==g?void 0:g.width,height:null!=P?P:null==g?void 0:g.height,className:Tu("recharts-wrapper",n),style:lU({position:"relative",cursor:"default",width:E,height:P},g),onClick:A,onContextMenu:L,onDoubleClick:F,onFocus:R,onKeyDown:$,onMouseDown:z,onMouseEnter:M,onMouseLeave:D,onMouseMove:I,onMouseUp:U,onTouchEnd:W,onTouchMove:q,onTouchStart:B,ref:T},u.createElement(uU,null),r)))}),yU=["width","height","responsive","children","className","style","compact","title","desc"];var bU=u.forwardRef((e,t)=>{var{width:r,height:n,responsive:a,children:s,className:i,style:o,compact:l,title:c,desc:d}=e,h=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,yU),m=$u(h);return l?u.createElement(u.Fragment,null,u.createElement(lv,{width:r,height:n}),u.createElement(iU,{otherAttributes:m,title:c,desc:d},s)):u.createElement(gU,{className:i,style:o,width:r,height:n,responsive:a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},u.createElement(iU,{otherAttributes:m,title:c,desc:d,ref:t},u.createElement(G$,null,s)))});function vU(){return vU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vU.apply(null,arguments)}var jU={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",responsive:!1},wU=u.forwardRef(function(e,t){var r,n=oj(e.categoricalChartProps,jU),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:i,tooltipPayloadSearcher:o,categoricalChartProps:l}=e,c={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:i,tooltipPayloadSearcher:o,eventEmitter:void 0};return u.createElement(Qz,{preloadedState:{options:c},reduxStoreName:null!==(r=l.id)&&void 0!==r?r:a},u.createElement(M$,{chartData:l.data}),u.createElement(Xz,{layout:n.layout,margin:n.margin}),u.createElement(eU,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),u.createElement(bU,vU({},n,{ref:t})))}),NU=["axis"],_U=u.forwardRef((e,t)=>u.createElement(wU,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:NU,tooltipPayloadSearcher:PA,categoricalChartProps:e,ref:t})),kU=["axis","item"],SU=u.forwardRef((e,t)=>u.createElement(wU,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:kU,tooltipPayloadSearcher:PA,categoricalChartProps:e,ref:t}));function CU(e){var t=$x();return u.useEffect(()=>{t(zz(e))},[t,e]),null}var OU=["layout"];function EU(){return EU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},EU.apply(null,arguments)}var PU={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},TU=u.forwardRef(function(e,t){var r,n=oj(e.categoricalChartProps,PU),{layout:a}=n,s=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(n,OU),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c}=e,d={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return u.createElement(Qz,{preloadedState:{options:d},reduxStoreName:null!==(r=n.id)&&void 0!==r?r:i},u.createElement(M$,{chartData:n.data}),u.createElement(Xz,{layout:a,margin:n.margin}),u.createElement(eU,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),u.createElement(CU,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),u.createElement(bU,EU({},s,{ref:t})))}),AU=["item"],MU={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},DU=u.forwardRef((e,t)=>{var r=oj(e,MU);return u.createElement(TU,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:AU,tooltipPayloadSearcher:PA,categoricalChartProps:r,ref:t})}),IU=["axis"],RU=u.forwardRef((e,t)=>u.createElement(wU,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:IU,tooltipPayloadSearcher:PA,categoricalChartProps:e,ref:t}));const $U="#f97316",LU="#8b5cf6",FU="#10b981",zU="#ef4444",UU=[$U,LU,FU,"#3b82f6","#a855f7","#ec4899","#f59e0b",zU,"#06b6d4"];function BU({data:e,height:t=300}){return sn.jsx(ev,{width:"100%",height:t,children:sn.jsxs(RU,{data:e,children:[sn.jsx("defs",{children:sn.jsxs("linearGradient",{id:"earningsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[sn.jsx("stop",{offset:"5%",stopColor:FU,stopOpacity:.3}),sn.jsx("stop",{offset:"95%",stopColor:FU,stopOpacity:.1})]})}),sn.jsx(RL,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),sn.jsx(nz,{dataKey:"date",stroke:"#64748b",fontSize:12,tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),sn.jsx(xz,{stroke:"#64748b",fontSize:12,tickFormatter:e=>`$${e}`}),sn.jsx(eM,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},labelFormatter:e=>new Date(e).toLocaleDateString(),formatter:e=>[`$${e.toFixed(2)}`,"Earnings"]}),sn.jsx(KF,{type:"monotone",dataKey:"earnings",stroke:FU,strokeWidth:2,fill:"url(#earningsGradient)"})]})})}function qU({data:e,height:t=300}){return sn.jsx(ev,{width:"100%",height:t,children:sn.jsxs(SU,{data:e,layout:"horizontal",children:[sn.jsx(RL,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),sn.jsx(nz,{type:"number",stroke:"#64748b",fontSize:12}),sn.jsx(xz,{type:"category",dataKey:"metric",stroke:"#64748b",fontSize:12,width:100}),sn.jsx(eM,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},formatter:e=>[e.toLocaleString(),"Value"]}),sn.jsx(f$,{dataKey:"value",fill:$U,radius:[0,4,4,0]})]})})}function WU({data:e,height:t=300}){const r=e.map((e,t)=>({...e,color:e.color||UU[t%UU.length]}));return sn.jsx(ev,{width:"100%",height:t,children:sn.jsxs(DU,{children:[sn.jsx(oR,{data:r,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:2,dataKey:"value",children:r.map((e,t)=>sn.jsx(tM,{fill:e.color},`cell-${t}`))}),sn.jsx(eM,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},formatter:e=>[e.toLocaleString(),"Count"]}),sn.jsx(kv,{verticalAlign:"middle",align:"right",layout:"vertical",iconType:"circle",wrapperStyle:{fontSize:"12px",paddingLeft:"20px"}})]})})}function KU({data:e,height:t=200,primaryKey:r="value",secondaryKey:n,primaryColor:a=$U,secondaryColor:s=LU}){return sn.jsx(ev,{width:"100%",height:t,children:sn.jsxs(_U,{data:e,children:[sn.jsx(RL,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),sn.jsx(nz,{dataKey:"date",stroke:"#64748b",fontSize:12,tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),sn.jsx(xz,{stroke:"#64748b",fontSize:12}),sn.jsx(eM,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},labelFormatter:e=>new Date(e).toLocaleDateString()}),sn.jsx(pF,{type:"monotone",dataKey:r,stroke:a,strokeWidth:2,dot:{r:3},activeDot:{r:5}}),n&&sn.jsx(pF,{type:"monotone",dataKey:n,stroke:s,strokeWidth:2,dot:{r:3},activeDot:{r:5}})]})})}function VU({data:e,metrics:t,height:r=300}){return sn.jsx(ev,{width:"100%",height:r,children:sn.jsxs(_U,{data:e,children:[sn.jsx(RL,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),sn.jsx(nz,{dataKey:"date",stroke:"#64748b",fontSize:12,tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),sn.jsx(xz,{stroke:"#64748b",fontSize:12}),sn.jsx(eM,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},labelFormatter:e=>new Date(e).toLocaleDateString()}),sn.jsx(kv,{}),t.map(e=>sn.jsx(pF,{type:"monotone",dataKey:e.key,stroke:e.color,strokeWidth:2,name:e.name,dot:{r:3},activeDot:{r:5}},e.key))]})})}function HU({title:e,value:t,change:r,changeType:n,icon:a,trend:s}){const i="increase"===n?"text-green-600":"text-red-600",o="increase"===n?"":"";return sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm min-w-0",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[a&&sn.jsx("div",{className:"text-gray-600",children:a}),sn.jsx("h3",{className:"text-sm font-medium text-gray-600",children:e})]}),void 0!==r&&sn.jsxs("span",{className:`text-sm font-medium ${i} flex items-center space-x-1`,children:[sn.jsx("span",{children:o}),sn.jsxs("span",{children:[Math.abs(r),"%"]})]})]}),sn.jsx("div",{className:"mb-4",children:sn.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t})}),s&&s.length>0&&sn.jsx("div",{className:"h-16 w-full min-w-[120px]",children:sn.jsx(ev,{width:"100%",height:64,children:sn.jsx(_U,{data:s,children:sn.jsx(pF,{type:"monotone",dataKey:"value",stroke:"increase"===n?FU:zU,strokeWidth:2,dot:!1})})})})]})}function GU({userData:e}){const t=we(),r=Array.from({length:30},(e,t)=>{const r=new Date;return r.setDate(r.getDate()-(29-t)),{date:r.toISOString().split("T")[0],earnings:Math.floor(50*Math.random())+10,gems:Math.floor(20*Math.random())+5,points:Math.floor(100*Math.random())+20}}),n=[{name:"Points",value:e?.points_balance||0,color:"#3b82f6"},{name:"Keys",value:10*(e?.keys_balance||0),color:"#f97316"},{name:"Gems",value:5*(e?.gems_balance||0),color:"#8b5cf6"},{name:"Gold",value:2*(e?.gold_collected||0),color:"#eab308"}];return sn.jsxs("div",{className:"space-y-6",children:[sn.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-500 rounded-xl p-6 text-white shadow",children:sn.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[sn.jsxs("div",{children:[sn.jsx("div",{className:"text-sm uppercase tracking-wide text-white/80",children:"New"}),sn.jsx("h3",{className:"text-2xl font-semibold",children:"Growth Hub is live"}),sn.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Stake gems, fund creators, and unlock higher returns on your balance."})]}),sn.jsxs("button",{onClick:()=>t("/growth-hub"),className:"inline-flex items-center justify-center px-4 py-2 bg-white text-blue-600 font-medium rounded-lg shadow-sm hover:bg-blue-50 transition",children:["Explore Growth Hub",sn.jsx(lt,{className:"w-4 h-4 ml-2"})]})]})}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[sn.jsx(HU,{title:"This Month",value:"$127.50",change:23,changeType:"increase",icon:sn.jsx(Ur,{className:"w-5 h-5"}),trend:r.slice(-7).map(e=>({date:e.date,value:e.earnings}))}),sn.jsx(HU,{title:"All Time",value:"$1,456.80",change:8,changeType:"increase",icon:sn.jsx(at,{className:"w-5 h-5"}),trend:r.slice(-7).map(e=>({date:e.date,value:5*e.earnings}))}),sn.jsx(HU,{title:"Pending",value:"$89.25",change:12,changeType:"increase",icon:sn.jsx(Pt,{className:"w-5 h-5"}),trend:r.slice(-7).map(e=>({date:e.date,value:.5*e.earnings}))}),sn.jsx(HU,{title:"Available",value:"$234.75",change:5,changeType:"increase",icon:sn.jsx(Yr,{className:"w-5 h-5"}),trend:r.slice(-7).map(e=>({date:e.date,value:2*e.earnings}))})]}),sn.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Earnings Trend (30 Days)"}),sn.jsx(BU,{data:r,height:300})]}),sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Currency Distribution"}),sn.jsx(WU,{data:n.filter(e=>e.value>0),height:300})]}),sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Earning Sources"}),sn.jsx(qU,{data:[{metric:"Social Actions",value:45},{metric:"Drop Completions",value:30},{metric:"Content Investments",value:15},{metric:"Referral Bonuses",value:8},{metric:"Achievements",value:2}],height:300})]}),sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Currency Growth"}),sn.jsx(KU,{data:r.map(e=>({date:e.date,value:e.points,secondary:5*e.gems})),height:300,primaryKey:"value",secondaryKey:"secondary",primaryColor:"#3b82f6",secondaryColor:"#8b5cf6"}),sn.jsxs("div",{className:"flex justify-center space-x-6 mt-4 text-sm",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),sn.jsx("span",{className:"text-gray-600",children:"Points"})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("div",{className:"w-3 h-3 bg-violet-500 rounded-full"}),sn.jsx("span",{className:"text-gray-600",children:"Gems (5)"})]})]})]})]}),sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Wallet Insights"}),sn.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[sn.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[sn.jsx(Tt,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),sn.jsx("p",{className:"text-2xl font-bold text-blue-900",children:e?.points_balance||0}),sn.jsx("p",{className:"text-sm text-blue-600",children:"Active Points"})]}),sn.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[sn.jsx(Xt,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),sn.jsx("p",{className:"text-2xl font-bold text-orange-900",children:e?.keys_balance||0}),sn.jsx("p",{className:"text-sm text-orange-600",children:"Keys Available"})]}),sn.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[sn.jsx(It,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),sn.jsx("p",{className:"text-2xl font-bold text-purple-900",children:e?.gems_balance||0}),sn.jsx("p",{className:"text-sm text-purple-600",children:"Gems Earned"})]}),sn.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[sn.jsx(qr,{className:"w-6 h-6 text-yellow-600 mx-auto mb-2"}),sn.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:e?.gold_collected||0}),sn.jsx("p",{className:"text-sm text-yellow-600",children:"Gold Collection"})]}),sn.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[sn.jsx(Lr,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),sn.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["Level ",e?.level||1]}),sn.jsx("p",{className:"text-sm text-green-600",children:"Current Level"})]}),sn.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[sn.jsx(at,{className:"w-6 h-6 text-red-600 mx-auto mb-2"}),sn.jsx("p",{className:"text-2xl font-bold text-red-900",children:e?.points_streak_days||0}),sn.jsx("p",{className:"text-sm text-red-600",children:"Day Streak"})]})]})]}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Currency Breakdown"}),sn.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Tt,{className:"w-5 h-5 text-blue-600"}),sn.jsx("span",{className:"font-medium text-blue-900",children:"Points"})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsx("p",{className:"font-semibold text-blue-900",children:e?.points_balance?.toLocaleString()||"0"}),sn.jsx("p",{className:"text-sm text-blue-600",children:"From social actions"})]})]}),sn.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Xt,{className:"w-5 h-5 text-orange-600"}),sn.jsx("span",{className:"font-medium text-orange-900",children:"Keys"})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsx("p",{className:"font-semibold text-orange-900",children:e?.keys_balance||"0"}),sn.jsx("p",{className:"text-sm text-orange-600",children:"For drop applications"})]})]}),sn.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(It,{className:"w-5 h-5 text-purple-600"}),sn.jsx("span",{className:"font-medium text-purple-900",children:"Gems"})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsx("p",{className:"font-semibold text-purple-900",children:e?.gems_balance||"0"}),sn.jsx("p",{className:"text-sm text-purple-600",children:"From completed drops"})]})]}),sn.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(qr,{className:"w-5 h-5 text-yellow-600"}),sn.jsx("span",{className:"font-medium text-yellow-900",children:"Gold"})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsx("p",{className:"font-semibold text-yellow-900",children:e?.gold_collected||"0"}),sn.jsx("p",{className:"text-sm text-yellow-600",children:"Prestige collection"})]})]})]})]})}function YU({holdings:e,loading:t,onList:r,onView:n}){if(t)return sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Content Portfolio"}),sn.jsx("p",{className:"text-sm text-gray-500",children:"Loading holdings"})]});if(!e.length)return sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-dashed border-gray-300 text-center",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Start building your portfolio"}),sn.jsx("p",{className:"text-gray-600 mb-4",children:"Invest in creator content to earn returns and unlock secondary market trading."}),sn.jsx("button",{className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition",children:"Discover Opportunities"})]});const a=e.reduce((e,t)=>(e.value+=t.market_value,e.gain+=t.unrealized_gain,e),{value:0,gain:0});return sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[sn.jsxs("div",{children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Content Portfolio"}),sn.jsx("p",{className:"text-sm text-gray-500",children:"Track your holdings, performance, and resale opportunities."})]}),sn.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[sn.jsxs("div",{children:[sn.jsx("p",{className:"text-gray-500",children:"Portfolio Value"}),sn.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",a.value.toFixed(2)]})]}),sn.jsxs("div",{children:[sn.jsx("p",{className:"text-gray-500",children:"Unrealized Gain"}),sn.jsxs("p",{className:"text-lg font-semibold "+(a.gain>=0?"text-green-600":"text-red-500"),children:[a.gain>=0?"+":"","$",a.gain.toFixed(2)]})]})]})]}),sn.jsx("div",{className:"overflow-x-auto",children:sn.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[sn.jsx("thead",{className:"bg-gray-50",children:sn.jsxs("tr",{children:[sn.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Asset"}),sn.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shares"}),sn.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg. Cost"}),sn.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Market Value"}),sn.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unrealized"}),sn.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Day"}),sn.jsx("th",{scope:"col",className:"px-4 py-3"})]})}),sn.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>sn.jsxs("tr",{className:"hover:bg-gray-50",children:[sn.jsx("td",{className:"px-4 py-4",children:sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("img",{src:e.content_thumbnail,alt:e.content_title,className:"w-12 h-12 rounded-lg object-cover"}),sn.jsxs("div",{children:[sn.jsx("p",{className:"font-medium text-gray-900",children:e.content_title}),sn.jsxs("p",{className:"text-sm text-gray-500",children:[e.creator_name,"  ",e.platform.toUpperCase()]})]})]})}),sn.jsxs("td",{className:"px-4 py-4 text-right",children:[sn.jsx("div",{className:"font-semibold text-gray-900",children:e.owned_shares}),sn.jsxs("div",{className:"text-xs text-gray-500",children:[e.available_to_sell," sellable"]})]}),sn.jsxs("td",{className:"px-4 py-4 text-right",children:[sn.jsxs("div",{className:"text-gray-900",children:["$",e.avg_cost.toFixed(2)]}),sn.jsxs("div",{className:"text-xs text-gray-500",children:["Now $",e.current_price.toFixed(2)]})]}),sn.jsxs("td",{className:"px-4 py-4 text-right",children:[sn.jsxs("div",{className:"text-gray-900",children:["$",e.market_value.toFixed(2)]}),sn.jsxs("div",{className:"text-xs text-gray-500",children:["Weekly ",e.week_change_pct.toFixed(1),"%"]})]}),sn.jsx("td",{className:"px-4 py-4 text-right",children:sn.jsxs("div",{className:"font-semibold "+(e.unrealized_gain>=0?"text-green-600":"text-red-500"),children:[e.unrealized_gain>=0?"+":"","$",e.unrealized_gain.toFixed(2)]})}),sn.jsx("td",{className:"px-4 py-4 text-right",children:sn.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium "+(e.day_change_pct>=0?"bg-green-50 text-green-700":"bg-red-50 text-red-600"),children:[e.day_change_pct>=0?"+":"",e.day_change_pct.toFixed(2),"%"]})}),sn.jsxs("td",{className:"px-4 py-4 text-right space-x-2",children:[sn.jsx("button",{onClick:()=>n(e),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-600 rounded-lg hover:bg-gray-100",children:"View details"}),e.available_to_sell>0?sn.jsx("button",{onClick:()=>r(e),className:"px-3 py-1.5 text-sm font-medium border border-orange-200 text-orange-600 rounded-lg hover:bg-orange-50",children:"List for resale"}):sn.jsx("span",{className:"text-xs text-gray-400",children:"All shares listed"})]})]},e.content_id))})]})})]})}function JU({listings:e,loading:t}){return t?sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"My Listings"}),sn.jsx("p",{className:"text-sm text-gray-500",children:"Loading listings"})]}):e.length?sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsxs("div",{children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"My Listings"}),sn.jsx("p",{className:"text-sm text-gray-500",children:"Active resale listings awaiting buyers."})]}),sn.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-700",children:[e.length," active"]})]}),sn.jsx("div",{className:"space-y-3",children:e.map(e=>sn.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("img",{src:e.content_thumbnail,alt:e.content_title,className:"w-12 h-12 rounded-lg object-cover"}),sn.jsxs("div",{children:[sn.jsx("p",{className:"font-medium text-gray-900",children:e.content_title}),sn.jsxs("p",{className:"text-sm text-gray-500",children:[e.remaining_quantity,"/",e.quantity," shares available"]})]})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsx("p",{className:"text-sm text-gray-500",children:"Ask price"}),sn.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",e.ask_price.toFixed(2)]}),sn.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Created ",new Date(e.created_at).toLocaleDateString(),"  ",e.status]})]})]},e.id))})]}):null}function ZU({incoming:e,outgoing:t,loading:r,onAccept:n}){return r?sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Offers"}),sn.jsx("p",{className:"text-sm text-gray-500",children:"Loading offers"})]}):e.length||t.length?sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Offers"}),sn.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[sn.jsxs("div",{children:[sn.jsxs("div",{className:"flex items-center justify-between mb-3",children:[sn.jsx("h4",{className:"text-sm font-semibold text-gray-800",children:"Incoming"}),sn.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-orange-100 text-orange-700",children:e.length})]}),sn.jsxs("div",{className:"space-y-3",children:[e.map(e=>sn.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsxs("p",{className:"font-semibold text-gray-900",children:[e.quantity," shares @ $",e.bid_price.toFixed(2)]}),sn.jsx("p",{className:"text-sm text-gray-500",children:e.content_title||e.content_id}),e.message&&sn.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["",e.message,""]})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("button",{onClick:()=>n(e.id),className:"px-3 py-1.5 text-xs font-medium bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Accept"}),sn.jsx("button",{className:"px-3 py-1.5 text-xs font-medium border border-gray-300 text-gray-600 rounded-lg hover:bg-gray-100",children:"Decline"})]})]})},e.id)),!e.length&&sn.jsx("p",{className:"text-sm text-gray-500",children:"No incoming offers."})]})]}),sn.jsxs("div",{children:[sn.jsxs("div",{className:"flex items-center justify-between mb-3",children:[sn.jsx("h4",{className:"text-sm font-semibold text-gray-800",children:"Outgoing"}),sn.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-slate-100 text-slate-700",children:t.length})]}),sn.jsxs("div",{className:"space-y-3",children:[t.map(e=>sn.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[sn.jsxs("p",{className:"font-semibold text-gray-900",children:[e.quantity," shares @ $",e.bid_price.toFixed(2)]}),sn.jsx("p",{className:"text-sm text-gray-500",children:e.content_title||e.content_id}),sn.jsxs("p",{className:"text-xs text-gray-500 mt-1 capitalize",children:["Status: ",e.status]})]},e.id)),!t.length&&sn.jsx("p",{className:"text-sm text-gray-500",children:"No outgoing offers."})]})]})]})]}):null}function QU(){const[e,t]=u.useState([]),[r,n]=u.useState([]),[a,s]=u.useState(null),[i,o]=u.useState([]),[l,c]=u.useState(!0),[d,h]=u.useState([]),[m,p]=u.useState(!0),[x,f]=u.useState([]),[g,y]=u.useState([]),[b,v]=u.useState(!0),[j,w]=u.useState(null),[N,_]=u.useState(!1),[k,S]=u.useState(!0),[C,O]=u.useState("overview"),[E,P]=u.useState(!1),[T,A]=u.useState(!1),[M,D]=u.useState(!1),[I,R]=u.useState(!1),[$,L]=u.useState(!1),[F,z]=u.useState(!1),[U,B]=u.useState(!1);u.useEffect(()=>{q()},[]),u.useEffect(()=>{W(),K(),V()},[]);const q=async()=>{try{const a=Nl(),i=await fetch("/api/users/me",{credentials:"include",headers:a});let o=null;try{const e=await i.text();e&&(o=JSON.parse(e))}catch(e){}if(!o||null===o)return s(null),t([]),n([]),void alert('Authentication failed. Please try the "Force Re-Login" button or refresh the page.');const l=await fetch("/api/users/me/wallets",{credentials:"include",headers:Nl()});let c=null;try{c=await l.json()}catch(e){}if(c?.error&&c.error.includes("configuration"))return void alert("Server configuration error. Please contact support.");if(!c||null===c||c?.error){const e={id:Date.now(),mocha_user_id:o.id||"temp",email:o.email||"",display_name:o.google_user_data?.name||o.email?.split("@")[0]||"User",username:o.email?.split("@")[0]||"user",avatar_url:o.google_user_data?.picture||void 0,bio:"Welcome to Promorang!",banner_url:void 0,website_url:void 0,social_links:void 0,user_type:"regular",xp_points:100,level:1,referral_code:"TEMP"+Date.now().toString().slice(-4),referred_by:void 0,follower_count:0,following_count:0,total_earnings_usd:0,promogem_balance:0,points_balance:25,keys_balance:1,gems_balance:0,gold_collected:0,user_tier:"free",points_streak_days:0,last_activity_date:(new Date).toISOString().split("T")[0],master_key_activated_at:void 0,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};s(e)}else s(c);try{const e=Nl(),[r,a]=await Promise.all([fetch("/api/users/wallets",{credentials:"include",headers:e}),fetch("/api/users/transactions",{credentials:"include",headers:e})]);let s=[],i=[];if(r.ok){const e=await r.json();Array.isArray(e)?s=e:e&&Array.isArray(e.wallets)&&(s=e.wallets)}if(a.ok){const e=await a.json();Array.isArray(e)?i=e:e&&Array.isArray(e.transactions)&&(i=e.transactions)}t(s||[]),n(i||[])}catch(r){t([]),n([])}}catch(a){Error,s(null),t([]),n([])}finally{S(!1)}},W=async()=>{c(!0);const e=await Eu();o(e),c(!1)},K=async()=>{p(!0);const e=await(async(e=!1)=>{try{const t=e?"?owner=true":"",r=await kl(`/api/shares/listings${t}`,{credentials:"include"});return r.ok&&(await r.json()).listings||Kl()}catch(t){return Kl()}})(!0);h(e),p(!1)},V=async()=>{v(!0);const[e,t]=await Promise.all([Hl("seller"),Hl("buyer")]);f(e),y(t),v(!1)},H=e&&e.length>0?e.find(e=>"USD"===e.currency_type):null,G=e=>{switch(e){case"task_payment":case"referral_bonus":case"staking_reward":return sn.jsx(st,{className:"w-4 h-4 text-green-600"});case"withdrawal":return sn.jsx(lt,{className:"w-4 h-4 text-red-600"});default:return sn.jsx(Pt,{className:"w-4 h-4 text-gray-600"})}},Y=e=>{e.preventDefault(),e.stopPropagation(),P(!0)};return k?sn.jsx("div",{className:"flex items-center justify-center h-64",children:sn.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{children:[sn.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Wallet"}),sn.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your earnings and transactions"})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[sn.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-600 rounded-2xl p-6 text-white",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Tt,{className:"w-6 h-6"}),sn.jsx("span",{className:"text-lg font-medium",children:"Points"})]}),sn.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:sn.jsx("span",{className:"text-xs font-bold",children:"PTS"})})]}),sn.jsxs("div",{className:"mb-4",children:[sn.jsx("p",{className:"text-3xl font-bold",children:a?.points_balance?.toLocaleString()||"0"}),sn.jsx("p",{className:"text-blue-100 text-sm",children:"Earn from social actions"})]}),sn.jsx("button",{onClick:Y,className:"w-full bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-4 text-sm font-medium transition-colors",children:"Convert to Keys"})]}),sn.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl p-6 text-white",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Xt,{className:"w-6 h-6"}),sn.jsx("span",{className:"text-lg font-medium",children:"Keys"})]}),sn.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:sn.jsx("span",{className:"text-xs font-bold",children:"KEY"})})]}),sn.jsxs("div",{className:"mb-4",children:[sn.jsx("p",{className:"text-3xl font-bold",children:a?.keys_balance||"0"}),sn.jsx("p",{className:"text-orange-100 text-sm",children:"Apply for paid drops"})]}),sn.jsx("button",{onClick:()=>A(!0),className:"w-full bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-4 text-sm font-medium transition-colors",children:"Master Key Status"})]}),sn.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl p-6 text-white",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(It,{className:"w-6 h-6"}),sn.jsx("span",{className:"text-lg font-medium",children:"Gems"})]}),sn.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:sn.jsx("span",{className:"text-xs font-bold",children:"GEM"})})]}),sn.jsxs("div",{className:"mb-4",children:[sn.jsx("p",{className:"text-3xl font-bold",children:a?.gems_balance||"0"}),sn.jsx("p",{className:"text-purple-100 text-sm",children:"Earn from completed drops"})]}),sn.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[sn.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),z(!0),setTimeout(()=>{},100)},className:"bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors",children:"Buy More"}),sn.jsx("button",{onClick:Y,className:"bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors",children:"Convert"}),sn.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),R(!0)},disabled:(a?.gems_balance||0)<200,className:"bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Withdraw"})]})]}),sn.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-amber-600 rounded-2xl p-6 text-white",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(qr,{className:"w-6 h-6"}),sn.jsx("span",{className:"text-lg font-medium",children:"Gold"})]}),sn.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:sn.jsx("span",{className:"text-xs font-bold",children:"AU"})})]}),sn.jsxs("div",{className:"mb-4",children:[sn.jsx("p",{className:"text-3xl font-bold",children:a?.gold_collected||"0"}),sn.jsx("p",{className:"text-yellow-100 text-sm",children:"Prestige currency"})]}),sn.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[sn.jsx("button",{onClick:()=>D(!0),className:"bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors",children:"Gold Shop"}),sn.jsx("button",{onClick:()=>B(!0),className:"bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors",children:"Achievements"})]})]})]}),H&&H.balance>0&&sn.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-6 text-white",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Rt,{className:"w-6 h-6"}),sn.jsx("span",{className:"text-lg font-medium",children:"USD Balance"})]}),sn.jsx(Yr,{className:"w-6 h-6 opacity-75"})]}),sn.jsxs("div",{className:"mb-4",children:[sn.jsxs("p",{className:"text-4xl font-bold",children:["$",(H?.balance||0).toFixed(2)]}),sn.jsx("p",{className:"text-green-100 text-sm",children:"Available for withdrawal"})]}),sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsx("button",{className:"flex-1 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-4 text-sm font-medium transition-colors",children:"Withdraw"}),sn.jsx("button",{onClick:()=>L(!0),className:"flex-1 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-4 text-sm font-medium transition-colors",children:"Payment Methods"})]})]}),sn.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Staking Rewards"}),sn.jsx("span",{className:"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700 px-3 py-1 rounded-full text-sm font-medium",children:"12.5% APY"})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[sn.jsxs("div",{className:"text-center",children:[sn.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"0"}),sn.jsx("p",{className:"text-sm text-gray-600",children:"Staked PromoGems"})]}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"0.00"}),sn.jsx("p",{className:"text-sm text-gray-600",children:"Pending Rewards"})]}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("p",{className:"text-2xl font-bold text-green-600",children:"$0.00"}),sn.jsx("p",{className:"text-sm text-gray-600",children:"Total Earned"})]})]}),sn.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:sn.jsx("button",{className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-3 rounded-lg font-medium transition-all duration-200",children:"Start Staking PromoGems"})})]}),sn.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[sn.jsx("div",{className:"border-b border-gray-200",children:sn.jsxs("nav",{className:"flex space-x-8 px-6",children:[sn.jsx("button",{onClick:()=>O("overview"),className:"py-4 border-b-2 font-medium text-sm "+("overview"===C?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Overview"}),sn.jsx("button",{onClick:()=>O("transactions"),className:"py-4 border-b-2 font-medium text-sm "+("transactions"===C?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Transactions"})]})}),sn.jsxs("div",{className:"p-6",children:["overview"===C&&sn.jsxs("div",{className:"space-y-6",children:[sn.jsx(GU,{userData:a,transactions:r}),sn.jsx(YU,{holdings:i,loading:l,onList:e=>{w(e),_(!0)},onView:e=>navigate(`/portfolio/holdings/${e.content_id}`)}),sn.jsx(JU,{listings:d,loading:m}),sn.jsx(ZU,{incoming:x,outgoing:g,loading:b,onAccept:async e=>{try{await(async e=>{const t=await kl(`/api/shares/offers/${e}/accept`,{method:"POST",credentials:"include"});if(!t.ok){const e=await t.json().catch(()=>({}));throw new Error(e.error||"Failed to accept offer")}return t.json()})(e),await Promise.all([W(),K(),V()])}catch(t){alert(t instanceof Error?t.message:"Failed to accept offer")}}})]}),"transactions"===C&&sn.jsxs("div",{className:"space-y-4",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction History"}),sn.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[sn.jsx(Wt,{className:"w-4 h-4"}),sn.jsx("span",{children:"Filter"})]})]}),sn.jsx("div",{className:"space-y-3",children:r.length>0?r.map(e=>{return sn.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-sm",children:G(e.transaction_type)}),sn.jsxs("div",{children:[sn.jsx("p",{className:"font-medium text-gray-900",children:e.description||e.transaction_type.replace("_"," ")}),sn.jsxs("p",{className:"text-sm text-gray-500",children:[new Date(e.created_at).toLocaleDateString(),"  ",e.currency_type]})]})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsxs("p",{className:"font-semibold "+(t=e.amount,t>=0?"text-green-600":"text-red-600"),children:[e.amount>=0?"+":"","$",Math.abs(e.amount).toFixed(2)]}),sn.jsx("p",{className:"text-sm text-gray-500 capitalize",children:e.status})]})]},e.id);var t}):sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx(Yr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No transactions yet"}),sn.jsx("p",{className:"text-gray-600",children:"Your transaction history will appear here once you start earning."})]})})]})]})]}),!a&&sn.jsx(Nu,{}),sn.jsx(Nn,{user:a,isOpen:E,onClose:()=>{P(!1)},onSuccess:q}),sn.jsx(_n,{user:a,isOpen:T,onClose:()=>A(!1),onSuccess:q}),sn.jsx(An,{user:a,isOpen:M,onClose:()=>D(!1),onPurchase:q}),sn.jsx(bu,{user:a,isOpen:I,onClose:()=>{R(!1)},onSuccess:q}),sn.jsx(_u,{isOpen:N,onClose:()=>_(!1),holding:j,onSuccess:()=>{W(),K(),V()}}),sn.jsx(vu,{user:a,isOpen:$,onClose:()=>L(!1),onSuccess:q}),sn.jsx(wu,{user:a,isOpen:F,onClose:()=>{z(!1)},onSuccess:q}),sn.jsx(Mn,{user:a,isOpen:U,onClose:()=>B(!1)})]})}function XU({isOpen:e,onClose:t,channel:r,user:n,onSuccess:a}){const[s,i]=u.useState(""),[o,l]=u.useState(!1),[c,d]=u.useState("");if(!e||!r)return null;const h=(()=>{if("function"==typeof r.icon)return r.icon;switch(r.iconKey||r.icon){case"Shield":return Mr;case"Rocket":return Cr;case"Star":return Rr;case"TrendingUp":return Ur;default:return sr}})(),m=()=>{const e={green:"from-green-500 to-emerald-600",blue:"from-blue-500 to-cyan-600",purple:"from-purple-500 to-pink-600",orange:"from-orange-500 to-red-600"};return e[r.color]||e.blue},p=(()=>{const e=parseFloat(s)||0;if(0===e)return{daily:0,total:0,final:0};const t=r.lockPeriod,n=e*(r.baseMultiplier-1);return{daily:n/t,total:n,final:e+n}})(),x=s&&parseFloat(s)>=r.minDeposit&&parseFloat(s)<=r.maxDeposit&&parseFloat(s)<=(n?.gems_balance||0);return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:sn.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-screen overflow-y-auto",children:[sn.jsxs("div",{className:`bg-gradient-to-r ${m()} p-6 text-white`,children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:sn.jsx(h,{className:"w-6 h-6"})}),sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-xl font-bold",children:r.name}),sn.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(()=>{switch(r.riskLevel){case"low":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"high":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}})()} text-gray-800`,children:[r.riskLevel.toUpperCase()," RISK"]})]})]}),sn.jsx("button",{onClick:t,className:"text-white/80 hover:text-white transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsx("p",{className:"text-white/90",children:r.description})]}),sn.jsxs("div",{className:"p-6 space-y-6",children:[sn.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[sn.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[sn.jsx("div",{className:"text-lg font-bold text-gray-900",children:r.lockPeriod}),sn.jsx("div",{className:"text-sm text-gray-600",children:"Days Locked"})]}),sn.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[sn.jsxs("div",{className:"text-lg font-bold text-green-600",children:[r.expectedApr,"%"]}),sn.jsx("div",{className:"text-sm text-gray-600",children:"Expected APR"})]}),sn.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[sn.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[r.baseMultiplier,"x"]}),sn.jsx("div",{className:"text-sm text-gray-600",children:"Multiplier"})]}),sn.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[sn.jsx("div",{className:"text-lg font-bold text-purple-600",children:n?.gems_balance||0}),sn.jsx("div",{className:"text-sm text-gray-600",children:"Your Balance"})]})]}),sn.jsxs("div",{children:[sn.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Channel Features"}),sn.jsx("div",{className:"space-y-2",children:r.features.map((e,t)=>sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("div",{className:`w-2 h-2 rounded-full bg-gradient-to-r ${m()}`}),sn.jsx("span",{className:"text-sm text-gray-700",children:e})]},t))})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stake Amount (Gems)"}),sn.jsxs("div",{className:"relative",children:[sn.jsx("input",{type:"number",value:s,onChange:e=>i(e.target.value),placeholder:`Min: ${r.minDeposit}, Max: ${r.maxDeposit}`,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",min:r.minDeposit,max:Math.min(r.maxDeposit,n?.gems_balance||0)}),sn.jsx("button",{onClick:()=>{const e=Math.min(n?.gems_balance||0,r.maxDeposit);i(e.toString())},className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-sm text-purple-600 hover:text-purple-700 font-medium",children:"MAX"})]}),sn.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[sn.jsxs("span",{children:["Min: ",r.minDeposit," gems"]}),sn.jsxs("span",{children:["Max: ",Math.min(r.maxDeposit,n?.gems_balance||0)," gems"]})]})]}),s&&parseFloat(s)>0&&sn.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4 border border-green-200",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[sn.jsx(pt,{className:"w-5 h-5 text-green-600"}),sn.jsx("h3",{className:"font-semibold text-gray-900",children:"Projected Rewards"})]}),sn.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[sn.jsxs("div",{children:[sn.jsx("div",{className:"text-sm text-gray-600",children:"Daily Reward"}),sn.jsxs("div",{className:"font-bold text-green-600",children:["+",p.daily.toFixed(2)," Gems"]})]}),sn.jsxs("div",{children:[sn.jsx("div",{className:"text-sm text-gray-600",children:"Total Rewards"}),sn.jsxs("div",{className:"font-bold text-green-600",children:["+",p.total.toFixed(2)," Gems"]})]}),sn.jsxs("div",{className:"col-span-2",children:[sn.jsx("div",{className:"text-sm text-gray-600",children:"Final Amount"}),sn.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[p.final.toFixed(2)," Gems"]})]})]})]}),sn.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:sn.jsxs("div",{className:"flex items-start space-x-3",children:[sn.jsx(kt,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-semibold text-yellow-800",children:"Important Notice"}),sn.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:["Your gems will be locked for ",r.lockPeriod," days. Early withdrawal may result in penalties. Rewards are distributed daily and automatically compounded."]})]})]})}),c&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:sn.jsx("p",{className:"text-sm text-red-700",children:c})}),sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsx("button",{onClick:t,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),sn.jsx("button",{onClick:async()=>{if(x){l(!0),d("");try{const e=await fetch("/api/growth/staking",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({channel_id:r.id,amount:parseFloat(s)})});if(e.ok)a(),t(),i("");else{const t=await e.json();d(t.error||"Failed to stake gems")}}catch(e){d("Network error occurred")}finally{l(!1)}}},disabled:!x||o,className:"flex-1 px-6 py-3 rounded-lg font-medium transition-all duration-200 "+(x&&!o?`bg-gradient-to-r ${m()} hover:opacity-90 text-white`:"bg-gray-300 text-gray-500 cursor-not-allowed"),children:o?"Staking...":`Stake ${s||"0"} Gems`})]})]})]})})}function eB({isOpen:e,onClose:t,onSuccess:r}){const[n,a]=u.useState({title:"",description:"",category:"Technology",funding_goal:"",min_pledge:"",duration_days:"30"}),[s,i]=u.useState([{amount:25,title:"Early Supporter",description:"Get early access and exclusive updates",estimatedDelivery:"March 2025"}]),[o,l]=u.useState(!1),[c,d]=u.useState("");if(!e)return null;const h=(e,t,r)=>{const n=[...s];n[e]={...n[e],[t]:r},i(n)};return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:sn.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-screen overflow-y-auto",children:[sn.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 p-6 text-white",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:sn.jsx(Cr,{className:"w-6 h-6"})}),sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-xl font-bold",children:"Create Funding Project"}),sn.jsx("p",{className:"text-blue-100",children:"Launch your creative project"})]})]}),sn.jsx("button",{onClick:t,className:"text-white/80 hover:text-white transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]})}),sn.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),n.title&&n.description&&n.funding_goal)if(parseFloat(n.funding_goal)<1e3)d("Minimum funding goal is 1,000 gems");else{l(!0),d("");try{const e=await fetch("/api/growth/funding/projects",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...n,funding_goal:parseFloat(n.funding_goal),min_pledge:parseFloat(n.min_pledge)||25,duration_days:parseInt(n.duration_days),reward_tiers:s})});if(e.ok)r(),t(),a({title:"",description:"",category:"Technology",funding_goal:"",min_pledge:"",duration_days:"30"}),i([{amount:25,title:"Early Supporter",description:"Get early access and exclusive updates",estimatedDelivery:"March 2025"}]);else{const t=await e.json();d(t.error||"Failed to create project")}}catch(o){d("Network error occurred")}finally{l(!1)}}else d("Please fill in all required fields")},className:"p-6 space-y-6",children:[sn.jsxs("div",{className:"space-y-4",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Details"}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Title *"}),sn.jsx("input",{type:"text",value:n.title,onChange:e=>a({...n,title:e.target.value}),placeholder:"Enter your project title",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),sn.jsx("textarea",{value:n.description,onChange:e=>a({...n,description:e.target.value}),placeholder:"Describe your project, goals, and what makes it special",rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),sn.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),sn.jsx("select",{value:n.category,onChange:e=>a({...n,category:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:["Technology","Film","Music","Art","Games","Fashion","Food","Publishing","Design","Education","Health","Other"].map(e=>sn.jsx("option",{value:e,children:e},e))})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (Days)"}),sn.jsxs("select",{value:n.duration_days,onChange:e=>a({...n,duration_days:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[sn.jsx("option",{value:"30",children:"30 days"}),sn.jsx("option",{value:"45",children:"45 days"}),sn.jsx("option",{value:"60",children:"60 days"}),sn.jsx("option",{value:"90",children:"90 days"})]})]})]}),sn.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Funding Goal (Gems) *"}),sn.jsx("input",{type:"number",value:n.funding_goal,onChange:e=>a({...n,funding_goal:e.target.value}),placeholder:"10000",min:"1000",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Pledge (Gems)"}),sn.jsx("input",{type:"number",value:n.min_pledge,onChange:e=>a({...n,min_pledge:e.target.value}),placeholder:"25",min:"1",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),sn.jsxs("div",{className:"space-y-4",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Reward Tiers"}),sn.jsxs("button",{type:"button",onClick:()=>{i([...s,{amount:100,title:"",description:"",estimatedDelivery:"April 2025"}])},className:"flex items-center space-x-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",children:[sn.jsx(Nr,{className:"w-4 h-4"}),sn.jsx("span",{children:"Add Tier"})]})]}),s.map((e,t)=>sn.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-3",children:[sn.jsxs("h4",{className:"font-medium text-gray-900",children:["Tier ",t+1]}),s.length>1&&sn.jsx("button",{type:"button",onClick:()=>(e=>{s.length>1&&i(s.filter((t,r)=>r!==e))})(t),className:"text-red-600 hover:text-red-700",children:sn.jsx(pr,{className:"w-4 h-4"})})]}),sn.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Pledge Amount (Gems)"}),sn.jsx("input",{type:"number",value:e.amount,onChange:e=>h(t,"amount",parseInt(e.target.value)||0),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1"})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Estimated Delivery"}),sn.jsx("input",{type:"text",value:e.estimatedDelivery,onChange:e=>h(t,"estimatedDelivery",e.target.value),placeholder:"March 2025",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),sn.jsxs("div",{className:"mb-3",children:[sn.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Reward Title"}),sn.jsx("input",{type:"text",value:e.title,onChange:e=>h(t,"title",e.target.value),placeholder:"Early Access",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Reward Description"}),sn.jsx("textarea",{value:e.description,onChange:e=>h(t,"description",e.target.value),placeholder:"Describe what backers will receive",rows:2,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]},t))]}),c&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:sn.jsx("p",{className:"text-sm text-red-700",children:c})}),sn.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[sn.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),sn.jsx("button",{type:"submit",disabled:o,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Creating...":"Launch Project"})]})]})]})})}function tB({isOpen:e,onClose:t,user:r,onSuccess:n,policies:a}){const[s,i]=u.useState("pro"),[o,l]=u.useState(!1),[c,d]=u.useState(""),[h,m]=u.useState("select");if(!e)return null;const p=Array.isArray(a)?a:[],x=p.find(e=>e.id===s)||p[0]||null,f=!!x&&(r?.follower_count||0)>=(x.minFollowers||0),g=!!x&&(r?.gems_balance||0)>=(x.monthlyPremium||0),y=e=>e?sn.jsx(St,{className:"w-4 h-4 text-green-600"}):sn.jsx(Jr,{className:"w-4 h-4 text-gray-400"});return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:sn.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-screen overflow-y-auto",children:[sn.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 p-6 text-white",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:sn.jsx(Mr,{className:"w-6 h-6"})}),sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-xl font-bold",children:"Social Shield Protection"}),sn.jsx("p",{className:"text-orange-100",children:"Protect your social media earnings"})]})]}),sn.jsx("button",{onClick:t,className:"text-white/80 hover:text-white transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]})}),sn.jsxs("div",{className:"p-6",children:["select"===h&&sn.jsxs("div",{className:"space-y-6",children:[sn.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:sn.jsxs("div",{className:"flex items-start space-x-3",children:[sn.jsx(kt,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-semibold text-yellow-800",children:"Why You Need Social Shield"}),sn.jsxs("ul",{className:"text-sm text-yellow-700 mt-2 space-y-1",children:[sn.jsx("li",{children:" Algorithm changes can reduce reach by up to 80%"}),sn.jsx("li",{children:" Account bans eliminate income overnight"}),sn.jsx("li",{children:" Content strikes impact monetization for weeks"}),sn.jsx("li",{children:" Platform issues can cause significant follower loss"})]})]})]})}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[0===p.length&&sn.jsx("div",{className:"col-span-full bg-gray-50 border border-dashed border-gray-200 rounded-lg p-6 text-center text-sm text-gray-500",children:"No policies available right now. Check back soon!"}),p.map(e=>{const t=s===e.id,n=(r?.follower_count||0)>=e.minFollowers;return sn.jsxs("div",{className:"border-2 rounded-xl overflow-hidden cursor-pointer transition-all "+(t?"border-orange-500 ring-2 ring-orange-100":n?"border-gray-200 hover:border-orange-300":"border-gray-200 opacity-60"),onClick:()=>n&&i(e.id),children:["pro"===e.id&&sn.jsx("div",{className:"bg-orange-500 text-white text-center py-2 text-sm font-medium",children:"Most Popular"}),sn.jsxs("div",{className:"p-4",children:[sn.jsxs("div",{className:"text-center mb-4",children:[sn.jsx("h3",{className:"text-lg font-bold text-gray-900",children:e.name}),sn.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),sn.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[e.monthlyPremium," Gems",sn.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/month"})]}),sn.jsxs("div",{className:"text-sm text-gray-600",children:["Up to $",e.maxCoverage.toLocaleString()," coverage"]})]}),sn.jsxs("div",{className:"space-y-3 mb-4",children:[sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Coverage:"}),sn.jsx("ul",{className:"space-y-1",children:Object.entries(e.coverage).map(([e,t])=>sn.jsxs("li",{className:"flex items-center space-x-2",children:[y(t),sn.jsx("span",{className:"text-xs "+(t?"text-gray-700":"text-gray-400"),children:e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())})]},e))})]}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Platforms:"}),sn.jsx("div",{className:"flex flex-wrap gap-1",children:e.platforms.map(e=>sn.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:e},e))})]}),sn.jsxs("div",{className:"text-xs text-gray-600 pt-2 border-t border-gray-100",children:[sn.jsxs("div",{children:["Deductible: ",e.deductible," gems"]}),sn.jsxs("div",{className:"flex items-center space-x-1",children:[sn.jsx(Hr,{className:"w-3 h-3"}),sn.jsxs("span",{children:["Min followers: ",e.minFollowers.toLocaleString()]})]})]})]}),!n&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-2",children:sn.jsxs("p",{className:"text-xs text-red-700",children:["Requires ",e.minFollowers.toLocaleString()," followers"]})})]})]},e.id)})]}),sn.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[sn.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Your Status"}),sn.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Hr,{className:"w-4 h-4 text-blue-600"}),sn.jsxs("span",{className:"text-blue-700",children:["Followers: ",(r?.follower_count||0).toLocaleString()]})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(zt,{className:"w-4 h-4 text-blue-600"}),sn.jsxs("span",{className:"text-blue-700",children:["Gem Balance: ",r?.gems_balance||0]})]})]})]}),c&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:sn.jsx("p",{className:"text-sm text-red-700",children:c})}),sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsx("button",{onClick:t,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),sn.jsxs("button",{onClick:()=>m("confirm"),disabled:!f||!g,className:"flex-1 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:["Continue with ",x?.name]})]})]}),"confirm"===h&&x&&sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirm Your Subscription"}),sn.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-2",children:[sn.jsx("span",{className:"font-medium text-gray-900",children:x.name}),sn.jsxs("span",{className:"font-bold text-gray-900",children:[x.monthlyPremium," Gems/month"]})]}),sn.jsxs("div",{className:"text-sm text-gray-600",children:["Maximum coverage: $",x.maxCoverage.toLocaleString()]}),sn.jsxs("div",{className:"text-sm text-gray-600",children:["Deductible: ",x.deductible," gems per claim"]})]}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsx("h4",{className:"font-semibold text-gray-900",children:"Terms & Conditions"}),sn.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[sn.jsx("p",{children:" Your subscription will auto-renew monthly"}),sn.jsx("p",{children:" Claims must be filed within 7 days of incident"}),sn.jsx("p",{children:" Coverage begins 24 hours after subscription activation"}),sn.jsx("p",{children:" You can cancel anytime without penalty"}),sn.jsx("p",{children:" Payouts are processed within 5-10 business days"})]})]})]}),sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsx("button",{onClick:()=>m("select"),className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Back"}),sn.jsx("button",{onClick:async()=>{if(x&&f&&g){l(!0),d("");try{const e=await fetch("/api/growth/shield/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({policy_id:s})});if(e.ok)n(),t(),m("select");else{const t=await e.json();d(t.error||"Failed to subscribe to shield")}}catch(e){d("Network error occurred")}finally{l(!1)}}},disabled:o,className:"flex-1 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white rounded-lg font-medium transition-all duration-200 disabled:opacity-50",children:o?"Subscribing...":`Subscribe for ${x.monthlyPremium} Gems`})]})]})]})]})})}const rB=async(e,t)=>{try{const t=await fetch(e,{credentials:"include"});if(!t.ok)throw new Error(`Request failed with status ${t.status}`);return await t.json()}catch(r){return(e=>"function"==typeof e?e():e)(t)}},nB=e=>[{id:"foundation-growth",name:"Foundation Growth",description:"Balanced staking pool focused on retention and engagement.",lock_period_days:45,base_multiplier:1.4,risk_level:"medium",min_amount:150,max_amount:7500,expected_apr:18.5,icon:Object.keys(e)[0]||"TrendingUp",color:"emerald",features:["Boosted engagement rewards","Weekly treasury reports","Auto-compound"],participant_count:182,total_deposited:96500},{id:"creator-accelerator",name:"Creator Accelerator",description:"High-yield pool backing top creators and launch drops.",lock_period_days:75,base_multiplier:2.1,risk_level:"high",min_amount:500,max_amount:2e4,expected_apr:28,icon:Object.keys(e)[1]||"Rocket",color:"purple",features:["Launch drop priority","Risk-adjusted backfill","Creator insurance"],participant_count:94,total_deposited:184e3},{id:"stability-shield",name:"Stability Shield",description:"Protected staking for conservative growth portfolios.",lock_period_days:30,base_multiplier:1.1,risk_level:"low",min_amount:50,max_amount:5e3,expected_apr:9.5,icon:Object.keys(e)[2]||"Shield",color:"cyan",features:["Principal protection","Daily liquidity window","Auto rollover"],participant_count:312,total_deposited:142500}],aB=()=>[{id:"position-1",channel_id:"foundation-growth",amount:750,multiplier:1.4,lock_until:new Date(Date.now()+216e7).toISOString(),earned_so_far:86,status:"active"},{id:"position-2",channel_id:"stability-shield",amount:300,multiplier:1.1,lock_until:new Date(Date.now()+10368e5).toISOString(),earned_so_far:18,status:"withdrawable"}];function sB(){const[e,t]=u.useState(null),[r,n]=u.useState(!0),[a,s]=u.useState("overview"),[i,o]=u.useState([]),[l,c]=u.useState([]),[d,h]=u.useState([]),[m,p]=u.useState([]),[x,f]=u.useState(null),[g,y]=u.useState(!1),[b,v]=u.useState(!1),[j,w]=u.useState(!1);u.useEffect(()=>{N()},[]);const N=async()=>{try{const e={TrendingUp:Ur,Rocket:Cr,Star:Rr,Shield:Mr,Diamond:It,Target:Lr},[r,n,a,s,i]=await Promise.all([rB("/api/users/me",{user:{id:"growth-demo-user",email:"growth@promorang.com",username:"growth_creator",display_name:"Growth Creator",user_type:"creator",points_balance:12500,gems_balance:980,keys_balance:24,gold_collected:12,follower_count:42e3,created_at:new Date(Date.now()-7776e6).toISOString(),updated_at:(new Date).toISOString(),avatar_url:"https://api.dicebear.com/7.x/avataaars/svg?seed=growth_hub",user_tier:"premium"}}),rB("/api/growth/channels",{channels:nB(e)}),rB("/api/growth/staking",{positions:aB()}),rB("/api/growth/funding/projects",{projects:[{id:101,creator_id:12,creator_name:"Creator Collective",creator_avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=collective",title:"Creator Success Toolkit",description:"Launch an interactive toolkit that teaches new creators how to monetize within 30 days.",target_amount:5e4,amount_raised:24850,backer_count:186,days_left:18,min_pledge:75,status:"active",featured:!0,rewardTiers:[{amount:75,title:"Supporter",description:"Early access + invite to creator roundtable",estimatedDelivery:"45 days",backerCount:120},{amount:350,title:"Partner",description:"Custom growth audit & promo spotlight",estimatedDelivery:"60 days",backerCount:42}]},{id:102,creator_id:27,creator_name:"Community Capital",creator_avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=community_capital",title:"Growth Hub Community Fund",description:"Back emerging creators through pooled capital and mentorship credits.",target_amount:8e4,amount_raised:61200,backer_count:265,days_left:9,min_pledge:120,status:"active",featured:!1,rewardTiers:[{amount:120,title:"Backer",description:"Badge + quarterly impact report",estimatedDelivery:"30 days",backerCount:188},{amount:600,title:"Angel",description:"Board invite + co-marketing slots",estimatedDelivery:"75 days",backerCount:26}]}]}),rB("/api/growth/shield/policies",{policies:[{id:"policy-1",name:"Social Safeguard",description:"Covers platform bans and sudden algorithm changes for verified creators.",premium_amount:45,coverage_amount:7500,deductible:250,min_followers:1e3,coverage:{platformBan:!0,algorithmChange:!0,contentStrike:!0,monetizationLoss:!0,followerLoss:!1},platforms:["instagram","youtube","tiktok"]},{id:"policy-2",name:"Monetization Guard",description:"Income replacement for monetization suspension and CPM volatility.",premium_amount:65,coverage_amount:12e3,deductible:400,min_followers:5e3,coverage:{platformBan:!1,algorithmChange:!0,contentStrike:!0,monetizationLoss:!0,followerLoss:!0},platforms:["youtube","twitch"]}]})]);t(r?.user||r||null);const l=(n?.channels||nB(e)).map((t,r)=>{const n=t.icon_key??t.iconKey??t.icon??"Shield",a=e[n]||Mr;return{id:t.id??`channel-${r}`,name:t.name??"Growth Channel",description:t.description??"Ecosystem staking opportunity",lockPeriod:t.lock_period_days??t.lockPeriodDays??t.lockPeriod??30,baseMultiplier:t.base_multiplier??t.baseMultiplier??1.2,riskLevel:t.risk_level??t.riskLevel??"medium",minDeposit:t.min_amount??t.minDeposit??100,maxDeposit:t.max_amount??t.maxDeposit??1e4,totalDeposited:t.total_deposited??t.totalDeposited??0,participantCount:t.participant_count??t.participantCount??0,expectedApr:t.expected_apr??t.expectedApr??t.apy??12,icon:a,color:t.color||["blue","green","purple"][r%3],features:t.features||["Daily rewards","Auto-compound"]}});h(l);const d=(a?.positions||aB()).map((e,t)=>({id:e.id??`position-${t}`,channelId:e.channel_id??e.channelId??l[0]?.id??"channel-1",amount:e.amount??0,multiplier:e.multiplier??1,lockUntil:e.lock_until??e.lockUntil??(new Date).toISOString(),earnedSoFar:e.earned_so_far??e.earnedSoFar??0,status:e.status??"active"}));o(d);const u=(s?.projects||[{id:101,creator_id:12,creator_name:"Creator Collective",creator_avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=collective",title:"Creator Success Toolkit",description:"Launch an interactive toolkit that teaches new creators how to monetize within 30 days.",target_amount:5e4,amount_raised:24850,backer_count:186,days_left:18,min_pledge:75,status:"active",featured:!0,rewardTiers:[{amount:75,title:"Supporter",description:"Early access + invite to creator roundtable",estimatedDelivery:"45 days",backerCount:120},{amount:350,title:"Partner",description:"Custom growth audit & promo spotlight",estimatedDelivery:"60 days",backerCount:42}]},{id:102,creator_id:27,creator_name:"Community Capital",creator_avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=community_capital",title:"Growth Hub Community Fund",description:"Back emerging creators through pooled capital and mentorship credits.",target_amount:8e4,amount_raised:61200,backer_count:265,days_left:9,min_pledge:120,status:"active",featured:!1,rewardTiers:[{amount:120,title:"Backer",description:"Badge + quarterly impact report",estimatedDelivery:"30 days",backerCount:188},{amount:600,title:"Angel",description:"Board invite + co-marketing slots",estimatedDelivery:"75 days",backerCount:26}]}]).map((e,t)=>({id:e.id??t,creatorId:e.creator_id??e.creatorId??0,creatorName:e.creator_name??e.creatorName??"Growth Creator",creatorAvatar:e.creator_avatar??e.creatorAvatar??`https://api.dicebear.com/7.x/avataaars/svg?seed=growth_${t}`,title:e.title??"Growth initiative",description:e.description??"Help accelerate our platform metrics.",category:e.category??"growth",fundingGoal:e.target_amount??e.fundingGoal??1e4,currentFunding:e.amount_raised??e.currentFunding??2500,backerCount:e.backer_count??e.backerCount??Math.floor(40*Math.random())+10,daysLeft:e.days_left??e.daysLeft??14,minPledge:e.min_pledge??e.minPledge??50,rewardTiers:e.rewardTiers??[{amount:50,title:"Supporter",description:"Early updates & access",estimatedDelivery:"30 days",backerCount:42},{amount:250,title:"Champion",description:"Private workshop + rewards",estimatedDelivery:"45 days",backerCount:18}],featured:Boolean(e.featured),status:e.status??"active"}));c(u);const m=(i?.policies||[{id:"policy-1",name:"Social Safeguard",description:"Covers platform bans and sudden algorithm changes for verified creators.",premium_amount:45,coverage_amount:7500,deductible:250,min_followers:1e3,coverage:{platformBan:!0,algorithmChange:!0,contentStrike:!0,monetizationLoss:!0,followerLoss:!1},platforms:["instagram","youtube","tiktok"]},{id:"policy-2",name:"Monetization Guard",description:"Income replacement for monetization suspension and CPM volatility.",premium_amount:65,coverage_amount:12e3,deductible:400,min_followers:5e3,coverage:{platformBan:!1,algorithmChange:!0,contentStrike:!0,monetizationLoss:!0,followerLoss:!0},platforms:["youtube","twitch"]}]).map((e,t)=>({id:e.id??`shield-${t}`,name:e.name??"Growth Shield",description:e.description??"Protects against platform volatility.",coverage:e.coverage??{platformBan:!0,algorithmChange:!0,contentStrike:!0,monetizationLoss:!0,followerLoss:!1},monthlyPremium:e.premium_amount??e.monthlyPremium??49,maxCoverage:e.coverage_amount??e.maxCoverage??5e3,deductible:e.deductible??250,platforms:e.platforms??["instagram","youtube"],minFollowers:e.min_followers??e.minFollowers??1e3}));p(m)}catch(e){}finally{n(!1)}},_=[{id:"stable",name:"Stable Growth",description:"Low-risk staking with steady returns. Perfect for conservative investors.",lockPeriod:30,baseMultiplier:1.2,riskLevel:"low",minDeposit:100,maxDeposit:1e4,totalDeposited:125e3,participantCount:234,expectedApr:12.5,icon:Mr,color:"green",features:["Principal protection","Daily rewards","Auto-compound","Early withdrawal (penalty)"]},{id:"growth",name:"Growth Accelerator",description:"Medium-risk channel focused on platform growth metrics and user acquisition.",lockPeriod:90,baseMultiplier:1.8,riskLevel:"medium",minDeposit:250,maxDeposit:25e3,totalDeposited:89e3,participantCount:156,expectedApr:28.7,icon:Ur,color:"blue",features:["Growth bonuses","Platform rewards","Referral multipliers","Quarterly bonuses"]},{id:"venture",name:"Venture Pool",description:"High-risk, high-reward pool investing in emerging creators and technologies.",lockPeriod:180,baseMultiplier:3.2,riskLevel:"high",minDeposit:500,maxDeposit:5e4,totalDeposited:67e3,participantCount:89,expectedApr:45.8,icon:Cr,color:"purple",features:["Creator equity","Tech innovation rewards","Exclusive opportunities","Governance rights"]},{id:"creator",name:"Creator Fund",description:"Support emerging creators while earning from their success.",lockPeriod:60,baseMultiplier:2.1,riskLevel:"medium",minDeposit:200,maxDeposit:15e3,totalDeposited:45e3,participantCount:78,expectedApr:32.1,icon:Rr,color:"orange",features:["Creator revenue share","Content access","Meet & greet events","Portfolio tracking"]}],k=Array.from({length:30},(e,t)=>{const r=new Date;return r.setDate(r.getDate()-(29-t)),{date:r.toISOString().split("T")[0],totalStaked:Math.floor(5e4*Math.random())+3e5,activeProjects:Math.floor(10*Math.random())+25,fundingVolume:Math.floor(25e3*Math.random())+75e3,premiumsCollected:Math.floor(5e3*Math.random())+15e3,rewardsDistributed:Math.floor(2e4*Math.random())+5e4}}),S=d.length>0?d:_,C=S.reduce((e,t)=>e+t.totalDeposited,0),O=S.reduce((e,t)=>e+t.participantCount,0),E=S.length?S.reduce((e,t)=>e+t.expectedApr,0)/S.length:0,P=e=>{switch(e){case"low":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"high":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},T=e=>{const t={green:"from-green-500 to-emerald-600",blue:"from-blue-500 to-cyan-600",purple:"from-purple-500 to-pink-600",orange:"from-orange-500 to-red-600"};return t[e]||t.blue};return r?sn.jsx("div",{className:"flex items-center justify-center h-64",children:sn.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):sn.jsxs("div",{className:"space-y-8",children:[sn.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-blue-600 to-cyan-600 rounded-2xl p-8 text-white",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Growth Hub"}),sn.jsx("p",{className:"text-purple-100 text-lg",children:"Amplify your earnings through staking, funding, and protection"})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsx("div",{className:"text-sm text-purple-200",children:"Your Portfolio Value"}),sn.jsxs("div",{className:"text-3xl font-bold",children:[i.reduce((e,t)=>e+t.amount+t.earnedSoFar,0).toFixed(0)," Gems"]})]})]})}),sn.jsx("div",{className:"border-b border-gray-200",children:sn.jsx("nav",{className:"flex space-x-8",children:[{id:"overview",label:"Overview",icon:yt},{id:"channels",label:"Growth Channels",icon:Ur},{id:"funding",label:"Creator Funding",icon:Cr},{id:"shield",label:"Social Shield",icon:Mr},{id:"economy",label:"Platform Economy",icon:vt}].map(e=>{const t=e.icon;return sn.jsxs("button",{onClick:()=>s(e.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors "+(a===e.id?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[sn.jsx(t,{className:"w-4 h-4"}),sn.jsx("span",{children:e.label})]},e.id)})})}),"overview"===a&&sn.jsxs("div",{className:"space-y-8",children:[sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[sn.jsx(HU,{title:"Active Stakes",value:i.filter(e=>"active"===e.status).length.toString(),change:12.5,changeType:"increase",icon:sn.jsx(sr,{className:"w-5 h-5"}),trend:[]}),sn.jsx(HU,{title:"Total Earnings",value:`${i.reduce((e,t)=>e+t.earnedSoFar,0).toFixed(1)} Gems`,change:8.3,changeType:"increase",icon:sn.jsx(It,{className:"w-5 h-5"}),trend:[]}),sn.jsx(HU,{title:"Projects Backed",value:"3",change:50,changeType:"increase",icon:sn.jsx(Gt,{className:"w-5 h-5"}),trend:[]}),sn.jsx(HU,{title:"Shield Coverage",value:"$5,000",change:0,changeType:"increase",icon:sn.jsx(Mr,{className:"w-5 h-5"}),trend:[]})]}),sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Your Active Positions"}),i.length>0?sn.jsx("div",{className:"space-y-4",children:i.map(e=>{const t=S.find(t=>t.id===e.channelId),r=t?.icon||sr,n=Math.ceil((new Date(e.lockUntil).getTime()-(new Date).getTime())/864e5);return sn.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg p-4 border border-gray-200",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-4",children:[sn.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${T(t?.color||"blue")} rounded-xl flex items-center justify-center text-white`,children:sn.jsx(r,{className:"w-6 h-6"})}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-semibold text-gray-900",children:t?.name}),sn.jsxs("p",{className:"text-sm text-gray-600",children:[e.amount," Gems staked"]})]})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsxs("div",{className:"text-lg font-bold text-green-600",children:["+",e.earnedSoFar," Gems"]}),sn.jsxs("div",{className:"text-sm text-gray-500",children:[n," days left"]})]})]}),sn.jsxs("div",{className:"mt-4",children:[sn.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[sn.jsx("span",{children:"Progress"}),sn.jsxs("span",{children:[(e.earnedSoFar/(e.amount*(e.multiplier-1))*100).toFixed(1),"%"]})]}),sn.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:sn.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,e.earnedSoFar/(e.amount*(e.multiplier-1))*100)}%`}})})]})]},e.id)})}):sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx(sr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Active Positions"}),sn.jsx("p",{className:"text-gray-600 mb-6",children:"Start growing your gems through our staking channels"}),sn.jsx("button",{onClick:()=>s("channels"),className:"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200",children:"Explore Growth Channels"})]})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[sn.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:sn.jsx(Ur,{className:"w-6 h-6 text-green-600"})}),sn.jsxs("div",{children:[sn.jsx("h3",{className:"font-semibold text-gray-900",children:"Platform Growth"}),sn.jsx("p",{className:"text-sm text-gray-600",children:"Last 30 days"})]})]}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"Total Staked"}),sn.jsxs("span",{className:"font-semibold",children:[C.toLocaleString()," Gems"]})]}),sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"Active Stakers"}),sn.jsx("span",{className:"font-semibold",children:O.toLocaleString()})]}),sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"Avg APR"}),sn.jsxs("span",{className:"font-semibold text-green-600",children:[E.toFixed(1),"%"]})]})]})]}),sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[sn.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:sn.jsx(Cr,{className:"w-6 h-6 text-blue-600"})}),sn.jsxs("div",{children:[sn.jsx("h3",{className:"font-semibold text-gray-900",children:"Creator Funding"}),sn.jsx("p",{className:"text-sm text-gray-600",children:"Active projects"})]})]}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"Live Projects"}),sn.jsx("span",{className:"font-semibold",children:l.length})]}),sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"Total Funding"}),sn.jsxs("span",{className:"font-semibold",children:["$",l.reduce((e,t)=>e+t.currentFunding,0).toLocaleString()]})]}),sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"Success Rate"}),sn.jsx("span",{className:"font-semibold text-green-600",children:"87%"})]})]})]}),sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[sn.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:sn.jsx(Mr,{className:"w-6 h-6 text-purple-600"})}),sn.jsxs("div",{children:[sn.jsx("h3",{className:"font-semibold text-gray-900",children:"Social Shield"}),sn.jsx("p",{className:"text-sm text-gray-600",children:"Protection status"})]})]}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"Coverage Level"}),sn.jsx("span",{className:"font-semibold",children:"Pro Shield"})]}),sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"Max Coverage"}),sn.jsx("span",{className:"font-semibold",children:"$5,000"})]}),sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"Status"}),sn.jsx("span",{className:"font-semibold text-green-600",children:"Active"})]})]})]})]})]}),"channels"===a&&sn.jsxs("div",{className:"space-y-8",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Growth Channels"}),sn.jsx("p",{className:"text-gray-600",children:"Lock your gems for higher multipliers and platform rewards"})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsx("div",{className:"text-sm text-gray-500",children:"Your Available Balance"}),sn.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[e?.gems_balance||0," Gems"]})]})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[0===d.length&&sn.jsx("div",{className:"col-span-full bg-gray-50 border border-dashed border-gray-200 rounded-lg p-6 text-center text-sm text-gray-500",children:"Growth channels are being configured. Check back soon."}),S.map(e=>{const t=e.icon;return sn.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden hover:shadow-md transition-all duration-200",children:[sn.jsxs("div",{className:`bg-gradient-to-r ${T(e.color)} p-6 text-white`,children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:sn.jsx(t,{className:"w-6 h-6"})}),sn.jsxs("div",{children:[sn.jsx("h3",{className:"text-xl font-bold",children:e.name}),sn.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${P(e.riskLevel)} text-gray-800`,children:[e.riskLevel.toUpperCase()," RISK"]})]})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsxs("div",{className:"text-2xl font-bold",children:[e.expectedApr.toFixed(1),"%"]}),sn.jsx("div",{className:"text-sm opacity-75",children:"Expected APR"})]})]}),sn.jsx("p",{className:"text-white/90",children:e.description})]}),sn.jsxs("div",{className:"p-6",children:[sn.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[sn.jsxs("div",{children:[sn.jsx("div",{className:"text-sm text-gray-500",children:"Lock Period"}),sn.jsxs("div",{className:"font-semibold",children:[e.lockPeriod," days"]})]}),sn.jsxs("div",{children:[sn.jsx("div",{className:"text-sm text-gray-500",children:"Multiplier"}),sn.jsxs("div",{className:"font-semibold",children:[e.baseMultiplier,"x"]})]}),sn.jsxs("div",{children:[sn.jsx("div",{className:"text-sm text-gray-500",children:"Min Deposit"}),sn.jsxs("div",{className:"font-semibold",children:[e.minDeposit," Gems"]})]}),sn.jsxs("div",{children:[sn.jsx("div",{className:"text-sm text-gray-500",children:"Participants"}),sn.jsx("div",{className:"font-semibold",children:e.participantCount})]})]}),sn.jsxs("div",{className:"mb-6",children:[sn.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Features"}),sn.jsx("div",{className:"space-y-1",children:e.features.map((e,t)=>sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(St,{className:"w-4 h-4 text-green-600"}),sn.jsx("span",{className:"text-sm text-gray-700",children:e})]},t))})]}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[sn.jsxs("div",{className:"flex items-center justify-between text-sm",children:[sn.jsx("span",{className:"text-gray-600",children:"Total Deposited"}),sn.jsxs("span",{className:"font-semibold",children:[e.totalDeposited.toLocaleString()," Gems"]})]}),sn.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:sn.jsx("div",{className:`bg-gradient-to-r ${T(e.color)} h-2 rounded-full transition-all duration-300`,style:{width:`${Math.min(100,e.totalDeposited/e.maxDeposit*100)}%`}})})]}),sn.jsxs("button",{onClick:()=>{f(e),y(!0)},className:`w-full bg-gradient-to-r ${T(e.color)} hover:opacity-90 text-white py-3 px-4 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2`,children:[sn.jsx(sr,{className:"w-4 h-4"}),sn.jsxs("span",{children:["Stake in ",e.name]})]})]})]})]},e.id)})]}),sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[sn.jsx(pt,{className:"w-6 h-6 text-blue-600"}),sn.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Staking Calculator"})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (Gems)"}),sn.jsx("input",{type:"number",placeholder:"1000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Channel"}),sn.jsx("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:S.map(e=>sn.jsx("option",{value:e.id,children:e.name},e.id))})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Rewards"}),sn.jsx("div",{className:"px-3 py-2 bg-green-50 border border-green-200 rounded-lg text-green-800 font-medium",children:"+250 Gems"})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Return"}),sn.jsx("div",{className:"px-3 py-2 bg-blue-50 border border-blue-200 rounded-lg text-blue-800 font-medium",children:"1,250 Gems"})]})]})]})]}),"funding"===a&&sn.jsxs("div",{className:"space-y-8",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Creator Funding"}),sn.jsx("p",{className:"text-gray-600",children:"Support innovative projects and earn from their success"})]}),sn.jsxs("button",{onClick:()=>v(!0),className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 flex items-center space-x-2",children:[sn.jsx(Nr,{className:"w-4 h-4"}),sn.jsx("span",{children:"Create Project"})]})]}),sn.jsx("div",{className:"space-y-6",children:l.filter(e=>e.featured).map(e=>sn.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[sn.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 border-b border-gray-200",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[sn.jsx(Rr,{className:"w-5 h-5 text-yellow-500"}),sn.jsx("span",{className:"text-sm font-medium text-yellow-700",children:"Featured Project"})]}),sn.jsxs("div",{className:"flex items-start justify-between",children:[sn.jsxs("div",{className:"flex-1",children:[sn.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e.title}),sn.jsx("p",{className:"text-gray-600 mb-4",children:e.description}),sn.jsxs("div",{className:"flex items-center space-x-6",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("img",{src:e.creatorAvatar,alt:e.creatorName,className:"w-8 h-8 rounded-full"}),sn.jsx("span",{className:"font-medium text-gray-900",children:e.creatorName})]}),sn.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:e.category})]})]}),sn.jsxs("div",{className:"text-right ml-6",children:[sn.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["$",e.currentFunding.toLocaleString()]}),sn.jsxs("div",{className:"text-sm text-gray-500",children:["of $",e.fundingGoal.toLocaleString()," goal"]})]})]})]}),sn.jsxs("div",{className:"p-6",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsxs("div",{className:"flex items-center space-x-6",children:[sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"text-lg font-bold text-gray-900",children:e.backerCount}),sn.jsx("div",{className:"text-sm text-gray-500",children:"Backers"})]}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"text-lg font-bold text-gray-900",children:e.daysLeft}),sn.jsx("div",{className:"text-sm text-gray-500",children:"Days Left"})]}),sn.jsxs("div",{className:"text-center",children:[sn.jsxs("div",{className:"text-lg font-bold text-green-600",children:[(e.currentFunding/e.fundingGoal*100).toFixed(0),"%"]}),sn.jsx("div",{className:"text-sm text-gray-500",children:"Funded"})]})]}),sn.jsx("button",{onClick:()=>{},className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200",children:"Back This Project"})]}),sn.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:sn.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,e.currentFunding/e.fundingGoal*100)}%`}})}),sn.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.rewardTiers.slice(0,3).map((e,t)=>sn.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[sn.jsxs("div",{className:"text-lg font-bold text-gray-900 mb-2",children:["$",e.amount]}),sn.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:e.title}),sn.jsx("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),sn.jsxs("div",{className:"flex items-center justify-between text-sm",children:[sn.jsxs("span",{className:"text-gray-500",children:[e.backerCount," backers"]}),sn.jsx("span",{className:"text-blue-600",children:e.estimatedDelivery})]})]},t))})]})]},e.id))}),sn.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.filter(e=>!e.featured).map(e=>sn.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden hover:shadow-md transition-all duration-200",children:sn.jsxs("div",{className:"p-6",children:[sn.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[sn.jsx("img",{src:e.creatorAvatar,alt:e.creatorName,className:"w-10 h-10 rounded-full"}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-semibold text-gray-900",children:e.creatorName}),sn.jsx("span",{className:"text-sm text-gray-500",children:e.category})]})]}),sn.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:e.title}),sn.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:e.description}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsxs("div",{className:"flex justify-between text-sm",children:[sn.jsx("span",{className:"text-gray-500",children:"Funding Progress"}),sn.jsxs("span",{className:"font-medium",children:["$",e.currentFunding.toLocaleString()," / $",e.fundingGoal.toLocaleString()]})]}),sn.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:sn.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,e.currentFunding/e.fundingGoal*100)}%`}})}),sn.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[sn.jsxs("span",{children:[e.backerCount," backers"]}),sn.jsxs("span",{children:[e.daysLeft," days left"]})]})]}),sn.jsx("button",{className:"w-full mt-4 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white py-2 px-4 rounded-lg font-medium transition-all duration-200",children:"View Project"})]})},e.id))})]}),"shield"===a&&sn.jsxs("div",{className:"space-y-8",children:[sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Social Shield"}),sn.jsx("p",{className:"text-gray-600",children:"Protect your social media earnings with comprehensive insurance coverage"})]}),sn.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-xl p-6",children:sn.jsxs("div",{className:"flex items-start space-x-4",children:[sn.jsx(kt,{className:"w-6 h-6 text-orange-600 mt-1"}),sn.jsxs("div",{children:[sn.jsx("h3",{className:"font-semibold text-orange-900 mb-2",children:"Why You Need Social Shield"}),sn.jsxs("ul",{className:"text-orange-800 space-y-1 text-sm",children:[sn.jsx("li",{children:" Platform algorithm changes can reduce your reach by up to 80%"}),sn.jsx("li",{children:" Account bans can eliminate months of income overnight"}),sn.jsx("li",{children:" Content strikes can impact monetization for weeks"}),sn.jsx("li",{children:" Follower loss from platform issues affects future earnings"})]})]})]})}),sn.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{id:"basic",name:"Basic Shield",coverage:{platformBan:!1,algorithmChange:!0,contentStrike:!0,monetizationLoss:!1,followerLoss:!1},monthlyPremium:29,maxCoverage:1e3,deductible:50,platforms:["Instagram","TikTok"],minFollowers:1e3},{id:"pro",name:"Pro Shield",coverage:{platformBan:!0,algorithmChange:!0,contentStrike:!0,monetizationLoss:!0,followerLoss:!1},monthlyPremium:79,maxCoverage:5e3,deductible:100,platforms:["Instagram","TikTok","YouTube","Twitter"],minFollowers:5e3},{id:"enterprise",name:"Enterprise Shield",coverage:{platformBan:!0,algorithmChange:!0,contentStrike:!0,monetizationLoss:!0,followerLoss:!0},monthlyPremium:199,maxCoverage:25e3,deductible:250,platforms:["Instagram","TikTok","YouTube","Twitter","LinkedIn","Twitch"],minFollowers:25e3}].map(e=>sn.jsxs("div",{className:"bg-white rounded-xl border-2 shadow-sm overflow-hidden "+("pro"===e.id?"border-blue-500 ring-2 ring-blue-100":"border-gray-200"),children:["pro"===e.id&&sn.jsx("div",{className:"bg-blue-500 text-white text-center py-2 text-sm font-medium",children:"Most Popular"}),sn.jsxs("div",{className:"p-6",children:[sn.jsxs("div",{className:"text-center mb-6",children:[sn.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e.name}),sn.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:["$",e.monthlyPremium,sn.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/month"})]}),sn.jsxs("div",{className:"text-sm text-gray-600",children:["Up to $",e.maxCoverage.toLocaleString()," coverage"]})]}),sn.jsxs("div",{className:"space-y-4 mb-6",children:[sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Coverage Includes:"}),sn.jsx("ul",{className:"space-y-2",children:Object.entries(e.coverage).map(([e,t])=>sn.jsxs("li",{className:"flex items-center space-x-2",children:[t?sn.jsx(St,{className:"w-4 h-4 text-green-600"}):sn.jsx(St,{className:"w-4 h-4 text-gray-400"}),sn.jsx("span",{className:"text-sm "+(t?"text-gray-700":"text-gray-400"),children:e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())})]},e))})]}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Platforms:"}),sn.jsx("div",{className:"flex flex-wrap gap-2",children:e.platforms.map(e=>sn.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:e},e))})]}),sn.jsxs("div",{className:"text-sm text-gray-600",children:[sn.jsxs("div",{children:["Deductible: $",e.deductible]}),sn.jsxs("div",{children:["Min followers: ",e.minFollowers.toLocaleString()]})]})]}),sn.jsxs("button",{onClick:()=>w(!0),className:"w-full py-3 px-4 rounded-lg font-medium transition-all duration-200 "+("pro"===e.id?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"),children:["Get ",e.name]})]})]},e.id))}),sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Claims"}),sn.jsxs("div",{className:"text-center py-8 text-gray-500",children:[sn.jsx(Mr,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),sn.jsx("p",{children:"No claims yet - you're well protected!"})]})]})]}),"economy"===a&&sn.jsxs("div",{className:"space-y-8",children:[sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Platform Economy"}),sn.jsx("p",{className:"text-gray-600",children:"How your participation drives the entire Promorang ecosystem"})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[sn.jsx(HU,{title:"Total Value Locked",value:`${C.toLocaleString()} Gems`,change:23.4,changeType:"increase",icon:sn.jsx(sr,{className:"w-5 h-5"}),trend:k.slice(-7).map(e=>({date:e.date,value:e.totalStaked}))}),sn.jsx(HU,{title:"Active Projects",value:l.length.toString(),change:15.2,changeType:"increase",icon:sn.jsx(Cr,{className:"w-5 h-5"}),trend:k.slice(-7).map(e=>({date:e.date,value:e.activeProjects}))}),sn.jsx(HU,{title:"Funding Volume",value:`$${l.reduce((e,t)=>e+t.currentFunding,0).toLocaleString()}`,change:31.7,changeType:"increase",icon:sn.jsx(Rt,{className:"w-5 h-5"}),trend:k.slice(-7).map(e=>({date:e.date,value:e.fundingVolume}))}),sn.jsx(HU,{title:"Shield Premiums",value:"$47,000",change:8.9,changeType:"increase",icon:sn.jsx(Mr,{className:"w-5 h-5"}),trend:k.slice(-7).map(e=>({date:e.date,value:e.premiumsCollected}))})]}),sn.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Economic Flow"}),sn.jsx(KU,{data:k.map(e=>({date:e.date,value:e.rewardsDistributed,secondary:e.fundingVolume})),height:300,primaryKey:"value",secondaryKey:"secondary",primaryColor:"#10b981",secondaryColor:"#3b82f6"}),sn.jsxs("div",{className:"flex justify-center space-x-6 mt-4 text-sm",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),sn.jsx("span",{className:"text-gray-600",children:"Rewards Distributed"})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),sn.jsx("span",{className:"text-gray-600",children:"Funding Volume"})]})]})]}),sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Value Distribution"}),sn.jsx(WU,{data:[{name:"Staking Rewards",value:45,color:"#10b981"},{name:"Creator Funding",value:30,color:"#3b82f6"},{name:"Shield Reserves",value:15,color:"#8b5cf6"},{name:"Platform Development",value:10,color:"#f59e0b"}],height:300})]})]}),sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"How Growth Hub Stimulates the Economy"}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[sn.jsxs("div",{className:"space-y-4",children:[sn.jsxs("div",{className:"flex items-start space-x-3",children:[sn.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:sn.jsx(Ur,{className:"w-4 h-4 text-green-600"})}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-semibold text-gray-900",children:"Staking Creates Liquidity"}),sn.jsx("p",{className:"text-gray-600 text-sm",children:"When you stake gems, they're used to fund platform operations, creator rewards, and new feature development."})]})]}),sn.jsxs("div",{className:"flex items-start space-x-3",children:[sn.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:sn.jsx(Cr,{className:"w-4 h-4 text-blue-600"})}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-semibold text-gray-900",children:"Funding Drives Innovation"}),sn.jsx("p",{className:"text-gray-600 text-sm",children:"Creator funding projects introduce new content types and engagement methods, expanding earning opportunities."})]})]}),sn.jsxs("div",{className:"flex items-start space-x-3",children:[sn.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:sn.jsx(Mr,{className:"w-4 h-4 text-purple-600"})}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-semibold text-gray-900",children:"Shield Stabilizes Earnings"}),sn.jsx("p",{className:"text-gray-600 text-sm",children:"Social Shield premiums create a safety net that encourages more users to participate confidently."})]})]})]}),sn.jsxs("div",{className:"space-y-4",children:[sn.jsxs("div",{className:"flex items-start space-x-3",children:[sn.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:sn.jsx(Tt,{className:"w-4 h-4 text-orange-600"})}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-semibold text-gray-900",children:"Network Effects"}),sn.jsx("p",{className:"text-gray-600 text-sm",children:"More participants mean better rates, higher liquidity, and stronger protection for everyone."})]})]}),sn.jsxs("div",{className:"flex items-start space-x-3",children:[sn.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:sn.jsx(Lr,{className:"w-4 h-4 text-red-600"})}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-semibold text-gray-900",children:"Value Alignment"}),sn.jsx("p",{className:"text-gray-600 text-sm",children:"Your success directly correlates with platform growth, creating aligned incentives for long-term value creation."})]})]}),sn.jsxs("div",{className:"flex items-start space-x-3",children:[sn.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0",children:sn.jsx(tr,{className:"w-4 h-4 text-yellow-600"})}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-semibold text-gray-900",children:"Continuous Innovation"}),sn.jsx("p",{className:"text-gray-600 text-sm",children:"Funds from Growth Hub activities are reinvested into new earning opportunities and platform improvements."})]})]})]})]})]})]}),sn.jsx(XU,{isOpen:g,onClose:()=>y(!1),channel:x,user:e,onSuccess:N}),sn.jsx(eB,{isOpen:b,onClose:()=>v(!1),user:e,onSuccess:N}),sn.jsx(tB,{isOpen:j,onClose:()=>w(!1),user:e,onSuccess:N,policies:m})]})}function iB({user:e,isOpen:t,onClose:r,onSuccess:n}){const[a,s]=u.useState(""),[i,o]=u.useState(!1),[l,c]=u.useState(null),[d,h]=u.useState(!1);if(!t||!e)return null;const m=e=>{const t=document.createElement("div");t.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 animate-pulse",t.innerHTML=`\n      <div class="flex items-center space-x-3">\n        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">\n          <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>\n        </svg>\n        <div>\n          <div class="font-bold">Referral Success!</div>\n          <div class="text-sm">You earned ${e} points!</div>\n        </div>\n      </div>\n    `,document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},4e3)},p=`https://promorang.com?ref=${e.referral_code}`;return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:sn.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl",children:[sn.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(Hr,{className:"w-6 h-6 text-purple-600"}),sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Referral Program"}),sn.jsx("p",{className:"text-sm text-gray-600",children:"Invite friends and earn together"})]})]}),sn.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsxs("div",{className:"p-6 space-y-6",children:[sn.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-200 rounded-2xl p-6",children:[sn.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Your Referral Code"}),sn.jsxs("div",{className:"space-y-4",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("code",{className:"flex-1 bg-white px-4 py-3 rounded-xl border font-mono text-lg text-center",children:e.referral_code}),sn.jsx("button",{onClick:async()=>{const t=`https://promorang.com?ref=${e.referral_code}`;await navigator.clipboard.writeText(t),h(!0),setTimeout(()=>h(!1),2e3)},className:"p-3 bg-purple-500 hover:bg-purple-600 text-white rounded-xl transition-colors",children:d?sn.jsx(jt,{className:"w-5 h-5"}):sn.jsx(At,{className:"w-5 h-5"})})]}),sn.jsx("p",{className:"text-sm text-purple-700 text-center",children:"Share this code or the link below with friends"}),sn.jsx("div",{className:"bg-white rounded-xl p-3 border",children:sn.jsx("p",{className:"text-sm text-gray-600 break-all",children:p})})]})]}),sn.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-6",children:[sn.jsx("h4",{className:"font-medium text-blue-900 mb-4",children:"How It Works"}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:sn.jsx(Hr,{className:"w-6 h-6 text-blue-600"})}),sn.jsx("h5",{className:"font-medium text-blue-900 mb-1",children:"Share"}),sn.jsx("p",{className:"text-sm text-blue-700",children:"Send your code to friends"})]}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:sn.jsx(Vt,{className:"w-6 h-6 text-blue-600"})}),sn.jsx("h5",{className:"font-medium text-blue-900 mb-1",children:"They Join"}),sn.jsx("p",{className:"text-sm text-blue-700",children:"Friend signs up with your code"})]}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:sn.jsx(Vt,{className:"w-6 h-6 text-blue-600"})}),sn.jsx("h5",{className:"font-medium text-blue-900 mb-1",children:"Both Earn"}),sn.jsx("p",{className:"text-sm text-blue-700",children:"You get 500, they get 250 points"})]})]})]}),!e.referred_by&&sn.jsxs("div",{className:"border border-gray-200 rounded-2xl p-6",children:[sn.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Have a Referral Code?"}),sn.jsxs("div",{className:"space-y-4",children:[sn.jsx("input",{type:"text",value:a,onChange:e=>s(e.target.value.toUpperCase()),placeholder:"Enter referral code",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono",maxLength:6}),l&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3",children:sn.jsx("p",{className:"text-sm text-red-700",children:l})}),sn.jsx("button",{onClick:async()=>{if(a.trim()){o(!0),c(null);try{const e=await fetch("/api/users/process-referral",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({referral_code:a.toUpperCase()})});if(e.ok){const t=await e.json();n(),r(),m(t.referred_reward)}else{const t=await e.json();c(t.error||"Failed to process referral")}}catch(e){c("Network error occurred")}finally{o(!1)}}else c("Please enter a referral code")},disabled:!a.trim()||i,className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-3 rounded-xl font-medium transition-all duration-200 flex items-center justify-center space-x-2",children:i?sn.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}):sn.jsxs(sn.Fragment,{children:[sn.jsx(Vt,{className:"w-5 h-5"}),sn.jsx("span",{children:"Apply Code & Earn 250 Points"})]})})]})]}),e.referred_by&&sn.jsx("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-4",children:sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(jt,{className:"w-6 h-6 text-green-600"}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-medium text-green-900",children:"Referral Applied"}),sn.jsxs("p",{className:"text-sm text-green-700",children:["You joined using code: ",e.referred_by]})]})]})}),sn.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 border border-yellow-200 rounded-2xl p-6",children:[sn.jsx("h4",{className:"font-medium text-yellow-900 mb-3",children:"Earning Potential"}),sn.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:"500"}),sn.jsx("div",{className:"text-sm text-yellow-600",children:"Points per referral"})]}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:""}),sn.jsx("div",{className:"text-sm text-yellow-600",children:"No limit on referrals"})]})]})]})]})]})})}function oB({user:e,applicationId:t,dropTitle:r,isOpen:n,onClose:a,onSuccess:s}){const[i,o]=u.useState("url"),[l,c]=u.useState(""),[d,h]=u.useState(""),[m,p]=u.useState(!1),[x,f]=u.useState(null);if(!n||!e)return null;const g=()=>{c(""),h(""),o("url"),f(null)},y=e=>{try{return new URL(e),!0}catch(t){return!1}},b=()=>{const e=document.createElement("div");e.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 animate-pulse",e.innerHTML='\n      <div class="flex items-center space-x-3">\n        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">\n          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>\n        </svg>\n        <div>\n          <div class="font-bold">Submission Sent!</div>\n          <div class="text-sm">Your work has been submitted for review</div>\n        </div>\n      </div>\n    ',document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},4e3)};return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:sn.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl",children:[sn.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(Kr,{className:"w-6 h-6 text-purple-600"}),sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Submit Your Work"}),sn.jsx("p",{className:"text-sm text-gray-600",children:r})]})]}),sn.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsxs("div",{className:"p-6 space-y-6",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Submission Type"}),sn.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[sn.jsxs("button",{onClick:()=>o("url"),className:"p-4 rounded-xl border-2 transition-colors "+("url"===i?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:[sn.jsx(rr,{className:"w-6 h-6 mx-auto mb-2 text-purple-600"}),sn.jsx("div",{className:"text-sm font-medium",children:"URL Link"}),sn.jsx("div",{className:"text-xs text-gray-500",children:"Submit a link to your work"})]}),sn.jsxs("button",{onClick:()=>o("text"),className:"p-4 rounded-xl border-2 transition-colors "+("text"===i?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:[sn.jsx(Bt,{className:"w-6 h-6 mx-auto mb-2 text-purple-600"}),sn.jsx("div",{className:"text-sm font-medium",children:"Text Content"}),sn.jsx("div",{className:"text-xs text-gray-500",children:"Submit text directly"})]})]})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"url"===i?"URL Link *":"Text Content *"}),"url"===i?sn.jsx("input",{type:"url",value:l,onChange:e=>c(e.target.value),placeholder:"https://example.com/your-work",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):sn.jsx("textarea",{value:l,onChange:e=>c(e.target.value),placeholder:"Enter your text content here...",rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes (Optional)"}),sn.jsx("textarea",{value:d,onChange:e=>h(e.target.value),placeholder:"Any additional context or notes about your submission...",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),sn.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[sn.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Submission Guidelines"}),sn.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[sn.jsx("li",{children:" Ensure your submission meets all drop requirements"}),sn.jsx("li",{children:" Double-check URLs are accessible and working"}),sn.jsx("li",{children:" Include any relevant context in the additional notes"}),sn.jsx("li",{children:" Your submission will be reviewed within 24-48 hours"})]})]}),x&&sn.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-start space-x-3",children:[sn.jsx(kt,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),sn.jsx("p",{className:"text-sm text-red-700",children:x})]}),sn.jsxs("div",{className:"flex space-x-3 pt-4",children:[sn.jsx("button",{onClick:a,className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),sn.jsx("button",{onClick:async()=>{if(l.trim())if("url"!==i||y(l)){p(!0),f(null);try{const e=await fetch(`/api/drop-applications/${t}/submit`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({submission_type:i,submission_data:l,submission_notes:d})});if(e.ok)s(),a(),g(),b();else{const t=await e.json();f(t.error||"Submission failed")}}catch(e){f("Network error occurred")}finally{p(!1)}}else f("Please provide a valid URL");else f("Please provide your submission data")},disabled:!l.trim()||m,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-3 rounded-xl font-medium transition-all duration-200 flex items-center justify-center space-x-2",children:m?sn.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}):sn.jsxs(sn.Fragment,{children:[sn.jsx(Pr,{className:"w-5 h-5"}),sn.jsx("span",{children:"Submit Work"})]})})]})]})]})})}function lB({application:e,onSubmissionSuccess:t}){const[r,n]=u.useState(!1),a=e.drop_title?.toLowerCase().includes("[demo]")||e.drop_title?.toLowerCase().includes("demo")||e.application_message?.toLowerCase().includes("demo"),s="approved"===e.status,i="approved"===e.status;return sn.jsxs(sn.Fragment,{children:[sn.jsxs("div",{className:"rounded-2xl p-6 border "+(a?"bg-orange-50 border-orange-200":"bg-gray-50 border-gray-100"),children:[a&&sn.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-lg px-3 py-2 mb-4 text-center",children:sn.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm font-medium",children:[sn.jsx("span",{children:""}),sn.jsx("span",{children:"DEMO APPLICATION - No real gems earned"}),sn.jsx("span",{children:""})]})}),sn.jsxs("div",{className:"flex items-start justify-between mb-4",children:[sn.jsxs("div",{className:"flex-1",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[sn.jsx("h4",{className:"font-semibold text-gray-900",children:e.drop_title}),e.advertiser_brand_name&&sn.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-medium",children:e.advertiser_brand_name})]}),sn.jsx("p",{className:"text-gray-600 mb-3",children:e.application_message}),sn.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[sn.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${(e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"completed":return"bg-purple-100 text-purple-800";case"rejected":return"bg-red-100 text-red-800";case"submitted":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}})(e.status)}`,children:[(e=>{switch(e){case"completed":return sn.jsx(St,{className:"w-4 h-4"});case"pending":case"submitted":return sn.jsx(Pt,{className:"w-4 h-4"});case"rejected":return sn.jsx(kt,{className:"w-4 h-4"});default:return null}})(e.status),sn.jsx("span",{children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),a&&sn.jsx("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs font-medium",children:"DEMO"}),e.review_score&&sn.jsxs("span",{className:"text-sm text-gray-600",children:["Score: ",e.review_score,"/10"]}),i&&sn.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full animate-pulse",children:"Submission Required"})]})]}),sn.jsxs("div",{className:"text-right ml-6",children:[sn.jsx("div",{className:"text-sm text-gray-500 mb-1",children:a?"Demo Earned":"Earned"}),sn.jsxs("div",{className:"font-semibold "+(a?"text-orange-600":"text-purple-600"),children:[e.gems_earned," gems ",a&&"(Demo)"]}),sn.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Cost: ",e.key_cost," keys"]})]})]}),sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[sn.jsx(xt,{className:"w-4 h-4"}),sn.jsxs("span",{className:"text-sm",children:["Applied ",new Date(e.applied_at).toLocaleDateString()]})]}),sn.jsxs("div",{className:"flex items-center space-x-3",children:[e.completed_at&&sn.jsxs("div",{className:"text-green-600 font-medium text-sm",children:["Completed ",new Date(e.completed_at).toLocaleDateString()]}),s&&sn.jsxs("button",{onClick:()=>n(!0),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-2 text-white "+(a?"bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600":"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600"),children:[sn.jsx(Kr,{className:"w-4 h-4"}),sn.jsx("span",{children:a?"Demo Submit":"Submit Work"})]})]})]})]}),sn.jsx(oB,{user:null,applicationId:e.id,dropTitle:e.drop_title,isOpen:r,onClose:()=>n(!1),onSuccess:()=>{t(),n(!1)}})]})}function cB({user:e,isOpen:t,onClose:r,onSuccess:n}){const[a,s]=u.useState(1),[i,o]=u.useState(!1),[l,c]=u.useState(null),[d,h]=u.useState({full_name:"",instagram_username:"",phone_number:"",email:"",follower_count:""}),[m,p]=u.useState(null);if(!t||!e)return null;return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:sn.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-6",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Ur,{className:"w-6 h-6 text-blue-600"}),sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Influence Rewards"})]}),sn.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),1===a&&sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4",children:sn.jsx(Hr,{className:"w-8 h-8 text-white"})}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Earn Points from Your Influence"}),sn.jsx("p",{className:"text-gray-600 text-sm",children:"Get dynamic monthly points based on your real social media follower count"})]}),sn.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4",children:[sn.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"How It Works"}),sn.jsxs("div",{className:"space-y-2 text-sm text-blue-700",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(St,{className:"w-4 h-4 text-blue-600"}),sn.jsx("span",{children:"Your follower count  0.01 = monthly points"})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(St,{className:"w-4 h-4 text-blue-600"}),sn.jsx("span",{children:"Points refresh monthly - no rollover"})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(St,{className:"w-4 h-4 text-blue-600"}),sn.jsx("span",{children:"Must re-verify each month to maintain points"})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(St,{className:"w-4 h-4 text-blue-600"}),sn.jsx("span",{children:"Minimum 500 followers required"})]})]})]}),sn.jsxs("div",{className:"space-y-4",children:[sn.jsx("h4",{className:"font-medium text-gray-900",children:"Enter Your Information"}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[sn.jsxs("div",{children:[sn.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[sn.jsx(Vr,{className:"w-4 h-4 inline mr-1"}),"Full Name *"]}),sn.jsx("input",{type:"text",value:d.full_name,onChange:e=>h({...d,full_name:e.target.value}),placeholder:"Enter your full name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),sn.jsxs("div",{children:[sn.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[sn.jsx(Qt,{className:"w-4 h-4 inline mr-1"}),"Instagram Username *"]}),sn.jsx("input",{type:"text",value:d.instagram_username,onChange:e=>h({...d,instagram_username:e.target.value}),placeholder:"@yourusername",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),sn.jsxs("div",{children:[sn.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[sn.jsx(vr,{className:"w-4 h-4 inline mr-1"}),"Phone Number *"]}),sn.jsx("input",{type:"tel",value:d.phone_number,onChange:e=>h({...d,phone_number:e.target.value}),placeholder:"+1 (555) 123-4567",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),sn.jsxs("div",{children:[sn.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[sn.jsx(lr,{className:"w-4 h-4 inline mr-1"}),"Email Address *"]}),sn.jsx("input",{type:"email",value:d.email,onChange:e=>h({...d,email:e.target.value}),placeholder:"your@email.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),sn.jsxs("div",{children:[sn.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[sn.jsx(Hr,{className:"w-4 h-4 inline mr-1"}),"Current Follower Count *"]}),sn.jsx("input",{type:"number",min:"500",value:d.follower_count,onChange:e=>h({...d,follower_count:e.target.value}),placeholder:"e.g. 5000",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),d.follower_count&&sn.jsx("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("span",{className:"text-sm text-green-700",children:"Monthly Points:"}),sn.jsxs("span",{className:"font-bold text-green-800",children:[(x=parseInt(d.follower_count)||0,Math.floor(.01*x))," points"]})]})})]})]}),l&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:sn.jsxs("div",{className:"flex items-start space-x-2",children:[sn.jsx(kt,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),sn.jsx("p",{className:"text-sm text-red-700",children:l})]})}),sn.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:sn.jsxs("div",{className:"flex items-start space-x-2",children:[sn.jsx(kt,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),sn.jsxs("div",{className:"text-sm text-yellow-800",children:[sn.jsx("p",{className:"font-medium mb-1",children:"Important Notes:"}),sn.jsxs("ul",{className:"space-y-1",children:[sn.jsx("li",{children:" Your information will be verified through our Many Chat integration"}),sn.jsx("li",{children:" Points are awarded monthly and do not carry over"}),sn.jsx("li",{children:" You must re-register each month to maintain your rewards"}),sn.jsx("li",{children:" Minimum 500 followers required"})]})]})]})}),sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),sn.jsx("button",{onClick:async()=>{if(d.full_name&&d.instagram_username&&d.phone_number&&d.email&&d.follower_count)if(parseInt(d.follower_count)<500)c("Minimum 500 followers required for influence rewards");else{o(!0),c(null);try{const e=await fetch("/api/users/register-influence-rewards",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({full_name:d.full_name,platform:"instagram",platform_username:d.instagram_username,phone_number:d.phone_number,email:d.email,follower_count:parseInt(d.follower_count)})});if(e.ok){const t=await e.json();p(t),s(2)}else{const t=await e.json();c(t.error||"Registration failed")}}catch(e){c("Network error occurred")}finally{o(!1)}}else c("Please fill in all required fields")},disabled:i,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",children:i?"Processing...":"Register for Rewards"})]})]}),2===a&&m&&sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:sn.jsx(St,{className:"w-8 h-8 text-green-600"})}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Registration Successful!"}),sn.jsxs("p",{className:"text-gray-600 text-sm",children:["Your influence rewards have been calculated for ",(()=>{const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`})()]})]}),sn.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-6",children:sn.jsxs("div",{className:"space-y-4",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("span",{className:"text-sm text-gray-700",children:"Platform:"}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Qt,{className:"w-4 h-4 text-pink-600"}),sn.jsx("span",{className:"font-medium",children:"Instagram"})]})]}),sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("span",{className:"text-sm text-gray-700",children:"Username:"}),sn.jsxs("span",{className:"font-medium",children:["@",m.platform_username]})]}),sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("span",{className:"text-sm text-gray-700",children:"Followers:"}),sn.jsx("span",{className:"font-bold text-blue-600",children:m.follower_count.toLocaleString()})]}),sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("span",{className:"text-sm text-gray-700",children:"Monthly Points:"}),sn.jsxs("span",{className:"font-bold text-green-600",children:[m.points_calculated," points"]})]}),sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("span",{className:"text-sm text-gray-700",children:"Current Month:"}),sn.jsx("span",{className:"font-medium",children:m.current_month})]})]})}),sn.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:sn.jsxs("div",{className:"flex items-start space-x-2",children:[sn.jsx(xt,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),sn.jsxs("div",{className:"text-sm text-blue-800",children:[sn.jsx("p",{className:"font-medium mb-1",children:"Next Steps:"}),sn.jsxs("p",{children:["Your registration has been submitted for verification through our Many Chat system. You'll be able to claim your ",m.points_calculated," points once verification is complete."]})]})]})}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsx("button",{onClick:async()=>{o(!0),c(null);try{const e=await fetch("/api/users/claim-influence-points",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({})});if(e.ok)await e.json(),n(),r(),s(1),h({full_name:"",instagram_username:"",phone_number:"",email:"",follower_count:""});else{const t=await e.json();c(t.error||"Failed to claim points")}}catch(e){c("Network error occurred")}finally{o(!1)}},disabled:i,className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 disabled:opacity-50 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",children:i?"Checking...":"Claim Points (if verified)"}),sn.jsx("button",{onClick:()=>{s(1),p(null),c(null)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Register Different Account"})]}),l&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:sn.jsxs("div",{className:"flex items-start space-x-2",children:[sn.jsx(kt,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),sn.jsx("p",{className:"text-sm text-red-700",children:l})]})})]})]})});var x}function dB({isOpen:e,onClose:t,user:r,onSuccess:n}){const[a,s]=u.useState({}),[i,o]=u.useState({instagram:"",twitter:"",linkedin:"",facebook:"",youtube:"",tiktok:""}),[l,c]=u.useState(!1),[d,h]=u.useState(!1),[m,p]=u.useState(!1),[x,f]=u.useState({});u.useEffect(()=>{if(e&&r&&(s({username:r.username||"",display_name:r.display_name||"",bio:r.bio||"",avatar_url:r.avatar_url||"",banner_url:r.banner_url||"",website_url:r.website_url||"",social_links:r.social_links||""}),r.social_links))try{const e=JSON.parse(r.social_links);o({instagram:e.instagram||"",twitter:e.twitter||"",linkedin:e.linkedin||"",facebook:e.facebook||"",youtube:e.youtube||"",tiktok:e.tiktok||""})}catch(t){}},[e,r]);const g=(e,t)=>{const r=e.target.files?.[0];r&&(r.type.startsWith("image/")?r.size>5242880?f(e=>({...e,[t]:"Image size must be less than 5MB."})):(f(e=>{const r={...e};return delete r[t],r}),(async(e,t)=>{"avatar"===t?h(!0):p(!0);try{const r=new FormData;r.append("image",e);const n=await fetch("/api/images/upload",{method:"POST",credentials:"include",body:r});if(!n.ok)throw new Error("Upload failed");const a=await n.json();s("avatar"===t?e=>({...e,avatar_url:a.url}):e=>({...e,banner_url:a.url}))}catch(r){f(e=>({...e,[t]:"Failed to upload image. Please try again."}))}finally{"avatar"===t?h(!1):p(!1)}})(r,t)):f(e=>({...e,[t]:"Please select an image file."})))},y=e=>{switch(e){case"instagram":return sn.jsx(Qt,{className:"w-4 h-4"});case"twitter":return sn.jsx(Wr,{className:"w-4 h-4"});case"linkedin":return sn.jsx(nr,{className:"w-4 h-4"});case"facebook":return sn.jsx(Ut,{className:"w-4 h-4"});case"youtube":return sn.jsx(Zr,{className:"w-4 h-4"});case"tiktok":return sn.jsx("div",{className:"w-4 h-4 bg-black rounded text-white text-xs flex items-center justify-center font-bold",children:"T"});default:return sn.jsx(Ht,{className:"w-4 h-4"})}},b=e=>{switch(e){case"instagram":case"twitter":case"tiktok":return"@username";case"linkedin":case"facebook":return"username or profile URL";case"youtube":return"channel name or URL";default:return"username"}};return e?sn.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:sn.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[sn.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl flex items-center justify-center",children:sn.jsx(Vr,{className:"w-5 h-5 text-white"})}),sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Profile"}),sn.jsx("p",{className:"text-sm text-gray-600",children:"Update your profile information and appearance"})]})]}),sn.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:sn.jsx(Jr,{className:"w-5 h-5 text-gray-500"})})]}),sn.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:sn.jsxs("div",{className:"p-6 space-y-8",children:[sn.jsxs("div",{className:"space-y-6",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Profile Images"}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Banner Image"}),sn.jsxs("div",{className:"relative",children:[sn.jsxs("div",{className:"w-full h-48 bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 rounded-xl overflow-hidden",children:[a.banner_url?sn.jsx("img",{src:a.banner_url,alt:"Banner preview",className:"w-full h-full object-cover"}):sn.jsx("div",{className:"w-full h-full bg-gradient-to-r from-orange-500 via-red-500 to-pink-500"}),sn.jsx("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center",children:sn.jsxs("label",{className:"cursor-pointer bg-white/90 backdrop-blur-sm hover:bg-white text-gray-700 px-4 py-2 rounded-xl flex items-center space-x-2 transition-colors",children:[m?sn.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-gray-600 border-t-transparent rounded-full"}):sn.jsx(ft,{className:"w-4 h-4"}),sn.jsx("span",{className:"text-sm font-medium",children:m?"Uploading...":"Change Banner"}),sn.jsx("input",{type:"file",accept:"image/*",onChange:e=>g(e,"banner"),className:"hidden",disabled:m})]})})]}),x.banner&&sn.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center space-x-1",children:[sn.jsx(kt,{className:"w-4 h-4"}),sn.jsx("span",{children:x.banner})]})]})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Profile Picture"}),sn.jsxs("div",{className:"flex items-center space-x-6",children:[sn.jsxs("div",{className:"relative",children:[sn.jsx("img",{src:a.avatar_url||"/default-avatar.png",alt:"Profile picture",className:"w-24 h-24 rounded-2xl object-cover border-4 border-white shadow-lg"}),sn.jsxs("label",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-orange-500 hover:bg-orange-600 text-white rounded-xl flex items-center justify-center cursor-pointer transition-colors",children:[d?sn.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):sn.jsx(ft,{className:"w-4 h-4"}),sn.jsx("input",{type:"file",accept:"image/*",onChange:e=>g(e,"avatar"),className:"hidden",disabled:d})]})]}),sn.jsxs("div",{className:"flex-1",children:[sn.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Upload a new profile picture. Use a square image for best results."}),sn.jsx("p",{className:"text-xs text-gray-500",children:"Supported formats: JPG, PNG, GIF (max 5MB)"})]})]}),x.avatar&&sn.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center space-x-1",children:[sn.jsx(kt,{className:"w-4 h-4"}),sn.jsx("span",{children:x.avatar})]})]})]}),sn.jsxs("div",{className:"space-y-6",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Basic Information"}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),sn.jsx("input",{type:"text",value:a.username||"",onChange:e=>s({...a,username:e.target.value}),className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors "+(x.username?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"Enter username"}),x.username&&sn.jsxs("p",{className:"text-red-600 text-sm mt-1 flex items-center space-x-1",children:[sn.jsx(kt,{className:"w-4 h-4"}),sn.jsx("span",{children:x.username})]})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Name"}),sn.jsx("input",{type:"text",value:a.display_name||"",onChange:e=>s({...a,display_name:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"Enter display name"})]})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),sn.jsx("textarea",{value:a.bio||"",onChange:e=>s({...a,bio:e.target.value}),placeholder:"Tell us about yourself...",rows:4,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors resize-none "+(x.bio?"border-red-300 bg-red-50":"border-gray-300")}),sn.jsxs("div",{className:"flex justify-between items-center mt-2",children:[x.bio&&sn.jsxs("p",{className:"text-red-600 text-sm flex items-center space-x-1",children:[sn.jsx(kt,{className:"w-4 h-4"}),sn.jsx("span",{children:x.bio})]}),sn.jsxs("p",{className:"text-xs text-gray-500 ml-auto",children:[(a.bio||"").length,"/500 characters"]})]})]})]}),sn.jsxs("div",{className:"space-y-4",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Website"}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website URL"}),sn.jsxs("div",{className:"relative",children:[sn.jsx(Ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),sn.jsx("input",{type:"url",value:a.website_url||"",onChange:e=>s({...a,website_url:e.target.value}),className:"w-full pl-12 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors "+(x.website_url?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"https://yourwebsite.com"})]}),x.website_url&&sn.jsxs("p",{className:"text-red-600 text-sm mt-1 flex items-center space-x-1",children:[sn.jsx(kt,{className:"w-4 h-4"}),sn.jsx("span",{children:x.website_url})]})]})]}),sn.jsxs("div",{className:"space-y-6",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Social Media"}),sn.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(i).map(([e,t])=>sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 capitalize",children:e}),sn.jsxs("div",{className:"relative",children:[sn.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:y(e)}),sn.jsx("input",{type:"text",value:t,onChange:t=>o({...i,[e]:t.target.value}),className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:b(e)})]})]},e))})]}),x.general&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(kt,{className:"w-5 h-5 text-red-600"}),sn.jsx("p",{className:"text-red-700",children:x.general})]})})]})}),sn.jsxs("div",{className:"flex items-center justify-end space-x-4 p-6 border-t border-gray-100 bg-gray-50",children:[sn.jsx("button",{onClick:t,className:"px-6 py-3 text-gray-700 hover:text-gray-900 transition-colors",disabled:l,children:"Cancel"}),sn.jsx("button",{onClick:async()=>{if((()=>{const e={};if(a.username&&a.username.length<3&&(e.username="Username must be at least 3 characters long"),a.username&&!/^[a-zA-Z0-9_]+$/.test(a.username)&&(e.username="Username can only contain letters, numbers, and underscores"),a.bio&&a.bio.length>500&&(e.bio="Bio must be less than 500 characters"),a.website_url&&a.website_url)try{new URL(a.website_url)}catch{e.website_url="Please enter a valid URL"}return f(e),0===Object.keys(e).length})()){c(!0);try{const e=Object.entries(i).filter(([e,t])=>""!==t.trim()).reduce((e,[t,r])=>({...e,[t]:r}),{}),r={...a,social_links:Object.keys(e).length>0?JSON.stringify(e):""},s=await fetch("/api/users/profile",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)});if(!s.ok){const e=await s.json();throw new Error(e.error||"Failed to update profile")}const o=await s.json();n(o),t()}catch(e){f({general:e instanceof Error?e.message:"Failed to update profile"})}finally{c(!1)}}},disabled:l||d||m,className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:from-gray-400 disabled:to-gray-500 text-white px-8 py-3 rounded-xl font-medium transition-all duration-200 flex items-center space-x-2",children:l?sn.jsxs(sn.Fragment,{children:[sn.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),sn.jsx("span",{children:"Saving..."})]}):sn.jsxs(sn.Fragment,{children:[sn.jsx(jt,{className:"w-4 h-4"}),sn.jsx("span",{children:"Save Changes"})]})})]})]})}):null}function uB({isOpen:e,onClose:t,holding:r,sellerId:n,onSuccess:a}){const[s,i]=u.useState(()=>r?Math.max(1,Math.ceil(.25*r.owned_shares)):1),[o,l]=u.useState(()=>r?.current_price||0),[c,d]=u.useState(""),[h,m]=u.useState(!1),[p,x]=u.useState(null);if(u.useEffect(()=>{r&&e&&(i(Math.min(Math.max(1,Math.ceil(.25*r.owned_shares)),r.owned_shares)),l(r.current_price),d(""),x(null))},[r,e]),!e||!r)return null;const f=()=>{h||(i(Math.min(Math.max(1,Math.ceil(.25*r.owned_shares)),r.owned_shares)),l(r.current_price),d(""),x(null),t())};return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:sn.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full mx-4",children:[sn.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Make an Offer"}),sn.jsx("p",{className:"text-sm text-gray-500",children:r.content_title})]}),sn.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-600","aria-label":"Close make offer modal",children:""})]}),sn.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),r)if(s<=0||o<=0)x("Enter a valid quantity and offer price.");else{m(!0),x(null);try{await(async e=>{const t=await kl("/api/shares/offers",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){const e=await t.json().catch(()=>({}));throw new Error(e.error||"Failed to submit offer")}return t.json()})({content_id:r.content_id,seller_id:n,quantity:s,bid_price:o,message:c}),a?.(),f()}catch(t){x(t instanceof Error?t.message:"Failed to submit offer")}finally{m(!1)}}},className:"p-6 space-y-6",children:[sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity"}),sn.jsx("input",{type:"number",min:1,value:s,onChange:e=>i(Number(e.target.value)),className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),sn.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Seller holds ",r.owned_shares," shares"]})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Offer Price (per share)"}),sn.jsx("input",{type:"number",min:.01,step:.01,value:o,onChange:e=>l(Number(e.target.value)),className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),sn.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Current price ",r.current_price.toFixed(2)]})]})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Message (optional)"}),sn.jsx("textarea",{rows:3,value:c,onChange:e=>d(e.target.value),placeholder:"Share context or terms for your offer",className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),sn.jsx("div",{className:"bg-gray-50 rounded-lg p-4 text-sm text-gray-600",children:sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{children:"Total offer value"}),sn.jsxs("span",{className:"font-medium text-gray-900",children:["$",(s*o).toFixed(2)]})]})}),p&&sn.jsx("p",{className:"text-sm text-red-600",children:p}),sn.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[sn.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800",children:"Cancel"}),sn.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg shadow-sm hover:bg-blue-700 disabled:opacity-60",children:h?"Submitting":"Submit Offer"})]})]})]})})}function hB({isPublicProfile:e=!1,useUserId:t=!1}){const{user:r}=bn(),{username:n,id:a}=Ne(),s=we(),i=cn||"",o=e=>`${i}${e}`,[l,c]=u.useState(null),[d,h]=u.useState(!0),[m,p]=u.useState(!1),[x,f]=u.useState("overview"),[g,y]=u.useState(!1),[b,v]=u.useState([]),[j,w]=u.useState([]),[N,_]=u.useState([]),[k,S]=u.useState([]),[C,O]=u.useState([]),[E,P]=u.useState(null),[T,A]=u.useState(!1),[M,D]=u.useState(!1),[I,R]=u.useState(!1),[$,L]=u.useState(!1),[F,z]=u.useState(!1),[U,B]=u.useState(!1),[q,W]=u.useState(!1),[K,V]=u.useState(null),[H,G]=u.useState(!1),[Y,J]=u.useState(null),[Z,Q]=u.useState(!1),[X,ee]=u.useState(null);u.useEffect(()=>{e&&(n||a)?te():re();if("true"===new URLSearchParams(window.location.search).get("openInfluenceRewards")){B(!0);const e=window.location.pathname;window.history.replaceState({},"",e)}},[e,n]),u.useEffect(()=>{},[x,e,l]),u.useEffect(()=>{if(!l)return;(async()=>{const e=await Eu(String(l.id));S(e.filter(e=>"private"!==e.visibility));const t=await(async e=>{try{const t=e?`?userId=${encodeURIComponent(e)}`:"",r=await kl(`/api/portfolio/predictions${t}`,{credentials:"include"});return r.ok&&(await r.json()).predictions||Su()}catch(t){return Su()}})(String(l.id));O(t)})()},[l?.id]);const te=async()=>{if(n||a)try{let e;if(t&&a)e=`/api/users/public/id/${a}`;else{if(!n)throw new Error("No user identifier provided");e=`/api/users/public/${n}`}const r=await fetch(o(e));if(!r.ok)throw new Error("User not found");const s=await r.json();c(s.user),v(s.content||[]),w(s.drops||[]),P(s.leaderboard_position)}catch(e){}finally{h(!1)}},re=async()=>{if(r&&!e)return c(r),void h(!1);try{const e=localStorage.getItem("authToken"),t={"Content-Type":"application/json"};e&&(t.Authorization=`Bearer ${e}`);const r=await fetch(o("/api/users/me"),{headers:t,credentials:"include"});if(r.ok){const e=await r.json(),t=e?.user||e?.data?.user||e;t&&t.id&&c(t)}}catch(t){}finally{h(!1)}},ne=e=>{switch(e){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ae=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"completed":return"bg-purple-100 text-purple-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};if(d)return sn.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:sn.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})});if(!(l||d||e||r))return sn.jsx("div",{className:"max-w-2xl mx-auto text-center py-12 px-6",children:sn.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8",children:[sn.jsx(Vr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),sn.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"User Not Found"}),sn.jsx("p",{className:"text-gray-600 mb-6",children:e?"The user you're looking for doesn't exist or may have been removed.":"There was an issue loading your profile. Please try refreshing the page."}),sn.jsx(Ve,{to:"/",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200",children:"Go to Home"})]})});const se=e?[{id:"overview",label:"Overview",icon:Vr},{id:"content",label:"Content",icon:Bt,count:b.length},..."advertiser"===l?.user_type?[{id:"drops",label:"Drops Created",icon:Qr,count:j.length}]:[],{id:"achievements",label:"Achievements",icon:ct}]:[{id:"overview",label:"Overview",icon:Vr},{id:"content",label:"Content",icon:Bt,count:b.length},{id:"drops",label:"Drops Created",icon:Qr,count:j.length},{id:"applications",label:"Applications",icon:cr,count:N.length},{id:"achievements",label:"Achievements",icon:ct}];return sn.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8",children:[sn.jsxs("div",{className:"space-y-2",children:[sn.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e?`${l?.display_name||l?.username||"User"}'s Profile`:"Profile"}),sn.jsx("p",{className:"text-gray-600",children:e?"View public profile and activity":"Manage your account and view your activity"})]}),sn.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[sn.jsx("div",{className:"relative h-48 bg-gradient-to-r from-orange-500 via-red-500 to-pink-500",children:l?.banner_url?sn.jsxs("div",{className:"relative w-full h-full",children:[sn.jsx("img",{src:l.banner_url,alt:"Profile banner",className:"w-full h-full object-cover"}),sn.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-500/20 via-red-500/20 to-pink-500/20"})]}):sn.jsx("div",{className:"w-full h-full bg-gradient-to-r from-orange-500 via-red-500 to-pink-500"})}),sn.jsxs("div",{className:"px-6 lg:px-8 pb-8",children:[sn.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end lg:justify-between -mt-16 space-y-6 lg:space-y-0",children:[sn.jsx("div",{className:"relative z-10",children:sn.jsx("div",{className:"relative",children:sn.jsx("img",{src:l?.avatar_url||r?.google_user_data?.picture||"/default-avatar.png",alt:"Profile",className:"w-32 h-32 rounded-2xl border-4 border-white shadow-xl object-cover bg-white"})})}),!e&&sn.jsxs("button",{onClick:()=>y(!0),className:"lg:mb-4 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium flex items-center space-x-2 transition-all duration-200 shadow-lg hover:shadow-xl self-start lg:self-auto",children:[sn.jsx(yr,{className:"w-4 h-4"}),sn.jsx("span",{children:"Edit Profile"})]})]}),sn.jsxs("div",{className:"mt-6 space-y-4",children:[sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:l?.display_name||(e?l?.username:r?.google_user_data?.name)||"User"}),sn.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-gray-600",children:[sn.jsxs("span",{children:["@",l?.username||"username-not-set"]}),sn.jsx("span",{children:""}),sn.jsxs("span",{children:["Level ",l?.level||1]}),"advertiser"===l?.user_type&&sn.jsxs(sn.Fragment,{children:[sn.jsx("span",{children:""}),sn.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Advertiser"})]})]}),E&&sn.jsxs("div",{className:"flex flex-wrap items-center gap-6 mt-3",children:[sn.jsx(jn,{content:"Daily leaderboard rank",compact:!0,children:sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(qr,{className:"w-4 h-4 text-yellow-600"}),sn.jsx("span",{className:"text-sm text-gray-600",children:"Daily Rank"}),sn.jsxs("span",{className:"font-semibold text-yellow-700",children:["#",E.daily_rank||"N/A"]})]})}),sn.jsx(jn,{content:"Activity score",compact:!0,children:sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("span",{className:"text-sm text-gray-600",children:"Score:"}),sn.jsx("span",{className:"font-semibold text-gray-900",children:(E.composite_score||0).toFixed(1)})]})})]})]}),(l.website_url||l.social_links)&&sn.jsxs("div",{className:"flex flex-wrap items-center gap-4 p-4 bg-gray-50 rounded-xl",children:[l.website_url&&sn.jsxs("a",{href:l.website_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 transition-colors font-medium",children:[sn.jsx(Lt,{className:"w-4 h-4"}),sn.jsx("span",{children:"Website"})]}),l.social_links&&(()=>{try{const e=JSON.parse(l.social_links);return Object.entries(e).map(([e,t])=>sn.jsxs("div",{className:"flex items-center space-x-1 text-gray-600",children:[sn.jsxs("span",{className:"text-sm font-medium capitalize",children:[e,":"]}),sn.jsx("span",{className:"text-sm",children:t})]},e))}catch{return null}})()]}),sn.jsx("div",{className:"p-4 bg-gray-50 rounded-xl",children:sn.jsx("p",{className:"text-gray-700 leading-relaxed",children:l?.bio||(e?"No bio available.":"No bio yet. Click edit to add one!")})})]})]})]}),sn.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[sn.jsx("div",{className:"border-b border-gray-100",children:sn.jsx("nav",{className:"flex overflow-x-auto px-6 lg:px-8",children:se.map(e=>{const t=e.icon;return sn.jsxs("button",{onClick:()=>f(e.id),className:"py-4 px-1 mr-8 border-b-2 font-medium text-sm flex items-center space-x-2 whitespace-nowrap transition-colors "+(x===e.id?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[sn.jsx(t,{className:"w-4 h-4"}),sn.jsx("span",{children:e.label}),void 0!==e.count&&sn.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs font-medium",children:e.count})]},e.id)})})}),sn.jsxs("div",{className:"p-6 lg:p-8",children:["overview"===x&&sn.jsxs("div",{className:"space-y-8",children:[sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[!e&&sn.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-100",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsx("p",{className:"text-sm font-medium text-green-700",children:"Total Earnings"}),sn.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["$",(l?.total_earnings_usd||0).toFixed(2)]})]}),sn.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:sn.jsx(Rt,{className:"w-6 h-6 text-green-600"})})]})}),sn.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl p-6 border border-blue-100",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsx("p",{className:"text-sm font-medium text-blue-700",children:"XP Points"}),sn.jsx("p",{className:"text-2xl font-bold text-blue-900",children:(l?.xp_points||0).toLocaleString()})]}),sn.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:sn.jsx(Rr,{className:"w-6 h-6 text-blue-600"})})]})}),sn.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 border border-purple-100",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsx("p",{className:"text-sm font-medium text-purple-700",children:"Followers"}),sn.jsx("p",{className:"text-2xl font-bold text-purple-900",children:(l?.follower_count||0).toLocaleString()})]}),sn.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:sn.jsx(Hr,{className:"w-6 h-6 text-purple-600"})})]})}),sn.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-6 border border-yellow-100",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsx("p",{className:"text-sm font-medium text-yellow-700",children:"Level"}),sn.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:l?.level||1})]}),sn.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center",children:sn.jsx(ct,{className:"w-6 h-6 text-yellow-600"})})]})})]}),sn.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-2xl p-6 border border-gray-100",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-6",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Level Progress"}),sn.jsxs("span",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium",children:["Level ",l?.level||1]})]}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[sn.jsxs("span",{children:[(l?.xp_points||0).toLocaleString()," XP"]}),sn.jsxs("span",{children:[(1e3*((l?.level||1)+1)).toLocaleString()," XP"]})]}),sn.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:sn.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 h-3 rounded-full transition-all duration-300",style:{width:`${(e=>{const t=l?.level||1,r=1e3*t,n=(e-r)/(1e3*(t+1)-r)*100;return Math.max(0,Math.min(100,n))})(l?.xp_points||0)}%`}})}),sn.jsx("p",{className:"text-sm text-gray-600",children:e?`${l?.points_streak_days||0} day activity streak`:1e3*((l?.level||1)+1)-(l?.xp_points||0)+" XP until next level"})]})]}),!e&&sn.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 border border-blue-100 rounded-2xl p-6",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:sn.jsx(Ur,{className:"w-6 h-6 text-blue-600"})}),sn.jsxs("div",{children:[sn.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Influence Rewards"}),sn.jsx("p",{className:"text-sm text-blue-700",children:"Earn monthly points based on your follower count"})]})]}),sn.jsx("button",{onClick:()=>B(!0),className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:"Get Rewards"})]}),sn.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[sn.jsxs("div",{className:"bg-white rounded-xl p-4",children:[sn.jsx("div",{className:"text-sm text-blue-700",children:"Formula"}),sn.jsx("div",{className:"font-bold text-blue-900",children:"Followers  0.01"})]}),sn.jsxs("div",{className:"bg-white rounded-xl p-4",children:[sn.jsx("div",{className:"text-sm text-blue-700",children:"Reset"}),sn.jsx("div",{className:"font-bold text-blue-900",children:"Monthly"})]}),sn.jsxs("div",{className:"bg-white rounded-xl p-4",children:[sn.jsx("div",{className:"text-sm text-blue-700",children:"Min Followers"}),sn.jsx("div",{className:"font-bold text-blue-900",children:"1,000"})]})]})]}),!e&&sn.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-100 rounded-2xl p-6",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsx("h3",{className:"text-lg font-semibold text-purple-900",children:"Referral Program"}),sn.jsx("button",{onClick:()=>z(!0),className:"bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-colors",children:"Manage Referrals"})]}),sn.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-medium text-purple-900",children:"Your Referral Code"}),sn.jsx("p",{className:"text-sm text-purple-700",children:"Share this code and earn when friends join!"})]}),sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("code",{className:"bg-white px-4 py-2 rounded-xl border font-mono text-lg",children:l.referral_code}),sn.jsx(jn,{content:m?"Copied!":"Copy code",compact:!0,children:sn.jsx("button",{onClick:async()=>{l?.referral_code&&(await navigator.clipboard.writeText(l.referral_code),p(!0),setTimeout(()=>p(!1),2e3))},className:"p-2 bg-purple-500 hover:bg-purple-600 text-white rounded-xl transition-colors",children:m?sn.jsx(jt,{className:"w-4 h-4"}):sn.jsx(At,{className:"w-4 h-4"})})})]})]})]}),sn.jsx(pB,{holdings:k,isOwner:!e||r&&l&&r.id===l.id,onOffer:e=>{ee(e),Q(!0)},onView:e=>s(`/portfolio/holdings/${e.content_id}`)}),sn.jsx(xB,{predictions:C,onView:e=>s(`/predictions/${e.id}`)})]}),"content"===x&&sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Your Content"}),sn.jsx(Ve,{to:"/create",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200",children:"Create New Content"})]}),T?sn.jsx("div",{className:"flex items-center justify-center h-32",children:sn.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full"})}):b.length>0?sn.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(t=>{return sn.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 border border-gray-100 hover:shadow-md transition-all duration-200",children:[sn.jsxs("div",{className:"flex items-start justify-between mb-4",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[(r=t.platform,"youtube"===r.toLowerCase()?sn.jsx(Gr,{className:"w-4 h-4"}):sn.jsx(Jt,{className:"w-4 h-4"})),sn.jsx("span",{className:"text-sm font-medium text-gray-600 capitalize",children:t.platform})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[!e&&sn.jsxs(sn.Fragment,{children:[sn.jsx(jn,{content:"Edit content",compact:!0,children:sn.jsx("button",{onClick:()=>(e=>{V(e),W(!0)})(t),className:"p-1 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded transition-colors",children:sn.jsx(yr,{className:"w-4 h-4"})})}),sn.jsx(jn,{content:"Delete content",compact:!0,children:sn.jsx("button",{onClick:()=>(e=>{J(e),G(!0)})(t),className:"p-1 text-red-600 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:sn.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:sn.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]}),sn.jsx(Ve,{to:`/content/${t.id}`,className:"text-orange-600 hover:text-orange-700 transition-colors",children:sn.jsx(Lt,{className:"w-4 h-4"})})]})]}),sn.jsx("h4",{className:"font-semibold text-gray-900 mb-2 line-clamp-2",children:t.title}),sn.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:t.description}),sn.jsxs("div",{className:"flex items-center justify-between text-sm",children:[sn.jsxs("span",{className:"text-gray-500",children:[t.available_shares||0,"/",t.total_shares||0," shares"]}),sn.jsxs("span",{className:"font-semibold text-green-600",children:["$",(t.share_price||0).toFixed(2),"/share"]})]})]},t.id);var r})}):sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx(Bt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),sn.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Content Yet"}),sn.jsx("p",{className:"text-gray-600 mb-6",children:"Start creating content to build your portfolio"}),sn.jsx(Ve,{to:"/create",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200",children:"Create Your First Content"})]})]}),"drops"===x&&sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Drops You Created"}),!e&&l&&"advertiser"===l.user_type&&sn.jsx(Ve,{to:"/earn?create=proof",className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200",children:"Create New Drop"})]}),M?sn.jsx("div",{className:"flex items-center justify-center h-32",children:sn.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full"})}):j.length>0?sn.jsx("div",{className:"space-y-4",children:j.map(e=>sn.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 border border-gray-100",children:[sn.jsxs("div",{className:"flex items-start justify-between mb-4",children:[sn.jsxs("div",{className:"flex-1",children:[sn.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:e.title}),sn.jsx("p",{className:"text-gray-600 mb-3",children:e.description}),sn.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[sn.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${ne(e.difficulty)}`,children:e.difficulty.charAt(0).toUpperCase()+e.difficulty.slice(1)}),sn.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${ae(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),sn.jsxs("span",{className:"text-sm text-gray-500",children:[e.current_participants||0," participants"]})]})]}),sn.jsxs("div",{className:"text-right ml-6",children:[sn.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Reward"}),sn.jsxs("div",{className:"font-semibold text-purple-600",children:[e.gem_reward_base||0," gems"]}),sn.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Cost: ",e.key_cost||0," keys"]})]})]}),sn.jsxs("div",{className:"flex items-center justify-between text-sm",children:[sn.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[sn.jsx(xt,{className:"w-4 h-4"}),sn.jsxs("span",{children:["Created ",new Date(e.created_at).toLocaleDateString()]})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("span",{className:"text-gray-500",children:"Pool:"}),sn.jsxs("span",{className:"font-medium text-purple-600",children:[e.gem_pool_remaining||0,"/",e.gem_pool_total||0," gems"]})]})]})]},e.id))}):sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx(Qr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),sn.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Drops Created"}),sn.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first drop to start earning"}),sn.jsx(Ve,{to:"/earn?create=proof",className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200",children:"Create Your First Drop"})]})]}),"applications"===x&&sn.jsxs("div",{className:"space-y-6",children:[sn.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Your Applications"}),I?sn.jsx("div",{className:"flex items-center justify-center h-32",children:sn.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full"})}):N.length>0?sn.jsx("div",{className:"space-y-4",children:N.map(e=>sn.jsx(lB,{application:e,onSubmissionSuccess:()=>{(async()=>{if(l){if(r&&!r.id)return _([]),void R(!1);if(!l.id)return _([]),void R(!1);R(!0);try{const e=await fetch(o("/api/users/drop-applications"),{credentials:"include"});if(e.ok){const t=await e.json();_(t)}else _([])}catch(e){_([])}finally{R(!1)}}})()}},e.id))}):sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx(cr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),sn.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Applications Yet"}),sn.jsx("p",{className:"text-gray-600 mb-6",children:"Apply to drops to start earning rewards"}),sn.jsx(Ve,{to:"/earn",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200",children:"Browse Opportunities"})]})]}),"achievements"===x&&sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Achievements"}),sn.jsx("button",{onClick:()=>L(!0),className:"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200",children:"View All"})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[sn.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-6 border border-yellow-100 text-center",children:[sn.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:sn.jsx(qr,{className:"w-8 h-8 text-yellow-600"})}),sn.jsx("h4",{className:"font-semibold text-yellow-900 mb-2",children:"First Steps"}),sn.jsx("p",{className:"text-sm text-yellow-700",children:"Complete your first drop application"})]}),sn.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl p-6 border border-blue-100 text-center",children:[sn.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:sn.jsx(Rr,{className:"w-8 h-8 text-blue-600"})}),sn.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Content Creator"}),sn.jsx("p",{className:"text-sm text-blue-700",children:"Share your first piece of content"})]}),sn.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 border border-purple-100 text-center",children:[sn.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:sn.jsx(ct,{className:"w-8 h-8 text-purple-600"})}),sn.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"Influencer"}),sn.jsx("p",{className:"text-sm text-purple-700",children:"Reach 100 followers"})]})]})]})]})]}),sn.jsx(dB,{isOpen:g,onClose:()=>y(!1),user:l,onSuccess:e=>{c(e),y(!1)}}),sn.jsx(Mn,{isOpen:$,onClose:()=>L(!1),user:l}),sn.jsx(iB,{isOpen:F,onClose:()=>z(!1),user:l,onSuccess:()=>{re()}}),sn.jsx(cB,{isOpen:U,onClose:()=>B(!1),user:l,onSuccess:()=>{re()}}),sn.jsx(uB,{isOpen:Z,onClose:()=>Q(!1),holding:X,sellerId:l?.id?String(l.id):void 0}),K&&sn.jsx(Vd,{isOpen:q,onClose:()=>{W(!1),V(null)},onSuccess:e=>{W(!1),V(null),v(t=>t.map(t=>t.id===e.id?e:t))},content:K}),sn.jsx(Hd,{isOpen:H,onClose:()=>{G(!1),J(null)},onConfirm:async()=>{if(Y)try{const e=await fetch(o(`/api/content/${Y.id}`),{method:"DELETE",credentials:"include"});if(e.ok)v(e=>e.filter(e=>e.id!==Y.id)),G(!1),J(null);else{const t=await e.json();alert(t.error||"Failed to delete content")}}catch(e){alert("Failed to delete content")}},title:"Delete Content",message:`Are you sure you want to delete "${Y?.title}"? This action cannot be undone and will remove all associated data.`,confirmText:"Delete",cancelText:"Cancel",type:"danger"})]})}const mB=hB;function pB({holdings:e,isOwner:t,onOffer:r,onView:n}){const a=e.filter(e=>"private"!==e.visibility);return a.length?sn.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm",children:[sn.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[sn.jsxs("div",{children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Public Holdings"}),sn.jsx("p",{className:"text-sm text-gray-500",children:t?"Only holdings you set to public are visible to others.":"Shared portfolio highlights from this creator."})]}),sn.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-slate-100 text-slate-700",children:[a.length," assets"]})]}),sn.jsx("div",{className:"space-y-3",children:a.map(e=>sn.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-4",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("img",{src:e.content_thumbnail,alt:e.content_title,className:"w-12 h-12 rounded-lg object-cover"}),sn.jsxs("div",{children:[sn.jsx("p",{className:"font-semibold text-gray-900",children:e.content_title}),sn.jsxs("p",{className:"text-sm text-gray-500",children:[e.owned_shares," shares  Avg $",e.avg_cost.toFixed(2),"  Now $",e.current_price.toFixed(2)]})]})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("button",{onClick:()=>n(e),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-600 rounded-lg hover:bg-gray-100",children:"View"}),!t&&sn.jsx("button",{onClick:()=>r(e),className:"px-3 py-1.5 text-sm font-medium border border-blue-200 text-blue-600 rounded-lg hover:bg-blue-50",children:"Make offer"})]})]},e.content_id))})]}):null}function xB({predictions:e,onView:t}){return e.length?sn.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsxs("div",{children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Prediction History"}),sn.jsx("p",{className:"text-sm text-gray-500",children:"Public predictions and outcomes shared by this creator."})]}),sn.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-700",children:[e.length," entries"]})]}),sn.jsx("div",{className:"space-y-3",children:e.map(e=>sn.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-4",children:[sn.jsxs("div",{children:[sn.jsx("p",{className:"font-medium text-gray-900",children:e.content_title}),sn.jsxs("p",{className:"text-sm text-gray-500",children:[e.platform.toUpperCase(),"  ",new Date(e.created_at).toLocaleDateString()]})]}),sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsxs("div",{className:"text-right",children:[sn.jsx("p",{className:"text-sm text-gray-600 capitalize",children:e.prediction_side}),sn.jsx("p",{className:"text-sm text-gray-500",children:"settled"===e.status&&e.result?`Result: ${e.result}`:`Status: ${e.status}`})]}),sn.jsx("button",{onClick:()=>t(e),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-600 rounded-lg hover:bg-gray-100",children:"View"})]})]},e.id))})]}):null}function fB({isOpen:e,onClose:t,contentId:r,contentTitle:n,isOwner:a,currentRevenue:s,sharePrice:i,totalShares:o,onSuccess:l}){const[c,d]=u.useState(0),[h,m]=u.useState("USD"),[p,x]=u.useState(!1),[f,g]=u.useState("tip");if(!e)return null;const y=()=>o>0?(s+("Points"===h?c/1e3:c))/o:0,b=e=>{switch(e){case"USD":default:return sn.jsx(Rt,{className:"w-4 h-4"});case"Gems":return sn.jsx(Kt,{className:"w-4 h-4"});case"Points":return sn.jsx(Qr,{className:"w-4 h-4"})}};return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:sn.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[sn.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:a?"Fund or Receive Tips":"Tip Creator"}),sn.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsxs("div",{className:"p-6",children:[sn.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[sn.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:n}),sn.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[sn.jsxs("div",{children:["Current Revenue: $",s.toFixed(2)]}),sn.jsxs("div",{children:["Share Price: $",i.toFixed(4)]}),sn.jsxs("div",{children:["Total Shares: ",o]})]})]}),a&&sn.jsxs("div",{className:"mb-6",children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Action"}),sn.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[sn.jsx("button",{type:"button",onClick:()=>g("fund"),className:"p-3 border rounded-lg text-sm font-medium transition-all "+("fund"===f?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-300 hover:border-gray-400"),children:"Fund Content"}),sn.jsx("button",{type:"button",onClick:()=>g("tip"),className:"p-3 border rounded-lg text-sm font-medium transition-all "+("tip"===f?"border-green-500 bg-green-50 text-green-700":"border-gray-300 hover:border-gray-400"),children:"Enable Tips"})]}),sn.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"fund"===f?"Add your own money to increase content value":"Allow others to tip and increase content value"})]}),sn.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!(c<=0)){x(!0);try{const e="fund"===f?`/api/content/${r}/fund`:`/api/content/${r}/tip`,n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({amount:c,currency_type:h})});if(n.ok){const e=await n.json();l(e.new_revenue,e.new_share_price),t(),d(0)}else{const e=await n.json();alert(e.error||`Failed to ${f} content`)}}catch(n){alert(`Failed to ${f} content. Please try again.`)}finally{x(!1)}}},className:"space-y-4",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),sn.jsx("div",{className:"grid grid-cols-3 gap-2",children:["USD","Gems","Points"].map(e=>sn.jsxs("button",{type:"button",onClick:()=>m(e),className:"p-3 border rounded-lg text-sm font-medium transition-all flex items-center justify-center space-x-2 "+(h===e?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-300 hover:border-gray-400"),children:[b(e),sn.jsx("span",{children:e})]},e))})]}),sn.jsxs("div",{children:[sn.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Amount ","Points"===h&&"(1000 Points = $1 USD)"]}),sn.jsx("input",{type:"number",min:"0",step:"Points"===h?"100":"0.01",value:c||"",onChange:e=>d(Number(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:`Enter ${h.toLowerCase()} amount`,required:!0})]}),c>0&&sn.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[sn.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Preview Impact"}),sn.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[sn.jsxs("div",{children:["New Revenue: $",(s+("Points"===h?c/1e3:c)).toFixed(2)]}),sn.jsxs("div",{children:["New Share Price: $",y().toFixed(4)]}),sn.jsxs("div",{className:"text-xs text-blue-600 mt-2",children:["Share price increase: $",(y()-i).toFixed(4)]})]})]}),sn.jsx("button",{type:"submit",disabled:p||c<=0,className:"w-full bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white py-3 rounded-lg font-medium transition-all duration-200 disabled:opacity-50",children:p?"Processing...":("fund"===f?"Fund":"Tip")+" Content"})]})]})]})})}function gB({contentId:e,currentUser:t,isOwner:r=!1}){const[n,a]=u.useState([]),[s,i]=u.useState(""),[o,l]=u.useState(null),[c,d]=u.useState(""),[h,m]=u.useState(!1),[p,x]=u.useState(!1);u.useEffect(()=>{f()},[e]);const f=async()=>{if(e){m(!0);try{const t=await fetch(`/api/content/${e}/comments`,{credentials:"include"});if(t.ok){const e=await t.json();a(e)}}catch(t){}finally{m(!1)}}},g=async(r,n)=>{if(r.trim()&&t){x(!0);try{if(!(await fetch(`/api/content/${e}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({comment_text:r.trim(),parent_comment_id:n||null})})).ok)throw new Error("Failed to post comment");await f(),n?(d(""),l(null)):i("")}catch(a){alert("Failed to post comment. Please try again.")}finally{x(!1)}}},y=e=>{const t=new Date(e),r=(new Date).getTime()-t.getTime(),n=Math.floor(r/6e4),a=Math.floor(r/36e5),s=Math.floor(r/864e5);return n<60?`${n}m ago`:a<24?`${a}h ago`:s<7?`${s}d ago`:t.toLocaleDateString()},b=({comment:e,isReply:n=!1})=>{const a=t?.id===e.user_id;return sn.jsxs("div",{className:(n?"ml-8 border-l-2 border-gray-200 pl-4":"")+" mb-4",children:[sn.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[sn.jsxs("div",{className:"flex items-start justify-between mb-2",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(vn,{username:e.user_username,displayName:e.user_display_name,avatarUrl:e.user_avatar,size:"sm"}),sn.jsx("span",{className:"text-xs text-gray-500",children:y(e.created_at)}),e.is_pinned&&sn.jsxs("div",{className:"flex items-center space-x-1 bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs",children:[sn.jsx(jr,{className:"w-3 h-3"}),sn.jsx("span",{children:"Pinned"})]})]}),(a||r)&&sn.jsxs("div",{className:"relative group",children:[sn.jsx("button",{className:"text-gray-400 hover:text-gray-600 p-1",children:sn.jsx($t,{className:"w-4 h-4"})}),sn.jsxs("div",{className:"absolute right-0 top-full bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-32 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all",children:[r&&!e.is_pinned&&sn.jsxs("button",{onClick:()=>(async e=>{if(r)try{(await fetch(`/api/content/comments/${e}/pin`,{method:"POST",credentials:"include"})).ok&&await f()}catch(t){}})(e.id),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50 flex items-center space-x-2",children:[sn.jsx(jr,{className:"w-3 h-3"}),sn.jsx("span",{children:"Pin"})]}),(a||r)&&sn.jsxs("button",{onClick:()=>(async e=>{if(t&&window.confirm("Are you sure you want to delete this comment?"))try{(await fetch(`/api/content/comments/${e}`,{method:"DELETE",credentials:"include"})).ok&&await f()}catch(r){alert("Failed to delete comment.")}})(e.id),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600 flex items-center space-x-2",children:[sn.jsx(zr,{className:"w-3 h-3"}),sn.jsx("span",{children:"Delete"})]})]})]})]}),sn.jsx("p",{className:"text-gray-800 mb-3 whitespace-pre-wrap",children:e.comment_text}),sn.jsxs("div",{className:"flex items-center space-x-4",children:[sn.jsxs("button",{onClick:()=>(async e=>{if(t)try{(await fetch(`/api/content/comments/${e}/like`,{method:"POST",credentials:"include"})).ok&&await f()}catch(r){}})(e.id),disabled:!t,className:`flex items-center space-x-1 text-sm transition-colors ${e.has_liked?"text-red-500":"text-gray-500 hover:text-red-500"} ${t?"":"cursor-not-allowed opacity-50"}`,children:[sn.jsx(Gt,{className:"w-4 h-4 "+(e.has_liked?"fill-current":"")}),sn.jsx("span",{children:e.likes_count||0})]}),!n&&t&&sn.jsxs("button",{onClick:()=>l(o===e.id?null:e.id),className:"flex items-center space-x-1 text-sm text-gray-500 hover:text-blue-500 transition-colors",children:[sn.jsx(Sr,{className:"w-4 h-4"}),sn.jsx("span",{children:"Reply"})]})]}),o===e.id&&sn.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:sn.jsxs("div",{className:"flex space-x-2",children:[sn.jsx("textarea",{value:c,onChange:e=>d(e.target.value),placeholder:"Write a reply...",className:"flex-1 p-2 border border-gray-300 rounded-lg text-sm resize-none",rows:2}),sn.jsxs("div",{className:"flex flex-col space-y-1",children:[sn.jsx("button",{onClick:()=>g(c,e.id),disabled:!c.trim()||p,className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:sn.jsx(Pr,{className:"w-4 h-4"})}),sn.jsx("button",{onClick:()=>{l(null),d("")},className:"text-gray-500 hover:text-gray-700 p-2",children:""})]})]})})]}),e.replies&&e.replies.length>0&&sn.jsx("div",{className:"mt-3",children:e.replies.map(e=>sn.jsx(b,{comment:e,isReply:!0},e.id))})]})};return h?sn.jsx("div",{className:"flex items-center justify-center py-8",children:sn.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full"})}):sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{className:"flex items-center space-x-3 pb-4 border-b border-gray-200",children:[sn.jsx(mr,{className:"w-5 h-5 text-blue-600"}),sn.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Comments (",n.length,")"]})]}),t?sn.jsx("div",{className:"space-y-3",children:sn.jsxs("div",{className:"flex items-start space-x-3",children:[sn.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:t.display_name?.[0]||t.username?.[0]||"U"}),sn.jsxs("div",{className:"flex-1",children:[sn.jsx("textarea",{value:s,onChange:e=>i(e.target.value),placeholder:"Share your thoughts...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3}),sn.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[sn.jsx("p",{className:"text-xs text-gray-500",children:"Be respectful and constructive in your comments"}),sn.jsxs("button",{onClick:()=>g(s),disabled:!s.trim()||p,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 transition-colors",children:[p?sn.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):sn.jsx(Pr,{className:"w-4 h-4"}),sn.jsx("span",{children:"Post Comment"})]})]})]})]})}):sn.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 text-center",children:[sn.jsx("p",{className:"text-gray-600 mb-2",children:"Sign in to join the conversation"}),sn.jsx("button",{onClick:()=>window.location.href="/auth/google",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Sign In to Comment"})]}),sn.jsx("div",{className:"space-y-4",children:n.length>0?n.map(e=>sn.jsx(b,{comment:e},e.id)):sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx(mr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),sn.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No comments yet"}),sn.jsx("p",{className:"text-gray-600",children:t?"Be the first to share your thoughts!":"Sign in to start the conversation."})]})})]})}function yB({isOpen:e,onClose:t,onSponsor:r,contentTitle:n,userGems:a}){const[s,i]=u.useState(null);if(!e)return null;const o=[{id:"quick",name:"Quick Boost",gems:25,multiplier:1.5,duration:1,description:"1.5x visibility for 1 hour",icon:sn.jsx(Qr,{className:"w-5 h-5"}),color:"from-blue-500 to-cyan-500"},{id:"popular",name:"Popular Boost",gems:50,multiplier:2,duration:6,description:"2x visibility for 6 hours",icon:sn.jsx(Rr,{className:"w-5 h-5"}),color:"from-purple-500 to-pink-500"},{id:"daily",name:"Daily Featured",gems:100,multiplier:3,duration:24,description:"3x visibility for 24 hours",icon:sn.jsx(Dt,{className:"w-5 h-5"}),color:"from-orange-500 to-red-500"},{id:"premium",name:"Premium Spotlight",gems:200,multiplier:4,duration:72,description:"4x visibility for 3 days",icon:sn.jsx(qt,{className:"w-5 h-5"}),color:"from-red-500 to-pink-500"},{id:"viral",name:"Viral Campaign",gems:500,multiplier:6,duration:168,description:"6x visibility for 1 week",icon:sn.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:sn.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),color:"from-yellow-500 to-orange-500"}],l=e=>{if(e<24)return`${e} hour${1!==e?"s":""}`;if(e<168){const t=Math.floor(e/24);return`${t} day${1!==t?"s":""}`}{const t=Math.floor(e/168);return`${t} week${1!==t?"s":""}`}};return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:sn.jsx("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:sn.jsxs("div",{className:"p-6",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-6",children:[sn.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Sponsor Content"}),sn.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsxs("div",{className:"mb-6",children:[sn.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:n}),sn.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"Sponsoring content boosts its visibility in user feeds and gives it priority placement. Multiple sponsors can boost the same content, increasing its reach exponentially. Your brand will be credited as a sponsor to all users who see this content."})]}),sn.jsxs("div",{className:"mb-6",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-3",children:[sn.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Your Gem Balance"}),sn.jsxs("span",{className:"text-lg font-semibold text-purple-600",children:[a," gems"]})]}),sn.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:sn.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,a/500*100)}%`}})})]}),sn.jsxs("div",{className:"space-y-4 mb-8",children:[sn.jsx("h4",{className:"font-semibold text-gray-900 text-lg mb-4",children:"Choose Your Sponsorship Package"}),sn.jsx("div",{className:"grid gap-4",children:o.map(e=>sn.jsx("div",{className:`border rounded-xl p-4 cursor-pointer transition-all duration-200 ${s?.id===e.id?"border-purple-500 bg-purple-50 shadow-lg scale-[1.02]":"border-gray-200 hover:border-gray-300 hover:shadow-md"} ${e.gems>a?"opacity-50 cursor-not-allowed":""}`,onClick:()=>{e.gems<=a&&i(e)},children:sn.jsxs("div",{className:"flex items-start justify-between",children:[sn.jsxs("div",{className:"flex items-start space-x-4",children:[sn.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-r ${e.color} text-white`,children:e.icon}),sn.jsxs("div",{className:"flex-1",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[sn.jsx("h5",{className:"font-semibold text-gray-900",children:e.name}),"popular"===e.id&&sn.jsx("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs font-medium",children:"Most Popular"}),"viral"===e.id&&sn.jsx("span",{className:"bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full text-xs font-medium",children:"Best Value"})]}),sn.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),sn.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[sn.jsxs("div",{className:"flex items-center space-x-1",children:[sn.jsx(Pt,{className:"w-3 h-3"}),sn.jsxs("span",{children:["Duration: ",l(e.duration)]})]}),sn.jsxs("div",{className:"flex items-center space-x-1",children:[sn.jsx(Qr,{className:"w-3 h-3"}),sn.jsxs("span",{children:[e.multiplier,"x visibility boost"]})]})]})]})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsx("p",{className:"text-2xl font-bold text-purple-600",children:e.gems}),sn.jsx("p",{className:"text-xs text-gray-500",children:"gems"}),e.gems>a&&sn.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Insufficient gems"})]})]})},e.id))})]}),s&&sn.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-4 mb-6",children:[sn.jsx("h5",{className:"font-semibold text-purple-900 mb-2",children:"Sponsorship Preview"}),sn.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[sn.jsxs("div",{children:[sn.jsx("span",{className:"text-purple-700",children:"Package:"}),sn.jsx("span",{className:"font-medium text-purple-900 ml-2",children:s.name})]}),sn.jsxs("div",{children:[sn.jsx("span",{className:"text-purple-700",children:"Duration:"}),sn.jsx("span",{className:"font-medium text-purple-900 ml-2",children:l(s.duration)})]}),sn.jsxs("div",{children:[sn.jsx("span",{className:"text-purple-700",children:"Visibility Boost:"}),sn.jsxs("span",{className:"font-medium text-purple-900 ml-2",children:[s.multiplier,"x"]})]}),sn.jsxs("div",{children:[sn.jsx("span",{className:"text-purple-700",children:"Cost:"}),sn.jsxs("span",{className:"font-medium text-purple-900 ml-2",children:[s.gems," gems"]})]})]}),sn.jsx("div",{className:"mt-3 pt-3 border-t border-purple-200",children:sn.jsx("p",{className:"text-xs text-purple-700",children:"Your brand name will be displayed as a sponsor on this content. Multiple sponsors can boost the same content for increased visibility."})})]}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsx("button",{onClick:()=>{s&&r(s.gems,s.multiplier,s.duration)},disabled:!s||s?.gems>a,className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-4 rounded-xl font-semibold transition-all duration-200 shadow-lg",children:s?`Sponsor for ${s.gems} gems`:"Select a sponsorship package"}),sn.jsx("button",{onClick:t,className:"w-full border border-gray-300 hover:border-gray-400 text-gray-700 px-6 py-3 rounded-xl font-medium transition-all duration-200",children:"Cancel"})]}),sn.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[sn.jsx("h5",{className:"font-medium text-blue-900 mb-2",children:" Sponsorship Benefits"}),sn.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[sn.jsx("li",{children:" Your brand appears on sponsored content"}),sn.jsx("li",{children:" Content gets priority placement in feeds"}),sn.jsx("li",{children:" Multiple sponsors increase total visibility boost"}),sn.jsx("li",{children:" Reach engaged users interested in the content topic"}),sn.jsx("li",{children:" Analytics provided on sponsorship performance"})]})]})]})})})}const bB=["https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=1400&q=80&sat=-10","https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&w=1400&q=80&sat=-10","https://images.unsplash.com/photo-1522542550221-31fd19575a2d?auto=format&fit=crop&w=1400&q=80&sat=-10","https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?auto=format&fit=crop&w=1400&q=80&sat=-10","https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1400&q=80&sat=-10"],vB=e=>{const t=Math.abs(Number(e)||0)%bB.length;return`${bB[t]}&sig=${e??t}`},jB=(e,t)=>{const r=(e=>({id:e,creator_id:1e3+e,creator_username:"demo_creator",creator_name:"Demo Creator",creator_avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=demo_content",platform:"instagram",platform_url:"https://instagram.com/promorang",title:"Demo Growth Content Spotlight",description:"Experience a highlight clip from our creator community. Monitor engagement, share prices, and revenue performance in real time.",media_url:vB(e),total_shares:3500,available_shares:1240,engagement_shares_total:3200,engagement_shares_remaining:880,share_price:12.5,current_revenue:8450,performance_metrics:JSON.stringify({impressions:98e3,clicks:12500,conversions:1320,engagement_rate:.128}),views_count:98e3,likes_count:15420,comments_count:2450,reposts_count:1200,is_demo:!0,is_sponsored:!1,created_at:new Date(Date.now()-1728e5).toISOString(),updated_at:(new Date).toISOString()}))(t);if(!e||"object"!=typeof e)return r;const n=Number(e.id??t??r.id),a="string"==typeof e.performance_metrics?e.performance_metrics:JSON.stringify({impressions:e.impressions??r.views_count??0,clicks:e.clicks??0,conversions:e.conversions??0,engagement_rate:e.engagement_rate??.07}),s=e.media_url&&/^https?:\/\//i.test(e.media_url)?e.media_url:vB(n);return{id:n,creator_id:Number(e.creator_id??r.creator_id),creator_username:e.creator_username??r.creator_username,creator_name:e.creator_name??r.creator_name,creator_avatar:e.creator_avatar??r.creator_avatar,platform:e.platform??r.platform,platform_url:e.platform_url??e.content_url??r.platform_url,title:e.title??r.title,description:e.description??r.description,media_url:s,total_shares:Number(e.total_shares??r.total_shares),available_shares:Number(e.available_shares??r.available_shares),engagement_shares_total:Number(e.engagement_shares_total??r.engagement_shares_total),engagement_shares_remaining:Number(e.engagement_shares_remaining??r.engagement_shares_remaining),share_price:Number(e.share_price??r.share_price),current_revenue:Number(e.current_revenue??r.current_revenue),performance_metrics:a,views_count:Number(e.views_count??e.impressions??r.views_count),likes_count:Number(e.likes_count??e.likes??r.likes_count),comments_count:Number(e.comments_count??e.comments??r.comments_count),reposts_count:Number(e.reposts_count??e.shares??r.reposts_count),is_demo:Boolean(e.is_demo??r.is_demo),is_sponsored:Boolean(e.is_sponsored??r.is_sponsored),created_at:e.created_at??r.created_at,updated_at:e.updated_at??e.created_at??r.updated_at}},wB=e=>({likes:14500+e%500,comments:2800+e%250,shares:1200+e%150,views:98e3+e%5e3,internal_moves:420+e%80,external_moves:215+e%40,total_engagement:14500+e%1e3});const NB=function(){const{id:e}=Ne(),t=we(),r=cn||"",n=e=>`${r}${e}`,[a,s]=u.useState(null),[i,o]=u.useState([]),[l,c]=u.useState(null),[d,h]=u.useState(null),[m,p]=u.useState(!0),[x,f]=u.useState(!1),[g,y]=u.useState(!1),[b,v]=u.useState(!1),[j,w]=u.useState(!1),[N,_]=u.useState(!1),[k,S]=u.useState(!1),[C,O]=u.useState({has_liked:!1,has_saved:!1}),[E,P]=u.useState(!1),[T,A]=u.useState(null),[M,D]=u.useState(!1),I=a?.title?.toLowerCase().includes("[demo]")||a?.title?.toLowerCase().includes("demo")||a?.description?.toLowerCase().includes("demo"),R=l&&a&&(l.id===a.creator_id||l.username===a.creator_name||l.display_name===a.creator_name);u.useEffect(()=>{let t=!0;return(async()=>{if(e){p(!0);try{await Promise.all([$(t),L(t),F(t),z(t),U(t)])}catch(r){}finally{t&&p(!1)}}})(),()=>{t=!1}},[e]);const $=async(t=!0)=>{const r=Number(e??Date.now());try{const a=await fetch(n(`/api/content/${e}`));if(a.ok){const e=await a.json();t&&s(jB(e?.content??e,r))}else t&&s(jB(null,r))}catch(a){t&&s(jB(null,r))}},L=async()=>{try{const e=Nl(),t=await fetch(n("/api/users/me/wallets"),{credentials:"include",headers:e});if(t.ok){const e=await t.json();o(e)}}catch(e){}},F=async()=>{try{const e=Nl(),t=await fetch(n("/api/users/me"),{credentials:"include",headers:e});if(t.ok){const e=await t.json();c(e)}}catch(e){}},z=async()=>{const t=Number(e??Date.now());try{const r=await fetch(n(`/api/content/${e}/metrics`));if(r.ok){const e=await r.json();h(e)}else h(wB(t))}catch(r){h(wB(t))}},U=async()=>{if(e)try{const t=Nl(),r=await fetch(n(`/api/content/${e}/sponsorship`),{credentials:"include",headers:t});if(r.ok){const e=await r.json();A(e)}}catch(t){}},B=async t=>{try{if("like"===t&&C.has_liked)return void alert("You have already liked this content!");if("save"===t&&C.has_saved)return void alert("Content already saved to your collection!");if("share"===t)return void y(!0);const r=await fetch(n("/api/users/social-action"),{method:"POST",headers:{"Content-Type":"application/json",...Nl()},credentials:"include",body:JSON.stringify({action_type:t,reference_id:a?.id,reference_type:"content"})});if(r.ok){const t=await r.json();q(t),await z(),await F(),await $(),await(async()=>{if(l&&e)try{const t=Nl(),r=await fetch(n(`/api/content/${e}/user-status`),{credentials:"include",headers:t});if(r.ok){const e=await r.json();O(e)}}catch(t){}})()}else{const e=await r.json();e.error&&alert(e.error)}}catch(r){}},q=e=>{const t=document.createElement("div");t.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-pulse",t.innerHTML=`\n      <div class="flex items-center space-x-2">\n        <span>+${e.points_earned} points!</span>\n        <span class="text-xs">(${e.multiplier.toFixed(1)}x multiplier)</span>\n      </div>\n    `,document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},3e3)},W=e=>{const t={like:.1,comment:.3,save:.5,share:1,repost:.2}[e]||0,r=l?(e=>{switch(e){case"super":return 2;case"premium":return 1.5;default:return 1}})(l.user_tier):1;return Math.floor(t*r*10)/10},K=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString();if(m)return sn.jsx("div",{className:"flex items-center justify-center h-64",children:sn.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})});if(!a)return sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Content not found"}),sn.jsx("button",{onClick:()=>t("/dashboard"),className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Go Back Home"})]});const V=d||{likes:0,comments:0,shares:0,views:0,internal_moves:0,external_moves:0};return sn.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[I&&sn.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-xl p-6 shadow-lg",children:[sn.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-2",children:[sn.jsx("span",{className:"text-2xl",children:""}),sn.jsx("h2",{className:"text-xl font-bold",children:"DEMO CONTENT"}),sn.jsx("span",{className:"text-2xl",children:""})]}),sn.jsx("p",{className:"text-center text-orange-100",children:"This is demo content for testing purposes. No real money or value transfers will occur."})]}),sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-4",children:[sn.jsx("button",{onClick:()=>t("/dashboard"),className:"flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors",children:sn.jsx(it,{className:"w-5 h-5 text-gray-600"})}),sn.jsxs("div",{children:[sn.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Content Details ",I&&sn.jsx("span",{className:"text-orange-600",children:"(Demo)"})]}),sn.jsx("p",{className:"text-gray-600",children:I?"Demo investment simulation - no real value":"Investment opportunity analysis"}),sn.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[a.is_demo&&sn.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200 flex items-center space-x-1",children:[sn.jsx(Dr,{className:"w-3 h-3"}),sn.jsx("span",{children:"Demo"})]}),a.is_sponsored&&sn.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-gradient-to-r from-orange-100 to-amber-100 text-orange-800 border border-orange-200 flex items-center space-x-1",children:[sn.jsx($r,{className:"w-3 h-3"}),sn.jsx("span",{children:"Sponsored"})]}),void 0!==a.views_count&&sn.jsxs("div",{className:"flex items-center space-x-1 text-gray-500",children:[sn.jsx(zt,{className:"w-4 h-4"}),sn.jsxs("span",{className:"text-sm",children:[V.views?.toLocaleString()||a.views_count.toLocaleString()," views"]})]})]})]})]}),R&&sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(jn,{content:"Edit content",children:sn.jsxs("button",{onClick:()=>_(!0),className:"flex items-center space-x-2 px-4 py-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",children:[sn.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:sn.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),sn.jsx("span",{className:"hidden sm:inline",children:"Edit"})]})}),sn.jsx(jn,{content:"Delete content",children:sn.jsxs("button",{onClick:()=>S(!0),className:"flex items-center space-x-2 px-4 py-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",children:[sn.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:sn.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),sn.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})})]})]}),sn.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[sn.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[sn.jsxs("div",{className:"bg-white rounded-xl border overflow-hidden "+(I?"border-orange-300 bg-orange-50/30":a.is_sponsored?"ring-2 ring-orange-200 ring-opacity-50":"border-gray-200"),children:[I&&sn.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white px-4 py-2 text-center",children:sn.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm font-medium",children:[sn.jsx("span",{children:""}),sn.jsx("span",{children:"DEMO CONTENT - No real value transfers"}),sn.jsx("span",{children:""})]})}),a.is_sponsored&&!I&&sn.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white px-4 py-2 text-center",children:sn.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm font-medium",children:[sn.jsx($r,{className:"w-4 h-4"}),sn.jsx("span",{children:"SPONSORED CONTENT"}),sn.jsx($r,{className:"w-4 h-4"})]})}),sn.jsx("div",{className:"p-6 pb-4",children:sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white text-xl",children:(e=>{switch(e){case"instagram":return"";case"tiktok":return"";case"youtube":return"";case"twitter":return"";case"linkedin":return"";default:return""}})(a.platform)}),sn.jsxs("div",{className:"flex-1",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx(vn,{username:a.creator_name,displayName:a.creator_name||"Creator",avatarUrl:a.creator_avatar,className:"font-semibold text-gray-900 hover:text-orange-600 transition-colors",showAvatar:!1}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[R&&sn.jsx("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full text-xs font-medium",children:"YOUR CONTENT"}),I&&sn.jsx("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs font-medium",children:"DEMO"}),sn.jsx("span",{className:"text-sm text-gray-500 capitalize",children:a.platform})]})]}),sn.jsx("p",{className:"text-sm text-gray-500",children:"2 hours ago"})]})]})}),a.media_url&&sn.jsx("div",{className:"relative",children:sn.jsx("img",{src:a.media_url,alt:a.title,className:"w-full h-96 object-cover"})}),sn.jsxs("div",{className:"p-6",children:[sn.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-3",children:a.title}),a.description&&sn.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:a.description}),sn.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"flex items-center justify-center space-x-1 text-red-500 mb-1",children:sn.jsx(Gt,{className:"w-5 h-5"})}),sn.jsx("p",{className:"text-lg font-bold text-gray-900",children:K(V.likes)}),sn.jsx("p",{className:"text-sm text-gray-500",children:"Likes"})]}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"flex items-center justify-center space-x-1 text-blue-500 mb-1",children:sn.jsx(mr,{className:"w-5 h-5"})}),sn.jsx("p",{className:"text-lg font-bold text-gray-900",children:K(V.comments)}),sn.jsx("p",{className:"text-sm text-gray-500",children:"Comments"})]}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"flex items-center justify-center space-x-1 text-green-500 mb-1",children:sn.jsx(Ar,{className:"w-5 h-5"})}),sn.jsx("p",{className:"text-lg font-bold text-gray-900",children:K(V.shares)}),sn.jsx("p",{className:"text-sm text-gray-500",children:"Shares"})]}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"flex items-center justify-center space-x-1 text-purple-500 mb-1",children:sn.jsx(zt,{className:"w-5 h-5"})}),sn.jsx("p",{className:"text-lg font-bold text-gray-900",children:K(V.views)}),sn.jsx("p",{className:"text-sm text-gray-500",children:"Views"})]})]}),sn.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[sn.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"Platform Activity"}),sn.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[sn.jsxs("div",{className:"text-center",children:[sn.jsx("p",{className:"text-lg font-bold text-blue-900",children:V.internal_moves||0}),sn.jsx("p",{className:"text-xs text-blue-700",children:"Internal Moves"})]}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("p",{className:"text-lg font-bold text-purple-900",children:V.external_moves||0}),sn.jsx("p",{className:"text-xs text-purple-700",children:"External Moves"})]})]})]}),a.engagement_shares_total>0&&sn.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6 mb-6",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center",children:sn.jsx(Tt,{className:"w-6 h-6 text-white"})}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-semibold text-green-900",children:"Free Engagement Shares"}),sn.jsx("p",{className:"text-sm text-green-700",children:"Earn by engaging with this content!"})]})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsx("div",{className:"text-3xl font-bold text-green-600",children:a.engagement_shares_remaining}),sn.jsx("div",{className:"text-sm text-green-500",children:"remaining"})]})]}),sn.jsxs("div",{className:"mb-4",children:[sn.jsxs("div",{className:"flex justify-between items-center mb-2",children:[sn.jsx("span",{className:"text-sm font-medium text-green-700",children:"Progress"}),sn.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[a.engagement_shares_total-a.engagement_shares_remaining," / ",a.engagement_shares_total]})]}),sn.jsx("div",{className:"w-full bg-green-200 rounded-full h-3 overflow-hidden",children:sn.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-3 rounded-full transition-all duration-500",style:{width:(a.engagement_shares_total-a.engagement_shares_remaining)/a.engagement_shares_total*100+"%"}})})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[sn.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-700",children:[sn.jsx(Gt,{className:"w-4 h-4"}),sn.jsx("span",{children:"Like for 1 share"})]}),sn.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-700",children:[sn.jsx(mr,{className:"w-4 h-4"}),sn.jsx("span",{children:"Comment for 3 shares"})]}),sn.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-700",children:[sn.jsx(Ar,{className:"w-4 h-4"}),sn.jsx("span",{children:"Share for 5 shares"})]})]})]}),sn.jsx("div",{className:"mb-6",children:sn.jsx(jn,{content:"Perform actions on the original platform for 10x points!",position:"top",children:sn.jsxs("button",{onClick:()=>v(!0),className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-6 py-4 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center space-x-3 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[sn.jsx("span",{className:"text-xl",children:""}),sn.jsx("span",{children:"Perform External Move"}),sn.jsx("span",{className:"bg-white/20 px-3 py-1 rounded-full text-sm font-bold",children:"10x Points!"})]})})}),sn.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-3",children:[sn.jsx("span",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Quick Actions"}),sn.jsx("span",{className:"text-xs text-gray-400",children:"Reduced points"})]}),sn.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{action:"like",icon:Gt,color:C.has_liked?"text-red-500 bg-red-50":"hover:text-red-500",disabled:C.has_liked},{action:"comment",icon:mr,color:"hover:text-blue-500",disabled:!1},{action:"repost",icon:kr,color:"hover:text-purple-500",disabled:!1},{action:"save",icon:ut,color:C.has_saved?"text-yellow-500 bg-yellow-50":"hover:text-yellow-500",disabled:C.has_saved}].map(({action:e,icon:t,color:r,disabled:n})=>sn.jsx(jn,{content:n&&"like"===e?"Already liked!":n&&"save"===e?"Already saved!":`+${W(e)} points`,compact:!0,children:sn.jsxs("button",{onClick:()=>B(e),disabled:n,className:`flex flex-col items-center p-3 rounded-lg transition-colors hover:bg-white ${r} ${n?"cursor-not-allowed opacity-75":""}`,children:[sn.jsx(t,{className:`w-5 h-5 mb-1 ${C.has_liked&&"like"===e?"fill-current":""} ${C.has_saved&&"save"===e?"fill-current":""}`}),sn.jsx("span",{className:"text-xs text-gray-600 capitalize",children:e}),sn.jsx("span",{className:"text-xs text-green-600 font-medium",children:n&&("like"===e||"save"===e)?"":`+${W(e)}`})]})},e))})]}),sn.jsx("div",{className:"pt-4 border-t border-gray-100",children:sn.jsxs("a",{href:a.platform_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 text-purple-600 hover:text-purple-700 transition-colors",children:[sn.jsx(Lt,{className:"w-4 h-4"}),sn.jsxs("span",{children:["View on ",a.platform]})]})})]})]}),sn.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Analytics"}),sn.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[sn.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-4 rounded-lg",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[sn.jsx(Ur,{className:"w-5 h-5 text-green-600"}),sn.jsx("span",{className:"text-sm font-medium text-green-800",children:"Engagement Rate"})]}),sn.jsx("p",{className:"text-xl font-bold text-green-900",children:"8.7%"}),sn.jsx("p",{className:"text-xs text-green-600",children:"+2.3% from avg"})]}),sn.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-lg",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[sn.jsx(xt,{className:"w-5 h-5 text-blue-600"}),sn.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Growth Rate"})]}),sn.jsx("p",{className:"text-xl font-bold text-blue-900",children:"15.2%"}),sn.jsx("p",{className:"text-xs text-blue-600",children:"Last 24 hours"})]}),sn.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 p-4 rounded-lg",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[sn.jsx(Rt,{className:"w-5 h-5 text-purple-600"}),sn.jsx("span",{className:"text-sm font-medium text-purple-800",children:"Revenue/View"})]}),sn.jsx("p",{className:"text-xl font-bold text-purple-900",children:"$0.0032"}),sn.jsx("p",{className:"text-xs text-purple-600",children:"Industry avg: $0.0028"})]}),sn.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 p-4 rounded-lg",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[sn.jsx(Hr,{className:"w-5 h-5 text-orange-600"}),sn.jsx("span",{className:"text-sm font-medium text-orange-800",children:"Reach"})]}),sn.jsx("p",{className:"text-xl font-bold text-orange-900",children:"1.2M"}),sn.jsx("p",{className:"text-xs text-orange-600",children:"Unique users"})]})]})]}),sn.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:sn.jsx(gB,{contentId:a.id,currentUser:l,isOwner:R||!1})})]}),sn.jsxs("div",{className:"space-y-6",children:[T&&sn.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-4",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[sn.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20",children:sn.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),sn.jsx("span",{className:"font-semibold text-purple-900",children:"Sponsored Content"}),T.sponsor_count>1&&sn.jsxs("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-xs font-medium",children:[T.sponsor_count," Sponsors"]})]}),sn.jsxs("p",{className:"text-sm text-purple-700 mb-3",children:["This content receives ",T.total_boost_multiplier||T.boost_multiplier,"x visibility boost",T.sponsor_count>1&&" from multiple sponsors"]}),sn.jsxs("div",{className:"space-y-2",children:[T.sponsor_names&&T.sponsor_names.length>0?sn.jsxs("div",{className:"text-sm text-purple-700",children:[sn.jsx("span",{className:"font-medium",children:"Sponsored by:"}),sn.jsxs("div",{className:"mt-1",children:[T.sponsor_names.slice(0,3).map((e,t)=>sn.jsx("span",{className:"inline-block bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-xs font-medium mr-2 mb-1",children:e},t)),T.sponsor_names.length>3&&sn.jsxs("span",{className:"text-xs text-purple-600",children:["+",T.sponsor_names.length-3," more"]})]})]}):sn.jsxs("div",{className:"text-sm text-purple-700",children:[sn.jsx("span",{className:"font-medium",children:"Primary Sponsor:"})," ",T.primary_sponsor||T.advertiser_name||"Advertiser"]}),sn.jsxs("div",{className:"flex items-center justify-between text-xs text-purple-600 pt-2 border-t border-purple-200",children:[sn.jsxs("span",{children:[T.total_gems_allocated||T.gems_allocated," gems invested"]}),sn.jsxs("span",{children:[T.sponsor_count||1," active sponsorship",1!==(T.sponsor_count||1)?"s":""]})]})]})]}),"advertiser"===l?.user_type&&!R&&sn.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-4",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[sn.jsx(Lr,{className:"w-5 h-5 text-blue-600"}),sn.jsx("span",{className:"font-semibold text-blue-900",children:T?"Boost Further":"Sponsor This Content"})]}),sn.jsx("p",{className:"text-sm text-blue-700 mb-3",children:T?"Add your sponsorship to boost visibility even more! Multiple sponsors can collaborate to maximize reach.":"Boost this content's visibility and reach more users. Sponsored content appears higher in feeds and gets priority placement."}),T&&sn.jsx("div",{className:"bg-blue-100 rounded-lg p-3 mb-3",children:sn.jsxs("div",{className:"text-xs text-blue-700",children:[sn.jsxs("div",{className:"flex justify-between items-center",children:[sn.jsx("span",{children:"Current boost:"}),sn.jsxs("span",{className:"font-semibold",children:[T.total_boost_multiplier||T.boost_multiplier,"x"]})]}),sn.jsxs("div",{className:"flex justify-between items-center",children:[sn.jsx("span",{children:"Active sponsors:"}),sn.jsx("span",{className:"font-semibold",children:T.sponsor_count||1})]})]})}),sn.jsxs("button",{onClick:()=>P(!0),className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-4 py-3 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2",children:[sn.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:sn.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),sn.jsx("span",{children:T?"Add Your Sponsorship":"Sponsor This Content"})]})]}),sn.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Investment Details"}),sn.jsxs("div",{className:"space-y-4 mb-6",children:[sn.jsxs("div",{className:"flex justify-between items-center",children:[sn.jsx("span",{className:"text-gray-600",children:"Share Price"}),sn.jsxs("span",{className:"text-xl font-bold text-green-600",children:["$",(a.share_price||0).toFixed(4)]})]}),sn.jsxs("div",{className:"flex justify-between items-center",children:[sn.jsx("span",{className:"text-gray-600",children:"Available Shares"}),sn.jsx("span",{className:"font-semibold text-gray-900",children:a.available_shares||0})]}),sn.jsxs("div",{className:"flex justify-between items-center",children:[sn.jsx("span",{className:"text-gray-600",children:"Total Shares"}),sn.jsx("span",{className:"font-semibold text-gray-900",children:a.total_shares||0})]}),sn.jsxs("div",{className:"flex justify-between items-center",children:[sn.jsx("span",{className:"text-gray-600",children:"Engagement Shares"}),sn.jsxs("span",{className:"font-semibold text-orange-600",children:[a.engagement_shares_remaining||0,"/",a.engagement_shares_total||0]})]}),sn.jsxs("div",{className:"flex justify-between items-center",children:[sn.jsx("span",{className:"text-gray-600",children:"Current Revenue"}),sn.jsxs("span",{className:"font-semibold text-purple-600",children:["$",(a.current_revenue||0).toFixed(2)]})]})]}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsx(jn,{content:I?"Demo content - no real value transfers":"Tip creator & boost content value",children:sn.jsxs("button",{onClick:()=>D(!0),className:"w-full px-4 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2 "+(I?"bg-orange-100 hover:bg-orange-200 text-orange-700":"bg-purple-100 hover:bg-purple-200 text-purple-700"),children:[sn.jsx(Vt,{className:"w-4 h-4"}),sn.jsx("span",{children:I?"Demo Tip Creator":"Tip Creator"})]})}),sn.jsx("button",{onClick:()=>f(!0),disabled:0===a.available_shares,className:"w-full px-6 py-3 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-white "+(I?"bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600":"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600"),children:0===a.available_shares?"Sold Out":I?"Demo Shares":"Buy Shares"}),sn.jsxs("button",{onClick:()=>t("/invest/social-forecasts"),className:"w-full bg-blue-100 hover:bg-blue-200 text-blue-700 px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[sn.jsx(Lr,{className:"w-4 h-4"}),sn.jsx("span",{children:"Make Performance Forecast"})]}),I&&sn.jsx("div",{className:"bg-orange-100 border border-orange-200 rounded-lg p-3",children:sn.jsx("p",{className:"text-xs text-orange-700 text-center",children:" This is demo content. No real purchases or value transfers will occur."})})]})]}),sn.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Market Insights"}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"24h Volume"}),sn.jsx("span",{className:"font-semibold text-gray-900",children:"$1,247"})]}),sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"Price Change"}),sn.jsx("span",{className:"font-semibold text-green-600",children:"+7.2%"})]}),sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"Investors"}),sn.jsx("span",{className:"font-semibold text-gray-900",children:"23"})]}),sn.jsxs("div",{className:"flex justify-between",children:[sn.jsx("span",{className:"text-gray-600",children:"ROI Potential"}),sn.jsx("span",{className:"font-semibold text-purple-600",children:"High"})]})]})]})]})]}),a&&sn.jsxs(sn.Fragment,{children:[sn.jsx(Wl,{content:a,wallet:Array.isArray(i)?i.find(e=>"USD"===e.currency_type):void 0,isOpen:x,onClose:()=>f(!1),onPurchase:async(e,t)=>{try{if(!(await fetch(n("/api/content/buy-shares"),{method:"POST",headers:{"Content-Type":"application/json",...Nl()},credentials:"include",body:JSON.stringify({content_id:e.id,shares_count:t})})).ok)throw new Error("Purchase failed");await $(),await L(),await z()}catch(r){throw r}}}),sn.jsx(rc,{user:l,contentId:a.id,contentTitle:a.title,isOpen:g,onClose:()=>y(!1),onSuccess:()=>{F(),z()}}),sn.jsx(nc,{user:l,contentId:a.id,contentTitle:a.title,contentPlatform:a.platform,contentUrl:a.platform_url,isOpen:b,onClose:()=>v(!1),onSuccess:()=>{F(),z()}}),sn.jsx(fB,{isOpen:j,onClose:()=>w(!1),contentId:a.id,contentTitle:a.title,isOwner:!1,currentRevenue:a.current_revenue||0,sharePrice:a.share_price||0,totalShares:a.total_shares||0,onSuccess:(e,t)=>{w(!1),a&&s({...a,current_revenue:e,share_price:t}),F()}}),sn.jsx(Vd,{isOpen:N,onClose:()=>_(!1),onSuccess:e=>{_(!1),s(e),z()},content:a}),sn.jsx(Hd,{isOpen:k,onClose:()=>S(!1),onConfirm:async()=>{if(a)try{const e=await fetch(n(`/api/content/${a.id}`),{method:"DELETE",credentials:"include",headers:Nl()});if(e.ok)t("/dashboard");else{const t=await e.json();alert(t.error||"Failed to delete content")}}catch(e){alert("Failed to delete content")}},title:"Delete Content",message:`Are you sure you want to delete "${a.title}"? This action cannot be undone and will remove all associated data.`,confirmText:"Delete",cancelText:"Cancel",type:"danger"}),sn.jsx(yB,{isOpen:E,onClose:()=>P(!1),onSponsor:async(e,t,r)=>{if(a)try{const s=await fetch(n(`/api/content/${a.id}/sponsor`),{method:"POST",headers:{"Content-Type":"application/json",...Nl()},credentials:"include",body:JSON.stringify({gems_allocated:e,boost_multiplier:t,duration_hours:r})});if(s.ok)P(!1),await U(),await F(),alert(`Content sponsored successfully! It will receive ${t}x visibility boost for ${r} hours.`);else{const e=await s.json();alert(e.error||"Failed to sponsor content")}}catch(s){alert("Failed to sponsor content")}},contentTitle:a.title,userGems:l?.gems_balance||0}),sn.jsx(iu,{content:a,isOpen:M,onClose:()=>D(!1),onTip:async(e,t)=>{try{if(!(await fetch(n("/api/content/tip"),{method:"POST",headers:{"Content-Type":"application/json",...Nl()},credentials:"include",body:JSON.stringify({content_id:e.id,tip_amount:t})})).ok)throw new Error("Tip failed");{const r=document.createElement("div");r.className="fixed top-4 right-4 bg-purple-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-bounce",r.innerHTML=`\n          <div class="flex items-center space-x-2">\n            <span class="text-lg"></span>\n            <div>\n              <div class="font-semibold">Tip sent!</div>\n              <div class="text-xs opacity-90">Tipped ${t} gems to ${e.creator_name||e.creator_username||"creator"}</div>\n            </div>\n          </div>\n        `,document.body.appendChild(r),setTimeout(()=>{document.body.contains(r)&&document.body.removeChild(r)},4e3),F()}}catch(r){throw r}}})]})]})};function _B(){const{id:e}=Ne(),t=we(),[r,n]=u.useState(null),[a,s]=u.useState(!0);if(u.useEffect(()=>{if(!e)return;(async()=>{s(!0);const t=await(async(e,t)=>{try{const r=t?`?userId=${encodeURIComponent(t)}`:"",n=await kl(`/api/portfolio/holdings/${e}${r}`,{credentials:"include"});return n.ok?n.json():Cu(e)}catch(r){return Cu(e)}})(e);n(t),s(!1)})()},[e]),!e)return sn.jsxs("div",{className:"p-6",children:[sn.jsxs("button",{onClick:()=>t(-1),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[sn.jsx(it,{className:"w-4 h-4 mr-2"})," Back"]}),sn.jsx("p",{className:"mt-6 text-gray-600",children:"Holding not found."})]});if(a||!r)return sn.jsxs("div",{className:"p-6",children:[sn.jsxs("button",{onClick:()=>t(-1),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[sn.jsx(it,{className:"w-4 h-4 mr-2"})," Back"]}),sn.jsx("div",{className:"mt-10 flex justify-center",children:sn.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})})]});const{holding:i,content:o,performance:l,marketplace:c}=r;return sn.jsxs("div",{className:"space-y-6",children:[sn.jsx("div",{className:"flex items-center justify-between",children:sn.jsxs("button",{onClick:()=>t(-1),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[sn.jsx(it,{className:"w-4 h-4 mr-2"})," Back to portfolio"]})}),sn.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-6",children:sn.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[sn.jsxs("div",{className:"flex items-center space-x-4",children:[sn.jsx("img",{src:i.content_thumbnail,alt:i.content_title,className:"w-20 h-20 rounded-xl object-cover"}),sn.jsxs("div",{children:[sn.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:i.content_title}),sn.jsxs("p",{className:"text-sm text-gray-500",children:[i.creator_name,"  ",i.platform.toUpperCase()]}),sn.jsx("p",{className:"text-sm text-gray-500 mt-1",children:o.description})]})]}),sn.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[sn.jsxs("div",{className:"text-right",children:[sn.jsx("p",{className:"text-xs text-gray-500",children:"Shares Owned"}),sn.jsx("p",{className:"text-lg font-semibold text-gray-900",children:i.owned_shares})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsx("p",{className:"text-xs text-gray-500",children:"Market Value"}),sn.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",i.market_value.toFixed(2)]})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsx("p",{className:"text-xs text-gray-500",children:"Unrealized Gain"}),sn.jsxs("p",{className:"text-lg font-semibold "+(i.unrealized_gain>=0?"text-green-600":"text-red-600"),children:[i.unrealized_gain>=0?"+":"","$",i.unrealized_gain.toFixed(2)]})]}),sn.jsxs("div",{className:"text-right",children:[sn.jsx("p",{className:"text-xs text-gray-500",children:"Available to sell"}),sn.jsx("p",{className:"text-lg font-semibold text-gray-900",children:i.available_to_sell})]})]})]})}),sn.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[sn.jsxs("div",{className:"lg:col-span-2 bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Performance history"}),sn.jsxs("span",{className:"inline-flex items-center text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700",children:[sn.jsx(Ur,{className:"w-3 h-3 mr-1"})," 30 day trend"]})]}),sn.jsx("div",{className:"space-y-2",children:l.history.map(e=>sn.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[sn.jsx("span",{children:e.date}),sn.jsxs("span",{children:["$",e.price.toFixed(2),"  ",e.volume," shares traded"]})]},e.date))})]}),sn.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[sn.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Activity"}),sn.jsx("div",{className:"space-y-3",children:l.ledger.map(e=>sn.jsxs("div",{className:"flex items-center justify-between text-sm",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-9 h-9 bg-gray-100 rounded-full flex items-center justify-center",children:"purchase"===e.type?sn.jsx(st,{className:"w-4 h-4 text-green-600"}):sn.jsx(Rt,{className:"w-4 h-4 text-purple-600"})}),sn.jsxs("div",{children:[sn.jsx("p",{className:"font-medium text-gray-900 capitalize",children:e.type}),sn.jsx("p",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]})]}),sn.jsx("div",{className:"text-right text-sm text-gray-700",children:e.quantity?`${e.quantity} shares @ $${e.price.toFixed(2)}`:`$${e.price.toFixed(2)}`})]},e.id))})]})]}),sn.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[sn.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[sn.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Marketplace listings"}),sn.jsx("div",{className:"space-y-3",children:c.listings.length?c.listings.map(e=>sn.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg px-4 py-3",children:[sn.jsxs("div",{children:[sn.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[e.quantity," shares"]}),sn.jsxs("p",{className:"text-xs text-gray-500 capitalize",children:["Status: ",e.status]})]}),sn.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["$",e.ask_price.toFixed(2)]})]},e.id)):sn.jsx("p",{className:"text-sm text-gray-500",children:"No listing history yet."})})]}),sn.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[sn.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent offers"}),sn.jsx("div",{className:"space-y-3",children:c.offers.length?c.offers.map(e=>sn.jsxs("div",{className:"bg-gray-50 rounded-lg px-4 py-3",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[e.quantity," shares @ $",e.bid_price.toFixed(2)]}),sn.jsx("p",{className:"text-xs text-gray-500",children:e.buyer_name})]}),sn.jsx("span",{className:"text-xs font-semibold text-orange-600",children:e.status})]}),e.message&&sn.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["",e.message,""]})]},e.id)):sn.jsx("p",{className:"text-sm text-gray-500",children:"No offers yet."})})]})]}),sn.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[sn.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Content performance overview"}),sn.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[sn.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[sn.jsx("p",{className:"text-xs uppercase tracking-wide text-orange-600",children:"Total views"}),sn.jsx("p",{className:"text-xl font-semibold text-orange-900",children:o.total_views.toLocaleString()})]}),sn.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[sn.jsx("p",{className:"text-xs uppercase tracking-wide text-blue-600",children:"Engagement rate"}),sn.jsxs("p",{className:"text-xl font-semibold text-blue-900",children:[o.engagement_rate,"%"]})]}),sn.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[sn.jsx("p",{className:"text-xs uppercase tracking-wide text-purple-600",children:"Earnings to date"}),sn.jsxs("p",{className:"text-xl font-semibold text-purple-900",children:["$",o.earnings_to_date.toFixed(2)]})]}),sn.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[sn.jsx("p",{className:"text-xs uppercase tracking-wide text-green-600",children:"Last trade"}),sn.jsx("p",{className:"text-xl font-semibold text-green-900",children:i.last_trade_at?new Date(i.last_trade_at).toLocaleDateString():"N/A"})]})]})]})]})}function kB(){const{id:e}=Ne(),t=we(),[r,n]=u.useState(null),[a,s]=u.useState(!0);if(u.useEffect(()=>{if(!e)return;(async()=>{s(!0);const t=await(async e=>{try{const t=await kl(`/api/portfolio/predictions/${e}`,{credentials:"include"});return t.ok?t.json():Ou(e)}catch(t){return Ou(e)}})(e);n(t),s(!1)})()},[e]),!e)return sn.jsxs("div",{className:"p-6",children:[sn.jsxs("button",{onClick:()=>t(-1),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[sn.jsx(it,{className:"w-4 h-4 mr-2"})," Back"]}),sn.jsx("p",{className:"mt-6 text-gray-600",children:"Prediction not found."})]});if(a||!r)return sn.jsxs("div",{className:"p-6",children:[sn.jsxs("button",{onClick:()=>t(-1),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[sn.jsx(it,{className:"w-4 h-4 mr-2"})," Back to predictions"]}),sn.jsx("div",{className:"mt-10 flex justify-center",children:sn.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})})]});const{prediction:i,forecast:o,trajectory:l,participants:c}=r;return sn.jsxs("div",{className:"space-y-6",children:[sn.jsx("div",{className:"flex items-center justify-between",children:sn.jsxs("button",{onClick:()=>t(-1),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[sn.jsx(it,{className:"w-4 h-4 mr-2"})," Back"]})}),sn.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-6",children:sn.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[sn.jsxs("div",{children:[sn.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:i.content_title}),sn.jsxs("p",{className:"text-sm text-gray-500",children:[i.platform.toUpperCase(),"  Placed ",new Date(i.created_at).toLocaleDateString()]}),sn.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:[sn.jsxs("div",{children:[sn.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Side"}),sn.jsx("p",{className:"text-base font-semibold text-gray-900 capitalize",children:i.prediction_side})]}),sn.jsxs("div",{children:[sn.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Stake"}),sn.jsxs("p",{className:"text-base font-semibold text-gray-900",children:["$",i.amount.toFixed(2)]})]}),sn.jsxs("div",{children:[sn.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Potential payout"}),sn.jsxs("p",{className:"text-base font-semibold text-gray-900",children:["$",i.potential_payout.toFixed(2)]})]}),sn.jsxs("div",{children:[sn.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Status"}),sn.jsx("p",{className:"text-base font-semibold text-orange-600 capitalize",children:i.status})]})]})]}),sn.jsxs("div",{className:"bg-orange-50 rounded-2xl p-4 border border-orange-200",children:[sn.jsx("p",{className:"text-xs uppercase tracking-wide text-orange-600",children:"Forecast target"}),sn.jsxs("p",{className:"text-2xl font-semibold text-orange-900",children:[o.metric,"  ",o.target]}),sn.jsxs("p",{className:"text-sm text-orange-700 mt-2",children:["Odds ",o.odds.toFixed(2),"x"]}),sn.jsxs("p",{className:"text-xs text-orange-700 mt-1",children:["Expires ",new Date(o.expires_at).toLocaleString()]})]})]})}),sn.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[sn.jsxs("div",{className:"lg:col-span-2 bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Trajectory"}),sn.jsxs("span",{className:"inline-flex items-center text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700",children:[sn.jsx(gt,{className:"w-3 h-3 mr-1"})," Trend overview"]})]}),sn.jsx("div",{className:"space-y-2",children:l.map(e=>sn.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[sn.jsx("span",{children:e.date}),sn.jsxs("span",{children:["Actual ",e.actual.toLocaleString(),"  Expected ",e.expected.toLocaleString()]})]},e.date))})]}),sn.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[sn.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Projection notes"}),sn.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:o.creator_projection})]})]}),sn.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Hr,{className:"w-4 h-4 text-purple-600"}),sn.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Participants"})]}),sn.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-purple-100 text-purple-700",children:[c.length," active"]})]}),sn.jsx("div",{className:"space-y-3",children:c.map((e,t)=>sn.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg px-4 py-3",children:[sn.jsxs("div",{children:[sn.jsx("p",{className:"font-medium text-gray-900",children:e.username}),sn.jsx("p",{className:"text-xs text-gray-500 capitalize",children:e.side})]}),sn.jsxs("div",{className:"text-right text-sm text-gray-600",children:[sn.jsxs("p",{children:["$",e.amount.toFixed(2)]}),sn.jsx("p",{className:"text-xs text-gray-500 capitalize",children:e.status})]})]},`${e.username}-${t}`))})]})]})}function SB({isOpen:e,onClose:t,onSuccess:r,drop:n}){const[a,s]=u.useState({title:n.title,description:n.description,drop_type:n.drop_type,difficulty:n.difficulty,key_cost:n.key_cost,gem_reward_base:n.gem_reward_base,gem_pool_total:n.gem_pool_total,follower_threshold:n.follower_threshold,time_commitment:n.time_commitment||"",requirements:n.requirements||"",deliverables:n.deliverables||"",deadline_at:n.deadline_at?n.deadline_at.split("T")[0]:"",max_participants:n.max_participants||void 0,platform:n.platform||"",content_url:n.content_url||"",move_cost_points:n.move_cost_points,key_reward_amount:n.key_reward_amount,is_proof_drop:n.is_proof_drop,is_paid_drop:n.is_paid_drop,reward_logic:""}),[i,o]=u.useState(!1),[l,c]=u.useState(null);if(u.useEffect(()=>{n&&s({title:n.title,description:n.description,drop_type:n.drop_type,difficulty:n.difficulty,key_cost:n.key_cost,gem_reward_base:n.gem_reward_base,gem_pool_total:n.gem_pool_total,follower_threshold:n.follower_threshold,time_commitment:n.time_commitment||"",requirements:n.requirements||"",deliverables:n.deliverables||"",deadline_at:n.deadline_at?n.deadline_at.split("T")[0]:"",max_participants:n.max_participants||void 0,platform:n.platform||"",content_url:n.content_url||"",move_cost_points:n.move_cost_points,key_reward_amount:n.key_reward_amount,is_proof_drop:n.is_proof_drop,is_paid_drop:n.is_paid_drop,reward_logic:""})},[n]),!e)return null;return sn.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:sn.jsxs("div",{className:"bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[sn.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[sn.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Drop"}),sn.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:i,children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsxs("form",{onSubmit:async e=>{e.preventDefault(),o(!0),c(null);try{const e={...a,deadline_at:a.deadline_at?new Date(a.deadline_at).toISOString():void 0};if(!CreateDropRequestSchema.safeParse(e).success)return void c("Please check all required fields");const s=await fetch(`/api/drops/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(s.ok){const e=await s.json();r(e.drop),t()}else{const e=await s.json();c(e.error||"Failed to update drop")}}catch(s){c("Failed to update drop")}finally{o(!1)}},className:"p-6 space-y-6",children:[l&&sn.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:l}),sn.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Drop Type"}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[n.is_proof_drop&&sn.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:"Proof Drop - Free to apply"}),n.is_paid_drop&&sn.jsx("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium",children:"Paid Drop - Costs keys, rewards gems"}),!n.is_proof_drop&&!n.is_paid_drop&&sn.jsx("span",{className:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-medium",children:"Move Drop - Social actions for keys"})]}),sn.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Drop type cannot be changed after creation"})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[sn.jsxs("div",{className:"md:col-span-2",children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),sn.jsx("input",{type:"text",value:a.title,onChange:e=>s({...a,title:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"Enter drop title",required:!0,disabled:i})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Drop Category *"}),sn.jsx("select",{value:a.drop_type,onChange:e=>s({...a,drop_type:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",required:!0,disabled:i,children:DropTypeSchema.options.map(e=>sn.jsx("option",{value:e,children:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},e))})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty *"}),sn.jsx("select",{value:a.difficulty,onChange:e=>s({...a,difficulty:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",required:!0,disabled:i,children:DropDifficultySchema.options.map(e=>sn.jsx("option",{value:e,className:"capitalize",children:e},e))})]})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),sn.jsx("textarea",{value:a.description,onChange:e=>s({...a,description:e.target.value}),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"Describe what needs to be done...",required:!0,disabled:i})]}),n.is_paid_drop&&sn.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[sn.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Paid Drop Settings"}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Key Cost"}),sn.jsx("input",{type:"number",min:"1",value:a.key_cost,onChange:e=>s({...a,key_cost:Number(e.target.value)}),className:"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:i})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Gem Reward"}),sn.jsx("input",{type:"number",min:"1",value:a.gem_reward_base,onChange:e=>s({...a,gem_reward_base:Number(e.target.value)}),className:"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:i})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Total Gem Pool"}),sn.jsx("input",{type:"number",min:"0",value:a.gem_pool_total,onChange:e=>s({...a,gem_pool_total:Number(e.target.value)}),className:"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:i})]})]})]}),!n.is_proof_drop&&!n.is_paid_drop&&sn.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[sn.jsx("h3",{className:"text-lg font-semibold text-orange-900 mb-4",children:"Move Drop Settings"}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-orange-700 mb-2",children:"Points Cost"}),sn.jsx("input",{type:"number",min:"1",value:a.move_cost_points,onChange:e=>s({...a,move_cost_points:Number(e.target.value)}),className:"w-full px-4 py-2 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:i})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-orange-700 mb-2",children:"Keys Reward"}),sn.jsx("input",{type:"number",min:"1",value:a.key_reward_amount,onChange:e=>s({...a,key_reward_amount:Number(e.target.value)}),className:"w-full px-4 py-2 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:i})]})]})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min. Followers Required"}),sn.jsx("input",{type:"number",min:"0",value:a.follower_threshold,onChange:e=>s({...a,follower_threshold:Number(e.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"0",disabled:i})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Participants"}),sn.jsx("input",{type:"number",min:"1",value:a.max_participants||"",onChange:e=>s({...a,max_participants:e.target.value?Number(e.target.value):void 0}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"Unlimited",disabled:i})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Commitment"}),sn.jsx("input",{type:"text",value:a.time_commitment,onChange:e=>s({...a,time_commitment:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"e.g., 2-3 hours",disabled:i})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deadline"}),sn.jsx("input",{type:"date",value:a.deadline_at,onChange:e=>s({...a,deadline_at:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",disabled:i})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Platform"}),sn.jsx("input",{type:"text",value:a.platform,onChange:e=>s({...a,platform:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"e.g., Instagram, TikTok",disabled:i})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content URL"}),sn.jsx("input",{type:"url",value:a.content_url,onChange:e=>s({...a,content_url:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"https://...",disabled:i})]})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requirements"}),sn.jsx("textarea",{value:a.requirements,onChange:e=>s({...a,requirements:e.target.value}),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"What are the requirements to participate?",disabled:i})]}),sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deliverables"}),sn.jsx("textarea",{value:a.deliverables,onChange:e=>s({...a,deliverables:e.target.value}),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"What should participants deliver?",disabled:i})]})]}),sn.jsxs("div",{className:"flex space-x-4 pt-6 border-t border-gray-200",children:[sn.jsx("button",{type:"button",onClick:t,disabled:i,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),sn.jsx("button",{type:"submit",disabled:i,className:"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 disabled:opacity-50 flex items-center justify-center space-x-2",children:i?sn.jsxs(sn.Fragment,{children:[sn.jsx(ar,{className:"w-4 h-4 animate-spin"}),sn.jsx("span",{children:"Updating..."})]}):sn.jsxs(sn.Fragment,{children:[sn.jsx(Or,{className:"w-4 h-4"}),sn.jsx("span",{children:"Update Drop"})]})})]})]})]})})}function CB(){const{id:e,taskId:t,dropId:r}=Ne(),n=r??t??e??null,a=we(),[s,i]=u.useState(null),[o,l]=u.useState(null),[c,d]=u.useState(null),[h,m]=u.useState(null),[p,x]=u.useState(!0),[f,g]=u.useState(!1),[y,b]=u.useState(""),[v,j]=u.useState(!1),[w,N]=u.useState(!1),[_,k]=u.useState(!1),[S,C]=u.useState(!1),O=s?.title?.toLowerCase().includes("[demo]")||s?.title?.toLowerCase().includes("demo")||s?.description?.toLowerCase().includes("demo");u.useEffect(()=>{n?(E(),A(),P(),T()):x(!1)},[n]),u.useEffect(()=>{if(s&&c){const e=s.creator_id===c.id;j(e)}},[s,c]);const E=async()=>{if(!n)return x(!1),void a("/not-found",{state:{title:"Invalid Drop ID",message:"No drop ID was provided in the URL. Please check the link and try again."}});if(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n)||!isNaN(parseInt(n,10)))try{const e=await pn(`/drops/${n}`);if(!e||!e.id)throw new Error("Invalid drop data format");i(e)}catch(e){a("/error",{state:{title:"Error Loading Drop",message:"Unable to load the drop. Please try again later."}})}finally{x(!1)}else a("/not-found",{state:{title:"Invalid Drop ID",message:"The drop ID in the URL is not in a valid format. Please check the link and try again."}})},P=async()=>{try{const e=await pn("/users/me");d(e)}catch(e){}},T=async()=>{try{const e=await pn("/users/master-key-status");m(e.has_master_key)}catch(e){m({is_activated:!0,proof_drops_completed:3,proof_drops_required:3,last_activated_at:new Date(Date.now()-72e5).toISOString()})}},A=async()=>{try{const e=await pn("/users/drop-applications"),t=String(s?.id??n??""),r=e.find(e=>String(e.drop_id)===t);l(r||null)}catch(e){const t=String(s?.id??n??""),r=(()=>{const e=c?.id??"demo-user";return[{id:1,drop_id:String(s?.id??n??"demo-drop"),user_id:e,status:"approved",application_message:"Looking forward to contributing to this drop! I have prior experience delivering high-quality content on tight deadlines.",submission_url:"https://drive.google.com/demo-submission",gems_earned:120,applied_at:new Date(Date.now()-432e6).toISOString(),completed_at:new Date(Date.now()-1728e5).toISOString(),paid_at:new Date(Date.now()-864e5).toISOString(),submission_notes:"Approved with premium placement.",review_score:4.8,created_at:new Date(Date.now()-432e6).toISOString(),updated_at:new Date(Date.now()-864e5).toISOString()}]})().find(e=>String(e.drop_id)===t);l(r||null)}};return p?sn.jsx("div",{className:"flex items-center justify-center h-64",children:sn.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):s?sn.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[O&&sn.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-xl p-6 shadow-lg",children:[sn.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-2",children:[sn.jsx("span",{className:"text-2xl",children:""}),sn.jsx("h2",{className:"text-xl font-bold",children:"DEMO CONTENT"}),sn.jsx("span",{className:"text-2xl",children:""})]}),sn.jsx("p",{className:"text-center text-orange-100",children:"This is demo content for testing purposes. No real gems will be awarded even if the interface suggests otherwise."})]}),sn.jsxs("div",{className:"flex items-center space-x-4",children:[sn.jsx("button",{onClick:()=>a("/earn"),className:"flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors",children:sn.jsx(it,{className:"w-5 h-5 text-gray-600"})}),sn.jsxs("div",{className:"flex-1",children:[sn.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Drop Details ",O&&sn.jsx("span",{className:"text-orange-600",children:"(Demo)"})]}),sn.jsx("p",{className:"text-gray-600",children:O?"Demo earning opportunity - no real rewards":"Earning opportunity"})]}),v&&sn.jsxs("div",{className:"flex space-x-3",children:[sn.jsxs("button",{onClick:()=>{N(!0)},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[sn.jsx(Ir,{className:"w-4 h-4"}),sn.jsx("span",{children:"Edit"})]}),sn.jsxs("button",{onClick:()=>k(!0),className:"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:[sn.jsx(zr,{className:"w-4 h-4"}),sn.jsx("span",{children:"Delete"})]})]})]}),sn.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[sn.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[sn.jsx("div",{className:"bg-white rounded-xl overflow-hidden border border-gray-200",children:sn.jsxs("div",{className:"relative",children:[sn.jsx("img",{src:(e=>{if(s?.content_url)return s.content_url;switch(e){case"content_clipping":case"engagement":return"https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=800&h=400&fit=crop";case"reviews":return"https://images.unsplash.com/photo-1556155092-490a1ba16284?w=800&h=400&fit=crop";case"ugc_creation":return"https://images.unsplash.com/photo-1558403194-611308249627?w=800&h=400&fit=crop";case"affiliate_referral":return"https://images.unsplash.com/photo-1516251193007-45ef944ab0c6?w=800&h=400&fit=crop";case"surveys":return"https://images.unsplash.com/photo-1432888622747-4eb9a8efeb07?w=800&h=400&fit=crop";default:return"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=800&h=400&fit=crop"}})(s.drop_type),alt:s.title,className:"w-full h-64 object-cover"}),sn.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30"}),sn.jsx("div",{className:"absolute top-4 right-4",children:sn.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${(e=>{switch(e){case"easy":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"hard":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}})(s.difficulty)}`,children:s.difficulty})}),sn.jsx("div",{className:"absolute top-4 left-4",children:s.is_proof_drop?sn.jsx("div",{className:"bg-green-500/90 backdrop-blur-sm px-2 py-1 rounded-full",children:sn.jsx("span",{className:"text-white text-sm font-medium",children:"Proof Drop"})}):s.is_paid_drop?sn.jsx("div",{className:"bg-purple-500/90 backdrop-blur-sm px-2 py-1 rounded-full",children:sn.jsx("span",{className:"text-white text-sm font-medium",children:"Paid Drop"})}):sn.jsx("div",{className:"bg-orange-500/90 backdrop-blur-sm px-2 py-1 rounded-full",children:sn.jsx("span",{className:"text-white text-sm font-medium",children:"Move Drop"})})}),sn.jsxs("div",{className:"absolute bottom-4 left-4",children:[sn.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[sn.jsx("span",{className:"text-3xl",children:(e=>{switch(e){case"content_clipping":return"";case"reviews":return"";case"ugc_creation":return"";case"affiliate_referral":return"";case"surveys":return"";case"challenges_events":return"";default:return""}})(s.drop_type)}),sn.jsx("span",{className:"text-white bg-black bg-opacity-30 px-3 py-1 rounded-full text-sm font-medium",children:((e,t="General")=>(e&&e.trim().length>0?e:t).replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()))(s.drop_type)})]}),sn.jsx("h1",{className:"text-3xl font-bold text-white drop-shadow-lg mb-1",children:s.title}),sn.jsxs("div",{className:"flex items-center space-x-4",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(It,{className:"w-6 h-6 text-purple-300 drop-shadow"}),sn.jsx("p",{className:"text-2xl font-bold text-white drop-shadow-lg",children:s.gem_reward_base})]}),sn.jsx("p",{className:"text-white/80 drop-shadow",children:"Gems reward"})]})]})]})}),sn.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[sn.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Description"}),sn.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.description})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.requirements&&sn.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[sn.jsx(St,{className:"w-5 h-5 text-green-600"}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Requirements"})]}),sn.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.requirements})]}),s.deliverables&&sn.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[sn.jsx(Lr,{className:"w-5 h-5 text-blue-600"}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Deliverables"})]}),sn.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.deliverables})]})]}),c&&h&&sn.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[sn.jsx(Mr,{className:"w-5 h-5 text-purple-600"}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Master Key Status"})]}),sn.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 mb-4",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-2",children:[sn.jsx("span",{className:"text-sm text-purple-700",children:"Today's Master Key"}),sn.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(h.is_activated?"text-green-600 bg-green-100":"text-orange-600 bg-orange-100"),children:h.is_activated?"Activated":"Not Activated"})]}),sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("span",{className:"text-sm text-purple-700",children:"Proof Drops Completed"}),sn.jsxs("span",{className:"text-sm font-medium text-purple-900",children:[h.proof_drops_completed,"/",h.proof_drops_required]})]})]}),!h.is_activated&&sn.jsxs("p",{className:"text-sm text-purple-700",children:["Complete ",h.proof_drops_required-h.proof_drops_completed," more proof drops to activate your Master Key and unlock the ability to use Keys for drops."]})]}),c&&sn.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[sn.jsx(Qr,{className:"w-5 h-5 text-blue-600"}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Balance"})]}),sn.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[sn.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[sn.jsx(Xt,{className:"w-4 h-4 text-orange-600"}),sn.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Keys"})]}),sn.jsx("p",{className:"text-xl font-bold text-gray-900",children:c.keys_balance})]}),sn.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[sn.jsx(It,{className:"w-4 h-4 text-purple-600"}),sn.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Gems"})]}),sn.jsx("p",{className:"text-xl font-bold text-gray-900",children:c.gems_balance})]})]}),c.keys_balance<s.key_cost&&sn.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:sn.jsxs("p",{className:"text-sm text-red-700",children:["You need ",s.key_cost-c.keys_balance," more keys to apply for this drop."]})})]}),o?sn.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[sn.jsx(Bt,{className:"w-5 h-5 text-blue-600"}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Application"})]}),sn.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-2",children:[sn.jsx("span",{className:"text-sm text-gray-600",children:"Status"}),sn.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(e=>{switch(e){case"pending":return"text-yellow-600 bg-yellow-100";case"approved":return"text-blue-600 bg-blue-100";case"rejected":return"text-red-600 bg-red-100";case"completed":return"text-green-600 bg-green-100";case"paid":return"text-purple-600 bg-purple-100";default:return"text-gray-600 bg-gray-100"}})(o.status)}`,children:o.status})]}),sn.jsxs("div",{className:"flex items-center justify-between mb-2",children:[sn.jsx("span",{className:"text-sm text-gray-600",children:"Applied"}),sn.jsx("span",{className:"text-sm text-gray-900",children:new Date(o.applied_at).toLocaleDateString()})]}),sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("span",{className:"text-sm text-gray-600",children:"Keys Used"}),sn.jsx("span",{className:"text-sm text-gray-900",children:s.key_cost})]})]}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Your Message"}),sn.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:o.application_message})]}),o.gems_earned>0&&sn.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(It,{className:"w-4 h-4 text-green-600"}),sn.jsxs("span",{className:"text-sm font-medium text-green-700",children:["Earned ",o.gems_earned," gems!"]})]})})]}):sn.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[sn.jsx(Vr,{className:"w-5 h-5 text-orange-600"}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Apply for this Drop"})]}),c&&(c.keys_balance<s.key_cost||!h?.is_activated)&&sn.jsxs("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[sn.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"Requirements not met:"}),sn.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[c.keys_balance<s.key_cost&&sn.jsxs("li",{children:[" Need ",s.key_cost-c.keys_balance," more keys"]}),!h?.is_activated&&sn.jsx("li",{children:" Master Key must be activated for today"})]})]}),sn.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),s&&y.trim()){g(!0);try{await xn(`/drops/${s?.id??n}/apply`,{application_message:y}),await Promise.all([A(),P(),T()]),b("")}catch(t){alert("Failed to apply to drop")}finally{g(!1)}}},className:"space-y-4",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Why are you the right person for this drop?"}),sn.jsx("textarea",{value:y,onChange:e=>b(e.target.value),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Tell us about your relevant experience and why you'd be perfect for this drop...",required:!0})]}),sn.jsx("button",{type:"submit",disabled:f||!y.trim()||!c||c.keys_balance<s.key_cost||!h?.is_activated,className:"w-full px-6 py-3 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-white "+(O?"bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600":"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600"),children:f?"Submitting...":`${O?"Demo Apply":"Apply Now"} (${s.key_cost} keys)`})]})]})]}),sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Drop Information"}),sn.jsxs("div",{className:"space-y-4",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Xt,{className:"w-4 h-4 text-orange-600"}),sn.jsx("span",{className:"text-gray-600",children:"Key Cost"})]}),sn.jsx("span",{className:"font-bold text-orange-600",children:s.key_cost})]}),sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(It,{className:"w-4 h-4 text-purple-600"}),sn.jsx("span",{className:"text-gray-600",children:"Gem Reward"})]}),sn.jsx("span",{className:"font-bold text-purple-600",children:s.gem_reward_base})]}),s.gem_pool_total>0&&sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Qr,{className:"w-4 h-4 text-blue-600"}),sn.jsx("span",{className:"text-gray-600",children:"Pool Remaining"})]}),sn.jsx("span",{className:"font-semibold text-gray-900",children:s.gem_pool_remaining})]}),sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Hr,{className:"w-4 h-4 text-blue-600"}),sn.jsx("span",{className:"text-gray-600",children:"Participants"})]}),sn.jsxs("span",{className:"font-semibold text-gray-900",children:[s.current_participants,"/",s.max_participants||""]})]}),s.follower_threshold>0&&sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Rr,{className:"w-4 h-4 text-yellow-600"}),sn.jsx("span",{className:"text-gray-600",children:"Min. Followers"})]}),sn.jsxs("span",{className:"font-semibold text-gray-900",children:[s.follower_threshold,"+"]})]}),s.time_commitment&&sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Pt,{className:"w-4 h-4 text-purple-600"}),sn.jsx("span",{className:"text-gray-600",children:"Time"})]}),sn.jsx("span",{className:"font-semibold text-gray-900",children:s.time_commitment})]}),s.deadline_at&&sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(xt,{className:"w-4 h-4 text-red-600"}),sn.jsx("span",{className:"text-gray-600",children:"Deadline"})]}),sn.jsx("span",{className:"font-semibold text-gray-900",children:new Date(s.deadline_at).toLocaleDateString()})]})]})]}),sn.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Posted By"}),sn.jsx(vn,{username:s.creator_name,displayName:s.creator_name||"Drop Creator",avatarUrl:s.creator_avatar,className:"flex items-center space-x-3",size:"lg"}),sn.jsx("div",{className:"mt-2",children:sn.jsx("p",{className:"text-sm text-gray-600",children:"Verified creator"})}),sn.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:sn.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[sn.jsxs("div",{children:[sn.jsx("p",{className:"text-lg font-bold text-gray-900",children:"12"}),sn.jsx("p",{className:"text-xs text-gray-600",children:"Drops Posted"})]}),sn.jsxs("div",{children:[sn.jsx("p",{className:"text-lg font-bold text-gray-900",children:"4.8"}),sn.jsx("p",{className:"text-xs text-gray-600",children:"Avg Rating"})]})]})})]}),sn.jsxs("div",{className:"bg-blue-50 rounded-xl p-6 border border-blue-100",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[sn.jsx(kt,{className:"w-5 h-5 text-blue-600"}),sn.jsx("h3",{className:"font-semibold text-blue-900",children:"Pro Tips"})]}),sn.jsxs("ul",{className:"text-sm text-blue-800 space-y-2",children:[sn.jsx("li",{children:" Ensure you have enough keys before applying"}),sn.jsx("li",{children:" Activate your Master Key daily"}),sn.jsx("li",{children:" Read all requirements carefully"}),sn.jsx("li",{children:" Submit high-quality work on time"}),sn.jsx("li",{children:" Communicate with the drop creator"})]})]})]})]}),s&&w&&sn.jsx(SB,{isOpen:w,onClose:()=>N(!1),onSuccess:e=>{i(e),N(!1)},drop:s}),sn.jsx(Hd,{isOpen:_,onClose:()=>k(!1),onConfirm:async()=>{C(!0);try{await fn(`/drops/${s.id}`),a("/earn")}catch(e){alert("Failed to delete drop")}finally{C(!1),k(!1)}},title:"Delete Drop",message:"Are you sure you want to delete this drop? This action cannot be undone and will remove all applications.",confirmText:"Delete",cancelText:"Cancel",type:"danger",loading:S})]}):sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Drop not found"}),sn.jsx("button",{onClick:()=>a("/earn"),className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Browse Drops"})]})}const OB=u.createContext(null);function EB({value:e,defaultValue:t,onValueChange:r,children:n,className:a}){const[s,i]=u.useState(t),o=e??s,l=u.useCallback(e=>{i(e),r?.(e)},[r]),c=u.useMemo(()=>({value:o,onSelect:l}),[o,l]);return sn.jsx(OB.Provider,{value:c,children:sn.jsx("div",{className:a,children:n})})}function PB({children:e,className:t}){return sn.jsx("div",{role:"tablist",className:t,children:e})}function TB({value:e,children:t,className:r}){const n=u.useContext(OB);if(!n)throw new Error("TabsTrigger must be used within Tabs");const a=n.value===e;return sn.jsx("button",{type:"button",role:"tab","data-state":a?"active":"inactive","aria-selected":a,className:Rl("inline-flex items-center border-b-2 border-transparent px-3 py-2 text-sm font-medium transition",a?"border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700",r),onClick:()=>n.onSelect(e),children:t})}function AB({value:e,children:t,className:r}){const n=u.useContext(OB);if(!n)throw new Error("TabsContent must be used within Tabs");const a=n.value===e;return sn.jsx("div",{role:"tabpanel","data-state":a?"active":"inactive",className:Rl(a?"block":"hidden",r),children:a?t:null})}function MB({isOpen:e,onClose:t,onSave:r,currentBrandData:n={},loading:a=!1}){const[s,i]=u.useState({brand_name:n.brand_name||"",brand_description:n.brand_description||"",brand_website:n.brand_website||"",brand_email:n.brand_email||"",brand_phone:n.brand_phone||""}),[o,l]=u.useState(null),[c,d]=u.useState(n.brand_logo_url||""),[h,m]=u.useState(!1),p=u.useRef(null),x=(e,t)=>{i(r=>({...r,[e]:t}))};return e?sn.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:sn.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[sn.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center",children:sn.jsx(ht,{className:"w-5 h-5 text-white"})}),sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Brand Profile"}),sn.jsx("p",{className:"text-sm text-gray-600",children:"Set up your brand representation"})]})]}),sn.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:sn.jsx(Jr,{className:"w-6 h-6"})})]}),sn.jsxs("div",{className:"p-6 space-y-6",children:[sn.jsxs("div",{children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:"Brand Logo"}),sn.jsxs("div",{className:"flex items-center space-x-4",children:[sn.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-xl flex items-center justify-center overflow-hidden border-2 border-dashed border-gray-300",children:c?sn.jsx("img",{src:c,alt:"Brand logo",className:"w-full h-full object-cover"}):sn.jsx(ft,{className:"w-8 h-8 text-gray-400"})}),sn.jsxs("div",{className:"flex-1",children:[sn.jsxs("button",{type:"button",onClick:()=>p.current?.click(),disabled:h,className:"bg-gray-100 hover:bg-gray-200 disabled:opacity-50 text-gray-700 px-4 py-2 rounded-lg font-medium transition-colors flex items-center space-x-2",children:[sn.jsx(Kr,{className:"w-4 h-4"}),sn.jsx("span",{children:h?"Uploading...":"Upload Logo"})]}),sn.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG up to 5MB. Square format recommended."})]})]}),sn.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:e=>{const t=e.target.files?.[0];if(t){if(!t.type.startsWith("image/"))return void alert("Please select an image file");if(t.size>5242880)return void alert("Please select an image smaller than 5MB");l(t);const e=new FileReader;e.onload=e=>{d(e.target?.result)},e.readAsDataURL(t)}},className:"hidden"})]}),sn.jsxs("div",{children:[sn.jsx("label",{htmlFor:"brand_name",className:"block text-sm font-medium text-gray-900 mb-2",children:"Brand Name *"}),sn.jsxs("div",{className:"relative",children:[sn.jsx(ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),sn.jsx("input",{id:"brand_name",type:"text",value:s.brand_name,onChange:e=>x("brand_name",e.target.value),placeholder:"Enter your brand name",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),sn.jsxs("div",{children:[sn.jsx("label",{htmlFor:"brand_description",className:"block text-sm font-medium text-gray-900 mb-2",children:"Brand Description"}),sn.jsxs("div",{className:"relative",children:[sn.jsx(Bt,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),sn.jsx("textarea",{id:"brand_description",value:s.brand_description,onChange:e=>x("brand_description",e.target.value),placeholder:"Describe your brand, mission, and values",rows:3,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]})]}),sn.jsxs("div",{children:[sn.jsx("label",{htmlFor:"brand_website",className:"block text-sm font-medium text-gray-900 mb-2",children:"Website"}),sn.jsxs("div",{className:"relative",children:[sn.jsx(Ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),sn.jsx("input",{id:"brand_website",type:"url",value:s.brand_website,onChange:e=>x("brand_website",e.target.value),placeholder:"https://yourbrand.com",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[sn.jsxs("div",{children:[sn.jsx("label",{htmlFor:"brand_email",className:"block text-sm font-medium text-gray-900 mb-2",children:"Brand Email"}),sn.jsxs("div",{className:"relative",children:[sn.jsx(lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),sn.jsx("input",{id:"brand_email",type:"email",value:s.brand_email,onChange:e=>x("brand_email",e.target.value),placeholder:"contact@yourbrand.com",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),sn.jsxs("div",{children:[sn.jsx("label",{htmlFor:"brand_phone",className:"block text-sm font-medium text-gray-900 mb-2",children:"Phone Number"}),sn.jsxs("div",{className:"relative",children:[sn.jsx(vr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),sn.jsx("input",{id:"brand_phone",type:"tel",value:s.brand_phone,onChange:e=>x("brand_phone",e.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),s.brand_name&&sn.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[sn.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Preview"}),sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center overflow-hidden border border-gray-200",children:c?sn.jsx("img",{src:c,alt:"Brand logo",className:"w-full h-full object-cover"}):sn.jsx(ht,{className:"w-6 h-6 text-gray-400"})}),sn.jsxs("div",{children:[sn.jsx("div",{className:"font-medium text-gray-900",children:s.brand_name}),s.brand_description&&sn.jsx("div",{className:"text-sm text-gray-600 line-clamp-1",children:s.brand_description})]})]})]})]}),sn.jsxs("div",{className:"flex items-center justify-end space-x-4 p-6 border-t border-gray-200",children:[sn.jsx("button",{onClick:t,className:"px-6 py-2 text-gray-700 hover:text-gray-900 font-medium transition-colors",children:"Cancel"}),sn.jsx("button",{onClick:async()=>{if(!s.brand_name.trim())return void alert("Brand name is required");let e=c;if(o&&(e=await(async()=>{if(!o)return c||"";m(!0);try{const e=new FormData;e.append("image",o);const t=await fetch("/api/upload/image",{method:"POST",credentials:"include",body:e});return t.ok&&(await t.json()).url||""}catch(e){return""}finally{m(!1)}})(),!e.trim()))return void alert("Failed to upload logo. Please try again.");const t={...s,brand_logo_url:e||""};r(t)},disabled:a||h||!s.brand_name.trim(),className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-2 rounded-xl font-medium transition-all duration-200 flex items-center space-x-2",children:a?sn.jsxs(sn.Fragment,{children:[sn.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),sn.jsx("span",{children:"Saving..."})]}):sn.jsxs(sn.Fragment,{children:[sn.jsx(jt,{className:"w-4 h-4"}),sn.jsx("span",{children:"Save Brand Profile"})]})})]})]})}):null}function DB({showHeader:e=!0,basePath:t="/campaigns"}){const[r,n]=u.useState([]),[a,s]=u.useState(!0),[i,o]=u.useState("");u.useEffect(()=>{(async()=>{try{s(!0);n([{id:"1",name:"Summer Collection Launch",status:"active",startDate:"2025-06-01",endDate:"2025-08-31",budget:5e3,spent:1250,impressions:125e3,clicks:2500,ctr:2,cpc:.5,drops:12,participants:2450},{id:"2",name:"Back to School",status:"draft",startDate:"2025-08-15",endDate:"2025-09-15",budget:3e3,spent:0,impressions:0,clicks:0,ctr:0,cpc:0,drops:0,participants:0}])}catch(e){o("Failed to load campaigns. Please try again later.")}finally{s(!1)}})()},[]);const l=e=>{const t="px-2 py-1 rounded-full text-xs font-medium";switch(e){case"active":return`${t} bg-green-100 text-green-700`;case"paused":return`${t} bg-yellow-100 text-yellow-700`;case"completed":return`${t} bg-gray-100 text-gray-700`;default:return`${t} bg-blue-100 text-blue-700`}},c=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),d=e=>new Intl.NumberFormat("en-US").format(e);if(a)return sn.jsx("div",{className:"flex items-center justify-center h-64",children:sn.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})});if(i)return sn.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:sn.jsxs("div",{className:"flex",children:[sn.jsx("div",{className:"flex-shrink-0",children:sn.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:sn.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),sn.jsx("div",{className:"ml-3",children:sn.jsx("p",{className:"text-sm text-red-700",children:i})})]})});const h=`${t}/new`;return sn.jsxs("div",{className:"space-y-6",children:[e&&sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Campaigns"}),sn.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Create and manage your marketing campaigns"})]}),sn.jsx(Il,{asChild:!0,children:sn.jsxs(Ve,{to:h,className:"flex items-center space-x-2",children:[sn.jsx(Nr,{className:"h-4 w-4"}),sn.jsx("span",{children:"New Campaign"})]})})]}),sn.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:0===r.length?sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx(bt,{className:"mx-auto h-12 w-12 text-gray-400"}),sn.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No campaigns"}),sn.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new campaign."}),sn.jsx("div",{className:"mt-6",children:sn.jsx(Il,{asChild:!0,children:sn.jsxs(Ve,{to:h,className:"inline-flex items-center",children:[sn.jsx(Nr,{className:"-ml-1 mr-2 h-5 w-5"}),"New Campaign"]})})})]}):sn.jsx("ul",{className:"divide-y divide-gray-200",children:r.map(e=>sn.jsx("li",{className:"hover:bg-gray-50",children:sn.jsx(Ve,{to:`${t}/${e.id}`,className:"block",children:sn.jsxs("div",{className:"px-4 py-4 sm:px-6",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center",children:[sn.jsx("p",{className:"text-lg font-medium text-indigo-600 truncate",children:e.name}),sn.jsx("div",{className:"ml-2",children:sn.jsx("span",{className:l(e.status),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})})]}),sn.jsx("div",{className:"ml-2 flex-shrink-0 flex",children:sn.jsxs("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:[c(e.spent)," of ",c(e.budget)]})})]}),sn.jsxs("div",{className:"mt-2 sm:flex sm:justify-between",children:[sn.jsx("div",{className:"sm:flex",children:sn.jsxs("p",{className:"flex items-center text-sm text-gray-500",children:[sn.jsx(xt,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),new Date(e.startDate).toLocaleDateString(),e.endDate&&sn.jsxs(sn.Fragment,{children:[sn.jsx("span",{className:"mx-1",children:"-"}),new Date(e.endDate).toLocaleDateString()]})]})}),sn.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0",children:[sn.jsx(Hr,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),sn.jsxs("p",{children:[d(e.participants)," participants"]}),sn.jsx("span",{className:"mx-1",children:""}),sn.jsx(Rt,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),sn.jsxs("p",{children:["CPC: ",c(e.cpc)]})]})]}),"draft"!==e.status&&sn.jsxs("div",{className:"mt-2",children:[sn.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[sn.jsxs("div",{className:"flex items-center",children:[sn.jsx(Lr,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),sn.jsxs("span",{children:[d(e.impressions)," impressions"]})]}),sn.jsxs("span",{className:"text-sm font-medium",children:[e.ctr.toFixed(1),"% CTR"]})]}),sn.jsx("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-2",children:sn.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(100,e.spent/e.budget*100)}%`}})})]})]})})},e.id))})})]})}let IB=null,RB=0,$B=null,LB=0;const FB=()=>{IB=null,RB=0},zB=()=>{$B=null,LB=0},UB=async e=>{try{return await e.json()}catch(t){return null}},BB={async getPlans(e=!1){if(!e&&IB&&Date.now()<RB)return IB;try{const e=await kl("/advertisers/subscription/plans"),t=await UB(e);if(!e.ok){const r=t?.message||`Failed to load plans (${e.status})`;throw new Error(r)}if(!t||"success"!==t.status)throw new Error(t?.message||"Failed to load plans");const r=(e=>({plans:Array.isArray(e?.plans)?e.plans:[],currentTier:e?.current_tier||e?.currentTier||"free"}))(t.data);return IB=r,RB=Date.now()+6e4,r}catch(t){return FB(),{plans:[],currentTier:"free"}}},async upgrade(e){try{const t=await kl("/advertisers/subscription/upgrade",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:e})}),r=await UB(t);if(!t.ok){const e=r?.message||`HTTP ${t.status}`;throw new Error(e)}if(!r||"success"!==r.status)throw new Error(r?.message||"Failed to upgrade plan");return FB(),{...r.data,message:r.message}}catch(t){throw t}},async listCoupons(e=!1){if(!e&&$B&&Date.now()<LB)return $B;try{const e=await kl("/advertisers/coupons"),t=await UB(e);if(!e.ok){const r=t?.message||`Failed to load coupons (${e.status})`;throw new Error(r)}if(!t||"success"!==t.status)throw new Error(t?.message||"Failed to load coupons");const r=(e=>({coupons:Array.isArray(e?.coupons)?e.coupons.map(e=>({...e,assignments:Array.isArray(e.assignments)?e.assignments:[]})):[],redemptions:Array.isArray(e?.redemptions)?e.redemptions:[]}))(t.data);return $B=r,LB=Date.now()+3e4,r}catch(t){return zB(),{coupons:[],redemptions:[]}}},async createCoupon(e){try{const t=await kl("/advertisers/coupons",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await UB(t);if(!t.ok){throw new Error(r?.message||"Failed to create coupon")}if(!r||"success"!==r.status)throw new Error(r?.message||"Failed to create coupon");return zB(),r.data.coupon}catch(t){throw t}},async assignCoupon(e,t){try{const r=await kl(`/advertisers/coupons/${e}/assign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await UB(r);if(!r.ok){throw new Error(n?.message||"Failed to assign coupon")}if(!n||"success"!==n.status)throw new Error(n?.message||"Failed to assign coupon");return zB(),n.data.assignment}catch(r){throw r}},async redeemCoupon(e,t){try{const r=await kl(`/advertisers/coupons/${e}/redeem`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await UB(r);if(!r.ok){throw new Error(n?.message||"Failed to redeem coupon")}if(!n||"success"!==n.status)throw new Error(n?.message||"Failed to redeem coupon");return zB(),n.data}catch(r){throw r}}},qB={free:sn.jsx(Qr,{className:"w-5 h-5 text-orange-500"}),premium:sn.jsx(Dr,{className:"w-5 h-5 text-purple-500"}),super:sn.jsx(Dt,{className:"w-5 h-5 text-yellow-500"})};function WB({isOpen:e,onClose:t,plans:r,currentTier:n,onSelect:a,isSubmitting:s}){const i=u.useMemo(()=>r.slice().sort((e,t)=>e.price-t.price),[r]);return e?sn.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4",children:sn.jsxs("div",{className:"w-full max-w-3xl rounded-2xl bg-white shadow-xl",children:[sn.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 px-6 py-4",children:[sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upgrade Advertiser Plan"}),sn.jsx("p",{className:"text-sm text-gray-500",children:"Choose a plan to unlock more drops, advanced analytics, and exclusive incentive tools."})]}),sn.jsx("button",{onClick:t,className:"rounded-full px-3 py-1 text-sm text-gray-500 hover:bg-gray-100",children:"Close"})]}),sn.jsx("div",{className:"grid gap-4 px-6 py-6 md:grid-cols-3",children:i.map(e=>{const t=e.id===n;return sn.jsxs("div",{className:"flex flex-col rounded-xl border p-5 shadow-sm transition-all "+(t?"border-blue-500 bg-blue-50/60 shadow-blue-100":"border-gray-200 hover:border-blue-400 hover:shadow-md"),children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[qB[e.id]??sn.jsx(Qr,{className:"w-5 h-5 text-orange-500"}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 capitalize",children:e.name})]}),t&&sn.jsxs("span",{className:"inline-flex items-center space-x-1 rounded-full bg-blue-100 px-2 py-1 text-xs font-medium text-blue-700",children:[sn.jsx(jt,{className:"h-3 w-3"}),sn.jsx("span",{children:"Current"})]})]}),sn.jsxs("div",{className:"mt-4",children:[sn.jsx("div",{className:"text-3xl font-bold text-gray-900",children:0===e.price?"Free":`$${e.price}`}),e.price>0&&sn.jsxs("span",{className:"text-sm text-gray-500",children:["/ ",e.billingInterval]})]}),sn.jsx("ul",{className:"mt-4 space-y-2 text-sm text-gray-600",children:e.features.map(e=>sn.jsxs("li",{className:"flex items-start space-x-2",children:[sn.jsx(jt,{className:"mt-0.5 h-4 w-4 flex-shrink-0 text-green-500"}),sn.jsx("span",{children:e})]},e))}),sn.jsx("button",{onClick:()=>a(e.id),disabled:t||s,className:"mt-6 w-full rounded-lg px-4 py-2 text-sm font-medium transition-colors "+(t?"cursor-default bg-gray-100 text-gray-500":"bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:from-blue-600 hover:to-purple-600 disabled:opacity-60"),children:t?"Selected Plan":`Choose ${e.name}`})]},e.id)})})]})}):null}const KB=()=>{const e=new Date,t=new Date(e.getTime()+2592e6);return{title:"",description:"",reward_type:"coupon",value:10,value_unit:"percentage",quantity_total:10,start_date:e.toISOString().split("T")[0],end_date:t.toISOString().split("T")[0]}};function VB({coupons:e,redemptions:t,drops:r=[],onRefresh:n}){const[a,s]=u.useState(!1),[i,o]=u.useState(KB),[l,c]=u.useState(!1),[d,h]=u.useState(null),[m,p]=u.useState(""),[x,f]=u.useState("top-10"),[g,y]=u.useState(null),b=u.useMemo(()=>e.reduce((e,t)=>e+(t.quantity_total-t.quantity_remaining),0),[e]),v=[{id:"top-5",label:"Top 5 Overall"},{id:"top-10",label:"Top 10 Overall"},{id:"top-25",label:"Top 25 Overall"},{id:"growth-leaders",label:"Growth Leaders (Weekly)"}],j=()=>{o(KB()),p(""),f("top-10")};return sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Giveaways & Coupons"}),sn.jsx("p",{className:"text-sm text-gray-500",children:"Incentivize creators by attaching rewards to drops or leaderboard milestones."})]}),sn.jsxs("button",{onClick:()=>{j(),s(!0)},className:"inline-flex items-center space-x-2 rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-2 text-sm font-medium text-white shadow-sm transition-all hover:from-purple-600 hover:to-pink-600",children:[sn.jsx(Nr,{className:"h-4 w-4"}),sn.jsx("span",{children:"Create Incentive"})]})]}),sn.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[sn.jsx("div",{className:"rounded-xl border border-gray-200 p-4",children:sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(Fr,{className:"h-8 w-8 text-purple-500"}),sn.jsxs("div",{children:[sn.jsx("p",{className:"text-sm text-gray-500",children:"Active Incentives"}),sn.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.length})]})]})}),sn.jsx("div",{className:"rounded-xl border border-gray-200 p-4",children:sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(Vt,{className:"h-8 w-8 text-orange-500"}),sn.jsxs("div",{children:[sn.jsx("p",{className:"text-sm text-gray-500",children:"Rewards Distributed"}),sn.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:b})]})]})}),sn.jsx("div",{className:"rounded-xl border border-gray-200 p-4",children:sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(Hr,{className:"h-8 w-8 text-emerald-500"}),sn.jsxs("div",{children:[sn.jsx("p",{className:"text-sm text-gray-500",children:"Recent Redemptions"}),sn.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:t.length})]})]})})]}),a&&sn.jsxs("form",{onSubmit:async e=>{e.preventDefault(),c(!0);try{await BB.createCoupon({...i,quantity_total:Number(i.quantity_total),value:Number(i.value)}),j(),s(!1),n()}catch(t){alert("Failed to create coupon. Please try again.")}finally{c(!1)}},className:"rounded-2xl border border-dashed border-purple-200 bg-purple-50/50 p-6",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create New Incentive"}),sn.jsx("button",{type:"button",onClick:()=>s(!1),className:"rounded-full px-3 py-1 text-sm text-gray-500 hover:bg-gray-100",children:"Cancel"})]}),sn.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[sn.jsxs("div",{className:"space-y-2",children:[sn.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Title"}),sn.jsx("input",{required:!0,value:i.title,onChange:e=>o(t=>({...t,title:e.target.value})),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200",placeholder:"e.g. 25% Off Premium Upgrade"})]}),sn.jsxs("div",{className:"space-y-2",children:[sn.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Reward Type"}),sn.jsxs("select",{value:i.reward_type,onChange:e=>o(t=>({...t,reward_type:e.target.value})),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200",children:[sn.jsx("option",{value:"coupon",children:"Coupon (percentage/flat discount)"}),sn.jsx("option",{value:"giveaway",children:"Giveaway (physical/virtual item)"}),sn.jsx("option",{value:"credit",children:"Credit (gems/keys)"})]})]})]}),sn.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-4",children:[sn.jsxs("div",{className:"space-y-2 md:col-span-2",children:[sn.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Description"}),sn.jsx("textarea",{rows:3,value:i.description,onChange:e=>o(t=>({...t,description:e.target.value})),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200",placeholder:"Let creators know what this incentive offers and how to qualify."})]}),sn.jsxs("div",{className:"space-y-2",children:[sn.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Reward Value"}),sn.jsx("input",{type:"number",min:0,value:i.value,onChange:e=>o(t=>({...t,value:Number(e.target.value)})),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200"})]}),sn.jsxs("div",{className:"space-y-2",children:[sn.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Unit"}),sn.jsxs("select",{value:i.value_unit,onChange:e=>o(t=>({...t,value_unit:e.target.value})),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200",children:[sn.jsx("option",{value:"percentage",children:"%"}),sn.jsx("option",{value:"usd",children:"USD"}),sn.jsx("option",{value:"gems",children:"Gems"}),sn.jsx("option",{value:"keys",children:"Keys"}),sn.jsx("option",{value:"item",children:"Item"})]})]})]}),sn.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-4",children:[sn.jsxs("div",{className:"space-y-2",children:[sn.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Quantity"}),sn.jsx("input",{type:"number",min:1,required:!0,value:i.quantity_total,onChange:e=>o(t=>({...t,quantity_total:Number(e.target.value)})),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200"})]}),sn.jsxs("div",{className:"space-y-2",children:[sn.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Start Date"}),sn.jsx("input",{type:"date",value:i.start_date,onChange:e=>o(t=>({...t,start_date:e.target.value})),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200"})]}),sn.jsxs("div",{className:"space-y-2",children:[sn.jsx("label",{className:"text-sm font-medium text-gray-700",children:"End Date"}),sn.jsx("input",{type:"date",value:i.end_date,onChange:e=>o(t=>({...t,end_date:e.target.value})),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200"})]}),sn.jsxs("div",{className:"space-y-2",children:[sn.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Leaderboard Target"}),sn.jsx("select",{value:x,onChange:e=>f(e.target.value),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200",children:v.map(e=>sn.jsx("option",{value:e.id,children:e.label},e.id))})]})]}),sn.jsxs("button",{type:"submit",disabled:l,className:"mt-6 inline-flex items-center justify-center space-x-2 rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:from-purple-600 hover:to-pink-600 disabled:opacity-60",children:[l?sn.jsx(ar,{className:"h-4 w-4 animate-spin"}):sn.jsx(Vt,{className:"h-4 w-4"}),sn.jsx("span",{children:"Create Incentive"})]})]}),sn.jsx("div",{className:"grid gap-4 lg:grid-cols-2",children:e.map(e=>sn.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white p-5 shadow-sm",children:[sn.jsxs("div",{className:"flex items-start justify-between",children:[sn.jsxs("div",{children:[sn.jsx("span",{className:"inline-flex items-center rounded-full bg-purple-100 px-2 py-1 text-xs font-medium text-purple-600",children:"giveaway"===e.reward_type?"Giveaway":"credit"===e.reward_type?"Credit":"Coupon"}),sn.jsx("h3",{className:"mt-2 text-lg font-semibold text-gray-900",children:e.title}),e.description&&sn.jsx("p",{className:"mt-1 text-sm text-gray-600",children:e.description})]}),sn.jsxs("div",{className:"text-right text-sm text-gray-500",children:[sn.jsxs("p",{children:[e.quantity_remaining," of ",e.quantity_total," remaining"]}),sn.jsxs("p",{className:"mt-1",children:["Valid until ",new Date(e.end_date||"").toLocaleDateString()]})]})]}),sn.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[sn.jsxs("div",{className:"rounded-lg bg-purple-50 p-3 text-sm text-purple-700",children:[sn.jsxs("div",{className:"flex items-center space-x-2 font-medium",children:[sn.jsx(bt,{className:"h-4 w-4"}),sn.jsx("span",{children:"Assignments"})]}),sn.jsx("ul",{className:"mt-2 space-y-1",children:e.assignments.length>0?e.assignments.map(e=>sn.jsxs("li",{className:"flex items-center space-x-2 text-xs text-purple-600",children:[sn.jsx(Ct,{className:"h-3.5 w-3.5"}),sn.jsxs("span",{children:["drop"===e.target_type?"Drop:":"Leaderboard:"," ",e.target_label]})]},e.id)):sn.jsx("li",{className:"text-xs text-purple-500",children:"No assignments yet."})})]}),sn.jsxs("div",{className:"rounded-lg border border-dashed border-gray-200 p-3 text-sm",children:[sn.jsx("p",{className:"font-medium text-gray-700",children:"Quick Assign"}),sn.jsxs("div",{className:"mt-3 space-y-3",children:[sn.jsxs("div",{className:"space-y-2",children:[sn.jsx("label",{className:"text-xs font-medium text-gray-500",children:"Attach to Drop"}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsxs("select",{value:m,onChange:e=>p(e.target.value),className:"flex-1 rounded-lg border border-gray-300 px-2 py-1 text-sm focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200",children:[sn.jsx("option",{value:"",children:"Select drop"}),r.map(e=>sn.jsx("option",{value:String(e.id),children:e.title},e.id))]}),sn.jsx("button",{onClick:()=>(async e=>{if(m){h(e);try{const t=r.find(e=>String(e.id)===m);await BB.assignCoupon(e,{target_type:"drop",target_id:m,target_label:t?.title||m}),p(""),n()}catch(t){alert("Failed to assign coupon to drop.")}finally{h(null)}}else alert("Select a drop first.")})(e.id),disabled:d===e.id,className:"rounded-lg bg-purple-500 px-2 py-1 text-xs font-medium text-white hover:bg-purple-600 disabled:opacity-60",children:d===e.id?"Assigning...":"Attach"})]})]}),sn.jsxs("div",{className:"space-y-2",children:[sn.jsx("label",{className:"text-xs font-medium text-gray-500",children:"Leaderboard Reward"}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("select",{value:x,onChange:e=>f(e.target.value),className:"flex-1 rounded-lg border border-gray-300 px-2 py-1 text-sm focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-200",children:v.map(e=>sn.jsx("option",{value:e.id,children:e.label},e.id))}),sn.jsx("button",{onClick:()=>(async e=>{h(e);try{const t=v.find(e=>e.id===x);await BB.assignCoupon(e,{target_type:"leaderboard",target_id:x,target_label:t?.label||x}),n()}catch(t){alert("Failed to assign coupon to leaderboard.")}finally{h(null)}})(e.id),disabled:d===e.id,className:"rounded-lg bg-blue-500 px-2 py-1 text-xs font-medium text-white hover:bg-blue-600 disabled:opacity-60",children:d===e.id?"Assigning...":"Incentivize"})]})]})]})]})]}),sn.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[sn.jsxs("button",{onClick:()=>(async e=>{const t=prompt("Enter recipient name for redemption (for demo)");if(null!==t){y(e);try{await BB.redeemCoupon(e,{user_name:t}),n()}catch(r){alert("Failed to redeem coupon.")}finally{y(null)}}})(e.id),disabled:g===e.id,className:"inline-flex items-center space-x-1 rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs font-medium text-emerald-700 hover:bg-emerald-100 disabled:opacity-60",children:[sn.jsx(Ct,{className:"h-3.5 w-3.5"}),sn.jsx("span",{children:g===e.id?"Redeeming":"Record Redemption"})]}),"expired"===e.status&&sn.jsxs("span",{className:"inline-flex items-center space-x-1 rounded-full border border-red-200 bg-red-50 px-3 py-1 text-xs font-medium text-red-600",children:[sn.jsx(Et,{className:"h-3.5 w-3.5"}),sn.jsx("span",{children:"Expired"})]})]})]},e.id))}),t.length>0&&sn.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white",children:[sn.jsx("div",{className:"flex items-center justify-between border-b border-gray-100 px-5 py-4",children:sn.jsxs("div",{children:[sn.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Recent Redemptions"}),sn.jsx("p",{className:"text-xs text-gray-500",children:"Track who has redeemed your incentives"})]})}),sn.jsx("div",{className:"divide-y divide-gray-100",children:t.map(e=>sn.jsxs("div",{className:"flex items-center justify-between px-5 py-3 text-sm",children:[sn.jsxs("div",{children:[sn.jsx("p",{className:"font-medium text-gray-900",children:e.user_name}),sn.jsxs("p",{className:"text-xs text-gray-500",children:["Redeemed ",e.reward_value," ","percentage"===e.reward_unit?"%":e.reward_unit.toUpperCase()]})]}),sn.jsx("div",{className:"text-right text-xs text-gray-500",children:sn.jsx("p",{children:new Date(e.redeemed_at).toLocaleString()})})]},e.id))})]})]})}let HB=class extends u.Component{constructor(){super(...arguments),t(this,"state",{hasError:!1}),t(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.reload()}),t(this,"handleGoHome",()=>{window.location.href="/dashboard"})}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){if(this.state.hasError){if(this.props.fallback){const e=this.props.fallback;return"function"==typeof e?e(this.state.error,this.handleReset):e}return sn.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:sn.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[sn.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:sn.jsx(Br,{className:"w-8 h-8 text-red-600"})}),sn.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Oops! Something went wrong"}),sn.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Our team has been notified and is working on a fix."}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsxs("button",{onClick:this.handleReset,className:"w-full bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[sn.jsx(_r,{className:"w-4 h-4"}),sn.jsx("span",{children:"Try Again"})]}),sn.jsxs("button",{onClick:this.handleGoHome,className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[sn.jsx(Yt,{className:"w-4 h-4"}),sn.jsx("span",{children:"Go Home"})]})]}),!1]})})}return this.props.children}};const GB=(e="mock")=>({provider:e,url:`${"undefined"!=typeof window?window.location.origin:cn||"http://localhost:5173"}/payments/mock-checkout?provider=${e}`,status:"mock"}),YB=e=>{switch((e||"").toLowerCase()){case"stripe":return"stripe";case"coinbase":case"coinbase-commerce":return"coinbase";default:return"mock"}},JB={async listProviders(){try{const e=await kl("/api/payments/providers");if(!e.ok)throw new Error(`Failed to load payment providers (${e.status})`);const t=await e.json().catch(()=>null);if(!t||"object"!=typeof t)throw new Error("Invalid providers response");return{providers:Array.isArray(t.data?.providers)?t.data.providers.map(e=>({provider:YB(e?.provider),enabled:Boolean(e?.enabled),ready:Boolean(e?.ready),publishableKey:e?.publishableKey,mode:"live"===e?.mode?"live":"mock"})):[],defaultProvider:YB(t.data?.defaultProvider||ln.defaultProvider)}}catch(e){const t=ln.enabled;return{providers:[{provider:"stripe",enabled:t&&Boolean(ln.stripePublishableKey),ready:t&&Boolean(ln.stripePublishableKey),publishableKey:ln.stripePublishableKey,mode:t&&ln.stripePublishableKey?"live":"mock"},{provider:"coinbase",enabled:t&&Boolean(ln.coinbaseCommerceKey),ready:t&&Boolean(ln.coinbaseCommerceKey),publishableKey:ln.coinbaseCommerceKey,mode:t&&ln.coinbaseCommerceKey?"live":"mock"},{provider:"mock",enabled:!t,ready:!0,mode:"mock"}],defaultProvider:YB(ln.defaultProvider)}}},async startCheckout(e){const t=e.provider||YB(ln.defaultProvider);if(!t||!e.planId)throw new Error("provider and planId required");if(!ln.enabled)return GB(t);try{const r=await kl("/api/payments/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:t,plan_id:e.planId,success_url:e.successUrl,cancel_url:e.cancelUrl,metadata:e.metadata})}),n=await r.json().catch(()=>null);if(!r.ok||!n||"success"!==n.status)throw new Error(n?.message||"Checkout unavailable");const a=n.data||{};if(!a.url)throw new Error("Checkout response missing URL");return{provider:YB(a.provider||t),url:a.url,status:"ready"===a.status?"ready":"mock",expiresAt:a.expiresAt}}catch(r){return GB(t)}}},ZB=()=>sn.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 p-6 text-center text-sm text-red-700",children:"Unable to load incentive tools right now. Please refresh or try again later."});function QB(){const{user:e}=bn(),t=ve(),r=we(),[n,a]=u.useState(null),[s,i]=u.useState(null),[o,l]=u.useState([]),[c,d]=u.useState(!0),[h,m]=u.useState(null),[p,x]=u.useState(!0),[f,g]=u.useState(""),[y,b]=u.useState(!1),[v,j]=u.useState(!1),[w,N]=u.useState("dashboard"),[_,k]=u.useState([]),[S,C]=u.useState("free"),[O,E]=u.useState(!1),[P,T]=u.useState(!1),[A,M]=u.useState(!1),[D,I]=u.useState({coupons:[],redemptions:[]}),[R,$]=u.useState(!1),[L,F]=u.useState([]),[z,U]=u.useState("mock"),[B,q]=u.useState(!1),[W,K]=u.useState(null);u.useEffect(()=>{e&&V()},[e]),u.useEffect(()=>{n&&(H(),G(),Z())},[n]),u.useEffect(()=>{const t=()=>{!document.hidden&&e&&V()};return document.addEventListener("visibilitychange",t),()=>document.removeEventListener("visibilitychange",t)},[e]),u.useEffect(()=>{e&&V()},[t?.pathname,e]),u.useEffect(()=>{const e=e=>{"advertiser_conversion"===e.key&&"true"===e.newValue&&(localStorage.removeItem("advertiser_conversion"),V())};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),u.useEffect(()=>{"#converted"===window.location.hash&&e&&(window.history.replaceState({},"",window.location.pathname),setTimeout(()=>{V()},500))},[e]),u.useEffect(()=>{e&&(Y(),J())},[e]);const V=async()=>{try{const e=await kl("/api/users/me");if(e.ok){const t=await e.json();a(t)}}catch(e){g("Failed to load user data"),x(!1)}},H=async()=>{try{const e=await kl("/api/advertisers/dashboard");if(e.ok){const t=await e.json();i("success"===t?.status?t.data:{drops:[],analytics:[],user_tier:n?.user_tier||"free"})}else i({drops:[],analytics:[],user_tier:n?.user_tier||"free"})}catch(e){i({drops:[],analytics:[],user_tier:n?.user_tier||"free"})}finally{x(!1)}},G=async()=>{try{const e=await kl("/api/advertisers/suggested-content");if(e.ok){const t=await e.json();l("success"===t?.status&&Array.isArray(t.data)?t.data:[])}else l([])}catch(e){l([])}finally{d(!1)}},Y=async()=>{E(!0);try{const e=await BB.getPlans();k(e.plans),C(e.currentTier||"free")}catch(e){}finally{E(!1)}},J=async()=>{if(!ln.enabled)return F([]),void U("mock");q(!0),K(null);try{const e=await JB.listProviders();F(e.providers),U(e.defaultProvider)}catch(e){F([]),K("Unable to reach payment providers right now.")}finally{q(!1)}},Z=async()=>{$(!0);try{const e=await BB.listCoupons();I({coupons:e.coupons||[],redemptions:e.redemptions||[]})}catch(e){I({coupons:[],redemptions:[]})}finally{$(!1)}},Q=Array.from({length:30},(e,t)=>{const r=new Date;return r.setDate(r.getDate()-(29-t)),{date:r.toISOString().split("T")[0],applications:Math.floor(50*Math.random())+10,conversions:Math.floor(20*Math.random())+5,impressions:Math.floor(1e3*Math.random())+200,clicks:Math.floor(100*Math.random())+20,spent:Math.floor(500*Math.random())+100,participants:Math.floor(30*Math.random())+5}}),X=(e=>{switch(e){case"super":return{name:"Super Advertiser",color:"text-yellow-600 bg-yellow-50",inventory:"Weekly: 500 moves, 25 proof drops, 15 paid drops",features:["Premium analytics","Priority support","Custom targeting","Advanced reporting","Create proof & paid drops"]};case"premium":return{name:"Premium Advertiser",color:"text-purple-600 bg-purple-50",inventory:"Weekly: 200 moves, 15 proof drops, 8 paid drops",features:["Advanced analytics","Priority support","Custom targeting","Create proof & paid drops"]};default:return{name:"Free Advertiser",color:"text-gray-600 bg-gray-50",inventory:"Monthly Sample: 50 moves, 5 proof drops",features:["Basic analytics","Standard support","Create proof drops only","Sponsor content with gems"]}}})(s?.user_tier||"free"),ee=s?.drops?s.drops.reduce((e,t)=>({totalDrops:e.totalDrops+1,totalParticipants:e.totalParticipants+(t.total_applications||0),totalGems:e.totalGems+(t.gems_paid||0)}),{totalDrops:0,totalParticipants:0,totalGems:0}):{totalDrops:0,totalParticipants:0,totalGems:0},te=e=>{switch(e){case"stripe":return"Stripe";case"coinbase":return"Coinbase Commerce";default:return"Mock"}},re=e=>e.enabled?e.ready?"Ready":"Configured":"Disabled";u.useEffect(()=>{"/advertiser/campaigns"===t.pathname||t.pathname.startsWith("/advertiser/campaigns/")||"/campaigns"===t.pathname||t.pathname.startsWith("/campaigns/")?N("campaigns"):N("dashboard")},[t.pathname]);return p?sn.jsx("div",{className:"flex items-center justify-center h-64",children:sn.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):f?sn.jsx("div",{className:"max-w-4xl mx-auto",children:sn.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[sn.jsx("h2",{className:"text-xl font-semibold text-red-900 mb-2",children:"Error Loading Dashboard"}),sn.jsx("p",{className:"text-red-700 mb-4",children:f}),sn.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-xl font-medium transition-colors",children:"Refresh Page"})]})}):n?"advertiser"!==n.user_type?sn.jsx("div",{className:"max-w-4xl mx-auto",children:sn.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-8 text-center",children:[sn.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:sn.jsx(ur,{className:"w-8 h-8 text-blue-600"})}),sn.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"Become an Advertiser"}),sn.jsx("p",{className:"text-blue-700 mb-6 max-w-md mx-auto",children:"Your account is not yet set up for advertising. Click below to become an advertiser and start creating marketing campaigns."}),sn.jsx(Ve,{to:"/advertiser/onboarding",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-4 rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:"Become an Advertiser"}),sn.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Free to get started  No setup fees  Create your first campaign"})]})}):s?sn.jsxs("div",{className:"space-y-6",children:[sn.jsx("div",{className:"border-b border-gray-200",children:sn.jsx(EB,{value:w,onValueChange:e=>{r("campaigns"===e?"/advertiser/campaigns":"/advertiser")},className:"w-full",children:sn.jsxs(PB,{className:"bg-transparent p-0 rounded-none",children:[sn.jsxs(TB,{value:"dashboard",className:"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none px-4 py-3 text-sm font-medium",children:[sn.jsx(er,{className:"mr-2 h-4 w-4"}),"Dashboard"]}),sn.jsxs(TB,{value:"campaigns",className:"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none px-4 py-3 text-sm font-medium",children:[sn.jsx(ur,{className:"mr-2 h-4 w-4"}),"Campaigns"]})]})})}),"campaigns"===w?sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Campaigns"}),sn.jsx("p",{className:"text-sm text-gray-500",children:"Manage your marketing campaigns and track performance"})]}),sn.jsxs(Il,{onClick:()=>r("/campaigns/new"),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200",children:[sn.jsx(Ot,{className:"w-4 h-4"}),sn.jsx("span",{children:"New Campaign"})]})]}),sn.jsx(DB,{showHeader:!1,basePath:"/advertiser/campaigns"})]}):sn.jsxs(sn.Fragment,{children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("div",{className:"flex items-center space-x-4",children:sn.jsx("div",{children:n?.brand_name?sn.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[sn.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-xl flex items-center justify-center overflow-hidden border border-gray-200",children:n?.brand_logo_url?sn.jsx("img",{src:n.brand_logo_url,alt:"Brand logo",className:"w-full h-full object-cover"}):sn.jsx(ht,{className:"w-6 h-6 text-gray-400"})}),sn.jsxs("div",{children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:n.brand_name}),sn.jsx("button",{onClick:()=>b(!0),className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Edit brand profile",children:sn.jsx(Ir,{className:"w-5 h-5"})})]}),sn.jsx("p",{className:"text-gray-600",children:n?.brand_description||"Manage your campaigns and track performance"})]})]}):sn.jsxs("div",{children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Advertiser Dashboard"}),sn.jsxs("button",{onClick:()=>b(!0),className:"bg-blue-100 hover:bg-blue-200 text-blue-600 px-3 py-1 rounded-lg text-sm font-medium transition-colors flex items-center space-x-1",children:[sn.jsx(ht,{className:"w-4 h-4"}),sn.jsx("span",{children:"Set up brand"})]})]}),sn.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your campaigns and track performance"})]})})}),sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:`px-4 py-2 rounded-lg ${X.color}`,children:sn.jsx("span",{className:"font-medium",children:X.name})}),sn.jsx("button",{onClick:()=>b(!0),className:"text-gray-400 hover:text-gray-600 transition-colors p-2 rounded-lg hover:bg-gray-100",title:"Brand settings",children:sn.jsx(Tr,{className:"w-5 h-5"})})]})]}),sn.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[sn.jsxs("div",{className:"rounded-2xl border border-blue-200 bg-blue-50/60 p-6 shadow-sm",children:[sn.jsxs("div",{className:"flex items-start justify-between",children:[sn.jsxs("div",{children:[sn.jsxs("div",{className:"flex items-center space-x-2 text-sm font-medium text-blue-600",children:[sn.jsx(Dt,{className:"h-4 w-4"}),sn.jsx("span",{children:"Advertiser Plan"})]}),sn.jsx("h3",{className:"mt-1 text-2xl font-semibold text-gray-900 capitalize",children:S}),sn.jsx("p",{className:"mt-2 text-sm text-blue-700",children:"Unlock larger incentive budgets, deeper analytics, and leaderboards targeting with Premium plans."})]}),sn.jsx("div",{className:"text-right text-sm text-blue-700",children:O?sn.jsxs("div",{className:"flex items-center space-x-1 text-xs text-blue-500",children:[sn.jsx(ar,{className:"h-3.5 w-3.5 animate-spin"}),sn.jsx("span",{children:"Loading plans"})]}):sn.jsx("button",{onClick:()=>T(!0),className:"rounded-full bg-gradient-to-r from-blue-500 to-purple-500 px-4 py-2 text-xs font-semibold text-white shadow-sm transition hover:from-blue-600 hover:to-purple-600",children:"Upgrade Plan"})})]}),_.length>0&&sn.jsx("ul",{className:"mt-4 grid gap-2 text-sm text-blue-800 md:grid-cols-2",children:_.find(e=>e.id===S)?.features?.slice(0,4).map(e=>sn.jsxs("li",{className:"flex items-center space-x-2",children:[sn.jsx(Ct,{className:"h-4 w-4 text-blue-500"}),sn.jsx("span",{children:e})]},e))||sn.jsx("li",{className:"text-sm text-blue-700",children:"Compare plans to see everything you unlock."})}),sn.jsxs("div",{className:"mt-6 rounded-xl border border-blue-100 bg-white/70 p-4",children:[sn.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold text-blue-700",children:[sn.jsx("span",{children:"Payment Providers"}),B?sn.jsxs("span",{className:"flex items-center space-x-1 text-blue-500",children:[sn.jsx(ar,{className:"h-3.5 w-3.5 animate-spin"}),sn.jsx("span",{children:"Checking"})]}):null]}),ln.enabled?W?sn.jsx("p",{className:"mt-3 text-sm text-red-600",children:W}):0===L.length?sn.jsx("p",{className:"mt-3 text-sm text-blue-600",children:"No payment providers configured yet."}):sn.jsx("ul",{className:"mt-3 space-y-2",children:L.map(e=>sn.jsxs("li",{className:"flex items-center justify-between rounded-lg bg-blue-50 px-3 py-2 text-sm text-blue-700",children:[sn.jsxs("div",{children:[sn.jsx("span",{className:"font-semibold",children:te(e.provider)}),z===e.provider&&sn.jsx("span",{className:"ml-2 rounded-full bg-blue-200 px-2 py-0.5 text-xs font-semibold text-blue-700",children:"Default"}),e.publishableKey&&sn.jsxs("span",{className:"block text-xs text-blue-500",children:["Key  ",e.publishableKey.slice(0,12),""]})]}),sn.jsx("span",{className:"text-xs font-semibold "+(e.enabled?"text-emerald-600":"text-gray-500"),children:re(e)})]},e.provider))}):sn.jsx("p",{className:"mt-3 text-sm text-blue-600",children:"Payments are currently disabled. Our team will process upgrades manually."})]})]}),sn.jsxs("div",{className:"rounded-2xl border border-purple-200 bg-white p-6 shadow-sm",children:[sn.jsx("div",{className:"flex items-start justify-between",children:sn.jsxs("div",{children:[sn.jsxs("div",{className:"flex items-center space-x-2 text-sm font-medium text-purple-600",children:[sn.jsx(Fr,{className:"h-4 w-4"}),sn.jsx("span",{children:"Giveaways & Coupons"})]}),sn.jsx("h3",{className:"mt-1 text-xl font-semibold text-gray-900",children:"Incentive Highlights"}),sn.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Design rewards for top leaderboard performers or attach coupons directly to high-value drops."})]})}),sn.jsxs("div",{className:"mt-4 grid gap-3 text-sm text-gray-600 md:grid-cols-2",children:[sn.jsxs("div",{className:"rounded-lg bg-purple-50 px-3 py-2",children:[sn.jsx("p",{className:"font-medium text-purple-700",children:"Leaderboard Incentives"}),sn.jsx("p",{children:"Deliver exclusive rewards automatically to top ranked creators."})]}),sn.jsxs("div",{className:"rounded-lg bg-purple-50 px-3 py-2",children:[sn.jsx("p",{className:"font-medium text-purple-700",children:"Drop Attachments"}),sn.jsx("p",{children:"Motivate applicants with coupons and giveaways baked into campaign briefs."})]})]})]})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[sn.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsxs("div",{children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sample Inventory"}),sn.jsx("p",{className:"text-sm text-gray-500",children:"Use monthly samples to test promotions before upgrading"})]}),sn.jsx("div",{className:"bg-orange-100 text-orange-600 px-3 py-1 rounded-full text-xs font-medium",children:"Monthly"})]}),sn.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[sn.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[sn.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Moves"}),sn.jsxs("p",{className:"text-xl font-semibold text-gray-900",children:[s?.monthly_inventory?.moves_used??0,"/50"]})]}),sn.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[sn.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Proof Drops"}),sn.jsxs("p",{className:"text-xl font-semibold text-gray-900",children:[s?.monthly_inventory?.proof_drops_used??0,"/5"]})]}),sn.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[sn.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Paid Drops"}),sn.jsx("p",{className:"text-xl font-semibold text-gray-900",children:"Upgrade"})]})]})]}),sn.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-4",children:[sn.jsxs("div",{children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Weekly Allocation"}),sn.jsx("p",{className:"text-sm text-gray-500",children:"Upgrade to unlock weekly inventory packs"})]}),sn.jsx("div",{className:"bg-purple-100 text-purple-600 px-3 py-1 rounded-full text-xs font-medium",children:"Upgrade"})]}),sn.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[sn.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[sn.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Moves"}),sn.jsx("p",{className:"text-xl font-semibold text-gray-900",children:"200"}),sn.jsx("span",{className:"text-xs text-gray-500",children:"Premium tier"})]}),sn.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[sn.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Proof Drops"}),sn.jsx("p",{className:"text-xl font-semibold text-gray-900",children:"15"})]}),sn.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[sn.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Paid Drops"}),sn.jsx("p",{className:"text-xl font-semibold text-gray-900",children:"8"})]})]})]})]}),sn.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[sn.jsx(HU,{title:"Total Drops",value:ee.totalDrops,change:12,changeType:"increase",icon:sn.jsx(yt,{className:"w-5 h-5"}),trend:Q.slice(-7).map(e=>({date:e.date,value:Math.floor(20*Math.random())+5}))}),sn.jsx(HU,{title:"Total Participants",value:ee.totalParticipants.toLocaleString(),change:8,changeType:"increase",icon:sn.jsx(Hr,{className:"w-5 h-5"}),trend:Q.slice(-7).map(e=>({date:e.date,value:e.participants}))}),sn.jsx(HU,{title:"Gems Distributed",value:ee.totalGems.toFixed(1),change:15,changeType:"increase",icon:sn.jsx(It,{className:"w-5 h-5"}),trend:Q.slice(-7).map(e=>({date:e.date,value:e.spent}))}),sn.jsx(HU,{title:"Avg. Engagement",value:`${s.analytics.length>0?(s.analytics.reduce((e,t)=>e+(t.engagement_rate||0),0)/s.analytics.length).toFixed(1):"8.5"}%`,change:3,changeType:"increase",icon:sn.jsx(Ur,{className:"w-5 h-5"}),trend:Q.slice(-7).map(e=>({date:e.date,value:Math.floor(20*Math.random())+5}))})]}),sn.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[sn.jsx("div",{className:"p-6 border-b border-gray-200",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center",children:sn.jsx(Dr,{className:"w-5 h-5 text-white"})}),sn.jsxs("div",{children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Suggested Content to Sponsor"}),sn.jsx("p",{className:"text-sm text-gray-600",children:"High-performing content perfect for your brand"})]})]}),sn.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[sn.jsx(Lt,{className:"w-4 h-4"}),sn.jsx("span",{children:"Last updated just now"})]})]})}),sn.jsx("div",{className:"p-6",children:c?sn.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading suggestions..."}):o.length>0?sn.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.slice(0,6).map(e=>{const t=(e=>{const t={"quick-boost":{name:"Quick Boost",gems:25,hours:1,multiplier:1.5},"popular-boost":{name:"Popular Boost",gems:50,hours:6,multiplier:2},"daily-featured":{name:"Daily Feature",gems:100,hours:24,multiplier:3},"premium-spotlight":{name:"Premium Spotlight",gems:200,hours:72,multiplier:4},"viral-campaign":{name:"Viral Campaign",gems:500,hours:168,multiplier:6}};return t[e]||t["quick-boost"]})(e.suggested_package);return sn.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-purple-300 transition-colors",children:[sn.jsxs("div",{className:"flex items-start justify-between mb-3",children:[sn.jsxs("div",{className:"flex-1",children:[sn.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[sn.jsx("span",{className:"text-xs font-medium text-purple-600 bg-purple-50 px-2 py-1 rounded-full",children:e.platform}),e.is_trending&&sn.jsx("span",{className:"text-xs font-medium text-orange-600 bg-orange-50 px-2 py-1 rounded-full",children:"Trending"})]}),sn.jsx("h4",{className:"font-semibold text-gray-900",children:e.title}),sn.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mt-1",children:e.description})]}),sn.jsx("button",{className:"text-gray-400 hover:text-gray-600 transition-colors",onClick:()=>window.open(e.platform_url,"_blank"),children:sn.jsx(Lt,{className:"w-4 h-4"})})]}),sn.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center text-sm mb-3",children:[sn.jsxs("div",{children:[sn.jsx("p",{className:"font-semibold text-gray-900",children:e.total_engagement}),sn.jsx("p",{className:"text-xs text-gray-500",children:"Engagement"})]}),sn.jsxs("div",{children:[sn.jsxs("p",{className:"font-semibold text-gray-900",children:[e.engagement_rate,"%"]}),sn.jsx("p",{className:"text-xs text-gray-500",children:"Eng. Rate"})]}),sn.jsxs("div",{children:[sn.jsxs("p",{className:"font-semibold text-gray-900",children:[e.roi_potential,"%"]}),sn.jsx("p",{className:"text-xs text-gray-500",children:"ROI Potential"})]})]}),sn.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:[sn.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Suggested Package:"}),sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsx("div",{className:"font-medium text-gray-900",children:t.name}),sn.jsxs("div",{className:"text-xs text-gray-500",children:[t.hours,"h  ",t.multiplier,"x boost"]})]}),sn.jsxs("div",{className:"flex items-center space-x-1 text-purple-600 font-semibold",children:[sn.jsx(It,{className:"w-3 h-3"}),sn.jsx("span",{children:t.gems})]})]})]}),sn.jsx("button",{onClick:()=>(e=>m(e))(e),className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-2 px-4 rounded-lg font-medium transition-all duration-200 text-sm",children:"Sponsor This Content"})]},e.id)})}):sn.jsxs("div",{className:"text-center py-8",children:[sn.jsx(Dr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),sn.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No suggestions available"}),sn.jsx("p",{className:"text-gray-600",children:"We'll find great content for you to sponsor soon!"})]})})]}),sn.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsxs("div",{className:"flex items-center justify-between mb-6",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Campaign Performance"}),sn.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[sn.jsx(xt,{className:"w-4 h-4"}),sn.jsx("span",{children:"Last 30 days"})]})]}),sn.jsx(VU,{data:Q,height:300,metrics:[{key:"applications",name:"Applications",color:"#f97316"},{key:"conversions",name:"Conversions",color:"#10b981"},{key:"clicks",name:"Clicks",color:"#3b82f6"}]})]}),sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Drop Type Distribution"}),sn.jsx(WU,{data:[{name:"Content Creation",value:45,color:"#f97316"},{name:"Social Sharing",value:30,color:"#8b5cf6"},{name:"Reviews",value:15,color:"#10b981"},{name:"Surveys",value:10,color:"#3b82f6"}],height:300})]}),sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Key Performance Indicators"}),sn.jsx(qU,{data:[{metric:"Click-through Rate",value:4.2},{metric:"Conversion Rate",value:12.8},{metric:"Engagement Rate",value:8.5},{metric:"Application Rate",value:15.3},{metric:"Completion Rate",value:78.9}],height:300})]}),sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Spending & Engagement Trends"}),sn.jsx(KU,{data:Q.map(e=>({date:e.date,value:e.spent,secondary:e.impressions/10})),height:300,primaryKey:"value",secondaryKey:"secondary",primaryColor:"#f97316",secondaryColor:"#8b5cf6"})]})]}),R?sn.jsx("div",{className:"flex items-center justify-center rounded-2xl border border-dashed border-purple-200 bg-purple-50/40 p-12",children:sn.jsxs("div",{className:"flex flex-col items-center space-y-3 text-purple-600",children:[sn.jsx(ar,{className:"h-6 w-6 animate-spin"}),sn.jsx("p",{className:"text-sm font-medium",children:"Loading incentive toolkit"})]})}):sn.jsx(HB,{fallback:sn.jsx(ZB,{}),children:sn.jsx(VB,{coupons:D.coupons,redemptions:D.redemptions,drops:s.drops,onRefresh:Z})}),sn.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Real-time Campaign Metrics"}),sn.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[sn.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[sn.jsx(zt,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),sn.jsx("p",{className:"text-2xl font-bold text-blue-900",children:"24.3K"}),sn.jsx("p",{className:"text-sm text-blue-600",children:"Impressions"})]}),sn.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[sn.jsx(xr,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),sn.jsx("p",{className:"text-2xl font-bold text-green-900",children:"1.2K"}),sn.jsx("p",{className:"text-sm text-green-600",children:"Clicks"})]}),sn.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[sn.jsx(Lr,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),sn.jsx("p",{className:"text-2xl font-bold text-purple-900",children:"156"}),sn.jsx("p",{className:"text-sm text-purple-600",children:"Applications"})]}),sn.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[sn.jsx(Hr,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),sn.jsx("p",{className:"text-2xl font-bold text-orange-900",children:"89"}),sn.jsx("p",{className:"text-sm text-orange-600",children:"Conversions"})]}),sn.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[sn.jsx(Rt,{className:"w-6 h-6 text-yellow-600 mx-auto mb-2"}),sn.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:"$0.78"}),sn.jsx("p",{className:"text-sm text-yellow-600",children:"Cost/Convert"})]}),sn.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[sn.jsx(Ur,{className:"w-6 h-6 text-red-600 mx-auto mb-2"}),sn.jsx("p",{className:"text-2xl font-bold text-red-900",children:"4.2%"}),sn.jsx("p",{className:"text-sm text-red-600",children:"CTR"})]})]})]}),sn.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[sn.jsx("div",{className:"p-6 border-b border-gray-200",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Drops"}),n&&"advertiser"===n.user_type&&sn.jsxs("div",{className:"flex space-x-2",children:[sn.jsxs("button",{onClick:()=>window.location.href="/earn?create=proof",className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200",children:[sn.jsx(Nr,{className:"w-4 h-4"}),sn.jsx("span",{children:"Create Proof Drop"})]}),"free"!==s?.user_tier&&sn.jsxs("button",{onClick:()=>window.location.href="/earn?create=paid",className:"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200",children:[sn.jsx(Nr,{className:"w-4 h-4"}),sn.jsx("span",{children:"Create Paid Drop"})]})]})]})}),sn.jsx("div",{className:"p-6",children:s.drops.length>0?sn.jsx("div",{className:"space-y-4",children:s.drops.slice(0,5).map(e=>sn.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[sn.jsxs("div",{className:"flex-1",children:[sn.jsx("h4",{className:"font-medium text-gray-900",children:e.title}),sn.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),sn.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[sn.jsxs("span",{className:"flex items-center space-x-1",children:[sn.jsx(Hr,{className:"w-4 h-4"}),sn.jsxs("span",{children:[e.total_applications||0," applicants"]})]}),sn.jsxs("span",{className:"flex items-center space-x-1",children:[sn.jsx(It,{className:"w-4 h-4"}),sn.jsxs("span",{children:[e.gem_reward_base," gems"]})]}),sn.jsxs("span",{className:"flex items-center space-x-1",children:[sn.jsx(xt,{className:"w-4 h-4"}),sn.jsx("span",{children:new Date(e.created_at).toLocaleDateString()})]})]})]}),sn.jsx("div",{className:"flex items-center space-x-2",children:sn.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("active"===e.status?"text-green-600 bg-green-100":"text-gray-600 bg-gray-100"),children:e.status})})]},e.id))}):sn.jsxs("div",{className:"text-center py-8",children:[sn.jsx(yt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),sn.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No drops yet"}),sn.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first drop to start engaging with creators."}),n&&"advertiser"===n.user_type&&sn.jsx("button",{onClick:()=>window.location.href="/earn?create=proof",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-2 rounded-lg font-medium",children:"Create Your First Drop"})]})})]}),s.analytics.length>0&&sn.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[sn.jsx("div",{className:"p-6 border-b border-gray-200",children:sn.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Performance Analytics"})}),sn.jsx("div",{className:"overflow-x-auto",children:sn.jsxs("table",{className:"w-full",children:[sn.jsx("thead",{className:"bg-gray-50",children:sn.jsxs("tr",{children:[sn.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),sn.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Drops"}),sn.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Participants"}),sn.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gems Spent"}),sn.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Impressions"}),sn.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Engagement"})]})}),sn.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.analytics.slice(0,10).map(e=>sn.jsxs("tr",{className:"hover:bg-gray-50",children:[sn.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[new Date(e.period_start).toLocaleDateString()," -"," ",new Date(e.period_end).toLocaleDateString()]}),sn.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.drops_created}),sn.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.total_participants}),sn.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.gems_spent.toFixed(1)}),sn.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.impressions.toLocaleString()}),sn.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.engagement_rate.toFixed(1),"%"]})]},e.id))})]})})]})]}),h&&sn.jsx(yB,{isOpen:!0,onClose:()=>m(null),onSponsor:async(e,t,r)=>{try{(await fetch("/api/content/sponsor",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({contentId:h.id,gemAmount:e,boostMultiplier:t,durationHours:r})})).ok&&(m(null),G())}catch(n){}},contentTitle:h.title,userGems:n?.gems_balance||0}),sn.jsx(WB,{isOpen:P,onClose:()=>T(!1),plans:_,currentTier:S,onSelect:async e=>{M(!0);try{const t=_.find(t=>t.id===e),r=L.find(e=>e.enabled&&e.ready)?.provider||z;if(ln.enabled&&r&&"mock"!==r){const n=await JB.startCheckout({planId:e,provider:r,successUrl:`${window.location.origin}/advertiser?upgrade=success&plan=${e}`,cancelUrl:`${window.location.origin}/advertiser?upgrade=cancelled`,metadata:{planName:t?.name}});if(n?.url&&"mock"!==n.status)return T(!1),M(!1),void(window.location.href=n.url)}const n=await BB.upgrade(e);C(n?.plan?.id||e),n?.message&&alert(n.message),Y()}catch(t){alert("Unable to upgrade plan right now. Please try again later.")}finally{M(!1),T(!1)}},isSubmitting:A}),sn.jsx(MB,{isOpen:y,onClose:()=>b(!1),onSave:async e=>{j(!0);try{const t=await fetch("/api/users/brand-profile",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(t.ok)b(!1),V();else{const e=await t.json();alert(e.error||"Failed to save brand profile")}}catch(t){alert("Failed to save brand profile")}finally{j(!1)}},currentBrandData:n,loading:v})]}):sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx(Hr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),sn.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Loading Dashboard..."}),sn.jsx("p",{className:"text-gray-600",children:"Please wait while we load your advertiser dashboard."})]}):null}function XB(){const{user:e,demoLogin:t}=bn(),r=we(),[n,a]=u.useState(!1),[s,i]=u.useState(null);return sn.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-purple-50",children:[sn.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-orange-500 to-red-500",children:[sn.jsx("div",{className:"absolute inset-0 bg-black/10"}),sn.jsx("div",{className:"relative z-10 px-6 py-20",children:sn.jsxs("div",{className:"max-w-4xl mx-auto text-center text-white",children:[sn.jsx("div",{className:"flex justify-center mb-6",children:sn.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:sn.jsx(ur,{className:"w-8 h-8"})})}),sn.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-6",children:"Advertise on Promorang"}),sn.jsx("p",{className:"text-xl md:text-2xl mb-8 text-orange-100 max-w-3xl mx-auto",children:"Connect with thousands of creators and build authentic campaigns that drive real engagement"}),sn.jsxs("div",{className:"flex items-center justify-center space-x-8 text-orange-100",children:[sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Hr,{className:"w-5 h-5"}),sn.jsx("span",{children:"50k+ Active Creators"})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Ur,{className:"w-5 h-5"}),sn.jsx("span",{children:"95% Completion Rate"})]}),sn.jsxs("div",{className:"flex items-center space-x-2",children:[sn.jsx(Rr,{className:"w-5 h-5"}),sn.jsx("span",{children:"4.9 Average Rating"})]})]})]})})]}),sn.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-16",children:[sn.jsxs("div",{className:"mb-16",children:[sn.jsx("h2",{className:"text-4xl font-bold text-center text-gray-900 mb-12",children:"Why Choose Promorang for Advertising?"}),sn.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[sn.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-200 hover:shadow-lg transition-shadow",children:[sn.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mb-6",children:sn.jsx(Lr,{className:"w-6 h-6 text-blue-600"})}),sn.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Moves & Proof System"}),sn.jsx("p",{className:"text-gray-600",children:'Create "moves" that help users earn keys for their Master Key progression, and "proof drops" that contribute to daily activation requirements.'})]}),sn.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-200 hover:shadow-lg transition-shadow",children:[sn.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mb-6",children:sn.jsx(yt,{className:"w-6 h-6 text-green-600"})}),sn.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Flexible Inventory System"}),sn.jsx("p",{className:"text-gray-600",children:"Start with free monthly samples, then upgrade to weekly inventory allocations for moves, proof drops, and paid opportunities."})]}),sn.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-200 hover:shadow-lg transition-shadow",children:[sn.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mb-6",children:sn.jsx(Rt,{className:"w-6 h-6 text-purple-600"})}),sn.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Gem Sponsorship System"}),sn.jsx("p",{className:"text-gray-600",children:"All advertisers can allocate gems to sponsor any content, boosting visibility and engagement regardless of tier level."})]})]})]}),sn.jsxs("div",{className:"mb-16",children:[sn.jsx("h2",{className:"text-4xl font-bold text-center text-gray-900 mb-4",children:"Advertiser Tiers"}),sn.jsx("p",{className:"text-center text-gray-600 mb-12 text-lg",children:"Choose the tier that matches your advertising needs and scale"}),sn.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:Object.entries({free:{name:"Free Advertiser",color:"text-gray-600 bg-gray-50 border-gray-200",inventory:"Monthly Sample: 50 moves, 5 proof drops",features:["Basic analytics","Standard support","Create proof drops only","Sponsor any content with gems"]},premium:{name:"Premium Advertiser",color:"text-purple-600 bg-purple-50 border-purple-200",inventory:"Weekly: 200 moves, 15 proof drops, 8 paid drops",features:["Advanced analytics","Priority support","Custom targeting","Create proof & paid drops","Sponsor content with gems"]},super:{name:"Super Advertiser",color:"text-yellow-600 bg-yellow-50 border-yellow-200",inventory:"Weekly: 500 moves, 25 proof drops, 15 paid drops",features:["Premium analytics","Priority support","Custom targeting","Advanced reporting","Create proof & paid drops","Sponsor content with gems"]}}).map(([e,t])=>sn.jsxs("div",{className:`border-2 rounded-2xl p-8 ${t.color} relative`,children:["premium"===e&&sn.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:sn.jsx("span",{className:"bg-purple-500 text-white px-4 py-1 rounded-full text-sm font-medium",children:"Most Popular"})}),sn.jsxs("div",{className:"text-center mb-6",children:[sn.jsxs("div",{className:"flex justify-center mb-4",children:["free"===e&&sn.jsx(Qr,{className:"w-8 h-8 text-gray-600"}),"premium"===e&&sn.jsx(Rr,{className:"w-8 h-8 text-purple-600"}),"super"===e&&sn.jsx(Dt,{className:"w-8 h-8 text-yellow-600"})]}),sn.jsx("h3",{className:"text-2xl font-bold mb-2",children:t.name}),sn.jsx("p",{className:"text-lg font-semibold",children:t.inventory}),sn.jsx("p",{className:"text-sm opacity-75",children:"free"===e?"Sample inventory allocation":"Weekly inventory allocation"})]}),sn.jsx("ul",{className:"space-y-3 mb-6",children:t.features.map((e,t)=>sn.jsxs("li",{className:"flex items-center space-x-2",children:[sn.jsx(St,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),sn.jsx("span",{className:"text-sm",children:e})]},t))}),"free"===e&&sn.jsx("p",{className:"text-xs opacity-75 text-center",children:"Free tier can create proof drops and sponsor content. Upgrade to create paid drops."})]},e))})]}),sn.jsxs("div",{className:"mb-16",children:[sn.jsx("h2",{className:"text-4xl font-bold text-center text-gray-900 mb-12",children:"How It Works"}),sn.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:sn.jsx("span",{className:"text-white font-bold text-xl",children:"1"})}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Create Campaigns"}),sn.jsx("p",{className:"text-gray-600 text-sm",children:"Set up drops with your requirements, budget, and target audience"})]}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:sn.jsx("span",{className:"text-white font-bold text-xl",children:"2"})}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Creators Apply"}),sn.jsx("p",{className:"text-gray-600 text-sm",children:"Qualified creators apply to your campaigns with their proposals"})]}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:sn.jsx("span",{className:"text-white font-bold text-xl",children:"3"})}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Review & Approve"}),sn.jsx("p",{className:"text-gray-600 text-sm",children:"Review submissions and approve the best content for your brand"})]}),sn.jsxs("div",{className:"text-center",children:[sn.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:sn.jsx("span",{className:"text-white font-bold text-xl",children:"4"})}),sn.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Track Results"}),sn.jsx("p",{className:"text-gray-600 text-sm",children:"Monitor performance and measure ROI with detailed analytics"})]})]})]}),sn.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-12 text-center",children:sn.jsxs("div",{className:"max-w-2xl mx-auto",children:[sn.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Ready to Start Advertising?"}),sn.jsx("p",{className:"text-gray-600 mb-8 text-lg",children:"Join hundreds of brands already using Promorang to create authentic, high-performing campaigns"}),s&&sn.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-6",children:sn.jsx("p",{className:"text-sm text-red-700",children:s})}),sn.jsx("button",{onClick:async()=>{if(e){a(!0),i(null);try{const e=await fetch("/api/users/become-advertiser",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`},credentials:"include"});if(e.ok){const t=await e.json();if(t.token&&t.user)return localStorage.setItem("authToken",t.token),localStorage.setItem("advertiser_conversion","true"),void(window.location.href="/advertiser#converted");localStorage.setItem("advertiser_conversion","true"),window.location.href="/advertiser#converted"}else{const t=await e.json();i(t.error||"Failed to become advertiser")}}catch(t){i("Network error occurred")}finally{a(!1)}}else r("/?error=auth_required")},disabled:n,className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold px-8 py-4 rounded-xl text-lg transition-all duration-200 transform hover:scale-105 shadow-lg flex items-center space-x-2 mx-auto",children:n?sn.jsxs(sn.Fragment,{children:[sn.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),sn.jsx("span",{children:"Setting up your account..."})]}):sn.jsxs(sn.Fragment,{children:[sn.jsx("span",{children:"Become an Advertiser"}),sn.jsx(ot,{className:"w-5 h-5"})]})}),sn.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Free to get started  No setup fees  Pay only for completed work"})]})})]})]})}function eq(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function tq(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const rq=6048e5;let nq={};function aq(){return nq}function sq(e,t){const r=aq(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=eq(e),s=a.getDay(),i=(s<n?7:0)+s-n;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function iq(e){return sq(e,{weekStartsOn:1})}function oq(e){const t=eq(e),r=t.getFullYear(),n=tq(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=iq(n),s=tq(e,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const i=iq(s);return t.getTime()>=a.getTime()?r+1:t.getTime()>=i.getTime()?r:r-1}function lq(e){const t=eq(e);return t.setHours(0,0,0,0),t}function cq(e){const t=eq(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function dq(e){if(!(t=e,t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)||"number"==typeof e))return!1;var t;const r=eq(e);return!isNaN(Number(r))}const uq={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function hq(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const mq={date:hq({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:hq({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:hq({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},pq={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function xq(e){return(t,r)=>{let n;if("formatting"===(r?.context?String(r.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=r?.width?String(r.width):t;n=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=r?.width?String(r.width):e.defaultWidth;n=e.values[a]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}const fq={ordinalNumber:(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:xq({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:xq({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:xq({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:xq({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:xq({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function gq(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const i=s[0],o=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r;return}(o,e=>e.test(i)):function(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r;return}(o,e=>e.test(i));let c;c=e.valueCallback?e.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}const yq={ordinalNumber:(bq={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const r=e.match(bq.matchPattern);if(!r)return null;const n=r[0],a=e.match(bq.parsePattern);if(!a)return null;let s=bq.valueCallback?bq.valueCallback(a[0]):a[0];return s=t.valueCallback?t.valueCallback(s):s,{value:s,rest:e.slice(n.length)}}),era:gq({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:gq({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:gq({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:gq({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:gq({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var bq;const vq={code:"en-US",formatDistance:(e,t,r)=>{let n;const a=uq[e];return n="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n},formatLong:mq,formatRelative:(e,t,r,n)=>pq[e],localize:fq,match:yq,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jq(e){const t=eq(e),r=function(e,t){const r=lq(e),n=lq(t),a=+r-cq(r),s=+n-cq(n);return Math.round((a-s)/864e5)}(t,function(e){const t=eq(e),r=tq(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}(t));return r+1}function wq(e){const t=eq(e),r=+iq(t)-+function(e){const t=oq(e),r=tq(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),iq(r)}(t);return Math.round(r/rq)+1}function Nq(e,t){const r=eq(e),n=r.getFullYear(),a=aq(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,i=tq(e,0);i.setFullYear(n+1,0,s),i.setHours(0,0,0,0);const o=sq(i,t),l=tq(e,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const c=sq(l,t);return r.getTime()>=o.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}function _q(e,t){const r=eq(e),n=+sq(r,t)-+function(e,t){const r=aq(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=Nq(e,t),s=tq(e,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),sq(s,t)}(r,t);return Math.round(n/rq)+1}function kq(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const Sq={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return kq("yy"===t?n%100:n,t.length)},M(e,t){const r=e.getMonth();return"M"===t?String(r+1):kq(r+1,2)},d:(e,t)=>kq(e.getDate(),t.length),a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>kq(e.getHours()%12||12,t.length),H:(e,t)=>kq(e.getHours(),t.length),m:(e,t)=>kq(e.getMinutes(),t.length),s:(e,t)=>kq(e.getSeconds(),t.length),S(e,t){const r=t.length,n=e.getMilliseconds();return kq(Math.trunc(n*Math.pow(10,r-3)),t.length)}},Cq="midnight",Oq="noon",Eq="morning",Pq="afternoon",Tq="evening",Aq="night",Mq={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){const t=e.getFullYear(),n=t>0?t:1-t;return r.ordinalNumber(n,{unit:"year"})}return Sq.y(e,t)},Y:function(e,t,r,n){const a=Nq(e,n),s=a>0?a:1-a;if("YY"===t){return kq(s%100,2)}return"Yo"===t?r.ordinalNumber(s,{unit:"year"}):kq(s,t.length)},R:function(e,t){return kq(oq(e),t.length)},u:function(e,t){return kq(e.getFullYear(),t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return kq(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return kq(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Sq.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return kq(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=_q(e,n);return"wo"===t?r.ordinalNumber(a,{unit:"week"}):kq(a,t.length)},I:function(e,t,r){const n=wq(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):kq(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):Sq.d(e,t)},D:function(e,t,r){const n=jq(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):kq(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return kq(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return kq(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=0===n?7:n;switch(t){case"i":return String(a);case"ii":return kq(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(a=12===n?Oq:0===n?Cq:n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(a=n>=17?Tq:n>=12?Pq:n>=4?Eq:Aq,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return Sq.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):Sq.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):kq(n,t.length)},k:function(e,t,r){let n=e.getHours();return 0===n&&(n=24),"ko"===t?r.ordinalNumber(n,{unit:"hour"}):kq(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Sq.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Sq.s(e,t)},S:function(e,t){return Sq.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return Iq(n);case"XXXX":case"XX":return Rq(n);default:return Rq(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Iq(n);case"xxxx":case"xx":return Rq(n);default:return Rq(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Dq(n,":");default:return"GMT"+Rq(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Dq(n,":");default:return"GMT"+Rq(n,":")}},t:function(e,t,r){return kq(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,r){return kq(e.getTime(),t.length)}};function Dq(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),s=n%60;return 0===s?r+String(a):r+String(a)+t+kq(s,2)}function Iq(e,t){if(e%60==0){return(e>0?"-":"+")+kq(Math.abs(e)/60,2)}return Rq(e,t)}function Rq(e,t=""){const r=e>0?"-":"+",n=Math.abs(e);return r+kq(Math.trunc(n/60),2)+t+kq(n%60,2)}const $q=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Lq=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Fq={p:Lq,P:(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return $q(e,t);let s;switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",$q(n,t)).replace("{{time}}",Lq(a,t))}},zq=/^D+$/,Uq=/^Y+$/,Bq=["D","DD","YY","YYYY"];const qq=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Wq=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Kq=/^'([^]*?)'?$/,Vq=/''/g,Hq=/[a-zA-Z]/;function Gq(e,t,r){const n=aq(),a=n.locale??vq,s=n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=eq(e);if(!dq(o))throw new RangeError("Invalid time value");let l=t.match(Wq).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,Fq[t])(e,a.formatLong)}return e}).join("").match(qq).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Yq(e)};if(Mq[t])return{isToken:!0,value:e};if(t.match(Hq))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});a.localize.preprocessor&&(l=a.localize.preprocessor(o,l));const c={firstWeekContainsDate:s,weekStartsOn:i,locale:a};return l.map(r=>{if(!r.isToken)return r.value;const n=r.value;(function(e){return Uq.test(e)}(n)||function(e){return zq.test(e)}(n))&&function(e,t,r){const n=function(e,t,r){const n="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,r);if(Bq.includes(e))throw new RangeError(n)}(n,t,String(e));return(0,Mq[n[0]])(o,n,a.localize,c)}).join("")}function Yq(e){const t=e.match(Kq);return t?t[1].replace(Vq,"'"):e}const Jq={active:"bg-green-100 text-green-800",paused:"bg-yellow-100 text-yellow-800",draft:"bg-blue-100 text-blue-800",completed:"bg-gray-100 text-gray-800"};function Zq(){const{id:e}=Ne(),t=we(),[r,n]=u.useState(null),[a,s]=u.useState([]),[i,o]=u.useState(!0),[l,c]=u.useState(""),[d,h]=u.useState("overview"),[m,p]=u.useState(!1);u.useEffect(()=>{(async()=>{try{o(!0),await new Promise(e=>setTimeout(e,500));const t=[{id:"c1",title:"Summer Lookbook",platform:"Instagram",creator:"fashion_influencer",status:"live",budget:1e3,spent:450,impressions:5e4,clicks:1200,ctr:2.4,cpc:.38,startDate:"2025-06-01",endDate:"2025-06-30"},{id:"c2",title:"Beachwear Showcase",platform:"TikTok",creator:"beachvibes",status:"live",budget:1500,spent:800,impressions:75e3,clicks:1300,ctr:1.7,cpc:.62,startDate:"2025-06-05",endDate:"2025-07-05"}];n({id:e||"1",name:"Summer Collection Launch",status:"active",objective:"engagement",description:"Promoting our new summer collection to drive engagement and sales.",startDate:"2025-06-01",endDate:"2025-08-31",budget:5e3,spent:1250,dailyBudget:100,impressions:125e3,clicks:2500,ctr:2,cpc:.5,drops:12,participants:2450,bidStrategy:"lowest_cost",bidAmount:5,targetCtr:2,targetCpc:.5,createdAt:"2025-05-15T10:30:00Z",updatedAt:"2025-06-15T14:45:00Z"}),s(t)}catch(t){c("Failed to load campaign details. Please try again later.")}finally{o(!1)}})()},[e]);const x=async e=>{if(r)try{p(!0),await new Promise(e=>setTimeout(e,500)),n({...r,status:e,updatedAt:(new Date).toISOString()})}catch(t){}finally{p(!1)}},f=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(e),g=e=>new Intl.NumberFormat("en-US").format(e),y=e=>Gq(new Date(e),"MMM d, yyyy");if(i)return sn.jsx("div",{className:"flex items-center justify-center h-64",children:sn.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})});if(l)return sn.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:sn.jsxs("div",{className:"flex",children:[sn.jsx("div",{className:"flex-shrink-0",children:sn.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:sn.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),sn.jsx("div",{className:"ml-3",children:sn.jsx("p",{className:"text-sm text-red-700",children:l})})]})});if(!r)return sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Campaign not found"}),sn.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"The requested campaign could not be found."}),sn.jsx("div",{className:"mt-6",children:sn.jsxs(Il,{onClick:()=>t(-1),variant:"outline",children:[sn.jsx(it,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to Campaigns"]})})]});const b=r.endDate?(e=>{const t=new Date,r=new Date(e).getTime()-t.getTime();return Math.ceil(r/864e5)})(r.endDate):null,v=r.spent/r.budget*100,j=r.spent/(Math.ceil(((new Date).getTime()-new Date(r.startDate).getTime())/864e5)||1),w=r.dailyBudget>0?new Date(Date.now()+(r.budget-r.spent)/r.dailyBudget*24*60*60*1e3):null;return sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[sn.jsxs("div",{className:"flex items-center space-x-4",children:[sn.jsxs(Il,{variant:"outline",size:"icon",onClick:()=>t(-1),className:"h-8 w-8",children:[sn.jsx(it,{className:"h-4 w-4"}),sn.jsx("span",{className:"sr-only",children:"Back"})]}),sn.jsxs("div",{children:[sn.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.name}),sn.jsxs("div",{className:"flex items-center mt-1 space-x-2",children:[sn.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Jq[r.status]}`,children:r.status.charAt(0).toUpperCase()+r.status.slice(1)}),sn.jsxs("span",{className:"text-sm text-gray-500",children:[y(r.startDate),r.endDate&&` - ${y(r.endDate)}`,null!==b&&sn.jsxs("span",{className:"ml-1",children:["(",b>0?`${b} days left`:"Ended",")"]})]})]})]})]}),sn.jsxs("div",{className:"flex space-x-2",children:["active"===r.status&&sn.jsxs(Il,{variant:"outline",onClick:()=>x("paused"),disabled:m,children:[sn.jsx(gr,{className:"mr-2 h-4 w-4"}),"Pause"]}),("paused"===r.status||"draft"===r.status)&&sn.jsxs(Il,{onClick:()=>x("active"),disabled:m,children:[sn.jsx(wr,{className:"mr-2 h-4 w-4"}),"paused"===r.status?"Resume":"Activate"]}),sn.jsx(Il,{variant:"outline",asChild:!0,children:sn.jsxs(Ve,{to:`/campaigns/${r.id}/edit`,children:[sn.jsx(Ir,{className:"mr-2 h-4 w-4"}),"Edit"]})}),sn.jsxs(Il,{variant:"outline",size:"icon",children:[sn.jsx($t,{className:"h-4 w-4"}),sn.jsx("span",{className:"sr-only",children:"More"})]})]})]}),sn.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[sn.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:sn.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[sn.jsxs("div",{className:"flex items-center",children:[sn.jsx("div",{className:"flex-shrink-0 bg-blue-500 rounded-md p-3",children:sn.jsx(Rt,{className:"h-6 w-6 text-white"})}),sn.jsx("div",{className:"ml-5 w-0 flex-1",children:sn.jsxs("dl",{children:[sn.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Budget"}),sn.jsx("dd",{className:"flex items-baseline",children:sn.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:f(r.budget)})})]})})]}),sn.jsxs("div",{className:"mt-4",children:[sn.jsxs("div",{className:"text-sm text-gray-500",children:[sn.jsx("span",{className:"font-medium text-gray-900",children:f(r.spent)})," spent",sn.jsx("span",{className:"mx-1",children:""}),sn.jsxs("span",{children:[f(r.budget-r.spent)," remaining"]})]}),sn.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:sn.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(100,v)}%`}})})]})]})}),sn.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:sn.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[sn.jsxs("div",{className:"flex items-center",children:[sn.jsx("div",{className:"flex-shrink-0 bg-green-500 rounded-md p-3",children:sn.jsx(Hr,{className:"h-6 w-6 text-white"})}),sn.jsx("div",{className:"ml-5 w-0 flex-1",children:sn.jsxs("dl",{children:[sn.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Participants"}),sn.jsx("dd",{className:"flex items-baseline",children:sn.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:g(r.participants)})})]})})]}),sn.jsx("div",{className:"mt-4",children:sn.jsxs("div",{className:"text-sm text-gray-500",children:[sn.jsx("span",{className:"font-medium text-gray-900",children:r.drops})," drops"]})})]})}),sn.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:sn.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[sn.jsxs("div",{className:"flex items-center",children:[sn.jsx("div",{className:"flex-shrink-0 bg-purple-500 rounded-md p-3",children:sn.jsx(bt,{className:"h-6 w-6 text-white"})}),sn.jsx("div",{className:"ml-5 w-0 flex-1",children:sn.jsxs("dl",{children:[sn.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Impressions"}),sn.jsx("dd",{className:"flex items-baseline",children:sn.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:g(r.impressions)})})]})})]}),sn.jsx("div",{className:"mt-4",children:sn.jsxs("div",{className:"text-sm text-gray-500",children:[sn.jsx("span",{className:"font-medium text-gray-900",children:g(r.clicks)})," clicks",sn.jsx("span",{className:"mx-1",children:""}),sn.jsxs("span",{children:[r.ctr,"% CTR"]})]})})]})}),sn.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:sn.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[sn.jsxs("div",{className:"flex items-center",children:[sn.jsx("div",{className:"flex-shrink-0 bg-yellow-500 rounded-md p-3",children:sn.jsx(Lr,{className:"h-6 w-6 text-white"})}),sn.jsx("div",{className:"ml-5 w-0 flex-1",children:sn.jsxs("dl",{children:[sn.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Performance"}),sn.jsxs("dd",{className:"flex items-baseline",children:[sn.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:f(r.cpc)}),sn.jsx("div",{className:"ml-2 flex items-baseline text-sm font-semibold text-green-600",children:sn.jsx("span",{children:(r.cpc<r.targetCpc?" ":" ")+Math.abs(r.cpc-r.targetCpc).toFixed(2)})})]})]})})]}),sn.jsx("div",{className:"mt-4",children:sn.jsx("div",{className:"text-sm text-gray-500",children:sn.jsxs("span",{children:["Target: ",f(r.targetCpc)," CPC"]})})})]})})]}),sn.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:sn.jsxs(EB,{defaultValue:"overview",onValueChange:h,className:"w-full",children:[sn.jsx("div",{className:"border-b border-gray-200",children:sn.jsxs(PB,{className:"bg-transparent p-0 rounded-none",children:[sn.jsx(TB,{value:"overview",className:"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none",children:"Overview"}),sn.jsx(TB,{value:"performance",className:"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none",children:"Performance"}),sn.jsxs(TB,{value:"content",className:"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none",children:["Content (",a.length,")"]}),sn.jsx(TB,{value:"settings",className:"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none",children:"Settings"})]})}),sn.jsxs("div",{className:"p-6",children:[sn.jsx(AB,{value:"overview",children:sn.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-3",children:[sn.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[sn.jsxs("section",{className:"bg-gray-50 p-4 rounded-lg",children:[sn.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Campaign Summary"}),sn.jsx("p",{className:"text-gray-700",children:r.description||"No description provided."}),sn.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-4 sm:grid-cols-2",children:[sn.jsxs("div",{children:[sn.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Objective"}),sn.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:r.objective.replace("_"," ")})]}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Bid Strategy"}),sn.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:"lowest_cost"===r.bidStrategy?"Lowest Cost":"cost_cap"===r.bidStrategy?"Cost Cap":"Bid Cap"})]}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Daily Budget"}),sn.jsx("p",{className:"mt-1 text-sm text-gray-900",children:f(r.dailyBudget)})]}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Est. End Date"}),sn.jsx("p",{className:"mt-1 text-sm text-gray-900",children:w?y(w.toISOString()):"N/A"})]})]})]}),sn.jsxs("section",{children:[sn.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Activity"}),sn.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:sn.jsxs("ul",{className:"divide-y divide-gray-200",children:[sn.jsx("li",{className:"px-4 py-4 sm:px-6",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("p",{className:"text-sm font-medium text-indigo-600 truncate",children:"Campaign created"}),sn.jsx("div",{className:"ml-2 flex-shrink-0",children:sn.jsx("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:y(r.createdAt)})})]})}),sn.jsx("li",{className:"px-4 py-4 sm:px-6",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("p",{className:"text-sm font-medium text-indigo-600 truncate",children:"Campaign started"}),sn.jsx("div",{className:"ml-2 flex-shrink-0",children:sn.jsx("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:y(r.startDate)})})]})}),r.updatedAt!==r.createdAt&&sn.jsx("li",{className:"px-4 py-4 sm:px-6",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsx("p",{className:"text-sm font-medium text-indigo-600 truncate",children:"Campaign updated"}),sn.jsx("div",{className:"ml-2 flex-shrink-0",children:sn.jsx("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:y(r.updatedAt)})})]})})]})})]})]}),sn.jsxs("div",{className:"space-y-8",children:[sn.jsxs("section",{children:[sn.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),sn.jsxs("div",{className:"space-y-3",children:[sn.jsxs(Il,{variant:"outline",className:"w-full justify-start",children:[sn.jsx(_r,{className:"mr-2 h-4 w-4"}),"Refresh Data"]}),sn.jsxs(Il,{variant:"outline",className:"w-full justify-start",children:[sn.jsx(Rt,{className:"mr-2 h-4 w-4"}),"Add Funds"]}),sn.jsxs(Il,{variant:"outline",className:"w-full justify-start",children:[sn.jsx(Nr,{className:"mr-2 h-4 w-4"}),"Add Content"]}),sn.jsxs(Il,{variant:"outline",className:"w-full justify-start text-red-600 hover:text-red-600",children:[sn.jsx(zr,{className:"mr-2 h-4 w-4"}),"Delete Campaign"]})]})]}),sn.jsxs("section",{children:[sn.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Performance Summary"}),sn.jsxs("div",{className:"space-y-4",children:[sn.jsxs("div",{children:[sn.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-1",children:[sn.jsx("span",{children:"Spend"}),sn.jsxs("span",{className:"font-medium",children:[f(r.spent)," / ",f(r.budget)]})]}),sn.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:sn.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(100,v)}%`}})})]}),sn.jsxs("div",{children:[sn.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-1",children:[sn.jsx("span",{children:"Daily Spend"}),sn.jsxs("span",{className:"font-medium",children:[f(j)," / day"]})]}),sn.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:sn.jsx("div",{className:Rl("h-2 rounded-full",j<=1.1*r.dailyBudget?"bg-green-500":"bg-yellow-500"),style:{width:`${Math.min(100,j/r.dailyBudget*100)}%`}})}),sn.jsx("p",{className:"mt-1 text-xs text-gray-500",children:j>1.1*r.dailyBudget?"Spending faster than daily budget":j<.9*r.dailyBudget?"Spending slower than daily budget":"On track with daily budget"})]}),sn.jsxs("div",{children:[sn.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-1",children:[sn.jsx("span",{children:"CPC"}),sn.jsxs("span",{className:"font-medium",children:[f(r.cpc),sn.jsxs("span",{className:Rl("ml-1",r.cpc<=1.1*r.targetCpc?"text-green-600":"text-red-600"),children:["(",r.cpc<=r.targetCpc?"":"",Math.abs(r.cpc-r.targetCpc).toFixed(2),")"]})]})]}),sn.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:sn.jsx("div",{className:Rl("h-2 rounded-full",r.cpc<=1.1*r.targetCpc?"bg-green-500":"bg-yellow-500"),style:{width:`${Math.min(100,r.cpc/(2*r.targetCpc)*100)}%`}})}),sn.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Target: ",f(r.targetCpc)]})]}),sn.jsxs("div",{children:[sn.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-1",children:[sn.jsx("span",{children:"CTR"}),sn.jsxs("span",{className:"font-medium",children:[r.ctr,"%",sn.jsxs("span",{className:Rl("ml-1",r.ctr>=.9*r.targetCtr?"text-green-600":"text-red-600"),children:["(",r.ctr>=r.targetCtr?"":"",Math.abs(r.ctr-r.targetCtr).toFixed(1),"%)"]})]})]}),sn.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:sn.jsx("div",{className:Rl("h-2 rounded-full",r.ctr>=.9*r.targetCtr?"bg-green-500":"bg-yellow-500"),style:{width:`${Math.min(100,r.ctr/(1.5*r.targetCtr)*100)}%`}})}),sn.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Target: ",r.targetCtr,"%"]})]})]})]})]})]})}),sn.jsx(AB,{value:"performance",children:sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{children:[sn.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Performance Over Time"}),sn.jsx("div",{className:"bg-gray-50 p-4 rounded-lg h-64 flex items-center justify-center",children:sn.jsx("p",{className:"text-gray-500",children:"Performance chart will be displayed here"})})]}),sn.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[sn.jsxs("div",{children:[sn.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Top Performing Content"}),sn.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:sn.jsx("ul",{className:"divide-y divide-gray-200",children:a.slice(0,3).map(e=>sn.jsx("li",{className:"px-4 py-4 sm:px-6",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex-1 min-w-0",children:[sn.jsx("p",{className:"text-sm font-medium text-indigo-600 truncate",children:e.title}),sn.jsx("div",{className:"flex mt-1",children:sn.jsxs("p",{className:"text-xs text-gray-500",children:[e.platform,"  ",e.creator]})})]}),sn.jsx("div",{className:"ml-4 flex-shrink-0",children:sn.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[e.ctr,"% CTR"]})})]})},e.id))})})]}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Performance by Platform"}),sn.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:sn.jsx("ul",{className:"divide-y divide-gray-200",children:Array.from(new Set(a.map(e=>e.platform))).map(e=>{const t=a.filter(t=>t.platform===e),r=t.reduce((e,t)=>e+t.spent,0),n=t.reduce((e,t)=>e+t.clicks,0),s=t.reduce((e,t)=>e+t.ctr,0)/t.length;return sn.jsx("li",{className:"px-4 py-4 sm:px-6",children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex-1 min-w-0",children:[sn.jsx("p",{className:"text-sm font-medium text-gray-900",children:e}),sn.jsx("div",{className:"flex mt-1",children:sn.jsxs("p",{className:"text-xs text-gray-500",children:[t.length," ",1===t.length?"item":"items"]})})]}),sn.jsxs("div",{className:"ml-4 flex-shrink-0",children:[sn.jsx("p",{className:"text-sm text-gray-900",children:f(r)}),sn.jsxs("p",{className:"text-xs text-gray-500",children:[n," clicks  ",s.toFixed(1),"% CTR"]})]})]})},e)})})})]})]}),sn.jsxs("div",{children:[sn.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Recommendations"}),sn.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:sn.jsxs("ul",{className:"divide-y divide-gray-200",children:[sn.jsx("li",{className:"px-4 py-4 sm:px-6",children:sn.jsxs("div",{className:"flex items-start",children:[sn.jsx("div",{className:"flex-shrink-0 pt-0.5",children:sn.jsx("div",{className:"flex items-center justify-center h-6 w-6 rounded-full bg-blue-100 text-blue-600",children:sn.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:sn.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})}),sn.jsx("div",{className:"ml-3 flex-1",children:sn.jsx("p",{className:"text-sm text-gray-700",children:"Your campaign is performing well! Consider increasing your daily budget to reach more people."})})]})}),sn.jsx("li",{className:"px-4 py-4 sm:px-6",children:sn.jsxs("div",{className:"flex items-start",children:[sn.jsx("div",{className:"flex-shrink-0 pt-0.5",children:sn.jsx("div",{className:"flex items-center justify-center h-6 w-6 rounded-full bg-blue-100 text-blue-600",children:sn.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:sn.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})}),sn.jsx("div",{className:"ml-3 flex-1",children:sn.jsx("p",{className:"text-sm text-gray-700",children:"Try A/B testing different ad creatives to improve your click-through rate."})})]})})]})})]})]})}),sn.jsxs(AB,{value:"content",children:[sn.jsxs("div",{className:"flex justify-between items-center mb-4",children:[sn.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Campaign Content"}),sn.jsxs(Il,{children:[sn.jsx(Nr,{className:"mr-2 h-4 w-4"}),"Add Content"]})]}),sn.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:sn.jsxs("ul",{className:"divide-y divide-gray-200",children:[a.map(e=>sn.jsx("li",{className:"hover:bg-gray-50",children:sn.jsx(Ve,{to:`/content/${e.id}`,className:"block",children:sn.jsxs("div",{className:"px-4 py-4 sm:px-6",children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center",children:[sn.jsx("p",{className:"text-lg font-medium text-indigo-600 truncate",children:e.title}),sn.jsx("div",{className:"ml-2",children:sn.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("live"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"approved"===e.status?"bg-blue-100 text-blue-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})})]}),sn.jsx("div",{className:"ml-2 flex-shrink-0 flex",children:sn.jsxs("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:[f(e.spent)," of ",f(e.budget)]})})]}),sn.jsxs("div",{className:"mt-2 sm:flex sm:justify-between",children:[sn.jsx("div",{className:"sm:flex",children:sn.jsxs("p",{className:"flex items-center text-sm text-gray-500",children:[sn.jsx("span",{className:"font-medium text-gray-900",children:e.platform}),sn.jsx("span",{className:"mx-1",children:""}),sn.jsxs("span",{children:["by @",e.creator]})]})}),sn.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0",children:[sn.jsx(bt,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),sn.jsxs("p",{children:[g(e.impressions)," impressions"]}),sn.jsx("span",{className:"mx-1",children:""}),sn.jsxs("p",{children:[g(e.clicks)," clicks"]}),sn.jsx("span",{className:"mx-1",children:""}),sn.jsxs("p",{children:[e.ctr,"% CTR"]})]})]}),sn.jsx("div",{className:"mt-2",children:sn.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:sn.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(100,e.spent/e.budget*100)}%`}})})})]})})},e.id)),0===a.length&&sn.jsxs("div",{className:"text-center py-12",children:[sn.jsx(bt,{className:"mx-auto h-12 w-12 text-gray-400"}),sn.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No content added yet"}),sn.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding content to your campaign."}),sn.jsx("div",{className:"mt-6",children:sn.jsxs(Il,{children:[sn.jsx(Nr,{className:"-ml-1 mr-2 h-5 w-5"}),"Add Content"]})})]})]})})]}),sn.jsx(AB,{value:"settings",children:sn.jsxs("div",{className:"space-y-8",children:[sn.jsxs("div",{children:[sn.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Campaign Settings"}),sn.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[sn.jsx("div",{className:"px-4 py-5 sm:px-6",children:sn.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Basic Information"})}),sn.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6",children:sn.jsxs("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2",children:[sn.jsxs("div",{className:"sm:col-span-1",children:[sn.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Campaign Name"}),sn.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:r.name})]}),sn.jsxs("div",{className:"sm:col-span-1",children:[sn.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),sn.jsx("dd",{className:"mt-1",children:sn.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${Jq[r.status]}`,children:r.status.charAt(0).toUpperCase()+r.status.slice(1)})})]}),sn.jsxs("div",{className:"sm:col-span-1",children:[sn.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Start Date"}),sn.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:y(r.startDate)})]}),sn.jsxs("div",{className:"sm:col-span-1",children:[sn.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"End Date"}),sn.jsxs("dd",{className:"mt-1 text-sm text-gray-900",children:[r.endDate?y(r.endDate):"No end date",r.endDate&&null!==b&&sn.jsxs("span",{className:"ml-2 text-gray-500",children:["(",b>0?`${b} days left`:"Ended",")"]})]})]}),sn.jsxs("div",{className:"sm:col-span-2",children:[sn.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Description"}),sn.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:r.description||"No description provided."})]})]})})]})]}),sn.jsxs("div",{children:[sn.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Budget & Bidding"}),sn.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[sn.jsx("div",{className:"px-4 py-5 sm:px-6",children:sn.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Budget Settings"})}),sn.jsxs("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6",children:[sn.jsxs("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2",children:[sn.jsxs("div",{className:"sm:col-span-1",children:[sn.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Total Budget"}),sn.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:f(r.budget)})]}),sn.jsxs("div",{className:"sm:col-span-1",children:[sn.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Daily Budget"}),sn.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:f(r.dailyBudget)})]}),sn.jsxs("div",{className:"sm:col-span-1",children:[sn.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Amount Spent"}),sn.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:f(r.spent)})]}),sn.jsxs("div",{className:"sm:col-span-1",children:[sn.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Remaining Budget"}),sn.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:f(r.budget-r.spent)})]})]}),sn.jsxs("div",{className:"mt-6",children:[sn.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-1",children:[sn.jsx("span",{children:"Budget Spent"}),sn.jsxs("span",{children:[Math.round(v),"%"]})]}),sn.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:sn.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(100,v)}%`}})})]})]})]}),sn.jsxs("div",{className:"mt-6 bg-white shadow overflow-hidden sm:rounded-lg",children:[sn.jsx("div",{className:"px-4 py-5 sm:px-6",children:sn.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Bidding Strategy"})}),sn.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6",children:sn.jsxs("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2",children:[sn.jsxs("div",{className:"sm:col-span-1",children:[sn.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Bid Strategy"}),sn.jsx("dd",{className:"mt-1 text-sm text-gray-900 capitalize",children:"lowest_cost"===r.bidStrategy?"Lowest Cost":"cost_cap"===r.bidStrategy?"Cost Cap":"Bid Cap"})]}),"lowest_cost"!==r.bidStrategy&&sn.jsxs("div",{className:"sm:col-span-1",children:[sn.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"cost_cap"===r.bidStrategy?"Cost Cap":"Bid Cap"}),sn.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:f(r.bidAmount)})]}),sn.jsxs("div",{className:"sm:col-span-1",children:[sn.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Target CPC"}),sn.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:f(r.targetCpc)})]}),sn.jsxs("div",{className:"sm:col-span-1",children:[sn.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Target CTR"}),sn.jsxs("dd",{className:"mt-1 text-sm text-gray-900",children:[r.targetCtr,"%"]})]})]})})]})]}),sn.jsx("div",{className:"pt-5",children:sn.jsxs("div",{className:"flex justify-end space-x-3",children:[sn.jsx(Il,{variant:"outline",type:"button",onClick:()=>t(-1),children:"Cancel"}),sn.jsxs(Il,{type:"button",variant:"destructive",children:[sn.jsx(zr,{className:"mr-2 h-4 w-4"}),"Delete Campaign"]}),sn.jsxs(Il,{type:"submit",children:[sn.jsx(Or,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})})]})})]})]})})]})}const Qq=u.forwardRef(({className:e="",...t},r)=>sn.jsx("input",{ref:r,className:`block w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-400 focus:border-orange-500 focus:outline-none focus:ring-1 focus:ring-orange-500 disabled:cursor-not-allowed disabled:bg-gray-100 disabled:text-gray-500 ${e}`.trim(),...t}));Qq.displayName="Input";const Xq=u.forwardRef(({className:e="",...t},r)=>sn.jsx("textarea",{ref:r,className:`block w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 disabled:cursor-not-allowed disabled:bg-gray-100 ${e}`,...t}));Xq.displayName="Textarea";const eW=u.createContext(null),tW=()=>{const e=u.useContext(eW);if(!e)throw new Error("Select components must be used within a Select");return e};function rW({value:e,defaultValue:t,onValueChange:r,children:n}){const[a,s]=React.useState(!1),[i,o]=React.useState(t),[l,c]=React.useState([]),d=e??i,u=React.useCallback(e=>{o(e),r?.(e)},[r]),h=React.useCallback(e=>(c(t=>{const r=t.findIndex(t=>t.value===e.value);if(r>=0){const n=[...t];return n[r]=e,n}return[...t,e]}),()=>{c(t=>t.filter(t=>t.value!==e.value))}),[]);return sn.jsx(eW.Provider,{value:{value:d,open:a,setOpen:s,onValueChange:u,registerItem:h,items:l},children:sn.jsx("div",{className:"relative inline-block w-full",children:n})})}const nW=u.forwardRef(({className:e="",children:t,...r},n)=>{const{setOpen:a,open:s}=tW();return sn.jsxs("button",{type:"button",ref:n,className:`flex w-full items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-2 text-left text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 ${e}`,"aria-haspopup":"listbox","aria-expanded":s,onClick:()=>a(!s),...r,children:[t,sn.jsx("svg",{className:"ml-2 h-4 w-4 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:sn.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.7a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0L5.25 8.29a.75.75 0 01-.02-1.08z",clipRule:"evenodd"})})]})});function aW({placeholder:e}){const{value:t,items:r}=tW(),n=r.find(e=>e.value===t);return sn.jsx("span",{className:"flex-1 truncate text-sm text-gray-900",children:n?n.label:e??"Select an option"})}function sW({className:e="",children:t,...r}){const{open:n}=tW();return n?sn.jsx("div",{role:"listbox",className:`absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md border border-gray-200 bg-white py-1 shadow-lg focus:outline-none ${e}`,...r,children:t}):null}nW.displayName="SelectTrigger";const iW=u.forwardRef(({className:e="",children:t,value:r,...n},a)=>{const{value:s,onValueChange:i,setOpen:o,registerItem:l}=tW();React.useEffect(()=>l({value:r,label:t}),[t,l,r]);const c=s===r,d=()=>{i(r),o(!1)};return sn.jsx("div",{ref:a,role:"option","aria-selected":c,className:`flex cursor-pointer items-center px-3 py-2 text-sm text-gray-900 hover:bg-gray-100 ${c?"bg-gray-100 font-medium":""} ${e}`,onClick:d,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),d())},tabIndex:0,...n,children:t})});function oW({selected:e,onChange:t,minDate:r,maxDate:n,className:a=""}){const s=e=>{if(!e)return"";return`${e.getFullYear()}-${`${e.getMonth()+1}`.padStart(2,"0")}-${`${e.getDate()}`.padStart(2,"0")}`};return sn.jsx("input",{type:"date",className:`block w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 disabled:cursor-not-allowed disabled:bg-gray-100 ${a}`,value:s(e),onChange:e=>t((e=>{if(!e)return null;const[t,r,n]=e.split("-").map(Number);return new Date(t,r-1,n)})(e.target.value)),min:s(r??null),max:s(n??null)})}iW.displayName="SelectItem";const lW="https://api.promorang.co";async function cW(e,t={}){const{skipAuth:r,headers:n,...a}=t,s="undefined"==typeof window||r?null:localStorage.getItem("auth_token"),i=new Headers({"Content-Type":"application/json",...n||{}});s&&!i.has("Authorization")&&i.set("Authorization",`Bearer ${s}`);const o=function(e){if("string"==typeof e&&(e.startsWith("http://")||e.startsWith("https://")))return e;const t=e.toString();return t.startsWith(lW)?t:`${lW}${t.startsWith("/")?"":"/"}${t}`}(e);try{const e=await fetch(o,{...a,headers:i,credentials:"include"});return await async function(e){const t=await e.json().catch(()=>({}));if(!e.ok){const r=new Error(t.error||"API request failed");throw r.status=e.status,r.data=t,r}return t}(e)}catch(l){throw l}}function dW(){const e=we(),[t,r]=u.useState(!1),[n,a]=u.useState({name:"",objective:"engagement",description:"",startDate:new Date,endDate:null,budget:1e3,dailyBudget:100,bidStrategy:"lowest_cost",bidAmount:5,targetCtr:2,targetCpc:.5,campaignType:"standard",audienceSize:1e3,locations:[],interests:[]}),{moveBalance:s,moveCost:i,calculateMoveCost:o}=function(){const{user:e}=bn(),[t,r]=u.useState(0),[n,a]=u.useState(null),[s,i]=u.useState(!1),[o,l]=u.useState(null);return u.useEffect(()=>{e&&(async()=>{try{const e=await cW("/api/users/me");if(!e.ok)throw new Error("Failed to load user");const t=await e.json();r(t.moves_balance||t.move_balance||0)}catch(e){l("Failed to load move balance")}})()},[e]),{moveBalance:t,moveCost:n,loading:s,error:o,calculateMoveCost:async e=>{i(!0),l(null);try{const t=await cW("/api/campaigns/calculate-move-cost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to calculate move cost");const r=await t.json();return a(r),r}catch(t){return l("Failed to calculate move cost"),null}finally{i(!1)}},hasEnoughMoves:e=>t>=e,refreshBalance:()=>{e&&cW("/api/users/me").then(async e=>{if(!e.ok)throw new Error("Failed to refresh balance");const t=await e.json();r(t.moves_balance||t.move_balance||0)}).catch(console.error)}}}(),[l,c]=u.useState(null),[d,h]=u.useState(!1);u.useEffect(()=>{(async()=>{const e=await o({campaignType:n.campaignType,duration:n.endDate?Math.ceil((n.endDate.getTime()-n.startDate.getTime())/864e5):7,audienceSize:n.audienceSize,locations:n.locations,interests:n.interests,isPremium:"premium"===n.campaignType});e&&(c(e.totalCost),h(s<e.totalCost))})()},[n,o,s]);const m=e=>{const{name:t,value:r}=e.target;a(e=>({...e,[t]:"name"===t||"description"===t?r:Number(r)}))},p=(e,t)=>{a(r=>({...r,[e]:t}))},x=(e,t)=>{a(r=>({...r,[e]:t}))};return sn.jsxs("div",{className:"space-y-6",children:[sn.jsxs("div",{className:"flex items-center space-x-4",children:[sn.jsxs(Il,{variant:"outline",size:"icon",onClick:()=>e(-1),className:"h-8 w-8",children:[sn.jsx(it,{className:"h-4 w-4"}),sn.jsx("span",{className:"sr-only",children:"Back"})]}),sn.jsxs("div",{children:[sn.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Campaign"}),sn.jsx("p",{className:"text-sm text-gray-500",children:"Set up a new marketing campaign to promote your brand"})]})]}),sn.jsx("form",{onSubmit:async t=>{if(t.preventDefault(),d)alert("You do not have enough moves to create this campaign. Please reduce the scope or purchase more moves.");else if(l){r(!0);try{const t=await fetch("/api/campaigns",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({...n,userId:localStorage.getItem("userId"),duration:n.endDate?Math.ceil((n.endDate.getTime()-n.startDate.getTime())/864e5):7})});if(!t.ok)throw new Error("Failed to create campaign");const r=await t.json();alert(`Campaign created successfully! ${r.movesSpent} moves deducted from your balance.`),e("/campaigns")}catch(a){alert(`Failed to create campaign: ${a.message}`)}finally{r(!1)}}else alert("Calculating move cost. Please wait...")},className:"space-y-8",children:sn.jsxs("div",{className:"space-y-8",children:[null!==l&&sn.jsxs("div",{className:Rl("p-4 rounded-lg border",d?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"),children:[sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{className:"flex items-center space-x-3",children:[sn.jsx(Qr,{className:Rl("h-5 w-5",d?"text-red-500":"text-blue-500")}),sn.jsxs("div",{children:[sn.jsx("p",{className:"font-medium",children:d?"Not enough moves":"Move cost"}),sn.jsxs("p",{className:"text-sm text-gray-600",children:[l," moves required (you have ",s,")"]})]})]}),d?sn.jsx(Il,{variant:"outline",size:"sm",onClick:()=>e("/account/billing"),children:"Get More Moves"}):sn.jsx("div",{className:"text-sm font-medium text-green-600",children:"Sufficient balance"})]}),i&&sn.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 text-xs text-gray-500",children:sn.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[sn.jsx("div",{children:"Base cost:"}),sn.jsxs("div",{className:"text-right",children:[i.baseCost," moves"]}),i.durationModifier>0&&sn.jsxs(sn.Fragment,{children:[sn.jsxs("div",{children:["Duration (",i.durationModifier.toFixed(1),"x):"]}),sn.jsxs("div",{className:"text-right",children:["+",Math.round(i.baseCost*i.durationModifier)," moves"]})]}),i.audienceModifier>0&&sn.jsxs(sn.Fragment,{children:[sn.jsxs("div",{children:["Audience size (",i.audienceModifier.toFixed(1),"x):"]}),sn.jsxs("div",{className:"text-right",children:["+",Math.round(i.baseCost*i.audienceModifier)," moves"]})]}),i.premiumModifier>0&&sn.jsxs(sn.Fragment,{children:[sn.jsxs("div",{children:["Premium features (",i.premiumModifier.toFixed(1),"x):"]}),sn.jsxs("div",{className:"text-right",children:["+",Math.round(i.baseCost*i.premiumModifier)," moves"]})]}),sn.jsx("div",{className:"font-medium",children:"Total cost:"}),sn.jsxs("div",{className:"text-right font-medium",children:[i.totalCost," moves"]})]})})]}),sn.jsxs("div",{className:"space-y-4",children:[sn.jsxs("div",{children:[sn.jsx("h3",{className:"text-lg font-medium",children:"Campaign Details"}),sn.jsx("p",{className:"text-sm text-gray-500",children:"Basic information about your campaign"})]}),sn.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[sn.jsxs("div",{className:"space-y-2",children:[sn.jsx("label",{htmlFor:"campaignType",className:"block text-sm font-medium text-gray-700",children:"Campaign Type"}),sn.jsxs(rW,{value:n.campaignType,onValueChange:e=>p("campaignType",e),children:[sn.jsx(nW,{children:sn.jsx(aW,{placeholder:"Select campaign type"})}),sn.jsx(sW,{children:[{value:"proof",label:"Proof Drop",description:"Test with a small audience",cost:"10 moves"},{value:"standard",label:"Standard Campaign",description:"Reach a larger audience",cost:"50 moves"},{value:"premium",label:"Premium Campaign",description:"Maximum reach and features",cost:"100 moves"}].map(e=>sn.jsx(iW,{value:e.value,children:sn.jsxs("div",{className:"flex items-center justify-between",children:[sn.jsxs("div",{children:[sn.jsx("div",{className:"font-medium",children:e.label}),sn.jsx("div",{className:"text-xs text-gray-500",children:e.description})]}),sn.jsx("div",{className:"text-sm text-gray-500",children:e.cost})]})},e.value))})]})]}),sn.jsxs("div",{className:"space-y-2",children:[sn.jsx("label",{htmlFor:"audienceSize",className:"block text-sm font-medium text-gray-700",children:"Target Audience Size"}),sn.jsx(Qq,{type:"number",name:"audienceSize",id:"audienceSize",min:"100",step:"100",value:n.audienceSize,onChange:m,required:!0}),sn.jsx("p",{className:"text-xs text-gray-500",children:"Larger audiences may require more moves"})]}),sn.jsxs("div",{className:"space-y-2",children:[sn.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Campaign Name"}),sn.jsx(Qq,{type:"text",name:"name",id:"name",value:n.name,onChange:m,required:!0})]}),sn.jsxs("div",{className:"sm:col-span-4",children:[sn.jsx("label",{htmlFor:"objective",className:"block text-sm font-medium text-gray-700",children:"Campaign Objective"}),sn.jsx("div",{className:"mt-1",children:sn.jsxs(rW,{value:n.objective,onValueChange:e=>p("objective",e),children:[sn.jsx(nW,{className:"w-full",children:sn.jsx(aW,{placeholder:"Select an objective"})}),sn.jsx(sW,{children:[{value:"awareness",label:"Brand Awareness"},{value:"engagement",label:"Engagement"},{value:"conversions",label:"Conversions"},{value:"traffic",label:"Traffic"},{value:"app_installs",label:"App Installs"},{value:"video_views",label:"Video Views"}].map(e=>sn.jsx(iW,{value:e.value,children:sn.jsxs("div",{className:"flex items-center",children:[sn.jsx(Lr,{className:"mr-2 h-4 w-4"}),e.label]})},e.value))})]})})]}),sn.jsxs("div",{className:"sm:col-span-6",children:[sn.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description (Optional)"}),sn.jsx("div",{className:"mt-1",children:sn.jsx(Xq,{id:"description",name:"description",rows:3,value:n.description,onChange:m,className:"w-full",placeholder:"Describe the purpose of this campaign..."})})]})]})]}),sn.jsx("div",{className:"bg-white shadow sm:rounded-lg",children:sn.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[sn.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Schedule & Budget"}),sn.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"When and how much you want to spend"}),sn.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[sn.jsxs("div",{className:"sm:col-span-3",children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),sn.jsx("div",{className:"mt-1",children:sn.jsx(oW,{selected:n.startDate,onChange:e=>x("startDate",e),minDate:new Date,className:"w-full"})})]}),sn.jsxs("div",{className:"sm:col-span-3",children:[sn.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Date (Optional)"}),sn.jsx("div",{className:"mt-1",children:sn.jsx(oW,{selected:n.endDate,onChange:e=>x("endDate",e),minDate:n.startDate,className:"w-full",isClearable:!0,placeholderText:"No end date"})})]}),sn.jsxs("div",{className:"sm:col-span-3",children:[sn.jsx("label",{htmlFor:"budget",className:"block text-sm font-medium text-gray-700",children:"Total Budget ($)"}),sn.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[sn.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:sn.jsx(Rt,{className:"h-5 w-5 text-gray-400"})}),sn.jsx(Qq,{type:"number",name:"budget",id:"budget",value:n.budget,onChange:m,min:"1",step:"0.01",className:"pl-10",required:!0})]})]}),sn.jsxs("div",{className:"sm:col-span-3",children:[sn.jsx("label",{htmlFor:"dailyBudget",className:"block text-sm font-medium text-gray-700",children:"Daily Budget ($)"}),sn.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[sn.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:sn.jsx(Rt,{className:"h-5 w-5 text-gray-400"})}),sn.jsx(Qq,{type:"number",name:"dailyBudget",id:"dailyBudget",value:n.dailyBudget,onChange:m,min:"1",step:"0.01",className:"pl-10",required:!0})]}),sn.jsx("p",{className:"mt-1 text-xs text-gray-500",children:n.endDate?`~${Math.ceil(n.budget/n.dailyBudget)} days of runtime`:"Will run until budget is spent"})]})]})]})}),sn.jsx("div",{className:"bg-white shadow sm:rounded-lg",children:sn.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[sn.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Bidding & Optimization"}),sn.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"How you want to bid and optimize your campaign"}),sn.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[sn.jsxs("div",{className:"sm:col-span-3",children:[sn.jsx("label",{htmlFor:"bidStrategy",className:"block text-sm font-medium text-gray-700",children:"Bid Strategy"}),sn.jsx("div",{className:"mt-1",children:sn.jsxs(rW,{value:n.bidStrategy,onValueChange:e=>p("bidStrategy",e),children:[sn.jsx(nW,{className:"w-full",children:sn.jsx(aW,{placeholder:"Select a bid strategy"})}),sn.jsx(sW,{children:[{value:"lowest_cost",label:"Lowest Cost"},{value:"cost_cap",label:"Cost Cap"},{value:"bid_cap",label:"Bid Cap"}].map(e=>sn.jsx(iW,{value:e.value,children:e.label},e.value))})]})}),sn.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["lowest_cost"===n.bidStrategy&&"Automatically get the most results for your budget","cost_cap"===n.bidStrategy&&"Control your average cost per result","bid_cap"===n.bidStrategy&&"Set a maximum bid for each result"]})]}),"lowest_cost"!==n.bidStrategy&&sn.jsxs("div",{className:"sm:col-span-3",children:[sn.jsxs("label",{htmlFor:"bidAmount",className:"block text-sm font-medium text-gray-700",children:["cost_cap"===n.bidStrategy?"Cost Cap":"Bid Cap"," ($)"]}),sn.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[sn.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:sn.jsx(Rt,{className:"h-5 w-5 text-gray-400"})}),sn.jsx(Qq,{type:"number",name:"bidAmount",id:"bidAmount",value:n.bidAmount,onChange:m,min:"0.01",step:"0.01",className:"pl-10",required:!0})]})]}),sn.jsxs("div",{className:"sm:col-span-3",children:[sn.jsx("label",{htmlFor:"targetCtr",className:"block text-sm font-medium text-gray-700",children:"Target CTR (%)"}),sn.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[sn.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:sn.jsx(br,{className:"h-5 w-5 text-gray-400"})}),sn.jsx(Qq,{type:"number",name:"targetCtr",id:"targetCtr",value:n.targetCtr,onChange:m,min:"0.1",max:"100",step:"0.1",className:"pl-10"})]})]}),sn.jsxs("div",{className:"sm:col-span-3",children:[sn.jsx("label",{htmlFor:"targetCpc",className:"block text-sm font-medium text-gray-700",children:"Target CPC ($)"}),sn.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[sn.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:sn.jsx(Rt,{className:"h-5 w-5 text-gray-400"})}),sn.jsx(Qq,{type:"number",name:"targetCpc",id:"targetCpc",value:n.targetCpc,onChange:m,min:"0.01",step:"0.01",className:"pl-10"})]})]})]})]})}),sn.jsxs("div",{className:"flex justify-end space-x-3",children:[sn.jsx(Il,{type:"button",variant:"outline",onClick:()=>e(-1),disabled:t,children:"Cancel"}),sn.jsx(Il,{type:"submit",disabled:t||d,className:Rl("relative overflow-hidden",d&&"opacity-70 cursor-not-allowed"),children:t?"Creating...":d?"Not Enough Moves":sn.jsxs(sn.Fragment,{children:[sn.jsxs("span",{className:"relative z-10",children:["Create Campaign (",l," moves)"]}),sn.jsx("span",{className:"absolute inset-y-0 left-0 bg-blue-600",style:{width:`${Math.min(100,s/(l||1)*100)}%`,transition:"width 0.3s ease"}})]})})]})]})})]})}class uW extends Error{constructor(e,r,n,a){super(e),t(this,"code"),t(this,"status"),t(this,"details"),this.name="ApiError",this.code=r,this.status=n,this.details=a}}const hW=async e=>{let t;e.url,e.status;try{t=await e.json()}catch(r){t={}}if(!e.ok){const r={code:t?.error?.code||"UNKNOWN_ERROR",message:t?.error?.message||`HTTP Error ${e.status}: ${e.statusText}`,details:t?.error?.details||{status:e.status,statusText:e.statusText}};throw new uW(r.message,r.code,e.status,r.details)}return{data:t,status:e.status}},mW=async(e,t={})=>{const r=`${cn}${e}`;try{const e={"Content-Type":"application/json",...Nl(),...t.headers},n=await fetch(r,{...t,method:"GET",headers:e,credentials:"include"});return n.status,n.statusText,Object.fromEntries(n.headers.entries()),hW(n)}catch(n){if(n instanceof uW)throw n;throw new uW("Network error occurred","NETWORK_ERROR",0,{url:e,method:"GET",originalError:n instanceof Error?n.message:String(n)})}},pW="/api/content",xW=async e=>{try{const t=await mW(`${pW}/${e}`);if(t.data,!t.data?.content)throw new Error("No content data received from API");return t.data.content}catch(t){throw new Error(`Failed to fetch content: ${t.message}`)}},fW=()=>{const{id:e}=Ne();we();const[t,r]=u.useState(null),[n,a]=u.useState(!0),[s,i]=u.useState(null),[o,l]=u.useState("");return u.useEffect(()=>{l("https://api.promorang.co");(async()=>{if(!e)return i("No content ID provided"),void a(!1);try{const t=await xW(e);r(t)}catch(t){try{const t=await fetch(`https://api.promorang.co/api/content/${e}`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=await t.json();r(n)}catch(n){i(n.message||"Failed to load content")}}finally{a(!1)}})()},[e]),n?sn.jsxs("div",{className:"container mx-auto p-4",children:[sn.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Loading Content..."}),sn.jsxs("div",{className:"space-y-4",children:[sn.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[sn.jsx("h2",{className:"font-semibold mb-2",children:"Debug Information:"}),sn.jsxs("pre",{className:"text-sm bg-white p-2 rounded border",children:["Content ID: ",e||"N/A","API Base: ",o||"Not set","Check the browser console for detailed logs."]})]}),sn.jsx(Il,{onClick:()=>window.location.reload(),variant:"outline",className:"mt-4",children:"Refresh Page"})]})]}):s?sn.jsxs("div",{className:"container mx-auto p-4",children:[sn.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[sn.jsx("strong",{className:"font-bold",children:"Error: "}),sn.jsx("span",{className:"block sm:inline",children:s})]}),sn.jsx("div",{className:"mt-4",children:sn.jsx(Il,{onClick:()=>window.location.reload(),variant:"outline",children:"Reload Page"})})]}):sn.jsxs("div",{className:"container mx-auto p-4",children:[sn.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Content Details"}),sn.jsx("pre",{className:"bg-gray-100 p-4 rounded overflow-auto",children:JSON.stringify(t,null,2)})]})};function gW({title:e,message:t}){const r=we(),n=ve().state,a=e||n?.title||"Page Not Found",s=t||n?.message||"The page you are looking for might have been removed or is temporarily unavailable.";return sn.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-white text-gray-800 px-4 py-12",children:sn.jsxs("div",{className:"max-w-md w-full text-center",children:[sn.jsx("h1",{className:"text-5xl font-bold text-red-500 mb-4",children:a}),sn.jsx("p",{className:"text-lg text-gray-600 mb-8",children:s}),sn.jsx("button",{onClick:()=>r("/"),className:"px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors duration-200",children:"Back to Home"})]})})}const yW=u.createContext(void 0);function bW({children:e}){const[t,r]=u.useState([]),n=u.useCallback(e=>{r(t=>t.filter(t=>t.id!==e))},[]),a=u.useCallback(({title:e,description:t,type:a="default",duration:s=5e3})=>{const i=Math.random().toString(36).substr(2,9);return r(r=>[...r,{id:i,title:e,description:t,type:a}]),s&&setTimeout(()=>n(i),s),i},[n]),s=u.useMemo(()=>({toasts:t,toast:a,dismissToast:n}),[t,a,n]);return sn.jsxs(yW.Provider,{value:s,children:[e,sn.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(e=>sn.jsx(vW,{id:e.id,title:e.title,description:e.description,type:e.type,onDismiss:()=>n(e.id)},e.id))})]})}const vW=({title:e,description:t,type:r="default",onDismiss:n})=>sn.jsx("div",{className:`p-4 rounded-md shadow-lg max-w-sm ${{default:"bg-white border border-gray-200",destructive:"bg-red-50 border-red-200 text-red-700",success:"bg-green-50 border-green-200 text-green-700",warning:"bg-yellow-50 border-yellow-200 text-yellow-700",info:"bg-blue-50 border-blue-200 text-blue-700"}[r]}`,children:sn.jsxs("div",{className:"flex justify-between items-start",children:[sn.jsxs("div",{className:"flex-1",children:[sn.jsx("h3",{className:"font-medium",children:e}),t&&sn.jsx("p",{className:"text-sm mt-1",children:t})]}),sn.jsx("button",{onClick:n,className:"ml-4 text-gray-500 hover:text-gray-700","aria-label":"Dismiss",children:sn.jsx(Jr,{className:"h-4 w-4"})})]})}),jW=()=>{const e=u.useContext(yW);if(!e)throw new Error("useToast must be used within a ToastProvider");return e};function wW(){const e=we();return u.useEffect(()=>{(async()=>{const{data:t,error:r}=await bl.auth.getSession();e(r?"/auth":t?.session?"/dashboard":"/auth",{replace:!0})})()},[e]),sn.jsx("div",{className:"flex h-screen items-center justify-center",children:sn.jsx("p",{className:"text-sm text-gray-600",children:"Finishing sign-in"})})}function NW({email:e,onEmailChange:t,onBack:r}){const[n,a]=u.useState(!1),{toast:s}=jW();return sn.jsxs("div",{className:"w-full space-y-6",children:[sn.jsxs("div",{className:"text-center",children:[sn.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Reset your password"}),sn.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),sn.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),e){a(!0);try{const{error:t}=await bl.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/auth/reset-password?type=recovery`});if(t)throw t;s({title:"Check your email",description:"We've sent you a link to reset your password.",type:"success"})}catch(r){s({title:"Error",description:r.message||"Failed to send password reset email",type:"destructive"})}finally{a(!1)}}},className:"space-y-6",children:[sn.jsxs("div",{children:[sn.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),sn.jsx("div",{className:"mt-1",children:sn.jsx(Qq,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:e=>t(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"you@example.com"})})]}),sn.jsx("div",{children:sn.jsx(Il,{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:n,children:n?"Sending reset link...":"Send reset link"})})]}),sn.jsxs("div",{className:"mt-6",children:[sn.jsxs("div",{className:"relative",children:[sn.jsx("div",{className:"absolute inset-0 flex items-center",children:sn.jsx("div",{className:"w-full border-t border-gray-300"})}),sn.jsx("div",{className:"relative flex justify-center text-sm",children:sn.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Remembered your password?"})})]}),sn.jsx("div",{className:"mt-6",children:sn.jsx(Il,{type:"button",variant:"outline",className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:r,children:"Back to sign in"})})]})]})}function _W({onSuccess:e}){const[t,r]=u.useState(""),[n,a]=u.useState(""),[s,i]=u.useState(""),[o,l]=u.useState(!1),[c,d]=u.useState(!0);Ze();const{toast:h}=jW(),m=we();u.useEffect(()=>{(async()=>{const{data:{session:e}}=await bl.auth.getSession();e||(d(!1),h({title:"Invalid or expired link",description:"The password reset link is invalid or has expired. Please request a new one.",type:"destructive"}))})()},[h]);return c?sn.jsxs("div",{className:"w-full space-y-6",children:[sn.jsxs("div",{className:"text-center",children:[sn.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Choose a new password"}),sn.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Create a new password that's secure and easy to remember."})]}),s&&sn.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded",children:sn.jsxs("div",{className:"flex",children:[sn.jsx("div",{className:"flex-shrink-0",children:sn.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:sn.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),sn.jsx("div",{className:"ml-3",children:sn.jsx("p",{className:"text-sm text-red-700",children:s})})]})}),sn.jsxs("form",{onSubmit:async r=>{if(r.preventDefault(),t===n)if(t.length<8)i("Password must be at least 8 characters long");else{l(!0),i("");try{const{error:r}=await bl.auth.updateUser({password:t});if(r)throw r;window.history.replaceState({},document.title,window.location.pathname),h({title:"Password updated",description:"Your password has been updated successfully. You can now sign in with your new password.",type:"success"}),e?e():m("/auth")}catch(a){i(a.message||"Failed to update password. The link may have expired.")}finally{l(!1)}}else i("Passwords do not match")},className:"space-y-6",children:[sn.jsxs("div",{children:[sn.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),sn.jsx("div",{className:"mt-1",children:sn.jsx(Qq,{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,minLength:8,value:t,onChange:e=>r(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:""})}),sn.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Must be at least 8 characters long"})]}),sn.jsxs("div",{children:[sn.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),sn.jsx("div",{className:"mt-1",children:sn.jsx(Qq,{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,minLength:8,value:n,onChange:e=>a(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:""})})]}),sn.jsx("div",{children:sn.jsx(Il,{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:o,children:o?"Updating password...":"Update Password"})})]})]}):sn.jsxs("div",{className:"text-center",children:[sn.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Invalid or Expired Link"}),sn.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"The password reset link is invalid or has expired. Please request a new one."}),sn.jsx("div",{className:"mt-6",children:sn.jsx(Il,{type:"button",onClick:()=>m("/auth/reset-password"),className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Request New Reset Link"})})]})}function kW({children:e,title:t,subtitle:r}){return sn.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[sn.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[sn.jsx(Ve,{to:"/",className:"flex justify-center",children:sn.jsx("img",{className:"h-12 w-auto",src:"/logo.svg",alt:"Your Company"})}),sn.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:t}),r&&sn.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:r})]}),sn.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:sn.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:e})})]})}function SW(){const[e]=Ze(),t=we(),[r,n]=u.useState(""),a=e.get("access_token"),s=e.get("type");return a&&"recovery"===s?sn.jsx(kW,{title:"Reset Your Password",children:sn.jsx(_W,{})}):sn.jsx(kW,{title:"Forgot Password",children:sn.jsx(NW,{email:r,onEmailChange:n,onBack:()=>t("/auth")})})}const CW=3e5;function OW(){!function(){const e=bn(),t=we(),{toast:r}=jW(),[n,a]=u.useState(!1),s=u.useRef(null),i=u.useRef(null),o=u.useRef(n);u.useEffect(()=>{o.current=n},[n]);const l=u.useCallback(()=>{s.current&&clearTimeout(s.current),i.current&&clearTimeout(i.current),a(!1),i.current=setTimeout(()=>{a(!0),r({title:"Session Expiring Soon",description:"You will be logged out due to inactivity in 5 minutes.",type:"warning",duration:1e4}),s.current=setTimeout(async()=>{try{await e.signOut(),t("/auth",{state:{sessionExpired:!0}}),r({title:"Session Expired",description:"You have been logged out due to inactivity.",type:"info"})}catch(n){r({title:"Error",description:"Failed to sign out. Please try again.",type:"destructive"})}},CW)},15e5)},[e,t,r]);u.useEffect(()=>{const e=["mousedown","mousemove","keypress","scroll","touchstart"],t=()=>{o.current&&r({title:"Session Extended",description:"Your session has been extended due to activity.",type:"success"}),l()};return e.forEach(e=>{window.addEventListener(e,t,{passive:!0})}),l(),()=>{e.forEach(e=>{window.removeEventListener(e,t)}),s.current&&clearTimeout(s.current),i.current&&clearTimeout(i.current)}},[l,r])}();const{signOut:e}=bn();return u.useEffect(()=>{const t=async()=>{"visible"===document.visibilityState&&await e()};return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}},[e]),null}function EW({children:e}){const{user:t,isLoading:r}=bn(),n=ve();return r?sn.jsx("div",{className:"min-h-screen flex items-center justify-center",children:sn.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):t?sn.jsx(sn.Fragment,{children:e}):sn.jsx(De,{to:"/auth",state:{from:n},replace:!0})}const PW=({children:e})=>sn.jsx(EW,{children:sn.jsx(Sl,{children:e})});function TW(){const{user:e}=bn(),t=ve(),r=new URLSearchParams(t.search),n=Object.fromEntries(r.entries()),a=(()=>{if(!e)return;return[e?.slug,e?.profile_slug,e?.username,e?.user_metadata?.username,e?.profile?.username,e?.email?e.email.split("@")[0]:void 0,e?.id?String(e.id):void 0].find(e=>"string"==typeof e&&e.trim().length>0)})();if(!a)return sn.jsx(De,{to:"/error",state:{message:"Profile unavailable"},replace:!0});const s=Sn(a,Object.keys(n).length?n:void 0);return sn.jsx(De,{to:s,replace:!0})}function AW({children:e,redirectAuthenticated:t=!0,redirectTo:r="/dashboard"}){const{user:n}=bn(),a=ve();if(t&&n){const e=a.state?.from?.pathname||r;return sn.jsx(De,{to:e,replace:!0})}return sn.jsx(sn.Fragment,{children:e})}const MW=()=>sn.jsx("div",{className:"min-h-screen flex items-center justify-center",children:sn.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-2 border-orange-500 border-t-transparent"})}),DW=()=>sn.jsxs($e,{children:[sn.jsx(Ie,{path:"/auth",element:sn.jsx(AW,{children:sn.jsx(ql,{})})}),sn.jsx(Ie,{path:"/auth/callback",element:sn.jsx(wW,{})}),sn.jsx(Ie,{path:"/auth/v1/callback",element:sn.jsx(wW,{})}),sn.jsx(Ie,{path:"/oauth/callback",element:sn.jsx(wW,{})}),sn.jsx(Ie,{path:"/auth/reset-password",element:sn.jsx(AW,{children:sn.jsx(SW,{})})}),sn.jsx(Ie,{path:"/auth/update-password",element:sn.jsx(AW,{children:sn.jsx(SW,{})})}),sn.jsx(Ie,{path:"/",element:sn.jsx(AW,{redirectAuthenticated:!1,children:sn.jsx(Bl,{})})}),sn.jsx(Ie,{path:"/dashboard",element:sn.jsx(PW,{children:sn.jsx(ou,{})})}),sn.jsx(Ie,{path:"/leaderboard",element:sn.jsx(PW,{children:sn.jsx(dn,{})})}),sn.jsx(Ie,{path:"/earn",element:sn.jsx(PW,{children:sn.jsx(du,{})})}),sn.jsx(Ie,{path:"/create",element:sn.jsx(PW,{children:sn.jsx(fu,{})})}),sn.jsx(Ie,{path:"/invest",element:sn.jsx(PW,{children:sn.jsx(yu,{})})}),sn.jsx(Ie,{path:"/wallet",element:sn.jsx(PW,{children:sn.jsx(QU,{})})}),sn.jsx(Ie,{path:"/growth-hub",element:sn.jsx(PW,{children:sn.jsx(sB,{})})}),sn.jsx(Ie,{path:"/profile",element:sn.jsx(PW,{children:sn.jsx(TW,{})})}),sn.jsx(Ie,{path:"/profile/:username",element:sn.jsx(PW,{children:sn.jsx(mB,{})})}),sn.jsx(Ie,{path:"/users/:username",element:sn.jsx(PW,{children:sn.jsx(hB,{isPublicProfile:!0})})}),sn.jsx(Ie,{path:"/users/id/:id",element:sn.jsx(PW,{children:sn.jsx(hB,{isPublicProfile:!0,useUserId:!0})})}),sn.jsx(Ie,{path:"/holding/:holdingId",element:sn.jsx(PW,{children:sn.jsx(_B,{})})}),sn.jsx(Ie,{path:"/portfolio/holdings/:holdingId",element:sn.jsx(PW,{children:sn.jsx(_B,{})})}),sn.jsx(Ie,{path:"/prediction/:predictionId",element:sn.jsx(PW,{children:sn.jsx(kB,{})})}),sn.jsx(Ie,{path:"/task/:taskId",element:sn.jsx(PW,{children:sn.jsx(CB,{})})}),sn.jsx(Ie,{path:"/advertiser",element:sn.jsx(PW,{children:sn.jsx(QB,{})})}),sn.jsx(Ie,{path:"/advertiser/onboarding",element:sn.jsx(PW,{children:sn.jsx(XB,{})})}),sn.jsx(Ie,{path:"/advertiser/campaigns",element:sn.jsx(PW,{children:sn.jsx(DB,{basePath:"/advertiser/campaigns"})})}),sn.jsx(Ie,{path:"/advertiser/campaigns/:campaignId",element:sn.jsx(PW,{children:sn.jsx(Zq,{})})}),sn.jsx(Ie,{path:"/campaigns",element:sn.jsx(PW,{children:sn.jsx(DB,{})})}),sn.jsx(Ie,{path:"/campaigns/new",element:sn.jsx(PW,{children:sn.jsx(dW,{})})}),sn.jsx(Ie,{path:"/campaigns/:campaignId",element:sn.jsx(PW,{children:sn.jsx(Zq,{})})}),sn.jsx(Ie,{path:"/content/:id",element:sn.jsx(EW,{children:sn.jsx(NB,{})})}),sn.jsx(Ie,{path:"/test-content/:id",element:sn.jsx(fW,{})}),sn.jsx(Ie,{path:"/home",element:sn.jsx(De,{to:"/dashboard",replace:!0})}),sn.jsx(Ie,{path:"/not-found",element:sn.jsx(gW,{})}),sn.jsx(Ie,{path:"/error",element:sn.jsx(on,{})}),sn.jsx(Ie,{path:"*",element:sn.jsx(gW,{})})]});function IW(){return u.useEffect(()=>{const e=e=>{},t=e=>{};return window.addEventListener("error",e),window.addEventListener("unhandledrejection",t),()=>{window.removeEventListener("error",e),window.removeEventListener("unhandledrejection",t)}},[]),sn.jsx(Ol,{children:sn.jsx(qe,{children:sn.jsx(yn,{children:sn.jsxs(bW,{children:[sn.jsx(OW,{}),sn.jsx(u.Suspense,{fallback:sn.jsx(MW,{}),children:sn.jsx(DW,{})})]})})})})}class RW extends u.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){if(this.state.hasError){const e=this.state.error instanceof Error?this.state.error.message:"An unknown error occurred";return this.props.fallback??sn.jsxs("div",{className:"p-6 text-red-600",children:[sn.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Something went wrong"}),sn.jsx("p",{className:"text-sm",children:e})]})}return this.props.children}}E.createRoot(document.getElementById("root")).render(sn.jsx(u.StrictMode,{children:sn.jsx(RW,{children:sn.jsx(u.Suspense,{fallback:sn.jsx("div",{className:"flex items-center justify-center min-h-screen",children:sn.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}),children:sn.jsx(IW,{})})})}));
