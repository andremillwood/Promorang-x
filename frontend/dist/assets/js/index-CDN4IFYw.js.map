{"version":3,"file":"index-CDN4IFYw.js","sources":["../../../src/react-app/utils/errorEncoder.ts","../../../src/react-app/pages/ErrorPage.tsx","../../../src/react-app/pages/Leaderboard.tsx","../../../src/react-app/config.ts","../../../src/react-app/hooks/useAuth.tsx","../../../src/react-app/components/UserLink.tsx","../../../src/react-app/components/Tooltip.tsx","../../../src/react-app/components/NotificationCenter.tsx","../../../src/react-app/components/CurrencyConversionModal.tsx","../../../src/react-app/components/MasterKeyModal.tsx","../../../src/react-app/components/InstagramVerificationModal.tsx","../../../src/react-app/components/UserTierUpgradeModal.tsx","../../../src/react-app/components/SearchModal.tsx","../../../src/react-app/components/GoldShopModal.tsx","../../../src/react-app/components/AchievementsModal.tsx","../../../src/react-app/hooks/useNotifications.tsx","../../../src/react-app/utils/api.ts","../../../src/react-app/components/Layout.tsx","../../../src/react-app/components/ErrorBoundary.tsx","../../../src/react-app/hooks/useAsyncData.ts","../../../src/components/ui/button.tsx","../../../src/lib/utils.ts","../../../src/react-app/components/FeatureCard.tsx","../../../src/react-app/components/Skeleton.tsx","../../../src/react-app/pages/Home.tsx","../../../src/react-app/pages/AuthPage.tsx","../../../src/react-app/pages/AuthCallback.tsx","../../../src/react-app/components/BuySharesModal.tsx","../../../src/react-app/components/ShareContentModal.tsx","../../../src/react-app/components/ExternalMoveModal.tsx","../../../src/shared/types.ts","../../../src/react-app/components/EditContentModal.tsx","../../../src/react-app/components/ConfirmationModal.tsx","../../../src/react-app/components/ShareModal.tsx","../../../src/react-app/components/SavedContentModal.tsx","../../../src/react-app/components/ButtonGroup.tsx","../../../src/react-app/components/StatBar.tsx","../../../src/react-app/components/ContentCard.tsx","../../../src/react-app/components/EnhancedDropCard.tsx","../../../src/react-app/components/PersonalizedEmptyState.tsx","../../../src/react-app/components/PlaceForecastModal.tsx","../../../src/react-app/components/TipModal.tsx","../../../src/react-app/pages/HomeFeed.tsx","../../../src/react-app/pages/Earn.tsx","../../../src/react-app/utils/errorHandler.ts","../../../src/react-app/pages/Create.tsx","../../../src/react-app/components/CreateForecastModal.tsx","../../../src/react-app/pages/Invest.tsx","../../../src/react-app/components/WithdrawalModal.tsx","../../../src/react-app/components/PaymentPreferencesModal.tsx","../../../src/react-app/components/GemStoreModal.tsx","../../../src/react-app/components/AuthDebugger.tsx","../../../src/react-app/services/sharesService.ts","../../../src/react-app/components/ListShareModal.tsx","../../../src/react-app/services/portfolioService.ts","../../../src/react-app/components/AnalyticsCharts.tsx","../../../src/react-app/pages/Wallet.tsx","../../../src/react-app/components/StakingModal.tsx","../../../src/react-app/components/FundingProjectModal.tsx","../../../src/react-app/components/SocialShieldModal.tsx","../../../src/react-app/pages/GrowthHub.tsx","../../../src/react-app/components/ReferralModal.tsx","../../../src/react-app/components/DropSubmissionModal.tsx","../../../src/react-app/components/ApplicationCard.tsx","../../../src/react-app/components/InfluenceRewardsModal.tsx","../../../src/react-app/components/EditProfileModal.tsx","../../../src/react-app/components/MakeOfferModal.tsx","../../../src/react-app/pages/Profile.tsx","../../../src/react-app/components/ContentFundingModal.tsx","../../../src/react-app/components/CommentSystem.tsx","../../../src/react-app/components/SponsorshipModal.tsx","../../../src/react-app/pages/ContentDetail.tsx","../../../src/react-app/pages/HoldingDetail.tsx","../../../src/react-app/pages/PredictionDetail.tsx","../../../src/react-app/components/EditDropModal.tsx","../../../src/react-app/pages/TaskDetail.tsx","../../../src/components/ui/tabs.tsx","../../../src/react-app/components/BrandProfileModal.tsx","../../../src/react-app/pages/Campaigns.tsx","../../../src/react-app/pages/AdvertiserDashboard.tsx","../../../src/react-app/pages/AdvertiserOnboarding.tsx","../../../src/react-app/pages/CampaignDetail.tsx","../../../src/components/ui/input.tsx","../../../src/components/ui/textarea.tsx","../../../src/components/ui/select.tsx","../../../src/components/ui/date-picker.tsx","../../../src/lib/api.ts","../../../src/react-app/hooks/useMoveCosts.ts","../../../src/react-app/pages/NewCampaign.tsx","../../../src/react-app/services/api.ts","../../../src/react-app/services/contentService.ts","../../../src/react-app/pages/TestContentDetailsPage.tsx","../../../src/react-app/pages/NotFound.tsx","../../../src/react-app/App.tsx","../../../src/app/ErrorBoundary.tsx","../../../src/react-app/main.tsx"],"sourcesContent":["// Error encoding utilities for user-friendly error codes\n\nexport interface ErrorInfo {\n  message: string;\n  stack?: string;\n  timestamp: number;\n  url: string;\n  userAgent: string;\n  userId?: string;\n  component?: string;\n  action?: string;\n}\n\n// Generate a short, user-friendly error code\nexport function generateErrorCode(errorInfo: ErrorInfo): string {\n  // Create a unique identifier based on error info\n  const data = `${errorInfo.message}|${errorInfo.timestamp}|${errorInfo.url}`;\n\n  // Use a simple hash to create a shorter code\n  let hash = 0;\n  for (let i = 0; i < data.length; i++) {\n    const char = data.charCodeAt(i);\n    hash = ((hash << 5) - hash) + char;\n    hash = hash & hash; // Convert to 32-bit integer\n  }\n\n  // Convert to positive number and format as 8-digit hex\n  const positiveHash = Math.abs(hash);\n  const shortCode = positiveHash.toString(16).toUpperCase().slice(-8).padStart(8, '0');\n\n  return `ERR-${shortCode}`;\n}\nexport function encodeErrorInfo(errorInfo: ErrorInfo): string {\n  try {\n    const jsonString = JSON.stringify(errorInfo);\n    return btoa(jsonString);\n  } catch (e) {\n    console.error('Failed to encode error info:', e);\n    return '';\n  }\n}\n\n// Decode error information from base64 string\nexport function decodeErrorInfo(encoded: string): ErrorInfo | null {\n  try {\n    const jsonString = atob(encoded);\n    return JSON.parse(jsonString) as ErrorInfo;\n  } catch (e) {\n    console.error('Failed to decode error info:', e);\n    return null;\n  }\n}\n\n// Create error info object from various error sources\nexport function createErrorInfo(\n  error: Error | string,\n  component?: string,\n  action?: string,\n  userId?: string\n): ErrorInfo {\n  const errorMessage = typeof error === 'string' ? error : error.message;\n  const stack = typeof error === 'object' ? error.stack : undefined;\n  \n  return {\n    message: errorMessage,\n    stack,\n    timestamp: Date.now(),\n    url: window.location.href,\n    userAgent: navigator.userAgent,\n    userId,\n    component,\n    action\n  };\n}\n\n// Navigate to error page with encoded error info\nexport function navigateToErrorPage(errorInfo: ErrorInfo): void {\n  const code = generateErrorCode(errorInfo);\n  const encoded = encodeErrorInfo(errorInfo);\n  \n  // Use replace to prevent back navigation to broken state\n  window.location.replace(`/error?code=${code}&data=${encoded}`);\n}\n\n// Handle critical errors by redirecting to error page\nexport function handleCriticalError(\n  error: Error | string,\n  component?: string,\n  action?: string,\n  userId?: string\n): void {\n  const errorInfo = createErrorInfo(error, component, action, userId);\n  navigateToErrorPage(errorInfo);\n}\n","import { useEffect, useState } from 'react';\nimport { useSearchParams, useNavigate, useLocation } from 'react-router-dom';\nimport { AlertTriangle, Home, RefreshCw, Copy, CheckCircle, ArrowLeft } from 'lucide-react';\nimport { decodeErrorInfo, type ErrorInfo } from '@/react-app/utils/errorEncoder';\n\ntype ErrorPageProps = {\n  title?: string;\n  message?: string;\n};\n\nexport default function ErrorPage({ title: propTitle, message: propMessage }: ErrorPageProps = {}) {\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [errorInfo, setErrorInfo] = useState<ErrorInfo | null>(null);\n  const [copied, setCopied] = useState(false);\n  \n  const errorCode = searchParams.get('code') || 'ERR-UNKNOWN';\n  const encodedData = searchParams.get('data');\n  \n  // Get error details from location state or props\n  const state = location.state as { title?: string; message?: string } | null;\n  const title = propTitle || state?.title || 'Something Went Wrong';\n  const message = propMessage || state?.message || 'An unexpected error occurred. Please try again later.';\n\n  useEffect(() => {\n    if (encodedData) {\n      try {\n        const decoded = decodeErrorInfo(encodedData);\n        setErrorInfo(decoded);\n      } catch (error) {\n        console.error('Failed to decode error info:', error);\n      }\n    }\n  }, [encodedData]);\n\n  const handleGoHome = () => {\n    navigate('/dashboard');\n  };\n\n  const handleRefresh = () => {\n    window.location.reload();\n  };\n\n  const handleCopyErrorCode = async () => {\n    try {\n      await navigator.clipboard.writeText(errorCode);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch (err) {\n      console.error('Failed to copy error code:', err);\n    }\n  };\n\n  const formatTimestamp = (timestamp: number) => {\n    return new Date(timestamp).toLocaleString();\n  };\n\n  const getErrorTitle = () => {\n    if (errorInfo?.component === 'upload') {\n      return 'Upload Failed';\n    }\n    if (errorInfo?.component === 'payment') {\n      return 'Payment Error';\n    }\n    if (errorInfo?.component === 'auth') {\n      return 'Authentication Error';\n    }\n    if (errorInfo?.action === 'create_content') {\n      return 'Content Creation Failed';\n    }\n    return 'Something Went Wrong';\n  };\n\n  const getErrorDescription = () => {\n    if (errorInfo?.component === 'upload') {\n      return 'We couldn\\'t process your file upload. This might be due to file size, format, or network issues.';\n    }\n    if (errorInfo?.component === 'payment') {\n      return 'There was an issue processing your payment. Your card was not charged.';\n    }\n    if (errorInfo?.component === 'auth') {\n      return 'We couldn\\'t verify your identity. Please try signing in again.';\n    }\n    if (errorInfo?.action === 'create_content') {\n      return 'We couldn\\'t create your content. Your data has been preserved and you can try again.';\n    }\n    return 'We encountered an unexpected error. Our team has been automatically notified.';\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center px-4\">\n      <div className=\"max-w-lg w-full bg-white rounded-2xl shadow-xl overflow-hidden\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-red-500 to-red-600 px-8 py-6 text-white\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center\">\n              <AlertTriangle className=\"w-6 h-6\" />\n            </div>\n            <div>\n              <h1 className=\"text-2xl font-bold\">{getErrorTitle()}</h1>\n              <p className=\"text-red-100 text-sm\">Error Code: {errorCode}</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"px-8 py-6\">\n          <p className=\"text-gray-600 mb-6 leading-relaxed\">\n            {getErrorDescription()}\n          </p>\n\n          {/* Error Code Card */}\n          <div className=\"bg-gray-50 rounded-lg p-4 mb-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-700\">Error Reference</p>\n                <p className=\"text-lg font-mono text-gray-900\">{errorCode}</p>\n              </div>\n              <button\n                onClick={handleCopyErrorCode}\n                className=\"flex items-center space-x-1 px-3 py-2 bg-white rounded-lg hover:bg-gray-100 transition-colors\"\n              >\n                {copied ? (\n                  <CheckCircle className=\"w-4 h-4 text-green-600\" />\n                ) : (\n                  <Copy className=\"w-4 h-4 text-gray-600\" />\n                )}\n                <span className=\"text-sm text-gray-600\">\n                  {copied ? 'Copied!' : 'Copy'}\n                </span>\n              </button>\n            </div>\n          </div>\n\n          {/* Additional Info */}\n          {errorInfo && (\n            <div className=\"bg-blue-50 rounded-lg p-4 mb-6\">\n              <p className=\"text-sm font-medium text-blue-800 mb-2\">\n                What happened?\n              </p>\n              <p className=\"text-sm text-blue-700 mb-2\">\n                Time: {formatTimestamp(errorInfo.timestamp)}\n              </p>\n              {errorInfo.action && (\n                <p className=\"text-sm text-blue-700\">\n                  Action: {errorInfo.action.replace('_', ' ')}\n                </p>\n              )}\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          <div className=\"space-y-3\">\n            <button\n              onClick={handleRefresh}\n              className=\"w-full bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2\"\n            >\n              <RefreshCw className=\"w-5 h-5\" />\n              <span>Try Again</span>\n            </button>\n            \n            <button\n              onClick={handleGoHome}\n              className=\"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2\"\n            >\n              <Home className=\"w-5 h-5\" />\n              <span>Back to Home</span>\n            </button>\n          </div>\n\n          {/* Help Text */}\n          <div className=\"mt-6 p-4 bg-yellow-50 rounded-lg\">\n            <p className=\"text-sm text-yellow-800\">\n              <strong>Need help?</strong> Share your error code <span className=\"font-mono\">{errorCode}</span> with our support team for faster assistance.\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { \n  Trophy, \n  Crown, \n  Star, \n  Zap, \n  Key, \n  Diamond,\n  Medal,\n  TrendingUp\n} from 'lucide-react';\n\ntype LeaderboardEntry = {\n  id: number;\n  display_name: string;\n  username: string;\n  avatar_url: string;\n  points_earned: number;\n  gems_earned: number;\n  keys_used: number;\n  gold_collected: number;\n  composite_score: number;\n};\n\nexport default function Leaderboard() {\n  const [period, setPeriod] = useState<'daily' | 'weekly' | 'monthly'>('daily');\n  const [leaderboard, setLeaderboard] = useState<LeaderboardEntry[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchLeaderboard();\n  }, [period]);\n\n  const fetchLeaderboard = async () => {\n    setLoading(true);\n    try {\n      const response = await fetch(`/api/leaderboard/${period}`);\n      const data = await response.json();\n      setLeaderboard(data);\n    } catch (error) {\n      console.error('Failed to fetch leaderboard:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getRankIcon = (rank: number) => {\n    switch (rank) {\n      case 1:\n        return <Crown className=\"w-6 h-6 text-yellow-500\" />;\n      case 2:\n        return <Medal className=\"w-6 h-6 text-gray-400\" />;\n      case 3:\n        return <Medal className=\"w-6 h-6 text-amber-600\" />;\n      default:\n        return <div className=\"w-6 h-6 flex items-center justify-center text-gray-600 font-bold text-sm\">#{rank}</div>;\n    }\n  };\n\n  const getRankStyle = (rank: number) => {\n    switch (rank) {\n      case 1:\n        return 'bg-gradient-to-r from-yellow-50 to-amber-50 border-yellow-200';\n      case 2:\n        return 'bg-gradient-to-r from-gray-50 to-slate-50 border-gray-200';\n      case 3:\n        return 'bg-gradient-to-r from-amber-50 to-orange-50 border-amber-200';\n      default:\n        return 'bg-white border-gray-200';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900 flex items-center space-x-3\">\n            <Trophy className=\"w-8 h-8 text-yellow-500\" />\n            <span>Leaderboard</span>\n          </h1>\n          <p className=\"text-gray-600 mt-2\">Top performers in the Promorang economy</p>\n        </div>\n      </div>\n\n      {/* Period Selector */}\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <div className=\"flex space-x-4\">\n          {[\n            { key: 'daily', label: 'Today', icon: Zap },\n            { key: 'weekly', label: 'This Week', icon: TrendingUp },\n            { key: 'monthly', label: 'This Month', icon: Star }\n          ].map((periodOption) => {\n            const Icon = periodOption.icon;\n            return (\n              <button\n                key={periodOption.key}\n                onClick={() => setPeriod(periodOption.key as any)}\n                className={`flex items-center space-x-2 px-6 py-3 rounded-lg font-medium transition-all duration-200 ${\n                  period === periodOption.key\n                    ? 'bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                <Icon className=\"w-4 h-4\" />\n                <span>{periodOption.label}</span>\n              </button>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Scoring Legend */}\n      <div className=\"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-6\">\n        <h3 className=\"text-lg font-semibold text-purple-900 mb-4\">Composite Score Formula</h3>\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-3 h-3 bg-blue-500 rounded-full\"></div>\n            <span className=\"text-sm text-purple-700\">Points × 0.25</span>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-3 h-3 bg-purple-500 rounded-full\"></div>\n            <span className=\"text-sm text-purple-700\">Gems × 0.40</span>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-3 h-3 bg-orange-500 rounded-full\"></div>\n            <span className=\"text-sm text-purple-700\">Keys × 0.15</span>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-3 h-3 bg-yellow-500 rounded-full\"></div>\n            <span className=\"text-sm text-purple-700\">Gold × 0.20</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Leaderboard */}\n      <div className=\"space-y-3\">\n        {leaderboard.length > 0 ? (\n          leaderboard.map((entry, index) => {\n            const rank = index + 1;\n            return (\n              <div\n                key={entry.id}\n                className={`border rounded-xl p-6 transition-all duration-200 hover:shadow-md ${getRankStyle(rank)}`}\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center space-x-4\">\n                    {getRankIcon(rank)}\n                    \n                    <div className=\"flex items-center space-x-3\">\n                      <img\n                        src={entry.avatar_url || '/default-avatar.png'}\n                        alt={entry.display_name}\n                        className=\"w-12 h-12 rounded-full object-cover\"\n                      />\n                      <div>\n                        <h3 className=\"font-semibold text-gray-900\">\n                          {entry.display_name || 'Anonymous User'}\n                        </h3>\n                        <p className=\"text-sm text-gray-600\">\n                          @{entry.username || 'user'}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center space-x-6\">\n                    {/* Points */}\n                    <div className=\"flex items-center space-x-2\">\n                      <Star className=\"w-4 h-4 text-blue-600\" />\n                      <div className=\"text-center\">\n                        <p className=\"font-semibold text-gray-900\">{entry.points_earned.toLocaleString()}</p>\n                        <p className=\"text-xs text-gray-600\">Points</p>\n                      </div>\n                    </div>\n\n                    {/* Gems */}\n                    <div className=\"flex items-center space-x-2\">\n                      <Diamond className=\"w-4 h-4 text-purple-600\" />\n                      <div className=\"text-center\">\n                        <p className=\"font-semibold text-gray-900\">{entry.gems_earned.toLocaleString()}</p>\n                        <p className=\"text-xs text-gray-600\">Gems</p>\n                      </div>\n                    </div>\n\n                    {/* Keys */}\n                    <div className=\"flex items-center space-x-2\">\n                      <Key className=\"w-4 h-4 text-orange-600\" />\n                      <div className=\"text-center\">\n                        <p className=\"font-semibold text-gray-900\">{entry.keys_used}</p>\n                        <p className=\"text-xs text-gray-600\">Keys</p>\n                      </div>\n                    </div>\n\n                    {/* Gold */}\n                    <div className=\"flex items-center space-x-2\">\n                      <Medal className=\"w-4 h-4 text-yellow-600\" />\n                      <div className=\"text-center\">\n                        <p className=\"font-semibold text-gray-900\">{entry.gold_collected}</p>\n                        <p className=\"text-xs text-gray-600\">Gold</p>\n                      </div>\n                    </div>\n\n                    {/* Composite Score */}\n                    <div className=\"text-center ml-6 pl-6 border-l border-gray-300\">\n                      <p className=\"text-xl font-bold text-gray-900\">{entry.composite_score.toFixed(1)}</p>\n                      <p className=\"text-xs text-gray-600\">Score</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          })\n        ) : (\n          <div className=\"text-center py-12\">\n            <Trophy className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No Rankings Yet</h3>\n            <p className=\"text-gray-600 mb-4\">\n              Be the first to earn points and climb the leaderboard!\n            </p>\n            <div className=\"space-y-2 text-sm text-gray-600\">\n              <p>• Complete drops to earn gems</p>\n              <p>• Engage with content to earn points</p>\n              <p>• Collect gold for prestige</p>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Bottom Stats */}\n      {leaderboard.length > 0 && (\n        <div className=\"bg-white border border-gray-200 rounded-xl p-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Competition Stats</h3>\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <div className=\"text-center\">\n              <p className=\"text-2xl font-bold text-blue-600\">\n                {leaderboard.reduce((sum, entry) => sum + entry.points_earned, 0).toLocaleString()}\n              </p>\n              <p className=\"text-sm text-gray-600\">Total Points</p>\n            </div>\n            <div className=\"text-center\">\n              <p className=\"text-2xl font-bold text-purple-600\">\n                {leaderboard.reduce((sum, entry) => sum + entry.gems_earned, 0).toLocaleString()}\n              </p>\n              <p className=\"text-sm text-gray-600\">Total Gems</p>\n            </div>\n            <div className=\"text-center\">\n              <p className=\"text-2xl font-bold text-orange-600\">\n                {leaderboard.reduce((sum, entry) => sum + entry.keys_used, 0)}\n              </p>\n              <p className=\"text-sm text-gray-600\">Keys Used</p>\n            </div>\n            <div className=\"text-center\">\n              <p className=\"text-2xl font-bold text-yellow-600\">\n                {leaderboard.reduce((sum, entry) => sum + entry.gold_collected, 0)}\n              </p>\n              <p className=\"text-sm text-gray-600\">Gold Earned</p>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","// API Configuration\nconst LOCAL_API_URL = 'http://localhost:3001';\n\n// Use VITE_API_URL from environment, fallback to local development URL\nconst DEFAULT_API_BASE = import.meta.env.VITE_API_URL || LOCAL_API_URL;\n\n// Log environment and configuration for debugging\nconsole.group('API Configuration');\nconsole.log('Environment:', import.meta.env.MODE);\nconsole.log('VITE_API_URL from env:', import.meta.env.VITE_API_URL);\nconsole.log('Using API Base URL:', DEFAULT_API_BASE);\nconsole.groupEnd();\n\n// Add to global scope for debugging in browser console\nif (typeof window !== 'undefined') {\n  (window as any).__API_CONFIG = {\n    env: import.meta.env.MODE,\n    viteApiUrl: import.meta.env.VITE_API_URL,\n    apiBase: DEFAULT_API_BASE,\n    timestamp: new Date().toISOString()\n  };\n}\n\n// Honour VITE_API_URL when provided in the environment\nconst configuredApiBase = import.meta.env.VITE_API_URL || DEFAULT_API_BASE;\nconst resolvedBase = configuredApiBase;\n\nconst sanitizedBase = (() => {\n  if (!resolvedBase) return '';\n  const trimmed = resolvedBase.replace(/\\/+$/, '');\n  // Remove a trailing \"/api\" to avoid creating \"/api/api/*\" routes\n  return trimmed.replace(/\\/api$/, '');\n})();\n\nexport const API_BASE_URL = sanitizedBase;\nconst prefix = sanitizedBase;\n\nexport const API_ENDPOINTS = {\n  AUTH: {\n    LOGIN: `${prefix}/api/auth/login`,\n    REGISTER: `${prefix}/api/auth/register`,\n    DEMO: (type: string) => `${prefix}/api/auth/demo/${type}`,\n    OAUTH: (provider: string) => `${prefix}/api/auth/oauth/${provider}`,\n    LOGOUT: `${prefix}/api/auth/logout`,\n    ME: `${prefix}/api/auth/me`\n  },\n  // Add other API endpoints as needed\n};\n","import React, { createContext, useContext, useEffect, useState } from 'react';\nimport { API_ENDPOINTS } from '../config';\n\ninterface User {\n  id: string;\n  email: string;\n  username?: string;\n  display_name?: string;\n  user_type?: string;\n  points_balance?: number;\n  keys_balance?: number;\n  gems_balance?: number;\n  gold_collected?: number;\n  user_tier?: string;\n  avatar_url?: string;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  isPending: boolean;\n  signIn: (email: string, password: string) => Promise<{ error: any }>;\n  signUp: (email: string, password: string) => Promise<{ error: any }>;\n  signInWithOAuth: (provider: 'google' | 'github' | 'discord') => Promise<{ error: any }>;\n  demoLogin: {\n    creator: () => Promise<{ error: any }>;\n    investor: () => Promise<{ error: any }>;\n    advertiser: () => Promise<{ error: any }>;\n  };\n  signOut: () => Promise<{ error: any }>;\n  logout: () => Promise<{ error: any }>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nconst decodeJwtPayload = (token: string) => {\n  try {\n    const [, payload] = token.split('.');\n    if (!payload) return null;\n    const base64 = payload.replace(/-/g, '+').replace(/_/g, '/');\n    const jsonPayload = decodeURIComponent(\n      atob(base64)\n        .split('')\n        .map((c) => `%${(`00${c.charCodeAt(0).toString(16)}`).slice(-2)}`)\n        .join('')\n    );\n    return JSON.parse(jsonPayload);\n  } catch (error) {\n    console.warn('Failed to decode JWT payload:', error);\n    return null;\n  }\n};\n\nconst userFromToken = (token: string): User | null => {\n  const payload = decodeJwtPayload(token);\n  if (!payload) return null;\n\n  const id = payload.id || payload.sub || payload.user_id || payload.email;\n  if (!id) return null;\n\n  return {\n    id: String(id),\n    email: payload.email,\n    username: payload.username,\n    display_name: payload.display_name || payload.username || payload.email?.split('@')[0],\n    user_type: payload.user_type,\n    points_balance: payload.points_balance,\n    keys_balance: payload.keys_balance,\n    gems_balance: payload.gems_balance,\n    gold_collected: payload.gold_collected,\n    user_tier: payload.user_tier,\n    avatar_url: payload.avatar_url\n  };\n};\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [isPending, setIsPending] = useState(false);\n\n  const persistSession = (token?: string, incomingUser?: User | null) => {\n    if (token) {\n      localStorage.setItem('authToken', token);\n    }\n    const resolvedUser = incomingUser ?? (token ? userFromToken(token) : null);\n    if (resolvedUser) {\n      setUser(resolvedUser);\n    }\n  };\n\n  // Handle API responses consistently\n  const handleApiResponse = async (response: Response) => {\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.error || 'Something went wrong');\n    }\n    return data;\n  };\n\n  // Sign in with email and password\n  const signIn = async (email: string, password: string) => {\n    setIsPending(true);\n    try {\n      const response = await fetch(API_ENDPOINTS.AUTH.LOGIN, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, password }),\n        credentials: 'include'\n      });\n      \n      const data = await handleApiResponse(response);\n      persistSession(data.token, data.user);\n      return { error: null };\n    } catch (error: any) {\n      return { error: error.message };\n    } finally {\n      setIsPending(false);\n    }\n  };\n\n  // Register new user\n  const signUp = async (email: string, password: string) => {\n    setIsPending(true);\n    try {\n      const response = await fetch(API_ENDPOINTS.AUTH.REGISTER, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, password }),\n        credentials: 'include'\n      });\n      \n      const data = await handleApiResponse(response);\n      persistSession(data.token, data.user);\n      return { error: null };\n    } catch (error: any) {\n      return { error: error.message };\n    } finally {\n      setIsPending(false);\n    }\n  };\n\n  // OAuth login\n  const signInWithOAuth = async (provider: 'google' | 'github' | 'discord') => {\n    try {\n      // Redirect to OAuth provider\n      window.location.href = API_ENDPOINTS.AUTH.OAUTH(provider);\n      return { error: null };\n    } catch (error: any) {\n      return { error: error.message };\n    }\n  };\n\n  // Demo login handler\n  const handleDemoLogin = async (type: 'creator' | 'investor' | 'advertiser') => {\n    setIsPending(true);\n    const url = API_ENDPOINTS.AUTH.DEMO(type);\n    console.log('Demo login URL:', url);\n    \n    try {\n      console.log('Sending demo login request to:', url);\n      const response = await fetch(url, {\n        method: 'POST',\n        credentials: 'include', // Changed back to 'include' for cross-origin requests\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n        },\n        body: JSON.stringify({}), // Add empty body to ensure POST works\n      });\n      \n      console.log('Response status:', response.status, response.statusText);\n      \n      if (!response.ok) {\n        let errorText;\n        try {\n          const errorData = await response.json();\n          errorText = errorData.error || response.statusText;\n        } catch (e) {\n          errorText = await response.text();\n        }\n        console.error('Demo login failed:', errorText);\n        throw new Error(errorText || `HTTP error! status: ${response.status}`);\n      }\n      \n      const data = await response.json();\n      console.log('Demo login successful:', data);\n      \n      if (!data.token) {\n        throw new Error('No token received in response');\n      }\n\n      persistSession(data.token, data.user ?? null);\n      return { error: null };\n    } catch (error: any) {\n      console.error('Error in demo login:', error);\n      return { error: error.message || 'Failed to log in with demo account' };\n    } finally {\n      setIsPending(false);\n    }\n  };\n\n  // Sign out\n  const signOut = async () => {\n    try {\n      await fetch(API_ENDPOINTS.AUTH.LOGOUT, {\n        method: 'POST',\n        credentials: 'include'\n      });\n    } catch (error) {\n      console.error('Error during sign out:', error);\n    } finally {\n      setUser(null);\n      localStorage.removeItem('authToken');\n      return { error: null };\n    }\n  };\n\n  // Check for existing session on initial load\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        const token = localStorage.getItem('authToken');\n        if (token) {\n          const response = await fetch(API_ENDPOINTS.AUTH.ME, {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            },\n            credentials: 'include'\n          });\n          \n          if (response.ok) {\n            const data = await response.json();\n            persistSession(token, data.user);\n          } else if (response.status === 401 || response.status === 403) {\n            localStorage.removeItem('authToken');\n            setUser(null);\n          } else {\n            const fallbackUser = userFromToken(token);\n            if (fallbackUser) {\n              setUser((prev: User | null) => prev ?? fallbackUser);\n            }\n          }\n        }\n      } catch (error) {\n        console.error('Auth check failed:', error);\n        const token = localStorage.getItem('authToken');\n        const fallbackUser = token ? userFromToken(token) : null;\n        if (fallbackUser) {\n          setUser((prev: User | null) => prev ?? fallbackUser);\n        }\n      }\n    };\n\n    checkAuth();\n  }, []);\n\n  const value: AuthContextType = {\n    user,\n    isPending,\n    signIn,\n    signUp,\n    signInWithOAuth,\n    demoLogin: {\n      creator: () => handleDemoLogin('creator'),\n      investor: () => handleDemoLogin('investor'),\n      advertiser: () => handleDemoLogin('advertiser')\n    },\n    signOut,\n    logout: () => signOut(),\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n","import { Link } from \"react-router-dom\";\nimport { User } from 'lucide-react';\n\ninterface UserLinkProps {\n  username?: string | null;\n  userId?: number | null;\n  displayName?: string | null;\n  avatarUrl?: string | null;\n  className?: string;\n  showAvatar?: boolean;\n  size?: 'sm' | 'md' | 'lg';\n}\n\nexport default function UserLink({ \n  username,\n  userId, \n  displayName, \n  avatarUrl, \n  className = '', \n  showAvatar = true,\n  size = 'md' \n}: UserLinkProps) {\n  const sizeClasses = {\n    sm: 'w-6 h-6 text-xs',\n    md: 'w-8 h-8 text-sm',\n    lg: 'w-10 h-10 text-base'\n  };\n\n  // If no username or userId but we have displayName, show as text with proper styling\n  if (!username && !userId) {\n    return (\n      <div className={`flex items-center space-x-2 ${className}`}>\n        {showAvatar && (\n          <div className={`${sizeClasses[size]} rounded-full overflow-hidden bg-gray-200 flex items-center justify-center`}>\n            {avatarUrl ? (\n              <img\n                src={avatarUrl}\n                alt={displayName || 'User'}\n                className=\"w-full h-full object-cover\"\n              />\n            ) : (\n              <User className=\"w-1/2 h-1/2 text-gray-500\" />\n            )}\n          </div>\n        )}\n        <span className=\"font-medium text-gray-900\">\n          {displayName || 'User'}\n        </span>\n      </div>\n    );\n  }\n\n  // Determine the link URL - prefer username, fallback to userId\n  const linkUrl = username ? `/users/${username}` : (userId ? `/users/id/${userId}` : '#');\n\n  return (\n    <Link \n      to={linkUrl}\n      className={`flex items-center space-x-2 hover:text-orange-600 transition-colors ${className}`}\n    >\n      {showAvatar && (\n        <div className={`${sizeClasses[size]} rounded-full overflow-hidden bg-gray-200 flex items-center justify-center`}>\n          {avatarUrl ? (\n            <img\n              src={avatarUrl}\n              alt={displayName || username || `User #${userId}`}\n              className=\"w-full h-full object-cover\"\n            />\n          ) : (\n            <User className=\"w-1/2 h-1/2 text-gray-500\" />\n          )}\n        </div>\n      )}\n      <span className=\"font-medium\">\n        {displayName || username || `User #${userId}`}\n      </span>\n    </Link>\n  );\n}\n","import { ReactNode, useState, useRef, useEffect } from 'react';\n\ninterface TooltipProps {\n  content: string | ReactNode;\n  children: ReactNode;\n  position?: 'top' | 'bottom' | 'left' | 'right' | 'auto';\n  delay?: number;\n  disabled?: boolean;\n  className?: string;\n  maxWidth?: string;\n  allowWrap?: boolean;\n  compact?: boolean;\n}\n\nexport default function Tooltip({ \n  content, \n  children, \n  position = 'auto', \n  delay = 300,\n  disabled = false,\n  className = '',\n  maxWidth,\n  allowWrap = true,\n  compact = false\n}: TooltipProps) {\n  const [isVisible, setIsVisible] = useState(false);\n  const [actualPosition, setActualPosition] = useState<'top' | 'bottom' | 'left' | 'right'>('top');\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const tooltipRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n        timeoutRef.current = null;\n      }\n    };\n  }, []);\n\n  const calculatePosition = () => {\n    if (!containerRef.current || !tooltipRef.current) return;\n\n    const triggerRect = containerRef.current.getBoundingClientRect();\n    const tooltipRect = tooltipRef.current.getBoundingClientRect();\n    const viewport = {\n      width: window.innerWidth,\n      height: window.innerHeight\n    };\n\n    // Space available in each direction\n    const spaceTop = triggerRect.top;\n    const spaceBottom = viewport.height - triggerRect.bottom;\n    const spaceLeft = triggerRect.left;\n    const spaceRight = viewport.width - triggerRect.right;\n\n    // Required space for tooltip (with some buffer)\n    const tooltipHeight = tooltipRect.height || 40; // fallback height\n    const tooltipWidth = tooltipRect.width || 120; // fallback width\n    const buffer = 8;\n\n    let bestPosition: 'top' | 'bottom' | 'left' | 'right' = 'top';\n\n    if (position === 'auto') {\n      // Auto-determine best position based on available space\n      if (spaceTop >= tooltipHeight + buffer) {\n        bestPosition = 'top';\n      } else if (spaceBottom >= tooltipHeight + buffer) {\n        bestPosition = 'bottom';\n      } else if (spaceRight >= tooltipWidth + buffer) {\n        bestPosition = 'right';\n      } else if (spaceLeft >= tooltipWidth + buffer) {\n        bestPosition = 'left';\n      } else {\n        // Default to top if no space is adequate\n        bestPosition = spaceTop >= spaceBottom ? 'top' : 'bottom';\n      }\n    } else {\n      // Use the specified position, but check if it fits\n      switch (position) {\n        case 'top':\n          bestPosition = spaceTop >= tooltipHeight + buffer ? 'top' : 'bottom';\n          break;\n        case 'bottom':\n          bestPosition = spaceBottom >= tooltipHeight + buffer ? 'bottom' : 'top';\n          break;\n        case 'left':\n          bestPosition = spaceLeft >= tooltipWidth + buffer ? 'left' : 'right';\n          break;\n        case 'right':\n          bestPosition = spaceRight >= tooltipWidth + buffer ? 'right' : 'left';\n          break;\n      }\n    }\n\n    setActualPosition(bestPosition);\n  };\n\n  const handleMouseEnter = () => {\n    if (disabled) return;\n    \n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n    \n    timeoutRef.current = setTimeout(() => {\n      setIsVisible(true);\n      // Calculate position after tooltip becomes visible\n      setTimeout(() => calculatePosition(), 0);\n    }, delay);\n  };\n\n  const handleMouseLeave = () => {\n    setIsVisible(false);\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n  };\n\n  const getTooltipClasses = () => {\n    const baseClasses = `\n      absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg \n      pointer-events-none transition-all duration-200 ease-out leading-5\n      ${isVisible ? 'opacity-100 scale-100' : 'opacity-0 scale-95'}\n    `;\n\n    const positionClasses = {\n      top: 'bottom-full left-1/2 transform -translate-x-1/2 mb-2',\n      bottom: 'top-full left-1/2 transform -translate-x-1/2 mt-2',\n      left: 'right-full top-1/2 transform -translate-y-1/2 mr-2',\n      right: 'left-full top-1/2 transform -translate-y-1/2 ml-2'\n    };\n\n    return `${baseClasses} ${positionClasses[actualPosition]}`;\n  };\n\n  const getDynamicMaxWidth = () => {\n    if (maxWidth) return maxWidth;\n    \n    const contentLength = typeof content === 'string' ? content.length : 100;\n    \n    if (compact || contentLength < 20) return '180px';\n    if (contentLength < 40) return '220px';\n    if (contentLength < 80) return '280px';\n    return '320px';\n  };\n\n  const getArrowClasses = () => {\n    const arrowClasses = {\n      top: 'top-full left-1/2 transform -translate-x-1/2 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900',\n      bottom: 'bottom-full left-1/2 transform -translate-x-1/2 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-900',\n      left: 'left-full top-1/2 transform -translate-y-1/2 border-t-4 border-b-4 border-l-4 border-transparent border-l-gray-900',\n      right: 'right-full top-1/2 transform -translate-y-1/2 border-t-4 border-b-4 border-r-4 border-transparent border-r-gray-900'\n    };\n\n    return `absolute ${arrowClasses[actualPosition]}`;\n  };\n\n  if (disabled || !content) {\n    return <>{children}</>;\n  }\n\n  return (\n    <div\n      ref={containerRef}\n      className={`relative inline-block ${className}`}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n      onFocus={handleMouseEnter}\n      onBlur={handleMouseLeave}\n    >\n      {children}\n      \n      {isVisible && (\n        <div \n          ref={tooltipRef}\n          className={getTooltipClasses()}\n          style={{ \n            maxWidth: getDynamicMaxWidth(),\n            minWidth: compact ? 'auto' : '120px',\n            whiteSpace: allowWrap ? 'normal' : 'nowrap',\n            wordWrap: allowWrap ? 'break-word' : 'normal',\n            hyphens: allowWrap ? 'auto' : 'none'\n          }}\n          role=\"tooltip\"\n          aria-hidden={!isVisible}\n        >\n          {content}\n          <div className={getArrowClasses()}></div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { Bell, X, Check, Trophy, Star, Coins, AlertCircle, Info } from 'lucide-react';\nimport { useAuth } from '../hooks/useAuth';\n\ninterface Notification {\n  id: string;\n  type: 'achievement' | 'reward' | 'system' | 'social' | 'warning';\n  title: string;\n  message: string;\n  timestamp: Date;\n  read: boolean;\n  actionUrl?: string;\n  data?: any;\n}\n\ninterface NotificationCenterProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport default function NotificationCenter({ isOpen, onClose }: NotificationCenterProps) {\n  const { user } = useAuth();\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (isOpen && user) {\n      fetchNotifications();\n    }\n  }, [isOpen, user]);\n\n  const fetchNotifications = async () => {\n    setLoading(true);\n    try {\n      // For now, we'll use mock data since we don't have a notifications API yet\n      const mockNotifications: Notification[] = [\n        {\n          id: '1',\n          type: 'achievement',\n          title: 'Achievement Unlocked!',\n          message: 'You earned the \"First Steps\" achievement and received 50 gold!',\n          timestamp: new Date(Date.now() - 1000 * 60 * 30), // 30 minutes ago\n          read: false,\n          data: { achievement: 'first_steps', gold_reward: 50 }\n        },\n        {\n          id: '2',\n          type: 'reward',\n          title: 'Points Earned',\n          message: 'You earned 25 points from sharing content!',\n          timestamp: new Date(Date.now() - 1000 * 60 * 60 * 2), // 2 hours ago\n          read: false,\n          data: { points_earned: 25, action: 'content_share' }\n        },\n        {\n          id: '3',\n          type: 'system',\n          title: 'Master Key Activated',\n          message: 'Your master key for today has been activated. You can now apply to drops!',\n          timestamp: new Date(Date.now() - 1000 * 60 * 60 * 4), // 4 hours ago\n          read: true\n        },\n        {\n          id: '4',\n          type: 'social',\n          title: 'New Follower',\n          message: 'PromoCreator just followed you!',\n          timestamp: new Date(Date.now() - 1000 * 60 * 60 * 8), // 8 hours ago\n          read: true,\n          actionUrl: '/users/promocreator'\n        }\n      ];\n      \n      setNotifications(mockNotifications);\n    } catch (error) {\n      console.error('Failed to fetch notifications:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const markAsRead = async (notificationId: string) => {\n    setNotifications(prev => \n      prev.map(notification => \n        notification.id === notificationId \n          ? { ...notification, read: true }\n          : notification\n      )\n    );\n  };\n\n  const markAllAsRead = async () => {\n    setNotifications(prev => \n      prev.map(notification => ({ ...notification, read: true }))\n    );\n  };\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'achievement':\n        return <Trophy className=\"w-5 h-5 text-yellow-600\" />;\n      case 'reward':\n        return <Coins className=\"w-5 h-5 text-blue-600\" />;\n      case 'system':\n        return <Info className=\"w-5 h-5 text-purple-600\" />;\n      case 'social':\n        return <Star className=\"w-5 h-5 text-pink-600\" />;\n      case 'warning':\n        return <AlertCircle className=\"w-5 h-5 text-orange-600\" />;\n      default:\n        return <Bell className=\"w-5 h-5 text-gray-600\" />;\n    }\n  };\n\n  const formatTimestamp = (timestamp: Date) => {\n    const now = new Date();\n    const diff = now.getTime() - timestamp.getTime();\n    const minutes = Math.floor(diff / (1000 * 60));\n    const hours = Math.floor(diff / (1000 * 60 * 60));\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n\n    if (minutes < 60) {\n      return `${minutes}m ago`;\n    } else if (hours < 24) {\n      return `${hours}h ago`;\n    } else {\n      return `${days}d ago`;\n    }\n  };\n\n  const unreadCount = notifications.filter(n => !n.read).length;\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-50 pt-16\">\n      <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-md mx-4 max-h-[80vh] flex flex-col\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <div className=\"flex items-center space-x-3\">\n            <Bell className=\"w-6 h-6 text-orange-600\" />\n            <h2 className=\"text-xl font-bold text-gray-900\">Notifications</h2>\n            {unreadCount > 0 && (\n              <span className=\"bg-orange-500 text-white text-xs font-bold px-2 py-1 rounded-full\">\n                {unreadCount}\n              </span>\n            )}\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        {/* Actions */}\n        {unreadCount > 0 && (\n          <div className=\"px-6 py-3 border-b border-gray-100\">\n            <button\n              onClick={markAllAsRead}\n              className=\"flex items-center space-x-2 text-sm text-orange-600 hover:text-orange-700 font-medium\"\n            >\n              <Check className=\"w-4 h-4\" />\n              <span>Mark all as read</span>\n            </button>\n          </div>\n        )}\n\n        {/* Notifications List */}\n        <div className=\"flex-1 overflow-y-auto\">\n          {loading ? (\n            <div className=\"p-6 text-center\">\n              <div className=\"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full mx-auto mb-2\"></div>\n              <p className=\"text-sm text-gray-600\">Loading notifications...</p>\n            </div>\n          ) : notifications.length === 0 ? (\n            <div className=\"p-6 text-center\">\n              <Bell className=\"w-12 h-12 text-gray-300 mx-auto mb-3\" />\n              <h3 className=\"text-lg font-medium text-gray-900 mb-1\">No notifications</h3>\n              <p className=\"text-sm text-gray-600\">You're all caught up!</p>\n            </div>\n          ) : (\n            <div className=\"divide-y divide-gray-100\">\n              {notifications.map((notification) => (\n                <div\n                  key={notification.id}\n                  className={`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${\n                    !notification.read ? 'bg-blue-50 border-l-4 border-l-blue-500' : ''\n                  }`}\n                  onClick={() => {\n                    if (!notification.read) markAsRead(notification.id);\n                    if (notification.actionUrl) {\n                      window.location.href = notification.actionUrl;\n                    }\n                  }}\n                >\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"flex-shrink-0 mt-1\">\n                      {getNotificationIcon(notification.type)}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-start justify-between\">\n                        <h4 className={`text-sm font-medium ${\n                          !notification.read ? 'text-gray-900' : 'text-gray-700'\n                        }`}>\n                          {notification.title}\n                        </h4>\n                        <span className=\"text-xs text-gray-500 whitespace-nowrap ml-2\">\n                          {formatTimestamp(notification.timestamp)}\n                        </span>\n                      </div>\n                      <p className={`text-sm mt-1 ${\n                        !notification.read ? 'text-gray-800' : 'text-gray-600'\n                      }`}>\n                        {notification.message}\n                      </p>\n                      {notification.data && (\n                        <div className=\"mt-2 flex items-center space-x-4\">\n                          {notification.data.gold_reward && (\n                            <div className=\"flex items-center space-x-1 text-xs text-yellow-700 bg-yellow-100 px-2 py-1 rounded\">\n                              <Trophy className=\"w-3 h-3\" />\n                              <span>+{notification.data.gold_reward} Gold</span>\n                            </div>\n                          )}\n                          {notification.data.points_earned && (\n                            <div className=\"flex items-center space-x-1 text-xs text-blue-700 bg-blue-100 px-2 py-1 rounded\">\n                              <Coins className=\"w-3 h-3\" />\n                              <span>+{notification.data.points_earned} Points</span>\n                            </div>\n                          )}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"p-4 border-t border-gray-200 bg-gray-50\">\n          <p className=\"text-xs text-gray-600 text-center\">\n            Stay tuned for more updates and achievements!\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { X, ArrowRight, Coins, Key, Star, AlertCircle, CheckCircle } from 'lucide-react';\nimport { UserType } from '@/shared/types';\n\ninterface CurrencyConversionModalProps {\n  user: UserType | null;\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: () => void;\n}\n\nexport default function CurrencyConversionModal({ user, isOpen, onClose, onSuccess }: CurrencyConversionModalProps) {\n  const [fromCurrency, setFromCurrency] = useState<'points' | 'gems'>('points');\n  const [amount, setAmount] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  if (!isOpen || !user) return null;\n\n  const conversionRates = {\n    points: { keys: 500 }, // 500 points = 1 key\n    gems: { keys: 2 },     // 2 gems = 1 key\n  };\n\n  const getCurrentBalance = () => {\n    return fromCurrency === 'points' ? user.points_balance : user.gems_balance;\n  };\n\n  const getRequiredAmount = () => {\n    return amount * conversionRates[fromCurrency].keys;\n  };\n\n  const canAfford = getCurrentBalance() >= getRequiredAmount();\n\n  const handleConvert = async () => {\n    if (!canAfford || amount < 1) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch('/api/users/convert', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({\n          from_currency: fromCurrency,\n          to_currency: 'keys',\n          amount: amount\n        })\n      });\n\n      if (response.ok) {\n        onSuccess();\n        onClose();\n        setAmount(1);\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Conversion failed');\n      }\n    } catch (error) {\n      console.error('Conversion failed:', error);\n      setError('Network error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-xl p-6 w-full max-w-md mx-4\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-xl font-bold text-gray-900\">Convert Currency</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        <div className=\"space-y-6\">\n          {/* Currency Selection */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n              Convert from:\n            </label>\n            <div className=\"grid grid-cols-2 gap-3\">\n              <button\n                onClick={() => setFromCurrency('points')}\n                className={`p-4 rounded-lg border-2 transition-colors ${\n                  fromCurrency === 'points'\n                    ? 'border-blue-500 bg-blue-50'\n                    : 'border-gray-200 hover:border-gray-300'\n                }`}\n              >\n                <div className=\"flex items-center space-x-2 mb-1\">\n                  <Coins className=\"w-5 h-5 text-blue-600\" />\n                  <span className=\"font-medium\">Points</span>\n                </div>\n                <p className=\"text-sm text-gray-600\">Balance: {user.points_balance}</p>\n                <p className=\"text-xs text-blue-600 mt-1\">500 pts = 1 key</p>\n              </button>\n              \n              <button\n                onClick={() => setFromCurrency('gems')}\n                className={`p-4 rounded-lg border-2 transition-colors ${\n                  fromCurrency === 'gems'\n                    ? 'border-purple-500 bg-purple-50'\n                    : 'border-gray-200 hover:border-gray-300'\n                }`}\n              >\n                <div className=\"flex items-center space-x-2 mb-1\">\n                  <Star className=\"w-5 h-5 text-purple-600\" />\n                  <span className=\"font-medium\">Gems</span>\n                </div>\n                <p className=\"text-sm text-gray-600\">Balance: {user.gems_balance}</p>\n                <p className=\"text-xs text-purple-600 mt-1\">2 gems = 1 key</p>\n              </button>\n            </div>\n          </div>\n\n          {/* Amount Input */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Keys to get:\n            </label>\n            <div className=\"flex items-center space-x-2\">\n              <button\n                type=\"button\"\n                onClick={() => setAmount(Math.max(1, amount - 1))}\n                disabled={amount <= 1}\n                className=\"w-8 h-8 bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed rounded text-gray-700 font-bold\"\n              >\n                -\n              </button>\n              <input\n                type=\"number\"\n                value={amount}\n                onChange={(e) => setAmount(Math.max(1, parseInt(e.target.value) || 1))}\n                min=\"1\"\n                className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 text-center\"\n              />\n              <button\n                type=\"button\"\n                onClick={() => setAmount(amount + 1)}\n                className=\"w-8 h-8 bg-gray-200 hover:bg-gray-300 rounded text-gray-700 font-bold\"\n              >\n                +\n              </button>\n            </div>\n            <div className=\"flex space-x-2 mt-2\">\n              {[1, 3, 5, 10].map((qty) => (\n                <button\n                  key={qty}\n                  onClick={() => setAmount(qty)}\n                  className=\"px-3 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded-full text-gray-700\"\n                >\n                  {qty} key{qty > 1 ? 's' : ''}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Conversion Preview */}\n          <div className=\"bg-gray-50 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <div className=\"flex items-center space-x-2\">\n                {fromCurrency === 'points' ? (\n                  <Coins className=\"w-5 h-5 text-blue-600\" />\n                ) : (\n                  <Star className=\"w-5 h-5 text-purple-600\" />\n                )}\n                <span className=\"font-medium capitalize\">{fromCurrency}</span>\n              </div>\n              <ArrowRight className=\"w-4 h-4 text-gray-400\" />\n              <div className=\"flex items-center space-x-2\">\n                <Key className=\"w-5 h-5 text-orange-600\" />\n                <span className=\"font-medium\">Keys</span>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center justify-between text-lg font-bold\">\n              <span className={fromCurrency === 'points' ? 'text-blue-600' : 'text-purple-600'}>\n                -{getRequiredAmount().toLocaleString()}\n              </span>\n              <span className=\"text-orange-600\">+{amount}</span>\n            </div>\n            \n            <div className=\"flex items-center justify-between text-sm text-gray-600 mt-2\">\n              <span>\n                Remaining: {(getCurrentBalance() - getRequiredAmount()).toLocaleString()}\n              </span>\n              <span>New total: {user.keys_balance + amount}</span>\n            </div>\n          </div>\n\n          {/* Daily Limit Notice for Points */}\n          {fromCurrency === 'points' && (\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n              <div className=\"flex items-center space-x-2\">\n                <AlertCircle className=\"w-4 h-4 text-blue-600\" />\n                <span className=\"text-sm text-blue-700\">\n                  Daily limit: 3 keys from points conversion\n                </span>\n              </div>\n            </div>\n          )}\n\n          {/* Error Display */}\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n              <p className=\"text-sm text-red-700\">{error}</p>\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          <div className=\"flex space-x-3\">\n            <button\n              onClick={onClose}\n              className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={handleConvert}\n              disabled={!canAfford || loading || amount < 1}\n              className=\"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2\"\n            >\n              {loading ? (\n                <div className=\"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full\"></div>\n              ) : (\n                <>\n                  <CheckCircle className=\"w-4 h-4\" />\n                  <span>Convert</span>\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { X, Shield, Zap, CheckCircle, Clock, Star } from 'lucide-react';\nimport { UserType, MasterKeyActivationType } from '@/shared/types';\n\ninterface MasterKeyModalProps {\n  user: UserType | null;\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: () => void;\n}\n\nexport default function MasterKeyModal({ user, isOpen, onClose, onSuccess }: MasterKeyModalProps) {\n  const [loading, setLoading] = useState(false);\n  const [masterKeyStatus, setMasterKeyStatus] = useState<MasterKeyActivationType | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (isOpen && user) {\n      fetchMasterKeyStatus();\n    }\n  }, [isOpen, user]);\n\n  const fetchMasterKeyStatus = async () => {\n    try {\n      const response = await fetch('/api/users/master-key-status', { credentials: 'include' });\n      if (response.ok) {\n        const data = await response.json();\n        setMasterKeyStatus(data);\n      }\n    } catch (error) {\n      console.error('Failed to fetch master key status:', error);\n    }\n  };\n\n  const handleActivate = async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch('/api/users/activate-master-key', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({})\n      });\n\n      if (response.ok) {\n        await fetchMasterKeyStatus();\n        onSuccess();\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Activation failed');\n      }\n    } catch (error) {\n      console.error('Master key activation failed:', error);\n      setError('Network error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isOpen || !user) return null;\n\n  const getTierInfo = (tier: string) => {\n    switch (tier) {\n      case 'super':\n        return { name: 'Super', required: 1, color: 'text-yellow-600', bgColor: 'bg-yellow-50' };\n      case 'premium':\n        return { name: 'Premium', required: 2, color: 'text-purple-600', bgColor: 'bg-purple-50' };\n      case 'free':\n      default:\n        return { name: 'Free', required: 5, color: 'text-gray-600', bgColor: 'bg-gray-50' };\n    }\n  };\n\n  const tierInfo = getTierInfo(user.user_tier);\n  const isActivated = masterKeyStatus?.is_activated || false;\n  const canActivate = masterKeyStatus ? \n    masterKeyStatus.proof_drops_completed >= masterKeyStatus.proof_drops_required : \n    false;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-xl p-6 w-full max-w-lg mx-4\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center space-x-2\">\n            <Shield className=\"w-6 h-6 text-purple-600\" />\n            <h2 className=\"text-xl font-bold text-gray-900\">Master Key System</h2>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        <div className=\"space-y-6\">\n          {/* Tier Information */}\n          <div className={`${tierInfo.bgColor} border border-purple-200 rounded-lg p-4`}>\n            <div className=\"flex items-center justify-between mb-3\">\n              <div className=\"flex items-center space-x-2\">\n                <Star className={`w-5 h-5 ${tierInfo.color}`} />\n                <span className={`font-semibold ${tierInfo.color}`}>{tierInfo.name} Tier</span>\n              </div>\n              <span className={`px-2 py-1 rounded-full text-xs font-medium ${tierInfo.color} bg-white`}>\n                {tierInfo.required} proof drop{tierInfo.required > 1 ? 's' : ''} required\n              </span>\n            </div>\n            <p className=\"text-sm text-gray-700\">\n              Complete {tierInfo.required} proof drop{tierInfo.required > 1 ? 's' : ''} daily to activate your Master Key and unlock the ability to apply for paid drops.\n            </p>\n          </div>\n\n          {/* Current Status */}\n          <div className=\"bg-gray-50 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <h3 className=\"font-semibold text-gray-900\">Today's Progress</h3>\n              <div className={`px-3 py-1 rounded-full text-xs font-medium ${\n                isActivated \n                  ? 'text-green-600 bg-green-100' \n                  : 'text-orange-600 bg-orange-100'\n              }`}>\n                {isActivated ? 'Activated' : 'Not Activated'}\n              </div>\n            </div>\n            \n            {masterKeyStatus && (\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-600\">Proof Drops Completed</span>\n                  <span className=\"font-semibold text-gray-900\">\n                    {masterKeyStatus.proof_drops_completed}/{masterKeyStatus.proof_drops_required}\n                  </span>\n                </div>\n                \n                <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                  <div \n                    className={`h-2 rounded-full transition-all duration-300 ${\n                      isActivated ? 'bg-green-500' : 'bg-orange-500'\n                    }`}\n                    style={{ \n                      width: `${Math.min(100, (masterKeyStatus.proof_drops_completed / masterKeyStatus.proof_drops_required) * 100)}%` \n                    }}\n                  ></div>\n                </div>\n                \n                {!isActivated && masterKeyStatus.proof_drops_completed > 0 && (\n                  <p className=\"text-sm text-gray-600\">\n                    {masterKeyStatus.proof_drops_required - masterKeyStatus.proof_drops_completed} more proof drop{masterKeyStatus.proof_drops_required - masterKeyStatus.proof_drops_completed > 1 ? 's' : ''} needed\n                  </p>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Benefits */}\n          <div className=\"space-y-3\">\n            <h3 className=\"font-semibold text-gray-900\">Master Key Benefits</h3>\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center space-x-2\">\n                <CheckCircle className=\"w-4 h-4 text-green-600\" />\n                <span className=\"text-sm text-gray-700\">Apply for paid drops using Keys</span>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <CheckCircle className=\"w-4 h-4 text-green-600\" />\n                <span className=\"text-sm text-gray-700\">Earn Gems from completed drops</span>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <CheckCircle className=\"w-4 h-4 text-green-600\" />\n                <span className=\"text-sm text-gray-700\">Access to premium opportunities</span>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <CheckCircle className=\"w-4 h-4 text-green-600\" />\n                <span className=\"text-sm text-gray-700\">Higher earning potential</span>\n              </div>\n            </div>\n          </div>\n\n          {/* How to Earn Proof Drops */}\n          {!isActivated && (\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n              <div className=\"flex items-center space-x-2 mb-2\">\n                <Zap className=\"w-4 h-4 text-blue-600\" />\n                <span className=\"font-medium text-blue-900\">How to Earn Proof Drops</span>\n              </div>\n              <ul className=\"text-sm text-blue-700 space-y-1\">\n                <li>• Complete free social actions (likes, comments, shares)</li>\n                <li>• Participate in community challenges</li>\n                <li>• Engage with content daily</li>\n                <li>• Maintain your daily streak</li>\n              </ul>\n            </div>\n          )}\n\n          {/* Error Display */}\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n              <p className=\"text-sm text-red-700\">{error}</p>\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          <div className=\"flex space-x-3\">\n            <button\n              onClick={onClose}\n              className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n            >\n              Close\n            </button>\n            \n            {!isActivated && (\n              <button\n                onClick={handleActivate}\n                disabled={!canActivate || loading}\n                className=\"flex-1 bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2\"\n              >\n                {loading ? (\n                  <div className=\"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full\"></div>\n                ) : canActivate ? (\n                  <>\n                    <Shield className=\"w-4 h-4\" />\n                    <span>Activate</span>\n                  </>\n                ) : (\n                  <>\n                    <Clock className=\"w-4 h-4\" />\n                    <span>Complete Proofs</span>\n                  </>\n                )}\n              </button>\n            )}\n            \n            {isActivated && (\n              <div className=\"flex-1 bg-green-100 text-green-700 px-4 py-2 rounded-lg font-medium flex items-center justify-center space-x-2\">\n                <CheckCircle className=\"w-4 h-4\" />\n                <span>Activated</span>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { X, Instagram, CheckCircle, Copy, Check, TrendingUp } from 'lucide-react';\nimport { UserType } from '@/shared/types';\n\ninterface InstagramVerificationModalProps {\n  user: UserType | null;\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: () => void;\n}\n\nexport default function InstagramVerificationModal({ user, isOpen, onClose, onSuccess }: InstagramVerificationModalProps) {\n  const [step, setStep] = useState(1);\n  const [instagramUsername, setInstagramUsername] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [copied, setCopied] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  if (!isOpen || !user) return null;\n\n  const handleRegisterInstagram = async () => {\n    if (!instagramUsername.trim()) {\n      setError('Please enter your Instagram username');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch('/api/users/register-instagram', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({ instagram_username: instagramUsername })\n      });\n\n      if (response.ok) {\n        setStep(2);\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Registration failed');\n      }\n    } catch (error) {\n      console.error('Instagram registration failed:', error);\n      setError('Network error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClaimPoints = async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch('/api/users/claim-instagram-points', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({})\n      });\n\n      if (response.ok) {\n        await response.json();\n        onSuccess();\n        onClose();\n        setStep(1);\n        setInstagramUsername('');\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Failed to claim points');\n      }\n    } catch (error) {\n      console.error('Point claiming failed:', error);\n      setError('Network error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const copyToClipboard = async (text: string) => {\n    await navigator.clipboard.writeText(text);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  const getTierPoints = (tier: string) => {\n    switch (tier) {\n      case 'super': return 1000;\n      case 'premium': return 750;\n      case 'free':\n      default: return 500;\n    }\n  };\n\n  const tierPoints = getTierPoints(user.user_tier);\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-xl p-6 w-full max-w-md mx-4\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center space-x-2\">\n            <Instagram className=\"w-6 h-6 text-pink-600\" />\n            <h2 className=\"text-xl font-bold text-gray-900\">Instagram Verification</h2>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        {step === 1 && (\n          <div className=\"space-y-6\">\n            <div className=\"text-center\">\n              <div className=\"w-16 h-16 bg-gradient-to-br from-pink-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <Instagram className=\"w-8 h-8 text-white\" />\n              </div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Connect Your Instagram</h3>\n              <p className=\"text-gray-600 text-sm\">\n                Verify your Instagram account to earn {tierPoints} PromoPoints monthly\n              </p>\n            </div>\n\n            <div className=\"bg-gradient-to-r from-pink-50 to-purple-50 border border-pink-200 rounded-lg p-4\">\n              <h4 className=\"font-medium text-pink-900 mb-2\">Monthly Benefits</h4>\n              <div className=\"space-y-2 text-sm text-pink-700\">\n                <div className=\"flex items-center justify-between\">\n                  <span>Your Tier:</span>\n                  <span className=\"font-semibold capitalize\">{user.user_tier}</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span>Monthly Points:</span>\n                  <span className=\"font-bold text-pink-600\">{tierPoints} points</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span>Key Equivalent:</span>\n                  <span className=\"font-medium\">{Math.floor(tierPoints / 500)} keys</span>\n                </div>\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Instagram Username\n              </label>\n              <input\n                type=\"text\"\n                value={instagramUsername}\n                onChange={(e) => setInstagramUsername(e.target.value)}\n                placeholder=\"@yourusername\"\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent\"\n              />\n            </div>\n\n            {error && (\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n                <p className=\"text-sm text-red-700\">{error}</p>\n              </div>\n            )}\n\n            {/* Influence Rewards Promotion */}\n            <div className=\"bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-lg p-4 mt-6\">\n              <h4 className=\"font-medium text-blue-900 mb-2 flex items-center space-x-2\">\n                <TrendingUp className=\"w-4 h-4\" />\n                <span>Want Even More Rewards?</span>\n              </h4>\n              <p className=\"text-sm text-blue-700 mb-4\">\n                Try our new <strong>Influence Rewards</strong> program! Earn dynamic monthly points based on your actual follower count (followers × 0.01).\n              </p>\n              <div className=\"flex items-center justify-between text-sm\">\n                <div className=\"space-y-1\">\n                  <div className=\"text-blue-600\">• 5,000 followers = 50 points/month</div>\n                  <div className=\"text-blue-600\">• 10,000 followers = 100 points/month</div>\n                  <div className=\"text-blue-600\">• 50,000 followers = 500 points/month</div>\n                </div>\n                <button\n                  onClick={() => {\n                    onClose(); // Close the current modal\n                    // Navigate to profile with query param to open Influence Rewards\n                    window.location.href = '/profile?openInfluenceRewards=true';\n                  }}\n                  className=\"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200\"\n                >\n                  Learn More\n                </button>\n              </div>\n            </div>\n\n            <div className=\"flex space-x-3\">\n              <button\n                onClick={onClose}\n                className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleRegisterInstagram}\n                disabled={loading || !instagramUsername.trim()}\n                className=\"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200\"\n              >\n                {loading ? 'Registering...' : 'Continue'}\n              </button>\n            </div>\n          </div>\n        )}\n\n        {step === 2 && (\n          <div className=\"space-y-6\">\n            <div className=\"text-center\">\n              <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <CheckCircle className=\"w-8 h-8 text-green-600\" />\n              </div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Send Verification DM</h3>\n              <p className=\"text-gray-600 text-sm\">\n                Send a DM to @promorangco on Instagram with the word below\n              </p>\n            </div>\n\n            <div className=\"bg-gray-50 rounded-lg p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h4 className=\"font-medium text-gray-900\">Message to send:</h4>\n                  <code className=\"text-lg font-mono bg-white px-3 py-2 rounded border mt-2 block\">\n                    promopoints\n                  </code>\n                </div>\n                <button\n                  onClick={() => copyToClipboard('promopoints')}\n                  className=\"p-2 bg-gray-200 hover:bg-gray-300 rounded transition-colors\"\n                  title=\"Copy message\"\n                >\n                  {copied ? <Check className=\"w-4 h-4 text-green-600\" /> : <Copy className=\"w-4 h-4\" />}\n                </button>\n              </div>\n            </div>\n\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n              <h4 className=\"font-medium text-blue-900 mb-2\">Next Steps:</h4>\n              <ol className=\"text-sm text-blue-700 space-y-1\">\n                <li>1. Open Instagram and go to @promorangco</li>\n                <li>2. Send a DM with exactly: <strong>promopoints</strong></li>\n                <li>3. Wait for verification (usually within 24 hours)</li>\n                <li>4. Return here to claim your monthly points</li>\n              </ol>\n            </div>\n\n            <div className=\"space-y-3\">\n              <button\n                onClick={handleClaimPoints}\n                disabled={loading}\n                className=\"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 disabled:opacity-50 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200\"\n              >\n                {loading ? 'Checking...' : 'Claim Points (if verified)'}\n              </button>\n              \n              <button\n                onClick={() => {\n                  setStep(1);\n                  setInstagramUsername('');\n                  setError(null);\n                }}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n              >\n                Try Different Username\n              </button>\n            </div>\n\n            {/* Influence Rewards Promotion for Step 2 */}\n            <div className=\"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-4 mt-6\">\n              <h4 className=\"font-medium text-purple-900 mb-2 flex items-center space-x-2\">\n                <TrendingUp className=\"w-4 h-4\" />\n                <span>Maximize Your Instagram Earning Potential!</span>\n              </h4>\n              <p className=\"text-sm text-purple-700 mb-4\">\n                While you wait for verification, explore our <strong>Influence Rewards</strong> program for dynamic monthly points based on your follower count.\n              </p>\n              <button\n                onClick={() => {\n                  onClose(); // Close the current modal\n                  // Navigate to profile with query param to open Influence Rewards\n                  window.location.href = '/profile?openInfluenceRewards=true';\n                }}\n                className=\"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200\"\n              >\n                Discover Influence Rewards\n              </button>\n            </div>\n\n            {error && (\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n                <p className=\"text-sm text-red-700\">{error}</p>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { X, Star, Crown, Zap, Coins, Gem, ArrowRight, CheckCircle } from 'lucide-react';\nimport { UserType } from '@/shared/types';\n\nconst DEFAULT_UPGRADE_COSTS: Record<string, Record<string, { points: number; gems: number }>> = {\n  free: {\n    premium: { points: 7500, gems: 200 },\n    super: { points: 15000, gems: 450 }\n  },\n  premium: {\n    super: { points: 9000, gems: 275 }\n  },\n  super: {}\n};\n\ninterface UserTierUpgradeModalProps {\n  user: UserType | null;\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: () => void;\n}\n\nexport default function UserTierUpgradeModal({ user, isOpen, onClose, onSuccess }: UserTierUpgradeModalProps) {\n  const [upgradeCosts, setUpgradeCosts] = useState(DEFAULT_UPGRADE_COSTS);\n  const [selectedTier, setSelectedTier] = useState<string>('');\n  const [paymentMethod, setPaymentMethod] = useState<'points' | 'gems'>('points');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isLoadingCosts, setIsLoadingCosts] = useState(false);\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchUpgradeCosts();\n    }\n  }, [isOpen]);\n\n  const normalizeCosts = (rawCosts: Record<string, Record<string, { points: number; gems: number }>>) => {\n    const merged = { ...DEFAULT_UPGRADE_COSTS, ...(rawCosts || {}) };\n    return Object.fromEntries(\n      Object.entries(merged).map(([tier, upgrades]) => [\n        tier.toLowerCase(),\n        Object.fromEntries(\n          Object.entries(upgrades).map(([targetTier, costs]) => [targetTier.toLowerCase(), costs])\n        )\n      ])\n    );\n  };\n\n  const fetchUpgradeCosts = async () => {\n    try {\n      setIsLoadingCosts(true);\n      const authToken = localStorage.getItem('authToken');\n      const response = await fetch('/api/users/upgrade-costs', {\n        credentials: 'include',\n        headers: authToken\n          ? {\n              Authorization: `Bearer ${authToken}`\n            }\n          : undefined\n      });\n      if (!response.ok) {\n        throw new Error(`Failed to load upgrade costs: ${response.status}`);\n      }\n\n      const data = await response.json();\n      if (data && typeof data === 'object' && !Array.isArray(data)) {\n        setUpgradeCosts(normalizeCosts(data));\n      } else {\n        setUpgradeCosts(normalizeCosts(DEFAULT_UPGRADE_COSTS));\n      }\n    } catch (error) {\n      console.error('Failed to fetch upgrade costs:', error);\n      setUpgradeCosts(normalizeCosts(DEFAULT_UPGRADE_COSTS));\n    }\n    setIsLoadingCosts(false);\n  };\n\n  if (!isOpen || !user) return null;\n\n  const normalizedTier = (user.user_tier || 'free').toLowerCase();\n  const availableUpgrades = upgradeCosts[normalizedTier] || {};\n  const hasAvailableUpgrades = Object.keys(availableUpgrades).length > 0;\n\n  const getTierInfo = (tier: string) => {\n    switch (tier) {\n      case 'super':\n        return {\n          name: 'Super User',\n          icon: Crown,\n          color: 'text-yellow-600',\n          bgColor: 'bg-yellow-50',\n          borderColor: 'border-yellow-200',\n          benefits: [\n            '2.0x point multiplier for all actions',\n            '1 proof drop required for Master Key',\n            '1,000 monthly Instagram points',\n            'Priority support',\n            'Exclusive events access',\n            'Advanced analytics'\n          ]\n        };\n      case 'premium':\n        return {\n          name: 'Premium User',\n          icon: Star,\n          color: 'text-purple-600',\n          bgColor: 'bg-purple-50',\n          borderColor: 'border-purple-200',\n          benefits: [\n            '1.5x point multiplier for all actions',\n            '2 proof drops required for Master Key',\n            '750 monthly Instagram points',\n            'Priority support',\n            'Advanced analytics'\n          ]\n        };\n      default:\n        return {\n          name: 'Free User',\n          icon: Zap,\n          color: 'text-gray-600',\n          bgColor: 'bg-gray-50',\n          borderColor: 'border-gray-200',\n          benefits: [\n            '1.0x point multiplier',\n            '5 proof drops required for Master Key',\n            '500 monthly Instagram points',\n            'Standard support'\n          ]\n        };\n    }\n  };\n\n  const handleUpgrade = async () => {\n    if (!selectedTier) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const authToken = localStorage.getItem('authToken');\n      const response = await fetch('/api/users/upgrade-tier', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(authToken ? { Authorization: `Bearer ${authToken}` } : {})\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          target_tier: selectedTier,\n          payment_method: paymentMethod\n        })\n      });\n\n      if (response.ok) {\n        onSuccess();\n        onClose();\n        setSelectedTier('');\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Upgrade failed');\n      }\n    } catch (error) {\n      console.error('Upgrade failed:', error);\n      setError('Network error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const canAfford = (tier: string, method: 'points' | 'gems') => {\n    const cost = availableUpgrades[tier]?.[method];\n    if (!cost) return false;\n    \n    const balance = method === 'points' ? user.points_balance : user.gems_balance;\n    return balance >= cost;\n  };\n\n  const currentTierInfo = getTierInfo(normalizedTier);\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center space-x-2\">\n            <Star className=\"w-6 h-6 text-orange-600\" />\n            <h2 className=\"text-xl font-bold text-gray-900\">Upgrade Your Tier</h2>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        {/* Current Tier */}\n        <div className=\"mb-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">Current Tier</h3>\n          <div className={`border-2 ${currentTierInfo.borderColor} ${currentTierInfo.bgColor} rounded-lg p-4`}>\n            <div className=\"flex items-center space-x-3\">\n              <currentTierInfo.icon className={`w-8 h-8 ${currentTierInfo.color}`} />\n              <div>\n                <h4 className={`text-lg font-semibold ${currentTierInfo.color}`}>\n                  {currentTierInfo.name}\n                </h4>\n                <p className=\"text-sm text-gray-600\">Your current membership level</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Available Upgrades */}\n        <div className=\"space-y-4\">\n          <h3 className=\"text-lg font-semibold text-gray-900\">Available Upgrades</h3>\n          \n          {!hasAvailableUpgrades && !isLoadingCosts && (\n            <div className=\"border border-dashed border-gray-300 rounded-lg p-6 text-center text-sm text-gray-500\">\n              No higher tiers available right now. Check back later for new membership levels.\n            </div>\n          )}\n\n          {isLoadingCosts && (\n            <div className=\"border border-gray-200 rounded-lg p-6 text-center text-sm text-gray-500\">\n              Loading upgrade options...\n            </div>\n          )}\n\n          {Object.keys(availableUpgrades).map((tier) => {\n            const normalizedTarget = tier.toLowerCase();\n            const tierInfo = getTierInfo(normalizedTarget);\n            const cost = availableUpgrades[tier];\n            \n            return (\n              <div\n                key={tier}\n                className={`border-2 rounded-lg p-6 cursor-pointer transition-all duration-200 ${\n                  selectedTier === normalizedTarget\n                    ? `${tierInfo.borderColor} ${tierInfo.bgColor}`\n                    : 'border-gray-200 hover:border-gray-300'\n                }`}\n                onClick={() => setSelectedTier(normalizedTarget)}\n              >\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-3 mb-3\">\n                      <tierInfo.icon className={`w-8 h-8 ${tierInfo.color}`} />\n                      <div>\n                        <h4 className={`text-lg font-semibold ${selectedTier === normalizedTarget ? tierInfo.color : 'text-gray-900'}`}>\n                          {tierInfo.name}\n                        </h4>\n                        <div className=\"flex items-center space-x-4 text-sm\">\n                          <div className=\"flex items-center space-x-1\">\n                            <Coins className=\"w-4 h-4 text-blue-600\" />\n                            <span>{cost.points.toLocaleString()} points</span>\n                          </div>\n                          <span className=\"text-gray-400\">or</span>\n                          <div className=\"flex items-center space-x-1\">\n                            <Gem className=\"w-4 h-4 text-purple-600\" />\n                            <span>{cost.gems} gems</span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      {tierInfo.benefits.map((benefit, index) => (\n                        <div key={index} className=\"flex items-center space-x-2\">\n                          <CheckCircle className=\"w-4 h-4 text-green-600 flex-shrink-0\" />\n                          <span className=\"text-sm text-gray-700\">{benefit}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                  \n                  {selectedTier === normalizedTarget && (\n                    <div className=\"ml-4\">\n                      <ArrowRight className={`w-6 h-6 ${tierInfo.color}`} />\n                    </div>\n                  )}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n\n        {/* Payment Method Selection */}\n        {selectedTier && (\n          <div className=\"mt-6 p-4 bg-gray-50 rounded-lg\">\n            <h4 className=\"font-medium text-gray-900 mb-3\">Choose Payment Method</h4>\n            <div className=\"grid grid-cols-2 gap-3\">\n              <button\n                onClick={() => setPaymentMethod('points')}\n                disabled={!canAfford(selectedTier, 'points')}\n                className={`p-4 rounded-lg border-2 transition-colors ${\n                  paymentMethod === 'points'\n                    ? 'border-blue-500 bg-blue-50'\n                    : 'border-gray-200 hover:border-gray-300'\n                } ${!canAfford(selectedTier, 'points') ? 'opacity-50 cursor-not-allowed' : ''}`}\n              >\n                <div className=\"flex items-center justify-center space-x-2 mb-2\">\n                  <Coins className=\"w-5 h-5 text-blue-600\" />\n                  <span className=\"font-medium\">Points</span>\n                </div>\n                <p className=\"text-lg font-bold text-blue-600\">\n                  {availableUpgrades[selectedTier]?.points.toLocaleString()}\n                </p>\n                <p className=\"text-xs text-gray-600\">\n                  Balance: {user.points_balance.toLocaleString()}\n                </p>\n                {!canAfford(selectedTier, 'points') && (\n                  <p className=\"text-xs text-red-600 mt-1\">Insufficient balance</p>\n                )}\n              </button>\n\n              <button\n                onClick={() => setPaymentMethod('gems')}\n                disabled={!canAfford(selectedTier, 'gems')}\n                className={`p-4 rounded-lg border-2 transition-colors ${\n                  paymentMethod === 'gems'\n                    ? 'border-purple-500 bg-purple-50'\n                    : 'border-gray-200 hover:border-gray-300'\n                } ${!canAfford(selectedTier, 'gems') ? 'opacity-50 cursor-not-allowed' : ''}`}\n              >\n                <div className=\"flex items-center justify-center space-x-2 mb-2\">\n                  <Gem className=\"w-5 h-5 text-purple-600\" />\n                  <span className=\"font-medium\">Gems</span>\n                </div>\n                <p className=\"text-lg font-bold text-purple-600\">\n                  {availableUpgrades[selectedTier]?.gems}\n                </p>\n                <p className=\"text-xs text-gray-600\">\n                  Balance: {user.gems_balance}\n                </p>\n                {!canAfford(selectedTier, 'gems') && (\n                  <p className=\"text-xs text-red-600 mt-1\">Insufficient balance</p>\n                )}\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Error Display */}\n        {error && (\n          <div className=\"mt-4 bg-red-50 border border-red-200 rounded-lg p-3\">\n            <p className=\"text-sm text-red-700\">{error}</p>\n          </div>\n        )}\n\n        {/* Action Buttons */}\n        <div className=\"flex space-x-3 mt-6\">\n          <button\n            onClick={onClose}\n            className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={handleUpgrade}\n            disabled={!selectedTier || !canAfford(selectedTier, paymentMethod) || loading}\n            className=\"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200\"\n          >\n            {loading ? 'Upgrading...' : `Upgrade to ${selectedTier ? getTierInfo(selectedTier).name : ''}`}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { Link } from \"react-router-dom\";\nimport {\n  Search,\n  X,\n  Star,\n  DollarSign,\n  FileText,\n  Zap,\n  Users,\n} from 'lucide-react';\n\ninterface SearchModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport default function SearchModal({ isOpen, onClose }: SearchModalProps) {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState<any>({ content: [], drops: [], users: [] });\n  const [loading, setLoading] = useState(false);\n  const [activeTab, setActiveTab] = useState<'all' | 'content' | 'drops' | 'users'>('all');\n\n  const USE_MOCK_DATA = !import.meta.env.VITE_API_BASE_URL;\n\n  const MOCK_CONTENT = [\n    {\n      id: 'content-demo-1',\n      title: 'Launch Campaign: Social Buzz',\n      description: 'Highlight reel from the recent product launch activation.',\n      platform: 'instagram',\n      creator_name: 'Demo Creator',\n      share_price: 12.5,\n    },\n    {\n      id: 'content-demo-2',\n      title: 'Creator Toolkit Walkthrough',\n      description: 'Step-by-step guide on monetizing content in 30 days.',\n      platform: 'youtube',\n      creator_name: 'Creator Collective',\n      share_price: 18.0,\n    },\n  ];\n\n  const MOCK_DROPS = [\n    {\n      id: 'drop-demo-1',\n      title: 'Product Review Blitz',\n      description: 'Create authentic reviews for the new premium bundle.',\n      gem_reward_base: 120,\n      key_cost: 4,\n      status: 'active',\n    },\n    {\n      id: 'drop-demo-2',\n      title: 'Launch Day Engagement Sprint',\n      description: 'Boost engagement metrics during launch weekend.',\n      gem_reward_base: 95,\n      key_cost: 3,\n      status: 'active',\n    },\n  ];\n\n  const MOCK_USERS = [\n    {\n      id: 'user-demo-1',\n      username: 'demo_creator',\n      display_name: 'Demo Creator',\n      user_type: 'creator',\n      follower_count: 42000,\n    },\n    {\n      id: 'user-demo-2',\n      username: 'growth_analyst',\n      display_name: 'Growth Analyst',\n      user_type: 'advertiser',\n      follower_count: 12500,\n    },\n  ];\n\n  const buildMockResults = (query: string) => {\n    const normalizedQuery = query.toLowerCase();\n    const content = MOCK_CONTENT.filter(\n      (item) =>\n        item.title.toLowerCase().includes(normalizedQuery) ||\n        item.description.toLowerCase().includes(normalizedQuery),\n    );\n    const drops = MOCK_DROPS.filter((item) => item.title.toLowerCase().includes(normalizedQuery));\n    const users = MOCK_USERS.filter(\n      (item) =>\n        item.username.toLowerCase().includes(normalizedQuery) ||\n        item.display_name.toLowerCase().includes(normalizedQuery),\n    );\n\n    return { content, drops, users };\n  };\n\n  useEffect(() => {\n    if (searchQuery.length >= 2) {\n      const timeoutId = setTimeout(() => {\n        handleSearch();\n      }, 300);\n      return () => clearTimeout(timeoutId);\n    } else {\n      setSearchResults({ content: [], drops: [], users: [] });\n    }\n  }, [searchQuery]);\n\n  const handleSearch = async () => {\n    if (searchQuery.trim().length < 2) return;\n\n    if (USE_MOCK_DATA) {\n      setSearchResults(buildMockResults(searchQuery));\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const response = await fetch(`/api/search?q=${encodeURIComponent(searchQuery)}`, {\n        credentials: 'include',\n      });\n      if (response.ok) {\n        const results = await response.json();\n        setSearchResults(results);\n      } else {\n        setSearchResults(buildMockResults(searchQuery));\n      }\n    } catch (error) {\n      console.error('Search failed:', error);\n      setSearchResults(buildMockResults(searchQuery));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getFilteredResults = () => {\n    switch (activeTab) {\n      case 'content':\n        return { content: searchResults.content, drops: [], users: [] };\n      case 'drops':\n        return { content: [], drops: searchResults.drops, users: [] };\n      case 'users':\n        return { content: [], drops: [], users: searchResults.users };\n      default:\n        return searchResults;\n    }\n  };\n\n  const getTotalResults = () => {\n    return (searchResults.content?.length || 0) + \n           (searchResults.drops?.length || 0) + \n           (searchResults.users?.length || 0);\n  };\n\n  if (!isOpen) return null;\n\n  const filteredResults = getFilteredResults();\n  const totalResults = getTotalResults();\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center pt-20 z-50\">\n      <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-3xl mx-4 max-h-[80vh] overflow-hidden\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">Search Promorang</h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        {/* Search Input */}\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search for content, drops, users...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-lg\"\n              autoFocus\n            />\n            {loading && (\n              <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                <div className=\"animate-spin w-5 h-5 border-2 border-orange-500 border-t-transparent rounded-full\"></div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Filter Tabs */}\n        {searchQuery.length >= 2 && totalResults > 0 && (\n          <div className=\"px-6 py-3 border-b border-gray-200\">\n            <div className=\"flex space-x-4\">\n              {[\n                { id: 'all', label: 'All', count: totalResults },\n                { id: 'content', label: 'Content', count: searchResults.content?.length || 0 },\n                { id: 'drops', label: 'Drops', count: searchResults.drops?.length || 0 },\n                { id: 'users', label: 'Users', count: searchResults.users?.length || 0 }\n              ].map((tab) => (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id as any)}\n                  className={`px-3 py-2 rounded-lg text-sm font-medium flex items-center space-x-2 ${\n                    activeTab === tab.id\n                      ? 'bg-orange-100 text-orange-700'\n                      : 'text-gray-600 hover:bg-gray-100'\n                  }`}\n                >\n                  <span>{tab.label}</span>\n                  <span className=\"bg-gray-200 text-gray-600 px-2 py-1 rounded-full text-xs\">\n                    {tab.count}\n                  </span>\n                </button>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Results */}\n        <div className=\"max-h-96 overflow-y-auto\">\n          {searchQuery.length < 2 ? (\n            <div className=\"p-12 text-center\">\n              <Search className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Search Promorang</h3>\n              <p className=\"text-gray-600\">Find content, drops, and users across the platform</p>\n            </div>\n          ) : totalResults === 0 && !loading ? (\n            <div className=\"p-12 text-center\">\n              <Search className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No results found</h3>\n              <p className=\"text-gray-600\">Try different keywords or browse categories</p>\n            </div>\n          ) : (\n            <div className=\"p-6 space-y-6\">\n              {/* Content Results */}\n              {filteredResults.content?.length > 0 && (\n                <div>\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n                    <FileText className=\"w-5 h-5 mr-2 text-orange-600\" />\n                    Content ({filteredResults.content.length})\n                  </h3>\n                  <div className=\"space-y-3\">\n                    {filteredResults.content.map((content: any) => (\n                      <Link\n                        key={content.id}\n                        to={`/content/${content.id}`}\n                        onClick={onClose}\n                        className=\"flex items-center space-x-4 p-4 hover:bg-gray-50 rounded-lg transition-colors\"\n                      >\n                        <div className=\"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center\">\n                          <Star className=\"w-6 h-6 text-orange-600\" />\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <h4 className=\"font-semibold text-gray-900 truncate\">{content.title}</h4>\n                          <p className=\"text-sm text-gray-600 truncate\">{content.description}</p>\n                          <div className=\"flex items-center space-x-4 mt-1\">\n                            <span className=\"text-xs text-gray-500 capitalize\">{content.platform}</span>\n                            <span className=\"text-xs text-gray-500\">by {content.creator_name}</span>\n                            <span className=\"text-xs font-medium text-green-600\">${content.share_price}/share</span>\n                          </div>\n                        </div>\n                      </Link>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Drops Results */}\n              {filteredResults.drops?.length > 0 && (\n                <div>\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n                    <Zap className=\"w-5 h-5 mr-2 text-purple-600\" />\n                    Drops ({filteredResults.drops.length})\n                  </h3>\n                  <div className=\"space-y-3\">\n                    {filteredResults.drops.map((drop: any) => (\n                      <Link\n                        key={drop.id}\n                        to=\"/earn\"\n                        onClick={onClose}\n                        className=\"flex items-center space-x-4 p-4 hover:bg-gray-50 rounded-lg transition-colors\"\n                      >\n                        <div className=\"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center\">\n                          <DollarSign className=\"w-6 h-6 text-purple-600\" />\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <h4 className=\"font-semibold text-gray-900 truncate\">{drop.title}</h4>\n                          <p className=\"text-sm text-gray-600 truncate\">{drop.description}</p>\n                          <div className=\"flex items-center space-x-4 mt-1\">\n                            <span className=\"text-xs text-gray-500 capitalize\">\n                              {(drop.drop_type || 'engagement').replace('_', ' ')}\n                            </span>\n                            <span className=\"text-xs text-gray-500\">by {drop.creator_name || 'Promorang Team'}</span>\n                            <span className=\"text-xs font-medium text-purple-600\">{drop.gem_reward_base ?? 0} gems</span>\n                            <span className=\"text-xs text-gray-500\">{drop.current_participants ?? 0} participants</span>\n                          </div>\n                        </div>\n                      </Link>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Users Results */}\n              {filteredResults.users?.length > 0 && (\n                <div>\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n                    <Users className=\"w-5 h-5 mr-2 text-blue-600\" />\n                    Users ({filteredResults.users.length})\n                  </h3>\n                  <div className=\"space-y-3\">\n                    {filteredResults.users.map((user: any) => (\n                      <Link\n                        key={user.id}\n                        to={`/users/${user.username || user.id}`}\n                        onClick={onClose}\n                        className=\"flex items-center space-x-4 p-4 hover:bg-gray-50 rounded-lg transition-colors\"\n                      >\n                        <div className=\"w-12 h-12 rounded-full overflow-hidden\">\n                          <img\n                            src={user.avatar_url || '/default-avatar.png'}\n                            alt={user.display_name}\n                            className=\"w-full h-full object-cover\"\n                          />\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <h4 className=\"font-semibold text-gray-900 truncate\">\n                            {user.display_name || 'Anonymous User'}\n                          </h4>\n                          <p className=\"text-sm text-gray-600\">@{user.username || 'user'}</p>\n                          <div className=\"flex items-center space-x-4 mt-1\">\n                            <span className=\"text-xs text-gray-500\">Level {user.level}</span>\n                            <span className=\"text-xs text-gray-500 capitalize\">{user.user_tier} tier</span>\n                            <span className=\"text-xs text-gray-500\">{user.follower_count} followers</span>\n                          </div>\n                        </div>\n                      </Link>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { X, Crown, Zap, Star, Shield, Award, Check } from 'lucide-react';\nimport { UserType } from '@/shared/types';\n\ninterface GoldItem {\n  id: string;\n  name: string;\n  description: string;\n  icon: string;\n  category: string;\n  gold_cost: number;\n  effect_data: any;\n  duration?: string;\n  owned?: boolean;\n}\n\ninterface GoldShopModalProps {\n  user: UserType | null;\n  isOpen: boolean;\n  onClose: () => void;\n  onPurchase: () => void;\n}\n\nexport default function GoldShopModal({ user, isOpen, onClose, onPurchase }: GoldShopModalProps) {\n  const [loading, setLoading] = useState(false);\n  const [activeCategory, setActiveCategory] = useState<string>('upgrades');\n  const [userPurchases, setUserPurchases] = useState<any[]>([]);\n\n  useEffect(() => {\n    if (isOpen && user) {\n      fetchUserPurchases();\n    }\n  }, [isOpen, user]);\n\n  const fetchUserPurchases = async () => {\n    try {\n      const response = await fetch('/api/users/gold-purchases', {\n        credentials: 'include'\n      });\n      if (response.ok) {\n        const purchases = await response.json();\n        setUserPurchases(purchases);\n      }\n    } catch (error) {\n      console.error('Failed to fetch gold purchases:', error);\n    }\n  };\n\n  const handlePurchase = async (item: GoldItem) => {\n    if (!user || user.gold_collected < item.gold_cost) return;\n\n    setLoading(true);\n    try {\n      const response = await fetch('/api/users/gold-purchase', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({\n          item_type: item.category,\n          item_name: item.name,\n          gold_cost: item.gold_cost,\n          effect_data: JSON.stringify(item.effect_data)\n        })\n      });\n\n      if (response.ok) {\n        onPurchase();\n        fetchUserPurchases();\n        showPurchaseNotification(item.name);\n      } else {\n        const error = await response.json();\n        alert(error.error || 'Purchase failed');\n      }\n    } catch (error) {\n      console.error('Purchase failed:', error);\n      alert('Purchase failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const showPurchaseNotification = (itemName: string) => {\n    const notification = document.createElement('div');\n    notification.className = 'fixed top-4 right-4 bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 animate-pulse';\n    notification.innerHTML = `\n      <div class=\"flex items-center space-x-3\">\n        <svg class=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n          <path d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"/>\n        </svg>\n        <div>\n          <div class=\"font-bold\">Purchase Successful!</div>\n          <div class=\"text-sm\">${itemName} activated</div>\n        </div>\n      </div>\n    `;\n    document.body.appendChild(notification);\n    setTimeout(() => {\n      if (document.body.contains(notification)) {\n        document.body.removeChild(notification);\n      }\n    }, 3000);\n  };\n\n  const getIconComponent = (iconName: string) => {\n    const iconMap: { [key: string]: any } = {\n      'crown': Crown,\n      'zap': Zap,\n      'star': Star,\n      'shield': Shield,\n      'award': Award,\n    };\n    const IconComponent = iconMap[iconName] || Star;\n    return <IconComponent className=\"w-6 h-6\" />;\n  };\n\n  const goldShopItems: GoldItem[] = [\n    // Tier Upgrades\n    {\n      id: 'premium_upgrade',\n      name: 'Premium Tier Upgrade',\n      description: 'Upgrade to Premium tier with 1.5x points multiplier and exclusive perks',\n      icon: 'crown',\n      category: 'upgrades',\n      gold_cost: 500,\n      effect_data: { tier: 'premium' }\n    },\n    {\n      id: 'super_upgrade',\n      name: 'Super Tier Upgrade',\n      description: 'Upgrade to Super tier with 2x points multiplier and maximum benefits',\n      icon: 'crown',\n      category: 'upgrades',\n      gold_cost: 1000,\n      effect_data: { tier: 'super' }\n    },\n    \n    // Multipliers\n    {\n      id: 'key_multiplier_24h',\n      name: '24h Key Multiplier',\n      description: 'Double key earnings from all actions for 24 hours',\n      icon: 'zap',\n      category: 'multipliers',\n      gold_cost: 200,\n      duration: '24 hours',\n      effect_data: { multiplier: 2, duration_hours: 24, type: 'key_earnings' }\n    },\n    {\n      id: 'xp_boost_7d',\n      name: '7-Day XP Boost',\n      description: 'Triple XP gains from all activities for 7 days',\n      icon: 'star',\n      category: 'multipliers',\n      gold_cost: 300,\n      duration: '7 days',\n      effect_data: { multiplier: 3, duration_hours: 168, type: 'xp_earnings' }\n    },\n    \n    // Profile Features\n    {\n      id: 'golden_badge',\n      name: 'Golden Badge',\n      description: 'Display a prestigious golden badge on your profile',\n      icon: 'award',\n      category: 'profile',\n      gold_cost: 150,\n      effect_data: { badge_type: 'golden', permanent: true }\n    },\n    {\n      id: 'profile_boost',\n      name: 'Profile Boost',\n      description: 'Enhanced visibility in leaderboards and search for 30 days',\n      icon: 'shield',\n      category: 'profile',\n      gold_cost: 250,\n      duration: '30 days',\n      effect_data: { boost_type: 'visibility', duration_hours: 720 }\n    }\n  ];\n\n  const categories = [\n    { id: 'upgrades', name: 'Tier Upgrades', icon: Crown },\n    { id: 'multipliers', name: 'Boosts', icon: Zap },\n    { id: 'profile', name: 'Profile', icon: Award }\n  ];\n\n  const filteredItems = goldShopItems.filter(item => item.category === activeCategory);\n\n  const isItemOwned = (item: GoldItem) => {\n    return userPurchases.some(purchase => \n      purchase.item_name === item.name && \n      (!purchase.expires_at || new Date(purchase.expires_at) > new Date())\n    );\n  };\n\n  const canAfford = (item: GoldItem) => {\n    return user && user.gold_collected >= item.gold_cost;\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-yellow-500 to-amber-500 p-6 text-white\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <Crown className=\"w-8 h-8\" />\n              <div>\n                <h2 className=\"text-2xl font-bold\">Gold Shop</h2>\n                <p className=\"text-yellow-100\">Spend your gold on exclusive upgrades and boosts</p>\n              </div>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-white hover:text-yellow-200 transition-colors\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n\n          {/* Gold Balance */}\n          <div className=\"mt-4 bg-white/20 rounded-xl p-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-yellow-100\">Your Gold Balance</span>\n              <span className=\"text-2xl font-bold\">{user?.gold_collected || 0}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Category Tabs */}\n        <div className=\"border-b border-gray-200 px-6\">\n          <div className=\"flex space-x-8 py-4\">\n            {categories.map((category) => {\n              const IconComponent = category.icon;\n              return (\n                <button\n                  key={category.id}\n                  onClick={() => setActiveCategory(category.id)}\n                  className={`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium text-sm transition-colors ${\n                    activeCategory === category.id\n                      ? 'bg-yellow-100 text-yellow-700'\n                      : 'text-gray-600 hover:text-gray-900'\n                  }`}\n                >\n                  <IconComponent className=\"w-4 h-4\" />\n                  <span>{category.name}</span>\n                </button>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* Items Grid */}\n        <div className=\"p-6 max-h-96 overflow-y-auto\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {filteredItems.map((item) => {\n              const owned = isItemOwned(item);\n              const affordable = canAfford(item);\n              \n              return (\n                <div\n                  key={item.id}\n                  className={`p-6 rounded-2xl border transition-all duration-200 ${\n                    owned\n                      ? 'border-green-200 bg-green-50'\n                      : affordable\n                      ? 'border-gray-200 bg-white hover:shadow-md'\n                      : 'border-gray-200 bg-gray-50'\n                  }`}\n                >\n                  <div className=\"flex items-start space-x-4\">\n                    <div className={`w-12 h-12 rounded-xl flex items-center justify-center ${\n                      owned\n                        ? 'bg-green-100 text-green-600'\n                        : 'bg-gradient-to-r from-yellow-500 to-amber-500 text-white'\n                    }`}>\n                      {owned ? <Check className=\"w-6 h-6\" /> : getIconComponent(item.icon)}\n                    </div>\n\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <h3 className=\"font-semibold text-gray-900\">{item.name}</h3>\n                        {item.duration && (\n                          <span className=\"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full\">\n                            {item.duration}\n                          </span>\n                        )}\n                      </div>\n                      \n                      <p className=\"text-sm text-gray-600 mb-4\">{item.description}</p>\n\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center space-x-2\">\n                          <Crown className=\"w-4 h-4 text-yellow-600\" />\n                          <span className=\"font-semibold text-yellow-700\">{item.gold_cost} Gold</span>\n                        </div>\n\n                        <button\n                          onClick={() => handlePurchase(item)}\n                          disabled={loading || owned || !affordable}\n                          className={`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${\n                            owned\n                              ? 'bg-green-100 text-green-700 cursor-not-allowed'\n                              : affordable\n                              ? 'bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-600 hover:to-amber-600 text-white'\n                              : 'bg-gray-200 text-gray-500 cursor-not-allowed'\n                          }`}\n                        >\n                          {loading ? 'Processing...' : owned ? 'Owned' : affordable ? 'Purchase' : 'Not Enough Gold'}\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { X, Trophy, Star, Award, Lock, CheckCircle, Gift } from 'lucide-react';\nimport { UserType } from '@/shared/types';\n\ninterface Achievement {\n  id: number;\n  name: string;\n  description: string;\n  icon: string;\n  category: string;\n  criteria_type: string;\n  criteria_value: number;\n  criteria_field: string;\n  gold_reward: number;\n  xp_reward: number;\n  is_completed: boolean;\n  progress: number;\n}\n\ninterface AchievementsModalProps {\n  user: UserType | null;\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport default function AchievementsModal({ user, isOpen, onClose }: AchievementsModalProps) {\n  const [achievements, setAchievements] = useState<Achievement[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [activeCategory, setActiveCategory] = useState<string>('all');\n\n  useEffect(() => {\n    if (isOpen && user) {\n      fetchAchievements();\n    }\n  }, [isOpen, user]);\n\n  const fetchAchievements = async () => {\n    try {\n      const response = await fetch('/api/users/achievements', {\n        credentials: 'include'\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        // Ensure data is an array\n        setAchievements(Array.isArray(data) ? data : []);\n      } else {\n        // API endpoint doesn't exist yet, use mock data\n        console.log('Achievements API not available, using mock data');\n        setAchievements(getMockAchievements());\n      }\n    } catch (error) {\n      console.error('Failed to fetch achievements:', error);\n      // Use mock data as fallback\n      setAchievements(getMockAchievements());\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getMockAchievements = (): Achievement[] => {\n    return [\n      {\n        id: 1,\n        name: 'First Steps',\n        description: 'Complete your first drop application',\n        icon: 'star',\n        category: 'progression',\n        criteria_type: 'count',\n        criteria_value: 1,\n        criteria_field: 'applications',\n        gold_reward: 5,\n        xp_reward: 100,\n        is_completed: false,\n        progress: 0\n      },\n      {\n        id: 2,\n        name: 'Content Creator',\n        description: 'Share your first piece of content',\n        icon: 'file-text',\n        category: 'creation',\n        criteria_type: 'count',\n        criteria_value: 1,\n        criteria_field: 'content_pieces',\n        gold_reward: 10,\n        xp_reward: 200,\n        is_completed: false,\n        progress: 0\n      },\n      {\n        id: 3,\n        name: 'Social Butterfly',\n        description: 'Reach 100 followers',\n        icon: 'users',\n        category: 'social',\n        criteria_type: 'count',\n        criteria_value: 100,\n        criteria_field: 'followers',\n        gold_reward: 25,\n        xp_reward: 500,\n        is_completed: false,\n        progress: user?.follower_count || 0\n      },\n      {\n        id: 4,\n        name: 'Level Up',\n        description: 'Reach level 5',\n        icon: 'arrow-up',\n        category: 'progression',\n        criteria_type: 'level',\n        criteria_value: 5,\n        criteria_field: 'level',\n        gold_reward: 15,\n        xp_reward: 300,\n        is_completed: (user?.level || 0) >= 5,\n        progress: user?.level || 0\n      },\n      {\n        id: 5,\n        name: 'Big Spender',\n        description: 'Earn 1000 points',\n        icon: 'coins',\n        category: 'earning',\n        criteria_type: 'count',\n        criteria_value: 1000,\n        criteria_field: 'points',\n        gold_reward: 20,\n        xp_reward: 400,\n        is_completed: (user?.points_balance || 0) >= 1000,\n        progress: user?.points_balance || 0\n      },\n      {\n        id: 6,\n        name: 'Master Creator',\n        description: 'Create 5 pieces of content',\n        icon: 'crown',\n        category: 'creation',\n        criteria_type: 'count',\n        criteria_value: 5,\n        criteria_field: 'content_pieces',\n        gold_reward: 50,\n        xp_reward: 1000,\n        is_completed: false,\n        progress: 0\n      }\n    ];\n  };\n  const claimAchievement = async (achievementId: number) => {\n    try {\n      const response = await fetch(`/api/users/achievements/${achievementId}/claim`, {\n        method: 'POST',\n        credentials: 'include'\n      });\n      if (response.ok) {\n        const result = await response.json();\n        // Show reward notification\n        showRewardNotification(result.gold_reward, result.xp_reward);\n        // Refresh achievements\n        fetchAchievements();\n      }\n    } catch (error) {\n      console.error('Failed to claim achievement:', error);\n    }\n  };\n\n  const showRewardNotification = (gold: number, xp: number) => {\n    const notification = document.createElement('div');\n    notification.className = 'fixed top-4 right-4 bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 animate-pulse';\n    notification.innerHTML = `\n      <div class=\"flex items-center space-x-3\">\n        <svg class=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n          <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"/>\n        </svg>\n        <div>\n          <div class=\"font-bold\">Achievement Unlocked!</div>\n          <div class=\"text-sm\">+${gold} Gold, +${xp} XP</div>\n        </div>\n      </div>\n    `;\n    document.body.appendChild(notification);\n    setTimeout(() => {\n      if (document.body.contains(notification)) {\n        document.body.removeChild(notification);\n      }\n    }, 4000);\n  };\n\n  const getIconComponent = (iconName: string) => {\n    const iconMap: { [key: string]: any } = {\n      'star': Star,\n      'file-text': Award,\n      'zap': Trophy,\n      'heart': Star,\n      'calendar': Award,\n      'crown': Trophy,\n      'trophy': Trophy,\n      'arrow-up': Star,\n      'coins': Award,\n      'users': Star,\n    };\n    const IconComponent = iconMap[iconName] || Star;\n    return <IconComponent className=\"w-6 h-6\" />;\n  };\n\n  const getCategoryColor = (category: string) => {\n    const colorMap: { [key: string]: string } = {\n      'engagement': 'from-blue-500 to-cyan-500',\n      'creation': 'from-purple-500 to-pink-500',\n      'earning': 'from-green-500 to-emerald-500',\n      'progression': 'from-orange-500 to-red-500',\n      'currency': 'from-yellow-500 to-amber-500',\n      'social': 'from-indigo-500 to-purple-500',\n    };\n    return colorMap[category] || 'from-gray-500 to-slate-500';\n  };\n\n  const categories = achievements && achievements.length > 0 ? ['all', ...new Set(achievements.map(a => a.category))] : ['all'];\n  const filteredAchievements = achievements && achievements.length > 0\n    ? (activeCategory === 'all'\n        ? achievements\n        : achievements.filter(a => a.category === activeCategory))\n    : [];\n\n  const completedCount = achievements && achievements.length > 0 ? achievements.filter(a => a.is_completed).length : 0;\n  const totalGoldEarned = achievements && achievements.length > 0\n    ? achievements\n        .filter(a => a.is_completed)\n        .reduce((sum, a) => sum + a.gold_reward, 0)\n    : 0;\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-yellow-500 to-orange-500 p-6 text-white\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <Trophy className=\"w-8 h-8\" />\n              <div>\n                <h2 className=\"text-2xl font-bold\">Achievements</h2>\n                <p className=\"text-yellow-100\">Track your progress and earn rewards</p>\n              </div>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-white hover:text-yellow-200 transition-colors\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n\n          {/* Stats */}\n          <div className=\"grid grid-cols-3 gap-4 mt-6\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold\">{completedCount}</div>\n              <div className=\"text-yellow-100 text-sm\">Completed</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold\">{achievements?.length || 0}</div>\n              <div className=\"text-yellow-100 text-sm\">Total</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold\">{totalGoldEarned}</div>\n              <div className=\"text-yellow-100 text-sm\">Gold Earned</div>\n            </div>\n          </div>\n        </div>\n\n        {/* Category Tabs */}\n        <div className=\"border-b border-gray-200 px-6\">\n          <div className=\"flex space-x-8 overflow-x-auto py-4\">\n            {categories.map((category) => (\n              <button\n                key={category}\n                onClick={() => setActiveCategory(category)}\n                className={`px-4 py-2 rounded-lg font-medium text-sm whitespace-nowrap transition-colors ${\n                  activeCategory === category\n                    ? 'bg-orange-100 text-orange-700'\n                    : 'text-gray-600 hover:text-gray-900'\n                }`}\n              >\n                {category.charAt(0).toUpperCase() + category.slice(1)}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Achievements Grid */}\n        <div className=\"p-6 max-h-96 overflow-y-auto\">\n          {loading ? (\n            <div className=\"flex items-center justify-center h-32\">\n              <div className=\"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full\"></div>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {filteredAchievements && filteredAchievements.length > 0 ? filteredAchievements.map((achievement) => (\n                <div\n                  key={achievement.id}\n                  className={`relative p-6 rounded-2xl border transition-all duration-200 ${\n                    achievement.is_completed\n                      ? 'border-green-200 bg-green-50'\n                      : 'border-gray-200 bg-white hover:shadow-md'\n                  }`}\n                >\n                  {/* Achievement Icon */}\n                  <div className=\"flex items-start space-x-4\">\n                    <div className={`w-12 h-12 rounded-xl flex items-center justify-center bg-gradient-to-r ${getCategoryColor(achievement.category)} text-white`}>\n                      {getIconComponent(achievement.icon)}\n                    </div>\n\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <h3 className=\"font-semibold text-gray-900\">{achievement.name}</h3>\n                        {achievement.is_completed && (\n                          <CheckCircle className=\"w-5 h-5 text-green-600\" />\n                        )}\n                      </div>\n                      \n                      <p className=\"text-sm text-gray-600 mb-3\">{achievement.description}</p>\n\n                      {/* Progress Bar */}\n                      {!achievement.is_completed && (\n                        <div className=\"mb-3\">\n                          <div className=\"flex justify-between text-xs text-gray-500 mb-1\">\n                            <span>Progress</span>\n                            <span>{achievement.progress}/{achievement.criteria_value}</span>\n                          </div>\n                          <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                            <div\n                              className={`h-2 rounded-full bg-gradient-to-r ${getCategoryColor(achievement.category)}`}\n                              style={{ width: `${Math.min(100, (achievement.progress / achievement.criteria_value) * 100)}%` }}\n                            ></div>\n                          </div>\n                        </div>\n                      )}\n\n                      {/* Rewards */}\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center space-x-3 text-sm\">\n                          {achievement.gold_reward > 0 && (\n                            <div className=\"flex items-center space-x-1 text-yellow-600\">\n                              <Gift className=\"w-4 h-4\" />\n                              <span>{achievement.gold_reward} Gold</span>\n                            </div>\n                          )}\n                          {achievement.xp_reward > 0 && (\n                            <div className=\"flex items-center space-x-1 text-blue-600\">\n                              <Star className=\"w-4 h-4\" />\n                              <span>{achievement.xp_reward} XP</span>\n                            </div>\n                          )}\n                        </div>\n\n                        {/* Claim Button */}\n                        {achievement.progress >= achievement.criteria_value && !achievement.is_completed && (\n                          <button\n                            onClick={() => claimAchievement(achievement.id)}\n                            className=\"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200\"\n                          >\n                            Claim\n                          </button>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Locked Overlay */}\n                  {achievement.progress < achievement.criteria_value && !achievement.is_completed && (\n                    <div className=\"absolute inset-0 bg-gray-100 bg-opacity-50 rounded-2xl flex items-center justify-center\">\n                      <Lock className=\"w-8 h-8 text-gray-400\" />\n                    </div>\n                  )}\n                </div>\n              )) : (\n                <div className=\"col-span-full text-center py-12\">\n                  <Trophy className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n                  <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No Achievements Yet</h3>\n                  <p className=\"text-gray-600\">Complete tasks and reach milestones to unlock achievements!</p>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect, useCallback } from 'react';\nimport { useAuth } from './useAuth';\n\ninterface NotificationHook {\n  unreadCount: number;\n  addNotification: (notification: {\n    type: 'achievement' | 'reward' | 'system' | 'social' | 'warning';\n    title: string;\n    message: string;\n    data?: any;\n  }) => void;\n  showToast: (message: string, type?: 'success' | 'error' | 'info' | 'warning') => void;\n}\n\nexport function useNotifications(): NotificationHook {\n  const { user } = useAuth();\n  const [unreadCount, setUnreadCount] = useState(0);\n\n  useEffect(() => {\n    if (user) {\n      // In a real implementation, this would fetch the actual unread count\n      // For now, we'll simulate with localStorage\n      const stored = localStorage.getItem(`notifications_unread_${user.id}`);\n      setUnreadCount(stored ? parseInt(stored) : 0);\n    }\n  }, [user]);\n\n  const addNotification = useCallback((notification: {\n    type: 'achievement' | 'reward' | 'system' | 'social' | 'warning';\n    title: string;\n    message: string;\n    data?: any;\n  }) => {\n    if (!user) return;\n    \n    // Increment unread count\n    const newCount = unreadCount + 1;\n    setUnreadCount(newCount);\n    localStorage.setItem(`notifications_unread_${user.id}`, newCount.toString());\n    \n    // Show toast notification\n    showToast(notification.message, 'info');\n    \n    // In a real implementation, this would save to the database\n    console.log('New notification:', notification);\n  }, [user, unreadCount]);\n\n  const showToast = useCallback((message: string, type: 'success' | 'error' | 'info' | 'warning' = 'info') => {\n    // Create a toast notification element\n    const toast = document.createElement('div');\n    toast.className = `fixed top-20 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm transform transition-all duration-300 translate-x-full`;\n    \n    // Style based on type\n    const styles = {\n      success: 'bg-green-500 text-white',\n      error: 'bg-red-500 text-white',\n      warning: 'bg-yellow-500 text-white',\n      info: 'bg-blue-500 text-white'\n    };\n    \n    toast.className += ` ${styles[type]}`;\n    toast.textContent = message;\n    \n    document.body.appendChild(toast);\n    \n    // Animate in\n    setTimeout(() => {\n      toast.style.transform = 'translateX(0)';\n    }, 100);\n    \n    // Animate out and remove\n    setTimeout(() => {\n      toast.style.transform = 'translateX(100%)';\n      setTimeout(() => {\n        if (document.body.contains(toast)) {\n          document.body.removeChild(toast);\n        }\n      }, 300);\n    }, 3000);\n  }, []);\n\n  return {\n    unreadCount,\n    addNotification,\n    showToast\n  };\n}\n","import { API_BASE_URL } from '../config';\n\nexport const buildAuthHeaders = (headers: Record<string, string> = {}) => {\n  if (typeof window === 'undefined') {\n    return { ...headers };\n  }\n\n  const authToken = localStorage.getItem('authToken');\n\n  if (authToken) {\n    return {\n      ...headers,\n      Authorization: `Bearer ${authToken}`\n    };\n  }\n\n  return { ...headers };\n};\n\nexport const resolveApiUrl = (path: string) => {\n  if (!path) {\n    return API_BASE_URL;\n  }\n\n  // Absolute URLs should pass through unchanged\n  if (/^https?:\\/\\//i.test(path)) {\n    return path;\n  }\n\n  const base = API_BASE_URL || '';\n  const normalisedPath = path.startsWith('/') ? path : `/${path}`;\n  return `${base}${normalisedPath}`;\n};\n\nexport const apiFetch = (path: string, options?: RequestInit) => {\n  return fetch(resolveApiUrl(path), options);\n};\n\nif (typeof window !== 'undefined' && !(window as any).__PROMORANG_FETCH_PATCHED__) {\n  const originalFetch = window.fetch.bind(window);\n  (window as any).__PROMORANG_FETCH_PATCHED__ = true;\n\n  window.fetch = (input: RequestInfo | URL, init?: RequestInit) => {\n    if (typeof input === 'string') {\n      if (input.startsWith('/api')) {\n        return originalFetch(resolveApiUrl(input), init);\n      }\n      return originalFetch(input, init);\n    }\n\n    if (input instanceof Request) {\n      const url = new URL(input.url, window.location.origin);\n      if (url.origin === window.location.origin && url.pathname.startsWith('/api')) {\n        const redirectedRequest = new Request(resolveApiUrl(url.pathname + url.search), input);\n        return originalFetch(redirectedRequest, init);\n      }\n      return originalFetch(input, init);\n    }\n\n    if (input instanceof URL) {\n      if (input.origin === window.location.origin && input.pathname.startsWith('/api')) {\n        const rewritten = new URL(resolveApiUrl(input.pathname + input.search));\n        return originalFetch(rewritten, init);\n      }\n      return originalFetch(input, init);\n    }\n\n    return originalFetch(input, init);\n  };\n}\n","import { ReactNode, useEffect, useState } from 'react';\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport { useAuth } from '../hooks/useAuth';\nimport { API_BASE_URL } from '../config';\nimport { \n  Home, \n  DollarSign, \n  Plus, \n  TrendingUp, \n  User, \n  LogOut,\n  Coins,\n  Key,\n  Star,\n  Trophy,\n  Megaphone,\n  Search,\n  Menu,\n  X,\n  Wallet,\n  ChevronDown,\n  Settings,\n  Crown,\n  Bell,\n  Rocket\n} from 'lucide-react';\nimport UserLink from '@/react-app/components/UserLink';\nimport Tooltip from '@/react-app/components/Tooltip';\nimport NotificationCenter from '@/react-app/components/NotificationCenter';\nimport { UserType } from '@/shared/types';\nimport CurrencyConversionModal from '@/react-app/components/CurrencyConversionModal';\nimport MasterKeyModal from '@/react-app/components/MasterKeyModal';\nimport InstagramVerificationModal from '@/react-app/components/InstagramVerificationModal';\nimport UserTierUpgradeModal from '@/react-app/components/UserTierUpgradeModal';\nimport SearchModal from '@/react-app/components/SearchModal';\nimport GoldShopModal from '@/react-app/components/GoldShopModal';\nimport AchievementsModal from '@/react-app/components/AchievementsModal';\nimport { useNotifications } from '@/react-app/hooks/useNotifications';\nimport { buildAuthHeaders } from '@/react-app/utils/api';\n\ninterface LayoutProps {\n  children: ReactNode;\n}\n\nexport default function Layout({ children }: LayoutProps) {\n  const { user, logout } = useAuth();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [userData, setUserData] = useState<UserType | null>(null);\n  const [showCurrencyModal, setShowCurrencyModal] = useState(false);\n  const [showMasterKeyModal, setShowMasterKeyModal] = useState(false);\n  const [showInstagramModal, setShowInstagramModal] = useState(false);\n  const [showUpgradeModal, setShowUpgradeModal] = useState(false);\n  const [showSearchModal, setShowSearchModal] = useState(false);\n  const [showUserMenu, setShowUserMenu] = useState(false);\n  const [showWalletMenu, setShowWalletMenu] = useState(false);\n  const [showMobileMenu, setShowMobileMenu] = useState(false);\n  const [showNotifications, setShowNotifications] = useState(false);\n  const [showGoldShopModal, setShowGoldShopModal] = useState(false);\n  const [showAchievementsModal, setShowAchievementsModal] = useState(false);\n  const { unreadCount } = useNotifications();\n  const apiBase = API_BASE_URL || '';\n  const withApiBase = (path: string) => `${apiBase}${path}`;\n\n  useEffect(() => {\n    if (user) {\n      fetchUserData();\n    }\n  }, [user]);\n\n  // Add keyboard shortcut for search\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {\n        e.preventDefault();\n        setShowSearchModal(true);\n      }\n      if (e.key === 'Escape') {\n        setShowUserMenu(false);\n        setShowWalletMenu(false);\n        setShowMobileMenu(false);\n        setShowNotifications(false);\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  // Close dropdowns when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      const target = e.target as Element;\n      if (!target.closest('.user-menu') && !target.closest('.wallet-menu')) {\n        setShowUserMenu(false);\n        setShowWalletMenu(false);\n      }\n    };\n\n    document.addEventListener('click', handleClickOutside);\n    return () => document.removeEventListener('click', handleClickOutside);\n  }, []);\n\n  const fetchUserData = async () => {\n    try {\n      const headers = buildAuthHeaders();\n      const response = await fetch(withApiBase('/api/users/me'), {\n        credentials: 'include',\n        headers\n      });\n      if (response.ok) {\n        const data = await response.json();\n        // Handle both direct user data and null responses\n        if (data && typeof data === 'object') {\n          setUserData(data);\n        }\n      }\n    } catch (error) {\n      console.error('Failed to fetch user data:', error);\n    }\n  };\n\n  const getNavigation = () => {\n    const baseNav = [\n      { name: 'Home', href: '/dashboard', icon: Home },\n      { name: 'Earn', href: '/earn', icon: DollarSign },\n      { name: 'Create', href: '/create', icon: Plus },\n      { name: 'Invest', href: '/invest', icon: TrendingUp },\n      { name: 'Growth Hub', href: '/growth-hub', icon: Rocket },\n    ];\n    \n    // Add advertiser dashboard for advertisers\n    if (userData && (userData as any).user_type === 'advertiser') {\n      baseNav.push({ name: 'Dashboard', href: '/advertiser', icon: Settings });\n    }\n    \n    return baseNav;\n  };\n\n  const navigation = getNavigation();\n\n  const isActive = (path: string) => location.pathname === path || location.pathname.startsWith(path + '/');\n\n  const getTotalBalance = () => {\n    if (!userData) return 0;\n    return (userData.points_balance || 0) + (userData.keys_balance || 0) + (userData.gems_balance || 0) + (userData.gold_collected || 0);\n  };\n\n  const profileSlug =\n    userData?.username ||\n    (userData?.email ? userData.email.split('@')[0] : undefined) ||\n    (user?.username ? String(user.username) : undefined) ||\n    (user?.email ? user.email.split('@')[0] : undefined) ||\n    'me';\n\n  const profilePath = `/profile/${encodeURIComponent(profileSlug)}`;\n\n  const handleWalletAction = (action: string) => {\n    setShowWalletMenu(false);\n    switch (action) {\n      case 'instagram':\n        setShowInstagramModal(true);\n        break;\n      case 'masterkey':\n        setShowMasterKeyModal(true);\n        break;\n      case 'convert':\n        setShowCurrencyModal(true);\n        break;\n      case 'leaderboard':\n        navigate('/leaderboard');\n        break;\n      case 'growthhub':\n        navigate('/growth-hub');\n        break;\n      case 'wallet':\n        navigate('/wallet');\n        break;\n      case 'goldshop':\n        setShowGoldShopModal(true);\n        break;\n      case 'achievements':\n        setShowAchievementsModal(true);\n        break;\n    }\n  };\n\n  const handleLogout = async () => {\n    try {\n      // Call the Mocha auth logout first to clear authentication state\n      await logout();\n      \n      // Clear any local storage or session storage\n      localStorage.clear();\n      sessionStorage.clear();\n      \n      // Call our backend logout endpoint to clear server-side session\n      try {\n        await fetch(withApiBase('/api/auth/logout'), {\n          method: 'POST',\n          credentials: 'include'\n        });\n      } catch (backendError) {\n        console.error('Backend logout failed:', backendError);\n        // Continue with redirect even if backend logout fails\n      }\n      \n      // Use React Router navigate to go to the marketing page\n      navigate('/', { replace: true });\n      \n    } catch (error) {\n      console.error('Logout failed:', error);\n      \n      // Fallback: Force clear everything and redirect anyway\n      try {\n        localStorage.clear();\n        sessionStorage.clear();\n      } catch (storageError) {\n        console.error('Failed to clear storage:', storageError);\n      }\n      \n      // Still redirect to marketing page even if logout fails\n      navigate('/', { replace: true });\n    }\n  };\n\n  const handleUserAction = (action: string) => {\n    setShowUserMenu(false);\n    switch (action) {\n      case 'profile':\n        navigate(profilePath);\n        break;\n      case 'upgrade':\n        setShowUpgradeModal(true);\n        break;\n      case 'advertiser':\n        if (!userData || (userData as any).user_type !== 'advertiser') {\n          navigate('/advertiser/onboarding');\n        } else {\n          navigate('/advertiser');\n        }\n        break;\n      case 'logout':\n        handleLogout();\n        break;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Main Header */}\n      <header className=\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            {/* Left Side - Logo & Search */}\n            <div className=\"flex items-center space-x-4\">\n              <Link to=\"/dashboard\" className=\"flex items-center space-x-3 group\">\n                <img \n                  src=\"https://mocha-cdn.com/0198f6f0-5737-78cb-955a-4b0907aa1065/Promorang_logo_FULL-02.png\"\n                  alt=\"Promorang\"\n                  className=\"h-10 w-10 transition-transform group-hover:scale-105\"\n                />\n              </Link>\n              \n              \n            </div>\n\n            {/* Right Side - Actions & User Menu */}\n            <div className=\"flex items-center space-x-2\">\n              {/* Desktop Search Button */}\n              <Tooltip content=\"Search (⌘K)\" position=\"bottom\" compact={true}>\n                <button\n                  onClick={() => setShowSearchModal(true)}\n                  className=\"hidden md:flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\n                >\n                  <Search className=\"w-4 h-4 text-gray-600\" />\n                  <span className=\"text-sm text-gray-600\">Search...</span>\n                  <kbd className=\"hidden lg:inline-flex items-center px-2 py-1 text-xs font-medium text-gray-500 bg-white border border-gray-300 rounded\">\n                    ⌘K\n                  </kbd>\n                </button>\n              </Tooltip>\n\n              {/* Desktop Notifications */}\n              <Tooltip content=\"Notifications\" position=\"bottom\" compact={true}>\n                <button\n                  onClick={() => setShowNotifications(true)}\n                  className=\"hidden md:flex relative p-2 text-gray-400 hover:text-gray-600 transition-colors rounded-lg hover:bg-gray-100\"\n                >\n                  <Bell className=\"w-5 h-5\" />\n                  {unreadCount > 0 && (\n                    <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center\">\n                      {unreadCount > 9 ? '9+' : unreadCount}\n                    </span>\n                  )}\n                </button>\n              </Tooltip>\n\n              {/* Desktop Wallet Menu */}\n              {(user || userData) && (\n                <div className=\"relative wallet-menu hidden md:block\">\n                  <Tooltip content=\"Your wallet balance\" position=\"bottom\" compact={true}>\n                    <button\n                      onClick={() => setShowWalletMenu(!showWalletMenu)}\n                      className=\"flex items-center space-x-2 px-3 py-2 bg-gradient-to-r from-blue-50 to-purple-50 hover:from-blue-100 hover:to-purple-100 rounded-lg transition-all duration-200 border border-blue-200/50 shadow-sm hover:shadow-md\"\n                    >\n                      <Wallet className=\"w-4 h-4 text-blue-600\" />\n                      <span className=\"hidden sm:inline text-sm font-semibold text-blue-900 min-w-0\">\n                        {getTotalBalance().toLocaleString()}\n                      </span>\n                      <ChevronDown className={`w-4 h-4 text-blue-600 transition-transform ${showWalletMenu ? 'rotate-180' : ''}`} />\n                    </button>\n                  </Tooltip>\n\n                  {/* Wallet Dropdown */}\n                  {showWalletMenu && (\n                    <div className=\"absolute right-0 mt-2 w-72 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50\">\n                      <div className=\"px-4 py-2 border-b border-gray-100\">\n                        <h3 className=\"text-sm font-medium text-gray-900\">Your Balances</h3>\n                      </div>\n                      \n                      <div className=\"py-2\">\n                        <Tooltip content=\"Earn points from engagement\" position=\"left\">\n                          <button\n                            onClick={() => handleWalletAction('instagram')}\n                            className=\"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center justify-between\"\n                          >\n                            <div className=\"flex items-center space-x-3\">\n                              <Coins className=\"w-4 h-4 text-blue-600\" />\n                              <span className=\"text-sm text-gray-700\">Points</span>\n                            </div>\n                            <span className=\"text-sm font-medium text-blue-900\">{userData?.points_balance || 0}</span>\n                          </button>\n                        </Tooltip>\n                        \n                        <Tooltip content=\"Unlock premium features\" position=\"left\">\n                          <button\n                            onClick={() => handleWalletAction('masterkey')}\n                            className=\"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center justify-between\"\n                          >\n                            <div className=\"flex items-center space-x-3\">\n                              <Key className=\"w-4 h-4 text-orange-600\" />\n                              <span className=\"text-sm text-gray-700\">Keys</span>\n                            </div>\n                            <span className=\"text-sm font-medium text-orange-900\">{userData?.keys_balance || 0}</span>\n                          </button>\n                        </Tooltip>\n                        \n                        <Tooltip content=\"Premium currency from drops\" position=\"left\">\n                          <button\n                            onClick={() => handleWalletAction('convert')}\n                            className=\"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center justify-between\"\n                          >\n                            <div className=\"flex items-center space-x-3\">\n                              <Star className=\"w-4 h-4 text-purple-600\" />\n                              <span className=\"text-sm text-gray-700\">Gems</span>\n                            </div>\n                            <span className=\"text-sm font-medium text-purple-900\">{userData?.gems_balance || 0}</span>\n                          </button>\n                        </Tooltip>\n                        \n                        {(userData?.gold_collected || 0) > 0 && (\n                          <Tooltip content=\"Achievement rewards\" position=\"left\">\n                            <button\n                              onClick={() => handleWalletAction('goldshop')}\n                              className=\"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center justify-between\"\n                            >\n                              <div className=\"flex items-center space-x-3\">\n                                <Trophy className=\"w-4 h-4 text-yellow-600\" />\n                                <span className=\"text-sm text-gray-700\">Gold</span>\n                              </div>\n                              <span className=\"text-sm font-medium text-yellow-900\">{userData?.gold_collected || 0}</span>\n                            </button>\n                          </Tooltip>\n                        )}\n                      </div>\n                      \n                      <div className=\"border-t border-gray-100 pt-2\">\n                        <Tooltip content=\"Full wallet management\" position=\"left\" compact={true}>\n                          <button\n                            onClick={() => handleWalletAction('wallet')}\n                            className=\"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3\"\n                          >\n                            <Wallet className=\"w-4 h-4 text-blue-600\" />\n                            <span className=\"text-sm text-gray-700\">View Full Wallet</span>\n                          </button>\n                        </Tooltip>\n                        <Tooltip content=\"Put your gems to work\" position=\"left\" compact={true}>\n                          <button\n                            onClick={() => handleWalletAction('growthhub')}\n                            className=\"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3\"\n                          >\n                            <Rocket className=\"w-4 h-4 text-blue-600\" />\n                            <span className=\"text-sm text-gray-700\">Explore Growth Hub</span>\n                          </button>\n                        </Tooltip>\n                        <Tooltip content=\"View rankings\" position=\"left\" compact={true}>\n                          <button\n                            onClick={() => handleWalletAction('leaderboard')}\n                            className=\"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3\"\n                          >\n                            <Trophy className=\"w-4 h-4 text-purple-600\" />\n                            <span className=\"text-sm text-gray-700\">View Rankings</span>\n                          </button>\n                        </Tooltip>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {/* Desktop User Menu */}\n              <div className=\"relative user-menu hidden md:block\">\n                <button\n                  onClick={() => setShowUserMenu(!showUserMenu)}\n                  className=\"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-all duration-200 group\"\n                >\n                  <UserLink \n                    username={userData?.username || user?.email?.split('@')[0]}\n                    displayName={userData?.display_name || user?.google_user_data?.name || user?.google_user_data?.given_name}\n                    avatarUrl={userData?.avatar_url || user?.google_user_data?.picture}\n                    className=\"flex items-center space-x-2\"\n                    size=\"sm\"\n                  />\n                  <div className=\"hidden lg:block text-left ml-2\">\n                    <div className=\"text-sm font-medium text-gray-900 truncate max-w-32\">\n                      {user?.google_user_data?.given_name || user?.google_user_data?.name || user?.email?.split('@')[0] || 'User'}\n                    </div>\n                    <div className=\"flex items-center space-x-1\">\n                      {(userData?.user_tier || 'free') === 'super' && <Crown className=\"w-3 h-3 text-yellow-600\" />}\n                      {(userData?.user_tier || 'free') === 'premium' && <Star className=\"w-3 h-3 text-purple-600\" />}\n                      {(userData?.user_tier || 'free') === 'free' && <Star className=\"w-3 h-3 text-gray-600\" />}\n                      <span className={`text-xs font-medium ${\n                        (userData?.user_tier || 'free') === 'super' ? 'text-yellow-700' :\n                        (userData?.user_tier || 'free') === 'premium' ? 'text-purple-700' : 'text-gray-700'\n                      }`}>\n                        {(userData?.user_tier || 'free').charAt(0).toUpperCase() + (userData?.user_tier || 'free').slice(1)}\n                      </span>\n                    </div>\n                  </div>\n                  <ChevronDown className={`w-4 h-4 text-gray-400 transition-transform group-hover:text-gray-600 ${showUserMenu ? 'rotate-180' : ''}`} />\n                </button>\n\n                {/* User Dropdown */}\n                {showUserMenu && (\n                  <div className=\"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50\">\n                    <div className=\"px-4 py-2 border-b border-gray-100\">\n                      <div className=\"text-sm font-medium text-gray-900\">\n                        {userData?.display_name || user?.google_user_data?.name || user?.google_user_data?.given_name || user?.email?.split('@')[0] || 'User'}\n                      </div>\n                      <div className=\"text-xs text-gray-500\">{user?.email}</div>\n                    </div>\n                    \n                    <div className=\"py-2\">\n                      <button\n                        onClick={() => handleUserAction('profile')}\n                        className=\"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3\"\n                      >\n                        <User className=\"w-4 h-4 text-gray-600\" />\n                        <span className=\"text-sm text-gray-700\">Profile</span>\n                      </button>\n                      \n                      {userData && (\n                        <Tooltip content=\"Upgrade to Premium or Super tier for better rewards\" position=\"left\">\n                          <button\n                            onClick={() => handleUserAction('upgrade')}\n                            className=\"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3\"\n                          >\n                            <Crown className=\"w-4 h-4 text-purple-600\" />\n                            <span className=\"text-sm text-gray-700\">Upgrade Tier</span>\n                          </button>\n                        </Tooltip>\n                      )}\n                      \n                      <Tooltip content=\"Create and manage marketing drops for your business\" position=\"left\">\n                        <button\n                          onClick={() => handleUserAction('advertiser')}\n                          className=\"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3\"\n                        >\n                          <Megaphone className=\"w-4 h-4 text-orange-600\" />\n                          <span className=\"text-sm text-gray-700\">\n                            {(!userData || (userData as any).user_type !== 'advertiser') ? 'Become Advertiser' : 'Advertiser Dashboard'}\n                          </span>\n                        </button>\n                      </Tooltip>\n                    </div>\n                    \n                    <div className=\"border-t border-gray-100 pt-2\">\n                      <button\n                        onClick={() => handleUserAction('logout')}\n                        className=\"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3 text-red-600\"\n                      >\n                        <LogOut className=\"w-4 h-4\" />\n                        <span className=\"text-sm\">Sign Out</span>\n                      </button>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              \n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Mobile Menu Overlay */}\n      {showMobileMenu && (\n        <div className=\"lg:hidden fixed inset-0 z-50 bg-black bg-opacity-50\" onClick={() => setShowMobileMenu(false)}>\n          <div className=\"fixed inset-y-0 right-0 w-80 bg-white shadow-xl overflow-y-auto\" onClick={(e) => e.stopPropagation()}>\n            {/* Header with User Info */}\n            <div className=\"p-4 border-b border-gray-200 bg-gradient-to-r from-orange-50 to-red-50\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <h2 className=\"text-lg font-semibold text-gray-900\">Menu</h2>\n                <button\n                  onClick={() => setShowMobileMenu(false)}\n                  className=\"p-2 text-gray-400 hover:text-gray-600\"\n                >\n                  <X className=\"w-5 h-5\" />\n                </button>\n              </div>\n              \n              {/* User Profile Section */}\n              <div className=\"flex items-center space-x-3\">\n                <UserLink \n                  username={userData?.username || user?.email?.split('@')[0]}\n                  displayName={userData?.display_name || user?.google_user_data?.name || user?.google_user_data?.given_name || 'User'}\n                  avatarUrl={userData?.avatar_url || user?.google_user_data?.picture}\n                  className=\"flex items-center space-x-3\"\n                  size=\"md\"\n                />\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"text-sm font-medium text-gray-900 truncate\">\n                    {userData?.display_name || user?.google_user_data?.name || user?.google_user_data?.given_name || user?.email?.split('@')[0] || 'User'}\n                  </div>\n                  <div className=\"flex items-center space-x-1\">\n                    {(userData?.user_tier || 'free') === 'super' && <Crown className=\"w-3 h-3 text-yellow-600\" />}\n                    {(userData?.user_tier || 'free') === 'premium' && <Star className=\"w-3 h-3 text-purple-600\" />}\n                    {(userData?.user_tier || 'free') === 'free' && <Star className=\"w-3 h-3 text-gray-600\" />}\n                    <span className={`text-xs font-medium ${\n                      (userData?.user_tier || 'free') === 'super' ? 'text-yellow-700' :\n                      (userData?.user_tier || 'free') === 'premium' ? 'text-purple-700' : 'text-gray-700'\n                    }`}>\n                      {(userData?.user_tier || 'free').charAt(0).toUpperCase() + (userData?.user_tier || 'free').slice(1)} Tier\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            {/* Quick Actions */}\n            <div className=\"p-4 space-y-2\">\n              <h3 className=\"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3\">Quick Actions</h3>\n              \n              {/* Search */}\n              <button\n                onClick={() => {\n                  setShowSearchModal(true);\n                  setShowMobileMenu(false);\n                }}\n                className=\"w-full flex items-center space-x-3 px-3 py-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors\"\n              >\n                <Search className=\"w-5 h-5 text-gray-600\" />\n                <span className=\"font-medium\">Search</span>\n              </button>\n\n              {/* Notifications */}\n              <button\n                onClick={() => {\n                  setShowNotifications(true);\n                  setShowMobileMenu(false);\n                }}\n                className=\"w-full flex items-center justify-between px-3 py-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors\"\n              >\n                <div className=\"flex items-center space-x-3\">\n                  <Bell className=\"w-5 h-5 text-gray-600\" />\n                  <span className=\"font-medium\">Notifications</span>\n                </div>\n                {unreadCount > 0 && (\n                  <span className=\"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full\">\n                    {unreadCount > 9 ? '9+' : unreadCount}\n                  </span>\n                )}\n              </button>\n            </div>\n\n            {/* Wallet Section */}\n            {(user || userData) && (\n              <div className=\"px-4 pb-4\">\n                <h3 className=\"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3\">Wallet</h3>\n                <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-3 mb-3\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <span className=\"text-sm font-medium text-gray-700\">Total Balance</span>\n                    <span className=\"text-lg font-bold text-blue-900\">{getTotalBalance().toLocaleString()}</span>\n                  </div>\n                  <div className=\"grid grid-cols-2 gap-2 text-xs\">\n                    <div className=\"flex items-center space-x-1\">\n                      <Coins className=\"w-3 h-3 text-blue-600\" />\n                      <span>{(userData?.points_balance || 0).toLocaleString()} pts</span>\n                    </div>\n                    <div className=\"flex items-center space-x-1\">\n                      <Key className=\"w-3 h-3 text-orange-600\" />\n                      <span>{userData?.keys_balance || 0} keys</span>\n                    </div>\n                    <div className=\"flex items-center space-x-1\">\n                      <Star className=\"w-3 h-3 text-purple-600\" />\n                      <span>{userData?.gems_balance || 0} gems</span>\n                    </div>\n                    {(userData?.gold_collected || 0) > 0 && (\n                      <div className=\"flex items-center space-x-1\">\n                        <Trophy className=\"w-3 h-3 text-yellow-600\" />\n                        <span>{userData?.gold_collected || 0} gold</span>\n                      </div>\n                    )}\n                  </div>\n                </div>\n                \n                <div className=\"space-y-1\">\n                  <button\n                    onClick={() => {\n                      handleWalletAction('wallet');\n                      setShowMobileMenu(false);\n                    }}\n                    className=\"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors\"\n                  >\n                    <Wallet className=\"w-4 h-4 text-blue-600\" />\n                    <span className=\"text-sm\">Full Wallet</span>\n                  </button>\n                  \n                  <button\n                    onClick={() => {\n                      handleWalletAction('convert');\n                      setShowMobileMenu(false);\n                    }}\n                    className=\"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors\"\n                  >\n                    <Star className=\"w-4 h-4 text-purple-600\" />\n                    <span className=\"text-sm\">Convert Currency</span>\n                  </button>\n                  \n                  <button\n                    onClick={() => {\n                      handleWalletAction('masterkey');\n                      setShowMobileMenu(false);\n                    }}\n                    className=\"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors\"\n                  >\n                    <Key className=\"w-4 h-4 text-orange-600\" />\n                    <span className=\"text-sm\">Master Key</span>\n                  </button>\n                </div>\n              </div>\n            )}\n\n            {/* Account Management */}\n            <div className=\"px-4 pb-4\">\n              <h3 className=\"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3\">Account</h3>\n              <div className=\"space-y-1\">\n                <button\n                  onClick={() => {\n                    handleUserAction('profile');\n                    setShowMobileMenu(false);\n                  }}\n                  className=\"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors\"\n                >\n                  <User className=\"w-4 h-4 text-gray-600\" />\n                  <span className=\"text-sm\">Profile</span>\n                </button>\n                \n                {(user || userData) && (\n                  <button\n                    onClick={() => {\n                      handleUserAction('upgrade');\n                      setShowMobileMenu(false);\n                    }}\n                    className=\"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors\"\n                  >\n                    <Crown className=\"w-4 h-4 text-purple-600\" />\n                    <span className=\"text-sm\">Upgrade Tier</span>\n                  </button>\n                )}\n                \n                <button\n                  onClick={() => {\n                    handleWalletAction('achievements');\n                    setShowMobileMenu(false);\n                  }}\n                  className=\"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors\"\n                >\n                  <Trophy className=\"w-4 h-4 text-yellow-600\" />\n                  <span className=\"text-sm\">Achievements</span>\n                </button>\n                \n                <button\n                  onClick={() => {\n                    handleWalletAction('leaderboard');\n                    setShowMobileMenu(false);\n                  }}\n                  className=\"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors\"\n                >\n                  <Trophy className=\"w-4 h-4 text-purple-600\" />\n                  <span className=\"text-sm\">Leaderboard</span>\n                </button>\n                \n                <button\n                  onClick={() => {\n                    handleWalletAction('instagram');\n                    setShowMobileMenu(false);\n                  }}\n                  className=\"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors\"\n                >\n                  <Star className=\"w-4 h-4 text-pink-600\" />\n                  <span className=\"text-sm\">Instagram Rewards</span>\n                </button>\n              </div>\n            </div>\n\n            {/* Business Tools */}\n            <div className=\"px-4 pb-4\">\n              <h3 className=\"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3\">Business</h3>\n              <button\n                onClick={() => {\n                  handleUserAction('advertiser');\n                  setShowMobileMenu(false);\n                }}\n                className=\"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors\"\n              >\n                <Megaphone className=\"w-4 h-4 text-orange-600\" />\n                <span className=\"text-sm\">\n                  {(!userData || (userData as any).user_type !== 'advertiser') ? 'Become Advertiser' : 'Advertiser Dashboard'}\n                </span>\n              </button>\n            </div>\n\n            {/* Sign Out */}\n            <div className=\"px-4 pb-6 border-t border-gray-200 pt-4\">\n              <button\n                onClick={() => {\n                  handleUserAction('logout');\n                  setShowMobileMenu(false);\n                }}\n                className=\"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-red-600 hover:bg-red-50 transition-colors\"\n              >\n                <LogOut className=\"w-4 h-4\" />\n                <span className=\"text-sm font-medium\">Sign Out</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Desktop Navigation */}\n      <nav className=\"hidden lg:block bg-white border-b border-gray-200 shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex space-x-8\">\n            {navigation.map((item) => {\n              const Icon = item.icon;\n              return (\n                <Link\n                  key={item.name}\n                  to={item.href}\n                  className={`flex items-center space-x-2 px-3 py-4 text-sm font-medium border-b-2 transition-colors ${\n                    isActive(item.href)\n                      ? 'border-orange-500 text-orange-600'\n                      : 'border-transparent text-gray-700 hover:text-gray-900 hover:border-gray-300'\n                  }`}\n                >\n                  <Icon className=\"w-5 h-5\" />\n                  <span>{item.name}</span>\n                </Link>\n              );\n            })}\n          </div>\n        </div>\n      </nav>\n\n      {/* Mobile Bottom Navigation */}\n      <div className=\"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-30\">\n        <div className=\"flex\">\n          {/* Core Navigation - Main sections */}\n          <Link\n            to=\"/home\"\n            className={`flex-1 flex flex-col items-center justify-center py-3 px-1 transition-colors ${\n              isActive('/dashboard') ? 'text-orange-600' : 'text-gray-400 hover:text-gray-600'\n            }`}\n          >\n            <Home className=\"w-5 h-5\" />\n            <span className=\"text-xs mt-1 font-medium leading-tight\">Home</span>\n          </Link>\n          \n          <Link\n            to=\"/earn\"\n            className={`flex-1 flex flex-col items-center justify-center py-3 px-1 transition-colors ${\n              isActive('/earn') ? 'text-orange-600' : 'text-gray-400 hover:text-gray-600'\n            }`}\n          >\n            <DollarSign className=\"w-5 h-5\" />\n            <span className=\"text-xs mt-1 font-medium leading-tight\">Earn</span>\n          </Link>\n          \n          <Link\n            to=\"/create\"\n            className={`flex-1 flex flex-col items-center justify-center py-3 px-1 transition-colors ${\n              isActive('/create') ? 'text-orange-600' : 'text-gray-400 hover:text-gray-600'\n            }`}\n          >\n            <Plus className=\"w-5 h-5\" />\n            <span className=\"text-xs mt-1 font-medium leading-tight\">Create</span>\n          </Link>\n          \n          <Link\n            to=\"/invest\"\n            className={`flex-1 flex flex-col items-center justify-center py-3 px-1 transition-colors ${\n              isActive('/invest') ? 'text-orange-600' : 'text-gray-400 hover:text-gray-600'\n            }`}\n          >\n            <TrendingUp className=\"w-5 h-5\" />\n            <span className=\"text-xs mt-1 font-medium leading-tight\">Invest</span>\n          </Link>\n          \n          {/* Menu Button */}\n          <button\n            onClick={() => setShowMobileMenu(!showMobileMenu)}\n            className={`flex-1 flex flex-col items-center justify-center py-3 px-1 transition-colors ${\n              showMobileMenu ? 'text-orange-600' : 'text-gray-400 hover:text-gray-600'\n            }`}\n          >\n            <Menu className=\"w-5 h-5\" />\n            <span className=\"text-xs mt-1 font-medium leading-tight\">More</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-20 lg:pb-8\">\n        {children}\n      </main>\n\n      {/* Modals */}\n      <CurrencyConversionModal\n        user={userData}\n        isOpen={showCurrencyModal}\n        onClose={() => setShowCurrencyModal(false)}\n        onSuccess={fetchUserData}\n      />\n      \n      <MasterKeyModal\n        user={userData}\n        isOpen={showMasterKeyModal}\n        onClose={() => setShowMasterKeyModal(false)}\n        onSuccess={fetchUserData}\n      />\n      \n      <InstagramVerificationModal\n        user={userData}\n        isOpen={showInstagramModal}\n        onClose={() => setShowInstagramModal(false)}\n        onSuccess={fetchUserData}\n      />\n      \n      <UserTierUpgradeModal\n        user={userData}\n        isOpen={showUpgradeModal}\n        onClose={() => setShowUpgradeModal(false)}\n        onSuccess={fetchUserData}\n      />\n      \n      <SearchModal\n        isOpen={showSearchModal}\n        onClose={() => setShowSearchModal(false)}\n      />\n      \n      <NotificationCenter\n        isOpen={showNotifications}\n        onClose={() => setShowNotifications(false)}\n      />\n      \n      <GoldShopModal\n        user={userData}\n        isOpen={showGoldShopModal}\n        onClose={() => setShowGoldShopModal(false)}\n        onPurchase={fetchUserData}\n      />\n      \n      <AchievementsModal\n        user={userData}\n        isOpen={showAchievementsModal}\n        onClose={() => setShowAchievementsModal(false)}\n      />\n    </div>\n  );\n}\n","import { Component, ErrorInfo, ReactNode } from 'react';\nimport { AlertTriangle, RefreshCw, Home } from 'lucide-react';\n\ninterface Props {\n  children: ReactNode;\n}\n\ninterface State {\n  hasError: boolean;\n  error?: Error;\n  errorInfo?: ErrorInfo;\n}\n\nexport default class ErrorBoundary extends Component<Props, State> {\n  public state: State = {\n    hasError: false\n  };\n\n  public static getDerivedStateFromError(error: Error): State {\n    return { hasError: true, error };\n  }\n\n  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error('🔥 Error caught by boundary:', error);\n    console.error('📍 Error location:', errorInfo);\n    console.error('🏷️ Component stack:', errorInfo.componentStack);\n    this.setState({ error, errorInfo });\n\n    // Don't redirect to error page for debugging - show the error instead\n    // handleCriticalError(error, 'React', 'component_render');\n  }\n\n  private handleRefresh = () => {\n    window.location.reload();\n  };\n\n  private handleGoHome = () => {\n    window.location.href = '/dashboard';\n  };\n\n  public render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"min-h-screen bg-gray-50 flex items-center justify-center px-4\">\n          <div className=\"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center\">\n            <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <AlertTriangle className=\"w-8 h-8 text-red-600\" />\n            </div>\n            \n            <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\n              Oops! Something went wrong\n            </h1>\n            \n            <p className=\"text-gray-600 mb-6\">\n              We encountered an unexpected error. Our team has been notified and is working on a fix.\n            </p>\n            \n            <div className=\"space-y-3\">\n              <button\n                onClick={this.handleRefresh}\n                className=\"w-full bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2\"\n              >\n                <RefreshCw className=\"w-4 h-4\" />\n                <span>Try Again</span>\n              </button>\n              \n              <button\n                onClick={this.handleGoHome}\n                className=\"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2\"\n              >\n                <Home className=\"w-4 h-4\" />\n                <span>Go Home</span>\n              </button>\n            </div>\n            \n            {process.env.NODE_ENV === 'development' && this.state.error && (\n              <details className=\"mt-6 text-left\">\n                <summary className=\"cursor-pointer text-sm text-gray-500 hover:text-gray-700\">\n                  🔍 Technical Details (Development Only)\n                </summary>\n                <div className=\"mt-2 space-y-2\">\n                  <div>\n                    <strong className=\"text-red-600\">Error:</strong>\n                    <pre className=\"mt-1 text-xs text-red-600 bg-red-50 p-2 rounded border overflow-auto\">\n                      {this.state.error.toString()}\n                    </pre>\n                  </div>\n                  <div>\n                    <strong className=\"text-red-600\">Stack Trace:</strong>\n                    <pre className=\"mt-1 text-xs text-red-600 bg-red-50 p-2 rounded border overflow-auto max-h-40\">\n                      {this.state.error.stack}\n                    </pre>\n                  </div>\n                  <div>\n                    <strong className=\"text-red-600\">Component Stack:</strong>\n                    <pre className=\"mt-1 text-xs text-red-600 bg-red-50 p-2 rounded border overflow-auto max-h-40\">\n                      {this.state.errorInfo?.componentStack}\n                    </pre>\n                  </div>\n                </div>\n              </details>\n            )}\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n","import { useState, useCallback, useEffect } from 'react';\n\ntype AsyncFunction<T> = () => Promise<T>;\n\ninterface UseAsyncDataResult<T> {\n  data: T | null;\n  loading: boolean;\n  error: Error | null;\n  execute: () => Promise<void>;\n  setData: React.Dispatch<React.SetStateAction<T | null>>;\n}\n\nexport function useAsyncData<T>(\n  asyncFunction: AsyncFunction<T>,\n  initialData: T | null = null,\n  immediate = true\n): UseAsyncDataResult<T> {\n  const [data, setData] = useState<T | null>(initialData);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  const execute = useCallback(async (): Promise<T> => {\n    try {\n      setLoading(true);\n      setError(null);\n      const result = await asyncFunction();\n      setData(result);\n      return result;\n    } catch (err) {\n      const error = err instanceof Error ? err : new Error('An unknown error occurred');\n      setError(error);\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  }, [asyncFunction]);\n\n  // Execute immediately on mount if requested\n  useEffect(() => {\n    if (immediate) {\n      execute().catch(() => {});\n    }\n  }, [execute, immediate]);\n\n  return { data, loading, error, execute, setData };\n}\n\n// Example usage:\n/*\nfunction MyComponent() {\n  const { data, loading, error } = useAsyncData(fetchSomeData);\n\n  if (loading) return <LoadingSpinner />;\n  if (error) return <ErrorDisplay error={error} />;\n  \n  return <div>{data}</div>;\n}\n*/\n","import React, { forwardRef, isValidElement, cloneElement } from 'react';\nimport type { ButtonHTMLAttributes, ReactElement, ReactNode } from 'react';\nimport { Loader2 } from 'lucide-react';\n\ntype ButtonVariant = 'primary' | 'secondary' | 'outline' | 'ghost' | 'link' | 'destructive';\ntype ButtonSize = 'sm' | 'md' | 'lg';\n\ntype ButtonProps = ButtonHTMLAttributes<HTMLButtonElement> & {\n  variant?: ButtonVariant;\n  size?: ButtonSize;\n  isLoading?: boolean;\n  loadingText?: ReactNode;\n  leftIcon?: ReactElement;\n  rightIcon?: ReactElement;\n  asChild?: boolean;\n};\n\nconst baseClasses = 'inline-flex items-center justify-center font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-orange-500 disabled:opacity-50 disabled:pointer-events-none';\n\nconst variants = {\n  primary: 'bg-orange-600 text-white hover:bg-orange-700 active:bg-orange-800',\n  secondary: 'bg-gray-100 text-gray-900 hover:bg-gray-200 active:bg-gray-300',\n  outline: 'border border-gray-300 bg-transparent hover:bg-gray-50 active:bg-gray-100',\n  ghost: 'hover:bg-gray-100 active:bg-gray-200',\n  link: 'text-orange-600 hover:underline underline-offset-4 p-0 h-auto',\n  destructive: 'bg-red-600 text-white hover:bg-red-700 active:bg-red-800',\n};\n\nconst sizes = {\n  sm: 'h-8 px-3 text-sm rounded-lg',\n  md: 'h-10 px-4 py-2 text-base rounded-xl',\n  lg: 'h-12 px-6 text-lg rounded-xl',\n};\n\nconst iconSizes = {\n  sm: 'h-4 w-4',\n  md: 'h-5 w-5',\n  lg: 'h-6 w-6',\n};\n\nconst ButtonComponent = forwardRef<HTMLButtonElement, ButtonProps>(\n  ({\n    className = '',\n    type = 'button',\n    variant = 'primary',\n    size = 'md',\n    isLoading = false,\n    loadingText,\n    leftIcon,\n    rightIcon,\n    children,\n    disabled,\n    asChild = false,\n    ...props\n  }, ref) => {\n    if (asChild && isValidElement(children)) {\n      return cloneElement(children as ReactElement, {\n        ref,\n        className: `${baseClasses} ${variants[variant]} ${sizes[size]} ${className} ${(children as ReactElement).props.className || ''}`.trim(),\n        disabled: disabled || isLoading,\n        ...props\n      });\n    }\n\n    const content = isLoading && loadingText !== undefined ? loadingText : children;\n\n    const buttonClasses = [\n      baseClasses,\n      variants[variant],\n      sizes[size],\n      className,\n      (isLoading || disabled) ? 'cursor-not-allowed' : 'cursor-pointer',\n    ].filter(Boolean).join(' ');\n\n    return (\n      <button\n        ref={ref}\n        type={type}\n        className={buttonClasses}\n        disabled={disabled || isLoading}\n        {...props}\n      >\n        {isLoading && (\n          <Loader2 className={`animate-spin ${iconSizes[size]} mr-2`} />\n        )}\n        {!isLoading && leftIcon && React.cloneElement(leftIcon, {\n          className: `${iconSizes[size]} mr-2 ${leftIcon.props.className || ''}`.trim()\n        })}\n        {content}\n        {!isLoading && rightIcon && React.cloneElement(rightIcon, {\n          className: `${iconSizes[size]} ml-2 ${rightIcon.props.className || ''}`.trim()\n        })}\n      </button>\n    );\n  }\n);\n\nButtonComponent.displayName = 'Button';\n\nexport const Button = ButtonComponent;\n","export function cn(...classes: Array<string | false | null | undefined>) {\n  return classes.filter(Boolean).join(' ');\n}\n","import { ReactNode } from 'react';\nimport { cn } from '../../lib/utils';\n\ntype FeatureCardProps = {\n  icon: ReactNode;\n  title: string;\n  description: string;\n  payout: string;\n  bgColorClass?: string;\n  textColorClass?: string;\n  className?: string;\n};\n\nexport const FeatureCard = ({\n  icon,\n  title,\n  description,\n  payout,\n  bgColorClass = 'bg-blue-100',\n  textColorClass = 'text-blue-600',\n  className = '',\n}: FeatureCardProps) => {\n  return (\n    <div \n      className={cn(\n        'bg-white rounded-2xl p-6 shadow-sm border border-gray-100',\n        'hover:shadow-lg transition-all duration-200 hover:-translate-y-1',\n        className\n      )}\n    >\n      <div className={cn('rounded-xl p-3 w-fit mb-4', bgColorClass)}>\n        {icon}\n      </div>\n      <h3 className=\"text-xl font-bold text-gray-900 mb-2\">{title}</h3>\n      <p className=\"text-gray-600 mb-4\">{description}</p>\n      <div className={cn('font-semibold text-sm', textColorClass)}>\n        {payout}\n      </div>\n    </div>\n  );\n};\n\n// Usage example:\n/*\n<FeatureCard\n  icon={<Zap className=\"w-8 h-8 text-blue-600\" />}\n  title=\"Complete Tasks\"\n  description=\"Micro-tasks and content creation\"\n  payout=\"$25 avg\"\n  bgColorClass=\"bg-blue-100\"\n  textColorClass=\"text-blue-600\"\n/>\n*/\n\nFeatureCard.displayName = 'FeatureCard';\n","import { cn } from '../../lib/utils';\n\ninterface SkeletonProps {\n  className?: string;\n  count?: number;\n  height?: string | number;\n  width?: string | number;\n  circle?: boolean;\n  rounded?: 'none' | 'sm' | 'md' | 'lg' | 'full';\n  style?: React.CSSProperties;\n}\n\nexport function Skeleton({\n  className = '',\n  count = 1,\n  height,\n  width,\n  circle = false,\n  rounded = 'md',\n  style,\n  ...props\n}: SkeletonProps) {\n  const radiusMap = {\n    none: 'rounded-none',\n    sm: 'rounded-sm',\n    md: 'rounded',\n    lg: 'rounded-lg',\n    full: 'rounded-full',\n  };\n\n  const skeletons = Array.from({ length: count }).map((_, i) => (\n    <div\n      key={i}\n      className={cn(\n        'animate-pulse bg-gray-200 dark:bg-gray-700',\n        circle ? 'rounded-full' : radiusMap[rounded],\n        className\n      )}\n      style={{\n        height: height || '1.25rem',\n        width: circle ? height || '1.25rem' : width || '100%',\n        ...style,\n      }}\n      {...props}\n    />\n  ));\n\n  return <>{skeletons}</>;\n}\n\n// Compound components for common patterns\ntype SkeletonCompoundProps = Omit<SkeletonProps, 'width' | 'height' | 'circle'>;\n\nexport function SkeletonText({ className = '', count = 1, ...props }: SkeletonCompoundProps) {\n  return (\n    <div className=\"space-y-2\">\n      <Skeleton className={cn('h-4', className)} count={count} {...props} />\n    </div>\n  );\n}\n\nexport function SkeletonTitle({ className = '', ...props }: SkeletonCompoundProps) {\n  return <Skeleton className={cn('h-6 w-3/4 mb-2', className)} {...props} />;\n}\n\nexport function SkeletonParagraph({ lines = 3, className = '', ...props }: SkeletonCompoundProps & { lines?: number }) {\n  return (\n    <div className=\"space-y-2\">\n      {Array.from({ length: lines }).map((_, i) => (\n        <Skeleton \n          key={i} \n          className={cn('h-4', i === lines - 1 ? 'w-5/6' : 'w-full', className)} \n          {...props} \n        />\n      ))}\n    </div>\n  );\n}\n\nexport function SkeletonAvatar({ size = 'md', className = '', ...props }: { size?: 'sm' | 'md' | 'lg' } & SkeletonCompoundProps) {\n  const sizeMap = {\n    sm: 'h-8 w-8',\n    md: 'h-12 w-12',\n    lg: 'h-16 w-16',\n  };\n  \n  return <Skeleton className={cn(sizeMap[size], 'rounded-full', className)} circle {...props} />;\n}\n\nexport function SkeletonCard({ className = '', ...props }: SkeletonCompoundProps) {\n  return (\n    <div className={cn('space-y-4 p-4 border border-gray-200 rounded-lg', className)} {...props}>\n      <Skeleton className=\"h-40 w-full rounded-lg\" />\n      <SkeletonTitle />\n      <SkeletonParagraph lines={2} />\n      <div className=\"flex justify-between items-center\">\n        <Skeleton className=\"h-10 w-24\" />\n        <Skeleton className=\"h-4 w-16\" />\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useState, useCallback } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from '../hooks/useAuth';\nimport { useAsyncData } from '../hooks/useAsyncData';\nimport { \n  ArrowRight, \n  CheckCircle, \n  Star, \n  TrendingUp, \n  Users, \n  Zap, \n  Target,\n  ChevronRight,\n  Play,\n  Sparkles,\n  Shield,\n  Share2,\n  Heart,\n  Clock,\n  AlertTriangle,\n  RefreshCw\n} from 'lucide-react';\n\n// Components\nimport { Button } from '../../components/ui/button';\nimport { CardActionBar } from '../../components/ui/CardActionBar';\nimport { FeatureCard } from '../components/FeatureCard';\nimport { PageLoading } from '../components/PageLoading';\nimport { SkeletonCard, SkeletonText, Skeleton } from '../components/Skeleton';\n\n// Types\ntype StatsData = {\n  earners: number;\n  payout: number;\n  earnings: number;\n  activeCampaigns: number;\n  totalPayouts: number;\n};\n\ntype Feature = {\n  id: string;\n  icon: React.ReactNode;\n  title: string;\n  description: string;\n  payout: string;\n  bgColorClass: string;\n  textColorClass: string;\n};\n\n// Mock data fetch functions\nconst fetchStats = async (): Promise<StatsData> => {\n  // Simulate API call\n  await new Promise(resolve => setTimeout(resolve, 1000));\n  \n  return {\n    earners: 127 + Math.floor(Math.random() * 50),\n    payout: 0.3 + Math.random() * 0.5,\n    earnings: 12 + Math.floor(Math.random() * 10),\n    activeCampaigns: 24 + Math.floor(Math.random() * 10),\n    totalPayouts: 125000 + Math.floor(Math.random() * 50000)\n  };\n};\n\nconst fetchFeatures = async (): Promise<Feature[]> => {\n  // Simulate API call\n  await new Promise(resolve => setTimeout(resolve, 800));\n  \n  return [\n    {\n      id: 'tasks',\n      icon: <Zap className=\"w-8 h-8 text-blue-600\" />,\n      title: \"Complete Tasks\",\n      description: \"Micro-tasks and content creation\",\n      payout: \"$25 avg\",\n      bgColorClass: \"bg-blue-100\",\n      textColorClass: \"text-blue-600\"\n    },\n    {\n      id: 'invest',\n      icon: <TrendingUp className=\"w-8 h-8 text-green-600\" />,\n      title: \"Invest in Content\",\n      description: \"Own shares of viral content\",\n      payout: \"12.5% ROI\",\n      bgColorClass: \"bg-green-100\",\n      textColorClass: \"text-green-600\"\n    },\n    {\n      id: 'predictions',\n      icon: <Target className=\"w-8 h-8 text-purple-600\" />,\n      title: \"Social Predictions\",\n      description: \"Predict content performance\",\n      payout: \"87% win rate\",\n      bgColorClass: \"bg-purple-100\",\n      textColorClass: \"text-purple-600\"\n    },\n    {\n      id: 'brands',\n      icon: <Users className=\"w-8 h-8 text-orange-600\" />,\n      title: \"Brand Partnerships\",\n      description: \"Collaborate with 500+ brands\",\n      payout: \"Fair compensation\",\n      bgColorClass: \"bg-orange-100\",\n      textColorClass: \"text-orange-600\"\n    }\n  ];\n};\n\n// Error boundary component for the home page sections\nconst HomeSection = ({ children, className = '' }: { children: React.ReactNode; className?: string }) => (\n  <section className={`py-16 ${className}`}>\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n      {children}\n    </div>\n  </section>\n);\n\n// Loading state component for the stats counter\nconst StatsLoading = () => (\n  <div className=\"flex flex-wrap justify-center gap-6 my-8\">\n    {[1, 2, 3].map((i) => (\n      <div key={i} className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-gray-200 shadow-lg w-64\">\n        <Skeleton className=\"h-6 w-3/4 mb-2\" />\n        <Skeleton className=\"h-8 w-1/2\" />\n      </div>\n    ))}\n  </div>\n);\n\n// Error state component\nconst ErrorState = ({ error, onRetry }: { error: Error; onRetry: () => void }) => (\n  <div className=\"bg-red-50 border-l-4 border-red-400 p-4 rounded-lg my-6\">\n    <div className=\"flex\">\n      <div className=\"flex-shrink-0\">\n        <AlertTriangle className=\"h-5 w-5 text-red-400\" aria-hidden=\"true\" />\n      </div>\n      <div className=\"ml-3\">\n        <p className=\"text-sm text-red-700\">\n          Failed to load data: {error.message}\n        </p>\n        <div className=\"mt-2\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            leftIcon={<RefreshCw className=\"w-4 h-4\" />}\n            onClick={onRetry}\n            className=\"text-sm\"\n          >\n            Try again\n          </Button>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\nexport default function Home() {\n  const { user, demoLogin, logout } = useAuth();\n  const navigate = useNavigate();\n  const [activeStats, setActiveStats] = useState<StatsData>({\n    earners: 0,\n    payout: 0,\n    earnings: 0,\n    activeCampaigns: 0,\n    totalPayouts: 0\n  });\n  \n  // Fetch stats data with loading and error states\n  const {\n    data: stats,\n    loading: loadingStats,\n    error: statsError,\n    execute: refetchStats\n  } = useAsyncData(fetchStats, null, true);\n  \n  // Fetch features with loading and error states\n  const {\n    data: features,\n    loading: loadingFeatures,\n    error: featuresError,\n    execute: refetchFeatures\n  } = useAsyncData(fetchFeatures, null, true);\n  \n  // Animate stats counter when data loads\n  useEffect(() => {\n    if (stats) {\n      setActiveStats(stats);\n    }\n  }, [stats]);\n\n  useEffect(() => {\n    if (!stats) return;\n\n    const interval = setInterval(() => {\n      refetchStats().catch(console.error);\n    }, 10000);\n\n    return () => clearInterval(interval);\n  }, [stats, refetchStats]);\n  \n  // Handle demo login with loading state\n  const handleDemoLogin = useCallback(async (type: 'creator' | 'investor' | 'advertiser') => {\n    try {\n      await demoLogin[type]();\n    } catch (error) {\n      console.error('Demo login failed:', error);\n      // In a real app, you'd show an error toast/message here\n    }\n  }, [demoLogin]);\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      {/* Modern Navigation */}\n      <nav className=\"bg-white/95 backdrop-blur-md border-b border-gray-100 sticky top-0 z-50 shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <div className=\"flex items-center\">\n              <img \n                src=\"https://mocha-cdn.com/0198f6f0-5737-78cb-955a-4b0907aa1065/Promorang_logo_extended-03.png\"\n                alt=\"Promorang\"\n                className=\"h-8 w-auto transition-transform hover:scale-105\"\n              />\n            </div>\n            <div className=\"hidden md:flex items-center space-x-8\">\n              <a href=\"#features\" className=\"text-gray-600 hover:text-gray-900 font-medium transition-colors\">Features</a>\n              <a href=\"#how-it-works\" className=\"text-gray-600 hover:text-gray-900 font-medium transition-colors\">How it Works</a>\n              <a href=\"#success-stories\" className=\"text-gray-600 hover:text-gray-900 font-medium transition-colors\">Success Stories</a>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              {user ? (\n                // Authenticated user - show dashboard link and logout\n                <div className=\"flex items-center space-x-3\">\n                  <Button \n                    onClick={() => navigate('/dashboard')}\n                    variant=\"primary\"\n                    size=\"md\"\n                    rightIcon={<ArrowRight className=\"w-4 h-4\" />}\n                  >\n                    Go to Dashboard\n                  </Button>\n                  {/* Development logout button */}\n                  <Button\n                    onClick={() => logout()}\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"text-red-600 hover:text-red-800 hover:bg-red-50\"\n                    title=\"Development logout (for testing)\"\n                  >\n                    🚪 Logout\n                  </Button>\n                </div>\n              ) : (\n                // Unauthenticated user - show sign in options\n                <>\n                  <Button\n                    onClick={() => navigate('/auth')}\n                    variant=\"ghost\"\n                    size=\"md\"\n                  >\n                    Sign In\n                  </Button>\n                  <Button\n                    onClick={() => navigate('/auth')}\n                    variant=\"primary\"\n                    size=\"md\"\n                    rightIcon={<ArrowRight className=\"w-4 h-4\" />}\n                  >\n                    Start Earning\n                  </Button>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </nav>\n      {/* Demo Login Section - Only show when not authenticated */}\n      {!user && (\n        <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 border-b border-gray-100 py-4\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"flex flex-col sm:flex-row items-center justify-center space-y-2 sm:space-y-0 sm:space-x-6\">\n              <span className=\"text-sm text-gray-600 font-medium\">Quick Demo:</span>\n              <div className=\"flex flex-wrap justify-center gap-2\">\n                <Button\n                  onClick={() => handleDemoLogin('creator')}\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className=\"bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200\"\n                  isLoading={demoLogin.loading === 'creator'}\n                  loadingText=\"Loading...\"\n                >\n                  Creator Demo\n                </Button>\n                <Button\n                  onClick={() => handleDemoLogin('investor')}\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className=\"bg-purple-50 hover:bg-purple-100 text-purple-700 border-purple-200\"\n                  isLoading={demoLogin.loading === 'investor'}\n                  loadingText=\"Loading...\"\n                >\n                  Investor Demo\n                </Button>\n                <Button\n                  onClick={() => handleDemoLogin('advertiser')}\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className=\"bg-orange-50 hover:bg-orange-100 text-orange-700 border-orange-200\"\n                  isLoading={demoLogin.loading === 'advertiser'}\n                  loadingText=\"Loading...\"\n                >\n                  Advertiser Demo\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n      <section className=\"relative bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 py-16 lg:py-24 overflow-hidden\">\n        {/* Background Elements */}\n        <div className=\"absolute inset-0\" style={{\n          backgroundImage: `url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.03'%3E%3Ccircle cx='30' cy='30' r='30'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")`,\n          opacity: 0.5\n        }}></div>\n        \n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center max-w-4xl mx-auto\">\n            {/* Live Activity Badge */}\n            <div className=\"inline-flex items-center bg-green-100 text-green-800 px-4 py-2 rounded-full text-sm font-semibold mb-8 animate-pulse\">\n              <div className=\"w-2 h-2 bg-green-500 rounded-full mr-2 animate-ping\"></div>\n              <span className=\"font-bold\">{activeStats.earners.toLocaleString()}</span> early creators earning\n            </div>\n\n            {/* Main Headline */}\n            <h1 className=\"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 leading-tight mb-6\">\n              Monetize Your Social Influence\n              <span className=\"block bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\">\n                Effortlessly\n              </span>\n            </h1>\n            \n            <p className=\"text-xl sm:text-2xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed\">\n              Join our early community and start earning from day one. \n              <span className=\"font-semibold text-gray-900\"> No followers required.</span>\n            </p>\n\n            {/* Key Benefits */}\n            <div className=\"flex flex-wrap justify-center gap-6 mb-10 text-sm\">\n              <div className=\"flex items-center bg-white/60 backdrop-blur-sm rounded-full px-4 py-2\">\n                <CheckCircle className=\"w-4 h-4 text-green-500 mr-2\" />\n                <span className=\"font-medium\">Start in 60 seconds</span>\n              </div>\n              <div className=\"flex items-center bg-white/60 backdrop-blur-sm rounded-full px-4 py-2\">\n                <CheckCircle className=\"w-4 h-4 text-green-500 mr-2\" />\n                <span className=\"font-medium\">Grow with social media</span>\n              </div>\n              <div className=\"flex items-center bg-white/60 backdrop-blur-sm rounded-full px-4 py-2\">\n                <CheckCircle className=\"w-4 h-4 text-green-500 mr-2\" />\n                <span className=\"font-medium\">Zero fees</span>\n              </div>\n            </div>\n\n            {/* CTAs */}\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center mb-8\">\n              {user ? (\n                // Authenticated user - show dashboard button\n                <Button\n                  onClick={() => navigate('/dashboard')}\n                  variant=\"primary\"\n                  size=\"lg\"\n                  rightIcon={<ArrowRight className=\"w-5 h-5 group-hover:translate-x-1 transition-transform\" />}\n                  className=\"group\"\n                >\n                  Go to Dashboard\n                </Button>\n              ) : (\n                // Unauthenticated user - show sign up button\n                <Button\n                  onClick={() => navigate('/auth')}\n                  variant=\"primary\"\n                  size=\"lg\"\n                  rightIcon={<ArrowRight className=\"w-5 h-5 group-hover:translate-x-1 transition-transform\" />}\n                  className=\"group\"\n                >\n                  Start Earning Today\n                </Button>\n              )}\n              <Button\n                variant=\"outline\"\n                size=\"lg\"\n                leftIcon={<Play className=\"w-5 h-5\" />}\n              >\n                See How it Works\n              </Button>\n            </div>\n\n            {/* Live Earnings Ticker */}\n            <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-gray-200 shadow-lg max-w-md mx-auto\">\n              <div className=\"text-sm text-gray-600 mb-2\">Early earnings this week:</div>\n              <div className=\"text-2xl font-bold text-green-600\">${activeStats.payout.toFixed(1)}k</div>\n              <div className=\"text-xs text-gray-500\">Average per early user: ${activeStats.earnings}</div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Business/Advertiser Section */}\n      <section className=\"bg-gradient-to-r from-orange-50 to-red-50 border-b border-gray-100 py-16\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex flex-col lg:flex-row items-center justify-between space-y-8 lg:space-y-0 lg:space-x-12\">\n            <div className=\"lg:w-1/2\">\n              <h2 className=\"text-3xl lg:text-4xl font-bold text-gray-900 mb-4\">\n                Brands & Businesses\n              </h2>\n              <p className=\"text-xl text-gray-600 mb-6\">\n                Connect with authentic creators and build campaigns that drive real engagement from day one.\n              </p>\n              <div className=\"space-y-3 mb-6\">\n                <div className=\"flex items-center space-x-3\">\n                  <CheckCircle className=\"w-5 h-5 text-green-500 flex-shrink-0\" />\n                  <span className=\"text-gray-700\">Work with vetted early adopters</span>\n                </div>\n                <div className=\"flex items-center space-x-3\">\n                  <CheckCircle className=\"w-5 h-5 text-green-500 flex-shrink-0\" />\n                  <span className=\"text-gray-700\">Track campaign performance</span>\n                </div>\n                <div className=\"flex items-center space-x-3\">\n                  <CheckCircle className=\"w-5 h-5 text-green-500 flex-shrink-0\" />\n                  <span className=\"text-gray-700\">Start with free sample campaigns</span>\n                </div>\n              </div>\n              <button\n                onClick={() => {\n                  console.log('Start Advertising clicked');\n                  if (user) {\n                    navigate('/advertiser/onboarding');\n                  } else {\n                    navigate('/auth');\n                  }\n                }}\n                className=\"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl\"\n              >\n                {user ? 'Go to Advertising' : 'Start Advertising'}\n              </button>\n            </div>\n            <div className=\"lg:w-1/2\">\n              <div className=\"bg-white rounded-2xl p-8 shadow-lg\">\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-4\">Early Advertiser Benefits</h3>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"bg-blue-50 rounded-lg p-4 text-center\">\n                    <div className=\"text-2xl font-bold text-blue-600 mb-1\">Free</div>\n                    <div className=\"text-sm text-blue-700\">Sample campaigns</div>\n                  </div>\n                  <div className=\"bg-purple-50 rounded-lg p-4 text-center\">\n                    <div className=\"text-2xl font-bold text-purple-600 mb-1\">95%</div>\n                    <div className=\"text-sm text-purple-700\">Completion rate</div>\n                  </div>\n                  <div className=\"bg-green-50 rounded-lg p-4 text-center\">\n                    <div className=\"text-2xl font-bold text-green-600 mb-1\">127</div>\n                    <div className=\"text-sm text-green-700\">Early creators</div>\n                  </div>\n                  <div className=\"bg-orange-50 rounded-lg p-4 text-center\">\n                    <div className=\"text-2xl font-bold text-orange-600 mb-1\">4.8★</div>\n                    <div className=\"text-sm text-orange-700\">Campaign rating</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Platform Trust Bar */}\n      <section className=\"bg-white border-b border-gray-100 py-12\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <p className=\"text-center text-gray-500 text-sm mb-8\">Creators earn across these platforms</p>\n          <div className=\"grid grid-cols-3 md:grid-cols-6 gap-8 items-center\">\n            {[\n              { name: 'Instagram', icon: '📷', color: 'from-purple-500 to-pink-500', url: 'https://instagram.com' },\n              { name: 'TikTok', icon: '🎵', color: 'from-gray-900 to-gray-700', url: 'https://tiktok.com' },\n              { name: 'YouTube', icon: '📺', color: 'from-red-600 to-red-500', url: 'https://youtube.com' },\n              { name: 'Twitter', icon: '🐦', color: 'from-blue-500 to-blue-400', url: 'https://twitter.com' },\n              { name: 'LinkedIn', icon: '💼', color: 'from-blue-700 to-blue-600', url: 'https://linkedin.com' },\n              { name: 'Facebook', icon: '👥', color: 'from-blue-600 to-blue-500', url: 'https://facebook.com' }\n            ].map((platform) => (\n              <a \n                key={platform.name}\n                href={platform.url} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\" \n                className=\"group text-center hover:scale-110 transition-all duration-200\"\n              >\n                <div className={`bg-gradient-to-tr ${platform.color} rounded-xl h-14 w-14 mx-auto flex items-center justify-center text-white font-bold text-xl group-hover:shadow-lg transition-shadow mb-2`}>\n                  {platform.icon}\n                </div>\n                <p className=\"text-xs text-gray-600 group-hover:text-gray-900 transition-colors\">{platform.name}</p>\n              </a>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Simplified Features Section */}\n      <section id=\"features\" className=\"py-20 bg-gray-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-gray-900 mb-4\">\n              Four Ways to Earn\n            </h2>\n            <p className=\"text-xl text-gray-600 max-w-2xl mx-auto\">\n              Multiple income streams designed for creators, investors, and brands\n            </p>\n          </div>\n\n          {loadingFeatures ? (\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n              {[1, 2, 3, 4].map((i) => (\n                <div key={i} className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n                  <Skeleton className=\"w-12 h-12 rounded-xl mb-4\" />\n                  <Skeleton className=\"h-6 w-3/4 mb-3\" />\n                  <Skeleton className=\"h-4 w-full mb-4\" />\n                  <Skeleton className=\"h-4 w-1/2\" />\n                </div>\n              ))}\n            </div>\n          ) : featuresError ? (\n            <ErrorState error={featuresError} onRetry={refetchFeatures} />\n          ) : features ? (\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n              {features.map((feature) => (\n                <FeatureCard\n                  key={feature.id}\n                  icon={feature.icon}\n                  title={feature.title}\n                  description={feature.description}\n                  payout={feature.payout}\n                  bgColorClass={feature.bgColorClass}\n                  textColorClass={feature.textColorClass}\n                />\n              ))}\n            </div>\n          ) : null}\n        </div>\n      </section>\n\n      {/* Simplified How it Works */}\n      <section id=\"how-it-works\" className=\"py-20 bg-white\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-gray-900 mb-4\">\n              Start Earning in 3 Steps\n            </h2>\n            <p className=\"text-xl text-gray-600\">Simple. Fast. Profitable.</p>\n          </div>\n\n          <div className=\"grid lg:grid-cols-3 gap-12 max-w-4xl mx-auto\">\n            {[\n              {\n                step: \"1\",\n                title: \"Sign Up Free\",\n                description: \"Create your account in under 2 minutes\",\n                colorClass: \"bg-gradient-to-r from-blue-500 to-blue-600\"\n              },\n              {\n                step: \"2\", \n                title: \"Choose Your Path\",\n                description: \"Select earning methods that fit your style\",\n                colorClass: \"bg-gradient-to-r from-purple-500 to-purple-600\"\n              },\n              {\n                step: \"3\",\n                title: \"Get Paid\",\n                description: \"Withdraw earnings instantly to your account\",\n                colorClass: \"bg-gradient-to-r from-green-500 to-green-600\"\n              }\n            ].map((step, index) => (\n              <div key={index} className=\"text-center\">\n                <div className={`${step.colorClass} rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-6 text-white font-bold text-2xl shadow-lg`}>\n                  {step.step}\n                </div>\n                <h3 className=\"text-xl font-bold text-gray-900 mb-3\">{step.title}</h3>\n                <p className=\"text-gray-600\">{step.description}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Enhanced Social Proof */}\n      <section className=\"py-20 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-700 text-white relative overflow-hidden\">\n        <div className=\"absolute inset-0 bg-black opacity-20\"></div>\n        <div className=\"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h2 className=\"text-3xl font-bold mb-12\">Growing with Our Early Community</h2>\n          \n          <div className=\"grid lg:grid-cols-4 gap-8 mb-12\">\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-xl p-6\">\n              <div className=\"text-4xl font-bold mb-2 text-yellow-300\">{activeStats.earners.toLocaleString()}</div>\n              <div className=\"text-blue-100\">Early Adopters</div>\n            </div>\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-xl p-6\">\n              <div className=\"text-4xl font-bold mb-2 text-green-300\">${activeStats.payout.toFixed(1)}k</div>\n              <div className=\"text-blue-100\">Paid Out So Far</div>\n            </div>\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-xl p-6\">\n              <div className=\"text-4xl font-bold mb-2 text-pink-300\">4.8★</div>\n              <div className=\"text-blue-100\">Early User Rating</div>\n            </div>\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-xl p-6\">\n              <div className=\"text-4xl font-bold mb-2 text-orange-300\">${activeStats.earnings}</div>\n              <div className=\"text-blue-100\">Average Weekly Earnings</div>\n            </div>\n          </div>\n\n          <div className=\"bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl px-8 py-6 inline-block\">\n            <div className=\"flex items-center space-x-3\">\n              <Sparkles className=\"w-6 h-6 animate-pulse\" />\n              <span className=\"font-bold text-lg\">Be part of something new from the ground up</span>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Streamlined Success Stories */}\n      <section id=\"success-stories\" className=\"py-20 bg-gray-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-3xl lg:text-4xl font-bold text-gray-900 mb-4\">\n              Real People, Real Results\n            </h2>\n            <p className=\"text-xl text-gray-600\">Success stories from our community</p>\n          </div>\n\n          <div className=\"grid lg:grid-cols-3 gap-8\">\n            {[\n              {\n                name: \"Sarah Chen\",\n                role: \"Early Creator\", \n                earnings: \"$247\",\n                timeframe: \"first month\",\n                quote: \"Made $25 on my first day with zero followers. Love being an early adopter!\"\n              },\n              {\n                name: \"Mike Rodriguez\", \n                role: \"Beta Tester\",\n                earnings: \"$384\",\n                timeframe: \"2 months\",\n                quote: \"Getting in early feels amazing. The platform has real potential.\"\n              },\n              {\n                name: \"Local Coffee Co.\",\n                role: \"Early Brand Partner\",\n                earnings: \"Great reach\", \n                timeframe: \"6 weeks\",\n                quote: \"Loving the authentic engagement from real early users. Quality over quantity.\"\n              }\n            ].map((story, index) => (\n              <div key={index} className=\"bg-white rounded-2xl p-8 shadow-sm border border-gray-100\">\n                <div className=\"flex items-center mb-6\">\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full mr-4\"></div>\n                  <div>\n                    <h4 className=\"font-bold text-gray-900\">{story.name}</h4>\n                    <p className=\"text-gray-600 text-sm\">{story.role}</p>\n                  </div>\n                </div>\n                \n                <div className=\"bg-green-50 border border-green-200 rounded-lg p-3 mb-4\">\n                  <div className=\"text-lg font-bold text-green-600\">{story.earnings}</div>\n                  <div className=\"text-xs text-green-700\">in {story.timeframe}</div>\n                </div>\n                \n                <p className=\"text-gray-700 italic\">\"{story.quote}\"</p>\n                \n                <div className=\"flex items-center text-yellow-500 mt-4\">\n                  {[...Array(5)].map((_, i) => (\n                    <Star key={i} className=\"w-4 h-4 fill-current\" />\n                  ))}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Final CTA */}\n      <section className=\"py-20 bg-gray-900 text-white\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h2 className=\"text-3xl lg:text-4xl font-bold mb-6\">\n            Your Financial Freedom Starts Now\n          </h2>\n          <p className=\"text-xl text-gray-300 mb-8\">\n            Join thousands of creators already earning on Promorang\n          </p>\n          \n          <button\n            onClick={() => {\n              console.log('Final CTA clicked');\n              if (user) {\n                navigate('/dashboard');\n              } else {\n                navigate('/auth');\n              }\n            }}\n            className=\"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-12 py-4 rounded-xl font-semibold text-lg transition-all duration-200 shadow-xl hover:shadow-2xl transform hover:-translate-y-1 inline-flex items-center\"\n          >\n            {user ? 'Go to Dashboard' : 'Start Earning Today'}\n            <ChevronRight className=\"ml-2 w-5 h-5\" />\n          </button>\n\n          <div className=\"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-lg p-4\">\n              <div className=\"font-bold text-green-300 flex items-center justify-center\">\n                <CheckCircle className=\"w-4 h-4 mr-2\" />\n                100% Free to Start\n              </div>\n            </div>\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-lg p-4\">\n              <div className=\"font-bold text-yellow-300 flex items-center justify-center\">\n                <TrendingUp className=\"w-4 h-4 mr-2\" />\n                Grow Your Wealth\n              </div>\n            </div>\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-lg p-4\">\n              <div className=\"font-bold text-blue-300 flex items-center justify-center\">\n                <Shield className=\"w-4 h-4 mr-2\" />\n                Secure & Trusted\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Clean Footer */}\n      <footer className=\"bg-gray-50 border-t border-gray-200 py-12\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex flex-col md:flex-row justify-between items-center\">\n            <div className=\"flex items-center mb-4 md:mb-0\">\n              <img \n                src=\"https://mocha-cdn.com/0198f6f0-5737-78cb-955a-4b0907aa1065/Promorang_logo_extended-03.png\"\n                alt=\"Promorang\"\n                className=\"h-8 w-auto mr-4\"\n              />\n              <p className=\"text-gray-600 text-sm\">\n                Transform your influence into income\n              </p>\n            </div>\n            <div className=\"flex space-x-8 text-sm text-gray-600\">\n              <a href=\"#\" className=\"hover:text-gray-900 transition-colors\">Privacy</a>\n              <a href=\"#\" className=\"hover:text-gray-900 transition-colors\">Terms</a>\n              <a href=\"#\" className=\"hover:text-gray-900 transition-colors\">Support</a>\n            </div>\n          </div>\n          <div className=\"border-t border-gray-200 mt-8 pt-8 text-center text-gray-500 text-sm\">\n            <p>&copy; 2024 Promorang. All rights reserved.</p>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { useAuth } from '../hooks/useAuth';\nimport { useNavigate } from \"react-router-dom\";\nimport { Eye, EyeOff, Mail, Lock, User, ArrowRight, Chrome } from 'lucide-react';\n\nexport default function AuthPage() {\n  const { signIn, signUp, signInWithOAuth, demoLogin, isPending } = useAuth();\n  const navigate = useNavigate();\n  const [isSignUp, setIsSignUp] = useState(false);\n  const [showPassword, setShowPassword] = useState(false);\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n    username: '',\n    display_name: ''\n  });\n  const [error, setError] = useState('');\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n\n    if (isSignUp) {\n      if (!formData.email || !formData.password || !formData.username) {\n        setError('Please fill in all required fields');\n        return;\n      }\n      const result = await signUp(formData.email, formData.password);\n      if (result.error) {\n        setError(result.error);\n      } else {\n        // Redirect to dashboard or home page after successful signup\n        navigate('/dashboard');\n      }\n    } else {\n      if (!formData.email || !formData.password) {\n        setError('Please enter email and password');\n        return;\n      }\n      const result = await signIn(formData.email, formData.password);\n      if (result.error) {\n        setError(result.error);\n      } else {\n        // Redirect to dashboard or home page after successful login\n        navigate('/dashboard');\n      }\n    }\n  };\n\n  const handleDemoLogin = async (type: 'creator' | 'investor' | 'advertiser') => {\n    setError('');\n    const result = await demoLogin[type]();\n    if (result.error) {\n      setError(result.error);\n    } else {\n      // Redirect to dashboard after successful demo login\n      navigate('/dashboard');\n    }\n  };\n\n  const handleOAuthLogin = async () => {\n    setError('');\n    const result = await signInWithOAuth('google');\n    if (result?.error) {\n      setError(result.error);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-md w-full space-y-8\">\n        {/* Header */}\n        <div className=\"text-center\">\n          <img\n            src=\"https://mocha-cdn.com/0198f6f0-5737-78cb-955a-4b0907aa1065/Promorang_logo_extended-03.png\"\n            alt=\"Promorang\"\n            className=\"h-12 w-auto mx-auto mb-4\"\n          />\n          <h2 className=\"text-3xl font-bold text-gray-900\">\n            {isSignUp ? 'Create Account' : 'Welcome Back'}\n          </h2>\n          <p className=\"mt-2 text-gray-600\">\n            {isSignUp\n              ? 'Join thousands of creators earning on Promorang'\n              : 'Sign in to your account to continue earning'\n            }\n          </p>\n        </div>\n\n        {/* Demo Login Buttons */}\n        <div className=\"space-y-3\">\n          <p className=\"text-center text-sm text-gray-500 font-medium\">Quick Demo Login:</p>\n          <div className=\"grid grid-cols-1 gap-2\">\n            <button\n              onClick={() => handleDemoLogin('creator')}\n              disabled={isPending}\n              className=\"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:opacity-50\"\n            >\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\n                  <User className=\"w-4 h-4 text-blue-600\" />\n                </div>\n                <div className=\"text-left\">\n                  <div className=\"font-medium\">Demo Creator</div>\n                  <div className=\"text-xs text-gray-500\">creator@demo.com</div>\n                </div>\n              </div>\n            </button>\n\n            <button\n              onClick={() => handleDemoLogin('investor')}\n              disabled={isPending}\n              className=\"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors disabled:opacity-50\"\n            >\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center\">\n                  <User className=\"w-4 h-4 text-purple-600\" />\n                </div>\n                <div className=\"text-left\">\n                  <div className=\"font-medium\">Demo Investor</div>\n                  <div className=\"text-xs text-gray-500\">investor@demo.com</div>\n                </div>\n              </div>\n            </button>\n\n            <button\n              onClick={() => handleDemoLogin('advertiser')}\n              disabled={isPending}\n              className=\"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors disabled:opacity-50\"\n            >\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center\">\n                  <User className=\"w-4 h-4 text-orange-600\" />\n                </div>\n                <div className=\"text-left\">\n                  <div className=\"font-medium\">Demo Advertiser</div>\n                  <div className=\"text-xs text-gray-500\">advertiser@demo.com</div>\n                </div>\n              </div>\n            </button>\n          </div>\n        </div>\n\n        {/* Divider */}\n        <div className=\"relative\">\n          <div className=\"absolute inset-0 flex items-center\">\n            <div className=\"w-full border-t border-gray-300\" />\n          </div>\n          <div className=\"relative flex justify-center text-sm\">\n            <span className=\"px-2 bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 text-gray-500\">\n              Or continue with\n            </span>\n          </div>\n        </div>\n\n        {/* OAuth Button */}\n        <button\n          onClick={handleOAuthLogin}\n          disabled={isPending}\n          className=\"w-full flex justify-center items-center px-4 py-3 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:opacity-50\"\n        >\n          <Chrome className=\"w-5 h-5 mr-3 text-red-500\" />\n          Continue with Google\n        </button>\n\n        {/* Divider */}\n        <div className=\"relative\">\n          <div className=\"absolute inset-0 flex items-center\">\n            <div className=\"w-full border-t border-gray-300\" />\n          </div>\n          <div className=\"relative flex justify-center text-sm\">\n            <span className=\"px-2 bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 text-gray-500\">\n              Or use email\n            </span>\n          </div>\n        </div>\n\n        {/* Auth Form */}\n        <form className=\"space-y-6\" onSubmit={handleSubmit}>\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm\">\n              {error}\n            </div>\n          )}\n\n          <div>\n            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Email Address\n            </label>\n            <div className=\"relative\">\n              <Mail className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n              <input\n                id=\"email\"\n                name=\"email\"\n                type=\"email\"\n                required\n                value={formData.email}\n                onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\n                placeholder=\"Enter your email\"\n              />\n            </div>\n          </div>\n\n          {isSignUp && (\n            <>\n              <div>\n                <label htmlFor=\"username\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Username\n                </label>\n                <div className=\"relative\">\n                  <User className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                  <input\n                    id=\"username\"\n                    name=\"username\"\n                    type=\"text\"\n                    required\n                    value={formData.username}\n                    onChange={(e) => setFormData({ ...formData, username: e.target.value })}\n                    className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\n                    placeholder=\"Choose a username\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label htmlFor=\"display_name\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Display Name (Optional)\n                </label>\n                <div className=\"relative\">\n                  <User className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                  <input\n                    id=\"display_name\"\n                    name=\"display_name\"\n                    type=\"text\"\n                    value={formData.display_name}\n                    onChange={(e) => setFormData({ ...formData, display_name: e.target.value })}\n                    className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\n                    placeholder=\"Your display name\"\n                  />\n                </div>\n              </div>\n            </>\n          )}\n\n          <div>\n            <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Password\n            </label>\n            <div className=\"relative\">\n              <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n              <input\n                id=\"password\"\n                name=\"password\"\n                type={showPassword ? 'text' : 'password'}\n                required\n                value={formData.password}\n                onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n                className=\"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\n                placeholder={isSignUp ? 'Create a password' : 'Enter your password'}\n              />\n              <button\n                type=\"button\"\n                onClick={() => setShowPassword(!showPassword)}\n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\n              >\n                {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\n              </button>\n            </div>\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={isPending}\n            className=\"w-full flex justify-center items-center px-4 py-3 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {isPending ? (\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full\"></div>\n                <span>{isSignUp ? 'Creating Account...' : 'Signing In...'}</span>\n              </div>\n            ) : (\n              <div className=\"flex items-center space-x-2\">\n                <span>{isSignUp ? 'Create Account' : 'Sign In'}</span>\n                <ArrowRight className=\"w-4 h-4\" />\n              </div>\n            )}\n          </button>\n        </form>\n\n        {/* Toggle Sign In/Sign Up */}\n        <div className=\"text-center\">\n          <p className=\"text-sm text-gray-600\">\n            {isSignUp ? 'Already have an account?' : \"Don't have an account?\"}\n            <button\n              type=\"button\"\n              onClick={() => {\n                setIsSignUp(!isSignUp);\n                setError('');\n                setFormData({ email: '', password: '', username: '', display_name: '' });\n              }}\n              className=\"ml-1 font-medium text-blue-600 hover:text-blue-500 transition-colors\"\n            >\n              {isSignUp ? 'Sign in instead' : 'Create one here'}\n            </button>\n          </p>\n        </div>\n\n        {/* Back to Home */}\n        <div className=\"text-center\">\n          <button\n            onClick={() => navigate('/')}\n            className=\"text-sm text-gray-500 hover:text-gray-700 transition-colors\"\n          >\n            ← Back to Home\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\nimport { CheckCircle, XCircle } from 'lucide-react';\n\nexport default function AuthCallback() {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const [status, setStatus] = useState<'loading' | 'success' | 'error'>('loading');\n  const [errorMessage, setErrorMessage] = useState('');\n\n  useEffect(() => {\n    const handleOAuthCallback = async () => {\n      const code = searchParams.get('code');\n      const error = searchParams.get('error');\n      const errorDescription = searchParams.get('error_description');\n\n      if (error) {\n        console.error('OAuth error:', error, errorDescription);\n        setStatus('error');\n        setErrorMessage(errorDescription || error);\n        return;\n      }\n\n      if (code) {\n        try {\n          // For demo purposes, simulate successful OAuth\n          // In production, you'd send the code to your backend to exchange for tokens\n          setStatus('success');\n\n          // Redirect to home after a short delay\n          setTimeout(() => {\n            navigate('/dashboard', { replace: true });\n          }, 1500);\n\n        } catch (error) {\n          console.error('OAuth callback error:', error);\n          setStatus('error');\n          setErrorMessage('Failed to complete authentication');\n        }\n      } else {\n        // No code or error, this might be a direct visit\n        navigate('/auth');\n      }\n    };\n\n    handleOAuthCallback();\n  }, [searchParams, navigate]);\n\n  if (status === 'loading') {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4\"></div>\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Completing Sign In...</h2>\n          <p className=\"text-gray-600\">Please wait while we finish setting up your account.</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (status === 'error') {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-red-50 via-pink-50 to-orange-50 flex items-center justify-center p-4\">\n        <div className=\"text-center text-white max-w-2xl mx-auto\">\n          <div className=\"mb-4\">\n            <XCircle className=\"w-12 h-12 mx-auto text-red-400\" />\n          </div>\n          <h2 className=\"text-2xl font-semibold mb-2 text-gray-900\">Authentication Failed</h2>\n          <p className=\"text-gray-700 mb-6\">\n            {errorMessage || 'There was an error completing your sign in. Please try again.'}\n          </p>\n\n          <div className=\"space-y-3\">\n            <button\n              onClick={() => navigate('/auth')}\n              className=\"w-full px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors\"\n            >\n              Try Again\n            </button>\n\n            <button\n              onClick={() => navigate('/', { replace: true })}\n              className=\"w-full px-6 py-3 bg-white/20 hover:bg-white/30 text-gray-900 rounded-lg font-medium transition-colors\"\n            >\n              Return to Landing Page\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4\">\n      <div className=\"text-center text-white max-w-2xl mx-auto\">\n        <div className=\"mb-4\">\n          <CheckCircle className=\"w-12 h-12 mx-auto text-green-400\" />\n        </div>\n        <h2 className=\"text-2xl font-semibold mb-2\">Authentication Successful!</h2>\n        <p className=\"text-blue-200 mb-6\">\n          You will be redirected to the app automatically in a moment...\n        </p>\n\n        <div className=\"space-y-3\">\n          <button\n            onClick={() => navigate('/dashboard', { replace: true })}\n            className=\"w-full px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors\"\n          >\n            Continue to App\n          </button>\n\n          <button\n            onClick={() => navigate('/', { replace: true })}\n            className=\"w-full px-6 py-3 bg-white/20 hover:bg-white/30 text-white rounded-lg font-medium transition-colors\"\n          >\n            Return to Landing Page\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { X, TrendingUp, DollarSign } from 'lucide-react';\nimport { ContentPieceType, WalletType } from '@/shared/types';\n\ninterface BuySharesModalProps {\n  content: ContentPieceType;\n  wallet: WalletType | undefined;\n  isOpen: boolean;\n  onClose: () => void;\n  onPurchase: (content: ContentPieceType, sharesCount: number) => Promise<void>;\n}\n\nexport default function BuySharesModal({ content, wallet, isOpen, onClose, onPurchase }: BuySharesModalProps) {\n  const [sharesCount, setSharesCount] = useState(1);\n  const [loading, setLoading] = useState(false);\n\n  if (!isOpen) return null;\n\n  const totalCost = sharesCount * content.share_price;\n  const canAfford = wallet && wallet.balance >= totalCost;\n  const maxShares = Math.min(\n    content.available_shares,\n    wallet ? Math.floor(wallet.balance / content.share_price) : 0\n  );\n\n  const handlePurchase = async () => {\n    if (!canAfford || sharesCount < 1) return;\n    \n    setLoading(true);\n    try {\n      await onPurchase(content, sharesCount);\n      onClose();\n    } catch (error) {\n      console.error('Purchase failed:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-xl p-6 w-full max-w-md mx-4\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-xl font-bold text-gray-900\">Buy Content Shares</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        <div className=\"space-y-4\">\n          <div className=\"bg-gray-50 rounded-lg p-4\">\n            <h3 className=\"font-semibold text-gray-900 mb-2\">{content.title}</h3>\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-gray-600\">Platform:</span>\n              <span className=\"font-medium capitalize\">{content.platform}</span>\n            </div>\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-gray-600\">Price per share:</span>\n              <span className=\"font-bold text-green-600\">${content.share_price.toFixed(2)}</span>\n            </div>\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-gray-600\">Available:</span>\n              <span className=\"font-medium\">{content.available_shares} shares</span>\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Number of shares\n            </label>\n            <div className=\"flex items-center space-x-2\">\n              <button\n                type=\"button\"\n                onClick={() => setSharesCount(Math.max(1, sharesCount - 1))}\n                disabled={sharesCount <= 1}\n                className=\"w-8 h-8 bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed rounded text-gray-700 font-bold\"\n              >\n                -\n              </button>\n              <input\n                type=\"number\"\n                value={sharesCount}\n                onChange={(e) => setSharesCount(Math.max(1, Math.min(maxShares, parseInt(e.target.value) || 1)))}\n                min=\"1\"\n                max={maxShares}\n                className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-center\"\n              />\n              <button\n                type=\"button\"\n                onClick={() => setSharesCount(Math.min(maxShares, sharesCount + 1))}\n                disabled={sharesCount >= maxShares}\n                className=\"w-8 h-8 bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed rounded text-gray-700 font-bold\"\n              >\n                +\n              </button>\n            </div>\n            <p className=\"text-xs text-gray-500 mt-1\">Max: {maxShares} shares</p>\n          </div>\n\n          <div className=\"bg-blue-50 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <div className=\"flex items-center space-x-2\">\n                <DollarSign className=\"w-4 h-4 text-blue-600\" />\n                <span className=\"text-sm font-medium text-blue-900\">Your Balance:</span>\n              </div>\n              <span className=\"font-bold text-blue-900\">${(wallet?.balance || 0).toFixed(2)}</span>\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-2\">\n                <TrendingUp className=\"w-4 h-4 text-green-600\" />\n                <span className=\"text-sm font-medium text-gray-700\">Total Cost:</span>\n              </div>\n              <span className=\"font-bold text-gray-900\">${totalCost.toFixed(2)}</span>\n            </div>\n          </div>\n\n          {!canAfford && (\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n              <p className=\"text-sm text-red-700\">Insufficient balance to purchase {sharesCount} shares</p>\n            </div>\n          )}\n\n          <div className=\"flex space-x-3\">\n            <button\n              onClick={onClose}\n              className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={handlePurchase}\n              disabled={!canAfford || loading || sharesCount < 1}\n              className=\"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200\"\n            >\n              {loading ? 'Processing...' : `Buy ${sharesCount} Share${sharesCount > 1 ? 's' : ''}`}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { X, Share2, ExternalLink, Copy, Check } from 'lucide-react';\nimport { UserType } from '@/shared/types';\n\ninterface ShareContentModalProps {\n  user: UserType | null;\n  contentId?: number;\n  contentTitle?: string;\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: () => void;\n}\n\nexport default function ShareContentModal({ user, contentId, contentTitle, isOpen, onClose, onSuccess }: ShareContentModalProps) {\n  const [platform, setPlatform] = useState('instagram');\n  const [shareUrl, setShareUrl] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [copied, setCopied] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  if (!isOpen || !user) return null;\n\n  const platforms = [\n    { id: 'instagram', name: 'Instagram', color: 'from-pink-500 to-purple-600' },\n    { id: 'tiktok', name: 'TikTok', color: 'from-black to-gray-800' },\n    { id: 'twitter', name: 'Twitter', color: 'from-blue-400 to-blue-600' },\n    { id: 'facebook', name: 'Facebook', color: 'from-blue-600 to-blue-800' },\n    { id: 'linkedin', name: 'LinkedIn', color: 'from-blue-500 to-blue-700' },\n  ];\n\n  const getTierMultiplier = (tier: string) => {\n    switch (tier) {\n      case 'super': return 2.0;\n      case 'premium': return 1.5;\n      case 'free':\n      default: return 1.0;\n    }\n  };\n\n  const calculatePoints = () => {\n    const basePoints = 10;\n    const multiplier = getTierMultiplier(user.user_tier);\n    return Math.floor(basePoints * multiplier);\n  };\n\n  const handleShare = async () => {\n    if (!shareUrl.trim()) {\n      setError('Please enter the share URL');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch('/api/users/share-content', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({\n          content_id: contentId,\n          platform,\n          share_url: shareUrl\n        })\n      });\n\n      if (response.ok) {\n        await response.json();\n        onSuccess();\n        onClose();\n        // Reset form\n        setShareUrl('');\n        setPlatform('instagram');\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Share recording failed');\n      }\n    } catch (error) {\n      console.error('Share recording failed:', error);\n      setError('Network error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const copyToClipboard = async (text: string) => {\n    await navigator.clipboard.writeText(text);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  const generateShareText = () => {\n    const baseText = contentTitle \n      ? `Check out this amazing content: \"${contentTitle}\" on Promorang!`\n      : 'Discover amazing content and earn while you engage on Promorang!';\n    \n    return `${baseText} Join me: https://promorang.com`;\n  };\n\n  const pointsToEarn = calculatePoints();\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-xl p-6 w-full max-w-md mx-4\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center space-x-2\">\n            <Share2 className=\"w-6 h-6 text-orange-600\" />\n            <h2 className=\"text-xl font-bold text-gray-900\">Share Content</h2>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        <div className=\"space-y-6\">\n          {/* Points Preview */}\n          <div className=\"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <span className=\"text-sm font-medium text-orange-900\">Points to Earn</span>\n              <span className=\"text-xl font-bold text-orange-600\">{pointsToEarn}</span>\n            </div>\n            <div className=\"text-xs text-orange-700\">\n              Base: 10 pts × {getTierMultiplier(user.user_tier)}x ({user.user_tier} tier)\n            </div>\n          </div>\n\n          {/* Platform Selection */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n              Platform\n            </label>\n            <div className=\"grid grid-cols-2 gap-2\">\n              {platforms.map((p) => (\n                <button\n                  key={p.id}\n                  onClick={() => setPlatform(p.id)}\n                  className={`p-3 rounded-lg border-2 transition-colors ${\n                    platform === p.id\n                      ? 'border-orange-500 bg-orange-50'\n                      : 'border-gray-200 hover:border-gray-300'\n                  }`}\n                >\n                  <div className={`w-8 h-8 bg-gradient-to-r ${p.color} rounded-lg mx-auto mb-1`}></div>\n                  <span className=\"text-sm font-medium\">{p.name}</span>\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Share Text */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Suggested Share Text\n            </label>\n            <div className=\"bg-gray-50 rounded-lg p-3\">\n              <p className=\"text-sm text-gray-700 mb-2\">{generateShareText()}</p>\n              <button\n                onClick={() => copyToClipboard(generateShareText())}\n                className=\"flex items-center space-x-2 text-orange-600 hover:text-orange-700 text-sm font-medium\"\n              >\n                {copied ? <Check className=\"w-4 h-4\" /> : <Copy className=\"w-4 h-4\" />}\n                <span>{copied ? 'Copied!' : 'Copy Text'}</span>\n              </button>\n            </div>\n          </div>\n\n          {/* Share URL Input */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Share URL *\n            </label>\n            <input\n              type=\"url\"\n              value={shareUrl}\n              onChange={(e) => setShareUrl(e.target.value)}\n              placeholder=\"https://instagram.com/p/your-post-id/\"\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n            />\n            <p className=\"text-xs text-gray-600 mt-1\">\n              Paste the URL of your shared post to verify and earn points\n            </p>\n          </div>\n\n          {/* How it Works */}\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <h4 className=\"font-medium text-blue-900 mb-2\">How It Works</h4>\n            <ol className=\"text-sm text-blue-700 space-y-1\">\n              <li>1. Copy the suggested text or create your own</li>\n              <li>2. Share on your chosen platform with Promorang mention</li>\n              <li>3. Paste the URL of your shared post here</li>\n              <li>4. Earn {pointsToEarn} points instantly!</li>\n            </ol>\n          </div>\n\n          {/* Error Display */}\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n              <p className=\"text-sm text-red-700\">{error}</p>\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          <div className=\"flex space-x-3\">\n            <button\n              onClick={onClose}\n              className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={handleShare}\n              disabled={!shareUrl.trim() || loading}\n              className=\"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2\"\n            >\n              {loading ? (\n                <div className=\"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full\"></div>\n              ) : (\n                <>\n                  <ExternalLink className=\"w-4 h-4\" />\n                  <span>Record Share</span>\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { X, ExternalLink, Upload, Camera, CheckCircle, AlertCircle, Key } from 'lucide-react';\nimport { UserType } from '@/shared/types';\n\ninterface ExternalMoveModalProps {\n  user: UserType | null;\n  contentId?: number;\n  contentTitle?: string;\n  contentPlatform?: string;\n  contentUrl?: string;\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: () => void;\n}\n\nexport default function ExternalMoveModal({ \n  user, \n  contentId, \n  contentTitle, \n  contentPlatform,\n  contentUrl,\n  isOpen, \n  onClose, \n  onSuccess \n}: ExternalMoveModalProps) {\n  const [moveType, setMoveType] = useState<'like' | 'comment' | 'share' | 'save' | 'repost'>('like');\n  const [proofUrl, setProofUrl] = useState('');\n  const [proofImage, setProofImage] = useState<File | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  if (!isOpen || !user) return null;\n\n  const moveTypes = [\n    { id: 'like', name: 'Like', description: 'Like the post on the original platform', icon: '❤️' },\n    { id: 'comment', name: 'Comment', description: 'Leave a meaningful comment', icon: '💬' },\n    { id: 'share', name: 'Share/Repost', description: 'Share or repost the content', icon: '🔄' },\n    { id: 'save', name: 'Save/Bookmark', description: 'Save or bookmark the content', icon: '🔖' },\n    { id: 'repost', name: 'Story/Repost', description: 'Share to your story or timeline', icon: '📢' }\n  ];\n\n  const getTierMultiplier = (tier: string) => {\n    switch (tier) {\n      case 'super': return 2.0;\n      case 'premium': return 1.5;\n      case 'free':\n      default: return 1.0;\n    }\n  };\n\n  const calculateExternalMoveReward = () => {\n    // Base points for external moves (10x the internal move points)\n    const basePoints = {\n      'like': 10,      // vs 1 for internal\n      'comment': 30,   // vs 3 for internal  \n      'save': 50,      // vs 5 for internal\n      'share': 100,    // vs 10 for internal\n      'repost': 120    // vs 12 for internal\n    };\n\n    const base = basePoints[moveType] || 10;\n    const multiplier = getTierMultiplier(user.user_tier);\n    const finalPoints = Math.floor(base * multiplier);\n    \n    // Also award some keys for external moves\n    const keysEarned = Math.ceil(finalPoints / 20); // 1 key per 20 points\n    \n    return { points: finalPoints, keys: keysEarned, multiplier };\n  };\n\n  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setProofImage(file);\n    }\n  };\n\n  const handleSubmit = async () => {\n    if (!proofUrl.trim() && !proofImage) {\n      setError('Please provide proof URL or upload a screenshot');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      let imageUrl = '';\n      \n      // Upload image if provided\n      if (proofImage) {\n        const formData = new FormData();\n        formData.append('image', proofImage);\n        \n        // In a real implementation, you'd upload to your storage service\n        // For now, we'll create a temporary URL\n        imageUrl = URL.createObjectURL(proofImage);\n      }\n\n      const response = await fetch('/api/users/external-move', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({\n          move_type: moveType,\n          content_id: contentId,\n          content_platform: contentPlatform,\n          content_url: contentUrl,\n          proof_url: proofUrl || imageUrl,\n          proof_type: proofImage ? 'image' : 'url'\n        })\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        onSuccess();\n        onClose();\n        \n        // Show success notification\n        const notification = document.createElement('div');\n        notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-bounce';\n        notification.innerHTML = `\n          <div class=\"flex items-center space-x-2\">\n            <span class=\"text-lg\">🎉</span>\n            <div>\n              <div class=\"font-semibold\">+${result.points_earned} points!</div>\n              <div class=\"text-xs opacity-90\">+${result.keys_earned} keys • External move verified</div>\n            </div>\n          </div>\n        `;\n        document.body.appendChild(notification);\n        setTimeout(() => {\n          if (document.body.contains(notification)) {\n            document.body.removeChild(notification);\n          }\n        }, 4000);\n        \n        // Reset form\n        setProofUrl('');\n        setProofImage(null);\n        setMoveType('like');\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Failed to record external move');\n      }\n    } catch (error) {\n      console.error('External move failed:', error);\n      setError('Network error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const reward = calculateExternalMoveReward();\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-xl p-6 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center space-x-2\">\n            <ExternalLink className=\"w-6 h-6 text-purple-600\" />\n            <h2 className=\"text-xl font-bold text-gray-900\">External Move</h2>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        <div className=\"space-y-6\">\n          {/* Content Info */}\n          {contentTitle && (\n            <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n              <h3 className=\"font-medium text-gray-900 mb-1\">{contentTitle}</h3>\n              <div className=\"flex items-center space-x-2 text-sm text-gray-600\">\n                <span className=\"capitalize\">{contentPlatform}</span>\n                {contentUrl && (\n                  <>\n                    <span>•</span>\n                    <a \n                      href={contentUrl} \n                      target=\"_blank\" \n                      rel=\"noopener noreferrer\"\n                      className=\"text-purple-600 hover:text-purple-700 underline\"\n                    >\n                      View Original\n                    </a>\n                  </>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Reward Preview */}\n          <div className=\"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <span className=\"text-sm font-medium text-purple-900\">Reward for External Move</span>\n              <div className=\"flex items-center space-x-3\">\n                <span className=\"text-2xl font-bold text-purple-600\">{reward.points}</span>\n                <span className=\"text-sm text-purple-700\">points</span>\n                <div className=\"flex items-center space-x-1\">\n                  <Key className=\"w-4 h-4 text-orange-500\" />\n                  <span className=\"text-sm font-bold text-orange-600\">{reward.keys}</span>\n                </div>\n              </div>\n            </div>\n            <div className=\"text-xs text-purple-700\">\n              10x more than in-app actions • {reward.multiplier}x {user.user_tier} tier multiplier\n            </div>\n          </div>\n\n          {/* Move Type Selection */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n              What did you do on {contentPlatform}?\n            </label>\n            <div className=\"grid grid-cols-1 gap-2\">\n              {moveTypes.map((type) => (\n                <button\n                  key={type.id}\n                  onClick={() => setMoveType(type.id as any)}\n                  className={`p-3 rounded-lg border-2 text-left transition-colors ${\n                    moveType === type.id\n                      ? 'border-purple-500 bg-purple-50'\n                      : 'border-gray-200 hover:border-gray-300'\n                  }`}\n                >\n                  <div className=\"flex items-center space-x-3\">\n                    <span className=\"text-xl\">{type.icon}</span>\n                    <div>\n                      <div className=\"font-medium\">{type.name}</div>\n                      <div className=\"text-sm text-gray-600\">{type.description}</div>\n                    </div>\n                  </div>\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Proof Submission */}\n          <div className=\"space-y-4\">\n            <label className=\"block text-sm font-medium text-gray-700\">\n              Proof of Action *\n            </label>\n            \n            {/* URL Input */}\n            <div>\n              <label className=\"block text-xs text-gray-600 mb-1\">Link to your action (optional if uploading image)</label>\n              <input\n                type=\"url\"\n                value={proofUrl}\n                onChange={(e) => setProofUrl(e.target.value)}\n                placeholder=\"https://instagram.com/p/your-post/...\"\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n              />\n            </div>\n\n            {/* Image Upload */}\n            <div>\n              <label className=\"block text-xs text-gray-600 mb-1\">Or upload a screenshot</label>\n              <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-purple-400 transition-colors\">\n                <input\n                  type=\"file\"\n                  accept=\"image/*\"\n                  onChange={handleImageUpload}\n                  className=\"hidden\"\n                  id=\"proof-upload\"\n                />\n                <label htmlFor=\"proof-upload\" className=\"cursor-pointer\">\n                  {proofImage ? (\n                    <div className=\"space-y-2\">\n                      <CheckCircle className=\"w-8 h-8 text-green-600 mx-auto\" />\n                      <p className=\"text-sm font-medium text-green-700\">{proofImage.name}</p>\n                      <p className=\"text-xs text-gray-600\">Click to change</p>\n                    </div>\n                  ) : (\n                    <div className=\"space-y-2\">\n                      <Camera className=\"w-8 h-8 text-gray-400 mx-auto\" />\n                      <p className=\"text-sm text-gray-600\">Click to upload screenshot</p>\n                      <p className=\"text-xs text-gray-500\">PNG, JPG up to 10MB</p>\n                    </div>\n                  )}\n                </label>\n              </div>\n            </div>\n          </div>\n\n          {/* Instructions */}\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <div className=\"flex items-center space-x-2 mb-2\">\n              <AlertCircle className=\"w-4 h-4 text-blue-600\" />\n              <span className=\"font-medium text-blue-900\">How it works</span>\n            </div>\n            <ol className=\"text-sm text-blue-700 space-y-1 pl-4\">\n              <li>1. Go to the original content on {contentPlatform}</li>\n              <li>2. Perform the selected action ({moveTypes.find(t => t.id === moveType)?.name})</li>\n              <li>3. Copy the URL or take a screenshot as proof</li>\n              <li>4. Submit here to earn {reward.points} points + {reward.keys} keys!</li>\n            </ol>\n          </div>\n\n          {/* Error Display */}\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n              <p className=\"text-sm text-red-700\">{error}</p>\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          <div className=\"flex space-x-3\">\n            <button\n              onClick={onClose}\n              className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={handleSubmit}\n              disabled={(!proofUrl.trim() && !proofImage) || loading}\n              className=\"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2\"\n            >\n              {loading ? (\n                <div className=\"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full\"></div>\n              ) : (\n                <>\n                  <Upload className=\"w-4 h-4\" />\n                  <span>Submit Proof</span>\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { z } from 'zod';\n\n// User profile update schema\nexport const UpdateProfileRequestSchema = z.object({\n  username: z.string().optional(),\n  display_name: z.string().optional(),\n  bio: z.string().optional(),\n  avatar_url: z.string().optional(),\n  banner_url: z.string().optional(),\n  website_url: z.string().optional(),\n  social_links: z.string().optional(),\n});\n\nexport type UpdateProfileRequest = z.infer<typeof UpdateProfileRequestSchema>;\n\n// Drop creation schema (NEW ECONOMY)\nexport const CreateDropRequestSchema = z.object({\n  title: z.string(),\n  description: z.string(),\n  drop_type: z.string(),\n  difficulty: z.string(),\n  key_cost: z.number().min(0),\n  gem_reward_base: z.number().min(0),\n  gem_pool_total: z.number().optional(),\n  reward_logic: z.string().optional(),\n  follower_threshold: z.number().min(0).default(0),\n  time_commitment: z.string().optional(),\n  requirements: z.string().optional(),\n  deliverables: z.string().optional(),\n  deadline_at: z.string().optional(),\n  max_participants: z.number().optional(),\n  platform: z.string().optional(),\n  content_url: z.string().optional(),\n  move_cost_points: z.number().min(0).default(0),\n  key_reward_amount: z.number().min(0).default(0),\n  is_proof_drop: z.boolean().default(false),\n  is_paid_drop: z.boolean().default(false),\n});\n\nexport type CreateDropRequest = z.infer<typeof CreateDropRequestSchema>;\n\n// Drop application schema (NEW ECONOMY)\nexport const ApplyToDropRequestSchema = z.object({\n  application_message: z.string(),\n});\n\nexport type ApplyToDropRequest = z.infer<typeof ApplyToDropRequestSchema>;\n\n// Social action schema\nexport const SocialActionRequestSchema = z.object({\n  action_type: z.enum(['like', 'comment', 'save', 'share', 'repost']),\n  reference_id: z.number().optional(),\n  reference_type: z.string().optional(),\n});\n\nexport type SocialActionRequest = z.infer<typeof SocialActionRequestSchema>;\n\n// Currency conversion schema\nexport const ConvertCurrencyRequestSchema = z.object({\n  from_currency: z.enum(['points', 'gems']),\n  to_currency: z.enum(['keys']),\n  amount: z.number().min(1),\n});\n\nexport type ConvertCurrencyRequest = z.infer<typeof ConvertCurrencyRequestSchema>;\n\n// Master key activation schema\nexport const ActivateMasterKeyRequestSchema = z.object({\n  date: z.string().optional(),\n});\n\nexport type ActivateMasterKeyRequest = z.infer<typeof ActivateMasterKeyRequestSchema>;\n\n// Withdrawal request schema\nexport const CreateWithdrawalRequestSchema = z.object({\n  amount: z.number().min(200),\n  payment_method: z.string(),\n  payment_details: z.record(z.any()),\n});\n\nexport type CreateWithdrawalRequest = z.infer<typeof CreateWithdrawalRequestSchema>;\n\n// Payment preference schema\nexport const SavePaymentPreferenceRequestSchema = z.object({\n  payment_method: z.string(),\n  preference_data: z.record(z.any()),\n  is_default: z.boolean().optional(),\n});\n\nexport type SavePaymentPreferenceRequest = z.infer<typeof SavePaymentPreferenceRequestSchema>;\n\n// Gem purchase schema\nexport const CreateGemPurchaseRequestSchema = z.object({\n  package_id: z.string(),\n  gems: z.number().min(1),\n  price: z.number().min(0.01),\n});\n\nexport type CreateGemPurchaseRequest = z.infer<typeof CreateGemPurchaseRequestSchema>;\n\n// Social forecast creation schema (NEW)\nexport const CreateSocialForecastRequestSchema = z.object({\n  content_id: z.number().optional(),\n  platform: z.string(),\n  content_url: z.string(),\n  forecast_type: z.enum(['views', 'likes', 'shares', 'comments']),\n  target_value: z.number().min(1),\n  odds: z.number().min(1),\n  expires_at: z.string(),\n  initial_amount: z.number().min(1),\n  initial_side: z.enum(['over', 'under']),\n});\n\nexport type CreateSocialForecastRequest = z.infer<typeof CreateSocialForecastRequestSchema>;\n\n// Place forecast prediction schema (UPDATED)\nexport const PlaceForecastRequestSchema = z.object({\n  prediction_amount: z.number().min(1),\n  prediction_side: z.enum(['over', 'under']),\n});\n\nexport type PlaceForecastRequest = z.infer<typeof PlaceForecastRequestSchema>;\n\n// Social betting schemas (LEGACY - keeping for backward compatibility)\nexport const CreateSocialBetRequestSchema = z.object({\n  platform: z.string(),\n  content_url: z.string(),\n  bet_type: z.enum(['views', 'likes', 'shares', 'comments']),\n  target_value: z.number().min(1),\n  odds: z.number().min(1),\n  expires_at: z.string(),\n});\n\nexport type CreateSocialBetRequest = z.infer<typeof CreateSocialBetRequestSchema>;\n\nexport const PlaceBetRequestSchema = z.object({\n  bet_amount: z.number().min(1),\n  bet_side: z.enum(['over', 'under']),\n});\n\nexport type PlaceBetRequest = z.infer<typeof PlaceBetRequestSchema>;\n\n// ===== TYPE DEFINITIONS FOR FRONTEND =====\n\nexport interface UserType {\n  id: number;\n  mocha_user_id: string;\n  email: string;\n  username?: string;\n  display_name?: string;\n  bio?: string;\n  avatar_url?: string;\n  banner_url?: string;\n  website_url?: string;\n  social_links?: string;\n  user_type: string;\n  xp_points: number;\n  level: number;\n  referral_code: string;\n  referred_by?: string;\n  follower_count: number;\n  following_count: number;\n  total_earnings_usd: number;\n  promogem_balance: number;\n  points_balance: number;\n  keys_balance: number;\n  gems_balance: number;\n  gold_collected: number;\n  user_tier: string;\n  points_streak_days: number;\n  last_activity_date?: string;\n  master_key_activated_at?: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface WalletType {\n  id: number;\n  user_id: number;\n  currency_type: string;\n  balance: number;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface TransactionType {\n  id: number;\n  user_id: number;\n  transaction_type: string;\n  amount: number;\n  currency_type: string;\n  status: string;\n  reference_id?: number;\n  reference_type?: string;\n  description?: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface TaskType {\n  id: number;\n  creator_id: number;\n  title: string;\n  description: string;\n  category: string;\n  difficulty: string;\n  reward_amount: number;\n  currency_type: string;\n  follower_threshold: number;\n  time_commitment?: string;\n  requirements?: string;\n  deliverables?: string;\n  deadline_at?: string;\n  max_participants?: number;\n  current_participants: number;\n  status: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface DropType {\n  id: number;\n  creator_id: number;\n  creator_name?: string;\n  creator_avatar?: string;\n  title: string;\n  description: string;\n  drop_type: string;\n  difficulty: string;\n  key_cost: number;\n  gem_reward_base: number;\n  gem_pool_total: number;\n  gem_pool_remaining: number;\n  reward_logic?: string;\n  follower_threshold: number;\n  time_commitment?: string;\n  requirements?: string;\n  deliverables?: string;\n  deadline_at?: string;\n  max_participants?: number;\n  current_participants: number;\n  status: string;\n  platform?: string;\n  content_url?: string;\n  preview_image?: string;\n  move_cost_points: number;\n  key_reward_amount: number;\n  is_proof_drop: boolean;\n  is_paid_drop: boolean;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface DropApplicationType {\n  id: number;\n  drop_id: string | number;\n  user_id: string | number;\n  status: string;\n  application_message?: string;\n  submission_url?: string;\n  submission_notes?: string;\n  review_score?: number;\n  gems_earned: number;\n  applied_at: string;\n  completed_at?: string;\n  paid_at?: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface ContentHolding {\n  content_id: string;\n  content_title: string;\n  content_thumbnail: string;\n  creator_id: string;\n  creator_name: string;\n  creator_avatar: string;\n  platform: string;\n  owned_shares: number;\n  available_to_sell: number;\n  avg_cost: number;\n  current_price: number;\n  market_value: number;\n  unrealized_gain: number;\n  day_change_pct: number;\n  week_change_pct: number;\n  month_change_pct: number;\n  last_trade_at?: string;\n  is_listed: boolean;\n  listing_id?: string;\n  visibility?: 'public' | 'private';\n}\n\nexport interface ShareListing {\n  id: string;\n  content_id: string;\n  content_title: string;\n  content_thumbnail: string;\n  owner_id: string;\n  owner_name: string;\n  quantity: number;\n  remaining_quantity: number;\n  ask_price: number;\n  market_price: number;\n  status: 'active' | 'filled' | 'cancelled' | 'expired';\n  created_at: string;\n  expires_at?: string;\n}\n\nexport interface ShareOffer {\n  id: string;\n  content_id: string;\n  content_title?: string;\n  buyer_id: string;\n  seller_id?: string;\n  quantity: number;\n  bid_price: number;\n  status: 'pending' | 'accepted' | 'rejected' | 'expired';\n  message?: string;\n  created_at: string;\n  expires_at?: string;\n}\n\nexport interface PredictionSummary {\n  id: string;\n  forecast_id: string;\n  content_title: string;\n  platform: string;\n  prediction_side: string;\n  amount: number;\n  potential_payout: number;\n  status: string;\n  result?: string;\n  created_at: string;\n  resolved_at?: string;\n}\n\nexport interface ContentHoldingDetail {\n  holding: ContentHolding;\n  content: {\n    description: string;\n    genres: string[];\n    tags: string[];\n    published_at: string;\n    total_views: number;\n    engagement_rate: number;\n    earnings_to_date: number;\n  };\n  performance: {\n    history: Array<{ date: string; price: number; volume: number }>;\n    ledger: Array<{ id: string; type: string; quantity: number; price: number; timestamp: string }>;\n  };\n  marketplace: {\n    listings: Array<{ id: string; quantity: number; ask_price: number; status: string; filled_at?: string }>;\n    offers: Array<{ id: string; quantity: number; bid_price: number; status: string; buyer_name: string; message?: string }>;\n  };\n}\n\nexport interface PredictionDetail {\n  prediction: PredictionSummary;\n  forecast: {\n    metric: string;\n    target: string;\n    odds: number;\n    expires_at: string;\n    creator_projection: string;\n  };\n  trajectory: Array<{ date: string; actual: number; expected: number }>;\n  participants: Array<{ username: string; amount: number; side: string; status: string }>;\n}\n\nexport interface ContentPieceType {\n  id: number;\n  creator_id: number;\n  creator_username?: string;\n  creator_name?: string;\n  creator_avatar?: string;\n  platform: string;\n  platform_url: string;\n  title: string;\n  description?: string;\n  media_url?: string;\n  total_shares: number;\n  available_shares: number;\n  engagement_shares_total: number;\n  engagement_shares_remaining: number;\n  share_price: number;\n  current_revenue: number;\n  performance_metrics?: string;\n  views_count?: number;\n  likes_count?: number;\n  comments_count?: number;\n  reposts_count?: number;\n  is_demo?: boolean;\n  is_sponsored?: boolean;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface MasterKeyActivationType {\n  id: number;\n  user_id: number;\n  activation_date: string;\n  proof_drops_required: number;\n  proof_drops_completed: number;\n  is_activated: boolean;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface WithdrawalMethodType {\n  id: number;\n  method_name: string;\n  display_name: string;\n  min_amount: number;\n  fee_percentage: number;\n  processing_time: string;\n  is_active: boolean;\n  required_fields: string;\n  created_at: string;\n}\n\nexport interface UserPaymentPreferenceType {\n  id: number;\n  user_id: number;\n  payment_method: string;\n  is_default: boolean;\n  preference_data: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface AdvertiserAnalyticsType {\n  id: number;\n  advertiser_id: number;\n  period_start: string;\n  period_end: string;\n  drops_created: number;\n  total_participants: number;\n  gems_spent: number;\n  conversions: number;\n  impressions: number;\n  engagement_rate: number;\n  created_at: string;\n}\n\n// Schema enums for form validation\nexport const PlatformSchema = z.enum(['instagram', 'tiktok', 'youtube', 'twitter']);\nexport const DropTypeSchema = z.enum(['content_clipping', 'reviews', 'ugc_creation', 'affiliate_referral', 'surveys', 'challenges_events', 'engagement']);\nexport const DropDifficultySchema = z.enum(['easy', 'medium', 'hard']);\nexport const TaskCategorySchema = z.enum(['social_media', 'content_creation', 'marketing', 'review', 'survey']);\nexport const TaskDifficultySchema = z.enum(['easy', 'medium', 'hard']);\n\n// Legacy type aliases for backward compatibility\nexport type CreateDropRequestType = CreateDropRequest;\nexport type CreateTaskRequestType = CreateTaskRequest;\nexport type UpdateProfileRequestType = UpdateProfileRequest;\n\n// Content creation schema\nexport const CreateContentRequestSchema = z.object({\n  platform: z.enum(['instagram', 'tiktok', 'youtube', 'twitter', 'linkedin']),\n  title: z.string().min(1),\n  description: z.string().optional(),\n  platform_url: z.string().url(),\n  media_url: z.string().optional(),\n  total_shares: z.number().min(1).max(1000),\n  share_price: z.number().min(0),\n});\n\nexport type CreateContentRequest = z.infer<typeof CreateContentRequestSchema>;\n\n// Content investment schema\nexport const BuySharesRequestSchema = z.object({\n  content_id: z.number(),\n  shares_count: z.number().min(1),\n});\n\nexport type BuySharesRequest = z.infer<typeof BuySharesRequestSchema>;\n\n// Legacy task schemas (for backward compatibility)\nexport const CreateTaskRequestSchema = z.object({\n  title: z.string(),\n  description: z.string(),\n  category: z.string(),\n  difficulty: z.enum(['easy', 'medium', 'hard']),\n  reward_amount: z.number().min(0),\n  currency_type: z.string().default('USD'),\n  follower_threshold: z.number().min(0).default(0),\n  time_commitment: z.string().optional(),\n  requirements: z.string().optional(),\n  deliverables: z.string().optional(),\n  deadline_at: z.string().optional(),\n  max_participants: z.number().optional(),\n});\n\nexport type CreateTaskRequest = z.infer<typeof CreateTaskRequestSchema>;\n\nexport const ApplyToTaskRequestSchema = z.object({\n  application_message: z.string(),\n});\n\nexport interface ForecastType {\n  id: number;\n  content_id?: number;\n  creator_id: number;\n  creator_name: string;\n  platform: string;\n  content_url: string;\n  content_title?: string;\n  forecast_type: string;\n  target_value: number;\n  current_value: number;\n  odds: number;\n  pool_size: number;\n  creator_initial_amount: number;\n  creator_side: string;\n  expires_at: string;\n  created_at: string;\n  participants: number;\n  status: string;\n}\n","import { useState, useEffect } from 'react';\nimport { X, Save, Loader2 } from 'lucide-react';\nimport { ContentPieceType, CreateContentRequestSchema } from '@/shared/types';\n\ninterface EditContentModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: (updatedContent: ContentPieceType) => void;\n  content: ContentPieceType;\n}\n\nexport default function EditContentModal({\n  isOpen,\n  onClose,\n  onSuccess,\n  content\n}: EditContentModalProps) {\n  const [formData, setFormData] = useState({\n    platform: content.platform,\n    title: content.title,\n    description: content.description || '',\n    platform_url: content.platform_url,\n    media_url: content.media_url || '',\n    total_shares: content.total_shares,\n    share_price: content.share_price,\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (content) {\n      setFormData({\n        platform: content.platform,\n        title: content.title,\n        description: content.description || '',\n        platform_url: content.platform_url,\n        media_url: content.media_url || '',\n        total_shares: content.total_shares,\n        share_price: content.share_price,\n      });\n    }\n  }, [content]);\n\n  if (!isOpen) return null;\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Validate form data\n      const validationResult = CreateContentRequestSchema.safeParse(formData);\n      if (!validationResult.success) {\n        setError('Please check all required fields');\n        return;\n      }\n\n      const response = await fetch(`/api/content/${content.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify(formData),\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        onSuccess(result.content);\n        onClose();\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Failed to update content');\n      }\n    } catch (error) {\n      console.error('Error updating content:', error);\n      setError('Failed to update content');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <h2 className=\"text-xl font-bold text-gray-900\">Edit Content</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n            disabled={loading}\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        {/* Form */}\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg\">\n              {error}\n            </div>\n          )}\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Platform */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Platform *\n              </label>\n              <select\n                value={formData.platform}\n                onChange={(e) => setFormData({ ...formData, platform: e.target.value })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n                required\n                disabled={loading}\n              >\n                <option value=\"\">Select platform</option>\n                <option value=\"instagram\">Instagram</option>\n                <option value=\"tiktok\">TikTok</option>\n                <option value=\"youtube\">YouTube</option>\n                <option value=\"twitter\">Twitter</option>\n                <option value=\"linkedin\">LinkedIn</option>\n              </select>\n            </div>\n\n            {/* Total Shares */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Total Shares *\n              </label>\n              <input\n                type=\"number\"\n                min=\"1\"\n                max=\"1000\"\n                value={formData.total_shares}\n                onChange={(e) => setFormData({ ...formData, total_shares: parseInt(e.target.value) || 0 })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n                required\n                disabled={loading}\n              />\n            </div>\n          </div>\n\n          {/* Title */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Title *\n            </label>\n            <input\n              type=\"text\"\n              value={formData.title}\n              onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n              className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n              placeholder=\"Enter content title\"\n              required\n              disabled={loading}\n            />\n          </div>\n\n          {/* Description */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Description\n            </label>\n            <textarea\n              value={formData.description}\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n              rows={4}\n              className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n              placeholder=\"Describe your content...\"\n              disabled={loading}\n            />\n          </div>\n\n          {/* Platform URL */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Platform URL *\n            </label>\n            <input\n              type=\"url\"\n              value={formData.platform_url}\n              onChange={(e) => setFormData({ ...formData, platform_url: e.target.value })}\n              className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n              placeholder=\"https://instagram.com/p/...\"\n              required\n              disabled={loading}\n            />\n          </div>\n\n          {/* Media URL */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Media URL\n            </label>\n            <input\n              type=\"url\"\n              value={formData.media_url}\n              onChange={(e) => setFormData({ ...formData, media_url: e.target.value })}\n              className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n              placeholder=\"https://example.com/image.jpg\"\n              disabled={loading}\n            />\n          </div>\n\n          {/* Share Price */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Share Price (USD) *\n            </label>\n            <input\n              type=\"number\"\n              step=\"0.0001\"\n              min=\"0\"\n              value={formData.share_price}\n              onChange={(e) => setFormData({ ...formData, share_price: parseFloat(e.target.value) || 0 })}\n              className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n              placeholder=\"0.0100\"\n              required\n              disabled={loading}\n            />\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"flex space-x-4 pt-6 border-t border-gray-200\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              disabled={loading}\n              className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors disabled:opacity-50\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 disabled:opacity-50 flex items-center justify-center space-x-2\"\n            >\n              {loading ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  <span>Updating...</span>\n                </>\n              ) : (\n                <>\n                  <Save className=\"w-4 h-4\" />\n                  <span>Update Content</span>\n                </>\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n","import { AlertTriangle, CheckCircle, Info, X } from 'lucide-react';\n\ninterface ConfirmationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: () => void;\n  title: string;\n  message: string;\n  confirmText?: string;\n  cancelText?: string;\n  type?: 'warning' | 'danger' | 'info' | 'success';\n  loading?: boolean;\n}\n\nexport default function ConfirmationModal({\n  isOpen,\n  onClose,\n  onConfirm,\n  title,\n  message,\n  confirmText = 'Confirm',\n  cancelText = 'Cancel',\n  type = 'warning',\n  loading = false\n}: ConfirmationModalProps) {\n  if (!isOpen) return null;\n\n  const getIcon = () => {\n    switch (type) {\n      case 'danger':\n        return <AlertTriangle className=\"w-6 h-6 text-red-600\" />;\n      case 'success':\n        return <CheckCircle className=\"w-6 h-6 text-green-600\" />;\n      case 'info':\n        return <Info className=\"w-6 h-6 text-blue-600\" />;\n      case 'warning':\n      default:\n        return <AlertTriangle className=\"w-6 h-6 text-yellow-600\" />;\n    }\n  };\n\n  const getConfirmButtonStyle = () => {\n    switch (type) {\n      case 'danger':\n        return 'bg-red-600 hover:bg-red-700 text-white';\n      case 'success':\n        return 'bg-green-600 hover:bg-green-700 text-white';\n      case 'info':\n        return 'bg-blue-600 hover:bg-blue-700 text-white';\n      case 'warning':\n      default:\n        return 'bg-yellow-600 hover:bg-yellow-700 text-white';\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-xl p-6 w-full max-w-md mx-4\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center space-x-3\">\n            {getIcon()}\n            <h2 className=\"text-xl font-bold text-gray-900\">{title}</h2>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n            disabled={loading}\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        <p className=\"text-gray-600 mb-6\">{message}</p>\n\n        <div className=\"flex space-x-3\">\n          <button\n            onClick={onClose}\n            disabled={loading}\n            className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors disabled:opacity-50\"\n          >\n            {cancelText}\n          </button>\n          <button\n            onClick={onConfirm}\n            disabled={loading}\n            className={`flex-1 px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 ${getConfirmButtonStyle()}`}\n          >\n            {loading ? (\n              <div className=\"flex items-center justify-center space-x-2\">\n                <div className=\"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full\"></div>\n                <span>Processing...</span>\n              </div>\n            ) : (\n              confirmText\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { X, Share2, Copy, Check, Facebook, Twitter, MessageCircle } from 'lucide-react';\n\ninterface ShareModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  contentId: number;\n  contentTitle: string;\n  contentUrl?: string;\n}\n\nexport default function ShareModal({ isOpen, onClose, contentId, contentTitle, contentUrl }: ShareModalProps) {\n  const [copied, setCopied] = useState(false);\n\n  if (!isOpen) return null;\n\n  const shareUrl = contentUrl || `${window.location.origin}/content/${contentId}`;\n  const shareText = `Check out this amazing content: \"${contentTitle}\" on Promorang!`;\n\n  const copyToClipboard = async () => {\n    try {\n      await navigator.clipboard.writeText(shareUrl);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch (error) {\n      console.error('Failed to copy:', error);\n    }\n  };\n\n  const shareToFacebook = () => {\n    const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareUrl)}`;\n    window.open(url, '_blank', 'width=600,height=400');\n  };\n\n  const shareToTwitter = () => {\n    const text = encodeURIComponent(`${shareText} ${shareUrl}`);\n    const url = `https://twitter.com/intent/tweet?text=${text}`;\n    window.open(url, '_blank', 'width=600,height=400');\n  };\n\n  const shareToWhatsApp = () => {\n    const text = encodeURIComponent(`${shareText} ${shareUrl}`);\n    const url = `https://wa.me/?text=${text}`;\n    window.open(url, '_blank');\n  };\n\n  const shareViaEmail = () => {\n    const subject = encodeURIComponent('Check out this content on Promorang');\n    const body = encodeURIComponent(`${shareText}\\n\\n${shareUrl}`);\n    window.location.href = `mailto:?subject=${subject}&body=${body}`;\n  };\n\n  const shareNative = async () => {\n    if (navigator.share) {\n      try {\n        await navigator.share({\n          title: contentTitle,\n          text: shareText,\n          url: shareUrl,\n        });\n      } catch (error) {\n        console.error('Error sharing:', error);\n      }\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl max-w-md w-full p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center space-x-2\">\n            <Share2 className=\"w-6 h-6 text-blue-600\" />\n            <h2 className=\"text-xl font-bold text-gray-900\">Share Content</h2>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        {/* Content Preview */}\n        <div className=\"bg-gray-50 rounded-lg p-4 mb-6\">\n          <h3 className=\"font-medium text-gray-900 mb-2\">{contentTitle}</h3>\n          <p className=\"text-sm text-gray-600 break-all\">{shareUrl}</p>\n        </div>\n\n        {/* Share Options */}\n        <div className=\"space-y-4\">\n          {/* Copy Link */}\n          <button\n            onClick={copyToClipboard}\n            className=\"w-full flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\"\n          >\n            <div className=\"flex items-center space-x-3\">\n              {copied ? (\n                <Check className=\"w-5 h-5 text-green-600\" />\n              ) : (\n                <Copy className=\"w-5 h-5 text-gray-600\" />\n              )}\n              <span className=\"font-medium text-gray-900\">\n                {copied ? 'Copied!' : 'Copy Link'}\n              </span>\n            </div>\n          </button>\n\n          {/* Social Media Buttons */}\n          <div className=\"grid grid-cols-2 gap-3\">\n            <button\n              onClick={shareToFacebook}\n              className=\"flex items-center justify-center space-x-2 p-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              <Facebook className=\"w-4 h-4\" />\n              <span>Facebook</span>\n            </button>\n\n            <button\n              onClick={shareToTwitter}\n              className=\"flex items-center justify-center space-x-2 p-3 bg-sky-500 text-white rounded-lg hover:bg-sky-600 transition-colors\"\n            >\n              <Twitter className=\"w-4 h-4\" />\n              <span>Twitter</span>\n            </button>\n\n            <button\n              onClick={shareToWhatsApp}\n              className=\"flex items-center justify-center space-x-2 p-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors\"\n            >\n              <MessageCircle className=\"w-4 h-4\" />\n              <span>WhatsApp</span>\n            </button>\n\n            <button\n              onClick={shareViaEmail}\n              className=\"flex items-center justify-center space-x-2 p-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\n            >\n              <span className=\"text-sm\">📧</span>\n              <span>Email</span>\n            </button>\n          </div>\n\n          {/* Native Share (if supported) */}\n          {typeof window !== 'undefined' && 'share' in navigator && (\n            <button\n              onClick={shareNative}\n              className=\"w-full flex items-center justify-center space-x-2 p-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-colors\"\n            >\n              <Share2 className=\"w-4 h-4\" />\n              <span>Share via...</span>\n            </button>\n          )}\n        </div>\n\n        {/* Tips */}\n        <div className=\"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-3\">\n          <p className=\"text-xs text-blue-700\">\n            💡 <strong>Tip:</strong> Share this content to earn points and help creators grow their audience!\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { X, Bookmark, Eye, Calendar, Trash2, ExternalLink } from 'lucide-react';\nimport { UserType } from '@/shared/types';\n\ninterface SavedContent {\n  id: number;\n  content_id: number;\n  content_title: string;\n  content_platform: string;\n  content_url: string;\n  creator_name: string;\n  creator_avatar: string;\n  created_at: string;\n}\n\ninterface SavedContentModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  user: UserType | null;\n}\n\nexport default function SavedContentModal({ isOpen, onClose, user }: SavedContentModalProps) {\n  const [savedContent, setSavedContent] = useState<SavedContent[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (isOpen && user) {\n      fetchSavedContent();\n    }\n  }, [isOpen, user]);\n\n  const fetchSavedContent = async () => {\n    setLoading(true);\n    try {\n      const response = await fetch('/api/users/saved-content', {\n        credentials: 'include'\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setSavedContent(data);\n      }\n    } catch (error) {\n      console.error('Failed to fetch saved content:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const removeSavedContent = async (contentId: number) => {\n    try {\n      const response = await fetch(`/api/users/saved-content/${contentId}`, {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n\n      if (response.ok) {\n        setSavedContent(prev => prev.filter(item => item.content_id !== contentId));\n      }\n    } catch (error) {\n      console.error('Failed to remove saved content:', error);\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric'\n    });\n  };\n\n  const getPlatformIcon = (platform: string) => {\n    switch (platform) {\n      case 'instagram': return '📷';\n      case 'tiktok': return '🎵';\n      case 'youtube': return '📺';\n      case 'twitter': return '🐦';\n      case 'linkedin': return '💼';\n      default: return '📱';\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl max-w-2xl w-full max-h-[80vh] flex flex-col\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <div className=\"flex items-center space-x-3\">\n            <Bookmark className=\"w-6 h-6 text-orange-600\" />\n            <h2 className=\"text-xl font-bold text-gray-900\">Saved Content</h2>\n            <span className=\"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-sm\">\n              {savedContent.length}\n            </span>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 overflow-y-auto p-6\">\n          {loading ? (\n            <div className=\"flex items-center justify-center py-12\">\n              <div className=\"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full\"></div>\n            </div>\n          ) : savedContent.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <Bookmark className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No saved content yet</h3>\n              <p className=\"text-gray-600 mb-4\">\n                Save content you want to revisit later by clicking the bookmark icon.\n              </p>\n              <button\n                onClick={onClose}\n                className=\"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors\"\n              >\n                Explore Content\n              </button>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {savedContent.map((item) => (\n                <div\n                  key={item.id}\n                  className=\"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors\"\n                >\n                  <div className=\"flex items-start space-x-4\">\n                    {/* Platform Icon */}\n                    <div className=\"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center text-white text-xl flex-shrink-0\">\n                      {getPlatformIcon(item.content_platform)}\n                    </div>\n\n                    {/* Content Info */}\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-start justify-between mb-2\">\n                        <h4 className=\"font-medium text-gray-900 truncate pr-2\">\n                          {item.content_title}\n                        </h4>\n                        <div className=\"flex items-center space-x-2 flex-shrink-0\">\n                          <button\n                            onClick={() => window.open(`/content/${item.content_id}`, '_blank')}\n                            className=\"text-blue-600 hover:text-blue-700 p-1 rounded transition-colors\"\n                            title=\"View content\"\n                          >\n                            <Eye className=\"w-4 h-4\" />\n                          </button>\n                          <button\n                            onClick={() => window.open(item.content_url, '_blank')}\n                            className=\"text-purple-600 hover:text-purple-700 p-1 rounded transition-colors\"\n                            title=\"View original\"\n                          >\n                            <ExternalLink className=\"w-4 h-4\" />\n                          </button>\n                          <button\n                            onClick={() => removeSavedContent(item.content_id)}\n                            className=\"text-red-600 hover:text-red-700 p-1 rounded transition-colors\"\n                            title=\"Remove from saved\"\n                          >\n                            <Trash2 className=\"w-4 h-4\" />\n                          </button>\n                        </div>\n                      </div>\n\n                      <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\n                        <div className=\"flex items-center space-x-1\">\n                          <span>by {item.creator_name}</span>\n                        </div>\n                        <div className=\"flex items-center space-x-1\">\n                          <span className=\"capitalize\">{item.content_platform}</span>\n                        </div>\n                        <div className=\"flex items-center space-x-1\">\n                          <Calendar className=\"w-3 h-3\" />\n                          <span>Saved {formatDate(item.created_at)}</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        {savedContent.length > 0 && (\n          <div className=\"p-4 border-t border-gray-200 bg-gray-50\">\n            <p className=\"text-xs text-gray-600 text-center\">\n              💡 Tip: Saved content is private and only visible to you. Use this to build your personal content library!\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { MouseEvent } from 'react';\nimport { TrendingUp, Gift, Target, ExternalLink } from 'lucide-react';\nimport { ContentPieceType, UserType } from '@/shared/types';\n\ninterface ButtonGroupProps {\n  content: ContentPieceType;\n  onBuyShares?: (content: ContentPieceType) => void;\n  onPredict?: (content: ContentPieceType) => void;\n  onTip?: (content: ContentPieceType) => void;\n  onExternalMove?: (content: ContentPieceType) => void;\n  currentUser?: UserType | null;\n  onEdit?: (content: ContentPieceType) => void;\n  onDelete?: (content: ContentPieceType) => void;\n}\n\ninterface PrimaryButtonProps {\n  variant: 'orange' | 'blue' | 'purple';\n  text: string;\n  icon?: React.ReactNode;\n  onClick?: (event: MouseEvent<HTMLButtonElement>) => void;\n  disabled?: boolean;\n}\n\nfunction PrimaryButton({ variant, text, icon, onClick, disabled }: PrimaryButtonProps) {\n  const getVariantStyles = () => {\n    switch (variant) {\n      case 'orange':\n        return 'bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600';\n      case 'blue':\n        return 'bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600';\n      case 'purple':\n        return 'bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600';\n      default:\n        return 'bg-gray-500 hover:bg-gray-600';\n    }\n  };\n\n  return (\n    <button\n      onClick={(event) => onClick?.(event)}\n      disabled={disabled}\n      className={`text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-2 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:hover:shadow-none ${getVariantStyles()}`}\n      aria-label={text}\n    >\n      {icon}\n      <span>{text}</span>\n    </button>\n  );\n}\n\nfunction PriceLabel({ content }: { content: ContentPieceType }) {\n  const sharePriceRaw = typeof content.share_price === 'number'\n    ? content.share_price\n    : Number(content.share_price ?? 0);\n  const sharePrice = Number.isFinite(sharePriceRaw) && sharePriceRaw > 0 ? sharePriceRaw : null;\n  return (\n    <div className=\"text-center\">\n      <div className=\"text-lg font-bold text-gray-900\">\n        {sharePrice ? `$${sharePrice.toFixed(2)}` : '—'}\n      </div>\n      <div className=\"text-xs text-gray-500\">per share</div>\n    </div>\n  );\n}\n\nfunction AvailabilityLabel({ content }: { content: ContentPieceType }) {\n  const paidShares = content.available_shares ?? 0;\n  return (\n    <div className=\"text-center\">\n      <div className=\"text-lg font-bold text-blue-600\">\n        {paidShares > 0 ? paidShares : '0'}\n      </div>\n      <div className=\"text-xs text-gray-500\">available</div>\n    </div>\n  );\n}\n\nexport default function ButtonGroup({\n  content,\n  onBuyShares,\n  onPredict,\n  onTip,\n  onExternalMove,\n  currentUser,\n  onEdit,\n  onDelete\n}: ButtonGroupProps) {\n  const paidShares = content.available_shares ?? 0;\n  const engagementShares = content.engagement_shares_remaining ?? 0;\n\n  const handleButtonClick = (callback?: (content: ContentPieceType) => void) => (event: MouseEvent<HTMLButtonElement>) => {\n    event.stopPropagation();\n    event.preventDefault();\n    callback?.(content);\n  };\n\n  const shareHint = paidShares <= 0\n    ? engagementShares > 0\n      ? 'Paid shares are sold out. Share early to claim the remaining engagement shares.'\n      : 'All shares have been claimed. Check back soon for the next drop.'\n    : engagementShares > 0\n      ? 'Paid shares are available. Share early to also lock in the limited engagement shares.'\n      : undefined;\n\n  return (\n    <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 sm:gap-3 mt-4\">\n      {/* Price and Availability Info */}\n      <div className=\"flex items-center justify-center sm:justify-start gap-3\">\n        <PriceLabel content={content} />\n        <AvailabilityLabel content={content} />\n      </div>\n\n      {/* Action Buttons */}\n      <div className=\"flex items-center justify-center sm:justify-end gap-2 flex-wrap\">\n        <PrimaryButton\n          variant=\"orange\"\n          text=\"Buy Shares\"\n          icon={<TrendingUp className=\"w-4 h-4\" />}\n          onClick={handleButtonClick(onBuyShares)}\n          disabled={paidShares <= 0}\n        />\n\n        <PrimaryButton\n          variant=\"blue\"\n          text=\"Predict\"\n          icon={<Target className=\"w-4 h-4\" />}\n          onClick={handleButtonClick(onPredict)}\n        />\n\n        <PrimaryButton\n          variant=\"purple\"\n          text=\"Tip Creator\"\n          icon={<Gift className=\"w-4 h-4\" />}\n          onClick={handleButtonClick(onTip)}\n        />\n      </div>\n\n      {shareHint && (\n        <p className=\"text-xs text-gray-600 bg-gray-50 border border-gray-100 rounded-lg px-3 py-2\">\n          {shareHint}\n        </p>\n      )}\n\n      {/* Edit/Delete Actions for Content Owner */}\n      {currentUser?.id === content.creator_id && (\n        <div className=\"flex items-center justify-center sm:justify-end space-x-2 pt-3 border-t border-gray-100\">\n          <button\n            onClick={(event) => {\n              event.stopPropagation();\n              onEdit?.(content);\n            }}\n            className=\"text-blue-600 hover:text-blue-800 text-sm font-medium px-3 py-1 rounded-md hover:bg-blue-50 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]\"\n            aria-label=\"Edit content\"\n          >\n            Edit\n          </button>\n          <span className=\"text-gray-300\">•</span>\n          <button\n            onClick={(event) => {\n              event.stopPropagation();\n              onDelete?.(content);\n            }}\n            className=\"text-red-600 hover:text-red-800 text-sm font-medium px-3 py-1 rounded-md hover:bg-red-50 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]\"\n            aria-label=\"Delete content\"\n          >\n            Delete\n          </button>\n        </div>\n      )}\n\n      {/* External Move Button */}\n      <div className=\"pt-3 border-t border-gray-100\">\n        <button\n          onClick={(event) => {\n            event.stopPropagation();\n            onExternalMove?.(content);\n          }}\n          className=\"flex items-center justify-center space-x-2 px-4 py-2 text-sm text-gray-600 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] w-full sm:w-auto\"\n          aria-label=\"Move to external platform\"\n        >\n          <ExternalLink className=\"w-4 h-4\" />\n          <span>Move to External</span>\n        </button>\n      </div>\n    </div>\n  );\n}\n","import { Heart, MessageCircle, Share2, Repeat, Eye } from 'lucide-react';\nimport { ContentPieceType } from '@/shared/types';\n\ninterface StatBarProps {\n  content: ContentPieceType;\n  onSocialAction?: (action: string, contentId?: number) => void;\n  onShare?: (content: ContentPieceType) => void;\n  onComment?: (content: ContentPieceType) => void;\n}\n\nfunction SocialButton({\n  icon: Icon,\n  count,\n  action,\n  onClick,\n  color = 'gray'\n}: {\n  icon: React.ComponentType<{ className?: string }>;\n  count: number;\n  action?: string;\n  onClick?: () => void;\n  color?: string;\n}) {\n  const getHoverColor = () => {\n    switch (color) {\n      case 'red': return 'hover:text-red-500';\n      case 'blue': return 'hover:text-blue-500';\n      case 'purple': return 'hover:text-purple-500';\n      case 'green': return 'hover:text-green-500';\n      default: return 'hover:text-gray-700';\n    }\n  };\n\n  return (\n    <button\n      onClick={onClick}\n      className={`flex items-center space-x-1 text-gray-500 ${getHoverColor()} transition-all duration-200 hover:scale-[1.05] active:scale-[0.95] px-2 py-1 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-400/50`}\n      aria-label={`${action} (${count})`}\n    >\n      <Icon className=\"w-4 h-4\" aria-hidden=\"true\" />\n      <span className=\"text-sm\">{count}</span>\n    </button>\n  );\n}\n\nexport default function StatBar({ content, onSocialAction, onShare, onComment }: StatBarProps) {\n  const formatNumber = (num: number) => {\n    if (num >= 1000000) {\n      return (num / 1000000).toFixed(1) + 'M';\n    } else if (num >= 1000) {\n      return (num / 1000).toFixed(1) + 'K';\n    }\n    return num.toString();\n  };\n\n  return (\n    <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 pt-4 border-t border-gray-100\">\n      {/* Social Stats */}\n      <div className=\"flex items-center justify-center sm:justify-start space-x-1 flex-wrap\">\n        {/* View Count */}\n        {content.views_count !== undefined && (\n          <div className=\"flex items-center space-x-1 text-gray-500 px-2 py-1 transition-all duration-200 hover:text-gray-700 hover:bg-gray-50 rounded-md\">\n            <Eye className=\"w-4 h-4\" />\n            <span className=\"text-sm\">{formatNumber(content.views_count)} views</span>\n          </div>\n        )}\n\n        {/* Social Actions */}\n        <div className=\"flex items-center space-x-1\">\n          <SocialButton\n            icon={Heart}\n            count={content.likes_count || 0}\n            action=\"like\"\n            onClick={() => onSocialAction?.('like', content.id)}\n            color=\"red\"\n          />\n\n          <SocialButton\n            icon={MessageCircle}\n            count={content.comments_count || 0}\n            action=\"comment\"\n            onClick={() => onComment?.(content)}\n            color=\"blue\"\n          />\n\n          <SocialButton\n            icon={Repeat}\n            count={content.reposts_count || 0}\n            action=\"repost\"\n            onClick={() => onSocialAction?.('repost', content.id)}\n            color=\"purple\"\n          />\n\n          <SocialButton\n            icon={Share2}\n            count={0}\n            action=\"share\"\n            onClick={() => onShare?.(content)}\n            color=\"green\"\n          />\n        </div>\n      </div>\n\n      {/* Engagement Progress */}\n      {content.engagement_shares_total > 0 && (\n        <div className=\"flex items-center justify-center sm:justify-end space-x-2 text-xs text-gray-500\" role=\"group\" aria-label=\"Engagement progress\">\n          <div className=\"flex items-center space-x-1\">\n            <div className=\"w-20 h-2 bg-gray-200 rounded-full overflow-hidden\" role=\"progressbar\" aria-valuenow={content.engagement_shares_total - content.engagement_shares_remaining} aria-valuemin={0} aria-valuemax={content.engagement_shares_total} aria-label={`${content.engagement_shares_remaining} free shares remaining out of ${content.engagement_shares_total} total`}>\n              <div\n                className=\"h-full bg-green-500 transition-all duration-300\"\n                style={{\n                  width: `${((content.engagement_shares_total - content.engagement_shares_remaining) / content.engagement_shares_total) * 100}%`\n                }}\n              ></div>\n            </div>\n            <span className=\"text-green-600 font-medium\" aria-label={`${content.engagement_shares_remaining} free shares remaining`}>\n              {content.engagement_shares_remaining}/{content.engagement_shares_total}\n            </span>\n          </div>\n          <span>free shares</span>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { ContentPieceType, UserType } from '@/shared/types';\nimport {\n  Heart,\n  MessageCircle,\n  Share2,\n  TrendingUp,\n  ExternalLink,\n  Eye,\n  Gift,\n  Repeat,\n  Tag,\n  Sparkles\n} from 'lucide-react';\nimport ButtonGroup from '@/react-app/components/ButtonGroup';\nimport StatBar from '@/react-app/components/StatBar';\n\ninterface ContentCardProps {\n  content: ContentPieceType;\n  onBuyShares?: (content: ContentPieceType) => void;\n  onShare?: (content: ContentPieceType) => void;\n  onSocialAction?: (action: string, contentId?: number) => void;\n  onExternalMove?: (content: ContentPieceType) => void;\n  onTip?: (content: ContentPieceType) => void;\n  currentUser?: UserType | null;\n  onEdit?: (content: ContentPieceType) => void;\n  onDelete?: (content: ContentPieceType) => void;\n  onComment?: (content: ContentPieceType) => void;\n  onNavigate?: (content: ContentPieceType) => void;\n  onPredict?: (content: ContentPieceType) => void;\n  isSponsored?: boolean;\n}\n\nexport default function ContentCard({\n  content,\n  onBuyShares,\n  onShare,\n  onSocialAction,\n  onExternalMove,\n  onTip,\n  currentUser,\n  onEdit,\n  onDelete,\n  onComment,\n  onNavigate,\n  onPredict,\n  isSponsored\n}: ContentCardProps) {\n  const handleCardClick = () => {\n    if (onNavigate) {\n      onNavigate(content);\n    }\n  };\n\n  const formatNumber = (num?: number | null) => {\n    if (num === undefined || num === null || Number.isNaN(num)) {\n      return '0';\n    }\n\n    if (num >= 1000000) {\n      return (num / 1000000).toFixed(1) + 'M';\n    } else if (num >= 1000) {\n      return (num / 1000).toFixed(1) + 'K';\n    }\n    return num.toString();\n  };\n\n  const totalShares = content.total_shares ?? 0;\n  const availableShares = content.available_shares ?? 0;\n  const ownedShares = Math.max(totalShares - availableShares, 0);\n  const engagementSharesRemaining = content.engagement_shares_remaining ?? 0;\n  const revenue = typeof content.current_revenue === 'number'\n    ? content.current_revenue\n    : Number(content.current_revenue) || 0;\n  const createdAt = content.created_at ? new Date(content.created_at) : null;\n  const postedDateLabel = createdAt && !Number.isNaN(createdAt.getTime())\n    ? createdAt.toLocaleDateString()\n    : 'Recently';\n\n  return (\n    <div\n      className={`bg-white rounded-xl shadow-sm border border-gray-100 p-5 cursor-pointer hover:shadow-lg transition-all duration-200 hover:border-gray-200 max-w-[720px] mx-auto w-full focus-within:outline focus-within:outline-2 focus-within:outline-primary/40 focus-within:ring-2 focus-within:ring-primary/20 ${isSponsored || content.is_sponsored ? 'ring-2 ring-orange-200 ring-opacity-50' : ''}`}\n      onClick={handleCardClick}\n      tabIndex={0}\n      role=\"article\"\n      aria-label={`Content by ${content.creator_name || content.creator_username || 'Unknown Creator'}: ${content.title}`}\n      onKeyDown={(e) => {\n        if (e.key === 'Enter' || e.key === ' ') {\n          e.preventDefault();\n          handleCardClick();\n        }\n      }}\n    >\n      {/* Header Section - Demo/Sponsored indicators and view count */}\n      <div className=\"flex items-center justify-between mb-4\">\n        <div className=\"flex items-center space-x-2\">\n          {content.is_demo && (\n            <span className=\"px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200 flex items-center space-x-1 transition-all duration-200 hover:bg-purple-200 hover:scale-[1.02]\">\n              <Sparkles className=\"w-3 h-3\" />\n              <span>Demo</span>\n            </span>\n          )}\n          {(isSponsored || content.is_sponsored) && (\n            <span className=\"px-3 py-1 rounded-full text-xs font-medium bg-gradient-to-r from-orange-100 to-amber-100 text-orange-800 border border-orange-200 flex items-center space-x-1 transition-all duration-200 hover:bg-orange-200 hover:scale-[1.02]\">\n              <Tag className=\"w-3 h-3\" />\n              <span>Sponsored</span>\n            </span>\n          )}\n        </div>\n\n        {content.views_count !== undefined && (\n          <div className=\"flex items-center space-x-1 text-gray-500 transition-all duration-200 hover:text-gray-700 hover:bg-gray-50 px-2 py-1 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-400/50\" role=\"text\" aria-label={`${formatNumber(content.views_count)} views`}>\n            <Eye className=\"w-4 h-4\" aria-hidden=\"true\" />\n            <span className=\"text-sm\">{formatNumber(content.views_count)} views</span>\n          </div>\n        )}\n      </div>\n\n      {/* Media Section - Image */}\n      {content.media_url && (\n        <div className=\"mb-4 rounded-lg overflow-hidden bg-gray-50\" onClick={(e) => e.stopPropagation()}>\n          <img\n            src={content.media_url}\n            alt={content.title}\n            className=\"w-full h-48 object-cover hover:scale-105 transition-transform duration-200\"\n            onError={(e) => {\n              (e.target as HTMLImageElement).style.display = 'none';\n            }}\n          />\n        </div>\n      )}\n\n      {/* Content Section - Title, Description, Creator Info */}\n      <div className=\"mb-4\" onClick={(e) => e.stopPropagation()}>\n        <h3 className=\"font-semibold text-lg text-gray-900 mb-2 hover:text-orange-600 transition-colors leading-tight cursor-pointer focus:outline-none focus:text-orange-600\">\n          {content.title}\n        </h3>\n        {content.description && (\n          <p className=\"text-gray-600 text-sm leading-relaxed line-clamp-2 mb-3\">{content.description}</p>\n        )}\n\n        {/* Creator Info and Revenue */}\n        <div className=\"flex items-start justify-between mb-3\">\n          <div className=\"flex items-center space-x-3 flex-1\">\n            <div className=\"w-10 h-10 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center text-white font-semibold text-sm transition-all duration-200 hover:scale-[1.05] cursor-pointer focus:outline-none focus:ring-2 focus:ring-orange-400/50 focus:scale-[1.05]\" aria-label={`Creator: ${content.creator_name || content.creator_username || 'Unknown'}`}>\n              {(content.creator_name || content.creator_username || 'U')[0].toUpperCase()}\n            </div>\n            <div className=\"flex-1\">\n              <div className=\"flex items-center space-x-2\">\n                <span className=\"font-semibold text-gray-900 text-base hover:text-orange-600 transition-colors cursor-pointer focus:outline-none focus:text-orange-600\" role=\"text\" aria-label={`Creator name: ${content.creator_name || content.creator_username || 'Unknown Creator'}`}>\n                  {content.creator_name || content.creator_username || 'Unknown Creator'}\n                </span>\n                <span className=\"text-gray-400\">•</span>\n                <span className=\"text-sm text-gray-500\">{postedDateLabel}</span>\n                {content.platform && (\n                  <>\n                    <span className=\"text-gray-400\">•</span>\n                    <span className=\"text-sm text-gray-500 capitalize\">{content.platform}</span>\n                  </>\n                )}\n              </div>\n              <div className=\"flex items-center space-x-2 mt-1\">\n                <span className=\"text-xs text-gray-500\">\n                  {formatNumber(ownedShares)} shares owned\n                </span>\n                <span className=\"text-xs text-gray-400\">•</span>\n                <span className=\"text-xs text-gray-500\">\n                  {formatNumber(totalShares)} total shares\n                </span>\n                {engagementSharesRemaining > 0 && (\n                  <>\n                    <span className=\"text-xs text-gray-400\">•</span>\n                    <span className=\"text-xs text-green-600 font-medium\">\n                      {formatNumber(engagementSharesRemaining)} free shares available\n                    </span>\n                  </>\n                )}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"text-right\">\n            <div className=\"flex items-center space-x-1 text-green-600 mb-1 transition-all duration-200 hover:text-green-700 hover:bg-green-50 px-2 py-1 rounded-md cursor-pointer focus:outline-none focus:ring-2 focus:ring-green-400/50\" role=\"text\" aria-label={`Current revenue: $${revenue.toFixed(2)}`}>\n              <TrendingUp className=\"w-4 h-4\" />\n              <span className=\"text-sm font-semibold\">${revenue.toFixed(2)}</span>\n            </div>\n            <div className=\"text-xs text-gray-500\">Current Revenue</div>\n          </div>\n        </div>\n\n        {/* Platform URL */}\n        {content.platform_url && (\n          <div className=\"p-3 bg-gray-50 rounded-lg border border-gray-100 transition-all duration-200 hover:bg-gray-100 hover:border-gray-200\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-2\">\n                <ExternalLink className=\"w-4 h-4 text-gray-500\" aria-hidden=\"true\" />\n                <span className=\"text-sm text-gray-600\">View on {content.platform}</span>\n              </div>\n              <a\n                href={content.platform_url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-orange-600 hover:text-orange-800 text-sm font-medium transition-all duration-200 hover:bg-orange-50 px-2 py-1 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-400/50 focus:bg-orange-50\"\n                onClick={(e) => e.stopPropagation()}\n                aria-label={`Open content on ${content.platform} (opens in new tab)`}\n              >\n                Open Link\n              </a>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Stats Section - Using StatBar component */}\n      <StatBar\n        content={content}\n        onSocialAction={onSocialAction}\n        onShare={onShare}\n        onComment={onComment}\n      />\n\n      {/* Actions Section - Using ButtonGroup component */}\n      <ButtonGroup\n        content={content}\n        onBuyShares={onBuyShares}\n        onPredict={onPredict}\n        onTip={onTip}\n        currentUser={currentUser}\n        onEdit={onEdit}\n        onDelete={onDelete}\n      />\n    </div>\n  );\n}\n","import { DropType } from '@/shared/types';\nimport { Clock, Users, Target, Star, TrendingUp, Calendar, Award } from 'lucide-react';\n\ninterface EnhancedDropCardProps {\n  drop: DropType;\n  onApply?: (drop: DropType) => void;\n}\n\nexport default function EnhancedDropCard({ drop, onApply }: EnhancedDropCardProps) {\n  const formatLabel = (value?: string | null, fallback = 'Unknown') => {\n    const label = value && value.trim().length > 0 ? value : fallback;\n    return label.charAt(0).toUpperCase() + label.slice(1);\n  };\n\n  const getDifficultyColor = (difficulty?: string | null) => {\n    const level = (difficulty || '').toLowerCase();\n    switch (level) {\n      case 'easy': return 'bg-green-100 text-green-800 border-green-200';\n      case 'medium': return 'bg-yellow-100 text-yellow-800 border-yellow-200';\n      case 'hard': return 'bg-red-100 text-red-800 border-red-200';\n      default: return 'bg-gray-100 text-gray-800 border-gray-200';\n    }\n  };\n\n  const getStatusColor = (status?: string | null) => {\n    const state = (status || '').toLowerCase();\n    switch (state) {\n      case 'active': return 'bg-green-100 text-green-800 border-green-200';\n      case 'pending': return 'bg-yellow-100 text-yellow-800 border-yellow-200';\n      case 'completed': return 'bg-blue-100 text-blue-800 border-blue-200';\n      case 'draft': return 'bg-gray-100 text-gray-800 border-gray-200';\n      default: return 'bg-gray-100 text-gray-800 border-gray-200';\n    }\n  };\n\n  const formatDeadline = (deadline: string) => {\n    const date = new Date(deadline);\n    const now = new Date();\n    const diffTime = date.getTime() - now.getTime();\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n\n    if (diffDays < 0) {\n      return `${Math.abs(diffDays)} days overdue`;\n    } else if (diffDays === 0) {\n      return 'Due today';\n    } else if (diffDays === 1) {\n      return 'Due tomorrow';\n    } else {\n      return `${diffDays} days left`;\n    }\n  };\n\n  const getRewardPerKey = () => {\n    if (drop.key_cost === 0) return 0;\n    return (drop.gem_reward_base / drop.key_cost).toFixed(1);\n  };\n\n  const handleCardClick = () => {\n    // Navigate to drop detail page\n    window.location.href = `/drops/${drop.id}`;\n  };\n\n  const previewImage = drop.preview_image || drop.content_url || `https://images.unsplash.com/photo-1503264116251-35a269479413?auto=format&fit=crop&w=1200&q=80&sat=-15&sig=${drop.id}`;\n\n  return (\n    <div\n      className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-5 cursor-pointer hover:shadow-lg transition-all duration-200 hover:border-gray-200\"\n      onClick={handleCardClick}\n    >\n      <div className=\"mb-4 -mx-5 -mt-5\">\n        <div className=\"h-40 w-full overflow-hidden rounded-t-xl\">\n          <img\n            src={previewImage}\n            alt={drop.title}\n            className=\"h-full w-full object-cover transition-transform duration-300 hover:scale-105\"\n            onError={(event) => {\n              (event.target as HTMLImageElement).src = `https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=1200&q=80&sig=${drop.id}`;\n            }}\n          />\n        </div>\n      </div>\n\n      {/* Header with Creator Info */}\n      <div className=\"flex items-start justify-between mb-4\">\n        <div className=\"flex items-center space-x-3 flex-1\">\n          <div className=\"w-10 h-10 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full flex items-center justify-center text-white font-semibold text-sm\">\n            {(drop.creator_name || 'U')[0].toUpperCase()}\n          </div>\n          <div className=\"flex-1\">\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"font-semibold text-gray-900 text-base hover:text-purple-600 transition-colors\">\n                {drop.creator_name || 'Unknown Creator'}\n              </span>\n              <span className=\"text-gray-400\">•</span>\n              <span className=\"text-sm text-gray-500\">\n                {new Date(drop.created_at).toLocaleDateString()}\n              </span>\n            </div>\n            <div className=\"flex items-center space-x-2 mt-1\">\n              <span className=\"text-xs text-gray-500\">\n                {drop.current_participants} participants\n              </span>\n              <span className=\"text-xs text-gray-400\">•</span>\n              <span className=\"text-xs text-gray-500\">\n                {drop.platform || 'Any platform'}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"text-right\">\n          <div className=\"flex items-center space-x-1 text-purple-600 mb-1\">\n            <Award className=\"w-4 h-4\" />\n            <span className=\"text-sm font-semibold\">\n              {drop.gem_pool_remaining} gems\n            </span>\n          </div>\n          <div className=\"text-xs text-gray-500\">Pool Remaining</div>\n        </div>\n      </div>\n\n      {/* Title and Description */}\n      <div className=\"mb-4\" onClick={(e) => e.stopPropagation()}>\n        <h3 className=\"font-semibold text-lg text-gray-900 mb-2 hover:text-purple-600 transition-colors leading-tight\">\n          {drop.title}\n        </h3>\n        {drop.description && (\n          <p className=\"text-gray-600 text-sm leading-relaxed line-clamp-2\">{drop.description}</p>\n        )}\n      </div>\n\n      {/* Status and Difficulty Badges */}\n      <div className=\"flex items-center space-x-2 mb-4\">\n        <span className={`px-3 py-1 rounded-full text-xs font-medium border ${getStatusColor(drop.status)}`}>\n          {drop.status.charAt(0).toUpperCase() + drop.status.slice(1)}\n        </span>\n            <span className={`px-3 py-1 rounded-full text-xs font-medium border ${getDifficultyColor(drop.difficulty)}`}>\n              {formatLabel(drop.difficulty)}\n            </span>\n        {drop.is_proof_drop && (\n          <span className=\"px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200\">\n            Proof Drop\n          </span>\n        )}\n        {drop.is_paid_drop && (\n          <span className=\"px-3 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800 border border-emerald-200\">\n            Paid Drop\n          </span>\n        )}\n      </div>\n\n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4\">\n        <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n          <div className=\"flex items-center justify-center space-x-1 mb-1\">\n            <Target className=\"w-4 h-4 text-orange-500\" />\n            <span className=\"text-xs text-gray-500\">Cost</span>\n          </div>\n          <div className=\"text-lg font-bold text-gray-900\">{drop.key_cost}</div>\n          <div className=\"text-xs text-gray-500\">keys</div>\n        </div>\n\n        <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n          <div className=\"flex items-center justify-center space-x-1 mb-1\">\n            <Star className=\"w-4 h-4 text-yellow-500\" />\n            <span className=\"text-xs text-gray-500\">Reward</span>\n          </div>\n          <div className=\"text-lg font-bold text-purple-600\">{drop.gem_reward_base}</div>\n          <div className=\"text-xs text-gray-500\">gems</div>\n        </div>\n\n        <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n          <div className=\"flex items-center justify-center space-x-1 mb-1\">\n            <TrendingUp className=\"w-4 h-4 text-green-500\" />\n            <span className=\"text-xs text-gray-500\">ROI</span>\n          </div>\n          <div className=\"text-lg font-bold text-green-600\">{getRewardPerKey()}x</div>\n          <div className=\"text-xs text-gray-500\">per key</div>\n        </div>\n\n        <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n          <div className=\"flex items-center justify-center space-x-1 mb-1\">\n            <Users className=\"w-4 h-4 text-blue-500\" />\n            <span className=\"text-xs text-gray-500\">Participants</span>\n          </div>\n          <div className=\"text-lg font-bold text-blue-600\">{drop.current_participants}</div>\n          <div className=\"text-xs text-gray-500\">joined</div>\n        </div>\n      </div>\n\n      {/* Deadline and Requirements */}\n      <div className=\"flex items-center justify-between mb-4 text-sm text-gray-600\">\n        <div className=\"flex items-center space-x-1\">\n          <Clock className=\"w-4 h-4\" />\n          <span>{drop.deadline_at ? formatDeadline(drop.deadline_at) : 'No deadline'}</span>\n        </div>\n\n        {drop.requirements && (\n          <div className=\"text-xs\">\n            Requirements: {drop.requirements.length > 30\n              ? drop.requirements.substring(0, 30) + '...'\n              : drop.requirements}\n          </div>\n        )}\n      </div>\n\n      {/* Apply Button */}\n      <div className=\"flex items-center justify-between pt-4 border-t border-gray-100\">\n        <div className=\"flex items-center space-x-2 text-sm text-gray-500\">\n          <Calendar className=\"w-4 h-4\" />\n          <span>Created {new Date(drop.created_at).toLocaleDateString()}</span>\n        </div>\n\n        <button\n          onClick={(e) => {\n            e.stopPropagation();\n            onApply?.(drop);\n          }}\n          className={`px-6 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-2 ${\n            drop.status?.toLowerCase() === 'active'\n              ? 'bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white hover:shadow-lg hover:-translate-y-0.5'\n              : 'bg-gray-100 text-gray-500 cursor-not-allowed'\n          }`}\n          disabled={drop.status?.toLowerCase() !== 'active'}\n        >\n          {drop.status?.toLowerCase() === 'active' ? (\n            <>\n              <span>Apply Now</span>\n              <Target className=\"w-4 h-4\" />\n            </>\n          ) : (\n            <>\n              <span>Not Available</span>\n              <Clock className=\"w-4 h-4\" />\n            </>\n          )}\n        </button>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { TrendingUp, Plus, RefreshCw } from 'lucide-react';\n\nconst PersonalizedEmptyState: React.FC = () => {\n  const handleRefresh = () => {\n    window.location.reload();\n  };\n\n  return (\n    <div className=\"text-center py-12\">\n      <div className=\"w-24 h-24 bg-gradient-to-br from-orange-100 to-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n        <TrendingUp className=\"w-12 h-12 text-orange-500\" />\n      </div>\n      <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n        No personalized content yet\n      </h3>\n      <p className=\"text-gray-600 mb-6 max-w-md mx-auto\">\n        We're building your personalized feed based on your interests and activity.\n        Check back soon or explore other content in the meantime!\n      </p>\n      <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n        <button\n          onClick={() => window.location.href = '/create'}\n          className=\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 mx-auto sm:mx-0\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          <span>Create Content</span>\n        </button>\n        <button\n          onClick={handleRefresh}\n          className=\"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center space-x-2 mx-auto sm:mx-0\"\n        >\n          <RefreshCw className=\"w-4 h-4\" />\n          <span>Refresh Feed</span>\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default PersonalizedEmptyState;\n","import { useState, useEffect } from 'react';\nimport { X, TrendingUp, DollarSign, Target, Clock, AlertCircle } from 'lucide-react';\n\ninterface SocialForecast {\n  id: number;\n  creator_name: string;\n  platform: string;\n  content_url: string;\n  content_title?: string;\n  forecast_type: string;\n  target_value: number;\n  current_value: number;\n  odds: number;\n  pool_size: number;\n  creator_initial_amount: number;\n  creator_side: string;\n  expires_at: string;\n}\n\ninterface PlaceForecastModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  forecast: SocialForecast;\n  onPredictionPlaced: () => void;\n}\n\nexport default function PlaceForecastModal({ isOpen, onClose, forecast, onPredictionPlaced }: PlaceForecastModalProps) {\n  const [predictionSide, setPredictionSide] = useState<'over' | 'under'>('over');\n  const [predictionAmount, setPredictionAmount] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState('');\n  const [userWallet, setUserWallet] = useState({ balance: 0 });\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchUserWallet();\n    }\n  }, [isOpen]);\n\n  const fetchUserWallet = async () => {\n    try {\n      const response = await fetch('/api/users/me/wallets');\n      if (response.ok) {\n        const wallets = await response.json();\n        const usdWallet = wallets.find((w: any) => w.currency_type === 'USD');\n        setUserWallet({ balance: usdWallet?.balance || 0 });\n      }\n    } catch (error) {\n      console.error('Failed to fetch wallet:', error);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n    setError('');\n\n    try {\n      const response = await fetch(`/api/social-forecasts/${forecast.id}/predict`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          prediction_amount: parseFloat(predictionAmount),\n          prediction_side: predictionSide,\n        }),\n      });\n\n      if (response.ok) {\n        onPredictionPlaced();\n        onClose();\n        setPredictionAmount('');\n        setPredictionSide('over');\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Failed to place prediction');\n      }\n    } catch (error) {\n      setError('Failed to place prediction');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const potentialPayout = predictionAmount ? \n    (parseFloat(predictionAmount) * forecast.odds).toFixed(2) : '0';\n\n  const formatTimeRemaining = (expiresAt: string) => {\n    const now = new Date();\n    const expires = new Date(expiresAt);\n    const diff = expires.getTime() - now.getTime();\n    \n    if (diff <= 0) return 'Expired';\n    \n    const hours = Math.floor(diff / (1000 * 60 * 60));\n    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\n    \n    if (hours > 24) {\n      const days = Math.floor(hours / 24);\n      return `${days}d ${hours % 24}h`;\n    }\n    \n    return `${hours}h ${minutes}m`;\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-lg max-w-lg w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"text-xl font-semibold text-gray-900 flex items-center\">\n              <TrendingUp className=\"w-5 h-5 mr-2 text-blue-600\" />\n              Make Your Prediction\n            </h2>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6\">\n          {/* Forecast Summary */}\n          <div className=\"bg-gray-50 rounded-lg p-4 mb-6\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <h3 className=\"font-medium text-gray-900\">Forecast Details</h3>\n              <span className=\"text-sm text-gray-500\">{forecast.platform}</span>\n            </div>\n            \n            {forecast.content_title && (\n              <p className=\"text-sm text-gray-700 mb-2\">{forecast.content_title}</p>\n            )}\n            \n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\n              <div>\n                <p className=\"text-gray-500\">Metric</p>\n                <p className=\"font-medium flex items-center\">\n                  <Target className=\"w-4 h-4 mr-1 text-blue-600\" />\n                  {forecast.forecast_type} {forecast.target_value.toLocaleString()}\n                </p>\n              </div>\n              <div>\n                <p className=\"text-gray-500\">Current Pool</p>\n                <p className=\"font-medium text-green-600\">${forecast.pool_size.toFixed(2)}</p>\n              </div>\n              <div>\n                <p className=\"text-gray-500\">Odds</p>\n                <p className=\"font-medium text-blue-600\">{forecast.odds}x payout</p>\n              </div>\n              <div>\n                <p className=\"text-gray-500\">Time Left</p>\n                <p className=\"font-medium flex items-center\">\n                  <Clock className=\"w-4 h-4 mr-1 text-gray-400\" />\n                  {formatTimeRemaining(forecast.expires_at)}\n                </p>\n              </div>\n            </div>\n\n            <div className=\"mt-3 pt-3 border-t border-gray-200\">\n              <p className=\"text-xs text-gray-500 mb-1\">Creator's Prediction</p>\n              <p className=\"text-sm font-medium text-blue-600\">\n                {forecast.creator_side.toUpperCase()} • ${forecast.creator_initial_amount.toFixed(2)} staked\n              </p>\n            </div>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {error && (\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-3 flex items-center\">\n                <AlertCircle className=\"w-4 h-4 text-red-600 mr-2\" />\n                <p className=\"text-red-600 text-sm\">{error}</p>\n              </div>\n            )}\n\n            {/* Prediction Side Selection */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n                Your Prediction\n              </label>\n              <div className=\"grid grid-cols-2 gap-3\">\n                <button\n                  type=\"button\"\n                  onClick={() => setPredictionSide('over')}\n                  className={`p-4 rounded-lg border-2 transition-colors ${\n                    predictionSide === 'over'\n                      ? 'border-green-500 bg-green-50 text-green-700'\n                      : 'border-gray-200 bg-white text-gray-700 hover:border-green-300'\n                  }`}\n                >\n                  <div className=\"text-center\">\n                    <p className=\"font-semibold\">OVER</p>\n                    <p className=\"text-xs mt-1\">Will exceed {forecast.target_value.toLocaleString()}</p>\n                  </div>\n                </button>\n                \n                <button\n                  type=\"button\"\n                  onClick={() => setPredictionSide('under')}\n                  className={`p-4 rounded-lg border-2 transition-colors ${\n                    predictionSide === 'under'\n                      ? 'border-red-500 bg-red-50 text-red-700'\n                      : 'border-gray-200 bg-white text-gray-700 hover:border-red-300'\n                  }`}\n                >\n                  <div className=\"text-center\">\n                    <p className=\"font-semibold\">UNDER</p>\n                    <p className=\"text-xs mt-1\">Will not reach {forecast.target_value.toLocaleString()}</p>\n                  </div>\n                </button>\n              </div>\n            </div>\n\n            {/* Amount Input */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                <DollarSign className=\"w-4 h-4 inline mr-1\" />\n                Prediction Amount (USD)\n              </label>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                placeholder=\"Enter amount\"\n                value={predictionAmount}\n                onChange={(e) => setPredictionAmount(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                required\n                min=\"1\"\n                max={userWallet.balance}\n              />\n              <div className=\"flex justify-between text-sm text-gray-500 mt-1\">\n                <span>Available: ${userWallet.balance.toFixed(2)}</span>\n                <span>Min: $1.00</span>\n              </div>\n            </div>\n\n            {/* Quick Amount Buttons */}\n            <div className=\"grid grid-cols-4 gap-2\">\n              {[5, 10, 25, 50].map((amount) => (\n                <button\n                  key={amount}\n                  type=\"button\"\n                  onClick={() => setPredictionAmount(amount.toString())}\n                  disabled={amount > userWallet.balance}\n                  className=\"py-2 px-3 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  ${amount}\n                </button>\n              ))}\n            </div>\n\n            {/* Payout Preview */}\n            {predictionAmount && (\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                <h4 className=\"font-medium text-gray-900 mb-2\">Prediction Summary</h4>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Your prediction:</span>\n                    <span className=\"font-medium text-blue-600\">\n                      {predictionSide.toUpperCase()}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Amount staked:</span>\n                    <span className=\"font-medium\">${predictionAmount}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Potential payout:</span>\n                    <span className=\"font-medium text-green-600\">${potentialPayout}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Potential profit:</span>\n                    <span className=\"font-medium text-green-600\">\n                      ${(parseFloat(potentialPayout) - parseFloat(predictionAmount)).toFixed(2)}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Submit Button */}\n            <div className=\"flex justify-end space-x-3 pt-4 border-t border-gray-200\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                disabled={isSubmitting || !predictionAmount || parseFloat(predictionAmount) > userWallet.balance}\n                className={`px-6 py-2 rounded-lg font-medium transition-colors ${\n                  predictionSide === 'over'\n                    ? 'bg-green-600 hover:bg-green-700 text-white'\n                    : 'bg-red-600 hover:bg-red-700 text-white'\n                } disabled:opacity-50 disabled:cursor-not-allowed`}\n              >\n                {isSubmitting ? 'Placing...' : `Predict ${predictionSide.toUpperCase()} $${predictionAmount || '0'}`}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { ContentPieceType } from '@/shared/types';\nimport { X, Gift, Coins } from 'lucide-react';\n\ninterface TipModalProps {\n  content: ContentPieceType;\n  isOpen: boolean;\n  onClose: () => void;\n  onTip: (content: ContentPieceType, amount: number) => Promise<void>;\n}\n\nexport default function TipModal({ content, isOpen, onClose, onTip }: TipModalProps) {\n  const [tipAmount, setTipAmount] = useState<number>(1);\n  const [loading, setLoading] = useState(false);\n\n  const tipOptions = [1, 5, 10, 25, 50, 100];\n\n  const handleTip = async () => {\n    if (tipAmount < 1) return;\n\n    setLoading(true);\n    try {\n      await onTip(content, tipAmount);\n      onClose();\n      setTipAmount(1);\n    } catch (error) {\n      console.error('Failed to send tip:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl max-w-md w-full\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full flex items-center justify-center text-white font-semibold text-sm\">\n              {(content.creator_name || content.creator_username || 'U')[0].toUpperCase()}\n            </div>\n            <div>\n              <h2 className=\"text-xl font-bold text-gray-900\">Tip Creator</h2>\n              <p className=\"text-sm text-gray-600\">Support {content.creator_name || content.creator_username || 'this creator'}</p>\n            </div>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6\">\n          <div className=\"mb-6\">\n            <h3 className=\"font-semibold text-gray-900 mb-2\">Select Tip Amount</h3>\n            <p className=\"text-sm text-gray-600 mb-4\">Choose how many gems you'd like to tip</p>\n\n            {/* Quick Select Options */}\n            <div className=\"grid grid-cols-3 gap-2 mb-4\">\n              {tipOptions.map((amount) => (\n                <button\n                  key={amount}\n                  onClick={() => setTipAmount(amount)}\n                  className={`py-2 px-3 rounded-lg text-sm font-medium transition-all duration-200 ${\n                    tipAmount === amount\n                      ? 'bg-purple-500 text-white ring-2 ring-purple-200'\n                      : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                  }`}\n                >\n                  <div className=\"flex items-center justify-center space-x-1\">\n                    <Coins className=\"w-4 h-4\" />\n                    <span>{amount}</span>\n                  </div>\n                </button>\n              ))}\n            </div>\n\n            {/* Custom Amount Input */}\n            <div className=\"flex items-center space-x-2\">\n              <div className=\"flex-1\">\n                <input\n                  type=\"number\"\n                  min=\"1\"\n                  max=\"1000\"\n                  value={tipAmount}\n                  onChange={(e) => setTipAmount(Math.max(1, parseInt(e.target.value) || 1))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500\"\n                  placeholder=\"Custom amount\"\n                />\n              </div>\n              <div className=\"flex items-center space-x-1 text-gray-500\">\n                <Coins className=\"w-4 h-4\" />\n                <span className=\"text-sm\">gems</span>\n              </div>\n            </div>\n          </div>\n\n          {/* Preview */}\n          <div className=\"bg-gray-50 rounded-lg p-4 mb-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">You're tipping</p>\n                <p className=\"text-lg font-semibold text-gray-900\">\n                  <Coins className=\"w-5 h-5 inline mr-1 text-purple-500\" />\n                  {tipAmount} gems\n                </p>\n              </div>\n              <div className=\"text-right\">\n                <p className=\"text-xs text-gray-500\">Creator receives</p>\n                <p className=\"text-sm font-medium text-gray-900\">${(tipAmount * 0.01).toFixed(2)}</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"flex space-x-3\">\n            <button\n              onClick={onClose}\n              className=\"flex-1 py-2 px-4 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={handleTip}\n              disabled={loading || tipAmount < 1}\n              className=\"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-2 px-4 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2\"\n            >\n              {loading ? (\n                <>\n                  <div className=\"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full\"></div>\n                  <span>Sending...</span>\n                </>\n              ) : (\n                <>\n                  <Gift className=\"w-4 h-4\" />\n                  <span>Send Tip</span>\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../hooks/useAuth';\nimport { API_BASE_URL } from '../config';\nimport { \n  Settings,\n  LogOut,\n  User,\n  ArrowRight,\n  TrendingUp,\n  DollarSign,\n  Star,\n  Zap,\n  Crown,\n  Activity,\n  Coins,\n  Diamond,\n  Bookmark,\n  Target,\n  Flame\n} from 'lucide-react';\nimport BuySharesModal from '@/react-app/components/BuySharesModal';\nimport ShareContentModal from '@/react-app/components/ShareContentModal';\nimport ExternalMoveModal from '@/react-app/components/ExternalMoveModal';\nimport EditContentModal from '@/react-app/components/EditContentModal';\nimport ConfirmationModal from '@/react-app/components/ConfirmationModal';\nimport ShareModal from '@/react-app/components/ShareModal';\nimport SavedContentModal from '@/react-app/components/SavedContentModal';\nimport ContentCard from '@/react-app/components/ContentCard';\nimport EnhancedDropCard from '@/react-app/components/EnhancedDropCard';\nimport PersonalizedEmptyState from '@/react-app/components/PersonalizedEmptyState';\nimport PlaceForecastModal from '@/react-app/components/PlaceForecastModal';\nimport TipModal from '@/react-app/components/TipModal';\n\nimport { ContentPieceType, DropType, WalletType, UserType } from '@/shared/types';\n\nexport default function HomeFeed() {\n  const { user, logout } = useAuth();\n  const navigate = useNavigate();\n  const [contentFeed, setContentFeed] = useState<ContentPieceType[]>([]);\n  const [dropFeed, setDropFeed] = useState<DropType[]>([]);\n  const [wallets, setWallets] = useState<WalletType[]>([]);\n  const [userData, setUserData] = useState<UserType | null>(null);\n  const [, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState<'for-you' | 'social' | 'drops'>('for-you');\n  const [sponsoredContent, setSponsoredContent] = useState<any[]>([]);\n  const [buyModalOpen, setBuyModalOpen] = useState(false);\n  const [shareModalOpen, setShareModalOpen] = useState(false);\n  const [externalMoveModalOpen, setExternalMoveModalOpen] = useState(false);\n  const [, setForecastModalOpen] = useState(false);\n  const [selectedContent, setSelectedContent] = useState<ContentPieceType | null>(null);\n  const [shareContentData, setShareContentData] = useState<{ id: number; title: string } | null>(null);\n  const [externalMoveContentData, setExternalMoveContentData] = useState<{ id: number; title: string; platform: string; url: string } | null>(null);\n  const [editContentModalOpen, setEditContentModalOpen] = useState(false);\n  const [editContentData, setEditContentData] = useState<ContentPieceType | null>(null);\n  const [deleteConfirmModalOpen, setDeleteConfirmModalOpen] = useState(false);\n  const [contentToDelete, setContentToDelete] = useState<ContentPieceType | null>(null);\n  const [contentShareModalOpen, setContentShareModalOpen] = useState(false);\n  const [shareModalContent, setShareModalContent] = useState<{ id: number; title: string } | null>(null);\n  const [savedContentModalOpen, setSavedContentModalOpen] = useState(false);\n  const [tipModalOpen, setTipModalOpen] = useState(false);\n  const [tipContent, setTipContent] = useState<ContentPieceType | null>(null);\n  const [predictModalOpen, setPredictModalOpen] = useState(false);\n  const [predictContent, setPredictContent] = useState<ContentPieceType | null>(null);\n  const [showUserMenu, setShowUserMenu] = useState(false);\n\n  const withApiBase = (path: string) => `${API_BASE_URL}${path}`;\n\n  const profileSlug =\n    userData?.username ||\n    (userData?.email ? userData.email.split('@')[0] : undefined) ||\n    (user?.username ? String(user.username) : undefined) ||\n    (user?.email ? user.email.split('@')[0] : undefined) ||\n    'me';\n\n  const profilePath = `/profile/${encodeURIComponent(profileSlug)}`;\n\n  useEffect(() => {\n    fetchFeeds();\n    fetchUserData();\n\n    // Close user menu when clicking outside\n    const handleClickOutside = (event: MouseEvent) => {\n      if (showUserMenu && !(event.target as Element).closest('.user-menu')) {\n        setShowUserMenu(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [showUserMenu]);\n\n  const openContentDetail = (content: ContentPieceType) => {\n    navigate(`/content/${content.id}`);\n  };\n\n  const handleLogout = async () => {\n    try {\n      const authToken = localStorage.getItem('authToken');\n      if (authToken) {\n        await fetch(withApiBase('/api/auth/logout'), {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${authToken}`,\n            'Content-Type': 'application/json'\n          }\n        });\n      }\n    } catch (error) {\n      console.error('Logout error:', error);\n    } finally {\n      localStorage.removeItem('authToken');\n      navigate('/auth');\n    }\n  };\n\n  const fetchFeeds = async () => {\n    try {\n      const authToken = localStorage.getItem('authToken');\n      const headers: HeadersInit = {\n        'Content-Type': 'application/json',\n      };\n\n      if (authToken) {\n        headers['Authorization'] = `Bearer ${authToken}`;\n      }\n\n      const [contentResponse, dropsResponse, walletsResponse, sponsoredResponse] = await Promise.all([\n        fetch(withApiBase('/api/content'), { headers, credentials: 'include' }),\n        fetch(withApiBase('/api/drops?limit=10'), { headers, credentials: 'include' }),\n        fetch(withApiBase('/api/users/me/wallets'), { headers, credentials: 'include' }),\n        fetch(withApiBase('/api/content/sponsored'), { headers, credentials: 'include' })\n      ]);\n\n      if (contentResponse.ok) {\n        const contentData = await contentResponse.json();\n        if (Array.isArray(contentData)) {\n          setContentFeed(contentData);\n        } else {\n          console.error('Content data is not an array:', contentData);\n          setContentFeed([]);\n        }\n      } else {\n        console.error('Content fetch failed:', contentResponse.status);\n        setContentFeed([]);\n      }\n\n      if (dropsResponse.ok) {\n        const dropsData = await dropsResponse.json();\n        if (Array.isArray(dropsData)) {\n          setDropFeed(dropsData.slice(0, 5));\n        } else {\n          setDropFeed([]);\n        }\n      } else {\n        setDropFeed([]);\n      }\n\n      if (walletsResponse.ok) {\n        const walletsData = await walletsResponse.json();\n        setWallets(Array.isArray(walletsData) ? walletsData : []);\n      } else {\n        setWallets([]);\n      }\n\n      if (sponsoredResponse.ok) {\n        const sponsoredData = await sponsoredResponse.json();\n        setSponsoredContent(Array.isArray(sponsoredData) ? sponsoredData : []);\n      } else {\n        setSponsoredContent([]);\n      }\n    } catch (error) {\n      console.error('Failed to fetch feeds:', error);\n      setContentFeed([]);\n      setDropFeed([]);\n      setWallets([]);\n      setSponsoredContent([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchUserData = async () => {\n    if (!user) {\n      console.log('No authenticated user, skipping user data fetch');\n      return;\n    }\n\n    const authToken = localStorage.getItem('authToken');\n    if (!authToken) {\n      console.log('No auth token found, redirecting to login');\n      window.location.href = '/auth';\n      return;\n    }\n\n    try {\n      const headers: HeadersInit = {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${authToken}`,\n      };\n\n      const response = await fetch(withApiBase('/api/auth/profile'), { headers, credentials: 'include' });\n      if (response.ok) {\n        const data = await response.json();\n        setUserData(data.user);\n      } else {\n        console.error('Failed to fetch user data:', response.status, response.statusText);\n        // If authentication fails, redirect to login\n        if (response.status === 401 || response.status === 500) {\n          localStorage.removeItem('authToken');\n          window.location.href = '/auth';\n        }\n      }\n    } catch (error) {\n      console.error('Failed to fetch user data:', error);\n      // On network error, don't redirect but log the error\n    }\n  };\n\n  const handleSocialAction = async (action: string, contentId?: number) => {\n    try {\n      const response = await fetch('/api/users/social-action', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({\n          action_type: action,\n          reference_id: contentId,\n          reference_type: 'content'\n        })\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        showPointsNotification(data);\n        fetchUserData(); // Refresh user data\n      }\n    } catch (error) {\n      console.error(`Failed to record ${action} action:`, error);\n    }\n  };\n\n  const showPointsNotification = (data: any) => {\n    const notification = document.createElement('div');\n    notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-pulse';\n    notification.innerHTML = `\n      <div class=\"flex items-center space-x-2\">\n        <span>+${data.points_earned} points!</span>\n        <span class=\"text-xs\">(${data.multiplier.toFixed(1)}x multiplier)</span>\n      </div>\n    `;\n    document.body.appendChild(notification);\n    setTimeout(() => {\n      if (document.body.contains(notification)) {\n        document.body.removeChild(notification);\n      }\n    }, 3000);\n  };\n\n  const handleBuyShares = async (content: ContentPieceType, sharesCount: number) => {\n    try {\n      const response = await fetch('/api/content/buy-shares', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({ content_id: content.id, shares_count: sharesCount })\n      });\n\n      if (response.ok) {\n        await fetchFeeds(); // Refresh data after purchase\n      } else {\n        throw new Error('Purchase failed');\n      }\n    } catch (error) {\n      console.error('Failed to buy shares:', error);\n      throw error;\n    }\n  };\n\n  const handleTip = async (content: ContentPieceType, amount: number) => {\n    try {\n      const response = await fetch('/api/content/tip', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({ content_id: content.id, tip_amount: amount })\n      });\n\n      if (response.ok) {\n        // Show success notification\n        const notification = document.createElement('div');\n        notification.className = 'fixed top-4 right-4 bg-purple-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-bounce';\n        notification.innerHTML = `\n          <div class=\"flex items-center space-x-2\">\n            <span class=\"text-lg\">💎</span>\n            <div>\n              <div class=\"font-semibold\">Tip sent!</div>\n              <div class=\"text-xs opacity-90\">Tipped ${amount} gems to ${content.creator_name || content.creator_username || 'creator'}</div>\n            </div>\n          </div>\n        `;\n        document.body.appendChild(notification);\n        setTimeout(() => {\n          if (document.body.contains(notification)) {\n            document.body.removeChild(notification);\n          }\n        }, 4000);\n\n        fetchUserData(); // Refresh user balance\n      } else {\n        throw new Error('Tip failed');\n      }\n    } catch (error) {\n      console.error('Failed to send tip:', error);\n      throw error;\n    }\n  };\n\n  const openBuyModal = (content: ContentPieceType) => {\n    setSelectedContent(content);\n    setBuyModalOpen(true);\n  };\n\n  const openShareModal = (content: ContentPieceType) => {\n    setShareModalContent({ id: content.id, title: content.title });\n    setContentShareModalOpen(true);\n  };\n\n  const openSavedContentModal = () => {\n    setSavedContentModalOpen(true);\n  };\n\n  const openExternalMoveModal = (content: ContentPieceType) => {\n    setExternalMoveContentData({\n      id: content.id,\n      title: content.title,\n      platform: content.platform,\n      url: content.platform_url\n    });\n    setExternalMoveModalOpen(true);\n  };\n\n  const openTipModal = (content: ContentPieceType) => {\n    setTipContent(content);\n    setTipModalOpen(true);\n  };\n\n  const openEditModal = (content: ContentPieceType) => {\n    setEditContentData(content);\n    setEditContentModalOpen(true);\n  };\n\n  const openPredictModal = (content: ContentPieceType) => {\n    setPredictContent(content);\n    setPredictModalOpen(true);\n  };\n\n  const openDeleteConfirm = (content: ContentPieceType) => {\n    setContentToDelete(content);\n    setDeleteConfirmModalOpen(true);\n  };\n\n  const handleDeleteConfirm = async () => {\n    if (!contentToDelete) return;\n\n    try {\n      const response = await fetch(`/api/content/${contentToDelete.id}`, {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n\n      if (response.ok) {\n        // Remove content from local state\n        setContentFeed(prev => prev.filter(item => item.id !== contentToDelete.id));\n        setDeleteConfirmModalOpen(false);\n        setContentToDelete(null);\n      } else {\n        const errorData = await response.json();\n        alert(errorData.error || 'Failed to delete content');\n      }\n    } catch (error) {\n      console.error('Error deleting content:', error);\n      alert('Failed to delete content');\n    }\n  };\n\n  const getTierIcon = (tier: string) => {\n    switch (tier) {\n      case 'super': return <Crown className=\"w-4 h-4 text-yellow-600\" />;\n      case 'premium': return <Star className=\"w-4 h-4 text-purple-600\" />;\n      default: return <Zap className=\"w-4 h-4 text-gray-600\" />;\n    }\n  };\n\n  const getTierMultiplier = (tier: string) => {\n    switch (tier) {\n      case 'super': return 2.0;\n      case 'premium': return 1.5;\n      default: return 1.0;\n    }\n  };\n\n  const getSmartCTA = () => {\n    if (!userData) return null;\n\n    // Smart CTA logic based on user state\n    if (!userData.master_key_activated_at) {\n      return {\n        text: \"Activate Master Key\",\n        subtext: \"Complete a Proof Drop to unlock premium features\",\n        action: () => window.location.href = '/earn?type=proof',\n        color: \"from-orange-500 to-red-500\",\n        icon: <Target className=\"w-5 h-5\" />\n      };\n    }\n\n    if (userData.points_streak_days === 0) {\n      return {\n        text: \"Start Your Streak\",\n        subtext: \"Engage with content today to begin earning streaks\",\n        action: () => setActiveTab('social'),\n        color: \"from-blue-500 to-purple-500\",\n        icon: <Flame className=\"w-5 h-5\" />\n      };\n    }\n\n    if (userData.gems_balance < 10) {\n      return {\n        text: \"Get More Gems\",\n        subtext: \"Purchase gems to access paid drops and predictions\",\n        action: () => window.location.href = '/invest/portfolio',\n        color: \"from-purple-500 to-pink-500\",\n        icon: <Diamond className=\"w-5 h-5\" />\n      };\n    }\n\n    return {\n      text: \"Explore Growth Hub\",\n      subtext: \"Stake gems, fund projects, and secure your earnings\",\n      action: () => window.location.href = '/growth-hub',\n      color: \"from-green-500 to-emerald-500\",\n      icon: <TrendingUp className=\"w-5 h-5\" />\n    };\n  };\n\n  const getForYouFeed = () => {\n    // Mix content and drops in a personalized order\n    const mixedFeed = [];\n\n    // Add sponsored content first (highest priority)\n    sponsoredContent.forEach(content => {\n      mixedFeed.push({ type: 'content', data: content, isSponsored: true });\n    });\n\n    // Add high-value opportunities\n    const highValueDrops = dropFeed.filter(drop => drop.gem_reward_base >= 50);\n    const trendingContent = contentFeed.filter(content =>\n      content.available_shares > 0 &&\n      !sponsoredContent.some(sponsored => sponsored.id === content.id)\n    );\n\n    const prioritizedContent = trendingContent.length > 0 ? trendingContent : contentFeed;\n    const prioritizedDrops = highValueDrops.length > 0 ? highValueDrops : dropFeed;\n\n    // Interleave content and drops\n    for (let i = 0; i < Math.max(prioritizedContent.length, prioritizedDrops.length); i++) {\n      if (prioritizedContent[i]) {\n        mixedFeed.push({ type: 'content', data: prioritizedContent[i] });\n      }\n      if (prioritizedDrops[i]) {\n        mixedFeed.push({ type: 'drop', data: prioritizedDrops[i] });\n      }\n    }\n\n    if (mixedFeed.length === 0) {\n      return [\n        ...sponsoredContent.map(content => ({ type: 'content', data: content, isSponsored: true })),\n        ...contentFeed.slice(0, 5).map(content => ({ type: 'content', data: content })),\n        ...dropFeed.slice(0, 5).map(drop => ({ type: 'drop', data: drop })),\n      ].slice(0, 10);\n    }\n\n    return mixedFeed.slice(0, 10); // Limit to 10 items for better UX\n  };\n\n  const smartCTA = getSmartCTA();\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Top spacing to account for fixed header */}\n      <div className=\"h-16\"></div>\n      \n      {/* User dropdown (moved from nav bar) */}\n      <div className=\"fixed top-4 right-4 z-50\">\n        <div className=\"relative\">\n          <button\n            onClick={() => setShowUserMenu(!showUserMenu)}\n            className=\"user-menu flex items-center space-x-2 p-2 rounded-lg bg-white shadow-md hover:shadow-lg transition-all\"\n          >\n            <div className=\"w-8 h-8 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center text-white font-semibold text-sm\">\n              {(userData?.display_name || userData?.username || user?.email || 'U')[0].toUpperCase()}\n            </div>\n            <ArrowRight className={`w-4 h-4 text-gray-600 transition-transform duration-200 ${showUserMenu ? 'rotate-90' : ''}`} />\n          </button>\n\n          {/* User Dropdown Menu */}\n          {showUserMenu && (\n            <div className=\"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50\">\n              <button\n                onClick={() => {\n                  navigate(profilePath);\n                  setShowUserMenu(false);\n                }}\n                className=\"w-full flex items-center space-x-3 px-4 py-2 text-left text-gray-700 hover:bg-gray-100 transition-colors\"\n              >\n                <User className=\"w-4 h-4\" />\n                <span>Profile</span>\n              </button>\n\n              <button\n                onClick={() => {\n                  navigate('/growth-hub');\n                  setShowUserMenu(false);\n                }}\n                className=\"w-full flex items-center space-x-3 px-4 py-2 text-left text-gray-700 hover:bg-gray-100 transition-colors\"\n              >\n                <TrendingUp className=\"w-4 h-4\" />\n                <span>Growth Hub</span>\n              </button>\n\n              <button\n                onClick={() => {\n                  navigate('/advertiser');\n                  setShowUserMenu(false);\n                }}\n                className=\"w-full flex items-center space-x-3 px-4 py-2 text-left text-gray-700 hover:bg-gray-100 transition-colors\"\n              >\n                <Settings className=\"w-4 h-4\" />\n                <span>Advertiser</span>\n              </button>\n\n              <hr className=\"my-1 border-gray-200\" />\n\n              <button\n                onClick={() => {\n                  handleLogout();\n                  setShowUserMenu(false);\n                }}\n                className=\"w-full flex items-center space-x-3 px-4 py-2 text-left text-red-600 hover:bg-red-50 transition-colors\"\n              >\n                <LogOut className=\"w-4 h-4\" />\n                <span>Logout</span>\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Main Dashboard Content */}\n      <div className=\"max-w-4xl mx-auto space-y-6 p-4\">\n        {/* Personalized Dashboard Header */}\n        <div className=\"bg-gradient-to-br from-orange-500 via-red-500 to-pink-500 rounded-2xl p-6 text-white relative overflow-hidden shadow-lg\">\n          {/* Background Pattern */}\n          <div className=\"absolute inset-0 opacity-20\" style={{\n            backgroundImage: `url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='white' fill-opacity='0.1'%3E%3Cpath d='M30 30c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/svg%3E\")`,\n          }}></div>\n\n          <div className=\"relative z-10\">\n            <div className=\"flex items-start justify-between mb-6\">\n              <div>\n                <h1 className=\"text-3xl font-bold mb-2 leading-tight\">\n                  Welcome back, {user?.google_user_data?.given_name || 'Creator'}! 👋\n                </h1>\n                <p className=\"text-orange-100 text-base\">\n                  Ready to turn your influence into income?\n                </p>\n              </div>\n              {userData && (\n                <div className=\"text-right\">\n                  <div className=\"flex items-center space-x-2 justify-end mb-1\">\n                    {getTierIcon(userData.user_tier)}\n                    <span className=\"text-base font-semibold capitalize\">\n                      {userData.user_tier}\n                    </span>\n                  </div>\n                  <div className=\"text-sm text-orange-200\">\n                    {getTierMultiplier(userData.user_tier)}x multiplier\n                  </div>\n                  {userData.points_streak_days > 0 && (\n                    <div className=\"flex items-center justify-end space-x-1 mt-1\">\n                      <Flame className=\"w-4 h-4 text-orange-300\" />\n                      <span className=\"text-sm text-orange-200\">\n                        {userData.points_streak_days} day streak\n                      </span>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n\n            {/* Quick Stats Grid */}\n            {userData && (\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\n                {[\n                  { value: (userData.points_balance || 0).toLocaleString(), label: 'Points', icon: <Coins className=\"w-5 h-5\" />, color: 'text-blue-200' },\n                  { value: userData.keys_balance || 0, label: 'Keys', icon: <Target className=\"w-5 h-5\" />, color: 'text-orange-200' },\n                  { value: (userData.gems_balance || 0).toFixed(1), label: 'Gems', icon: <Diamond className=\"w-5 h-5\" />, color: 'text-purple-200' },\n                  { value: 'View', label: 'Saved', icon: <Bookmark className=\"w-5 h-5\" />, color: 'text-green-200', action: openSavedContentModal }\n                ].map((stat, index) => (\n                  <div\n                    key={index}\n                    className={`bg-white/10 backdrop-blur-sm rounded-xl p-4 text-center hover:bg-white/20 transition-all duration-200 cursor-pointer hover:-translate-y-1 ${stat.action ? 'cursor-pointer' : ''}`}\n                    onClick={stat.action || undefined}\n                  >\n                    <div className=\"flex items-center justify-center space-x-2 mb-2\">\n                      <span className={stat.color}>{stat.icon}</span>\n                      <span className=\"text-sm text-white/90 font-medium\">{stat.label}</span>\n                    </div>\n                    <p className=\"text-xl font-bold text-white\">{stat.value}</p>\n                  </div>\n                ))}\n              </div>\n            )}\n\n            {/* Smart CTA */}\n            {smartCTA && (\n              <button\n                onClick={smartCTA.action}\n                className={`w-full bg-gradient-to-r ${smartCTA.color} hover:shadow-xl text-white rounded-xl p-5 transition-all duration-200 hover:-translate-y-1 hover:scale-[1.02]`}\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"text-left\">\n                    <div className=\"flex items-center space-x-3 mb-2\">\n                      {smartCTA.icon}\n                      <span className=\"font-semibold text-lg\">{smartCTA.text}</span>\n                    </div>\n                    <p className=\"text-white/90 text-base\">{smartCTA.subtext}</p>\n                  </div>\n                  <ArrowRight className=\"w-6 h-6 opacity-75\" />\n                </div>\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Enhanced Feed Tabs */}\n      <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\">\n        <div className=\"border-b border-gray-200\">\n          <nav className=\"flex\">\n            {[\n              { key: 'for-you', label: 'For You', icon: <Star className=\"w-5 h-5\" /> },\n              { key: 'social', label: 'Social Feed', icon: <Activity className=\"w-5 h-5\" /> },\n              { key: 'drops', label: 'Opportunities', icon: <DollarSign className=\"w-5 h-5\" /> }\n            ].map((tab) => (\n              <button\n                key={tab.key}\n                onClick={() => setActiveTab(tab.key as any)}\n                className={`flex-1 flex items-center justify-center space-x-2 py-4 px-6 font-medium text-base transition-all duration-200 ${\n                  activeTab === tab.key\n                    ? 'border-b-2 border-orange-500 text-orange-600 bg-orange-50 shadow-sm'\n                    : 'text-gray-500 hover:text-gray-700 hover:bg-gray-50'\n                }`}\n              >\n                {tab.icon}\n                <span>{tab.label}</span>\n              </button>\n            ))}\n          </nav>\n        </div>\n\n        <div className=\"p-6\">\n          {/* For You Tab - Personalized Mix */}\n          {activeTab === 'for-you' && (\n            <div className=\"space-y-6\">\n              {getForYouFeed().length > 0 ? (\n                <>\n                  <div className=\"flex items-center space-x-2 mb-6\">\n                    <Flame className=\"w-5 h-5 text-orange-500\" />\n                    <h3 className=\"text-lg font-semibold text-gray-900\">Trending opportunities for you</h3>\n                  </div>\n                  {getForYouFeed().map((item, index) => (\n                    <div key={index}>\n                      {item.type === 'content' ? (\n                        <ContentCard\n                          content={item.data as ContentPieceType}\n                          onBuyShares={openBuyModal}\n                          onShare={openShareModal}\n                          onSocialAction={handleSocialAction}\n                          onTip={openTipModal}\n                          onNavigate={openContentDetail}\n                          onPredict={openPredictModal}\n                          currentUser={userData}\n                          onEdit={openEditModal}\n                          onDelete={openDeleteConfirm}\n                          isSponsored={(item as any).isSponsored}\n                        />\n                      ) : (\n                        <EnhancedDropCard drop={item.data as DropType} />\n                      )}\n                    </div>\n                  ))}\n                </>\n              ) : (\n                <PersonalizedEmptyState />\n              )}\n            </div>\n          )}\n\n          {/* Social Feed Tab */}\n          {activeTab === 'social' && (\n            <div className=\"space-y-6\">\n              {/* Debug info and refresh button */}\n              <div className=\"flex items-center justify-between bg-blue-50 border border-blue-200 rounded-lg p-3\">\n                <div className=\"text-sm text-blue-700\">\n                  Showing {contentFeed.length} content pieces\n                </div>\n                <button\n                  onClick={fetchFeeds}\n                  className=\"text-blue-600 hover:text-blue-800 text-sm font-medium\"\n                >\n                  Refresh Feed\n                </button>\n              </div>\n              {contentFeed.length > 0 ? (\n                // Show sponsored content first, then regular content\n                [\n                  ...sponsoredContent.map((content) => (\n                    <ContentCard\n                      key={`sponsored-${content.id}`}\n                      content={content}\n                      onBuyShares={openBuyModal}\n                      onShare={openShareModal}\n                      onSocialAction={handleSocialAction}\n                      onTip={openTipModal}\n                      onNavigate={openContentDetail}\n                      onPredict={openPredictModal}\n                      currentUser={userData}\n                      onEdit={openEditModal}\n                      onDelete={openDeleteConfirm}\n                      isSponsored={true}\n                    />\n                  )),\n                  ...contentFeed\n                    .filter(content => !sponsoredContent.some(sponsored => sponsored.id === content.id))\n                    .map((content) => (\n                      <ContentCard\n                        key={content.id}\n                        content={content}\n                        onBuyShares={openBuyModal}\n                        onShare={openShareModal}\n                        onSocialAction={handleSocialAction}\n                        onTip={openTipModal}\n                        onNavigate={openContentDetail}\n                        onPredict={openPredictModal}\n                        currentUser={userData}\n                        onEdit={openEditModal}\n                        onDelete={openDeleteConfirm}\n                      />\n                    ))\n                ]\n              ) : (\n                <div className=\"text-center py-12\">\n                  <div className=\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                    <TrendingUp className=\"w-12 h-12 text-gray-400\" />\n                  </div>\n                  <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No content yet</h3>\n                  <p className=\"text-gray-600 mb-4\">Be the first to create and share content!</p>\n                  <div className=\"space-y-3\">\n                    <button\n                      onClick={() => window.location.href = '/create'}\n                      className=\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 mx-auto\"\n                    >\n                      <Plus className=\"w-4 h-4\" />\n                      <span>Create Content</span>\n                    </button>\n                    <button\n                      onClick={fetchFeeds}\n                      className=\"text-blue-600 hover:text-blue-800 text-sm font-medium\"\n                    >\n                      Check for new content\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Opportunities/Drops Tab */}\n          {activeTab === 'drops' && (\n            <div className=\"space-y-4\">\n              {dropFeed.length > 0 ? (\n                dropFeed.map((drop) => (\n                  <EnhancedDropCard key={drop.id} drop={drop} />\n                ))\n              ) : (\n                <div className=\"text-center py-12\">\n                  <div className=\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                    <DollarSign className=\"w-12 h-12 text-gray-400\" />\n                  </div>\n                  <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No opportunities available</h3>\n                  <p className=\"text-gray-600 mb-4\">Check back later for new earning opportunities!</p>\n                  <button\n                    onClick={() => window.location.href = '/earn'}\n                    className=\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200\"\n                  >\n                    Browse All Opportunities\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Modals */}\n      {selectedContent && (\n        <BuySharesModal\n          content={selectedContent}\n          wallet={wallets?.find(w => w.currency_type === 'USD')}\n          isOpen={buyModalOpen}\n          onClose={() => {\n            setBuyModalOpen(false);\n            setSelectedContent(null);\n          }}\n          onPurchase={handleBuyShares}\n        />\n      )}\n\n      <ShareContentModal\n        user={userData}\n        contentId={shareContentData?.id}\n        contentTitle={shareContentData?.title}\n        isOpen={shareModalOpen}\n        onClose={() => {\n          setShareModalOpen(false);\n          setShareContentData(null);\n        }}\n        onSuccess={() => {\n          fetchUserData();\n          fetchFeeds();\n        }}\n      />\n\n      <ExternalMoveModal\n        user={userData}\n        contentId={externalMoveContentData?.id}\n        contentTitle={externalMoveContentData?.title}\n        contentPlatform={externalMoveContentData?.platform}\n        contentUrl={externalMoveContentData?.url}\n        isOpen={externalMoveModalOpen}\n        onClose={() => {\n          setExternalMoveModalOpen(false);\n          setExternalMoveContentData(null);\n        }}\n        onSuccess={() => {\n          fetchUserData();\n          fetchFeeds();\n        }}\n      />\n\n      {editContentData && (\n        <EditContentModal\n          isOpen={editContentModalOpen}\n          onClose={() => {\n            setEditContentModalOpen(false);\n            setEditContentData(null);\n          }}\n          onSuccess={handleEditSuccess}\n          content={editContentData}\n        />\n      )}\n\n      <ConfirmationModal\n        isOpen={deleteConfirmModalOpen}\n        onClose={() => {\n          setDeleteConfirmModalOpen(false);\n          setContentToDelete(null);\n        }}\n        onConfirm={handleDeleteConfirm}\n        title=\"Delete Content\"\n        message={`Are you sure you want to delete \"${contentToDelete?.title}\"? This action cannot be undone and will remove all associated data.`}\n        confirmText=\"Delete\"\n        cancelText=\"Cancel\"\n        type=\"danger\"\n      />\n\n      {/* Share Modal */}\n      {shareModalContent && (\n        <ShareModal\n          isOpen={contentShareModalOpen}\n          onClose={() => {\n            setContentShareModalOpen(false);\n            setShareModalContent(null);\n          }}\n          contentId={shareModalContent.id}\n          contentTitle={shareModalContent.title}\n        />\n      )}\n\n      {/* Saved Content Modal */}\n      <SavedContentModal\n        isOpen={savedContentModalOpen}\n        onClose={() => setSavedContentModalOpen(false)}\n        user={userData}\n      />\n\n      {/* Tip Modal */}\n      {tipContent && (\n        <TipModal\n          content={tipContent}\n          isOpen={tipModalOpen}\n          onClose={() => {\n            setTipModalOpen(false);\n            setTipContent(null);\n          }}\n          onTip={handleTip}\n        />\n      )}\n\n      {/* Prediction Modal */}\n      {predictContent && (\n        <PlaceForecastModal\n          forecast={{\n            id: predictContent.id,\n            creator_name: predictContent.creator_name || predictContent.creator_username || 'Unknown',\n            platform: predictContent.platform || 'Unknown',\n            content_url: predictContent.platform_url || '',\n            content_title: predictContent.title,\n            forecast_type: 'engagement',\n            target_value: 1000,\n            current_value: 500,\n            odds: 2.5,\n            pool_size: 250.00,\n            creator_initial_amount: 100.00,\n            creator_side: 'over',\n            expires_at: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString()\n          }}\n          isOpen={predictModalOpen}\n          onClose={() => {\n            setPredictModalOpen(false);\n            setPredictContent(null);\n          }}\n          onPredictionPlaced={() => {\n            setPredictModalOpen(false);\n            setPredictContent(null);\n            fetchFeeds(); // Refresh feeds to show new prediction\n          }}\n        />\n      )}\n    </div>\n  );\n}\n","import { useEffect, useState, useRef } from 'react';\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { useAuth } from '../hooks/useAuth';\nimport { \n  Plus, \n  Search, \n  Filter, \n  Clock, \n  Users,\n  Star,\n  Calendar,\n  Key,\n  Diamond\n} from 'lucide-react';\nimport UserLink from '@/react-app/components/UserLink';\nimport { DropType, DropTypeSchema, DropDifficultySchema, UserType } from '@/shared/types';\nimport { buildAuthHeaders, apiFetch } from '@/react-app/utils/api';\n\ninterface CreateDropRequestType {\n  title: string;\n  description: string;\n  drop_type: string;\n  difficulty: string;\n  key_cost: number;\n  gem_reward_base: number;\n  gem_pool_total: number;\n  follower_threshold: number;\n  time_commitment: string;\n  requirements: string;\n  deliverables: string;\n  deadline_at: string;\n  max_participants?: number;\n  platform: string;\n  content_url: string;\n  is_proof_drop: boolean;\n  is_paid_drop: boolean;\n  move_cost_points: number;\n  key_reward_amount: number;\n  move_actions: any[];\n}\n\nexport default function Earn() {\n  const { user } = useAuth();\n  const location = useLocation();\n  const [drops, setDrops] = useState<DropType[]>([]);\n  const [userData, setUserData] = useState<UserType | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [showCreateForm, setShowCreateForm] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedDropType, setSelectedDropType] = useState('');\n  const [selectedDifficulty, setSelectedDifficulty] = useState('');\n\n  useEffect(() => {\n    fetchDrops();\n    if (user) {\n      fetchUserData();\n    }\n  }, [user]);\n\n  // Check URL parameters to auto-open create modal\n  useEffect(() => {\n    const urlParams = new URLSearchParams(location.search);\n    const createParam = urlParams.get('create');\n    if ((createParam === 'proof' || createParam === 'paid') && userData && userData.user_type === 'advertiser') {\n      setShowCreateForm(true);\n    }\n  }, [location, userData]);\n\n  const fetchUserData = async () => {\n    try {\n      const headers = buildAuthHeaders();\n      const response = await apiFetch('/api/users/me', {\n        credentials: 'include',\n        headers\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setUserData(data);\n      }\n    } catch (error) {\n      console.error('Failed to fetch user data:', error);\n    }\n  };\n\n  const fetchDrops = async () => {\n    try {\n      const response = await apiFetch('/api/drops');\n      const data = await response.json();\n      setDrops(data);\n    } catch (error) {\n      console.error('Failed to fetch drops:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const filteredDrops = drops.filter(drop => {\n    const title = drop.title || '';\n    const description = drop.description || '';\n    const dropType = drop.drop_type || '';\n    const difficulty = drop.difficulty || '';\n\n    const matchesSearch =\n      title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      description.toLowerCase().includes(searchTerm.toLowerCase());\n\n    const matchesDropType = !selectedDropType || dropType === selectedDropType;\n    const matchesDifficulty = !selectedDifficulty || difficulty === selectedDifficulty;\n    \n    return matchesSearch && matchesDropType && matchesDifficulty;\n  });\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900\">Earn</h1>\n          <p className=\"text-gray-600 mt-2\">Discover earning drops that match your skills</p>\n        </div>\n        {userData && userData.user_type === 'advertiser' && (\n          <button\n            onClick={() => setShowCreateForm(true)}\n            className=\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200 shadow-lg\"\n          >\n            <Plus className=\"w-5 h-5\" />\n            <span>Create Drop</span>\n          </button>\n        )}\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-white rounded-xl p-6 shadow-sm border border-gray-200\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div className=\"relative\">\n            <Search className=\"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search drops...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n            />\n          </div>\n\n          <select\n            value={selectedDropType}\n            onChange={(e) => setSelectedDropType(e.target.value)}\n            className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n          >\n            <option value=\"\">All Drop Types</option>\n            {DropTypeSchema.options.map(dropType => (\n              <option key={dropType} value={dropType}>\n                {dropType.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())}\n              </option>\n            ))}\n          </select>\n\n          <select\n            value={selectedDifficulty}\n            onChange={(e) => setSelectedDifficulty(e.target.value)}\n            className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n          >\n            <option value=\"\">All Difficulties</option>\n            {DropDifficultySchema.options.map(difficulty => (\n              <option key={difficulty} value={difficulty} className=\"capitalize\">{difficulty}</option>\n            ))}\n          </select>\n\n          <button className=\"flex items-center justify-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\">\n            <Filter className=\"w-5 h-5 text-gray-500\" />\n            <span>More Filters</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Drops Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {filteredDrops.map((drop) => (\n          <DropCard key={drop.id} drop={drop} />\n        ))}\n      </div>\n\n      {filteredDrops.length === 0 && (\n        <div className=\"text-center py-12\">\n          <div className=\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <Search className=\"w-12 h-12 text-gray-400\" />\n          </div>\n          <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No drops found</h3>\n          <p className=\"text-gray-600\">Try adjusting your search criteria or create a new drop.</p>\n        </div>\n      )}\n\n      {/* Create Drop Modal */}\n      {showCreateForm && userData && userData.user_type === 'advertiser' && (\n        <CreateDropModal \n          onClose={() => setShowCreateForm(false)} \n          onSuccess={() => {\n            setShowCreateForm(false);\n            fetchDrops();\n          }}\n        />\n      )}\n    </div>\n  );\n}\n\nconst formatLabel = (value?: string | null, fallback = 'General') => {\n  const label = value && value.trim().length > 0 ? value : fallback;\n  return label\n    .replace(/_/g, ' ')\n    .replace(/\\b\\w/g, (char) => char.toUpperCase());\n};\n\nfunction DropCard({ drop }: { drop: DropType }) {\n  const navigate = useNavigate();\n  \n  const getDropTypeImage = (dropType?: string | null) => {\n    // Use the drop's content_url if available, otherwise fallback to default images\n    if (drop?.content_url) {\n      return drop.content_url;\n    }\n    const type = (dropType || '').toLowerCase();\n    switch (type) {\n      case 'content_clipping': return 'https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=400&h=250&fit=crop';\n      case 'reviews': return 'https://images.unsplash.com/photo-1556155092-490a1ba16284?w=400&h=250&fit=crop';\n      case 'ugc_creation': return 'https://images.unsplash.com/photo-1558403194-611308249627?w=400&h=250&fit=crop';\n      case 'affiliate_referral': return 'https://images.unsplash.com/photo-1516251193007-45ef944ab0c6?w=400&h=250&fit=crop';\n      case 'surveys': return 'https://images.unsplash.com/photo-1432888622747-4eb9a8efeb07?w=400&h=250&fit=crop';\n      case 'challenges_events': return 'https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=400&h=250&fit=crop';\n      default: return 'https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=400&h=250&fit=crop';\n    }\n  };\n\n  const handleDropClick = () => {\n    // Use React Router navigation instead of window.location\n    navigate(`/drops/${drop.id}`);\n  };\n\n  // Check if this is demo content\n  const isDemo = drop.title?.toLowerCase().includes('[demo]') || \n                 drop.title?.toLowerCase().includes('demo') ||\n                 drop.description?.toLowerCase().includes('demo');\n\n  const getDropTypeIcon = (dropType?: string | null) => {\n    switch (dropType || '') {\n      case 'content_clipping': return '✂️';\n      case 'reviews': return '⭐';\n      case 'ugc_creation': return '🎨';\n      case 'affiliate_referral': return '🔗';\n      case 'surveys': return '📊';\n      case 'challenges_events': return '🏆';\n      default: return '📝';\n    }\n  };\n\n  const getDifficultyColor = (difficulty?: string | null) => {\n    switch ((difficulty || '').toLowerCase()) {\n      case 'easy': return 'text-green-600 bg-green-100';\n      case 'medium': return 'text-yellow-600 bg-yellow-100';\n      case 'hard': return 'text-red-600 bg-red-100';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-shadow\">\n      {/* Demo Banner */}\n      {isDemo && (\n        <div className=\"bg-gradient-to-r from-orange-500 to-amber-500 text-white px-4 py-2 text-center\">\n          <div className=\"flex items-center justify-center space-x-2 text-sm font-medium\">\n            <span>🧪</span>\n            <span>DEMO DROP - No real gems awarded</span>\n            <span>🧪</span>\n          </div>\n        </div>\n      )}\n\n      <div className=\"relative cursor-pointer\" onClick={handleDropClick}>\n        <img \n          src={getDropTypeImage(drop.drop_type)} \n          alt={drop.title}\n          className=\"w-full h-48 object-cover hover:opacity-95 transition-opacity\"\n        />\n        <div className=\"absolute inset-0 bg-black bg-opacity-20\" />\n        <div className=\"absolute top-4 right-4 flex space-x-2\">\n          {isDemo && (\n            <span className=\"bg-orange-500/90 backdrop-blur-sm text-white px-2 py-1 rounded-full text-xs font-medium\">\n              DEMO\n            </span>\n          )}\n          <span className={`px-3 py-1 rounded-full text-sm font-medium ${getDifficultyColor(drop.difficulty)}`}>\n            {drop.difficulty}\n          </span>\n        </div>\n        <div className=\"absolute top-4 left-4\">\n          {drop.is_proof_drop ? (\n            <div className=\"bg-green-500/90 backdrop-blur-sm px-2 py-1 rounded-full\">\n              <span className=\"text-white text-sm font-medium\">Proof Drop</span>\n            </div>\n          ) : drop.is_paid_drop ? (\n            <div className=\"bg-purple-500/90 backdrop-blur-sm px-2 py-1 rounded-full\">\n              <span className=\"text-white text-sm font-medium\">Paid Drop</span>\n            </div>\n          ) : (\n            <div className=\"flex items-center space-x-1 bg-orange-500/90 backdrop-blur-sm px-2 py-1 rounded-full\">\n              <Key className=\"w-3 h-3 text-white\" />\n              <span className=\"text-white text-sm font-medium\">{drop.key_cost}</span>\n            </div>\n          )}\n        </div>\n        <div className=\"absolute bottom-4 left-4\">\n          <div className=\"flex items-center space-x-2\">\n            <Diamond className=\"w-6 h-6 text-purple-300 drop-shadow\" />\n            <p className=\"text-3xl font-bold text-white drop-shadow-lg\">\n              {drop.gem_reward_base}{isDemo && <span className=\"text-lg opacity-80\"> (Demo)</span>}\n            </p>\n          </div>\n          <p className=\"text-sm text-white/80 drop-shadow\">\n            {isDemo ? 'Demo gems (no real value)' : 'Gems reward'}\n          </p>\n        </div>\n      </div>\n\n      <div className=\"p-6\">\n        <div className=\"flex items-start justify-between mb-3\">\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"text-xl\">{getDropTypeIcon(drop.drop_type)}</span>\n            {drop.is_proof_drop ? (\n              <div className=\"flex items-center space-x-1 text-sm bg-green-100 px-2 py-1 rounded\">\n                <span className=\"font-medium text-green-700\">Proof Drop - Free</span>\n              </div>\n            ) : drop.is_paid_drop ? (\n              <div className=\"flex items-center space-x-1 text-sm bg-purple-100 px-2 py-1 rounded\">\n                <span className=\"font-medium text-purple-700\">Paid Drop</span>\n              </div>\n            ) : (\n              <div className=\"flex items-center space-x-1 text-sm\">\n                <Key className=\"w-3 h-3 text-orange-600\" />\n                <span className=\"font-medium text-orange-700\">{drop.key_cost} keys</span>\n              </div>\n            )}\n          </div>\n        </div>\n\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-2 cursor-pointer hover:text-orange-600 transition-colors\" onClick={handleDropClick}>\n          {drop.title}\n        </h3>\n        <p className=\"text-gray-600 text-sm mb-4 line-clamp-3\">{drop.description || 'No description available.'}</p>\n\n        <div className=\"mb-4\">\n          <UserLink \n            username={drop.creator_name}\n            displayName={drop.creator_name}\n            avatarUrl={drop.creator_avatar}\n            className=\"flex items-center space-x-2\"\n            size=\"sm\"\n          />\n        </div>\n\n        <div className=\"space-y-2 mb-6\">\n          <div className=\"flex items-center space-x-2 text-sm text-gray-500\">\n            <Users className=\"w-4 h-4\" />\n            <span>{drop.current_participants}/{drop.max_participants || '∞'} participants</span>\n          </div>\n          \n          {drop.follower_threshold > 0 && (\n            <div className=\"flex items-center space-x-2 text-sm text-gray-500\">\n              <Star className=\"w-4 h-4\" />\n              <span>{drop.follower_threshold}+ followers required</span>\n            </div>\n          )}\n\n          {drop.deadline_at && (\n            <div className=\"flex items-center space-x-2 text-sm text-gray-500\">\n              <Calendar className=\"w-4 h-4\" />\n              <span>Due {new Date(drop.deadline_at).toLocaleDateString()}</span>\n            </div>\n          )}\n\n          {drop.time_commitment && (\n            <div className=\"flex items-center space-x-2 text-sm text-gray-500\">\n              <Clock className=\"w-4 h-4\" />\n              <span>{drop.time_commitment}</span>\n            </div>\n          )}\n\n          {drop.gem_pool_total > 0 && (\n            <div className=\"flex items-center space-x-2 text-sm text-gray-500\">\n              <Diamond className=\"w-4 h-4\" />\n            <span>{drop.gem_pool_remaining ?? drop.gem_pool_total} gems remaining in pool</span>\n            </div>\n          )}\n        </div>\n\n        <div className=\"flex items-center justify-between\">\n          <span className={`text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full ${getDifficultyColor(drop.difficulty)}`}>\n            {formatLabel(drop.drop_type)}\n          </span>\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={handleDropClick}\n              className=\"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors\"\n            >\n              View Details\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\ninterface CreateDropModalProps {\n  onClose: () => void;\n  onSuccess: () => void;\n}\n\n// CreateDropRequestType is imported from shared/types\n\nconst CreateDropModal: React.FC<CreateDropModalProps> = ({ onClose, onSuccess }) => {\n  const location = useLocation();\n  const urlParams = new URLSearchParams(location.search);\n  const createParam = urlParams.get('create');\n  \n  // Determine initial drop type based on URL parameter\n  const getInitialDropType = (): 'proof' | 'paid' | 'move' => {\n    if (createParam === 'paid') return 'paid';\n    if (createParam === 'move') return 'move';\n    return 'proof'; // Default to proof drop\n  };\n  \n  const [loading, setLoading] = useState(false);\n  const [uploadingFile, setUploadingFile] = useState(false);\n  const [uploadMode, setUploadMode] = useState<'upload' | 'link'>('upload');\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n  // These states are used in the component\n  const [uploadedFile, setUploadedFile] = useState<File | null>(null);\n  const [dropType, setDropType] = useState<'proof' | 'paid' | 'move'>(getInitialDropType());\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  \n  // Initialize form data based on drop type\n  const getInitialFormData = (type: 'proof' | 'paid' | 'move'): CreateDropRequestType => {\n    return {\n      title: '',\n      description: '',\n      drop_type: 'content_clipping',\n      difficulty: 'easy',\n      key_cost: type === 'paid' ? 1 : 0,\n      gem_reward_base: type === 'paid' ? 50 : 0,\n      gem_pool_total: 0,\n      follower_threshold: 0,\n      time_commitment: '',\n      requirements: '',\n      deliverables: '',\n      deadline_at: '',\n      max_participants: undefined,\n      platform: '',\n      content_url: '',\n      is_proof_drop: type === 'proof',\n      is_paid_drop: type === 'paid',\n      move_cost_points: 0,\n      key_reward_amount: 0,\n      move_actions: []\n    };\n  };\n  \n  const [formData, setFormData] = useState<CreateDropRequestType>(() => getInitialFormData(getInitialDropType()));\n\n  // Update form data when drop type changes\n  useEffect(() => {\n    setFormData(prevData => ({\n      ...prevData,\n      is_proof_drop: dropType === 'proof',\n      is_paid_drop: dropType === 'paid',\n      key_cost: dropType === 'paid' ? 1 : 0,\n      gem_reward_base: dropType === 'paid' ? 50 : 0,\n    }));\n  }, [dropType]);\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      const file = e.target.files[0];\n      setUploadedFile(file);\n      \n      // Create preview URL\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        if (event.target?.result) {\n          setPreviewUrl(event.target.result as string);\n        }\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const removeUploadedFile = () => {\n    setUploadedFile(null);\n    setPreviewUrl(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const uploadImageToStorage = async (file: File): Promise<string> => {\n    try {\n      setUploadingFile(true);\n      \n      // Convert file to base64 for transmission\n      const base64 = await new Promise<string>((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => {\n          const result = reader.result as string;\n          resolve(result.split(',')[1]); // Remove data:image/jpeg;base64, prefix\n        };\n        reader.onerror = reject;\n        reader.readAsDataURL(file);\n      });\n\n      // Upload to backend\n      const response = await apiFetch('/api/content/upload-image', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          image: base64,\n          filename: file.name,\n          contentType: file.type,\n          description: formData.title || 'Marketing drop',\n          platform: formData.platform || 'general'\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to upload image');\n      }\n\n      const data = await response.json();\n      return data.url;\n    } catch (error) {\n      console.error('Error uploading image:', error);\n      // Fallback to a placeholder image if upload fails\n      return 'https://images.unsplash.com/photo-1516251193007-45ef944ab0c6?w=800&h=600&fit=crop&crop=center';\n    } finally {\n      setUploadingFile(false);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    \n    try {\n      // Handle file upload if in upload mode and file is selected\n      let imageUrl = formData.content_url;\n      \n      if (uploadMode === 'upload' && uploadedFile) {\n        try {\n          imageUrl = await uploadImageToStorage(uploadedFile);\n        } catch (error) {\n          console.error('Error uploading image:', error);\n          alert('Failed to upload image. Please try again.');\n          return;\n        }\n      } else if (uploadMode === 'link' && formData.content_url) {\n        // Validate URL if in link mode\n        try {\n          const response = await fetch(formData.content_url, { method: 'HEAD' });\n          if (!response.ok) {\n            throw new Error('Invalid image URL');\n          }\n        } catch (error) {\n          alert('Please provide a valid image URL');\n          return;\n        }\n      }\n      \n      // Submit the form data\n      const response = await apiFetch('/api/drops', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          ...formData,\n          content_url: imageUrl,\n          drop_type: dropType === 'proof' ? 'content_clipping' : \n                    dropType === 'paid' ? 'paid_content' : 'action_required',\n          difficulty: formData.difficulty || 'easy',\n          deadline_at: formData.deadline_at || null,\n          max_participants: formData.max_participants || null,\n          key_cost: dropType === 'paid' ? formData.key_cost || 1 : 0,\n          gem_reward_base: dropType === 'paid' ? formData.gem_reward_base || 50 : 0,\n          is_proof_drop: dropType === 'proof',\n          is_paid_drop: dropType === 'paid',\n          move_cost_points: dropType === 'move' ? formData.move_cost_points || 0 : 0,\n          key_reward_amount: dropType === 'move' ? formData.key_reward_amount || 0 : 0,\n        }),\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || 'Failed to create drop');\n      }\n      \n      onSuccess();\n      onClose();\n    } catch (error) {\n      console.error('Error creating drop:', error);\n      alert(error instanceof Error ? error.message : 'Failed to create drop');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h2 className=\"text-xl font-bold\">Create New Drop</h2>\n          <button \n            onClick={onClose}\n            className=\"text-gray-500 hover:text-gray-700\"\n            aria-label=\"Close modal\"\n          >\n            ✕\n          </button>\n        </div>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Drop Type\n            </label>\n            <div className=\"flex space-x-4\">\n              {(['proof', 'paid', 'move'] as const).map((type) => (\n                <label key={type} className=\"flex items-center\">\n                  <input\n                    type=\"radio\"\n                    className=\"h-4 w-4 text-orange-500\"\n                    checked={dropType === type}\n                    onChange={() => setDropType(type)}\n                  />\n                  <span className=\"ml-2 capitalize\">{type}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Title\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full p-2 border rounded\"\n              value={formData.title}\n              onChange={(e) => setFormData({...formData, title: e.target.value})}\n              required\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Description\n            </label>\n            <textarea\n              className=\"w-full p-2 border rounded\"\n              rows={3}\n              value={formData.description}\n              onChange={(e) => setFormData({...formData, description: e.target.value})}\n              required\n            />\n          </div>\n\n          <div className=\"flex space-x-4\">\n            <div className=\"flex-1\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Difficulty\n              </label>\n              <select\n                className=\"w-full p-2 border rounded\"\n                value={formData.difficulty}\n                onChange={(e) => setFormData({...formData, difficulty: e.target.value})}\n              >\n                <option value=\"easy\">Easy</option>\n                <option value=\"medium\">Medium</option>\n                <option value=\"hard\">Hard</option>\n              </select>\n            </div>\n\n            {dropType === 'paid' && (\n              <div className=\"flex-1\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Key Cost\n                </label>\n                <input\n                  type=\"number\"\n                  min=\"1\"\n                  className=\"w-full p-2 border rounded\"\n                  value={formData.key_cost}\n                  onChange={(e) => setFormData({...formData, key_cost: Number(e.target.value)})}\n                  required={dropType === 'paid'}\n                />\n              </div>\n            )}\n          </div>\n\n          <div>\n            <div className=\"flex items-center space-x-4 mb-2\">\n              <label className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  className=\"h-4 w-4 text-orange-500\"\n                  checked={uploadMode === 'upload'}\n                  onChange={() => setUploadMode('upload')}\n                />\n                <span className=\"ml-2\">Upload Image</span>\n              </label>\n              <label className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  className=\"h-4 w-4 text-orange-500\"\n                  checked={uploadMode === 'link'}\n                  onChange={() => setUploadMode('link')}\n                />\n                <span className=\"ml-2\">Image URL</span>\n              </label>\n            </div>\n\n            {uploadMode === 'upload' ? (\n              <div>\n                <input\n                  type=\"file\"\n                  ref={fileInputRef}\n                  onChange={handleFileChange}\n                  accept=\"image/*\"\n                  className=\"hidden\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => fileInputRef.current?.click()}\n                  className=\"w-full p-2 border-2 border-dashed border-gray-300 rounded-md text-gray-500 hover:border-orange-500 hover:text-orange-500 transition-colors\"\n                >\n                  {uploadingFile ? 'Uploading...' : 'Choose an image'}\n                </button>\n                {previewUrl && (\n                  <div className=\"mt-2 relative\">\n                    <img \n                      src={previewUrl} \n                      alt=\"Preview\" \n                      className=\"max-h-40 rounded\"\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={removeUploadedFile}\n                      className=\"absolute top-1 right-1 bg-black bg-opacity-50 text-white rounded-full p-1 hover:bg-opacity-75\"\n                      aria-label=\"Remove image\"\n                    >\n                      ✕\n                    </button>\n                  </div>\n                )}\n              </div>\n            ) : (\n              <input\n                type=\"url\"\n                className=\"w-full p-2 border rounded\"\n                placeholder=\"https://example.com/image.jpg\"\n                value={formData.content_url}\n                onChange={(e) => setFormData({...formData, content_url: e.target.value})}\n                required\n              />\n            )}\n          </div>\n\n          <div className=\"flex justify-end space-x-3 pt-4\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 border rounded-md text-gray-700 hover:bg-gray-50\"\n              disabled={loading}\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className=\"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 disabled:opacity-50\"\n              disabled={loading || uploadingFile}\n            >\n              {loading ? 'Creating...' : 'Create Drop'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n","// Centralized error handling utilities\nimport { handleCriticalError } from './errorEncoder';\n\n// Global error handler for unhandled promise rejections\nexport function setupGlobalErrorHandlers(): void {\n  // Handle unhandled promise rejections\n  window.addEventListener('unhandledrejection', (event) => {\n    console.error('Unhandled promise rejection:', event.reason);\n    \n    // Only redirect for critical errors, not minor network issues\n    const error = event.reason;\n    if (shouldRedirectToErrorPage(error)) {\n      handleCriticalError(\n        error instanceof Error ? error : new Error(String(error)),\n        'Promise',\n        'unhandled_rejection'\n      );\n    }\n  });\n\n  // Handle global JavaScript errors\n  window.addEventListener('error', (event) => {\n    console.error('Global JavaScript error:', event.error);\n    \n    if (shouldRedirectToErrorPage(event.error)) {\n      handleCriticalError(\n        event.error || new Error(event.message),\n        'JavaScript',\n        'global_error'\n      );\n    }\n  });\n}\n\n// Determine if an error should redirect to error page\nfunction shouldRedirectToErrorPage(error: any): boolean {\n  if (!error) return false;\n  \n  const errorMessage = error.message || String(error);\n  const lowerMessage = errorMessage.toLowerCase();\n  \n  // Don't redirect for common network/temporary issues\n  const temporaryIssues = [\n    'network',\n    'fetch',\n    'timeout',\n    'aborted',\n    'cors',\n    'load',\n    'script error',\n    'non-error promise rejection'\n  ];\n  \n  if (temporaryIssues.some(issue => lowerMessage.includes(issue))) {\n    return false;\n  }\n  \n  // Redirect for critical application errors\n  const criticalErrors = [\n    'chunk',\n    'module',\n    'syntax',\n    'reference',\n    'type',\n    'security',\n    'permission'\n  ];\n  \n  return criticalErrors.some(critical => lowerMessage.includes(critical));\n}\n\n// Wrapper for async operations that should redirect on failure\nexport async function withErrorRedirect<T>(\n  operation: () => Promise<T>,\n  component: string,\n  action: string,\n  userId?: string\n): Promise<T> {\n  try {\n    return await operation();\n  } catch (error) {\n    console.error(`Error in ${component}.${action}:`, error);\n    handleCriticalError(\n      error instanceof Error ? error : new Error(String(error)),\n      component,\n      action,\n      userId\n    );\n    throw error; // Re-throw to prevent further execution\n  }\n}\n\n// Handle API errors with smart error page redirection\nexport function handleApiError(\n  error: any,\n  component: string,\n  action: string,\n  userId?: string\n): void {\n  console.error(`API Error in ${component}.${action}:`, error);\n  \n  // Check if it's a critical API error that warrants error page\n  const status = error.status || error.response?.status;\n  const message = error.message || error.response?.data?.error || String(error);\n  \n  // Critical errors that should redirect\n  const criticalStatuses = [500, 502, 503, 504];\n  const criticalMessages = [\n    'internal server error',\n    'service unavailable',\n    'gateway timeout',\n    'database error',\n    'authentication failed'\n  ];\n  \n  const isCritical = \n    criticalStatuses.includes(status) ||\n    criticalMessages.some(msg => message.toLowerCase().includes(msg));\n  \n  if (isCritical) {\n    handleCriticalError(\n      new Error(`API Error (${status}): ${message}`),\n      component,\n      action,\n      userId\n    );\n  }\n}\n\n// Enhanced error boundaries for specific components\nexport function createErrorHandler(component: string) {\n  return {\n    handleError: (error: Error, action: string, userId?: string) => {\n      handleCriticalError(error, component, action, userId);\n    },\n    \n    handleApiError: (error: any, action: string, userId?: string) => {\n      handleApiError(error, component, action, userId);\n    },\n    \n    withErrorHandling: async <T>(\n      operation: () => Promise<T>,\n      action: string,\n      userId?: string\n    ): Promise<T> => {\n      return withErrorRedirect(operation, component, action, userId);\n    }\n  };\n}\n","import { useState, useRef } from 'react';\nimport { \n  Upload, \n  Camera, \n  Video, \n  FileText, \n  Link as LinkIcon,\n  Instagram,\n  Twitter,\n  Youtube,\n  Linkedin,\n  Music,\n  X,\n  Image as ImageIcon\n} from 'lucide-react';\nimport { PlatformSchema } from '@/shared/types';\nimport { useAuth } from '../hooks/useAuth';\n\nimport { createErrorHandler } from '@/react-app/utils/errorHandler';\n\n\nexport default function Create() {\n  const { } = useAuth();\n  \n  const errorHandler = createErrorHandler('Create');\n  const [activeTab, setActiveTab] = useState<'post' | 'upload'>('post');\n  const [postData, setPostData] = useState<{\n    platform: 'instagram' | 'tiktok' | 'youtube' | 'linkedin' | 'twitter';\n    title: string;\n    description: string;\n    platform_url: string;\n    media_url: string;\n    total_shares: number;\n    share_price: number;\n  }>({\n    platform: 'instagram',\n    title: '',\n    description: '',\n    platform_url: '',\n    media_url: '',\n    total_shares: 100,\n    share_price: 0.0,\n  });\n  const [fundWithGems, setFundWithGems] = useState(false);\n  const [gemFundingAmount, setGemFundingAmount] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [uploadedFile, setUploadedFile] = useState<File | null>(null);\n  const [previewUrl, setPreviewUrl] = useState<string>('');\n  const [uploadMode, setUploadMode] = useState<'url' | 'file'>('url');\n  const [uploadingFile, setUploadingFile] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const uploadImageToStorage = async (file: File): Promise<string> => {\n    try {\n      setUploadingFile(true);\n      \n      // Convert file to base64 for transmission\n      const base64 = await new Promise<string>((resolve) => {\n        const reader = new FileReader();\n        reader.onload = () => {\n          const result = reader.result as string;\n          resolve(result.split(',')[1]); // Remove data:image/jpeg;base64, prefix\n        };\n        reader.readAsDataURL(file);\n      });\n\n      // Upload to backend\n      const response = await fetch('/api/content/upload-image', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          fileName: file.name,\n          fileType: file.type,\n          fileData: base64\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Upload failed');\n      }\n\n      const result = await response.json();\n      \n      // Check if a fallback was used\n      if (result.fallback) {\n        console.warn('Upload fallback used:', result.fallbackReason);\n        // Show user that fallback was used\n        const notification = document.createElement('div');\n        notification.className = 'fixed top-4 right-4 bg-yellow-500 text-white px-4 py-3 rounded-lg shadow-lg z-50';\n        notification.innerHTML = `\n          <div class=\"flex items-center space-x-2\">\n            <span>⚠️</span>\n            <div>\n              <div class=\"font-semibold\">Image Upload Notice</div>\n              <div class=\"text-xs opacity-90\">${result.fallbackReason || 'Using fallback image'}</div>\n            </div>\n          </div>\n        `;\n        document.body.appendChild(notification);\n        setTimeout(() => {\n          if (document.body.contains(notification)) {\n            document.body.removeChild(notification);\n          }\n        }, 5000);\n      }\n      \n      return result.imageUrl;\n    } catch (error) {\n      console.error('Error uploading image:', error);\n      \n      // Instead of throwing an error, always provide a fallback\n      // This prevents the error from bubbling up and causing error page redirects\n      \n      // Try to generate a placeholder image first\n      try {\n        const fallbackResponse = await fetch('/api/content/generate-placeholder', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          credentials: 'include',\n          body: JSON.stringify({\n            description: postData.title || 'Social media content',\n            platform: postData.platform\n          }),\n        });\n\n        if (fallbackResponse.ok) {\n          const fallbackResult = await fallbackResponse.json();\n          \n          // Show user that a placeholder was used\n          const notification = document.createElement('div');\n          notification.className = 'fixed top-4 right-4 bg-orange-500 text-white px-4 py-3 rounded-lg shadow-lg z-50';\n          notification.innerHTML = `\n            <div class=\"flex items-center space-x-2\">\n              <span>📷</span>\n              <div>\n                <div class=\"font-semibold\">Using Placeholder Image</div>\n                <div class=\"text-xs opacity-90\">Original upload failed, but your content will still be created</div>\n              </div>\n            </div>\n          `;\n          document.body.appendChild(notification);\n          setTimeout(() => {\n            if (document.body.contains(notification)) {\n              document.body.removeChild(notification);\n            }\n          }, 4000);\n          \n          return fallbackResult.imageUrl;\n        }\n      } catch (fallbackError) {\n        console.error('Fallback image generation failed:', fallbackError);\n      }\n      \n      // Last resort: use a generic placeholder (never throw error)\n      const placeholderUrl = `https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=800&h=600&fit=crop&crop=center`;\n      \n      // Show user that a generic placeholder was used\n      const notification = document.createElement('div');\n      notification.className = 'fixed top-4 right-4 bg-orange-500 text-white px-4 py-3 rounded-lg shadow-lg z-50';\n      notification.innerHTML = `\n        <div class=\"flex items-center space-x-2\">\n          <span>📷</span>\n          <div>\n            <div class=\"font-semibold\">Using Default Image</div>\n            <div class=\"text-xs opacity-90\">Upload service temporarily unavailable</div>\n          </div>\n        </div>\n      `;\n      document.body.appendChild(notification);\n      setTimeout(() => {\n        if (document.body.contains(notification)) {\n          document.body.removeChild(notification);\n        }\n      }, 4000);\n      \n      return placeholderUrl;\n    } finally {\n      setUploadingFile(false);\n    }\n  };\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      // Validate file type\n      const validTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\n      if (!validTypes.includes(file.type)) {\n        const typeError = new Error('Please upload a valid image file (JPG, PNG, GIF, WEBP).');\n        errorHandler.handleError(typeError, 'invalid_file_type');\n        return;\n      }\n\n      // Validate file size (increased limit to 15MB for better user experience)\n      if (file.size > 15 * 1024 * 1024) {\n        const sizeError = new Error('File size must be less than 15MB. Please compress your image or use a URL instead.');\n        errorHandler.handleError(sizeError, 'file_too_large');\n        return;\n      }\n\n      setUploadedFile(file);\n      \n      // Create preview URL\n      const url = URL.createObjectURL(file);\n      setPreviewUrl(url);\n      \n      // Upload the file and get the real URL\n      try {\n        const uploadedUrl = await uploadImageToStorage(file);\n        setPostData({ \n          ...postData, \n          media_url: uploadedUrl\n        });\n      } catch (error) {\n        console.error('File upload failed:', error);\n        \n        // Only redirect to error page for critical upload failures, not fallback scenarios\n        const errorMessage = error instanceof Error ? error.message : String(error);\n        if (errorMessage.includes('too large') || errorMessage.includes('Invalid file type')) {\n          const uploadError = error instanceof Error ? error : new Error(errorMessage);\n          errorHandler.handleError(uploadError, 'upload_image');\n        } else {\n          // For other upload issues, show a toast notification instead of error page\n          const notification = document.createElement('div');\n          notification.className = 'fixed top-4 right-4 bg-red-500 text-white px-4 py-3 rounded-lg shadow-lg z-50';\n          notification.innerHTML = `\n            <div class=\"flex items-center space-x-2\">\n              <span>❌</span>\n              <div>\n                <div class=\"font-semibold\">Upload Failed</div>\n                <div class=\"text-xs opacity-90\">Please try again or use an image URL instead</div>\n              </div>\n            </div>\n          `;\n          document.body.appendChild(notification);\n          setTimeout(() => {\n            if (document.body.contains(notification)) {\n              document.body.removeChild(notification);\n            }\n          }, 5000);\n        }\n        removeUploadedFile();\n      }\n    }\n  };\n\n  const removeUploadedFile = () => {\n    setUploadedFile(null);\n    if (previewUrl) {\n      URL.revokeObjectURL(previewUrl);\n      setPreviewUrl('');\n    }\n    setPostData({ ...postData, media_url: '' });\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const validateImageUrl = async (url: string): Promise<boolean> => {\n    try {\n      const response = await fetch(url, { method: 'HEAD' });\n      const contentType = response.headers.get('content-type');\n      return response.ok && contentType?.startsWith('image/') || false;\n    } catch {\n      return false;\n    }\n  };\n\n  const handleCreatePost = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      // Validate image URL if provided\n      if (postData.media_url && uploadMode === 'url') {\n        const isValidImage = await validateImageUrl(postData.media_url);\n        if (!isValidImage) {\n          const urlError = new Error('The provided image URL is not accessible. Please check the URL or upload an image file instead.');\n          errorHandler.handleError(urlError, 'invalid_image_url');\n          setLoading(false);\n          return;\n        }\n      }\n\n      // Calculate share price based on gem funding\n      const finalPostData = {\n        ...postData,\n        share_price: fundWithGems && gemFundingAmount > 0 ? gemFundingAmount / postData.total_shares : 0.0\n      };\n\n      console.log('Sending content creation request:', finalPostData);\n      \n      const response = await fetch('/api/content', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify(finalPostData),\n      });\n\n      console.log('Content creation response status:', response.status);\n      \n      if (response.ok) {\n        const result = await response.json();\n        \n        // If funding with gems, make a funding request\n        if (fundWithGems && gemFundingAmount > 0) {\n          try {\n            await fetch(`/api/content/${result.contentId}/fund`, {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n              },\n              credentials: 'include',\n              body: JSON.stringify({\n                amount: gemFundingAmount,\n                currency_type: 'Gems'\n              })\n            });\n          } catch (fundingError) {\n            console.error('Funding failed:', fundingError);\n            // Content was still created, so we continue\n          }\n        }\n        \n        // Reset form\n        setPostData({\n          platform: 'instagram',\n          title: '',\n          description: '',\n          platform_url: '',\n          media_url: '',\n          total_shares: 100,\n          share_price: 0.0,\n        });\n        setFundWithGems(false);\n        setGemFundingAmount(0);\n        removeUploadedFile();\n        setUploadMode('url');\n        \n        // Show success notification\n        const notification = document.createElement('div');\n        notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-bounce';\n        notification.innerHTML = `\n          <div class=\"flex items-center space-x-2\">\n            <span class=\"text-lg\">🎉</span>\n            <div>\n              <div class=\"font-semibold\">Content Created!</div>\n              <div class=\"text-xs opacity-90\">Redirecting to your content page...</div>\n            </div>\n          </div>\n        `;\n        document.body.appendChild(notification);\n        \n        // Redirect to content page after a brief delay\n        setTimeout(() => {\n          if (document.body.contains(notification)) {\n            document.body.removeChild(notification);\n          }\n          // Redirect to the content detail page\n          window.location.href = `/content/${result.contentId}`;\n        }, 2000);\n      } else {\n        let errorMessage = 'Failed to create content. Please try again.';\n        let errorDetails = null;\n        try {\n          const error = await response.json();\n          console.error('Failed to create content:', error);\n          \n          if (error.error) {\n            errorMessage = error.error;\n          }\n          \n          // Log detailed error information for debugging\n          if (error.details) {\n            console.error('Error details:', error.details);\n            errorDetails = error.details;\n          }\n          \n          if (error.field_errors) {\n            console.error('Field validation errors:', error.field_errors);\n            const fieldErrors = error.field_errors.map((fe: any) => `${fe.field}: ${fe.message}`).join(', ');\n            errorMessage = `Validation failed: ${fieldErrors}`;\n          }\n        } catch (e) {\n          console.error('Error parsing error response:', e);\n        }\n        \n        // Enhanced error handling with more specific conditions\n        const isServerError = response.status >= 500;\n        const isDatabaseError = errorMessage.includes('database') || errorMessage.includes('Database');\n        const isValidationError = response.status === 400 && errorMessage.includes('Validation');\n        \n        if (isServerError || isDatabaseError) {\n          // Critical errors should redirect to error page\n          const contentError = new Error(`${errorMessage}${errorDetails ? ` - ${errorDetails}` : ''}`);\n          errorHandler.handleError(contentError, 'create_content');\n        } else {\n          // For client-side, validation, or other correctable errors, show toast notification\n          const notification = document.createElement('div');\n          notification.className = 'fixed top-4 right-4 bg-red-500 text-white px-4 py-3 rounded-lg shadow-lg z-50';\n          notification.innerHTML = `\n            <div class=\"flex items-center space-x-2\">\n              <span>❌</span>\n              <div>\n                <div class=\"font-semibold\">Content Creation Failed</div>\n                <div class=\"text-xs opacity-90\">${errorMessage}</div>\n                ${isValidationError ? '<div class=\"text-xs opacity-75 mt-1\">Please check all form fields and try again</div>' : ''}\n              </div>\n            </div>\n          `;\n          document.body.appendChild(notification);\n          setTimeout(() => {\n            if (document.body.contains(notification)) {\n              document.body.removeChild(notification);\n            }\n          }, 8000);\n        }\n      }\n    } catch (error) {\n      console.error('Failed to create content:', error);\n      \n      // Use error handler for network/connection errors\n      const createError = error instanceof Error ? error : new Error('Failed to create content. Please check your connection and try again.');\n      errorHandler.handleError(createError, 'create_content_network');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getPlatformIcon = (platform: string) => {\n    switch (platform) {\n      case 'instagram': return <Instagram className=\"w-5 h-5\" />;\n      case 'twitter': return <Twitter className=\"w-5 h-5\" />;\n      case 'youtube': return <Youtube className=\"w-5 h-5\" />;\n      case 'linkedin': return <Linkedin className=\"w-5 h-5\" />;\n      case 'tiktok': return <Music className=\"w-5 h-5\" />;\n      default: return <LinkIcon className=\"w-5 h-5\" />;\n    }\n  };\n\n  const getPlatformColor = (platform: string) => {\n    switch (platform) {\n      case 'instagram': return 'from-pink-500 to-purple-600';\n      case 'twitter': return 'from-blue-400 to-blue-600';\n      case 'youtube': return 'from-red-500 to-red-600';\n      case 'linkedin': return 'from-blue-600 to-blue-800';\n      case 'tiktok': return 'from-black to-gray-800';\n      default: return 'from-gray-500 to-gray-600';\n    }\n  };\n\n  return (\n    <div className=\"max-w-4xl mx-auto space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900\">Create</h1>\n          <p className=\"text-gray-600 mt-2\">Share your content and unlock earning opportunities</p>\n        </div>\n        \n        {/* Info about monetization */}\n        <div className=\"text-right\">\n          <p className=\"text-sm text-gray-500\">Need to create marketing campaigns?</p>\n          <p className=\"text-xs text-gray-400\">Check \"Become Advertiser\" in your profile menu</p>\n        </div>\n      </div>\n\n      {/* Creation Tabs */}\n      <div className=\"bg-white rounded-xl shadow-sm border border-gray-200\">\n        <div className=\"border-b border-gray-200\">\n          <nav className=\"flex space-x-8 px-6\">\n            <button\n              onClick={() => setActiveTab('post')}\n              className={`py-4 border-b-2 font-medium text-sm ${\n                activeTab === 'post'\n                  ? 'border-orange-500 text-orange-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700'\n              }`}\n            >\n              Share Existing Content\n            </button>\n            <button\n              onClick={() => setActiveTab('upload')}\n              className={`py-4 border-b-2 font-medium text-sm ${\n                activeTab === 'upload'\n                  ? 'border-orange-500 text-orange-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700'\n              }`}\n            >\n              Upload New Content\n            </button>\n          </nav>\n        </div>\n\n        <div className=\"p-6\">\n          {activeTab === 'post' && (\n            <form onSubmit={handleCreatePost} className=\"space-y-6\">\n              {/* Platform Selection */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">Platform</label>\n                <div className=\"grid grid-cols-2 md:grid-cols-5 gap-3\">\n                  {PlatformSchema.options.map((platform) => (\n                    <button\n                      key={platform}\n                      type=\"button\"\n                      onClick={() => setPostData({ ...postData, platform })}\n                      className={`p-4 border rounded-lg flex flex-col items-center space-y-2 transition-all ${\n                        postData.platform === platform\n                          ? 'border-orange-500 bg-orange-50 text-orange-700'\n                          : 'border-gray-300 hover:border-gray-400'\n                      }`}\n                    >\n                      <div className={`w-8 h-8 rounded-lg bg-gradient-to-br ${getPlatformColor(platform)} flex items-center justify-center text-white`}>\n                        {getPlatformIcon(platform)}\n                      </div>\n                      <span className=\"text-sm font-medium capitalize\">{platform}</span>\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Content Details */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Content Title</label>\n                  <input\n                    type=\"text\"\n                    required\n                    value={postData.title}\n                    onChange={(e) => setPostData({ ...postData, title: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                    placeholder=\"My amazing content piece...\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Platform URL</label>\n                  <input\n                    type=\"url\"\n                    required\n                    value={postData.platform_url}\n                    onChange={(e) => setPostData({ ...postData, platform_url: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                    placeholder=\"https://instagram.com/p/...\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Description</label>\n                <textarea\n                  rows={3}\n                  value={postData.description}\n                  onChange={(e) => setPostData({ ...postData, description: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                  placeholder=\"Describe your content...\"\n                />\n              </div>\n\n              {/* Enhanced Media Upload/URL Section */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">Media Content (Optional)</label>\n                \n                {/* Upload Mode Toggle */}\n                <div className=\"flex space-x-4 mb-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setUploadMode('url');\n                      removeUploadedFile();\n                    }}\n                    className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${\n                      uploadMode === 'url'\n                        ? 'bg-orange-100 text-orange-700 border border-orange-300'\n                        : 'bg-gray-100 text-gray-600 border border-gray-300 hover:bg-gray-200'\n                    }`}\n                  >\n                    <LinkIcon className=\"w-4 h-4 inline mr-2\" />\n                    Use URL\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setUploadMode('file');\n                      setPostData({ ...postData, media_url: '' });\n                    }}\n                    className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${\n                      uploadMode === 'file'\n                        ? 'bg-orange-100 text-orange-700 border border-orange-300'\n                        : 'bg-gray-100 text-gray-600 border border-gray-300 hover:bg-gray-200'\n                    }`}\n                  >\n                    <Upload className=\"w-4 h-4 inline mr-2\" />\n                    Upload File\n                  </button>\n                </div>\n\n                {uploadMode === 'url' ? (\n                  <div>\n                    <input\n                      type=\"url\"\n                      value={postData.media_url}\n                      onChange={(e) => setPostData({ ...postData, media_url: e.target.value })}\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                      placeholder=\"Direct link to image...\"\n                    />\n                    <p className=\"text-xs text-gray-500 mt-1\">\n                      Make sure the image URL is publicly accessible and ends with .jpg, .png, .gif, or .webp\n                    </p>\n                  </div>\n                ) : (\n                  <div className=\"space-y-4\">\n                    {!uploadedFile ? (\n                      <div \n                        onClick={() => fileInputRef.current?.click()}\n                        className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-orange-400 hover:bg-orange-50 transition-all\"\n                      >\n                        <Upload className=\"w-8 h-8 text-gray-400 mx-auto mb-3\" />\n                        <p className=\"text-gray-600 mb-2\">Click to upload or drag and drop</p>\n                        <p className=\"text-sm text-gray-500\">\n                          Images (JPG, PNG, GIF, WEBP) • Max 10 MB\n                        </p>\n                        <input\n                          ref={fileInputRef}\n                          type=\"file\"\n                          accept=\"image/*\"\n                          onChange={handleFileUpload}\n                          className=\"hidden\"\n                        />\n                      </div>\n                    ) : (\n                      <div className=\"border border-gray-300 rounded-lg p-4\">\n                        <div className=\"flex items-center justify-between mb-3\">\n                          <div className=\"flex items-center space-x-3\">\n                            <div className=\"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center\">\n                              <ImageIcon className=\"w-5 h-5 text-orange-600\" />\n                            </div>\n                            <div>\n                              <p className=\"font-medium text-gray-900\">{uploadedFile.name}</p>\n                              <p className=\"text-sm text-gray-500\">\n                                {(uploadedFile.size / 1024 / 1024).toFixed(2)} MB\n                              </p>\n                              {uploadingFile && (\n                                <p className=\"text-xs text-blue-600\">Uploading...</p>\n                              )}\n                            </div>\n                          </div>\n                          <button\n                            type=\"button\"\n                            onClick={removeUploadedFile}\n                            className=\"p-1 text-gray-400 hover:text-red-500 transition-colors\"\n                            disabled={uploadingFile}\n                          >\n                            <X className=\"w-5 h-5\" />\n                          </button>\n                        </div>\n                        \n                        {/* Image Preview */}\n                        {previewUrl && (\n                          <div className=\"relative\">\n                            <img\n                              src={previewUrl}\n                              alt=\"Preview\"\n                              className=\"w-full h-48 object-cover rounded-lg\"\n                            />\n                            {uploadingFile && (\n                              <div className=\"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-lg\">\n                                <div className=\"text-white text-center\">\n                                  <div className=\"animate-spin w-6 h-6 border-2 border-white border-t-transparent rounded-full mx-auto mb-2\"></div>\n                                  <p className=\"text-sm\">Processing image...</p>\n                                </div>\n                              </div>\n                            )}\n                          </div>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n\n              {/* Investment Settings */}\n              <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-4\">\n                <h3 className=\"text-lg font-semibold text-purple-900 mb-4\">Investment Settings</h3>\n                \n                {/* Total Shares */}\n                <div className=\"mb-4\">\n                  <label className=\"block text-sm font-medium text-purple-700 mb-2\">Total Shares Available</label>\n                  <input\n                    type=\"number\"\n                    min=\"100\"\n                    max=\"1000\"\n                    value={postData.total_shares}\n                    onChange={(e) => setPostData({ ...postData, total_shares: Math.max(100, Number(e.target.value)) })}\n                    className=\"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  />\n                  <p className=\"text-xs text-purple-600 mt-1\">Minimum 100 shares required</p>\n                </div>\n\n                {/* Fund with Gems Toggle */}\n                <div className=\"mb-4\">\n                  <label className=\"flex items-center space-x-3 cursor-pointer\">\n                    <input\n                      type=\"checkbox\"\n                      checked={fundWithGems}\n                      onChange={(e) => {\n                        setFundWithGems(e.target.checked);\n                        if (!e.target.checked) {\n                          setGemFundingAmount(0);\n                          setPostData({ ...postData, share_price: 0.0 });\n                        }\n                      }}\n                      className=\"w-4 h-4 text-purple-600 border-purple-300 rounded focus:ring-purple-500\"\n                    />\n                    <div>\n                      <span className=\"text-sm font-medium text-purple-700\">Fund content with gems</span>\n                      <p className=\"text-xs text-purple-600\">Give your content initial value by funding it with gems</p>\n                    </div>\n                  </label>\n                </div>\n\n                {/* Gem Funding Amount (only shown if funding enabled) */}\n                {fundWithGems && (\n                  <div className=\"mb-4\">\n                    <label className=\"block text-sm font-medium text-purple-700 mb-2\">Gem Funding Amount</label>\n                    <input\n                      type=\"number\"\n                      min=\"1\"\n                      step=\"1\"\n                      value={gemFundingAmount || ''}\n                      onChange={(e) => {\n                        const amount = Number(e.target.value);\n                        setGemFundingAmount(amount);\n                        setPostData({ \n                          ...postData, \n                          share_price: amount > 0 ? amount / postData.total_shares : 0.0 \n                        });\n                      }}\n                      className=\"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                      placeholder=\"Enter gems to fund content\"\n                    />\n                    <div className=\"text-xs text-purple-600 mt-1 space-y-1\">\n                      <p>This will be split across all {postData.total_shares} shares</p>\n                      {gemFundingAmount > 0 && (\n                        <p>Share price: {(gemFundingAmount / postData.total_shares).toFixed(4)} gems per share</p>\n                      )}\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"bg-purple-100 border border-purple-300 rounded-lg p-3\">\n                  <p className=\"text-sm text-purple-700\">\n                    <strong>Total shares:</strong> {postData.total_shares}\n                    {fundWithGems && gemFundingAmount > 0 && (\n                      <>\n                        <br />\n                        <strong>Total funding:</strong> {gemFundingAmount} gems\n                        <br />\n                        <strong>Value per share:</strong> {(gemFundingAmount / postData.total_shares).toFixed(4)} gems\n                      </>\n                    )}\n                    {!fundWithGems && (\n                      <>\n                        <br />\n                        <strong>Initial value:</strong> Free shares (investors can add value later)\n                      </>\n                    )}\n                  </p>\n                </div>\n              </div>\n\n              <button\n                type=\"submit\"\n                disabled={loading || uploadingFile}\n                className=\"w-full bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white py-3 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {loading ? 'Creating...' : uploadingFile ? 'Processing Image...' : 'Create Content Post'}\n              </button>\n            </form>\n          )}\n\n          {activeTab === 'upload' && (\n            <div className=\"space-y-6\">\n              {/* Upload Area */}\n              <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center\">\n                <Upload className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Upload your content</h3>\n                <p className=\"text-gray-600 mb-4\">\n                  Drag and drop your files here, or click to browse\n                </p>\n                <button className=\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200\">\n                  Choose Files\n                </button>\n                <p className=\"text-sm text-gray-500 mt-4\">\n                  Supports: Images (JPG, PNG, WEBP), Videos (MP4, MOV), Documents (PDF, DOC)\n                </p>\n              </div>\n\n              {/* Content Types */}\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center\">\n                  <div className=\"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center mx-auto mb-4\">\n                    <Camera className=\"w-6 h-6 text-white\" />\n                  </div>\n                  <h3 className=\"font-semibold text-blue-900 mb-2\">Photos</h3>\n                  <p className=\"text-sm text-blue-700\">High-quality images for social sharing</p>\n                </div>\n\n                <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-6 text-center\">\n                  <div className=\"w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center mx-auto mb-4\">\n                    <Video className=\"w-6 h-6 text-white\" />\n                  </div>\n                  <h3 className=\"font-semibold text-purple-900 mb-2\">Videos</h3>\n                  <p className=\"text-sm text-purple-700\">Engaging video content for maximum reach</p>\n                </div>\n\n                <div className=\"bg-green-50 border border-green-200 rounded-lg p-6 text-center\">\n                  <div className=\"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center mx-auto mb-4\">\n                    <FileText className=\"w-6 h-6 text-white\" />\n                  </div>\n                  <h3 className=\"font-semibold text-green-900 mb-2\">Documents</h3>\n                  <p className=\"text-sm text-green-700\">Educational and informational content</p>\n                </div>\n              </div>\n\n              {/* Coming Soon */}\n              <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Direct Upload Coming Soon</h3>\n                <p className=\"text-gray-600\">\n                  We're working on direct upload functionality. For now, please use the \"Share Existing Content\" tab \n                  to upload images and link to content you've posted on social platforms.\n                </p>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { X, TrendingUp, Clock, Target, DollarSign } from 'lucide-react';\n\ninterface CreateForecastModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onForecastCreated: () => void;\n}\n\ninterface ContentOption {\n  id: number;\n  title: string;\n  platform: string;\n  platform_url: string;\n  creator_name: string;\n}\n\nexport default function CreateForecastModal({ isOpen, onClose, onForecastCreated }: CreateForecastModalProps) {\n  const [formData, setFormData] = useState({\n    content_id: '',\n    platform: 'instagram',\n    content_url: '',\n    forecast_type: 'views',\n    target_value: '',\n    odds: '2',\n    expires_at: '',\n    initial_amount: '',\n    initial_side: 'over'\n  });\n  const [contentOptions, setContentOptions] = useState<ContentOption[]>([]);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState('');\n  const [userWallet, setUserWallet] = useState({ balance: 0 });\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchContentOptions();\n      fetchUserWallet();\n      \n      // Set default expiration to 24 hours from now\n      const tomorrow = new Date();\n      tomorrow.setDate(tomorrow.getDate() + 1);\n      setFormData(prev => ({\n        ...prev,\n        expires_at: tomorrow.toISOString().slice(0, 16)\n      }));\n    }\n  }, [isOpen]);\n\n  const fetchContentOptions = async () => {\n    try {\n      const response = await fetch('/api/content');\n      if (response.ok) {\n        const content = await response.json();\n        setContentOptions(content.slice(0, 20)); // Limit to recent 20 pieces\n      }\n    } catch (error) {\n      console.error('Failed to fetch content:', error);\n    }\n  };\n\n  const fetchUserWallet = async () => {\n    try {\n      const response = await fetch('/api/users/me/wallets');\n      if (response.ok) {\n        const wallets = await response.json();\n        const usdWallet = wallets.find((w: any) => w.currency_type === 'USD');\n        setUserWallet({ balance: usdWallet?.balance || 0 });\n      }\n    } catch (error) {\n      console.error('Failed to fetch wallet:', error);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n    setError('');\n\n    try {\n      const response = await fetch('/api/social-forecasts', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          ...formData,\n          content_id: formData.content_id ? parseInt(formData.content_id) : undefined,\n          target_value: parseInt(formData.target_value),\n          odds: parseFloat(formData.odds),\n          initial_amount: parseFloat(formData.initial_amount),\n        }),\n      });\n\n      if (response.ok) {\n        onForecastCreated();\n        onClose();\n        setFormData({\n          content_id: '',\n          platform: 'instagram',\n          content_url: '',\n          forecast_type: 'views',\n          target_value: '',\n          odds: '2',\n          expires_at: '',\n          initial_amount: '',\n          initial_side: 'over'\n        });\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Failed to create forecast');\n      }\n    } catch (error) {\n      setError('Failed to create forecast');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleContentSelect = (content: ContentOption) => {\n    setFormData(prev => ({\n      ...prev,\n      content_id: content.id.toString(),\n      platform: content.platform,\n      content_url: content.platform_url\n    }));\n  };\n\n  const potentialPayout = formData.initial_amount ? \n    (parseFloat(formData.initial_amount) * parseFloat(formData.odds)).toFixed(2) : '0';\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"text-xl font-semibold text-gray-900 flex items-center\">\n              <TrendingUp className=\"w-5 h-5 mr-2 text-blue-600\" />\n              Create Social Forecast\n            </h2>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n          <p className=\"text-sm text-gray-600 mt-2\">\n            Create a prediction market by putting up your own initial stake. Others can then predict on your forecast.\n          </p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n              <p className=\"text-red-600 text-sm\">{error}</p>\n            </div>\n          )}\n\n          {/* Content Selection */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Content to Forecast On\n            </label>\n            <div className=\"space-y-3\">\n              {/* Existing Content Options */}\n              {contentOptions.length > 0 && (\n                <div>\n                  <p className=\"text-xs text-gray-500 mb-2\">Select from Promorang content:</p>\n                  <div className=\"max-h-32 overflow-y-auto border border-gray-200 rounded-lg\">\n                    {contentOptions.map((content) => (\n                      <button\n                        key={content.id}\n                        type=\"button\"\n                        onClick={() => handleContentSelect(content)}\n                        className={`w-full text-left p-3 border-b border-gray-100 hover:bg-gray-50 ${\n                          formData.content_id === content.id.toString() ? 'bg-blue-50 border-l-4 border-l-blue-500' : ''\n                        }`}\n                      >\n                        <div className=\"text-sm font-medium text-gray-900\">{content.title}</div>\n                        <div className=\"text-xs text-gray-500\">{content.platform} • by {content.creator_name}</div>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Manual URL Entry */}\n              <div>\n                <p className=\"text-xs text-gray-500 mb-2\">Or enter external content URL:</p>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                  <select\n                    value={formData.platform}\n                    onChange={(e) => setFormData({ ...formData, platform: e.target.value })}\n                    className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  >\n                    <option value=\"instagram\">Instagram</option>\n                    <option value=\"tiktok\">TikTok</option>\n                    <option value=\"youtube\">YouTube</option>\n                    <option value=\"twitter\">Twitter</option>\n                  </select>\n                  <input\n                    type=\"url\"\n                    placeholder=\"Content URL\"\n                    value={formData.content_url}\n                    onChange={(e) => setFormData({ ...formData, content_url: e.target.value, content_id: '' })}\n                    className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    required\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Forecast Details */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                <Target className=\"w-4 h-4 inline mr-1\" />\n                Metric to Predict\n              </label>\n              <select\n                value={formData.forecast_type}\n                onChange={(e) => setFormData({ ...formData, forecast_type: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                required\n              >\n                <option value=\"views\">Views</option>\n                <option value=\"likes\">Likes</option>\n                <option value=\"shares\">Shares</option>\n                <option value=\"comments\">Comments</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Target Value\n              </label>\n              <input\n                type=\"number\"\n                placeholder=\"e.g., 10000\"\n                value={formData.target_value}\n                onChange={(e) => setFormData({ ...formData, target_value: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                required\n                min=\"1\"\n              />\n            </div>\n          </div>\n\n          {/* Odds and Timing */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Payout Odds (multiplier)\n              </label>\n              <select\n                value={formData.odds}\n                onChange={(e) => setFormData({ ...formData, odds: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                required\n              >\n                <option value=\"1.5\">1.5x</option>\n                <option value=\"2\">2x</option>\n                <option value=\"2.5\">2.5x</option>\n                <option value=\"3\">3x</option>\n                <option value=\"4\">4x</option>\n                <option value=\"5\">5x</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                <Clock className=\"w-4 h-4 inline mr-1\" />\n                Expires At\n              </label>\n              <input\n                type=\"datetime-local\"\n                value={formData.expires_at}\n                onChange={(e) => setFormData({ ...formData, expires_at: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                required\n                min={new Date().toISOString().slice(0, 16)}\n              />\n            </div>\n          </div>\n\n          {/* Initial Stake */}\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <h4 className=\"font-medium text-gray-900 mb-3\">Your Initial Prediction & Stake</h4>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Your Prediction\n                </label>\n                <select\n                  value={formData.initial_side}\n                  onChange={(e) => setFormData({ ...formData, initial_side: e.target.value })}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  required\n                >\n                  <option value=\"over\">OVER (will exceed target)</option>\n                  <option value=\"under\">UNDER (will not reach target)</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  <DollarSign className=\"w-4 h-4 inline mr-1\" />\n                  Initial Stake (USD)\n                </label>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  placeholder=\"Amount to stake\"\n                  value={formData.initial_amount}\n                  onChange={(e) => setFormData({ ...formData, initial_amount: e.target.value })}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  required\n                  min=\"1\"\n                  max={userWallet.balance}\n                />\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  Available: ${userWallet.balance.toFixed(2)}\n                </p>\n              </div>\n            </div>\n\n            {formData.initial_amount && (\n              <div className=\"mt-3 p-3 bg-white rounded-lg border border-blue-200\">\n                <p className=\"text-sm text-gray-600\">\n                  Your stake: <span className=\"font-medium\">${formData.initial_amount}</span>\n                </p>\n                <p className=\"text-sm text-gray-600\">\n                  Potential payout if correct: <span className=\"font-medium text-green-600\">${potentialPayout}</span>\n                </p>\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  This creates the initial pool that others can predict against\n                </p>\n              </div>\n            )}\n          </div>\n\n          {/* Submit Button */}\n          <div className=\"flex justify-end space-x-3 pt-4 border-t border-gray-200\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={isSubmitting || !formData.content_url || !formData.target_value || !formData.initial_amount}\n              className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n            >\n              {isSubmitting ? 'Creating...' : 'Create Forecast'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { TrendingUp, Users, Clock, DollarSign, Plus, Target, ExternalLink } from 'lucide-react';\nimport CreateForecastModal from '../components/CreateForecastModal';\nimport PlaceForecastModal from '../components/PlaceForecastModal';\n\ninterface SocialForecast {\n  id: number;\n  creator_id: number;\n  creator_name: string;\n  creator_avatar: string;\n  platform: string;\n  content_url: string;\n  content_id?: number;\n  content_title?: string;\n  content_platform?: string;\n  forecast_type: string;\n  target_value: number;\n  current_value: number;\n  odds: number;\n  pool_size: number;\n  creator_initial_amount: number;\n  creator_side: string;\n  expires_at: string;\n  status: string;\n  created_at: string;\n}\n\ninterface UserForecast {\n  id: number;\n  forecast_id: number;\n  prediction_amount: number;\n  prediction_side: string;\n  potential_payout: number;\n  actual_payout: number;\n  status: string;\n  forecast_type: string;\n  target_value: number;\n  current_value: number;\n  platform: string;\n  content_url: string;\n  expires_at: string;\n  forecast_status: string;\n  result: string;\n  creator_name: string;\n  created_at: string;\n}\n\ninterface ContentPiece {\n  id: number;\n  title: string;\n  creator_name: string;\n  creator_avatar: string;\n  platform: string;\n  share_price: number;\n  current_revenue: number;\n  available_shares: number;\n  total_shares: number;\n  created_at: string;\n}\n\nexport default function Invest() {\n  const [activeTab, setActiveTab] = useState<'forecasts' | 'my-forecasts' | 'my-created' | 'content'>('forecasts');\n  const [forecasts, setForecasts] = useState<SocialForecast[]>([]);\n  const [myForecasts, setMyForecasts] = useState<UserForecast[]>([]);\n  const [myCreatedForecasts, setMyCreatedForecasts] = useState<SocialForecast[]>([]);\n  const [content, setContent] = useState<ContentPiece[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [showPlaceModal, setShowPlaceModal] = useState(false);\n  const [selectedForecast, setSelectedForecast] = useState<SocialForecast | null>(null);\n\n  useEffect(() => {\n    fetchData();\n  }, [activeTab]);\n\n  const fetchData = async () => {\n    setLoading(true);\n    try {\n      if (activeTab === 'forecasts') {\n        const response = await fetch('/api/social-forecasts');\n        if (response.ok) {\n          const data = await response.json();\n          setForecasts(data);\n        } else {\n          console.error('Failed to fetch forecasts:', response.status);\n        }\n      } else if (activeTab === 'my-forecasts') {\n        const response = await fetch('/api/users/forecasts', { credentials: 'include' });\n        if (response.ok) {\n          const data = await response.json();\n          setMyForecasts(data);\n        } else {\n          console.error('Failed to fetch user forecasts:', response.status);\n          setMyForecasts([]); // Set empty array on failure\n        }\n      } else if (activeTab === 'my-created') {\n        const response = await fetch('/api/users/created-forecasts', { credentials: 'include' });\n        if (response.ok) {\n          const data = await response.json();\n          setMyCreatedForecasts(data);\n        } else {\n          console.error('Failed to fetch created forecasts:', response.status);\n          setMyCreatedForecasts([]); // Set empty array on failure\n        }\n      } else if (activeTab === 'content') {\n        const response = await fetch('/api/content');\n        if (response.ok) {\n          const data = await response.json();\n          setContent(data);\n        } else {\n          console.error('Failed to fetch content:', response.status);\n        }\n      }\n    } catch (error) {\n      console.error('Failed to fetch data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePlacePrediction = (forecast: SocialForecast) => {\n    setSelectedForecast(forecast);\n    setShowPlaceModal(true);\n  };\n\n  const handleForecastCreated = () => {\n    fetchData();\n    setShowCreateModal(false);\n  };\n\n  const handlePredictionPlaced = () => {\n    fetchData();\n  };\n\n  const formatNumber = (value: number | null | undefined, options?: Intl.NumberFormatOptions) => {\n    if (typeof value !== 'number' || Number.isNaN(value)) {\n      return '—';\n    }\n    return value.toLocaleString(undefined, options);\n  };\n\n  const formatCurrency = (value: number | null | undefined) => {\n    if (typeof value !== 'number' || Number.isNaN(value)) {\n      return '—';\n    }\n    return value.toLocaleString(undefined, { style: 'currency', currency: 'USD', minimumFractionDigits: 2, maximumFractionDigits: 2 });\n  };\n\n  const formatTimeRemaining = (expiresAt: string) => {\n    const now = new Date();\n    const expires = new Date(expiresAt);\n    const diff = expires.getTime() - now.getTime();\n    \n    if (diff <= 0) return 'Expired';\n    \n    const hours = Math.floor(diff / (1000 * 60 * 60));\n    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\n    \n    if (hours > 24) {\n      const days = Math.floor(hours / 24);\n      return `${days}d ${hours % 24}h`;\n    }\n    \n    return `${hours}h ${minutes}m`;\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'active': return 'text-green-600 bg-green-100';\n      case 'expired': return 'text-gray-600 bg-gray-100';\n      case 'resolved': return 'text-blue-600 bg-blue-100';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  const ForecastCard = ({ forecast }: { forecast: SocialForecast }) => {\n    const isExpired = new Date(forecast.expires_at) <= new Date();\n    \n    return (\n      <div className=\"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow\">\n        <div className=\"flex items-start justify-between mb-4\">\n          <div className=\"flex items-center space-x-3\">\n            <img\n              src={forecast.creator_avatar || '/api/placeholder/32/32'}\n              alt={forecast.creator_name}\n              className=\"w-8 h-8 rounded-full\"\n            />\n            <div>\n              <p className=\"font-medium text-gray-900\">{forecast.creator_name}</p>\n              <p className=\"text-xs text-gray-500\">{forecast.platform}</p>\n            </div>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(forecast.status)}`}>\n              {forecast.status}\n            </span>\n            <a\n              href={forecast.content_url}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"text-gray-400 hover:text-gray-600\"\n            >\n              <ExternalLink className=\"w-4 h-4\" />\n            </a>\n          </div>\n        </div>\n\n        {forecast.content_title && (\n          <div className=\"mb-3 p-3 bg-gray-50 rounded-lg\">\n            <p className=\"text-sm font-medium text-gray-900\">{forecast.content_title}</p>\n            <p className=\"text-xs text-gray-500\">{forecast.content_platform}</p>\n          </div>\n        )}\n\n        <div className=\"space-y-3\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2\">\n              <Target className=\"w-4 h-4 text-blue-600\" />\n              <span className=\"text-sm font-medium\">\n                {forecast.forecast_type} {formatNumber(forecast.target_value)}\n              </span>\n            </div>\n            <div className=\"text-right\">\n              <p className=\"text-sm text-gray-600\">Pool</p>\n              <p className=\"font-semibold text-green-600\">{formatCurrency(forecast.pool_size)}</p>\n            </div>\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2\">\n              <Clock className=\"w-4 h-4 text-gray-400\" />\n              <span className=\"text-sm text-gray-600\">\n                {formatTimeRemaining(forecast.expires_at)}\n              </span>\n            </div>\n            <div className=\"text-right\">\n              <p className=\"text-sm text-gray-600\">Odds</p>\n              <p className=\"font-semibold text-blue-600\">\n                {typeof forecast.odds === 'number' && !Number.isNaN(forecast.odds) ? `${forecast.odds}x` : '—'}\n              </p>\n            </div>\n          </div>\n\n          {forecast.creator_side && forecast.creator_initial_amount > 0 && (\n            <div className=\"bg-blue-50 rounded-lg p-3\">\n              <p className=\"text-xs text-gray-600 mb-1\">Creator's Prediction</p>\n              <p className=\"text-sm font-medium text-blue-600\">\n                {forecast.creator_side.toUpperCase()} • {formatCurrency(forecast.creator_initial_amount)} staked\n              </p>\n            </div>\n          )}\n\n          {!isExpired && (\n            <button\n              onClick={() => handlePlacePrediction(forecast)}\n              className=\"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              Make Your Prediction\n            </button>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  const MyForecastCard = ({ forecast }: { forecast: UserForecast }) => {\n    const isResolved = forecast.forecast_status === 'resolved';\n    const isWin = isResolved && forecast.actual_payout > 0;\n    \n    return (\n      <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\n        <div className=\"flex items-start justify-between mb-4\">\n          <div>\n            <p className=\"font-medium text-gray-900\">\n              {forecast.forecast_type} forecast by {forecast.creator_name}\n            </p>\n            <p className=\"text-sm text-gray-600\">{forecast.platform}</p>\n          </div>\n          <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(forecast.forecast_status)}`}>\n            {forecast.forecast_status}\n          </span>\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-4 mb-4\">\n          <div>\n            <p className=\"text-xs text-gray-500\">Your Prediction</p>\n            <p className=\"font-medium text-blue-600\">{forecast.prediction_side.toUpperCase()}</p>\n          </div>\n          <div>\n            <p className=\"text-xs text-gray-500\">Amount Staked</p>\n            <p className=\"font-medium\">${forecast.prediction_amount.toFixed(2)}</p>\n          </div>\n          <div>\n            <p className=\"text-xs text-gray-500\">Target Value</p>\n            <p className=\"font-medium\">{forecast.target_value.toLocaleString()}</p>\n          </div>\n          <div>\n            <p className=\"text-xs text-gray-500\">Current Value</p>\n            <p className=\"font-medium\">{forecast.current_value.toLocaleString()}</p>\n          </div>\n        </div>\n\n        {isResolved ? (\n          <div className={`p-3 rounded-lg ${isWin ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'}`}>\n            <p className={`text-sm font-medium ${isWin ? 'text-green-600' : 'text-red-600'}`}>\n              {isWin ? 'Won!' : 'Lost'} • {isWin ? `+$${forecast.actual_payout.toFixed(2)}` : `$${forecast.prediction_amount.toFixed(2)} lost`}\n            </p>\n          </div>\n        ) : (\n          <div className=\"bg-gray-50 rounded-lg p-3\">\n            <p className=\"text-sm text-gray-600\">\n              Potential payout: <span className=\"font-medium text-green-600\">${forecast.potential_payout.toFixed(2)}</span>\n            </p>\n            <p className=\"text-xs text-gray-500\">\n              Expires: {formatTimeRemaining(forecast.expires_at)}\n            </p>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  const ContentShareCard = ({ content }: { content: ContentPiece }) => (\n    <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\n      <div className=\"flex items-center space-x-3 mb-4\">\n        <img\n          src={content.creator_avatar || '/api/placeholder/32/32'}\n          alt={content.creator_name}\n          className=\"w-8 h-8 rounded-full\"\n        />\n        <div>\n          <p className=\"font-medium text-gray-900\">{content.creator_name}</p>\n          <p className=\"text-xs text-gray-500\">{content.platform}</p>\n        </div>\n      </div>\n      \n      <h3 className=\"font-medium text-gray-900 mb-3\">{content.title}</h3>\n      \n      <div className=\"grid grid-cols-2 gap-4 mb-4\">\n        <div>\n          <p className=\"text-xs text-gray-500\">Share Price</p>\n          <p className=\"font-medium\">${content.share_price.toFixed(2)}</p>\n        </div>\n        <div>\n          <p className=\"text-xs text-gray-500\">Available</p>\n          <p className=\"font-medium\">{content.available_shares}/{content.total_shares}</p>\n        </div>\n      </div>\n      \n      <div className=\"bg-green-50 rounded-lg p-3 mb-4\">\n        <p className=\"text-sm text-green-600 font-medium\">\n          Revenue: ${content.current_revenue.toFixed(2)}\n        </p>\n      </div>\n      \n      <button className=\"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors\">\n        Buy Shares\n      </button>\n    </div>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"flex items-center justify-between mb-8\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">Investment Hub</h1>\n            <p className=\"text-gray-600\">Create forecasts, make predictions, and invest in creator success</p>\n          </div>\n          <button\n            onClick={() => setShowCreateModal(true)}\n            className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2\"\n          >\n            <Plus className=\"w-4 h-4\" />\n            <span>Create Forecast</span>\n          </button>\n        </div>\n\n        {/* Tab Navigation */}\n        <div className=\"border-b border-gray-200 mb-8\">\n          <nav className=\"-mb-px flex space-x-8\">\n            {[\n              { id: 'forecasts', label: 'All Forecasts', icon: TrendingUp },\n              { id: 'my-forecasts', label: 'My Predictions', icon: Users },\n              { id: 'my-created', label: 'My Forecasts', icon: Target },\n              { id: 'content', label: 'Content Shares', icon: DollarSign },\n            ].map((tab) => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id as any)}\n                className={`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ${\n                  activeTab === tab.id\n                    ? 'border-blue-500 text-blue-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                }`}\n              >\n                <tab.icon className=\"w-4 h-4\" />\n                <span>{tab.label}</span>\n              </button>\n            ))}\n          </nav>\n        </div>\n\n        {/* Content */}\n        {loading ? (\n          <div className=\"flex items-center justify-center py-12\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {activeTab === 'forecasts' && forecasts.map((forecast) => (\n              <ForecastCard key={forecast.id} forecast={forecast} />\n            ))}\n            \n            {activeTab === 'my-forecasts' && myForecasts.map((forecast) => (\n              <MyForecastCard key={forecast.id} forecast={forecast} />\n            ))}\n            \n            {activeTab === 'my-created' && myCreatedForecasts.map((forecast) => (\n              <ForecastCard key={forecast.id} forecast={forecast} />\n            ))}\n            \n            {activeTab === 'content' && content.map((piece) => (\n              <ContentShareCard key={piece.id} content={piece} />\n            ))}\n          </div>\n        )}\n\n        {/* Empty States */}\n        {!loading && (\n          <>\n            {activeTab === 'forecasts' && forecasts.length === 0 && (\n              <div className=\"text-center py-12\">\n                <TrendingUp className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No Active Forecasts</h3>\n                <p className=\"text-gray-600 mb-4\">Be the first to create a prediction market! Put up your own stake and let others predict on your forecast.</p>\n                <button\n                  onClick={() => setShowCreateModal(true)}\n                  className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n                >\n                  Create First Forecast\n                </button>\n              </div>\n            )}\n            \n            {activeTab === 'my-forecasts' && myForecasts.length === 0 && (\n              <div className=\"text-center py-12\">\n                <Users className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No Predictions Yet</h3>\n                <p className=\"text-gray-600\">Browse active forecasts and make your first prediction to start earning!</p>\n              </div>\n            )}\n            \n            {activeTab === 'my-created' && myCreatedForecasts.length === 0 && (\n              <div className=\"text-center py-12\">\n                <Target className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No Created Forecasts</h3>\n                <p className=\"text-gray-600 mb-4\">Create your first prediction market by putting up initial stake and letting others predict against you!</p>\n                <button\n                  onClick={() => setShowCreateModal(true)}\n                  className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n                >\n                  Create Forecast\n                </button>\n              </div>\n            )}\n            \n            {activeTab === 'content' && content.length === 0 && (\n              <div className=\"text-center py-12\">\n                <DollarSign className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No Content Available</h3>\n                <p className=\"text-gray-600\">No content shares are currently available for investment.</p>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n\n      {/* Modals */}\n      <CreateForecastModal\n        isOpen={showCreateModal}\n        onClose={() => setShowCreateModal(false)}\n        onForecastCreated={handleForecastCreated}\n      />\n\n      {selectedForecast && (\n        <PlaceForecastModal\n          isOpen={showPlaceModal}\n          onClose={() => setShowPlaceModal(false)}\n          forecast={selectedForecast}\n          onPredictionPlaced={handlePredictionPlaced}\n        />\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { X, DollarSign, CreditCard, Building, Mail, AlertTriangle, CheckCircle, Loader2 } from 'lucide-react';\nimport { UserType, WithdrawalMethodType, UserPaymentPreferenceType } from '@/shared/types';\n\ninterface WithdrawalModalProps {\n  user: UserType | null;\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: () => void;\n}\n\nexport default function WithdrawalModal({ user, isOpen, onClose, onSuccess }: WithdrawalModalProps) {\n  const [step, setStep] = useState<'amount' | 'method' | 'details' | 'confirm'>('amount');\n  const [amount, setAmount] = useState<number>(200);\n  const [selectedMethod, setSelectedMethod] = useState<string>('');\n  const [paymentDetails, setPaymentDetails] = useState<Record<string, string>>({});\n  const [withdrawalMethods, setWithdrawalMethods] = useState<WithdrawalMethodType[]>([]);\n  const [userPreferences, setUserPreferences] = useState<UserPaymentPreferenceType[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [saveAsDefault, setSaveAsDefault] = useState(false);\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchWithdrawalMethods();\n      fetchUserPreferences();\n    }\n  }, [isOpen]);\n\n  const fetchWithdrawalMethods = async () => {\n    try {\n      const response = await fetch('/api/withdrawal/methods', { credentials: 'include' });\n      const methods = await response.json();\n      setWithdrawalMethods(methods);\n    } catch (error) {\n      console.error('Failed to fetch withdrawal methods:', error);\n    }\n  };\n\n  const fetchUserPreferences = async () => {\n    try {\n      const response = await fetch('/api/users/payment-preferences', { credentials: 'include' });\n      const preferences = await response.json();\n      setUserPreferences(preferences);\n    } catch (error) {\n      console.error('Failed to fetch user preferences:', error);\n    }\n  };\n\n  if (!isOpen || !user) return null;\n\n  const eligibleForWithdrawal = (user.gems_balance || 0) >= 200;\n  const selectedMethodData = withdrawalMethods.find(m => m.method_name === selectedMethod);\n  const feeAmount = selectedMethodData ? (amount * selectedMethodData.fee_percentage / 100) : 0;\n  const netAmount = amount - feeAmount;\n\n  const getMethodIcon = (method: string) => {\n    if (method.startsWith('crypto_')) return <CreditCard className=\"w-5 h-5\" />;\n    if (method === 'bank_account') return <Building className=\"w-5 h-5\" />;\n    if (method === 'paypal' || method === 'payoneer') return <Mail className=\"w-5 h-5\" />;\n    return <DollarSign className=\"w-5 h-5\" />;\n  };\n\n  const getRequiredFields = (method: string): string[] => {\n    const methodData = withdrawalMethods.find(m => m.method_name === method);\n    if (!methodData) return [];\n    try {\n      return JSON.parse(methodData.required_fields);\n    } catch {\n      return [];\n    }\n  };\n\n  const getFieldLabel = (field: string) => {\n    const labels: Record<string, string> = {\n      wallet_address: 'Wallet Address',\n      network: 'Network',\n      email_address: 'Email Address',\n      account_holder_name: 'Account Holder Name',\n      bank_name: 'Bank Name',\n      account_number: 'Account Number',\n      routing_number: 'Routing Number',\n      swift_code: 'SWIFT Code',\n      country: 'Country',\n      full_name: 'Full Name',\n      address_line_1: 'Address Line 1',\n      address_line_2: 'Address Line 2 (Optional)',\n      city: 'City',\n      state: 'State/Province',\n      postal_code: 'Postal Code',\n      phone_number: 'Phone Number'\n    };\n    return labels[field] || field.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n  };\n\n  const getFieldType = (field: string) => {\n    if (field === 'email_address') return 'email';\n    if (field === 'phone_number') return 'tel';\n    return 'text';\n  };\n\n  const isFieldRequired = (field: string): boolean => {\n    return !field.includes('optional') && field !== 'address_line_2';\n  };\n\n  const handleSubmitWithdrawal = async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Save payment preference if requested\n      if (saveAsDefault) {\n        await fetch('/api/users/payment-preferences', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          credentials: 'include',\n          body: JSON.stringify({\n            payment_method: selectedMethod,\n            preference_data: paymentDetails,\n            is_default: true\n          })\n        });\n      }\n\n      // Submit withdrawal request\n      const response = await fetch('/api/withdrawal/request', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({\n          amount,\n          payment_method: selectedMethod,\n          payment_details: paymentDetails\n        })\n      });\n\n      if (response.ok) {\n        onSuccess();\n        onClose();\n        resetForm();\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Withdrawal request failed');\n      }\n    } catch (error) {\n      console.error('Withdrawal failed:', error);\n      setError('Network error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const resetForm = () => {\n    setStep('amount');\n    setAmount(200);\n    setSelectedMethod('');\n    setPaymentDetails({});\n    setError(null);\n    setSaveAsDefault(false);\n  };\n\n  const handleClose = () => {\n    resetForm();\n    onClose();\n  };\n\n  const canProceedToMethod = amount >= 200 && amount <= (user.gems_balance || 0);\n  const canProceedToDetails = selectedMethod !== '';\n  const canProceedToConfirm = () => {\n    const requiredFields = getRequiredFields(selectedMethod);\n    return requiredFields.every(field => \n      !isFieldRequired(field) || (paymentDetails[field] && paymentDetails[field].trim() !== '')\n    );\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-xl font-bold text-gray-900\">Withdraw Gems</h2>\n          <button\n            onClick={handleClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        {!eligibleForWithdrawal ? (\n          <div className=\"text-center py-8\">\n            <AlertTriangle className=\"w-12 h-12 text-yellow-500 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Insufficient Gems</h3>\n            <p className=\"text-gray-600 mb-4\">You need at least 200 gems to request a withdrawal.</p>\n            <p className=\"text-sm text-gray-500\">Current balance: {user.gems_balance || 0} gems</p>\n            <button\n              onClick={handleClose}\n              className=\"mt-4 px-6 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors\"\n            >\n              Close\n            </button>\n          </div>\n        ) : (\n          <div className=\"space-y-6\">\n            {/* Progress Indicator */}\n            <div className=\"flex items-center space-x-2 mb-6\">\n              {['amount', 'method', 'details', 'confirm'].map((stepName, index) => (\n                <div key={stepName} className=\"flex items-center\">\n                  <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${\n                    step === stepName ? 'bg-purple-500 text-white' :\n                    ['amount', 'method', 'details', 'confirm'].indexOf(step) > index ? 'bg-green-500 text-white' :\n                    'bg-gray-200 text-gray-600'\n                  }`}>\n                    {index + 1}\n                  </div>\n                  {index < 3 && <div className=\"w-12 h-0.5 bg-gray-200 mx-2\" />}\n                </div>\n              ))}\n            </div>\n\n            {/* Step 1: Amount */}\n            {step === 'amount' && (\n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Withdrawal Amount (Gems)\n                  </label>\n                  <div className=\"space-y-2\">\n                    <input\n                      type=\"number\"\n                      value={amount}\n                      onChange={(e) => setAmount(Math.max(200, parseInt(e.target.value) || 200))}\n                      min=\"200\"\n                      max={user.gems_balance || 0}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                    />\n                    <div className=\"flex space-x-2\">\n                      {[200, 500, 1000, user.gems_balance || 0].filter((v, i, arr) => arr.indexOf(v) === i && v >= 200).map((preset) => (\n                        <button\n                          key={preset}\n                          onClick={() => setAmount(preset)}\n                          className=\"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-full text-gray-700\"\n                        >\n                          {preset === user.gems_balance ? 'Max' : preset.toLocaleString()}\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"bg-purple-50 rounded-lg p-4\">\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span>Available Balance:</span>\n                    <span className=\"font-medium\">{user.gems_balance} gems</span>\n                  </div>\n                  <div className=\"flex items-center justify-between text-sm mt-2\">\n                    <span>Withdrawal Fee (2.5%):</span>\n                    <span className=\"font-medium\">~{Math.ceil(amount * 0.025)} gems</span>\n                  </div>\n                </div>\n\n                <div className=\"flex space-x-3\">\n                  <button\n                    onClick={handleClose}\n                    className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    onClick={() => setStep('method')}\n                    disabled={!canProceedToMethod}\n                    className=\"flex-1 bg-purple-500 hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-colors\"\n                  >\n                    Next\n                  </button>\n                </div>\n              </div>\n            )}\n\n            {/* Step 2: Payment Method */}\n            {step === 'method' && (\n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n                    Select Payment Method\n                  </label>\n                  \n                  {/* Saved Payment Methods */}\n                  {userPreferences.length > 0 && (\n                    <div className=\"mb-4\">\n                      <h4 className=\"text-sm font-medium text-gray-600 mb-2\">Saved Methods</h4>\n                      <div className=\"grid grid-cols-1 gap-2\">\n                        {userPreferences.map((pref) => {\n                          const methodData = withdrawalMethods.find(m => m.method_name === pref.payment_method);\n                          if (!methodData) return null;\n                          \n                          let displayInfo = '';\n                          try {\n                            const data = JSON.parse(pref.preference_data);\n                            if (data.email_address) displayInfo = data.email_address;\n                            else if (data.wallet_address) displayInfo = `${data.wallet_address.slice(0, 6)}...${data.wallet_address.slice(-4)}`;\n                            else if (data.account_number) displayInfo = `****${data.account_number.slice(-4)}`;\n                            else displayInfo = 'Saved method';\n                          } catch {\n                            displayInfo = 'Saved method';\n                          }\n\n                          return (\n                            <button\n                              key={pref.id}\n                              onClick={() => {\n                                setSelectedMethod(pref.payment_method);\n                                setPaymentDetails(JSON.parse(pref.preference_data));\n                              }}\n                              className={`w-full p-3 border-2 rounded-lg text-left transition-colors ${\n                                selectedMethod === pref.payment_method\n                                  ? 'border-purple-500 bg-purple-50'\n                                  : 'border-gray-200 hover:border-gray-300'\n                              }`}\n                            >\n                              <div className=\"flex items-center space-x-3\">\n                                {getMethodIcon(pref.payment_method)}\n                                <div>\n                                  <p className=\"font-medium\">{methodData.display_name}</p>\n                                  <p className=\"text-sm text-gray-500\">{displayInfo}</p>\n                                </div>\n                                {pref.is_default && (\n                                  <span className=\"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full\">Default</span>\n                                )}\n                              </div>\n                            </button>\n                          );\n                        })}\n                      </div>\n                      <div className=\"relative my-4\">\n                        <div className=\"absolute inset-0 flex items-center\">\n                          <div className=\"w-full border-t border-gray-300\" />\n                        </div>\n                        <div className=\"relative flex justify-center text-sm\">\n                          <span className=\"px-2 bg-white text-gray-500\">Or choose a new method</span>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                  \n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                    {withdrawalMethods.filter(method => method.is_active).map((method) => (\n                      <button\n                        key={method.method_name}\n                        onClick={() => setSelectedMethod(method.method_name)}\n                        className={`p-4 border-2 rounded-lg text-left transition-colors ${\n                          selectedMethod === method.method_name\n                            ? 'border-purple-500 bg-purple-50'\n                            : 'border-gray-200 hover:border-gray-300'\n                        }`}\n                      >\n                        <div className=\"flex items-center space-x-3 mb-2\">\n                          {getMethodIcon(method.method_name)}\n                          <span className=\"font-medium\">{method.display_name}</span>\n                        </div>\n                        <p className=\"text-xs text-gray-500\">{method.processing_time}</p>\n                        <p className=\"text-xs text-gray-500\">Min: {method.min_amount} gems</p>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                <div className=\"flex space-x-3\">\n                  <button\n                    onClick={() => setStep('amount')}\n                    className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n                  >\n                    Back\n                  </button>\n                  <button\n                    onClick={() => setStep('details')}\n                    disabled={!canProceedToDetails}\n                    className=\"flex-1 bg-purple-500 hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-colors\"\n                  >\n                    Next\n                  </button>\n                </div>\n              </div>\n            )}\n\n            {/* Step 3: Payment Details */}\n            {step === 'details' && selectedMethodData && (\n              <div className=\"space-y-4\">\n                <div>\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-1\">{selectedMethodData.display_name}</h3>\n                  <p className=\"text-sm text-gray-600 mb-4\">Processing time: {selectedMethodData.processing_time}</p>\n                </div>\n\n                <div className=\"space-y-4\">\n                  {getRequiredFields(selectedMethod).map((field) => (\n                    <div key={field}>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        {getFieldLabel(field)}\n                        {isFieldRequired(field) && <span className=\"text-red-500 ml-1\">*</span>}\n                      </label>\n                      {field === 'network' && selectedMethod.startsWith('crypto_') ? (\n                        <select\n                          value={paymentDetails[field] || ''}\n                          onChange={(e) => setPaymentDetails(prev => ({ ...prev, [field]: e.target.value }))}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                          required={isFieldRequired(field)}\n                        >\n                          <option value=\"\">Select Network</option>\n                          <option value=\"mainnet\">Mainnet</option>\n                          <option value=\"ethereum\">Ethereum (ERC-20)</option>\n                          <option value=\"bsc\">Binance Smart Chain (BEP-20)</option>\n                          <option value=\"polygon\">Polygon</option>\n                          <option value=\"arbitrum\">Arbitrum</option>\n                        </select>\n                      ) : field === 'country' ? (\n                        <select\n                          value={paymentDetails[field] || ''}\n                          onChange={(e) => setPaymentDetails(prev => ({ ...prev, [field]: e.target.value }))}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                          required={isFieldRequired(field)}\n                        >\n                          <option value=\"\">Select Country</option>\n                          <option value=\"US\">United States</option>\n                          <option value=\"CA\">Canada</option>\n                          <option value=\"GB\">United Kingdom</option>\n                          <option value=\"AU\">Australia</option>\n                          <option value=\"DE\">Germany</option>\n                          <option value=\"FR\">France</option>\n                          <option value=\"IT\">Italy</option>\n                          <option value=\"ES\">Spain</option>\n                          <option value=\"NL\">Netherlands</option>\n                          <option value=\"SE\">Sweden</option>\n                          <option value=\"NO\">Norway</option>\n                          <option value=\"DK\">Denmark</option>\n                          <option value=\"FI\">Finland</option>\n                          <option value=\"JP\">Japan</option>\n                          <option value=\"KR\">South Korea</option>\n                          <option value=\"SG\">Singapore</option>\n                          <option value=\"HK\">Hong Kong</option>\n                          <option value=\"IN\">India</option>\n                          <option value=\"BR\">Brazil</option>\n                          <option value=\"MX\">Mexico</option>\n                        </select>\n                      ) : (\n                        <input\n                          type={getFieldType(field)}\n                          value={paymentDetails[field] || ''}\n                          onChange={(e) => setPaymentDetails(prev => ({ ...prev, [field]: e.target.value }))}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                          required={isFieldRequired(field)}\n                          placeholder={field === 'wallet_address' ? 'Enter your wallet address' : ''}\n                        />\n                      )}\n                    </div>\n                  ))}\n                </div>\n\n                <div className=\"flex items-center space-x-2\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"saveAsDefault\"\n                    checked={saveAsDefault}\n                    onChange={(e) => setSaveAsDefault(e.target.checked)}\n                    className=\"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500\"\n                  />\n                  <label htmlFor=\"saveAsDefault\" className=\"text-sm text-gray-700\">\n                    Save this payment method for future withdrawals\n                  </label>\n                </div>\n\n                <div className=\"flex space-x-3\">\n                  <button\n                    onClick={() => setStep('method')}\n                    className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n                  >\n                    Back\n                  </button>\n                  <button\n                    onClick={() => setStep('confirm')}\n                    disabled={!canProceedToConfirm()}\n                    className=\"flex-1 bg-purple-500 hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-colors\"\n                  >\n                    Review\n                  </button>\n                </div>\n              </div>\n            )}\n\n            {/* Step 4: Confirmation */}\n            {step === 'confirm' && selectedMethodData && (\n              <div className=\"space-y-6\">\n                <div>\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Review Withdrawal Request</h3>\n                  \n                  <div className=\"bg-gray-50 rounded-lg p-4 space-y-3\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-600\">Withdrawal Amount:</span>\n                      <span className=\"font-medium\">{amount} gems</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-600\">Processing Fee ({selectedMethodData.fee_percentage}%):</span>\n                      <span className=\"font-medium text-red-600\">-{feeAmount.toFixed(2)} gems</span>\n                    </div>\n                    <div className=\"border-t pt-2\">\n                      <div className=\"flex justify-between text-lg font-bold\">\n                        <span>Net Amount:</span>\n                        <span className=\"text-green-600\">{netAmount.toFixed(2)} gems</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"mt-4 p-4 border border-gray-200 rounded-lg\">\n                    <h4 className=\"font-medium text-gray-900 mb-2\">Payment Method: {selectedMethodData.display_name}</h4>\n                    <div className=\"text-sm text-gray-600 space-y-1\">\n                      {Object.entries(paymentDetails).map(([key, value]) => (\n                        <div key={key} className=\"flex justify-between\">\n                          <span className=\"capitalize\">{getFieldLabel(key)}:</span>\n                          <span className=\"font-mono\">\n                            {key.includes('address') && value.length > 20 \n                              ? `${value.slice(0, 8)}...${value.slice(-8)}`\n                              : value\n                            }\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n\n                  <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n                    <div className=\"flex items-start space-x-3\">\n                      <AlertTriangle className=\"w-5 h-5 text-yellow-600 mt-0.5\" />\n                      <div className=\"text-sm text-yellow-800\">\n                        <p className=\"font-medium mb-1\">Important Notice:</p>\n                        <ul className=\"list-disc list-inside space-y-1\">\n                          <li>Withdrawal requests cannot be cancelled once submitted</li>\n                          <li>Processing time: {selectedMethodData.processing_time}</li>\n                          <li>Ensure all payment details are correct</li>\n                          <li>You will receive an email confirmation once processed</li>\n                        </ul>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {error && (\n                  <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n                    <p className=\"text-sm text-red-700\">{error}</p>\n                  </div>\n                )}\n\n                <div className=\"flex space-x-3\">\n                  <button\n                    onClick={() => setStep('details')}\n                    disabled={loading}\n                    className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors disabled:opacity-50\"\n                  >\n                    Back\n                  </button>\n                  <button\n                    onClick={handleSubmitWithdrawal}\n                    disabled={loading}\n                    className=\"flex-1 bg-green-500 hover:bg-green-600 disabled:opacity-50 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2\"\n                  >\n                    {loading ? (\n                      <Loader2 className=\"w-4 h-4 animate-spin\" />\n                    ) : (\n                      <>\n                        <CheckCircle className=\"w-4 h-4\" />\n                        <span>Submit Withdrawal</span>\n                      </>\n                    )}\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { X, CreditCard, Building, Mail, Trash2, Star, Plus, Edit3 } from 'lucide-react';\nimport { UserType, UserPaymentPreferenceType, WithdrawalMethodType } from '@/shared/types';\n\ninterface PaymentPreferencesModalProps {\n  user: UserType | null;\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: () => void;\n}\n\nexport default function PaymentPreferencesModal({ user, isOpen, onClose, onSuccess }: PaymentPreferencesModalProps) {\n  const [userPreferences, setUserPreferences] = useState<UserPaymentPreferenceType[]>([]);\n  const [withdrawalMethods, setWithdrawalMethods] = useState<WithdrawalMethodType[]>([]);\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [editingId, setEditingId] = useState<number | null>(null);\n  const [selectedMethod, setSelectedMethod] = useState<string>('');\n  const [paymentDetails, setPaymentDetails] = useState<Record<string, string>>({});\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchData();\n    }\n  }, [isOpen]);\n\n  const fetchData = async () => {\n    try {\n      const [preferencesResponse, methodsResponse] = await Promise.all([\n        fetch('/api/users/payment-preferences', { credentials: 'include' }),\n        fetch('/api/withdrawal/methods', { credentials: 'include' })\n      ]);\n\n      const preferences = await preferencesResponse.json();\n      const methods = await methodsResponse.json();\n\n      setUserPreferences(preferences);\n      setWithdrawalMethods(methods);\n    } catch (error) {\n      console.error('Failed to fetch data:', error);\n    }\n  };\n\n  if (!isOpen || !user) return null;\n\n  const getMethodIcon = (method: string) => {\n    if (method.startsWith('crypto_')) return <CreditCard className=\"w-5 h-5\" />;\n    if (method === 'bank_account') return <Building className=\"w-5 h-5\" />;\n    if (method === 'paypal' || method === 'payoneer') return <Mail className=\"w-5 h-5\" />;\n    return <CreditCard className=\"w-5 h-5\" />;\n  };\n\n  const getRequiredFields = (method: string): string[] => {\n    const methodData = withdrawalMethods.find(m => m.method_name === method);\n    if (!methodData) return [];\n    try {\n      return JSON.parse(methodData.required_fields);\n    } catch {\n      return [];\n    }\n  };\n\n  const getFieldLabel = (field: string) => {\n    const labels: Record<string, string> = {\n      wallet_address: 'Wallet Address',\n      network: 'Network',\n      email_address: 'Email Address',\n      account_holder_name: 'Account Holder Name',\n      bank_name: 'Bank Name',\n      account_number: 'Account Number',\n      routing_number: 'Routing Number',\n      swift_code: 'SWIFT Code',\n      country: 'Country',\n      full_name: 'Full Name',\n      address_line_1: 'Address Line 1',\n      address_line_2: 'Address Line 2',\n      city: 'City',\n      state: 'State/Province',\n      postal_code: 'Postal Code',\n      phone_number: 'Phone Number'\n    };\n    return labels[field] || field.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n  };\n\n  const getDisplayInfo = (preference: UserPaymentPreferenceType) => {\n    try {\n      const data = JSON.parse(preference.preference_data);\n      if (data.email_address) return data.email_address;\n      if (data.wallet_address) return `${data.wallet_address.slice(0, 8)}...${data.wallet_address.slice(-6)}`;\n      if (data.account_number) return `****${data.account_number.slice(-4)}`;\n      if (data.full_name) return data.full_name;\n      return 'Payment method';\n    } catch {\n      return 'Payment method';\n    }\n  };\n\n  const handleSavePreference = async () => {\n    if (!selectedMethod || Object.keys(paymentDetails).length === 0) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch('/api/users/payment-preferences', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({\n          payment_method: selectedMethod,\n          preference_data: paymentDetails,\n          is_default: userPreferences.length === 0 // First one becomes default\n        })\n      });\n\n      if (response.ok) {\n        await fetchData();\n        resetForm();\n        onSuccess();\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Failed to save payment preference');\n      }\n    } catch (error) {\n      console.error('Failed to save preference:', error);\n      setError('Network error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDeletePreference = async (id: number) => {\n    if (!confirm('Are you sure you want to delete this payment method?')) return;\n\n    try {\n      const response = await fetch(`/api/users/payment-preferences/${id}`, {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n\n      if (response.ok) {\n        await fetchData();\n        onSuccess();\n      }\n    } catch (error) {\n      console.error('Failed to delete preference:', error);\n    }\n  };\n\n  const handleSetDefault = async (id: number) => {\n    try {\n      const response = await fetch(`/api/users/payment-preferences/${id}/set-default`, {\n        method: 'POST',\n        credentials: 'include'\n      });\n\n      if (response.ok) {\n        await fetchData();\n        onSuccess();\n      }\n    } catch (error) {\n      console.error('Failed to set default:', error);\n    }\n  };\n\n  const resetForm = () => {\n    setShowAddForm(false);\n    setEditingId(null);\n    setSelectedMethod('');\n    setPaymentDetails({});\n    setError(null);\n  };\n\n  const startEdit = (preference: UserPaymentPreferenceType) => {\n    setEditingId(preference.id);\n    setSelectedMethod(preference.payment_method);\n    try {\n      setPaymentDetails(JSON.parse(preference.preference_data));\n    } catch {\n      setPaymentDetails({});\n    }\n    setShowAddForm(true);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-xl p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-xl font-bold text-gray-900\">Payment Preferences</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        <div className=\"space-y-6\">\n          {/* Saved Payment Methods */}\n          <div>\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Saved Payment Methods</h3>\n              <button\n                onClick={() => setShowAddForm(true)}\n                className=\"flex items-center space-x-2 px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-medium transition-colors\"\n              >\n                <Plus className=\"w-4 h-4\" />\n                <span>Add Method</span>\n              </button>\n            </div>\n\n            {userPreferences.length === 0 ? (\n              <div className=\"text-center py-8 bg-gray-50 rounded-lg\">\n                <CreditCard className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No payment methods saved</h3>\n                <p className=\"text-gray-600 mb-4\">Add a payment method to make withdrawals easier</p>\n                <button\n                  onClick={() => setShowAddForm(true)}\n                  className=\"px-6 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-medium transition-colors\"\n                >\n                  Add Payment Method\n                </button>\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {userPreferences.map((preference) => {\n                  const methodData = withdrawalMethods.find(m => m.method_name === preference.payment_method);\n                  return (\n                    <div key={preference.id} className=\"border border-gray-200 rounded-lg p-4\">\n                      <div className=\"flex items-start justify-between mb-3\">\n                        <div className=\"flex items-center space-x-3\">\n                          {getMethodIcon(preference.payment_method)}\n                          <div>\n                            <h4 className=\"font-medium text-gray-900\">{methodData?.display_name}</h4>\n                            <p className=\"text-sm text-gray-600\">{getDisplayInfo(preference)}</p>\n                          </div>\n                        </div>\n                        {preference.is_default && (\n                          <span className=\"flex items-center space-x-1 text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full\">\n                            <Star className=\"w-3 h-3\" />\n                            <span>Default</span>\n                          </span>\n                        )}\n                      </div>\n                      \n                      <div className=\"flex space-x-2\">\n                        {!preference.is_default && (\n                          <button\n                            onClick={() => handleSetDefault(preference.id)}\n                            className=\"flex-1 text-xs px-3 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors\"\n                          >\n                            Set Default\n                          </button>\n                        )}\n                        <button\n                          onClick={() => startEdit(preference)}\n                          className=\"flex-1 text-xs px-3 py-1 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition-colors flex items-center justify-center space-x-1\"\n                        >\n                          <Edit3 className=\"w-3 h-3\" />\n                          <span>Edit</span>\n                        </button>\n                        <button\n                          onClick={() => handleDeletePreference(preference.id)}\n                          className=\"flex-1 text-xs px-3 py-1 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors flex items-center justify-center space-x-1\"\n                        >\n                          <Trash2 className=\"w-3 h-3\" />\n                          <span>Delete</span>\n                        </button>\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n\n          {/* Add/Edit Form */}\n          {showAddForm && (\n            <div className=\"border-t pt-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\n                {editingId ? 'Edit Payment Method' : 'Add Payment Method'}\n              </h3>\n              \n              <div className=\"space-y-4\">\n                {/* Method Selection */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Payment Method\n                  </label>\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n                    {withdrawalMethods.filter(method => method.is_active).map((method) => (\n                      <button\n                        key={method.method_name}\n                        onClick={() => setSelectedMethod(method.method_name)}\n                        disabled={editingId !== null}\n                        className={`p-3 border-2 rounded-lg text-left transition-colors ${\n                          selectedMethod === method.method_name\n                            ? 'border-purple-500 bg-purple-50'\n                            : 'border-gray-200 hover:border-gray-300'\n                        } ${editingId ? 'opacity-50 cursor-not-allowed' : ''}`}\n                      >\n                        <div className=\"flex items-center space-x-2 mb-1\">\n                          {getMethodIcon(method.method_name)}\n                          <span className=\"font-medium text-sm\">{method.display_name}</span>\n                        </div>\n                        <p className=\"text-xs text-gray-500\">{method.processing_time}</p>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Payment Details Form */}\n                {selectedMethod && (\n                  <div className=\"space-y-3\">\n                    <h4 className=\"font-medium text-gray-900\">Payment Details</h4>\n                    {getRequiredFields(selectedMethod).map((field) => (\n                      <div key={field}>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          {getFieldLabel(field)}\n                          {field !== 'address_line_2' && <span className=\"text-red-500 ml-1\">*</span>}\n                        </label>\n                        {field === 'network' && selectedMethod.startsWith('crypto_') ? (\n                          <select\n                            value={paymentDetails[field] || ''}\n                            onChange={(e) => setPaymentDetails(prev => ({ ...prev, [field]: e.target.value }))}\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                          >\n                            <option value=\"\">Select Network</option>\n                            <option value=\"mainnet\">Mainnet</option>\n                            <option value=\"ethereum\">Ethereum (ERC-20)</option>\n                            <option value=\"bsc\">Binance Smart Chain (BEP-20)</option>\n                            <option value=\"polygon\">Polygon</option>\n                            <option value=\"arbitrum\">Arbitrum</option>\n                          </select>\n                        ) : field === 'country' ? (\n                          <select\n                            value={paymentDetails[field] || ''}\n                            onChange={(e) => setPaymentDetails(prev => ({ ...prev, [field]: e.target.value }))}\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                          >\n                            <option value=\"\">Select Country</option>\n                            <option value=\"US\">United States</option>\n                            <option value=\"CA\">Canada</option>\n                            <option value=\"GB\">United Kingdom</option>\n                            <option value=\"AU\">Australia</option>\n                            <option value=\"DE\">Germany</option>\n                            <option value=\"FR\">France</option>\n                            <option value=\"IT\">Italy</option>\n                            <option value=\"ES\">Spain</option>\n                            <option value=\"NL\">Netherlands</option>\n                            <option value=\"JP\">Japan</option>\n                            <option value=\"SG\">Singapore</option>\n                            <option value=\"IN\">India</option>\n                            <option value=\"BR\">Brazil</option>\n                            <option value=\"MX\">Mexico</option>\n                          </select>\n                        ) : (\n                          <input\n                            type={field === 'email_address' ? 'email' : field === 'phone_number' ? 'tel' : 'text'}\n                            value={paymentDetails[field] || ''}\n                            onChange={(e) => setPaymentDetails(prev => ({ ...prev, [field]: e.target.value }))}\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                            required={field !== 'address_line_2'}\n                          />\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                )}\n\n                {error && (\n                  <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n                    <p className=\"text-sm text-red-700\">{error}</p>\n                  </div>\n                )}\n\n                <div className=\"flex space-x-3\">\n                  <button\n                    onClick={resetForm}\n                    className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    onClick={handleSavePreference}\n                    disabled={!selectedMethod || loading || getRequiredFields(selectedMethod).some((field: string) => \n                      field !== 'address_line_2' && (!paymentDetails[field] || paymentDetails[field].trim() === '')\n                    )}\n                    className=\"flex-1 bg-purple-500 hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-colors\"\n                  >\n                    {loading ? 'Saving...' : editingId ? 'Update Method' : 'Save Method'}\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { X, Diamond, CreditCard, Shield, Star, Zap } from 'lucide-react';\nimport { UserType } from '@/shared/types';\n\ninterface GemStoreModalProps {\n  user: UserType | null;\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: () => void;\n}\n\ninterface GemPackage {\n  id: string;\n  gems: number;\n  price: number;\n  bonus: number;\n  popular?: boolean;\n  savings?: string;\n}\n\nconst gemPackages: GemPackage[] = [\n  {\n    id: 'starter',\n    gems: 10,\n    price: 11.00,\n    bonus: 0\n  },\n  {\n    id: 'basic',\n    gems: 25,\n    price: 27.50,\n    bonus: 0\n  },\n  {\n    id: 'popular',\n    gems: 47,\n    price: 55.00,\n    bonus: 3,\n    popular: true,\n    savings: 'Best Value'\n  },\n  {\n    id: 'premium',\n    gems: 88,\n    price: 110.00,\n    bonus: 12,\n    savings: '12% Bonus'\n  },\n  {\n    id: 'ultimate',\n    gems: 210,\n    price: 275.00,\n    bonus: 40,\n    savings: '16% Bonus'\n  }\n];\n\nexport default function GemStoreModal({ user, isOpen, onClose }: GemStoreModalProps) {\n  const [selectedPackage, setSelectedPackage] = useState<string>('popular');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  console.log('=== GemStoreModal Debug Info ===');\n  console.log('isOpen:', isOpen);\n  console.log('user exists:', !!user);\n  console.log('user data:', user);\n  console.log('onClose function:', typeof onClose);\n\n  // Always render the modal if isOpen is true, even without user data temporarily\n  if (!isOpen) {\n    console.log('Modal not rendering: isOpen is false');\n    return null;\n  }\n\n  console.log('Modal should be visible now!');\n\n  const handlePurchase = async () => {\n    const packageData = gemPackages.find(p => p.id === selectedPackage);\n    if (!packageData) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Create Stripe checkout session\n      const response = await fetch('/api/payments/create-checkout-session', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({\n          package_id: selectedPackage,\n          gems: packageData.gems + packageData.bonus,\n          price: packageData.price\n        })\n      });\n\n      if (response.ok) {\n        const { checkout_url } = await response.json();\n        // Redirect to Stripe checkout\n        window.location.href = checkout_url;\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Failed to create payment session');\n      }\n    } catch (error) {\n      console.error('Payment failed:', error);\n      setError('Payment processing failed. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const selectedPackageData = gemPackages.find(p => p.id === selectedPackage);\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center\">\n              <Diamond className=\"w-6 h-6 text-white\" />\n            </div>\n            <div>\n              <h2 className=\"text-xl font-bold text-gray-900\">Gem Store</h2>\n              <p className=\"text-sm text-gray-600\">Purchase gems to participate in drops and forecasts</p>\n            </div>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        {!user && (\n          <div className=\"p-6\">\n            <div className=\"text-center py-8\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Loading user data...</h3>\n              <p className=\"text-gray-600 mb-4\">Please wait while we load your account information.</p>\n              <p className=\"text-xs text-red-600\">Debug: User data is null - check console for details</p>\n              <button \n                onClick={() => window.location.reload()}\n                className=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600\"\n              >\n                Reload Page\n              </button>\n            </div>\n          </div>\n        )}\n\n        {user && (\n          <div className=\"p-6\">\n            {/* Current Balance */}\n            <div className=\"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 mb-6\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <Diamond className=\"w-8 h-8 text-purple-600\" />\n                  <div>\n                    <p className=\"text-lg font-semibold text-purple-900\">Current Balance</p>\n                    <p className=\"text-sm text-purple-600\">Your gem wallet</p>\n                  </div>\n                </div>\n                <p className=\"text-3xl font-bold text-purple-900\">{user.gems_balance}</p>\n              </div>\n            </div>\n\n            {/* Gem Packages */}\n            <div className=\"mb-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Choose Your Package</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {gemPackages.map((pkg) => (\n                  <div\n                    key={pkg.id}\n                    onClick={() => setSelectedPackage(pkg.id)}\n                    className={`relative border-2 rounded-xl p-6 cursor-pointer transition-all duration-200 ${\n                      selectedPackage === pkg.id\n                        ? 'border-purple-500 bg-purple-50 shadow-lg scale-105'\n                        : 'border-gray-200 hover:border-gray-300 hover:shadow-md'\n                    }`}\n                  >\n                    {pkg.popular && (\n                      <div className=\"absolute -top-3 left-1/2 transform -translate-x-1/2\">\n                        <span className=\"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1\">\n                          <Star className=\"w-3 h-3\" />\n                          <span>Most Popular</span>\n                        </span>\n                      </div>\n                    )}\n                    \n                    {pkg.savings && !pkg.popular && (\n                      <div className=\"absolute -top-3 left-1/2 transform -translate-x-1/2\">\n                        <span className=\"bg-gradient-to-r from-orange-500 to-red-500 text-white px-3 py-1 rounded-full text-xs font-medium\">\n                          {pkg.savings}\n                        </span>\n                      </div>\n                    )}\n\n                    <div className=\"text-center\">\n                      <div className=\"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4\">\n                        <Diamond className=\"w-8 h-8 text-white\" />\n                      </div>\n                      \n                      <h4 className=\"text-lg font-semibold text-gray-900 capitalize mb-2\">{pkg.id}</h4>\n                      \n                      <div className=\"mb-4\">\n                        <p className=\"text-3xl font-bold text-gray-900\">${pkg.price}</p>\n                        <div className=\"flex items-center justify-center space-x-2 mt-1\">\n                          <span className=\"text-lg font-semibold text-purple-600\">{pkg.gems} gems</span>\n                          {pkg.bonus > 0 && (\n                            <>\n                              <span className=\"text-gray-400\">+</span>\n                              <span className=\"text-lg font-semibold text-green-600\">{pkg.bonus} bonus</span>\n                            </>\n                          )}\n                        </div>\n                        <p className=\"text-sm text-gray-500 mt-1\">\n                          Total: {pkg.gems + pkg.bonus} gems\n                        </p>\n                      </div>\n\n                      <div className=\"space-y-2 text-sm text-gray-600\">\n                        <div className=\"flex items-center justify-center space-x-2\">\n                          <Zap className=\"w-4 h-4 text-orange-500\" />\n                          <span>Participate in drops</span>\n                        </div>\n                        <div className=\"flex items-center justify-center space-x-2\">\n                          <CreditCard className=\"w-4 h-4 text-blue-500\" />\n                          <span>Place predictions</span>\n                        </div>\n                        {pkg.bonus > 0 && (\n                          <div className=\"flex items-center justify-center space-x-2\">\n                            <Star className=\"w-4 h-4 text-yellow-500\" />\n                            <span>{Math.round((pkg.bonus / pkg.gems) * 100)}% bonus gems</span>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* Payment Security */}\n            <div className=\"bg-gray-50 rounded-lg p-4 mb-6\">\n              <div className=\"flex items-center space-x-3 mb-3\">\n                <Shield className=\"w-5 h-5 text-green-600\" />\n                <h4 className=\"font-medium text-gray-900\">Secure Payment</h4>\n              </div>\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600\">\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                  <span>256-bit SSL encryption</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                  <span>PCI DSS compliant</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                  <span>Powered by Stripe</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Purchase Summary */}\n            {selectedPackageData && (\n              <div className=\"bg-white border border-gray-200 rounded-lg p-4 mb-6\">\n                <h4 className=\"font-medium text-gray-900 mb-3\">Purchase Summary</h4>\n                <div className=\"space-y-2\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Package:</span>\n                    <span className=\"font-medium capitalize\">{selectedPackageData.id}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Base Gems:</span>\n                    <span className=\"font-medium\">{selectedPackageData.gems}</span>\n                  </div>\n                  {selectedPackageData.bonus > 0 && (\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-600\">Bonus Gems:</span>\n                      <span className=\"font-medium text-green-600\">+{selectedPackageData.bonus}</span>\n                    </div>\n                  )}\n                  <div className=\"border-t pt-2\">\n                    <div className=\"flex justify-between text-lg font-semibold\">\n                      <span>Total Gems:</span>\n                      <span className=\"text-purple-600\">{selectedPackageData.gems + selectedPackageData.bonus}</span>\n                    </div>\n                    <div className=\"flex justify-between text-lg font-semibold\">\n                      <span>Total Price:</span>\n                      <span>${selectedPackageData.price}</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Error Display */}\n            {error && (\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-3 mb-6\">\n                <p className=\"text-sm text-red-700\">{error}</p>\n              </div>\n            )}\n\n            {/* Action Buttons */}\n            <div className=\"flex space-x-3\">\n              <button\n                onClick={onClose}\n                disabled={loading}\n                className=\"flex-1 px-6 py-3 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors disabled:opacity-50\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handlePurchase}\n                disabled={loading || !selectedPackageData}\n                className=\"flex-2 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2\"\n              >\n                {loading ? (\n                  <div className=\"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full\"></div>\n                ) : (\n                  <>\n                    <CreditCard className=\"w-5 h-5\" />\n                    <span>Purchase ${selectedPackageData?.price} - {selectedPackageData ? selectedPackageData.gems + selectedPackageData.bonus : 0} Gems</span>\n                  </>\n                )}\n              </button>\n            </div>\n\n            {/* Terms */}\n            <p className=\"text-xs text-gray-500 text-center mt-4\">\n              By purchasing gems, you agree to our Terms of Service. Gems are virtual currency and have no real-world value. \n              All sales are final and non-refundable.\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { useAuth } from '../hooks/useAuth';\nimport { AlertTriangle, CheckCircle, RefreshCw, LogIn } from 'lucide-react';\nimport { buildAuthHeaders } from '@/react-app/utils/api';\n\nexport default function AuthDebugger() {\n  const { user, redirectToLogin } = useAuth();\n  const [debugInfo, setDebugInfo] = useState<any>(null);\n  const [loading, setLoading] = useState(false);\n\n  const runAuthTest = async () => {\n    setLoading(true);\n    try {\n      console.log('=== COMPREHENSIVE AUTH DEBUG ===');\n      \n      // Test 1: Check cookies\n      const cookies = document.cookie;\n      console.log('1. Cookies:', cookies);\n      const hasSessionToken = cookies.includes('mocha_session_token');\n      \n      // Test 2: Test Mocha auth endpoint\n      const authHeaders = buildAuthHeaders();\n      const mochaAuthResponse = await fetch('/api/users/me', {\n        credentials: 'include',\n        headers: authHeaders\n      });\n      const mochaAuthText = await mochaAuthResponse.text();\n      let mochaAuthData = null;\n      try {\n        mochaAuthData = JSON.parse(mochaAuthText);\n      } catch (e) {\n        console.log('Mocha auth response not JSON:', mochaAuthText);\n      }\n      console.log('2. Mocha auth response:', { \n        status: mochaAuthResponse.status, \n        data: mochaAuthData,\n        rawText: mochaAuthText \n      });\n      \n      // Test 3: Test app user endpoint\n      const appUserResponse = await fetch('/api/app/users/me', {\n        credentials: 'include',\n        headers: authHeaders\n      });\n      const appUserText = await appUserResponse.text();\n      let appUserData = null;\n      try {\n        appUserData = JSON.parse(appUserText);\n      } catch (e) {\n        console.log('App user response not JSON:', appUserText);\n      }\n      console.log('3. App user response:', { \n        status: appUserResponse.status, \n        data: appUserData,\n        rawText: appUserText \n      });\n      \n      // Test 4: Check React Auth Provider state\n      console.log('4. React Auth Provider state:', {\n        user: user,\n        hasUser: !!user,\n        userId: user?.id,\n        userEmail: user?.email\n      });\n      \n      // Compile debug info\n      const debugResult = {\n        timestamp: new Date().toISOString(),\n        cookies: {\n          present: !!cookies,\n          count: cookies.split(';').length,\n          hasSessionToken,\n          raw: cookies\n        },\n        mochaAuth: {\n          status: mochaAuthResponse.status,\n          statusText: mochaAuthResponse.statusText,\n          data: mochaAuthData,\n          headers: Object.fromEntries(mochaAuthResponse.headers.entries())\n        },\n        appUser: {\n          status: appUserResponse.status,\n          statusText: appUserResponse.statusText,\n          data: appUserData,\n          headers: Object.fromEntries(appUserResponse.headers.entries())\n        },\n        reactAuth: {\n          hasUser: !!user,\n          user: user\n        }\n      };\n      \n      setDebugInfo(debugResult);\n      console.log('=== DEBUG COMPLETE ===', debugResult);\n      \n    } catch (error) {\n      console.error('Auth debug failed:', error);\n      setDebugInfo({ error: error instanceof Error ? error.message : 'Unknown error' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const clearAllData = () => {\n    // Clear all browser storage\n    localStorage.clear();\n    sessionStorage.clear();\n    \n    // Clear all cookies\n    document.cookie.split(\";\").forEach((c) => {\n      const eqPos = c.indexOf(\"=\");\n      const name = eqPos > -1 ? c.substr(0, eqPos) : c;\n      document.cookie = name + \"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/\";\n      document.cookie = name + \"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=\" + window.location.hostname;\n    });\n    \n    alert('All data cleared. Please refresh the page.');\n  };\n\n  const forceLogin = async () => {\n    try {\n      await redirectToLogin();\n    } catch (error) {\n      console.error('Force login failed:', error);\n      alert('Login redirect failed. Check console for details.');\n    }\n  };\n\n  return (\n    <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mt-6\">\n      <div className=\"flex items-center space-x-2 mb-4\">\n        <AlertTriangle className=\"w-5 h-5 text-yellow-600\" />\n        <h3 className=\"text-lg font-semibold text-yellow-800\">Authentication Debugger</h3>\n      </div>\n      \n      <div className=\"space-y-4\">\n        <div className=\"flex space-x-3\">\n          <button\n            onClick={runAuthTest}\n            disabled={loading}\n            className=\"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50\"\n          >\n            {loading ? <RefreshCw className=\"w-4 h-4 animate-spin\" /> : <CheckCircle className=\"w-4 h-4\" />}\n            <span>{loading ? 'Testing...' : 'Run Full Auth Test'}</span>\n          </button>\n          \n          <button\n            onClick={clearAllData}\n            className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700\"\n          >\n            Clear All Data\n          </button>\n          \n          <button\n            onClick={forceLogin}\n            className=\"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700\"\n          >\n            <LogIn className=\"w-4 h-4\" />\n            <span>Force Login</span>\n          </button>\n        </div>\n        \n        {debugInfo && (\n          <div className=\"bg-white rounded-lg p-4 border\">\n            <h4 className=\"font-semibold text-gray-900 mb-2\">Debug Results:</h4>\n            <pre className=\"text-xs text-gray-700 overflow-auto max-h-96 bg-gray-50 p-3 rounded\">\n              {JSON.stringify(debugInfo, null, 2)}\n            </pre>\n          </div>\n        )}\n        \n        <div className=\"text-sm text-yellow-700\">\n          <p><strong>Instructions:</strong></p>\n          <ol className=\"list-decimal list-inside space-y-1 mt-2\">\n            <li>Click \"Run Full Auth Test\" to diagnose authentication issues</li>\n            <li>If authentication is broken, try \"Clear All Data\" then \"Force Login\"</li>\n            <li>Check the debug results to see exactly what's failing</li>\n            <li>All debug info is also logged to the browser console</li>\n          </ol>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { ShareListing, ShareOffer } from '@/shared/types';\nimport { apiFetch } from '@/react-app/utils/api';\n\nconst USE_MOCK_DATA = !import.meta.env.VITE_API_URL;\n\nconst mockListings = (): ShareListing[] => [\n  {\n    id: 'listing-demo-1',\n    content_id: 'content-demo-1',\n    content_title: 'Launch Campaign: Social Buzz',\n    content_thumbnail: 'https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=600&q=80',\n    owner_id: '00000000-0000-0000-0000-000000000001',\n    owner_name: 'Demo Creator',\n    quantity: 60,\n    remaining_quantity: 40,\n    ask_price: 12.5,\n    market_price: 12.2,\n    status: 'active',\n    created_at: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),\n    expires_at: new Date(Date.now() + 48 * 60 * 60 * 1000).toISOString(),\n  },\n];\n\nexport const fetchShareListings = async (ownerOnly = false): Promise<ShareListing[]> => {\n  if (USE_MOCK_DATA) {\n    if (ownerOnly) {\n      return mockListings().filter((listing) => listing.owner_id === '00000000-0000-0000-0000-000000000001');\n    }\n    return mockListings();\n  }\n\n  try {\n    const query = ownerOnly ? '?owner=true' : '';\n    const response = await apiFetch(`/api/shares/listings${query}`, { credentials: 'include' });\n    if (!response.ok) {\n      return mockListings();\n    }\n    const data = await response.json();\n    return data.listings || mockListings();\n  } catch (error) {\n    console.error('Failed to fetch share listings:', error);\n    return mockListings();\n  }\n};\n\ninterface CreateListingPayload {\n  content_id: string;\n  content_title: string;\n  content_thumbnail: string;\n  quantity: number;\n  ask_price: number;\n}\n\nexport const createShareListing = async (payload: CreateListingPayload) => {\n  if (USE_MOCK_DATA) {\n    return {\n      success: true,\n      listing: {\n        id: `listing-${Date.now()}`,\n        owner_id: '00000000-0000-0000-0000-000000000001',\n        owner_name: 'Demo Creator',\n        remaining_quantity: payload.quantity,\n        market_price: payload.ask_price,\n        status: 'active',\n        created_at: new Date().toISOString(),\n        expires_at: new Date(Date.now() + 72 * 60 * 60 * 1000).toISOString(),\n        ...payload,\n      },\n      message: 'Listing created (mock)',\n    };\n  }\n\n  const response = await apiFetch('/api/shares/listings', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    credentials: 'include',\n    body: JSON.stringify(payload),\n  });\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new Error(error.error || 'Failed to create listing');\n  }\n\n  return response.json();\n};\n\ninterface CreateOfferPayload {\n  content_id: string;\n  seller_id?: string;\n  quantity: number;\n  bid_price: number;\n  message?: string;\n}\n\nexport const createShareOffer = async (payload: CreateOfferPayload) => {\n  if (USE_MOCK_DATA) {\n    return {\n      success: true,\n      offer: {\n        id: `offer-${Date.now()}`,\n        buyer_id: '00000000-0000-0000-0000-000000000001',\n        status: 'pending',\n        created_at: new Date().toISOString(),\n        expires_at: new Date(Date.now() + 48 * 60 * 60 * 1000).toISOString(),\n        ...payload,\n      },\n      message: 'Offer submitted (mock)',\n    };\n  }\n\n  const response = await apiFetch('/api/shares/offers', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    credentials: 'include',\n    body: JSON.stringify(payload),\n  });\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new Error(error.error || 'Failed to submit offer');\n  }\n\n  return response.json();\n};\n\nconst mockOffers = (): ShareOffer[] => [\n  {\n    id: 'offer-demo-1',\n    content_id: 'content-demo-1',\n    buyer_id: '00000000-0000-0000-0000-000000000005',\n    seller_id: '00000000-0000-0000-0000-000000000001',\n    quantity: 25,\n    bid_price: 12.75,\n    status: 'pending',\n    message: 'Happy to take at a slight premium. Can settle within 24h.',\n    content_title: 'Launch Campaign: Social Buzz',\n    created_at: new Date(Date.now() - 3 * 60 * 60 * 1000).toISOString(),\n    expires_at: new Date(Date.now() + 21 * 60 * 60 * 1000).toISOString(),\n  },\n  {\n    id: 'offer-demo-2',\n    content_id: 'content-demo-2',\n    buyer_id: '00000000-0000-0000-0000-000000000001',\n    seller_id: '00000000-0000-0000-0000-000000000004',\n    quantity: 30,\n    bid_price: 18,\n    status: 'pending',\n    message: 'Would love to take this block before the next update drop.',\n    content_title: 'Creator Toolkit Walkthrough',\n    created_at: new Date(Date.now() - 6 * 60 * 60 * 1000).toISOString(),\n    expires_at: new Date(Date.now() + 30 * 60 * 60 * 1000).toISOString(),\n  },\n];\n\nexport const fetchShareOffers = async (role: 'seller' | 'buyer'): Promise<ShareOffer[]> => {\n  if (USE_MOCK_DATA) {\n    const offers = mockOffers();\n    return offers.filter((offer) =>\n      role === 'seller'\n        ? offer.seller_id === '00000000-0000-0000-0000-000000000001'\n        : offer.buyer_id === '00000000-0000-0000-0000-000000000001',\n    );\n  }\n\n  try {\n    const response = await apiFetch(`/api/shares/offers?role=${role}`, { credentials: 'include' });\n    if (!response.ok) {\n      return mockOffers();\n    }\n    const data = await response.json();\n    return data.offers || mockOffers();\n  } catch (error) {\n    console.error('Failed to fetch share offers:', error);\n    return mockOffers();\n  }\n};\n\nexport const acceptShareOffer = async (offerId: string) => {\n  if (USE_MOCK_DATA) {\n    return { success: true, offer_id: offerId, message: 'Offer accepted (mock)' };\n  }\n\n  const response = await apiFetch(`/api/shares/offers/${offerId}/accept`, {\n    method: 'POST',\n    credentials: 'include',\n  });\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new Error(error.error || 'Failed to accept offer');\n  }\n\n  return response.json();\n};\n","import { useEffect, useState } from 'react';\nimport { ContentHolding } from '@/shared/types';\nimport { createShareListing } from '@/react-app/services/sharesService';\n\ninterface ListShareModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  holding: ContentHolding | null;\n  onSuccess?: () => void;\n}\n\nexport default function ListShareModal({ isOpen, onClose, holding, onSuccess }: ListShareModalProps) {\n  const [quantity, setQuantity] = useState<number>(() => (holding ? Math.min(holding.available_to_sell, holding.owned_shares) : 0));\n  const [price, setPrice] = useState<number>(() => holding?.current_price || 0);\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (holding && isOpen) {\n      setQuantity(Math.min(holding.available_to_sell, holding.owned_shares));\n      setPrice(holding.current_price);\n      setError(null);\n    }\n  }, [holding, isOpen]);\n\n  if (!isOpen || !holding) {\n    return null;\n  }\n\n  const resetState = () => {\n    setQuantity(Math.min(holding.available_to_sell, holding.owned_shares));\n    setPrice(holding.current_price);\n    setError(null);\n  };\n\n  const handleClose = () => {\n    if (submitting) return;\n    resetState();\n    onClose();\n  };\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n\n    if (!holding) return;\n    if (quantity <= 0 || price <= 0) {\n      setError('Enter a valid quantity and price.');\n      return;\n    }\n\n    setSubmitting(true);\n    setError(null);\n\n    try {\n      await createShareListing({\n        content_id: holding.content_id,\n        content_title: holding.content_title,\n        content_thumbnail: holding.content_thumbnail,\n        quantity,\n        ask_price: price,\n      });\n\n      onSuccess?.();\n      handleClose();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to create listing');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-2xl shadow-xl max-w-lg w-full mx-4\">\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <div>\n            <h2 className=\"text-xl font-semibold text-gray-900\">List Shares for Resale</h2>\n            <p className=\"text-sm text-gray-500\">{holding.content_title}</p>\n          </div>\n          <button\n            onClick={handleClose}\n            className=\"text-gray-400 hover:text-gray-600\"\n            aria-label=\"Close list shares modal\"\n          >\n            ×\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Quantity</label>\n              <input\n                type=\"number\"\n                min={1}\n                max={holding.available_to_sell}\n                value={quantity}\n                onChange={(event) => setQuantity(Number(event.target.value))}\n                className=\"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              />\n              <p className=\"mt-1 text-xs text-gray-500\">\n                Available: {holding.available_to_sell} shares\n              </p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Ask Price (per share)</label>\n              <input\n                type=\"number\"\n                min={0.01}\n                step={0.01}\n                value={price}\n                onChange={(event) => setPrice(Number(event.target.value))}\n                className=\"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              />\n              <p className=\"mt-1 text-xs text-gray-500\">\n                Market price {holding.current_price.toFixed(2)}\n              </p>\n            </div>\n          </div>\n\n          <div className=\"bg-gray-50 rounded-lg p-4 text-sm text-gray-600\">\n            <div className=\"flex justify-between\">\n              <span>Estimated proceeds</span>\n              <span className=\"font-medium text-gray-900\">${(quantity * price).toFixed(2)}</span>\n            </div>\n            <div className=\"flex justify-between mt-2\">\n              <span>Transaction fee (2.5%)</span>\n              <span>${(quantity * price * 0.025).toFixed(2)}</span>\n            </div>\n            <div className=\"flex justify-between mt-2 text-green-600 font-semibold\">\n              <span>Net payout</span>\n              <span>${(quantity * price * 0.975).toFixed(2)}</span>\n            </div>\n          </div>\n\n          {error && <p className=\"text-sm text-red-600\">{error}</p>}\n\n          <div className=\"flex items-center justify-end space-x-3\">\n            <button\n              type=\"button\"\n              onClick={handleClose}\n              className=\"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={submitting}\n              className=\"px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg shadow-sm hover:bg-orange-700 disabled:opacity-60\"\n            >\n              {submitting ? 'Listing…' : 'List Shares'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n","import { ContentHolding, PredictionSummary, ContentHoldingDetail, PredictionDetail } from '@/shared/types';\nimport { apiFetch } from '@/react-app/utils/api';\n\nconst USE_MOCK_DATA = !import.meta.env.VITE_API_URL;\n\nconst fallbackHoldings = (): ContentHolding[] => [\n  {\n    content_id: 'content-demo-1',\n    content_title: 'Launch Campaign: Social Buzz',\n    content_thumbnail: 'https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=600&q=80',\n    creator_id: '00000000-0000-0000-0000-000000000001',\n    creator_name: 'Demo Creator',\n    creator_avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=demo_content',\n    platform: 'instagram',\n    owned_shares: 180,\n    available_to_sell: 60,\n    avg_cost: 8.75,\n    current_price: 12.5,\n    market_value: 2250,\n    unrealized_gain: 675,\n    day_change_pct: 3.2,\n    week_change_pct: 8.5,\n    month_change_pct: 22.4,\n    last_trade_at: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),\n    is_listed: true,\n    listing_id: 'listing-demo-1',\n    visibility: 'public',\n  },\n  {\n    content_id: 'content-demo-2',\n    content_title: 'Creator Toolkit Walkthrough',\n    content_thumbnail: 'https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&w=600&q=80',\n    creator_id: '00000000-0000-0000-0000-000000000002',\n    creator_name: 'Creator Collective',\n    creator_avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=creator_collective',\n    platform: 'youtube',\n    owned_shares: 95,\n    available_to_sell: 95,\n    avg_cost: 15.0,\n    current_price: 18.75,\n    market_value: 1781.25,\n    unrealized_gain: 356.25,\n    day_change_pct: 1.2,\n    week_change_pct: 4.7,\n    month_change_pct: 12.8,\n    last_trade_at: new Date(Date.now() - 6 * 60 * 60 * 1000).toISOString(),\n    is_listed: false,\n    visibility: 'public',\n  },\n];\n\nconst fallbackPredictions = (): PredictionSummary[] => [\n  {\n    id: 'prediction-demo-1',\n    forecast_id: 'forecast-demo-1',\n    content_title: 'Creator Toolkit Walkthrough',\n    platform: 'youtube',\n    prediction_side: 'over',\n    amount: 150,\n    potential_payout: 315,\n    status: 'active',\n    result: undefined,\n    created_at: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),\n    resolved_at: undefined,\n  },\n  {\n    id: 'prediction-demo-2',\n    forecast_id: 'forecast-demo-2',\n    content_title: 'Launch Day Reach',\n    platform: 'instagram',\n    prediction_side: 'under',\n    amount: 80,\n    potential_payout: 152,\n    status: 'settled',\n    result: 'won',\n    created_at: new Date(Date.now() - 12 * 24 * 60 * 60 * 1000).toISOString(),\n    resolved_at: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString(),\n  },\n];\n\nconst fallbackHoldingDetail = (contentId: string): ContentHoldingDetail => {\n  const holdings = fallbackHoldings();\n  const holding = holdings.find((item) => item.content_id === contentId) || holdings[0];\n  const now = Date.now();\n\n  return {\n    holding,\n    content: {\n      description:\n        'Behind-the-scenes look at the launch strategy, featuring creator testimonials and performance metrics.',\n      genres: ['Campaign Spotlight', 'Community'],\n      tags: ['launch', 'growth', 'community'],\n      published_at: new Date(now - 7 * 24 * 60 * 60 * 1000).toISOString(),\n      total_views: 128000,\n      engagement_rate: 12.4,\n      earnings_to_date: 4320,\n    },\n    performance: {\n      history: Array.from({ length: 14 }, (_, index) => {\n        const day = new Date(now - (13 - index) * 24 * 60 * 60 * 1000);\n        return {\n          date: day.toISOString().split('T')[0],\n          price: holding.current_price * (0.85 + index * 0.01),\n          volume: Math.round(Math.random() * 120 + 40),\n        };\n      }),\n      ledger: [\n        {\n          id: 'txn-1',\n          type: 'purchase',\n          quantity: holding.owned_shares,\n          price: holding.avg_cost,\n          timestamp: new Date(now - 12 * 24 * 60 * 60 * 1000).toISOString(),\n        },\n        {\n          id: 'txn-2',\n          type: 'dividend',\n          quantity: 0,\n          price: 120,\n          timestamp: new Date(now - 4 * 24 * 60 * 60 * 1000).toISOString(),\n        },\n      ],\n    },\n    marketplace: {\n      listings: [\n        {\n          id: 'listing-history-1',\n          quantity: 40,\n          ask_price: 11.8,\n          status: 'filled',\n          filled_at: new Date(now - 5 * 24 * 60 * 60 * 1000).toISOString(),\n        },\n      ],\n      offers: [\n        {\n          id: 'offer-history-1',\n          quantity: 30,\n          bid_price: 12.6,\n          status: 'pending',\n          buyer_name: 'Marketplace Analyst',\n          message: 'Happy to take this block before launch day finale.',\n        },\n      ],\n    },\n  };\n};\n\nconst fallbackPredictionDetail = (predictionId: string): PredictionDetail => {\n  const predictions = fallbackPredictions();\n  const prediction = predictions.find((item) => item.id === predictionId) || predictions[0];\n  const now = Date.now();\n\n  return {\n    prediction,\n    forecast: {\n      metric: '7-day reach',\n      target: '125K',\n      odds: 2.1,\n      expires_at: new Date(now + 4 * 24 * 60 * 60 * 1000).toISOString(),\n      creator_projection: 'Over performance expected due to paid boosts and influencer cross-promotions scheduled mid-week.',\n    },\n    trajectory: Array.from({ length: 10 }, (_, index) => {\n      const day = new Date(now - (9 - index) * 24 * 60 * 60 * 1000);\n      const actual = 60000 + index * 6500 + Math.round(Math.random() * 2500);\n      return {\n        date: day.toISOString().split('T')[0],\n        actual,\n        expected: 55000 + index * 7000,\n      };\n    }),\n    participants: [\n      {\n        username: 'growth_analyst',\n        amount: 150,\n        side: 'over',\n        status: 'active',\n      },\n      {\n        username: 'launch_partner',\n        amount: 90,\n        side: 'under',\n        status: 'active',\n      },\n    ],\n  };\n};\n\nexport const getPortfolioHoldings = async (userId?: string): Promise<ContentHolding[]> => {\n  if (USE_MOCK_DATA) {\n    return fallbackHoldings();\n  }\n\n  try {\n    const params = userId ? `?userId=${encodeURIComponent(userId)}` : '';\n    const response = await apiFetch(`/api/portfolio/holdings${params}`, { credentials: 'include' });\n    if (!response.ok) {\n      return fallbackHoldings();\n    }\n    const data = await response.json();\n    return data.holdings || fallbackHoldings();\n  } catch (error) {\n    console.error('Failed to fetch portfolio holdings:', error);\n    return fallbackHoldings();\n  }\n};\n\nexport const getPortfolioPredictions = async (userId?: string): Promise<PredictionSummary[]> => {\n  if (USE_MOCK_DATA) {\n    return fallbackPredictions();\n  }\n\n  try {\n    const params = userId ? `?userId=${encodeURIComponent(userId)}` : '';\n    const response = await apiFetch(`/api/portfolio/predictions${params}`, { credentials: 'include' });\n    if (!response.ok) {\n      return fallbackPredictions();\n    }\n    const data = await response.json();\n    return data.predictions || fallbackPredictions();\n  } catch (error) {\n    console.error('Failed to fetch predictions:', error);\n    return fallbackPredictions();\n  }\n};\n\nexport const getHoldingDetail = async (contentId: string, userId?: string): Promise<ContentHoldingDetail> => {\n  if (USE_MOCK_DATA) {\n    return fallbackHoldingDetail(contentId);\n  }\n\n  try {\n    const params = userId ? `?userId=${encodeURIComponent(userId)}` : '';\n    const response = await apiFetch(`/api/portfolio/holdings/${contentId}${params}`, {\n      credentials: 'include',\n    });\n    if (!response.ok) {\n      return fallbackHoldingDetail(contentId);\n    }\n    return response.json();\n  } catch (error) {\n    console.error('Failed to fetch holding detail:', error);\n    return fallbackHoldingDetail(contentId);\n  }\n};\n\nexport const getPredictionDetail = async (predictionId: string): Promise<PredictionDetail> => {\n  if (USE_MOCK_DATA) {\n    return fallbackPredictionDetail(predictionId);\n  }\n\n  try {\n    const response = await apiFetch(`/api/portfolio/predictions/${predictionId}`, {\n      credentials: 'include',\n    });\n    if (!response.ok) {\n      return fallbackPredictionDetail(predictionId);\n    }\n    return response.json();\n  } catch (error) {\n    console.error('Failed to fetch prediction detail:', error);\n    return fallbackPredictionDetail(predictionId);\n  }\n};\n","import {\n  LineChart,\n  Line,\n  AreaChart,\n  Area,\n  BarChart,\n  Bar,\n  PieChart,\n  Pie,\n  Cell,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer\n} from 'recharts';\n\n// Color palette for charts\nconst COLORS = {\n  primary: '#f97316', // orange-500\n  secondary: '#8b5cf6', // violet-500\n  success: '#10b981', // emerald-500\n  warning: '#f59e0b', // amber-500\n  danger: '#ef4444', // red-500\n  info: '#3b82f6', // blue-500\n  purple: '#a855f7', // purple-500\n  pink: '#ec4899', // pink-500\n  cyan: '#06b6d4', // cyan-500\n};\n\nconst CHART_COLORS = [\n  COLORS.primary,\n  COLORS.secondary,\n  COLORS.success,\n  COLORS.info,\n  COLORS.purple,\n  COLORS.pink,\n  COLORS.warning,\n  COLORS.danger,\n  COLORS.cyan\n];\n\ninterface EarningsChartProps {\n  data: Array<{\n    date: string;\n    earnings: number;\n    gems?: number;\n    points?: number;\n  }>;\n  height?: number;\n}\n\nexport function EarningsChart({ data, height = 300 }: EarningsChartProps) {\n  return (\n    <ResponsiveContainer width=\"100%\" height={height}>\n      <AreaChart data={data}>\n        <defs>\n          <linearGradient id=\"earningsGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n            <stop offset=\"5%\" stopColor={COLORS.success} stopOpacity={0.3}/>\n            <stop offset=\"95%\" stopColor={COLORS.success} stopOpacity={0.1}/>\n          </linearGradient>\n        </defs>\n        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f1f5f9\" />\n        <XAxis \n          dataKey=\"date\" \n          stroke=\"#64748b\"\n          fontSize={12}\n          tickFormatter={(value) => new Date(value).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}\n        />\n        <YAxis \n          stroke=\"#64748b\"\n          fontSize={12}\n          tickFormatter={(value) => `$${value}`}\n        />\n        <Tooltip \n          contentStyle={{\n            backgroundColor: 'white',\n            border: '1px solid #e2e8f0',\n            borderRadius: '8px',\n            boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)'\n          }}\n          labelFormatter={(value) => new Date(value).toLocaleDateString()}\n          formatter={(value: number) => [`$${value.toFixed(2)}`, 'Earnings']}\n        />\n        <Area\n          type=\"monotone\"\n          dataKey=\"earnings\"\n          stroke={COLORS.success}\n          strokeWidth={2}\n          fill=\"url(#earningsGradient)\"\n        />\n      </AreaChart>\n    </ResponsiveContainer>\n  );\n}\n\ninterface PerformanceMetricsProps {\n  data: Array<{\n    metric: string;\n    value: number;\n    change?: number;\n  }>;\n  height?: number;\n}\n\nexport function PerformanceMetrics({ data, height = 300 }: PerformanceMetricsProps) {\n  return (\n    <ResponsiveContainer width=\"100%\" height={height}>\n      <BarChart data={data} layout=\"horizontal\">\n        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f1f5f9\" />\n        <XAxis type=\"number\" stroke=\"#64748b\" fontSize={12} />\n        <YAxis \n          type=\"category\" \n          dataKey=\"metric\" \n          stroke=\"#64748b\" \n          fontSize={12}\n          width={100}\n        />\n        <Tooltip \n          contentStyle={{\n            backgroundColor: 'white',\n            border: '1px solid #e2e8f0',\n            borderRadius: '8px',\n            boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)'\n          }}\n          formatter={(value: number) => [value.toLocaleString(), 'Value']}\n        />\n        <Bar \n          dataKey=\"value\" \n          fill={COLORS.primary}\n          radius={[0, 4, 4, 0]}\n        />\n      </BarChart>\n    </ResponsiveContainer>\n  );\n}\n\ninterface ActivityBreakdownProps {\n  data: Array<{\n    name: string;\n    value: number;\n    color?: string;\n  }>;\n  height?: number;\n}\n\nexport function ActivityBreakdown({ data, height = 300 }: ActivityBreakdownProps) {\n  const dataWithColors = data.map((item, index) => ({\n    ...item,\n    color: item.color || CHART_COLORS[index % CHART_COLORS.length]\n  }));\n\n  return (\n    <ResponsiveContainer width=\"100%\" height={height}>\n      <PieChart>\n        <Pie\n          data={dataWithColors}\n          cx=\"50%\"\n          cy=\"50%\"\n          innerRadius={60}\n          outerRadius={100}\n          paddingAngle={2}\n          dataKey=\"value\"\n        >\n          {dataWithColors.map((entry, index) => (\n            <Cell key={`cell-${index}`} fill={entry.color} />\n          ))}\n        </Pie>\n        <Tooltip \n          contentStyle={{\n            backgroundColor: 'white',\n            border: '1px solid #e2e8f0',\n            borderRadius: '8px',\n            boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)'\n          }}\n          formatter={(value: number) => [value.toLocaleString(), 'Count']}\n        />\n        <Legend \n          verticalAlign=\"middle\" \n          align=\"right\"\n          layout=\"vertical\"\n          iconType=\"circle\"\n          wrapperStyle={{ fontSize: '12px', paddingLeft: '20px' }}\n        />\n      </PieChart>\n    </ResponsiveContainer>\n  );\n}\n\ninterface TrendLineProps {\n  data: Array<{\n    date: string;\n    value: number;\n    secondary?: number;\n  }>;\n  height?: number;\n  primaryKey?: string;\n  secondaryKey?: string;\n  primaryColor?: string;\n  secondaryColor?: string;\n}\n\nexport function TrendLine({ \n  data, \n  height = 200, \n  primaryKey = 'value',\n  secondaryKey,\n  primaryColor = COLORS.primary,\n  secondaryColor = COLORS.secondary\n}: TrendLineProps) {\n  return (\n    <ResponsiveContainer width=\"100%\" height={height}>\n      <LineChart data={data}>\n        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f1f5f9\" />\n        <XAxis \n          dataKey=\"date\" \n          stroke=\"#64748b\"\n          fontSize={12}\n          tickFormatter={(value) => new Date(value).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}\n        />\n        <YAxis stroke=\"#64748b\" fontSize={12} />\n        <Tooltip \n          contentStyle={{\n            backgroundColor: 'white',\n            border: '1px solid #e2e8f0',\n            borderRadius: '8px',\n            boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)'\n          }}\n          labelFormatter={(value) => new Date(value).toLocaleDateString()}\n        />\n        <Line\n          type=\"monotone\"\n          dataKey={primaryKey}\n          stroke={primaryColor}\n          strokeWidth={2}\n          dot={{ r: 3 }}\n          activeDot={{ r: 5 }}\n        />\n        {secondaryKey && (\n          <Line\n            type=\"monotone\"\n            dataKey={secondaryKey}\n            stroke={secondaryColor}\n            strokeWidth={2}\n            dot={{ r: 3 }}\n            activeDot={{ r: 5 }}\n          />\n        )}\n      </LineChart>\n    </ResponsiveContainer>\n  );\n}\n\ninterface MultiMetricChartProps {\n  data: Array<{\n    date: string;\n    [key: string]: string | number;\n  }>;\n  metrics: Array<{\n    key: string;\n    name: string;\n    color: string;\n  }>;\n  height?: number;\n}\n\nexport function MultiMetricChart({ data, metrics, height = 300 }: MultiMetricChartProps) {\n  return (\n    <ResponsiveContainer width=\"100%\" height={height}>\n      <LineChart data={data}>\n        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f1f5f9\" />\n        <XAxis \n          dataKey=\"date\" \n          stroke=\"#64748b\"\n          fontSize={12}\n          tickFormatter={(value) => new Date(value).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}\n        />\n        <YAxis stroke=\"#64748b\" fontSize={12} />\n        <Tooltip \n          contentStyle={{\n            backgroundColor: 'white',\n            border: '1px solid #e2e8f0',\n            borderRadius: '8px',\n            boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)'\n          }}\n          labelFormatter={(value) => new Date(value).toLocaleDateString()}\n        />\n        <Legend />\n        {metrics.map((metric) => (\n          <Line\n            key={metric.key}\n            type=\"monotone\"\n            dataKey={metric.key}\n            stroke={metric.color}\n            strokeWidth={2}\n            name={metric.name}\n            dot={{ r: 3 }}\n            activeDot={{ r: 5 }}\n          />\n        ))}\n      </LineChart>\n    </ResponsiveContainer>\n  );\n}\n\ninterface KPICardProps {\n  title: string;\n  value: string | number;\n  change?: number;\n  changeType?: 'increase' | 'decrease';\n  icon?: React.ReactNode;\n  trend?: Array<{ date: string; value: number }>;\n}\n\nexport function KPICard({ title, value, change, changeType, icon, trend }: KPICardProps) {\n  const changeColor = changeType === 'increase' ? 'text-green-600' : 'text-red-600';\n  const changeIcon = changeType === 'increase' ? '↗' : '↘';\n\n  return (\n    <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm min-w-0\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <div className=\"flex items-center space-x-2\">\n          {icon && <div className=\"text-gray-600\">{icon}</div>}\n          <h3 className=\"text-sm font-medium text-gray-600\">{title}</h3>\n        </div>\n        {change !== undefined && (\n          <span className={`text-sm font-medium ${changeColor} flex items-center space-x-1`}>\n            <span>{changeIcon}</span>\n            <span>{Math.abs(change)}%</span>\n          </span>\n        )}\n      </div>\n      \n      <div className=\"mb-4\">\n        <p className=\"text-2xl font-bold text-gray-900\">{value}</p>\n      </div>\n\n      {trend && trend.length > 0 && (\n        <div className=\"h-16 w-full min-w-[120px]\">\n          <ResponsiveContainer width=\"100%\" height={64}>\n            <LineChart data={trend}>\n              <Line\n                type=\"monotone\"\n                dataKey=\"value\"\n                stroke={changeType === 'increase' ? COLORS.success : COLORS.danger}\n                strokeWidth={2}\n                dot={false}\n              />\n            </LineChart>\n          </ResponsiveContainer>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport { COLORS, CHART_COLORS };\n","import { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { \n  Wallet as WalletIcon, \n  DollarSign, \n  ArrowUpRight, \n  ArrowDownLeft,\n  Clock,\n  Filter,\n  Coins,\n  Key,\n  Trophy,\n  Diamond,\n  TrendingUp,\n  Activity,\n  Target\n} from 'lucide-react';\nimport { WalletType, TransactionType, UserType, ContentHolding, ShareListing, ShareOffer } from '@/shared/types';\nimport CurrencyConversionModal from '@/react-app/components/CurrencyConversionModal';\nimport MasterKeyModal from '@/react-app/components/MasterKeyModal';\nimport GoldShopModal from '@/react-app/components/GoldShopModal';\nimport WithdrawalModal from '@/react-app/components/WithdrawalModal';\nimport PaymentPreferencesModal from '@/react-app/components/PaymentPreferencesModal';\nimport GemStoreModal from '@/react-app/components/GemStoreModal';\nimport AchievementsModal from '@/react-app/components/AchievementsModal';\nimport AuthDebugger from '@/react-app/components/AuthDebugger';\nimport { buildAuthHeaders } from '@/react-app/utils/api';\nimport ListShareModal from '@/react-app/components/ListShareModal';\nimport { getPortfolioHoldings } from '@/react-app/services/portfolioService';\nimport { fetchShareListings, fetchShareOffers, acceptShareOffer } from '@/react-app/services/sharesService';\nimport { \n  EarningsChart, \n  PerformanceMetrics, \n  ActivityBreakdown, \n  TrendLine,\n  KPICard \n} from '@/react-app/components/AnalyticsCharts';\n\n// Wallet Analytics Component\nfunction WalletAnalyticsOverview({ userData }: { userData: UserType | null; transactions: TransactionType[] }) {\n  const navigate = useNavigate();\n  // Generate mock earnings data for the last 30 days\n  const generateEarningsData = () => {\n    const last30Days = Array.from({ length: 30 }, (_, i) => {\n      const date = new Date();\n      date.setDate(date.getDate() - (29 - i));\n      return {\n        date: date.toISOString().split('T')[0],\n        earnings: Math.floor(Math.random() * 50) + 10,\n        gems: Math.floor(Math.random() * 20) + 5,\n        points: Math.floor(Math.random() * 100) + 20\n      };\n    });\n    return last30Days;\n  };\n\n  const earningsData = generateEarningsData();\n  \n  const currencyBreakdown = [\n    { name: 'Points', value: userData?.points_balance || 0, color: '#3b82f6' },\n    { name: 'Keys', value: (userData?.keys_balance || 0) * 10, color: '#f97316' },\n    { name: 'Gems', value: (userData?.gems_balance || 0) * 5, color: '#8b5cf6' },\n    { name: 'Gold', value: (userData?.gold_collected || 0) * 2, color: '#eab308' }\n  ];\n\n  const earningsSources = [\n    { metric: 'Social Actions', value: 45 },\n    { metric: 'Drop Completions', value: 30 },\n    { metric: 'Content Investments', value: 15 },\n    { metric: 'Referral Bonuses', value: 8 },\n    { metric: 'Achievements', value: 2 }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-500 rounded-xl p-6 text-white shadow\">\n        <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\n          <div>\n            <div className=\"text-sm uppercase tracking-wide text-white/80\">New</div>\n            <h3 className=\"text-2xl font-semibold\">Growth Hub is live</h3>\n            <p className=\"text-sm text-white/80 mt-1\">Stake gems, fund creators, and unlock higher returns on your balance.</p>\n          </div>\n          <button\n            onClick={() => navigate('/growth-hub')}\n            className=\"inline-flex items-center justify-center px-4 py-2 bg-white text-blue-600 font-medium rounded-lg shadow-sm hover:bg-blue-50 transition\"\n          >\n            Explore Growth Hub\n            <ArrowUpRight className=\"w-4 h-4 ml-2\" />\n          </button>\n        </div>\n      </div>\n      {/* Enhanced KPI Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <KPICard\n          title=\"This Month\"\n          value=\"$127.50\"\n          change={23}\n          changeType=\"increase\"\n          icon={<TrendingUp className=\"w-5 h-5\" />}\n          trend={earningsData.slice(-7).map(d => ({ date: d.date, value: d.earnings }))}\n        />\n        \n        <KPICard\n          title=\"All Time\"\n          value=\"$1,456.80\"\n          change={8}\n          changeType=\"increase\"\n          icon={<Activity className=\"w-5 h-5\" />}\n          trend={earningsData.slice(-7).map(d => ({ date: d.date, value: d.earnings * 5 }))}\n        />\n        \n        <KPICard\n          title=\"Pending\"\n          value=\"$89.25\"\n          change={12}\n          changeType=\"increase\"\n          icon={<Clock className=\"w-5 h-5\" />}\n          trend={earningsData.slice(-7).map(d => ({ date: d.date, value: d.earnings * 0.5 }))}\n        />\n        \n        <KPICard\n          title=\"Available\"\n          value=\"$234.75\"\n          change={5}\n          changeType=\"increase\"\n          icon={<WalletIcon className=\"w-5 h-5\" />}\n          trend={earningsData.slice(-7).map(d => ({ date: d.date, value: d.earnings * 2 }))}\n        />\n      </div>\n\n      {/* Analytics Dashboard */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Earnings Trend */}\n        <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">Earnings Trend (30 Days)</h3>\n          <EarningsChart \n            data={earningsData}\n            height={300}\n          />\n        </div>\n\n        {/* Currency Distribution */}\n        <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">Currency Distribution</h3>\n          <ActivityBreakdown\n            data={currencyBreakdown.filter(item => item.value > 0)}\n            height={300}\n          />\n        </div>\n\n        {/* Earning Sources */}\n        <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">Earning Sources</h3>\n          <PerformanceMetrics\n            data={earningsSources}\n            height={300}\n          />\n        </div>\n\n        {/* Currency Trends */}\n        <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">Currency Growth</h3>\n          <TrendLine\n            data={earningsData.map(d => ({ \n              date: d.date, \n              value: d.points, \n              secondary: d.gems * 5 \n            }))}\n            height={300}\n            primaryKey=\"value\"\n            secondaryKey=\"secondary\"\n            primaryColor=\"#3b82f6\"\n            secondaryColor=\"#8b5cf6\"\n          />\n          <div className=\"flex justify-center space-x-6 mt-4 text-sm\">\n            <div className=\"flex items-center space-x-2\">\n              <div className=\"w-3 h-3 bg-blue-500 rounded-full\"></div>\n              <span className=\"text-gray-600\">Points</span>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <div className=\"w-3 h-3 bg-violet-500 rounded-full\"></div>\n              <span className=\"text-gray-600\">Gems (×5)</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Quick Insights */}\n      <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">Wallet Insights</h3>\n        <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n          <div className=\"text-center p-4 bg-blue-50 rounded-lg\">\n            <Coins className=\"w-6 h-6 text-blue-600 mx-auto mb-2\" />\n            <p className=\"text-2xl font-bold text-blue-900\">{userData?.points_balance || 0}</p>\n            <p className=\"text-sm text-blue-600\">Active Points</p>\n          </div>\n          <div className=\"text-center p-4 bg-orange-50 rounded-lg\">\n            <Key className=\"w-6 h-6 text-orange-600 mx-auto mb-2\" />\n            <p className=\"text-2xl font-bold text-orange-900\">{userData?.keys_balance || 0}</p>\n            <p className=\"text-sm text-orange-600\">Keys Available</p>\n          </div>\n          <div className=\"text-center p-4 bg-purple-50 rounded-lg\">\n            <Diamond className=\"w-6 h-6 text-purple-600 mx-auto mb-2\" />\n            <p className=\"text-2xl font-bold text-purple-900\">{userData?.gems_balance || 0}</p>\n            <p className=\"text-sm text-purple-600\">Gems Earned</p>\n          </div>\n          <div className=\"text-center p-4 bg-yellow-50 rounded-lg\">\n            <Trophy className=\"w-6 h-6 text-yellow-600 mx-auto mb-2\" />\n            <p className=\"text-2xl font-bold text-yellow-900\">{userData?.gold_collected || 0}</p>\n            <p className=\"text-sm text-yellow-600\">Gold Collection</p>\n          </div>\n          <div className=\"text-center p-4 bg-green-50 rounded-lg\">\n            <Target className=\"w-6 h-6 text-green-600 mx-auto mb-2\" />\n            <p className=\"text-2xl font-bold text-green-900\">Level {userData?.level || 1}</p>\n            <p className=\"text-sm text-green-600\">Current Level</p>\n          </div>\n          <div className=\"text-center p-4 bg-red-50 rounded-lg\">\n            <Activity className=\"w-6 h-6 text-red-600 mx-auto mb-2\" />\n            <p className=\"text-2xl font-bold text-red-900\">{userData?.points_streak_days || 0}</p>\n            <p className=\"text-sm text-red-600\">Day Streak</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Earning Sources Breakdown */}\n      <div className=\"space-y-3\">\n        <h3 className=\"text-lg font-semibold text-gray-900\">Currency Breakdown</h3>\n        <div className=\"flex items-center justify-between p-3 bg-blue-50 rounded-lg\">\n          <div className=\"flex items-center space-x-2\">\n            <Coins className=\"w-5 h-5 text-blue-600\" />\n            <span className=\"font-medium text-blue-900\">Points</span>\n          </div>\n          <div className=\"text-right\">\n            <p className=\"font-semibold text-blue-900\">{userData?.points_balance?.toLocaleString() || '0'}</p>\n            <p className=\"text-sm text-blue-600\">From social actions</p>\n          </div>\n        </div>\n        <div className=\"flex items-center justify-between p-3 bg-orange-50 rounded-lg\">\n          <div className=\"flex items-center space-x-2\">\n            <Key className=\"w-5 h-5 text-orange-600\" />\n            <span className=\"font-medium text-orange-900\">Keys</span>\n          </div>\n          <div className=\"text-right\">\n            <p className=\"font-semibold text-orange-900\">{userData?.keys_balance || '0'}</p>\n            <p className=\"text-sm text-orange-600\">For drop applications</p>\n          </div>\n        </div>\n        <div className=\"flex items-center justify-between p-3 bg-purple-50 rounded-lg\">\n          <div className=\"flex items-center space-x-2\">\n            <Diamond className=\"w-5 h-5 text-purple-600\" />\n            <span className=\"font-medium text-purple-900\">Gems</span>\n          </div>\n          <div className=\"text-right\">\n            <p className=\"font-semibold text-purple-900\">{userData?.gems_balance || '0'}</p>\n            <p className=\"text-sm text-purple-600\">From completed drops</p>\n          </div>\n        </div>\n        <div className=\"flex items-center justify-between p-3 bg-yellow-50 rounded-lg\">\n          <div className=\"flex items-center space-x-2\">\n            <Trophy className=\"w-5 h-5 text-yellow-600\" />\n            <span className=\"font-medium text-yellow-900\">Gold</span>\n          </div>\n          <div className=\"text-right\">\n            <p className=\"font-semibold text-yellow-900\">{userData?.gold_collected || '0'}</p>\n            <p className=\"text-sm text-yellow-600\">Prestige collection</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction PortfolioHoldingsSection({\n  holdings,\n  loading,\n  onList,\n  onView,\n}: {\n  holdings: ContentHolding[];\n  loading: boolean;\n  onList: (holding: ContentHolding) => void;\n  onView: (holding: ContentHolding) => void;\n}) {\n  if (loading) {\n    return (\n      <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Content Portfolio</h3>\n        <p className=\"text-sm text-gray-500\">Loading holdings…</p>\n      </div>\n    );\n  }\n\n  if (!holdings.length) {\n    return (\n      <div className=\"bg-white rounded-xl p-6 border border-dashed border-gray-300 text-center\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Start building your portfolio</h3>\n        <p className=\"text-gray-600 mb-4\">\n          Invest in creator content to earn returns and unlock secondary market trading.\n        </p>\n        <button className=\"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition\">\n          Discover Opportunities\n        </button>\n      </div>\n    );\n  }\n\n  const totals = holdings.reduce(\n    (\n      acc,\n      holding,\n    ) => {\n      acc.value += holding.market_value;\n      acc.gain += holding.unrealized_gain;\n      return acc;\n    },\n    { value: 0, gain: 0 },\n  );\n\n  return (\n    <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n      <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6\">\n        <div>\n          <h3 className=\"text-lg font-semibold text-gray-900\">Content Portfolio</h3>\n          <p className=\"text-sm text-gray-500\">Track your holdings, performance, and resale opportunities.</p>\n        </div>\n        <div className=\"flex items-center space-x-6 text-sm\">\n          <div>\n            <p className=\"text-gray-500\">Portfolio Value</p>\n            <p className=\"text-lg font-semibold text-gray-900\">${totals.value.toFixed(2)}</p>\n          </div>\n          <div>\n            <p className=\"text-gray-500\">Unrealized Gain</p>\n            <p className={`text-lg font-semibold ${totals.gain >= 0 ? 'text-green-600' : 'text-red-500'}`}>\n              {totals.gain >= 0 ? '+' : ''}${totals.gain.toFixed(2)}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"overflow-x-auto\">\n        <table className=\"min-w-full divide-y divide-gray-200\">\n          <thead className=\"bg-gray-50\">\n            <tr>\n              <th scope=\"col\" className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Asset\n              </th>\n              <th scope=\"col\" className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Shares\n              </th>\n              <th scope=\"col\" className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Avg. Cost\n              </th>\n              <th scope=\"col\" className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Market Value\n              </th>\n              <th scope=\"col\" className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Unrealized\n              </th>\n              <th scope=\"col\" className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Day\n              </th>\n              <th scope=\"col\" className=\"px-4 py-3\" />\n            </tr>\n          </thead>\n          <tbody className=\"bg-white divide-y divide-gray-200\">\n            {holdings.map((holding) => (\n              <tr key={holding.content_id} className=\"hover:bg-gray-50\">\n                <td className=\"px-4 py-4\">\n                  <div className=\"flex items-center space-x-3\">\n                    <img\n                      src={holding.content_thumbnail}\n                      alt={holding.content_title}\n                      className=\"w-12 h-12 rounded-lg object-cover\"\n                    />\n                    <div>\n                      <p className=\"font-medium text-gray-900\">{holding.content_title}</p>\n                      <p className=\"text-sm text-gray-500\">\n                        {holding.creator_name} • {holding.platform.toUpperCase()}\n                      </p>\n                    </div>\n                  </div>\n                </td>\n                <td className=\"px-4 py-4 text-right\">\n                  <div className=\"font-semibold text-gray-900\">{holding.owned_shares}</div>\n                  <div className=\"text-xs text-gray-500\">{holding.available_to_sell} sellable</div>\n                </td>\n                <td className=\"px-4 py-4 text-right\">\n                  <div className=\"text-gray-900\">${holding.avg_cost.toFixed(2)}</div>\n                  <div className=\"text-xs text-gray-500\">Now ${holding.current_price.toFixed(2)}</div>\n                </td>\n                <td className=\"px-4 py-4 text-right\">\n                  <div className=\"text-gray-900\">${holding.market_value.toFixed(2)}</div>\n                  <div className=\"text-xs text-gray-500\">Weekly {holding.week_change_pct.toFixed(1)}%</div>\n                </td>\n                <td className=\"px-4 py-4 text-right\">\n                  <div className={`font-semibold ${holding.unrealized_gain >= 0 ? 'text-green-600' : 'text-red-500'}`}>\n                    {holding.unrealized_gain >= 0 ? '+' : ''}${holding.unrealized_gain.toFixed(2)}\n                  </div>\n                </td>\n                <td className=\"px-4 py-4 text-right\">\n                  <span className={`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${\n                    holding.day_change_pct >= 0 ? 'bg-green-50 text-green-700' : 'bg-red-50 text-red-600'\n                  }`}>\n                    {holding.day_change_pct >= 0 ? '+' : ''}{holding.day_change_pct.toFixed(2)}%\n                  </span>\n                </td>\n                <td className=\"px-4 py-4 text-right space-x-2\">\n                  <button\n                    onClick={() => onView(holding)}\n                    className=\"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-600 rounded-lg hover:bg-gray-100\"\n                  >\n                    View details\n                  </button>\n                  {holding.available_to_sell > 0 ? (\n                    <button\n                      onClick={() => onList(holding)}\n                      className=\"px-3 py-1.5 text-sm font-medium border border-orange-200 text-orange-600 rounded-lg hover:bg-orange-50\"\n                    >\n                      List for resale\n                    </button>\n                  ) : (\n                    <span className=\"text-xs text-gray-400\">All shares listed</span>\n                  )}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\nfunction ActiveListingsSection({ listings, loading }: { listings: ShareListing[]; loading: boolean }) {\n  if (loading) {\n    return (\n      <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">My Listings</h3>\n        <p className=\"text-sm text-gray-500\">Loading listings…</p>\n      </div>\n    );\n  }\n\n  if (!listings.length) {\n    return null;\n  }\n\n  return (\n    <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <div>\n          <h3 className=\"text-lg font-semibold text-gray-900\">My Listings</h3>\n          <p className=\"text-sm text-gray-500\">Active resale listings awaiting buyers.</p>\n        </div>\n        <span className=\"px-3 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-700\">\n          {listings.length} active\n        </span>\n      </div>\n\n      <div className=\"space-y-3\">\n        {listings.map((listing) => (\n          <div key={listing.id} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n            <div className=\"flex items-center space-x-3\">\n              <img\n                src={listing.content_thumbnail}\n                alt={listing.content_title}\n                className=\"w-12 h-12 rounded-lg object-cover\"\n              />\n              <div>\n                <p className=\"font-medium text-gray-900\">{listing.content_title}</p>\n                <p className=\"text-sm text-gray-500\">\n                  {listing.remaining_quantity}/{listing.quantity} shares available\n                </p>\n              </div>\n            </div>\n            <div className=\"text-right\">\n              <p className=\"text-sm text-gray-500\">Ask price</p>\n              <p className=\"text-lg font-semibold text-gray-900\">${listing.ask_price.toFixed(2)}</p>\n              <p className=\"text-xs text-gray-500 mt-1\">\n                Created {new Date(listing.created_at).toLocaleDateString()} • {listing.status}\n              </p>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nfunction OffersSection({\n  incoming,\n  outgoing,\n  loading,\n  onAccept,\n}: {\n  incoming: ShareOffer[];\n  outgoing: ShareOffer[];\n  loading: boolean;\n  onAccept: (offerId: string) => void;\n}) {\n  if (loading) {\n    return (\n      <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Offers</h3>\n        <p className=\"text-sm text-gray-500\">Loading offers…</p>\n      </div>\n    );\n  }\n\n  if (!incoming.length && !outgoing.length) {\n    return null;\n  }\n\n  return (\n    <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n      <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Offers</h3>\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <div>\n          <div className=\"flex items-center justify-between mb-3\">\n            <h4 className=\"text-sm font-semibold text-gray-800\">Incoming</h4>\n            <span className=\"px-2 py-1 text-xs rounded-full bg-orange-100 text-orange-700\">\n              {incoming.length}\n            </span>\n          </div>\n          <div className=\"space-y-3\">\n            {incoming.map((offer) => (\n              <div key={offer.id} className=\"bg-gray-50 rounded-lg p-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"font-semibold text-gray-900\">\n                      {offer.quantity} shares @ ${offer.bid_price.toFixed(2)}\n                    </p>\n                    <p className=\"text-sm text-gray-500\">\n                      {offer.content_title || offer.content_id}\n                    </p>\n                    {offer.message && (\n                      <p className=\"text-xs text-gray-500 mt-1\">“{offer.message}”</p>\n                    )}\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <button\n                      onClick={() => onAccept(offer.id)}\n                      className=\"px-3 py-1.5 text-xs font-medium bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n                    >\n                      Accept\n                    </button>\n                    <button className=\"px-3 py-1.5 text-xs font-medium border border-gray-300 text-gray-600 rounded-lg hover:bg-gray-100\">\n                      Decline\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n            {!incoming.length && <p className=\"text-sm text-gray-500\">No incoming offers.</p>}\n          </div>\n        </div>\n        <div>\n          <div className=\"flex items-center justify-between mb-3\">\n            <h4 className=\"text-sm font-semibold text-gray-800\">Outgoing</h4>\n            <span className=\"px-2 py-1 text-xs rounded-full bg-slate-100 text-slate-700\">\n              {outgoing.length}\n            </span>\n          </div>\n          <div className=\"space-y-3\">\n            {outgoing.map((offer) => (\n              <div key={offer.id} className=\"bg-gray-50 rounded-lg p-4\">\n                <p className=\"font-semibold text-gray-900\">\n                  {offer.quantity} shares @ ${offer.bid_price.toFixed(2)}\n                </p>\n                <p className=\"text-sm text-gray-500\">\n                  {offer.content_title || offer.content_id}\n                </p>\n                <p className=\"text-xs text-gray-500 mt-1 capitalize\">Status: {offer.status}</p>\n              </div>\n            ))}\n            {!outgoing.length && <p className=\"text-sm text-gray-500\">No outgoing offers.</p>}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default function Wallet() {\n  const [wallets, setWallets] = useState<WalletType[]>([]);\n  const [transactions, setTransactions] = useState<TransactionType[]>([]);\n  const [userData, setUserData] = useState<UserType | null>(null);\n  const [holdings, setHoldings] = useState<ContentHolding[]>([]);\n  const [holdingsLoading, setHoldingsLoading] = useState(true);\n  const [listings, setListings] = useState<ShareListing[]>([]);\n  const [listingsLoading, setListingsLoading] = useState(true);\n  const [incomingOffers, setIncomingOffers] = useState<ShareOffer[]>([]);\n  const [outgoingOffers, setOutgoingOffers] = useState<ShareOffer[]>([]);\n  const [offersLoading, setOffersLoading] = useState(true);\n  const [selectedHolding, setSelectedHolding] = useState<ContentHolding | null>(null);\n  const [listModalOpen, setListModalOpen] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState<'overview' | 'transactions'>('overview');\n  const [showCurrencyModal, setShowCurrencyModal] = useState(false);\n  const [showMasterKeyModal, setShowMasterKeyModal] = useState(false);\n  const [showGoldShopModal, setShowGoldShopModal] = useState(false);\n  const [showWithdrawalModal, setShowWithdrawalModal] = useState(false);\n  const [showPaymentPreferencesModal, setShowPaymentPreferencesModal] = useState(false);\n  const [showGemStoreModal, setShowGemStoreModal] = useState(false);\n  const [showAchievementsModal, setShowAchievementsModal] = useState(false);\n\n  // Debug logging\n  console.log('Wallet component rendered, modal states:', {\n    showGemStoreModal,\n    showCurrencyModal,\n    showWithdrawalModal\n  });\n\n  useEffect(() => {\n    fetchWalletData();\n  }, []);\n\n  useEffect(() => {\n    loadHoldings();\n    loadListings();\n    loadOffers();\n  }, []);\n\n  const fetchWalletData = async () => {\n    try {\n      console.log('=== fetchWalletData Debug ===');\n      console.log('Starting wallet data fetch...');\n      \n      // Check authentication with comprehensive logging\n      console.log('Checking authentication with Mocha service...');\n      console.log('Current cookies:', document.cookie);\n      \n      const authHeaders = buildAuthHeaders();\n      const authResponse = await fetch('/api/users/me', {\n        credentials: 'include',\n        headers: authHeaders\n      });\n      console.log('Auth response:', {\n        status: authResponse.status,\n        statusText: authResponse.statusText,\n        headers: Object.fromEntries(authResponse.headers.entries())\n      });\n      \n      let authData = null;\n      try {\n        const responseText = await authResponse.text();\n        console.log('Raw auth response:', responseText);\n        \n        if (responseText) {\n          authData = JSON.parse(responseText);\n        }\n        \n        console.log('Auth data parsed:', {\n          isNull: authData === null,\n          hasId: !!(authData?.id),\n          hasEmail: !!(authData?.email),\n          type: typeof authData,\n          data: authData\n        });\n      } catch (parseError) {\n        console.error('Failed to parse auth response:', parseError);\n      }\n      \n      if (!authData || authData === null) {\n        console.log('User not authenticated - showing error and manual auth options');\n        // Don't redirect immediately, show user state for debugging\n        setUserData(null);\n        setWallets([]);\n        setTransactions([]);\n        \n        // Set a temporary notification instead of redirecting\n        alert('Authentication failed. Please try the \"Force Re-Login\" button or refresh the page.');\n        return;\n      }\n      \n      console.log('User is authenticated, fetching user data...');\n      \n      // Fetch user data from database with error handling\n      const response = await fetch('/api/users/me/wallets', {\n        credentials: 'include',\n        headers: buildAuthHeaders()\n      });\n      console.log('User data response status:', response.status);\n      \n      let userData = null;\n      try {\n        userData = await response.json();\n        console.log('User data parsed:', {\n          isNull: userData === null,\n          hasError: !!(userData?.error),\n          hasId: !!(userData?.id),\n          hasEmail: !!(userData?.email),\n          gems_balance: userData?.gems_balance,\n          type: typeof userData\n        });\n      } catch (parseError) {\n        console.error('Failed to parse user response:', parseError);\n      }\n      \n      // Handle error responses\n      if (userData?.error) {\n        console.error('User data API error:', userData.error);\n        if (userData.error.includes('configuration')) {\n          alert('Server configuration error. Please contact support.');\n          return;\n        }\n      }\n      \n      // If still no user data, create temporary user for display\n      if (!userData || userData === null || userData?.error) {\n        console.log('No valid database user found, creating temporary user...');\n        const tempUser: UserType = {\n          id: Date.now(),\n          mocha_user_id: authData.id || 'temp',\n          email: authData.email || '',\n          display_name: authData.google_user_data?.name || authData.email?.split('@')[0] || 'User',\n          username: authData.email?.split('@')[0] || 'user',\n          avatar_url: authData.google_user_data?.picture || undefined,\n          bio: 'Welcome to Promorang!',\n          banner_url: undefined,\n          website_url: undefined,\n          social_links: undefined,\n          user_type: 'regular',\n          xp_points: 100,\n          level: 1,\n          referral_code: 'TEMP' + Date.now().toString().slice(-4),\n          referred_by: undefined,\n          follower_count: 0,\n          following_count: 0,\n          total_earnings_usd: 0,\n          promogem_balance: 0,\n          points_balance: 25,\n          keys_balance: 1,\n          gems_balance: 0,\n          gold_collected: 0,\n          user_tier: 'free',\n          points_streak_days: 0,\n          last_activity_date: new Date().toISOString().split('T')[0],\n          master_key_activated_at: undefined,\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString()\n  };\n        console.log('Using temporary user data:', tempUser);\n        setUserData(tempUser);\n      } else {\n        console.log('Setting valid user data:', {\n          id: userData.id,\n          email: userData.email,\n          gems_balance: userData.gems_balance\n        });\n        setUserData(userData);\n      }\n      \n      // Fetch wallets and transactions with error handling\n      try {\n        const sharedHeaders = buildAuthHeaders();\n        const [walletsResponse, transactionsResponse] = await Promise.all([\n          fetch('/api/users/wallets', { credentials: 'include', headers: sharedHeaders }),\n          fetch('/api/users/transactions', { credentials: 'include', headers: sharedHeaders })\n        ]);\n\n        let walletsData = [];\n        let transactionsData = [];\n\n        if (walletsResponse.ok) {\n          const walletsJson = await walletsResponse.json();\n          // Handle both direct array and object with wallets property\n          if (Array.isArray(walletsJson)) {\n            walletsData = walletsJson;\n          } else if (walletsJson && Array.isArray(walletsJson.wallets)) {\n            walletsData = walletsJson.wallets;\n          }\n        }\n\n        if (transactionsResponse.ok) {\n          const transactionsJson = await transactionsResponse.json();\n          // Handle both direct array and object with transactions property\n          if (Array.isArray(transactionsJson)) {\n            transactionsData = transactionsJson;\n          } else if (transactionsJson && Array.isArray(transactionsJson.transactions)) {\n            transactionsData = transactionsJson.transactions;\n          }\n        }\n\n        setWallets(walletsData || []);\n        setTransactions(transactionsData || []);\n\n        console.log('Fetched additional data:', {\n          wallets: walletsData.length,\n          transactions: transactionsData.length\n        });\n      } catch (additionalDataError) {\n        console.error('Error fetching wallets/transactions:', additionalDataError);\n        setWallets([]);\n        setTransactions([]);\n      }\n      \n    } catch (error) {\n      console.error('Failed to fetch wallet data:', error);\n      if (error instanceof Error) {\n        console.error('Error details:', error.message);\n        console.error('Error stack:', error.stack);\n      }\n      // Don't redirect on general errors, just show empty state\n      setUserData(null);\n      setWallets([]);\n      setTransactions([]);\n    } finally {\n      setLoading(false);\n      console.log('fetchWalletData completed, loading set to false');\n    }\n  };\n\n  const loadHoldings = async () => {\n    setHoldingsLoading(true);\n    const data = await getPortfolioHoldings();\n    setHoldings(data);\n    setHoldingsLoading(false);\n  };\n\n  const loadListings = async () => {\n    setListingsLoading(true);\n    const data = await fetchShareListings(true);\n    setListings(data);\n    setListingsLoading(false);\n  };\n\n  const loadOffers = async () => {\n    setOffersLoading(true);\n    const [sellerOffers, buyerOffers] = await Promise.all([\n      fetchShareOffers('seller'),\n      fetchShareOffers('buyer'),\n    ]);\n    setIncomingOffers(sellerOffers);\n    setOutgoingOffers(buyerOffers);\n    setOffersLoading(false);\n  };\n\n  const openListModal = (holding: ContentHolding) => {\n    setSelectedHolding(holding);\n    setListModalOpen(true);\n  };\n\n  const handleListingSuccess = () => {\n    loadHoldings();\n    loadListings();\n    loadOffers();\n  };\n\n  const handleAcceptOffer = async (offerId: string) => {\n    try {\n      await acceptShareOffer(offerId);\n      await Promise.all([loadHoldings(), loadListings(), loadOffers()]);\n    } catch (error) {\n      console.error('Failed to accept offer:', error);\n      alert(error instanceof Error ? error.message : 'Failed to accept offer');\n    }\n  };\n\n  const usdWallet = wallets && wallets.length > 0 ? wallets.find(w => w.currency_type === 'USD') : null;\n\n  const getTransactionIcon = (type: string) => {\n    switch (type) {\n      case 'task_payment':\n      case 'referral_bonus':\n      case 'staking_reward':\n        return <ArrowDownLeft className=\"w-4 h-4 text-green-600\" />;\n      case 'withdrawal':\n        return <ArrowUpRight className=\"w-4 h-4 text-red-600\" />;\n      default:\n        return <Clock className=\"w-4 h-4 text-gray-600\" />;\n    }\n  };\n\n  const getTransactionColor = (amount: number) => {\n    return amount >= 0 ? 'text-green-600' : 'text-red-600';\n  };\n\n  // Button handlers with comprehensive logging\n  const handleBuyMoreGems = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    console.log('Buy More Gems button clicked!');\n    console.log('Current showGemStoreModal state:', showGemStoreModal);\n    console.log('Current userData:', userData);\n    setShowGemStoreModal(true);\n    console.log('Setting showGemStoreModal to true');\n    \n    // Force re-render to ensure state change is detected\n    setTimeout(() => {\n      console.log('showGemStoreModal after timeout:', showGemStoreModal);\n    }, 100);\n  };\n\n  const handleConvertCurrency = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    console.log('Convert Currency button clicked!');\n    console.log('Current showCurrencyModal state:', showCurrencyModal);\n    setShowCurrencyModal(true);\n    console.log('Setting showCurrencyModal to true');\n  };\n\n  const handleWithdrawGems = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    console.log('Withdraw Gems button clicked!');\n    console.log('Current showWithdrawalModal state:', showWithdrawalModal);\n    setShowWithdrawalModal(true);\n    console.log('Setting showWithdrawalModal to true');\n  };\n\n  const handleCloseGemStore = () => {\n    console.log('Closing Gem Store Modal');\n    setShowGemStoreModal(false);\n  };\n\n  const handleCloseCurrencyModal = () => {\n    console.log('Closing Currency Modal');\n    setShowCurrencyModal(false);\n  };\n\n  const handleCloseWithdrawalModal = () => {\n    console.log('Closing Withdrawal Modal');\n    setShowWithdrawalModal(false);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-3xl font-bold text-gray-900\">Wallet</h1>\n        <p className=\"text-gray-600 mt-2\">Manage your earnings and transactions</p>\n      </div>\n\n      {/* Currency Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        {/* Points Card */}\n        <div className=\"bg-gradient-to-br from-blue-500 to-cyan-600 rounded-2xl p-6 text-white\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center space-x-2\">\n              <Coins className=\"w-6 h-6\" />\n              <span className=\"text-lg font-medium\">Points</span>\n            </div>\n            <div className=\"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center\">\n              <span className=\"text-xs font-bold\">PTS</span>\n            </div>\n          </div>\n          <div className=\"mb-4\">\n            <p className=\"text-3xl font-bold\">{userData?.points_balance?.toLocaleString() || '0'}</p>\n            <p className=\"text-blue-100 text-sm\">Earn from social actions</p>\n          </div>\n          <button \n            onClick={handleConvertCurrency}\n            className=\"w-full bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-4 text-sm font-medium transition-colors\"\n          >\n            Convert to Keys\n          </button>\n        </div>\n\n        {/* Keys Card */}\n        <div className=\"bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl p-6 text-white\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center space-x-2\">\n              <Key className=\"w-6 h-6\" />\n              <span className=\"text-lg font-medium\">Keys</span>\n            </div>\n            <div className=\"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center\">\n              <span className=\"text-xs font-bold\">KEY</span>\n            </div>\n          </div>\n          <div className=\"mb-4\">\n            <p className=\"text-3xl font-bold\">{userData?.keys_balance || '0'}</p>\n            <p className=\"text-orange-100 text-sm\">Apply for paid drops</p>\n          </div>\n          <button \n            onClick={() => setShowMasterKeyModal(true)}\n            className=\"w-full bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-4 text-sm font-medium transition-colors\"\n          >\n            Master Key Status\n          </button>\n        </div>\n\n        {/* Gems Card */}\n        <div className=\"bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl p-6 text-white\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center space-x-2\">\n              <Diamond className=\"w-6 h-6\" />\n              <span className=\"text-lg font-medium\">Gems</span>\n            </div>\n            <div className=\"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center\">\n              <span className=\"text-xs font-bold\">GEM</span>\n            </div>\n          </div>\n          <div className=\"mb-4\">\n            <p className=\"text-3xl font-bold\">{userData?.gems_balance || '0'}</p>\n            <p className=\"text-purple-100 text-sm\">Earn from completed drops</p>\n          </div>\n          <div className=\"grid grid-cols-3 gap-2\">\n            <button \n              onClick={handleBuyMoreGems}\n              className=\"bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors\"\n            >\n              Buy More\n            </button>\n            <button \n              onClick={handleConvertCurrency}\n              className=\"bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors\"\n            >\n              Convert\n            </button>\n            <button \n              onClick={handleWithdrawGems}\n              disabled={(userData?.gems_balance || 0) < 200}\n              className=\"bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              Withdraw\n            </button>\n          </div>\n        </div>\n\n        {/* Gold Card */}\n        <div className=\"bg-gradient-to-br from-yellow-500 to-amber-600 rounded-2xl p-6 text-white\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center space-x-2\">\n              <Trophy className=\"w-6 h-6\" />\n              <span className=\"text-lg font-medium\">Gold</span>\n            </div>\n            <div className=\"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center\">\n              <span className=\"text-xs font-bold\">AU</span>\n            </div>\n          </div>\n          <div className=\"mb-4\">\n            <p className=\"text-3xl font-bold\">{userData?.gold_collected || '0'}</p>\n            <p className=\"text-yellow-100 text-sm\">Prestige currency</p>\n          </div>\n          <div className=\"grid grid-cols-2 gap-2\">\n            <button \n              onClick={() => setShowGoldShopModal(true)}\n              className=\"bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors\"\n            >\n              Gold Shop\n            </button>\n            <button \n              onClick={() => setShowAchievementsModal(true)}\n              className=\"bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors\"\n            >\n              Achievements\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Legacy USD Wallet (if exists) */}\n      {usdWallet && usdWallet.balance > 0 && (\n        <div className=\"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-6 text-white\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center space-x-2\">\n              <DollarSign className=\"w-6 h-6\" />\n              <span className=\"text-lg font-medium\">USD Balance</span>\n            </div>\n            <WalletIcon className=\"w-6 h-6 opacity-75\" />\n          </div>\n          <div className=\"mb-4\">\n            <p className=\"text-4xl font-bold\">${(usdWallet?.balance || 0).toFixed(2)}</p>\n            <p className=\"text-green-100 text-sm\">Available for withdrawal</p>\n          </div>\n          <div className=\"flex space-x-3\">\n            <button className=\"flex-1 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-4 text-sm font-medium transition-colors\">\n              Withdraw\n            </button>\n            <button \n              onClick={() => setShowPaymentPreferencesModal(true)}\n              className=\"flex-1 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-4 text-sm font-medium transition-colors\"\n            >\n              Payment Methods\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Staking Rewards Card */}\n      <div className=\"bg-white rounded-xl p-6 shadow-sm border border-gray-200\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">Staking Rewards</h2>\n          <span className=\"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700 px-3 py-1 rounded-full text-sm font-medium\">\n            12.5% APY\n          </span>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          <div className=\"text-center\">\n            <p className=\"text-2xl font-bold text-gray-900\">0</p>\n            <p className=\"text-sm text-gray-600\">Staked PromoGems</p>\n          </div>\n          <div className=\"text-center\">\n            <p className=\"text-2xl font-bold text-purple-600\">0.00</p>\n            <p className=\"text-sm text-gray-600\">Pending Rewards</p>\n          </div>\n          <div className=\"text-center\">\n            <p className=\"text-2xl font-bold text-green-600\">$0.00</p>\n            <p className=\"text-sm text-gray-600\">Total Earned</p>\n          </div>\n        </div>\n        <div className=\"mt-6 pt-6 border-t border-gray-200\">\n          <button className=\"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-3 rounded-lg font-medium transition-all duration-200\">\n            Start Staking PromoGems\n          </button>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"bg-white rounded-xl shadow-sm border border-gray-200\">\n        <div className=\"border-b border-gray-200\">\n          <nav className=\"flex space-x-8 px-6\">\n            <button\n              onClick={() => setActiveTab('overview')}\n              className={`py-4 border-b-2 font-medium text-sm ${\n                activeTab === 'overview'\n                  ? 'border-orange-500 text-orange-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700'\n              }`}\n            >\n              Overview\n            </button>\n            <button\n              onClick={() => setActiveTab('transactions')}\n              className={`py-4 border-b-2 font-medium text-sm ${\n                activeTab === 'transactions'\n                  ? 'border-orange-500 text-orange-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700'\n              }`}\n            >\n              Transactions\n            </button>\n          </nav>\n        </div>\n\n        <div className=\"p-6\">\n          {activeTab === 'overview' && (\n            <div className=\"space-y-6\">\n              {/* Enhanced Analytics Overview */}\n              <WalletAnalyticsOverview userData={userData} transactions={transactions} />\n              <PortfolioHoldingsSection\n                holdings={holdings}\n                loading={holdingsLoading}\n                onList={openListModal}\n                onView={(holding) => navigate(`/portfolio/holdings/${holding.content_id}`)}\n              />\n              <ActiveListingsSection listings={listings} loading={listingsLoading} />\n              <OffersSection\n                incoming={incomingOffers}\n                outgoing={outgoingOffers}\n                loading={offersLoading}\n                onAccept={handleAcceptOffer}\n              />\n            </div>\n          )}\n\n          {activeTab === 'transactions' && (\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-lg font-semibold text-gray-900\">Transaction History</h3>\n                <button className=\"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\">\n                  <Filter className=\"w-4 h-4\" />\n                  <span>Filter</span>\n                </button>\n              </div>\n\n              <div className=\"space-y-3\">\n                {transactions.length > 0 ? (\n                  transactions.map((transaction) => (\n                    <div key={transaction.id} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-sm\">\n                          {getTransactionIcon(transaction.transaction_type)}\n                        </div>\n                        <div>\n                          <p className=\"font-medium text-gray-900\">\n                            {transaction.description || transaction.transaction_type.replace('_', ' ')}\n                          </p>\n                          <p className=\"text-sm text-gray-500\">\n                            {new Date(transaction.created_at).toLocaleDateString()} • {transaction.currency_type}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className={`font-semibold ${getTransactionColor(transaction.amount)}`}>\n                          {transaction.amount >= 0 ? '+' : ''}${Math.abs(transaction.amount).toFixed(2)}\n                        </p>\n                        <p className=\"text-sm text-gray-500 capitalize\">{transaction.status}</p>\n                      </div>\n                    </div>\n                  ))\n                ) : (\n                  <div className=\"text-center py-12\">\n                    <WalletIcon className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No transactions yet</h3>\n                    <p className=\"text-gray-600\">Your transaction history will appear here once you start earning.</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Auth Debugger - shown when user data is null */}\n      {!userData && <AuthDebugger />}\n\n      {/* Modals */}\n      <CurrencyConversionModal\n        user={userData}\n        isOpen={showCurrencyModal}\n        onClose={handleCloseCurrencyModal}\n        onSuccess={fetchWalletData}\n      />\n      \n      <MasterKeyModal\n        user={userData}\n        isOpen={showMasterKeyModal}\n        onClose={() => setShowMasterKeyModal(false)}\n        onSuccess={fetchWalletData}\n      />\n      \n      <GoldShopModal\n        user={userData}\n        isOpen={showGoldShopModal}\n        onClose={() => setShowGoldShopModal(false)}\n        onPurchase={fetchWalletData}\n      />\n      \n      <WithdrawalModal\n        user={userData}\n        isOpen={showWithdrawalModal}\n        onClose={handleCloseWithdrawalModal}\n        onSuccess={fetchWalletData}\n      />\n\n      <ListShareModal\n        isOpen={listModalOpen}\n        onClose={() => setListModalOpen(false)}\n        holding={selectedHolding}\n        onSuccess={handleListingSuccess}\n      />\n      \n      <PaymentPreferencesModal\n        user={userData}\n        isOpen={showPaymentPreferencesModal}\n        onClose={() => setShowPaymentPreferencesModal(false)}\n        onSuccess={fetchWalletData}\n      />\n      \n      <GemStoreModal\n        user={userData}\n        isOpen={showGemStoreModal}\n        onClose={handleCloseGemStore}\n        onSuccess={fetchWalletData}\n      />\n      \n      <AchievementsModal\n        user={userData}\n        isOpen={showAchievementsModal}\n        onClose={() => setShowAchievementsModal(false)}\n      />\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { X, Lock, TrendingUp, Shield, Rocket, Star, AlertCircle, Calculator } from 'lucide-react';\nimport { UserType } from '@/shared/types';\n\ninterface GrowthChannel {\n  id: string;\n  name: string;\n  description: string;\n  lockPeriod: number;\n  baseMultiplier: number;\n  riskLevel: 'low' | 'medium' | 'high';\n  minDeposit: number;\n  maxDeposit: number;\n  expectedApr: number;\n  icon: any;\n  color: string;\n  features: string[];\n}\n\ninterface StakingModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  channel: GrowthChannel | null;\n  user: UserType | null;\n  onSuccess: () => void;\n}\n\nexport default function StakingModal({ isOpen, onClose, channel, user, onSuccess }: StakingModalProps) {\n  const [amount, setAmount] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  if (!isOpen || !channel) return null;\n\n  const resolveChannelIcon = () => {\n    if (typeof channel.icon === 'function') {\n      return channel.icon;\n    }\n\n    const iconKey = (channel as any).iconKey || channel.icon;\n    switch (iconKey) {\n      case 'Shield':\n        return Shield;\n      case 'Rocket':\n        return Rocket;\n      case 'Star':\n        return Star;\n      case 'TrendingUp':\n        return TrendingUp;\n      default:\n        return Lock;\n    }\n  };\n\n  const Icon = resolveChannelIcon();\n\n  const getChannelColor = () => {\n    const colors = {\n      green: 'from-green-500 to-emerald-600',\n      blue: 'from-blue-500 to-cyan-600', \n      purple: 'from-purple-500 to-pink-600',\n      orange: 'from-orange-500 to-red-600'\n    };\n    return colors[channel.color as keyof typeof colors] || colors.blue;\n  };\n\n  const getRiskColor = () => {\n    switch (channel.riskLevel) {\n      case 'low': return 'text-green-600 bg-green-100';\n      case 'medium': return 'text-yellow-600 bg-yellow-100';\n      case 'high': return 'text-red-600 bg-red-100';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  const calculateRewards = () => {\n    const stakeAmount = parseFloat(amount) || 0;\n    if (stakeAmount === 0) return { daily: 0, total: 0, final: 0 };\n\n    const totalDays = channel.lockPeriod;\n    const totalReturn = stakeAmount * (channel.baseMultiplier - 1);\n    const dailyReward = totalReturn / totalDays;\n    const finalAmount = stakeAmount + totalReturn;\n\n    return {\n      daily: dailyReward,\n      total: totalReturn,\n      final: finalAmount\n    };\n  };\n\n  const rewards = calculateRewards();\n  const canStake = amount && \n    parseFloat(amount) >= channel.minDeposit && \n    parseFloat(amount) <= channel.maxDeposit &&\n    parseFloat(amount) <= (user?.gems_balance || 0);\n\n  const handleStake = async () => {\n    if (!canStake) return;\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const response = await fetch('/api/growth/staking', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          channel_id: channel.id,\n          amount: parseFloat(amount)\n        }),\n      });\n\n      if (response.ok) {\n        onSuccess();\n        onClose();\n        setAmount('');\n      } else {\n        const error = await response.json();\n        setError(error.error || 'Failed to stake gems');\n      }\n    } catch (error) {\n      setError('Network error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleMaxAmount = () => {\n    const maxPossible = Math.min(user?.gems_balance || 0, channel.maxDeposit);\n    setAmount(maxPossible.toString());\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-2xl max-w-md w-full max-h-screen overflow-y-auto\">\n        {/* Header */}\n        <div className={`bg-gradient-to-r ${getChannelColor()} p-6 text-white`}>\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center\">\n                <Icon className=\"w-6 h-6\" />\n              </div>\n              <div>\n                <h2 className=\"text-xl font-bold\">{channel.name}</h2>\n                <span className={`px-2 py-1 rounded-full text-xs font-medium ${getRiskColor()} text-gray-800`}>\n                  {channel.riskLevel.toUpperCase()} RISK\n                </span>\n              </div>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-white/80 hover:text-white transition-colors\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n          <p className=\"text-white/90\">{channel.description}</p>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          {/* Channel Details */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n              <div className=\"text-lg font-bold text-gray-900\">{channel.lockPeriod}</div>\n              <div className=\"text-sm text-gray-600\">Days Locked</div>\n            </div>\n            <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n              <div className=\"text-lg font-bold text-green-600\">{channel.expectedApr}%</div>\n              <div className=\"text-sm text-gray-600\">Expected APR</div>\n            </div>\n            <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n              <div className=\"text-lg font-bold text-blue-600\">{channel.baseMultiplier}x</div>\n              <div className=\"text-sm text-gray-600\">Multiplier</div>\n            </div>\n            <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n              <div className=\"text-lg font-bold text-purple-600\">{user?.gems_balance || 0}</div>\n              <div className=\"text-sm text-gray-600\">Your Balance</div>\n            </div>\n          </div>\n\n          {/* Features */}\n          <div>\n            <h3 className=\"font-semibold text-gray-900 mb-3\">Channel Features</h3>\n            <div className=\"space-y-2\">\n              {channel.features.map((feature, index) => (\n                <div key={index} className=\"flex items-center space-x-2\">\n                  <div className={`w-2 h-2 rounded-full bg-gradient-to-r ${getChannelColor()}`}></div>\n                  <span className=\"text-sm text-gray-700\">{feature}</span>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Staking Amount */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Stake Amount (Gems)\n            </label>\n            <div className=\"relative\">\n              <input\n                type=\"number\"\n                value={amount}\n                onChange={(e) => setAmount(e.target.value)}\n                placeholder={`Min: ${channel.minDeposit}, Max: ${channel.maxDeposit}`}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                min={channel.minDeposit}\n                max={Math.min(channel.maxDeposit, user?.gems_balance || 0)}\n              />\n              <button\n                onClick={handleMaxAmount}\n                className=\"absolute right-2 top-1/2 transform -translate-y-1/2 text-sm text-purple-600 hover:text-purple-700 font-medium\"\n              >\n                MAX\n              </button>\n            </div>\n            <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n              <span>Min: {channel.minDeposit} gems</span>\n              <span>Max: {Math.min(channel.maxDeposit, user?.gems_balance || 0)} gems</span>\n            </div>\n          </div>\n\n          {/* Reward Calculator */}\n          {amount && parseFloat(amount) > 0 && (\n            <div className=\"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4 border border-green-200\">\n              <div className=\"flex items-center space-x-2 mb-3\">\n                <Calculator className=\"w-5 h-5 text-green-600\" />\n                <h3 className=\"font-semibold text-gray-900\">Projected Rewards</h3>\n              </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <div className=\"text-sm text-gray-600\">Daily Reward</div>\n                  <div className=\"font-bold text-green-600\">+{rewards.daily.toFixed(2)} Gems</div>\n                </div>\n                <div>\n                  <div className=\"text-sm text-gray-600\">Total Rewards</div>\n                  <div className=\"font-bold text-green-600\">+{rewards.total.toFixed(2)} Gems</div>\n                </div>\n                <div className=\"col-span-2\">\n                  <div className=\"text-sm text-gray-600\">Final Amount</div>\n                  <div className=\"text-xl font-bold text-blue-600\">{rewards.final.toFixed(2)} Gems</div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Warning */}\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n            <div className=\"flex items-start space-x-3\">\n              <AlertCircle className=\"w-5 h-5 text-yellow-600 mt-0.5\" />\n              <div>\n                <h4 className=\"font-semibold text-yellow-800\">Important Notice</h4>\n                <p className=\"text-sm text-yellow-700 mt-1\">\n                  Your gems will be locked for {channel.lockPeriod} days. Early withdrawal may result in penalties. \n                  Rewards are distributed daily and automatically compounded.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n              <p className=\"text-sm text-red-700\">{error}</p>\n            </div>\n          )}\n\n          {/* Actions */}\n          <div className=\"flex space-x-3\">\n            <button\n              onClick={onClose}\n              className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={handleStake}\n              disabled={!canStake || loading}\n              className={`flex-1 px-6 py-3 rounded-lg font-medium transition-all duration-200 ${\n                canStake && !loading\n                  ? `bg-gradient-to-r ${getChannelColor()} hover:opacity-90 text-white`\n                  : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n              }`}\n            >\n              {loading ? 'Staking...' : `Stake ${amount || '0'} Gems`}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { X, Rocket, Plus, Minus } from 'lucide-react';\nimport { UserType } from '@/shared/types';\n\ninterface RewardTier {\n  amount: number;\n  title: string;\n  description: string;\n  estimatedDelivery: string;\n  maxBackers?: number;\n}\n\ninterface FundingProjectModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  user: UserType | null;\n  onSuccess: () => void;\n}\n\nexport default function FundingProjectModal({ isOpen, onClose, onSuccess }: FundingProjectModalProps) {\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    category: 'Technology',\n    funding_goal: '',\n    min_pledge: '',\n    duration_days: '30'\n  });\n  const [rewardTiers, setRewardTiers] = useState<RewardTier[]>([\n    {\n      amount: 25,\n      title: 'Early Supporter',\n      description: 'Get early access and exclusive updates',\n      estimatedDelivery: 'March 2025'\n    }\n  ]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  if (!isOpen) return null;\n\n  const categories = [\n    'Technology', 'Film', 'Music', 'Art', 'Games', 'Fashion', \n    'Food', 'Publishing', 'Design', 'Education', 'Health', 'Other'\n  ];\n\n  const addRewardTier = () => {\n    setRewardTiers([...rewardTiers, {\n      amount: 100,\n      title: '',\n      description: '',\n      estimatedDelivery: 'April 2025'\n    }]);\n  };\n\n  const removeRewardTier = (index: number) => {\n    if (rewardTiers.length > 1) {\n      setRewardTiers(rewardTiers.filter((_, i) => i !== index));\n    }\n  };\n\n  const updateRewardTier = (index: number, field: keyof RewardTier, value: string | number) => {\n    const updated = [...rewardTiers];\n    updated[index] = { ...updated[index], [field]: value };\n    setRewardTiers(updated);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.title || !formData.description || !formData.funding_goal) {\n      setError('Please fill in all required fields');\n      return;\n    }\n\n    if (parseFloat(formData.funding_goal) < 1000) {\n      setError('Minimum funding goal is 1,000 gems');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const response = await fetch('/api/growth/funding/projects', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          ...formData,\n          funding_goal: parseFloat(formData.funding_goal),\n          min_pledge: parseFloat(formData.min_pledge) || 25,\n          duration_days: parseInt(formData.duration_days),\n          reward_tiers: rewardTiers\n        }),\n      });\n\n      if (response.ok) {\n        onSuccess();\n        onClose();\n        setFormData({\n          title: '',\n          description: '',\n          category: 'Technology',\n          funding_goal: '',\n          min_pledge: '',\n          duration_days: '30'\n        });\n        setRewardTiers([{\n          amount: 25,\n          title: 'Early Supporter',\n          description: 'Get early access and exclusive updates',\n          estimatedDelivery: 'March 2025'\n        }]);\n      } else {\n        const error = await response.json();\n        setError(error.error || 'Failed to create project');\n      }\n    } catch (error) {\n      setError('Network error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-2xl max-w-2xl w-full max-h-screen overflow-y-auto\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-blue-500 to-purple-500 p-6 text-white\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center\">\n                <Rocket className=\"w-6 h-6\" />\n              </div>\n              <div>\n                <h2 className=\"text-xl font-bold\">Create Funding Project</h2>\n                <p className=\"text-blue-100\">Launch your creative project</p>\n              </div>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-white/80 hover:text-white transition-colors\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n          {/* Basic Information */}\n          <div className=\"space-y-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Project Details</h3>\n            \n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Project Title *\n              </label>\n              <input\n                type=\"text\"\n                value={formData.title}\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                placeholder=\"Enter your project title\"\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Description *\n              </label>\n              <textarea\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                placeholder=\"Describe your project, goals, and what makes it special\"\n                rows={4}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                required\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Category\n                </label>\n                <select\n                  value={formData.category}\n                  onChange={(e) => setFormData({ ...formData, category: e.target.value })}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                >\n                  {categories.map(cat => (\n                    <option key={cat} value={cat}>{cat}</option>\n                  ))}\n                </select>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Duration (Days)\n                </label>\n                <select\n                  value={formData.duration_days}\n                  onChange={(e) => setFormData({ ...formData, duration_days: e.target.value })}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                >\n                  <option value=\"30\">30 days</option>\n                  <option value=\"45\">45 days</option>\n                  <option value=\"60\">60 days</option>\n                  <option value=\"90\">90 days</option>\n                </select>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Funding Goal (Gems) *\n                </label>\n                <input\n                  type=\"number\"\n                  value={formData.funding_goal}\n                  onChange={(e) => setFormData({ ...formData, funding_goal: e.target.value })}\n                  placeholder=\"10000\"\n                  min=\"1000\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  required\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Minimum Pledge (Gems)\n                </label>\n                <input\n                  type=\"number\"\n                  value={formData.min_pledge}\n                  onChange={(e) => setFormData({ ...formData, min_pledge: e.target.value })}\n                  placeholder=\"25\"\n                  min=\"1\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* Reward Tiers */}\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Reward Tiers</h3>\n              <button\n                type=\"button\"\n                onClick={addRewardTier}\n                className=\"flex items-center space-x-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors\"\n              >\n                <Plus className=\"w-4 h-4\" />\n                <span>Add Tier</span>\n              </button>\n            </div>\n\n            {rewardTiers.map((tier, index) => (\n              <div key={index} className=\"border border-gray-200 rounded-lg p-4\">\n                <div className=\"flex items-center justify-between mb-3\">\n                  <h4 className=\"font-medium text-gray-900\">Tier {index + 1}</h4>\n                  {rewardTiers.length > 1 && (\n                    <button\n                      type=\"button\"\n                      onClick={() => removeRewardTier(index)}\n                      className=\"text-red-600 hover:text-red-700\"\n                    >\n                      <Minus className=\"w-4 h-4\" />\n                    </button>\n                  )}\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-3 mb-3\">\n                  <div>\n                    <label className=\"block text-xs font-medium text-gray-600 mb-1\">\n                      Pledge Amount (Gems)\n                    </label>\n                    <input\n                      type=\"number\"\n                      value={tier.amount}\n                      onChange={(e) => updateRewardTier(index, 'amount', parseInt(e.target.value) || 0)}\n                      className=\"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      min=\"1\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-xs font-medium text-gray-600 mb-1\">\n                      Estimated Delivery\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={tier.estimatedDelivery}\n                      onChange={(e) => updateRewardTier(index, 'estimatedDelivery', e.target.value)}\n                      placeholder=\"March 2025\"\n                      className=\"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"mb-3\">\n                  <label className=\"block text-xs font-medium text-gray-600 mb-1\">\n                    Reward Title\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={tier.title}\n                    onChange={(e) => updateRewardTier(index, 'title', e.target.value)}\n                    placeholder=\"Early Access\"\n                    className=\"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-xs font-medium text-gray-600 mb-1\">\n                    Reward Description\n                  </label>\n                  <textarea\n                    value={tier.description}\n                    onChange={(e) => updateRewardTier(index, 'description', e.target.value)}\n                    placeholder=\"Describe what backers will receive\"\n                    rows={2}\n                    className=\"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  />\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n              <p className=\"text-sm text-red-700\">{error}</p>\n            </div>\n          )}\n\n          {/* Actions */}\n          <div className=\"flex space-x-3 pt-4 border-t border-gray-200\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {loading ? 'Creating...' : 'Launch Project'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { X, Shield, CheckCircle, AlertCircle, Users, Eye } from 'lucide-react';\nimport { UserType } from '@/shared/types';\n\ninterface SocialShieldPolicy {\n  id: string;\n  name: string;\n  description: string;\n  monthlyPremium: number;\n  maxCoverage: number;\n  deductible: number;\n  minFollowers: number;\n  coverage: {\n    platformBan: boolean;\n    algorithmChange: boolean;\n    contentStrike: boolean;\n    monetizationLoss: boolean;\n    followerLoss: boolean;\n  };\n  platforms: string[];\n}\n\ninterface SocialShieldModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  user: UserType | null;\n  onSuccess: () => void;\n  policies: SocialShieldPolicy[];\n}\n\nexport default function SocialShieldModal({ isOpen, onClose, user, onSuccess, policies }: SocialShieldModalProps) {\n  const [selectedPolicy, setSelectedPolicy] = useState<string>('pro');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [step, setStep] = useState<'select' | 'confirm' | 'payment'>('select');\n\n  if (!isOpen) return null;\n\n  const availablePolicies = Array.isArray(policies) ? policies : [];\n  const selectedPolicyData = availablePolicies.find(p => p.id === selectedPolicy) || availablePolicies[0] || null;\n  const userMeetsRequirements = selectedPolicyData\n    ? (user?.follower_count || 0) >= (selectedPolicyData.minFollowers || 0)\n    : false;\n  const userCanAfford = selectedPolicyData\n    ? (user?.gems_balance || 0) >= (selectedPolicyData.monthlyPremium || 0)\n    : false;\n\n  const handleSubscribe = async () => {\n    if (!selectedPolicyData || !userMeetsRequirements || !userCanAfford) return;\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const response = await fetch('/api/growth/shield/subscribe', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          policy_id: selectedPolicy\n        }),\n      });\n\n      if (response.ok) {\n        onSuccess();\n        onClose();\n        setStep('select');\n      } else {\n        const error = await response.json();\n        setError(error.error || 'Failed to subscribe to shield');\n      }\n    } catch (error) {\n      setError('Network error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getCoverageIcon = (covered: boolean) => {\n    return covered ? (\n      <CheckCircle className=\"w-4 h-4 text-green-600\" />\n    ) : (\n      <X className=\"w-4 h-4 text-gray-400\" />\n    );\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-2xl max-w-4xl w-full max-h-screen overflow-y-auto\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-orange-500 to-red-500 p-6 text-white\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center\">\n                <Shield className=\"w-6 h-6\" />\n              </div>\n              <div>\n                <h2 className=\"text-xl font-bold\">Social Shield Protection</h2>\n                <p className=\"text-orange-100\">Protect your social media earnings</p>\n              </div>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-white/80 hover:text-white transition-colors\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6\">\n          {step === 'select' && (\n            <div className=\"space-y-6\">\n              {/* Warning */}\n              <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n                <div className=\"flex items-start space-x-3\">\n                  <AlertCircle className=\"w-5 h-5 text-yellow-600 mt-0.5\" />\n                  <div>\n                    <h4 className=\"font-semibold text-yellow-800\">Why You Need Social Shield</h4>\n                    <ul className=\"text-sm text-yellow-700 mt-2 space-y-1\">\n                      <li>• Algorithm changes can reduce reach by up to 80%</li>\n                      <li>• Account bans eliminate income overnight</li>\n                      <li>• Content strikes impact monetization for weeks</li>\n                      <li>• Platform issues can cause significant follower loss</li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n\n              {/* Policy Cards */}\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                {availablePolicies.length === 0 && (\n                  <div className=\"col-span-full bg-gray-50 border border-dashed border-gray-200 rounded-lg p-6 text-center text-sm text-gray-500\">\n                    No policies available right now. Check back soon!\n                  </div>\n                )}\n                {availablePolicies.map((policy) => {\n                  const isSelected = selectedPolicy === policy.id;\n                  const meetsRequirements = (user?.follower_count || 0) >= policy.minFollowers;\n                  \n                  return (\n                    <div\n                      key={policy.id}\n                      className={`border-2 rounded-xl overflow-hidden cursor-pointer transition-all ${\n                        isSelected \n                          ? 'border-orange-500 ring-2 ring-orange-100' \n                          : meetsRequirements \n                            ? 'border-gray-200 hover:border-orange-300' \n                            : 'border-gray-200 opacity-60'\n                      }`}\n                      onClick={() => meetsRequirements && setSelectedPolicy(policy.id)}\n                    >\n                      {policy.id === 'pro' && (\n                        <div className=\"bg-orange-500 text-white text-center py-2 text-sm font-medium\">\n                          Most Popular\n                        </div>\n                      )}\n                      \n                      <div className=\"p-4\">\n                        <div className=\"text-center mb-4\">\n                          <h3 className=\"text-lg font-bold text-gray-900\">{policy.name}</h3>\n                          <p className=\"text-sm text-gray-600 mb-2\">{policy.description}</p>\n                          <div className=\"text-2xl font-bold text-gray-900\">\n                            {policy.monthlyPremium} Gems\n                            <span className=\"text-sm font-normal text-gray-500\">/month</span>\n                          </div>\n                          <div className=\"text-sm text-gray-600\">\n                            Up to ${policy.maxCoverage.toLocaleString()} coverage\n                          </div>\n                        </div>\n\n                        <div className=\"space-y-3 mb-4\">\n                          <div>\n                            <h4 className=\"font-semibold text-gray-900 mb-2\">Coverage:</h4>\n                            <ul className=\"space-y-1\">\n                              {Object.entries(policy.coverage).map(([key, covered]) => (\n                                <li key={key} className=\"flex items-center space-x-2\">\n                                  {getCoverageIcon(covered as boolean)}\n                                  <span className={`text-xs ${covered ? 'text-gray-700' : 'text-gray-400'}`}>\n                                    {key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}\n                                  </span>\n                                </li>\n                              ))}\n                            </ul>\n                          </div>\n\n                          <div>\n                            <h4 className=\"font-semibold text-gray-900 mb-2\">Platforms:</h4>\n                            <div className=\"flex flex-wrap gap-1\">\n                              {policy.platforms.map((platform) => (\n                                <span key={platform} className=\"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs\">\n                                  {platform}\n                                </span>\n                              ))}\n                            </div>\n                          </div>\n\n                          <div className=\"text-xs text-gray-600 pt-2 border-t border-gray-100\">\n                            <div>Deductible: {policy.deductible} gems</div>\n                            <div className=\"flex items-center space-x-1\">\n                              <Users className=\"w-3 h-3\" />\n                              <span>Min followers: {policy.minFollowers.toLocaleString()}</span>\n                            </div>\n                          </div>\n                        </div>\n\n                        {!meetsRequirements && (\n                          <div className=\"bg-red-50 border border-red-200 rounded p-2\">\n                            <p className=\"text-xs text-red-700\">\n                              Requires {policy.minFollowers.toLocaleString()} followers\n                            </p>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n\n              {/* User Status */}\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                <h4 className=\"font-semibold text-blue-900 mb-2\">Your Status</h4>\n                <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Users className=\"w-4 h-4 text-blue-600\" />\n                    <span className=\"text-blue-700\">\n                      Followers: {(user?.follower_count || 0).toLocaleString()}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Eye className=\"w-4 h-4 text-blue-600\" />\n                    <span className=\"text-blue-700\">\n                      Gem Balance: {user?.gems_balance || 0}\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              {error && (\n                <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n                  <p className=\"text-sm text-red-700\">{error}</p>\n                </div>\n              )}\n\n              {/* Actions */}\n              <div className=\"flex space-x-3\">\n                <button\n                  onClick={onClose}\n                  className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={() => setStep('confirm')}\n                  disabled={!userMeetsRequirements || !userCanAfford}\n                  className=\"flex-1 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  Continue with {selectedPolicyData?.name}\n                </button>\n              </div>\n            </div>\n          )}\n\n          {step === 'confirm' && selectedPolicyData && (\n            <div className=\"space-y-6\">\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Confirm Your Subscription</h3>\n                \n                <div className=\"bg-gray-50 rounded-lg p-4 mb-4\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <span className=\"font-medium text-gray-900\">{selectedPolicyData.name}</span>\n                    <span className=\"font-bold text-gray-900\">{selectedPolicyData.monthlyPremium} Gems/month</span>\n                  </div>\n                  <div className=\"text-sm text-gray-600\">\n                    Maximum coverage: ${selectedPolicyData.maxCoverage.toLocaleString()}\n                  </div>\n                  <div className=\"text-sm text-gray-600\">\n                    Deductible: {selectedPolicyData.deductible} gems per claim\n                  </div>\n                </div>\n\n                <div className=\"space-y-3\">\n                  <h4 className=\"font-semibold text-gray-900\">Terms & Conditions</h4>\n                  <div className=\"text-sm text-gray-600 space-y-2\">\n                    <p>• Your subscription will auto-renew monthly</p>\n                    <p>• Claims must be filed within 7 days of incident</p>\n                    <p>• Coverage begins 24 hours after subscription activation</p>\n                    <p>• You can cancel anytime without penalty</p>\n                    <p>• Payouts are processed within 5-10 business days</p>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"flex space-x-3\">\n                <button\n                  onClick={() => setStep('select')}\n                  className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n                >\n                  Back\n                </button>\n                <button\n                  onClick={handleSubscribe}\n                  disabled={loading}\n                  className=\"flex-1 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white rounded-lg font-medium transition-all duration-200 disabled:opacity-50\"\n                >\n                  {loading ? 'Subscribing...' : `Subscribe for ${selectedPolicyData.monthlyPremium} Gems`}\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useState, ComponentType } from 'react';\nimport { \n  TrendingUp, \n  DollarSign, \n  Plus,\n  Lock,\n  Shield,\n  Rocket,\n  Target,\n  Star,\n  Diamond,\n  Coins,\n  BarChart3,\n  PieChart,\n  AlertCircle,\n  CheckCircle,\n  Calculator,\n  Lightbulb,\n  Heart\n} from 'lucide-react';\nimport { UserType } from '@/shared/types';\nimport { \n  ActivityBreakdown, \n  TrendLine,\n  KPICard \n} from '@/react-app/components/AnalyticsCharts';\nimport StakingModal from '@/react-app/components/StakingModal';\nimport FundingProjectModal from '@/react-app/components/FundingProjectModal';\nimport SocialShieldModal from '@/react-app/components/SocialShieldModal';\n\ninterface GrowthChannel {\n  id: string;\n  name: string;\n  description: string;\n  lockPeriod: number; // days\n  baseMultiplier: number;\n  riskLevel: 'low' | 'medium' | 'high';\n  minDeposit: number;\n  maxDeposit: number;\n  totalDeposited: number;\n  participantCount: number;\n  expectedApr: number;\n  icon: ComponentType<{ className?: string }>;\n  color: string;\n  features: string[];\n}\n\ninterface StakingPosition {\n  id: number;\n  channelId: string;\n  amount: number;\n  multiplier: number;\n  lockUntil: string;\n  earnedSoFar: number;\n  status: 'active' | 'completed' | 'withdrawable';\n}\n\ninterface FundingProject {\n  id: number;\n  creatorId: number;\n  creatorName: string;\n  creatorAvatar: string;\n  title: string;\n  description: string;\n  category: string;\n  fundingGoal: number;\n  currentFunding: number;\n  backerCount: number;\n  daysLeft: number;\n  minPledge: number;\n  rewardTiers: Array<{\n    amount: number;\n    title: string;\n    description: string;\n    estimatedDelivery: string;\n    backerCount: number;\n  }>;\n  featured: boolean;\n  status: 'active' | 'funded' | 'cancelled';\n}\n\ninterface SocialShieldPolicy {\n  id: string;\n  name: string;\n  description: string;\n  coverage: {\n    platformBan: boolean;\n    algorithmChange: boolean;\n    contentStrike: boolean;\n    monetizationLoss: boolean;\n    followerLoss: boolean;\n  };\n  monthlyPremium: number;\n  maxCoverage: number;\n  deductible: number;\n  platforms: string[];\n  minFollowers: number;\n}\n\ntype FetchFallback<T> = T | (() => T);\n\nconst resolveFallback = <T,>(fallback: FetchFallback<T>): T =>\n  typeof fallback === 'function' ? (fallback as () => T)() : fallback;\n\nconst fetchWithFallback = async <T,>(url: string, fallback: FetchFallback<T>): Promise<T> => {\n  try {\n    const response = await fetch(url, { credentials: 'include' });\n    if (!response.ok) {\n      throw new Error(`Request failed with status ${response.status}`);\n    }\n    const data = await response.json();\n    return data as T;\n  } catch (error) {\n    console.warn(`Falling back for ${url}:`, error instanceof Error ? error.message : error);\n    return resolveFallback(fallback);\n  }\n};\n\nconst buildFallbackUser = (): { user: UserType } => ({\n  user: {\n    id: 'growth-demo-user',\n    email: 'growth@promorang.com',\n    username: 'growth_creator',\n    display_name: 'Growth Creator',\n    user_type: 'creator',\n    points_balance: 12500,\n    gems_balance: 980,\n    keys_balance: 24,\n    gold_collected: 12,\n    follower_count: 42000,\n    created_at: new Date(Date.now() - 90 * 24 * 60 * 60 * 1000).toISOString(),\n    updated_at: new Date().toISOString(),\n    avatar_url: 'https://api.dicebear.com/7.x/avataaars/svg?seed=growth_hub',\n    user_tier: 'premium',\n  } as UserType,\n});\n\nconst buildFallbackChannels = (\n  iconMap: Record<string, ComponentType<{ className?: string }>>,\n): Array<Record<string, unknown>> => [\n  {\n    id: 'foundation-growth',\n    name: 'Foundation Growth',\n    description: 'Balanced staking pool focused on retention and engagement.',\n    lock_period_days: 45,\n    base_multiplier: 1.4,\n    risk_level: 'medium',\n    min_amount: 150,\n    max_amount: 7500,\n    expected_apr: 18.5,\n    icon: Object.keys(iconMap)[0] || 'TrendingUp',\n    color: 'emerald',\n    features: ['Boosted engagement rewards', 'Weekly treasury reports', 'Auto-compound'],\n    participant_count: 182,\n    total_deposited: 96500,\n  },\n  {\n    id: 'creator-accelerator',\n    name: 'Creator Accelerator',\n    description: 'High-yield pool backing top creators and launch drops.',\n    lock_period_days: 75,\n    base_multiplier: 2.1,\n    risk_level: 'high',\n    min_amount: 500,\n    max_amount: 20000,\n    expected_apr: 28,\n    icon: Object.keys(iconMap)[1] || 'Rocket',\n    color: 'purple',\n    features: ['Launch drop priority', 'Risk-adjusted backfill', 'Creator insurance'],\n    participant_count: 94,\n    total_deposited: 184000,\n  },\n  {\n    id: 'stability-shield',\n    name: 'Stability Shield',\n    description: 'Protected staking for conservative growth portfolios.',\n    lock_period_days: 30,\n    base_multiplier: 1.1,\n    risk_level: 'low',\n    min_amount: 50,\n    max_amount: 5000,\n    expected_apr: 9.5,\n    icon: Object.keys(iconMap)[2] || 'Shield',\n    color: 'cyan',\n    features: ['Principal protection', 'Daily liquidity window', 'Auto rollover'],\n    participant_count: 312,\n    total_deposited: 142500,\n  },\n];\n\nconst buildFallbackStakingPositions = (): Array<Record<string, unknown>> => [\n  {\n    id: 'position-1',\n    channel_id: 'foundation-growth',\n    amount: 750,\n    multiplier: 1.4,\n    lock_until: new Date(Date.now() + 25 * 24 * 60 * 60 * 1000).toISOString(),\n    earned_so_far: 86,\n    status: 'active',\n  },\n  {\n    id: 'position-2',\n    channel_id: 'stability-shield',\n    amount: 300,\n    multiplier: 1.1,\n    lock_until: new Date(Date.now() + 12 * 24 * 60 * 60 * 1000).toISOString(),\n    earned_so_far: 18,\n    status: 'withdrawable',\n  },\n];\n\nconst buildFallbackFundingProjects = (): Array<Record<string, unknown>> => [\n  {\n    id: 101,\n    creator_id: 12,\n    creator_name: 'Creator Collective',\n    creator_avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=collective',\n    title: 'Creator Success Toolkit',\n    description: 'Launch an interactive toolkit that teaches new creators how to monetize within 30 days.',\n    target_amount: 50000,\n    amount_raised: 24850,\n    backer_count: 186,\n    days_left: 18,\n    min_pledge: 75,\n    status: 'active',\n    featured: true,\n    rewardTiers: [\n      { amount: 75, title: 'Supporter', description: 'Early access + invite to creator roundtable', estimatedDelivery: '45 days', backerCount: 120 },\n      { amount: 350, title: 'Partner', description: 'Custom growth audit & promo spotlight', estimatedDelivery: '60 days', backerCount: 42 },\n    ],\n  },\n  {\n    id: 102,\n    creator_id: 27,\n    creator_name: 'Community Capital',\n    creator_avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=community_capital',\n    title: 'Growth Hub Community Fund',\n    description: 'Back emerging creators through pooled capital and mentorship credits.',\n    target_amount: 80000,\n    amount_raised: 61200,\n    backer_count: 265,\n    days_left: 9,\n    min_pledge: 120,\n    status: 'active',\n    featured: false,\n    rewardTiers: [\n      { amount: 120, title: 'Backer', description: 'Badge + quarterly impact report', estimatedDelivery: '30 days', backerCount: 188 },\n      { amount: 600, title: 'Angel', description: 'Board invite + co-marketing slots', estimatedDelivery: '75 days', backerCount: 26 },\n    ],\n  },\n];\n\nconst buildFallbackShieldPolicies = (): Array<Record<string, unknown>> => [\n  {\n    id: 'policy-1',\n    name: 'Social Safeguard',\n    description: 'Covers platform bans and sudden algorithm changes for verified creators.',\n    premium_amount: 45,\n    coverage_amount: 7500,\n    deductible: 250,\n    min_followers: 1000,\n    coverage: {\n      platformBan: true,\n      algorithmChange: true,\n      contentStrike: true,\n      monetizationLoss: true,\n      followerLoss: false,\n    },\n    platforms: ['instagram', 'youtube', 'tiktok'],\n  },\n  {\n    id: 'policy-2',\n    name: 'Monetization Guard',\n    description: 'Income replacement for monetization suspension and CPM volatility.',\n    premium_amount: 65,\n    coverage_amount: 12000,\n    deductible: 400,\n    min_followers: 5000,\n    coverage: {\n      platformBan: false,\n      algorithmChange: true,\n      contentStrike: true,\n      monetizationLoss: true,\n      followerLoss: true,\n    },\n    platforms: ['youtube', 'twitch'],\n  },\n];\n\nexport default function GrowthHub() {\n  const [userData, setUserData] = useState<UserType | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState<'overview' | 'channels' | 'funding' | 'shield' | 'economy'>('overview');\n  const [stakingPositions, setStakingPositions] = useState<StakingPosition[]>([]);\n  const [fundingProjects, setFundingProjects] = useState<FundingProject[]>([]);\n  const [growthChannels, setGrowthChannels] = useState<GrowthChannel[]>([]);\n  const [shieldPolicies, setShieldPolicies] = useState<SocialShieldPolicy[]>([]);\n  const [selectedChannel, setSelectedChannel] = useState<GrowthChannel | null>(null);\n  \n  const [showStakingModal, setShowStakingModal] = useState(false);\n  const [showFundingModal, setShowFundingModal] = useState(false);\n  const [showShieldModal, setShowShieldModal] = useState(false);\n\n  useEffect(() => {\n    fetchGrowthHubData();\n  }, []);\n\n  const fetchGrowthHubData = async () => {\n    try {\n      const iconMap: Record<string, React.ComponentType<{ className?: string }>> = {\n        TrendingUp,\n        Rocket,\n        Star,\n        Shield,\n        Diamond,\n        Target,\n      };\n\n      const [\n        userPayload,\n        channelsPayload,\n        stakingPayload,\n        fundingPayload,\n        policiesPayload,\n      ] = await Promise.all([\n        fetchWithFallback('/api/users/me', buildFallbackUser()),\n        fetchWithFallback('/api/growth/channels', { channels: buildFallbackChannels(iconMap) }),\n        fetchWithFallback('/api/growth/staking', { positions: buildFallbackStakingPositions() }),\n        fetchWithFallback('/api/growth/funding/projects', { projects: buildFallbackFundingProjects() }),\n        fetchWithFallback('/api/growth/shield/policies', { policies: buildFallbackShieldPolicies() }),\n      ]);\n\n      setUserData(userPayload?.user || userPayload || null);\n\n      const mappedChannels: GrowthChannel[] = (channelsPayload?.channels || buildFallbackChannels(iconMap)).map((channel: any, index: number) => {\n        const iconKey = channel.icon_key ?? channel.iconKey ?? channel.icon ?? 'Shield';\n        const iconComponent = iconMap[iconKey] || Shield;\n\n        return {\n        id: channel.id ?? `channel-${index}`,\n        name: channel.name ?? 'Growth Channel',\n        description: channel.description ?? 'Ecosystem staking opportunity',\n        lockPeriod: channel.lock_period_days ?? channel.lockPeriodDays ?? channel.lockPeriod ?? 30,\n        baseMultiplier: channel.base_multiplier ?? channel.baseMultiplier ?? 1.2,\n        riskLevel: (channel.risk_level ?? channel.riskLevel ?? 'medium') as GrowthChannel['riskLevel'],\n        minDeposit: channel.min_amount ?? channel.minDeposit ?? 100,\n        maxDeposit: channel.max_amount ?? channel.maxDeposit ?? 10000,\n        totalDeposited: channel.total_deposited ?? channel.totalDeposited ?? 0,\n        participantCount: channel.participant_count ?? channel.participantCount ?? 0,\n        expectedApr: channel.expected_apr ?? channel.expectedApr ?? channel.apy ?? 12,\n        icon: iconComponent,\n        color: channel.color || ['blue', 'green', 'purple'][index % 3],\n        features: channel.features || ['Daily rewards', 'Auto-compound'],\n      };\n      });\n      setGrowthChannels(mappedChannels);\n\n      const mappedPositions: StakingPosition[] = (stakingPayload?.positions || buildFallbackStakingPositions()).map((position: any, index: number) => ({\n        id: position.id ?? `position-${index}`,\n        channelId: position.channel_id ?? position.channelId ?? mappedChannels[0]?.id ?? 'channel-1',\n        amount: position.amount ?? 0,\n        multiplier: position.multiplier ?? 1,\n        lockUntil: position.lock_until ?? position.lockUntil ?? new Date().toISOString(),\n        earnedSoFar: position.earned_so_far ?? position.earnedSoFar ?? 0,\n        status: position.status ?? 'active',\n      }));\n      setStakingPositions(mappedPositions);\n\n      const mappedProjects: FundingProject[] = (fundingPayload?.projects || buildFallbackFundingProjects()).map((project: any, index: number) => ({\n        id: project.id ?? index,\n        creatorId: project.creator_id ?? project.creatorId ?? 0,\n        creatorName: project.creator_name ?? project.creatorName ?? 'Growth Creator',\n        creatorAvatar: project.creator_avatar ?? project.creatorAvatar ?? `https://api.dicebear.com/7.x/avataaars/svg?seed=growth_${index}`,\n        title: project.title ?? 'Growth initiative',\n        description: project.description ?? 'Help accelerate our platform metrics.',\n        category: project.category ?? 'growth',\n        fundingGoal: project.target_amount ?? project.fundingGoal ?? 10000,\n        currentFunding: project.amount_raised ?? project.currentFunding ?? 2500,\n        backerCount: project.backer_count ?? project.backerCount ?? Math.floor(Math.random() * 40) + 10,\n        daysLeft: project.days_left ?? project.daysLeft ?? 14,\n        minPledge: project.min_pledge ?? project.minPledge ?? 50,\n        rewardTiers: project.rewardTiers ?? [\n          { amount: 50, title: 'Supporter', description: 'Early updates & access', estimatedDelivery: '30 days', backerCount: 42 },\n          { amount: 250, title: 'Champion', description: 'Private workshop + rewards', estimatedDelivery: '45 days', backerCount: 18 },\n        ],\n        featured: Boolean(project.featured),\n        status: (project.status ?? 'active') as FundingProject['status'],\n      }));\n      setFundingProjects(mappedProjects);\n\n      const mappedPolicies: SocialShieldPolicy[] = (policiesPayload?.policies || buildFallbackShieldPolicies()).map((policy: any, index: number) => ({\n        id: policy.id ?? `shield-${index}`,\n        name: policy.name ?? 'Growth Shield',\n        description: policy.description ?? 'Protects against platform volatility.',\n        coverage: policy.coverage ?? {\n          platformBan: true,\n          algorithmChange: true,\n          contentStrike: true,\n          monetizationLoss: true,\n          followerLoss: false,\n        },\n        monthlyPremium: policy.premium_amount ?? policy.monthlyPremium ?? 49,\n        maxCoverage: policy.coverage_amount ?? policy.maxCoverage ?? 5000,\n        deductible: policy.deductible ?? 250,\n        platforms: policy.platforms ?? ['instagram', 'youtube'],\n        minFollowers: policy.min_followers ?? policy.minFollowers ?? 1000,\n      }));\n      setShieldPolicies(mappedPolicies);\n    } catch (error) {\n      console.error('Failed to fetch growth hub data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fallbackGrowthChannels: GrowthChannel[] = [\n    {\n      id: 'stable',\n      name: 'Stable Growth',\n      description: 'Low-risk staking with steady returns. Perfect for conservative investors.',\n      lockPeriod: 30,\n      baseMultiplier: 1.2,\n      riskLevel: 'low',\n      minDeposit: 100,\n      maxDeposit: 10000,\n      totalDeposited: 125000,\n      participantCount: 234,\n      expectedApr: 12.5,\n      icon: Shield,\n      color: 'green',\n      features: ['Principal protection', 'Daily rewards', 'Auto-compound', 'Early withdrawal (penalty)']\n    },\n    {\n      id: 'growth',\n      name: 'Growth Accelerator',\n      description: 'Medium-risk channel focused on platform growth metrics and user acquisition.',\n      lockPeriod: 90,\n      baseMultiplier: 1.8,\n      riskLevel: 'medium',\n      minDeposit: 250,\n      maxDeposit: 25000,\n      totalDeposited: 89000,\n      participantCount: 156,\n      expectedApr: 28.7,\n      icon: TrendingUp,\n      color: 'blue',\n      features: ['Growth bonuses', 'Platform rewards', 'Referral multipliers', 'Quarterly bonuses']\n    },\n    {\n      id: 'venture',\n      name: 'Venture Pool',\n      description: 'High-risk, high-reward pool investing in emerging creators and technologies.',\n      lockPeriod: 180,\n      baseMultiplier: 3.2,\n      riskLevel: 'high',\n      minDeposit: 500,\n      maxDeposit: 50000,\n      totalDeposited: 67000,\n      participantCount: 89,\n      expectedApr: 45.8,\n      icon: Rocket,\n      color: 'purple',\n      features: ['Creator equity', 'Tech innovation rewards', 'Exclusive opportunities', 'Governance rights']\n    },\n    {\n      id: 'creator',\n      name: 'Creator Fund',\n      description: 'Support emerging creators while earning from their success.',\n      lockPeriod: 60,\n      baseMultiplier: 2.1,\n      riskLevel: 'medium',\n      minDeposit: 200,\n      maxDeposit: 15000,\n      totalDeposited: 45000,\n      participantCount: 78,\n      expectedApr: 32.1,\n      icon: Star,\n      color: 'orange',\n      features: ['Creator revenue share', 'Content access', 'Meet & greet events', 'Portfolio tracking']\n    }\n  ];\n\n  const socialShieldPolicies: SocialShieldPolicy[] = [\n    {\n      id: 'basic',\n      name: 'Basic Shield',\n      coverage: {\n        platformBan: false,\n        algorithmChange: true,\n        contentStrike: true,\n        monetizationLoss: false,\n        followerLoss: false\n      },\n      monthlyPremium: 29,\n      maxCoverage: 1000,\n      deductible: 50,\n      platforms: ['Instagram', 'TikTok'],\n      minFollowers: 1000\n    },\n    {\n      id: 'pro',\n      name: 'Pro Shield',\n      coverage: {\n        platformBan: true,\n        algorithmChange: true,\n        contentStrike: true,\n        monetizationLoss: true,\n        followerLoss: false\n      },\n      monthlyPremium: 79,\n      maxCoverage: 5000,\n      deductible: 100,\n      platforms: ['Instagram', 'TikTok', 'YouTube', 'Twitter'],\n      minFollowers: 5000\n    },\n    {\n      id: 'enterprise',\n      name: 'Enterprise Shield',\n      coverage: {\n        platformBan: true,\n        algorithmChange: true,\n        contentStrike: true,\n        monetizationLoss: true,\n        followerLoss: true\n      },\n      monthlyPremium: 199,\n      maxCoverage: 25000,\n      deductible: 250,\n      platforms: ['Instagram', 'TikTok', 'YouTube', 'Twitter', 'LinkedIn', 'Twitch'],\n      minFollowers: 25000\n    }\n  ];\n\n  // Generate economic data\n  const generateEconomicData = () => {\n    const last30Days = Array.from({ length: 30 }, (_, i) => {\n      const date = new Date();\n      date.setDate(date.getDate() - (29 - i));\n      return {\n        date: date.toISOString().split('T')[0],\n        totalStaked: Math.floor(Math.random() * 50000) + 300000,\n        activeProjects: Math.floor(Math.random() * 10) + 25,\n        fundingVolume: Math.floor(Math.random() * 25000) + 75000,\n        premiumsCollected: Math.floor(Math.random() * 5000) + 15000,\n        rewardsDistributed: Math.floor(Math.random() * 20000) + 50000\n      };\n    });\n    return last30Days;\n  };\n\n  const economicData = generateEconomicData();\n\n  const displayedGrowthChannels = growthChannels.length > 0 ? growthChannels : fallbackGrowthChannels;\n\n  const totalEconomicValue = displayedGrowthChannels.reduce((sum, channel) => sum + channel.totalDeposited, 0);\n  const totalStakers = displayedGrowthChannels.reduce((sum, channel) => sum + channel.participantCount, 0);\n  const avgAPR = displayedGrowthChannels.length\n    ? displayedGrowthChannels.reduce((sum, channel) => sum + channel.expectedApr, 0) / displayedGrowthChannels.length\n    : 0;\n\n  const getRiskColor = (risk: string) => {\n    switch (risk) {\n      case 'low': return 'text-green-600 bg-green-100';\n      case 'medium': return 'text-yellow-600 bg-yellow-100';\n      case 'high': return 'text-red-600 bg-red-100';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  const getChannelColor = (color: string) => {\n    const colors = {\n      green: 'from-green-500 to-emerald-600',\n      blue: 'from-blue-500 to-cyan-600', \n      purple: 'from-purple-500 to-pink-600',\n      orange: 'from-orange-500 to-red-600'\n    };\n    return colors[color as keyof typeof colors] || colors.blue;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"bg-gradient-to-r from-purple-600 via-blue-600 to-cyan-600 rounded-2xl p-8 text-white\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold mb-2\">Growth Hub</h1>\n            <p className=\"text-purple-100 text-lg\">\n              Amplify your earnings through staking, funding, and protection\n            </p>\n          </div>\n          <div className=\"text-right\">\n            <div className=\"text-sm text-purple-200\">Your Portfolio Value</div>\n            <div className=\"text-3xl font-bold\">\n              {stakingPositions.reduce((sum, pos) => sum + pos.amount + pos.earnedSoFar, 0).toFixed(0)} Gems\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Tab Navigation */}\n      <div className=\"border-b border-gray-200\">\n        <nav className=\"flex space-x-8\">\n          {[\n            { id: 'overview', label: 'Overview', icon: BarChart3 },\n            { id: 'channels', label: 'Growth Channels', icon: TrendingUp },\n            { id: 'funding', label: 'Creator Funding', icon: Rocket },\n            { id: 'shield', label: 'Social Shield', icon: Shield },\n            { id: 'economy', label: 'Platform Economy', icon: PieChart },\n          ].map((tab) => {\n            const Icon = tab.icon;\n            return (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id as any)}\n                className={`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${\n                  activeTab === tab.id\n                    ? 'border-purple-500 text-purple-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                }`}\n              >\n                <Icon className=\"w-4 h-4\" />\n                <span>{tab.label}</span>\n              </button>\n            );\n          })}\n        </nav>\n      </div>\n\n      {/* Tab Content */}\n      {activeTab === 'overview' && (\n        <div className=\"space-y-8\">\n          {/* KPI Cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            <KPICard\n              title=\"Active Stakes\"\n              value={stakingPositions.filter(p => p.status === 'active').length.toString()}\n              change={12.5}\n              changeType=\"increase\"\n              icon={<Lock className=\"w-5 h-5\" />}\n              trend={[]}\n            />\n            \n            <KPICard\n              title=\"Total Earnings\"\n              value={`${stakingPositions.reduce((sum, pos) => sum + pos.earnedSoFar, 0).toFixed(1)} Gems`}\n              change={8.3}\n              changeType=\"increase\"\n              icon={<Diamond className=\"w-5 h-5\" />}\n              trend={[]}\n            />\n            \n            <KPICard\n              title=\"Projects Backed\"\n              value=\"3\"\n              change={50}\n              changeType=\"increase\"\n              icon={<Heart className=\"w-5 h-5\" />}\n              trend={[]}\n            />\n            \n            <KPICard\n              title=\"Shield Coverage\"\n              value=\"$5,000\"\n              change={0}\n              changeType=\"increase\"\n              icon={<Shield className=\"w-5 h-5\" />}\n              trend={[]}\n            />\n          </div>\n\n          {/* Active Positions */}\n          <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">Your Active Positions</h3>\n            {stakingPositions.length > 0 ? (\n              <div className=\"space-y-4\">\n                {stakingPositions.map((position) => {\n                  const channel = displayedGrowthChannels.find(c => c.id === position.channelId);\n                  const Icon = channel?.icon || Lock;\n                  const daysLeft = Math.ceil((new Date(position.lockUntil).getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24));\n                  \n                  return (\n                    <div key={position.id} className=\"bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg p-4 border border-gray-200\">\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center space-x-4\">\n                          <div className={`w-12 h-12 bg-gradient-to-r ${getChannelColor(channel?.color || 'blue')} rounded-xl flex items-center justify-center text-white`}>\n                            <Icon className=\"w-6 h-6\" />\n                          </div>\n                          <div>\n                            <h4 className=\"font-semibold text-gray-900\">{channel?.name}</h4>\n                            <p className=\"text-sm text-gray-600\">{position.amount} Gems staked</p>\n                          </div>\n                        </div>\n                        <div className=\"text-right\">\n                          <div className=\"text-lg font-bold text-green-600\">+{position.earnedSoFar} Gems</div>\n                          <div className=\"text-sm text-gray-500\">{daysLeft} days left</div>\n                        </div>\n                      </div>\n                      <div className=\"mt-4\">\n                        <div className=\"flex items-center justify-between text-sm text-gray-600 mb-2\">\n                          <span>Progress</span>\n                          <span>{((position.earnedSoFar / (position.amount * (position.multiplier - 1))) * 100).toFixed(1)}%</span>\n                        </div>\n                        <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                          <div \n                            className=\"bg-gradient-to-r from-green-400 to-blue-500 h-2 rounded-full transition-all duration-300\"\n                            style={{ width: `${Math.min(100, (position.earnedSoFar / (position.amount * (position.multiplier - 1))) * 100)}%` }}\n                          ></div>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            ) : (\n              <div className=\"text-center py-12\">\n                <Lock className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Active Positions</h3>\n                <p className=\"text-gray-600 mb-6\">Start growing your gems through our staking channels</p>\n                <button\n                  onClick={() => setActiveTab('channels')}\n                  className=\"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200\"\n                >\n                  Explore Growth Channels\n                </button>\n              </div>\n            )}\n          </div>\n\n          {/* Quick Stats */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n              <div className=\"flex items-center space-x-3 mb-4\">\n                <div className=\"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center\">\n                  <TrendingUp className=\"w-6 h-6 text-green-600\" />\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-gray-900\">Platform Growth</h3>\n                  <p className=\"text-sm text-gray-600\">Last 30 days</p>\n                </div>\n              </div>\n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Total Staked</span>\n                  <span className=\"font-semibold\">{totalEconomicValue.toLocaleString()} Gems</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Active Stakers</span>\n                  <span className=\"font-semibold\">{totalStakers.toLocaleString()}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Avg APR</span>\n                  <span className=\"font-semibold text-green-600\">{avgAPR.toFixed(1)}%</span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n              <div className=\"flex items-center space-x-3 mb-4\">\n                <div className=\"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center\">\n                  <Rocket className=\"w-6 h-6 text-blue-600\" />\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-gray-900\">Creator Funding</h3>\n                  <p className=\"text-sm text-gray-600\">Active projects</p>\n                </div>\n              </div>\n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Live Projects</span>\n                  <span className=\"font-semibold\">{fundingProjects.length}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Total Funding</span>\n                  <span className=\"font-semibold\">${fundingProjects.reduce((sum, p) => sum + p.currentFunding, 0).toLocaleString()}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Success Rate</span>\n                  <span className=\"font-semibold text-green-600\">87%</span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n              <div className=\"flex items-center space-x-3 mb-4\">\n                <div className=\"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center\">\n                  <Shield className=\"w-6 h-6 text-purple-600\" />\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-gray-900\">Social Shield</h3>\n                  <p className=\"text-sm text-gray-600\">Protection status</p>\n                </div>\n              </div>\n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Coverage Level</span>\n                  <span className=\"font-semibold\">Pro Shield</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Max Coverage</span>\n                  <span className=\"font-semibold\">$5,000</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Status</span>\n                  <span className=\"font-semibold text-green-600\">Active</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {activeTab === 'channels' && (\n        <div className=\"space-y-8\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h2 className=\"text-2xl font-bold text-gray-900\">Growth Channels</h2>\n              <p className=\"text-gray-600\">Lock your gems for higher multipliers and platform rewards</p>\n            </div>\n            <div className=\"text-right\">\n              <div className=\"text-sm text-gray-500\">Your Available Balance</div>\n              <div className=\"text-xl font-bold text-blue-600\">{userData?.gems_balance || 0} Gems</div>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {growthChannels.length === 0 && (\n              <div className=\"col-span-full bg-gray-50 border border-dashed border-gray-200 rounded-lg p-6 text-center text-sm text-gray-500\">\n                Growth channels are being configured. Check back soon.\n              </div>\n            )}\n            {displayedGrowthChannels.map((channel) => {\n              const Icon = channel.icon;\n              return (\n                <div key={channel.id} className=\"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden hover:shadow-md transition-all duration-200\">\n                  <div className={`bg-gradient-to-r ${getChannelColor(channel.color)} p-6 text-white`}>\n                    <div className=\"flex items-center justify-between mb-4\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center\">\n                          <Icon className=\"w-6 h-6\" />\n                        </div>\n                        <div>\n                          <h3 className=\"text-xl font-bold\">{channel.name}</h3>\n                          <span className={`px-2 py-1 rounded-full text-xs font-medium ${getRiskColor(channel.riskLevel)} text-gray-800`}>\n                            {channel.riskLevel.toUpperCase()} RISK\n                          </span>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"text-2xl font-bold\">{channel.expectedApr.toFixed(1)}%</div>\n                        <div className=\"text-sm opacity-75\">Expected APR</div>\n                      </div>\n                    </div>\n                    <p className=\"text-white/90\">{channel.description}</p>\n                  </div>\n\n                  <div className=\"p-6\">\n                    <div className=\"grid grid-cols-2 gap-4 mb-6\">\n                      <div>\n                        <div className=\"text-sm text-gray-500\">Lock Period</div>\n                        <div className=\"font-semibold\">{channel.lockPeriod} days</div>\n                      </div>\n                      <div>\n                        <div className=\"text-sm text-gray-500\">Multiplier</div>\n                        <div className=\"font-semibold\">{channel.baseMultiplier}x</div>\n                      </div>\n                      <div>\n                        <div className=\"text-sm text-gray-500\">Min Deposit</div>\n                        <div className=\"font-semibold\">{channel.minDeposit} Gems</div>\n                      </div>\n                      <div>\n                        <div className=\"text-sm text-gray-500\">Participants</div>\n                        <div className=\"font-semibold\">{channel.participantCount}</div>\n                      </div>\n                    </div>\n\n                    <div className=\"mb-6\">\n                      <div className=\"text-sm text-gray-500 mb-2\">Features</div>\n                      <div className=\"space-y-1\">\n                        {channel.features.map((feature, index) => (\n                          <div key={index} className=\"flex items-center space-x-2\">\n                            <CheckCircle className=\"w-4 h-4 text-green-600\" />\n                            <span className=\"text-sm text-gray-700\">{feature}</span>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n\n                    <div className=\"space-y-3\">\n                      <div className=\"bg-gray-50 rounded-lg p-4\">\n                        <div className=\"flex items-center justify-between text-sm\">\n                          <span className=\"text-gray-600\">Total Deposited</span>\n                          <span className=\"font-semibold\">{channel.totalDeposited.toLocaleString()} Gems</span>\n                        </div>\n                        <div className=\"w-full bg-gray-200 rounded-full h-2 mt-2\">\n                          <div \n                            className={`bg-gradient-to-r ${getChannelColor(channel.color)} h-2 rounded-full transition-all duration-300`}\n                            style={{ width: `${Math.min(100, (channel.totalDeposited / channel.maxDeposit) * 100)}%` }}\n                          ></div>\n                        </div>\n                      </div>\n\n                      <button\n                        onClick={() => {\n                          setSelectedChannel(channel);\n                          setShowStakingModal(true);\n                        }}\n                        className={`w-full bg-gradient-to-r ${getChannelColor(channel.color)} hover:opacity-90 text-white py-3 px-4 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2`}\n                      >\n                        <Lock className=\"w-4 h-4\" />\n                        <span>Stake in {channel.name}</span>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n\n          {/* Calculator */}\n          <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n            <div className=\"flex items-center space-x-3 mb-6\">\n              <Calculator className=\"w-6 h-6 text-blue-600\" />\n              <h3 className=\"text-xl font-semibold text-gray-900\">Staking Calculator</h3>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Amount (Gems)</label>\n                <input \n                  type=\"number\" \n                  placeholder=\"1000\"\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Channel</label>\n                <select className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\">\n                  {displayedGrowthChannels.map(channel => (\n                    <option key={channel.id} value={channel.id}>{channel.name}</option>\n                  ))}\n                </select>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Estimated Rewards</label>\n                <div className=\"px-3 py-2 bg-green-50 border border-green-200 rounded-lg text-green-800 font-medium\">\n                  +250 Gems\n                </div>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Total Return</label>\n                <div className=\"px-3 py-2 bg-blue-50 border border-blue-200 rounded-lg text-blue-800 font-medium\">\n                  1,250 Gems\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {activeTab === 'funding' && (\n        <div className=\"space-y-8\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h2 className=\"text-2xl font-bold text-gray-900\">Creator Funding</h2>\n              <p className=\"text-gray-600\">Support innovative projects and earn from their success</p>\n            </div>\n            <button\n              onClick={() => setShowFundingModal(true)}\n              className=\"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 flex items-center space-x-2\"\n            >\n              <Plus className=\"w-4 h-4\" />\n              <span>Create Project</span>\n            </button>\n          </div>\n\n          {/* Featured Projects */}\n          <div className=\"space-y-6\">\n            {fundingProjects.filter(p => p.featured).map((project) => (\n              <div key={project.id} className=\"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden\">\n                <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 p-6 border-b border-gray-200\">\n                  <div className=\"flex items-center space-x-2 mb-2\">\n                    <Star className=\"w-5 h-5 text-yellow-500\" />\n                    <span className=\"text-sm font-medium text-yellow-700\">Featured Project</span>\n                  </div>\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-xl font-bold text-gray-900 mb-2\">{project.title}</h3>\n                      <p className=\"text-gray-600 mb-4\">{project.description}</p>\n                      <div className=\"flex items-center space-x-6\">\n                        <div className=\"flex items-center space-x-2\">\n                          <img \n                            src={project.creatorAvatar}\n                            alt={project.creatorName}\n                            className=\"w-8 h-8 rounded-full\"\n                          />\n                          <span className=\"font-medium text-gray-900\">{project.creatorName}</span>\n                        </div>\n                        <span className=\"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium\">\n                          {project.category}\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"text-right ml-6\">\n                      <div className=\"text-2xl font-bold text-gray-900\">\n                        ${project.currentFunding.toLocaleString()}\n                      </div>\n                      <div className=\"text-sm text-gray-500\">\n                        of ${project.fundingGoal.toLocaleString()} goal\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"p-6\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <div className=\"flex items-center space-x-6\">\n                      <div className=\"text-center\">\n                        <div className=\"text-lg font-bold text-gray-900\">{project.backerCount}</div>\n                        <div className=\"text-sm text-gray-500\">Backers</div>\n                      </div>\n                      <div className=\"text-center\">\n                        <div className=\"text-lg font-bold text-gray-900\">{project.daysLeft}</div>\n                        <div className=\"text-sm text-gray-500\">Days Left</div>\n                      </div>\n                      <div className=\"text-center\">\n                        <div className=\"text-lg font-bold text-green-600\">\n                          {((project.currentFunding / project.fundingGoal) * 100).toFixed(0)}%\n                        </div>\n                        <div className=\"text-sm text-gray-500\">Funded</div>\n                      </div>\n                    </div>\n                    <button\n                      onClick={() => {\n                        // Open funding modal for backing project\n                      }}\n                      className=\"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200\"\n                    >\n                      Back This Project\n                    </button>\n                  </div>\n\n                  <div className=\"w-full bg-gray-200 rounded-full h-3 mb-4\">\n                    <div \n                      className=\"bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-300\"\n                      style={{ width: `${Math.min(100, (project.currentFunding / project.fundingGoal) * 100)}%` }}\n                    ></div>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    {project.rewardTiers.slice(0, 3).map((tier, index) => (\n                      <div key={index} className=\"border border-gray-200 rounded-lg p-4\">\n                        <div className=\"text-lg font-bold text-gray-900 mb-2\">${tier.amount}</div>\n                        <h4 className=\"font-semibold text-gray-900 mb-2\">{tier.title}</h4>\n                        <p className=\"text-sm text-gray-600 mb-3\">{tier.description}</p>\n                        <div className=\"flex items-center justify-between text-sm\">\n                          <span className=\"text-gray-500\">{tier.backerCount} backers</span>\n                          <span className=\"text-blue-600\">{tier.estimatedDelivery}</span>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {/* Regular Projects */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {fundingProjects.filter(p => !p.featured).map((project) => (\n              <div key={project.id} className=\"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden hover:shadow-md transition-all duration-200\">\n                <div className=\"p-6\">\n                  <div className=\"flex items-center space-x-3 mb-4\">\n                    <img \n                      src={project.creatorAvatar}\n                      alt={project.creatorName}\n                      className=\"w-10 h-10 rounded-full\"\n                    />\n                    <div>\n                      <h4 className=\"font-semibold text-gray-900\">{project.creatorName}</h4>\n                      <span className=\"text-sm text-gray-500\">{project.category}</span>\n                    </div>\n                  </div>\n                  \n                  <h3 className=\"text-lg font-bold text-gray-900 mb-2\">{project.title}</h3>\n                  <p className=\"text-gray-600 mb-4 line-clamp-2\">{project.description}</p>\n                  \n                  <div className=\"space-y-3\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-500\">Funding Progress</span>\n                      <span className=\"font-medium\">\n                        ${project.currentFunding.toLocaleString()} / ${project.fundingGoal.toLocaleString()}\n                      </span>\n                    </div>\n                    <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                      <div \n                        className=\"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300\"\n                        style={{ width: `${Math.min(100, (project.currentFunding / project.fundingGoal) * 100)}%` }}\n                      ></div>\n                    </div>\n                    <div className=\"flex justify-between text-sm text-gray-500\">\n                      <span>{project.backerCount} backers</span>\n                      <span>{project.daysLeft} days left</span>\n                    </div>\n                  </div>\n\n                  <button className=\"w-full mt-4 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white py-2 px-4 rounded-lg font-medium transition-all duration-200\">\n                    View Project\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {activeTab === 'shield' && (\n        <div className=\"space-y-8\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Social Shield</h2>\n            <p className=\"text-gray-600\">Protect your social media earnings with comprehensive insurance coverage</p>\n          </div>\n\n          <div className=\"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-xl p-6\">\n            <div className=\"flex items-start space-x-4\">\n              <AlertCircle className=\"w-6 h-6 text-orange-600 mt-1\" />\n              <div>\n                <h3 className=\"font-semibold text-orange-900 mb-2\">Why You Need Social Shield</h3>\n                <ul className=\"text-orange-800 space-y-1 text-sm\">\n                  <li>• Platform algorithm changes can reduce your reach by up to 80%</li>\n                  <li>• Account bans can eliminate months of income overnight</li>\n                  <li>• Content strikes can impact monetization for weeks</li>\n                  <li>• Follower loss from platform issues affects future earnings</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            {socialShieldPolicies.map((policy) => (\n              <div key={policy.id} className={`bg-white rounded-xl border-2 shadow-sm overflow-hidden ${\n                policy.id === 'pro' ? 'border-blue-500 ring-2 ring-blue-100' : 'border-gray-200'\n              }`}>\n                {policy.id === 'pro' && (\n                  <div className=\"bg-blue-500 text-white text-center py-2 text-sm font-medium\">\n                    Most Popular\n                  </div>\n                )}\n                \n                <div className=\"p-6\">\n                  <div className=\"text-center mb-6\">\n                    <h3 className=\"text-xl font-bold text-gray-900 mb-2\">{policy.name}</h3>\n                    <div className=\"text-3xl font-bold text-gray-900\">\n                      ${policy.monthlyPremium}\n                      <span className=\"text-sm font-normal text-gray-500\">/month</span>\n                    </div>\n                    <div className=\"text-sm text-gray-600\">\n                      Up to ${policy.maxCoverage.toLocaleString()} coverage\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-4 mb-6\">\n                    <div>\n                      <h4 className=\"font-semibold text-gray-900 mb-2\">Coverage Includes:</h4>\n                      <ul className=\"space-y-2\">\n                        {Object.entries(policy.coverage).map(([key, covered]) => (\n                          <li key={key} className=\"flex items-center space-x-2\">\n                            {covered ? (\n                              <CheckCircle className=\"w-4 h-4 text-green-600\" />\n                            ) : (\n                              <CheckCircle className=\"w-4 h-4 text-gray-400\" />\n                            )}\n                            <span className={`text-sm ${covered ? 'text-gray-700' : 'text-gray-400'}`}>\n                              {key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}\n                            </span>\n                          </li>\n                        ))}\n                      </ul>\n                    </div>\n\n                    <div>\n                      <h4 className=\"font-semibold text-gray-900 mb-2\">Platforms:</h4>\n                      <div className=\"flex flex-wrap gap-2\">\n                        {policy.platforms.map((platform) => (\n                          <span key={platform} className=\"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs\">\n                            {platform}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n\n                    <div className=\"text-sm text-gray-600\">\n                      <div>Deductible: ${policy.deductible}</div>\n                      <div>Min followers: {policy.minFollowers.toLocaleString()}</div>\n                    </div>\n                  </div>\n\n                  <button\n                    onClick={() => setShowShieldModal(true)}\n                    className={`w-full py-3 px-4 rounded-lg font-medium transition-all duration-200 ${\n                      policy.id === 'pro' \n                        ? 'bg-blue-500 hover:bg-blue-600 text-white'\n                        : 'bg-gray-100 hover:bg-gray-200 text-gray-900'\n                    }`}\n                  >\n                    Get {policy.name}\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Recent Claims</h3>\n            <div className=\"text-center py-8 text-gray-500\">\n              <Shield className=\"w-12 h-12 text-gray-400 mx-auto mb-3\" />\n              <p>No claims yet - you're well protected!</p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {activeTab === 'economy' && (\n        <div className=\"space-y-8\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Platform Economy</h2>\n            <p className=\"text-gray-600\">How your participation drives the entire Promorang ecosystem</p>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            <KPICard\n              title=\"Total Value Locked\"\n              value={`${totalEconomicValue.toLocaleString()} Gems`}\n              change={23.4}\n              changeType=\"increase\"\n              icon={<Lock className=\"w-5 h-5\" />}\n              trend={economicData.slice(-7).map(d => ({ date: d.date, value: d.totalStaked }))}\n            />\n            \n            <KPICard\n              title=\"Active Projects\"\n              value={fundingProjects.length.toString()}\n              change={15.2}\n              changeType=\"increase\"\n              icon={<Rocket className=\"w-5 h-5\" />}\n              trend={economicData.slice(-7).map(d => ({ date: d.date, value: d.activeProjects }))}\n            />\n            \n            <KPICard\n              title=\"Funding Volume\"\n              value={`$${fundingProjects.reduce((sum, p) => sum + p.currentFunding, 0).toLocaleString()}`}\n              change={31.7}\n              changeType=\"increase\"\n              icon={<DollarSign className=\"w-5 h-5\" />}\n              trend={economicData.slice(-7).map(d => ({ date: d.date, value: d.fundingVolume }))}\n            />\n            \n            <KPICard\n              title=\"Shield Premiums\"\n              value=\"$47,000\"\n              change={8.9}\n              changeType=\"increase\"\n              icon={<Shield className=\"w-5 h-5\" />}\n              trend={economicData.slice(-7).map(d => ({ date: d.date, value: d.premiumsCollected }))}\n            />\n          </div>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">Economic Flow</h3>\n              <TrendLine\n                data={economicData.map(d => ({ \n                  date: d.date, \n                  value: d.rewardsDistributed,\n                  secondary: d.fundingVolume\n                }))}\n                height={300}\n                primaryKey=\"value\"\n                secondaryKey=\"secondary\"\n                primaryColor=\"#10b981\"\n                secondaryColor=\"#3b82f6\"\n              />\n              <div className=\"flex justify-center space-x-6 mt-4 text-sm\">\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"w-3 h-3 bg-green-500 rounded-full\"></div>\n                  <span className=\"text-gray-600\">Rewards Distributed</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"w-3 h-3 bg-blue-500 rounded-full\"></div>\n                  <span className=\"text-gray-600\">Funding Volume</span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">Value Distribution</h3>\n              <ActivityBreakdown\n                data={[\n                  { name: 'Staking Rewards', value: 45, color: '#10b981' },\n                  { name: 'Creator Funding', value: 30, color: '#3b82f6' },\n                  { name: 'Shield Reserves', value: 15, color: '#8b5cf6' },\n                  { name: 'Platform Development', value: 10, color: '#f59e0b' }\n                ]}\n                height={300}\n              />\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">How Growth Hub Stimulates the Economy</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"space-y-4\">\n                <div className=\"flex items-start space-x-3\">\n                  <div className=\"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0\">\n                    <TrendingUp className=\"w-4 h-4 text-green-600\" />\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold text-gray-900\">Staking Creates Liquidity</h4>\n                    <p className=\"text-gray-600 text-sm\">When you stake gems, they're used to fund platform operations, creator rewards, and new feature development.</p>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-start space-x-3\">\n                  <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0\">\n                    <Rocket className=\"w-4 h-4 text-blue-600\" />\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold text-gray-900\">Funding Drives Innovation</h4>\n                    <p className=\"text-gray-600 text-sm\">Creator funding projects introduce new content types and engagement methods, expanding earning opportunities.</p>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-start space-x-3\">\n                  <div className=\"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0\">\n                    <Shield className=\"w-4 h-4 text-purple-600\" />\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold text-gray-900\">Shield Stabilizes Earnings</h4>\n                    <p className=\"text-gray-600 text-sm\">Social Shield premiums create a safety net that encourages more users to participate confidently.</p>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"space-y-4\">\n                <div className=\"flex items-start space-x-3\">\n                  <div className=\"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0\">\n                    <Coins className=\"w-4 h-4 text-orange-600\" />\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold text-gray-900\">Network Effects</h4>\n                    <p className=\"text-gray-600 text-sm\">More participants mean better rates, higher liquidity, and stronger protection for everyone.</p>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-start space-x-3\">\n                  <div className=\"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0\">\n                    <Target className=\"w-4 h-4 text-red-600\" />\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold text-gray-900\">Value Alignment</h4>\n                    <p className=\"text-gray-600 text-sm\">Your success directly correlates with platform growth, creating aligned incentives for long-term value creation.</p>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-start space-x-3\">\n                  <div className=\"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0\">\n                    <Lightbulb className=\"w-4 h-4 text-yellow-600\" />\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold text-gray-900\">Continuous Innovation</h4>\n                    <p className=\"text-gray-600 text-sm\">Funds from Growth Hub activities are reinvested into new earning opportunities and platform improvements.</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Modals */}\n      <StakingModal\n        isOpen={showStakingModal}\n        onClose={() => setShowStakingModal(false)}\n        channel={selectedChannel}\n        user={userData}\n        onSuccess={fetchGrowthHubData}\n      />\n      \n      <FundingProjectModal\n        isOpen={showFundingModal}\n        onClose={() => setShowFundingModal(false)}\n        user={userData}\n        onSuccess={fetchGrowthHubData}\n      />\n      \n      <SocialShieldModal\n        isOpen={showShieldModal}\n        onClose={() => setShowShieldModal(false)}\n        user={userData}\n        onSuccess={fetchGrowthHubData}\n        policies={shieldPolicies}\n      />\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { X, Users, Gift, Copy, Check } from 'lucide-react';\nimport { UserType } from '@/shared/types';\n\ninterface ReferralModalProps {\n  user: UserType | null;\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: () => void;\n}\n\nexport default function ReferralModal({ user, isOpen, onClose, onSuccess }: ReferralModalProps) {\n  const [referralCode, setReferralCode] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [copied, setCopied] = useState(false);\n\n  if (!isOpen || !user) return null;\n\n  const handleSubmitCode = async () => {\n    if (!referralCode.trim()) {\n      setError('Please enter a referral code');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch('/api/users/process-referral', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({ referral_code: referralCode.toUpperCase() })\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        onSuccess();\n        onClose();\n        showSuccessNotification(result.referred_reward);\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Failed to process referral');\n      }\n    } catch (error) {\n      console.error('Referral processing failed:', error);\n      setError('Network error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const copyReferralLink = async () => {\n    const referralLink = `https://promorang.com?ref=${user.referral_code}`;\n    await navigator.clipboard.writeText(referralLink);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  const showSuccessNotification = (points: number) => {\n    const notification = document.createElement('div');\n    notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 animate-pulse';\n    notification.innerHTML = `\n      <div class=\"flex items-center space-x-3\">\n        <svg class=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n          <path d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"/>\n        </svg>\n        <div>\n          <div class=\"font-bold\">Referral Success!</div>\n          <div class=\"text-sm\">You earned ${points} points!</div>\n        </div>\n      </div>\n    `;\n    document.body.appendChild(notification);\n    setTimeout(() => {\n      if (document.body.contains(notification)) {\n        document.body.removeChild(notification);\n      }\n    }, 4000);\n  };\n\n  const referralLink = `https://promorang.com?ref=${user.referral_code}`;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-2xl w-full max-w-2xl\">\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <div className=\"flex items-center space-x-3\">\n            <Users className=\"w-6 h-6 text-purple-600\" />\n            <div>\n              <h2 className=\"text-xl font-bold text-gray-900\">Referral Program</h2>\n              <p className=\"text-sm text-gray-600\">Invite friends and earn together</p>\n            </div>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          {/* Your Referral Code */}\n          <div className=\"bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-200 rounded-2xl p-6\">\n            <h3 className=\"text-lg font-semibold text-purple-900 mb-4\">Your Referral Code</h3>\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center space-x-3\">\n                <code className=\"flex-1 bg-white px-4 py-3 rounded-xl border font-mono text-lg text-center\">\n                  {user.referral_code}\n                </code>\n                <button\n                  onClick={copyReferralLink}\n                  className=\"p-3 bg-purple-500 hover:bg-purple-600 text-white rounded-xl transition-colors\"\n                >\n                  {copied ? <Check className=\"w-5 h-5\" /> : <Copy className=\"w-5 h-5\" />}\n                </button>\n              </div>\n              <p className=\"text-sm text-purple-700 text-center\">\n                Share this code or the link below with friends\n              </p>\n              <div className=\"bg-white rounded-xl p-3 border\">\n                <p className=\"text-sm text-gray-600 break-all\">{referralLink}</p>\n              </div>\n            </div>\n          </div>\n\n          {/* How It Works */}\n          <div className=\"bg-blue-50 border border-blue-200 rounded-2xl p-6\">\n            <h4 className=\"font-medium text-blue-900 mb-4\">How It Works</h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"text-center\">\n                <div className=\"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3\">\n                  <Users className=\"w-6 h-6 text-blue-600\" />\n                </div>\n                <h5 className=\"font-medium text-blue-900 mb-1\">Share</h5>\n                <p className=\"text-sm text-blue-700\">Send your code to friends</p>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3\">\n                  <Gift className=\"w-6 h-6 text-blue-600\" />\n                </div>\n                <h5 className=\"font-medium text-blue-900 mb-1\">They Join</h5>\n                <p className=\"text-sm text-blue-700\">Friend signs up with your code</p>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3\">\n                  <Gift className=\"w-6 h-6 text-blue-600\" />\n                </div>\n                <h5 className=\"font-medium text-blue-900 mb-1\">Both Earn</h5>\n                <p className=\"text-sm text-blue-700\">You get 500, they get 250 points</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Use Referral Code */}\n          {!user.referred_by && (\n            <div className=\"border border-gray-200 rounded-2xl p-6\">\n              <h4 className=\"font-medium text-gray-900 mb-4\">Have a Referral Code?</h4>\n              <div className=\"space-y-4\">\n                <input\n                  type=\"text\"\n                  value={referralCode}\n                  onChange={(e) => setReferralCode(e.target.value.toUpperCase())}\n                  placeholder=\"Enter referral code\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono\"\n                  maxLength={6}\n                />\n                \n                {error && (\n                  <div className=\"bg-red-50 border border-red-200 rounded-xl p-3\">\n                    <p className=\"text-sm text-red-700\">{error}</p>\n                  </div>\n                )}\n\n                <button\n                  onClick={handleSubmitCode}\n                  disabled={!referralCode.trim() || loading}\n                  className=\"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-3 rounded-xl font-medium transition-all duration-200 flex items-center justify-center space-x-2\"\n                >\n                  {loading ? (\n                    <div className=\"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full\"></div>\n                  ) : (\n                    <>\n                      <Gift className=\"w-5 h-5\" />\n                      <span>Apply Code & Earn 250 Points</span>\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n          )}\n\n          {/* Already Used Code */}\n          {user.referred_by && (\n            <div className=\"bg-green-50 border border-green-200 rounded-2xl p-4\">\n              <div className=\"flex items-center space-x-3\">\n                <Check className=\"w-6 h-6 text-green-600\" />\n                <div>\n                  <h4 className=\"font-medium text-green-900\">Referral Applied</h4>\n                  <p className=\"text-sm text-green-700\">You joined using code: {user.referred_by}</p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Rewards Info */}\n          <div className=\"bg-gradient-to-br from-yellow-50 to-orange-50 border border-yellow-200 rounded-2xl p-6\">\n            <h4 className=\"font-medium text-yellow-900 mb-3\">Earning Potential</h4>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-yellow-700\">500</div>\n                <div className=\"text-sm text-yellow-600\">Points per referral</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-yellow-700\">∞</div>\n                <div className=\"text-sm text-yellow-600\">No limit on referrals</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { X, Upload, Link, FileText, Send, AlertCircle } from 'lucide-react';\nimport { UserType } from '@/shared/types';\n\ninterface DropSubmissionModalProps {\n  user: UserType | null;\n  applicationId: number;\n  dropTitle: string;\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: () => void;\n}\n\nexport default function DropSubmissionModal({ \n  user, \n  applicationId, \n  dropTitle, \n  isOpen, \n  onClose, \n  onSuccess \n}: DropSubmissionModalProps) {\n  const [submissionType, setSubmissionType] = useState<'url' | 'text'>('url');\n  const [submissionData, setSubmissionData] = useState('');\n  const [submissionNotes, setSubmissionNotes] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  if (!isOpen || !user) return null;\n\n  const handleSubmit = async () => {\n    if (!submissionData.trim()) {\n      setError('Please provide your submission data');\n      return;\n    }\n\n    if (submissionType === 'url' && !isValidUrl(submissionData)) {\n      setError('Please provide a valid URL');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch(`/api/drop-applications/${applicationId}/submit`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({\n          submission_type: submissionType,\n          submission_data: submissionData,\n          submission_notes: submissionNotes\n        })\n      });\n\n      if (response.ok) {\n        onSuccess();\n        onClose();\n        resetForm();\n        showSuccessNotification();\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Submission failed');\n      }\n    } catch (error) {\n      console.error('Submission failed:', error);\n      setError('Network error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const resetForm = () => {\n    setSubmissionData('');\n    setSubmissionNotes('');\n    setSubmissionType('url');\n    setError(null);\n  };\n\n  const isValidUrl = (string: string) => {\n    try {\n      new URL(string);\n      return true;\n    } catch (_) {\n      return false;\n    }\n  };\n\n  const showSuccessNotification = () => {\n    const notification = document.createElement('div');\n    notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 animate-pulse';\n    notification.innerHTML = `\n      <div class=\"flex items-center space-x-3\">\n        <svg class=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n          <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clip-rule=\"evenodd\"/>\n        </svg>\n        <div>\n          <div class=\"font-bold\">Submission Sent!</div>\n          <div class=\"text-sm\">Your work has been submitted for review</div>\n        </div>\n      </div>\n    `;\n    document.body.appendChild(notification);\n    setTimeout(() => {\n      if (document.body.contains(notification)) {\n        document.body.removeChild(notification);\n      }\n    }, 4000);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-2xl w-full max-w-2xl\">\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <div className=\"flex items-center space-x-3\">\n            <Upload className=\"w-6 h-6 text-purple-600\" />\n            <div>\n              <h2 className=\"text-xl font-bold text-gray-900\">Submit Your Work</h2>\n              <p className=\"text-sm text-gray-600\">{dropTitle}</p>\n            </div>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          {/* Submission Type Selection */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n              Submission Type\n            </label>\n            <div className=\"grid grid-cols-2 gap-3\">\n              <button\n                onClick={() => setSubmissionType('url')}\n                className={`p-4 rounded-xl border-2 transition-colors ${\n                  submissionType === 'url'\n                    ? 'border-purple-500 bg-purple-50'\n                    : 'border-gray-200 hover:border-gray-300'\n                }`}\n              >\n                <Link className=\"w-6 h-6 mx-auto mb-2 text-purple-600\" />\n                <div className=\"text-sm font-medium\">URL Link</div>\n                <div className=\"text-xs text-gray-500\">Submit a link to your work</div>\n              </button>\n              <button\n                onClick={() => setSubmissionType('text')}\n                className={`p-4 rounded-xl border-2 transition-colors ${\n                  submissionType === 'text'\n                    ? 'border-purple-500 bg-purple-50'\n                    : 'border-gray-200 hover:border-gray-300'\n                }`}\n              >\n                <FileText className=\"w-6 h-6 mx-auto mb-2 text-purple-600\" />\n                <div className=\"text-sm font-medium\">Text Content</div>\n                <div className=\"text-xs text-gray-500\">Submit text directly</div>\n              </button>\n            </div>\n          </div>\n\n          {/* Submission Data */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              {submissionType === 'url' ? 'URL Link *' : 'Text Content *'}\n            </label>\n            {submissionType === 'url' ? (\n              <input\n                type=\"url\"\n                value={submissionData}\n                onChange={(e) => setSubmissionData(e.target.value)}\n                placeholder=\"https://example.com/your-work\"\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n              />\n            ) : (\n              <textarea\n                value={submissionData}\n                onChange={(e) => setSubmissionData(e.target.value)}\n                placeholder=\"Enter your text content here...\"\n                rows={6}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n              />\n            )}\n          </div>\n\n          {/* Submission Notes */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Additional Notes (Optional)\n            </label>\n            <textarea\n              value={submissionNotes}\n              onChange={(e) => setSubmissionNotes(e.target.value)}\n              placeholder=\"Any additional context or notes about your submission...\"\n              rows={3}\n              className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n            />\n          </div>\n\n          {/* Guidelines */}\n          <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4\">\n            <h4 className=\"font-medium text-blue-900 mb-2\">Submission Guidelines</h4>\n            <ul className=\"text-sm text-blue-700 space-y-1\">\n              <li>• Ensure your submission meets all drop requirements</li>\n              <li>• Double-check URLs are accessible and working</li>\n              <li>• Include any relevant context in the additional notes</li>\n              <li>• Your submission will be reviewed within 24-48 hours</li>\n            </ul>\n          </div>\n\n          {/* Error Display */}\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 rounded-xl p-4 flex items-start space-x-3\">\n              <AlertCircle className=\"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0\" />\n              <p className=\"text-sm text-red-700\">{error}</p>\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          <div className=\"flex space-x-3 pt-4\">\n            <button\n              onClick={onClose}\n              className=\"flex-1 px-4 py-3 border border-gray-300 rounded-xl text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={handleSubmit}\n              disabled={!submissionData.trim() || loading}\n              className=\"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-3 rounded-xl font-medium transition-all duration-200 flex items-center justify-center space-x-2\"\n            >\n              {loading ? (\n                <div className=\"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full\"></div>\n              ) : (\n                <>\n                  <Send className=\"w-5 h-5\" />\n                  <span>Submit Work</span>\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { Calendar, Upload, CheckCircle, Clock, AlertCircle } from 'lucide-react';\nimport { DropApplicationType } from '@/shared/types';\nimport DropSubmissionModal from './DropSubmissionModal';\n\ninterface ApplicationCardProps {\n  application: DropApplicationType;\n  onSubmissionSuccess: () => void;\n}\n\nexport default function ApplicationCard({ application, onSubmissionSuccess }: ApplicationCardProps) {\n  const [showSubmissionModal, setShowSubmissionModal] = useState(false);\n\n  // Check if this is demo content\n  const isDemo = (application as any).drop_title?.toLowerCase().includes('[demo]') || \n                 (application as any).drop_title?.toLowerCase().includes('demo') ||\n                 application.application_message?.toLowerCase().includes('demo');\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'active':\n        return 'bg-green-100 text-green-800';\n      case 'pending':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'approved':\n        return 'bg-blue-100 text-blue-800';\n      case 'completed':\n        return 'bg-purple-100 text-purple-800';\n      case 'rejected':\n        return 'bg-red-100 text-red-800';\n      case 'submitted':\n        return 'bg-orange-100 text-orange-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'completed':\n        return <CheckCircle className=\"w-4 h-4\" />;\n      case 'pending':\n      case 'submitted':\n        return <Clock className=\"w-4 h-4\" />;\n      case 'rejected':\n        return <AlertCircle className=\"w-4 h-4\" />;\n      default:\n        return null;\n    }\n  };\n\n  const canSubmit = application.status === 'approved';\n  const needsSubmission = application.status === 'approved';\n\n  return (\n    <>\n      <div className={`rounded-2xl p-6 border ${\n        isDemo ? 'bg-orange-50 border-orange-200' : 'bg-gray-50 border-gray-100'\n      }`}>\n        {/* Demo Banner */}\n        {isDemo && (\n          <div className=\"bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-lg px-3 py-2 mb-4 text-center\">\n            <div className=\"flex items-center justify-center space-x-2 text-sm font-medium\">\n              <span>🧪</span>\n              <span>DEMO APPLICATION - No real gems earned</span>\n              <span>🧪</span>\n            </div>\n          </div>\n        )}\n\n        <div className=\"flex items-start justify-between mb-4\">\n          <div className=\"flex-1\">\n            <div className=\"flex items-center space-x-2 mb-2\">\n              <h4 className=\"font-semibold text-gray-900\">{(application as any).drop_title}</h4>\n              {(application as any).advertiser_brand_name && (\n                <span className=\"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-medium\">\n                  {(application as any).advertiser_brand_name}\n                </span>\n              )}\n            </div>\n            <p className=\"text-gray-600 mb-3\">{application.application_message}</p>\n            <div className=\"flex flex-wrap items-center gap-3\">\n              <span className={`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${getStatusColor(application.status)}`}>\n                {getStatusIcon(application.status)}\n                <span>{application.status.charAt(0).toUpperCase() + application.status.slice(1)}</span>\n              </span>\n              {isDemo && (\n                <span className=\"bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs font-medium\">\n                  DEMO\n                </span>\n              )}\n              {application.review_score && (\n                <span className=\"text-sm text-gray-600\">\n                  Score: {application.review_score}/10\n                </span>\n              )}\n              {needsSubmission && (\n                <span className=\"text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full animate-pulse\">\n                  Submission Required\n                </span>\n              )}\n            </div>\n          </div>\n          <div className=\"text-right ml-6\">\n            <div className=\"text-sm text-gray-500 mb-1\">\n              {isDemo ? 'Demo Earned' : 'Earned'}\n            </div>\n            <div className={`font-semibold ${isDemo ? 'text-orange-600' : 'text-purple-600'}`}>\n              {application.gems_earned} gems {isDemo && '(Demo)'}\n            </div>\n            <div className=\"text-sm text-gray-500 mt-1\">\n              Cost: {(application as any).key_cost} keys\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-2 text-gray-500\">\n            <Calendar className=\"w-4 h-4\" />\n            <span className=\"text-sm\">Applied {new Date(application.applied_at).toLocaleDateString()}</span>\n          </div>\n          \n          <div className=\"flex items-center space-x-3\">\n            {application.completed_at && (\n              <div className=\"text-green-600 font-medium text-sm\">\n                Completed {new Date(application.completed_at).toLocaleDateString()}\n              </div>\n            )}\n            \n            {canSubmit && (\n              <button\n                onClick={() => setShowSubmissionModal(true)}\n                className={`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-2 text-white ${\n                  isDemo\n                    ? 'bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600'\n                    : 'bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600'\n                }`}\n              >\n                <Upload className=\"w-4 h-4\" />\n                <span>{isDemo ? 'Demo Submit' : 'Submit Work'}</span>\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <DropSubmissionModal\n        user={null} // Will be passed from parent if needed\n        applicationId={application.id}\n        dropTitle={(application as any).drop_title}\n        isOpen={showSubmissionModal}\n        onClose={() => setShowSubmissionModal(false)}\n        onSuccess={() => {\n          onSubmissionSuccess();\n          setShowSubmissionModal(false);\n        }}\n      />\n    </>\n  );\n}\n","import { useState } from 'react';\nimport { X, Instagram, TrendingUp, Users, CheckCircle, AlertCircle, Phone, Mail, User, Calendar } from 'lucide-react';\nimport { UserType } from '@/shared/types';\n\ninterface InfluenceRewardsModalProps {\n  user: UserType | null;\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: () => void;\n}\n\ninterface InfluenceRewardData {\n  id: number;\n  platform: string;\n  platform_username: string;\n  follower_count: number;\n  points_calculated: number;\n  points_awarded: number;\n  current_month: string;\n  status: string;\n  last_updated_at: string;\n  created_at: string;\n}\n\nexport default function InfluenceRewardsModal({ user, isOpen, onClose, onSuccess }: InfluenceRewardsModalProps) {\n  const [step, setStep] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [formData, setFormData] = useState({\n    full_name: '',\n    instagram_username: '',\n    phone_number: '',\n    email: '',\n    follower_count: ''\n  });\n  const [rewardData, setRewardData] = useState<InfluenceRewardData | null>(null);\n\n  if (!isOpen || !user) return null;\n\n  const handleSubmit = async () => {\n    if (!formData.full_name || !formData.instagram_username || !formData.phone_number || !formData.email || !formData.follower_count) {\n      setError('Please fill in all required fields');\n      return;\n    }\n\n    if (parseInt(formData.follower_count) < 500) {\n      setError('Minimum 500 followers required for influence rewards');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch('/api/users/register-influence-rewards', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({\n          full_name: formData.full_name,\n          platform: 'instagram',\n          platform_username: formData.instagram_username,\n          phone_number: formData.phone_number,\n          email: formData.email,\n          follower_count: parseInt(formData.follower_count)\n        })\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setRewardData(data);\n        setStep(2);\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Registration failed');\n      }\n    } catch (error) {\n      console.error('Influence rewards registration failed:', error);\n      setError('Network error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClaimPoints = async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch('/api/users/claim-influence-points', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({})\n      });\n\n      if (response.ok) {\n        await response.json();\n        onSuccess();\n        onClose();\n        setStep(1);\n        setFormData({\n          full_name: '',\n          instagram_username: '',\n          phone_number: '',\n          email: '',\n          follower_count: ''\n        });\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Failed to claim points');\n      }\n    } catch (error) {\n      console.error('Point claiming failed:', error);\n      setError('Network error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const calculatePoints = (followers: number) => {\n    return Math.floor(followers * 0.01);\n  };\n\n  const getCurrentMonth = () => {\n    const now = new Date();\n    return `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}`;\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center space-x-2\">\n            <TrendingUp className=\"w-6 h-6 text-blue-600\" />\n            <h2 className=\"text-xl font-bold text-gray-900\">Influence Rewards</h2>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        {step === 1 && (\n          <div className=\"space-y-6\">\n            <div className=\"text-center\">\n              <div className=\"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <Users className=\"w-8 h-8 text-white\" />\n              </div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Earn Points from Your Influence</h3>\n              <p className=\"text-gray-600 text-sm\">\n                Get dynamic monthly points based on your real social media follower count\n              </p>\n            </div>\n\n            <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4\">\n              <h4 className=\"font-medium text-blue-900 mb-2\">How It Works</h4>\n              <div className=\"space-y-2 text-sm text-blue-700\">\n                <div className=\"flex items-center space-x-2\">\n                  <CheckCircle className=\"w-4 h-4 text-blue-600\" />\n                  <span>Your follower count × 0.01 = monthly points</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <CheckCircle className=\"w-4 h-4 text-blue-600\" />\n                  <span>Points refresh monthly - no rollover</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <CheckCircle className=\"w-4 h-4 text-blue-600\" />\n                  <span>Must re-verify each month to maintain points</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <CheckCircle className=\"w-4 h-4 text-blue-600\" />\n                  <span>Minimum 500 followers required</span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"space-y-4\">\n              <h4 className=\"font-medium text-gray-900\">Enter Your Information</h4>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    <User className=\"w-4 h-4 inline mr-1\" />\n                    Full Name *\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={formData.full_name}\n                    onChange={(e) => setFormData({ ...formData, full_name: e.target.value })}\n                    placeholder=\"Enter your full name\"\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    <Instagram className=\"w-4 h-4 inline mr-1\" />\n                    Instagram Username *\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={formData.instagram_username}\n                    onChange={(e) => setFormData({ ...formData, instagram_username: e.target.value })}\n                    placeholder=\"@yourusername\"\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    <Phone className=\"w-4 h-4 inline mr-1\" />\n                    Phone Number *\n                  </label>\n                  <input\n                    type=\"tel\"\n                    value={formData.phone_number}\n                    onChange={(e) => setFormData({ ...formData, phone_number: e.target.value })}\n                    placeholder=\"+1 (555) 123-4567\"\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    <Mail className=\"w-4 h-4 inline mr-1\" />\n                    Email Address *\n                  </label>\n                  <input\n                    type=\"email\"\n                    value={formData.email}\n                    onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                    placeholder=\"your@email.com\"\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  <Users className=\"w-4 h-4 inline mr-1\" />\n                  Current Follower Count *\n                </label>\n                <input\n                  type=\"number\"\n                  min=\"500\"\n                  value={formData.follower_count}\n                  onChange={(e) => setFormData({ ...formData, follower_count: e.target.value })}\n                  placeholder=\"e.g. 5000\"\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n                {formData.follower_count && (\n                  <div className=\"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg\">\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm text-green-700\">\n                        Monthly Points:\n                      </span>\n                      <span className=\"font-bold text-green-800\">\n                        {calculatePoints(parseInt(formData.follower_count) || 0)} points\n                      </span>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {error && (\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n                <div className=\"flex items-start space-x-2\">\n                  <AlertCircle className=\"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0\" />\n                  <p className=\"text-sm text-red-700\">{error}</p>\n                </div>\n              </div>\n            )}\n\n            <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n              <div className=\"flex items-start space-x-2\">\n                <AlertCircle className=\"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0\" />\n                <div className=\"text-sm text-yellow-800\">\n                  <p className=\"font-medium mb-1\">Important Notes:</p>\n                  <ul className=\"space-y-1\">\n                    <li>• Your information will be verified through our Many Chat integration</li>\n                    <li>• Points are awarded monthly and do not carry over</li>\n                    <li>• You must re-register each month to maintain your rewards</li>\n                    <li>• Minimum 500 followers required</li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex space-x-3\">\n              <button\n                onClick={onClose}\n                className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSubmit}\n                disabled={loading}\n                className=\"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200\"\n              >\n                {loading ? 'Processing...' : 'Register for Rewards'}\n              </button>\n            </div>\n          </div>\n        )}\n\n        {step === 2 && rewardData && (\n          <div className=\"space-y-6\">\n            <div className=\"text-center\">\n              <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <CheckCircle className=\"w-8 h-8 text-green-600\" />\n              </div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Registration Successful!</h3>\n              <p className=\"text-gray-600 text-sm\">\n                Your influence rewards have been calculated for {getCurrentMonth()}\n              </p>\n            </div>\n\n            <div className=\"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-6\">\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-700\">Platform:</span>\n                  <div className=\"flex items-center space-x-2\">\n                    <Instagram className=\"w-4 h-4 text-pink-600\" />\n                    <span className=\"font-medium\">Instagram</span>\n                  </div>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-700\">Username:</span>\n                  <span className=\"font-medium\">@{rewardData.platform_username}</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-700\">Followers:</span>\n                  <span className=\"font-bold text-blue-600\">{rewardData.follower_count.toLocaleString()}</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-700\">Monthly Points:</span>\n                  <span className=\"font-bold text-green-600\">{rewardData.points_calculated} points</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-700\">Current Month:</span>\n                  <span className=\"font-medium\">{rewardData.current_month}</span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n              <div className=\"flex items-start space-x-2\">\n                <Calendar className=\"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0\" />\n                <div className=\"text-sm text-blue-800\">\n                  <p className=\"font-medium mb-1\">Next Steps:</p>\n                  <p>Your registration has been submitted for verification through our Many Chat system. You'll be able to claim your {rewardData.points_calculated} points once verification is complete.</p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"space-y-3\">\n              <button\n                onClick={handleClaimPoints}\n                disabled={loading}\n                className=\"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 disabled:opacity-50 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200\"\n              >\n                {loading ? 'Checking...' : 'Claim Points (if verified)'}\n              </button>\n              \n              <button\n                onClick={() => {\n                  setStep(1);\n                  setRewardData(null);\n                  setError(null);\n                }}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors\"\n              >\n                Register Different Account\n              </button>\n            </div>\n\n            {error && (\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n                <div className=\"flex items-start space-x-2\">\n                  <AlertCircle className=\"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0\" />\n                  <p className=\"text-sm text-red-700\">{error}</p>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { \n  X, \n  User, \n  Camera, \n  Globe, \n  Instagram, \n  Twitter, \n  Linkedin, \n  Facebook,\n  Youtube,\n  Check,\n  AlertCircle\n} from 'lucide-react';\nimport { UserType, UpdateProfileRequestType } from '@/shared/types';\n\ninterface EditProfileModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  user: UserType;\n  onSuccess: (updatedUser: UserType) => void;\n}\n\nexport default function EditProfileModal({ isOpen, onClose, user, onSuccess }: EditProfileModalProps) {\n  const [formData, setFormData] = useState<UpdateProfileRequestType>({});\n  const [socialLinks, setSocialLinks] = useState({\n    instagram: '',\n    twitter: '',\n    linkedin: '',\n    facebook: '',\n    youtube: '',\n    tiktok: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [uploadingAvatar, setUploadingAvatar] = useState(false);\n  const [uploadingBanner, setUploadingBanner] = useState(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  useEffect(() => {\n    if (isOpen && user) {\n      setFormData({\n        username: user.username || '',\n        display_name: user.display_name || '',\n        bio: user.bio || '',\n        avatar_url: user.avatar_url || '',\n        banner_url: user.banner_url || '',\n        website_url: user.website_url || '',\n        social_links: user.social_links || '',\n      });\n\n      // Parse existing social links\n      if (user.social_links) {\n        try {\n          const parsed = JSON.parse(user.social_links);\n          setSocialLinks({\n            instagram: parsed.instagram || '',\n            twitter: parsed.twitter || '',\n            linkedin: parsed.linkedin || '',\n            facebook: parsed.facebook || '',\n            youtube: parsed.youtube || '',\n            tiktok: parsed.tiktok || ''\n          });\n        } catch (error) {\n          console.error('Failed to parse social links:', error);\n        }\n      }\n    }\n  }, [isOpen, user]);\n\n  const handleImageUpload = async (file: File, type: 'avatar' | 'banner') => {\n    if (type === 'avatar') setUploadingAvatar(true);\n    else setUploadingBanner(true);\n\n    try {\n      const formData = new FormData();\n      formData.append('image', file);\n\n      const response = await fetch('/api/images/upload', {\n        method: 'POST',\n        credentials: 'include',\n        body: formData,\n      });\n\n      if (!response.ok) {\n        throw new Error('Upload failed');\n      }\n\n      const data = await response.json();\n      \n      if (type === 'avatar') {\n        setFormData(prev => ({ ...prev, avatar_url: data.url }));\n      } else {\n        setFormData(prev => ({ ...prev, banner_url: data.url }));\n      }\n    } catch (error) {\n      console.error('Image upload failed:', error);\n      setErrors(prev => ({ \n        ...prev, \n        [type]: 'Failed to upload image. Please try again.' \n      }));\n    } finally {\n      if (type === 'avatar') setUploadingAvatar(false);\n      else setUploadingBanner(false);\n    }\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>, type: 'avatar' | 'banner') => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    // Validate file type\n    if (!file.type.startsWith('image/')) {\n      setErrors(prev => ({ \n        ...prev, \n        [type]: 'Please select an image file.' \n      }));\n      return;\n    }\n\n    // Validate file size (5MB max)\n    if (file.size > 5 * 1024 * 1024) {\n      setErrors(prev => ({ \n        ...prev, \n        [type]: 'Image size must be less than 5MB.' \n      }));\n      return;\n    }\n\n    // Clear any previous errors\n    setErrors(prev => {\n      const newErrors = { ...prev };\n      delete newErrors[type];\n      return newErrors;\n    });\n\n    handleImageUpload(file, type);\n  };\n\n  const validateForm = () => {\n    const newErrors: Record<string, string> = {};\n\n    if (formData.username && formData.username.length < 3) {\n      newErrors.username = 'Username must be at least 3 characters long';\n    }\n\n    if (formData.username && !/^[a-zA-Z0-9_]+$/.test(formData.username)) {\n      newErrors.username = 'Username can only contain letters, numbers, and underscores';\n    }\n\n    if (formData.bio && formData.bio.length > 500) {\n      newErrors.bio = 'Bio must be less than 500 characters';\n    }\n\n    if (formData.website_url && formData.website_url) {\n      try {\n        new URL(formData.website_url);\n      } catch {\n        newErrors.website_url = 'Please enter a valid URL';\n      }\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSave = async () => {\n    if (!validateForm()) return;\n\n    setLoading(true);\n    try {\n      // Build social links object\n      const filteredSocialLinks = Object.entries(socialLinks)\n        .filter(([_, value]) => value.trim() !== '')\n        .reduce((acc, [key, value]) => ({ ...acc, [key]: value }), {});\n\n      const updateData = {\n        ...formData,\n        social_links: Object.keys(filteredSocialLinks).length > 0 \n          ? JSON.stringify(filteredSocialLinks) \n          : ''\n      };\n\n      const response = await fetch('/api/users/profile', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify(updateData),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to update profile');\n      }\n\n      const updatedUser = await response.json();\n      onSuccess(updatedUser);\n      onClose();\n    } catch (error) {\n      console.error('Failed to update profile:', error);\n      setErrors({ general: error instanceof Error ? error.message : 'Failed to update profile' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getSocialIcon = (platform: string) => {\n    switch (platform) {\n      case 'instagram': return <Instagram className=\"w-4 h-4\" />;\n      case 'twitter': return <Twitter className=\"w-4 h-4\" />;\n      case 'linkedin': return <Linkedin className=\"w-4 h-4\" />;\n      case 'facebook': return <Facebook className=\"w-4 h-4\" />;\n      case 'youtube': return <Youtube className=\"w-4 h-4\" />;\n      case 'tiktok': return <div className=\"w-4 h-4 bg-black rounded text-white text-xs flex items-center justify-center font-bold\">T</div>;\n      default: return <Globe className=\"w-4 h-4\" />;\n    }\n  };\n\n  const getSocialPlaceholder = (platform: string) => {\n    switch (platform) {\n      case 'instagram': return '@username';\n      case 'twitter': return '@username';\n      case 'linkedin': return 'username or profile URL';\n      case 'facebook': return 'username or profile URL';\n      case 'youtube': return 'channel name or URL';\n      case 'tiktok': return '@username';\n      default: return 'username';\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n      <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-100\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl flex items-center justify-center\">\n              <User className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <h2 className=\"text-xl font-semibold text-gray-900\">Edit Profile</h2>\n              <p className=\"text-sm text-gray-600\">Update your profile information and appearance</p>\n            </div>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-gray-100 rounded-xl transition-colors\"\n          >\n            <X className=\"w-5 h-5 text-gray-500\" />\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"overflow-y-auto max-h-[calc(90vh-140px)]\">\n          <div className=\"p-6 space-y-8\">\n            {/* Profile Images Section */}\n            <div className=\"space-y-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Profile Images</h3>\n              \n              {/* Banner Upload */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">Banner Image</label>\n                <div className=\"relative\">\n                  <div className=\"w-full h-48 bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 rounded-xl overflow-hidden\">\n                    {formData.banner_url ? (\n                      <img \n                        src={formData.banner_url} \n                        alt=\"Banner preview\" \n                        className=\"w-full h-full object-cover\"\n                      />\n                    ) : (\n                      <div className=\"w-full h-full bg-gradient-to-r from-orange-500 via-red-500 to-pink-500\"></div>\n                    )}\n                    <div className=\"absolute inset-0 bg-black/20 flex items-center justify-center\">\n                      <label className=\"cursor-pointer bg-white/90 backdrop-blur-sm hover:bg-white text-gray-700 px-4 py-2 rounded-xl flex items-center space-x-2 transition-colors\">\n                        {uploadingBanner ? (\n                          <div className=\"animate-spin w-4 h-4 border-2 border-gray-600 border-t-transparent rounded-full\"></div>\n                        ) : (\n                          <Camera className=\"w-4 h-4\" />\n                        )}\n                        <span className=\"text-sm font-medium\">\n                          {uploadingBanner ? 'Uploading...' : 'Change Banner'}\n                        </span>\n                        <input\n                          type=\"file\"\n                          accept=\"image/*\"\n                          onChange={(e) => handleFileChange(e, 'banner')}\n                          className=\"hidden\"\n                          disabled={uploadingBanner}\n                        />\n                      </label>\n                    </div>\n                  </div>\n                  {errors.banner && (\n                    <p className=\"text-red-600 text-sm mt-2 flex items-center space-x-1\">\n                      <AlertCircle className=\"w-4 h-4\" />\n                      <span>{errors.banner}</span>\n                    </p>\n                  )}\n                </div>\n              </div>\n\n              {/* Avatar Upload */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">Profile Picture</label>\n                <div className=\"flex items-center space-x-6\">\n                  <div className=\"relative\">\n                    <img\n                      src={formData.avatar_url || '/default-avatar.png'}\n                      alt=\"Profile picture\"\n                      className=\"w-24 h-24 rounded-2xl object-cover border-4 border-white shadow-lg\"\n                    />\n                    <label className=\"absolute -bottom-2 -right-2 w-8 h-8 bg-orange-500 hover:bg-orange-600 text-white rounded-xl flex items-center justify-center cursor-pointer transition-colors\">\n                      {uploadingAvatar ? (\n                        <div className=\"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full\"></div>\n                      ) : (\n                        <Camera className=\"w-4 h-4\" />\n                      )}\n                      <input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        onChange={(e) => handleFileChange(e, 'avatar')}\n                        className=\"hidden\"\n                        disabled={uploadingAvatar}\n                      />\n                    </label>\n                  </div>\n                  <div className=\"flex-1\">\n                    <p className=\"text-sm text-gray-600 mb-2\">\n                      Upload a new profile picture. Use a square image for best results.\n                    </p>\n                    <p className=\"text-xs text-gray-500\">\n                      Supported formats: JPG, PNG, GIF (max 5MB)\n                    </p>\n                  </div>\n                </div>\n                {errors.avatar && (\n                  <p className=\"text-red-600 text-sm mt-2 flex items-center space-x-1\">\n                    <AlertCircle className=\"w-4 h-4\" />\n                    <span>{errors.avatar}</span>\n                  </p>\n                )}\n              </div>\n            </div>\n\n            {/* Basic Information */}\n            <div className=\"space-y-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Basic Information</h3>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Username</label>\n                  <input\n                    type=\"text\"\n                    value={formData.username || ''}\n                    onChange={(e) => setFormData({ ...formData, username: e.target.value })}\n                    className={`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors ${\n                      errors.username ? 'border-red-300 bg-red-50' : 'border-gray-300'\n                    }`}\n                    placeholder=\"Enter username\"\n                  />\n                  {errors.username && (\n                    <p className=\"text-red-600 text-sm mt-1 flex items-center space-x-1\">\n                      <AlertCircle className=\"w-4 h-4\" />\n                      <span>{errors.username}</span>\n                    </p>\n                  )}\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Display Name</label>\n                  <input\n                    type=\"text\"\n                    value={formData.display_name || ''}\n                    onChange={(e) => setFormData({ ...formData, display_name: e.target.value })}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n                    placeholder=\"Enter display name\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Bio</label>\n                <textarea\n                  value={formData.bio || ''}\n                  onChange={(e) => setFormData({ ...formData, bio: e.target.value })}\n                  placeholder=\"Tell us about yourself...\"\n                  rows={4}\n                  className={`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors resize-none ${\n                    errors.bio ? 'border-red-300 bg-red-50' : 'border-gray-300'\n                  }`}\n                />\n                <div className=\"flex justify-between items-center mt-2\">\n                  {errors.bio && (\n                    <p className=\"text-red-600 text-sm flex items-center space-x-1\">\n                      <AlertCircle className=\"w-4 h-4\" />\n                      <span>{errors.bio}</span>\n                    </p>\n                  )}\n                  <p className=\"text-xs text-gray-500 ml-auto\">\n                    {(formData.bio || '').length}/500 characters\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* Website */}\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Website</h3>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Website URL</label>\n                <div className=\"relative\">\n                  <Globe className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                  <input\n                    type=\"url\"\n                    value={formData.website_url || ''}\n                    onChange={(e) => setFormData({ ...formData, website_url: e.target.value })}\n                    className={`w-full pl-12 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors ${\n                      errors.website_url ? 'border-red-300 bg-red-50' : 'border-gray-300'\n                    }`}\n                    placeholder=\"https://yourwebsite.com\"\n                  />\n                </div>\n                {errors.website_url && (\n                  <p className=\"text-red-600 text-sm mt-1 flex items-center space-x-1\">\n                    <AlertCircle className=\"w-4 h-4\" />\n                    <span>{errors.website_url}</span>\n                  </p>\n                )}\n              </div>\n            </div>\n\n            {/* Social Media Links */}\n            <div className=\"space-y-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Social Media</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                {Object.entries(socialLinks).map(([platform, value]) => (\n                  <div key={platform}>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2 capitalize\">\n                      {platform}\n                    </label>\n                    <div className=\"relative\">\n                      <div className=\"absolute left-3 top-1/2 transform -translate-y-1/2\">\n                        {getSocialIcon(platform)}\n                      </div>\n                      <input\n                        type=\"text\"\n                        value={value}\n                        onChange={(e) => setSocialLinks({ ...socialLinks, [platform]: e.target.value })}\n                        className=\"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n                        placeholder={getSocialPlaceholder(platform)}\n                      />\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* General Error */}\n            {errors.general && (\n              <div className=\"bg-red-50 border border-red-200 rounded-xl p-4\">\n                <div className=\"flex items-center space-x-3\">\n                  <AlertCircle className=\"w-5 h-5 text-red-600\" />\n                  <p className=\"text-red-700\">{errors.general}</p>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex items-center justify-end space-x-4 p-6 border-t border-gray-100 bg-gray-50\">\n          <button\n            onClick={onClose}\n            className=\"px-6 py-3 text-gray-700 hover:text-gray-900 transition-colors\"\n            disabled={loading}\n          >\n            Cancel\n          </button>\n          <button\n            onClick={handleSave}\n            disabled={loading || uploadingAvatar || uploadingBanner}\n            className=\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:from-gray-400 disabled:to-gray-500 text-white px-8 py-3 rounded-xl font-medium transition-all duration-200 flex items-center space-x-2\"\n          >\n            {loading ? (\n              <>\n                <div className=\"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full\"></div>\n                <span>Saving...</span>\n              </>\n            ) : (\n              <>\n                <Check className=\"w-4 h-4\" />\n                <span>Save Changes</span>\n              </>\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { ContentHolding } from '@/shared/types';\nimport { createShareOffer } from '@/react-app/services/sharesService';\n\ninterface MakeOfferModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  holding: ContentHolding | null;\n  onSuccess?: () => void;\n  sellerId?: string;\n}\n\nexport default function MakeOfferModal({ isOpen, onClose, holding, sellerId, onSuccess }: MakeOfferModalProps) {\n  const [quantity, setQuantity] = useState<number>(() => (holding ? Math.max(1, Math.ceil(holding.owned_shares * 0.25)) : 1));\n  const [bidPrice, setBidPrice] = useState<number>(() => holding?.current_price || 0);\n  const [message, setMessage] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (holding && isOpen) {\n      setQuantity(Math.min(Math.max(1, Math.ceil(holding.owned_shares * 0.25)), holding.owned_shares));\n      setBidPrice(holding.current_price);\n      setMessage('');\n      setError(null);\n    }\n  }, [holding, isOpen]);\n\n  if (!isOpen || !holding) {\n    return null;\n  }\n\n  const resetState = () => {\n    setQuantity(Math.min(Math.max(1, Math.ceil(holding.owned_shares * 0.25)), holding.owned_shares));\n    setBidPrice(holding.current_price);\n    setMessage('');\n    setError(null);\n  };\n\n  const handleClose = () => {\n    if (submitting) return;\n    resetState();\n    onClose();\n  };\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n    if (!holding) return;\n    if (quantity <= 0 || bidPrice <= 0) {\n      setError('Enter a valid quantity and offer price.');\n      return;\n    }\n\n    setSubmitting(true);\n    setError(null);\n\n    try {\n      await createShareOffer({\n        content_id: holding.content_id,\n        seller_id: sellerId,\n        quantity,\n        bid_price: bidPrice,\n        message,\n      });\n\n      onSuccess?.();\n      handleClose();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to submit offer');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-2xl shadow-xl max-w-lg w-full mx-4\">\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <div>\n            <h2 className=\"text-xl font-semibold text-gray-900\">Make an Offer</h2>\n            <p className=\"text-sm text-gray-500\">{holding.content_title}</p>\n          </div>\n          <button onClick={handleClose} className=\"text-gray-400 hover:text-gray-600\" aria-label=\"Close make offer modal\">\n            ×\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Quantity</label>\n              <input\n                type=\"number\"\n                min={1}\n                value={quantity}\n                onChange={(event) => setQuantity(Number(event.target.value))}\n                className=\"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              />\n              <p className=\"mt-1 text-xs text-gray-500\">Seller holds {holding.owned_shares} shares</p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Offer Price (per share)</label>\n              <input\n                type=\"number\"\n                min={0.01}\n                step={0.01}\n                value={bidPrice}\n                onChange={(event) => setBidPrice(Number(event.target.value))}\n                className=\"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n              />\n              <p className=\"mt-1 text-xs text-gray-500\">Current price {holding.current_price.toFixed(2)}</p>\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Message (optional)</label>\n            <textarea\n              rows={3}\n              value={message}\n              onChange={(event) => setMessage(event.target.value)}\n              placeholder=\"Share context or terms for your offer\"\n              className=\"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n            />\n          </div>\n\n          <div className=\"bg-gray-50 rounded-lg p-4 text-sm text-gray-600\">\n            <div className=\"flex justify-between\">\n              <span>Total offer value</span>\n              <span className=\"font-medium text-gray-900\">${(quantity * bidPrice).toFixed(2)}</span>\n            </div>\n          </div>\n\n          {error && <p className=\"text-sm text-red-600\">{error}</p>}\n\n          <div className=\"flex items-center justify-end space-x-3\">\n            <button\n              type=\"button\"\n              onClick={handleClose}\n              className=\"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={submitting}\n              className=\"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg shadow-sm hover:bg-blue-700 disabled:opacity-60\"\n            >\n              {submitting ? 'Submitting…' : 'Submit Offer'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { useAuth } from '../hooks/useAuth';\nimport { API_BASE_URL } from '../config';\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\nimport { \n  Edit3, \n  Star, \n  Users, \n  DollarSign, \n  Award,\n  Copy,\n  Check,\n  Trophy,\n  FileText,\n  Zap,\n  TrendingUp,\n  Calendar,\n  ExternalLink,\n  Image,\n  Video,\n  MapPin,\n  User\n} from 'lucide-react';\nimport { UserType, ContentPieceType, DropType, DropApplicationType, ContentHolding, PredictionSummary } from '@/shared/types';\nimport Tooltip from '@/react-app/components/Tooltip';\nimport AchievementsModal from '@/react-app/components/AchievementsModal';\nimport ReferralModal from '@/react-app/components/ReferralModal';\nimport ApplicationCard from '@/react-app/components/ApplicationCard';\nimport InfluenceRewardsModal from '@/react-app/components/InfluenceRewardsModal';\nimport EditContentModal from '@/react-app/components/EditContentModal';\nimport EditProfileModal from '@/react-app/components/EditProfileModal';\nimport ConfirmationModal from '@/react-app/components/ConfirmationModal';\nimport MakeOfferModal from '@/react-app/components/MakeOfferModal';\nimport { getPortfolioHoldings, getPortfolioPredictions } from '@/react-app/services/portfolioService';\n\ntype TabType = 'overview' | 'content' | 'drops' | 'applications' | 'achievements';\n\ninterface ProfileProps {\n  isPublicProfile?: boolean;\n  useUserId?: boolean;\n}\n\nexport default function Profile({ isPublicProfile = false, useUserId = false }: ProfileProps) {\n  const { user: authUser } = useAuth();\n  const { username: urlUsername, id: urlUserId } = useParams();\n  const navigate = useNavigate();\n  const apiBase = API_BASE_URL || '';\n  const withApiBase = (path: string) => `${apiBase}${path}`;\n  const [user, setUser] = useState<UserType | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [copied, setCopied] = useState(false);\n  const [activeTab, setActiveTab] = useState<TabType>('overview');\n  const [showEditProfileModal, setShowEditProfileModal] = useState(false);\n  \n  // New state for profile data\n  const [userContent, setUserContent] = useState<ContentPieceType[]>([]);\n  const [userDrops, setUserDrops] = useState<DropType[]>([]);\n  const [userApplications, setUserApplications] = useState<DropApplicationType[]>([]);\n  const [publicHoldings, setPublicHoldings] = useState<ContentHolding[]>([]);\n  const [publicPredictions, setPublicPredictions] = useState<PredictionSummary[]>([]);\n  const [leaderboardPosition, setLeaderboardPosition] = useState<any>(null);\n  const [contentLoading, setContentLoading] = useState(false);\n  const [dropsLoading, setDropsLoading] = useState(false);\n  const [applicationsLoading, setApplicationsLoading] = useState(false);\n  const [showAchievementsModal, setShowAchievementsModal] = useState(false);\n  const [showReferralModal, setShowReferralModal] = useState(false);\n  const [showInfluenceRewardsModal, setShowInfluenceRewardsModal] = useState(false);\n  const [editContentModalOpen, setEditContentModalOpen] = useState(false);\n  const [editContentData, setEditContentData] = useState<ContentPieceType | null>(null);\n  const [deleteConfirmModalOpen, setDeleteConfirmModalOpen] = useState(false);\n  const [contentToDelete, setContentToDelete] = useState<ContentPieceType | null>(null);\n  const [offerModalOpen, setOfferModalOpen] = useState(false);\n  const [offerHolding, setOfferHolding] = useState<ContentHolding | null>(null);\n  \n\n  useEffect(() => {\n    if (isPublicProfile && (urlUsername || urlUserId)) {\n      fetchPublicProfile();\n    } else {\n      fetchUserProfile();\n    }\n\n    // Check for query parameter to open Influence Rewards modal\n    const params = new URLSearchParams(window.location.search);\n    if (params.get('openInfluenceRewards') === 'true') {\n      setShowInfluenceRewardsModal(true);\n      // Clean up the URL\n      const newUrl = window.location.pathname;\n      window.history.replaceState({}, '', newUrl);\n    }\n  }, [isPublicProfile, urlUsername]);\n\n  useEffect(() => {\n    // Skip additional fetching for public profiles since we get the data in the initial call\n    if (isPublicProfile) return;\n\n    // Don't fetch content until user state is properly set\n    if (!user) return;\n\n    // Temporarily disable tab-based fetching to prevent API call issues\n    // if (activeTab === 'content' && userContent.length === 0) {\n    //   fetchUserContent();\n    // } else if (activeTab === 'drops' && userDrops.length === 0) {\n    //   fetchUserDrops();\n    // } else if (activeTab === 'applications' && userApplications.length === 0) {\n    //   fetchUserApplications();\n    // }\n  }, [activeTab, isPublicProfile, user]);\n\n  useEffect(() => {\n    if (!user) return;\n\n    const loadPortfolioSignals = async () => {\n      const holdings = await getPortfolioHoldings(String(user.id));\n      setPublicHoldings(holdings.filter((holding) => holding.visibility !== 'private'));\n      const predictions = await getPortfolioPredictions(String(user.id));\n      setPublicPredictions(predictions);\n    };\n\n    loadPortfolioSignals();\n  }, [user?.id]);\n\n  const fetchPublicProfile = async () => {\n    if (!urlUsername && !urlUserId) return;\n    \n    try {\n      let apiPath;\n      if (useUserId && urlUserId) {\n        apiPath = `/api/users/public/id/${urlUserId}`;\n      } else if (urlUsername) {\n        apiPath = `/api/users/public/${urlUsername}`;\n      } else {\n        throw new Error('No user identifier provided');\n      }\n      \n      const response = await fetch(withApiBase(apiPath));\n      if (!response.ok) {\n        throw new Error('User not found');\n      }\n      const data = await response.json();\n      setUser(data.user);\n      setUserContent(data.content || []);\n      setUserDrops(data.drops || []);\n      setLeaderboardPosition(data.leaderboard_position);\n    } catch (error) {\n      console.error('Failed to fetch public profile:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const openEditContentModal = (content: ContentPieceType) => {\n    setEditContentData(content);\n    setEditContentModalOpen(true);\n  };\n\n  const openDeleteContentConfirm = (content: ContentPieceType) => {\n    setContentToDelete(content);\n    setDeleteConfirmModalOpen(true);\n  };\n\n  const openOfferModal = (holding: ContentHolding) => {\n    setOfferHolding(holding);\n    setOfferModalOpen(true);\n  };\n\n  const handleEditContentSuccess = (updatedContent: ContentPieceType) => {\n    setEditContentModalOpen(false);\n    setEditContentData(null);\n    \n    // Update content in the local state\n    setUserContent(prev => prev.map(item => \n      item.id === updatedContent.id ? updatedContent : item\n    ));\n  };\n\n  const handleDeleteContentConfirm = async () => {\n    if (!contentToDelete) return;\n\n    try {\n      const response = await fetch(withApiBase(`/api/content/${contentToDelete.id}`), {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n\n      if (response.ok) {\n        // Remove content from local state\n        setUserContent(prev => prev.filter(item => item.id !== contentToDelete.id));\n        setDeleteConfirmModalOpen(false);\n        setContentToDelete(null);\n      } else {\n        const errorData = await response.json();\n        alert(errorData.error || 'Failed to delete content');\n      }\n    } catch (error) {\n      console.error('Error deleting content:', error);\n      alert('Failed to delete content');\n    }\n  };\n\n  const fetchUserProfile = async () => {\n    // Use authUser directly since ProtectedRoute already validates authentication\n    if (authUser && !isPublicProfile) {\n      console.log('Using authenticated user data directly:', authUser);\n      setUser(authUser);\n      setLoading(false);\n      return;\n    }\n\n    // Fallback: make API call only if authUser is not available\n    try {\n      const authToken = localStorage.getItem('authToken');\n      const headers: HeadersInit = {\n        'Content-Type': 'application/json',\n      };\n\n      if (authToken) {\n        headers['Authorization'] = `Bearer ${authToken}`;\n      }\n\n      const response = await fetch(withApiBase('/api/auth/profile'), { headers, credentials: 'include' });\n      if (response.ok) {\n        const data = await response.json();\n        if (data.success) {\n          setUser(data.user);\n        }\n      }\n    } catch (error) {\n      console.error('Failed to fetch user profile:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchUserContent = async () => {\n    if (!user) return;\n\n    // For demo accounts, use mock data instead of making API calls\n    if (authUser && !authUser.id) {\n      console.log('Using mock content data for demo account');\n      setUserContent([]);\n      setContentLoading(false);\n      return;\n    }\n\n    // Skip API calls if we don't have a real user ID\n    if (!user.id) {\n      setUserContent([]);\n      setContentLoading(false);\n      return;\n    }\n\n    setContentLoading(true);\n    try {\n      const response = await fetch(withApiBase(`/api/users/${user.id}/content`), {\n        credentials: 'include'\n      });\n      if (response.ok) {\n        const content = await response.json();\n        setUserContent(content);\n      } else {\n        setUserContent([]);\n      }\n    } catch (error) {\n      console.error('Failed to fetch user content:', error);\n      setUserContent([]);\n    } finally {\n      setContentLoading(false);\n    }\n  };\n\n  const fetchUserDrops = async () => {\n    if (!user) return;\n\n    // For demo accounts, use mock data instead of making API calls\n    if (authUser && !authUser.id) {\n      console.log('Using mock drops data for demo account');\n      setUserDrops([]);\n      setDropsLoading(false);\n      return;\n    }\n\n    // Skip API calls if we don't have a real user ID\n    if (!user.id) {\n      setUserDrops([]);\n      setDropsLoading(false);\n      return;\n    }\n\n    setDropsLoading(true);\n    try {\n      const response = await fetch(withApiBase(`/api/users/${user.id}/drops`), {\n        credentials: 'include'\n      });\n      if (response.ok) {\n        const drops = await response.json();\n        setUserDrops(drops);\n      } else {\n        setUserDrops([]);\n      }\n    } catch (error) {\n      console.error('Failed to fetch user drops:', error);\n      setUserDrops([]);\n    } finally {\n      setDropsLoading(false);\n    }\n  };\n\n  const fetchUserApplications = async () => {\n    if (!user) return;\n\n    // For demo accounts, use mock data instead of making API calls\n    if (authUser && !authUser.id) {\n      console.log('Using mock applications data for demo account');\n      setUserApplications([]);\n      setApplicationsLoading(false);\n      return;\n    }\n\n    // Skip API calls if we don't have a real user ID\n    if (!user.id) {\n      setUserApplications([]);\n      setApplicationsLoading(false);\n      return;\n    }\n\n    setApplicationsLoading(true);\n    try {\n      const response = await fetch(withApiBase('/api/users/drop-applications'), {\n        credentials: 'include'\n      });\n      if (response.ok) {\n        const applications = await response.json();\n        setUserApplications(applications);\n      } else {\n        setUserApplications([]);\n      }\n    } catch (error) {\n      console.error('Failed to fetch user applications:', error);\n      setUserApplications([]);\n    } finally {\n      setApplicationsLoading(false);\n    }\n  };\n\n  const fetchLeaderboardPosition = async (userId: number) => {\n    // Skip leaderboard fetching for demo accounts that don't have proper backend integration\n    if (authUser && !authUser.id) {\n      console.log('Skipping leaderboard fetch for demo account');\n      return;\n    }\n\n    // Skip if no real user ID\n    if (!userId) {\n      return;\n    }\n\n    try {\n      const response = await fetch(withApiBase(`/api/users/${userId}/leaderboard-position`), {\n        credentials: 'include'\n      });\n      if (response.ok) {\n        const position = await response.json();\n        setLeaderboardPosition(position);\n      }\n    } catch (error) {\n      console.error('Failed to fetch leaderboard position:', error);\n    }\n  };\n\n  const handleProfileUpdateSuccess = (updatedUser: UserType) => {\n    setUser(updatedUser);\n    setShowEditProfileModal(false);\n  };\n\n  const copyReferralCode = async () => {\n    if (user?.referral_code) {\n      await navigator.clipboard.writeText(user.referral_code);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    }\n  };\n\n  const getLevelProgress = (xp: number) => {\n    const baseXP = 1000;\n    const level = user?.level || 1;\n    const currentLevelXP = baseXP * level;\n    const nextLevelXP = baseXP * (level + 1);\n    const progress = ((xp - currentLevelXP) / (nextLevelXP - currentLevelXP)) * 100;\n    return Math.max(0, Math.min(100, progress));\n  };\n\n  const getContentTypeIcon = (platform: string) => {\n    switch (platform.toLowerCase()) {\n      case 'youtube':\n        return <Video className=\"w-4 h-4\" />;\n      case 'instagram':\n      case 'twitter':\n      case 'linkedin':\n      default:\n        return <Image className=\"w-4 h-4\" />;\n    }\n  };\n\n  const getDifficultyColor = (difficulty: string) => {\n    switch (difficulty) {\n      case 'easy':\n        return 'bg-green-100 text-green-800';\n      case 'medium':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'hard':\n        return 'bg-red-100 text-red-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'active':\n        return 'bg-green-100 text-green-800';\n      case 'pending':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'approved':\n        return 'bg-blue-100 text-blue-800';\n      case 'completed':\n        return 'bg-purple-100 text-purple-800';\n      case 'rejected':\n        return 'bg-red-100 text-red-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full\"></div>\n      </div>\n    );\n  }\n\n  // Only show \"User Not Found\" if we're not loading and don't have authUser for non-public profiles\n  if (!user && !loading && !isPublicProfile && !authUser) {\n    return (\n      <div className=\"max-w-2xl mx-auto text-center py-12 px-6\">\n        <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 p-8\">\n          <User className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">User Not Found</h2>\n          <p className=\"text-gray-600 mb-6\">\n            {isPublicProfile\n              ? \"The user you're looking for doesn't exist or may have been removed.\"\n              : \"There was an issue loading your profile. Please try refreshing the page.\"\n            }\n          </p>\n          <Link\n            to=\"/\"\n            className=\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200\"\n          >\n            Go to Home\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  // Define tabs based on whether it's a public profile or not\n  const tabs = isPublicProfile ? [\n    { id: 'overview', label: 'Overview', icon: User },\n    { id: 'content', label: 'Content', icon: FileText, count: userContent.length },\n    ...(user?.user_type === 'advertiser' ? [{ id: 'drops', label: 'Drops Created', icon: Zap, count: userDrops.length }] : []),\n    { id: 'achievements', label: 'Achievements', icon: Award },\n  ] : [\n    { id: 'overview', label: 'Overview', icon: User },\n    { id: 'content', label: 'Content', icon: FileText, count: userContent.length },\n    { id: 'drops', label: 'Drops Created', icon: Zap, count: userDrops.length },\n    { id: 'applications', label: 'Applications', icon: MapPin, count: userApplications.length },\n    { id: 'achievements', label: 'Achievements', icon: Award },\n  ];\n\n  return (\n    <div className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8\">\n      {/* Header Section */}\n      <div className=\"space-y-2\">\n        <h1 className=\"text-3xl font-bold text-gray-900\">\n          {isPublicProfile ? `${user?.display_name || user?.username || 'User'}'s Profile` : 'Profile'}\n        </h1>\n        <p className=\"text-gray-600\">\n          {isPublicProfile\n            ? 'View public profile and activity'\n            : 'Manage your account and view your activity'\n          }\n        </p>\n      </div>\n\n      {/* Profile Header Card */}\n      <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden\">\n        {/* Banner Section */}\n        <div className=\"relative h-48 bg-gradient-to-r from-orange-500 via-red-500 to-pink-500\">\n          {user?.banner_url ? (\n            <div className=\"relative w-full h-full\">\n              <img\n                src={user.banner_url}\n                alt=\"Profile banner\"\n                className=\"w-full h-full object-cover\"\n              />\n              <div className=\"absolute inset-0 bg-gradient-to-r from-orange-500/20 via-red-500/20 to-pink-500/20\"></div>\n            </div>\n          ) : (\n            <div className=\"w-full h-full bg-gradient-to-r from-orange-500 via-red-500 to-pink-500\"></div>\n          )}\n\n\n        </div>\n\n        {/* Profile Info Section */}\n        <div className=\"px-6 lg:px-8 pb-8\">\n          {/* Avatar and Basic Info */}\n          <div className=\"flex flex-col lg:flex-row lg:items-end lg:justify-between -mt-16 space-y-6 lg:space-y-0\">\n            {/* Avatar */}\n            <div className=\"relative z-10\">\n              <div className=\"relative\">\n                <img\n                  src={user?.avatar_url || authUser?.google_user_data?.picture || '/default-avatar.png'}\n                  alt=\"Profile\"\n                  className=\"w-32 h-32 rounded-2xl border-4 border-white shadow-xl object-cover bg-white\"\n                />\n              </div>\n            </div>\n\n            {/* Edit Button */}\n            {!isPublicProfile && (\n              <button\n                onClick={() => setShowEditProfileModal(true)}\n                className=\"lg:mb-4 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium flex items-center space-x-2 transition-all duration-200 shadow-lg hover:shadow-xl self-start lg:self-auto\"\n              >\n                <Edit3 className=\"w-4 h-4\" />\n                <span>Edit Profile</span>\n              </button>\n            )}\n          </div>\n\n          {/* Name and Details */}\n          <div className=\"mt-6 space-y-4\">\n            <div>\n              <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">\n                {user?.display_name || (isPublicProfile ? user?.username : authUser?.google_user_data?.name) || 'User'}\n              </h2>\n              <div className=\"flex flex-wrap items-center gap-3 text-gray-600\">\n                <span>@{user?.username || 'username-not-set'}</span>\n                <span>•</span>\n                <span>Level {user?.level || 1}</span>\n                {user?.user_type === 'advertiser' && (\n                  <>\n                    <span>•</span>\n                    <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800\">\n                      Advertiser\n                    </span>\n                  </>\n                )}\n              </div>\n\n              {leaderboardPosition && (\n                <div className=\"flex flex-wrap items-center gap-6 mt-3\">\n                  <Tooltip content=\"Daily leaderboard rank\" compact={true}>\n                    <div className=\"flex items-center space-x-2\">\n                      <Trophy className=\"w-4 h-4 text-yellow-600\" />\n                      <span className=\"text-sm text-gray-600\">Daily Rank</span>\n                      <span className=\"font-semibold text-yellow-700\">#{leaderboardPosition.daily_rank || 'N/A'}</span>\n                    </div>\n                  </Tooltip>\n                  <Tooltip content=\"Activity score\" compact={true}>\n                    <div className=\"flex items-center space-x-2\">\n                      <span className=\"text-sm text-gray-600\">Score:</span>\n                      <span className=\"font-semibold text-gray-900\">{(leaderboardPosition.composite_score || 0).toFixed(1)}</span>\n                    </div>\n                  </Tooltip>\n                </div>\n              )}\n            </div>\n\n            {/* Links and Social */}\n            {(user.website_url || user.social_links) && (\n              <div className=\"flex flex-wrap items-center gap-4 p-4 bg-gray-50 rounded-xl\">\n                {user.website_url && (\n                  <a\n                    href={user.website_url}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"flex items-center space-x-2 text-blue-600 hover:text-blue-700 transition-colors font-medium\"\n                  >\n                    <ExternalLink className=\"w-4 h-4\" />\n                    <span>Website</span>\n                  </a>\n                )}\n\n                {user.social_links && (() => {\n                  try {\n                    const socialLinks = JSON.parse(user.social_links);\n                    return Object.entries(socialLinks).map(([platform, handle]) => (\n                      <div key={platform} className=\"flex items-center space-x-1 text-gray-600\">\n                        <span className=\"text-sm font-medium capitalize\">{platform}:</span>\n                        <span className=\"text-sm\">{handle as string}</span>\n                      </div>\n                    ));\n                  } catch {\n                    return null;\n                  }\n                })()}\n              </div>\n            )}\n\n            {/* Bio */}\n            <div className=\"p-4 bg-gray-50 rounded-xl\">\n              <p className=\"text-gray-700 leading-relaxed\">\n                {user?.bio || (isPublicProfile ? 'No bio available.' : 'No bio yet. Click edit to add one!')}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Tabs Section */}\n      <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden\">\n        {/* Tab Navigation */}\n        <div className=\"border-b border-gray-100\">\n          <nav className=\"flex overflow-x-auto px-6 lg:px-8\">\n            {tabs.map((tab) => {\n              const Icon = tab.icon;\n              return (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id as TabType)}\n                  className={`py-4 px-1 mr-8 border-b-2 font-medium text-sm flex items-center space-x-2 whitespace-nowrap transition-colors ${\n                    activeTab === tab.id\n                      ? 'border-orange-500 text-orange-600'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                  }`}\n                >\n                  <Icon className=\"w-4 h-4\" />\n                  <span>{tab.label}</span>\n                  {tab.count !== undefined && (\n                    <span className=\"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs font-medium\">\n                      {tab.count}\n                    </span>\n                  )}\n                </button>\n              );\n            })}\n          </nav>\n        </div>\n\n        {/* Tab Content */}\n        <div className=\"p-6 lg:p-8\">\n          {activeTab === 'overview' && (\n            <div className=\"space-y-8\">\n              {/* Stats Grid */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n                {!isPublicProfile && (\n                  <div className=\"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-100\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-sm font-medium text-green-700\">Total Earnings</p>\n                        <p className=\"text-2xl font-bold text-green-900\">${((user?.total_earnings_usd || 0)).toFixed(2)}</p>\n                      </div>\n                      <div className=\"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center\">\n                        <DollarSign className=\"w-6 h-6 text-green-600\" />\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl p-6 border border-blue-100\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm font-medium text-blue-700\">XP Points</p>\n                      <p className=\"text-2xl font-bold text-blue-900\">{(user?.xp_points || 0).toLocaleString()}</p>\n                    </div>\n                    <div className=\"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center\">\n                      <Star className=\"w-6 h-6 text-blue-600\" />\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 border border-purple-100\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm font-medium text-purple-700\">Followers</p>\n                      <p className=\"text-2xl font-bold text-purple-900\">{(user?.follower_count || 0).toLocaleString()}</p>\n                    </div>\n                    <div className=\"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center\">\n                      <Users className=\"w-6 h-6 text-purple-600\" />\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-6 border border-yellow-100\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm font-medium text-yellow-700\">Level</p>\n                      <p className=\"text-2xl font-bold text-yellow-900\">{user?.level || 1}</p>\n                    </div>\n                    <div className=\"w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center\">\n                      <Award className=\"w-6 h-6 text-yellow-600\" />\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Level Progress */}\n              <div className=\"bg-gradient-to-br from-gray-50 to-slate-50 rounded-2xl p-6 border border-gray-100\">\n                <div className=\"flex items-center justify-between mb-6\">\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Level Progress</h3>\n                  <span className=\"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium\">\n                    Level {user?.level || 1}\n                  </span>\n                </div>\n                <div className=\"space-y-3\">\n                  <div className=\"flex justify-between text-sm text-gray-600\">\n                    <span>{(user?.xp_points || 0).toLocaleString()} XP</span>\n                    <span>{(((user?.level || 1) + 1) * 1000).toLocaleString()} XP</span>\n                  </div>\n                  <div className=\"w-full bg-gray-200 rounded-full h-3\">\n                    <div\n                      className=\"bg-gradient-to-r from-yellow-400 to-orange-500 h-3 rounded-full transition-all duration-300\"\n                      style={{ width: `${getLevelProgress(user?.xp_points || 0)}%` }}\n                    ></div>\n                  </div>\n                  <p className=\"text-sm text-gray-600\">\n                    {isPublicProfile\n                      ? `${user?.points_streak_days || 0} day activity streak`\n                      : `${(((user?.level || 1) + 1) * 1000) - (user?.xp_points || 0)} XP until next level`\n                    }\n                  </p>\n                </div>\n              </div>\n\n              {/* Influence Rewards - Only show for own profile */}\n              {!isPublicProfile && (\n                <div className=\"bg-gradient-to-br from-blue-50 to-cyan-50 border border-blue-100 rounded-2xl p-6\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <div className=\"flex items-center space-x-3\">\n                      <div className=\"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center\">\n                        <TrendingUp className=\"w-6 h-6 text-blue-600\" />\n                      </div>\n                      <div>\n                        <h3 className=\"text-lg font-semibold text-blue-900\">Influence Rewards</h3>\n                        <p className=\"text-sm text-blue-700\">Earn monthly points based on your follower count</p>\n                      </div>\n                    </div>\n                    <button\n                      onClick={() => setShowInfluenceRewardsModal(true)}\n                      className=\"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-xl\"\n                    >\n                      Get Rewards\n                    </button>\n                  </div>\n                  <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n                    <div className=\"bg-white rounded-xl p-4\">\n                      <div className=\"text-sm text-blue-700\">Formula</div>\n                      <div className=\"font-bold text-blue-900\">Followers × 0.01</div>\n                    </div>\n                    <div className=\"bg-white rounded-xl p-4\">\n                      <div className=\"text-sm text-blue-700\">Reset</div>\n                      <div className=\"font-bold text-blue-900\">Monthly</div>\n                    </div>\n                    <div className=\"bg-white rounded-xl p-4\">\n                      <div className=\"text-sm text-blue-700\">Min Followers</div>\n                      <div className=\"font-bold text-blue-900\">1,000</div>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Referral Program - Only show for own profile */}\n              {!isPublicProfile && (\n                <div className=\"bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-100 rounded-2xl p-6\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <h3 className=\"text-lg font-semibold text-purple-900\">Referral Program</h3>\n                    <button\n                      onClick={() => setShowReferralModal(true)}\n                      className=\"bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-colors\"\n                    >\n                      Manage Referrals\n                    </button>\n                  </div>\n                  <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0\">\n                    <div>\n                      <h4 className=\"font-medium text-purple-900\">Your Referral Code</h4>\n                      <p className=\"text-sm text-purple-700\">Share this code and earn when friends join!</p>\n                    </div>\n                    <div className=\"flex items-center space-x-3\">\n                      <code className=\"bg-white px-4 py-2 rounded-xl border font-mono text-lg\">\n                        {user.referral_code}\n                      </code>\n                      <Tooltip content={copied ? \"Copied!\" : \"Copy code\"} compact={true}>\n                        <button\n                          onClick={copyReferralCode}\n                          className=\"p-2 bg-purple-500 hover:bg-purple-600 text-white rounded-xl transition-colors\"\n                        >\n                          {copied ? <Check className=\"w-4 h-4\" /> : <Copy className=\"w-4 h-4\" />}\n                        </button>\n                      </Tooltip>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              <PublicHoldingsSection\n                holdings={publicHoldings}\n                isOwner={!isPublicProfile || (authUser && user && authUser.id === user.id)}\n                onOffer={openOfferModal}\n                onView={(holding) => navigate(`/portfolio/holdings/${holding.content_id}`)}\n              />\n\n              <PublicPredictionsSection\n                predictions={publicPredictions}\n                onView={(prediction) => navigate(`/predictions/${prediction.id}`)}\n              />\n            </div>\n          )}\n\n          {activeTab === 'content' && (\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-xl font-semibold text-gray-900\">Your Content</h3>\n                <Link\n                  to=\"/create\"\n                  className=\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200\"\n                >\n                  Create New Content\n                </Link>\n              </div>\n\n              {contentLoading ? (\n                <div className=\"flex items-center justify-center h-32\">\n                  <div className=\"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full\"></div>\n                </div>\n              ) : userContent.length > 0 ? (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                  {userContent.map((content) => (\n                    <div key={content.id} className=\"bg-gray-50 rounded-2xl p-6 border border-gray-100 hover:shadow-md transition-all duration-200\">\n                      <div className=\"flex items-start justify-between mb-4\">\n                        <div className=\"flex items-center space-x-2\">\n                          {getContentTypeIcon(content.platform)}\n                          <span className=\"text-sm font-medium text-gray-600 capitalize\">{content.platform}</span>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          {!isPublicProfile && (\n                            <>\n                              <Tooltip content=\"Edit content\" compact={true}>\n                                <button\n                                  onClick={() => openEditContentModal(content)}\n                                  className=\"p-1 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded transition-colors\"\n                                >\n                                  <Edit3 className=\"w-4 h-4\" />\n                                </button>\n                              </Tooltip>\n                              <Tooltip content=\"Delete content\" compact={true}>\n                                <button\n                                  onClick={() => openDeleteContentConfirm(content)}\n                                  className=\"p-1 text-red-600 hover:text-red-700 hover:bg-red-50 rounded transition-colors\"\n                                >\n                                  <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                                  </svg>\n                                </button>\n                              </Tooltip>\n                            </>\n                          )}\n                          <Link\n                            to={`/content/${content.id}`}\n                            className=\"text-orange-600 hover:text-orange-700 transition-colors\"\n                          >\n                            <ExternalLink className=\"w-4 h-4\" />\n                          </Link>\n                        </div>\n                      </div>\n                      <h4 className=\"font-semibold text-gray-900 mb-2 line-clamp-2\">{content.title}</h4>\n                      <p className=\"text-sm text-gray-600 mb-4 line-clamp-2\">{content.description}</p>\n                      <div className=\"flex items-center justify-between text-sm\">\n                        <span className=\"text-gray-500\">\n                          {content.available_shares || 0}/{content.total_shares || 0} shares\n                        </span>\n                        <span className=\"font-semibold text-green-600\">\n                          ${(content.share_price || 0).toFixed(2)}/share\n                        </span>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-12\">\n                  <FileText className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n                  <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No Content Yet</h3>\n                  <p className=\"text-gray-600 mb-6\">Start creating content to build your portfolio</p>\n                  <Link\n                    to=\"/create\"\n                    className=\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200\"\n                  >\n                    Create Your First Content\n                  </Link>\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'drops' && (\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-xl font-semibold text-gray-900\">Drops You Created</h3>\n                {!isPublicProfile && user && user.user_type === 'advertiser' && (\n                  <Link\n                    to=\"/earn?create=proof\"\n                    className=\"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200\"\n                  >\n                    Create New Drop\n                  </Link>\n                )}\n              </div>\n\n              {dropsLoading ? (\n                <div className=\"flex items-center justify-center h-32\">\n                  <div className=\"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full\"></div>\n                </div>\n              ) : userDrops.length > 0 ? (\n                <div className=\"space-y-4\">\n                  {userDrops.map((drop) => (\n                    <div key={drop.id} className=\"bg-gray-50 rounded-2xl p-6 border border-gray-100\">\n                      <div className=\"flex items-start justify-between mb-4\">\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-semibold text-gray-900 mb-2\">{drop.title}</h4>\n                          <p className=\"text-gray-600 mb-3\">{drop.description}</p>\n                          <div className=\"flex flex-wrap items-center gap-3\">\n                            <span className={`px-3 py-1 rounded-full text-xs font-medium ${getDifficultyColor(drop.difficulty)}`}>\n                              {drop.difficulty.charAt(0).toUpperCase() + drop.difficulty.slice(1)}\n                            </span>\n                            <span className={`px-3 py-1 rounded-full text-xs font-medium ${getStatusColor(drop.status)}`}>\n                              {drop.status.charAt(0).toUpperCase() + drop.status.slice(1)}\n                            </span>\n                            <span className=\"text-sm text-gray-500\">\n                              {drop.current_participants || 0} participants\n                            </span>\n                          </div>\n                        </div>\n                        <div className=\"text-right ml-6\">\n                          <div className=\"text-sm text-gray-500 mb-1\">Reward</div>\n                          <div className=\"font-semibold text-purple-600\">\n                            {drop.gem_reward_base || 0} gems\n                          </div>\n                          <div className=\"text-sm text-gray-500 mt-1\">\n                            Cost: {drop.key_cost || 0} keys\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center justify-between text-sm\">\n                        <div className=\"flex items-center space-x-2 text-gray-500\">\n                          <Calendar className=\"w-4 h-4\" />\n                          <span>Created {new Date(drop.created_at).toLocaleDateString()}</span>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <span className=\"text-gray-500\">Pool:</span>\n                          <span className=\"font-medium text-purple-600\">\n                            {drop.gem_pool_remaining || 0}/{drop.gem_pool_total || 0} gems\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-12\">\n                  <Zap className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n                  <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No Drops Created</h3>\n                  <p className=\"text-gray-600 mb-6\">Create your first drop to start earning</p>\n                  <Link\n                    to=\"/earn?create=proof\"\n                    className=\"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200\"\n                  >\n                    Create Your First Drop\n                  </Link>\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'applications' && (\n            <div className=\"space-y-6\">\n              <h3 className=\"text-xl font-semibold text-gray-900\">Your Applications</h3>\n\n              {applicationsLoading ? (\n                <div className=\"flex items-center justify-center h-32\">\n                  <div className=\"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full\"></div>\n                </div>\n              ) : userApplications.length > 0 ? (\n                <div className=\"space-y-4\">\n                  {userApplications.map((application) => (\n                    <ApplicationCard\n                      key={application.id}\n                      application={application}\n                      onSubmissionSuccess={() => {\n                        fetchUserApplications();\n                      }}\n                    />\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-12\">\n                  <MapPin className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n                  <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No Applications Yet</h3>\n                  <p className=\"text-gray-600 mb-6\">Apply to drops to start earning rewards</p>\n                  <Link\n                    to=\"/earn\"\n                    className=\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200\"\n                  >\n                    Browse Opportunities\n                  </Link>\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'achievements' && (\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-xl font-semibold text-gray-900\">Achievements</h3>\n                <button\n                  onClick={() => setShowAchievementsModal(true)}\n                  className=\"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200\"\n                >\n                  View All\n                </button>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {/* Mock achievements for demo */}\n                <div className=\"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-6 border border-yellow-100 text-center\">\n                  <div className=\"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                    <Trophy className=\"w-8 h-8 text-yellow-600\" />\n                  </div>\n                  <h4 className=\"font-semibold text-yellow-900 mb-2\">First Steps</h4>\n                  <p className=\"text-sm text-yellow-700\">Complete your first drop application</p>\n                </div>\n\n                <div className=\"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl p-6 border border-blue-100 text-center\">\n                  <div className=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                    <Star className=\"w-8 h-8 text-blue-600\" />\n                  </div>\n                  <h4 className=\"font-semibold text-blue-900 mb-2\">Content Creator</h4>\n                  <p className=\"text-sm text-blue-700\">Share your first piece of content</p>\n                </div>\n\n                <div className=\"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 border border-purple-100 text-center\">\n                  <div className=\"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                    <Award className=\"w-8 h-8 text-purple-600\" />\n                  </div>\n                  <h4 className=\"font-semibold text-purple-900 mb-2\">Influencer</h4>\n                  <p className=\"text-sm text-purple-700\">Reach 100 followers</p>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Modals */}\n      <EditProfileModal\n        isOpen={showEditProfileModal}\n        onClose={() => setShowEditProfileModal(false)}\n        user={user!}\n        onSuccess={handleProfileUpdateSuccess}\n      />\n\n      <AchievementsModal\n        isOpen={showAchievementsModal}\n        onClose={() => setShowAchievementsModal(false)}\n        user={user!}\n      />\n\n      <ReferralModal\n        isOpen={showReferralModal}\n        onClose={() => setShowReferralModal(false)}\n        user={user!}\n        onSuccess={() => {\n          // Refresh user data\n          fetchUserProfile();\n        }}\n      />\n\n      <InfluenceRewardsModal\n        isOpen={showInfluenceRewardsModal}\n        onClose={() => setShowInfluenceRewardsModal(false)}\n        user={user!}\n        onSuccess={() => {\n          // Refresh user data\n          fetchUserProfile();\n        }}\n      />\n\n      <MakeOfferModal\n        isOpen={offerModalOpen}\n        onClose={() => setOfferModalOpen(false)}\n        holding={offerHolding}\n        sellerId={user?.id ? String(user.id) : undefined}\n      />\n\n      {editContentData && (\n        <EditContentModal\n          isOpen={editContentModalOpen}\n          onClose={() => {\n            setEditContentModalOpen(false);\n            setEditContentData(null);\n          }}\n          onSuccess={handleEditContentSuccess}\n          content={editContentData}\n        />\n      )}\n\n      <ConfirmationModal\n        isOpen={deleteConfirmModalOpen}\n        onClose={() => {\n          setDeleteConfirmModalOpen(false);\n          setContentToDelete(null);\n        }}\n        onConfirm={handleDeleteContentConfirm}\n        title=\"Delete Content\"\n        message={`Are you sure you want to delete \"${contentToDelete?.title}\"? This action cannot be undone and will remove all associated data.`}\n        confirmText=\"Delete\"\n        cancelText=\"Cancel\"\n        type=\"danger\"\n      />\n    </div>\n  );\n}\n\n// Export ProfilePage as an alias for Profile\nexport const ProfilePage = Profile;\n\nfunction PublicHoldingsSection({\n  holdings,\n  isOwner,\n  onOffer,\n  onView,\n}: {\n  holdings: ContentHolding[];\n  isOwner: boolean;\n  onOffer: (holding: ContentHolding) => void;\n  onView: (holding: ContentHolding) => void;\n}) {\n  const visibleHoldings = holdings.filter((holding) => holding.visibility !== 'private');\n\n  if (!visibleHoldings.length) {\n    return null;\n  }\n\n  return (\n    <div className=\"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm\">\n      <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6\">\n        <div>\n          <h3 className=\"text-lg font-semibold text-gray-900\">Public Holdings</h3>\n          <p className=\"text-sm text-gray-500\">\n            {isOwner\n              ? 'Only holdings you set to public are visible to others.'\n              : 'Shared portfolio highlights from this creator.'}\n          </p>\n        </div>\n        <span className=\"px-3 py-1 rounded-full text-xs font-semibold bg-slate-100 text-slate-700\">\n          {visibleHoldings.length} assets\n        </span>\n      </div>\n\n      <div className=\"space-y-3\">\n        {visibleHoldings.map((holding) => (\n          <div key={holding.content_id} className=\"flex items-center justify-between bg-gray-50 rounded-xl p-4\">\n            <div className=\"flex items-center space-x-3\">\n              <img\n                src={holding.content_thumbnail}\n                alt={holding.content_title}\n                className=\"w-12 h-12 rounded-lg object-cover\"\n              />\n              <div>\n                <p className=\"font-semibold text-gray-900\">{holding.content_title}</p>\n                <p className=\"text-sm text-gray-500\">\n                  {holding.owned_shares} shares • Avg ${holding.avg_cost.toFixed(2)} • Now ${holding.current_price.toFixed(2)}\n                </p>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <button\n                onClick={() => onView(holding)}\n                className=\"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-600 rounded-lg hover:bg-gray-100\"\n              >\n                View\n              </button>\n              {!isOwner && (\n                <button\n                  onClick={() => onOffer(holding)}\n                  className=\"px-3 py-1.5 text-sm font-medium border border-blue-200 text-blue-600 rounded-lg hover:bg-blue-50\"\n                >\n                  Make offer\n                </button>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nfunction PublicPredictionsSection({\n  predictions,\n  onView,\n}: {\n  predictions: PredictionSummary[];\n  onView: (prediction: PredictionSummary) => void;\n}) {\n  if (!predictions.length) {\n    return null;\n  }\n\n  return (\n    <div className=\"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <div>\n          <h3 className=\"text-lg font-semibold text-gray-900\">Prediction History</h3>\n          <p className=\"text-sm text-gray-500\">Public predictions and outcomes shared by this creator.</p>\n        </div>\n        <span className=\"px-3 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-700\">\n          {predictions.length} entries\n        </span>\n      </div>\n\n      <div className=\"space-y-3\">\n        {predictions.map((prediction) => (\n          <div key={prediction.id} className=\"flex items-center justify-between bg-gray-50 rounded-xl p-4\">\n            <div>\n              <p className=\"font-medium text-gray-900\">{prediction.content_title}</p>\n              <p className=\"text-sm text-gray-500\">\n                {prediction.platform.toUpperCase()} • {new Date(prediction.created_at).toLocaleDateString()}\n              </p>\n            </div>\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"text-right\">\n                <p className=\"text-sm text-gray-600 capitalize\">{prediction.prediction_side}</p>\n                <p className=\"text-sm text-gray-500\">\n                  {prediction.status === 'settled' && prediction.result\n                    ? `Result: ${prediction.result}`\n                    : `Status: ${prediction.status}`}\n                </p>\n              </div>\n              <button\n                onClick={() => onView(prediction)}\n                className=\"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-600 rounded-lg hover:bg-gray-100\"\n              >\n                View\n              </button>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { X, DollarSign, Gem, Zap } from 'lucide-react';\n\ninterface ContentFundingModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  contentId: number;\n  contentTitle: string;\n  isOwner: boolean;\n  currentRevenue: number;\n  sharePrice: number;\n  totalShares: number;\n  onSuccess: (newRevenue: number, newSharePrice: number) => void;\n}\n\nexport default function ContentFundingModal({\n  isOpen,\n  onClose,\n  contentId,\n  contentTitle,\n  isOwner,\n  currentRevenue,\n  sharePrice,\n  totalShares,\n  onSuccess\n}: ContentFundingModalProps) {\n  const [amount, setAmount] = useState<number>(0);\n  const [currency, setCurrency] = useState<'USD' | 'Gems' | 'Points'>('USD');\n  const [loading, setLoading] = useState(false);\n  const [actionType, setActionType] = useState<'fund' | 'tip'>('tip');\n\n  if (!isOpen) return null;\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (amount <= 0) return;\n\n    setLoading(true);\n    try {\n      const endpoint = actionType === 'fund' ? `/api/content/${contentId}/fund` : `/api/content/${contentId}/tip`;\n      \n      const response = await fetch(endpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          amount,\n          currency_type: currency\n        })\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        onSuccess(result.new_revenue, result.new_share_price);\n        onClose();\n        setAmount(0);\n      } else {\n        const error = await response.json();\n        alert(error.error || `Failed to ${actionType} content`);\n      }\n    } catch (error) {\n      console.error(`Failed to ${actionType} content:`, error);\n      alert(`Failed to ${actionType} content. Please try again.`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const calculateNewSharePrice = () => {\n    const convertedAmount = currency === 'Points' ? amount / 1000 : amount;\n    return totalShares > 0 ? (currentRevenue + convertedAmount) / totalShares : 0;\n  };\n\n  const getCurrencyIcon = (curr: string) => {\n    switch (curr) {\n      case 'USD': return <DollarSign className=\"w-4 h-4\" />;\n      case 'Gems': return <Gem className=\"w-4 h-4\" />;\n      case 'Points': return <Zap className=\"w-4 h-4\" />;\n      default: return <DollarSign className=\"w-4 h-4\" />;\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <h2 className=\"text-xl font-bold text-gray-900\">\n            {isOwner ? 'Fund or Receive Tips' : 'Tip Creator'}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-6\">\n          {/* Content Info */}\n          <div className=\"bg-gray-50 rounded-lg p-4 mb-6\">\n            <h3 className=\"font-medium text-gray-900 mb-2\">{contentTitle}</h3>\n            <div className=\"text-sm text-gray-600 space-y-1\">\n              <div>Current Revenue: ${currentRevenue.toFixed(2)}</div>\n              <div>Share Price: ${sharePrice.toFixed(4)}</div>\n              <div>Total Shares: {totalShares}</div>\n            </div>\n          </div>\n\n          {/* Action Type Selection (only for owners) */}\n          {isOwner && (\n            <div className=\"mb-6\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Action</label>\n              <div className=\"grid grid-cols-2 gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={() => setActionType('fund')}\n                  className={`p-3 border rounded-lg text-sm font-medium transition-all ${\n                    actionType === 'fund'\n                      ? 'border-purple-500 bg-purple-50 text-purple-700'\n                      : 'border-gray-300 hover:border-gray-400'\n                  }`}\n                >\n                  Fund Content\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setActionType('tip')}\n                  className={`p-3 border rounded-lg text-sm font-medium transition-all ${\n                    actionType === 'tip'\n                      ? 'border-green-500 bg-green-50 text-green-700'\n                      : 'border-gray-300 hover:border-gray-400'\n                  }`}\n                >\n                  Enable Tips\n                </button>\n              </div>\n              <p className=\"text-xs text-gray-500 mt-2\">\n                {actionType === 'fund' \n                  ? 'Add your own money to increase content value'\n                  : 'Allow others to tip and increase content value'\n                }\n              </p>\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {/* Currency Selection */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Currency</label>\n              <div className=\"grid grid-cols-3 gap-2\">\n                {(['USD', 'Gems', 'Points'] as const).map((curr) => (\n                  <button\n                    key={curr}\n                    type=\"button\"\n                    onClick={() => setCurrency(curr)}\n                    className={`p-3 border rounded-lg text-sm font-medium transition-all flex items-center justify-center space-x-2 ${\n                      currency === curr\n                        ? 'border-orange-500 bg-orange-50 text-orange-700'\n                        : 'border-gray-300 hover:border-gray-400'\n                    }`}\n                  >\n                    {getCurrencyIcon(curr)}\n                    <span>{curr}</span>\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            {/* Amount Input */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Amount {currency === 'Points' && '(1000 Points = $1 USD)'}\n              </label>\n              <input\n                type=\"number\"\n                min=\"0\"\n                step={currency === 'Points' ? '100' : '0.01'}\n                value={amount || ''}\n                onChange={(e) => setAmount(Number(e.target.value))}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                placeholder={`Enter ${currency.toLowerCase()} amount`}\n                required\n              />\n            </div>\n\n            {/* Preview */}\n            {amount > 0 && (\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                <h4 className=\"text-sm font-medium text-blue-900 mb-2\">Preview Impact</h4>\n                <div className=\"text-sm text-blue-700 space-y-1\">\n                  <div>\n                    New Revenue: ${(currentRevenue + (currency === 'Points' ? amount / 1000 : amount)).toFixed(2)}\n                  </div>\n                  <div>\n                    New Share Price: ${calculateNewSharePrice().toFixed(4)}\n                  </div>\n                  <div className=\"text-xs text-blue-600 mt-2\">\n                    Share price increase: ${(calculateNewSharePrice() - sharePrice).toFixed(4)}\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <button\n              type=\"submit\"\n              disabled={loading || amount <= 0}\n              className=\"w-full bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white py-3 rounded-lg font-medium transition-all duration-200 disabled:opacity-50\"\n            >\n              {loading ? 'Processing...' : `${actionType === 'fund' ? 'Fund' : 'Tip'} Content`}\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { MessageCircle, Heart, Reply, Send, Trash2, Pin, MoreVertical } from 'lucide-react';\nimport UserLink from '@/react-app/components/UserLink';\nimport { UserType } from '@/shared/types';\n\ninterface Comment {\n  id: number;\n  content_id: number;\n  user_id: number;\n  comment_text: string;\n  parent_comment_id?: number;\n  likes_count: number;\n  is_pinned: boolean;\n  created_at: string;\n  updated_at: string;\n  user_display_name?: string;\n  user_username?: string;\n  user_avatar?: string;\n  replies?: Comment[];\n  has_liked?: boolean;\n}\n\ninterface CommentSystemProps {\n  contentId: number;\n  currentUser: UserType | null;\n  isOwner?: boolean;\n}\n\nexport default function CommentSystem({ contentId, currentUser, isOwner = false }: CommentSystemProps) {\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [newComment, setNewComment] = useState('');\n  const [replyingTo, setReplyingTo] = useState<number | null>(null);\n  const [replyText, setReplyText] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n\n  useEffect(() => {\n    fetchComments();\n  }, [contentId]);\n\n  const fetchComments = async () => {\n    if (!contentId) return;\n    \n    setLoading(true);\n    try {\n      const response = await fetch(`/api/content/${contentId}/comments`, {\n        credentials: 'include'\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setComments(data);\n      }\n    } catch (error) {\n      console.error('Failed to fetch comments:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const submitComment = async (text: string, parentId?: number) => {\n    if (!text.trim() || !currentUser) return;\n\n    setSubmitting(true);\n    try {\n      const response = await fetch(`/api/content/${contentId}/comments`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({\n          comment_text: text.trim(),\n          parent_comment_id: parentId || null\n        })\n      });\n\n      if (response.ok) {\n        await fetchComments(); // Refresh comments\n        if (parentId) {\n          setReplyText('');\n          setReplyingTo(null);\n        } else {\n          setNewComment('');\n        }\n      } else {\n        throw new Error('Failed to post comment');\n      }\n    } catch (error) {\n      console.error('Error posting comment:', error);\n      alert('Failed to post comment. Please try again.');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const likeComment = async (commentId: number) => {\n    if (!currentUser) return;\n\n    try {\n      const response = await fetch(`/api/content/comments/${commentId}/like`, {\n        method: 'POST',\n        credentials: 'include'\n      });\n\n      if (response.ok) {\n        await fetchComments(); // Refresh to get updated like status\n      }\n    } catch (error) {\n      console.error('Error liking comment:', error);\n    }\n  };\n\n  const deleteComment = async (commentId: number) => {\n    if (!currentUser || !window.confirm('Are you sure you want to delete this comment?')) return;\n\n    try {\n      const response = await fetch(`/api/content/comments/${commentId}`, {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n\n      if (response.ok) {\n        await fetchComments(); // Refresh comments\n      }\n    } catch (error) {\n      console.error('Error deleting comment:', error);\n      alert('Failed to delete comment.');\n    }\n  };\n\n  const pinComment = async (commentId: number) => {\n    if (!isOwner) return;\n\n    try {\n      const response = await fetch(`/api/content/comments/${commentId}/pin`, {\n        method: 'POST',\n        credentials: 'include'\n      });\n\n      if (response.ok) {\n        await fetchComments(); // Refresh comments\n      }\n    } catch (error) {\n      console.error('Error pinning comment:', error);\n    }\n  };\n\n  const formatTimestamp = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diff = now.getTime() - date.getTime();\n    \n    const minutes = Math.floor(diff / (1000 * 60));\n    const hours = Math.floor(diff / (1000 * 60 * 60));\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n    \n    if (minutes < 60) return `${minutes}m ago`;\n    if (hours < 24) return `${hours}h ago`;\n    if (days < 7) return `${days}d ago`;\n    \n    return date.toLocaleDateString();\n  };\n\n  const CommentItem = ({ comment, isReply = false }: { comment: Comment; isReply?: boolean }) => {\n    const isAuthor = currentUser?.id === comment.user_id;\n    \n    return (\n      <div className={`${isReply ? 'ml-8 border-l-2 border-gray-200 pl-4' : ''} mb-4`}>\n        <div className=\"bg-gray-50 rounded-lg p-4\">\n          {/* Comment Header */}\n          <div className=\"flex items-start justify-between mb-2\">\n            <div className=\"flex items-center space-x-2\">\n              <UserLink\n                username={comment.user_username}\n                displayName={comment.user_display_name}\n                avatarUrl={comment.user_avatar}\n                size=\"sm\"\n              />\n              <span className=\"text-xs text-gray-500\">{formatTimestamp(comment.created_at)}</span>\n              {comment.is_pinned && (\n                <div className=\"flex items-center space-x-1 bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs\">\n                  <Pin className=\"w-3 h-3\" />\n                  <span>Pinned</span>\n                </div>\n              )}\n            </div>\n            \n            {(isAuthor || isOwner) && (\n              <div className=\"relative group\">\n                <button className=\"text-gray-400 hover:text-gray-600 p-1\">\n                  <MoreVertical className=\"w-4 h-4\" />\n                </button>\n                <div className=\"absolute right-0 top-full bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-32 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all\">\n                  {isOwner && !comment.is_pinned && (\n                    <button\n                      onClick={() => pinComment(comment.id)}\n                      className=\"w-full text-left px-3 py-2 text-sm hover:bg-gray-50 flex items-center space-x-2\"\n                    >\n                      <Pin className=\"w-3 h-3\" />\n                      <span>Pin</span>\n                    </button>\n                  )}\n                  {(isAuthor || isOwner) && (\n                    <button\n                      onClick={() => deleteComment(comment.id)}\n                      className=\"w-full text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600 flex items-center space-x-2\"\n                    >\n                      <Trash2 className=\"w-3 h-3\" />\n                      <span>Delete</span>\n                    </button>\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Comment Text */}\n          <p className=\"text-gray-800 mb-3 whitespace-pre-wrap\">{comment.comment_text}</p>\n\n          {/* Comment Actions */}\n          <div className=\"flex items-center space-x-4\">\n            <button\n              onClick={() => likeComment(comment.id)}\n              disabled={!currentUser}\n              className={`flex items-center space-x-1 text-sm transition-colors ${\n                comment.has_liked \n                  ? 'text-red-500' \n                  : 'text-gray-500 hover:text-red-500'\n              } ${!currentUser ? 'cursor-not-allowed opacity-50' : ''}`}\n            >\n              <Heart className={`w-4 h-4 ${comment.has_liked ? 'fill-current' : ''}`} />\n              <span>{comment.likes_count || 0}</span>\n            </button>\n            \n            {!isReply && currentUser && (\n              <button\n                onClick={() => setReplyingTo(replyingTo === comment.id ? null : comment.id)}\n                className=\"flex items-center space-x-1 text-sm text-gray-500 hover:text-blue-500 transition-colors\"\n              >\n                <Reply className=\"w-4 h-4\" />\n                <span>Reply</span>\n              </button>\n            )}\n          </div>\n\n          {/* Reply Form */}\n          {replyingTo === comment.id && (\n            <div className=\"mt-3 pt-3 border-t border-gray-200\">\n              <div className=\"flex space-x-2\">\n                <textarea\n                  value={replyText}\n                  onChange={(e) => setReplyText(e.target.value)}\n                  placeholder=\"Write a reply...\"\n                  className=\"flex-1 p-2 border border-gray-300 rounded-lg text-sm resize-none\"\n                  rows={2}\n                />\n                <div className=\"flex flex-col space-y-1\">\n                  <button\n                    onClick={() => submitComment(replyText, comment.id)}\n                    disabled={!replyText.trim() || submitting}\n                    className=\"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    <Send className=\"w-4 h-4\" />\n                  </button>\n                  <button\n                    onClick={() => {\n                      setReplyingTo(null);\n                      setReplyText('');\n                    }}\n                    className=\"text-gray-500 hover:text-gray-700 p-2\"\n                  >\n                    ✕\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Replies */}\n        {comment.replies && comment.replies.length > 0 && (\n          <div className=\"mt-3\">\n            {comment.replies.map((reply) => (\n              <CommentItem key={reply.id} comment={reply} isReply={true} />\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-8\">\n        <div className=\"animate-spin w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center space-x-3 pb-4 border-b border-gray-200\">\n        <MessageCircle className=\"w-5 h-5 text-blue-600\" />\n        <h3 className=\"text-lg font-semibold text-gray-900\">\n          Comments ({comments.length})\n        </h3>\n      </div>\n\n      {/* New Comment Form */}\n      {currentUser ? (\n        <div className=\"space-y-3\">\n          <div className=\"flex items-start space-x-3\">\n            <div className=\"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-medium\">\n              {currentUser.display_name?.[0] || currentUser.username?.[0] || 'U'}\n            </div>\n            <div className=\"flex-1\">\n              <textarea\n                value={newComment}\n                onChange={(e) => setNewComment(e.target.value)}\n                placeholder=\"Share your thoughts...\"\n                className=\"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                rows={3}\n              />\n              <div className=\"mt-2 flex justify-between items-center\">\n                <p className=\"text-xs text-gray-500\">\n                  Be respectful and constructive in your comments\n                </p>\n                <button\n                  onClick={() => submitComment(newComment)}\n                  disabled={!newComment.trim() || submitting}\n                  className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 transition-colors\"\n                >\n                  {submitting ? (\n                    <div className=\"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full\"></div>\n                  ) : (\n                    <Send className=\"w-4 h-4\" />\n                  )}\n                  <span>Post Comment</span>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      ) : (\n        <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4 text-center\">\n          <p className=\"text-gray-600 mb-2\">Sign in to join the conversation</p>\n          <button \n            onClick={() => window.location.href = '/auth/google'}\n            className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            Sign In to Comment\n          </button>\n        </div>\n      )}\n\n      {/* Comments List */}\n      <div className=\"space-y-4\">\n        {comments.length > 0 ? (\n          comments.map((comment) => (\n            <CommentItem key={comment.id} comment={comment} />\n          ))\n        ) : (\n          <div className=\"text-center py-12\">\n            <MessageCircle className=\"w-12 h-12 text-gray-300 mx-auto mb-3\" />\n            <h4 className=\"text-lg font-medium text-gray-900 mb-2\">No comments yet</h4>\n            <p className=\"text-gray-600\">\n              {currentUser ? 'Be the first to share your thoughts!' : 'Sign in to start the conversation.'}\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { X, Clock, Zap, Star, Crown, Flame } from 'lucide-react';\n\ninterface SponsorshipModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSponsor: (gemAmount: number, boostMultiplier: number, durationHours: number) => void;\n  contentTitle: string;\n  userGems: number;\n}\n\nexport default function SponsorshipModal({ \n  isOpen, \n  onClose, \n  onSponsor, \n  contentTitle, \n  userGems \n}: SponsorshipModalProps) {\n  const [selectedPackage, setSelectedPackage] = useState<any>(null);\n\n  if (!isOpen) return null;\n\n  const sponsorshipPackages = [\n    { \n      id: 'quick',\n      name: \"Quick Boost\", \n      gems: 25, \n      multiplier: 1.5, \n      duration: 1, \n      description: \"1.5x visibility for 1 hour\",\n      icon: <Zap className=\"w-5 h-5\" />,\n      color: \"from-blue-500 to-cyan-500\"\n    },\n    { \n      id: 'popular',\n      name: \"Popular Boost\", \n      gems: 50, \n      multiplier: 2.0, \n      duration: 6, \n      description: \"2x visibility for 6 hours\",\n      icon: <Star className=\"w-5 h-5\" />,\n      color: \"from-purple-500 to-pink-500\"\n    },\n    { \n      id: 'daily',\n      name: \"Daily Featured\", \n      gems: 100, \n      multiplier: 3.0, \n      duration: 24, \n      description: \"3x visibility for 24 hours\",\n      icon: <Crown className=\"w-5 h-5\" />,\n      color: \"from-orange-500 to-red-500\"\n    },\n    { \n      id: 'premium',\n      name: \"Premium Spotlight\", \n      gems: 200, \n      multiplier: 4.0, \n      duration: 72, \n      description: \"4x visibility for 3 days\",\n      icon: <Flame className=\"w-5 h-5\" />,\n      color: \"from-red-500 to-pink-500\"\n    },\n    { \n      id: 'viral',\n      name: \"Viral Campaign\", \n      gems: 500, \n      multiplier: 6.0, \n      duration: 168, \n      description: \"6x visibility for 1 week\",\n      icon: <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n        <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n      </svg>,\n      color: \"from-yellow-500 to-orange-500\"\n    }\n  ];\n\n  const formatDuration = (hours: number) => {\n    if (hours < 24) {\n      return `${hours} hour${hours !== 1 ? 's' : ''}`;\n    } else if (hours < 168) {\n      const days = Math.floor(hours / 24);\n      return `${days} day${days !== 1 ? 's' : ''}`;\n    } else {\n      const weeks = Math.floor(hours / 168);\n      return `${weeks} week${weeks !== 1 ? 's' : ''}`;\n    }\n  };\n\n  const handleSponsor = () => {\n    if (!selectedPackage) return;\n    onSponsor(selectedPackage.gems, selectedPackage.multiplier, selectedPackage.duration);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h2 className=\"text-2xl font-bold text-gray-900\">Sponsor Content</h2>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n\n          <div className=\"mb-6\">\n            <h3 className=\"font-semibold text-gray-900 mb-2\">{contentTitle}</h3>\n            <p className=\"text-sm text-gray-600 leading-relaxed\">\n              Sponsoring content boosts its visibility in user feeds and gives it priority placement. \n              Multiple sponsors can boost the same content, increasing its reach exponentially. \n              Your brand will be credited as a sponsor to all users who see this content.\n            </p>\n          </div>\n\n          <div className=\"mb-6\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <span className=\"text-sm font-medium text-gray-700\">Your Gem Balance</span>\n              <span className=\"text-lg font-semibold text-purple-600\">{userGems} gems</span>\n            </div>\n            <div className=\"w-full bg-gray-200 rounded-full h-3\">\n              <div \n                className=\"bg-gradient-to-r from-purple-500 to-pink-500 h-3 rounded-full transition-all duration-300\"\n                style={{ width: `${Math.min(100, (userGems / 500) * 100)}%` }}\n              ></div>\n            </div>\n          </div>\n\n          <div className=\"space-y-4 mb-8\">\n            <h4 className=\"font-semibold text-gray-900 text-lg mb-4\">Choose Your Sponsorship Package</h4>\n            <div className=\"grid gap-4\">\n              {sponsorshipPackages.map((pkg) => (\n                <div\n                  key={pkg.id}\n                  className={`border rounded-xl p-4 cursor-pointer transition-all duration-200 ${\n                    selectedPackage?.id === pkg.id\n                      ? 'border-purple-500 bg-purple-50 shadow-lg scale-[1.02]'\n                      : 'border-gray-200 hover:border-gray-300 hover:shadow-md'\n                  } ${pkg.gems > userGems ? 'opacity-50 cursor-not-allowed' : ''}`}\n                  onClick={() => {\n                    if (pkg.gems <= userGems) {\n                      setSelectedPackage(pkg);\n                    }\n                  }}\n                >\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-start space-x-4\">\n                      <div className={`p-3 rounded-xl bg-gradient-to-r ${pkg.color} text-white`}>\n                        {pkg.icon}\n                      </div>\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center space-x-2 mb-1\">\n                          <h5 className=\"font-semibold text-gray-900\">{pkg.name}</h5>\n                          {pkg.id === 'popular' && (\n                            <span className=\"bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs font-medium\">\n                              Most Popular\n                            </span>\n                          )}\n                          {pkg.id === 'viral' && (\n                            <span className=\"bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full text-xs font-medium\">\n                              Best Value\n                            </span>\n                          )}\n                        </div>\n                        <p className=\"text-sm text-gray-600 mb-2\">{pkg.description}</p>\n                        <div className=\"flex items-center space-x-4 text-xs text-gray-500\">\n                          <div className=\"flex items-center space-x-1\">\n                            <Clock className=\"w-3 h-3\" />\n                            <span>Duration: {formatDuration(pkg.duration)}</span>\n                          </div>\n                          <div className=\"flex items-center space-x-1\">\n                            <Zap className=\"w-3 h-3\" />\n                            <span>{pkg.multiplier}x visibility boost</span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"text-right\">\n                      <p className=\"text-2xl font-bold text-purple-600\">{pkg.gems}</p>\n                      <p className=\"text-xs text-gray-500\">gems</p>\n                      {pkg.gems > userGems && (\n                        <p className=\"text-xs text-red-500 mt-1\">Insufficient gems</p>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {selectedPackage && (\n            <div className=\"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-4 mb-6\">\n              <h5 className=\"font-semibold text-purple-900 mb-2\">Sponsorship Preview</h5>\n              <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                <div>\n                  <span className=\"text-purple-700\">Package:</span>\n                  <span className=\"font-medium text-purple-900 ml-2\">{selectedPackage.name}</span>\n                </div>\n                <div>\n                  <span className=\"text-purple-700\">Duration:</span>\n                  <span className=\"font-medium text-purple-900 ml-2\">{formatDuration(selectedPackage.duration)}</span>\n                </div>\n                <div>\n                  <span className=\"text-purple-700\">Visibility Boost:</span>\n                  <span className=\"font-medium text-purple-900 ml-2\">{selectedPackage.multiplier}x</span>\n                </div>\n                <div>\n                  <span className=\"text-purple-700\">Cost:</span>\n                  <span className=\"font-medium text-purple-900 ml-2\">{selectedPackage.gems} gems</span>\n                </div>\n              </div>\n              <div className=\"mt-3 pt-3 border-t border-purple-200\">\n                <p className=\"text-xs text-purple-700\">\n                  Your brand name will be displayed as a sponsor on this content. \n                  Multiple sponsors can boost the same content for increased visibility.\n                </p>\n              </div>\n            </div>\n          )}\n\n          <div className=\"space-y-3\">\n            <button\n              onClick={handleSponsor}\n              disabled={!selectedPackage || (selectedPackage?.gems > userGems)}\n              className=\"w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-4 rounded-xl font-semibold transition-all duration-200 shadow-lg\"\n            >\n              {selectedPackage \n                ? `Sponsor for ${selectedPackage.gems} gems` \n                : 'Select a sponsorship package'\n              }\n            </button>\n            <button\n              onClick={onClose}\n              className=\"w-full border border-gray-300 hover:border-gray-400 text-gray-700 px-6 py-3 rounded-xl font-medium transition-all duration-200\"\n            >\n              Cancel\n            </button>\n          </div>\n\n          <div className=\"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <h5 className=\"font-medium text-blue-900 mb-2\">💡 Sponsorship Benefits</h5>\n            <ul className=\"text-sm text-blue-700 space-y-1\">\n              <li>• Your brand appears on sponsored content</li>\n              <li>• Content gets priority placement in feeds</li>\n              <li>• Multiple sponsors increase total visibility boost</li>\n              <li>• Reach engaged users interested in the content topic</li>\n              <li>• Analytics provided on sponsorship performance</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport {\n  Heart,\n  MessageCircle,\n  Share2,\n  Eye,\n  ArrowLeft,\n  ExternalLink,\n  Calendar,\n  TrendingUp,\n  DollarSign,\n  Users,\n  Bookmark,\n  Coins,\n  Target,\n  Gift,\n  Repeat,\n  Tag,\n  Sparkles,\n  Star,\n  Flame\n} from 'lucide-react';\nimport UserLink from '@/react-app/components/UserLink';\nimport { ContentPieceType, WalletType, UserType } from '@/shared/types';\nimport BuySharesModal from '@/react-app/components/BuySharesModal';\nimport ShareContentModal from '@/react-app/components/ShareContentModal';\nimport ExternalMoveModal from '@/react-app/components/ExternalMoveModal';\nimport ContentFundingModal from '@/react-app/components/ContentFundingModal';\nimport EditContentModal from '@/react-app/components/EditContentModal';\nimport ConfirmationModal from '@/react-app/components/ConfirmationModal';\nimport Tooltip from '@/react-app/components/Tooltip';\nimport CommentSystem from '@/react-app/components/CommentSystem';\nimport SponsorshipModal from '@/react-app/components/SponsorshipModal';\nimport TipModal from '@/react-app/components/TipModal';\nimport { buildAuthHeaders } from '@/react-app/utils/api';\nimport { API_BASE_URL } from '../config';\n\nconst fallbackImages = [\n  'https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=1400&q=80&sat=-10',\n  'https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&w=1400&q=80&sat=-10',\n  'https://images.unsplash.com/photo-1522542550221-31fd19575a2d?auto=format&fit=crop&w=1400&q=80&sat=-10',\n  'https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?auto=format&fit=crop&w=1400&q=80&sat=-10',\n  'https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1400&q=80&sat=-10',\n];\n\nconst getFallbackImage = (seed: number | string | undefined) => {\n  const index = Math.abs(Number(seed) || 0) % fallbackImages.length;\n  return `${fallbackImages[index]}&sig=${seed ?? index}`;\n};\n\nconst buildFallbackContent = (seed: number): ContentPieceType => ({\n  id: seed,\n  creator_id: 1000 + seed,\n  creator_username: 'demo_creator',\n  creator_name: 'Demo Creator',\n  creator_avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=demo_content',\n  platform: 'instagram',\n  platform_url: 'https://instagram.com/promorang',\n  title: 'Demo Growth Content Spotlight',\n  description: 'Experience a highlight clip from our creator community. Monitor engagement, share prices, and revenue performance in real time.',\n  media_url: getFallbackImage(seed),\n  total_shares: 3500,\n  available_shares: 1240,\n  engagement_shares_total: 3200,\n  engagement_shares_remaining: 880,\n  share_price: 12.5,\n  current_revenue: 8450,\n  performance_metrics: JSON.stringify({\n    impressions: 98000,\n    clicks: 12500,\n    conversions: 1320,\n    engagement_rate: 0.128,\n  }),\n  views_count: 98000,\n  likes_count: 15420,\n  comments_count: 2450,\n  reposts_count: 1200,\n  is_demo: true,\n  is_sponsored: false,\n  created_at: new Date(Date.now() - 48 * 60 * 60 * 1000).toISOString(),\n  updated_at: new Date().toISOString(),\n});\n\nconst normalizeContent = (raw: any, seed: number): ContentPieceType => {\n  const fallback = buildFallbackContent(seed);\n\n  if (!raw || typeof raw !== 'object') {\n    return fallback;\n  }\n\n  const id = Number(raw.id ?? seed ?? fallback.id);\n  const performanceMetrics =\n    typeof raw.performance_metrics === 'string'\n      ? raw.performance_metrics\n      : JSON.stringify({\n          impressions: raw.impressions ?? fallback.views_count ?? 0,\n          clicks: raw.clicks ?? 0,\n          conversions: raw.conversions ?? 0,\n          engagement_rate: raw.engagement_rate ?? 0.07,\n        });\n\n  const mediaUrl = raw.media_url && /^https?:\\/\\//i.test(raw.media_url)\n    ? raw.media_url\n    : getFallbackImage(id);\n\n  return {\n    id,\n    creator_id: Number(raw.creator_id ?? fallback.creator_id),\n    creator_username: raw.creator_username ?? fallback.creator_username,\n    creator_name: raw.creator_name ?? fallback.creator_name,\n    creator_avatar: raw.creator_avatar ?? fallback.creator_avatar,\n    platform: raw.platform ?? fallback.platform,\n    platform_url: raw.platform_url ?? raw.content_url ?? fallback.platform_url,\n    title: raw.title ?? fallback.title,\n    description: raw.description ?? fallback.description,\n    media_url: mediaUrl,\n    total_shares: Number(raw.total_shares ?? fallback.total_shares),\n    available_shares: Number(raw.available_shares ?? fallback.available_shares),\n    engagement_shares_total: Number(raw.engagement_shares_total ?? fallback.engagement_shares_total),\n    engagement_shares_remaining: Number(raw.engagement_shares_remaining ?? fallback.engagement_shares_remaining),\n    share_price: Number(raw.share_price ?? fallback.share_price),\n    current_revenue: Number(raw.current_revenue ?? fallback.current_revenue),\n    performance_metrics: performanceMetrics,\n    views_count: Number(raw.views_count ?? raw.impressions ?? fallback.views_count),\n    likes_count: Number(raw.likes_count ?? raw.likes ?? fallback.likes_count),\n    comments_count: Number(raw.comments_count ?? raw.comments ?? fallback.comments_count),\n    reposts_count: Number(raw.reposts_count ?? raw.shares ?? fallback.reposts_count),\n    is_demo: Boolean(raw.is_demo ?? fallback.is_demo),\n    is_sponsored: Boolean(raw.is_sponsored ?? fallback.is_sponsored),\n    created_at: raw.created_at ?? fallback.created_at,\n    updated_at: raw.updated_at ?? raw.created_at ?? fallback.updated_at,\n  };\n};\n\nconst fallbackMetrics = (seed: number) => ({\n  likes: 14500 + (seed % 500),\n  comments: 2800 + (seed % 250),\n  shares: 1200 + (seed % 150),\n  views: 98000 + (seed % 5000),\n  internal_moves: 420 + (seed % 80),\n  external_moves: 215 + (seed % 40),\n  total_engagement: 14500 + (seed % 1000),\n});\n\nexport default function ContentDetail() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const apiBase = API_BASE_URL || '';\n  const withApiBase = (path: string) => `${apiBase}${path}`;\n  const [content, setContent] = useState<ContentPieceType | null>(null);\n  const [wallets, setWallets] = useState<WalletType[]>([]);\n  const [userData, setUserData] = useState<UserType | null>(null);\n  const [metrics, setMetrics] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n  const [buyModalOpen, setBuyModalOpen] = useState(false);\n  const [shareModalOpen, setShareModalOpen] = useState(false);\n  const [externalMoveModalOpen, setExternalMoveModalOpen] = useState(false);\n  const [fundingModalOpen, setFundingModalOpen] = useState(false);\n  const [editModalOpen, setEditModalOpen] = useState(false);\n  const [deleteConfirmModalOpen, setDeleteConfirmModalOpen] = useState(false);\n  const [userStatus, setUserStatus] = useState<{ has_liked: boolean; has_saved: boolean }>({ has_liked: false, has_saved: false });\n  const [sponsorshipModalOpen, setSponsorshipModalOpen] = useState(false);\n  const [sponsorshipData, setSponsorshipData] = useState<any>(null);\n  const [tipModalOpen, setTipModalOpen] = useState(false);\n\n  // Check if this is demo content\n  const isDemo = content?.title?.toLowerCase().includes('[demo]') ||\n                 content?.title?.toLowerCase().includes('demo') ||\n                 content?.description?.toLowerCase().includes('demo');\n\n  // Check if current user owns this content\n  const isOwner = userData && content && (\n    userData.id === content.creator_id ||\n    userData.username === content.creator_name ||\n    userData.display_name === content.creator_name\n  );\n\n  useEffect(() => {\n    let isMounted = true;\n\n    const load = async () => {\n      if (!id) return;\n      setLoading(true);\n      try {\n        await Promise.all([\n          fetchContentDetail(isMounted),\n          fetchWallets(isMounted),\n          fetchUserData(isMounted),\n          fetchMetrics(isMounted),\n          fetchSponsorshipData(isMounted)\n        ]);\n      } catch (error) {\n        console.error('ContentDetail initial load failed:', error);\n      } finally {\n        if (isMounted) {\n          setLoading(false);\n        }\n      }\n    };\n\n    load();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [id]);\n\n  const fetchContentDetail = async (isMounted = true) => {\n    const seed = Number(id ?? Date.now());\n\n    try {\n      const response = await fetch(withApiBase(`/api/content/${id}`));\n      if (response.ok) {\n        const data = await response.json();\n        if (isMounted) {\n          setContent(normalizeContent(data?.content ?? data, seed));\n        }\n      } else {\n        if (isMounted) {\n          setContent(normalizeContent(null, seed));\n        }\n      }\n    } catch (error) {\n      console.error('Failed to fetch content:', error);\n      if (isMounted) {\n        setContent(normalizeContent(null, seed));\n      }\n    }\n  };\n\n  const fetchWallets = async () => {\n    try {\n      const headers = buildAuthHeaders();\n      const response = await fetch(withApiBase('/api/users/me/wallets'), {\n        credentials: 'include',\n        headers\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setWallets(data);\n      }\n    } catch (error) {\n      console.error('Failed to fetch wallets:', error);\n    }\n  };\n\n  const fetchUserData = async () => {\n    try {\n      const headers = buildAuthHeaders();\n      const response = await fetch(withApiBase('/api/users/me'), {\n        credentials: 'include',\n        headers\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setUserData(data);\n      }\n    } catch (error) {\n      console.error('Failed to fetch user data:', error);\n    }\n  };\n\n  const fetchMetrics = async () => {\n    const seed = Number(id ?? Date.now());\n    try {\n      const response = await fetch(withApiBase(`/api/content/${id}/metrics`));\n      if (response.ok) {\n        const data = await response.json();\n        setMetrics(data);\n      } else {\n        setMetrics(fallbackMetrics(seed));\n      }\n    } catch (error) {\n      console.error('Failed to fetch metrics:', error);\n      setMetrics(fallbackMetrics(seed));\n    }\n  };\n\n  const fetchUserStatus = async () => {\n    if (!userData || !id) return;\n\n    try {\n      const headers = buildAuthHeaders();\n      const response = await fetch(withApiBase(`/api/content/${id}/user-status`), {\n        credentials: 'include',\n        headers\n      });\n      if (response.ok) {\n        const status = await response.json();\n        setUserStatus(status);\n      }\n    } catch (error) {\n      console.error('Failed to fetch user status:', error);\n    }\n  };\n\n  const fetchSponsorshipData = async () => {\n    if (!id) return;\n\n    try {\n      const headers = buildAuthHeaders();\n      const response = await fetch(withApiBase(`/api/content/${id}/sponsorship`), {\n        credentials: 'include',\n        headers\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setSponsorshipData(data);\n      }\n    } catch (error) {\n      console.error('Failed to fetch sponsorship data:', error);\n    }\n  };\n\n  const handleBuyShares = async (content: ContentPieceType, sharesCount: number) => {\n    try {\n      const response = await fetch(withApiBase('/api/content/buy-shares'), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...buildAuthHeaders()\n        },\n        credentials: 'include',\n        body: JSON.stringify({ content_id: content.id, shares_count: sharesCount })\n      });\n\n      if (response.ok) {\n        await fetchContentDetail();\n        await fetchWallets();\n        await fetchMetrics();\n      } else {\n        throw new Error('Purchase failed');\n      }\n    } catch (error) {\n      console.error('Failed to buy shares:', error);\n      throw error;\n    }\n  };\n\n  const handleSocialAction = async (action: string) => {\n    try {\n      // Check for one-time actions\n      if (action === 'like' && userStatus.has_liked) {\n        alert('You have already liked this content!');\n        return;\n      }\n\n      if (action === 'save' && userStatus.has_saved) {\n        alert('Content already saved to your collection!');\n        return;\n      }\n\n      if (action === 'share') {\n        setShareModalOpen(true);\n        return;\n      }\n\n      const response = await fetch(withApiBase('/api/users/social-action'), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...buildAuthHeaders()\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          action_type: action,\n          reference_id: content?.id,\n          reference_type: 'content'\n        })\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        showPointsNotification(data);\n        await fetchMetrics();\n        await fetchUserData();\n        await fetchContentDetail(); // Refresh to show engagement shares changes\n        await fetchUserStatus(); // Refresh user interaction status\n      } else {\n        const errorData = await response.json();\n        if (errorData.error) {\n          alert(errorData.error);\n        }\n      }\n    } catch (error) {\n      console.error(`Failed to record ${action} action:`, error);\n    }\n  };\n\n  const showPointsNotification = (data: any) => {\n    const notification = document.createElement('div');\n    notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-pulse';\n    notification.innerHTML = `\n      <div class=\"flex items-center space-x-2\">\n        <span>+${data.points_earned} points!</span>\n        <span class=\"text-xs\">(${data.multiplier.toFixed(1)}x multiplier)</span>\n      </div>\n    `;\n    document.body.appendChild(notification);\n    setTimeout(() => {\n      if (document.body.contains(notification)) {\n        document.body.removeChild(notification);\n      }\n    }, 3000);\n  };\n\n  const handleTip = async (content: ContentPieceType, amount: number) => {\n    try {\n      const response = await fetch(withApiBase('/api/content/tip'), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...buildAuthHeaders()\n        },\n        credentials: 'include',\n        body: JSON.stringify({ content_id: content.id, tip_amount: amount })\n      });\n\n      if (response.ok) {\n        // Show success notification\n        const notification = document.createElement('div');\n        notification.className = 'fixed top-4 right-4 bg-purple-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-bounce';\n        notification.innerHTML = `\n          <div class=\"flex items-center space-x-2\">\n            <span class=\"text-lg\">💎</span>\n            <div>\n              <div class=\"font-semibold\">Tip sent!</div>\n              <div class=\"text-xs opacity-90\">Tipped ${amount} gems to ${content.creator_name || content.creator_username || 'creator'}</div>\n            </div>\n          </div>\n        `;\n        document.body.appendChild(notification);\n        setTimeout(() => {\n          if (document.body.contains(notification)) {\n            document.body.removeChild(notification);\n          }\n        }, 4000);\n\n        fetchUserData(); // Refresh user balance\n      } else {\n        throw new Error('Tip failed');\n      }\n    } catch (error) {\n      console.error('Failed to send tip:', error);\n      throw error;\n    }\n  };\n\n  const handleFundingSuccess = (newRevenue: number, newSharePrice: number) => {\n    setFundingModalOpen(false);\n    // Update the content in the local state\n    if (content) {\n      setContent({\n        ...content,\n        current_revenue: newRevenue,\n        share_price: newSharePrice\n      });\n    }\n    fetchUserData(); // Refresh user data to show updated balance\n  };\n\n  const handleEditSuccess = (updatedContent: ContentPieceType) => {\n    setEditModalOpen(false);\n    setContent(updatedContent);\n    fetchMetrics(); // Refresh metrics to show updated engagement data\n  };\n\n  const handleDeleteConfirm = async () => {\n    if (!content) return;\n\n    try {\n      const response = await fetch(withApiBase(`/api/content/${content.id}`), {\n        method: 'DELETE',\n        credentials: 'include',\n        headers: buildAuthHeaders()\n      });\n\n      if (response.ok) {\n        // Redirect to home after successful deletion\n        navigate('/dashboard');\n      } else {\n        const errorData = await response.json();\n        alert(errorData.error || 'Failed to delete content');\n      }\n    } catch (error) {\n      console.error('Error deleting content:', error);\n      alert('Failed to delete content');\n    }\n  };\n\n  const handleSponsorContent = async (gemAmount: number, boostMultiplier: number, durationHours: number) => {\n    if (!content) return;\n\n    try {\n      const response = await fetch(withApiBase(`/api/content/${content.id}/sponsor`), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...buildAuthHeaders()\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          gems_allocated: gemAmount,\n          boost_multiplier: boostMultiplier,\n          duration_hours: durationHours\n        })\n      });\n\n      if (response.ok) {\n        setSponsorshipModalOpen(false);\n        await fetchSponsorshipData(); // Refresh sponsorship data\n        await fetchUserData(); // Refresh user balance\n        alert(`Content sponsored successfully! It will receive ${boostMultiplier}x visibility boost for ${durationHours} hours.`);\n      } else {\n        const errorData = await response.json();\n        alert(errorData.error || 'Failed to sponsor content');\n      }\n    } catch (error) {\n      console.error('Error sponsoring content:', error);\n      alert('Failed to sponsor content');\n    }\n  };\n\n  const getTierMultiplier = (tier: string) => {\n    switch (tier) {\n      case 'super': return 2.0;\n      case 'premium': return 1.5;\n      default: return 1.0;\n    }\n  };\n\n  const getPointsForAction = (action: string) => {\n    const basePoints = { like: 0.1, comment: 0.3, save: 0.5, share: 1, repost: 0.2 };\n    const base = basePoints[action as keyof typeof basePoints] || 0;\n    const multiplier = userData ? getTierMultiplier(userData.user_tier) : 1.0;\n    return Math.floor(base * multiplier * 10) / 10;\n  };\n\n  const getPlatformIcon = (platform: string) => {\n    switch (platform) {\n      case 'instagram': return '📷';\n      case 'tiktok': return '🎵';\n      case 'youtube': return '📺';\n      case 'twitter': return '🐦';\n      case 'linkedin': return '💼';\n      default: return '📱';\n    }\n  };\n\n  const getEngagementMetrics = () => {\n    if (!metrics) {\n      return {\n        likes: 0,\n        comments: 0,\n        shares: 0,\n        views: 0,\n        internal_moves: 0,\n        external_moves: 0\n      };\n    }\n    return metrics;\n  };\n\n  const formatNumber = (num: number) => {\n    if (num >= 1000000) {\n      return (num / 1000000).toFixed(1) + 'M';\n    } else if (num >= 1000) {\n      return (num / 1000).toFixed(1) + 'K';\n    }\n    return num.toString();\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full\"></div>\n      </div>\n    );\n  }\n\n  if (!content) {\n    return (\n      <div className=\"text-center py-12\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Content not found</h2>\n        <button\n          onClick={() => navigate('/dashboard')}\n          className=\"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium transition-colors\"\n        >\n          Go Back Home\n        </button>\n      </div>\n    );\n  }\n\n  const engagementMetrics = getEngagementMetrics();\n\n  return (\n    <div className=\"max-w-4xl mx-auto space-y-6\">\n      {/* Demo Alert Banner */}\n      {isDemo && (\n        <div className=\"bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-xl p-6 shadow-lg\">\n          <div className=\"flex items-center justify-center space-x-3 mb-2\">\n            <span className=\"text-2xl\">🧪</span>\n            <h2 className=\"text-xl font-bold\">DEMO CONTENT</h2>\n            <span className=\"text-2xl\">🧪</span>\n          </div>\n          <p className=\"text-center text-orange-100\">\n            This is demo content for testing purposes. No real money or value transfers will occur.\n          </p>\n        </div>\n      )}\n\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-4\">\n          <button\n            onClick={() => navigate('/dashboard')}\n            className=\"flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors\"\n          >\n            <ArrowLeft className=\"w-5 h-5 text-gray-600\" />\n          </button>\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">\n              Content Details {isDemo && <span className=\"text-orange-600\">(Demo)</span>}\n            </h1>\n            <p className=\"text-gray-600\">\n              {isDemo ? 'Demo investment simulation - no real value' : 'Investment opportunity analysis'}\n            </p>\n\n            {/* Demo/Sponsored Indicators */}\n            <div className=\"flex items-center space-x-2 mt-2\">\n              {content.is_demo && (\n                <span className=\"px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200 flex items-center space-x-1\">\n                  <Sparkles className=\"w-3 h-3\" />\n                  <span>Demo</span>\n                </span>\n              )}\n              {content.is_sponsored && (\n                <span className=\"px-3 py-1 rounded-full text-xs font-medium bg-gradient-to-r from-orange-100 to-amber-100 text-orange-800 border border-orange-200 flex items-center space-x-1\">\n                  <Tag className=\"w-3 h-3\" />\n                  <span>Sponsored</span>\n                </span>\n              )}\n\n              {/* View Count */}\n              {content.views_count !== undefined && (\n                <div className=\"flex items-center space-x-1 text-gray-500\">\n                  <Eye className=\"w-4 h-4\" />\n                  <span className=\"text-sm\">{engagementMetrics.views?.toLocaleString() || content.views_count.toLocaleString()} views</span>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Owner Actions */}\n        {isOwner && (\n          <div className=\"flex items-center space-x-2\">\n            <Tooltip content=\"Edit content\">\n              <button\n                onClick={() => setEditModalOpen(true)}\n                className=\"flex items-center space-x-2 px-4 py-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                </svg>\n                <span className=\"hidden sm:inline\">Edit</span>\n              </button>\n            </Tooltip>\n            <Tooltip content=\"Delete content\">\n              <button\n                onClick={() => setDeleteConfirmModalOpen(true)}\n                className=\"flex items-center space-x-2 px-4 py-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                </svg>\n                <span className=\"hidden sm:inline\">Delete</span>\n              </button>\n            </Tooltip>\n          </div>\n        )}\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        {/* Main Content */}\n        <div className=\"lg:col-span-2 space-y-6\">\n          {/* Content Card */}\n          <div className={`bg-white rounded-xl border overflow-hidden ${\n            isDemo ? 'border-orange-300 bg-orange-50/30' : content.is_sponsored ? 'ring-2 ring-orange-200 ring-opacity-50' : 'border-gray-200'\n          }`}>\n            {/* Demo Banner */}\n            {isDemo && (\n              <div className=\"bg-gradient-to-r from-orange-500 to-amber-500 text-white px-4 py-2 text-center\">\n                <div className=\"flex items-center justify-center space-x-2 text-sm font-medium\">\n                  <span>🧪</span>\n                  <span>DEMO CONTENT - No real value transfers</span>\n                  <span>🧪</span>\n                </div>\n              </div>\n            )}\n\n            {/* Sponsored Banner */}\n            {content.is_sponsored && !isDemo && (\n              <div className=\"bg-gradient-to-r from-orange-500 to-amber-500 text-white px-4 py-2 text-center\">\n                <div className=\"flex items-center justify-center space-x-2 text-sm font-medium\">\n                  <Tag className=\"w-4 h-4\" />\n                  <span>SPONSORED CONTENT</span>\n                  <Tag className=\"w-4 h-4\" />\n                </div>\n              </div>\n            )}\n\n            {/* Creator Header */}\n            <div className=\"p-6 pb-4\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white text-xl\">\n                  {getPlatformIcon(content.platform)}\n                </div>\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between\">\n                    <UserLink\n                      username={content.creator_name}\n                      displayName={content.creator_name || 'Creator'}\n                      avatarUrl={content.creator_avatar}\n                      className=\"font-semibold text-gray-900 hover:text-orange-600 transition-colors\"\n                      showAvatar={false}\n                    />\n                    <div className=\"flex items-center space-x-2\">\n                      {isOwner && (\n                        <span className=\"bg-blue-100 text-blue-700 px-2 py-1 rounded-full text-xs font-medium\">\n                          YOUR CONTENT\n                        </span>\n                      )}\n                      {isDemo && (\n                        <span className=\"bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs font-medium\">\n                          DEMO\n                        </span>\n                      )}\n                      <span className=\"text-sm text-gray-500 capitalize\">{content.platform}</span>\n                    </div>\n                  </div>\n                  <p className=\"text-sm text-gray-500\">2 hours ago</p>\n                </div>\n              </div>\n            </div>\n\n            {/* Content Image */}\n            {content.media_url && (\n              <div className=\"relative\">\n                <img\n                  src={content.media_url}\n                  alt={content.title}\n                  className=\"w-full h-96 object-cover\"\n                />\n              </div>\n            )}\n\n            {/* Content Details */}\n            <div className=\"p-6\">\n              <h2 className=\"text-xl font-bold text-gray-900 mb-3\">{content.title}</h2>\n\n              {content.description && (\n                <p className=\"text-gray-700 mb-6 leading-relaxed\">{content.description}</p>\n              )}\n\n              {/* Real Engagement Stats */}\n              <div className=\"grid grid-cols-4 gap-4 mb-6\">\n                <div className=\"text-center\">\n                  <div className=\"flex items-center justify-center space-x-1 text-red-500 mb-1\">\n                    <Heart className=\"w-5 h-5\" />\n                  </div>\n                  <p className=\"text-lg font-bold text-gray-900\">{formatNumber(engagementMetrics.likes)}</p>\n                  <p className=\"text-sm text-gray-500\">Likes</p>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"flex items-center justify-center space-x-1 text-blue-500 mb-1\">\n                    <MessageCircle className=\"w-5 h-5\" />\n                  </div>\n                  <p className=\"text-lg font-bold text-gray-900\">{formatNumber(engagementMetrics.comments)}</p>\n                  <p className=\"text-sm text-gray-500\">Comments</p>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"flex items-center justify-center space-x-1 text-green-500 mb-1\">\n                    <Share2 className=\"w-5 h-5\" />\n                  </div>\n                  <p className=\"text-lg font-bold text-gray-900\">{formatNumber(engagementMetrics.shares)}</p>\n                  <p className=\"text-sm text-gray-500\">Shares</p>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"flex items-center justify-center space-x-1 text-purple-500 mb-1\">\n                    <Eye className=\"w-5 h-5\" />\n                  </div>\n                  <p className=\"text-lg font-bold text-gray-900\">{formatNumber(engagementMetrics.views)}</p>\n                  <p className=\"text-sm text-gray-500\">Views</p>\n                </div>\n              </div>\n\n              {/* Move Activity Stats */}\n              <div className=\"bg-blue-50 rounded-lg p-4 mb-6\">\n                <h4 className=\"font-medium text-blue-900 mb-3\">Platform Activity</h4>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"text-center\">\n                    <p className=\"text-lg font-bold text-blue-900\">{engagementMetrics.internal_moves || 0}</p>\n                    <p className=\"text-xs text-blue-700\">Internal Moves</p>\n                  </div>\n                  <div className=\"text-center\">\n                    <p className=\"text-lg font-bold text-purple-900\">{engagementMetrics.external_moves || 0}</p>\n                    <p className=\"text-xs text-purple-700\">External Moves</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Enhanced Engagement Shares Display */}\n              {content.engagement_shares_total > 0 && (\n                <div className=\"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6 mb-6\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <div className=\"flex items-center space-x-3\">\n                      <div className=\"w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center\">\n                        <Coins className=\"w-6 h-6 text-white\" />\n                      </div>\n                      <div>\n                        <h4 className=\"font-semibold text-green-900\">Free Engagement Shares</h4>\n                        <p className=\"text-sm text-green-700\">Earn by engaging with this content!</p>\n                      </div>\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"text-3xl font-bold text-green-600\">\n                        {content.engagement_shares_remaining}\n                      </div>\n                      <div className=\"text-sm text-green-500\">remaining</div>\n                    </div>\n                  </div>\n\n                  {/* Progress Bar */}\n                  <div className=\"mb-4\">\n                    <div className=\"flex justify-between items-center mb-2\">\n                      <span className=\"text-sm font-medium text-green-700\">Progress</span>\n                      <span className=\"text-sm font-semibold text-green-600\">\n                        {content.engagement_shares_total - content.engagement_shares_remaining} / {content.engagement_shares_total}\n                      </span>\n                    </div>\n                    <div className=\"w-full bg-green-200 rounded-full h-3 overflow-hidden\">\n                      <div\n                        className=\"bg-gradient-to-r from-green-500 to-emerald-500 h-3 rounded-full transition-all duration-500\"\n                        style={{\n                          width: `${((content.engagement_shares_total - content.engagement_shares_remaining) / content.engagement_shares_total) * 100}%`\n                        }}\n                      ></div>\n                    </div>\n                  </div>\n\n                  {/* Engagement Tips */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n                    <div className=\"flex items-center space-x-2 text-sm text-green-700\">\n                      <Heart className=\"w-4 h-4\" />\n                      <span>Like for 1 share</span>\n                    </div>\n                    <div className=\"flex items-center space-x-2 text-sm text-green-700\">\n                      <MessageCircle className=\"w-4 h-4\" />\n                      <span>Comment for 3 shares</span>\n                    </div>\n                    <div className=\"flex items-center space-x-2 text-sm text-green-700\">\n                      <Share2 className=\"w-4 h-4\" />\n                      <span>Share for 5 shares</span>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* External Move Button - Most Prominent */}\n              <div className=\"mb-6\">\n                <Tooltip content=\"Perform actions on the original platform for 10x points!\" position=\"top\">\n                  <button\n                    onClick={() => setExternalMoveModalOpen(true)}\n                    className=\"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-6 py-4 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center space-x-3 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\"\n                  >\n                    <span className=\"text-xl\">🚀</span>\n                    <span>Perform External Move</span>\n                    <span className=\"bg-white/20 px-3 py-1 rounded-full text-sm font-bold\">10x Points!</span>\n                  </button>\n                </Tooltip>\n              </div>\n\n              {/* Quick Internal Actions */}\n              <div className=\"bg-gray-50 rounded-xl p-4 mb-6\">\n                <div className=\"flex items-center justify-between mb-3\">\n                  <span className=\"text-sm font-medium text-gray-600 uppercase tracking-wide\">Quick Actions</span>\n                  <span className=\"text-xs text-gray-400\">Reduced points</span>\n                </div>\n                <div className=\"grid grid-cols-4 gap-2\">\n                  {[\n                    {\n                      action: 'like',\n                      icon: Heart,\n                      color: userStatus.has_liked ? 'text-red-500 bg-red-50' : 'hover:text-red-500',\n                      disabled: userStatus.has_liked\n                    },\n                    { action: 'comment', icon: MessageCircle, color: 'hover:text-blue-500', disabled: false },\n                    { action: 'repost', icon: Repeat, color: 'hover:text-purple-500', disabled: false },\n                    {\n                      action: 'save',\n                      icon: Bookmark,\n                      color: userStatus.has_saved ? 'text-yellow-500 bg-yellow-50' : 'hover:text-yellow-500',\n                      disabled: userStatus.has_saved\n                    }\n                  ].map(({ action, icon: Icon, color, disabled }) => (\n                    <Tooltip\n                      key={action}\n                      content={\n                        disabled && action === 'like' ? 'Already liked!' :\n                        disabled && action === 'save' ? 'Already saved!' :\n                        `+${getPointsForAction(action)} points`\n                      }\n                      compact={true}\n                    >\n                      <button\n                        onClick={() => handleSocialAction(action)}\n                        disabled={disabled}\n                        className={`flex flex-col items-center p-3 rounded-lg transition-colors hover:bg-white ${color} ${\n                          disabled ? 'cursor-not-allowed opacity-75' : ''\n                        }`}\n                      >\n                        <Icon className={`w-5 h-5 mb-1 ${\n                          userStatus.has_liked && action === 'like' ? 'fill-current' : ''\n                        } ${\n                          userStatus.has_saved && action === 'save' ? 'fill-current' : ''\n                        }`} />\n                        <span className=\"text-xs text-gray-600 capitalize\">{action}</span>\n                        <span className=\"text-xs text-green-600 font-medium\">\n                          {disabled ? (action === 'like' ? '✓' : action === 'save' ? '✓' : `+${getPointsForAction(action)}`) : `+${getPointsForAction(action)}`}\n                        </span>\n                      </button>\n                    </Tooltip>\n                  ))}\n                </div>\n              </div>\n\n              {/* Platform Link */}\n              <div className=\"pt-4 border-t border-gray-100\">\n                <a\n                  href={content.platform_url}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"inline-flex items-center space-x-2 text-purple-600 hover:text-purple-700 transition-colors\"\n                >\n                  <ExternalLink className=\"w-4 h-4\" />\n                  <span>View on {content.platform}</span>\n                </a>\n              </div>\n            </div>\n          </div>\n\n          {/* Performance Analytics */}\n          <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Performance Analytics</h3>\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n              <div className=\"bg-gradient-to-br from-green-50 to-emerald-50 p-4 rounded-lg\">\n                <div className=\"flex items-center space-x-2 mb-2\">\n                  <TrendingUp className=\"w-5 h-5 text-green-600\" />\n                  <span className=\"text-sm font-medium text-green-800\">Engagement Rate</span>\n                </div>\n                <p className=\"text-xl font-bold text-green-900\">8.7%</p>\n                <p className=\"text-xs text-green-600\">+2.3% from avg</p>\n              </div>\n              <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-lg\">\n                <div className=\"flex items-center space-x-2 mb-2\">\n                  <Calendar className=\"w-5 h-5 text-blue-600\" />\n                  <span className=\"text-sm font-medium text-blue-800\">Growth Rate</span>\n                </div>\n                <p className=\"text-xl font-bold text-blue-900\">15.2%</p>\n                <p className=\"text-xs text-blue-600\">Last 24 hours</p>\n              </div>\n              <div className=\"bg-gradient-to-br from-purple-50 to-violet-50 p-4 rounded-lg\">\n                <div className=\"flex items-center space-x-2 mb-2\">\n                  <DollarSign className=\"w-5 h-5 text-purple-600\" />\n                  <span className=\"text-sm font-medium text-purple-800\">Revenue/View</span>\n                </div>\n                <p className=\"text-xl font-bold text-purple-900\">$0.0032</p>\n                <p className=\"text-xs text-purple-600\">Industry avg: $0.0028</p>\n              </div>\n              <div className=\"bg-gradient-to-br from-orange-50 to-red-50 p-4 rounded-lg\">\n                <div className=\"flex items-center space-x-2 mb-2\">\n                  <Users className=\"w-5 h-5 text-orange-600\" />\n                  <span className=\"text-sm font-medium text-orange-800\">Reach</span>\n                </div>\n                <p className=\"text-xl font-bold text-orange-900\">1.2M</p>\n                <p className=\"text-xs text-orange-600\">Unique users</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Comments Section */}\n          <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n            <CommentSystem\n              contentId={content.id}\n              currentUser={userData}\n              isOwner={isOwner || false}\n            />\n          </div>\n        </div>\n\n        {/* Investment Sidebar */}\n        <div className=\"space-y-6\">\n          {/* Enhanced Sponsorship Status */}\n          {sponsorshipData && (\n            <div className=\"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-4\">\n              <div className=\"flex items-center space-x-2 mb-3\">\n                <svg className=\"w-5 h-5 text-purple-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n                </svg>\n                <span className=\"font-semibold text-purple-900\">Sponsored Content</span>\n                {sponsorshipData.sponsor_count > 1 && (\n                  <span className=\"bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-xs font-medium\">\n                    {sponsorshipData.sponsor_count} Sponsors\n                  </span>\n                )}\n              </div>\n              <p className=\"text-sm text-purple-700 mb-3\">\n                This content receives {sponsorshipData.total_boost_multiplier || sponsorshipData.boost_multiplier}x visibility boost\n                {sponsorshipData.sponsor_count > 1 && ' from multiple sponsors'}\n              </p>\n\n              {/* Sponsor Information */}\n              <div className=\"space-y-2\">\n                {sponsorshipData.sponsor_names && sponsorshipData.sponsor_names.length > 0 ? (\n                  <div className=\"text-sm text-purple-700\">\n                    <span className=\"font-medium\">Sponsored by:</span>\n                    <div className=\"mt-1\">\n                      {sponsorshipData.sponsor_names.slice(0, 3).map((name: string, index: number) => (\n                        <span key={index} className=\"inline-block bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-xs font-medium mr-2 mb-1\">\n                          {name}\n                        </span>\n                      ))}\n                      {sponsorshipData.sponsor_names.length > 3 && (\n                        <span className=\"text-xs text-purple-600\">\n                          +{sponsorshipData.sponsor_names.length - 3} more\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"text-sm text-purple-700\">\n                    <span className=\"font-medium\">Primary Sponsor:</span> {sponsorshipData.primary_sponsor || sponsorshipData.advertiser_name || 'Advertiser'}\n                  </div>\n                )}\n\n                <div className=\"flex items-center justify-between text-xs text-purple-600 pt-2 border-t border-purple-200\">\n                  <span>{sponsorshipData.total_gems_allocated || sponsorshipData.gems_allocated} gems invested</span>\n                  <span>{sponsorshipData.sponsor_count || 1} active sponsorship{(sponsorshipData.sponsor_count || 1) !== 1 ? 's' : ''}</span>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Enhanced Advertiser Sponsorship Controls */}\n          {userData?.user_type === 'advertiser' && !isOwner && (\n            <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-4\">\n              <div className=\"flex items-center space-x-2 mb-3\">\n                <Target className=\"w-5 h-5 text-blue-600\" />\n                <span className=\"font-semibold text-blue-900\">\n                  {sponsorshipData ? 'Boost Further' : 'Sponsor This Content'}\n                </span>\n              </div>\n              <p className=\"text-sm text-blue-700 mb-3\">\n                {sponsorshipData\n                  ? `Add your sponsorship to boost visibility even more! Multiple sponsors can collaborate to maximize reach.`\n                  : `Boost this content's visibility and reach more users. Sponsored content appears higher in feeds and gets priority placement.`\n                }\n              </p>\n              {sponsorshipData && (\n                <div className=\"bg-blue-100 rounded-lg p-3 mb-3\">\n                  <div className=\"text-xs text-blue-700\">\n                    <div className=\"flex justify-between items-center\">\n                      <span>Current boost:</span>\n                      <span className=\"font-semibold\">{sponsorshipData.total_boost_multiplier || sponsorshipData.boost_multiplier}x</span>\n                    </div>\n                    <div className=\"flex justify-between items-center\">\n                      <span>Active sponsors:</span>\n                      <span className=\"font-semibold\">{sponsorshipData.sponsor_count || 1}</span>\n                    </div>\n                  </div>\n                </div>\n              )}\n              <button\n                onClick={() => setSponsorshipModalOpen(true)}\n                className=\"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-4 py-3 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n                </svg>\n                <span>{sponsorshipData ? 'Add Your Sponsorship' : 'Sponsor This Content'}</span>\n              </button>\n            </div>\n          )}\n\n          {/* Investment Card */}\n          <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Investment Details</h3>\n\n            <div className=\"space-y-4 mb-6\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-gray-600\">Share Price</span>\n                <span className=\"text-xl font-bold text-green-600\">${(content.share_price || 0).toFixed(4)}</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-gray-600\">Available Shares</span>\n                <span className=\"font-semibold text-gray-900\">{content.available_shares || 0}</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-gray-600\">Total Shares</span>\n                <span className=\"font-semibold text-gray-900\">{content.total_shares || 0}</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-gray-600\">Engagement Shares</span>\n                <span className=\"font-semibold text-orange-600\">{content.engagement_shares_remaining || 0}/{content.engagement_shares_total || 0}</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-gray-600\">Current Revenue</span>\n                <span className=\"font-semibold text-purple-600\">${(content.current_revenue || 0).toFixed(2)}</span>\n              </div>\n            </div>\n\n            <div className=\"space-y-3\">\n              <Tooltip content={isDemo ? \"Demo content - no real value transfers\" : \"Tip creator & boost content value\"}>\n                <button\n                  onClick={() => setTipModalOpen(true)}\n                  className={`w-full px-4 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2 ${\n                    isDemo\n                      ? 'bg-orange-100 hover:bg-orange-200 text-orange-700'\n                      : 'bg-purple-100 hover:bg-purple-200 text-purple-700'\n                  }`}\n                >\n                  <Gift className=\"w-4 h-4\" />\n                  <span>{isDemo ? 'Demo Tip Creator' : 'Tip Creator'}</span>\n                </button>\n              </Tooltip>\n\n              <button\n                onClick={() => setBuyModalOpen(true)}\n                disabled={content.available_shares === 0}\n                className={`w-full px-6 py-3 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-white ${\n                  isDemo\n                    ? 'bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600'\n                    : 'bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600'\n                }`}\n              >\n                {content.available_shares === 0 ? 'Sold Out' : isDemo ? 'Demo Shares' : 'Buy Shares'}\n              </button>\n\n              <button\n                onClick={() => navigate('/invest/social-forecasts')}\n                className=\"w-full bg-blue-100 hover:bg-blue-200 text-blue-700 px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2\"\n              >\n                <Target className=\"w-4 h-4\" />\n                <span>Make Performance Forecast</span>\n              </button>\n\n              {isDemo && (\n                <div className=\"bg-orange-100 border border-orange-200 rounded-lg p-3\">\n                  <p className=\"text-xs text-orange-700 text-center\">\n                    💡 This is demo content. No real purchases or value transfers will occur.\n                  </p>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Market Stats */}\n          <div className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Market Insights</h3>\n            <div className=\"space-y-3\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-600\">24h Volume</span>\n                <span className=\"font-semibold text-gray-900\">$1,247</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-600\">Price Change</span>\n                <span className=\"font-semibold text-green-600\">+7.2%</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-600\">Investors</span>\n                <span className=\"font-semibold text-gray-900\">23</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-600\">ROI Potential</span>\n                <span className=\"font-semibold text-purple-600\">High</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Modals */}\n      {content && (\n        <>\n          <BuySharesModal\n            content={content}\n            wallet={wallets?.find(w => w.currency_type === 'USD')}\n            isOpen={buyModalOpen}\n            onClose={() => setBuyModalOpen(false)}\n            onPurchase={handleBuyShares}\n          />\n\n          <ShareContentModal\n            user={userData}\n            contentId={content.id}\n            contentTitle={content.title}\n            isOpen={shareModalOpen}\n            onClose={() => setShareModalOpen(false)}\n            onSuccess={() => {\n              fetchUserData();\n              fetchMetrics();\n            }}\n          />\n\n          <ExternalMoveModal\n            user={userData}\n            contentId={content.id}\n            contentTitle={content.title}\n            contentPlatform={content.platform}\n            contentUrl={content.platform_url}\n            isOpen={externalMoveModalOpen}\n            onClose={() => setExternalMoveModalOpen(false)}\n            onSuccess={() => {\n              fetchUserData();\n              fetchMetrics();\n            }}\n          />\n\n          <ContentFundingModal\n            isOpen={fundingModalOpen}\n            onClose={() => setFundingModalOpen(false)}\n            contentId={content.id}\n            contentTitle={content.title}\n            isOwner={false}\n            currentRevenue={content.current_revenue || 0}\n            sharePrice={content.share_price || 0}\n            totalShares={content.total_shares || 0}\n            onSuccess={handleFundingSuccess}\n          />\n\n          <EditContentModal\n            isOpen={editModalOpen}\n            onClose={() => setEditModalOpen(false)}\n            onSuccess={handleEditSuccess}\n            content={content}\n          />\n\n          <ConfirmationModal\n            isOpen={deleteConfirmModalOpen}\n            onClose={() => setDeleteConfirmModalOpen(false)}\n            onConfirm={handleDeleteConfirm}\n            title=\"Delete Content\"\n            message={`Are you sure you want to delete \"${content.title}\"? This action cannot be undone and will remove all associated data.`}\n            confirmText=\"Delete\"\n            cancelText=\"Cancel\"\n            type=\"danger\"\n          />\n\n          {/* Enhanced Sponsorship Modal */}\n          <SponsorshipModal\n            isOpen={sponsorshipModalOpen}\n            onClose={() => setSponsorshipModalOpen(false)}\n            onSponsor={handleSponsorContent}\n            contentTitle={content.title}\n            userGems={userData?.gems_balance || 0}\n          />\n\n          {/* Tip Modal */}\n          <TipModal\n            content={content}\n            isOpen={tipModalOpen}\n            onClose={() => setTipModalOpen(false)}\n            onTip={handleTip}\n          />\n        </>\n      )}\n    </div>\n  );\n}\n\n// Export ContentDetailPage as an alias for ContentDetail\nexport const ContentDetailPage = ContentDetail;\n","import { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { ArrowLeft, TrendingUp, DollarSign, Clock, ArrowUpRight, ArrowDownLeft } from 'lucide-react';\nimport { ContentHoldingDetail } from '@/shared/types';\nimport { getHoldingDetail } from '@/react-app/services/portfolioService';\n\nexport default function HoldingDetailPage() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [detail, setDetail] = useState<ContentHoldingDetail | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!id) return;\n    const load = async () => {\n      setLoading(true);\n      const data = await getHoldingDetail(id);\n      setDetail(data);\n      setLoading(false);\n    };\n    load();\n  }, [id]);\n\n  if (!id) {\n    return (\n      <div className=\"p-6\">\n        <button onClick={() => navigate(-1)} className=\"inline-flex items-center text-sm text-gray-500 hover:text-gray-700\">\n          <ArrowLeft className=\"w-4 h-4 mr-2\" /> Back\n        </button>\n        <p className=\"mt-6 text-gray-600\">Holding not found.</p>\n      </div>\n    );\n  }\n\n  if (loading || !detail) {\n    return (\n      <div className=\"p-6\">\n        <button onClick={() => navigate(-1)} className=\"inline-flex items-center text-sm text-gray-500 hover:text-gray-700\">\n          <ArrowLeft className=\"w-4 h-4 mr-2\" /> Back\n        </button>\n        <div className=\"mt-10 flex justify-center\">\n          <div className=\"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full\" />\n        </div>\n      </div>\n    );\n  }\n\n  const { holding, content, performance, marketplace } = detail;\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <button onClick={() => navigate(-1)} className=\"inline-flex items-center text-sm text-gray-500 hover:text-gray-700\">\n          <ArrowLeft className=\"w-4 h-4 mr-2\" /> Back to portfolio\n        </button>\n      </div>\n\n      <div className=\"bg-white rounded-2xl border border-gray-200 shadow-sm p-6\">\n        <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-6\">\n          <div className=\"flex items-center space-x-4\">\n            <img src={holding.content_thumbnail} alt={holding.content_title} className=\"w-20 h-20 rounded-xl object-cover\" />\n            <div>\n              <h1 className=\"text-2xl font-semibold text-gray-900\">{holding.content_title}</h1>\n              <p className=\"text-sm text-gray-500\">\n                {holding.creator_name} • {holding.platform.toUpperCase()}\n              </p>\n              <p className=\"text-sm text-gray-500 mt-1\">{content.description}</p>\n            </div>\n          </div>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"text-right\">\n              <p className=\"text-xs text-gray-500\">Shares Owned</p>\n              <p className=\"text-lg font-semibold text-gray-900\">{holding.owned_shares}</p>\n            </div>\n            <div className=\"text-right\">\n              <p className=\"text-xs text-gray-500\">Market Value</p>\n              <p className=\"text-lg font-semibold text-gray-900\">${holding.market_value.toFixed(2)}</p>\n            </div>\n            <div className=\"text-right\">\n              <p className=\"text-xs text-gray-500\">Unrealized Gain</p>\n              <p className={`text-lg font-semibold ${holding.unrealized_gain >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                {holding.unrealized_gain >= 0 ? '+' : ''}${holding.unrealized_gain.toFixed(2)}\n              </p>\n            </div>\n            <div className=\"text-right\">\n              <p className=\"text-xs text-gray-500\">Available to sell</p>\n              <p className=\"text-lg font-semibold text-gray-900\">{holding.available_to_sell}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        <div className=\"lg:col-span-2 bg-white border border-gray-200 rounded-2xl p-6 shadow-sm\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold text-gray-900\">Performance history</h2>\n            <span className=\"inline-flex items-center text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700\">\n              <TrendingUp className=\"w-3 h-3 mr-1\" /> 30 day trend\n            </span>\n          </div>\n          <div className=\"space-y-2\">\n            {performance.history.map((entry) => (\n              <div key={entry.date} className=\"flex items-center justify-between text-sm text-gray-600\">\n                <span>{entry.date}</span>\n                <span>${entry.price.toFixed(2)} • {entry.volume} shares traded</span>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Activity</h2>\n          <div className=\"space-y-3\">\n            {performance.ledger.map((item) => (\n              <div key={item.id} className=\"flex items-center justify-between text-sm\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-9 h-9 bg-gray-100 rounded-full flex items-center justify-center\">\n                    {item.type === 'purchase' ? (\n                      <ArrowDownLeft className=\"w-4 h-4 text-green-600\" />\n                    ) : (\n                      <DollarSign className=\"w-4 h-4 text-purple-600\" />\n                    )}\n                  </div>\n                  <div>\n                    <p className=\"font-medium text-gray-900 capitalize\">{item.type}</p>\n                    <p className=\"text-xs text-gray-500\">{new Date(item.timestamp).toLocaleString()}</p>\n                  </div>\n                </div>\n                <div className=\"text-right text-sm text-gray-700\">\n                  {item.quantity ? `${item.quantity} shares @ $${item.price.toFixed(2)}` : `$${item.price.toFixed(2)}`}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <div className=\"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Marketplace listings</h2>\n          <div className=\"space-y-3\">\n            {marketplace.listings.length ? (\n              marketplace.listings.map((listing) => (\n                <div key={listing.id} className=\"flex items-center justify-between bg-gray-50 rounded-lg px-4 py-3\">\n                  <div>\n                    <p className=\"text-sm font-medium text-gray-900\">{listing.quantity} shares</p>\n                    <p className=\"text-xs text-gray-500 capitalize\">Status: {listing.status}</p>\n                  </div>\n                  <div className=\"text-sm font-semibold text-gray-900\">${listing.ask_price.toFixed(2)}</div>\n                </div>\n              ))\n            ) : (\n              <p className=\"text-sm text-gray-500\">No listing history yet.</p>\n            )}\n          </div>\n        </div>\n\n        <div className=\"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Recent offers</h2>\n          <div className=\"space-y-3\">\n            {marketplace.offers.length ? (\n              marketplace.offers.map((offer) => (\n                <div key={offer.id} className=\"bg-gray-50 rounded-lg px-4 py-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm font-medium text-gray-900\">{offer.quantity} shares @ ${offer.bid_price.toFixed(2)}</p>\n                      <p className=\"text-xs text-gray-500\">{offer.buyer_name}</p>\n                    </div>\n                    <span className=\"text-xs font-semibold text-orange-600\">{offer.status}</span>\n                  </div>\n                  {offer.message && <p className=\"text-xs text-gray-500 mt-2\">“{offer.message}”</p>}\n                </div>\n              ))\n            ) : (\n              <p className=\"text-sm text-gray-500\">No offers yet.</p>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm\">\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Content performance overview</h2>\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n          <div className=\"bg-orange-50 rounded-lg p-4\">\n            <p className=\"text-xs uppercase tracking-wide text-orange-600\">Total views</p>\n            <p className=\"text-xl font-semibold text-orange-900\">{content.total_views.toLocaleString()}</p>\n          </div>\n          <div className=\"bg-blue-50 rounded-lg p-4\">\n            <p className=\"text-xs uppercase tracking-wide text-blue-600\">Engagement rate</p>\n            <p className=\"text-xl font-semibold text-blue-900\">{content.engagement_rate}%</p>\n          </div>\n          <div className=\"bg-purple-50 rounded-lg p-4\">\n            <p className=\"text-xs uppercase tracking-wide text-purple-600\">Earnings to date</p>\n            <p className=\"text-xl font-semibold text-purple-900\">${content.earnings_to_date.toFixed(2)}</p>\n          </div>\n          <div className=\"bg-green-50 rounded-lg p-4\">\n            <p className=\"text-xs uppercase tracking-wide text-green-600\">Last trade</p>\n            <p className=\"text-xl font-semibold text-green-900\">{holding.last_trade_at ? new Date(holding.last_trade_at).toLocaleDateString() : 'N/A'}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { ArrowLeft, LineChart, Activity, Users } from 'lucide-react';\nimport { PredictionDetail } from '@/shared/types';\nimport { getPredictionDetail } from '@/react-app/services/portfolioService';\n\nexport default function PredictionDetailPage() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [detail, setDetail] = useState<PredictionDetail | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!id) return;\n    const load = async () => {\n      setLoading(true);\n      const data = await getPredictionDetail(id);\n      setDetail(data);\n      setLoading(false);\n    };\n    load();\n  }, [id]);\n\n  if (!id) {\n    return (\n      <div className=\"p-6\">\n        <button onClick={() => navigate(-1)} className=\"inline-flex items-center text-sm text-gray-500 hover:text-gray-700\">\n          <ArrowLeft className=\"w-4 h-4 mr-2\" /> Back\n        </button>\n        <p className=\"mt-6 text-gray-600\">Prediction not found.</p>\n      </div>\n    );\n  }\n\n  if (loading || !detail) {\n    return (\n      <div className=\"p-6\">\n        <button onClick={() => navigate(-1)} className=\"inline-flex items-center text-sm text-gray-500 hover:text-gray-700\">\n          <ArrowLeft className=\"w-4 h-4 mr-2\" /> Back to predictions\n        </button>\n        <div className=\"mt-10 flex justify-center\">\n          <div className=\"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full\" />\n        </div>\n      </div>\n    );\n  }\n\n  const { prediction, forecast, trajectory, participants } = detail;\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <button onClick={() => navigate(-1)} className=\"inline-flex items-center text-sm text-gray-500 hover:text-gray-700\">\n          <ArrowLeft className=\"w-4 h-4 mr-2\" /> Back\n        </button>\n      </div>\n\n      <div className=\"bg-white rounded-2xl border border-gray-200 shadow-sm p-6\">\n        <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-6\">\n          <div>\n            <h1 className=\"text-2xl font-semibold text-gray-900\">{prediction.content_title}</h1>\n            <p className=\"text-sm text-gray-500\">\n              {prediction.platform.toUpperCase()} • Placed {new Date(prediction.created_at).toLocaleDateString()}\n            </p>\n            <div className=\"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4\">\n              <div>\n                <p className=\"text-xs text-gray-500 uppercase tracking-wide\">Side</p>\n                <p className=\"text-base font-semibold text-gray-900 capitalize\">{prediction.prediction_side}</p>\n              </div>\n              <div>\n                <p className=\"text-xs text-gray-500 uppercase tracking-wide\">Stake</p>\n                <p className=\"text-base font-semibold text-gray-900\">${prediction.amount.toFixed(2)}</p>\n              </div>\n              <div>\n                <p className=\"text-xs text-gray-500 uppercase tracking-wide\">Potential payout</p>\n                <p className=\"text-base font-semibold text-gray-900\">${prediction.potential_payout.toFixed(2)}</p>\n              </div>\n              <div>\n                <p className=\"text-xs text-gray-500 uppercase tracking-wide\">Status</p>\n                <p className=\"text-base font-semibold text-orange-600 capitalize\">{prediction.status}</p>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-orange-50 rounded-2xl p-4 border border-orange-200\">\n            <p className=\"text-xs uppercase tracking-wide text-orange-600\">Forecast target</p>\n            <p className=\"text-2xl font-semibold text-orange-900\">{forecast.metric} • {forecast.target}</p>\n            <p className=\"text-sm text-orange-700 mt-2\">Odds {forecast.odds.toFixed(2)}x</p>\n            <p className=\"text-xs text-orange-700 mt-1\">\n              Expires {new Date(forecast.expires_at).toLocaleString()}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        <div className=\"lg:col-span-2 bg-white border border-gray-200 rounded-2xl p-6 shadow-sm\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold text-gray-900\">Trajectory</h2>\n            <span className=\"inline-flex items-center text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700\">\n              <LineChart className=\"w-3 h-3 mr-1\" /> Trend overview\n            </span>\n          </div>\n          <div className=\"space-y-2\">\n            {trajectory.map((entry) => (\n              <div key={entry.date} className=\"flex items-center justify-between text-sm text-gray-600\">\n                <span>{entry.date}</span>\n                <span>\n                  Actual {entry.actual.toLocaleString()} • Expected {entry.expected.toLocaleString()}\n                </span>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Projection notes</h2>\n          <p className=\"text-sm text-gray-600 leading-relaxed\">{forecast.creator_projection}</p>\n        </div>\n      </div>\n\n      <div className=\"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center space-x-2\">\n            <Users className=\"w-4 h-4 text-purple-600\" />\n            <h2 className=\"text-lg font-semibold text-gray-900\">Participants</h2>\n          </div>\n          <span className=\"px-3 py-1 rounded-full text-xs font-semibold bg-purple-100 text-purple-700\">\n            {participants.length} active\n          </span>\n        </div>\n        <div className=\"space-y-3\">\n          {participants.map((participant, index) => (\n            <div key={`${participant.username}-${index}`} className=\"flex items-center justify-between bg-gray-50 rounded-lg px-4 py-3\">\n              <div>\n                <p className=\"font-medium text-gray-900\">{participant.username}</p>\n                <p className=\"text-xs text-gray-500 capitalize\">{participant.side}</p>\n              </div>\n              <div className=\"text-right text-sm text-gray-600\">\n                <p>${participant.amount.toFixed(2)}</p>\n                <p className=\"text-xs text-gray-500 capitalize\">{participant.status}</p>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { X, Save, Loader2 } from 'lucide-react';\nimport { DropType, CreateDropRequestSchema, DropTypeSchema, DropDifficultySchema } from '@/shared/types';\n\ninterface EditDropModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: (updatedDrop: DropType) => void;\n  drop: DropType;\n}\n\nexport default function EditDropModal({\n  isOpen,\n  onClose,\n  onSuccess,\n  drop\n}: EditDropModalProps) {\n  const [formData, setFormData] = useState({\n    title: drop.title,\n    description: drop.description,\n    drop_type: drop.drop_type,\n    difficulty: drop.difficulty,\n    key_cost: drop.key_cost,\n    gem_reward_base: drop.gem_reward_base,\n    gem_pool_total: drop.gem_pool_total,\n    follower_threshold: drop.follower_threshold,\n    time_commitment: drop.time_commitment || '',\n    requirements: drop.requirements || '',\n    deliverables: drop.deliverables || '',\n    deadline_at: drop.deadline_at ? drop.deadline_at.split('T')[0] : '',\n    max_participants: drop.max_participants || undefined,\n    platform: drop.platform || '',\n    content_url: drop.content_url || '',\n    move_cost_points: drop.move_cost_points,\n    key_reward_amount: drop.key_reward_amount,\n    is_proof_drop: drop.is_proof_drop,\n    is_paid_drop: drop.is_paid_drop,\n    reward_logic: '',\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (drop) {\n      setFormData({\n        title: drop.title,\n        description: drop.description,\n        drop_type: drop.drop_type,\n        difficulty: drop.difficulty,\n        key_cost: drop.key_cost,\n        gem_reward_base: drop.gem_reward_base,\n        gem_pool_total: drop.gem_pool_total,\n        follower_threshold: drop.follower_threshold,\n        time_commitment: drop.time_commitment || '',\n        requirements: drop.requirements || '',\n        deliverables: drop.deliverables || '',\n        deadline_at: drop.deadline_at ? drop.deadline_at.split('T')[0] : '',\n        max_participants: drop.max_participants || undefined,\n        platform: drop.platform || '',\n        content_url: drop.content_url || '',\n        move_cost_points: drop.move_cost_points,\n        key_reward_amount: drop.key_reward_amount,\n        is_proof_drop: drop.is_proof_drop,\n        is_paid_drop: drop.is_paid_drop,\n        reward_logic: '',\n      });\n    }\n  }, [drop]);\n\n  if (!isOpen) return null;\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Prepare the data for validation\n      const submitData = {\n        ...formData,\n        deadline_at: formData.deadline_at ? new Date(formData.deadline_at).toISOString() : undefined,\n      };\n\n      // Validate form data\n      const validationResult = CreateDropRequestSchema.safeParse(submitData);\n      if (!validationResult.success) {\n        setError('Please check all required fields');\n        return;\n      }\n\n      const response = await fetch(`/api/drops/${drop.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify(submitData),\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        onSuccess(result.drop);\n        onClose();\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Failed to update drop');\n      }\n    } catch (error) {\n      console.error('Error updating drop:', error);\n      setError('Failed to update drop');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  \n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <h2 className=\"text-xl font-bold text-gray-900\">Edit Drop</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n            disabled={loading}\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        {/* Form */}\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg\">\n              {error}\n            </div>\n          )}\n\n          {/* Drop Type Info (Read-only) */}\n          <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Drop Type</h3>\n            <div className=\"flex items-center space-x-2\">\n              {drop.is_proof_drop && (\n                <span className=\"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium\">\n                  Proof Drop - Free to apply\n                </span>\n              )}\n              {drop.is_paid_drop && (\n                <span className=\"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium\">\n                  Paid Drop - Costs keys, rewards gems\n                </span>\n              )}\n              {!drop.is_proof_drop && !drop.is_paid_drop && (\n                <span className=\"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-medium\">\n                  Move Drop - Social actions for keys\n                </span>\n              )}\n            </div>\n            <p className=\"text-sm text-gray-600 mt-2\">Drop type cannot be changed after creation</p>\n          </div>\n\n          {/* Basic Information */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"md:col-span-2\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Title *\n              </label>\n              <input\n                type=\"text\"\n                value={formData.title}\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n                placeholder=\"Enter drop title\"\n                required\n                disabled={loading}\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Drop Category *\n              </label>\n              <select\n                value={formData.drop_type}\n                onChange={(e) => setFormData({ ...formData, drop_type: e.target.value })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n                required\n                disabled={loading}\n              >\n                {DropTypeSchema.options.map(dropType => (\n                  <option key={dropType} value={dropType}>\n                    {dropType.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Difficulty *\n              </label>\n              <select\n                value={formData.difficulty}\n                onChange={(e) => setFormData({ ...formData, difficulty: e.target.value })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n                required\n                disabled={loading}\n              >\n                {DropDifficultySchema.options.map(difficulty => (\n                  <option key={difficulty} value={difficulty} className=\"capitalize\">\n                    {difficulty}\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n\n          {/* Description */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Description *\n            </label>\n            <textarea\n              value={formData.description}\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n              rows={4}\n              className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n              placeholder=\"Describe what needs to be done...\"\n              required\n              disabled={loading}\n            />\n          </div>\n\n          {/* Drop-specific fields */}\n          {drop.is_paid_drop && (\n            <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-4\">\n              <h3 className=\"text-lg font-semibold text-purple-900 mb-4\">Paid Drop Settings</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-purple-700 mb-2\">Key Cost</label>\n                  <input\n                    type=\"number\"\n                    min=\"1\"\n                    value={formData.key_cost}\n                    onChange={(e) => setFormData({ ...formData, key_cost: Number(e.target.value) })}\n                    className=\"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                    disabled={loading}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-purple-700 mb-2\">Gem Reward</label>\n                  <input\n                    type=\"number\"\n                    min=\"1\"\n                    value={formData.gem_reward_base}\n                    onChange={(e) => setFormData({ ...formData, gem_reward_base: Number(e.target.value) })}\n                    className=\"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                    disabled={loading}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-purple-700 mb-2\">Total Gem Pool</label>\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    value={formData.gem_pool_total}\n                    onChange={(e) => setFormData({ ...formData, gem_pool_total: Number(e.target.value) })}\n                    className=\"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                    disabled={loading}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n\n          {!drop.is_proof_drop && !drop.is_paid_drop && (\n            <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-4\">\n              <h3 className=\"text-lg font-semibold text-orange-900 mb-4\">Move Drop Settings</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-orange-700 mb-2\">Points Cost</label>\n                  <input\n                    type=\"number\"\n                    min=\"1\"\n                    value={formData.move_cost_points}\n                    onChange={(e) => setFormData({ ...formData, move_cost_points: Number(e.target.value) })}\n                    className=\"w-full px-4 py-2 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                    disabled={loading}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-orange-700 mb-2\">Keys Reward</label>\n                  <input\n                    type=\"number\"\n                    min=\"1\"\n                    value={formData.key_reward_amount}\n                    onChange={(e) => setFormData({ ...formData, key_reward_amount: Number(e.target.value) })}\n                    className=\"w-full px-4 py-2 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                    disabled={loading}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Additional Settings */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Min. Followers Required\n              </label>\n              <input\n                type=\"number\"\n                min=\"0\"\n                value={formData.follower_threshold}\n                onChange={(e) => setFormData({ ...formData, follower_threshold: Number(e.target.value) })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n                placeholder=\"0\"\n                disabled={loading}\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Max Participants\n              </label>\n              <input\n                type=\"number\"\n                min=\"1\"\n                value={formData.max_participants || ''}\n                onChange={(e) => setFormData({ ...formData, max_participants: e.target.value ? Number(e.target.value) : undefined })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n                placeholder=\"Unlimited\"\n                disabled={loading}\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Time Commitment\n              </label>\n              <input\n                type=\"text\"\n                value={formData.time_commitment}\n                onChange={(e) => setFormData({ ...formData, time_commitment: e.target.value })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n                placeholder=\"e.g., 2-3 hours\"\n                disabled={loading}\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Deadline\n              </label>\n              <input\n                type=\"date\"\n                value={formData.deadline_at}\n                onChange={(e) => setFormData({ ...formData, deadline_at: e.target.value })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n                disabled={loading}\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Platform\n              </label>\n              <input\n                type=\"text\"\n                value={formData.platform}\n                onChange={(e) => setFormData({ ...formData, platform: e.target.value })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n                placeholder=\"e.g., Instagram, TikTok\"\n                disabled={loading}\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Content URL\n              </label>\n              <input\n                type=\"url\"\n                value={formData.content_url}\n                onChange={(e) => setFormData({ ...formData, content_url: e.target.value })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n                placeholder=\"https://...\"\n                disabled={loading}\n              />\n            </div>\n          </div>\n\n          {/* Requirements and Deliverables */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Requirements\n              </label>\n              <textarea\n                value={formData.requirements}\n                onChange={(e) => setFormData({ ...formData, requirements: e.target.value })}\n                rows={4}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n                placeholder=\"What are the requirements to participate?\"\n                disabled={loading}\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Deliverables\n              </label>\n              <textarea\n                value={formData.deliverables}\n                onChange={(e) => setFormData({ ...formData, deliverables: e.target.value })}\n                rows={4}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors\"\n                placeholder=\"What should participants deliver?\"\n                disabled={loading}\n              />\n            </div>\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"flex space-x-4 pt-6 border-t border-gray-200\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              disabled={loading}\n              className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors disabled:opacity-50\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 disabled:opacity-50 flex items-center justify-center space-x-2\"\n            >\n              {loading ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  <span>Updating...</span>\n                </>\n              ) : (\n                <>\n                  <Save className=\"w-4 h-4\" />\n                  <span>Update Drop</span>\n                </>\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { \n  ArrowLeft,\n  Clock,\n  Users,\n  Star,\n  Calendar,\n  Key,\n  Diamond,\n  CheckCircle,\n  AlertCircle,\n  FileText,\n  Target,\n  User,\n  Zap,\n  Shield,\n  Edit,\n  Trash2\n} from 'lucide-react';\nimport UserLink from '@/react-app/components/UserLink';\nimport EditDropModal from '@/react-app/components/EditDropModal';\nimport ConfirmationModal from '@/react-app/components/ConfirmationModal';\nimport { DropType, DropApplicationType, UserType } from '@/shared/types';\nimport { buildAuthHeaders, apiFetch } from '@/react-app/utils/api';\n\nexport default function TaskDetail() {\n  const { id, taskId, dropId } = useParams<{ id?: string; taskId?: string; dropId?: string }>();\n  const dropIdParam = dropId ?? taskId ?? id ?? null;\n  const navigate = useNavigate();\n  const formatLabel = (value?: string | null, fallback = 'General') => {\n    const label = value && value.trim().length > 0 ? value : fallback;\n    return label\n      .replace(/_/g, ' ')\n      .replace(/\\b\\w/g, (char) => char.toUpperCase());\n  };\n  const [drop, setDrop] = useState<DropType | null>(null);\n  const [application, setApplication] = useState<DropApplicationType | null>(null);\n  const [userData, setUserData] = useState<UserType | null>(null);\n  const [masterKeyStatus, setMasterKeyStatus] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n  const [applying, setApplying] = useState(false);\n  const [applicationMessage, setApplicationMessage] = useState('');\n  const [isCreator, setIsCreator] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [deleting, setDeleting] = useState(false);\n\n  const USE_MOCK_DATA = !import.meta.env.VITE_API_URL;\n\n  const buildFallbackMasterKeyStatus = () => ({\n    is_activated: true,\n    proof_drops_completed: 3,\n    proof_drops_required: 3,\n    last_activated_at: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),\n  });\n\n  const buildFallbackApplications = (): DropApplicationType[] => {\n    const fallbackUserId = userData?.id ?? 'demo-user';\n    const dropIdKey = String(drop?.id ?? dropIdParam ?? 'demo-drop');\n    return [\n      {\n        id: 1,\n        drop_id: dropIdKey,\n        user_id: fallbackUserId,\n        status: 'approved',\n        application_message: 'Looking forward to contributing to this drop!'\n          + ' I have prior experience delivering high-quality content on tight deadlines.',\n        submission_url: 'https://drive.google.com/demo-submission',\n        gems_earned: 120,\n        applied_at: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),\n        completed_at: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),\n        paid_at: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),\n        submission_notes: 'Approved with premium placement.',\n        review_score: 4.8,\n        created_at: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),\n        updated_at: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),\n      },\n    ];\n  };\n\n  // Check if this is demo content\n  const isDemo = drop?.title?.toLowerCase().includes('[demo]') || \n                 drop?.title?.toLowerCase().includes('demo') ||\n                 drop?.description?.toLowerCase().includes('demo');\n\n  useEffect(() => {\n    if (dropIdParam) {\n      fetchDropDetail();\n      checkApplication();\n      fetchUserData();\n      fetchMasterKeyStatus();\n    } else {\n      setLoading(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [dropIdParam]);\n\n  // Update creator status when both drop and userData are available\n  useEffect(() => {\n    if (drop && userData) {\n      const isUserCreator = drop.creator_id === userData.id;\n      console.log('Checking creator status:', {\n        dropCreatorId: drop.creator_id,\n        userId: userData.id,\n        isCreator: isUserCreator\n      });\n      setIsCreator(isUserCreator);\n    }\n  }, [drop, userData]);\n\n  const fetchDropDetail = async () => {\n    if (!dropIdParam) {\n      console.warn(\"No drop ID provided for TaskDetail route\");\n      setLoading(false);\n      return;\n    }\n\n    try {\n      console.log(\"Fetching drop detail for ID:\", dropIdParam);\n      const response = await apiFetch(`/api/drops/${dropIdParam}`);\n\n      console.log(\"Drop detail response status:\", response.status);\n\n      if (response.ok) {\n        const data = await response.json();\n        console.log(\"Drop data received:\", data);\n\n        if (!data || !data.id) {\n          console.warn(\"Malformed drop data, redirecting to not-found\");\n          navigate(\"/not-found\", {\n            state: {\n              title: \"Drop Data Invalid\",\n              message:\n                \"The requested drop data could not be processed. It may have been removed or corrupted.\",\n            },\n          });\n          return;\n        }\n\n        setDrop(data);\n      } else if (response.status === 404) {\n        console.warn(`Drop not found: ${dropIdParam}`);\n        navigate(\"/not-found\", {\n          state: {\n            title: \"Drop Not Found\",\n            message:\n              \"The requested drop could not be found. It may have been removed or the link might be incorrect.\",\n          },\n        });\n      } else {\n        const errorData = await response.json().catch(() => ({}));\n        console.error(\"Drop fetch failed:\", response.status, errorData);\n        \n        // Log the error to the server if needed\n        try {\n          await apiFetch(\"/api/logs/client-error\", {\n            method: \"POST\",\n            body: JSON.stringify({\n              source: \"TaskDetail\",\n              error: `Drop fetch failed: ${response.status}`,\n              dropId: dropIdParam,\n              timestamp: new Date().toISOString(),\n            }),\n          });\n        } catch (logError) {\n          console.error(\"Failed to log error:\", logError);\n        }\n        \n        navigate(\"/error\", {\n          state: {\n            title: \"Error Loading Drop\",\n            message:\n              \"There was an error loading the drop. Please try again later.\",\n          },\n        });\n      }\n    } catch (error) {\n      console.error(\"Failed to fetch drop:\", error);\n      \n      // Log the error to the server if needed\n      try {\n        await apiFetch(\"/api/logs/client-error\", {\n          method: \"POST\",\n          body: JSON.stringify({\n            source: \"TaskDetail\",\n            error: `Network error: ${error}`,\n            dropId: dropIdParam,\n            timestamp: new Date().toISOString(),\n          }),\n        });\n      } catch (logError) {\n        console.error(\"Failed to log error:\", logError);\n      }\n      \n      navigate(\"/error\", {\n        state: {\n          title: \"Connection Error\",\n          message:\n            \"Unable to connect to the server. Please check your internet connection and try again.\",\n        },\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchUserData = async () => {\n    try {\n      const headers = buildAuthHeaders();\n      // Fetch the database user data which contains the correct ID to match with creator_id\n      const response = await apiFetch('/api/users/me', {\n        credentials: 'include',\n        headers\n      });\n      if (response.ok) {\n        const data = await response.json();\n        console.log('Database user data received:', data);\n        console.log('Database user id:', data?.id);\n        setUserData(data);\n      }\n    } catch (error) {\n      console.error('Failed to fetch user data:', error);\n    }\n  };\n\n  const fetchMasterKeyStatus = async () => {\n    if (USE_MOCK_DATA) {\n      setMasterKeyStatus(buildFallbackMasterKeyStatus());\n      return;\n    }\n\n    try {\n      const headers = buildAuthHeaders();\n      const response = await apiFetch('/api/users/master-key-status', {\n        credentials: 'include',\n        headers,\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setMasterKeyStatus(data);\n      } else {\n        setMasterKeyStatus(buildFallbackMasterKeyStatus());\n      }\n    } catch (error) {\n      console.error('Failed to fetch master key status:', error);\n      setMasterKeyStatus(buildFallbackMasterKeyStatus());\n    }\n  };\n\n  const checkApplication = async () => {\n    if (USE_MOCK_DATA) {\n      const dropIdKey = String(drop?.id ?? dropIdParam ?? 'demo-drop');\n      const fallbackApps = buildFallbackApplications();\n      const existingApp = fallbackApps.find((app) => String(app.drop_id) === dropIdKey);\n      setApplication(existingApp || null);\n      return;\n    }\n\n    try {\n      const headers = buildAuthHeaders();\n      const response = await apiFetch('/api/users/drop-applications', {\n        credentials: 'include',\n        headers,\n      });\n\n      const dropIdKey = String(drop?.id ?? dropIdParam ?? '');\n\n      if (response.ok) {\n        const applications = await response.json();\n        if (Array.isArray(applications)) {\n          const existingApp = applications.find((app: DropApplicationType) => String(app.drop_id) === dropIdKey);\n          setApplication(existingApp || null);\n        } else {\n          console.warn('Applications API returned non-array data:', applications);\n          setApplication(null);\n        }\n      } else {\n        console.warn('Failed to fetch applications, status:', response.status);\n        const fallbackApps = buildFallbackApplications();\n        const existingApp = fallbackApps.find((app) => String(app.drop_id) === dropIdKey);\n        setApplication(existingApp || null);\n      }\n    } catch (error) {\n      console.error('Failed to check application:', error);\n      const dropIdKey = String(drop?.id ?? dropIdParam ?? '');\n      const fallbackApps = buildFallbackApplications();\n      const existingApp = fallbackApps.find((app) => String(app.drop_id) === dropIdKey);\n      setApplication(existingApp || null);\n    }\n  };\n\n  const handleApply = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!drop || !applicationMessage.trim()) return;\n\n    setApplying(true);\n    try {\n      const response = await apiFetch(`/api/drops/${drop?.id ?? dropIdParam}/apply`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...buildAuthHeaders()\n        },\n        credentials: 'include',\n        body: JSON.stringify({ application_message: applicationMessage })\n      });\n\n      if (response.ok) {\n        await Promise.all([checkApplication(), fetchUserData(), fetchMasterKeyStatus()]);\n        setApplicationMessage('');\n      } else {\n        const error = await response.json();\n        console.error('Failed to apply:', error);\n        alert(error.error || 'Failed to apply to drop');\n      }\n    } catch (error) {\n      console.error('Failed to apply:', error);\n      alert('Failed to apply to drop');\n    } finally {\n      setApplying(false);\n    }\n  };\n\n  const getDropTypeImage = (dropType: string) => {\n    // Use the drop's content_url if available, otherwise fallback to default images\n    if (drop?.content_url) {\n      return drop.content_url;\n    }\n    \n    switch (dropType) {\n      case 'content_clipping': return 'https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=800&h=400&fit=crop';\n      case 'reviews': return 'https://images.unsplash.com/photo-1556155092-490a1ba16284?w=800&h=400&fit=crop';\n      case 'ugc_creation': return 'https://images.unsplash.com/photo-1558403194-611308249627?w=800&h=400&fit=crop';\n      case 'affiliate_referral': return 'https://images.unsplash.com/photo-1516251193007-45ef944ab0c6?w=800&h=400&fit=crop';\n      case 'surveys': return 'https://images.unsplash.com/photo-1432888622747-4eb9a8efeb07?w=800&h=400&fit=crop';\n      case 'challenges_events': return 'https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=800&h=400&fit=crop';\n      case 'engagement': return 'https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=800&h=400&fit=crop';\n      default: return 'https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=800&h=400&fit=crop';\n    }\n  };\n\n  const getDropTypeIcon = (dropType: string) => {\n    switch (dropType) {\n      case 'content_clipping': return '✂️';\n      case 'reviews': return '⭐';\n      case 'ugc_creation': return '🎨';\n      case 'affiliate_referral': return '🔗';\n      case 'surveys': return '📊';\n      case 'challenges_events': return '🏆';\n      default: return '📝';\n    }\n  };\n\n  const getDifficultyColor = (difficulty: string) => {\n    switch (difficulty) {\n      case 'easy': return 'text-green-600 bg-green-100';\n      case 'medium': return 'text-yellow-600 bg-yellow-100';\n      case 'hard': return 'text-red-600 bg-red-100';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'pending': return 'text-yellow-600 bg-yellow-100';\n      case 'approved': return 'text-blue-600 bg-blue-100';\n      case 'rejected': return 'text-red-600 bg-red-100';\n      case 'completed': return 'text-green-600 bg-green-100';\n      case 'paid': return 'text-purple-600 bg-purple-100';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  const handleEdit = () => {\n    setShowEditModal(true);\n  };\n\n  const handleDelete = async () => {\n    setDeleting(true);\n    try {\n      const response = await apiFetch(`/api/drops/${drop!.id}`, {\n        method: 'DELETE',\n        credentials: 'include',\n      });\n\n      if (response.ok) {\n        navigate('/earn');\n      } else {\n        const error = await response.json();\n        alert(error.error || 'Failed to delete drop');\n      }\n    } catch (error) {\n      console.error('Failed to delete drop:', error);\n      alert('Failed to delete drop');\n    } finally {\n      setDeleting(false);\n      setShowDeleteModal(false);\n    }\n  };\n\n  const handleEditSuccess = (updatedDrop: DropType) => {\n    setDrop(updatedDrop);\n    setShowEditModal(false);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full\"></div>\n      </div>\n    );\n  }\n\n  if (!drop) {\n    return (\n      <div className=\"text-center py-12\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Drop not found</h2>\n        <button \n          onClick={() => navigate('/earn')}\n          className=\"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium transition-colors\"\n        >\n          Browse Drops\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto space-y-6\">\n      {/* Demo Alert Banner */}\n      {isDemo && (\n        <div className=\"bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-xl p-6 shadow-lg\">\n          <div className=\"flex items-center justify-center space-x-3 mb-2\">\n            <span className=\"text-2xl\">🧪</span>\n            <h2 className=\"text-xl font-bold\">DEMO CONTENT</h2>\n            <span className=\"text-2xl\">🧪</span>\n          </div>\n          <p className=\"text-center text-orange-100\">\n            This is demo content for testing purposes. No real gems will be awarded even if the interface suggests otherwise.\n          </p>\n        </div>\n      )}\n\n      {/* Header */}\n      <div className=\"flex items-center space-x-4\">\n        <button\n          onClick={() => navigate('/earn')}\n          className=\"flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors\"\n        >\n          <ArrowLeft className=\"w-5 h-5 text-gray-600\" />\n        </button>\n        <div className=\"flex-1\">\n          <h1 className=\"text-2xl font-bold text-gray-900\">\n            Drop Details {isDemo && <span className=\"text-orange-600\">(Demo)</span>}\n          </h1>\n          <p className=\"text-gray-600\">\n            {isDemo ? 'Demo earning opportunity - no real rewards' : 'Earning opportunity'}\n          </p>\n        </div>\n        \n        {/* Creator Actions */}\n        {isCreator && (\n          <div className=\"flex space-x-3\">\n            <button\n              onClick={handleEdit}\n              className=\"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors\"\n            >\n              <Edit className=\"w-4 h-4\" />\n              <span>Edit</span>\n            </button>\n            <button\n              onClick={() => setShowDeleteModal(true)}\n              className=\"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors\"\n            >\n              <Trash2 className=\"w-4 h-4\" />\n              <span>Delete</span>\n            </button>\n          </div>\n        )}\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        {/* Main Content */}\n        <div className=\"lg:col-span-2 space-y-6\">\n          {/* Hero Image & Basic Info */}\n          <div className=\"bg-white rounded-xl overflow-hidden border border-gray-200\">\n            <div className=\"relative\">\n              <img \n                src={getDropTypeImage(drop.drop_type)} \n                alt={drop.title}\n                className=\"w-full h-64 object-cover\"\n              />\n              <div className=\"absolute inset-0 bg-black bg-opacity-30\" />\n              <div className=\"absolute top-4 right-4\">\n                <span className={`px-3 py-1 rounded-full text-sm font-medium ${getDifficultyColor(drop.difficulty)}`}>\n                  {drop.difficulty}\n                </span>\n              </div>\n              <div className=\"absolute top-4 left-4\">\n                {drop.is_proof_drop ? (\n                  <div className=\"bg-green-500/90 backdrop-blur-sm px-2 py-1 rounded-full\">\n                    <span className=\"text-white text-sm font-medium\">Proof Drop</span>\n                  </div>\n                ) : drop.is_paid_drop ? (\n                  <div className=\"bg-purple-500/90 backdrop-blur-sm px-2 py-1 rounded-full\">\n                    <span className=\"text-white text-sm font-medium\">Paid Drop</span>\n                  </div>\n                ) : (\n                  <div className=\"bg-orange-500/90 backdrop-blur-sm px-2 py-1 rounded-full\">\n                    <span className=\"text-white text-sm font-medium\">Move Drop</span>\n                  </div>\n                )}\n              </div>\n              <div className=\"absolute bottom-4 left-4\">\n                <div className=\"flex items-center space-x-3 mb-2\">\n                  <span className=\"text-3xl\">{getDropTypeIcon(drop.drop_type)}</span>\n                  <span className=\"text-white bg-black bg-opacity-30 px-3 py-1 rounded-full text-sm font-medium\">\n                    {formatLabel(drop.drop_type)}\n                  </span>\n                </div>\n                <h1 className=\"text-3xl font-bold text-white drop-shadow-lg mb-1\">{drop.title}</h1>\n                <div className=\"flex items-center space-x-4\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Diamond className=\"w-6 h-6 text-purple-300 drop-shadow\" />\n                    <p className=\"text-2xl font-bold text-white drop-shadow-lg\">{drop.gem_reward_base}</p>\n                  </div>\n                  <p className=\"text-white/80 drop-shadow\">Gems reward</p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Description */}\n          <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Description</h2>\n            <p className=\"text-gray-700 leading-relaxed\">{drop.description}</p>\n          </div>\n\n          {/* Requirements & Deliverables */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {drop.requirements && (\n              <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n                <div className=\"flex items-center space-x-2 mb-4\">\n                  <CheckCircle className=\"w-5 h-5 text-green-600\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Requirements</h3>\n                </div>\n                <p className=\"text-gray-700 leading-relaxed\">{drop.requirements}</p>\n              </div>\n            )}\n\n            {drop.deliverables && (\n              <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n                <div className=\"flex items-center space-x-2 mb-4\">\n                  <Target className=\"w-5 h-5 text-blue-600\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Deliverables</h3>\n                </div>\n                <p className=\"text-gray-700 leading-relaxed\">{drop.deliverables}</p>\n              </div>\n            )}\n          </div>\n\n          {/* Master Key Status */}\n          {userData && masterKeyStatus && (\n            <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n              <div className=\"flex items-center space-x-2 mb-4\">\n                <Shield className=\"w-5 h-5 text-purple-600\" />\n                <h3 className=\"text-lg font-semibold text-gray-900\">Master Key Status</h3>\n              </div>\n              \n              <div className=\"bg-purple-50 rounded-lg p-4 mb-4\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-sm text-purple-700\">Today's Master Key</span>\n                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                    masterKeyStatus.is_activated ? 'text-green-600 bg-green-100' : 'text-orange-600 bg-orange-100'\n                  }`}>\n                    {masterKeyStatus.is_activated ? 'Activated' : 'Not Activated'}\n                  </span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-purple-700\">Proof Drops Completed</span>\n                  <span className=\"text-sm font-medium text-purple-900\">\n                    {masterKeyStatus.proof_drops_completed}/{masterKeyStatus.proof_drops_required}\n                  </span>\n                </div>\n              </div>\n              \n              {!masterKeyStatus.is_activated && (\n                <p className=\"text-sm text-purple-700\">\n                  Complete {masterKeyStatus.proof_drops_required - masterKeyStatus.proof_drops_completed} more proof drops to activate your Master Key and unlock the ability to use Keys for drops.\n                </p>\n              )}\n            </div>\n          )}\n\n          {/* User Currency Balance */}\n          {userData && (\n            <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n              <div className=\"flex items-center space-x-2 mb-4\">\n                <Zap className=\"w-5 h-5 text-blue-600\" />\n                <h3 className=\"text-lg font-semibold text-gray-900\">Your Balance</h3>\n              </div>\n              \n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"bg-blue-50 rounded-lg p-3\">\n                  <div className=\"flex items-center space-x-2 mb-1\">\n                    <Key className=\"w-4 h-4 text-orange-600\" />\n                    <span className=\"text-sm font-medium text-gray-700\">Keys</span>\n                  </div>\n                  <p className=\"text-xl font-bold text-gray-900\">{userData.keys_balance}</p>\n                </div>\n                <div className=\"bg-purple-50 rounded-lg p-3\">\n                  <div className=\"flex items-center space-x-2 mb-1\">\n                    <Diamond className=\"w-4 h-4 text-purple-600\" />\n                    <span className=\"text-sm font-medium text-gray-700\">Gems</span>\n                  </div>\n                  <p className=\"text-xl font-bold text-gray-900\">{userData.gems_balance}</p>\n                </div>\n              </div>\n              \n              {userData.keys_balance < drop.key_cost && (\n                <div className=\"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg\">\n                  <p className=\"text-sm text-red-700\">\n                    You need {drop.key_cost - userData.keys_balance} more keys to apply for this drop.\n                  </p>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Application Status or Form */}\n          {application ? (\n            <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n              <div className=\"flex items-center space-x-2 mb-4\">\n                <FileText className=\"w-5 h-5 text-blue-600\" />\n                <h3 className=\"text-lg font-semibold text-gray-900\">Your Application</h3>\n              </div>\n              \n              <div className=\"bg-gray-50 rounded-lg p-4 mb-4\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-sm text-gray-600\">Status</span>\n                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(application.status)}`}>\n                    {application.status}\n                  </span>\n                </div>\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-sm text-gray-600\">Applied</span>\n                  <span className=\"text-sm text-gray-900\">\n                    {new Date(application.applied_at).toLocaleDateString()}\n                  </span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-600\">Keys Used</span>\n                  <span className=\"text-sm text-gray-900\">{drop.key_cost}</span>\n                </div>\n              </div>\n              \n              <div>\n                <h4 className=\"font-medium text-gray-900 mb-2\">Your Message</h4>\n                <p className=\"text-gray-700 text-sm leading-relaxed\">{application.application_message}</p>\n              </div>\n              \n              {application.gems_earned > 0 && (\n                <div className=\"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Diamond className=\"w-4 h-4 text-green-600\" />\n                    <span className=\"text-sm font-medium text-green-700\">\n                      Earned {application.gems_earned} gems!\n                    </span>\n                  </div>\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n              <div className=\"flex items-center space-x-2 mb-4\">\n                <User className=\"w-5 h-5 text-orange-600\" />\n                <h3 className=\"text-lg font-semibold text-gray-900\">Apply for this Drop</h3>\n              </div>\n              \n              {userData && (userData.keys_balance < drop.key_cost || !masterKeyStatus?.is_activated) && (\n                <div className=\"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n                  <h4 className=\"font-medium text-yellow-800 mb-2\">Requirements not met:</h4>\n                  <ul className=\"text-sm text-yellow-700 space-y-1\">\n                    {userData.keys_balance < drop.key_cost && (\n                      <li>• Need {drop.key_cost - userData.keys_balance} more keys</li>\n                    )}\n                    {!masterKeyStatus?.is_activated && (\n                      <li>• Master Key must be activated for today</li>\n                    )}\n                  </ul>\n                </div>\n              )}\n              \n              <form onSubmit={handleApply} className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Why are you the right person for this drop?\n                  </label>\n                  <textarea\n                    value={applicationMessage}\n                    onChange={(e) => setApplicationMessage(e.target.value)}\n                    rows={4}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                    placeholder=\"Tell us about your relevant experience and why you'd be perfect for this drop...\"\n                    required\n                  />\n                </div>\n                \n                <button\n                  type=\"submit\"\n                  disabled={\n                    applying || \n                    !applicationMessage.trim() || \n                    !userData ||\n                    userData.keys_balance < drop.key_cost ||\n                    !masterKeyStatus?.is_activated\n                  }\n                  className={`w-full px-6 py-3 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-white ${\n                    isDemo \n                      ? 'bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600'\n                      : 'bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600'\n                  }`}\n                >\n                  {applying ? 'Submitting...' : `${isDemo ? 'Demo Apply' : 'Apply Now'} (${drop.key_cost} keys)`}\n                </button>\n              </form>\n            </div>\n          )}\n        </div>\n\n        {/* Sidebar */}\n        <div className=\"space-y-6\">\n          {/* Drop Stats */}\n          <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Drop Information</h3>\n            \n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-2\">\n                  <Key className=\"w-4 h-4 text-orange-600\" />\n                  <span className=\"text-gray-600\">Key Cost</span>\n                </div>\n                <span className=\"font-bold text-orange-600\">{drop.key_cost}</span>\n              </div>\n\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-2\">\n                  <Diamond className=\"w-4 h-4 text-purple-600\" />\n                  <span className=\"text-gray-600\">Gem Reward</span>\n                </div>\n                <span className=\"font-bold text-purple-600\">{drop.gem_reward_base}</span>\n              </div>\n\n              {drop.gem_pool_total > 0 && (\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Zap className=\"w-4 h-4 text-blue-600\" />\n                    <span className=\"text-gray-600\">Pool Remaining</span>\n                  </div>\n                  <span className=\"font-semibold text-gray-900\">{drop.gem_pool_remaining}</span>\n                </div>\n              )}\n              \n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-2\">\n                  <Users className=\"w-4 h-4 text-blue-600\" />\n                  <span className=\"text-gray-600\">Participants</span>\n                </div>\n                <span className=\"font-semibold text-gray-900\">\n                  {drop.current_participants}/{drop.max_participants || '∞'}\n                </span>\n              </div>\n\n              {drop.follower_threshold > 0 && (\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Star className=\"w-4 h-4 text-yellow-600\" />\n                    <span className=\"text-gray-600\">Min. Followers</span>\n                  </div>\n                  <span className=\"font-semibold text-gray-900\">{drop.follower_threshold}+</span>\n                </div>\n              )}\n\n              {drop.time_commitment && (\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Clock className=\"w-4 h-4 text-purple-600\" />\n                    <span className=\"text-gray-600\">Time</span>\n                  </div>\n                  <span className=\"font-semibold text-gray-900\">{drop.time_commitment}</span>\n                </div>\n              )}\n\n              {drop.deadline_at && (\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Calendar className=\"w-4 h-4 text-red-600\" />\n                    <span className=\"text-gray-600\">Deadline</span>\n                  </div>\n                  <span className=\"font-semibold text-gray-900\">\n                    {new Date(drop.deadline_at).toLocaleDateString()}\n                  </span>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Creator Info */}\n          <div className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Posted By</h3>\n            <UserLink \n              username={drop.creator_name}\n              displayName={drop.creator_name || 'Drop Creator'}\n              avatarUrl={drop.creator_avatar}\n              className=\"flex items-center space-x-3\"\n              size=\"lg\"\n            />\n            <div className=\"mt-2\">\n              <p className=\"text-sm text-gray-600\">Verified creator</p>\n            </div>\n            \n            <div className=\"mt-4 pt-4 border-t border-gray-200\">\n              <div className=\"grid grid-cols-2 gap-4 text-center\">\n                <div>\n                  <p className=\"text-lg font-bold text-gray-900\">12</p>\n                  <p className=\"text-xs text-gray-600\">Drops Posted</p>\n                </div>\n                <div>\n                  <p className=\"text-lg font-bold text-gray-900\">4.8</p>\n                  <p className=\"text-xs text-gray-600\">Avg Rating</p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Quick Tips */}\n          <div className=\"bg-blue-50 rounded-xl p-6 border border-blue-100\">\n            <div className=\"flex items-center space-x-2 mb-3\">\n              <AlertCircle className=\"w-5 h-5 text-blue-600\" />\n              <h3 className=\"font-semibold text-blue-900\">Pro Tips</h3>\n            </div>\n            <ul className=\"text-sm text-blue-800 space-y-2\">\n              <li>• Ensure you have enough keys before applying</li>\n              <li>• Activate your Master Key daily</li>\n              <li>• Read all requirements carefully</li>\n              <li>• Submit high-quality work on time</li>\n              <li>• Communicate with the drop creator</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      {/* Edit Modal */}\n      {drop && showEditModal && (\n        <EditDropModal\n          isOpen={showEditModal}\n          onClose={() => setShowEditModal(false)}\n          onSuccess={handleEditSuccess}\n          drop={drop}\n        />\n      )}\n\n      {/* Delete Confirmation Modal */}\n      <ConfirmationModal\n        isOpen={showDeleteModal}\n        onClose={() => setShowDeleteModal(false)}\n        onConfirm={handleDelete}\n        title=\"Delete Drop\"\n        message=\"Are you sure you want to delete this drop? This action cannot be undone and will remove all applications.\"\n        confirmText=\"Delete\"\n        cancelText=\"Cancel\"\n        type=\"danger\"\n        loading={deleting}\n      />\n    </div>\n  );\n}\n","import { createContext, useCallback, useContext, useMemo, useState } from 'react';\nimport { cn } from '@/lib/utils';\n\ntype TabsContextValue = {\n  value: string | undefined;\n  onSelect: (value: string) => void;\n};\n\nconst TabsContext = createContext<TabsContextValue | null>(null);\n\ntype TabsProps = {\n  value?: string;\n  defaultValue?: string;\n  onValueChange?: (value: string) => void;\n  children: React.ReactNode;\n  className?: string;\n};\n\nexport function Tabs({ value, defaultValue, onValueChange, children, className }: TabsProps) {\n  const [internalValue, setInternalValue] = useState(defaultValue);\n  const activeValue = value ?? internalValue;\n\n  const handleSelect = useCallback(\n    (nextValue: string) => {\n      setInternalValue(nextValue);\n      onValueChange?.(nextValue);\n    },\n    [onValueChange]\n  );\n\n  const contextValue = useMemo<TabsContextValue>(\n    () => ({\n      value: activeValue,\n      onSelect: handleSelect,\n    }),\n    [activeValue, handleSelect]\n  );\n\n  return (\n    <TabsContext.Provider value={contextValue}>\n      <div className={className}>{children}</div>\n    </TabsContext.Provider>\n  );\n}\n\ntype TabsListProps = {\n  children: React.ReactNode;\n  className?: string;\n};\n\nexport function TabsList({ children, className }: TabsListProps) {\n  return (\n    <div role=\"tablist\" className={className}>\n      {children}\n    </div>\n  );\n}\n\ntype TabsTriggerProps = {\n  value: string;\n  children: React.ReactNode;\n  className?: string;\n};\n\nexport function TabsTrigger({ value, children, className }: TabsTriggerProps) {\n  const ctx = useContext(TabsContext);\n\n  if (!ctx) {\n    throw new Error('TabsTrigger must be used within Tabs');\n  }\n\n  const isActive = ctx.value === value;\n\n  return (\n    <button\n      type=\"button\"\n      role=\"tab\"\n      data-state={isActive ? 'active' : 'inactive'}\n      aria-selected={isActive}\n      className={cn(\n        'inline-flex items-center border-b-2 border-transparent px-3 py-2 text-sm font-medium transition',\n        isActive ? 'border-blue-500 text-blue-600' : 'text-gray-500 hover:text-gray-700',\n        className\n      )}\n      onClick={() => ctx.onSelect(value)}\n    >\n      {children}\n    </button>\n  );\n}\n\ntype TabsContentProps = {\n  value: string;\n  children: React.ReactNode;\n  className?: string;\n};\n\nexport function TabsContent({ value, children, className }: TabsContentProps) {\n  const ctx = useContext(TabsContext);\n\n  if (!ctx) {\n    throw new Error('TabsContent must be used within Tabs');\n  }\n\n  const isActive = ctx.value === value;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      data-state={isActive ? 'active' : 'inactive'}\n      className={cn(isActive ? 'block' : 'hidden', className)}\n    >\n      {isActive ? children : null}\n    </div>\n  );\n}\n","import { useState, useRef } from 'react';\nimport { X, Upload, Building2, Globe, Mail, Phone, FileText, Camera, Check } from 'lucide-react';\n\ninterface BrandProfileModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (brandData: any) => void;\n  currentBrandData?: {\n    brand_name?: string;\n    brand_logo_url?: string;\n    brand_description?: string;\n    brand_website?: string;\n    brand_email?: string;\n    brand_phone?: string;\n  };\n  loading?: boolean;\n}\n\nexport default function BrandProfileModal({\n  isOpen,\n  onClose,\n  onSave,\n  currentBrandData = {},\n  loading = false\n}: BrandProfileModalProps) {\n  const [formData, setFormData] = useState({\n    brand_name: currentBrandData.brand_name || '',\n    brand_description: currentBrandData.brand_description || '',\n    brand_website: currentBrandData.brand_website || '',\n    brand_email: currentBrandData.brand_email || '',\n    brand_phone: currentBrandData.brand_phone || ''\n  });\n  const [logoFile, setLogoFile] = useState<File | null>(null);\n  const [logoPreview, setLogoPreview] = useState(currentBrandData.brand_logo_url || '');\n  const [uploadingLogo, setUploadingLogo] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleInputChange = (field: string, value: string) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleLogoSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      // Validate file type\n      if (!file.type.startsWith('image/')) {\n        alert('Please select an image file');\n        return;\n      }\n      \n      // Validate file size (max 5MB)\n      if (file.size > 5 * 1024 * 1024) {\n        alert('Please select an image smaller than 5MB');\n        return;\n      }\n\n      setLogoFile(file);\n      \n      // Create preview\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setLogoPreview(e.target?.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const uploadLogo = async (): Promise<string> => {\n    if (!logoFile) return logoPreview || '';\n\n    setUploadingLogo(true);\n    try {\n      const formData = new FormData();\n      formData.append('image', logoFile);\n\n      const response = await fetch('/api/upload/image', {\n        method: 'POST',\n        credentials: 'include',\n        body: formData\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        return data.url || '';\n      } else {\n        console.error('Failed to upload logo');\n        return '';\n      }\n    } catch (error) {\n      console.error('Error uploading logo:', error);\n      return '';\n    } finally {\n      setUploadingLogo(false);\n    }\n  };\n\n  const handleSave = async () => {\n    // Validate required fields\n    if (!formData.brand_name.trim()) {\n      alert('Brand name is required');\n      return;\n    }\n\n    let logoUrl = logoPreview;\n    \n    // Upload logo if a new file was selected\n    if (logoFile) {\n      logoUrl = await uploadLogo();\n      if (!logoUrl.trim()) {\n        alert('Failed to upload logo. Please try again.');\n        return;\n      }\n    }\n\n    const brandData = {\n      ...formData,\n      brand_logo_url: logoUrl || ''\n    };\n\n    onSave(brandData);\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center\">\n              <Building2 className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <h2 className=\"text-xl font-semibold text-gray-900\">Brand Profile</h2>\n              <p className=\"text-sm text-gray-600\">Set up your brand representation</p>\n            </div>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6 space-y-6\">\n          {/* Logo Upload */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-900 mb-3\">\n              Brand Logo\n            </label>\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"w-20 h-20 bg-gray-100 rounded-xl flex items-center justify-center overflow-hidden border-2 border-dashed border-gray-300\">\n                {logoPreview ? (\n                  <img \n                    src={logoPreview} \n                    alt=\"Brand logo\" \n                    className=\"w-full h-full object-cover\"\n                  />\n                ) : (\n                  <Camera className=\"w-8 h-8 text-gray-400\" />\n                )}\n              </div>\n              <div className=\"flex-1\">\n                <button\n                  type=\"button\"\n                  onClick={() => fileInputRef.current?.click()}\n                  disabled={uploadingLogo}\n                  className=\"bg-gray-100 hover:bg-gray-200 disabled:opacity-50 text-gray-700 px-4 py-2 rounded-lg font-medium transition-colors flex items-center space-x-2\"\n                >\n                  <Upload className=\"w-4 h-4\" />\n                  <span>{uploadingLogo ? 'Uploading...' : 'Upload Logo'}</span>\n                </button>\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  PNG, JPG up to 5MB. Square format recommended.\n                </p>\n              </div>\n            </div>\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handleLogoSelect}\n              className=\"hidden\"\n            />\n          </div>\n\n          {/* Brand Name */}\n          <div>\n            <label htmlFor=\"brand_name\" className=\"block text-sm font-medium text-gray-900 mb-2\">\n              Brand Name *\n            </label>\n            <div className=\"relative\">\n              <Building2 className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n              <input\n                id=\"brand_name\"\n                type=\"text\"\n                value={formData.brand_name}\n                onChange={(e) => handleInputChange('brand_name', e.target.value)}\n                placeholder=\"Enter your brand name\"\n                className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                required\n              />\n            </div>\n          </div>\n\n          {/* Brand Description */}\n          <div>\n            <label htmlFor=\"brand_description\" className=\"block text-sm font-medium text-gray-900 mb-2\">\n              Brand Description\n            </label>\n            <div className=\"relative\">\n              <FileText className=\"absolute left-3 top-3 w-5 h-5 text-gray-400\" />\n              <textarea\n                id=\"brand_description\"\n                value={formData.brand_description}\n                onChange={(e) => handleInputChange('brand_description', e.target.value)}\n                placeholder=\"Describe your brand, mission, and values\"\n                rows={3}\n                className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n              />\n            </div>\n          </div>\n\n          {/* Website */}\n          <div>\n            <label htmlFor=\"brand_website\" className=\"block text-sm font-medium text-gray-900 mb-2\">\n              Website\n            </label>\n            <div className=\"relative\">\n              <Globe className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n              <input\n                id=\"brand_website\"\n                type=\"url\"\n                value={formData.brand_website}\n                onChange={(e) => handleInputChange('brand_website', e.target.value)}\n                placeholder=\"https://yourbrand.com\"\n                className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              />\n            </div>\n          </div>\n\n          {/* Contact Information */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label htmlFor=\"brand_email\" className=\"block text-sm font-medium text-gray-900 mb-2\">\n                Brand Email\n              </label>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                <input\n                  id=\"brand_email\"\n                  type=\"email\"\n                  value={formData.brand_email}\n                  onChange={(e) => handleInputChange('brand_email', e.target.value)}\n                  placeholder=\"contact@yourbrand.com\"\n                  className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label htmlFor=\"brand_phone\" className=\"block text-sm font-medium text-gray-900 mb-2\">\n                Phone Number\n              </label>\n              <div className=\"relative\">\n                <Phone className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                <input\n                  id=\"brand_phone\"\n                  type=\"tel\"\n                  value={formData.brand_phone}\n                  onChange={(e) => handleInputChange('brand_phone', e.target.value)}\n                  placeholder=\"+1 (555) 123-4567\"\n                  className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* Preview */}\n          {formData.brand_name && (\n            <div className=\"bg-gray-50 rounded-xl p-4\">\n              <h4 className=\"text-sm font-medium text-gray-900 mb-3\">Preview</h4>\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-12 h-12 bg-white rounded-lg flex items-center justify-center overflow-hidden border border-gray-200\">\n                  {logoPreview ? (\n                    <img \n                      src={logoPreview} \n                      alt=\"Brand logo\" \n                      className=\"w-full h-full object-cover\"\n                    />\n                  ) : (\n                    <Building2 className=\"w-6 h-6 text-gray-400\" />\n                  )}\n                </div>\n                <div>\n                  <div className=\"font-medium text-gray-900\">{formData.brand_name}</div>\n                  {formData.brand_description && (\n                    <div className=\"text-sm text-gray-600 line-clamp-1\">{formData.brand_description}</div>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex items-center justify-end space-x-4 p-6 border-t border-gray-200\">\n          <button\n            onClick={onClose}\n            className=\"px-6 py-2 text-gray-700 hover:text-gray-900 font-medium transition-colors\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={handleSave}\n            disabled={loading || uploadingLogo || !formData.brand_name.trim()}\n            className=\"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-2 rounded-xl font-medium transition-all duration-200 flex items-center space-x-2\"\n          >\n            {loading ? (\n              <>\n                <div className=\"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full\"></div>\n                <span>Saving...</span>\n              </>\n            ) : (\n              <>\n                <Check className=\"w-4 h-4\" />\n                <span>Save Brand Profile</span>\n              </>\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { Link } from \"react-router-dom\";\nimport { Plus, BarChart2, Calendar, Users, DollarSign, Target } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\n\ntype Campaign = {\n  id: string;\n  name: string;\n  status: 'active' | 'paused' | 'draft' | 'completed';\n  startDate: string;\n  endDate?: string;\n  budget: number;\n  spent: number;\n  impressions: number;\n  clicks: number;\n  ctr: number;\n  cpc: number;\n  drops: number;\n  participants: number;\n};\n\ninterface CampaignsProps {\n  showHeader?: boolean;\n  basePath?: string;\n}\n\nexport default function Campaigns({ showHeader = true, basePath = '/campaigns' }: CampaignsProps) {\n  const [campaigns, setCampaigns] = useState<Campaign[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    // TODO: Replace with actual API call\n    const fetchCampaigns = async () => {\n      try {\n        setLoading(true);\n        // Mock data for now\n        const mockCampaigns: Campaign[] = [\n          {\n            id: '1',\n            name: 'Summer Collection Launch',\n            status: 'active',\n            startDate: '2025-06-01',\n            endDate: '2025-08-31',\n            budget: 5000,\n            spent: 1250,\n            impressions: 125000,\n            clicks: 2500,\n            ctr: 2.0,\n            cpc: 0.5,\n            drops: 12,\n            participants: 2450,\n          },\n          {\n            id: '2',\n            name: 'Back to School',\n            status: 'draft',\n            startDate: '2025-08-15',\n            endDate: '2025-09-15',\n            budget: 3000,\n            spent: 0,\n            impressions: 0,\n            clicks: 0,\n            ctr: 0,\n            cpc: 0,\n            drops: 0,\n            participants: 0,\n          },\n        ];\n        setCampaigns(mockCampaigns);\n      } catch (err) {\n        console.error('Failed to fetch campaigns:', err);\n        setError('Failed to load campaigns. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchCampaigns();\n  }, []);\n\n  const getStatusBadge = (status: string) => {\n    const baseClasses = 'px-2 py-1 rounded-full text-xs font-medium';\n    switch (status) {\n      case 'active':\n        return `${baseClasses} bg-green-100 text-green-700`;\n      case 'paused':\n        return `${baseClasses} bg-yellow-100 text-yellow-700`;\n      case 'completed':\n        return `${baseClasses} bg-gray-100 text-gray-700`;\n      case 'draft':\n      default:\n        return `${baseClasses} bg-blue-100 text-blue-700`;\n    }\n  };\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(amount);\n  };\n\n  const formatNumber = (num: number) => {\n    return new Intl.NumberFormat('en-US').format(num);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 border-l-4 border-red-400 p-4\">\n        <div className=\"flex\">\n          <div className=\"flex-shrink-0\">\n            <svg className=\"h-5 w-5 text-red-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n              <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n            </svg>\n          </div>\n          <div className=\"ml-3\">\n            <p className=\"text-sm text-red-700\">{error}</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const newCampaignPath = `${basePath}/new`;\n\n  return (\n    <div className=\"space-y-6\">\n      {showHeader && (\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Campaigns</h2>\n            <p className=\"mt-1 text-sm text-gray-500\">\n              Create and manage your marketing campaigns\n            </p>\n          </div>\n          <Button asChild>\n            <Link to={newCampaignPath} className=\"flex items-center space-x-2\">\n              <Plus className=\"h-4 w-4\" />\n              <span>New Campaign</span>\n            </Link>\n          </Button>\n        </div>\n      )}\n\n      <div className=\"bg-white shadow overflow-hidden sm:rounded-lg\">\n        {campaigns.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <BarChart2 className=\"mx-auto h-12 w-12 text-gray-400\" />\n            <h3 className=\"mt-2 text-lg font-medium text-gray-900\">No campaigns</h3>\n            <p className=\"mt-1 text-sm text-gray-500\">\n              Get started by creating a new campaign.\n            </p>\n            <div className=\"mt-6\">\n              <Button asChild>\n                <Link to={newCampaignPath} className=\"inline-flex items-center\">\n                  <Plus className=\"-ml-1 mr-2 h-5 w-5\" />\n                  New Campaign\n                </Link>\n              </Button>\n            </div>\n          </div>\n        ) : (\n          <ul className=\"divide-y divide-gray-200\">\n            {campaigns.map((campaign) => (\n              <li key={campaign.id} className=\"hover:bg-gray-50\">\n                <Link to={`${basePath}/${campaign.id}`} className=\"block\">\n                  <div className=\"px-4 py-4 sm:px-6\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center\">\n                        <p className=\"text-lg font-medium text-indigo-600 truncate\">\n                          {campaign.name}\n                        </p>\n                        <div className=\"ml-2\">\n                          <span className={getStatusBadge(campaign.status)}>\n                            {campaign.status.charAt(0).toUpperCase() + campaign.status.slice(1)}\n                          </span>\n                        </div>\n                      </div>\n                      <div className=\"ml-2 flex-shrink-0 flex\">\n                        <p className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800\">\n                          {formatCurrency(campaign.spent)} of {formatCurrency(campaign.budget)}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"mt-2 sm:flex sm:justify-between\">\n                      <div className=\"sm:flex\">\n                        <p className=\"flex items-center text-sm text-gray-500\">\n                          <Calendar className=\"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400\" />\n                          {new Date(campaign.startDate).toLocaleDateString()}\n                          {campaign.endDate && (\n                            <>\n                              <span className=\"mx-1\">-</span>\n                              {new Date(campaign.endDate).toLocaleDateString()}\n                            </>\n                          )}\n                        </p>\n                      </div>\n                      <div className=\"mt-2 flex items-center text-sm text-gray-500 sm:mt-0\">\n                        <Users className=\"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400\" />\n                        <p>{formatNumber(campaign.participants)} participants</p>\n                        <span className=\"mx-1\">•</span>\n                        <DollarSign className=\"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400\" />\n                        <p>CPC: {formatCurrency(campaign.cpc)}</p>\n                      </div>\n                    </div>\n                    {campaign.status !== 'draft' && (\n                      <div className=\"mt-2\">\n                        <div className=\"flex justify-between text-sm text-gray-500\">\n                          <div className=\"flex items-center\">\n                            <Target className=\"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400\" />\n                            <span>{formatNumber(campaign.impressions)} impressions</span>\n                          </div>\n                          <span className=\"text-sm font-medium\">\n                            {campaign.ctr.toFixed(1)}% CTR\n                          </span>\n                        </div>\n                        <div className=\"mt-1 w-full bg-gray-200 rounded-full h-2\">\n                          <div \n                            className=\"bg-blue-500 h-2 rounded-full\" \n                            style={{ width: `${Math.min(100, (campaign.spent / campaign.budget) * 100)}%` }}\n                          />\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </Link>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport { useAuth } from '../hooks/useAuth';\nimport {\n  BarChart3,\n  Users,\n  Diamond,\n  TrendingUp,\n  Calendar,\n  Plus,\n  Target,\n  DollarSign,\n  Eye,\n  MousePointer,\n  Megaphone,\n  ExternalLink,\n  Activity,\n  Sparkles,\n  Building2,\n  Settings,\n  Edit,\n  LayoutDashboard,\n  PlusCircle\n} from 'lucide-react';\nimport { Tabs, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Button } from '@/components/ui/button';\nimport { DropType, AdvertiserAnalyticsType } from '@/shared/types';\nimport {\n  PerformanceMetrics,\n  ActivityBreakdown,\n  TrendLine,\n  MultiMetricChart,\n  KPICard\n} from '@/react-app/components/AnalyticsCharts';\nimport SponsorshipModal from '@/react-app/components/SponsorshipModal';\nimport BrandProfileModal from '@/react-app/components/BrandProfileModal';\nimport Campaigns from './Campaigns';\nimport { buildAuthHeaders } from '@/react-app/utils/api';\n\nexport default function AdvertiserDashboard() {\n  const { user } = useAuth();\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  const [userData, setUserData] = useState<any>(null);\n  const [dashboardData, setDashboardData] = useState<{\n    drops: DropType[];\n    analytics: AdvertiserAnalyticsType[];\n    user_tier: string;\n    monthly_inventory?: any;\n    weekly_inventory?: any;\n  } | null>(null);\n  const [suggestedContent, setSuggestedContent] = useState<any[]>([]);\n  const [loadingSuggestions, setLoadingSuggestions] = useState(true);\n  const [selectedContentForSponsorship, setSelectedContentForSponsorship] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showBrandModal, setShowBrandModal] = useState(false);\n  const [savingBrand, setSavingBrand] = useState(false);\n  const [activeTab, setActiveTab] = useState<'dashboard' | 'campaigns'>('dashboard');\n\n  useEffect(() => {\n    if (user) {\n      fetchUserData();\n    }\n  }, [user]);\n\n  useEffect(() => {\n    if (userData) {\n      fetchDashboardData();\n      fetchSuggestedContent();\n    }\n  }, [userData]);\n\n  useEffect(() => {\n    const handleVisibilityChange = () => {\n      if (!document.hidden && user) {\n        fetchUserData();\n      }\n    };\n\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    return () => document.removeEventListener('visibilitychange', handleVisibilityChange);\n  }, [user]);\n\n  useEffect(() => {\n    if (user) {\n      fetchUserData();\n    }\n  }, [location?.pathname, user]);\n\n  useEffect(() => {\n    const handleStorageChange = (e: StorageEvent) => {\n      if (e.key === 'advertiser_conversion' && e.newValue === 'true') {\n        localStorage.removeItem('advertiser_conversion');\n        fetchUserData();\n      }\n    };\n\n    window.addEventListener('storage', handleStorageChange);\n    return () => window.removeEventListener('storage', handleStorageChange);\n  }, []);\n\n  useEffect(() => {\n    if (window.location.hash === '#converted' && user) {\n      window.history.replaceState({}, '', window.location.pathname);\n      setTimeout(() => {\n        fetchUserData();\n      }, 500);\n    }\n  }, [user]);\n\n  const fetchUserData = async () => {\n    try {\n      const headers = buildAuthHeaders();\n      const response = await fetch('/api/users/me', {\n        credentials: 'include',\n        headers\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setUserData(data);\n      } else {\n        console.error('Failed to fetch user data:', response.status);\n      }\n    } catch (err) {\n      console.error('Failed to fetch user data:', err);\n      setError('Failed to load user data');\n      setLoading(false);\n    }\n  };\n\n  const fetchDashboardData = async () => {\n    try {\n      const headers = buildAuthHeaders();\n      const response = await fetch('/api/advertisers/dashboard', {\n        credentials: 'include',\n        headers\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setDashboardData(data);\n      } else {\n        setDashboardData({\n          drops: [],\n          analytics: [],\n          user_tier: (userData as any)?.user_tier || 'free'\n        });\n      }\n    } catch (err) {\n      console.error('Failed to fetch dashboard data:', err);\n      setDashboardData({\n        drops: [],\n        analytics: [],\n        user_tier: (userData as any)?.user_tier || 'free'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchSuggestedContent = async () => {\n    try {\n      const headers = buildAuthHeaders();\n      const response = await fetch('/api/advertisers/suggested-content', {\n        credentials: 'include',\n        headers\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setSuggestedContent(Array.isArray(data) ? data : []);\n      } else {\n        setSuggestedContent([]);\n      }\n    } catch (err) {\n      console.error('Failed to fetch suggested content:', err);\n      setSuggestedContent([]);\n    } finally {\n      setLoadingSuggestions(false);\n    }\n  };\n\n  const getTierBenefits = (tier: string) => {\n    switch (tier) {\n      case 'super':\n        return {\n          name: 'Super Advertiser',\n          color: 'text-yellow-600 bg-yellow-50',\n          inventory: 'Weekly: 500 moves, 25 proof drops, 15 paid drops',\n          features: [\n            'Premium analytics',\n            'Priority support',\n            'Custom targeting',\n            'Advanced reporting',\n            'Create proof & paid drops'\n          ]\n        };\n      case 'premium':\n        return {\n          name: 'Premium Advertiser',\n          color: 'text-purple-600 bg-purple-50',\n          inventory: 'Weekly: 200 moves, 15 proof drops, 8 paid drops',\n          features: [\n            'Advanced analytics',\n            'Priority support',\n            'Custom targeting',\n            'Create proof & paid drops'\n          ]\n        };\n      default:\n        return {\n          name: 'Free Advertiser',\n          color: 'text-gray-600 bg-gray-50',\n          inventory: 'Monthly Sample: 50 moves, 5 proof drops',\n          features: [\n            'Basic analytics',\n            'Standard support',\n            'Create proof drops only',\n            'Sponsor content with gems'\n          ]\n        };\n    }\n  };\n\n  const calculateTotals = () => {\n    if (!dashboardData?.drops) {\n      return { totalDrops: 0, totalParticipants: 0, totalGems: 0 };\n    }\n\n    return dashboardData.drops.reduce(\n      (acc, drop: any) => ({\n        totalDrops: acc.totalDrops + 1,\n        totalParticipants: acc.totalParticipants + (drop.total_applications || 0),\n        totalGems: acc.totalGems + (drop.gems_paid || 0)\n      }),\n      { totalDrops: 0, totalParticipants: 0, totalGems: 0 }\n    );\n  };\n\n  const generateAnalyticsData = () => {\n    const last30Days = Array.from({ length: 30 }, (_, i) => {\n      const date = new Date();\n      date.setDate(date.getDate() - (29 - i));\n      return {\n        date: date.toISOString().split('T')[0],\n        applications: Math.floor(Math.random() * 50) + 10,\n        conversions: Math.floor(Math.random() * 20) + 5,\n        impressions: Math.floor(Math.random() * 1000) + 200,\n        clicks: Math.floor(Math.random() * 100) + 20,\n        spent: Math.floor(Math.random() * 500) + 100,\n        participants: Math.floor(Math.random() * 30) + 5\n      };\n    });\n    return last30Days;\n  };\n\n  const analyticsData = generateAnalyticsData();\n  const campaignPerformance = [\n    { metric: 'Click-through Rate', value: 4.2 },\n    { metric: 'Conversion Rate', value: 12.8 },\n    { metric: 'Engagement Rate', value: 8.5 },\n    { metric: 'Application Rate', value: 15.3 },\n    { metric: 'Completion Rate', value: 78.9 }\n  ];\n  const dropTypeBreakdown = [\n    { name: 'Content Creation', value: 45, color: '#f97316' },\n    { name: 'Social Sharing', value: 30, color: '#8b5cf6' },\n    { name: 'Reviews', value: 15, color: '#10b981' },\n    { name: 'Surveys', value: 10, color: '#3b82f6' }\n  ];\n\n  const tierInfo = getTierBenefits(dashboardData?.user_tier || 'free');\n  const totals = calculateTotals();\n\n  const handleSponsorContent = (content: any) => setSelectedContentForSponsorship(content);\n\n  const getPackageDetails = (packageId: string) => {\n    const packages = {\n      'quick-boost': { name: 'Quick Boost', gems: 25, hours: 1, multiplier: 1.5 },\n      'popular-boost': { name: 'Popular Boost', gems: 50, hours: 6, multiplier: 2.0 },\n      'daily-featured': { name: 'Daily Feature', gems: 100, hours: 24, multiplier: 3.0 },\n      'premium-spotlight': { name: 'Premium Spotlight', gems: 200, hours: 72, multiplier: 4.0 },\n      'viral-campaign': { name: 'Viral Campaign', gems: 500, hours: 168, multiplier: 6.0 }\n    };\n    return packages[packageId as keyof typeof packages] || packages['quick-boost'];\n  };\n\n  const handleSaveBrandProfile = async (brandData: any) => {\n    setSavingBrand(true);\n    try {\n      const response = await fetch('/api/users/brand-profile', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify(brandData)\n      });\n\n      if (response.ok) {\n        setShowBrandModal(false);\n        fetchUserData();\n      } else {\n        const errorData = await response.json();\n        alert(errorData.error || 'Failed to save brand profile');\n      }\n    } catch (err) {\n      console.error('Error saving brand profile:', err);\n      alert('Failed to save brand profile');\n    } finally {\n      setSavingBrand(false);\n    }\n  };\n\n  useEffect(() => {\n    if (\n      location.pathname === '/advertiser/campaigns' ||\n      location.pathname.startsWith('/advertiser/campaigns/') ||\n      location.pathname === '/campaigns' ||\n      location.pathname.startsWith('/campaigns/')\n    ) {\n      setActiveTab('campaigns');\n    } else {\n      setActiveTab('dashboard');\n    }\n  }, [location.pathname]);\n\n  const handleTabChange = (value: string) => {\n    if (value === 'campaigns') {\n      navigate('/advertiser/campaigns');\n    } else {\n      navigate('/advertiser');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"bg-red-50 border border-red-200 rounded-xl p-6 text-center\">\n          <h2 className=\"text-xl font-semibold text-red-900 mb-2\">Error Loading Dashboard</h2>\n          <p className=\"text-red-700 mb-4\">{error}</p>\n          <button\n            onClick={() => window.location.reload()}\n            className=\"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-xl font-medium transition-colors\"\n          >\n            Refresh Page\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (!userData) {\n    return null;\n  }\n\n  if ((userData as any).user_type !== 'advertiser') {\n    return (\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-8 text-center\">\n          <div className=\"w-16 h-16 bg-blue-100 rounded-2xl flex items-center justify-center mx-auto mb-6\">\n            <Megaphone className=\"w-8 h-8 text-blue-600\" />\n          </div>\n          <h2 className=\"text-2xl font-bold text-blue-900 mb-4\">Become an Advertiser</h2>\n          <p className=\"text-blue-700 mb-6 max-w-md mx-auto\">\n            Your account is not yet set up for advertising. Click below to become an advertiser and start creating\n            marketing campaigns.\n          </p>\n          <Link\n            to=\"/advertiser/onboarding\"\n            className=\"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-4 rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-xl\"\n          >\n            Become an Advertiser\n          </Link>\n          <p className=\"text-sm text-gray-500 mt-4\">\n            Free to get started • No setup fees • Create your first campaign\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!dashboardData) {\n    return (\n      <div className=\"text-center py-12\">\n        <Users className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n        <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Loading Dashboard...</h3>\n        <p className=\"text-gray-600\">Please wait while we load your advertiser dashboard.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"border-b border-gray-200\">\n        <Tabs value={activeTab} onValueChange={handleTabChange} className=\"w-full\">\n          <TabsList className=\"bg-transparent p-0 rounded-none\">\n            <TabsTrigger\n              value=\"dashboard\"\n              className=\"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none px-4 py-3 text-sm font-medium\"\n            >\n              <LayoutDashboard className=\"mr-2 h-4 w-4\" />\n              Dashboard\n            </TabsTrigger>\n            <TabsTrigger\n              value=\"campaigns\"\n              className=\"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none px-4 py-3 text-sm font-medium\"\n            >\n              <Megaphone className=\"mr-2 h-4 w-4\" />\n              Campaigns\n            </TabsTrigger>\n          </TabsList>\n        </Tabs>\n      </div>\n\n      {activeTab === 'campaigns' ? (\n        <div className=\"space-y-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h2 className=\"text-2xl font-bold text-gray-900\">Campaigns</h2>\n              <p className=\"text-sm text-gray-500\">Manage your marketing campaigns and track performance</p>\n            </div>\n            <Button\n              onClick={() => navigate('/campaigns/new')}\n              className=\"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200\"\n            >\n              <PlusCircle className=\"w-4 h-4\" />\n              <span>New Campaign</span>\n            </Button>\n          </div>\n          <Campaigns showHeader={false} basePath=\"/advertiser/campaigns\" />\n        </div>\n      ) : (\n        <>\n          {/* Header */}\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              <div>\n                {(userData as any)?.brand_name ? (\n                  <div className=\"flex items-center space-x-3 mb-2\">\n                    <div className=\"w-12 h-12 bg-gray-100 rounded-xl flex items-center justify-center overflow-hidden border border-gray-200\">\n                      {(userData as any)?.brand_logo_url ? (\n                        <img\n                          src={(userData as any).brand_logo_url}\n                          alt=\"Brand logo\"\n                          className=\"w-full h-full object-cover\"\n                        />\n                      ) : (\n                        <Building2 className=\"w-6 h-6 text-gray-400\" />\n                      )}\n                    </div>\n                    <div>\n                      <div className=\"flex items-center space-x-2\">\n                        <h1 className=\"text-3xl font-bold text-gray-900\">{(userData as any).brand_name}</h1>\n                        <button\n                          onClick={() => setShowBrandModal(true)}\n                          className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n                          title=\"Edit brand profile\"\n                        >\n                          <Edit className=\"w-5 h-5\" />\n                        </button>\n                      </div>\n                      <p className=\"text-gray-600\">\n                        {(userData as any)?.brand_description || 'Manage your campaigns and track performance'}\n                      </p>\n                    </div>\n                  </div>\n                ) : (\n                  <div>\n                    <div className=\"flex items-center space-x-2\">\n                      <h1 className=\"text-3xl font-bold text-gray-900\">Advertiser Dashboard</h1>\n                      <button\n                        onClick={() => setShowBrandModal(true)}\n                        className=\"bg-blue-100 hover:bg-blue-200 text-blue-600 px-3 py-1 rounded-lg text-sm font-medium transition-colors flex items-center space-x-1\"\n                      >\n                        <Building2 className=\"w-4 h-4\" />\n                        <span>Set up brand</span>\n                      </button>\n                    </div>\n                    <p className=\"text-gray-600 mt-2\">Manage your campaigns and track performance</p>\n                  </div>\n                )}\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-3\">\n              <div className={`px-4 py-2 rounded-lg ${tierInfo.color}`}>\n                <span className=\"font-medium\">{tierInfo.name}</span>\n              </div>\n              <button\n                onClick={() => setShowBrandModal(true)}\n                className=\"text-gray-400 hover:text-gray-600 transition-colors p-2 rounded-lg hover:bg-gray-100\"\n                title=\"Brand settings\"\n              >\n                <Settings className=\"w-5 h-5\" />\n              </button>\n            </div>\n          </div>\n\n          {/* Inventory Status */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"bg-white rounded-xl p-6 shadow-sm border border-gray-200\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div>\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Sample Inventory</h3>\n                  <p className=\"text-sm text-gray-500\">\n                    Use monthly samples to test promotions before upgrading\n                  </p>\n                </div>\n                <div className=\"bg-orange-100 text-orange-600 px-3 py-1 rounded-full text-xs font-medium\">\n                  Monthly\n                </div>\n              </div>\n              <div className=\"grid grid-cols-3 gap-4\">\n                <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n                  <h4 className=\"text-sm font-medium text-gray-500\">Moves</h4>\n                  <p className=\"text-xl font-semibold text-gray-900\">\n                    {dashboardData?.monthly_inventory?.moves_used ?? 0}/50\n                  </p>\n                </div>\n                <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n                  <h4 className=\"text-sm font-medium text-gray-500\">Proof Drops</h4>\n                  <p className=\"text-xl font-semibold text-gray-900\">\n                    {dashboardData?.monthly_inventory?.proof_drops_used ?? 0}/5\n                  </p>\n                </div>\n                <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n                  <h4 className=\"text-sm font-medium text-gray-500\">Paid Drops</h4>\n                  <p className=\"text-xl font-semibold text-gray-900\">Upgrade</p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl p-6 shadow-sm border border-gray-200\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div>\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Weekly Allocation</h3>\n                  <p className=\"text-sm text-gray-500\">Upgrade to unlock weekly inventory packs</p>\n                </div>\n                <div className=\"bg-purple-100 text-purple-600 px-3 py-1 rounded-full text-xs font-medium\">\n                  Upgrade\n                </div>\n              </div>\n              <div className=\"grid grid-cols-3 gap-4\">\n                <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n                  <h4 className=\"text-sm font-medium text-gray-500\">Moves</h4>\n                  <p className=\"text-xl font-semibold text-gray-900\">200</p>\n                  <span className=\"text-xs text-gray-500\">Premium tier</span>\n                </div>\n                <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n                  <h4 className=\"text-sm font-medium text-gray-500\">Proof Drops</h4>\n                  <p className=\"text-xl font-semibold text-gray-900\">15</p>\n                </div>\n                <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n                  <h4 className=\"text-sm font-medium text-gray-500\">Paid Drops</h4>\n                  <p className=\"text-xl font-semibold text-gray-900\">8</p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* KPI Cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            <KPICard\n              title=\"Total Drops\"\n              value={totals.totalDrops}\n              change={12}\n              changeType=\"increase\"\n              icon={<BarChart3 className=\"w-5 h-5\" />}\n              trend={analyticsData.slice(-7).map(d => ({ date: d.date, value: Math.floor(Math.random() * 20) + 5 }))}\n            />\n            <KPICard\n              title=\"Total Participants\"\n              value={totals.totalParticipants.toLocaleString()}\n              change={8}\n              changeType=\"increase\"\n              icon={<Users className=\"w-5 h-5\" />}\n              trend={analyticsData.slice(-7).map(d => ({ date: d.date, value: d.participants }))}\n            />\n            <KPICard\n              title=\"Gems Distributed\"\n              value={totals.totalGems.toFixed(1)}\n              change={15}\n              changeType=\"increase\"\n              icon={<Diamond className=\"w-5 h-5\" />}\n              trend={analyticsData.slice(-7).map(d => ({ date: d.date, value: d.spent }))}\n            />\n            <KPICard\n              title=\"Avg. Engagement\"\n              value={`${dashboardData.analytics.length > 0\n                ? (\n                    dashboardData.analytics.reduce(\n                      (sum, a) => sum + (a.engagement_rate || 0),\n                      0\n                    ) / dashboardData.analytics.length\n                  ).toFixed(1)\n                : '8.5'}%`}\n              change={3}\n              changeType=\"increase\"\n              icon={<TrendingUp className=\"w-5 h-5\" />}\n              trend={analyticsData.slice(-7).map(d => ({ date: d.date, value: Math.floor(Math.random() * 20) + 5 }))}\n            />\n          </div>\n\n          {/* Suggested Content */}\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200\">\n            <div className=\"p-6 border-b border-gray-200\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center\">\n                    <Sparkles className=\"w-5 h-5 text-white\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-lg font-semibold text-gray-900\">Suggested Content to Sponsor</h3>\n                    <p className=\"text-sm text-gray-600\">High-performing content perfect for your brand</p>\n                  </div>\n                </div>\n                <div className=\"flex items-center space-x-2 text-sm text-gray-500\">\n                  <ExternalLink className=\"w-4 h-4\" />\n                  <span>Last updated just now</span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"p-6\">\n              {loadingSuggestions ? (\n                <div className=\"text-center py-8 text-gray-500\">Loading suggestions...</div>\n              ) : suggestedContent.length > 0 ? (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {suggestedContent.slice(0, 6).map(content => {\n                    const packageDetails = getPackageDetails(content.suggested_package);\n                    return (\n                      <div key={content.id} className=\"border border-gray-200 rounded-lg p-4 hover:border-purple-300 transition-colors\">\n                        <div className=\"flex items-start justify-between mb-3\">\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center space-x-2 mb-2\">\n                              <span className=\"text-xs font-medium text-purple-600 bg-purple-50 px-2 py-1 rounded-full\">\n                                {content.platform}\n                              </span>\n                              {content.is_trending && (\n                                <span className=\"text-xs font-medium text-orange-600 bg-orange-50 px-2 py-1 rounded-full\">\n                                  Trending\n                                </span>\n                              )}\n                            </div>\n                            <h4 className=\"font-semibold text-gray-900\">{content.title}</h4>\n                            <p className=\"text-sm text-gray-600 line-clamp-2 mt-1\">{content.description}</p>\n                          </div>\n                          <button\n                            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n                            onClick={() => window.open(content.platform_url, '_blank')}\n                          >\n                            <ExternalLink className=\"w-4 h-4\" />\n                          </button>\n                        </div>\n\n                        <div className=\"grid grid-cols-3 gap-3 text-center text-sm mb-3\">\n                          <div>\n                            <p className=\"font-semibold text-gray-900\">{content.total_engagement}</p>\n                            <p className=\"text-xs text-gray-500\">Engagement</p>\n                          </div>\n                          <div>\n                            <p className=\"font-semibold text-gray-900\">{content.engagement_rate}%</p>\n                            <p className=\"text-xs text-gray-500\">Eng. Rate</p>\n                          </div>\n                          <div>\n                            <p className=\"font-semibold text-gray-900\">{content.roi_potential}%</p>\n                            <p className=\"text-xs text-gray-500\">ROI Potential</p>\n                          </div>\n                        </div>\n\n                        <div className=\"bg-gray-50 rounded-lg p-3 mb-3\">\n                          <div className=\"text-xs text-gray-600 mb-1\">Suggested Package:</div>\n                          <div className=\"flex items-center justify-between\">\n                            <div>\n                              <div className=\"font-medium text-gray-900\">{packageDetails.name}</div>\n                              <div className=\"text-xs text-gray-500\">\n                                {packageDetails.hours}h • {packageDetails.multiplier}x boost\n                              </div>\n                            </div>\n                            <div className=\"flex items-center space-x-1 text-purple-600 font-semibold\">\n                              <Diamond className=\"w-3 h-3\" />\n                              <span>{packageDetails.gems}</span>\n                            </div>\n                          </div>\n                        </div>\n\n                        <button\n                          onClick={() => handleSponsorContent(content)}\n                          className=\"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-2 px-4 rounded-lg font-medium transition-all duration-200 text-sm\"\n                        >\n                          Sponsor This Content\n                        </button>\n                      </div>\n                    );\n                  })}\n                </div>\n              ) : (\n                <div className=\"text-center py-8\">\n                  <Sparkles className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                  <h4 className=\"text-lg font-semibold text-gray-900 mb-2\">No suggestions available</h4>\n                  <p className=\"text-gray-600\">We'll find great content for you to sponsor soon!</p>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Advanced Analytics */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900\">Campaign Performance</h3>\n                <div className=\"flex items-center space-x-2 text-sm text-gray-600\">\n                  <Calendar className=\"w-4 h-4\" />\n                  <span>Last 30 days</span>\n                </div>\n              </div>\n              <MultiMetricChart\n                data={analyticsData}\n                height={300}\n                metrics={[\n                  { key: 'applications', name: 'Applications', color: '#f97316' },\n                  { key: 'conversions', name: 'Conversions', color: '#10b981' },\n                  { key: 'clicks', name: 'Clicks', color: '#3b82f6' }\n                ]}\n              />\n            </div>\n\n            <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">Drop Type Distribution</h3>\n              <ActivityBreakdown data={dropTypeBreakdown} height={300} />\n            </div>\n\n            <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">Key Performance Indicators</h3>\n              <PerformanceMetrics data={campaignPerformance} height={300} />\n            </div>\n\n            <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">Spending & Engagement Trends</h3>\n              <TrendLine\n                data={analyticsData.map(d => ({\n                  date: d.date,\n                  value: d.spent,\n                  secondary: d.impressions / 10\n                }))}\n                height={300}\n                primaryKey=\"value\"\n                secondaryKey=\"secondary\"\n                primaryColor=\"#f97316\"\n                secondaryColor=\"#8b5cf6\"\n              />\n            </div>\n          </div>\n\n          {/* Real-time Metrics */}\n          <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">Real-time Campaign Metrics</h3>\n            <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n              <div className=\"text-center p-4 bg-blue-50 rounded-lg\">\n                <Eye className=\"w-6 h-6 text-blue-600 mx-auto mb-2\" />\n                <p className=\"text-2xl font-bold text-blue-900\">24.3K</p>\n                <p className=\"text-sm text-blue-600\">Impressions</p>\n              </div>\n              <div className=\"text-center p-4 bg-green-50 rounded-lg\">\n                <MousePointer className=\"w-6 h-6 text-green-600 mx-auto mb-2\" />\n                <p className=\"text-2xl font-bold text-green-900\">1.2K</p>\n                <p className=\"text-sm text-green-600\">Clicks</p>\n              </div>\n              <div className=\"text-center p-4 bg-purple-50 rounded-lg\">\n                <Target className=\"w-6 h-6 text-purple-600 mx-auto mb-2\" />\n                <p className=\"text-2xl font-bold text-purple-900\">156</p>\n                <p className=\"text-sm text-purple-600\">Applications</p>\n              </div>\n              <div className=\"text-center p-4 bg-orange-50 rounded-lg\">\n                <Users className=\"w-6 h-6 text-orange-600 mx-auto mb-2\" />\n                <p className=\"text-2xl font-bold text-orange-900\">89</p>\n                <p className=\"text-sm text-orange-600\">Conversions</p>\n              </div>\n              <div className=\"text-center p-4 bg-yellow-50 rounded-lg\">\n                <DollarSign className=\"w-6 h-6 text-yellow-600 mx-auto mb-2\" />\n                <p className=\"text-2xl font-bold text-yellow-900\">$0.78</p>\n                <p className=\"text-sm text-yellow-600\">Cost/Convert</p>\n              </div>\n              <div className=\"text-center p-4 bg-red-50 rounded-lg\">\n                <TrendingUp className=\"w-6 h-6 text-red-600 mx-auto mb-2\" />\n                <p className=\"text-2xl font-bold text-red-900\">4.2%</p>\n                <p className=\"text-sm text-red-600\">CTR</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Recent Drops */}\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200\">\n            <div className=\"p-6 border-b border-gray-200\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-lg font-semibold text-gray-900\">Recent Drops</h3>\n                {userData && (userData as any).user_type === 'advertiser' && (\n                  <div className=\"flex space-x-2\">\n                    <button\n                      onClick={() => window.location.href = '/earn?create=proof'}\n                      className=\"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200\"\n                    >\n                      <Plus className=\"w-4 h-4\" />\n                      <span>Create Proof Drop</span>\n                    </button>\n                    {dashboardData?.user_tier !== 'free' && (\n                      <button\n                        onClick={() => window.location.href = '/earn?create=paid'}\n                        className=\"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200\"\n                      >\n                        <Plus className=\"w-4 h-4\" />\n                        <span>Create Paid Drop</span>\n                      </button>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n            <div className=\"p-6\">\n              {dashboardData.drops.length > 0 ? (\n                <div className=\"space-y-4\">\n                  {dashboardData.drops.slice(0, 5).map((drop: any) => (\n                    <div key={drop.id} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n                      <div className=\"flex-1\">\n                        <h4 className=\"font-medium text-gray-900\">{drop.title}</h4>\n                        <p className=\"text-sm text-gray-600 mt-1\">{drop.description}</p>\n                        <div className=\"flex items-center space-x-4 mt-2 text-sm text-gray-500\">\n                          <span className=\"flex items-center space-x-1\">\n                            <Users className=\"w-4 h-4\" />\n                            <span>{drop.total_applications || 0} applicants</span>\n                          </span>\n                          <span className=\"flex items-center space-x-1\">\n                            <Diamond className=\"w-4 h-4\" />\n                            <span>{drop.gem_reward_base} gems</span>\n                          </span>\n                          <span className=\"flex items-center space-x-1\">\n                            <Calendar className=\"w-4 h-4\" />\n                            <span>{new Date(drop.created_at).toLocaleDateString()}</span>\n                          </span>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center space-x-2\">\n                        <span\n                          className={`px-3 py-1 rounded-full text-xs font-medium ${\n                            drop.status === 'active' ? 'text-green-600 bg-green-100' : 'text-gray-600 bg-gray-100'\n                          }`}\n                        >\n                          {drop.status}\n                        </span>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-8\">\n                  <BarChart3 className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                  <h4 className=\"text-lg font-semibold text-gray-900 mb-2\">No drops yet</h4>\n                  <p className=\"text-gray-600 mb-4\">Create your first drop to start engaging with creators.</p>\n                  {userData && (userData as any).user_type === 'advertiser' && (\n                    <button\n                      onClick={() => window.location.href = '/earn?create=proof'}\n                      className=\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-2 rounded-lg font-medium\"\n                    >\n                      Create Your First Drop\n                    </button>\n                  )}\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Analytics Table */}\n          {dashboardData.analytics.length > 0 && (\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-200\">\n              <div className=\"p-6 border-b border-gray-200\">\n                <h3 className=\"text-lg font-semibold text-gray-900\">Performance Analytics</h3>\n              </div>\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-gray-50\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Period\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Drops\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Participants\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Gems Spent\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Impressions\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Engagement\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {dashboardData.analytics.slice(0, 10).map((analytics) => (\n                      <tr key={analytics.id} className=\"hover:bg-gray-50\">\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                          {new Date(analytics.period_start).toLocaleDateString()} -{' '}\n                          {new Date(analytics.period_end).toLocaleDateString()}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{analytics.drops_created}</td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{analytics.total_participants}</td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                          {analytics.gems_spent.toFixed(1)}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                          {analytics.impressions.toLocaleString()}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                          {analytics.engagement_rate.toFixed(1)}%\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          )}\n        </>\n      )}\n\n      {selectedContentForSponsorship && (\n        <SponsorshipModal\n          isOpen={true}\n          onClose={() => setSelectedContentForSponsorship(null)}\n          onSponsor={async (gemAmount: number, boostMultiplier: number, durationHours: number) => {\n            try {\n              const response = await fetch('/api/content/sponsor', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                credentials: 'include',\n                body: JSON.stringify({\n                  contentId: selectedContentForSponsorship.id,\n                  gemAmount,\n                  boostMultiplier,\n                  durationHours\n                })\n              });\n\n              if (response.ok) {\n                setSelectedContentForSponsorship(null);\n                fetchSuggestedContent();\n              } else {\n                console.error('Failed to sponsor content');\n              }\n            } catch (err) {\n              console.error('Error sponsoring content:', err);\n            }\n          }}\n          contentTitle={selectedContentForSponsorship.title}\n          userGems={(userData as any)?.gems_balance || 0}\n        />\n      )}\n\n      <BrandProfileModal\n        isOpen={showBrandModal}\n        onClose={() => setShowBrandModal(false)}\n        onSave={handleSaveBrandProfile}\n        currentBrandData={userData as any}\n        loading={savingBrand}\n      />\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { useAuth } from '../hooks/useAuth';\nimport { useNavigate } from \"react-router-dom\";\nimport { \n  Megaphone, \n  Users, \n  TrendingUp, \n  Star, \n  CheckCircle, \n  ArrowRight,\n  Crown,\n  Zap,\n  BarChart3,\n  Target,\n  DollarSign\n} from 'lucide-react';\n\nexport default function AdvertiserOnboarding() {\n  const { user, demoLogin } = useAuth();\n  const navigate = useNavigate();\n  const [isConverting, setIsConverting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleBecomeAdvertiser = async () => {\n    if (!user) {\n      navigate('/?error=auth_required');\n      return;\n    }\n\n    setIsConverting(true);\n    setError(null);\n\n    try {\n      const response = await fetch('/api/users/become-advertiser', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('authToken') || ''}`\n        },\n        credentials: 'include'\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n\n        if (data.token && data.user) {\n          localStorage.setItem('authToken', data.token);\n          localStorage.setItem('advertiser_conversion', 'true');\n          window.location.href = '/advertiser#converted';\n          return;\n        }\n\n        localStorage.setItem('advertiser_conversion', 'true');\n        window.location.href = '/advertiser#converted';\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Failed to become advertiser');\n      }\n    } catch (error) {\n      console.error('Error becoming advertiser:', error);\n      setError('Network error occurred');\n    } finally {\n      setIsConverting(false);\n    }\n  };\n\n  const tierBenefits = {\n    free: {\n      name: 'Free Advertiser',\n      color: 'text-gray-600 bg-gray-50 border-gray-200',\n      inventory: 'Monthly Sample: 50 moves, 5 proof drops',\n      features: ['Basic analytics', 'Standard support', 'Create proof drops only', 'Sponsor any content with gems']\n    },\n    premium: {\n      name: 'Premium Advertiser',\n      color: 'text-purple-600 bg-purple-50 border-purple-200', \n      inventory: 'Weekly: 200 moves, 15 proof drops, 8 paid drops',\n      features: ['Advanced analytics', 'Priority support', 'Custom targeting', 'Create proof & paid drops', 'Sponsor content with gems']\n    },\n    super: {\n      name: 'Super Advertiser',\n      color: 'text-yellow-600 bg-yellow-50 border-yellow-200',\n      inventory: 'Weekly: 500 moves, 25 proof drops, 15 paid drops',\n      features: ['Premium analytics', 'Priority support', 'Custom targeting', 'Advanced reporting', 'Create proof & paid drops', 'Sponsor content with gems']\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-purple-50\">\n      {/* Hero Section */}\n      <div className=\"relative overflow-hidden bg-gradient-to-r from-orange-500 to-red-500\">\n        <div className=\"absolute inset-0 bg-black/10\"></div>\n        <div className=\"relative z-10 px-6 py-20\">\n          <div className=\"max-w-4xl mx-auto text-center text-white\">\n            <div className=\"flex justify-center mb-6\">\n              <div className=\"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center\">\n                <Megaphone className=\"w-8 h-8\" />\n              </div>\n            </div>\n            <h1 className=\"text-5xl md:text-6xl font-bold mb-6\">\n              Advertise on Promorang\n            </h1>\n            <p className=\"text-xl md:text-2xl mb-8 text-orange-100 max-w-3xl mx-auto\">\n              Connect with thousands of creators and build authentic campaigns that drive real engagement\n            </p>\n            <div className=\"flex items-center justify-center space-x-8 text-orange-100\">\n              <div className=\"flex items-center space-x-2\">\n                <Users className=\"w-5 h-5\" />\n                <span>50k+ Active Creators</span>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <TrendingUp className=\"w-5 h-5\" />\n                <span>95% Completion Rate</span>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Star className=\"w-5 h-5\" />\n                <span>4.9★ Average Rating</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"max-w-6xl mx-auto px-6 py-16\">\n        {/* Benefits Section */}\n        <div className=\"mb-16\">\n          <h2 className=\"text-4xl font-bold text-center text-gray-900 mb-12\">\n            Why Choose Promorang for Advertising?\n          </h2>\n          \n          <div className=\"grid md:grid-cols-3 gap-8\">\n            <div className=\"bg-white rounded-2xl p-8 shadow-sm border border-gray-200 hover:shadow-lg transition-shadow\">\n              <div className=\"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mb-6\">\n                <Target className=\"w-6 h-6 text-blue-600\" />\n              </div>\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-4\">Moves & Proof System</h3>\n              <p className=\"text-gray-600\">\n                Create \"moves\" that help users earn keys for their Master Key progression, and \"proof drops\" that contribute to daily activation requirements.\n              </p>\n            </div>\n\n            <div className=\"bg-white rounded-2xl p-8 shadow-sm border border-gray-200 hover:shadow-lg transition-shadow\">\n              <div className=\"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mb-6\">\n                <BarChart3 className=\"w-6 h-6 text-green-600\" />\n              </div>\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-4\">Flexible Inventory System</h3>\n              <p className=\"text-gray-600\">\n                Start with free monthly samples, then upgrade to weekly inventory allocations for moves, proof drops, and paid opportunities.\n              </p>\n            </div>\n\n            <div className=\"bg-white rounded-2xl p-8 shadow-sm border border-gray-200 hover:shadow-lg transition-shadow\">\n              <div className=\"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mb-6\">\n                <DollarSign className=\"w-6 h-6 text-purple-600\" />\n              </div>\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-4\">Gem Sponsorship System</h3>\n              <p className=\"text-gray-600\">\n                All advertisers can allocate gems to sponsor any content, boosting visibility and engagement regardless of tier level.\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Advertiser Tiers */}\n        <div className=\"mb-16\">\n          <h2 className=\"text-4xl font-bold text-center text-gray-900 mb-4\">\n            Advertiser Tiers\n          </h2>\n          <p className=\"text-center text-gray-600 mb-12 text-lg\">\n            Choose the tier that matches your advertising needs and scale\n          </p>\n          \n          <div className=\"grid md:grid-cols-3 gap-8\">\n            {Object.entries(tierBenefits).map(([tier, info]) => (\n              <div key={tier} className={`border-2 rounded-2xl p-8 ${info.color} relative`}>\n                {tier === 'premium' && (\n                  <div className=\"absolute -top-3 left-1/2 transform -translate-x-1/2\">\n                    <span className=\"bg-purple-500 text-white px-4 py-1 rounded-full text-sm font-medium\">\n                      Most Popular\n                    </span>\n                  </div>\n                )}\n                \n                <div className=\"text-center mb-6\">\n                  <div className=\"flex justify-center mb-4\">\n                    {tier === 'free' && <Zap className=\"w-8 h-8 text-gray-600\" />}\n                    {tier === 'premium' && <Star className=\"w-8 h-8 text-purple-600\" />}\n                    {tier === 'super' && <Crown className=\"w-8 h-8 text-yellow-600\" />}\n                  </div>\n                  <h3 className=\"text-2xl font-bold mb-2\">{info.name}</h3>\n                  <p className=\"text-lg font-semibold\">{info.inventory}</p>\n                  <p className=\"text-sm opacity-75\">\n                    {tier === 'free' ? 'Sample inventory allocation' : 'Weekly inventory allocation'}\n                  </p>\n                </div>\n                \n                <ul className=\"space-y-3 mb-6\">\n                  {info.features.map((feature, index) => (\n                    <li key={index} className=\"flex items-center space-x-2\">\n                      <CheckCircle className=\"w-4 h-4 text-green-600 flex-shrink-0\" />\n                      <span className=\"text-sm\">{feature}</span>\n                    </li>\n                  ))}\n                </ul>\n                \n                {tier === 'free' && (\n                  <p className=\"text-xs opacity-75 text-center\">\n                    Free tier can create proof drops and sponsor content. Upgrade to create paid drops.\n                  </p>\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* How It Works */}\n        <div className=\"mb-16\">\n          <h2 className=\"text-4xl font-bold text-center text-gray-900 mb-12\">\n            How It Works\n          </h2>\n          \n          <div className=\"grid md:grid-cols-4 gap-8\">\n            <div className=\"text-center\">\n              <div className=\"w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4\">\n                <span className=\"text-white font-bold text-xl\">1</span>\n              </div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Create Campaigns</h3>\n              <p className=\"text-gray-600 text-sm\">\n                Set up drops with your requirements, budget, and target audience\n              </p>\n            </div>\n\n            <div className=\"text-center\">\n              <div className=\"w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4\">\n                <span className=\"text-white font-bold text-xl\">2</span>\n              </div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Creators Apply</h3>\n              <p className=\"text-gray-600 text-sm\">\n                Qualified creators apply to your campaigns with their proposals\n              </p>\n            </div>\n\n            <div className=\"text-center\">\n              <div className=\"w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4\">\n                <span className=\"text-white font-bold text-xl\">3</span>\n              </div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Review & Approve</h3>\n              <p className=\"text-gray-600 text-sm\">\n                Review submissions and approve the best content for your brand\n              </p>\n            </div>\n\n            <div className=\"text-center\">\n              <div className=\"w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4\">\n                <span className=\"text-white font-bold text-xl\">4</span>\n              </div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Track Results</h3>\n              <p className=\"text-gray-600 text-sm\">\n                Monitor performance and measure ROI with detailed analytics\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* CTA Section */}\n        <div className=\"bg-white rounded-2xl shadow-lg border border-gray-200 p-12 text-center\">\n          <div className=\"max-w-2xl mx-auto\">\n            <h2 className=\"text-3xl font-bold text-gray-900 mb-4\">\n              Ready to Start Advertising?\n            </h2>\n            <p className=\"text-gray-600 mb-8 text-lg\">\n              Join hundreds of brands already using Promorang to create authentic, high-performing campaigns\n            </p>\n            \n            {error && (\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-3 mb-6\">\n                <p className=\"text-sm text-red-700\">{error}</p>\n              </div>\n            )}\n            \n            <button\n              onClick={handleBecomeAdvertiser}\n              disabled={isConverting}\n              className=\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold px-8 py-4 rounded-xl text-lg transition-all duration-200 transform hover:scale-105 shadow-lg flex items-center space-x-2 mx-auto\"\n            >\n              {isConverting ? (\n                <>\n                  <div className=\"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full\"></div>\n                  <span>Setting up your account...</span>\n                </>\n              ) : (\n                <>\n                  <span>Become an Advertiser</span>\n                  <ArrowRight className=\"w-5 h-5\" />\n                </>\n              )}\n            </button>\n            \n            <p className=\"text-sm text-gray-500 mt-4\">\n              Free to get started • No setup fees • Pay only for completed work\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { \n  ArrowLeft, \n  BarChart2, \n  Calendar, \n  DollarSign, \n  Edit, \n  ExternalLink, \n  MoreVertical, \n  Pause, \n  Play, \n  RefreshCw, \n  Settings, \n  Target, \n  Trash2, \n  Users,\n  Plus,\n  Save\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { format } from 'date-fns';\nimport { cn } from '@/lib/utils';\n\ntype CampaignStatus = 'active' | 'paused' | 'draft' | 'completed';\n\ntype Campaign = {\n  id: string;\n  name: string;\n  status: CampaignStatus;\n  objective: string;\n  description?: string;\n  startDate: string;\n  endDate?: string;\n  budget: number;\n  spent: number;\n  dailyBudget: number;\n  impressions: number;\n  clicks: number;\n  ctr: number;\n  cpc: number;\n  drops: number;\n  participants: number;\n  bidStrategy: string;\n  bidAmount: number;\n  targetCtr: number;\n  targetCpc: number;\n  createdAt: string;\n  updatedAt: string;\n};\n\ntype CampaignContent = {\n  id: string;\n  title: string;\n  platform: string;\n  creator: string;\n  status: 'pending' | 'approved' | 'rejected' | 'live' | 'completed';\n  budget: number;\n  spent: number;\n  impressions: number;\n  clicks: number;\n  ctr: number;\n  cpc: number;\n  startDate: string;\n  endDate?: string;\n};\n\nconst statusStyles: Record<CampaignStatus, string> = {\n  active: 'bg-green-100 text-green-800',\n  paused: 'bg-yellow-100 text-yellow-800',\n  draft: 'bg-blue-100 text-blue-800',\n  completed: 'bg-gray-100 text-gray-800',\n};\n\nexport default function CampaignDetail() {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const [campaign, setCampaign] = useState<Campaign | null>(null);\n  const [content, setContent] = useState<CampaignContent[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [activeTab, setActiveTab] = useState('overview');\n  const [isUpdating, setIsUpdating] = useState(false);\n\n  useEffect(() => {\n    const fetchCampaign = async () => {\n      try {\n        setLoading(true);\n        // TODO: Replace with actual API call\n        await new Promise(resolve => setTimeout(resolve, 500));\n        \n        // Mock data\n        const mockCampaign: Campaign = {\n          id: id || '1',\n          name: 'Summer Collection Launch',\n          status: 'active',\n          objective: 'engagement',\n          description: 'Promoting our new summer collection to drive engagement and sales.',\n          startDate: '2025-06-01',\n          endDate: '2025-08-31',\n          budget: 5000,\n          spent: 1250,\n          dailyBudget: 100,\n          impressions: 125000,\n          clicks: 2500,\n          ctr: 2.0,\n          cpc: 0.5,\n          drops: 12,\n          participants: 2450,\n          bidStrategy: 'lowest_cost',\n          bidAmount: 5,\n          targetCtr: 2.0,\n          targetCpc: 0.5,\n          createdAt: '2025-05-15T10:30:00Z',\n          updatedAt: '2025-06-15T14:45:00Z',\n        };\n        \n        const mockContent: CampaignContent[] = [\n          {\n            id: 'c1',\n            title: 'Summer Lookbook',\n            platform: 'Instagram',\n            creator: 'fashion_influencer',\n            status: 'live',\n            budget: 1000,\n            spent: 450,\n            impressions: 50000,\n            clicks: 1200,\n            ctr: 2.4,\n            cpc: 0.38,\n            startDate: '2025-06-01',\n            endDate: '2025-06-30',\n          },\n          {\n            id: 'c2',\n            title: 'Beachwear Showcase',\n            platform: 'TikTok',\n            creator: 'beachvibes',\n            status: 'live',\n            budget: 1500,\n            spent: 800,\n            impressions: 75000,\n            clicks: 1300,\n            ctr: 1.7,\n            cpc: 0.62,\n            startDate: '2025-06-05',\n            endDate: '2025-07-05',\n          },\n        ];\n        \n        setCampaign(mockCampaign);\n        setContent(mockContent);\n      } catch (err) {\n        console.error('Failed to fetch campaign:', err);\n        setError('Failed to load campaign details. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchCampaign();\n  }, [id]);\n\n  const handleStatusChange = async (newStatus: CampaignStatus) => {\n    if (!campaign) return;\n    \n    try {\n      setIsUpdating(true);\n      // TODO: Replace with actual API call\n      await new Promise(resolve => setTimeout(resolve, 500));\n      \n      setCampaign({\n        ...campaign,\n        status: newStatus,\n        updatedAt: new Date().toISOString(),\n      });\n    } catch (err) {\n      console.error('Failed to update campaign status:', err);\n      // Handle error (show toast, etc.)\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 2,\n    }).format(amount);\n  };\n\n  const formatNumber = (num: number) => {\n    return new Intl.NumberFormat('en-US').format(num);\n  };\n\n  const formatDate = (dateString: string) => {\n    return format(new Date(dateString), 'MMM d, yyyy');\n  };\n\n  const getDaysRemaining = (endDate: string) => {\n    const today = new Date();\n    const end = new Date(endDate);\n    const diffTime = end.getTime() - today.getTime();\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 border-l-4 border-red-400 p-4\">\n        <div className=\"flex\">\n          <div className=\"flex-shrink-0\">\n            <svg className=\"h-5 w-5 text-red-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n              <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n            </svg>\n          </div>\n          <div className=\"ml-3\">\n            <p className=\"text-sm text-red-700\">{error}</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!campaign) {\n    return (\n      <div className=\"text-center py-12\">\n        <h3 className=\"text-lg font-medium text-gray-900\">Campaign not found</h3>\n        <p className=\"mt-1 text-sm text-gray-500\">The requested campaign could not be found.</p>\n        <div className=\"mt-6\">\n          <Button onClick={() => navigate(-1)} variant=\"outline\">\n            <ArrowLeft className=\"-ml-1 mr-2 h-4 w-4\" />\n            Back to Campaigns\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  const daysRemaining = campaign.endDate ? getDaysRemaining(campaign.endDate) : null;\n  const progress = (campaign.spent / campaign.budget) * 100;\n  const dailySpendRate = campaign.spent / (Math.ceil((new Date().getTime() - new Date(campaign.startDate).getTime()) / (1000 * 60 * 60 * 24)) || 1);\n  const estimatedEndDate = campaign.dailyBudget > 0 \n    ? new Date(Date.now() + ((campaign.budget - campaign.spent) / campaign.dailyBudget) * 24 * 60 * 60 * 1000)\n    : null;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0\">\n        <div className=\"flex items-center space-x-4\">\n          <Button \n            variant=\"outline\" \n            size=\"icon\" \n            onClick={() => navigate(-1)}\n            className=\"h-8 w-8\" \n          >\n            <ArrowLeft className=\"h-4 w-4\" />\n            <span className=\"sr-only\">Back</span>\n          </Button>\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">{campaign.name}</h1>\n            <div className=\"flex items-center mt-1 space-x-2\">\n              <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${statusStyles[campaign.status]}`}>\n                {campaign.status.charAt(0).toUpperCase() + campaign.status.slice(1)}\n              </span>\n              <span className=\"text-sm text-gray-500\">\n                {formatDate(campaign.startDate)}\n                {campaign.endDate && ` - ${formatDate(campaign.endDate)}`}\n                {daysRemaining !== null && (\n                  <span className=\"ml-1\">\n                    ({daysRemaining > 0 ? `${daysRemaining} days left` : 'Ended'})\n                  </span>\n                )}\n              </span>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"flex space-x-2\">\n          {campaign.status === 'active' && (\n            <Button \n              variant=\"outline\" \n              onClick={() => handleStatusChange('paused')}\n              disabled={isUpdating}\n            >\n              <Pause className=\"mr-2 h-4 w-4\" />\n              Pause\n            </Button>\n          )}\n          \n          {(campaign.status === 'paused' || campaign.status === 'draft') && (\n            <Button \n              onClick={() => handleStatusChange('active')}\n              disabled={isUpdating}\n            >\n              <Play className=\"mr-2 h-4 w-4\" />\n              {campaign.status === 'paused' ? 'Resume' : 'Activate'}\n            </Button>\n          )}\n          \n          <Button variant=\"outline\" asChild>\n            <Link to={`/campaigns/${campaign.id}/edit`}>\n              <Edit className=\"mr-2 h-4 w-4\" />\n              Edit\n            </Link>\n          </Button>\n          \n          <Button variant=\"outline\" size=\"icon\">\n            <MoreVertical className=\"h-4 w-4\" />\n            <span className=\"sr-only\">More</span>\n          </Button>\n        </div>\n      </div>\n\n      {/* Campaign Stats */}\n      <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\">\n        <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n          <div className=\"px-4 py-5 sm:p-6\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0 bg-blue-500 rounded-md p-3\">\n                <DollarSign className=\"h-6 w-6 text-white\" />\n              </div>\n              <div className=\"ml-5 w-0 flex-1\">\n                <dl>\n                  <dt className=\"text-sm font-medium text-gray-500 truncate\">Total Budget</dt>\n                  <dd className=\"flex items-baseline\">\n                    <div className=\"text-2xl font-semibold text-gray-900\">\n                      {formatCurrency(campaign.budget)}\n                    </div>\n                  </dd>\n                </dl>\n              </div>\n            </div>\n            <div className=\"mt-4\">\n              <div className=\"text-sm text-gray-500\">\n                <span className=\"font-medium text-gray-900\">{formatCurrency(campaign.spent)}</span> spent\n                <span className=\"mx-1\">•</span>\n                <span>{formatCurrency(campaign.budget - campaign.spent)} remaining</span>\n              </div>\n              <div className=\"mt-2 w-full bg-gray-200 rounded-full h-2\">\n                <div \n                  className=\"bg-blue-500 h-2 rounded-full\" \n                  style={{ width: `${Math.min(100, progress)}%` }}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n          <div className=\"px-4 py-5 sm:p-6\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0 bg-green-500 rounded-md p-3\">\n                <Users className=\"h-6 w-6 text-white\" />\n              </div>\n              <div className=\"ml-5 w-0 flex-1\">\n                <dl>\n                  <dt className=\"text-sm font-medium text-gray-500 truncate\">Participants</dt>\n                  <dd className=\"flex items-baseline\">\n                    <div className=\"text-2xl font-semibold text-gray-900\">\n                      {formatNumber(campaign.participants)}\n                    </div>\n                  </dd>\n                </dl>\n              </div>\n            </div>\n            <div className=\"mt-4\">\n              <div className=\"text-sm text-gray-500\">\n                <span className=\"font-medium text-gray-900\">{campaign.drops}</span> drops\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n          <div className=\"px-4 py-5 sm:p-6\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0 bg-purple-500 rounded-md p-3\">\n                <BarChart2 className=\"h-6 w-6 text-white\" />\n              </div>\n              <div className=\"ml-5 w-0 flex-1\">\n                <dl>\n                  <dt className=\"text-sm font-medium text-gray-500 truncate\">Impressions</dt>\n                  <dd className=\"flex items-baseline\">\n                    <div className=\"text-2xl font-semibold text-gray-900\">\n                      {formatNumber(campaign.impressions)}\n                    </div>\n                  </dd>\n                </dl>\n              </div>\n            </div>\n            <div className=\"mt-4\">\n              <div className=\"text-sm text-gray-500\">\n                <span className=\"font-medium text-gray-900\">{formatNumber(campaign.clicks)}</span> clicks\n                <span className=\"mx-1\">•</span>\n                <span>{campaign.ctr}% CTR</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n          <div className=\"px-4 py-5 sm:p-6\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0 bg-yellow-500 rounded-md p-3\">\n                <Target className=\"h-6 w-6 text-white\" />\n              </div>\n              <div className=\"ml-5 w-0 flex-1\">\n                <dl>\n                  <dt className=\"text-sm font-medium text-gray-500 truncate\">Performance</dt>\n                  <dd className=\"flex items-baseline\">\n                    <div className=\"text-2xl font-semibold text-gray-900\">\n                      {formatCurrency(campaign.cpc)}\n                    </div>\n                    <div className=\"ml-2 flex items-baseline text-sm font-semibold text-green-600\">\n                      <span>{(campaign.cpc < campaign.targetCpc ? '↓ ' : '↑ ') + Math.abs(campaign.cpc - campaign.targetCpc).toFixed(2)}</span>\n                    </div>\n                  </dd>\n                </dl>\n              </div>\n            </div>\n            <div className=\"mt-4\">\n              <div className=\"text-sm text-gray-500\">\n                <span>Target: {formatCurrency(campaign.targetCpc)} CPC</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"bg-white shadow overflow-hidden sm:rounded-lg\">\n        <Tabs defaultValue=\"overview\" onValueChange={setActiveTab} className=\"w-full\">\n          <div className=\"border-b border-gray-200\">\n            <TabsList className=\"bg-transparent p-0 rounded-none\">\n              <TabsTrigger \n                value=\"overview\" \n                className=\"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none\"\n              >\n                Overview\n              </TabsTrigger>\n              <TabsTrigger \n                value=\"performance\" \n                className=\"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none\"\n              >\n                Performance\n              </TabsTrigger>\n              <TabsTrigger \n                value=\"content\" \n                className=\"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none\"\n              >\n                Content ({content.length})\n              </TabsTrigger>\n              <TabsTrigger \n                value=\"settings\" \n                className=\"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none\"\n              >\n                Settings\n              </TabsTrigger>\n            </TabsList>\n          </div>\n\n          <div className=\"p-6\">\n            <TabsContent value=\"overview\">\n              <div className=\"grid grid-cols-1 gap-8 lg:grid-cols-3\">\n                <div className=\"lg:col-span-2 space-y-8\">\n                  <section className=\"bg-gray-50 p-4 rounded-lg\">\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Campaign Summary</h3>\n                    <p className=\"text-gray-700\">{campaign.description || 'No description provided.'}</p>\n\n                    <div className=\"mt-6 grid grid-cols-1 gap-4 sm:grid-cols-2\">\n                      <div>\n                        <h4 className=\"text-sm font-medium text-gray-500\">Objective</h4>\n                        <p className=\"mt-1 text-sm text-gray-900 capitalize\">\n                          {campaign.objective.replace('_', ' ')}\n                        </p>\n                      </div>\n                      <div>\n                        <h4 className=\"text-sm font-medium text-gray-500\">Bid Strategy</h4>\n                        <p className=\"mt-1 text-sm text-gray-900 capitalize\">\n                          {campaign.bidStrategy === 'lowest_cost'\n                            ? 'Lowest Cost'\n                            : campaign.bidStrategy === 'cost_cap'\n                            ? 'Cost Cap'\n                            : 'Bid Cap'}\n                        </p>\n                      </div>\n                      <div>\n                        <h4 className=\"text-sm font-medium text-gray-500\">Daily Budget</h4>\n                        <p className=\"mt-1 text-sm text-gray-900\">\n                          {formatCurrency(campaign.dailyBudget)}\n                        </p>\n                      </div>\n                      <div>\n                        <h4 className=\"text-sm font-medium text-gray-500\">Est. End Date</h4>\n                        <p className=\"mt-1 text-sm text-gray-900\">\n                          {estimatedEndDate ? formatDate(estimatedEndDate.toISOString()) : 'N/A'}\n                        </p>\n                      </div>\n                    </div>\n                  </section>\n\n                  <section>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Recent Activity</h3>\n                    <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\n                      <ul className=\"divide-y divide-gray-200\">\n                        <li className=\"px-4 py-4 sm:px-6\">\n                          <div className=\"flex items-center justify-between\">\n                            <p className=\"text-sm font-medium text-indigo-600 truncate\">Campaign created</p>\n                            <div className=\"ml-2 flex-shrink-0\">\n                              <p className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800\">\n                                {formatDate(campaign.createdAt)}\n                              </p>\n                            </div>\n                          </div>\n                        </li>\n                        <li className=\"px-4 py-4 sm:px-6\">\n                          <div className=\"flex items-center justify-between\">\n                            <p className=\"text-sm font-medium text-indigo-600 truncate\">Campaign started</p>\n                            <div className=\"ml-2 flex-shrink-0\">\n                              <p className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800\">\n                                {formatDate(campaign.startDate)}\n                              </p>\n                            </div>\n                          </div>\n                        </li>\n                        {campaign.updatedAt !== campaign.createdAt && (\n                          <li className=\"px-4 py-4 sm:px-6\">\n                            <div className=\"flex items-center justify-between\">\n                              <p className=\"text-sm font-medium text-indigo-600 truncate\">Campaign updated</p>\n                              <div className=\"ml-2 flex-shrink-0\">\n                                <p className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800\">\n                                  {formatDate(campaign.updatedAt)}\n                                </p>\n                              </div>\n                            </div>\n                          </li>\n                        )}\n                      </ul>\n                    </div>\n                  </section>\n                </div>\n\n                <div className=\"space-y-8\">\n                  <section>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Quick Actions</h3>\n                    <div className=\"space-y-3\">\n                      <Button variant=\"outline\" className=\"w-full justify-start\">\n                        <RefreshCw className=\"mr-2 h-4 w-4\" />\n                        Refresh Data\n                      </Button>\n                      <Button variant=\"outline\" className=\"w-full justify-start\">\n                        <DollarSign className=\"mr-2 h-4 w-4\" />\n                        Add Funds\n                      </Button>\n                      <Button variant=\"outline\" className=\"w-full justify-start\">\n                        <Plus className=\"mr-2 h-4 w-4\" />\n                        Add Content\n                      </Button>\n                      <Button variant=\"outline\" className=\"w-full justify-start text-red-600 hover:text-red-600\">\n                        <Trash2 className=\"mr-2 h-4 w-4\" />\n                        Delete Campaign\n                      </Button>\n                    </div>\n                  </section>\n\n                  <section>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Performance Summary</h3>\n                    <div className=\"space-y-4\">\n                      <div>\n                        <div className=\"flex justify-between text-sm text-gray-500 mb-1\">\n                          <span>Spend</span>\n                          <span className=\"font-medium\">\n                            {formatCurrency(campaign.spent)} / {formatCurrency(campaign.budget)}\n                          </span>\n                        </div>\n                        <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                          <div\n                            className=\"bg-blue-500 h-2 rounded-full\"\n                            style={{ width: `${Math.min(100, progress)}%` }}\n                          />\n                        </div>\n                      </div>\n\n                      <div>\n                        <div className=\"flex justify-between text-sm text-gray-500 mb-1\">\n                          <span>Daily Spend</span>\n                          <span className=\"font-medium\">{formatCurrency(dailySpendRate)} / day</span>\n                        </div>\n                        <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                          <div\n                            className={cn(\n                              'h-2 rounded-full',\n                              dailySpendRate <= campaign.dailyBudget * 1.1 ? 'bg-green-500' : 'bg-yellow-500'\n                            )}\n                            style={{ width: `${Math.min(100, (dailySpendRate / campaign.dailyBudget) * 100)}%` }}\n                          />\n                        </div>\n                        <p className=\"mt-1 text-xs text-gray-500\">\n                          {dailySpendRate > campaign.dailyBudget * 1.1\n                            ? 'Spending faster than daily budget'\n                            : dailySpendRate < campaign.dailyBudget * 0.9\n                            ? 'Spending slower than daily budget'\n                            : 'On track with daily budget'}\n                        </p>\n                      </div>\n\n                      <div>\n                        <div className=\"flex justify-between text-sm text-gray-500 mb-1\">\n                          <span>CPC</span>\n                          <span className=\"font-medium\">\n                            {formatCurrency(campaign.cpc)}\n                            <span\n                              className={cn(\n                                'ml-1',\n                                campaign.cpc <= campaign.targetCpc * 1.1 ? 'text-green-600' : 'text-red-600'\n                              )}\n                            >\n                              ({campaign.cpc <= campaign.targetCpc ? '↓' : '↑'}\n                              {Math.abs(campaign.cpc - campaign.targetCpc).toFixed(2)})\n                            </span>\n                          </span>\n                        </div>\n                        <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                          <div\n                            className={cn(\n                              'h-2 rounded-full',\n                              campaign.cpc <= campaign.targetCpc * 1.1 ? 'bg-green-500' : 'bg-yellow-500'\n                            )}\n                            style={{ width: `${Math.min(100, (campaign.cpc / (campaign.targetCpc * 2)) * 100)}%` }}\n                          />\n                        </div>\n                        <p className=\"mt-1 text-xs text-gray-500\">Target: {formatCurrency(campaign.targetCpc)}</p>\n                      </div>\n\n                      <div>\n                        <div className=\"flex justify-between text-sm text-gray-500 mb-1\">\n                          <span>CTR</span>\n                          <span className=\"font-medium\">\n                            {campaign.ctr}%\n                            <span\n                              className={cn(\n                                'ml-1',\n                                campaign.ctr >= campaign.targetCtr * 0.9 ? 'text-green-600' : 'text-red-600'\n                              )}\n                            >\n                              ({campaign.ctr >= campaign.targetCtr ? '↑' : '↓'}\n                              {Math.abs(campaign.ctr - campaign.targetCtr).toFixed(1)}%)\n                            </span>\n                          </span>\n                        </div>\n                        <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                          <div\n                            className={cn(\n                              'h-2 rounded-full',\n                              campaign.ctr >= campaign.targetCtr * 0.9 ? 'bg-green-500' : 'bg-yellow-500'\n                            )}\n                            style={{ width: `${Math.min(100, (campaign.ctr / (campaign.targetCtr * 1.5)) * 100)}%` }}\n                          />\n                        </div>\n                        <p className=\"mt-1 text-xs text-gray-500\">Target: {campaign.targetCtr}%</p>\n                      </div>\n                    </div>\n                  </section>\n                </div>\n              </div>\n            </TabsContent>\n\n                  <TabsContent value=\"performance\">\n                    <div className=\"space-y-6\">\n                      <div>\n                            <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Performance Over Time</h3>\n                            <div className=\"bg-gray-50 p-4 rounded-lg h-64 flex items-center justify-center\">\n                              <p className=\"text-gray-500\">Performance chart will be displayed here</p>\n                            </div>\n                          </div>\n                          \n                          <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2\">\n                            <div>\n                              <h4 className=\"text-sm font-medium text-gray-500 mb-2\">Top Performing Content</h4>\n                              <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\n                                <ul className=\"divide-y divide-gray-200\">\n                                  {content.slice(0, 3).map((item) => (\n                                    <li key={item.id} className=\"px-4 py-4 sm:px-6\">\n                                      <div className=\"flex items-center justify-between\">\n                                        <div className=\"flex-1 min-w-0\">\n                                          <p className=\"text-sm font-medium text-indigo-600 truncate\">{item.title}</p>\n                                          <div className=\"flex mt-1\">\n                                            <p className=\"text-xs text-gray-500\">\n                                              {item.platform} • {item.creator}\n                                            </p>\n                                          </div>\n                                        </div>\n                                        <div className=\"ml-4 flex-shrink-0\">\n                                          <p className=\"text-sm font-medium text-gray-900\">{item.ctr}% CTR</p>\n                                        </div>\n                                      </div>\n                                    </li>\n                                  ))}\n                                </ul>\n                              </div>\n                            </div>\n                            \n                            <div>\n                              <h4 className=\"text-sm font-medium text-gray-500 mb-2\">Performance by Platform</h4>\n                              <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\n                                <ul className=\"divide-y divide-gray-200\">\n                                  {Array.from(new Set(content.map(c => c.platform))).map((platform) => {\n                                    const platformContent = content.filter(c => c.platform === platform);\n                                    const totalSpent = platformContent.reduce((sum, c) => sum + c.spent, 0);\n                                    const totalClicks = platformContent.reduce((sum, c) => sum + c.clicks, 0);\n                                    const avgCtr = platformContent.reduce((sum, c) => sum + c.ctr, 0) / platformContent.length;\n                                    \n                                    return (\n                                      <li key={platform} className=\"px-4 py-4 sm:px-6\">\n                                        <div className=\"flex items-center justify-between\">\n                                          <div className=\"flex-1 min-w-0\">\n                                            <p className=\"text-sm font-medium text-gray-900\">{platform}</p>\n                                            <div className=\"flex mt-1\">\n                                              <p className=\"text-xs text-gray-500\">\n                                                {platformContent.length} {platformContent.length === 1 ? 'item' : 'items'}\n                                              </p>\n                                            </div>\n                                          </div>\n                                          <div className=\"ml-4 flex-shrink-0\">\n                                            <p className=\"text-sm text-gray-900\">{formatCurrency(totalSpent)}</p>\n                                            <p className=\"text-xs text-gray-500\">{totalClicks} clicks • {avgCtr.toFixed(1)}% CTR</p>\n                                          </div>\n                                        </div>\n                                      </li>\n                                    );\n                                  })}\n                                </ul>\n                              </div>\n                            </div>\n                          </div>\n                          \n                          <div>\n                            <h4 className=\"text-sm font-medium text-gray-500 mb-2\">Recommendations</h4>\n                            <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\n                              <ul className=\"divide-y divide-gray-200\">\n                                <li className=\"px-4 py-4 sm:px-6\">\n                                  <div className=\"flex items-start\">\n                                    <div className=\"flex-shrink-0 pt-0.5\">\n                                      <div className=\"flex items-center justify-center h-6 w-6 rounded-full bg-blue-100 text-blue-600\">\n                                        <svg className=\"h-4 w-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                          <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n                                        </svg>\n                                      </div>\n                                    </div>\n                                    <div className=\"ml-3 flex-1\">\n                                      <p className=\"text-sm text-gray-700\">\n                                        Your campaign is performing well! Consider increasing your daily budget to reach more people.\n                                      </p>\n                                    </div>\n                                  </div>\n                                </li>\n                                <li className=\"px-4 py-4 sm:px-6\">\n                                  <div className=\"flex items-start\">\n                                    <div className=\"flex-shrink-0 pt-0.5\">\n                                      <div className=\"flex items-center justify-center h-6 w-6 rounded-full bg-blue-100 text-blue-600\">\n                                        <svg className=\"h-4 w-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                          <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n                                        </svg>\n                                      </div>\n                                    </div>\n                                    <div className=\"ml-3 flex-1\">\n                                      <p className=\"text-sm text-gray-700\">\n                                        Try A/B testing different ad creatives to improve your click-through rate.\n                                      </p>\n                                    </div>\n                                  </div>\n                                </li>\n                              </ul>\n                            </div>\n                          </div>\n                        </div>\n                      </TabsContent>\n\n                      <TabsContent value=\"content\">\n                        <div className=\"flex justify-between items-center mb-4\">\n                          <h3 className=\"text-lg font-medium text-gray-900\">Campaign Content</h3>\n                          <Button>\n                            <Plus className=\"mr-2 h-4 w-4\" />\n                            Add Content\n                          </Button>\n                        </div>\n                        \n                        <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\n                          <ul className=\"divide-y divide-gray-200\">\n                            {content.map((item) => (\n                              <li key={item.id} className=\"hover:bg-gray-50\">\n                                <Link to={`/content/${item.id}`} className=\"block\">\n                                  <div className=\"px-4 py-4 sm:px-6\">\n                                    <div className=\"flex items-center justify-between\">\n                                      <div className=\"flex items-center\">\n                                        <p className=\"text-lg font-medium text-indigo-600 truncate\">\n                                          {item.title}\n                                        </p>\n                                        <div className=\"ml-2\">\n                                          <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                                            item.status === 'live' ? 'bg-green-100 text-green-800' :\n                                            item.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\n                                            item.status === 'approved' ? 'bg-blue-100 text-blue-800' :\n                                            item.status === 'rejected' ? 'bg-red-100 text-red-800' :\n                                            'bg-gray-100 text-gray-800'\n                                          }`}>\n                                            {item.status.charAt(0).toUpperCase() + item.status.slice(1)}\n                                          </span>\n                                        </div>\n                                      </div>\n                                      <div className=\"ml-2 flex-shrink-0 flex\">\n                                        <p className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800\">\n                                          {formatCurrency(item.spent)} of {formatCurrency(item.budget)}\n                                        </p>\n                                      </div>\n                                    </div>\n                                    <div className=\"mt-2 sm:flex sm:justify-between\">\n                                      <div className=\"sm:flex\">\n                                        <p className=\"flex items-center text-sm text-gray-500\">\n                                          <span className=\"font-medium text-gray-900\">{item.platform}</span>\n                                          <span className=\"mx-1\">•</span>\n                                          <span>by @{item.creator}</span>\n                                        </p>\n                                      </div>\n                                      <div className=\"mt-2 flex items-center text-sm text-gray-500 sm:mt-0\">\n                                        <BarChart2 className=\"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400\" />\n                                        <p>{formatNumber(item.impressions)} impressions</p>\n                                        <span className=\"mx-1\">•</span>\n                                        <p>{formatNumber(item.clicks)} clicks</p>\n                                        <span className=\"mx-1\">•</span>\n                                        <p>{item.ctr}% CTR</p>\n                                      </div>\n                                    </div>\n                                    <div className=\"mt-2\">\n                                      <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                                        <div \n                                          className=\"bg-blue-500 h-2 rounded-full\" \n                                          style={{ width: `${Math.min(100, (item.spent / item.budget) * 100)}%` }}\n                                        />\n                                      </div>\n                                    </div>\n                                  </div>\n                                </Link>\n                              </li>\n                            ))}\n                            \n                            {content.length === 0 && (\n                              <div className=\"text-center py-12\">\n                                <BarChart2 className=\"mx-auto h-12 w-12 text-gray-400\" />\n                                <h3 className=\"mt-2 text-lg font-medium text-gray-900\">No content added yet</h3>\n                                <p className=\"mt-1 text-sm text-gray-500\">\n                                  Get started by adding content to your campaign.\n                                </p>\n                                <div className=\"mt-6\">\n                                  <Button>\n                                    <Plus className=\"-ml-1 mr-2 h-5 w-5\" />\n                                    Add Content\n                                  </Button>\n                                </div>\n                              </div>\n                            )}\n                          </ul>\n                        </div>\n                      </TabsContent>\n\n                      <TabsContent value=\"settings\">\n                        <div className=\"space-y-8\">\n                          <div>\n                            <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Campaign Settings</h3>\n                            \n                            <div className=\"bg-white shadow overflow-hidden sm:rounded-lg\">\n                              <div className=\"px-4 py-5 sm:px-6\">\n                                <h4 className=\"text-lg font-medium text-gray-900\">Basic Information</h4>\n                              </div>\n                              <div className=\"border-t border-gray-200 px-4 py-5 sm:px-6\">\n                                <dl className=\"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2\">\n                                  <div className=\"sm:col-span-1\">\n                                    <dt className=\"text-sm font-medium text-gray-500\">Campaign Name</dt>\n                                    <dd className=\"mt-1 text-sm text-gray-900\">{campaign.name}</dd>\n                                  </div>\n                                  <div className=\"sm:col-span-1\">\n                                    <dt className=\"text-sm font-medium text-gray-500\">Status</dt>\n                                    <dd className=\"mt-1\">\n                                      <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusStyles[campaign.status]}`}>\n                                        {campaign.status.charAt(0).toUpperCase() + campaign.status.slice(1)}\n                                      </span>\n                                    </dd>\n                                  </div>\n                                  <div className=\"sm:col-span-1\">\n                                    <dt className=\"text-sm font-medium text-gray-500\">Start Date</dt>\n                                    <dd className=\"mt-1 text-sm text-gray-900\">{formatDate(campaign.startDate)}</dd>\n                                  </div>\n                                  <div className=\"sm:col-span-1\">\n                                    <dt className=\"text-sm font-medium text-gray-500\">End Date</dt>\n                                    <dd className=\"mt-1 text-sm text-gray-900\">\n                                      {campaign.endDate ? formatDate(campaign.endDate) : 'No end date'}\n                                      {campaign.endDate && daysRemaining !== null && (\n                                        <span className=\"ml-2 text-gray-500\">\n                                          ({daysRemaining > 0 ? `${daysRemaining} days left` : 'Ended'})\n                                        </span>\n                                      )}\n                                    </dd>\n                                  </div>\n                                  <div className=\"sm:col-span-2\">\n                                    <dt className=\"text-sm font-medium text-gray-500\">Description</dt>\n                                    <dd className=\"mt-1 text-sm text-gray-900\">\n                                      {campaign.description || 'No description provided.'}\n                                    </dd>\n                                  </div>\n                                </dl>\n                              </div>\n                            </div>\n                          </div>\n                          \n                          <div>\n                            <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Budget & Bidding</h3>\n                            \n                            <div className=\"bg-white shadow overflow-hidden sm:rounded-lg\">\n                              <div className=\"px-4 py-5 sm:px-6\">\n                                <h4 className=\"text-lg font-medium text-gray-900\">Budget Settings</h4>\n                              </div>\n                              <div className=\"border-t border-gray-200 px-4 py-5 sm:px-6\">\n                                <dl className=\"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2\">\n                                  <div className=\"sm:col-span-1\">\n                                    <dt className=\"text-sm font-medium text-gray-500\">Total Budget</dt>\n                                    <dd className=\"mt-1 text-sm text-gray-900\">{formatCurrency(campaign.budget)}</dd>\n                                  </div>\n                                  <div className=\"sm:col-span-1\">\n                                    <dt className=\"text-sm font-medium text-gray-500\">Daily Budget</dt>\n                                    <dd className=\"mt-1 text-sm text-gray-900\">{formatCurrency(campaign.dailyBudget)}</dd>\n                                  </div>\n                                  <div className=\"sm:col-span-1\">\n                                    <dt className=\"text-sm font-medium text-gray-500\">Amount Spent</dt>\n                                    <dd className=\"mt-1 text-sm text-gray-900\">{formatCurrency(campaign.spent)}</dd>\n                                  </div>\n                                  <div className=\"sm:col-span-1\">\n                                    <dt className=\"text-sm font-medium text-gray-500\">Remaining Budget</dt>\n                                    <dd className=\"mt-1 text-sm text-gray-900\">{formatCurrency(campaign.budget - campaign.spent)}</dd>\n                                  </div>\n                                </dl>\n                                \n                                <div className=\"mt-6\">\n                                  <div className=\"flex justify-between text-sm text-gray-500 mb-1\">\n                                    <span>Budget Spent</span>\n                                    <span>{Math.round(progress)}%</span>\n                                  </div>\n                                  <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                                    <div \n                                      className=\"bg-blue-500 h-2 rounded-full\" \n                                      style={{ width: `${Math.min(100, progress)}%` }}\n                                    />\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                            \n                            <div className=\"mt-6 bg-white shadow overflow-hidden sm:rounded-lg\">\n                              <div className=\"px-4 py-5 sm:px-6\">\n                                <h4 className=\"text-lg font-medium text-gray-900\">Bidding Strategy</h4>\n                              </div>\n                              <div className=\"border-t border-gray-200 px-4 py-5 sm:px-6\">\n                                <dl className=\"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2\">\n                                  <div className=\"sm:col-span-1\">\n                                    <dt className=\"text-sm font-medium text-gray-500\">Bid Strategy</dt>\n                                    <dd className=\"mt-1 text-sm text-gray-900 capitalize\">\n                                      {campaign.bidStrategy === 'lowest_cost' ? 'Lowest Cost' : \n                                       campaign.bidStrategy === 'cost_cap' ? 'Cost Cap' : 'Bid Cap'}\n                                    </dd>\n                                  </div>\n                                  {campaign.bidStrategy !== 'lowest_cost' && (\n                                    <div className=\"sm:col-span-1\">\n                                      <dt className=\"text-sm font-medium text-gray-500\">\n                                        {campaign.bidStrategy === 'cost_cap' ? 'Cost Cap' : 'Bid Cap'}\n                                      </dt>\n                                      <dd className=\"mt-1 text-sm text-gray-900\">\n                                        {formatCurrency(campaign.bidAmount)}\n                                      </dd>\n                                    </div>\n                                  )}\n                                  <div className=\"sm:col-span-1\">\n                                    <dt className=\"text-sm font-medium text-gray-500\">Target CPC</dt>\n                                    <dd className=\"mt-1 text-sm text-gray-900\">\n                                      {formatCurrency(campaign.targetCpc)}\n                                    </dd>\n                                  </div>\n                                  <div className=\"sm:col-span-1\">\n                                    <dt className=\"text-sm font-medium text-gray-500\">Target CTR</dt>\n                                    <dd className=\"mt-1 text-sm text-gray-900\">\n                                      {campaign.targetCtr}%\n                                    </dd>\n                                  </div>\n                                </dl>\n                              </div>\n                            </div>\n                          </div>\n                          \n                          <div className=\"pt-5\">\n                            <div className=\"flex justify-end space-x-3\">\n                              <Button variant=\"outline\" type=\"button\" onClick={() => navigate(-1)}>\n                                Cancel\n                              </Button>\n                              <Button type=\"button\" variant=\"destructive\">\n                                <Trash2 className=\"mr-2 h-4 w-4\" />\n                                Delete Campaign\n                              </Button>\n                              <Button type=\"submit\">\n                                <Save className=\"mr-2 h-4 w-4\" />\n                                Save Changes\n                              </Button>\n                            </div>\n                          </div>\n                        </div>\n                      </TabsContent>\n                    </div>\n                  </Tabs>\n                </div>\n              </div>\n            );\n          }\n","import { forwardRef } from 'react';\nimport type { InputHTMLAttributes } from 'react';\n\ntype InputProps = InputHTMLAttributes<HTMLInputElement>;\n\nexport const Input = forwardRef<HTMLInputElement, InputProps>(\n  ({ className = '', ...props }, ref) => {\n    const baseClasses =\n      'block w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-400 focus:border-orange-500 focus:outline-none focus:ring-1 focus:ring-orange-500 disabled:cursor-not-allowed disabled:bg-gray-100 disabled:text-gray-500';\n\n    return (\n      <input\n        ref={ref}\n        className={`${baseClasses} ${className}`.trim()}\n        {...props}\n      />\n    );\n  }\n);\n\nInput.displayName = 'Input';\n","import * as React from 'react';\n\nexport type TextareaProps = React.TextareaHTMLAttributes<HTMLTextAreaElement>;\n\nexport const Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className = '', ...props }, ref) => (\n    <textarea\n      ref={ref}\n      className={`block w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 disabled:cursor-not-allowed disabled:bg-gray-100 ${className}`}\n      {...props}\n    />\n  )\n);\n\nTextarea.displayName = 'Textarea';\n","import * as React from 'react';\n\ntype SelectContextValue = {\n  value: string | undefined;\n  open: boolean;\n  setOpen: (open: boolean) => void;\n  onValueChange: (value: string) => void;\n  registerItem: (item: SelectItemRecord) => () => void;\n  items: SelectItemRecord[];\n};\n\ntype SelectItemRecord = {\n  value: string;\n  label: React.ReactNode;\n};\n\nconst SelectContext = React.createContext<SelectContextValue | null>(null);\n\nconst useSelectContext = () => {\n  const ctx = React.useContext<SelectContextValue | null>(SelectContext);\n  if (!ctx) {\n    throw new Error('Select components must be used within a Select');\n  }\n  return ctx;\n};\n\nexport type SelectProps = {\n  value?: string;\n  defaultValue?: string;\n  onValueChange?: (value: string) => void;\n  children: React.ReactNode;\n};\n\nexport function Select({ value, defaultValue, onValueChange, children }: SelectProps) {\n  const [open, setOpen] = React.useState(false);\n  const [internalValue, setInternalValue] = React.useState(defaultValue);\n  const [items, setItems] = React.useState<SelectItemRecord[]>([]);\n\n  const selectedValue = value ?? internalValue;\n\n  const handleValueChange = React.useCallback(\n    (nextValue: string) => {\n      setInternalValue(nextValue);\n      onValueChange?.(nextValue);\n    },\n    [onValueChange]\n  );\n\n  const registerItem = React.useCallback((item: SelectItemRecord) => {\n    setItems(prev => {\n      const existingIndex = prev.findIndex(prevItem => prevItem.value === item.value);\n      if (existingIndex >= 0) {\n        const next = [...prev];\n        next[existingIndex] = item;\n        return next;\n      }\n      return [...prev, item];\n    });\n\n    return () => {\n      setItems(prev => prev.filter(prevItem => prevItem.value !== item.value));\n    };\n  }, []);\n\n  return (\n    <SelectContext.Provider\n      value={{\n        value: selectedValue,\n        open,\n        setOpen,\n        onValueChange: handleValueChange,\n        registerItem,\n        items,\n      }}\n    >\n      <div className=\"relative inline-block w-full\">{children}</div>\n    </SelectContext.Provider>\n  );\n}\n\nexport type SelectTriggerProps = React.ButtonHTMLAttributes<HTMLButtonElement>;\n\nexport const SelectTrigger = React.forwardRef<HTMLButtonElement, SelectTriggerProps>(\n  ({ className = '', children, ...props }, ref) => {\n    const { setOpen, open } = useSelectContext();\n    return (\n      <button\n        type=\"button\"\n        ref={ref}\n        className={`flex w-full items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-2 text-left text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 ${className}`}\n        aria-haspopup=\"listbox\"\n        aria-expanded={open}\n        onClick={() => setOpen(!open)}\n        {...props}\n      >\n        {children}\n        <svg\n          className=\"ml-2 h-4 w-4 text-gray-500\"\n          viewBox=\"0 0 20 20\"\n          fill=\"currentColor\"\n          aria-hidden=\"true\"\n        >\n          <path\n            fillRule=\"evenodd\"\n            d=\"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.7a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0L5.25 8.29a.75.75 0 01-.02-1.08z\"\n            clipRule=\"evenodd\"\n          />\n        </svg>\n      </button>\n    );\n  }\n);\n\nSelectTrigger.displayName = 'SelectTrigger';\n\nexport type SelectValueProps = {\n  placeholder?: string;\n};\n\nexport function SelectValue({ placeholder }: SelectValueProps) {\n  const { value, items } = useSelectContext();\n  const selectedItem = items.find(item => item.value === value);\n  return (\n    <span className=\"flex-1 truncate text-sm text-gray-900\">\n      {selectedItem ? selectedItem.label : placeholder ?? 'Select an option'}\n    </span>\n  );\n}\n\nexport type SelectContentProps = React.HTMLAttributes<HTMLDivElement>;\n\nexport function SelectContent({ className = '', children, ...props }: SelectContentProps) {\n  const { open } = useSelectContext();\n  if (!open) {\n    return null;\n  }\n\n  return (\n    <div\n      role=\"listbox\"\n      className={`absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md border border-gray-200 bg-white py-1 shadow-lg focus:outline-none ${className}`}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport type SelectItemProps = React.LiHTMLAttributes<HTMLDivElement> & {\n  value: string;\n};\n\nexport const SelectItem = React.forwardRef<HTMLDivElement, SelectItemProps>(\n  ({ className = '', children, value, ...props }, ref) => {\n    const { value: selectedValue, onValueChange, setOpen, registerItem } = useSelectContext();\n\n    React.useEffect(() => {\n      return registerItem({ value, label: children });\n    }, [children, registerItem, value]);\n\n    const isSelected = selectedValue === value;\n\n    const handleSelect = () => {\n      onValueChange(value);\n      setOpen(false);\n    };\n\n    return (\n      <div\n        ref={ref}\n        role=\"option\"\n        aria-selected={isSelected}\n        className={`flex cursor-pointer items-center px-3 py-2 text-sm text-gray-900 hover:bg-gray-100 ${\n          isSelected ? 'bg-gray-100 font-medium' : ''\n        } ${className}`}\n        onClick={handleSelect}\n        onKeyDown={(event) => {\n          if (event.key === 'Enter' || event.key === ' ') {\n            event.preventDefault();\n            handleSelect();\n          }\n        }}\n        tabIndex={0}\n        {...props}\n      >\n        {children}\n      </div>\n    );\n  }\n);\n\nSelectItem.displayName = 'SelectItem';\n","import * as React from 'react';\n\nexport type DatePickerProps = {\n  selected: Date | null;\n  onChange: (date: Date | null) => void;\n  minDate?: Date;\n  maxDate?: Date;\n  className?: string;\n};\n\nexport function DatePicker({ selected, onChange, minDate, maxDate, className = '' }: DatePickerProps) {\n  const formatDate = (date: Date | null) => {\n    if (!date) {\n      return '';\n    }\n    const year = date.getFullYear();\n    const month = `${date.getMonth() + 1}`.padStart(2, '0');\n    const day = `${date.getDate()}`.padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  };\n\n  const parseDate = (value: string) => {\n    if (!value) {\n      return null;\n    }\n    const [year, month, day] = value.split('-').map(Number);\n    return new Date(year, month - 1, day);\n  };\n\n  return (\n    <input\n      type=\"date\"\n      className={`block w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 disabled:cursor-not-allowed disabled:bg-gray-100 ${className}`}\n      value={formatDate(selected)}\n      onChange={(event) => onChange(parseDate(event.target.value))}\n      min={formatDate(minDate ?? null)}\n      max={formatDate(maxDate ?? null)}\n    />\n  );\n}\n","const API_BASE_URL = import.meta.env.VITE_API_URL || '';\n\nfunction getFullUrl(input: RequestInfo | URL): string {\n  // If input is already a full URL, return it as is\n  if (typeof input === 'string' && (input.startsWith('http://') || input.startsWith('https://'))) {\n    return input;\n  }\n  \n  // If input is a URL object, convert it to string\n  const path = input.toString();\n  \n  // If the path already starts with the base URL, return it as is\n  if (path.startsWith(API_BASE_URL)) {\n    return path;\n  }\n  \n  // Otherwise, prepend the base URL\n  return `${API_BASE_URL}${path.startsWith('/') ? '' : '/'}${path}`;\n}\n\nexport async function apiFetch(\n  input: RequestInfo | URL,\n  init: RequestInit & { skipAuth?: boolean } = {}\n) {\n  const { skipAuth, headers, ...rest } = init;\n  const authToken = typeof window !== 'undefined' && !skipAuth ? localStorage.getItem('authToken') : null;\n\n  const finalHeaders = new Headers(headers);\n  if (authToken && !finalHeaders.has('Authorization')) {\n    finalHeaders.set('Authorization', `Bearer ${authToken}`);\n  }\n\n  const url = getFullUrl(input);\n  \n  // Log the request for debugging\n  if (process.env.NODE_ENV === 'development') {\n    console.log(`API Request: ${rest.method || 'GET'} ${url}`);\n  }\n\n  return fetch(url, { ...rest, headers: finalHeaders });\n}\n\nexport const api = {\n  get: (url: string, init?: RequestInit) => apiFetch(url, { ...init, method: 'GET' }),\n  post: (url: string, body?: any, init?: RequestInit) =>\n    apiFetch(url, {\n      method: 'POST',\n      body: body ? JSON.stringify(body) : undefined,\n      headers: { 'Content-Type': 'application/json', ...(init?.headers || {}) },\n      ...init,\n    }),\n};\n","import { useState, useEffect } from 'react';\nimport { useAuth } from '@/react-app/hooks/useAuth';\nimport { apiFetch } from '@/lib/api';\n\ninterface MoveCostBreakdown {\n  baseCost: number;\n  durationModifier: number;\n  audienceModifier: number;\n  premiumModifier: number;\n  targetingCost: {\n    audience: number;\n    locations: number;\n    interests: number;\n  };\n  totalCost: number;\n}\n\nexport function useMoveCosts() {\n  const { user } = useAuth();\n  const [moveBalance, setMoveBalance] = useState(0);\n  const [moveCost, setMoveCost] = useState<MoveCostBreakdown | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Fetch user's current move balance\n  useEffect(() => {\n    if (!user) return;\n    \n    const fetchMoveBalance = async () => {\n      try {\n        const response = await apiFetch('/api/users/me');\n        if (!response.ok) throw new Error('Failed to load user');\n        const data = await response.json();\n        setMoveBalance(data.moves_balance || data.move_balance || 0);\n      } catch (err) {\n        console.error('Failed to fetch move balance:', err);\n        setError('Failed to load move balance');\n      }\n    };\n\n    fetchMoveBalance();\n  }, [user]);\n\n  // Calculate move cost for a campaign\n  const calculateMoveCost = async (campaignData: any) => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      const response = await apiFetch('/api/campaigns/calculate-move-cost', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(campaignData),\n      });\n      if (!response.ok) throw new Error('Failed to calculate move cost');\n      const data = await response.json();\n      setMoveCost(data);\n      return data;\n    } catch (err) {\n      console.error('Failed to calculate move cost:', err);\n      setError('Failed to calculate move cost');\n      return null;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Check if user has enough moves for a campaign\n  const hasEnoughMoves = (requiredMoves: number) => {\n    return moveBalance >= requiredMoves;\n  };\n\n  return {\n    moveBalance,\n    moveCost,\n    loading,\n    error,\n    calculateMoveCost,\n    hasEnoughMoves,\n    refreshBalance: () => {\n      if (user) {\n        apiFetch('/api/users/me')\n          .then(async (response) => {\n            if (!response.ok) throw new Error('Failed to refresh balance');\n            const data = await response.json();\n            setMoveBalance(data.moves_balance || data.move_balance || 0);\n          })\n          .catch(console.error);\n      }\n    }\n  };\n}\n","import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { ArrowLeft, Plus, Target, DollarSign, Calendar, Hash, Percent, BarChart2, Zap } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { DatePicker } from '@/components/ui/date-picker';\nimport { useMoveCosts } from '@/react-app/hooks/useMoveCosts';\nimport { cn } from '@/lib/utils';\n\ntype CampaignObjective = 'awareness' | 'engagement' | 'conversions' | 'traffic' | 'app_installs' | 'video_views';\n\nexport default function NewCampaign() {\n  const navigate = useNavigate();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [formData, setFormData] = useState({\n    name: '',\n    objective: 'engagement' as CampaignObjective,\n    description: '',\n    startDate: new Date(),\n    endDate: null as Date | null,\n    budget: 1000,\n    dailyBudget: 100,\n    bidStrategy: 'lowest_cost' as 'lowest_cost' | 'cost_cap' | 'bid_cap',\n    bidAmount: 5,\n    targetCtr: 2.0,\n    targetCpc: 0.5,\n    campaignType: 'standard' as 'proof' | 'standard' | 'premium',\n    audienceSize: 1000,\n    locations: [] as string[],\n    interests: [] as string[],\n  });\n\n  const { moveBalance, moveCost, loading: calculatingCost, calculateMoveCost } = useMoveCosts();\n  const [calculatedCost, setCalculatedCost] = useState<number | null>(null);\n  const [insufficientMoves, setInsufficientMoves] = useState(false);\n\n  // Calculate move cost when form changes\n  useEffect(() => {\n    const calculateCost = async () => {\n      const cost = await calculateMoveCost({\n        campaignType: formData.campaignType,\n        duration: formData.endDate ? \n          Math.ceil((formData.endDate.getTime() - formData.startDate.getTime()) / (1000 * 60 * 60 * 24)) : 7,\n        audienceSize: formData.audienceSize,\n        locations: formData.locations,\n        interests: formData.interests,\n        isPremium: formData.campaignType === 'premium'\n      });\n      \n      if (cost) {\n        setCalculatedCost(cost.totalCost);\n        setInsufficientMoves(moveBalance < cost.totalCost);\n      }\n    };\n\n    calculateCost();\n  }, [formData, calculateMoveCost, moveBalance]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: name === 'name' || name === 'description' ? value : Number(value)\n    }));\n  };\n\n  const handleSelectChange = (name: string, value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleDateChange = (name: string, date: Date | null) => {\n    setFormData(prev => ({\n      ...prev,\n      [name]: date\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (insufficientMoves) {\n      alert('You do not have enough moves to create this campaign. Please reduce the scope or purchase more moves.');\n      return;\n    }\n    \n    if (!calculatedCost) {\n      alert('Calculating move cost. Please wait...');\n      return;\n    }\n\n    setIsSubmitting(true);\n    \n    try {\n      const response = await fetch('/api/campaigns', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n        },\n        body: JSON.stringify({\n          ...formData,\n          userId: localStorage.getItem('userId'),\n          duration: formData.endDate ? \n            Math.ceil((formData.endDate.getTime() - formData.startDate.getTime()) / (1000 * 60 * 60 * 24)) : 7\n        })\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to create campaign');\n      }\n      \n      const result = await response.json();\n      \n      // Show success message and navigate\n      alert(`Campaign created successfully! ${result.movesSpent} moves deducted from your balance.`);\n      navigate('/campaigns');\n      \n    } catch (error) {\n      console.error('Failed to create campaign:', error);\n      alert(`Failed to create campaign: ${error.message}`);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const objectives = [\n    { value: 'awareness', label: 'Brand Awareness' },\n    { value: 'engagement', label: 'Engagement' },\n    { value: 'conversions', label: 'Conversions' },\n    { value: 'traffic', label: 'Traffic' },\n    { value: 'app_installs', label: 'App Installs' },\n    { value: 'video_views', label: 'Video Views' },\n  ];\n\n  const bidStrategies = [\n    { value: 'lowest_cost', label: 'Lowest Cost' },\n    { value: 'cost_cap', label: 'Cost Cap' },\n    { value: 'bid_cap', label: 'Bid Cap' },\n  ];\n\n  const campaignTypes = [\n    { value: 'proof', label: 'Proof Drop', description: 'Test with a small audience', cost: '10 moves' },\n    { value: 'standard', label: 'Standard Campaign', description: 'Reach a larger audience', cost: '50 moves' },\n    { value: 'premium', label: 'Premium Campaign', description: 'Maximum reach and features', cost: '100 moves' },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center space-x-4\">\n        <Button \n          variant=\"outline\" \n          size=\"icon\" \n          onClick={() => navigate(-1)}\n          className=\"h-8 w-8\" \n        >\n          <ArrowLeft className=\"h-4 w-4\" />\n          <span className=\"sr-only\">Back</span>\n        </Button>\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">Create Campaign</h2>\n          <p className=\"text-sm text-gray-500\">\n            Set up a new marketing campaign to promote your brand\n          </p>\n        </div>\n      </div>\n\n      <form onSubmit={handleSubmit} className=\"space-y-8\">\n        <div className=\"space-y-8\">\n          {/* Move Cost Summary */}\n          {calculatedCost !== null && (\n            <div className={cn(\n              \"p-4 rounded-lg border\",\n              insufficientMoves ? \"bg-red-50 border-red-200\" : \"bg-blue-50 border-blue-200\"\n            )}>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <Zap className={cn(\"h-5 w-5\", insufficientMoves ? \"text-red-500\" : \"text-blue-500\")} />\n                  <div>\n                    <p className=\"font-medium\">\n                      {insufficientMoves ? 'Not enough moves' : 'Move cost'}\n                    </p>\n                    <p className=\"text-sm text-gray-600\">\n                      {calculatedCost} moves required (you have {moveBalance})\n                    </p>\n                  </div>\n                </div>\n                {insufficientMoves ? (\n                  <Button variant=\"outline\" size=\"sm\" onClick={() => navigate('/account/billing')}>\n                    Get More Moves\n                  </Button>\n                ) : (\n                  <div className=\"text-sm font-medium text-green-600\">\n                    Sufficient balance\n                  </div>\n                )}\n              </div>\n              \n              {moveCost && (\n                <div className=\"mt-3 pt-3 border-t border-gray-200 text-xs text-gray-500\">\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div>Base cost:</div>\n                    <div className=\"text-right\">{moveCost.baseCost} moves</div>\n                    \n                    {moveCost.durationModifier > 0 && (\n                      <>\n                        <div>Duration ({moveCost.durationModifier.toFixed(1)}x):</div>\n                        <div className=\"text-right\">+{Math.round(moveCost.baseCost * moveCost.durationModifier)} moves</div>\n                      </>\n                    )}\n                    \n                    {moveCost.audienceModifier > 0 && (\n                      <>\n                        <div>Audience size ({moveCost.audienceModifier.toFixed(1)}x):</div>\n                        <div className=\"text-right\">+{Math.round(moveCost.baseCost * moveCost.audienceModifier)} moves</div>\n                      </>\n                    )}\n                    \n                    {moveCost.premiumModifier > 0 && (\n                      <>\n                        <div>Premium features ({moveCost.premiumModifier.toFixed(1)}x):</div>\n                        <div className=\"text-right\">+{Math.round(moveCost.baseCost * moveCost.premiumModifier)} moves</div>\n                      </>\n                    )}\n                    \n                    <div className=\"font-medium\">Total cost:</div>\n                    <div className=\"text-right font-medium\">{moveCost.totalCost} moves</div>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n          \n          <div className=\"space-y-4\">\n            <div>\n              <h3 className=\"text-lg font-medium\">Campaign Details</h3>\n              <p className=\"text-sm text-gray-500\">Basic information about your campaign</p>\n            </div>\n              <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2\">\n                <div className=\"space-y-2\">\n                  <label htmlFor=\"campaignType\" className=\"block text-sm font-medium text-gray-700\">\n                    Campaign Type\n                  </label>\n                  <Select\n                    value={formData.campaignType}\n                    onValueChange={(value) => handleSelectChange('campaignType', value as any)}\n                  >\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Select campaign type\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {campaignTypes.map((type) => (\n                        <SelectItem key={type.value} value={type.value}>\n                          <div className=\"flex items-center justify-between\">\n                            <div>\n                              <div className=\"font-medium\">{type.label}</div>\n                              <div className=\"text-xs text-gray-500\">{type.description}</div>\n                            </div>\n                            <div className=\"text-sm text-gray-500\">{type.cost}</div>\n                          </div>\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <label htmlFor=\"audienceSize\" className=\"block text-sm font-medium text-gray-700\">\n                    Target Audience Size\n                  </label>\n                  <Input\n                    type=\"number\"\n                    name=\"audienceSize\"\n                    id=\"audienceSize\"\n                    min=\"100\"\n                    step=\"100\"\n                    value={formData.audienceSize}\n                    onChange={handleChange}\n                    required\n                  />\n                  <p className=\"text-xs text-gray-500\">\n                    Larger audiences may require more moves\n                  </p>\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700\">\n                    Campaign Name\n                  </label>\n                  <Input\n                    type=\"text\"\n                    name=\"name\"\n                    id=\"name\"\n                    value={formData.name}\n                    onChange={handleChange}\n                    required\n                  />\n                </div>\n\n                <div className=\"sm:col-span-4\">\n                  <label htmlFor=\"objective\" className=\"block text-sm font-medium text-gray-700\">\n                    Campaign Objective\n                  </label>\n                  <div className=\"mt-1\">\n                    <Select\n                      value={formData.objective}\n                      onValueChange={(value) => handleSelectChange('objective', value)}\n                    >\n                      <SelectTrigger className=\"w-full\">\n                        <SelectValue placeholder=\"Select an objective\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {objectives.map((obj) => (\n                          <SelectItem key={obj.value} value={obj.value}>\n                            <div className=\"flex items-center\">\n                              <Target className=\"mr-2 h-4 w-4\" />\n                              {obj.label}\n                            </div>\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n\n                <div className=\"sm:col-span-6\">\n                  <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700\">\n                    Description (Optional)\n                  </label>\n                  <div className=\"mt-1\">\n                    <Textarea\n                      id=\"description\"\n                      name=\"description\"\n                      rows={3}\n                      value={formData.description}\n                      onChange={handleChange}\n                      className=\"w-full\"\n                      placeholder=\"Describe the purpose of this campaign...\"\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white shadow sm:rounded-lg\">\n              <div className=\"px-4 py-5 sm:p-6\">\n                <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Schedule & Budget</h3>\n                <p className=\"mt-1 text-sm text-gray-500\">\n                  When and how much you want to spend\n                </p>\n                <div className=\"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6\">\n                  <div className=\"sm:col-span-3\">\n                    <label className=\"block text-sm font-medium text-gray-700\">\n                      Start Date\n                    </label>\n                    <div className=\"mt-1\">\n                      <DatePicker\n                        selected={formData.startDate}\n                        onChange={(date) => handleDateChange('startDate', date)}\n                        minDate={new Date()}\n                        className=\"w-full\"\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"sm:col-span-3\">\n                    <label className=\"block text-sm font-medium text-gray-700\">\n                      End Date (Optional)\n                    </label>\n                    <div className=\"mt-1\">\n                      <DatePicker\n                        selected={formData.endDate}\n                        onChange={(date) => handleDateChange('endDate', date)}\n                        minDate={formData.startDate}\n                        className=\"w-full\"\n                        isClearable\n                        placeholderText=\"No end date\"\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"sm:col-span-3\">\n                    <label htmlFor=\"budget\" className=\"block text-sm font-medium text-gray-700\">\n                      Total Budget ($)\n                    </label>\n                    <div className=\"mt-1 relative rounded-md shadow-sm\">\n                      <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                        <DollarSign className=\"h-5 w-5 text-gray-400\" />\n                      </div>\n                      <Input\n                        type=\"number\"\n                        name=\"budget\"\n                        id=\"budget\"\n                        value={formData.budget}\n                        onChange={handleChange}\n                        min=\"1\"\n                        step=\"0.01\"\n                        className=\"pl-10\"\n                        required\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"sm:col-span-3\">\n                    <label htmlFor=\"dailyBudget\" className=\"block text-sm font-medium text-gray-700\">\n                      Daily Budget ($)\n                    </label>\n                    <div className=\"mt-1 relative rounded-md shadow-sm\">\n                      <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                        <DollarSign className=\"h-5 w-5 text-gray-400\" />\n                      </div>\n                      <Input\n                        type=\"number\"\n                        name=\"dailyBudget\"\n                        id=\"dailyBudget\"\n                        value={formData.dailyBudget}\n                        onChange={handleChange}\n                        min=\"1\"\n                        step=\"0.01\"\n                        className=\"pl-10\"\n                        required\n                      />\n                    </div>\n                    <p className=\"mt-1 text-xs text-gray-500\">\n                      {formData.endDate \n                        ? `~${Math.ceil(formData.budget / formData.dailyBudget)} days of runtime`\n                        : 'Will run until budget is spent'}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white shadow sm:rounded-lg\">\n              <div className=\"px-4 py-5 sm:p-6\">\n                <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Bidding & Optimization</h3>\n                <p className=\"mt-1 text-sm text-gray-500\">\n                  How you want to bid and optimize your campaign\n                </p>\n                <div className=\"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6\">\n                  <div className=\"sm:col-span-3\">\n                    <label htmlFor=\"bidStrategy\" className=\"block text-sm font-medium text-gray-700\">\n                      Bid Strategy\n                    </label>\n                    <div className=\"mt-1\">\n                      <Select\n                        value={formData.bidStrategy}\n                        onValueChange={(value) => handleSelectChange('bidStrategy', value)}\n                      >\n                        <SelectTrigger className=\"w-full\">\n                          <SelectValue placeholder=\"Select a bid strategy\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          {bidStrategies.map((strategy) => (\n                            <SelectItem key={strategy.value} value={strategy.value}>\n                              {strategy.label}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <p className=\"mt-1 text-xs text-gray-500\">\n                      {formData.bidStrategy === 'lowest_cost' && 'Automatically get the most results for your budget'}\n                      {formData.bidStrategy === 'cost_cap' && 'Control your average cost per result'}\n                      {formData.bidStrategy === 'bid_cap' && 'Set a maximum bid for each result'}\n                    </p>\n                  </div>\n\n                  {formData.bidStrategy !== 'lowest_cost' && (\n                    <div className=\"sm:col-span-3\">\n                      <label htmlFor=\"bidAmount\" className=\"block text-sm font-medium text-gray-700\">\n                        {formData.bidStrategy === 'cost_cap' ? 'Cost Cap' : 'Bid Cap'} ($)\n                      </label>\n                      <div className=\"mt-1 relative rounded-md shadow-sm\">\n                        <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                          <DollarSign className=\"h-5 w-5 text-gray-400\" />\n                        </div>\n                        <Input\n                          type=\"number\"\n                          name=\"bidAmount\"\n                          id=\"bidAmount\"\n                          value={formData.bidAmount}\n                          onChange={handleChange}\n                          min=\"0.01\"\n                          step=\"0.01\"\n                          className=\"pl-10\"\n                          required\n                        />\n                      </div>\n                    </div>\n                  )}\n\n                  <div className=\"sm:col-span-3\">\n                    <label htmlFor=\"targetCtr\" className=\"block text-sm font-medium text-gray-700\">\n                      Target CTR (%)\n                    </label>\n                    <div className=\"mt-1 relative rounded-md shadow-sm\">\n                      <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                        <Percent className=\"h-5 w-5 text-gray-400\" />\n                      </div>\n                      <Input\n                        type=\"number\"\n                        name=\"targetCtr\"\n                        id=\"targetCtr\"\n                        value={formData.targetCtr}\n                        onChange={handleChange}\n                        min=\"0.1\"\n                        max=\"100\"\n                        step=\"0.1\"\n                        className=\"pl-10\"\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"sm:col-span-3\">\n                    <label htmlFor=\"targetCpc\" className=\"block text-sm font-medium text-gray-700\">\n                      Target CPC ($)\n                    </label>\n                    <div className=\"mt-1 relative rounded-md shadow-sm\">\n                      <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                        <DollarSign className=\"h-5 w-5 text-gray-400\" />\n                      </div>\n                      <Input\n                        type=\"number\"\n                        name=\"targetCpc\"\n                        id=\"targetCpc\"\n                        value={formData.targetCpc}\n                        onChange={handleChange}\n                        min=\"0.01\"\n                        step=\"0.01\"\n                        className=\"pl-10\"\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex justify-end space-x-3\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => navigate(-1)}\n                disabled={isSubmitting}\n              >\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                disabled={isSubmitting || insufficientMoves}\n                className={cn(\n                  \"relative overflow-hidden\",\n                  insufficientMoves && \"opacity-70 cursor-not-allowed\"\n                )}\n              >\n                {isSubmitting ? (\n                  'Creating...'\n                ) : insufficientMoves ? (\n                  'Not Enough Moves'\n                ) : (\n                  <>\n                    <span className=\"relative z-10\">Create Campaign ({calculatedCost} moves)</span>\n                    <span \n                      className=\"absolute inset-y-0 left-0 bg-blue-600\"\n                      style={{ \n                        width: `${Math.min(100, (moveBalance / (calculatedCost || 1)) * 100)}%`,\n                        transition: 'width 0.3s ease'\n                      }}\n                    />\n                  </>\n                )}\n              </Button>\n            </div>\n          </div>\n        </form>\n    </div>\n  );\n}\n","import { API_BASE_URL } from '../config';\nimport { buildAuthHeaders } from '../utils/api';\n\n// Enable debug logging\nconst DEBUG = true;\nconst debugLog = (...args: any[]) => {\n  if (DEBUG) {\n    console.log('[API]', ...args);\n  }\n};\n\ntype ApiResponse<T> = {\n  data?: T;\n  error?: {\n    code: string;\n    message: string;\n    details?: any;\n  };\n  status: number;\n};\n\nclass ApiError extends Error {\n  code: string;\n  status: number;\n  details?: any;\n\n  constructor(message: string, code: string, status: number, details?: any) {\n    super(message);\n    this.name = 'ApiError';\n    this.code = code;\n    this.status = status;\n    this.details = details;\n  }\n}\n\nconst handleResponse = async <T>(response: Response): Promise<ApiResponse<T>> => {\n  debugLog(`Handling response from ${response.url} [${response.status}]`);\n  \n  let data;\n  try {\n    data = await response.json();\n    debugLog('Response data:', data);\n  } catch (error) {\n    debugLog('Failed to parse JSON response:', error);\n    data = {};\n  }\n  \n  if (!response.ok) {\n    const error = {\n      code: data?.error?.code || 'UNKNOWN_ERROR',\n      message: data?.error?.message || `HTTP Error ${response.status}: ${response.statusText}`,\n      details: data?.error?.details || { status: response.status, statusText: response.statusText },\n    };\n    \n    console.error(`API Error [${response.status}]:`, {\n      url: response.url,\n      status: response.status,\n      error,\n      responseHeaders: Object.fromEntries(response.headers.entries()),\n    });\n    \n    throw new ApiError(error.message, error.code, response.status, error.details);\n  }\n  \n  return { data, status: response.status };\n};\n\nexport const api = {\n  get: async <T>(url: string, options: RequestInit = {}): Promise<ApiResponse<T>> => {\n    const fullUrl = `${API_BASE_URL}${url}`;\n    debugLog(`GET ${fullUrl}`, { options });\n    \n    try {\n      const headers = {\n        'Content-Type': 'application/json',\n        ...buildAuthHeaders(),\n        ...options.headers,\n      };\n      \n      debugLog('Request headers:', headers);\n      \n      const response = await fetch(fullUrl, {\n        ...options,\n        method: 'GET',\n        headers,\n        credentials: 'include',\n      });\n      \n      debugLog(`Response received for GET ${url}:`, {\n        status: response.status,\n        statusText: response.statusText,\n        headers: Object.fromEntries(response.headers.entries()),\n      });\n      \n      return handleResponse<T>(response);\n    } catch (error) {\n      debugLog(`Error in GET ${url}:`, error);\n      if (error instanceof ApiError) throw error;\n      throw new ApiError(\n        'Network error occurred',\n        'NETWORK_ERROR',\n        0,\n        { \n          url,\n          method: 'GET',\n          originalError: error instanceof Error ? error.message : String(error)\n        }\n      );\n    }\n  },\n\n  post: async <T>(\n    url: string,\n    body: any,\n    options: RequestInit = {}\n  ): Promise<ApiResponse<T>> => {\n    try {\n      const response = await fetch(`${API_BASE_URL}${url}`, {\n        ...options,\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...buildAuthHeaders(),\n          ...options.headers,\n        },\n        credentials: 'include',\n        body: JSON.stringify(body),\n      });\n      \n      return handleResponse<T>(response);\n    } catch (error) {\n      if (error instanceof ApiError) throw error;\n      throw new ApiError(\n        'Network error occurred',\n        'NETWORK_ERROR',\n        0,\n        { originalError: error }\n      );\n    }\n  },\n\n  put: async <T>(\n    url: string,\n    body: any,\n    options: RequestInit = {}\n  ): Promise<ApiResponse<T>> => {\n    try {\n      const response = await fetch(`${API_BASE_URL}${url}`, {\n        ...options,\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          ...buildAuthHeaders(),\n          ...options.headers,\n        },\n        credentials: 'include',\n        body: JSON.stringify(body),\n      });\n      \n      return handleResponse<T>(response);\n    } catch (error) {\n      if (error instanceof ApiError) throw error;\n      throw new ApiError(\n        'Network error occurred',\n        'NETWORK_ERROR',\n        0,\n        { originalError: error }\n      );\n    }\n  },\n\n  delete: async <T>(\n    url: string,\n    options: RequestInit = {}\n  ): Promise<ApiResponse<T>> => {\n    try {\n      const response = await fetch(`${API_BASE_URL}${url}`, {\n        ...options,\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          ...buildAuthHeaders(),\n          ...options.headers,\n        },\n        credentials: 'include',\n      });\n      \n      return handleResponse<T>(response);\n    } catch (error) {\n      if (error instanceof ApiError) throw error;\n      throw new ApiError(\n        'Network error occurred',\n        'NETWORK_ERROR',\n        0,\n        { originalError: error }\n      );\n    }\n  },\n};\n\nexport default api;\n","import api, { ApiResponse } from './api';\nimport { ContentPieceType } from '@/shared/types';\n\n// Enable debug logging\nconst DEBUG = true;\nconst debugLog = (...args: any[]) => {\n  if (DEBUG) {\n    console.log('[ContentService]', ...args);\n  }\n};\n\nconst CONTENT_API_PREFIX = '/api/content';\n\nexport const contentService = {\n  // Get content by ID\n  getContent: async (id: string | number): Promise<ContentPieceType> => {\n    debugLog(`Fetching content with ID: ${id}`);\n    try {\n      const response = await api.get<{ content: ContentPieceType }>(`${CONTENT_API_PREFIX}/${id}`);\n      debugLog('Content fetched successfully:', response.data);\n      \n      if (!response.data?.content) {\n        throw new Error('No content data received from API');\n      }\n      \n      return response.data.content;\n    } catch (error) {\n      debugLog('Error fetching content:', error);\n      throw new Error(`Failed to fetch content: ${error.message}`);\n    }\n  },\n\n  // Get content metrics\n  getContentMetrics: async (id: string | number) => {\n    const { data } = await api.get(`${CONTENT_API_PREFIX}/${id}/metrics`);\n    return data;\n  },\n\n  // Get user's interaction status with content\n  getUserContentStatus: async (contentId: string | number) => {\n    const { data } = await api.get(`${CONTENT_API_PREFIX}/${contentId}/user-status`);\n    return data;\n  },\n\n  // Like content\n  likeContent: async (contentId: string | number) => {\n    const { data } = await api.post(`${CONTENT_API_PREFIX}/${contentId}/like`, {});\n    return data;\n  },\n\n  // Unlike content\n  unlikeContent: async (contentId: string | number) => {\n    const { data } = await api.delete(`${CONTENT_API_PREFIX}/${contentId}/like`);\n    return data;\n  },\n\n  // Save content\n  saveContent: async (contentId: string | number) => {\n    const { data } = await api.post(`${CONTENT_API_PREFIX}/${contentId}/save`, {});\n    return data;\n  },\n\n  // Unsave content\n  unsaveContent: async (contentId: string | number) => {\n    const { data } = await api.delete(`${CONTENT_API_PREFIX}/${contentId}/save`);\n    return data;\n  },\n\n  // Get content comments\n  getContentComments: async (contentId: string | number) => {\n    const { data } = await api.get(`${CONTENT_API_PREFIX}/${contentId}/comments`);\n    return data?.comments || [];\n  },\n\n  // Add comment to content\n  addComment: async (contentId: string | number, comment: string) => {\n    const { data } = await api.post(`${CONTENT_API_PREFIX}/${contentId}/comments`, { comment });\n    return data;\n  },\n\n  // Get related content\n  getRelatedContent: async (contentId: string | number) => {\n    const { data } = await api.get<{ items: ContentPieceType[] }>(\n      `${CONTENT_API_PREFIX}/${contentId}/related`\n    );\n    return data?.items || [];\n  },\n\n  // Report content\n  reportContent: async (contentId: string | number, reason: string) => {\n    const { data } = await api.post(`${CONTENT_API_PREFIX}/${contentId}/report`, { reason });\n    return data;\n  },\n};\n\nexport default contentService;\n","import { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Button } from '@/components/ui/button';\n\n// Direct import to avoid path resolution issues\nimport { contentService } from '../services/contentService';\n\nconst TestContentDetailsPage = () => {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const [content, setContent] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [apiBaseUrl, setApiBaseUrl] = useState('');\n\n  useEffect(() => {\n    // Log environment for debugging\n    console.log('Environment:', {\n      NODE_ENV: process.env.NODE_ENV,\n      VITE_API_URL: import.meta.env.VITE_API_URL,\n      location: window.location.href,\n      pathname: window.location.pathname,\n      search: window.location.search,\n    });\n\n    // Set API base URL from environment\n    setApiBaseUrl(import.meta.env.VITE_API_URL || 'http://localhost:3001');\n\n    const fetchContent = async () => {\n      if (!id) {\n        setError('No content ID provided');\n        setLoading(false);\n        return;\n      }\n\n      console.log('Starting to fetch content for ID:', id);\n      \n      try {\n        // Test direct fetch first\n        const testUrl = `${import.meta.env.VITE_API_URL || 'http://localhost:3001'}/api/content/${id}`;\n        console.log('Testing direct fetch to:', testUrl);\n        \n        // First try with the content service\n        console.log('Trying contentService.getContent...');\n        const data = await contentService.getContent(id);\n        console.log('Content data received via service:', data);\n        setContent(data);\n      } catch (err) {\n        console.error('Error with content service:', err);\n        \n        // Fallback to direct fetch\n        try {\n          console.log('Falling back to direct fetch...');\n          const response = await fetch(\n            `${import.meta.env.VITE_API_URL || 'http://localhost:3001'}/api/content/${id}`,\n            {\n              credentials: 'include',\n              headers: {\n                'Content-Type': 'application/json',\n              },\n            }\n          );\n          \n          if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n          }\n          \n          const data = await response.json();\n          console.log('Direct fetch successful:', data);\n          setContent(data);\n        } catch (fetchErr) {\n          console.error('Direct fetch failed:', fetchErr);\n          setError(fetchErr.message || 'Failed to load content');\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchContent();\n  }, [id]);\n\n  if (loading) {\n    return (\n      <div className=\"container mx-auto p-4\">\n        <h1 className=\"text-2xl font-bold mb-4\">Loading Content...</h1>\n        <div className=\"space-y-4\">\n          <div className=\"p-4 bg-blue-50 rounded-lg\">\n            <h2 className=\"font-semibold mb-2\">Debug Information:</h2>\n            <pre className=\"text-sm bg-white p-2 rounded border\">\n              Content ID: {id || 'N/A'}\n              API Base: {apiBaseUrl || 'Not set'}\n              \n              Check the browser console for detailed logs.\n            </pre>\n          </div>\n          <Button \n            onClick={() => window.location.reload()}\n            variant=\"outline\"\n            className=\"mt-4\"\n          >\n            Refresh Page\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"container mx-auto p-4\">\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n          <strong className=\"font-bold\">Error: </strong>\n          <span className=\"block sm:inline\">{error}</span>\n        </div>\n        <div className=\"mt-4\">\n          <Button \n            onClick={() => window.location.reload()}\n            variant=\"outline\"\n          >\n            Reload Page\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto p-4\">\n      <h1 className=\"text-2xl font-bold mb-4\">Content Details</h1>\n      <pre className=\"bg-gray-100 p-4 rounded overflow-auto\">\n        {JSON.stringify(content, null, 2)}\n      </pre>\n    </div>\n  );\n};\n\nexport default TestContentDetailsPage;\n","import { useLocation, useNavigate } from 'react-router-dom';\n\ntype NotFoundProps = {\n  title?: string;\n  message?: string;\n};\n\nexport default function NotFound({ title, message }: NotFoundProps) {\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  // Get state from navigation or use props\n  const state = location.state as { title?: string; message?: string } | null;\n  const displayTitle = title || state?.title || 'Page Not Found';\n  const displayMessage = message || state?.message || \n    'The page you are looking for might have been removed or is temporarily unavailable.';\n\n  return (\n    <div className=\"flex flex-col items-center justify-center min-h-screen bg-white text-gray-800 px-4 py-12\">\n      <div className=\"max-w-md w-full text-center\">\n        <h1 className=\"text-5xl font-bold text-red-500 mb-4\">{displayTitle}</h1>\n        <p className=\"text-lg text-gray-600 mb-8\">{displayMessage}</p>\n        <button\n          onClick={() => navigate('/')}\n          className=\"px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors duration-200\"\n        >\n          Back to Home\n        </button>\n      </div>\n    </div>\n  );\n}\n","import { BrowserRouter as Router, Routes, Route, Navigate, useLocation } from \"react-router-dom\";\nimport ErrorPage from \"@/react-app/pages/ErrorPage\";\nimport LeaderboardPage from \"@/react-app/pages/Leaderboard\";\nimport Layout from \"@/react-app/components/Layout\";\nimport ErrorBoundary from \"@/react-app/components/ErrorBoundary\";\nimport HomePage from \"@/react-app/pages/Home\";\nimport AuthPage from \"@/react-app/pages/AuthPage\";\nimport AuthCallbackPage from \"@/react-app/pages/AuthCallback\";\nimport HomeFeedPage from \"@/react-app/pages/HomeFeed\";\nimport EarnPage from \"@/react-app/pages/Earn\";\nimport CreatePage from \"@/react-app/pages/Create\";\nimport InvestPage from \"@/react-app/pages/Invest\";\nimport WalletPage from \"@/react-app/pages/Wallet\";\nimport GrowthHubPage from \"@/react-app/pages/GrowthHub\";\nimport { ProfilePage } from \"@/react-app/pages/Profile\";\nimport { ContentDetailPage } from \"@/react-app/pages/ContentDetail\";\nimport HoldingDetailPage from \"@/react-app/pages/HoldingDetail\";\nimport PredictionDetailPage from \"@/react-app/pages/PredictionDetail\";\nimport TaskDetailPage from \"@/react-app/pages/TaskDetail\";\nimport AdvertiserDashboard from \"@/react-app/pages/AdvertiserDashboard\";\nimport AdvertiserOnboarding from \"@/react-app/pages/AdvertiserOnboarding\";\nimport CampaignDetail from \"@/react-app/pages/CampaignDetail\";\nimport NewCampaign from \"@/react-app/pages/NewCampaign\";\nimport TestContentDetailsPage from \"@/react-app/pages/TestContentDetailsPage\";\nimport NotFound from \"@/react-app/pages/NotFound\";\nimport { AuthProvider, useAuth } from '@/react-app/hooks/useAuth';\n\n// Debug logging\nconsole.log(\"🚀 App.tsx: Starting to load...\");\n\n// Protected route wrapper that requires authentication\nfunction ProtectedRoute({ children }: { children: React.ReactNode }) {\n  const { user, isPending } = useAuth();\n  const location = useLocation();\n\n  if (isPending) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    // Redirect to login page, but save the current location they were trying to go to\n    return <Navigate to=\"/auth\" state={{ from: location }} replace />;\n  }\n\n  return <>{children}</>;\n}\n\n// Public route wrapper for marketing/landing pages (no internal navigation)\nfunction PublicRoute({\n  children,\n  redirectAuthenticated = true,\n  redirectTo = '/dashboard'\n}: {\n  children: React.ReactNode;\n  redirectAuthenticated?: boolean;\n  redirectTo?: string;\n}) {\n  const { user } = useAuth();\n  const location = useLocation();\n\n  // If user is already logged in, redirect to dashboard\n  if (redirectAuthenticated && user) {\n    const from = location.state?.from?.pathname || redirectTo;\n    return <Navigate to={from} replace />;\n  }\n\n  return <>{children}</>;\n}\n\nexport default function App() {\n  return (\n    <ErrorBoundary>\n      <Router>\n        <AuthProvider>\n          <Routes>\n            {/* Public routes */}\n            <Route path=\"/auth\" element={\n              <PublicRoute>\n                <AuthPage />\n              </PublicRoute>\n            } />\n            <Route path=\"/auth/callback\" element={\n              <PublicRoute>\n                <AuthCallbackPage />\n              </PublicRoute>\n            } />\n            <Route path=\"/\" element={\n              <PublicRoute redirectAuthenticated={false}>\n                <HomePage />\n              </PublicRoute>\n            } />\n\n            {/* Protected routes */}\n            <Route path=\"/dashboard\" element={\n              <ProtectedRoute>\n                <Layout><HomeFeedPage /></Layout>\n              </ProtectedRoute>\n            } />\n            <Route path=\"/leaderboard\" element={\n              <ProtectedRoute>\n                <Layout><LeaderboardPage /></Layout>\n              </ProtectedRoute>\n            } />\n            <Route path=\"/earn\" element={\n              <ProtectedRoute>\n                <Layout><EarnPage /></Layout>\n              </ProtectedRoute>\n            } />\n            <Route path=\"/create\" element={\n              <ProtectedRoute>\n                <Layout><CreatePage /></Layout>\n              </ProtectedRoute>\n            } />\n            <Route path=\"/invest\" element={\n              <ProtectedRoute>\n                <Layout><InvestPage /></Layout>\n              </ProtectedRoute>\n            } />\n            <Route path=\"/wallet\" element={\n              <ProtectedRoute>\n                <Layout><WalletPage /></Layout>\n              </ProtectedRoute>\n            } />\n            <Route path=\"/growth-hub\" element={\n              <ProtectedRoute>\n                <Layout><GrowthHubPage /></Layout>\n              </ProtectedRoute>\n            } />\n            <Route path=\"/profile/:username\" element={\n              <ProtectedRoute>\n                <Layout><ProfilePage /></Layout>\n              </ProtectedRoute>\n            } />\n            <Route path=\"/content/:id\" element={\n              <ProtectedRoute>\n                <ContentDetailPage />\n              </ProtectedRoute>\n            } />\n            <Route path=\"/test-content/:id\" element={\n              <TestContentDetailsPage />\n            } />\n            <Route path=\"/holding/:holdingId\" element={\n              <ProtectedRoute>\n                <Layout><HoldingDetailPage /></Layout>\n              </ProtectedRoute>\n            } />\n            <Route path=\"/prediction/:predictionId\" element={\n              <ProtectedRoute>\n                <Layout><PredictionDetailPage /></Layout>\n              </ProtectedRoute>\n            } />\n            <Route path=\"/task/:taskId\" element={\n              <ProtectedRoute>\n                <Layout><TaskDetailPage /></Layout>\n              </ProtectedRoute>\n            } />\n            <Route path=\"/advertiser\" element={\n              <ProtectedRoute>\n                <Layout><AdvertiserDashboard /></Layout>\n              </ProtectedRoute>\n            } />\n            <Route path=\"/advertiser/onboarding\" element={\n              <ProtectedRoute>\n                <Layout><AdvertiserOnboarding /></Layout>\n              </ProtectedRoute>\n            } />\n            <Route path=\"/campaigns/new\" element={\n              <ProtectedRoute>\n                <Layout><NewCampaign /></Layout>\n              </ProtectedRoute>\n            } />\n            <Route path=\"/campaigns/:campaignId\" element={\n              <ProtectedRoute>\n                <Layout><CampaignDetail /></Layout>\n              </ProtectedRoute>\n            } />\n            <Route path=\"/home\" element={<Navigate to=\"/dashboard\" replace />} />\n\n            {/* Error and not found routes */}\n            <Route path=\"/not-found\" element={\n              <PublicRoute redirectAuthenticated={false}>\n                <NotFound />\n              </PublicRoute>\n            } />\n            <Route path=\"/error\" element={\n              <PublicRoute redirectAuthenticated={false}>\n                <ErrorPage />\n              </PublicRoute>\n            } />\n            {/* Catch-all route */}\n            <Route path=\"*\" element={\n              <PublicRoute redirectAuthenticated={false}>\n                <NotFound />\n              </PublicRoute>\n            } />\n          </Routes>\n        </AuthProvider>\n      </Router>\n    </ErrorBoundary>\n  );\n}\n","import { Component, ReactNode } from 'react';\n\ntype ErrorBoundaryState = {\n  hasError: boolean;\n  error: Error | null;\n};\n\ntype ErrorBoundaryProps = {\n  children: ReactNode;\n  fallback?: ReactNode;\n};\n\nexport class ErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  state: ErrorBoundaryState = { hasError: false, error: null };\n\n  static getDerivedStateFromError(error: Error) {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: any) {\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      const errorMessage = this.state.error instanceof Error \n        ? this.state.error.message \n        : 'An unknown error occurred';\n        \n      return this.props.fallback ?? (\n        <div className=\"p-6 text-red-600\">\n          <h2 className=\"text-lg font-semibold mb-2\">Something went wrong</h2>\n          <p className=\"text-sm\">{errorMessage}</p>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","import { StrictMode, Suspense } from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport \"@/react-app/index.css\";\nimport App from \"@/react-app/App.tsx\";\nimport { ErrorBoundary } from \"@/app/ErrorBoundary\";\n\nconsole.log(\"🚀 main.tsx: Starting application...\");\n\ncreateRoot(document.getElementById(\"root\")!).render(\n  <StrictMode>\n    <ErrorBoundary>\n      <Suspense fallback={\n        <div className=\"flex items-center justify-center min-h-screen\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n        </div>\n      }>\n        <App />\n      </Suspense>\n    </ErrorBoundary>\n  </StrictMode>\n);\n"],"names":["generateErrorCode","errorInfo","data","hash","i","char","encodeErrorInfo","jsonString","e","decodeErrorInfo","encoded","createErrorInfo","error","component","action","userId","errorMessage","stack","navigateToErrorPage","code","handleCriticalError","ErrorPage","propTitle","propMessage","searchParams","useSearchParams","navigate","useNavigate","location","useLocation","setErrorInfo","useState","copied","setCopied","errorCode","encodedData","state","useEffect","decoded","handleGoHome","handleRefresh","handleCopyErrorCode","err","formatTimestamp","timestamp","getErrorTitle","getErrorDescription","jsxs","jsx","AlertTriangle","CheckCircle","Copy","RefreshCw","Home","Leaderboard","period","setPeriod","leaderboard","setLeaderboard","loading","setLoading","fetchLeaderboard","getRankIcon","rank","Crown","Medal","getRankStyle","Trophy","Zap","TrendingUp","Star","periodOption","Icon","entry","index","Diamond","Key","sum","LOCAL_API_URL","DEFAULT_API_BASE","configuredApiBase","resolvedBase","sanitizedBase","API_BASE_URL","prefix","API_ENDPOINTS","type","provider","AuthContext","createContext","decodeJwtPayload","token","payload","base64","jsonPayload","c","userFromToken","id","AuthProvider","children","user","setUser","isPending","setIsPending","persistSession","incomingUser","resolvedUser","handleApiResponse","response","signIn","email","password","signUp","signInWithOAuth","handleDemoLogin","url","errorText","signOut","fallbackUser","prev","value","useAuth","context","useContext","UserLink","username","displayName","avatarUrl","className","showAvatar","size","sizeClasses","User","linkUrl","Link","Tooltip","content","position","delay","disabled","maxWidth","allowWrap","compact","isVisible","setIsVisible","actualPosition","setActualPosition","timeoutRef","useRef","containerRef","tooltipRef","calculatePosition","triggerRect","tooltipRect","viewport","spaceTop","spaceBottom","spaceLeft","spaceRight","tooltipHeight","tooltipWidth","buffer","bestPosition","handleMouseEnter","handleMouseLeave","getTooltipClasses","getDynamicMaxWidth","contentLength","getArrowClasses","NotificationCenter","isOpen","onClose","notifications","setNotifications","fetchNotifications","mockNotifications","markAsRead","notificationId","notification","markAllAsRead","getNotificationIcon","Coins","Info","AlertCircle","Bell","diff","minutes","hours","days","unreadCount","n","X","Check","CurrencyConversionModal","onSuccess","fromCurrency","setFromCurrency","amount","setAmount","setError","conversionRates","getCurrentBalance","getRequiredAmount","canAfford","handleConvert","errorData","qty","ArrowRight","Fragment","MasterKeyModal","masterKeyStatus","setMasterKeyStatus","fetchMasterKeyStatus","handleActivate","tierInfo","tier","isActivated","canActivate","Shield","Clock","InstagramVerificationModal","step","setStep","instagramUsername","setInstagramUsername","handleRegisterInstagram","handleClaimPoints","copyToClipboard","text","tierPoints","Instagram","DEFAULT_UPGRADE_COSTS","UserTierUpgradeModal","upgradeCosts","setUpgradeCosts","selectedTier","setSelectedTier","paymentMethod","setPaymentMethod","isLoadingCosts","setIsLoadingCosts","fetchUpgradeCosts","normalizeCosts","rawCosts","merged","upgrades","targetTier","costs","authToken","normalizedTier","availableUpgrades","hasAvailableUpgrades","getTierInfo","handleUpgrade","method","cost","currentTierInfo","normalizedTarget","Gem","benefit","SearchModal","searchQuery","setSearchQuery","searchResults","setSearchResults","activeTab","setActiveTab","MOCK_CONTENT","MOCK_DROPS","MOCK_USERS","buildMockResults","query","normalizedQuery","item","drops","users","timeoutId","handleSearch","results","getFilteredResults","getTotalResults","filteredResults","totalResults","Search","tab","FileText","drop","DollarSign","Users","GoldShopModal","onPurchase","activeCategory","setActiveCategory","userPurchases","setUserPurchases","fetchUserPurchases","purchases","handlePurchase","showPurchaseNotification","itemName","getIconComponent","iconName","IconComponent","Award","goldShopItems","categories","filteredItems","isItemOwned","purchase","category","owned","affordable","AchievementsModal","achievements","setAchievements","fetchAchievements","getMockAchievements","claimAchievement","achievementId","result","showRewardNotification","gold","xp","getCategoryColor","a","filteredAchievements","completedCount","totalGoldEarned","achievement","Gift","Lock","useNotifications","setUnreadCount","stored","addNotification","useCallback","newCount","showToast","message","toast","styles","buildAuthHeaders","headers","resolveApiUrl","path","base","normalisedPath","apiFetch","options","originalFetch","input","init","redirectedRequest","rewritten","Layout","logout","userData","setUserData","showCurrencyModal","setShowCurrencyModal","showMasterKeyModal","setShowMasterKeyModal","showInstagramModal","setShowInstagramModal","showUpgradeModal","setShowUpgradeModal","showSearchModal","setShowSearchModal","showUserMenu","setShowUserMenu","showWalletMenu","setShowWalletMenu","showMobileMenu","setShowMobileMenu","showNotifications","setShowNotifications","showGoldShopModal","setShowGoldShopModal","showAchievementsModal","setShowAchievementsModal","apiBase","withApiBase","fetchUserData","handleKeyDown","handleClickOutside","target","navigation","baseNav","Plus","Rocket","Settings","isActive","getTotalBalance","profileSlug","profilePath","handleWalletAction","handleLogout","backendError","storageError","handleUserAction","Wallet","ChevronDown","Megaphone","LogOut","Menu","Component","useAsyncData","asyncFunction","initialData","immediate","setData","execute","baseClasses","variants","sizes","iconSizes","ButtonComponent","forwardRef","variant","isLoading","loadingText","leftIcon","rightIcon","asChild","props","ref","isValidElement","cloneElement","buttonClasses","Loader2","React","Button","cn","classes","FeatureCard","icon","title","description","payout","bgColorClass","textColorClass","Skeleton","count","height","width","circle","rounded","style","radiusMap","skeletons","_","fetchStats","resolve","fetchFeatures","Target","ErrorState","onRetry","demoLogin","activeStats","setActiveStats","stats","refetchStats","features","loadingFeatures","featuresError","refetchFeatures","interval","Play","platform","feature","Sparkles","story","ChevronRight","AuthPage","isSignUp","setIsSignUp","showPassword","setShowPassword","formData","setFormData","handleSubmit","handleOAuthLogin","Chrome","Mail","EyeOff","Eye","AuthCallback","status","setStatus","setErrorMessage","errorDescription","XCircle","BuySharesModal","wallet","sharesCount","setSharesCount","totalCost","maxShares","ShareContentModal","contentId","contentTitle","setPlatform","shareUrl","setShareUrl","platforms","getTierMultiplier","calculatePoints","multiplier","handleShare","generateShareText","pointsToEarn","Share2","p","ExternalLink","ExternalMoveModal","contentPlatform","contentUrl","moveType","setMoveType","proofUrl","setProofUrl","proofImage","setProofImage","moveTypes","calculateExternalMoveReward","finalPoints","keysEarned","handleImageUpload","file","imageUrl","reward","Camera","t","Upload","z.object","z.string","CreateDropRequestSchema","z.number","z.boolean","z.enum","z.record","z.any","PlatformSchema","DropTypeSchema","DropDifficultySchema","CreateContentRequestSchema","EditContentModal","Save","ConfirmationModal","onConfirm","confirmText","cancelText","getIcon","getConfirmButtonStyle","ShareModal","shareText","shareToFacebook","shareToTwitter","shareToWhatsApp","shareViaEmail","subject","body","shareNative","Facebook","Twitter","MessageCircle","SavedContentModal","savedContent","setSavedContent","fetchSavedContent","removeSavedContent","formatDate","dateString","getPlatformIcon","Bookmark","Trash2","Calendar","PrimaryButton","onClick","getVariantStyles","event","PriceLabel","sharePriceRaw","sharePrice","AvailabilityLabel","paidShares","ButtonGroup","onBuyShares","onPredict","onTip","onExternalMove","currentUser","onEdit","onDelete","engagementShares","handleButtonClick","callback","shareHint","SocialButton","color","getHoverColor","StatBar","onSocialAction","onShare","onComment","formatNumber","num","Heart","Repeat","ContentCard","onNavigate","isSponsored","handleCardClick","totalShares","availableShares","ownedShares","engagementSharesRemaining","revenue","createdAt","postedDateLabel","Tag","EnhancedDropCard","onApply","formatLabel","fallback","label","getDifficultyColor","difficulty","getStatusColor","formatDeadline","deadline","date","now","diffTime","diffDays","getRewardPerKey","previewImage","PersonalizedEmptyState","PlaceForecastModal","forecast","onPredictionPlaced","predictionSide","setPredictionSide","predictionAmount","setPredictionAmount","isSubmitting","setIsSubmitting","userWallet","setUserWallet","fetchUserWallet","usdWallet","w","potentialPayout","formatTimeRemaining","expiresAt","TipModal","tipAmount","setTipAmount","tipOptions","handleTip","HomeFeed","contentFeed","setContentFeed","dropFeed","setDropFeed","wallets","setWallets","sponsoredContent","setSponsoredContent","buyModalOpen","setBuyModalOpen","shareModalOpen","setShareModalOpen","externalMoveModalOpen","setExternalMoveModalOpen","setForecastModalOpen","selectedContent","setSelectedContent","shareContentData","setShareContentData","externalMoveContentData","setExternalMoveContentData","editContentModalOpen","setEditContentModalOpen","editContentData","setEditContentData","deleteConfirmModalOpen","setDeleteConfirmModalOpen","contentToDelete","setContentToDelete","contentShareModalOpen","setContentShareModalOpen","shareModalContent","setShareModalContent","savedContentModalOpen","setSavedContentModalOpen","tipModalOpen","setTipModalOpen","tipContent","setTipContent","predictModalOpen","setPredictModalOpen","predictContent","setPredictContent","fetchFeeds","openContentDetail","contentResponse","dropsResponse","walletsResponse","sponsoredResponse","contentData","dropsData","walletsData","sponsoredData","handleSocialAction","showPointsNotification","handleBuyShares","openBuyModal","openShareModal","openSavedContentModal","openTipModal","openEditModal","openPredictModal","openDeleteConfirm","handleDeleteConfirm","getTierIcon","getSmartCTA","Flame","getForYouFeed","mixedFeed","highValueDrops","trendingContent","sponsored","prioritizedContent","prioritizedDrops","smartCTA","stat","Activity","Earn","setDrops","showCreateForm","setShowCreateForm","searchTerm","setSearchTerm","selectedDropType","setSelectedDropType","selectedDifficulty","setSelectedDifficulty","fetchDrops","createParam","filteredDrops","dropType","l","Filter","DropCard","CreateDropModal","getDropTypeImage","handleDropClick","isDemo","getDropTypeIcon","getInitialDropType","uploadingFile","setUploadingFile","uploadMode","setUploadMode","previewUrl","setPreviewUrl","uploadedFile","setUploadedFile","setDropType","fileInputRef","getInitialFormData","prevData","handleFileChange","reader","removeUploadedFile","uploadImageToStorage","reject","withErrorRedirect","operation","handleApiError","criticalStatuses","criticalMessages","msg","createErrorHandler","Create","errorHandler","postData","setPostData","fundWithGems","setFundWithGems","gemFundingAmount","setGemFundingAmount","fallbackResponse","fallbackResult","fallbackError","placeholderUrl","handleFileUpload","typeError","sizeError","uploadedUrl","uploadError","validateImageUrl","contentType","handleCreatePost","urlError","finalPostData","fundingError","errorDetails","fe","isServerError","isDatabaseError","isValidationError","contentError","createError","Youtube","Linkedin","Music","LinkIcon","getPlatformColor","ImageIcon","Video","CreateForecastModal","onForecastCreated","contentOptions","setContentOptions","fetchContentOptions","tomorrow","handleContentSelect","Invest","forecasts","setForecasts","myForecasts","setMyForecasts","myCreatedForecasts","setMyCreatedForecasts","setContent","showCreateModal","setShowCreateModal","showPlaceModal","setShowPlaceModal","selectedForecast","setSelectedForecast","fetchData","handlePlacePrediction","handleForecastCreated","handlePredictionPlaced","formatCurrency","ForecastCard","isExpired","MyForecastCard","isResolved","isWin","ContentShareCard","piece","WithdrawalModal","selectedMethod","setSelectedMethod","paymentDetails","setPaymentDetails","withdrawalMethods","setWithdrawalMethods","userPreferences","setUserPreferences","saveAsDefault","setSaveAsDefault","fetchWithdrawalMethods","fetchUserPreferences","methods","preferences","eligibleForWithdrawal","selectedMethodData","m","feeAmount","netAmount","getMethodIcon","CreditCard","Building","getRequiredFields","methodData","getFieldLabel","field","getFieldType","isFieldRequired","handleSubmitWithdrawal","resetForm","handleClose","canProceedToMethod","canProceedToDetails","canProceedToConfirm","stepName","v","arr","preset","pref","displayInfo","key","PaymentPreferencesModal","showAddForm","setShowAddForm","editingId","setEditingId","preferencesResponse","methodsResponse","getDisplayInfo","preference","handleSavePreference","handleDeletePreference","handleSetDefault","startEdit","Edit3","gemPackages","GemStoreModal","selectedPackage","setSelectedPackage","packageData","checkout_url","selectedPackageData","pkg","AuthDebugger","redirectToLogin","debugInfo","setDebugInfo","runAuthTest","cookies","hasSessionToken","authHeaders","mochaAuthResponse","mochaAuthText","mochaAuthData","appUserResponse","appUserText","appUserData","debugResult","clearAllData","eqPos","name","forceLogin","LogIn","mockListings","fetchShareListings","ownerOnly","listing","createShareListing","createShareOffer","mockOffers","fetchShareOffers","role","offer","acceptShareOffer","offerId","ListShareModal","holding","quantity","setQuantity","price","setPrice","submitting","setSubmitting","resetState","fallbackHoldings","fallbackPredictions","fallbackHoldingDetail","holdings","fallbackPredictionDetail","predictionId","predictions","prediction","day","actual","getPortfolioHoldings","getPortfolioPredictions","getHoldingDetail","getPredictionDetail","COLORS","CHART_COLORS","EarningsChart","ResponsiveContainer","AreaChart","CartesianGrid","XAxis","YAxis","Area","PerformanceMetrics","BarChart","Bar","ActivityBreakdown","dataWithColors","PieChart","Pie","Cell","Legend","TrendLine","primaryKey","secondaryKey","primaryColor","secondaryColor","LineChart","Line","MultiMetricChart","metrics","metric","KPICard","change","changeType","trend","changeColor","changeIcon","WalletAnalyticsOverview","earningsData","currencyBreakdown","earningsSources","ArrowUpRight","d","WalletIcon","PortfolioHoldingsSection","onList","onView","totals","acc","ActiveListingsSection","listings","OffersSection","incoming","outgoing","onAccept","transactions","setTransactions","setHoldings","holdingsLoading","setHoldingsLoading","setListings","listingsLoading","setListingsLoading","incomingOffers","setIncomingOffers","outgoingOffers","setOutgoingOffers","offersLoading","setOffersLoading","selectedHolding","setSelectedHolding","listModalOpen","setListModalOpen","showWithdrawalModal","setShowWithdrawalModal","showPaymentPreferencesModal","setShowPaymentPreferencesModal","showGemStoreModal","setShowGemStoreModal","fetchWalletData","loadHoldings","loadListings","loadOffers","authResponse","authData","responseText","parseError","tempUser","sharedHeaders","transactionsResponse","transactionsData","walletsJson","transactionsJson","additionalDataError","sellerOffers","buyerOffers","openListModal","handleListingSuccess","handleAcceptOffer","getTransactionIcon","ArrowDownLeft","getTransactionColor","handleBuyMoreGems","handleConvertCurrency","handleWithdrawGems","handleCloseGemStore","handleCloseCurrencyModal","handleCloseWithdrawalModal","transaction","StakingModal","channel","getChannelColor","colors","getRiskColor","rewards","stakeAmount","totalDays","totalReturn","dailyReward","finalAmount","canStake","handleStake","handleMaxAmount","maxPossible","Calculator","FundingProjectModal","rewardTiers","setRewardTiers","addRewardTier","removeRewardTier","updateRewardTier","updated","cat","Minus","SocialShieldModal","policies","selectedPolicy","setSelectedPolicy","availablePolicies","selectedPolicyData","userMeetsRequirements","userCanAfford","handleSubscribe","getCoverageIcon","covered","policy","isSelected","meetsRequirements","str","resolveFallback","fetchWithFallback","buildFallbackUser","buildFallbackChannels","iconMap","buildFallbackStakingPositions","buildFallbackFundingProjects","buildFallbackShieldPolicies","GrowthHub","stakingPositions","setStakingPositions","fundingProjects","setFundingProjects","growthChannels","setGrowthChannels","shieldPolicies","setShieldPolicies","selectedChannel","setSelectedChannel","showStakingModal","setShowStakingModal","showFundingModal","setShowFundingModal","showShieldModal","setShowShieldModal","fetchGrowthHubData","userPayload","channelsPayload","stakingPayload","fundingPayload","policiesPayload","mappedChannels","iconKey","iconComponent","mappedPositions","mappedProjects","project","mappedPolicies","fallbackGrowthChannels","socialShieldPolicies","economicData","displayedGrowthChannels","totalEconomicValue","totalStakers","avgAPR","risk","pos","BarChart3","daysLeft","Lightbulb","ReferralModal","referralCode","setReferralCode","handleSubmitCode","showSuccessNotification","copyReferralLink","referralLink","points","DropSubmissionModal","applicationId","dropTitle","submissionType","setSubmissionType","submissionData","setSubmissionData","submissionNotes","setSubmissionNotes","isValidUrl","string","Send","ApplicationCard","application","onSubmissionSuccess","showSubmissionModal","setShowSubmissionModal","getStatusIcon","canSubmit","needsSubmission","InfluenceRewardsModal","rewardData","setRewardData","followers","getCurrentMonth","Phone","EditProfileModal","socialLinks","setSocialLinks","uploadingAvatar","setUploadingAvatar","uploadingBanner","setUploadingBanner","errors","setErrors","parsed","newErrors","validateForm","handleSave","filteredSocialLinks","updateData","updatedUser","getSocialIcon","Globe","getSocialPlaceholder","MakeOfferModal","sellerId","bidPrice","setBidPrice","setMessage","Profile","isPublicProfile","useUserId","authUser","urlUsername","urlUserId","useParams","showEditProfileModal","setShowEditProfileModal","userContent","setUserContent","userDrops","setUserDrops","userApplications","setUserApplications","publicHoldings","setPublicHoldings","publicPredictions","setPublicPredictions","leaderboardPosition","setLeaderboardPosition","contentLoading","setContentLoading","dropsLoading","setDropsLoading","applicationsLoading","setApplicationsLoading","showReferralModal","setShowReferralModal","showInfluenceRewardsModal","setShowInfluenceRewardsModal","offerModalOpen","setOfferModalOpen","offerHolding","setOfferHolding","fetchPublicProfile","fetchUserProfile","newUrl","apiPath","openEditContentModal","openDeleteContentConfirm","openOfferModal","handleEditContentSuccess","updatedContent","handleDeleteContentConfirm","fetchUserApplications","applications","handleProfileUpdateSuccess","copyReferralCode","getLevelProgress","level","currentLevelXP","nextLevelXP","progress","getContentTypeIcon","Image","tabs","MapPin","handle","PublicHoldingsSection","PublicPredictionsSection","ProfilePage","isOwner","onOffer","visibleHoldings","ContentFundingModal","currentRevenue","currency","setCurrency","actionType","setActionType","endpoint","calculateNewSharePrice","convertedAmount","getCurrencyIcon","curr","CommentSystem","comments","setComments","newComment","setNewComment","replyingTo","setReplyingTo","replyText","setReplyText","fetchComments","submitComment","parentId","likeComment","commentId","deleteComment","pinComment","CommentItem","comment","isReply","isAuthor","Pin","MoreVertical","Reply","reply","SponsorshipModal","onSponsor","userGems","sponsorshipPackages","formatDuration","weeks","handleSponsor","fallbackImages","getFallbackImage","seed","buildFallbackContent","normalizeContent","raw","performanceMetrics","mediaUrl","fallbackMetrics","ContentDetail","setMetrics","fundingModalOpen","setFundingModalOpen","editModalOpen","setEditModalOpen","userStatus","setUserStatus","sponsorshipModalOpen","setSponsorshipModalOpen","sponsorshipData","setSponsorshipData","isMounted","fetchContentDetail","fetchWallets","fetchMetrics","fetchSponsorshipData","fetchUserStatus","handleFundingSuccess","newRevenue","newSharePrice","handleEditSuccess","handleSponsorContent","gemAmount","boostMultiplier","durationHours","getPointsForAction","getEngagementMetrics","engagementMetrics","ArrowLeft","ContentDetailPage","HoldingDetailPage","detail","setDetail","performance","marketplace","PredictionDetailPage","trajectory","participants","participant","EditDropModal","submitData","TaskDetail","taskId","dropId","dropIdParam","setDrop","setApplication","applying","setApplying","applicationMessage","setApplicationMessage","isCreator","setIsCreator","showEditModal","setShowEditModal","showDeleteModal","setShowDeleteModal","deleting","setDeleting","buildFallbackMasterKeyStatus","buildFallbackApplications","fallbackUserId","fetchDropDetail","checkApplication","isUserCreator","logError","dropIdKey","existingApp","app","handleApply","handleEdit","handleDelete","updatedDrop","Edit","TabsContext","Tabs","defaultValue","onValueChange","internalValue","setInternalValue","activeValue","handleSelect","nextValue","contextValue","useMemo","TabsList","TabsTrigger","ctx","TabsContent","BrandProfileModal","onSave","currentBrandData","logoFile","setLogoFile","logoPreview","setLogoPreview","uploadingLogo","setUploadingLogo","handleInputChange","handleLogoSelect","uploadLogo","logoUrl","brandData","Building2","Campaigns","showHeader","basePath","campaigns","setCampaigns","getStatusBadge","newCampaignPath","BarChart2","campaign","AdvertiserDashboard","dashboardData","setDashboardData","suggestedContent","setSuggestedContent","loadingSuggestions","setLoadingSuggestions","selectedContentForSponsorship","setSelectedContentForSponsorship","showBrandModal","setShowBrandModal","savingBrand","setSavingBrand","fetchDashboardData","fetchSuggestedContent","handleVisibilityChange","handleStorageChange","getTierBenefits","calculateTotals","analyticsData","campaignPerformance","dropTypeBreakdown","getPackageDetails","packageId","packages","handleSaveBrandProfile","handleTabChange","LayoutDashboard","PlusCircle","packageDetails","MousePointer","analytics","AdvertiserOnboarding","isConverting","setIsConverting","handleBecomeAdvertiser","tierBenefits","info","statusStyles","CampaignDetail","setCampaign","isUpdating","setIsUpdating","mockCampaign","mockContent","handleStatusChange","newStatus","format","getDaysRemaining","endDate","today","daysRemaining","dailySpendRate","estimatedEndDate","Pause","platformContent","totalSpent","totalClicks","avgCtr","Input","Textarea","React.forwardRef","SelectContext","React.createContext","useSelectContext","React.useContext","Select","open","setOpen","React.useState","items","setItems","selectedValue","handleValueChange","React.useCallback","registerItem","existingIndex","prevItem","next","SelectTrigger","SelectValue","placeholder","selectedItem","SelectContent","SelectItem","React.useEffect","DatePicker","selected","onChange","minDate","maxDate","year","month","parseDate","getFullUrl","skipAuth","rest","finalHeaders","useMoveCosts","moveBalance","setMoveBalance","moveCost","setMoveCost","campaignData","requiredMoves","NewCampaign","calculateMoveCost","calculatedCost","setCalculatedCost","insufficientMoves","setInsufficientMoves","handleChange","handleSelectChange","handleDateChange","objectives","bidStrategies","campaignTypes","obj","strategy","Percent","debugLog","args","ApiError","details","handleResponse","api","fullUrl","CONTENT_API_PREFIX","contentService","reason","TestContentDetailsPage","apiBaseUrl","setApiBaseUrl","testUrl","fetchErr","NotFound","displayTitle","displayMessage","ProtectedRoute","Navigate","PublicRoute","redirectAuthenticated","redirectTo","from","App","ErrorBoundary","Router","Routes","Route","AuthCallbackPage","HomePage","HomeFeedPage","LeaderboardPage","EarnPage","CreatePage","InvestPage","WalletPage","GrowthHubPage","TaskDetailPage","createRoot","StrictMode","Suspense"],"mappings":"mxCAcO,SAASA,GAAkBC,EAA8B,CAE9D,MAAMC,EAAO,GAAGD,EAAU,OAAO,IAAIA,EAAU,SAAS,IAAIA,EAAU,GAAG,GAGzE,IAAIE,EAAO,EACX,QAASC,EAAI,EAAGA,EAAIF,EAAK,OAAQE,IAAK,CACpC,MAAMC,EAAOH,EAAK,WAAWE,CAAC,EAC9BD,GAASA,GAAQ,GAAKA,EAAQE,EAC9BF,EAAOA,EAAOA,CAChB,CAMA,MAAO,OAHc,KAAK,IAAIA,CAAI,EACH,SAAS,EAAE,EAAE,cAAc,MAAM,EAAE,EAAE,SAAS,EAAG,GAAG,CAE5D,EACzB,CACO,SAASG,GAAgBL,EAA8B,CAC5D,GAAI,CACF,MAAMM,EAAa,KAAK,UAAUN,CAAS,EAC3C,OAAO,KAAKM,CAAU,CACxB,OAASC,EAAG,CACV,eAAQ,MAAM,+BAAgCA,CAAC,EACxC,EACT,CACF,CAGO,SAASC,GAAgBC,EAAmC,CACjE,GAAI,CACF,MAAMH,EAAa,KAAKG,CAAO,EAC/B,OAAO,KAAK,MAAMH,CAAU,CAC9B,OAASC,EAAG,CACV,eAAQ,MAAM,+BAAgCA,CAAC,EACxC,IACT,CACF,CAGO,SAASG,GACdC,EACAC,EACAC,EACAC,EACW,CACX,MAAMC,EAAe,OAAOJ,GAAU,SAAWA,EAAQA,EAAM,QACzDK,EAAQ,OAAOL,GAAU,SAAWA,EAAM,MAAQ,OAExD,MAAO,CACL,QAASI,EACT,MAAAC,EACA,UAAW,KAAK,IAAA,EAChB,IAAK,OAAO,SAAS,KACrB,UAAW,UAAU,UACrB,OAAAF,EACA,UAAAF,EACA,OAAAC,CAAA,CAEJ,CAGO,SAASI,GAAoBjB,EAA4B,CAC9D,MAAMkB,EAAOnB,GAAkBC,CAAS,EAClCS,EAAUJ,GAAgBL,CAAS,EAGzC,OAAO,SAAS,QAAQ,eAAekB,CAAI,SAAST,CAAO,EAAE,CAC/D,CAGO,SAASU,GACdR,EACAC,EACAC,EACAC,EACM,CACN,MAAMd,EAAYU,GAAgBC,EAAOC,EAAWC,EAAQC,CAAM,EAClEG,GAAoBjB,CAAS,CAC/B,CCnFA,SAAwBoB,GAAU,CAAE,MAAOC,EAAW,QAASC,CAAA,EAAgC,GAAI,CACjG,KAAM,CAACC,CAAY,EAAIC,GAAA,EACjBC,EAAWC,GAAA,EACXC,EAAWC,GAAA,EACX,CAAC5B,EAAW6B,CAAY,EAAIC,EAAAA,SAA2B,IAAI,EAC3D,CAACC,EAAQC,CAAS,EAAIF,EAAAA,SAAS,EAAK,EAEpCG,EAAYV,EAAa,IAAI,MAAM,GAAK,cACxCW,EAAcX,EAAa,IAAI,MAAM,EAGrCY,EAAQR,EAAS,MACTN,GAAac,GAAO,MAClBb,GAAea,GAAO,QAEtCC,EAAAA,UAAU,IAAM,CACd,GAAIF,EACF,GAAI,CACF,MAAMG,EAAU7B,GAAgB0B,CAAW,EAC3CL,EAAaQ,CAAO,CACtB,OAAS1B,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,CACrD,CAEJ,EAAG,CAACuB,CAAW,CAAC,EAEhB,MAAMI,EAAe,IAAM,CACzBb,EAAS,YAAY,CACvB,EAEMc,EAAgB,IAAM,CAC1B,OAAO,SAAS,OAAA,CAClB,EAEMC,EAAsB,SAAY,CACtC,GAAI,CACF,MAAM,UAAU,UAAU,UAAUP,CAAS,EAC7CD,EAAU,EAAI,EACd,WAAW,IAAMA,EAAU,EAAK,EAAG,GAAI,CACzC,OAASS,EAAK,CACZ,QAAQ,MAAM,6BAA8BA,CAAG,CACjD,CACF,EAEMC,EAAmBC,GAChB,IAAI,KAAKA,CAAS,EAAE,eAAA,EAGvBC,EAAgB,IAChB5C,GAAW,YAAc,SACpB,gBAELA,GAAW,YAAc,UACpB,gBAELA,GAAW,YAAc,OACpB,uBAELA,GAAW,SAAW,iBACjB,0BAEF,uBAGH6C,EAAsB,IACtB7C,GAAW,YAAc,SACpB,mGAELA,GAAW,YAAc,UACpB,yEAELA,GAAW,YAAc,OACpB,iEAELA,GAAW,SAAW,iBACjB,uFAEF,gFAGT,aACG,MAAA,CAAI,UAAU,gGACb,SAAA8C,EAAAA,KAAC,MAAA,CAAI,UAAU,iEAEb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,gEACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,sEACb,eAACC,GAAA,CAAc,UAAU,UAAU,CAAA,CACrC,SACC,MAAA,CACC,SAAA,CAAAD,EAAAA,IAAC,KAAA,CAAG,UAAU,qBAAsB,SAAAH,EAAA,EAAgB,EACpDE,EAAAA,KAAC,IAAA,CAAE,UAAU,uBAAuB,SAAA,CAAA,eAAab,CAAA,CAAA,CAAU,CAAA,CAAA,CAC7D,CAAA,CAAA,CACF,CAAA,CACF,EAGAa,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,qCACV,SAAAF,EAAA,EACH,QAGC,MAAA,CAAI,UAAU,iCACb,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,oCAAoC,SAAA,kBAAe,EAChEA,EAAAA,IAAC,IAAA,CAAE,UAAU,kCAAmC,SAAAd,CAAA,CAAU,CAAA,EAC5D,EACAa,EAAAA,KAAC,SAAA,CACC,QAASN,EACT,UAAU,gGAET,SAAA,CAAAT,EACCgB,EAAAA,IAACE,IAAY,UAAU,wBAAA,CAAyB,EAEhDF,EAAAA,IAACG,GAAA,CAAK,UAAU,uBAAA,CAAwB,QAEzC,OAAA,CAAK,UAAU,wBACb,SAAAnB,EAAS,UAAY,MAAA,CACxB,CAAA,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CACF,EAGC/B,GACC8C,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,yCAAyC,SAAA,iBAEtD,EACAD,EAAAA,KAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,SACjCJ,EAAgB1C,EAAU,SAAS,CAAA,EAC5C,EACCA,EAAU,QACT8C,OAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,WAC1B9C,EAAU,OAAO,QAAQ,IAAK,GAAG,CAAA,CAAA,CAC5C,CAAA,EAEJ,EAIF8C,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAASP,EACT,UAAU,oJAEV,SAAA,CAAAQ,EAAAA,IAACI,GAAA,CAAU,UAAU,SAAA,CAAU,EAC/BJ,EAAAA,IAAC,QAAK,SAAA,WAAA,CAAS,CAAA,CAAA,CAAA,EAGjBD,EAAAA,KAAC,SAAA,CACC,QAASR,EACT,UAAU,mJAEV,SAAA,CAAAS,EAAAA,IAACK,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BL,EAAAA,IAAC,QAAK,SAAA,cAAA,CAAY,CAAA,CAAA,CAAA,CACpB,EACF,QAGC,MAAA,CAAI,UAAU,mCACb,SAAAD,EAAAA,KAAC,IAAA,CAAE,UAAU,0BACX,SAAA,CAAAC,EAAAA,IAAC,UAAO,SAAA,YAAA,CAAU,EAAS,0BAAuBA,EAAAA,IAAC,OAAA,CAAK,UAAU,YAAa,SAAAd,EAAU,EAAO,+CAAA,CAAA,CAClG,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CC7JA,SAAwBoB,IAAc,CACpC,KAAM,CAACC,EAAQC,CAAS,EAAIzB,EAAAA,SAAyC,OAAO,EACtE,CAAC0B,EAAaC,CAAc,EAAI3B,EAAAA,SAA6B,CAAA,CAAE,EAC/D,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAI,EAE3CM,EAAAA,UAAU,IAAM,CACdwB,EAAA,CACF,EAAG,CAACN,CAAM,CAAC,EAEX,MAAMM,EAAmB,SAAY,CACnCD,EAAW,EAAI,EACf,GAAI,CAEF,MAAM1D,EAAO,MADI,MAAM,MAAM,oBAAoBqD,CAAM,EAAE,GAC7B,KAAA,EAC5BG,EAAexD,CAAI,CACrB,OAASU,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,CACrD,QAAA,CACEgD,EAAW,EAAK,CAClB,CACF,EAEME,EAAeC,GAAiB,CACpC,OAAQA,EAAA,CACN,IAAK,GACH,OAAOf,EAAAA,IAACgB,GAAA,CAAM,UAAU,yBAAA,CAA0B,EACpD,IAAK,GACH,OAAOhB,EAAAA,IAACiB,GAAA,CAAM,UAAU,uBAAA,CAAwB,EAClD,IAAK,GACH,OAAOjB,EAAAA,IAACiB,GAAA,CAAM,UAAU,wBAAA,CAAyB,EACnD,QACE,OAAOlB,EAAAA,KAAC,MAAA,CAAI,UAAU,2EAA2E,SAAA,CAAA,IAAEgB,CAAA,EAAK,CAAA,CAE9G,EAEMG,EAAgBH,GAAiB,CACrC,OAAQA,EAAA,CACN,IAAK,GACH,MAAO,gEACT,IAAK,GACH,MAAO,4DACT,IAAK,GACH,MAAO,+DACT,QACE,MAAO,0BAAA,CAEb,EAEA,OAAIJ,EAEAX,MAAC,OAAI,UAAU,wCACb,eAAC,MAAA,CAAI,UAAU,oFAAoF,CAAA,CACrG,EAKFD,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAC,MAAC,MAAA,CAAI,UAAU,oCACb,SAAAD,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,+DACZ,SAAA,CAAAC,EAAAA,IAACmB,GAAA,CAAO,UAAU,yBAAA,CAA0B,EAC5CnB,EAAAA,IAAC,QAAK,SAAA,aAAA,CAAW,CAAA,EACnB,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,yCAAA,CAAuC,CAAA,CAAA,CAC3E,CAAA,CACF,QAGC,MAAA,CAAI,UAAU,iDACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,iBACZ,SAAA,CACC,CAAE,IAAK,QAAS,MAAO,QAAS,KAAMoB,EAAA,EACtC,CAAE,IAAK,SAAU,MAAO,YAAa,KAAMC,EAAA,EAC3C,CAAE,IAAK,UAAW,MAAO,aAAc,KAAMC,CAAA,CAAK,EAClD,IAAKC,GAAiB,CACtB,MAAMC,EAAOD,EAAa,KAC1B,OACExB,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAMS,EAAUe,EAAa,GAAU,EAChD,UAAW,4FACThB,IAAWgB,EAAa,IACpB,mEACA,6CACN,GAEA,SAAA,CAAAvB,EAAAA,IAACwB,EAAA,CAAK,UAAU,SAAA,CAAU,EAC1BxB,EAAAA,IAAC,OAAA,CAAM,SAAAuB,EAAa,KAAA,CAAM,CAAA,CAAA,EATrBA,EAAa,GAAA,CAYxB,CAAC,EACH,EACF,EAGAxB,EAAAA,KAAC,MAAA,CAAI,UAAU,qFACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,6CAA6C,SAAA,0BAAuB,EAClFD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAA,CAAmC,EAClDA,EAAAA,IAAC,OAAA,CAAK,UAAU,0BAA0B,SAAA,eAAA,CAAa,CAAA,EACzD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,oCAAA,CAAqC,EACpDA,EAAAA,IAAC,OAAA,CAAK,UAAU,0BAA0B,SAAA,aAAA,CAAW,CAAA,EACvD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,oCAAA,CAAqC,EACpDA,EAAAA,IAAC,OAAA,CAAK,UAAU,0BAA0B,SAAA,aAAA,CAAW,CAAA,EACvD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,oCAAA,CAAqC,EACpDA,EAAAA,IAAC,OAAA,CAAK,UAAU,0BAA0B,SAAA,aAAA,CAAW,CAAA,CAAA,CACvD,CAAA,CAAA,CACF,CAAA,EACF,EAGAA,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAAS,EAAY,OAAS,EACpBA,EAAY,IAAI,CAACgB,EAAOC,IAAU,CAChC,MAAMX,EAAOW,EAAQ,EACrB,OACE1B,EAAAA,IAAC,MAAA,CAEC,UAAW,qEAAqEkB,EAAaH,CAAI,CAAC,GAElG,SAAAhB,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAAe,EAAYC,CAAI,EAEjBhB,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,IAAKyB,EAAM,YAAc,sBACzB,IAAKA,EAAM,aACX,UAAU,qCAAA,CAAA,SAEX,MAAA,CACC,SAAA,CAAAzB,MAAC,KAAA,CAAG,UAAU,8BACX,SAAAyB,EAAM,cAAgB,iBACzB,EACA1B,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,IACjC0B,EAAM,UAAY,MAAA,CAAA,CACtB,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAEA1B,EAAAA,KAAC,MAAA,CAAI,UAAU,8BAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACsB,EAAA,CAAK,UAAU,uBAAA,CAAwB,EACxCvB,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,MAAC,KAAE,UAAU,8BAA+B,SAAAyB,EAAM,cAAc,iBAAiB,EACjFzB,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,QAAA,CAAM,CAAA,CAAA,CAC7C,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC2B,GAAA,CAAQ,UAAU,yBAAA,CAA0B,EAC7C5B,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,MAAC,KAAE,UAAU,8BAA+B,SAAAyB,EAAM,YAAY,iBAAiB,EAC/EzB,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,MAAA,CAAI,CAAA,CAAA,CAC3C,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC4B,GAAA,CAAI,UAAU,yBAAA,CAA0B,EACzC7B,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,8BAA+B,SAAAyB,EAAM,UAAU,EAC5DzB,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,MAAA,CAAI,CAAA,CAAA,CAC3C,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACiB,GAAA,CAAM,UAAU,yBAAA,CAA0B,EAC3ClB,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,8BAA+B,SAAAyB,EAAM,eAAe,EACjEzB,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,MAAA,CAAI,CAAA,CAAA,CAC3C,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAC,EAAAA,IAAC,KAAE,UAAU,kCAAmC,WAAM,gBAAgB,QAAQ,CAAC,EAAE,EACjFA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,OAAA,CAAK,CAAA,CAAA,CAC5C,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EAnEKyB,EAAM,EAAA,CAsEjB,CAAC,EAED1B,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAACmB,GAAA,CAAO,UAAU,sCAAA,CAAuC,EACzDnB,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,kBAAe,EACxEA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,yDAElC,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAC,EAAAA,IAAC,KAAE,SAAA,+BAAA,CAA6B,EAChCA,EAAAA,IAAC,KAAE,SAAA,sCAAA,CAAoC,EACvCA,EAAAA,IAAC,KAAE,SAAA,6BAAA,CAA2B,CAAA,CAAA,CAChC,CAAA,CAAA,CACF,CAAA,CAEJ,EAGCS,EAAY,OAAS,GACpBV,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,oBAAiB,EAC1ED,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,mCACV,SAAAS,EAAY,OAAO,CAACoB,EAAKJ,IAAUI,EAAMJ,EAAM,cAAe,CAAC,EAAE,iBACpE,EACAzB,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,cAAA,CAAY,CAAA,EACnD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,qCACV,SAAAS,EAAY,OAAO,CAACoB,EAAKJ,IAAUI,EAAMJ,EAAM,YAAa,CAAC,EAAE,iBAClE,EACAzB,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,YAAA,CAAU,CAAA,EACjD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,qCACV,SAAAS,EAAY,OAAO,CAACoB,EAAKJ,IAAUI,EAAMJ,EAAM,UAAW,CAAC,EAC9D,EACAzB,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,WAAA,CAAS,CAAA,EAChD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,qCACV,SAAAS,EAAY,OAAO,CAACoB,EAAKJ,IAAUI,EAAMJ,EAAM,eAAgB,CAAC,EACnE,EACAzB,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,aAAA,CAAW,CAAA,CAAA,CAClD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EAEJ,CAEJ,CC9QA,MAAM8B,GAAgB,wBAGhBC,GAAmDD,GAGzD,QAAQ,MAAM,mBAAmB,EACjC,QAAQ,IAAI,eAAgB,YAAoB,EAChD,QAAQ,IAAI,yBAA0B,MAAA,EACtC,QAAQ,IAAI,sBAAuBC,EAAgB,EACnD,QAAQ,SAAA,EAGJ,OAAO,OAAW,MACnB,OAAe,aAAe,CAC7B,IAAK,aACL,WAAY,OACZ,QAASA,GACT,UAAW,IAAI,KAAA,EAAO,YAAA,CAAY,GAKtC,MAAMC,GAAoDD,GACpDE,GAAeD,GAEfE,GAEYD,GAAa,QAAQ,OAAQ,EAAE,EAEhC,QAAQ,SAAU,EAAE,EAGxBE,GAAeD,GACtBE,GAASF,GAEFG,GAAgB,CAC3B,KAAM,CACJ,MAAO,GAAGD,EAAM,kBAChB,SAAU,GAAGA,EAAM,qBACnB,KAAOE,GAAiB,GAAGF,EAAM,kBAAkBE,CAAI,GACvD,MAAQC,GAAqB,GAAGH,EAAM,mBAAmBG,CAAQ,GACjE,OAAQ,GAAGH,EAAM,mBACjB,GAAI,GAAGA,EAAM,cAAA,CAGjB,ECfMI,GAAcC,EAAAA,cAA2C,MAAS,EAElEC,GAAoBC,GAAkB,CAC1C,GAAI,CACF,KAAM,CAAA,CAAGC,CAAO,EAAID,EAAM,MAAM,GAAG,EACnC,GAAI,CAACC,EAAS,OAAO,KACrB,MAAMC,EAASD,EAAQ,QAAQ,KAAM,GAAG,EAAE,QAAQ,KAAM,GAAG,EACrDE,EAAc,mBAClB,KAAKD,CAAM,EACR,MAAM,EAAE,EACR,IAAKE,GAAM,IAAK,KAAKA,EAAE,WAAW,CAAC,EAAE,SAAS,EAAE,CAAC,GAAI,MAAM,EAAE,CAAC,EAAE,EAChE,KAAK,EAAE,CAAA,EAEZ,OAAO,KAAK,MAAMD,CAAW,CAC/B,OAASlF,EAAO,CACd,eAAQ,KAAK,gCAAiCA,CAAK,EAC5C,IACT,CACF,EAEMoF,GAAiBL,GAA+B,CACpD,MAAMC,EAAUF,GAAiBC,CAAK,EACtC,GAAI,CAACC,EAAS,OAAO,KAErB,MAAMK,EAAKL,EAAQ,IAAMA,EAAQ,KAAOA,EAAQ,SAAWA,EAAQ,MACnE,OAAKK,EAEE,CACL,GAAI,OAAOA,CAAE,EACb,MAAOL,EAAQ,MACf,SAAUA,EAAQ,SAClB,aAAcA,EAAQ,cAAgBA,EAAQ,UAAYA,EAAQ,OAAO,MAAM,GAAG,EAAE,CAAC,EACrF,UAAWA,EAAQ,UACnB,eAAgBA,EAAQ,eACxB,aAAcA,EAAQ,aACtB,aAAcA,EAAQ,aACtB,eAAgBA,EAAQ,eACxB,UAAWA,EAAQ,UACnB,WAAYA,EAAQ,UAAA,EAbN,IAelB,EAEO,SAASM,GAAa,CAAE,SAAAC,GAA2C,CACxE,KAAM,CAACC,EAAMC,CAAO,EAAItE,EAAAA,SAAsB,IAAI,EAC5C,CAACuE,EAAWC,CAAY,EAAIxE,EAAAA,SAAS,EAAK,EAE1CyE,EAAiB,CAACb,EAAgBc,IAA+B,CACjEd,GACF,aAAa,QAAQ,YAAaA,CAAK,EAEzC,MAAMe,EAAeD,IAAiBd,EAAQK,GAAcL,CAAK,EAAI,MACjEe,GACFL,EAAQK,CAAY,CAExB,EAGMC,EAAoB,MAAOC,GAAuB,CACtD,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5B,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM1G,EAAK,OAAS,sBAAsB,EAEtD,OAAOA,CACT,EAGM2G,EAAS,MAAOC,EAAeC,IAAqB,CACxDR,EAAa,EAAI,EACjB,GAAI,CACF,MAAMK,EAAW,MAAM,MAAMvB,GAAc,KAAK,MAAO,CACrD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAU,CAAE,MAAAyB,EAAO,SAAAC,EAAU,EACxC,YAAa,SAAA,CACd,EAEK7G,EAAO,MAAMyG,EAAkBC,CAAQ,EAC7C,OAAAJ,EAAetG,EAAK,MAAOA,EAAK,IAAI,EAC7B,CAAE,MAAO,IAAA,CAClB,OAASU,EAAY,CACnB,MAAO,CAAE,MAAOA,EAAM,OAAA,CACxB,QAAA,CACE2F,EAAa,EAAK,CACpB,CACF,EAGMS,EAAS,MAAOF,EAAeC,IAAqB,CACxDR,EAAa,EAAI,EACjB,GAAI,CACF,MAAMK,EAAW,MAAM,MAAMvB,GAAc,KAAK,SAAU,CACxD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAU,CAAE,MAAAyB,EAAO,SAAAC,EAAU,EACxC,YAAa,SAAA,CACd,EAEK7G,EAAO,MAAMyG,EAAkBC,CAAQ,EAC7C,OAAAJ,EAAetG,EAAK,MAAOA,EAAK,IAAI,EAC7B,CAAE,MAAO,IAAA,CAClB,OAASU,EAAY,CACnB,MAAO,CAAE,MAAOA,EAAM,OAAA,CACxB,QAAA,CACE2F,EAAa,EAAK,CACpB,CACF,EAGMU,EAAkB,MAAO1B,GAA8C,CAC3E,GAAI,CAEF,cAAO,SAAS,KAAOF,GAAc,KAAK,MAAME,CAAQ,EACjD,CAAE,MAAO,IAAA,CAClB,OAAS3E,EAAY,CACnB,MAAO,CAAE,MAAOA,EAAM,OAAA,CACxB,CACF,EAGMsG,EAAkB,MAAO5B,GAAgD,CAC7EiB,EAAa,EAAI,EACjB,MAAMY,EAAM9B,GAAc,KAAK,KAAKC,CAAI,EACxC,QAAQ,IAAI,kBAAmB6B,CAAG,EAElC,GAAI,CACF,QAAQ,IAAI,iCAAkCA,CAAG,EACjD,MAAMP,EAAW,MAAM,MAAMO,EAAK,CAChC,OAAQ,OACR,YAAa,UACb,QAAS,CACP,eAAgB,mBAChB,OAAU,kBAAA,EAEZ,KAAM,KAAK,UAAU,CAAA,CAAE,CAAA,CACxB,EAID,GAFA,QAAQ,IAAI,mBAAoBP,EAAS,OAAQA,EAAS,UAAU,EAEhE,CAACA,EAAS,GAAI,CAChB,IAAIQ,EACJ,GAAI,CAEFA,GADkB,MAAMR,EAAS,KAAA,GACX,OAASA,EAAS,UAC1C,MAAY,CACVQ,EAAY,MAAMR,EAAS,KAAA,CAC7B,CACA,cAAQ,MAAM,qBAAsBQ,CAAS,EACvC,IAAI,MAAMA,GAAa,uBAAuBR,EAAS,MAAM,EAAE,CACvE,CAEA,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAG5B,GAFA,QAAQ,IAAI,yBAA0B1G,CAAI,EAEtC,CAACA,EAAK,MACR,MAAM,IAAI,MAAM,+BAA+B,EAGjD,OAAAsG,EAAetG,EAAK,MAAOA,EAAK,MAAQ,IAAI,EACrC,CAAE,MAAO,IAAA,CAClB,OAASU,EAAY,CACnB,eAAQ,MAAM,uBAAwBA,CAAK,EACpC,CAAE,MAAOA,EAAM,SAAW,oCAAA,CACnC,QAAA,CACE2F,EAAa,EAAK,CACpB,CACF,EAGMc,EAAU,SAAY,CAC1B,GAAI,CACF,MAAM,MAAMhC,GAAc,KAAK,OAAQ,CACrC,OAAQ,OACR,YAAa,SAAA,CACd,CACH,OAASzE,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CAC/C,QAAA,CACE,OAAAyF,EAAQ,IAAI,EACZ,aAAa,WAAW,WAAW,EAC5B,CAAE,MAAO,IAAA,CAClB,CACF,EAGAhE,EAAAA,UAAU,IAAM,EACI,SAAY,CAC5B,GAAI,CACF,MAAMsD,EAAQ,aAAa,QAAQ,WAAW,EAC9C,GAAIA,EAAO,CACT,MAAMiB,EAAW,MAAM,MAAMvB,GAAc,KAAK,GAAI,CAClD,QAAS,CACP,cAAiB,UAAUM,CAAK,EAAA,EAElC,YAAa,SAAA,CACd,EAED,GAAIiB,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5BJ,EAAeb,EAAOzF,EAAK,IAAI,CACjC,SAAW0G,EAAS,SAAW,KAAOA,EAAS,SAAW,IACxD,aAAa,WAAW,WAAW,EACnCP,EAAQ,IAAI,MACP,CACL,MAAMiB,EAAetB,GAAcL,CAAK,EACpC2B,GACFjB,EAASkB,GAAsBA,GAAQD,CAAY,CAEvD,CACF,CACF,OAAS1G,EAAO,CACd,QAAQ,MAAM,qBAAsBA,CAAK,EACzC,MAAM+E,EAAQ,aAAa,QAAQ,WAAW,EACxC2B,EAAe3B,EAAQK,GAAcL,CAAK,EAAI,KAChD2B,GACFjB,EAASkB,GAAsBA,GAAQD,CAAY,CAEvD,CACF,GAEA,CACF,EAAG,CAAA,CAAE,EAEL,MAAME,EAAyB,CAC7B,KAAApB,EACA,UAAAE,EACA,OAAAO,EACA,OAAAG,EACA,gBAAAC,EACA,UAAW,CACT,QAAS,IAAMC,EAAgB,SAAS,EACxC,SAAU,IAAMA,EAAgB,UAAU,EAC1C,WAAY,IAAMA,EAAgB,YAAY,CAAA,EAEhD,QAAAG,EACA,OAAQ,IAAMA,EAAA,CAAQ,EAGxB,OAAOrE,EAAAA,IAACwC,GAAY,SAAZ,CAAqB,MAAAgC,EAAe,SAAArB,CAAA,CAAS,CACvD,CAEO,SAASsB,IAAU,CACxB,MAAMC,EAAUC,EAAAA,WAAWnC,EAAW,EACtC,GAAIkC,IAAY,OACd,MAAM,IAAI,MAAM,6CAA6C,EAE/D,OAAOA,CACT,CCzQA,SAAwBE,GAAS,CAC/B,SAAAC,EACA,OAAA9G,EACA,YAAA+G,EACA,UAAAC,EACA,UAAAC,EAAY,GACZ,WAAAC,EAAa,GACb,KAAAC,EAAO,IACT,EAAkB,CAChB,MAAMC,EAAc,CAClB,GAAI,kBACJ,GAAI,kBACJ,GAAI,qBAAA,EAIN,GAAI,CAACN,GAAY,CAAC9G,EAChB,OACEgC,EAAAA,KAAC,MAAA,CAAI,UAAW,+BAA+BiF,CAAS,GACrD,SAAA,CAAAC,GACCjF,EAAAA,IAAC,OAAI,UAAW,GAAGmF,EAAYD,CAAI,CAAC,6EACjC,SAAAH,EACC/E,EAAAA,IAAC,MAAA,CACC,IAAK+E,EACL,IAAKD,GAAe,OACpB,UAAU,4BAAA,CAAA,EAGZ9E,EAAAA,IAACoF,GAAA,CAAK,UAAU,4BAA4B,CAAA,CAEhD,EAEFpF,EAAAA,IAAC,OAAA,CAAK,UAAU,4BACb,YAAe,MAAA,CAClB,CAAA,EACF,EAKJ,MAAMqF,EAAUR,EAAW,UAAUA,CAAQ,GAAM9G,EAAS,aAAaA,CAAM,GAAK,IAEpF,OACEgC,EAAAA,KAACuF,GAAA,CACC,GAAID,EACJ,UAAW,uEAAuEL,CAAS,GAE1F,SAAA,CAAAC,GACCjF,EAAAA,IAAC,OAAI,UAAW,GAAGmF,EAAYD,CAAI,CAAC,6EACjC,SAAAH,EACC/E,EAAAA,IAAC,MAAA,CACC,IAAK+E,EACL,IAAKD,GAAeD,GAAY,SAAS9G,CAAM,GAC/C,UAAU,4BAAA,CAAA,EAGZiC,EAAAA,IAACoF,GAAA,CAAK,UAAU,4BAA4B,CAAA,CAEhD,EAEFpF,EAAAA,IAAC,QAAK,UAAU,cACb,YAAe6E,GAAY,SAAS9G,CAAM,EAAA,CAC7C,CAAA,CAAA,CAAA,CAGN,CChEA,SAAwBwH,GAAQ,CAC9B,QAAAC,EACA,SAAArC,EACA,SAAAsC,EAAW,OACX,MAAAC,EAAQ,IACR,SAAAC,EAAW,GACX,UAAAX,EAAY,GACZ,SAAAY,EACA,UAAAC,EAAY,GACZ,QAAAC,EAAU,EACZ,EAAiB,CACf,KAAM,CAACC,EAAWC,CAAY,EAAIjH,EAAAA,SAAS,EAAK,EAC1C,CAACkH,EAAgBC,CAAiB,EAAInH,EAAAA,SAA8C,KAAK,EACzFoH,EAAaC,EAAAA,OAA8B,IAAI,EAC/CC,EAAeD,EAAAA,OAAuB,IAAI,EAC1CE,EAAaF,EAAAA,OAAuB,IAAI,EAE9C/G,EAAAA,UAAU,IACD,IAAM,CACP8G,EAAW,UACb,aAAaA,EAAW,OAAO,EAC/BA,EAAW,QAAU,KAEzB,EACC,CAAA,CAAE,EAEL,MAAMI,EAAoB,IAAM,CAC9B,GAAI,CAACF,EAAa,SAAW,CAACC,EAAW,QAAS,OAElD,MAAME,EAAcH,EAAa,QAAQ,sBAAA,EACnCI,EAAcH,EAAW,QAAQ,sBAAA,EACjCI,EAAW,CACf,MAAO,OAAO,WACd,OAAQ,OAAO,WAAA,EAIXC,EAAWH,EAAY,IACvBI,EAAcF,EAAS,OAASF,EAAY,OAC5CK,EAAYL,EAAY,KACxBM,EAAaJ,EAAS,MAAQF,EAAY,MAG1CO,EAAgBN,EAAY,QAAU,GACtCO,EAAeP,EAAY,OAAS,IACpCQ,EAAS,EAEf,IAAIC,EAAoD,MAExD,GAAIzB,IAAa,OAEXkB,GAAYI,EAAgBE,EAC9BC,EAAe,MACNN,GAAeG,EAAgBE,EACxCC,EAAe,SACNJ,GAAcE,EAAeC,EACtCC,EAAe,QACNL,GAAaG,EAAeC,EACrCC,EAAe,OAGfA,EAAeP,GAAYC,EAAc,MAAQ,aAInD,QAAQnB,EAAA,CACN,IAAK,MACHyB,EAAeP,GAAYI,EAAgBE,EAAS,MAAQ,SAC5D,MACF,IAAK,SACHC,EAAeN,GAAeG,EAAgBE,EAAS,SAAW,MAClE,MACF,IAAK,OACHC,EAAeL,GAAaG,EAAeC,EAAS,OAAS,QAC7D,MACF,IAAK,QACHC,EAAeJ,GAAcE,EAAeC,EAAS,QAAU,OAC/D,KAAA,CAINf,EAAkBgB,CAAY,CAChC,EAEMC,EAAmB,IAAM,CACzBxB,IAEAQ,EAAW,SACb,aAAaA,EAAW,OAAO,EAGjCA,EAAW,QAAU,WAAW,IAAM,CACpCH,EAAa,EAAI,EAEjB,WAAW,IAAMO,EAAA,EAAqB,CAAC,CACzC,EAAGb,CAAK,EACV,EAEM0B,EAAmB,IAAM,CAC7BpB,EAAa,EAAK,EACdG,EAAW,SACb,aAAaA,EAAW,OAAO,CAEnC,EAEMkB,EAAoB,IAcjB,GAba;AAAA;AAAA;AAAA,QAGhBtB,EAAY,wBAA0B,oBAAoB;AAAA,KAUzC,IAPG,CACtB,IAAK,uDACL,OAAQ,oDACR,KAAM,qDACN,MAAO,mDAAA,EAGgCE,CAAc,CAAC,GAGpDqB,EAAqB,IAAM,CAC/B,GAAI1B,EAAU,OAAOA,EAErB,MAAM2B,EAAgB,OAAO/B,GAAY,SAAWA,EAAQ,OAAS,IAErE,OAAIM,GAAWyB,EAAgB,GAAW,QACtCA,EAAgB,GAAW,QAC3BA,EAAgB,GAAW,QACxB,OACT,EAEMC,EAAkB,IAQf,YAPc,CACnB,IAAK,qHACL,OAAQ,wHACR,KAAM,qHACN,MAAO,qHAAA,EAGuBvB,CAAc,CAAC,GAGjD,OAAIN,GAAY,CAACH,oBACL,SAAArC,EAAS,EAInBpD,EAAAA,KAAC,MAAA,CACC,IAAKsG,EACL,UAAW,yBAAyBrB,CAAS,GAC7C,aAAcmC,EACd,aAAcC,EACd,QAASD,EACT,OAAQC,EAEP,SAAA,CAAAjE,EAEA4C,GACChG,EAAAA,KAAC,MAAA,CACC,IAAKuG,EACL,UAAWe,EAAA,EACX,MAAO,CACL,SAAUC,EAAA,EACV,SAAUxB,EAAU,OAAS,QAC7B,WAAYD,EAAY,SAAW,SACnC,SAAUA,EAAY,aAAe,SACrC,QAASA,EAAY,OAAS,MAAA,EAEhC,KAAK,UACL,cAAa,CAACE,EAEb,SAAA,CAAAP,EACDxF,EAAAA,IAAC,MAAA,CAAI,UAAWwH,EAAA,CAAgB,CAAG,CAAA,CAAA,CAAA,CACrC,CAAA,CAAA,CAIR,CC7KA,SAAwBC,GAAmB,CAAE,OAAAC,EAAQ,QAAAC,GAAoC,CACvF,KAAM,CAAE,KAAAvE,CAAA,EAASqB,GAAA,EACX,CAACmD,EAAeC,CAAgB,EAAI9I,EAAAA,SAAyB,CAAA,CAAE,EAC/D,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EAE5CM,EAAAA,UAAU,IAAM,CACVqI,GAAUtE,GACZ0E,EAAA,CAEJ,EAAG,CAACJ,EAAQtE,CAAI,CAAC,EAEjB,MAAM0E,EAAqB,SAAY,CACrClH,EAAW,EAAI,EACf,GAAI,CAEF,MAAMmH,EAAoC,CACxC,CACE,GAAI,IACJ,KAAM,cACN,MAAO,wBACP,QAAS,iEACT,UAAW,IAAI,KAAK,KAAK,MAAQ,IAAc,EAC/C,KAAM,GACN,KAAM,CAAE,YAAa,cAAe,YAAa,EAAA,CAAG,EAEtD,CACE,GAAI,IACJ,KAAM,SACN,MAAO,gBACP,QAAS,6CACT,UAAW,IAAI,KAAK,KAAK,MAAQ,IAAkB,EACnD,KAAM,GACN,KAAM,CAAE,cAAe,GAAI,OAAQ,eAAA,CAAgB,EAErD,CACE,GAAI,IACJ,KAAM,SACN,MAAO,uBACP,QAAS,4EACT,UAAW,IAAI,KAAK,KAAK,MAAQ,KAAkB,EACnD,KAAM,EAAA,EAER,CACE,GAAI,IACJ,KAAM,SACN,MAAO,eACP,QAAS,kCACT,UAAW,IAAI,KAAK,KAAK,MAAQ,KAAkB,EACnD,KAAM,GACN,UAAW,qBAAA,CACb,EAGFF,EAAiBE,CAAiB,CACpC,OAASnK,EAAO,CACd,QAAQ,MAAM,iCAAkCA,CAAK,CACvD,QAAA,CACEgD,EAAW,EAAK,CAClB,CACF,EAEMoH,EAAa,MAAOC,GAA2B,CACnDJ,KACEtD,EAAK,IAAI2D,GACPA,EAAa,KAAOD,EAChB,CAAE,GAAGC,EAAc,KAAM,IACzBA,CAAA,CACN,CAEJ,EAEMC,EAAgB,SAAY,CAChCN,EAAiBtD,GACfA,EAAK,IAAI2D,IAAiB,CAAE,GAAGA,EAAc,KAAM,IAAO,CAAA,CAE9D,EAEME,EAAuB9F,GAAiB,CAC5C,OAAQA,EAAA,CACN,IAAK,cACH,OAAOtC,EAAAA,IAACmB,GAAA,CAAO,UAAU,yBAAA,CAA0B,EACrD,IAAK,SACH,OAAOnB,EAAAA,IAACqI,GAAA,CAAM,UAAU,uBAAA,CAAwB,EAClD,IAAK,SACH,OAAOrI,EAAAA,IAACsI,GAAA,CAAK,UAAU,yBAAA,CAA0B,EACnD,IAAK,SACH,OAAOtI,EAAAA,IAACsB,EAAA,CAAK,UAAU,uBAAA,CAAwB,EACjD,IAAK,UACH,OAAOtB,EAAAA,IAACuI,GAAA,CAAY,UAAU,yBAAA,CAA0B,EAC1D,QACE,OAAOvI,EAAAA,IAACwI,GAAA,CAAK,UAAU,uBAAA,CAAwB,CAAA,CAErD,EAEM7I,EAAmBC,GAAoB,CAE3C,MAAM6I,MADU,KAAA,EACC,QAAA,EAAY7I,EAAU,QAAA,EACjC8I,EAAU,KAAK,MAAMD,GAAQ,IAAO,GAAG,EACvCE,EAAQ,KAAK,MAAMF,GAAQ,IAAO,GAAK,GAAG,EAC1CG,EAAO,KAAK,MAAMH,GAAQ,IAAO,GAAK,GAAK,GAAG,EAEpD,OAAIC,EAAU,GACL,GAAGA,CAAO,QACRC,EAAQ,GACV,GAAGA,CAAK,QAER,GAAGC,CAAI,OAElB,EAEMC,EAAcjB,EAAc,UAAY,CAACkB,EAAE,IAAI,EAAE,OAEvD,OAAKpB,QAGF,MAAA,CAAI,UAAU,kFACb,SAAA3H,EAAAA,KAAC,MAAA,CAAI,UAAU,iFAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACwI,GAAA,CAAK,UAAU,yBAAA,CAA0B,EAC1CxI,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,gBAAa,EAC5D6I,EAAc,GACb7I,EAAAA,IAAC,OAAA,CAAK,UAAU,oEACb,SAAA6I,CAAA,CACH,CAAA,EAEJ,EACA7I,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAGCF,EAAc,GACb7I,MAAC,MAAA,CAAI,UAAU,qCACb,SAAAD,EAAAA,KAAC,SAAA,CACC,QAASoI,EACT,UAAU,wFAEV,SAAA,CAAAnI,EAAAA,IAACgJ,GAAA,CAAM,UAAU,SAAA,CAAU,EAC3BhJ,EAAAA,IAAC,QAAK,SAAA,kBAAA,CAAgB,CAAA,CAAA,CAAA,EAE1B,EAIFA,EAAAA,IAAC,OAAI,UAAU,yBACZ,WACCD,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,gGAAA,CAAiG,EAChHA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,0BAAA,CAAwB,CAAA,EAC/D,EACE4H,EAAc,SAAW,EAC3B7H,OAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAC,EAAAA,IAACwI,GAAA,CAAK,UAAU,sCAAA,CAAuC,EACvDxI,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,mBAAgB,EACvEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,uBAAA,CAAqB,CAAA,CAAA,CAC5D,QAEC,MAAA,CAAI,UAAU,2BACZ,SAAA4H,EAAc,IAAKM,GAClBlI,EAAAA,IAAC,MAAA,CAEC,UAAW,yDACRkI,EAAa,KAAmD,GAA5C,yCACvB,GACA,QAAS,IAAM,CACRA,EAAa,MAAMF,EAAWE,EAAa,EAAE,EAC9CA,EAAa,YACf,OAAO,SAAS,KAAOA,EAAa,UAExC,EAEA,SAAAnI,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,MAAC,OAAI,UAAU,qBACZ,SAAAoI,EAAoBF,EAAa,IAAI,EACxC,EACAnI,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAW,uBACZkI,EAAa,KAAyB,gBAAlB,eACvB,GACG,SAAAA,EAAa,KAAA,CAChB,QACC,OAAA,CAAK,UAAU,+CACb,SAAAvI,EAAgBuI,EAAa,SAAS,CAAA,CACzC,CAAA,EACF,EACAlI,EAAAA,IAAC,IAAA,CAAE,UAAW,gBACXkI,EAAa,KAAyB,gBAAlB,eACvB,GACG,SAAAA,EAAa,OAAA,CAChB,EACCA,EAAa,MACZnI,OAAC,MAAA,CAAI,UAAU,mCACZ,SAAA,CAAAmI,EAAa,KAAK,aACjBnI,EAAAA,KAAC,MAAA,CAAI,UAAU,sFACb,SAAA,CAAAC,EAAAA,IAACmB,GAAA,CAAO,UAAU,SAAA,CAAU,SAC3B,OAAA,CAAK,SAAA,CAAA,IAAE+G,EAAa,KAAK,YAAY,OAAA,CAAA,CAAK,CAAA,EAC7C,EAEDA,EAAa,KAAK,eACjBnI,EAAAA,KAAC,MAAA,CAAI,UAAU,kFACb,SAAA,CAAAC,EAAAA,IAACqI,GAAA,CAAM,UAAU,SAAA,CAAU,SAC1B,OAAA,CAAK,SAAA,CAAA,IAAEH,EAAa,KAAK,cAAc,SAAA,CAAA,CAAO,CAAA,CAAA,CACjD,CAAA,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,EAhDKA,EAAa,EAAA,CAkDrB,EACH,CAAA,CAEJ,EAGAlI,EAAAA,IAAC,OAAI,UAAU,0CACb,eAAC,IAAA,CAAE,UAAU,oCAAoC,SAAA,+CAAA,CAEjD,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EApHkB,IAsHtB,CC/OA,SAAwBiJ,GAAwB,CAAE,KAAA7F,EAAM,OAAAsE,EAAQ,QAAAC,EAAS,UAAAuB,GAA2C,CAClH,KAAM,CAACC,EAAcC,CAAe,EAAIrK,EAAAA,SAA4B,QAAQ,EACtE,CAACsK,EAAQC,CAAS,EAAIvK,EAAAA,SAAS,CAAC,EAChC,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAwB,IAAI,EAEtD,GAAI,CAAC2I,GAAU,CAACtE,EAAM,OAAO,KAE7B,MAAMoG,EAAkB,CACtB,OAAQ,CAAE,KAAM,GAAA,EAChB,KAAM,CAAE,KAAM,CAAA,CAAE,EAGZC,EAAoB,IACjBN,IAAiB,SAAW/F,EAAK,eAAiBA,EAAK,aAG1DsG,EAAoB,IACjBL,EAASG,EAAgBL,CAAY,EAAE,KAG1CQ,EAAYF,EAAA,GAAuBC,EAAA,EAEnCE,EAAgB,SAAY,CAChC,GAAI,GAACD,GAAaN,EAAS,GAE3B,CAAAzI,EAAW,EAAI,EACf2I,EAAS,IAAI,EAEb,GAAI,CACF,MAAM3F,EAAW,MAAM,MAAM,qBAAsB,CACjD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,cAAeuF,EACf,YAAa,OACb,OAAAE,CAAA,CACD,CAAA,CACF,EAED,GAAIzF,EAAS,GACXsF,EAAA,EACAvB,EAAA,EACA2B,EAAU,CAAC,MACN,CACL,MAAMO,EAAY,MAAMjG,EAAS,KAAA,EACjC2F,EAASM,EAAU,OAAS,mBAAmB,CACjD,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,qBAAsBA,CAAK,EACzC2L,EAAS,wBAAwB,CACnC,QAAA,CACE3I,EAAW,EAAK,CAClB,EACF,EAEA,aACG,MAAA,CAAI,UAAU,6EACb,SAAAb,EAAAA,KAAC,MAAA,CAAI,UAAU,+CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,mBAAgB,EAChEA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,gBAEhE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMqJ,EAAgB,QAAQ,EACvC,UAAW,6CACTD,IAAiB,SACb,6BACA,uCACN,GAEA,SAAA,CAAApJ,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACqI,GAAA,CAAM,UAAU,uBAAA,CAAwB,EACzCrI,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,QAAA,CAAM,CAAA,EACtC,EACAD,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,YAAUqD,EAAK,cAAA,EAAe,EACnEpD,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,iBAAA,CAAe,CAAA,CAAA,CAAA,EAG3DD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMqJ,EAAgB,MAAM,EACrC,UAAW,6CACTD,IAAiB,OACb,iCACA,uCACN,GAEA,SAAA,CAAApJ,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACsB,EAAA,CAAK,UAAU,yBAAA,CAA0B,EAC1CtB,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,MAAA,CAAI,CAAA,EACpC,EACAD,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,YAAUqD,EAAK,YAAA,EAAa,EACjEpD,EAAAA,IAAC,IAAA,CAAE,UAAU,+BAA+B,SAAA,gBAAA,CAAc,CAAA,CAAA,CAAA,CAC5D,CAAA,CACF,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,eAEhE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMsJ,EAAU,KAAK,IAAI,EAAGD,EAAS,CAAC,CAAC,EAChD,SAAUA,GAAU,EACpB,UAAU,wHACX,SAAA,GAAA,CAAA,EAGDrJ,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,MAAOqJ,EACP,SAAW7L,GAAM8L,EAAU,KAAK,IAAI,EAAG,SAAS9L,EAAE,OAAO,KAAK,GAAK,CAAC,CAAC,EACrE,IAAI,IACJ,UAAU,sHAAA,CAAA,EAEZwC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMsJ,EAAUD,EAAS,CAAC,EACnC,UAAU,wEACX,SAAA,GAAA,CAAA,CAED,EACF,EACArJ,EAAAA,IAAC,MAAA,CAAI,UAAU,sBACZ,SAAA,CAAC,EAAG,EAAG,EAAG,EAAE,EAAE,IAAK8J,GAClB/J,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAMuJ,EAAUQ,CAAG,EAC5B,UAAU,6EAET,SAAA,CAAAA,EAAI,OAAKA,EAAM,EAAI,IAAM,EAAA,CAAA,EAJrBA,CAAA,CAMR,CAAA,CACH,CAAA,EACF,EAGA/J,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAAoJ,IAAiB,eACfd,GAAA,CAAM,UAAU,wBAAwB,EAEzCrI,EAAAA,IAACsB,EAAA,CAAK,UAAU,yBAAA,CAA0B,EAE5CtB,EAAAA,IAAC,OAAA,CAAK,UAAU,yBAA0B,SAAAmJ,CAAA,CAAa,CAAA,EACzD,EACAnJ,EAAAA,IAAC+J,GAAA,CAAW,UAAU,uBAAA,CAAwB,EAC9ChK,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC4B,GAAA,CAAI,UAAU,yBAAA,CAA0B,EACzC5B,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,MAAA,CAAI,CAAA,CAAA,CACpC,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,sDACb,SAAA,CAAAA,OAAC,OAAA,CAAK,UAAWoJ,IAAiB,SAAW,gBAAkB,kBAAmB,SAAA,CAAA,IAC9EO,EAAA,EAAoB,eAAA,CAAe,EACvC,EACA3J,EAAAA,KAAC,OAAA,CAAK,UAAU,kBAAkB,SAAA,CAAA,IAAEsJ,CAAA,CAAA,CAAO,CAAA,EAC7C,EAEAtJ,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACb,SAAA,CAAAA,OAAC,OAAA,CAAK,SAAA,CAAA,eACS0J,EAAA,EAAsBC,EAAA,GAAqB,eAAA,CAAe,EACzE,SACC,OAAA,CAAK,SAAA,CAAA,cAAYtG,EAAK,aAAeiG,CAAA,CAAA,CAAO,CAAA,CAAA,CAC/C,CAAA,EACF,EAGCF,IAAiB,UAChBnJ,EAAAA,IAAC,MAAA,CAAI,UAAU,mDACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACuI,GAAA,CAAY,UAAU,uBAAA,CAAwB,EAC/CvI,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,4CAAA,CAExC,CAAA,CAAA,CACF,CAAA,CACF,EAIDpC,GACCoC,EAAAA,IAAC,MAAA,CAAI,UAAU,iDACb,eAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAC7C,EAIFmC,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,kHACX,SAAA,QAAA,CAAA,EAGD3H,EAAAA,IAAC,SAAA,CACC,QAAS4J,EACT,SAAU,CAACD,GAAahJ,GAAW0I,EAAS,EAC5C,UAAU,+PAET,WACCrJ,MAAC,MAAA,CAAI,UAAU,8EAAA,CAA+E,EAE9FD,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAACE,GAAA,CAAY,UAAU,SAAA,CAAU,EACjCF,EAAAA,IAAC,QAAK,SAAA,SAAA,CAAO,CAAA,CAAA,CACf,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CCxOA,SAAwBiK,GAAe,CAAE,KAAA7G,EAAM,OAAAsE,EAAQ,QAAAC,EAAS,UAAAuB,GAAkC,CAChG,KAAM,CAACvI,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACmL,EAAiBC,CAAkB,EAAIpL,EAAAA,SAAyC,IAAI,EACrF,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAwB,IAAI,EAEtDM,EAAAA,UAAU,IAAM,CACVqI,GAAUtE,GACZgH,EAAA,CAEJ,EAAG,CAAC1C,EAAQtE,CAAI,CAAC,EAEjB,MAAMgH,EAAuB,SAAY,CACvC,GAAI,CACF,MAAMxG,EAAW,MAAM,MAAM,+BAAgC,CAAE,YAAa,UAAW,EACvF,GAAIA,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5BuG,EAAmBjN,CAAI,CACzB,CACF,OAASU,EAAO,CACd,QAAQ,MAAM,qCAAsCA,CAAK,CAC3D,CACF,EAEMyM,EAAiB,SAAY,CACjCzJ,EAAW,EAAI,EACf2I,EAAS,IAAI,EAEb,GAAI,CACF,MAAM3F,EAAW,MAAM,MAAM,iCAAkC,CAC7D,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CAAA,CAAE,CAAA,CACxB,EAED,GAAIA,EAAS,GACX,MAAMwG,EAAA,EACNlB,EAAA,MACK,CACL,MAAMW,EAAY,MAAMjG,EAAS,KAAA,EACjC2F,EAASM,EAAU,OAAS,mBAAmB,CACjD,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,EACpD2L,EAAS,wBAAwB,CACnC,QAAA,CACE3I,EAAW,EAAK,CAClB,CACF,EAEA,GAAI,CAAC8G,GAAU,CAACtE,EAAM,OAAO,KAc7B,MAAMkH,GAZeC,GAAiB,CACpC,OAAQA,EAAA,CACN,IAAK,QACH,MAAO,CAAE,KAAM,QAAS,SAAU,EAAG,MAAO,kBAAmB,QAAS,cAAA,EAC1E,IAAK,UACH,MAAO,CAAE,KAAM,UAAW,SAAU,EAAG,MAAO,kBAAmB,QAAS,cAAA,EAC5E,IAAK,OACL,QACE,MAAO,CAAE,KAAM,OAAQ,SAAU,EAAG,MAAO,gBAAiB,QAAS,YAAA,CAAa,CAExF,GAE6BnH,EAAK,SAAS,EACrCoH,EAAcN,GAAiB,cAAgB,GAC/CO,EAAcP,EAClBA,EAAgB,uBAAyBA,EAAgB,qBACzD,GAEF,aACG,MAAA,CAAI,UAAU,6EACb,SAAAnK,EAAAA,KAAC,MAAA,CAAI,UAAU,+CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC0K,GAAA,CAAO,UAAU,yBAAA,CAA0B,EAC5C1K,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,mBAAA,CAAiB,CAAA,EACnE,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,OAAC,MAAA,CAAI,UAAW,GAAGuK,EAAS,OAAO,2CACjC,SAAA,CAAAvK,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,MAACsB,EAAA,CAAK,UAAW,WAAWgJ,EAAS,KAAK,GAAI,SAC7C,OAAA,CAAK,UAAW,iBAAiBA,EAAS,KAAK,GAAK,SAAA,CAAAA,EAAS,KAAK,OAAA,CAAA,CAAK,CAAA,EAC1E,SACC,OAAA,CAAK,UAAW,8CAA8CA,EAAS,KAAK,YAC1E,SAAA,CAAAA,EAAS,SAAS,cAAYA,EAAS,SAAW,EAAI,IAAM,GAAG,WAAA,CAAA,CAClE,CAAA,EACF,EACAvK,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,YACzBuK,EAAS,SAAS,cAAYA,EAAS,SAAW,EAAI,IAAM,GAAG,oFAAA,CAAA,CAC3E,CAAA,EACF,EAGAvK,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,mBAAgB,EAC5DA,EAAAA,IAAC,MAAA,CAAI,UAAW,8CACdwK,EACI,8BACA,+BACN,GACG,SAAAA,EAAc,YAAc,eAAA,CAC/B,CAAA,EACF,EAECN,GACCnK,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,wBAAqB,EAC7DD,EAAAA,KAAC,OAAA,CAAK,UAAU,8BACb,SAAA,CAAAmK,EAAgB,sBAAsB,IAAEA,EAAgB,oBAAA,CAAA,CAC3D,CAAA,EACF,EAEAlK,EAAAA,IAAC,MAAA,CAAI,UAAU,sCACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAW,gDACTwK,EAAc,eAAiB,eACjC,GACA,MAAO,CACL,MAAO,GAAG,KAAK,IAAI,IAAMN,EAAgB,sBAAwBA,EAAgB,qBAAwB,GAAG,CAAC,GAAA,CAC/G,CAAA,EAEJ,EAEC,CAACM,GAAeN,EAAgB,sBAAwB,GACvDnK,OAAC,IAAA,CAAE,UAAU,wBACV,SAAA,CAAAmK,EAAgB,qBAAuBA,EAAgB,sBAAsB,mBAAiBA,EAAgB,qBAAuBA,EAAgB,sBAAwB,EAAI,IAAM,GAAG,SAAA,CAAA,CAC7L,CAAA,CAAA,CAEJ,CAAA,EAEJ,EAGAnK,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,sBAAmB,EAC/DD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,wBAAA,CAAyB,EAChDF,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,iCAAA,CAA+B,CAAA,EACzE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,wBAAA,CAAyB,EAChDF,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,gCAAA,CAA8B,CAAA,EACxE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,wBAAA,CAAyB,EAChDF,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,iCAAA,CAA+B,CAAA,EACzE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,wBAAA,CAAyB,EAChDF,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,0BAAA,CAAwB,CAAA,CAAA,CAClE,CAAA,CAAA,CACF,CAAA,EACF,EAGC,CAACwK,GACAzK,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACoB,GAAA,CAAI,UAAU,uBAAA,CAAwB,EACvCpB,EAAAA,IAAC,OAAA,CAAK,UAAU,4BAA4B,SAAA,yBAAA,CAAuB,CAAA,EACrE,EACAD,EAAAA,KAAC,KAAA,CAAG,UAAU,kCACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,0DAAA,CAAwD,EAC5DA,EAAAA,IAAC,MAAG,SAAA,uCAAA,CAAqC,EACzCA,EAAAA,IAAC,MAAG,SAAA,6BAAA,CAA2B,EAC/BA,EAAAA,IAAC,MAAG,SAAA,8BAAA,CAA4B,CAAA,CAAA,CAClC,CAAA,EACF,EAIDpC,GACCoC,EAAAA,IAAC,MAAA,CAAI,UAAU,iDACb,eAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAC7C,EAIFmC,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,kHACX,SAAA,OAAA,CAAA,EAIA,CAAC6C,GACAxK,EAAAA,IAAC,SAAA,CACC,QAASqK,EACT,SAAU,CAACI,GAAe9J,EAC1B,UAAU,qQAET,WACCX,MAAC,MAAA,CAAI,UAAU,8EAAA,CAA+E,EAC5FyK,EACF1K,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC0K,GAAA,CAAO,UAAU,SAAA,CAAU,EAC5B1K,EAAAA,IAAC,QAAK,SAAA,UAAA,CAAQ,CAAA,CAAA,CAChB,EAEAD,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC2K,GAAA,CAAM,UAAU,SAAA,CAAU,EAC3B3K,EAAAA,IAAC,QAAK,SAAA,iBAAA,CAAe,CAAA,CAAA,CACvB,CAAA,CAAA,EAKLwK,GACCzK,EAAAA,KAAC,MAAA,CAAI,UAAU,iHACb,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,SAAA,CAAU,EACjCF,EAAAA,IAAC,QAAK,SAAA,WAAA,CAAS,CAAA,CAAA,CACjB,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CCzOA,SAAwB4K,GAA2B,CAAE,KAAAxH,EAAM,OAAAsE,EAAQ,QAAAC,EAAS,UAAAuB,GAA8C,CACxH,KAAM,CAAC2B,EAAMC,CAAO,EAAI/L,EAAAA,SAAS,CAAC,EAC5B,CAACgM,EAAmBC,CAAoB,EAAIjM,EAAAA,SAAS,EAAE,EACvD,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACC,EAAQC,CAAS,EAAIF,EAAAA,SAAS,EAAK,EACpC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAwB,IAAI,EAEtD,GAAI,CAAC2I,GAAU,CAACtE,EAAM,OAAO,KAE7B,MAAM6H,EAA0B,SAAY,CAC1C,GAAI,CAACF,EAAkB,OAAQ,CAC7BxB,EAAS,sCAAsC,EAC/C,MACF,CAEA3I,EAAW,EAAI,EACf2I,EAAS,IAAI,EAEb,GAAI,CACF,MAAM3F,EAAW,MAAM,MAAM,gCAAiC,CAC5D,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CAAE,mBAAoBmH,EAAmB,CAAA,CAC/D,EAED,GAAInH,EAAS,GACXkH,EAAQ,CAAC,MACJ,CACL,MAAMjB,EAAY,MAAMjG,EAAS,KAAA,EACjC2F,EAASM,EAAU,OAAS,qBAAqB,CACnD,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,iCAAkCA,CAAK,EACrD2L,EAAS,wBAAwB,CACnC,QAAA,CACE3I,EAAW,EAAK,CAClB,CACF,EAEMsK,EAAoB,SAAY,CACpCtK,EAAW,EAAI,EACf2I,EAAS,IAAI,EAEb,GAAI,CACF,MAAM3F,EAAW,MAAM,MAAM,oCAAqC,CAChE,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CAAA,CAAE,CAAA,CACxB,EAED,GAAIA,EAAS,GACX,MAAMA,EAAS,KAAA,EACfsF,EAAA,EACAvB,EAAA,EACAmD,EAAQ,CAAC,EACTE,EAAqB,EAAE,MAClB,CACL,MAAMnB,EAAY,MAAMjG,EAAS,KAAA,EACjC2F,EAASM,EAAU,OAAS,wBAAwB,CACtD,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7C2L,EAAS,wBAAwB,CACnC,QAAA,CACE3I,EAAW,EAAK,CAClB,CACF,EAEMuK,EAAkB,MAAOC,GAAiB,CAC9C,MAAM,UAAU,UAAU,UAAUA,CAAI,EACxCnM,EAAU,EAAI,EACd,WAAW,IAAMA,EAAU,EAAK,EAAG,GAAI,CACzC,EAWMoM,GATiBd,GAAiB,CACtC,OAAQA,EAAA,CACN,IAAK,QAAS,MAAO,KACrB,IAAK,UAAW,MAAO,KACvB,IAAK,OACL,QAAS,MAAO,IAAA,CAEpB,GAEiCnH,EAAK,SAAS,EAE/C,aACG,MAAA,CAAI,UAAU,6EACb,SAAArD,EAAAA,KAAC,MAAA,CAAI,UAAU,+CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACsL,GAAA,CAAU,UAAU,uBAAA,CAAwB,EAC7CtL,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,wBAAA,CAAsB,CAAA,EACxE,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEC8B,IAAS,GACR9K,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,qHACb,eAACsL,GAAA,CAAU,UAAU,qBAAqB,CAAA,CAC5C,EACAtL,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,yBAAsB,EAC/ED,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,yCACIsL,EAAW,sBAAA,CAAA,CACpD,CAAA,EACF,EAEAtL,EAAAA,KAAC,MAAA,CAAI,UAAU,mFACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,mBAAgB,EAC/DD,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,YAAA,CAAU,EAChBA,EAAAA,IAAC,OAAA,CAAK,UAAU,2BAA4B,WAAK,SAAA,CAAU,CAAA,EAC7D,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,iBAAA,CAAe,EACrBD,EAAAA,KAAC,OAAA,CAAK,UAAU,0BAA2B,SAAA,CAAAsL,EAAW,SAAA,CAAA,CAAO,CAAA,EAC/D,EACAtL,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,iBAAA,CAAe,EACrBD,EAAAA,KAAC,OAAA,CAAK,UAAU,cAAe,SAAA,CAAA,KAAK,MAAMsL,EAAa,GAAG,EAAE,OAAA,CAAA,CAAK,CAAA,CAAA,CACnE,CAAA,CAAA,CACF,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAArL,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,qBAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO+K,EACP,SAAWvN,GAAMwN,EAAqBxN,EAAE,OAAO,KAAK,EACpD,YAAY,gBACZ,UAAU,8GAAA,CAAA,CACZ,EACF,EAECI,GACCoC,EAAAA,IAAC,MAAA,CAAI,UAAU,iDACb,eAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAC7C,EAIFmC,EAAAA,KAAC,MAAA,CAAI,UAAU,sFACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,6DACZ,SAAA,CAAAC,EAAAA,IAACqB,GAAA,CAAW,UAAU,SAAA,CAAU,EAChCrB,EAAAA,IAAC,QAAK,SAAA,yBAAA,CAAuB,CAAA,EAC/B,EACAD,EAAAA,KAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,eAC5BC,EAAAA,IAAC,UAAO,SAAA,mBAAA,CAAiB,EAAS,+FAAA,EAChD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,sCAAmC,EAClEA,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,wCAAqC,EACpEA,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,uCAAA,CAAqC,CAAA,EACtE,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CACb2H,EAAA,EAEA,OAAO,SAAS,KAAO,oCACzB,EACA,UAAU,2JACX,SAAA,YAAA,CAAA,CAED,CAAA,CACF,CAAA,EACF,EAEA5H,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,kHACX,SAAA,QAAA,CAAA,EAGD3H,EAAAA,IAAC,SAAA,CACC,QAASiL,EACT,SAAUtK,GAAW,CAACoK,EAAkB,KAAA,EACxC,UAAU,sNAET,WAAU,iBAAmB,UAAA,CAAA,CAChC,CAAA,CACF,CAAA,EACF,EAGDF,IAAS,GACR9K,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,oFACb,eAACE,GAAA,CAAY,UAAU,yBAAyB,CAAA,CAClD,EACAF,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,uBAAoB,EAC7EA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,4DAAA,CAErC,CAAA,EACF,QAEC,MAAA,CAAI,UAAU,4BACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,4BAA4B,SAAA,mBAAgB,EAC1DA,EAAAA,IAAC,OAAA,CAAK,UAAU,iEAAiE,SAAA,aAAA,CAEjF,CAAA,EACF,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmL,EAAgB,aAAa,EAC5C,UAAU,8DACV,MAAM,eAEL,SAAAnM,QAAUgK,GAAA,CAAM,UAAU,yBAAyB,EAAKhJ,EAAAA,IAACG,GAAA,CAAK,UAAU,SAAA,CAAU,CAAA,CAAA,CACrF,CAAA,CACF,CAAA,CACF,EAEAJ,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,cAAW,EAC1DD,EAAAA,KAAC,KAAA,CAAG,UAAU,kCACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,0CAAA,CAAwC,SAC3C,KAAA,CAAG,SAAA,CAAA,8BAA2BA,EAAAA,IAAC,UAAO,SAAA,aAAA,CAAW,CAAA,EAAS,EAC3DA,EAAAA,IAAC,MAAG,SAAA,oDAAA,CAAkD,EACtDA,EAAAA,IAAC,MAAG,SAAA,6CAAA,CAA2C,CAAA,CAAA,CACjD,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAASkL,EACT,SAAUvK,EACV,UAAU,8LAET,WAAU,cAAgB,4BAAA,CAAA,EAG7BX,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CACb8K,EAAQ,CAAC,EACTE,EAAqB,EAAE,EACvBzB,EAAS,IAAI,CACf,EACA,UAAU,kHACX,SAAA,wBAAA,CAAA,CAED,EACF,EAGAxJ,EAAAA,KAAC,MAAA,CAAI,UAAU,0FACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,+DACZ,SAAA,CAAAC,EAAAA,IAACqB,GAAA,CAAW,UAAU,SAAA,CAAU,EAChCrB,EAAAA,IAAC,QAAK,SAAA,4CAAA,CAA0C,CAAA,EAClD,EACAD,EAAAA,KAAC,IAAA,CAAE,UAAU,+BAA+B,SAAA,CAAA,gDACGC,EAAAA,IAAC,UAAO,SAAA,mBAAA,CAAiB,EAAS,mEAAA,EACjF,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CACb2H,EAAA,EAEA,OAAO,SAAS,KAAO,oCACzB,EACA,UAAU,sKACX,SAAA,4BAAA,CAAA,CAED,EACF,EAEC/J,GACCoC,EAAAA,IAAC,MAAA,CAAI,UAAU,iDACb,eAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAC7C,CAAA,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAAA,CACF,CAEJ,CCzSA,MAAM2N,GAA0F,CAC9F,KAAM,CACJ,QAAS,CAAE,OAAQ,KAAM,KAAM,GAAA,EAC/B,MAAO,CAAE,OAAQ,KAAO,KAAM,GAAA,CAAI,EAEpC,QAAS,CACP,MAAO,CAAE,OAAQ,IAAM,KAAM,GAAA,CAAI,EAEnC,MAAO,CAAA,CACT,EASA,SAAwBC,GAAqB,CAAE,KAAApI,EAAM,OAAAsE,EAAQ,QAAAC,EAAS,UAAAuB,GAAwC,CAC5G,KAAM,CAACuC,EAAcC,CAAe,EAAI3M,EAAAA,SAASwM,EAAqB,EAChE,CAACI,EAAcC,CAAe,EAAI7M,EAAAA,SAAiB,EAAE,EACrD,CAAC8M,EAAeC,CAAgB,EAAI/M,EAAAA,SAA4B,QAAQ,EACxE,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAwB,IAAI,EAChD,CAACgN,EAAgBC,CAAiB,EAAIjN,EAAAA,SAAS,EAAK,EAE1DM,EAAAA,UAAU,IAAM,CACVqI,GACFuE,EAAA,CAEJ,EAAG,CAACvE,CAAM,CAAC,EAEX,MAAMwE,EAAkBC,GAA+E,CACrG,MAAMC,EAAS,CAAE,GAAGb,GAAuB,GAAIY,GAAY,CAAA,CAAC,EAC5D,OAAO,OAAO,YACZ,OAAO,QAAQC,CAAM,EAAE,IAAI,CAAC,CAAC7B,EAAM8B,CAAQ,IAAM,CAC/C9B,EAAK,YAAA,EACL,OAAO,YACL,OAAO,QAAQ8B,CAAQ,EAAE,IAAI,CAAC,CAACC,EAAYC,CAAK,IAAM,CAACD,EAAW,YAAA,EAAeC,CAAK,CAAC,CAAA,CACzF,CACD,CAAA,CAEL,EAEMN,EAAoB,SAAY,CACpC,GAAI,CACFD,EAAkB,EAAI,EACtB,MAAMQ,EAAY,aAAa,QAAQ,WAAW,EAC5C5I,EAAW,MAAM,MAAM,2BAA4B,CACvD,YAAa,UACb,QAAS4I,EACL,CACE,cAAe,UAAUA,CAAS,EAAA,EAEpC,MAAA,CACL,EACD,GAAI,CAAC5I,EAAS,GACZ,MAAM,IAAI,MAAM,iCAAiCA,EAAS,MAAM,EAAE,EAGpE,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EACxB1G,GAAQ,OAAOA,GAAS,UAAY,CAAC,MAAM,QAAQA,CAAI,EACzDwO,EAAgBQ,EAAehP,CAAI,CAAC,EAEpCwO,EAAgBQ,EAAeX,EAAqB,CAAC,CAEzD,OAAS3N,EAAO,CACd,QAAQ,MAAM,iCAAkCA,CAAK,EACrD8N,EAAgBQ,EAAeX,EAAqB,CAAC,CACvD,CACAS,EAAkB,EAAK,CACzB,EAEA,GAAI,CAACtE,GAAU,CAACtE,EAAM,OAAO,KAE7B,MAAMqJ,GAAkBrJ,EAAK,WAAa,QAAQ,YAAA,EAC5CsJ,EAAoBjB,EAAagB,CAAc,GAAK,CAAA,EACpDE,EAAuB,OAAO,KAAKD,CAAiB,EAAE,OAAS,EAE/DE,EAAerC,GAAiB,CACpC,OAAQA,EAAA,CACN,IAAK,QACH,MAAO,CACL,KAAM,aACN,KAAMvJ,GACN,MAAO,kBACP,QAAS,eACT,YAAa,oBACb,SAAU,CACR,wCACA,uCACA,iCACA,mBACA,0BACA,oBAAA,CACF,EAEJ,IAAK,UACH,MAAO,CACL,KAAM,eACN,KAAMM,EACN,MAAO,kBACP,QAAS,eACT,YAAa,oBACb,SAAU,CACR,wCACA,wCACA,+BACA,mBACA,oBAAA,CACF,EAEJ,QACE,MAAO,CACL,KAAM,YACN,KAAMF,GACN,MAAO,gBACP,QAAS,aACT,YAAa,kBACb,SAAU,CACR,wBACA,wCACA,+BACA,kBAAA,CACF,CACF,CAEN,EAEMyL,EAAgB,SAAY,CAChC,GAAKlB,EAEL,CAAA/K,EAAW,EAAI,EACf2I,EAAS,IAAI,EAEb,GAAI,CACF,MAAMiD,EAAY,aAAa,QAAQ,WAAW,EAC5C5I,EAAW,MAAM,MAAM,0BAA2B,CACtD,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,GAAI4I,EAAY,CAAE,cAAe,UAAUA,CAAS,IAAO,CAAA,CAAC,EAE9D,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,YAAab,EACb,eAAgBE,CAAA,CACjB,CAAA,CACF,EAED,GAAIjI,EAAS,GACXsF,EAAA,EACAvB,EAAA,EACAiE,EAAgB,EAAE,MACb,CACL,MAAM/B,EAAY,MAAMjG,EAAS,KAAA,EACjC2F,EAASM,EAAU,OAAS,gBAAgB,CAC9C,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,kBAAmBA,CAAK,EACtC2L,EAAS,wBAAwB,CACnC,QAAA,CACE3I,EAAW,EAAK,CAClB,EACF,EAEM+I,EAAY,CAACY,EAAcuC,IAA8B,CAC7D,MAAMC,EAAOL,EAAkBnC,CAAI,IAAIuC,CAAM,EAC7C,OAAKC,GAEWD,IAAW,SAAW1J,EAAK,eAAiBA,EAAK,eAC/C2J,EAHA,EAIpB,EAEMC,EAAkBJ,EAAYH,CAAc,EAElD,aACG,MAAA,CAAI,UAAU,6EACb,SAAA1M,EAAAA,KAAC,MAAA,CAAI,UAAU,6EACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACsB,EAAA,CAAK,UAAU,yBAAA,CAA0B,EAC1CtB,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,mBAAA,CAAiB,CAAA,EACnE,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAGAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,eAAY,EACrEA,EAAAA,IAAC,MAAA,CAAI,UAAW,YAAYgN,EAAgB,WAAW,IAAIA,EAAgB,OAAO,kBAChF,SAAAjN,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,MAACgN,EAAgB,KAAhB,CAAqB,UAAW,WAAWA,EAAgB,KAAK,GAAI,SACpE,MAAA,CACC,SAAA,CAAAhN,EAAAA,IAAC,MAAG,UAAW,yBAAyBgN,EAAgB,KAAK,GAC1D,WAAgB,IAAA,CACnB,EACAhN,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,+BAAA,CAA6B,CAAA,CAAA,CACpE,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,qBAAkB,EAErE,CAAC2M,GAAwB,CAACZ,SACxB,MAAA,CAAI,UAAU,wFAAwF,SAAA,mFAEvG,EAGDA,GACC/L,EAAAA,IAAC,MAAA,CAAI,UAAU,0EAA0E,SAAA,6BAEzF,EAGD,OAAO,KAAK0M,CAAiB,EAAE,IAAKnC,GAAS,CAC5C,MAAM0C,EAAmB1C,EAAK,YAAA,EACxBD,EAAWsC,EAAYK,CAAgB,EACvCF,EAAOL,EAAkBnC,CAAI,EAEnC,OACEvK,EAAAA,IAAC,MAAA,CAEC,UAAW,sEACT2L,IAAiBsB,EACb,GAAG3C,EAAS,WAAW,IAAIA,EAAS,OAAO,GAC3C,uCACN,GACA,QAAS,IAAMsB,EAAgBqB,CAAgB,EAE/C,SAAAlN,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,MAACsK,EAAS,KAAT,CAAc,UAAW,WAAWA,EAAS,KAAK,GAAI,SACtD,MAAA,CACC,SAAA,CAAAtK,EAAAA,IAAC,KAAA,CAAG,UAAW,yBAAyB2L,IAAiBsB,EAAmB3C,EAAS,MAAQ,eAAe,GACzG,SAAAA,EAAS,IAAA,CACZ,EACAvK,EAAAA,KAAC,MAAA,CAAI,UAAU,sCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACqI,GAAA,CAAM,UAAU,uBAAA,CAAwB,SACxC,OAAA,CAAM,SAAA,CAAA0E,EAAK,OAAO,eAAA,EAAiB,SAAA,CAAA,CAAO,CAAA,EAC7C,EACA/M,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,KAAE,EAClCD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACkN,GAAA,CAAI,UAAU,yBAAA,CAA0B,SACxC,OAAA,CAAM,SAAA,CAAAH,EAAK,KAAK,OAAA,CAAA,CAAK,CAAA,CAAA,CACxB,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAEA/M,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAAsK,EAAS,SAAS,IAAI,CAAC6C,EAASzL,IAC/B3B,OAAC,MAAA,CAAgB,UAAU,8BACzB,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,sCAAA,CAAuC,EAC9DF,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAyB,SAAAmN,CAAA,CAAQ,CAAA,CAAA,EAFzCzL,CAGV,CACD,CAAA,CACH,CAAA,EACF,EAECiK,IAAiBsB,GAChBjN,MAAC,MAAA,CAAI,UAAU,OACb,SAAAA,EAAAA,IAAC+J,GAAA,CAAW,UAAW,WAAWO,EAAS,KAAK,GAAI,CAAA,CACtD,CAAA,CAAA,CAEJ,CAAA,EA7CKC,CAAA,CAgDX,CAAC,CAAA,EACH,EAGCoB,GACC5L,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,wBAAqB,EACpED,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM+L,EAAiB,QAAQ,EACxC,SAAU,CAACnC,EAAUgC,EAAc,QAAQ,EAC3C,UAAW,6CACTE,IAAkB,SACd,6BACA,uCACN,IAAKlC,EAAUgC,EAAc,QAAQ,EAAsC,GAAlC,+BAAoC,GAE7E,SAAA,CAAA5L,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAC,EAAAA,IAACqI,GAAA,CAAM,UAAU,uBAAA,CAAwB,EACzCrI,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,QAAA,CAAM,CAAA,EACtC,EACAA,EAAAA,IAAC,KAAE,UAAU,kCACV,WAAkB2L,CAAY,GAAG,OAAO,eAAA,CAAe,CAC1D,EACA5L,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,YACzBqD,EAAK,eAAe,eAAA,CAAe,EAC/C,EACC,CAACuG,EAAUgC,EAAc,QAAQ,GAChC3L,EAAAA,IAAC,IAAA,CAAE,UAAU,4BAA4B,SAAA,sBAAA,CAAoB,CAAA,CAAA,CAAA,EAIjED,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM+L,EAAiB,MAAM,EACtC,SAAU,CAACnC,EAAUgC,EAAc,MAAM,EACzC,UAAW,6CACTE,IAAkB,OACd,iCACA,uCACN,IAAKlC,EAAUgC,EAAc,MAAM,EAAsC,GAAlC,+BAAoC,GAE3E,SAAA,CAAA5L,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAC,EAAAA,IAACkN,GAAA,CAAI,UAAU,yBAAA,CAA0B,EACzClN,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,MAAA,CAAI,CAAA,EACpC,QACC,IAAA,CAAE,UAAU,oCACV,SAAA0M,EAAkBf,CAAY,GAAG,KACpC,EACA5L,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,YACzBqD,EAAK,YAAA,EACjB,EACC,CAACuG,EAAUgC,EAAc,MAAM,GAC9B3L,EAAAA,IAAC,IAAA,CAAE,UAAU,4BAA4B,SAAA,sBAAA,CAAoB,CAAA,CAAA,CAAA,CAEjE,CAAA,CACF,CAAA,EACF,EAIDpC,GACCoC,EAAAA,IAAC,MAAA,CAAI,UAAU,sDACb,eAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAC7C,EAIFmC,EAAAA,KAAC,MAAA,CAAI,UAAU,sBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,kHACX,SAAA,QAAA,CAAA,EAGD3H,EAAAA,IAAC,SAAA,CACC,QAAS6M,EACT,SAAU,CAAClB,GAAgB,CAAChC,EAAUgC,EAAcE,CAAa,GAAKlL,EACtE,UAAU,oNAET,SAAAA,EAAU,eAAiB,cAAcgL,EAAeiB,EAAYjB,CAAY,EAAE,KAAO,EAAE,EAAA,CAAA,CAC9F,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CC/VA,SAAwByB,GAAY,CAAE,OAAA1F,EAAQ,QAAAC,GAA6B,CACzE,KAAM,CAAC0F,EAAaC,CAAc,EAAIvO,EAAAA,SAAS,EAAE,EAC3C,CAACwO,EAAeC,CAAgB,EAAIzO,EAAAA,SAAc,CAAE,QAAS,CAAA,EAAI,MAAO,CAAA,EAAI,MAAO,CAAA,EAAI,EACvF,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAAC0O,EAAWC,CAAY,EAAI3O,EAAAA,SAAgD,KAAK,EAIjF4O,EAAe,CACnB,CACE,GAAI,iBACJ,MAAO,+BACP,YAAa,4DACb,SAAU,YACV,aAAc,eACd,YAAa,IAAA,EAEf,CACE,GAAI,iBACJ,MAAO,8BACP,YAAa,uDACb,SAAU,UACV,aAAc,qBACd,YAAa,EAAA,CACf,EAGIC,EAAa,CACjB,CACE,GAAI,cACJ,MAAO,uBACP,YAAa,uDACb,gBAAiB,IACjB,SAAU,EACV,OAAQ,QAAA,EAEV,CACE,GAAI,cACJ,MAAO,+BACP,YAAa,kDACb,gBAAiB,GACjB,SAAU,EACV,OAAQ,QAAA,CACV,EAGIC,EAAa,CACjB,CACE,GAAI,cACJ,SAAU,eACV,aAAc,eACd,UAAW,UACX,eAAgB,IAAA,EAElB,CACE,GAAI,cACJ,SAAU,iBACV,aAAc,iBACd,UAAW,aACX,eAAgB,KAAA,CAClB,EAGIC,EAAoBC,GAAkB,CAC1C,MAAMC,EAAkBD,EAAM,YAAA,EACxBvI,EAAUmI,EAAa,OAC1BM,GACCA,EAAK,MAAM,cAAc,SAASD,CAAe,GACjDC,EAAK,YAAY,YAAA,EAAc,SAASD,CAAe,CAAA,EAErDE,EAAQN,EAAW,OAAQK,GAASA,EAAK,MAAM,YAAA,EAAc,SAASD,CAAe,CAAC,EACtFG,EAAQN,EAAW,OACtBI,GACCA,EAAK,SAAS,cAAc,SAASD,CAAe,GACpDC,EAAK,aAAa,YAAA,EAAc,SAASD,CAAe,CAAA,EAG5D,MAAO,CAAE,QAAAxI,EAAS,MAAA0I,EAAO,MAAAC,CAAA,CAC3B,EAEA9O,EAAAA,UAAU,IAAM,CACd,GAAIgO,EAAY,QAAU,EAAG,CAC3B,MAAMe,EAAY,WAAW,IAAM,CACjCC,EAAA,CACF,EAAG,GAAG,EACN,MAAO,IAAM,aAAaD,CAAS,CACrC,MACEZ,EAAiB,CAAE,QAAS,CAAA,EAAI,MAAO,GAAI,MAAO,CAAA,EAAI,CAE1D,EAAG,CAACH,CAAW,CAAC,EAEhB,MAAMgB,EAAe,SAAY,CAC/B,GAAI,EAAAhB,EAAY,OAAO,OAAS,GAOhC,CAAAzM,EAAW,EAAI,EACf,GAAI,CACF,MAAMgD,EAAW,MAAM,MAAM,iBAAiB,mBAAmByJ,CAAW,CAAC,GAAI,CAC/E,YAAa,SAAA,CACd,EACD,GAAIzJ,EAAS,GAAI,CACf,MAAM0K,EAAU,MAAM1K,EAAS,KAAA,EAC/B4J,EAAiBc,CAAO,CAC1B,MACEd,EAAiBM,EAAiBT,CAAW,CAAC,CAElD,OAASzP,EAAO,CACd,QAAQ,MAAM,iBAAkBA,CAAK,EACrC4P,EAAiBM,EAAiBT,CAAW,CAAC,CAChD,QAAA,CACEzM,EAAW,EAAK,CAClB,EACF,EAEM2N,EAAqB,IAAM,CAC/B,OAAQd,EAAA,CACN,IAAK,UACH,MAAO,CAAE,QAASF,EAAc,QAAS,MAAO,CAAA,EAAI,MAAO,EAAC,EAC9D,IAAK,QACH,MAAO,CAAE,QAAS,GAAI,MAAOA,EAAc,MAAO,MAAO,EAAC,EAC5D,IAAK,QACH,MAAO,CAAE,QAAS,GAAI,MAAO,CAAA,EAAI,MAAOA,EAAc,KAAA,EACxD,QACE,OAAOA,CAAA,CAEb,EAEMiB,EAAkB,KACdjB,EAAc,SAAS,QAAU,IACjCA,EAAc,OAAO,QAAU,IAC/BA,EAAc,OAAO,QAAU,GAGzC,GAAI,CAAC7F,EAAQ,OAAO,KAEpB,MAAM+G,EAAkBF,EAAA,EAClBG,EAAeF,EAAA,EAErB,aACG,MAAA,CAAI,UAAU,kFACb,SAAAzO,EAAAA,KAAC,MAAA,CAAI,UAAU,oFAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,OAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,mBAAgB,EACpEC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,0DAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,UAAU,CAAA,CAAA,CACzB,EACF,QAGC,MAAA,CAAI,UAAU,+BACb,SAAAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAAC2O,GAAA,CAAO,UAAU,2EAA2E,EAC7F3O,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,YAAY,sCACZ,MAAOqN,EACP,SAAW7P,GAAM8P,EAAe9P,EAAE,OAAO,KAAK,EAC9C,UAAU,+HACV,UAAS,EAAA,CAAA,EAEVmD,SACE,MAAA,CAAI,UAAU,sDACb,SAAAX,EAAAA,IAAC,MAAA,CAAI,UAAU,mFAAA,CAAoF,EACrG,CAAA,CAAA,CAEJ,CAAA,CACF,EAGCqN,EAAY,QAAU,GAAKqB,EAAe,SACxC,MAAA,CAAI,UAAU,qCACb,SAAA1O,MAAC,MAAA,CAAI,UAAU,iBACZ,SAAA,CACC,CAAE,GAAI,MAAO,MAAO,MAAO,MAAO0O,CAAA,EAClC,CAAE,GAAI,UAAW,MAAO,UAAW,MAAOnB,EAAc,SAAS,QAAU,CAAA,EAC3E,CAAE,GAAI,QAAS,MAAO,QAAS,MAAOA,EAAc,OAAO,QAAU,CAAA,EACrE,CAAE,GAAI,QAAS,MAAO,QAAS,MAAOA,EAAc,OAAO,QAAU,CAAA,CAAE,EACvE,IAAKqB,GACL7O,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAM2N,EAAakB,EAAI,EAAS,EACzC,UAAW,wEACTnB,IAAcmB,EAAI,GACd,gCACA,iCACN,GAEA,SAAA,OAAC,OAAA,CAAM,WAAI,MAAM,EACjB5O,EAAAA,IAAC,OAAA,CAAK,UAAU,2DACb,WAAI,MACP,CAAA,CAAA,EAXK4O,EAAI,EAAA,CAaZ,CAAA,CACH,CAAA,CACF,EAIF5O,EAAAA,IAAC,MAAA,CAAI,UAAU,2BACZ,SAAAqN,EAAY,OAAS,EACpBtN,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAAC2O,GAAA,CAAO,UAAU,uCAAuC,QACxD,KAAA,CAAG,UAAU,2CAA2C,SAAA,mBAAgB,QACxE,IAAA,CAAE,UAAU,gBAAgB,SAAA,qDAAkD,CAAA,CAAA,CACjF,EACED,IAAiB,GAAK,CAAC/N,EACzBZ,OAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAAC2O,GAAA,CAAO,UAAU,uCAAuC,QACxD,KAAA,CAAG,UAAU,2CAA2C,SAAA,mBAAgB,QACxE,IAAA,CAAE,UAAU,gBAAgB,SAAA,8CAA2C,CAAA,CAAA,CAC1E,EAEA5O,EAAAA,KAAC,MAAA,CAAI,UAAU,gBAEZ,SAAA,CAAA0O,EAAgB,SAAS,OAAS,GACjC1O,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,6DACZ,SAAA,CAAAC,EAAAA,IAAC6O,GAAA,CAAS,UAAU,+BAA+B,EAAE,YAC3CJ,EAAgB,QAAQ,OAAO,GAAA,EAC3C,EACAzO,EAAAA,IAAC,OAAI,UAAU,YACZ,WAAgB,QAAQ,IAAKwF,GAC5BzF,EAAAA,KAACuF,GAAA,CAEC,GAAI,YAAYE,EAAQ,EAAE,GAC1B,QAASmC,EACT,UAAU,gFAEV,SAAA,CAAA3H,EAAAA,IAAC,OAAI,UAAU,sEACb,eAACsB,EAAA,CAAK,UAAU,yBAAA,CAA0B,EAC5C,EACAvB,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,uCAAwC,SAAAwF,EAAQ,MAAM,EACpExF,EAAAA,IAAC,IAAA,CAAE,UAAU,iCAAkC,WAAQ,YAAY,EACnED,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,mCAAoC,SAAAwF,EAAQ,SAAS,EACrEzF,EAAAA,KAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,CAAA,MAAIyF,EAAQ,YAAA,EAAa,EACjEzF,EAAAA,KAAC,OAAA,CAAK,UAAU,qCAAqC,SAAA,CAAA,IAAEyF,EAAQ,YAAY,QAAA,EAAM,CAAA,EACnF,CAAA,EACF,CAAA,CAAA,EAhBKA,EAAQ,EAAA,CAkBhB,EACH,CAAA,EACF,EAIDiJ,EAAgB,OAAO,OAAS,UAC9B,MAAA,CACC,SAAA,CAAA1O,EAAAA,KAAC,KAAA,CAAG,UAAU,6DACZ,SAAA,CAAAC,EAAAA,IAACoB,GAAA,CAAI,UAAU,+BAA+B,EAAE,UACxCqN,EAAgB,MAAM,OAAO,GAAA,EACvC,EACAzO,EAAAA,IAAC,OAAI,UAAU,YACZ,WAAgB,MAAM,IAAK8O,GAC1B/O,EAAAA,KAACuF,GAAA,CAEC,GAAG,QACH,QAASqC,EACT,UAAU,gFAEV,SAAA,CAAA3H,EAAAA,IAAC,OAAI,UAAU,sEACb,eAAC+O,GAAA,CAAW,UAAU,yBAAA,CAA0B,EAClD,EACAhP,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,uCAAwC,SAAA8O,EAAK,MAAM,EACjE9O,EAAAA,IAAC,IAAA,CAAE,UAAU,iCAAkC,WAAK,YAAY,EAChED,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,mCACZ,UAAA8O,EAAK,WAAa,cAAc,QAAQ,IAAK,GAAG,EACpD,EACA/O,EAAAA,KAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,CAAA,MAAI+O,EAAK,cAAgB,gBAAA,EAAiB,EAClF/O,EAAAA,KAAC,OAAA,CAAK,UAAU,sCAAuC,SAAA,CAAA+O,EAAK,iBAAmB,EAAE,OAAA,EAAK,EACtF/O,EAAAA,KAAC,OAAA,CAAK,UAAU,wBAAyB,SAAA,CAAA+O,EAAK,sBAAwB,EAAE,eAAA,EAAa,CAAA,EACvF,CAAA,EACF,CAAA,CAAA,EAnBKA,EAAK,EAAA,CAqBb,EACH,CAAA,EACF,EAIDL,EAAgB,OAAO,OAAS,UAC9B,MAAA,CACC,SAAA,CAAA1O,EAAAA,KAAC,KAAA,CAAG,UAAU,6DACZ,SAAA,CAAAC,EAAAA,IAACgP,GAAA,CAAM,UAAU,6BAA6B,EAAE,UACxCP,EAAgB,MAAM,OAAO,GAAA,EACvC,EACAzO,EAAAA,IAAC,OAAI,UAAU,YACZ,WAAgB,MAAM,IAAKoD,GAC1BrD,EAAAA,KAACuF,GAAA,CAEC,GAAI,UAAUlC,EAAK,UAAYA,EAAK,EAAE,GACtC,QAASuE,EACT,UAAU,gFAEV,SAAA,CAAA3H,EAAAA,IAAC,MAAA,CAAI,UAAU,yCACb,SAAAA,EAAAA,IAAC,MAAA,CACC,IAAKoD,EAAK,YAAc,sBACxB,IAAKA,EAAK,aACV,UAAU,4BAAA,CAAA,EAEd,EACArD,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,MAAC,KAAA,CAAG,UAAU,uCACX,SAAAoD,EAAK,cAAgB,iBACxB,EACArD,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,IAAEqD,EAAK,UAAY,MAAA,EAAO,EAC/DrD,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,CAAA,SAAOqD,EAAK,KAAA,EAAM,EAC1DrD,EAAAA,KAAC,OAAA,CAAK,UAAU,mCAAoC,SAAA,CAAAqD,EAAK,UAAU,OAAA,EAAK,EACxErD,EAAAA,KAAC,OAAA,CAAK,UAAU,wBAAyB,SAAA,CAAAqD,EAAK,eAAe,YAAA,EAAU,CAAA,EACzE,CAAA,EACF,CAAA,CAAA,EAtBKA,EAAK,EAAA,CAwBb,EACH,CAAA,EACF,CAAA,CAAA,CAEJ,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CCxUA,SAAwB6L,GAAc,CAAE,KAAA7L,EAAM,OAAAsE,EAAQ,QAAAC,EAAS,WAAAuH,GAAkC,CAC/F,KAAM,CAACvO,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACoQ,EAAgBC,CAAiB,EAAIrQ,EAAAA,SAAiB,UAAU,EACjE,CAACsQ,EAAeC,CAAgB,EAAIvQ,EAAAA,SAAgB,CAAA,CAAE,EAE5DM,EAAAA,UAAU,IAAM,CACVqI,GAAUtE,GACZmM,EAAA,CAEJ,EAAG,CAAC7H,EAAQtE,CAAI,CAAC,EAEjB,MAAMmM,EAAqB,SAAY,CACrC,GAAI,CACF,MAAM3L,EAAW,MAAM,MAAM,4BAA6B,CACxD,YAAa,SAAA,CACd,EACD,GAAIA,EAAS,GAAI,CACf,MAAM4L,EAAY,MAAM5L,EAAS,KAAA,EACjC0L,EAAiBE,CAAS,CAC5B,CACF,OAAS5R,EAAO,CACd,QAAQ,MAAM,kCAAmCA,CAAK,CACxD,CACF,EAEM6R,EAAiB,MAAOxB,GAAmB,CAC/C,GAAI,GAAC7K,GAAQA,EAAK,eAAiB6K,EAAK,WAExC,CAAArN,EAAW,EAAI,EACf,GAAI,CACF,MAAMgD,EAAW,MAAM,MAAM,2BAA4B,CACvD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,UAAWqK,EAAK,SAChB,UAAWA,EAAK,KAChB,UAAWA,EAAK,UAChB,YAAa,KAAK,UAAUA,EAAK,WAAW,CAAA,CAC7C,CAAA,CACF,EAED,GAAIrK,EAAS,GACXsL,EAAA,EACAK,EAAA,EACAG,EAAyBzB,EAAK,IAAI,MAC7B,CACL,MAAMrQ,EAAQ,MAAMgG,EAAS,KAAA,EAC7B,MAAMhG,EAAM,OAAS,iBAAiB,CACxC,CACF,OAASA,EAAO,CACd,QAAQ,MAAM,mBAAoBA,CAAK,EACvC,MAAM,iBAAiB,CACzB,QAAA,CACEgD,EAAW,EAAK,CAClB,EACF,EAEM8O,EAA4BC,GAAqB,CACrD,MAAMzH,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAY,kIACzBA,EAAa,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAOIyH,CAAQ;AAAA;AAAA;AAAA,MAIrC,SAAS,KAAK,YAAYzH,CAAY,EACtC,WAAW,IAAM,CACX,SAAS,KAAK,SAASA,CAAY,GACrC,SAAS,KAAK,YAAYA,CAAY,CAE1C,EAAG,GAAI,CACT,EAEM0H,EAAoBC,GAAqB,CAQ7C,MAAMC,EAPkC,CACtC,MAAS9O,GACT,IAAOI,GACP,KAAQE,EACR,OAAUoJ,GACV,MAASqF,EAAA,EAEmBF,CAAQ,GAAKvO,EAC3C,OAAOtB,EAAAA,IAAC8P,EAAA,CAAc,UAAU,SAAA,CAAU,CAC5C,EAEME,EAA4B,CAEhC,CACE,GAAI,kBACJ,KAAM,uBACN,YAAa,0EACb,KAAM,QACN,SAAU,WACV,UAAW,IACX,YAAa,CAAE,KAAM,SAAA,CAAU,EAEjC,CACE,GAAI,gBACJ,KAAM,qBACN,YAAa,uEACb,KAAM,QACN,SAAU,WACV,UAAW,IACX,YAAa,CAAE,KAAM,OAAA,CAAQ,EAI/B,CACE,GAAI,qBACJ,KAAM,qBACN,YAAa,oDACb,KAAM,MACN,SAAU,cACV,UAAW,IACX,SAAU,WACV,YAAa,CAAE,WAAY,EAAG,eAAgB,GAAI,KAAM,cAAA,CAAe,EAEzE,CACE,GAAI,cACJ,KAAM,iBACN,YAAa,iDACb,KAAM,OACN,SAAU,cACV,UAAW,IACX,SAAU,SACV,YAAa,CAAE,WAAY,EAAG,eAAgB,IAAK,KAAM,aAAA,CAAc,EAIzE,CACE,GAAI,eACJ,KAAM,eACN,YAAa,qDACb,KAAM,QACN,SAAU,UACV,UAAW,IACX,YAAa,CAAE,WAAY,SAAU,UAAW,EAAA,CAAK,EAEvD,CACE,GAAI,gBACJ,KAAM,gBACN,YAAa,6DACb,KAAM,SACN,SAAU,UACV,UAAW,IACX,SAAU,UACV,YAAa,CAAE,WAAY,aAAc,eAAgB,GAAA,CAAI,CAC/D,EAGIC,EAAa,CACjB,CAAE,GAAI,WAAY,KAAM,gBAAiB,KAAMjP,EAAA,EAC/C,CAAE,GAAI,cAAe,KAAM,SAAU,KAAMI,EAAA,EAC3C,CAAE,GAAI,UAAW,KAAM,UAAW,KAAM2O,EAAA,CAAM,EAG1CG,EAAgBF,EAAc,OAAO/B,GAAQA,EAAK,WAAakB,CAAc,EAE7EgB,EAAelC,GACZoB,EAAc,KAAKe,GACxBA,EAAS,YAAcnC,EAAK,OAC3B,CAACmC,EAAS,YAAc,IAAI,KAAKA,EAAS,UAAU,MAAQ,KAAK,EAIhEzG,EAAasE,GACV7K,GAAQA,EAAK,gBAAkB6K,EAAK,UAG7C,OAAKvG,QAGF,MAAA,CAAI,UAAU,iFACb,SAAA3H,EAAAA,KAAC,MAAA,CAAI,UAAU,qEAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACgB,GAAA,CAAM,UAAU,SAAA,CAAU,SAC1B,MAAA,CACC,SAAA,CAAAhB,EAAAA,IAAC,KAAA,CAAG,UAAU,qBAAqB,SAAA,YAAS,EAC5CA,EAAAA,IAAC,IAAA,CAAE,UAAU,kBAAkB,SAAA,kDAAA,CAAgD,CAAA,CAAA,CACjF,CAAA,EACF,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,qDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,QAGC,MAAA,CAAI,UAAU,kCACb,SAAAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,kBAAkB,SAAA,oBAAiB,QAClD,OAAA,CAAK,UAAU,qBAAsB,SAAAoD,GAAM,gBAAkB,CAAA,CAAE,CAAA,CAAA,CAClE,CAAA,CACF,CAAA,EACF,EAGApD,EAAAA,IAAC,MAAA,CAAI,UAAU,gCACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,sBACZ,SAAAiQ,EAAW,IAAKI,GAAa,CAC5B,MAAMP,EAAgBO,EAAS,KAC/B,OACEtQ,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAMqP,EAAkBiB,EAAS,EAAE,EAC5C,UAAW,0FACTlB,IAAmBkB,EAAS,GACxB,gCACA,mCACN,GAEA,SAAA,CAAArQ,EAAAA,IAAC8P,EAAA,CAAc,UAAU,SAAA,CAAU,EACnC9P,EAAAA,IAAC,OAAA,CAAM,SAAAqQ,EAAS,IAAA,CAAK,CAAA,CAAA,EAThBA,EAAS,EAAA,CAYpB,CAAC,EACH,EACF,EAGArQ,EAAAA,IAAC,MAAA,CAAI,UAAU,+BACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACZ,SAAAkQ,EAAc,IAAKjC,GAAS,CAC3B,MAAMqC,EAAQH,EAAYlC,CAAI,EACxBsC,EAAa5G,EAAUsE,CAAI,EAEjC,OACEjO,EAAAA,IAAC,MAAA,CAEC,UAAW,sDACTsQ,EACI,+BACAC,EACA,2CACA,4BACN,GAEA,SAAAxQ,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,MAAC,OAAI,UAAW,yDACdsQ,EACI,8BACA,0DACN,GACG,SAAAA,EAAQtQ,MAACgJ,GAAA,CAAM,UAAU,SAAA,CAAU,EAAK4G,EAAiB3B,EAAK,IAAI,EACrE,EAEAlO,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA+B,SAAAiO,EAAK,KAAK,EACtDA,EAAK,UACJjO,EAAAA,IAAC,QAAK,UAAU,2DACb,WAAK,QAAA,CACR,CAAA,EAEJ,EAEAA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA8B,WAAK,YAAY,EAE5DD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACgB,GAAA,CAAM,UAAU,yBAAA,CAA0B,EAC3CjB,EAAAA,KAAC,OAAA,CAAK,UAAU,gCAAiC,SAAA,CAAAkO,EAAK,UAAU,OAAA,CAAA,CAAK,CAAA,EACvE,EAEAjO,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMyP,EAAexB,CAAI,EAClC,SAAUtN,GAAW2P,GAAS,CAACC,EAC/B,UAAW,wEACTD,EACI,iDACAC,EACA,oGACA,8CACN,GAEC,SAAA5P,EAAU,gBAAkB2P,EAAQ,QAAUC,EAAa,WAAa,iBAAA,CAAA,CAC3E,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EAnDKtC,EAAK,EAAA,CAsDhB,CAAC,EACH,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EA1HkB,IA4HtB,CC1SA,SAAwBuC,GAAkB,CAAE,KAAApN,EAAM,OAAAsE,EAAQ,QAAAC,GAAmC,CAC3F,KAAM,CAAC8I,EAAcC,CAAe,EAAI3R,EAAAA,SAAwB,CAAA,CAAE,EAC5D,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAI,EACrC,CAACoQ,EAAgBC,CAAiB,EAAIrQ,EAAAA,SAAiB,KAAK,EAElEM,EAAAA,UAAU,IAAM,CACVqI,GAAUtE,GACZuN,EAAA,CAEJ,EAAG,CAACjJ,EAAQtE,CAAI,CAAC,EAEjB,MAAMuN,EAAoB,SAAY,CACpC,GAAI,CACF,MAAM/M,EAAW,MAAM,MAAM,0BAA2B,CACtD,YAAa,SAAA,CACd,EAED,GAAIA,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAE5B8M,EAAgB,MAAM,QAAQxT,CAAI,EAAIA,EAAO,CAAA,CAAE,CACjD,MAEE,QAAQ,IAAI,iDAAiD,EAC7DwT,EAAgBE,GAAqB,CAEzC,OAAShT,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,EAEpD8S,EAAgBE,GAAqB,CACvC,QAAA,CACEhQ,EAAW,EAAK,CAClB,CACF,EAEMgQ,EAAsB,IACnB,CACL,CACE,GAAI,EACJ,KAAM,cACN,YAAa,uCACb,KAAM,OACN,SAAU,cACV,cAAe,QACf,eAAgB,EAChB,eAAgB,eAChB,YAAa,EACb,UAAW,IACX,aAAc,GACd,SAAU,CAAA,EAEZ,CACE,GAAI,EACJ,KAAM,kBACN,YAAa,oCACb,KAAM,YACN,SAAU,WACV,cAAe,QACf,eAAgB,EAChB,eAAgB,iBAChB,YAAa,GACb,UAAW,IACX,aAAc,GACd,SAAU,CAAA,EAEZ,CACE,GAAI,EACJ,KAAM,mBACN,YAAa,sBACb,KAAM,QACN,SAAU,SACV,cAAe,QACf,eAAgB,IAChB,eAAgB,YAChB,YAAa,GACb,UAAW,IACX,aAAc,GACd,SAAUxN,GAAM,gBAAkB,CAAA,EAEpC,CACE,GAAI,EACJ,KAAM,WACN,YAAa,gBACb,KAAM,WACN,SAAU,cACV,cAAe,QACf,eAAgB,EAChB,eAAgB,QAChB,YAAa,GACb,UAAW,IACX,cAAeA,GAAM,OAAS,IAAM,EACpC,SAAUA,GAAM,OAAS,CAAA,EAE3B,CACE,GAAI,EACJ,KAAM,cACN,YAAa,mBACb,KAAM,QACN,SAAU,UACV,cAAe,QACf,eAAgB,IAChB,eAAgB,SAChB,YAAa,GACb,UAAW,IACX,cAAeA,GAAM,gBAAkB,IAAM,IAC7C,SAAUA,GAAM,gBAAkB,CAAA,EAEpC,CACE,GAAI,EACJ,KAAM,iBACN,YAAa,6BACb,KAAM,QACN,SAAU,WACV,cAAe,QACf,eAAgB,EAChB,eAAgB,iBAChB,YAAa,GACb,UAAW,IACX,aAAc,GACd,SAAU,CAAA,CACZ,EAGEyN,EAAmB,MAAOC,GAA0B,CACxD,GAAI,CACF,MAAMlN,EAAW,MAAM,MAAM,2BAA2BkN,CAAa,SAAU,CAC7E,OAAQ,OACR,YAAa,SAAA,CACd,EACD,GAAIlN,EAAS,GAAI,CACf,MAAMmN,EAAS,MAAMnN,EAAS,KAAA,EAE9BoN,EAAuBD,EAAO,YAAaA,EAAO,SAAS,EAE3DJ,EAAA,CACF,CACF,OAAS/S,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,CACrD,CACF,EAEMoT,EAAyB,CAACC,EAAcC,IAAe,CAC3D,MAAMhJ,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAY,kIACzBA,EAAa,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAOK+I,CAAI,WAAWC,CAAE;AAAA;AAAA;AAAA,MAI/C,SAAS,KAAK,YAAYhJ,CAAY,EACtC,WAAW,IAAM,CACX,SAAS,KAAK,SAASA,CAAY,GACrC,SAAS,KAAK,YAAYA,CAAY,CAE1C,EAAG,GAAI,CACT,EAEM0H,EAAoBC,GAAqB,CAa7C,MAAMC,EAZkC,CACtC,KAAQxO,EACR,YAAayO,GACb,IAAO5O,GACP,MAASG,EACT,SAAYyO,GACZ,MAAS5O,GACT,OAAUA,GACV,WAAYG,EACZ,MAASyO,GACT,MAASzO,CAAA,EAEmBuO,CAAQ,GAAKvO,EAC3C,OAAOtB,EAAAA,IAAC8P,EAAA,CAAc,UAAU,SAAA,CAAU,CAC5C,EAEMqB,EAAoBd,IACoB,CAC1C,WAAc,4BACd,SAAY,8BACZ,QAAW,gCACX,YAAe,6BACf,SAAY,+BACZ,OAAU,+BAAA,GAEIA,CAAQ,GAAK,6BAGzBJ,EAAaQ,GAAgBA,EAAa,OAAS,EAAI,CAAC,MAAO,GAAG,IAAI,IAAIA,EAAa,OAASW,EAAE,QAAQ,CAAC,CAAC,EAAI,CAAC,KAAK,EACtHC,EAAuBZ,GAAgBA,EAAa,OAAS,EAC9DtB,IAAmB,MAChBsB,EACAA,EAAa,OAAOW,GAAKA,EAAE,WAAajC,CAAc,EAC1D,CAAA,EAEEmC,EAAiBb,GAAgBA,EAAa,OAAS,EAAIA,EAAa,OAAOW,GAAKA,EAAE,YAAY,EAAE,OAAS,EAC7GG,EAAkBd,GAAgBA,EAAa,OAAS,EAC1DA,EACG,OAAOW,GAAKA,EAAE,YAAY,EAC1B,OAAO,CAACvP,EAAKuP,IAAMvP,EAAMuP,EAAE,YAAa,CAAC,EAC5C,EAEJ,OAAK1J,QAGF,MAAA,CAAI,UAAU,iFACb,SAAA3H,EAAAA,KAAC,MAAA,CAAI,UAAU,qEAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACmB,GAAA,CAAO,UAAU,SAAA,CAAU,SAC3B,MAAA,CACC,SAAA,CAAAnB,EAAAA,IAAC,KAAA,CAAG,UAAU,qBAAqB,SAAA,eAAY,EAC/CA,EAAAA,IAAC,IAAA,CAAE,UAAU,kBAAkB,SAAA,sCAAA,CAAoC,CAAA,CAAA,CACrE,CAAA,EACF,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,qDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAGAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,qBAAsB,SAAAsR,EAAe,EACpDtR,EAAAA,IAAC,MAAA,CAAI,UAAU,0BAA0B,SAAA,WAAA,CAAS,CAAA,EACpD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,MAAC,MAAA,CAAI,UAAU,qBAAsB,SAAAyQ,GAAc,QAAU,EAAE,EAC/DzQ,EAAAA,IAAC,MAAA,CAAI,UAAU,0BAA0B,SAAA,OAAA,CAAK,CAAA,EAChD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,qBAAsB,SAAAuR,EAAgB,EACrDvR,EAAAA,IAAC,MAAA,CAAI,UAAU,0BAA0B,SAAA,aAAA,CAAW,CAAA,CAAA,CACtD,CAAA,CAAA,CACF,CAAA,EACF,EAGAA,EAAAA,IAAC,MAAA,CAAI,UAAU,gCACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,sCACZ,SAAAiQ,EAAW,IAAKI,GACfrQ,EAAAA,IAAC,SAAA,CAEC,QAAS,IAAMoP,EAAkBiB,CAAQ,EACzC,UAAW,gFACTlB,IAAmBkB,EACf,gCACA,mCACN,GAEC,SAAAA,EAAS,OAAO,CAAC,EAAE,cAAgBA,EAAS,MAAM,CAAC,CAAA,EAR/CA,CAAA,CAUR,EACH,CAAA,CACF,EAGArQ,EAAAA,IAAC,MAAA,CAAI,UAAU,+BACZ,SAAAW,EACCX,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,mFAAA,CAAoF,EACrG,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACZ,SAAAqR,GAAwBA,EAAqB,OAAS,EAAIA,EAAqB,IAAKG,GACnFzR,EAAAA,KAAC,MAAA,CAEC,UAAW,+DACTyR,EAAY,aACR,+BACA,0CACN,GAGA,SAAA,CAAAzR,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAW,0EAA0EmR,EAAiBK,EAAY,QAAQ,CAAC,cAC7H,SAAA5B,EAAiB4B,EAAY,IAAI,EACpC,EAEAzR,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA+B,SAAAwR,EAAY,KAAK,EAC7DA,EAAY,cACXxR,EAAAA,IAACE,GAAA,CAAY,UAAU,wBAAA,CAAyB,CAAA,EAEpD,EAEAF,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA8B,WAAY,YAAY,EAGlE,CAACwR,EAAY,cACZzR,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,UAAA,CAAQ,SACb,OAAA,CAAM,SAAA,CAAAwR,EAAY,SAAS,IAAEA,EAAY,cAAA,CAAA,CAAe,CAAA,EAC3D,EACAxR,EAAAA,IAAC,MAAA,CAAI,UAAU,sCACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAW,qCAAqCmR,EAAiBK,EAAY,QAAQ,CAAC,GACtF,MAAO,CAAE,MAAO,GAAG,KAAK,IAAI,IAAMA,EAAY,SAAWA,EAAY,eAAkB,GAAG,CAAC,GAAA,CAAI,CAAA,CAChG,CACH,CAAA,EACF,EAIFzR,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,sCACZ,SAAA,CAAAyR,EAAY,YAAc,GACzBzR,EAAAA,KAAC,MAAA,CAAI,UAAU,8CACb,SAAA,CAAAC,EAAAA,IAACyR,GAAA,CAAK,UAAU,SAAA,CAAU,SACzB,OAAA,CAAM,SAAA,CAAAD,EAAY,YAAY,OAAA,CAAA,CAAK,CAAA,EACtC,EAEDA,EAAY,UAAY,GACvBzR,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAC,EAAAA,IAACsB,EAAA,CAAK,UAAU,SAAA,CAAU,SACzB,OAAA,CAAM,SAAA,CAAAkQ,EAAY,UAAU,KAAA,CAAA,CAAG,CAAA,CAAA,CAClC,CAAA,EAEJ,EAGCA,EAAY,UAAYA,EAAY,gBAAkB,CAACA,EAAY,cAClExR,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM6Q,EAAiBW,EAAY,EAAE,EAC9C,UAAU,2KACX,SAAA,OAAA,CAAA,CAED,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,EACF,EAGCA,EAAY,SAAWA,EAAY,gBAAkB,CAACA,EAAY,cACjExR,EAAAA,IAAC,MAAA,CAAI,UAAU,0FACb,SAAAA,EAAAA,IAAC0R,GAAA,CAAK,UAAU,wBAAwB,CAAA,CAC1C,CAAA,CAAA,EAzEGF,EAAY,EAAA,CA4EpB,EACCzR,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAC,EAAAA,IAACmB,GAAA,CAAO,UAAU,sCAAA,CAAuC,EACzDnB,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,sBAAmB,EAC5EA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,6DAAA,CAA2D,CAAA,CAAA,CAC1F,EAEJ,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,EA5JkB,IA8JtB,CCvXO,SAAS2R,IAAqC,CACnD,KAAM,CAAE,KAAAvO,CAAA,EAASqB,GAAA,EACX,CAACoE,EAAa+I,CAAc,EAAI7S,EAAAA,SAAS,CAAC,EAEhDM,EAAAA,UAAU,IAAM,CACd,GAAI+D,EAAM,CAGR,MAAMyO,EAAS,aAAa,QAAQ,wBAAwBzO,EAAK,EAAE,EAAE,EACrEwO,EAAeC,EAAS,SAASA,CAAM,EAAI,CAAC,CAC9C,CACF,EAAG,CAACzO,CAAI,CAAC,EAET,MAAM0O,EAAkBC,cAAa7J,GAK/B,CACJ,GAAI,CAAC9E,EAAM,OAGX,MAAM4O,EAAWnJ,EAAc,EAC/B+I,EAAeI,CAAQ,EACvB,aAAa,QAAQ,wBAAwB5O,EAAK,EAAE,GAAI4O,EAAS,UAAU,EAG3EC,EAAU/J,EAAa,QAAS,MAAM,EAGtC,QAAQ,IAAI,oBAAqBA,CAAY,CAC/C,EAAG,CAAC9E,EAAMyF,CAAW,CAAC,EAEhBoJ,EAAYF,EAAAA,YAAY,CAACG,EAAiB5P,EAAiD,SAAW,CAE1G,MAAM6P,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAY,qHAGlB,MAAMC,EAAS,CACb,QAAS,0BACT,MAAO,wBACP,QAAS,2BACT,KAAM,wBAAA,EAGRD,EAAM,WAAa,IAAIC,EAAO9P,CAAI,CAAC,GACnC6P,EAAM,YAAcD,EAEpB,SAAS,KAAK,YAAYC,CAAK,EAG/B,WAAW,IAAM,CACfA,EAAM,MAAM,UAAY,eAC1B,EAAG,GAAG,EAGN,WAAW,IAAM,CACfA,EAAM,MAAM,UAAY,mBACxB,WAAW,IAAM,CACX,SAAS,KAAK,SAASA,CAAK,GAC9B,SAAS,KAAK,YAAYA,CAAK,CAEnC,EAAG,GAAG,CACR,EAAG,GAAI,CACT,EAAG,CAAA,CAAE,EAEL,MAAO,CACL,YAAAtJ,EACA,gBAAAiJ,EACA,UAAAG,CAAA,CAEJ,CCpFO,MAAMI,GAAmB,CAACC,EAAkC,KAAO,CACxE,GAAI,OAAO,OAAW,IACpB,MAAO,CAAE,GAAGA,CAAA,EAGd,MAAM9F,EAAY,aAAa,QAAQ,WAAW,EAElD,OAAIA,EACK,CACL,GAAG8F,EACH,cAAe,UAAU9F,CAAS,EAAA,EAI/B,CAAE,GAAG8F,CAAA,CACd,EAEaC,GAAiBC,GAAiB,CAC7C,GAAI,CAACA,EACH,OAAOrQ,GAIT,GAAI,gBAAgB,KAAKqQ,CAAI,EAC3B,OAAOA,EAGT,MAAMC,EAAOtQ,IAAgB,GACvBuQ,EAAiBF,EAAK,WAAW,GAAG,EAAIA,EAAO,IAAIA,CAAI,GAC7D,MAAO,GAAGC,CAAI,GAAGC,CAAc,EACjC,EAEaC,GAAW,CAACH,EAAcI,IAC9B,MAAML,GAAcC,CAAI,EAAGI,CAAO,EAG3C,GAAI,OAAO,OAAW,KAAe,CAAE,OAAe,4BAA6B,CACjF,MAAMC,EAAgB,OAAO,MAAM,KAAK,MAAM,EAC7C,OAAe,4BAA8B,GAE9C,OAAO,MAAQ,CAACC,EAA0BC,IAAuB,CAC/D,GAAI,OAAOD,GAAU,SACnB,OAAIA,EAAM,WAAW,MAAM,EAClBD,EAAcN,GAAcO,CAAK,EAAGC,CAAI,EAE1CF,EAAcC,EAAOC,CAAI,EAGlC,GAAID,aAAiB,QAAS,CAC5B,MAAM3O,EAAM,IAAI,IAAI2O,EAAM,IAAK,OAAO,SAAS,MAAM,EACrD,GAAI3O,EAAI,SAAW,OAAO,SAAS,QAAUA,EAAI,SAAS,WAAW,MAAM,EAAG,CAC5E,MAAM6O,EAAoB,IAAI,QAAQT,GAAcpO,EAAI,SAAWA,EAAI,MAAM,EAAG2O,CAAK,EACrF,OAAOD,EAAcG,EAAmBD,CAAI,CAC9C,CACA,OAAOF,EAAcC,EAAOC,CAAI,CAClC,CAEA,GAAID,aAAiB,IAAK,CACxB,GAAIA,EAAM,SAAW,OAAO,SAAS,QAAUA,EAAM,SAAS,WAAW,MAAM,EAAG,CAChF,MAAMG,EAAY,IAAI,IAAIV,GAAcO,EAAM,SAAWA,EAAM,MAAM,CAAC,EACtE,OAAOD,EAAcI,EAAWF,CAAI,CACtC,CACA,OAAOF,EAAcC,EAAOC,CAAI,CAClC,CAEA,OAAOF,EAAcC,EAAOC,CAAI,CAClC,CACF,CCzBA,SAAwBG,GAAO,CAAE,SAAA/P,GAAyB,CACxD,KAAM,CAAE,KAAAC,EAAM,OAAA+P,CAAA,EAAW1O,GAAA,EACnB7F,EAAWC,GAAA,EACXH,EAAWC,GAAA,EACX,CAACyU,EAAUC,CAAW,EAAItU,EAAAA,SAA0B,IAAI,EACxD,CAACuU,EAAmBC,CAAoB,EAAIxU,EAAAA,SAAS,EAAK,EAC1D,CAACyU,EAAoBC,CAAqB,EAAI1U,EAAAA,SAAS,EAAK,EAC5D,CAAC2U,EAAoBC,CAAqB,EAAI5U,EAAAA,SAAS,EAAK,EAC5D,CAAC6U,EAAkBC,CAAmB,EAAI9U,EAAAA,SAAS,EAAK,EACxD,CAAC+U,EAAiBC,CAAkB,EAAIhV,EAAAA,SAAS,EAAK,EACtD,CAACiV,EAAcC,CAAe,EAAIlV,EAAAA,SAAS,EAAK,EAChD,CAACmV,EAAgBC,CAAiB,EAAIpV,EAAAA,SAAS,EAAK,EACpD,CAACqV,EAAgBC,CAAiB,EAAItV,EAAAA,SAAS,EAAK,EACpD,CAACuV,EAAmBC,CAAoB,EAAIxV,EAAAA,SAAS,EAAK,EAC1D,CAACyV,EAAmBC,CAAoB,EAAI1V,EAAAA,SAAS,EAAK,EAC1D,CAAC2V,EAAuBC,CAAwB,EAAI5V,EAAAA,SAAS,EAAK,EAClE,CAAE,YAAA8J,CAAA,EAAgB8I,GAAA,EAClBiD,EAAUzS,IAAgB,GAC1B0S,EAAerC,GAAiB,GAAGoC,CAAO,GAAGpC,CAAI,GAEvDnT,EAAAA,UAAU,IAAM,CACV+D,GACF0R,EAAA,CAEJ,EAAG,CAAC1R,CAAI,CAAC,EAGT/D,EAAAA,UAAU,IAAM,CACd,MAAM0V,EAAiBvX,GAAqB,EACrCA,EAAE,SAAWA,EAAE,UAAYA,EAAE,MAAQ,MACxCA,EAAE,eAAA,EACFuW,EAAmB,EAAI,GAErBvW,EAAE,MAAQ,WACZyW,EAAgB,EAAK,EACrBE,EAAkB,EAAK,EACvBE,EAAkB,EAAK,EACvBE,EAAqB,EAAK,EAE9B,EAEA,gBAAS,iBAAiB,UAAWQ,CAAa,EAC3C,IAAM,SAAS,oBAAoB,UAAWA,CAAa,CACpE,EAAG,CAAA,CAAE,EAGL1V,EAAAA,UAAU,IAAM,CACd,MAAM2V,EAAsBxX,GAAkB,CAC5C,MAAMyX,EAASzX,EAAE,OACb,CAACyX,EAAO,QAAQ,YAAY,GAAK,CAACA,EAAO,QAAQ,cAAc,IACjEhB,EAAgB,EAAK,EACrBE,EAAkB,EAAK,EAE3B,EAEA,gBAAS,iBAAiB,QAASa,CAAkB,EAC9C,IAAM,SAAS,oBAAoB,QAASA,CAAkB,CACvE,EAAG,CAAA,CAAE,EAEL,MAAMF,EAAgB,SAAY,CAChC,GAAI,CACF,MAAMxC,EAAUD,GAAA,EACVzO,EAAW,MAAM,MAAMiR,EAAY,eAAe,EAAG,CACzD,YAAa,UACb,QAAAvC,CAAA,CACD,EACD,GAAI1O,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAExB1G,GAAQ,OAAOA,GAAS,UAC1BmW,EAAYnW,CAAI,CAEpB,CACF,OAASU,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,CACnD,CACF,EAmBMsX,GAjBgB,IAAM,CAC1B,MAAMC,EAAU,CACd,CAAE,KAAM,OAAQ,KAAM,aAAc,KAAM9U,EAAA,EAC1C,CAAE,KAAM,OAAQ,KAAM,QAAS,KAAM0O,EAAA,EACrC,CAAE,KAAM,SAAU,KAAM,UAAW,KAAMqG,EAAA,EACzC,CAAE,KAAM,SAAU,KAAM,UAAW,KAAM/T,EAAA,EACzC,CAAE,KAAM,aAAc,KAAM,cAAe,KAAMgU,EAAA,CAAO,EAI1D,OAAIjC,GAAaA,EAAiB,YAAc,cAC9C+B,EAAQ,KAAK,CAAE,KAAM,YAAa,KAAM,cAAe,KAAMG,GAAU,EAGlEH,CACT,GAEmB,EAEbI,EAAY/C,GAAiB5T,EAAS,WAAa4T,GAAQ5T,EAAS,SAAS,WAAW4T,EAAO,GAAG,EAElGgD,GAAkB,IACjBpC,GACGA,EAAS,gBAAkB,IAAMA,EAAS,cAAgB,IAAMA,EAAS,cAAgB,IAAMA,EAAS,gBAAkB,GAD5G,EAIlBqC,GACJrC,GAAU,WACTA,GAAU,MAAQA,EAAS,MAAM,MAAM,GAAG,EAAE,CAAC,EAAI,UACjDhQ,GAAM,SAAW,OAAOA,EAAK,QAAQ,EAAI,UACzCA,GAAM,MAAQA,EAAK,MAAM,MAAM,GAAG,EAAE,CAAC,EAAI,SAC1C,KAEIsS,EAAc,YAAY,mBAAmBD,EAAW,CAAC,GAEzDE,EAAsB7X,GAAmB,CAE7C,OADAqW,EAAkB,EAAK,EACfrW,EAAA,CACN,IAAK,YACH6V,EAAsB,EAAI,EAC1B,MACF,IAAK,YACHF,EAAsB,EAAI,EAC1B,MACF,IAAK,UACHF,EAAqB,EAAI,EACzB,MACF,IAAK,cACH7U,EAAS,cAAc,EACvB,MACF,IAAK,YACHA,EAAS,aAAa,EACtB,MACF,IAAK,SACHA,EAAS,SAAS,EAClB,MACF,IAAK,WACH+V,EAAqB,EAAI,EACzB,MACF,IAAK,eACHE,EAAyB,EAAI,EAC7B,KAAA,CAEN,EAEMiB,EAAe,SAAY,CAC/B,GAAI,CAEF,MAAMzC,EAAA,EAGN,aAAa,MAAA,EACb,eAAe,MAAA,EAGf,GAAI,CACF,MAAM,MAAM0B,EAAY,kBAAkB,EAAG,CAC3C,OAAQ,OACR,YAAa,SAAA,CACd,CACH,OAASgB,EAAc,CACrB,QAAQ,MAAM,yBAA0BA,CAAY,CAEtD,CAGAnX,EAAS,IAAK,CAAE,QAAS,EAAA,CAAM,CAEjC,OAASd,EAAO,CACd,QAAQ,MAAM,iBAAkBA,CAAK,EAGrC,GAAI,CACF,aAAa,MAAA,EACb,eAAe,MAAA,CACjB,OAASkY,EAAc,CACrB,QAAQ,MAAM,2BAA4BA,CAAY,CACxD,CAGApX,EAAS,IAAK,CAAE,QAAS,EAAA,CAAM,CACjC,CACF,EAEMqX,EAAoBjY,GAAmB,CAE3C,OADAmW,EAAgB,EAAK,EACbnW,EAAA,CACN,IAAK,UACHY,EAASgX,CAAW,EACpB,MACF,IAAK,UACH7B,EAAoB,EAAI,EACxB,MACF,IAAK,aACC,CAACT,GAAaA,EAAiB,YAAc,aAC/C1U,EAAS,wBAAwB,EAEjCA,EAAS,aAAa,EAExB,MACF,IAAK,SACHkX,EAAA,EACA,KAAA,CAEN,EAEA,OACE7V,EAAAA,KAAC,MAAA,CAAI,UAAU,0BAEb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CAAO,UAAU,gEAChB,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,yCACb,SAAAD,OAAC,MAAA,CAAI,UAAU,yCAEb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,8BACb,SAAAA,EAAAA,IAACsF,IAAK,GAAG,aAAa,UAAU,oCAC9B,SAAAtF,EAAAA,IAAC,MAAA,CACC,IAAI,wFACJ,IAAI,YACJ,UAAU,sDAAA,CAAA,EAEd,CAAA,CAGF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BAEb,SAAA,CAAAC,MAACuF,IAAQ,QAAQ,cAAc,SAAS,SAAS,QAAS,GACxD,SAAAxF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMgU,EAAmB,EAAI,EACtC,UAAU,6GAEV,SAAA,CAAA/T,EAAAA,IAAC2O,GAAA,CAAO,UAAU,uBAAA,CAAwB,EAC1C3O,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,YAAS,EACjDA,EAAAA,IAAC,MAAA,CAAI,UAAU,yHAAyH,SAAA,IAAA,CAExI,CAAA,CAAA,CAAA,EAEJ,QAGCuF,GAAA,CAAQ,QAAQ,gBAAgB,SAAS,SAAS,QAAS,GAC1D,SAAAxF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMwU,EAAqB,EAAI,EACxC,UAAU,+GAEV,SAAA,CAAAvU,EAAAA,IAACwI,GAAA,CAAK,UAAU,SAAA,CAAU,EACzBK,EAAc,GACb7I,MAAC,OAAA,CAAK,UAAU,yHACb,SAAA6I,EAAc,EAAI,KAAOA,CAAA,CAC5B,CAAA,CAAA,CAAA,EAGN,GAGEzF,GAAQgQ,IACRrT,EAAAA,KAAC,MAAA,CAAI,UAAU,uCACb,SAAA,CAAAC,MAACuF,IAAQ,QAAQ,sBAAsB,SAAS,SAAS,QAAS,GAChE,SAAAxF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMoU,EAAkB,CAACD,CAAc,EAChD,UAAU,sNAEV,SAAA,CAAAlU,EAAAA,IAACgW,GAAA,CAAO,UAAU,uBAAA,CAAwB,QACzC,OAAA,CAAK,UAAU,+DACb,SAAAR,GAAA,EAAkB,iBACrB,QACCS,GAAA,CAAY,UAAW,8CAA8C/B,EAAiB,aAAe,EAAE,EAAA,CAAI,CAAA,CAAA,CAAA,EAEhH,EAGCA,GACCnU,EAAAA,KAAC,MAAA,CAAI,UAAU,4FACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,qCACb,SAAAA,EAAAA,IAAC,MAAG,UAAU,oCAAoC,yBAAa,CAAA,CACjE,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAACuF,GAAA,CAAQ,QAAQ,8BAA8B,SAAS,OACtD,SAAAxF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM4V,EAAmB,WAAW,EAC7C,UAAU,gFAEV,SAAA,CAAA5V,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACqI,GAAA,CAAM,UAAU,uBAAA,CAAwB,EACzCrI,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,QAAA,CAAM,CAAA,EAChD,QACC,OAAA,CAAK,UAAU,oCAAqC,SAAAoT,GAAU,gBAAkB,CAAA,CAAE,CAAA,CAAA,CAAA,EAEvF,EAEApT,EAAAA,IAACuF,GAAA,CAAQ,QAAQ,0BAA0B,SAAS,OAClD,SAAAxF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM4V,EAAmB,WAAW,EAC7C,UAAU,gFAEV,SAAA,CAAA5V,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC4B,GAAA,CAAI,UAAU,yBAAA,CAA0B,EACzC5B,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,MAAA,CAAI,CAAA,EAC9C,QACC,OAAA,CAAK,UAAU,sCAAuC,SAAAoT,GAAU,cAAgB,CAAA,CAAE,CAAA,CAAA,CAAA,EAEvF,EAEApT,EAAAA,IAACuF,GAAA,CAAQ,QAAQ,8BAA8B,SAAS,OACtD,SAAAxF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM4V,EAAmB,SAAS,EAC3C,UAAU,gFAEV,SAAA,CAAA5V,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACsB,EAAA,CAAK,UAAU,yBAAA,CAA0B,EAC1CtB,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,MAAA,CAAI,CAAA,EAC9C,QACC,OAAA,CAAK,UAAU,sCAAuC,SAAAoT,GAAU,cAAgB,CAAA,CAAE,CAAA,CAAA,CAAA,EAEvF,GAEEA,GAAU,gBAAkB,GAAK,SAChC7N,GAAA,CAAQ,QAAQ,sBAAsB,SAAS,OAC9C,SAAAxF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM4V,EAAmB,UAAU,EAC5C,UAAU,gFAEV,SAAA,CAAA5V,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACmB,GAAA,CAAO,UAAU,yBAAA,CAA0B,EAC5CnB,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,MAAA,CAAI,CAAA,EAC9C,QACC,OAAA,CAAK,UAAU,sCAAuC,SAAAoT,GAAU,gBAAkB,CAAA,CAAE,CAAA,CAAA,CAAA,CACvF,CACF,CAAA,EAEJ,EAEArT,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACb,SAAA,CAAAC,MAACuF,IAAQ,QAAQ,yBAAyB,SAAS,OAAO,QAAS,GACjE,SAAAxF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM4V,EAAmB,QAAQ,EAC1C,UAAU,0EAEV,SAAA,CAAA3V,EAAAA,IAACgW,GAAA,CAAO,UAAU,uBAAA,CAAwB,EAC1ChW,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,kBAAA,CAAgB,CAAA,CAAA,CAAA,EAE5D,QACCuF,GAAA,CAAQ,QAAQ,wBAAwB,SAAS,OAAO,QAAS,GAChE,SAAAxF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM4V,EAAmB,WAAW,EAC7C,UAAU,0EAEV,SAAA,CAAA3V,EAAAA,IAACqV,GAAA,CAAO,UAAU,uBAAA,CAAwB,EAC1CrV,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,oBAAA,CAAkB,CAAA,CAAA,CAAA,EAE9D,QACCuF,GAAA,CAAQ,QAAQ,gBAAgB,SAAS,OAAO,QAAS,GACxD,SAAAxF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM4V,EAAmB,aAAa,EAC/C,UAAU,0EAEV,SAAA,CAAA3V,EAAAA,IAACmB,GAAA,CAAO,UAAU,yBAAA,CAA0B,EAC5CnB,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,eAAA,CAAa,CAAA,CAAA,CAAA,CACvD,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EAEJ,EAIFD,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMkU,EAAgB,CAACD,CAAY,EAC5C,UAAU,uGAEV,SAAA,CAAAhU,EAAAA,IAAC4E,GAAA,CACC,SAAUwO,GAAU,UAAYhQ,GAAM,OAAO,MAAM,GAAG,EAAE,CAAC,EACzD,YAAagQ,GAAU,cAAgBhQ,GAAM,kBAAkB,MAAQA,GAAM,kBAAkB,WAC/F,UAAWgQ,GAAU,YAAchQ,GAAM,kBAAkB,QAC3D,UAAU,8BACV,KAAK,IAAA,CAAA,EAEPrD,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAC,MAAC,OAAI,UAAU,sDACZ,SAAAoD,GAAM,kBAAkB,YAAcA,GAAM,kBAAkB,MAAQA,GAAM,OAAO,MAAM,GAAG,EAAE,CAAC,GAAK,OACvG,EACArD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACX,SAAA,EAAAqT,GAAU,WAAa,UAAY,SAAWpT,EAAAA,IAACgB,GAAA,CAAM,UAAU,0BAA0B,GACzFoS,GAAU,WAAa,UAAY,WAAapT,EAAAA,IAACsB,EAAA,CAAK,UAAU,0BAA0B,GAC1F8R,GAAU,WAAa,UAAY,QAAUpT,EAAAA,IAACsB,EAAA,CAAK,UAAU,wBAAwB,EACvFtB,EAAAA,IAAC,OAAA,CAAK,UAAW,wBACdoT,GAAU,WAAa,UAAY,QAAU,mBAC7CA,GAAU,WAAa,UAAY,UAAY,kBAAoB,eACtE,GACI,UAAAA,GAAU,WAAa,QAAQ,OAAO,CAAC,EAAE,YAAA,GAAiBA,GAAU,WAAa,QAAQ,MAAM,CAAC,CAAA,CACpG,CAAA,CAAA,CACF,CAAA,EACF,QACC6C,GAAA,CAAY,UAAW,wEAAwEjC,EAAe,aAAe,EAAE,EAAA,CAAI,CAAA,CAAA,CAAA,EAIrIA,GACCjU,EAAAA,KAAC,MAAA,CAAI,UAAU,4FACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAC,MAAC,OAAI,UAAU,oCACZ,YAAU,cAAgBoD,GAAM,kBAAkB,MAAQA,GAAM,kBAAkB,YAAcA,GAAM,OAAO,MAAM,GAAG,EAAE,CAAC,GAAK,OACjI,EACApD,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAyB,YAAM,KAAA,CAAM,CAAA,EACtD,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMgW,EAAiB,SAAS,EACzC,UAAU,0EAEV,SAAA,CAAA/V,EAAAA,IAACoF,GAAA,CAAK,UAAU,uBAAA,CAAwB,EACxCpF,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,SAAA,CAAO,CAAA,CAAA,CAAA,EAGhDoT,GACCpT,EAAAA,IAACuF,GAAA,CAAQ,QAAQ,sDAAsD,SAAS,OAC9E,SAAAxF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMgW,EAAiB,SAAS,EACzC,UAAU,0EAEV,SAAA,CAAA/V,EAAAA,IAACgB,GAAA,CAAM,UAAU,yBAAA,CAA0B,EAC3ChB,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,cAAA,CAAY,CAAA,CAAA,CAAA,EAExD,EAGFA,EAAAA,IAACuF,GAAA,CAAQ,QAAQ,sDAAsD,SAAS,OAC9E,SAAAxF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMgW,EAAiB,YAAY,EAC5C,UAAU,0EAEV,SAAA,CAAA/V,EAAAA,IAACkW,GAAA,CAAU,UAAU,yBAAA,CAA0B,EAC/ClW,EAAAA,IAAC,OAAA,CAAK,UAAU,wBACZ,SAAA,CAACoT,GAAaA,EAAiB,YAAc,aAAgB,oBAAsB,sBAAA,CACvF,CAAA,CAAA,CAAA,CACF,CACF,CAAA,EACF,EAEApT,EAAAA,IAAC,MAAA,CAAI,UAAU,gCACb,SAAAD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMgW,EAAiB,QAAQ,EACxC,UAAU,uFAEV,SAAA,CAAA/V,EAAAA,IAACmW,GAAA,CAAO,UAAU,SAAA,CAAU,EAC5BnW,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,UAAA,CAAQ,CAAA,CAAA,CAAA,CACpC,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CAGF,CAAA,CAAA,CACF,EACF,EACF,EAGCoU,GACCpU,EAAAA,IAAC,MAAA,CAAI,UAAU,sDAAsD,QAAS,IAAMqU,EAAkB,EAAK,EACzG,SAAAtU,EAAAA,KAAC,MAAA,CAAI,UAAU,kEAAkE,QAAUvC,GAAMA,EAAE,kBAEjG,SAAA,CAAAuC,EAAAA,KAAC,MAAA,CAAI,UAAU,yEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,OAAI,EACxDA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMqU,EAAkB,EAAK,EACtC,UAAU,wCAEV,SAAArU,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAGAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC4E,GAAA,CACC,SAAUwO,GAAU,UAAYhQ,GAAM,OAAO,MAAM,GAAG,EAAE,CAAC,EACzD,YAAagQ,GAAU,cAAgBhQ,GAAM,kBAAkB,MAAQA,GAAM,kBAAkB,YAAc,OAC7G,UAAWgQ,GAAU,YAAchQ,GAAM,kBAAkB,QAC3D,UAAU,8BACV,KAAK,IAAA,CAAA,EAEPrD,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,MAAC,OAAI,UAAU,6CACZ,YAAU,cAAgBoD,GAAM,kBAAkB,MAAQA,GAAM,kBAAkB,YAAcA,GAAM,OAAO,MAAM,GAAG,EAAE,CAAC,GAAK,OACjI,EACArD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACX,SAAA,EAAAqT,GAAU,WAAa,UAAY,SAAWpT,EAAAA,IAACgB,GAAA,CAAM,UAAU,0BAA0B,GACzFoS,GAAU,WAAa,UAAY,WAAapT,EAAAA,IAACsB,EAAA,CAAK,UAAU,0BAA0B,GAC1F8R,GAAU,WAAa,UAAY,QAAUpT,EAAAA,IAACsB,EAAA,CAAK,UAAU,wBAAwB,EACvFvB,OAAC,OAAA,CAAK,UAAW,wBACdqT,GAAU,WAAa,UAAY,QAAU,mBAC7CA,GAAU,WAAa,UAAY,UAAY,kBAAoB,eACtE,GACI,SAAA,EAAAA,GAAU,WAAa,QAAQ,OAAO,CAAC,EAAE,YAAA,GAAiBA,GAAU,WAAa,QAAQ,MAAM,CAAC,EAAE,OAAA,CAAA,CACtG,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGArT,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iEAAiE,SAAA,gBAAa,EAG5FD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACbgU,EAAmB,EAAI,EACvBM,EAAkB,EAAK,CACzB,EACA,UAAU,4GAEV,SAAA,CAAArU,EAAAA,IAAC2O,GAAA,CAAO,UAAU,uBAAA,CAAwB,EAC1C3O,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,QAAA,CAAM,CAAA,CAAA,CAAA,EAItCD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACbwU,EAAqB,EAAI,EACzBF,EAAkB,EAAK,CACzB,EACA,UAAU,kHAEV,SAAA,CAAAtU,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACwI,GAAA,CAAK,UAAU,uBAAA,CAAwB,EACxCxI,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,eAAA,CAAa,CAAA,EAC7C,EACC6I,EAAc,GACb7I,MAAC,OAAA,CAAK,UAAU,iEACb,SAAA6I,EAAc,EAAI,KAAOA,CAAA,CAC5B,CAAA,CAAA,CAAA,CAEJ,EACF,GAGEzF,GAAQgQ,IACRrT,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iEAAiE,SAAA,SAAM,EACrFD,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAoC,SAAA,gBAAa,QAChE,OAAA,CAAK,UAAU,kCAAmC,SAAAwV,GAAA,EAAkB,gBAAe,CAAE,CAAA,EACxF,EACAzV,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACqI,GAAA,CAAM,UAAU,uBAAA,CAAwB,SACxC,OAAA,CAAO,SAAA,EAAA+K,GAAU,gBAAkB,GAAG,eAAA,EAAiB,MAAA,CAAA,CAAI,CAAA,EAC9D,EACArT,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC4B,GAAA,CAAI,UAAU,yBAAA,CAA0B,SACxC,OAAA,CAAM,SAAA,CAAAwR,GAAU,cAAgB,EAAE,OAAA,CAAA,CAAK,CAAA,EAC1C,EACArT,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACsB,EAAA,CAAK,UAAU,yBAAA,CAA0B,SACzC,OAAA,CAAM,SAAA,CAAA8R,GAAU,cAAgB,EAAE,OAAA,CAAA,CAAK,CAAA,EAC1C,GACEA,GAAU,gBAAkB,GAAK,GACjCrT,OAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACmB,GAAA,CAAO,UAAU,yBAAA,CAA0B,SAC3C,OAAA,CAAM,SAAA,CAAAiS,GAAU,gBAAkB,EAAE,OAAA,CAAA,CAAK,CAAA,CAAA,CAC5C,CAAA,CAAA,CAEJ,CAAA,EACF,EAEArT,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACb4V,EAAmB,QAAQ,EAC3BtB,EAAkB,EAAK,CACzB,EACA,UAAU,4GAEV,SAAA,CAAArU,EAAAA,IAACgW,GAAA,CAAO,UAAU,uBAAA,CAAwB,EAC1ChW,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,aAAA,CAAW,CAAA,CAAA,CAAA,EAGvCD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACb4V,EAAmB,SAAS,EAC5BtB,EAAkB,EAAK,CACzB,EACA,UAAU,4GAEV,SAAA,CAAArU,EAAAA,IAACsB,EAAA,CAAK,UAAU,yBAAA,CAA0B,EAC1CtB,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,kBAAA,CAAgB,CAAA,CAAA,CAAA,EAG5CD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACb4V,EAAmB,WAAW,EAC9BtB,EAAkB,EAAK,CACzB,EACA,UAAU,4GAEV,SAAA,CAAArU,EAAAA,IAAC4B,GAAA,CAAI,UAAU,yBAAA,CAA0B,EACzC5B,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,YAAA,CAAU,CAAA,CAAA,CAAA,CACtC,CAAA,CACF,CAAA,EACF,EAIFD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iEAAiE,SAAA,UAAO,EACtFD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACbgW,EAAiB,SAAS,EAC1B1B,EAAkB,EAAK,CACzB,EACA,UAAU,4GAEV,SAAA,CAAArU,EAAAA,IAACoF,GAAA,CAAK,UAAU,uBAAA,CAAwB,EACxCpF,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,SAAA,CAAO,CAAA,CAAA,CAAA,GAGjCoD,GAAQgQ,IACRrT,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACbgW,EAAiB,SAAS,EAC1B1B,EAAkB,EAAK,CACzB,EACA,UAAU,4GAEV,SAAA,CAAArU,EAAAA,IAACgB,GAAA,CAAM,UAAU,yBAAA,CAA0B,EAC3ChB,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,cAAA,CAAY,CAAA,CAAA,CAAA,EAI1CD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACb4V,EAAmB,cAAc,EACjCtB,EAAkB,EAAK,CACzB,EACA,UAAU,4GAEV,SAAA,CAAArU,EAAAA,IAACmB,GAAA,CAAO,UAAU,yBAAA,CAA0B,EAC5CnB,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,cAAA,CAAY,CAAA,CAAA,CAAA,EAGxCD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACb4V,EAAmB,aAAa,EAChCtB,EAAkB,EAAK,CACzB,EACA,UAAU,4GAEV,SAAA,CAAArU,EAAAA,IAACmB,GAAA,CAAO,UAAU,yBAAA,CAA0B,EAC5CnB,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,aAAA,CAAW,CAAA,CAAA,CAAA,EAGvCD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACb4V,EAAmB,WAAW,EAC9BtB,EAAkB,EAAK,CACzB,EACA,UAAU,4GAEV,SAAA,CAAArU,EAAAA,IAACsB,EAAA,CAAK,UAAU,uBAAA,CAAwB,EACxCtB,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,mBAAA,CAAiB,CAAA,CAAA,CAAA,CAC7C,CAAA,CACF,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iEAAiE,SAAA,WAAQ,EACvFD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACbgW,EAAiB,YAAY,EAC7B1B,EAAkB,EAAK,CACzB,EACA,UAAU,4GAEV,SAAA,CAAArU,EAAAA,IAACkW,GAAA,CAAU,UAAU,yBAAA,CAA0B,EAC/ClW,EAAAA,IAAC,OAAA,CAAK,UAAU,UACZ,SAAA,CAACoT,GAAaA,EAAiB,YAAc,aAAgB,oBAAsB,sBAAA,CACvF,CAAA,CAAA,CAAA,CACF,EACF,EAGApT,EAAAA,IAAC,MAAA,CAAI,UAAU,0CACb,SAAAD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACbgW,EAAiB,QAAQ,EACzB1B,EAAkB,EAAK,CACzB,EACA,UAAU,yGAEV,SAAA,CAAArU,EAAAA,IAACmW,GAAA,CAAO,UAAU,SAAA,CAAU,EAC5BnW,EAAAA,IAAC,OAAA,CAAK,UAAU,sBAAsB,SAAA,UAAA,CAAQ,CAAA,CAAA,CAAA,CAChD,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAIFA,MAAC,MAAA,CAAI,UAAU,8DACb,eAAC,MAAA,CAAI,UAAU,yCACb,SAAAA,EAAAA,IAAC,OAAI,UAAU,iBACZ,SAAAkV,EAAW,IAAKjH,GAAS,CACxB,MAAMzM,EAAOyM,EAAK,KAClB,OACElO,EAAAA,KAACuF,GAAA,CAEC,GAAI2I,EAAK,KACT,UAAW,0FACTsH,EAAStH,EAAK,IAAI,EACd,oCACA,4EACN,GAEA,SAAA,CAAAjO,EAAAA,IAACwB,EAAA,CAAK,UAAU,SAAA,CAAU,EAC1BxB,EAAAA,IAAC,OAAA,CAAM,SAAAiO,EAAK,IAAA,CAAK,CAAA,CAAA,EATZA,EAAK,IAAA,CAYhB,CAAC,CAAA,CACH,CAAA,CACF,EACF,QAGC,MAAA,CAAI,UAAU,iFACb,SAAAlO,EAAAA,KAAC,MAAA,CAAI,UAAU,OAEb,SAAA,CAAAA,EAAAA,KAACuF,GAAA,CACC,GAAG,QACH,UAAW,gFACTiQ,EAAS,YAAY,EAAI,kBAAoB,mCAC/C,GAEA,SAAA,CAAAvV,EAAAA,IAACK,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BL,EAAAA,IAAC,OAAA,CAAK,UAAU,yCAAyC,SAAA,MAAA,CAAI,CAAA,CAAA,CAAA,EAG/DD,EAAAA,KAACuF,GAAA,CACC,GAAG,QACH,UAAW,gFACTiQ,EAAS,OAAO,EAAI,kBAAoB,mCAC1C,GAEA,SAAA,CAAAvV,EAAAA,IAAC+O,GAAA,CAAW,UAAU,SAAA,CAAU,EAChC/O,EAAAA,IAAC,OAAA,CAAK,UAAU,yCAAyC,SAAA,MAAA,CAAI,CAAA,CAAA,CAAA,EAG/DD,EAAAA,KAACuF,GAAA,CACC,GAAG,UACH,UAAW,gFACTiQ,EAAS,SAAS,EAAI,kBAAoB,mCAC5C,GAEA,SAAA,CAAAvV,EAAAA,IAACoV,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BpV,EAAAA,IAAC,OAAA,CAAK,UAAU,yCAAyC,SAAA,QAAA,CAAM,CAAA,CAAA,CAAA,EAGjED,EAAAA,KAACuF,GAAA,CACC,GAAG,UACH,UAAW,gFACTiQ,EAAS,SAAS,EAAI,kBAAoB,mCAC5C,GAEA,SAAA,CAAAvV,EAAAA,IAACqB,GAAA,CAAW,UAAU,SAAA,CAAU,EAChCrB,EAAAA,IAAC,OAAA,CAAK,UAAU,yCAAyC,SAAA,QAAA,CAAM,CAAA,CAAA,CAAA,EAIjED,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMsU,EAAkB,CAACD,CAAc,EAChD,UAAW,gFACTA,EAAiB,kBAAoB,mCACvC,GAEA,SAAA,CAAApU,EAAAA,IAACoW,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BpW,EAAAA,IAAC,OAAA,CAAK,UAAU,yCAAyC,SAAA,MAAA,CAAI,CAAA,CAAA,CAAA,CAC/D,CAAA,CACF,CAAA,CACF,EAGAA,EAAAA,IAAC,OAAA,CAAK,UAAU,4DACb,SAAAmD,CAAA,CACH,EAGAnD,EAAAA,IAACiJ,GAAA,CACC,KAAMmK,EACN,OAAQE,EACR,QAAS,IAAMC,EAAqB,EAAK,EACzC,UAAWuB,CAAA,CAAA,EAGb9U,EAAAA,IAACiK,GAAA,CACC,KAAMmJ,EACN,OAAQI,EACR,QAAS,IAAMC,EAAsB,EAAK,EAC1C,UAAWqB,CAAA,CAAA,EAGb9U,EAAAA,IAAC4K,GAAA,CACC,KAAMwI,EACN,OAAQM,EACR,QAAS,IAAMC,EAAsB,EAAK,EAC1C,UAAWmB,CAAA,CAAA,EAGb9U,EAAAA,IAACwL,GAAA,CACC,KAAM4H,EACN,OAAQQ,EACR,QAAS,IAAMC,EAAoB,EAAK,EACxC,UAAWiB,CAAA,CAAA,EAGb9U,EAAAA,IAACoN,GAAA,CACC,OAAQ0G,EACR,QAAS,IAAMC,EAAmB,EAAK,CAAA,CAAA,EAGzC/T,EAAAA,IAACyH,GAAA,CACC,OAAQ6M,EACR,QAAS,IAAMC,EAAqB,EAAK,CAAA,CAAA,EAG3CvU,EAAAA,IAACiP,GAAA,CACC,KAAMmE,EACN,OAAQoB,EACR,QAAS,IAAMC,EAAqB,EAAK,EACzC,WAAYK,CAAA,CAAA,EAGd9U,EAAAA,IAACwQ,GAAA,CACC,KAAM4C,EACN,OAAQsB,EACR,QAAS,IAAMC,EAAyB,EAAK,CAAA,CAAA,CAC/C,EACF,CAEJ,QC92BA,cAA2C0B,EAAAA,SAAwB,CAC1D,MAAe,CACpB,SAAU,EAAA,EAGZ,OAAc,yBAAyBzY,EAAqB,CAC1D,MAAO,CAAE,SAAU,GAAM,MAAAA,CAAA,CAC3B,CAEO,kBAAkBA,EAAcX,EAAsB,CAC3D,QAAQ,MAAM,+BAAgCW,CAAK,EACnD,QAAQ,MAAM,qBAAsBX,CAAS,EAC7C,QAAQ,MAAM,uBAAwBA,EAAU,cAAc,EAC9D,KAAK,SAAS,CAAE,MAAAW,EAAO,UAAAX,CAAA,CAAW,CAIpC,CAEQ,cAAgB,IAAM,CAC5B,OAAO,SAAS,OAAA,CAClB,EAEQ,aAAe,IAAM,CAC3B,OAAO,SAAS,KAAO,YACzB,EAEO,QAAS,CACd,OAAI,KAAK,MAAM,eAEV,MAAA,CAAI,UAAU,gEACb,SAAA8C,EAAAA,KAAC,MAAA,CAAI,UAAU,gEACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,kFACb,eAACC,GAAA,CAAc,UAAU,sBAAA,CAAuB,EAClD,QAEC,KAAA,CAAG,UAAU,wCAAwC,SAAA,6BAEtD,QAEC,IAAA,CAAE,UAAU,qBAAqB,SAAA,0FAElC,EAEAF,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,KAAK,cACd,UAAU,oJAEV,SAAA,CAAAC,EAAAA,IAACI,GAAA,CAAU,UAAU,UAAU,EAC/BJ,EAAAA,IAAC,QAAK,SAAA,YAAS,CAAA,CAAA,CAAA,EAGjBD,EAAAA,KAAC,SAAA,CACC,QAAS,KAAK,aACd,UAAU,mJAEV,SAAA,CAAAC,EAAAA,IAACK,GAAA,CAAK,UAAU,UAAU,EAC1BL,EAAAA,IAAC,QAAK,SAAA,UAAO,CAAA,CAAA,CAAA,CACf,EACF,EAEC,EAAA,CAyBC,CAEJ,CAAA,CACF,EAIG,KAAK,MAAM,QACpB,CACF,ECjGO,SAASsW,GACdC,EACAC,EAAwB,KACxBC,EAAY,GACW,CACvB,KAAM,CAACvZ,EAAMwZ,CAAO,EAAI3X,EAAAA,SAAmByX,CAAW,EAChD,CAAC7V,EAASC,CAAU,EAAI7B,EAAAA,SAAkB,EAAK,EAC/C,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAuB,IAAI,EAE/C4X,EAAU5E,EAAAA,YAAY,SAAwB,CAClD,GAAI,CACFnR,EAAW,EAAI,EACf2I,EAAS,IAAI,EACb,MAAMwH,EAAS,MAAMwF,EAAA,EACrB,OAAAG,EAAQ3F,CAAM,EACPA,CACT,OAASrR,EAAK,CACZ,MAAM9B,EAAQ8B,aAAe,MAAQA,EAAM,IAAI,MAAM,2BAA2B,EAChF,MAAA6J,EAAS3L,CAAK,EACRA,CACR,QAAA,CACEgD,EAAW,EAAK,CAClB,CACF,EAAG,CAAC2V,CAAa,CAAC,EAGlBlX,OAAAA,EAAAA,UAAU,IAAM,CACVoX,GACFE,EAAA,EAAU,MAAM,IAAM,CAAC,CAAC,CAE5B,EAAG,CAACA,EAASF,CAAS,CAAC,EAEhB,CAAE,KAAAvZ,EAAM,QAAAyD,EAAS,MAAA/C,EAAO,QAAA+Y,EAAS,QAAAD,CAAA,CAC1C,CC5BA,MAAME,GAAc,6OAEdC,GAAW,CACf,QAAS,oEACT,UAAW,iEACX,QAAS,4EACT,MAAO,uCACP,KAAM,gEACN,YAAa,0DACf,EAEMC,GAAQ,CACZ,GAAI,8BACJ,GAAI,sCACJ,GAAI,8BACN,EAEMC,GAAY,CAChB,GAAI,UACJ,GAAI,UACJ,GAAI,SACN,EAEMC,GAAkBC,EAAAA,WACtB,CAAC,CACC,UAAAjS,EAAY,GACZ,KAAA1C,EAAO,SACP,QAAA4U,EAAU,UACV,KAAAhS,EAAO,KACP,UAAAiS,EAAY,GACZ,YAAAC,EACA,SAAAC,EACA,UAAAC,EACA,SAAAnU,EACA,SAAAwC,EACA,QAAA4R,EAAU,GACV,GAAGC,CAAA,EACFC,IAAQ,CACT,GAAIF,GAAWG,iBAAevU,CAAQ,EACpC,OAAOwU,EAAAA,aAAaxU,EAA0B,CAC5C,IAAAsU,EACA,UAAW,GAAGb,EAAW,IAAIC,GAASK,CAAO,CAAC,IAAIJ,GAAM5R,CAAI,CAAC,IAAIF,CAAS,IAAK7B,EAA0B,MAAM,WAAa,EAAE,GAAG,KAAA,EACjI,SAAUwC,GAAYwR,EACtB,GAAGK,CAAA,CACJ,EAGH,MAAMhS,EAAU2R,GAAaC,IAAgB,OAAYA,EAAcjU,EAEjEyU,EAAgB,CACpBhB,GACAC,GAASK,CAAO,EAChBJ,GAAM5R,CAAI,EACVF,EACCmS,GAAaxR,EAAY,qBAAuB,gBAAA,EACjD,OAAO,OAAO,EAAE,KAAK,GAAG,EAE1B,OACE5F,EAAAA,KAAC,SAAA,CACC,IAAA0X,EACA,KAAAnV,EACA,UAAWsV,EACX,SAAUjS,GAAYwR,EACrB,GAAGK,EAEH,SAAA,CAAAL,SACEU,GAAA,CAAQ,UAAW,gBAAgBd,GAAU7R,CAAI,CAAC,QAAS,EAE7D,CAACiS,GAAaE,GAAYS,GAAM,aAAaT,EAAU,CACtD,UAAW,GAAGN,GAAU7R,CAAI,CAAC,SAASmS,EAAS,MAAM,WAAa,EAAE,GAAG,KAAA,CAAK,CAC7E,EACA7R,EACA,CAAC2R,GAAaG,GAAaQ,GAAM,aAAaR,EAAW,CACxD,UAAW,GAAGP,GAAU7R,CAAI,CAAC,SAASoS,EAAU,MAAM,WAAa,EAAE,GAAG,KAAA,CAAK,CAC9E,CAAA,CAAA,CAAA,CAGP,CACF,EAEAN,GAAgB,YAAc,SAEvB,MAAMe,GAASf,GCnGf,SAASgB,MAAMC,EAAmD,CACvE,OAAOA,EAAQ,OAAO,OAAO,EAAE,KAAK,GAAG,CACzC,CCWO,MAAMC,GAAc,CAAC,CAC1B,KAAAC,EACA,MAAAC,EACA,YAAAC,EACA,OAAAC,EACA,aAAAC,EAAe,cACf,eAAAC,EAAiB,gBACjB,UAAAxT,EAAY,EACd,IAEIjF,EAAAA,KAAC,MAAA,CACC,UAAWiY,GACT,4DACA,mEACAhT,CAAA,EAGF,SAAA,CAAAhF,MAAC,OAAI,UAAWgY,GAAG,4BAA6BO,CAAY,EACzD,SAAAJ,EACH,EACAnY,EAAAA,IAAC,KAAA,CAAG,UAAU,uCAAwC,SAAAoY,EAAM,EAC5DpY,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAsB,SAAAqY,EAAY,QAC9C,MAAA,CAAI,UAAWL,GAAG,wBAAyBQ,CAAc,EACvD,SAAAF,CAAA,CACH,CAAA,CAAA,CAAA,EAiBNJ,GAAY,YAAc,cC1CnB,SAASO,GAAS,CACvB,UAAAzT,EAAY,GACZ,MAAA0T,EAAQ,EACR,OAAAC,EACA,MAAAC,EACA,OAAAC,EAAS,GACT,QAAAC,EAAU,KACV,MAAAC,EACA,GAAGvB,CACL,EAAkB,CAChB,MAAMwB,EAAY,CAChB,KAAM,eACN,GAAI,aACJ,GAAI,UACJ,GAAI,aACJ,KAAM,cAAA,EAGFC,EAAY,MAAM,KAAK,CAAE,OAAQP,CAAA,CAAO,EAAE,IAAI,CAACQ,EAAG9b,IACtD4C,EAAAA,IAAC,MAAA,CAEC,UAAWgY,GACT,6CACAa,EAAS,eAAiBG,EAAUF,CAAO,EAC3C9T,CAAA,EAEF,MAAO,CACL,OAAQ2T,GAAU,UAClB,MAAOE,EAASF,GAAU,UAAYC,GAAS,OAC/C,GAAGG,CAAA,EAEJ,GAAGvB,CAAA,EAXCpa,CAAA,CAaR,EAED,yBAAU,SAAA6b,CAAA,CAAU,CACtB,CCEA,MAAME,GAAa,UAEjB,MAAM,IAAI,QAAQC,GAAW,WAAWA,EAAS,GAAI,CAAC,EAE/C,CACL,QAAS,IAAM,KAAK,MAAM,KAAK,OAAA,EAAW,EAAE,EAC5C,OAAQ,GAAM,KAAK,OAAA,EAAW,GAC9B,SAAU,GAAK,KAAK,MAAM,KAAK,OAAA,EAAW,EAAE,EAC5C,gBAAiB,GAAK,KAAK,MAAM,KAAK,OAAA,EAAW,EAAE,EACnD,aAAc,MAAS,KAAK,MAAM,KAAK,OAAA,EAAW,GAAK,CAAA,GAIrDC,GAAgB,UAEpB,MAAM,IAAI,QAAQD,GAAW,WAAWA,EAAS,GAAG,CAAC,EAE9C,CACL,CACE,GAAI,QACJ,KAAMpZ,EAAAA,IAACoB,GAAA,CAAI,UAAU,uBAAA,CAAwB,EAC7C,MAAO,iBACP,YAAa,mCACb,OAAQ,UACR,aAAc,cACd,eAAgB,eAAA,EAElB,CACE,GAAI,SACJ,KAAMpB,EAAAA,IAACqB,GAAA,CAAW,UAAU,wBAAA,CAAyB,EACrD,MAAO,oBACP,YAAa,8BACb,OAAQ,YACR,aAAc,eACd,eAAgB,gBAAA,EAElB,CACE,GAAI,cACJ,KAAMrB,EAAAA,IAACsZ,GAAA,CAAO,UAAU,yBAAA,CAA0B,EAClD,MAAO,qBACP,YAAa,8BACb,OAAQ,eACR,aAAc,gBACd,eAAgB,iBAAA,EAElB,CACE,GAAI,SACJ,KAAMtZ,EAAAA,IAACgP,GAAA,CAAM,UAAU,yBAAA,CAA0B,EACjD,MAAO,qBACP,YAAa,+BACb,OAAQ,oBACR,aAAc,gBACd,eAAgB,iBAAA,CAClB,GA0BEuK,GAAa,CAAC,CAAE,MAAA3b,EAAO,QAAA4b,CAAA,IAC3BxZ,EAAAA,IAAC,MAAA,CAAI,UAAU,0DACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,gBACb,SAAAA,EAAAA,IAACC,IAAc,UAAU,uBAAuB,cAAY,MAAA,CAAO,CAAA,CACrE,EACAF,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAA,EAAAA,KAAC,IAAA,CAAE,UAAU,uBAAuB,SAAA,CAAA,wBACZnC,EAAM,OAAA,EAC9B,EACAoC,EAAAA,IAAC,MAAA,CAAI,UAAU,OACb,SAAAA,EAAAA,IAAC+X,GAAA,CACC,QAAQ,UACR,KAAK,KACL,SAAU/X,EAAAA,IAACI,GAAA,CAAU,UAAU,SAAA,CAAU,EACzC,QAASoZ,EACT,UAAU,UACX,SAAA,WAAA,CAAA,CAED,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAGF,SAAwBnZ,IAAO,CAC7B,KAAM,CAAE,KAAA+C,EAAM,UAAAqW,EAAW,OAAAtG,CAAA,EAAW1O,GAAA,EAC9B/F,EAAWC,GAAA,EACX,CAAC+a,EAAaC,CAAc,EAAI5a,WAAoB,CACxD,QAAS,EACT,OAAQ,EACR,SAAU,EACV,gBAAiB,EACjB,aAAc,CAAA,CACf,EAGK,CACJ,KAAM6a,EAGN,QAASC,CAAA,EACPvD,GAAa6C,GAAY,KAAM,EAAI,EAGjC,CACJ,KAAMW,EACN,QAASC,EACT,MAAOC,EACP,QAASC,CAAA,EACP3D,GAAa+C,GAAe,KAAM,EAAI,EAG1Cha,EAAAA,UAAU,IAAM,CACVua,GACFD,EAAeC,CAAK,CAExB,EAAG,CAACA,CAAK,CAAC,EAEVva,EAAAA,UAAU,IAAM,CACd,GAAI,CAACua,EAAO,OAEZ,MAAMM,EAAW,YAAY,IAAM,CACjCL,IAAe,MAAM,QAAQ,KAAK,CACpC,EAAG,GAAK,EAER,MAAO,IAAM,cAAcK,CAAQ,CACrC,EAAG,CAACN,EAAOC,CAAY,CAAC,EAGxB,MAAM3V,EAAkB6N,cAAY,MAAOzP,GAAgD,CACzF,GAAI,CACF,MAAMmX,EAAUnX,CAAI,EAAA,CACtB,OAAS1E,EAAO,CACd,QAAQ,MAAM,qBAAsBA,CAAK,CAE3C,CACF,EAAG,CAAC6b,CAAS,CAAC,EAEd,OACE1Z,EAAAA,KAAC,MAAA,CAAI,UAAU,wBAEb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,oFACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,yCACb,SAAAD,OAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,oBACb,SAAAA,EAAAA,IAAC,MAAA,CACC,IAAI,4FACJ,IAAI,YACJ,UAAU,iDAAA,CAAA,EAEd,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,MAAC,IAAA,CAAE,KAAK,YAAY,UAAU,kEAAkE,SAAA,WAAQ,QACvG,IAAA,CAAE,KAAK,gBAAgB,UAAU,kEAAkE,SAAA,eAAY,QAC/G,IAAA,CAAE,KAAK,mBAAmB,UAAU,kEAAkE,SAAA,iBAAA,CAAe,CAAA,EACxH,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,8BACZ,SAAAoD,EAECrD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC+X,GAAA,CACC,QAAS,IAAMrZ,EAAS,YAAY,EACpC,QAAQ,UACR,KAAK,KACL,UAAWsB,EAAAA,IAAC+J,GAAA,CAAW,UAAU,SAAA,CAAU,EAC5C,SAAA,iBAAA,CAAA,EAID/J,EAAAA,IAAC+X,GAAA,CACC,QAAS,IAAM5E,EAAA,EACf,QAAQ,QACR,KAAK,KACL,UAAU,kDACV,MAAM,mCACP,SAAA,WAAA,CAAA,CAED,CAAA,CACF,EAGApT,OAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC+X,GAAA,CACC,QAAS,IAAMrZ,EAAS,OAAO,EAC/B,QAAQ,QACR,KAAK,KACN,SAAA,SAAA,CAAA,EAGDsB,EAAAA,IAAC+X,GAAA,CACC,QAAS,IAAMrZ,EAAS,OAAO,EAC/B,QAAQ,UACR,KAAK,KACL,UAAWsB,EAAAA,IAAC+J,GAAA,CAAW,UAAU,SAAA,CAAU,EAC5C,SAAA,eAAA,CAAA,CAED,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,EACF,EACF,EAEC,CAAC3G,GACApD,EAAAA,IAAC,MAAA,CAAI,UAAU,2EACb,SAAAA,MAAC,MAAA,CAAI,UAAU,yCACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,4FACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAoC,SAAA,cAAW,EAC/DD,EAAAA,KAAC,MAAA,CAAI,UAAU,sCACb,SAAA,CAAAC,EAAAA,IAAC+X,GAAA,CACC,QAAS,IAAM7T,EAAgB,SAAS,EACxC,QAAQ,UACR,KAAK,KACL,UAAU,6DACV,UAAWuV,EAAU,UAAY,UACjC,YAAY,aACb,SAAA,cAAA,CAAA,EAGDzZ,EAAAA,IAAC+X,GAAA,CACC,QAAS,IAAM7T,EAAgB,UAAU,EACzC,QAAQ,UACR,KAAK,KACL,UAAU,qEACV,UAAWuV,EAAU,UAAY,WACjC,YAAY,aACb,SAAA,eAAA,CAAA,EAGDzZ,EAAAA,IAAC+X,GAAA,CACC,QAAS,IAAM7T,EAAgB,YAAY,EAC3C,QAAQ,UACR,KAAK,KACL,UAAU,qEACV,UAAWuV,EAAU,UAAY,aACjC,YAAY,aACb,SAAA,iBAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CACF,EACF,EACF,EAEF1Z,EAAAA,KAAC,UAAA,CAAQ,UAAU,oGAEjB,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,mBAAmB,MAAO,CACvC,gBAAiB,qQACjB,QAAS,EAAA,EACR,QAEF,MAAA,CAAI,UAAU,kDACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,gCAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uHACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,qDAAA,CAAsD,QACpE,OAAA,CAAK,UAAU,YAAa,SAAA0Z,EAAY,QAAQ,iBAAiB,EAAO,yBAAA,EAC3E,EAGA3Z,EAAAA,KAAC,KAAA,CAAG,UAAU,8EAA8E,SAAA,CAAA,iCAE1FC,EAAAA,IAAC,OAAA,CAAK,UAAU,mFAAmF,SAAA,cAAA,CAEnG,CAAA,EACF,EAEAD,EAAAA,KAAC,IAAA,CAAE,UAAU,2EAA2E,SAAA,CAAA,2DAEtFC,EAAAA,IAAC,OAAA,CAAK,UAAU,8BAA8B,SAAA,yBAAA,CAAuB,CAAA,EACvE,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wEACb,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,6BAAA,CAA8B,EACrDF,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,qBAAA,CAAmB,CAAA,EACnD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wEACb,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,6BAAA,CAA8B,EACrDF,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,wBAAA,CAAsB,CAAA,EACtD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wEACb,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,6BAAA,CAA8B,EACrDF,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,WAAA,CAAS,CAAA,CAAA,CACzC,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,sDACZ,SAAA,CAAAqD,EAECpD,EAAAA,IAAC+X,GAAA,CACC,QAAS,IAAMrZ,EAAS,YAAY,EACpC,QAAQ,UACR,KAAK,KACL,UAAWsB,EAAAA,IAAC+J,GAAA,CAAW,UAAU,wDAAA,CAAyD,EAC1F,UAAU,QACX,SAAA,iBAAA,CAAA,EAKD/J,EAAAA,IAAC+X,GAAA,CACC,QAAS,IAAMrZ,EAAS,OAAO,EAC/B,QAAQ,UACR,KAAK,KACL,UAAWsB,EAAAA,IAAC+J,GAAA,CAAW,UAAU,wDAAA,CAAyD,EAC1F,UAAU,QACX,SAAA,qBAAA,CAAA,EAIH/J,EAAAA,IAAC+X,GAAA,CACC,QAAQ,UACR,KAAK,KACL,SAAU/X,EAAAA,IAACma,GAAA,CAAK,UAAU,SAAA,CAAU,EACrC,SAAA,kBAAA,CAAA,CAED,EACF,EAGApa,EAAAA,KAAC,MAAA,CAAI,UAAU,iGACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,6BAA6B,SAAA,4BAAyB,EACrED,EAAAA,KAAC,MAAA,CAAI,UAAU,oCAAoC,SAAA,CAAA,IAAE2Z,EAAY,OAAO,QAAQ,CAAC,EAAE,GAAA,EAAC,EACpF3Z,EAAAA,KAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,CAAA,4BAA0B2Z,EAAY,QAAA,CAAA,CAAS,CAAA,CAAA,CACxF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGA1Z,EAAAA,IAAC,UAAA,CAAQ,UAAU,2EACjB,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,yCACb,SAAAD,OAAC,MAAA,CAAI,UAAU,8FACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oDAAoD,SAAA,sBAElE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,+FAE1C,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,sCAAA,CAAuC,EAC9DF,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,iCAAA,CAA+B,CAAA,EACjE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,sCAAA,CAAuC,EAC9DF,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,4BAAA,CAA0B,CAAA,EAC5D,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,sCAAA,CAAuC,EAC9DF,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,kCAAA,CAAgC,CAAA,CAAA,CAClE,CAAA,EACF,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CACb,QAAQ,IAAI,2BAA2B,EAErCtB,EADE0E,EACO,yBAEA,OAFwB,CAIrC,EACA,UAAU,yLAET,WAAO,oBAAsB,mBAAA,CAAA,CAChC,EACF,QACC,MAAA,CAAI,UAAU,WACb,SAAArD,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,4BAAyB,EAClFD,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,wCAAwC,SAAA,OAAI,EAC3DA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,kBAAA,CAAgB,CAAA,EACzD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,0CAA0C,SAAA,MAAG,EAC5DA,EAAAA,IAAC,MAAA,CAAI,UAAU,0BAA0B,SAAA,iBAAA,CAAe,CAAA,EAC1D,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,yCAAyC,SAAA,MAAG,EAC3DA,EAAAA,IAAC,MAAA,CAAI,UAAU,yBAAyB,SAAA,gBAAA,CAAc,CAAA,EACxD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,0CAA0C,SAAA,OAAI,EAC7DA,EAAAA,IAAC,MAAA,CAAI,UAAU,0BAA0B,SAAA,iBAAA,CAAe,CAAA,CAAA,CAC1D,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,EACF,EACF,QAGC,UAAA,CAAQ,UAAU,0CACjB,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,yCAAyC,SAAA,uCAAoC,EAC1FA,EAAAA,IAAC,MAAA,CAAI,UAAU,qDACZ,SAAA,CACC,CAAE,KAAM,YAAa,KAAM,KAAM,MAAO,8BAA+B,IAAK,uBAAA,EAC5E,CAAE,KAAM,SAAU,KAAM,KAAM,MAAO,4BAA6B,IAAK,oBAAA,EACvE,CAAE,KAAM,UAAW,KAAM,KAAM,MAAO,0BAA2B,IAAK,qBAAA,EACtE,CAAE,KAAM,UAAW,KAAM,KAAM,MAAO,4BAA6B,IAAK,qBAAA,EACxE,CAAE,KAAM,WAAY,KAAM,KAAM,MAAO,4BAA6B,IAAK,sBAAA,EACzE,CAAE,KAAM,WAAY,KAAM,KAAM,MAAO,4BAA6B,IAAK,sBAAA,CAAuB,EAChG,IAAKoa,GACLra,EAAAA,KAAC,IAAA,CAEC,KAAMqa,EAAS,IACf,OAAO,SACP,IAAI,sBACJ,UAAU,gEAEV,SAAA,CAAApa,EAAAA,IAAC,OAAI,UAAW,qBAAqBoa,EAAS,KAAK,2IAChD,WAAS,IAAA,CACZ,EACApa,EAAAA,IAAC,IAAA,CAAE,UAAU,oEAAqE,WAAS,IAAA,CAAK,CAAA,CAAA,EAT3Foa,EAAS,IAAA,CAWjB,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CACF,EAGApa,EAAAA,IAAC,WAAQ,GAAG,WAAW,UAAU,mBAC/B,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oDAAoD,SAAA,oBAElE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,0CAA0C,SAAA,sEAAA,CAEvD,CAAA,EACF,EAEC+Z,EACC/Z,EAAAA,IAAC,MAAA,CAAI,UAAU,2CACZ,UAAC,EAAG,EAAG,EAAG,CAAC,EAAE,IAAK5C,GACjB2C,EAAAA,KAAC,MAAA,CAAY,UAAU,4DACrB,SAAA,CAAAC,EAAAA,IAACyY,GAAA,CAAS,UAAU,2BAAA,CAA4B,EAChDzY,EAAAA,IAACyY,GAAA,CAAS,UAAU,gBAAA,CAAiB,EACrCzY,EAAAA,IAACyY,GAAA,CAAS,UAAU,iBAAA,CAAkB,EACtCzY,EAAAA,IAACyY,GAAA,CAAS,UAAU,WAAA,CAAY,CAAA,CAAA,EAJxBrb,CAKV,CACD,CAAA,CACH,EACE4c,EACFha,MAACuZ,GAAA,CAAW,MAAOS,EAAe,QAASC,EAAiB,EAC1DH,QACD,MAAA,CAAI,UAAU,2CACZ,SAAAA,EAAS,IAAKO,GACbra,EAAAA,IAACkY,GAAA,CAEC,KAAMmC,EAAQ,KACd,MAAOA,EAAQ,MACf,YAAaA,EAAQ,YACrB,OAAQA,EAAQ,OAChB,aAAcA,EAAQ,aACtB,eAAgBA,EAAQ,cAAA,EANnBA,EAAQ,EAAA,CAQhB,EACH,EACE,IAAA,CAAA,CACN,CAAA,CACF,EAGAra,EAAAA,IAAC,WAAQ,GAAG,eAAe,UAAU,iBACnC,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oDAAoD,SAAA,2BAElE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,2BAAA,CAAyB,CAAA,EAChE,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,+CACZ,SAAA,CACC,CACE,KAAM,IACN,MAAO,eACP,YAAa,yCACb,WAAY,4CAAA,EAEd,CACE,KAAM,IACN,MAAO,mBACP,YAAa,6CACb,WAAY,gDAAA,EAEd,CACE,KAAM,IACN,MAAO,WACP,YAAa,8CACb,WAAY,8CAAA,CACd,EACA,IAAI,CAAC6K,EAAMnJ,IACX3B,EAAAA,KAAC,MAAA,CAAgB,UAAU,cACzB,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAW,GAAG6K,EAAK,UAAU,gHAC/B,WAAK,IAAA,CACR,EACA7K,EAAAA,IAAC,KAAA,CAAG,UAAU,uCAAwC,WAAK,MAAM,EACjEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAiB,WAAK,WAAA,CAAY,CAAA,CAAA,EALvC0B,CAMV,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CACF,EAGA3B,EAAAA,KAAC,UAAA,CAAQ,UAAU,wGACjB,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,sCAAA,CAAuC,EACtDD,EAAAA,KAAC,MAAA,CAAI,UAAU,mEACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2BAA2B,SAAA,mCAAgC,EAEzED,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8CACb,SAAA,CAAAC,MAAC,OAAI,UAAU,0CAA2C,SAAA0Z,EAAY,QAAQ,iBAAiB,EAC/F1Z,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,gBAAA,CAAc,CAAA,EAC/C,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCAAyC,SAAA,CAAA,IAAE2Z,EAAY,OAAO,QAAQ,CAAC,EAAE,GAAA,EAAC,EACzF1Z,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,iBAAA,CAAe,CAAA,EAChD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8CACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,wCAAwC,SAAA,OAAI,EAC3DA,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,mBAAA,CAAiB,CAAA,EAClD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0CAA0C,SAAA,CAAA,IAAE2Z,EAAY,QAAA,EAAS,EAChF1Z,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,yBAAA,CAAuB,CAAA,CAAA,CACxD,CAAA,EACF,QAEC,MAAA,CAAI,UAAU,iFACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACsa,GAAA,CAAS,UAAU,uBAAA,CAAwB,EAC5Cta,EAAAA,IAAC,OAAA,CAAK,UAAU,oBAAoB,SAAA,6CAAA,CAA2C,CAAA,CAAA,CACjF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGAA,EAAAA,IAAC,WAAQ,GAAG,kBAAkB,UAAU,mBACtC,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oDAAoD,SAAA,4BAElE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,oCAAA,CAAkC,CAAA,EACzE,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,4BACZ,SAAA,CACC,CACE,KAAM,aACN,KAAM,gBACN,SAAU,OACV,UAAW,cACX,MAAO,4EAAA,EAET,CACE,KAAM,iBACN,KAAM,cACN,SAAU,OACV,UAAW,WACX,MAAO,kEAAA,EAET,CACE,KAAM,mBACN,KAAM,sBACN,SAAU,cACV,UAAW,UACX,MAAO,+EAAA,CACT,EACA,IAAI,CAACua,EAAO7Y,IACZ3B,EAAAA,KAAC,MAAA,CAAgB,UAAU,4DACzB,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,2EAAA,CAA4E,SAC1F,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,0BAA2B,SAAAua,EAAM,KAAK,EACpDva,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,WAAM,IAAA,CAAK,CAAA,CAAA,CACnD,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0DACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,mCAAoC,SAAAua,EAAM,SAAS,EAClExa,EAAAA,KAAC,MAAA,CAAI,UAAU,yBAAyB,SAAA,CAAA,MAAIwa,EAAM,SAAA,CAAA,CAAU,CAAA,EAC9D,EAEAxa,EAAAA,KAAC,IAAA,CAAE,UAAU,uBAAuB,SAAA,CAAA,IAAEwa,EAAM,MAAM,GAAA,EAAC,EAEnDva,MAAC,OAAI,UAAU,yCACZ,UAAC,GAAG,MAAM,CAAC,CAAC,EAAE,IAAI,CAACkZ,EAAG9b,IACrB4C,EAAAA,IAACsB,EAAA,CAAa,UAAU,sBAAA,EAAblE,CAAoC,CAChD,CAAA,CACH,CAAA,CAAA,EApBQsE,CAqBV,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CACF,QAGC,UAAA,CAAQ,UAAU,+BACjB,SAAA3B,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,oCAEpD,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,0DAE1C,EAEAD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACb,QAAQ,IAAI,mBAAmB,EAE7BrB,EADE0E,EACO,aAEA,OAFY,CAIzB,EACA,UAAU,6PAET,SAAA,CAAAA,EAAO,kBAAoB,sBAC5BpD,EAAAA,IAACwa,GAAA,CAAa,UAAU,cAAA,CAAe,CAAA,CAAA,CAAA,EAGzCza,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,8CACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,cAAA,CAAe,EAAE,oBAAA,CAAA,CAE1C,CAAA,CACF,QACC,MAAA,CAAI,UAAU,8CACb,SAAAH,EAAAA,KAAC,MAAA,CAAI,UAAU,6DACb,SAAA,CAAAC,EAAAA,IAACqB,GAAA,CAAW,UAAU,cAAA,CAAe,EAAE,kBAAA,CAAA,CAEzC,CAAA,CACF,QACC,MAAA,CAAI,UAAU,8CACb,SAAAtB,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC0K,GAAA,CAAO,UAAU,cAAA,CAAe,EAAE,kBAAA,CAAA,CAErC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAGC,SAAA,CAAO,UAAU,4CAChB,SAAA3K,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,IAAI,4FACJ,IAAI,YACJ,UAAU,iBAAA,CAAA,EAEZA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,sCAAA,CAErC,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uCACb,SAAA,CAAAC,MAAC,IAAA,CAAE,KAAK,IAAI,UAAU,wCAAwC,SAAA,UAAO,QACpE,IAAA,CAAE,KAAK,IAAI,UAAU,wCAAwC,SAAA,QAAK,QAClE,IAAA,CAAE,KAAK,IAAI,UAAU,wCAAwC,SAAA,SAAA,CAAO,CAAA,CAAA,CACvE,CAAA,EACF,QACC,MAAA,CAAI,UAAU,uEACb,SAAAA,EAAAA,IAAC,IAAA,CAAE,kDAA2C,CAAA,CAChD,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAEJ,CC/uBA,SAAwBya,IAAW,CACjC,KAAM,CAAE,OAAA5W,EAAQ,OAAAG,EAAQ,gBAAAC,EAAiB,UAAAwV,EAAW,UAAAnW,CAAA,EAAcmB,GAAA,EAC5D/F,EAAWC,GAAA,EACX,CAAC+b,EAAUC,CAAW,EAAI5b,EAAAA,SAAS,EAAK,EACxC,CAAC6b,EAAcC,CAAe,EAAI9b,EAAAA,SAAS,EAAK,EAChD,CAAC+b,EAAUC,CAAW,EAAIhc,WAAS,CACvC,MAAO,GACP,SAAU,GACV,SAAU,GACV,aAAc,EAAA,CACf,EACK,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAS,EAAE,EAE/Bic,EAAe,MAAOxd,GAAuB,CAIjD,GAHAA,EAAE,eAAA,EACF+L,EAAS,EAAE,EAEPmR,EAAU,CACZ,GAAI,CAACI,EAAS,OAAS,CAACA,EAAS,UAAY,CAACA,EAAS,SAAU,CAC/DvR,EAAS,oCAAoC,EAC7C,MACF,CACA,MAAMwH,EAAS,MAAM/M,EAAO8W,EAAS,MAAOA,EAAS,QAAQ,EACzD/J,EAAO,MACTxH,EAASwH,EAAO,KAAK,EAGrBrS,EAAS,YAAY,CAEzB,KAAO,CACL,GAAI,CAACoc,EAAS,OAAS,CAACA,EAAS,SAAU,CACzCvR,EAAS,iCAAiC,EAC1C,MACF,CACA,MAAMwH,EAAS,MAAMlN,EAAOiX,EAAS,MAAOA,EAAS,QAAQ,EACzD/J,EAAO,MACTxH,EAASwH,EAAO,KAAK,EAGrBrS,EAAS,YAAY,CAEzB,CACF,EAEMwF,EAAkB,MAAO5B,GAAgD,CAC7EiH,EAAS,EAAE,EACX,MAAMwH,EAAS,MAAM0I,EAAUnX,CAAI,EAAA,EAC/ByO,EAAO,MACTxH,EAASwH,EAAO,KAAK,EAGrBrS,EAAS,YAAY,CAEzB,EAEMuc,EAAmB,SAAY,CACnC1R,EAAS,EAAE,EACX,MAAMwH,EAAS,MAAM9M,EAAgB,QAAQ,EACzC8M,GAAQ,OACVxH,EAASwH,EAAO,KAAK,CAEzB,EAEA,aACG,MAAA,CAAI,UAAU,qIACb,SAAAhR,EAAAA,KAAC,MAAA,CAAI,UAAU,4BAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,IAAI,4FACJ,IAAI,YACJ,UAAU,0BAAA,CAAA,QAEX,KAAA,CAAG,UAAU,mCACX,SAAA0a,EAAW,iBAAmB,eACjC,QACC,IAAA,CAAE,UAAU,qBACV,SAAAA,EACG,kDACA,6CAAA,CAEN,CAAA,EACF,EAGA3a,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,oBAAiB,EAC9ED,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMkE,EAAgB,SAAS,EACxC,SAAUZ,EACV,UAAU,kQAEV,SAAAvD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,oEACb,eAACoF,GAAA,CAAK,UAAU,wBAAwB,CAAA,CAC1C,EACArF,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,cAAc,SAAA,eAAY,EACzCA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,kBAAA,CAAgB,CAAA,CAAA,CACzD,CAAA,CAAA,CACF,CAAA,CAAA,EAGFA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMkE,EAAgB,UAAU,EACzC,SAAUZ,EACV,UAAU,sQAEV,SAAAvD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,sEACb,eAACoF,GAAA,CAAK,UAAU,0BAA0B,CAAA,CAC5C,EACArF,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,cAAc,SAAA,gBAAa,EAC1CA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,mBAAA,CAAiB,CAAA,CAAA,CAC1D,CAAA,CAAA,CACF,CAAA,CAAA,EAGFA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMkE,EAAgB,YAAY,EAC3C,SAAUZ,EACV,UAAU,sQAEV,SAAAvD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,sEACb,eAACoF,GAAA,CAAK,UAAU,0BAA0B,CAAA,CAC5C,EACArF,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,cAAc,SAAA,kBAAe,EAC5CA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,qBAAA,CAAmB,CAAA,CAAA,CAC5D,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,qCACb,eAAC,MAAA,CAAI,UAAU,kCAAkC,CAAA,CACnD,EACAA,EAAAA,IAAC,OAAI,UAAU,uCACb,eAAC,OAAA,CAAK,UAAU,+EAA+E,SAAA,kBAAA,CAE/F,CAAA,CACF,CAAA,EACF,EAGAD,EAAAA,KAAC,SAAA,CACC,QAASkb,EACT,SAAU3X,EACV,UAAU,4QAEV,SAAA,CAAAtD,EAAAA,IAACkb,GAAA,CAAO,UAAU,2BAAA,CAA4B,EAAE,sBAAA,CAAA,CAAA,EAKlDnb,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,qCACb,eAAC,MAAA,CAAI,UAAU,kCAAkC,CAAA,CACnD,EACAA,EAAAA,IAAC,OAAI,UAAU,uCACb,eAAC,OAAA,CAAK,UAAU,+EAA+E,SAAA,cAAA,CAE/F,CAAA,CACF,CAAA,EACF,EAGAD,EAAAA,KAAC,OAAA,CAAK,UAAU,YAAY,SAAUib,EACnC,SAAA,CAAApd,GACCoC,EAAAA,IAAC,MAAA,CAAI,UAAU,4EACZ,SAAApC,EACH,SAGD,MAAA,CACC,SAAA,CAAAoC,MAAC,QAAA,CAAM,QAAQ,QAAQ,UAAU,+CAA+C,SAAA,gBAEhF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAACmb,GAAA,CAAK,UAAU,0EAAA,CAA2E,EAC3Fnb,EAAAA,IAAC,QAAA,CACC,GAAG,QACH,KAAK,QACL,KAAK,QACL,SAAQ,GACR,MAAO8a,EAAS,MAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,MAAOtd,EAAE,OAAO,MAAO,EACnE,UAAU,oIACV,YAAY,kBAAA,CAAA,CACd,CAAA,CACF,CAAA,EACF,EAECkd,GACC3a,EAAAA,KAAAiK,WAAA,CACE,SAAA,CAAAjK,OAAC,MAAA,CACC,SAAA,CAAAC,MAAC,QAAA,CAAM,QAAQ,WAAW,UAAU,+CAA+C,SAAA,WAEnF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAACoF,GAAA,CAAK,UAAU,0EAAA,CAA2E,EAC3FpF,EAAAA,IAAC,QAAA,CACC,GAAG,WACH,KAAK,WACL,KAAK,OACL,SAAQ,GACR,MAAO8a,EAAS,SAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,SAAUtd,EAAE,OAAO,MAAO,EACtE,UAAU,oIACV,YAAY,mBAAA,CAAA,CACd,CAAA,CACF,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAwC,MAAC,QAAA,CAAM,QAAQ,eAAe,UAAU,+CAA+C,SAAA,0BAEvF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAACoF,GAAA,CAAK,UAAU,0EAAA,CAA2E,EAC3FpF,EAAAA,IAAC,QAAA,CACC,GAAG,eACH,KAAK,eACL,KAAK,OACL,MAAO8a,EAAS,aAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,aAActd,EAAE,OAAO,MAAO,EAC1E,UAAU,oIACV,YAAY,mBAAA,CAAA,CACd,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,SAGD,MAAA,CACC,SAAA,CAAAwC,MAAC,QAAA,CAAM,QAAQ,WAAW,UAAU,+CAA+C,SAAA,WAEnF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAAC0R,GAAA,CAAK,UAAU,0EAAA,CAA2E,EAC3F1R,EAAAA,IAAC,QAAA,CACC,GAAG,WACH,KAAK,WACL,KAAM4a,EAAe,OAAS,WAC9B,SAAQ,GACR,MAAOE,EAAS,SAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,SAAUtd,EAAE,OAAO,MAAO,EACtE,UAAU,qIACV,YAAakd,EAAW,oBAAsB,qBAAA,CAAA,EAEhD1a,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAM6a,EAAgB,CAACD,CAAY,EAC5C,UAAU,wFAET,SAAAA,QAAgBQ,GAAA,CAAO,UAAU,UAAU,EAAKpb,EAAAA,IAACqb,GAAA,CAAI,UAAU,SAAA,CAAU,CAAA,CAAA,CAC5E,CAAA,CACF,CAAA,EACF,EAEArb,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,SAAUsD,EACV,UAAU,2WAET,SAAAA,EACCvD,OAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,8EAAA,CAA+E,EAC9FA,EAAAA,IAAC,OAAA,CAAM,SAAA0a,EAAW,sBAAwB,eAAA,CAAgB,CAAA,CAAA,CAC5D,EAEA3a,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAM,SAAA0a,EAAW,iBAAmB,UAAU,EAC/C1a,EAAAA,IAAC+J,GAAA,CAAW,UAAU,SAAA,CAAU,CAAA,CAAA,CAClC,CAAA,CAAA,CAEJ,EACF,QAGC,MAAA,CAAI,UAAU,cACb,SAAAhK,EAAAA,KAAC,IAAA,CAAE,UAAU,wBACV,SAAA,CAAA2a,EAAW,2BAA6B,yBACzC1a,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAM,CACb2a,EAAY,CAACD,CAAQ,EACrBnR,EAAS,EAAE,EACXwR,EAAY,CAAE,MAAO,GAAI,SAAU,GAAI,SAAU,GAAI,aAAc,GAAI,CACzE,EACA,UAAU,uEAET,WAAW,kBAAoB,iBAAA,CAAA,CAClC,CAAA,CACF,CAAA,CACF,EAGA/a,EAAAA,IAAC,MAAA,CAAI,UAAU,cACb,SAAAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMtB,EAAS,GAAG,EAC3B,UAAU,8DACX,SAAA,gBAAA,CAAA,CAED,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CC5TA,SAAwB4c,IAAe,CACrC,MAAM5c,EAAWC,GAAA,EACX,CAACH,CAAY,EAAIC,GAAA,EACjB,CAAC8c,EAAQC,CAAS,EAAIzc,EAAAA,SAA0C,SAAS,EACzE,CAACf,EAAcyd,CAAe,EAAI1c,EAAAA,SAAS,EAAE,EAwCnD,OAtCAM,EAAAA,UAAU,IAAM,EACc,SAAY,CACtC,MAAMlB,EAAOK,EAAa,IAAI,MAAM,EAC9BZ,EAAQY,EAAa,IAAI,OAAO,EAChCkd,EAAmBld,EAAa,IAAI,mBAAmB,EAE7D,GAAIZ,EAAO,CACT,QAAQ,MAAM,eAAgBA,EAAO8d,CAAgB,EACrDF,EAAU,OAAO,EACjBC,EAAgBC,GAAoB9d,CAAK,EACzC,MACF,CAEA,GAAIO,EACF,GAAI,CAGFqd,EAAU,SAAS,EAGnB,WAAW,IAAM,CACf9c,EAAS,aAAc,CAAE,QAAS,EAAA,CAAM,CAC1C,EAAG,IAAI,CAET,OAASd,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,EAC5C4d,EAAU,OAAO,EACjBC,EAAgB,mCAAmC,CACrD,MAGA/c,EAAS,OAAO,CAEpB,GAEA,CACF,EAAG,CAACF,EAAcE,CAAQ,CAAC,EAEvB6c,IAAW,gBAEV,MAAA,CAAI,UAAU,0GACb,SAAAxb,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,gGAAA,CAAiG,EAChHA,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,wBAAqB,EAC9EA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,sDAAA,CAAoD,CAAA,CAAA,CACnF,CAAA,CACF,EAIAub,IAAW,cAEV,MAAA,CAAI,UAAU,2GACb,SAAAxb,EAAAA,KAAC,MAAA,CAAI,UAAU,2CACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,OACb,eAAC2b,GAAA,CAAQ,UAAU,iCAAiC,CAAA,CACtD,EACA3b,EAAAA,IAAC,KAAA,CAAG,UAAU,4CAA4C,SAAA,wBAAqB,EAC/EA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBACV,YAAgB,gEACnB,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMtB,EAAS,OAAO,EAC/B,UAAU,mGACX,SAAA,WAAA,CAAA,EAIDsB,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMtB,EAAS,IAAK,CAAE,QAAS,GAAM,EAC9C,UAAU,wGACX,SAAA,wBAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAKD,MAAA,CAAI,UAAU,iHACb,SAAAqB,EAAAA,KAAC,MAAA,CAAI,UAAU,2CACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,OACb,eAACE,GAAA,CAAY,UAAU,mCAAmC,CAAA,CAC5D,EACAF,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,6BAA0B,EACtEA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,iEAElC,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMtB,EAAS,aAAc,CAAE,QAAS,GAAM,EACvD,UAAU,uGACX,SAAA,iBAAA,CAAA,EAIDsB,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMtB,EAAS,IAAK,CAAE,QAAS,GAAM,EAC9C,UAAU,qGACX,SAAA,wBAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CC7GA,SAAwBkd,GAAe,CAAE,QAAApW,EAAS,OAAAqW,EAAQ,OAAAnU,EAAQ,QAAAC,EAAS,WAAAuH,GAAmC,CAC5G,KAAM,CAAC4M,EAAaC,CAAc,EAAIhd,EAAAA,SAAS,CAAC,EAC1C,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EAE5C,GAAI,CAAC2I,EAAQ,OAAO,KAEpB,MAAMsU,EAAYF,EAActW,EAAQ,YAClCmE,EAAYkS,GAAUA,EAAO,SAAWG,EACxCC,EAAY,KAAK,IACrBzW,EAAQ,iBACRqW,EAAS,KAAK,MAAMA,EAAO,QAAUrW,EAAQ,WAAW,EAAI,CAAA,EAGxDiK,EAAiB,SAAY,CACjC,GAAI,GAAC9F,GAAamS,EAAc,GAEhC,CAAAlb,EAAW,EAAI,EACf,GAAI,CACF,MAAMsO,EAAW1J,EAASsW,CAAW,EACrCnU,EAAA,CACF,OAAS/J,EAAO,CACd,QAAQ,MAAM,mBAAoBA,CAAK,CACzC,QAAA,CACEgD,EAAW,EAAK,CAClB,EACF,EAEA,aACG,MAAA,CAAI,UAAU,6EACb,SAAAb,EAAAA,KAAC,MAAA,CAAI,UAAU,+CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,qBAAkB,EAClEA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAoC,SAAAwF,EAAQ,MAAM,EAChEzF,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,YAAS,EACzCA,EAAAA,IAAC,OAAA,CAAK,UAAU,yBAA0B,WAAQ,QAAA,CAAS,CAAA,EAC7D,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,mBAAgB,EAChDD,EAAAA,KAAC,OAAA,CAAK,UAAU,2BAA2B,SAAA,CAAA,IAAEyF,EAAQ,YAAY,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EAC9E,EACAzF,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,aAAU,EAC1CD,EAAAA,KAAC,OAAA,CAAK,UAAU,cAAe,SAAA,CAAAyF,EAAQ,iBAAiB,SAAA,CAAA,CAAO,CAAA,CAAA,CACjE,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAxF,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,mBAEhE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAM+b,EAAe,KAAK,IAAI,EAAGD,EAAc,CAAC,CAAC,EAC1D,SAAUA,GAAe,EACzB,UAAU,wHACX,SAAA,GAAA,CAAA,EAGD9b,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,MAAO8b,EACP,SAAWte,GAAMue,EAAe,KAAK,IAAI,EAAG,KAAK,IAAIE,EAAW,SAASze,EAAE,OAAO,KAAK,GAAK,CAAC,CAAC,CAAC,EAC/F,IAAI,IACJ,IAAKye,EACL,UAAU,sHAAA,CAAA,EAEZjc,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAM+b,EAAe,KAAK,IAAIE,EAAWH,EAAc,CAAC,CAAC,EAClE,SAAUA,GAAeG,EACzB,UAAU,wHACX,SAAA,GAAA,CAAA,CAED,EACF,EACAlc,EAAAA,KAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,QAAMkc,EAAU,SAAA,CAAA,CAAO,CAAA,EACnE,EAEAlc,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC+O,GAAA,CAAW,UAAU,uBAAA,CAAwB,EAC9C/O,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAoC,SAAA,eAAA,CAAa,CAAA,EACnE,EACAD,EAAAA,KAAC,OAAA,CAAK,UAAU,0BAA0B,SAAA,CAAA,KAAG8b,GAAQ,SAAW,GAAG,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EAChF,EACA9b,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACqB,GAAA,CAAW,UAAU,wBAAA,CAAyB,EAC/CrB,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAoC,SAAA,aAAA,CAAW,CAAA,EACjE,EACAD,EAAAA,KAAC,OAAA,CAAK,UAAU,0BAA0B,SAAA,CAAA,IAAEic,EAAU,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,CAAA,CACnE,CAAA,EACF,EAEC,CAACrS,GACA3J,EAAAA,IAAC,MAAA,CAAI,UAAU,iDACb,SAAAD,EAAAA,KAAC,IAAA,CAAE,UAAU,uBAAuB,SAAA,CAAA,oCAAkC+b,EAAY,SAAA,CAAA,CAAO,CAAA,CAC3F,EAGF/b,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,kHACX,SAAA,QAAA,CAAA,EAGD3H,EAAAA,IAAC,SAAA,CACC,QAASyP,EACT,SAAU,CAAC9F,GAAahJ,GAAWmb,EAAc,EACjD,UAAU,sNAET,SAAAnb,EAAU,gBAAkB,OAAOmb,CAAW,SAASA,EAAc,EAAI,IAAM,EAAE,EAAA,CAAA,CACpF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CCnIA,SAAwBI,GAAkB,CAAE,KAAA9Y,EAAM,UAAA+Y,EAAW,aAAAC,EAAc,OAAA1U,EAAQ,QAAAC,EAAS,UAAAuB,GAAqC,CAC/H,KAAM,CAACkR,EAAUiC,CAAW,EAAItd,EAAAA,SAAS,WAAW,EAC9C,CAACud,EAAUC,CAAW,EAAIxd,EAAAA,SAAS,EAAE,EACrC,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACC,EAAQC,CAAS,EAAIF,EAAAA,SAAS,EAAK,EACpC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAwB,IAAI,EAEtD,GAAI,CAAC2I,GAAU,CAACtE,EAAM,OAAO,KAE7B,MAAMoZ,EAAY,CAChB,CAAE,GAAI,YAAa,KAAM,YAAa,MAAO,6BAAA,EAC7C,CAAE,GAAI,SAAU,KAAM,SAAU,MAAO,wBAAA,EACvC,CAAE,GAAI,UAAW,KAAM,UAAW,MAAO,2BAAA,EACzC,CAAE,GAAI,WAAY,KAAM,WAAY,MAAO,2BAAA,EAC3C,CAAE,GAAI,WAAY,KAAM,WAAY,MAAO,2BAAA,CAA4B,EAGnEC,EAAqBlS,GAAiB,CAC1C,OAAQA,EAAA,CACN,IAAK,QAAS,MAAO,GACrB,IAAK,UAAW,MAAO,KACvB,IAAK,OACL,QAAS,MAAO,EAAA,CAEpB,EAEMmS,EAAkB,IAAM,CAE5B,MAAMC,EAAaF,EAAkBrZ,EAAK,SAAS,EACnD,OAAO,KAAK,MAAM,GAAauZ,CAAU,CAC3C,EAEMC,EAAc,SAAY,CAC9B,GAAI,CAACN,EAAS,OAAQ,CACpB/S,EAAS,4BAA4B,EACrC,MACF,CAEA3I,EAAW,EAAI,EACf2I,EAAS,IAAI,EAEb,GAAI,CACF,MAAM3F,EAAW,MAAM,MAAM,2BAA4B,CACvD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,WAAYuY,EACZ,SAAA/B,EACA,UAAWkC,CAAA,CACZ,CAAA,CACF,EAED,GAAI1Y,EAAS,GACX,MAAMA,EAAS,KAAA,EACfsF,EAAA,EACAvB,EAAA,EAEA4U,EAAY,EAAE,EACdF,EAAY,WAAW,MAClB,CACL,MAAMxS,EAAY,MAAMjG,EAAS,KAAA,EACjC2F,EAASM,EAAU,OAAS,wBAAwB,CACtD,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,EAC9C2L,EAAS,wBAAwB,CACnC,QAAA,CACE3I,EAAW,EAAK,CAClB,CACF,EAEMuK,EAAkB,MAAOC,GAAiB,CAC9C,MAAM,UAAU,UAAU,UAAUA,CAAI,EACxCnM,EAAU,EAAI,EACd,WAAW,IAAMA,EAAU,EAAK,EAAG,GAAI,CACzC,EAEM4d,EAAoB,IAKjB,GAJUT,EACb,oCAAoCA,CAAY,kBAChD,kEAEc,kCAGdU,EAAeJ,EAAA,EAErB,aACG,MAAA,CAAI,UAAU,6EACb,SAAA3c,EAAAA,KAAC,MAAA,CAAI,UAAU,+CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC+c,GAAA,CAAO,UAAU,yBAAA,CAA0B,EAC5C/c,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,eAAA,CAAa,CAAA,EAC/D,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,sCAAsC,SAAA,iBAAc,EACpEA,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAqC,SAAA8c,CAAA,CAAa,CAAA,EACpE,EACA/c,EAAAA,KAAC,MAAA,CAAI,UAAU,0BAA0B,SAAA,CAAA,kBACvB0c,EAAkBrZ,EAAK,SAAS,EAAE,MAAIA,EAAK,UAAU,QAAA,CAAA,CACvE,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAApD,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,WAEhE,QACC,MAAA,CAAI,UAAU,yBACZ,SAAAwc,EAAU,IAAKQ,GACdjd,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAMsc,EAAYW,EAAE,EAAE,EAC/B,UAAW,6CACT5C,IAAa4C,EAAE,GACX,iCACA,uCACN,GAEA,SAAA,CAAAhd,MAAC,MAAA,CAAI,UAAW,4BAA4Bgd,EAAE,KAAK,2BAA4B,EAC/Ehd,EAAAA,IAAC,OAAA,CAAK,UAAU,sBAAuB,WAAE,IAAA,CAAK,CAAA,CAAA,EATzCgd,EAAE,EAAA,CAWV,CAAA,CACH,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAAhd,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,uBAEhE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA8B,SAAA6c,EAAA,EAAoB,EAC/D9c,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMoL,EAAgB0R,GAAmB,EAClD,UAAU,wFAET,SAAA,CAAA7d,EAASgB,EAAAA,IAACgJ,IAAM,UAAU,SAAA,CAAU,EAAKhJ,EAAAA,IAACG,GAAA,CAAK,UAAU,SAAA,CAAU,EACpEH,EAAAA,IAAC,OAAA,CAAM,SAAAhB,EAAS,UAAY,WAAA,CAAY,CAAA,CAAA,CAAA,CAC1C,CAAA,CACF,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAAgB,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,cAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,MACL,MAAOsc,EACP,SAAW9e,GAAM+e,EAAY/e,EAAE,OAAO,KAAK,EAC3C,YAAY,wCACZ,UAAU,gHAAA,CAAA,EAEZwC,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,6DAAA,CAE1C,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,eAAY,EAC3DD,EAAAA,KAAC,KAAA,CAAG,UAAU,kCACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,+CAAA,CAA6C,EACjDA,EAAAA,IAAC,MAAG,SAAA,yDAAA,CAAuD,EAC3DA,EAAAA,IAAC,MAAG,SAAA,2CAAA,CAAyC,SAC5C,KAAA,CAAG,SAAA,CAAA,WAAS8c,EAAa,oBAAA,CAAA,CAAkB,CAAA,CAAA,CAC9C,CAAA,EACF,EAGClf,GACCoC,EAAAA,IAAC,MAAA,CAAI,UAAU,iDACb,eAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAC7C,EAIFmC,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,kHACX,SAAA,QAAA,CAAA,EAGD3H,EAAAA,IAAC,SAAA,CACC,QAAS4c,EACT,SAAU,CAACN,EAAS,KAAA,GAAU3b,EAC9B,UAAU,+PAET,WACCX,MAAC,MAAA,CAAI,UAAU,8EAAA,CAA+E,EAE9FD,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAACid,GAAA,CAAa,UAAU,SAAA,CAAU,EAClCjd,EAAAA,IAAC,QAAK,SAAA,cAAA,CAAY,CAAA,CAAA,CACpB,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CCxNA,SAAwBkd,GAAkB,CACxC,KAAA9Z,EACA,UAAA+Y,EACA,aAAAC,EACA,gBAAAe,EACA,WAAAC,EACA,OAAA1V,EACA,QAAAC,EACA,UAAAuB,CACF,EAA2B,CACzB,KAAM,CAACmU,EAAUC,CAAW,EAAIve,EAAAA,SAA2D,MAAM,EAC3F,CAACwe,EAAUC,CAAW,EAAIze,EAAAA,SAAS,EAAE,EACrC,CAAC0e,EAAYC,CAAa,EAAI3e,EAAAA,SAAsB,IAAI,EACxD,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAwB,IAAI,EAEtD,GAAI,CAAC2I,GAAU,CAACtE,EAAM,OAAO,KAE7B,MAAMua,EAAY,CAChB,CAAE,GAAI,OAAQ,KAAM,OAAQ,YAAa,yCAA0C,KAAM,IAAA,EACzF,CAAE,GAAI,UAAW,KAAM,UAAW,YAAa,6BAA8B,KAAM,IAAA,EACnF,CAAE,GAAI,QAAS,KAAM,eAAgB,YAAa,8BAA+B,KAAM,IAAA,EACvF,CAAE,GAAI,OAAQ,KAAM,gBAAiB,YAAa,+BAAgC,KAAM,IAAA,EACxF,CAAE,GAAI,SAAU,KAAM,eAAgB,YAAa,kCAAmC,KAAM,IAAA,CAAK,EAG7FlB,EAAqBlS,GAAiB,CAC1C,OAAQA,EAAA,CACN,IAAK,QAAS,MAAO,GACrB,IAAK,UAAW,MAAO,KACvB,IAAK,OACL,QAAS,MAAO,EAAA,CAEpB,EAEMqT,EAA8B,IAAM,CAUxC,MAAMnL,EARa,CACjB,KAAQ,GACR,QAAW,GACX,KAAQ,GACR,MAAS,IACT,OAAU,GAAA,EAGY4K,CAAQ,GAAK,GAC/BV,EAAaF,EAAkBrZ,EAAK,SAAS,EAC7Cya,EAAc,KAAK,MAAMpL,EAAOkK,CAAU,EAG1CmB,EAAa,KAAK,KAAKD,EAAc,EAAE,EAE7C,MAAO,CAAE,OAAQA,EAAa,KAAMC,EAAY,WAAAnB,CAAA,CAClD,EAEMoB,EAAqBvgB,GAA2C,CACpE,MAAMwgB,EAAOxgB,EAAE,OAAO,QAAQ,CAAC,EAC3BwgB,GACFN,EAAcM,CAAI,CAEtB,EAEMhD,EAAe,SAAY,CAC/B,GAAI,CAACuC,EAAS,KAAA,GAAU,CAACE,EAAY,CACnClU,EAAS,iDAAiD,EAC1D,MACF,CAEA3I,EAAW,EAAI,EACf2I,EAAS,IAAI,EAEb,GAAI,CACF,IAAI0U,EAAW,GAGXR,IACe,IAAI,SAAA,EACZ,OAAO,QAASA,CAAU,EAInCQ,EAAW,IAAI,gBAAgBR,CAAU,GAG3C,MAAM7Z,EAAW,MAAM,MAAM,2BAA4B,CACvD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,UAAWyZ,EACX,WAAYlB,EACZ,iBAAkBgB,EAClB,YAAaC,EACb,UAAWG,GAAYU,EACvB,WAAYR,EAAa,QAAU,KAAA,CACpC,CAAA,CACF,EAED,GAAI7Z,EAAS,GAAI,CACf,MAAMmN,EAAS,MAAMnN,EAAS,KAAA,EAC9BsF,EAAA,EACAvB,EAAA,EAGA,MAAMO,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAY,iGACzBA,EAAa,UAAY;AAAA;AAAA;AAAA;AAAA,4CAIW6I,EAAO,aAAa;AAAA,iDACfA,EAAO,WAAW;AAAA;AAAA;AAAA,UAI3D,SAAS,KAAK,YAAY7I,CAAY,EACtC,WAAW,IAAM,CACX,SAAS,KAAK,SAASA,CAAY,GACrC,SAAS,KAAK,YAAYA,CAAY,CAE1C,EAAG,GAAI,EAGPsV,EAAY,EAAE,EACdE,EAAc,IAAI,EAClBJ,EAAY,MAAM,CACpB,KAAO,CACL,MAAMzT,EAAY,MAAMjG,EAAS,KAAA,EACjC2F,EAASM,EAAU,OAAS,gCAAgC,CAC9D,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,EAC5C2L,EAAS,wBAAwB,CACnC,QAAA,CACE3I,EAAW,EAAK,CAClB,CACF,EAEMsd,EAASN,EAAA,EAEf,aACG,MAAA,CAAI,UAAU,6EACb,SAAA7d,EAAAA,KAAC,MAAA,CAAI,UAAU,4EACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACid,GAAA,CAAa,UAAU,yBAAA,CAA0B,EAClDjd,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,eAAA,CAAa,CAAA,EAC/D,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEZ,SAAA,CAAAqc,GACCrc,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAkC,SAAAoc,EAAa,EAC7Drc,EAAAA,KAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,aAAc,SAAAmd,EAAgB,EAC7CC,GACCrd,EAAAA,KAAAiK,WAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC,QAAK,SAAA,GAAA,CAAC,EACPA,EAAAA,IAAC,IAAA,CACC,KAAMod,EACN,OAAO,SACP,IAAI,sBACJ,UAAU,kDACX,SAAA,eAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,EACF,EAIFrd,EAAAA,KAAC,MAAA,CAAI,UAAU,qFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,sCAAsC,SAAA,2BAAwB,EAC9ED,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,qCAAsC,SAAAke,EAAO,OAAO,EACpEle,EAAAA,IAAC,OAAA,CAAK,UAAU,0BAA0B,SAAA,SAAM,EAChDD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC4B,GAAA,CAAI,UAAU,yBAAA,CAA0B,EACzC5B,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAqC,WAAO,IAAA,CAAK,CAAA,CAAA,CACnE,CAAA,CAAA,CACF,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BAA0B,SAAA,CAAA,kCACPme,EAAO,WAAW,KAAG9a,EAAK,UAAU,kBAAA,CAAA,CACtE,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAArD,EAAAA,KAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,CAAA,sBAC1Cod,EAAgB,GAAA,EACtC,QACC,MAAA,CAAI,UAAU,yBACZ,SAAAQ,EAAU,IAAKrb,GACdtC,EAAAA,IAAC,SAAA,CAEC,QAAS,IAAMsd,EAAYhb,EAAK,EAAS,EACzC,UAAW,uDACT+a,IAAa/a,EAAK,GACd,iCACA,uCACN,GAEA,SAAAvC,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAW,SAAAsC,EAAK,KAAK,SACpC,MAAA,CACC,SAAA,CAAAtC,EAAAA,IAAC,MAAA,CAAI,UAAU,cAAe,SAAAsC,EAAK,KAAK,EACxCtC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAyB,WAAK,WAAA,CAAY,CAAA,CAAA,CAC3D,CAAA,CAAA,CACF,CAAA,EAdKsC,EAAK,EAAA,CAgBb,CAAA,CACH,CAAA,EACF,EAGAvC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,0CAA0C,SAAA,oBAE3D,SAGC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,QAAA,CAAM,UAAU,mCAAmC,SAAA,oDAAiD,EACrGA,EAAAA,IAAC,QAAA,CACC,KAAK,MACL,MAAOud,EACP,SAAW/f,GAAMggB,EAAYhgB,EAAE,OAAO,KAAK,EAC3C,YAAY,wCACZ,UAAU,gHAAA,CAAA,CACZ,EACF,SAGC,MAAA,CACC,SAAA,CAAAwC,EAAAA,IAAC,QAAA,CAAM,UAAU,mCAAmC,SAAA,yBAAsB,EAC1ED,EAAAA,KAAC,MAAA,CAAI,UAAU,8GACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,OAAO,UACP,SAAU+d,EACV,UAAU,SACV,GAAG,cAAA,CAAA,EAEL/d,EAAAA,IAAC,QAAA,CAAM,QAAQ,eAAe,UAAU,iBACrC,SAAAyd,EACC1d,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,gCAAA,CAAiC,EACxDF,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAsC,WAAW,KAAK,EACnEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,iBAAA,CAAe,CAAA,CAAA,CACtD,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAACme,GAAA,CAAO,UAAU,+BAAA,CAAgC,EAClDne,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,6BAA0B,EAC/DA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,qBAAA,CAAmB,CAAA,CAAA,CAC1D,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACuI,GAAA,CAAY,UAAU,uBAAA,CAAwB,EAC/CvI,EAAAA,IAAC,OAAA,CAAK,UAAU,4BAA4B,SAAA,cAAA,CAAY,CAAA,EAC1D,EACAD,EAAAA,KAAC,KAAA,CAAG,UAAU,uCACZ,SAAA,CAAAA,OAAC,KAAA,CAAG,SAAA,CAAA,oCAAkCod,CAAA,EAAgB,SACrD,KAAA,CAAG,SAAA,CAAA,mCAAiCQ,EAAU,KAAKS,GAAKA,EAAE,KAAOf,CAAQ,GAAG,KAAK,GAAA,EAAC,EACnFrd,EAAAA,IAAC,MAAG,SAAA,+CAAA,CAA6C,SAChD,KAAA,CAAG,SAAA,CAAA,0BAAwBke,EAAO,OAAO,aAAWA,EAAO,KAAK,QAAA,CAAA,CAAM,CAAA,CAAA,CACzE,CAAA,EACF,EAGCtgB,GACCoC,EAAAA,IAAC,MAAA,CAAI,UAAU,iDACb,eAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAC7C,EAIFmC,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,kHACX,SAAA,QAAA,CAAA,EAGD3H,EAAAA,IAAC,SAAA,CACC,QAASgb,EACT,SAAW,CAACuC,EAAS,KAAA,GAAU,CAACE,GAAe9c,EAC/C,UAAU,iQAET,WACCX,MAAC,MAAA,CAAI,UAAU,8EAAA,CAA+E,EAE9FD,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAACqe,GAAA,CAAO,UAAU,SAAA,CAAU,EAC5Bre,EAAAA,IAAC,QAAK,SAAA,cAAA,CAAY,CAAA,CAAA,CACpB,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CC9U0Cse,GAAS,CACjD,SAAUC,EAAE,EAAS,SAAA,EACrB,aAAcA,EAAE,EAAS,SAAA,EACzB,IAAKA,EAAE,EAAS,SAAA,EAChB,WAAYA,EAAE,EAAS,SAAA,EACvB,WAAYA,EAAE,EAAS,SAAA,EACvB,YAAaA,EAAE,EAAS,SAAA,EACxB,aAAcA,EAAE,EAAS,SAAA,CAC3B,CAAC,EAKM,MAAMC,GAA0BF,GAAS,CAC9C,MAAOC,EAAE,EACT,YAAaA,EAAE,EACf,UAAWA,EAAE,EACb,WAAYA,EAAE,EACd,SAAUE,GAAE,EAAS,IAAI,CAAC,EAC1B,gBAAiBA,GAAE,EAAS,IAAI,CAAC,EACjC,eAAgBA,GAAE,EAAS,SAAA,EAC3B,aAAcF,EAAE,EAAS,SAAA,EACzB,mBAAoBE,GAAE,EAAS,IAAI,CAAC,EAAE,QAAQ,CAAC,EAC/C,gBAAiBF,EAAE,EAAS,SAAA,EAC5B,aAAcA,EAAE,EAAS,SAAA,EACzB,aAAcA,EAAE,EAAS,SAAA,EACzB,YAAaA,EAAE,EAAS,SAAA,EACxB,iBAAkBE,GAAE,EAAS,SAAA,EAC7B,SAAUF,EAAE,EAAS,SAAA,EACrB,YAAaA,EAAE,EAAS,SAAA,EACxB,iBAAkBE,GAAE,EAAS,IAAI,CAAC,EAAE,QAAQ,CAAC,EAC7C,kBAAmBA,GAAE,EAAS,IAAI,CAAC,EAAE,QAAQ,CAAC,EAC9C,cAAeC,GAAE,EAAU,QAAQ,EAAK,EACxC,aAAcA,KAAY,QAAQ,EAAK,CACzC,CAAC,EAKuCJ,GAAS,CAC/C,oBAAqBC,EAAE,CACzB,CAAC,EAKwCD,GAAS,CAChD,YAAaK,GAAO,CAAC,OAAQ,UAAW,OAAQ,QAAS,QAAQ,CAAC,EAClE,aAAcF,GAAE,EAAS,SAAA,EACzB,eAAgBF,EAAE,EAAS,SAAA,CAC7B,CAAC,EAK2CD,GAAS,CACnD,cAAeK,GAAO,CAAC,SAAU,MAAM,CAAC,EACxC,YAAaA,GAAO,CAAC,MAAM,CAAC,EAC5B,OAAQF,KAAW,IAAI,CAAC,CAC1B,CAAC,EAK6CH,GAAS,CACrD,KAAMC,EAAE,EAAS,SAAA,CACnB,CAAC,EAK4CD,GAAS,CACpD,OAAQG,GAAE,EAAS,IAAI,GAAG,EAC1B,eAAgBF,EAAE,EAClB,gBAAiBK,GAASC,IAAO,CACnC,CAAC,EAKiDP,GAAS,CACzD,eAAgBC,EAAE,EAClB,gBAAiBK,GAASC,IAAO,EACjC,WAAYH,GAAE,EAAU,SAAA,CAC1B,CAAC,EAK6CJ,GAAS,CACrD,WAAYC,EAAE,EACd,KAAME,GAAE,EAAS,IAAI,CAAC,EACtB,MAAOA,KAAW,IAAI,GAAI,CAC5B,CAAC,EAKgDH,GAAS,CACxD,WAAYG,GAAE,EAAS,SAAA,EACvB,SAAUF,EAAE,EACZ,YAAaA,EAAE,EACf,cAAeI,GAAO,CAAC,QAAS,QAAS,SAAU,UAAU,CAAC,EAC9D,aAAcF,GAAE,EAAS,IAAI,CAAC,EAC9B,KAAMA,GAAE,EAAS,IAAI,CAAC,EACtB,WAAYF,EAAE,EACd,eAAgBE,GAAE,EAAS,IAAI,CAAC,EAChC,aAAcE,GAAO,CAAC,OAAQ,OAAO,CAAC,CACxC,CAAC,EAKyCL,GAAS,CACjD,kBAAmBG,GAAE,EAAS,IAAI,CAAC,EACnC,gBAAiBE,GAAO,CAAC,OAAQ,OAAO,CAAC,CAC3C,CAAC,EAK2CL,GAAS,CACnD,SAAUC,EAAE,EACZ,YAAaA,EAAE,EACf,SAAUI,GAAO,CAAC,QAAS,QAAS,SAAU,UAAU,CAAC,EACzD,aAAcF,GAAE,EAAS,IAAI,CAAC,EAC9B,KAAMA,GAAE,EAAS,IAAI,CAAC,EACtB,WAAYF,EAAE,CAChB,CAAC,EAIoCD,GAAS,CAC5C,WAAYG,GAAE,EAAS,IAAI,CAAC,EAC5B,SAAUE,GAAO,CAAC,OAAQ,OAAO,CAAC,CACpC,CAAC,EAqTM,MAAMG,GAAiBH,GAAO,CAAC,YAAa,SAAU,UAAW,SAAS,CAAC,EACrEI,GAAiBJ,GAAO,CAAC,mBAAoB,UAAW,eAAgB,qBAAsB,UAAW,oBAAqB,YAAY,CAAC,EAC3IK,GAAuBL,GAAO,CAAC,OAAQ,SAAU,MAAM,CAAC,EACnCA,GAAO,CAAC,eAAgB,mBAAoB,YAAa,SAAU,QAAQ,CAAC,EAC1EA,GAAO,CAAC,OAAQ,SAAU,MAAM,CAAC,EAQ9D,MAAMM,GAA6BX,GAAS,CACjD,SAAUK,GAAO,CAAC,YAAa,SAAU,UAAW,UAAW,UAAU,CAAC,EAC1E,MAAOJ,EAAE,EAAS,IAAI,CAAC,EACvB,YAAaA,EAAE,EAAS,SAAA,EACxB,aAAcA,EAAE,EAAS,IAAA,EACzB,UAAWA,EAAE,EAAS,SAAA,EACtB,aAAcE,GAAE,EAAS,IAAI,CAAC,EAAE,IAAI,GAAI,EACxC,YAAaA,KAAW,IAAI,CAAC,CAC/B,CAAC,EAKqCH,GAAS,CAC7C,WAAYG,GAAE,EACd,aAAcA,KAAW,IAAI,CAAC,CAChC,CAAC,EAKsCH,GAAS,CAC9C,MAAOC,EAAE,EACT,YAAaA,EAAE,EACf,SAAUA,EAAE,EACZ,WAAYI,GAAO,CAAC,OAAQ,SAAU,MAAM,CAAC,EAC7C,cAAeF,GAAE,EAAS,IAAI,CAAC,EAC/B,cAAeF,EAAE,EAAS,QAAQ,KAAK,EACvC,mBAAoBE,GAAE,EAAS,IAAI,CAAC,EAAE,QAAQ,CAAC,EAC/C,gBAAiBF,EAAE,EAAS,SAAA,EAC5B,aAAcA,EAAE,EAAS,SAAA,EACzB,aAAcA,EAAE,EAAS,SAAA,EACzB,YAAaA,EAAE,EAAS,SAAA,EACxB,iBAAkBE,GAAE,EAAS,SAAA,CAC/B,CAAC,EAIuCH,GAAS,CAC/C,oBAAqBC,EAAE,CACzB,CAAC,ECxeD,SAAwBW,GAAiB,CACvC,OAAAxX,EACA,QAAAC,EACA,UAAAuB,EACA,QAAA1D,CACF,EAA0B,CACxB,KAAM,CAACsV,EAAUC,CAAW,EAAIhc,WAAS,CACvC,SAAUyG,EAAQ,SAClB,MAAOA,EAAQ,MACf,YAAaA,EAAQ,aAAe,GACpC,aAAcA,EAAQ,aACtB,UAAWA,EAAQ,WAAa,GAChC,aAAcA,EAAQ,aACtB,YAAaA,EAAQ,WAAA,CACtB,EACK,CAAC7E,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAwB,IAAI,EAgBtD,GAdAM,EAAAA,UAAU,IAAM,CACVmG,GACFuV,EAAY,CACV,SAAUvV,EAAQ,SAClB,MAAOA,EAAQ,MACf,YAAaA,EAAQ,aAAe,GACpC,aAAcA,EAAQ,aACtB,UAAWA,EAAQ,WAAa,GAChC,aAAcA,EAAQ,aACtB,YAAaA,EAAQ,WAAA,CACtB,CAEL,EAAG,CAACA,CAAO,CAAC,EAER,CAACkC,EAAQ,OAAO,KAEpB,MAAMsT,EAAe,MAAOxd,GAAuB,CACjDA,EAAE,eAAA,EACFoD,EAAW,EAAI,EACf2I,EAAS,IAAI,EAEb,GAAI,CAGF,GAAI,CADqB0V,GAA2B,UAAUnE,CAAQ,EAChD,QAAS,CAC7BvR,EAAS,kCAAkC,EAC3C,MACF,CAEA,MAAM3F,EAAW,MAAM,MAAM,gBAAgB4B,EAAQ,EAAE,GAAI,CACzD,OAAQ,MACR,QAAS,CACP,eAAgB,kBAAA,EAElB,YAAa,UACb,KAAM,KAAK,UAAUsV,CAAQ,CAAA,CAC9B,EAED,GAAIlX,EAAS,GAAI,CACf,MAAMmN,EAAS,MAAMnN,EAAS,KAAA,EAC9BsF,EAAU6H,EAAO,OAAO,EACxBpJ,EAAA,CACF,KAAO,CACL,MAAMkC,EAAY,MAAMjG,EAAS,KAAA,EACjC2F,EAASM,EAAU,OAAS,0BAA0B,CACxD,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,EAC9C2L,EAAS,0BAA0B,CACrC,QAAA,CACE3I,EAAW,EAAK,CAClB,CACF,EAEA,aACG,MAAA,CAAI,UAAU,iFACb,SAAAb,EAAAA,KAAC,MAAA,CAAI,UAAU,oEAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,eAAY,EAC5DA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDACV,SAAUhH,EAEV,SAAAX,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAGAhJ,EAAAA,KAAC,OAAA,CAAK,SAAUib,EAAc,UAAU,gBACrC,SAAA,CAAApd,GACCoC,EAAAA,IAAC,MAAA,CAAI,UAAU,oEACZ,SAAApC,EACH,EAGFmC,EAAAA,KAAC,MAAA,CAAI,UAAU,wCAEb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,aAEhE,EACAD,EAAAA,KAAC,SAAA,CACC,MAAO+a,EAAS,SAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,SAAUtd,EAAE,OAAO,MAAO,EACtE,UAAU,mIACV,SAAQ,GACR,SAAUmD,EAEV,SAAA,CAAAX,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,kBAAe,EAChCA,EAAAA,IAAC,SAAA,CAAO,MAAM,YAAY,SAAA,YAAS,EACnCA,EAAAA,IAAC,SAAA,CAAO,MAAM,SAAS,SAAA,SAAM,EAC7BA,EAAAA,IAAC,SAAA,CAAO,MAAM,UAAU,SAAA,UAAO,EAC/BA,EAAAA,IAAC,SAAA,CAAO,MAAM,UAAU,SAAA,UAAO,EAC/BA,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,UAAA,CAAQ,CAAA,CAAA,CAAA,CACnC,EACF,SAGC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,iBAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,IAAI,IACJ,IAAI,OACJ,MAAO8a,EAAS,aAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,aAAc,SAAStd,EAAE,OAAO,KAAK,GAAK,EAAG,EACzF,UAAU,mIACV,SAAQ,GACR,SAAUmD,CAAA,CAAA,CACZ,CAAA,CACF,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAAX,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,UAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO8a,EAAS,MAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,MAAOtd,EAAE,OAAO,MAAO,EACnE,UAAU,mIACV,YAAY,sBACZ,SAAQ,GACR,SAAUmD,CAAA,CAAA,CACZ,EACF,SAGC,MAAA,CACC,SAAA,CAAAX,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,cAEhE,EACAA,EAAAA,IAAC,WAAA,CACC,MAAO8a,EAAS,YAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,YAAatd,EAAE,OAAO,MAAO,EACzE,KAAM,EACN,UAAU,mIACV,YAAY,2BACZ,SAAUmD,CAAA,CAAA,CACZ,EACF,SAGC,MAAA,CACC,SAAA,CAAAX,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,iBAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,MACL,MAAO8a,EAAS,aAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,aAActd,EAAE,OAAO,MAAO,EAC1E,UAAU,mIACV,YAAY,8BACZ,SAAQ,GACR,SAAUmD,CAAA,CAAA,CACZ,EACF,SAGC,MAAA,CACC,SAAA,CAAAX,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,YAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,MACL,MAAO8a,EAAS,UAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,UAAWtd,EAAE,OAAO,MAAO,EACvE,UAAU,mIACV,YAAY,gCACZ,SAAUmD,CAAA,CAAA,CACZ,EACF,SAGC,MAAA,CACC,SAAA,CAAAX,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,sBAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,KAAK,SACL,IAAI,IACJ,MAAO8a,EAAS,YAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,YAAa,WAAWtd,EAAE,OAAO,KAAK,GAAK,EAAG,EAC1F,UAAU,mIACV,YAAY,SACZ,SAAQ,GACR,SAAUmD,CAAA,CAAA,CACZ,EACF,EAGAZ,EAAAA,KAAC,MAAA,CAAI,UAAU,+CACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS2H,EACT,SAAUhH,EACV,UAAU,sIACX,SAAA,QAAA,CAAA,EAGDX,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,SAAUW,EACV,UAAU,mOAET,WACCZ,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC6X,GAAA,CAAQ,UAAU,sBAAA,CAAuB,EAC1C7X,EAAAA,IAAC,QAAK,SAAA,aAAA,CAAW,CAAA,CAAA,CACnB,EAEAD,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAACmf,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1Bnf,EAAAA,IAAC,QAAK,SAAA,gBAAA,CAAc,CAAA,CAAA,CACtB,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CCpPA,SAAwBof,GAAkB,CACxC,OAAA1X,EACA,QAAAC,EACA,UAAA0X,EACA,MAAAjH,EACA,QAAAlG,EACA,YAAAoN,EAAc,UACd,WAAAC,EAAa,SACb,KAAAjd,EAAO,UACP,QAAA3B,EAAU,EACZ,EAA2B,CACzB,GAAI,CAAC+G,EAAQ,OAAO,KAEpB,MAAM8X,EAAU,IAAM,CACpB,OAAQld,EAAA,CACN,IAAK,SACH,OAAOtC,EAAAA,IAACC,GAAA,CAAc,UAAU,sBAAA,CAAuB,EACzD,IAAK,UACH,OAAOD,EAAAA,IAACE,GAAA,CAAY,UAAU,wBAAA,CAAyB,EACzD,IAAK,OACH,OAAOF,EAAAA,IAACsI,GAAA,CAAK,UAAU,uBAAA,CAAwB,EACjD,IAAK,UACL,QACE,OAAOtI,EAAAA,IAACC,GAAA,CAAc,UAAU,yBAAA,CAA0B,CAAA,CAEhE,EAEMwf,EAAwB,IAAM,CAClC,OAAQnd,EAAA,CACN,IAAK,SACH,MAAO,yCACT,IAAK,UACH,MAAO,6CACT,IAAK,OACH,MAAO,2CACT,IAAK,UACL,QACE,MAAO,8CAAA,CAEb,EAEA,aACG,MAAA,CAAI,UAAU,6EACb,SAAAvC,EAAAA,KAAC,MAAA,CAAI,UAAU,+CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAAyf,EAAA,EACDxf,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAmC,SAAAoY,CAAA,CAAM,CAAA,EACzD,EACApY,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDACV,SAAUhH,EAEV,SAAAX,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEA/I,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAsB,SAAAkS,EAAQ,EAE3CnS,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,SAAUhH,EACV,UAAU,sIAET,SAAA4e,CAAA,CAAA,EAEHvf,EAAAA,IAAC,SAAA,CACC,QAASqf,EACT,SAAU1e,EACV,UAAW,iFAAiF8e,EAAA,CAAuB,GAElH,SAAA9e,EACCZ,OAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,8EAAA,CAA+E,EAC9FA,EAAAA,IAAC,QAAK,SAAA,eAAA,CAAa,CAAA,CAAA,CACrB,EAEAsf,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CCzFA,SAAwBI,GAAW,CAAE,OAAAhY,EAAQ,QAAAC,EAAS,UAAAwU,EAAW,aAAAC,EAAc,WAAAgB,GAA+B,CAC5G,KAAM,CAACpe,EAAQC,CAAS,EAAIF,EAAAA,SAAS,EAAK,EAE1C,GAAI,CAAC2I,EAAQ,OAAO,KAEpB,MAAM4U,EAAWc,GAAc,GAAG,OAAO,SAAS,MAAM,YAAYjB,CAAS,GACvEwD,EAAY,oCAAoCvD,CAAY,kBAE5DjR,EAAkB,SAAY,CAClC,GAAI,CACF,MAAM,UAAU,UAAU,UAAUmR,CAAQ,EAC5Crd,EAAU,EAAI,EACd,WAAW,IAAMA,EAAU,EAAK,EAAG,GAAI,CACzC,OAASrB,EAAO,CACd,QAAQ,MAAM,kBAAmBA,CAAK,CACxC,CACF,EAEMgiB,EAAkB,IAAM,CAC5B,MAAMzb,EAAM,gDAAgD,mBAAmBmY,CAAQ,CAAC,GACxF,OAAO,KAAKnY,EAAK,SAAU,sBAAsB,CACnD,EAEM0b,EAAiB,IAAM,CAE3B,MAAM1b,EAAM,yCADC,mBAAmB,GAAGwb,CAAS,IAAIrD,CAAQ,EAAE,CACD,GACzD,OAAO,KAAKnY,EAAK,SAAU,sBAAsB,CACnD,EAEM2b,EAAkB,IAAM,CAE5B,MAAM3b,EAAM,uBADC,mBAAmB,GAAGwb,CAAS,IAAIrD,CAAQ,EAAE,CACnB,GACvC,OAAO,KAAKnY,EAAK,QAAQ,CAC3B,EAEM4b,EAAgB,IAAM,CAC1B,MAAMC,EAAU,mBAAmB,qCAAqC,EAClEC,EAAO,mBAAmB,GAAGN,CAAS;AAAA;AAAA,EAAOrD,CAAQ,EAAE,EAC7D,OAAO,SAAS,KAAO,mBAAmB0D,CAAO,SAASC,CAAI,EAChE,EAEMC,EAAc,SAAY,CAC9B,GAAI,UAAU,MACZ,GAAI,CACF,MAAM,UAAU,MAAM,CACpB,MAAO9D,EACP,KAAMuD,EACN,IAAKrD,CAAA,CACN,CACH,OAAS1e,EAAO,CACd,QAAQ,MAAM,iBAAkBA,CAAK,CACvC,CAEJ,EAEA,aACG,MAAA,CAAI,UAAU,iFACb,SAAAmC,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC+c,GAAA,CAAO,UAAU,uBAAA,CAAwB,EAC1C/c,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,eAAA,CAAa,CAAA,EAC/D,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAGAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAkC,SAAAoc,EAAa,EAC7Dpc,EAAAA,IAAC,IAAA,CAAE,UAAU,kCAAmC,SAAAsc,CAAA,CAAS,CAAA,EAC3D,EAGAvc,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAASmL,EACT,UAAU,oHAEV,SAAApL,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAAf,EACCgB,EAAAA,IAACgJ,IAAM,UAAU,wBAAA,CAAyB,EAE1ChJ,EAAAA,IAACG,GAAA,CAAK,UAAU,uBAAA,CAAwB,QAEzC,OAAA,CAAK,UAAU,4BACb,SAAAnB,EAAS,UAAY,WAAA,CACxB,CAAA,CAAA,CACF,CAAA,CAAA,EAIFe,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS6f,EACT,UAAU,uHAEV,SAAA,CAAA5f,EAAAA,IAACmgB,GAAA,CAAS,UAAU,SAAA,CAAU,EAC9BngB,EAAAA,IAAC,QAAK,SAAA,UAAA,CAAQ,CAAA,CAAA,CAAA,EAGhBD,EAAAA,KAAC,SAAA,CACC,QAAS8f,EACT,UAAU,qHAEV,SAAA,CAAA7f,EAAAA,IAACogB,GAAA,CAAQ,UAAU,SAAA,CAAU,EAC7BpgB,EAAAA,IAAC,QAAK,SAAA,SAAA,CAAO,CAAA,CAAA,CAAA,EAGfD,EAAAA,KAAC,SAAA,CACC,QAAS+f,EACT,UAAU,yHAEV,SAAA,CAAA9f,EAAAA,IAACqgB,GAAA,CAAc,UAAU,SAAA,CAAU,EACnCrgB,EAAAA,IAAC,QAAK,SAAA,UAAA,CAAQ,CAAA,CAAA,CAAA,EAGhBD,EAAAA,KAAC,SAAA,CACC,QAASggB,EACT,UAAU,uHAEV,SAAA,CAAA/f,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,KAAE,EAC5BA,EAAAA,IAAC,QAAK,SAAA,OAAA,CAAK,CAAA,CAAA,CAAA,CACb,EACF,EAGC,OAAO,OAAW,KAAe,UAAW,WAC3CD,EAAAA,KAAC,SAAA,CACC,QAASmgB,EACT,UAAU,qLAEV,SAAA,CAAAlgB,EAAAA,IAAC+c,GAAA,CAAO,UAAU,SAAA,CAAU,EAC5B/c,EAAAA,IAAC,QAAK,SAAA,cAAA,CAAY,CAAA,CAAA,CAAA,CACpB,EAEJ,QAGC,MAAA,CAAI,UAAU,wDACb,SAAAD,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,MAChCC,EAAAA,IAAC,UAAO,SAAA,MAAA,CAAI,EAAS,2EAAA,CAAA,CAC1B,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CC9IA,SAAwBsgB,GAAkB,CAAE,OAAA5Y,EAAQ,QAAAC,EAAS,KAAAvE,GAAgC,CAC3F,KAAM,CAACmd,EAAcC,CAAe,EAAIzhB,EAAAA,SAAyB,CAAA,CAAE,EAC7D,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EAE5CM,EAAAA,UAAU,IAAM,CACVqI,GAAUtE,GACZqd,EAAA,CAEJ,EAAG,CAAC/Y,EAAQtE,CAAI,CAAC,EAEjB,MAAMqd,EAAoB,SAAY,CACpC7f,EAAW,EAAI,EACf,GAAI,CACF,MAAMgD,EAAW,MAAM,MAAM,2BAA4B,CACvD,YAAa,SAAA,CACd,EAED,GAAIA,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5B4c,EAAgBtjB,CAAI,CACtB,CACF,OAASU,EAAO,CACd,QAAQ,MAAM,iCAAkCA,CAAK,CACvD,QAAA,CACEgD,EAAW,EAAK,CAClB,CACF,EAEM8f,EAAqB,MAAOvE,GAAsB,CACtD,GAAI,EACe,MAAM,MAAM,4BAA4BA,CAAS,GAAI,CACpE,OAAQ,SACR,YAAa,SAAA,CACd,GAEY,IACXqE,KAAwBjc,EAAK,UAAe0J,EAAK,aAAekO,CAAS,CAAC,CAE9E,OAASve,EAAO,CACd,QAAQ,MAAM,kCAAmCA,CAAK,CACxD,CACF,EAEM+iB,EAAcC,GACL,IAAI,KAAKA,CAAU,EACpB,mBAAmB,QAAS,CACtC,MAAO,QACP,IAAK,UACL,KAAM,SAAA,CACP,EAGGC,EAAmBzG,GAAqB,CAC5C,OAAQA,EAAA,CACN,IAAK,YAAa,MAAO,KACzB,IAAK,SAAU,MAAO,KACtB,IAAK,UAAW,MAAO,KACvB,IAAK,UAAW,MAAO,KACvB,IAAK,WAAY,MAAO,KACxB,QAAS,MAAO,IAAA,CAEpB,EAEA,OAAK1S,QAGF,MAAA,CAAI,UAAU,iFACb,SAAA3H,EAAAA,KAAC,MAAA,CAAI,UAAU,kEAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC8gB,GAAA,CAAS,UAAU,yBAAA,CAA0B,EAC9C9gB,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,gBAAa,EAC7DA,EAAAA,IAAC,OAAA,CAAK,UAAU,2DACb,WAAa,MAAA,CAChB,CAAA,EACF,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAGA/I,EAAAA,IAAC,OAAI,UAAU,6BACZ,WACCA,EAAAA,IAAC,MAAA,CAAI,UAAU,yCACb,SAAAA,EAAAA,IAAC,OAAI,UAAU,mFAAA,CAAoF,EACrG,EACEugB,EAAa,SAAW,EAC1BxgB,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC8gB,GAAA,CAAS,UAAU,sCAAA,CAAuC,EAC3D9gB,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,uBAAoB,EAC3EA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,wEAElC,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sFACX,SAAA,iBAAA,CAAA,CAED,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,YACZ,SAAA4Y,EAAa,IAAKtS,GACjBjO,EAAAA,IAAC,MAAA,CAEC,UAAU,gEAEV,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,6BAEb,SAAA,CAAAC,MAAC,OAAI,UAAU,uIACZ,SAAA6gB,EAAgB5S,EAAK,gBAAgB,EACxC,EAGAlO,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,0CACX,SAAAiO,EAAK,cACR,EACAlO,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,OAAO,KAAK,YAAYiO,EAAK,UAAU,GAAI,QAAQ,EAClE,UAAU,kEACV,MAAM,eAEN,SAAAjO,EAAAA,IAACqb,GAAA,CAAI,UAAU,SAAA,CAAU,CAAA,CAAA,EAE3Brb,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,OAAO,KAAKiO,EAAK,YAAa,QAAQ,EACrD,UAAU,sEACV,MAAM,gBAEN,SAAAjO,EAAAA,IAACid,GAAA,CAAa,UAAU,SAAA,CAAU,CAAA,CAAA,EAEpCjd,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM0gB,EAAmBzS,EAAK,UAAU,EACjD,UAAU,gEACV,MAAM,oBAEN,SAAAjO,EAAAA,IAAC+gB,GAAA,CAAO,UAAU,SAAA,CAAU,CAAA,CAAA,CAC9B,CAAA,CACF,CAAA,EACF,EAEAhhB,EAAAA,KAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAC,MAAC,MAAA,CAAI,UAAU,8BACb,SAAAD,EAAAA,KAAC,OAAA,CAAK,SAAA,CAAA,MAAIkO,EAAK,YAAA,CAAA,CAAa,CAAA,CAC9B,EACAjO,EAAAA,IAAC,MAAA,CAAI,UAAU,8BACb,SAAAA,EAAAA,IAAC,QAAK,UAAU,aAAc,SAAAiO,EAAK,gBAAA,CAAiB,CAAA,CACtD,EACAlO,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACghB,GAAA,CAAS,UAAU,SAAA,CAAU,SAC7B,OAAA,CAAK,SAAA,CAAA,SAAOL,EAAW1S,EAAK,UAAU,CAAA,CAAA,CAAE,CAAA,CAAA,CAC3C,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EArDKA,EAAK,EAAA,CAuDb,EACH,CAAA,CAEJ,EAGCsS,EAAa,OAAS,GACrBvgB,EAAAA,IAAC,MAAA,CAAI,UAAU,0CACb,SAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,oCAAoC,SAAA,4GAAA,CAEjD,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CACF,EAnHkB,IAqHtB,CClLA,SAASihB,GAAc,CAAE,QAAA/J,EAAS,KAAA9L,EAAM,KAAA+M,EAAM,QAAA+I,EAAS,SAAAvb,GAAgC,CACrF,MAAMwb,EAAmB,IAAM,CAC7B,OAAQjK,EAAA,CACN,IAAK,SACH,MAAO,qFACT,IAAK,OACH,MAAO,uFACT,IAAK,SACH,MAAO,uFACT,QACE,MAAO,+BAAA,CAEb,EAEA,OACEnX,EAAAA,KAAC,SAAA,CACC,QAAUqhB,GAAUF,IAAUE,CAAK,EACnC,SAAAzb,EACA,UAAW,0QAA0Qwb,EAAA,CAAkB,GACvS,aAAY/V,EAEX,SAAA,CAAA+M,EACDnY,EAAAA,IAAC,QAAM,SAAAoL,CAAA,CAAK,CAAA,CAAA,CAAA,CAGlB,CAEA,SAASiW,GAAW,CAAE,QAAA7b,GAA0C,CAC9D,MAAM8b,EAAgB,OAAO9b,EAAQ,aAAgB,SACjDA,EAAQ,YACR,OAAOA,EAAQ,aAAe,CAAC,EAC7B+b,EAAa,OAAO,SAASD,CAAa,GAAKA,EAAgB,EAAIA,EAAgB,KACzF,OACEvhB,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,kCACZ,SAAAuhB,EAAa,IAAIA,EAAW,QAAQ,CAAC,CAAC,GAAK,GAAA,CAC9C,EACAvhB,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,WAAA,CAAS,CAAA,EAClD,CAEJ,CAEA,SAASwhB,GAAkB,CAAE,QAAAhc,GAA0C,CACrE,MAAMic,EAAajc,EAAQ,kBAAoB,EAC/C,OACEzF,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,MAAC,OAAI,UAAU,kCACZ,SAAAyhB,EAAa,EAAIA,EAAa,IACjC,EACAzhB,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,WAAA,CAAS,CAAA,EAClD,CAEJ,CAEA,SAAwB0hB,GAAY,CAClC,QAAAlc,EACA,YAAAmc,EACA,UAAAC,EACA,MAAAC,EACA,eAAAC,EACA,YAAAC,EACA,OAAAC,EACA,SAAAC,CACF,EAAqB,CACnB,MAAMR,EAAajc,EAAQ,kBAAoB,EACzC0c,EAAmB1c,EAAQ,6BAA+B,EAE1D2c,EAAqBC,GAAoDhB,GAAyC,CACtHA,EAAM,gBAAA,EACNA,EAAM,eAAA,EACNgB,IAAW5c,CAAO,CACpB,EAEM6c,EAAYZ,GAAc,EAC5BS,EAAmB,EACjB,kFACA,mEACFA,EAAmB,EACjB,wFACA,OAEN,OACEniB,EAAAA,KAAC,MAAA,CAAI,UAAU,mFAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0DACb,SAAA,CAAAC,MAACqhB,IAAW,QAAA7b,EAAkB,EAC9BxF,MAACwhB,IAAkB,QAAAhc,CAAA,CAAkB,CAAA,EACvC,EAGAzF,EAAAA,KAAC,MAAA,CAAI,UAAU,kEACb,SAAA,CAAAC,EAAAA,IAACihB,GAAA,CACC,QAAQ,SACR,KAAK,aACL,KAAMjhB,EAAAA,IAACqB,GAAA,CAAW,UAAU,SAAA,CAAU,EACtC,QAAS8gB,EAAkBR,CAAW,EACtC,SAAUF,GAAc,CAAA,CAAA,EAG1BzhB,EAAAA,IAACihB,GAAA,CACC,QAAQ,OACR,KAAK,UACL,KAAMjhB,EAAAA,IAACsZ,GAAA,CAAO,UAAU,SAAA,CAAU,EAClC,QAAS6I,EAAkBP,CAAS,CAAA,CAAA,EAGtC5hB,EAAAA,IAACihB,GAAA,CACC,QAAQ,SACR,KAAK,cACL,KAAMjhB,EAAAA,IAACyR,GAAA,CAAK,UAAU,SAAA,CAAU,EAChC,QAAS0Q,EAAkBN,CAAK,CAAA,CAAA,CAClC,EACF,EAECQ,GACCriB,EAAAA,IAAC,IAAA,CAAE,UAAU,+EACV,SAAAqiB,EACH,EAIDN,GAAa,KAAOvc,EAAQ,YAC3BzF,EAAAA,KAAC,MAAA,CAAI,UAAU,0FACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAUohB,GAAU,CAClBA,EAAM,gBAAA,EACNY,IAASxc,CAAO,CAClB,EACA,UAAU,iKACV,aAAW,eACZ,SAAA,MAAA,CAAA,EAGDxF,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,IAAC,EACjCA,EAAAA,IAAC,SAAA,CACC,QAAUohB,GAAU,CAClBA,EAAM,gBAAA,EACNa,IAAWzc,CAAO,CACpB,EACA,UAAU,8JACV,aAAW,iBACZ,SAAA,QAAA,CAAA,CAED,EACF,EAIFxF,EAAAA,IAAC,MAAA,CAAI,UAAU,gCACb,SAAAD,EAAAA,KAAC,SAAA,CACC,QAAUqhB,GAAU,CAClBA,EAAM,gBAAA,EACNU,IAAiBtc,CAAO,CAC1B,EACA,UAAU,qNACV,aAAW,4BAEX,SAAA,CAAAxF,EAAAA,IAACid,GAAA,CAAa,UAAU,SAAA,CAAU,EAClCjd,EAAAA,IAAC,QAAK,SAAA,kBAAA,CAAgB,CAAA,CAAA,CAAA,CACxB,CACF,CAAA,EACF,CAEJ,CChLA,SAASsiB,GAAa,CACpB,KAAM9gB,EACN,MAAAkX,EACA,OAAA5a,EACA,QAAAojB,EACA,MAAAqB,EAAQ,MACV,EAMG,CACD,MAAMC,EAAgB,IAAM,CAC1B,OAAQD,EAAA,CACN,IAAK,MAAO,MAAO,qBACnB,IAAK,OAAQ,MAAO,sBACpB,IAAK,SAAU,MAAO,wBACtB,IAAK,QAAS,MAAO,uBACrB,QAAS,MAAO,qBAAA,CAEpB,EAEA,OACExiB,EAAAA,KAAC,SAAA,CACC,QAAAmhB,EACA,UAAW,6CAA6CsB,EAAA,CAAe,mKACvE,aAAY,GAAG1kB,CAAM,KAAK4a,CAAK,IAE/B,SAAA,CAAA1Y,EAAAA,IAACwB,EAAA,CAAK,UAAU,UAAU,cAAY,OAAO,EAC7CxB,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAW,SAAA0Y,CAAA,CAAM,CAAA,CAAA,CAAA,CAGvC,CAEA,SAAwB+J,GAAQ,CAAE,QAAAjd,EAAS,eAAAkd,EAAgB,QAAAC,EAAS,UAAAC,GAA2B,CAC7F,MAAMC,EAAgBC,GAChBA,GAAO,KACDA,EAAM,KAAS,QAAQ,CAAC,EAAI,IAC3BA,GAAO,KACRA,EAAM,KAAM,QAAQ,CAAC,EAAI,IAE5BA,EAAI,SAAA,EAGb,OACE/iB,EAAAA,KAAC,MAAA,CAAI,UAAU,mGAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wEAEZ,SAAA,CAAAyF,EAAQ,cAAgB,QACvBzF,EAAAA,KAAC,MAAA,CAAI,UAAU,kIACb,SAAA,CAAAC,EAAAA,IAACqb,GAAA,CAAI,UAAU,SAAA,CAAU,EACzBtb,EAAAA,KAAC,OAAA,CAAK,UAAU,UAAW,SAAA,CAAA8iB,EAAard,EAAQ,WAAW,EAAE,QAAA,CAAA,CAAM,CAAA,EACrE,EAIFzF,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACsiB,GAAA,CACC,KAAMS,GACN,MAAOvd,EAAQ,aAAe,EAC9B,OAAO,OACP,QAAS,IAAMkd,IAAiB,OAAQld,EAAQ,EAAE,EAClD,MAAM,KAAA,CAAA,EAGRxF,EAAAA,IAACsiB,GAAA,CACC,KAAMjC,GACN,MAAO7a,EAAQ,gBAAkB,EACjC,OAAO,UACP,QAAS,IAAMod,IAAYpd,CAAO,EAClC,MAAM,MAAA,CAAA,EAGRxF,EAAAA,IAACsiB,GAAA,CACC,KAAMU,GACN,MAAOxd,EAAQ,eAAiB,EAChC,OAAO,SACP,QAAS,IAAMkd,IAAiB,SAAUld,EAAQ,EAAE,EACpD,MAAM,QAAA,CAAA,EAGRxF,EAAAA,IAACsiB,GAAA,CACC,KAAMvF,GACN,MAAO,EACP,OAAO,QACP,QAAS,IAAM4F,IAAUnd,CAAO,EAChC,MAAM,OAAA,CAAA,CACR,CAAA,CACF,CAAA,EACF,EAGCA,EAAQ,wBAA0B,GACjCzF,EAAAA,KAAC,MAAA,CAAI,UAAU,kFAAkF,KAAK,QAAQ,aAAW,sBACvH,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,oDAAoD,KAAK,cAAc,gBAAewF,EAAQ,wBAA0BA,EAAQ,4BAA6B,gBAAe,EAAG,gBAAeA,EAAQ,wBAAyB,aAAY,GAAGA,EAAQ,2BAA2B,iCAAiCA,EAAQ,uBAAuB,SAC9V,SAAAxF,EAAAA,IAAC,MAAA,CACC,UAAU,kDACV,MAAO,CACL,MAAO,IAAKwF,EAAQ,wBAA0BA,EAAQ,6BAA+BA,EAAQ,wBAA2B,GAAG,GAAA,CAC7H,CAAA,EAEJ,EACAzF,EAAAA,KAAC,QAAK,UAAU,6BAA6B,aAAY,GAAGyF,EAAQ,2BAA2B,yBAC5F,SAAA,CAAAA,EAAQ,4BAA4B,IAAEA,EAAQ,uBAAA,CAAA,CACjD,CAAA,EACF,EACAxF,EAAAA,IAAC,QAAK,SAAA,aAAA,CAAW,CAAA,CAAA,CACnB,CAAA,EAEJ,CAEJ,CC5FA,SAAwBijB,GAAY,CAClC,QAAAzd,EACA,YAAAmc,EACA,QAAAgB,EACA,eAAAD,EACA,eAAAZ,EACA,MAAAD,EACA,YAAAE,EACA,OAAAC,EACA,SAAAC,EACA,UAAAW,EACA,WAAAM,EACA,UAAAtB,EACA,YAAAuB,CACF,EAAqB,CACnB,MAAMC,EAAkB,IAAM,CACxBF,GACFA,EAAW1d,CAAO,CAEtB,EAEMqd,EAAgBC,GACKA,GAAQ,MAAQ,OAAO,MAAMA,CAAG,EAChD,IAGLA,GAAO,KACDA,EAAM,KAAS,QAAQ,CAAC,EAAI,IAC3BA,GAAO,KACRA,EAAM,KAAM,QAAQ,CAAC,EAAI,IAE5BA,EAAI,SAAA,EAGPO,EAAc7d,EAAQ,cAAgB,EACtC8d,EAAkB9d,EAAQ,kBAAoB,EAC9C+d,EAAc,KAAK,IAAIF,EAAcC,EAAiB,CAAC,EACvDE,EAA4Bhe,EAAQ,6BAA+B,EACnEie,EAAU,OAAOje,EAAQ,iBAAoB,SAC/CA,EAAQ,gBACR,OAAOA,EAAQ,eAAe,GAAK,EACjCke,EAAYle,EAAQ,WAAa,IAAI,KAAKA,EAAQ,UAAU,EAAI,KAChEme,EAAkBD,GAAa,CAAC,OAAO,MAAMA,EAAU,SAAS,EAClEA,EAAU,mBAAA,EACV,WAEJ,OACE3jB,EAAAA,KAAC,MAAA,CACC,UAAW,uSAAuSojB,GAAe3d,EAAQ,aAAe,yCAA2C,EAAE,GACrY,QAAS4d,EACT,SAAU,EACV,KAAK,UACL,aAAY,cAAc5d,EAAQ,cAAgBA,EAAQ,kBAAoB,iBAAiB,KAAKA,EAAQ,KAAK,GACjH,UAAYhI,GAAM,EACZA,EAAE,MAAQ,SAAWA,EAAE,MAAQ,OACjCA,EAAE,eAAA,EACF4lB,EAAA,EAEJ,EAGA,SAAA,CAAArjB,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAAyF,EAAQ,SACPzF,OAAC,OAAA,CAAK,UAAU,mMACd,SAAA,CAAAC,EAAAA,IAACsa,GAAA,CAAS,UAAU,SAAA,CAAU,EAC9Bta,EAAAA,IAAC,QAAK,SAAA,MAAA,CAAI,CAAA,EACZ,GAEAmjB,GAAe3d,EAAQ,eACvBzF,EAAAA,KAAC,OAAA,CAAK,UAAU,mOACd,SAAA,CAAAC,EAAAA,IAAC4jB,GAAA,CAAI,UAAU,SAAA,CAAU,EACzB5jB,EAAAA,IAAC,QAAK,SAAA,WAAA,CAAS,CAAA,CAAA,CACjB,CAAA,EAEJ,EAECwF,EAAQ,cAAgB,QACvBzF,EAAAA,KAAC,OAAI,UAAU,yLAAyL,KAAK,OAAO,aAAY,GAAG8iB,EAAard,EAAQ,WAAW,CAAC,SAClQ,SAAA,CAAAxF,EAAAA,IAACqb,GAAA,CAAI,UAAU,UAAU,cAAY,OAAO,EAC5Ctb,EAAAA,KAAC,OAAA,CAAK,UAAU,UAAW,SAAA,CAAA8iB,EAAard,EAAQ,WAAW,EAAE,QAAA,CAAA,CAAM,CAAA,CAAA,CACrE,CAAA,EAEJ,EAGCA,EAAQ,WACPxF,EAAAA,IAAC,MAAA,CAAI,UAAU,6CAA6C,QAAUxC,GAAMA,EAAE,gBAAA,EAC5E,SAAAwC,EAAAA,IAAC,MAAA,CACC,IAAKwF,EAAQ,UACb,IAAKA,EAAQ,MACb,UAAU,6EACV,QAAUhI,GAAM,CACbA,EAAE,OAA4B,MAAM,QAAU,MACjD,CAAA,CAAA,EAEJ,EAIFuC,EAAAA,KAAC,OAAI,UAAU,OAAO,QAAUvC,GAAMA,EAAE,gBAAA,EACtC,SAAA,CAAAwC,EAAAA,IAAC,KAAA,CAAG,UAAU,yJACX,SAAAwF,EAAQ,MACX,EACCA,EAAQ,aACPxF,EAAAA,IAAC,KAAE,UAAU,0DAA2D,WAAQ,YAAY,EAI9FD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,kRAAkR,aAAY,YAAYwF,EAAQ,cAAgBA,EAAQ,kBAAoB,SAAS,GAClX,UAAAA,EAAQ,cAAgBA,EAAQ,kBAAoB,KAAK,CAAC,EAAE,aAAY,CAC5E,EACAzF,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,MAAC,QAAK,UAAU,wIAAwI,KAAK,OAAO,aAAY,iBAAiBwF,EAAQ,cAAgBA,EAAQ,kBAAoB,iBAAiB,GACnQ,WAAQ,cAAgBA,EAAQ,kBAAoB,kBACvD,EACAxF,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,IAAC,EACjCA,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAyB,SAAA2jB,EAAgB,EACxDne,EAAQ,UACPzF,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,IAAC,EACjCA,EAAAA,IAAC,OAAA,CAAK,UAAU,mCAAoC,WAAQ,QAAA,CAAS,CAAA,CAAA,CACvE,CAAA,EAEJ,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,wBACb,SAAA,CAAA8iB,EAAaU,CAAW,EAAE,eAAA,EAC7B,EACAvjB,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,IAAC,EACzCD,EAAAA,KAAC,OAAA,CAAK,UAAU,wBACb,SAAA,CAAA8iB,EAAaQ,CAAW,EAAE,eAAA,EAC7B,EACCG,EAA4B,GAC3BzjB,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,IAAC,EACzCD,EAAAA,KAAC,OAAA,CAAK,UAAU,qCACb,SAAA,CAAA8iB,EAAaW,CAAyB,EAAE,wBAAA,CAAA,CAC3C,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,EACF,EAEAzjB,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iNAAiN,KAAK,OAAO,aAAY,qBAAqB0jB,EAAQ,QAAQ,CAAC,CAAC,GAC7R,SAAA,CAAAzjB,EAAAA,IAACqB,GAAA,CAAW,UAAU,SAAA,CAAU,EAChCtB,EAAAA,KAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,CAAA,IAAE0jB,EAAQ,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EAC/D,EACAzjB,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,iBAAA,CAAe,CAAA,CAAA,CACxD,CAAA,EACF,EAGCwF,EAAQ,cACPxF,EAAAA,IAAC,MAAA,CAAI,UAAU,uHACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACid,GAAA,CAAa,UAAU,wBAAwB,cAAY,OAAO,EACnEld,EAAAA,KAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,CAAA,WAASyF,EAAQ,QAAA,CAAA,CAAS,CAAA,EACpE,EACAxF,EAAAA,IAAC,IAAA,CACC,KAAMwF,EAAQ,aACd,OAAO,SACP,IAAI,sBACJ,UAAU,4MACV,QAAUhI,GAAMA,EAAE,gBAAA,EAClB,aAAY,mBAAmBgI,EAAQ,QAAQ,sBAChD,SAAA,WAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,CAAA,EAEJ,EAGAxF,EAAAA,IAACyiB,GAAA,CACC,QAAAjd,EACA,eAAAkd,EACA,QAAAC,EACA,UAAAC,CAAA,CAAA,EAIF5iB,EAAAA,IAAC0hB,GAAA,CACC,QAAAlc,EACA,YAAAmc,EACA,UAAAC,EACA,MAAAC,EACA,YAAAE,EACA,OAAAC,EACA,SAAAC,CAAA,CAAA,CACF,CAAA,CAAA,CAGN,CChOA,SAAwB4B,GAAiB,CAAE,KAAA/U,EAAM,QAAAgV,GAAkC,CACjF,MAAMC,EAAc,CAACvf,EAAuBwf,EAAW,YAAc,CACnE,MAAMC,EAAQzf,GAASA,EAAM,OAAO,OAAS,EAAIA,EAAQwf,EACzD,OAAOC,EAAM,OAAO,CAAC,EAAE,cAAgBA,EAAM,MAAM,CAAC,CACtD,EAEMC,EAAsBC,GAA+B,CAEzD,QADeA,GAAc,IAAI,YAAA,EACzB,CACN,IAAK,OAAQ,MAAO,+CACpB,IAAK,SAAU,MAAO,kDACtB,IAAK,OAAQ,MAAO,yCACpB,QAAS,MAAO,2CAAA,CAEpB,EAEMC,EAAkB7I,GAA2B,CAEjD,QADeA,GAAU,IAAI,YAAA,EACrB,CACN,IAAK,SAAU,MAAO,+CACtB,IAAK,UAAW,MAAO,kDACvB,IAAK,YAAa,MAAO,4CACzB,IAAK,QAAS,MAAO,4CACrB,QAAS,MAAO,2CAAA,CAEpB,EAEM8I,EAAkBC,GAAqB,CAC3C,MAAMC,EAAO,IAAI,KAAKD,CAAQ,EACxBE,MAAU,KACVC,EAAWF,EAAK,QAAA,EAAYC,EAAI,QAAA,EAChCE,EAAW,KAAK,KAAKD,GAAY,IAAO,GAAK,GAAK,GAAG,EAE3D,OAAIC,EAAW,EACN,GAAG,KAAK,IAAIA,CAAQ,CAAC,gBACnBA,IAAa,EACf,YACEA,IAAa,EACf,eAEA,GAAGA,CAAQ,YAEtB,EAEMC,EAAkB,IAClB7V,EAAK,WAAa,EAAU,GACxBA,EAAK,gBAAkBA,EAAK,UAAU,QAAQ,CAAC,EAGnDsU,EAAkB,IAAM,CAE5B,OAAO,SAAS,KAAO,UAAUtU,EAAK,EAAE,EAC1C,EAEM8V,EAAe9V,EAAK,eAAiBA,EAAK,aAAe,6GAA6GA,EAAK,EAAE,GAEnL,OACE/O,EAAAA,KAAC,MAAA,CACC,UAAU,4IACV,QAASqjB,EAET,SAAA,CAAApjB,EAAAA,IAAC,OAAI,UAAU,mBACb,SAAAA,MAAC,MAAA,CAAI,UAAU,2CACb,SAAAA,EAAAA,IAAC,MAAA,CACC,IAAK4kB,EACL,IAAK9V,EAAK,MACV,UAAU,+EACV,QAAUsS,GAAU,CACjBA,EAAM,OAA4B,IAAM,qGAAqGtS,EAAK,EAAE,EACvJ,CAAA,CAAA,EAEJ,CAAA,CACF,EAGA/O,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,yIACX,UAAA8O,EAAK,cAAgB,KAAK,CAAC,EAAE,YAAA,CAAY,CAC7C,EACA/O,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,MAAC,OAAA,CAAK,UAAU,gFACb,SAAA8O,EAAK,cAAgB,kBACxB,EACA9O,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,IAAC,EACjCA,EAAAA,IAAC,OAAA,CAAK,UAAU,wBACb,SAAA,IAAI,KAAK8O,EAAK,UAAU,EAAE,mBAAA,CAAmB,CAChD,CAAA,EACF,EACA/O,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,wBACb,SAAA,CAAA+O,EAAK,qBAAqB,eAAA,EAC7B,EACA9O,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,IAAC,QACxC,OAAA,CAAK,UAAU,wBACb,SAAA8O,EAAK,UAAY,cAAA,CACpB,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAEA/O,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAC,EAAAA,IAAC+P,GAAA,CAAM,UAAU,SAAA,CAAU,EAC3BhQ,EAAAA,KAAC,OAAA,CAAK,UAAU,wBACb,SAAA,CAAA+O,EAAK,mBAAmB,OAAA,CAAA,CAC3B,CAAA,EACF,EACA9O,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,gBAAA,CAAc,CAAA,CAAA,CACvD,CAAA,EACF,EAGAD,EAAAA,KAAC,OAAI,UAAU,OAAO,QAAUvC,GAAMA,EAAE,gBAAA,EACtC,SAAA,CAAAwC,EAAAA,IAAC,KAAA,CAAG,UAAU,iGACX,SAAA8O,EAAK,MACR,EACCA,EAAK,aACJ9O,EAAAA,IAAC,KAAE,UAAU,qDAAsD,WAAK,WAAA,CAAY,CAAA,EAExF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,MAAC,QAAK,UAAW,qDAAqDokB,EAAetV,EAAK,MAAM,CAAC,GAC9F,SAAAA,EAAK,OAAO,OAAO,CAAC,EAAE,YAAA,EAAgBA,EAAK,OAAO,MAAM,CAAC,EAC5D,EACI9O,EAAAA,IAAC,OAAA,CAAK,UAAW,qDAAqDkkB,EAAmBpV,EAAK,UAAU,CAAC,GACtG,SAAAiV,EAAYjV,EAAK,UAAU,CAAA,CAC9B,EACHA,EAAK,eACJ9O,EAAAA,IAAC,OAAA,CAAK,UAAU,8FAA8F,SAAA,aAE9G,EAED8O,EAAK,cACJ9O,EAAAA,IAAC,OAAA,CAAK,UAAU,uGAAuG,SAAA,WAAA,CAEvH,CAAA,EAEJ,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAC,EAAAA,IAACsZ,GAAA,CAAO,UAAU,yBAAA,CAA0B,EAC5CtZ,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,MAAA,CAAI,CAAA,EAC9C,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAmC,WAAK,SAAS,EAChEA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,MAAA,CAAI,CAAA,EAC7C,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAC,EAAAA,IAACsB,EAAA,CAAK,UAAU,yBAAA,CAA0B,EAC1CtB,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,QAAA,CAAM,CAAA,EAChD,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,oCAAqC,WAAK,gBAAgB,EACzEA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,MAAA,CAAI,CAAA,EAC7C,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAC,EAAAA,IAACqB,GAAA,CAAW,UAAU,wBAAA,CAAyB,EAC/CrB,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,KAAA,CAAG,CAAA,EAC7C,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mCAAoC,SAAA,CAAA4kB,EAAA,EAAkB,GAAA,EAAC,EACtE3kB,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,SAAA,CAAO,CAAA,EAChD,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAC,EAAAA,IAACgP,GAAA,CAAM,UAAU,uBAAA,CAAwB,EACzChP,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,cAAA,CAAY,CAAA,EACtD,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAmC,WAAK,qBAAqB,EAC5EA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,QAAA,CAAM,CAAA,CAAA,CAC/C,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC2K,GAAA,CAAM,UAAU,SAAA,CAAU,EAC3B3K,MAAC,QAAM,SAAA8O,EAAK,YAAcuV,EAAevV,EAAK,WAAW,EAAI,aAAA,CAAc,CAAA,EAC7E,EAECA,EAAK,cACJ/O,OAAC,MAAA,CAAI,UAAU,UAAU,SAAA,CAAA,iBACR+O,EAAK,aAAa,OAAS,GACtCA,EAAK,aAAa,UAAU,EAAG,EAAE,EAAI,MACrCA,EAAK,YAAA,CAAA,CACX,CAAA,EAEJ,EAGA/O,EAAAA,KAAC,MAAA,CAAI,UAAU,kEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAC,EAAAA,IAACghB,GAAA,CAAS,UAAU,SAAA,CAAU,SAC7B,OAAA,CAAK,SAAA,CAAA,WAAS,IAAI,KAAKlS,EAAK,UAAU,EAAE,mBAAA,CAAmB,CAAA,CAAE,CAAA,EAChE,EAEA9O,EAAAA,IAAC,SAAA,CACC,QAAUxC,GAAM,CACdA,EAAE,gBAAA,EACFsmB,IAAUhV,CAAI,CAChB,EACA,UAAW,oGACTA,EAAK,QAAQ,gBAAkB,SAC3B,yIACA,8CACN,GACA,SAAUA,EAAK,QAAQ,YAAA,IAAkB,SAExC,SAAAA,EAAK,QAAQ,YAAA,IAAkB,SAC9B/O,EAAAA,KAAAiK,WAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC,QAAK,SAAA,WAAA,CAAS,EACfA,EAAAA,IAACsZ,GAAA,CAAO,UAAU,SAAA,CAAU,CAAA,CAAA,CAC9B,EAEAvZ,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC,QAAK,SAAA,eAAA,CAAa,EACnBA,EAAAA,IAAC2K,GAAA,CAAM,UAAU,SAAA,CAAU,CAAA,CAAA,CAC7B,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAAA,CAAA,CAGN,CC7OA,MAAMka,GAAmC,IAAM,CAC7C,MAAMrlB,EAAgB,IAAM,CAC1B,OAAO,SAAS,OAAA,CAClB,EAEA,OACEO,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,oHACb,eAACqB,GAAA,CAAW,UAAU,4BAA4B,CAAA,CACpD,EACArB,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,8BAEzD,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,sCAAsC,SAAA,wIAGnD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,OAAO,SAAS,KAAO,UACtC,UAAU,yMAEV,SAAA,CAAAC,EAAAA,IAACoV,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BpV,EAAAA,IAAC,QAAK,SAAA,gBAAA,CAAc,CAAA,CAAA,CAAA,EAEtBD,EAAAA,KAAC,SAAA,CACC,QAASP,EACT,UAAU,oGAEV,SAAA,CAAAQ,EAAAA,IAACI,GAAA,CAAU,UAAU,SAAA,CAAU,EAC/BJ,EAAAA,IAAC,QAAK,SAAA,cAAA,CAAY,CAAA,CAAA,CAAA,CACpB,CAAA,CACF,CAAA,EACF,CAEJ,ECZA,SAAwB8kB,GAAmB,CAAE,OAAApd,EAAQ,QAAAC,EAAS,SAAAod,EAAU,mBAAAC,GAA+C,CACrH,KAAM,CAACC,EAAgBC,CAAiB,EAAInmB,EAAAA,SAA2B,MAAM,EACvE,CAAComB,EAAkBC,CAAmB,EAAIrmB,EAAAA,SAAS,EAAE,EACrD,CAACsmB,EAAcC,CAAe,EAAIvmB,EAAAA,SAAS,EAAK,EAChD,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAS,EAAE,EAC/B,CAACwmB,EAAYC,CAAa,EAAIzmB,EAAAA,SAAS,CAAE,QAAS,EAAG,EAE3DM,EAAAA,UAAU,IAAM,CACVqI,GACF+d,EAAA,CAEJ,EAAG,CAAC/d,CAAM,CAAC,EAEX,MAAM+d,EAAkB,SAAY,CAClC,GAAI,CACF,MAAM7hB,EAAW,MAAM,MAAM,uBAAuB,EACpD,GAAIA,EAAS,GAAI,CAEf,MAAM8hB,GADU,MAAM9hB,EAAS,KAAA,GACL,KAAM+hB,GAAWA,EAAE,gBAAkB,KAAK,EACpEH,EAAc,CAAE,QAASE,GAAW,SAAW,EAAG,CACpD,CACF,OAAS9nB,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,CAChD,CACF,EAEMod,EAAe,MAAOxd,GAAuB,CACjDA,EAAE,eAAA,EACF8nB,EAAgB,EAAI,EACpB/b,EAAS,EAAE,EAEX,GAAI,CACF,MAAM3F,EAAW,MAAM,MAAM,yBAAyBmhB,EAAS,EAAE,WAAY,CAC3E,OAAQ,OACR,QAAS,CACP,eAAgB,kBAAA,EAElB,KAAM,KAAK,UAAU,CACnB,kBAAmB,WAAWI,CAAgB,EAC9C,gBAAiBF,CAAA,CAClB,CAAA,CACF,EAED,GAAIrhB,EAAS,GACXohB,EAAA,EACArd,EAAA,EACAyd,EAAoB,EAAE,EACtBF,EAAkB,MAAM,MACnB,CACL,MAAMrb,EAAY,MAAMjG,EAAS,KAAA,EACjC2F,EAASM,EAAU,OAAS,4BAA4B,CAC1D,CACF,MAAgB,CACdN,EAAS,4BAA4B,CACvC,QAAA,CACE+b,EAAgB,EAAK,CACvB,CACF,EAEMM,EAAkBT,GACrB,WAAWA,CAAgB,EAAIJ,EAAS,MAAM,QAAQ,CAAC,EAAI,IAExDc,EAAuBC,GAAsB,CACjD,MAAMtB,MAAU,KAEV/b,EADU,IAAI,KAAKqd,CAAS,EACb,QAAA,EAAYtB,EAAI,QAAA,EAErC,GAAI/b,GAAQ,EAAG,MAAO,UAEtB,MAAME,EAAQ,KAAK,MAAMF,GAAQ,IAAO,GAAK,GAAG,EAC1CC,EAAU,KAAK,MAAOD,GAAQ,IAAO,GAAK,KAAQ,IAAO,GAAG,EAElE,OAAIE,EAAQ,GAEH,GADM,KAAK,MAAMA,EAAQ,EAAE,CACpB,KAAKA,EAAQ,EAAE,IAGxB,GAAGA,CAAK,KAAKD,CAAO,GAC7B,EAEA,OAAKhB,QAGF,MAAA,CAAI,UAAU,iFACb,SAAA3H,EAAAA,KAAC,MAAA,CAAI,UAAU,mEACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,+BACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,wDACZ,SAAA,CAAAC,EAAAA,IAACqB,GAAA,CAAW,UAAU,4BAAA,CAA6B,EAAE,sBAAA,EAEvD,EACArB,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,oCAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,CAAA,CACF,CAAA,CACF,EAEAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,MAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,4BAA4B,SAAA,mBAAgB,EAC1DA,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAyB,WAAS,QAAA,CAAS,CAAA,EAC7D,EAEC+kB,EAAS,eACR/kB,EAAAA,IAAC,KAAE,UAAU,6BAA8B,WAAS,cAAc,EAGpED,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,SAAM,EACnCD,EAAAA,KAAC,IAAA,CAAE,UAAU,gCACX,SAAA,CAAAC,EAAAA,IAACsZ,GAAA,CAAO,UAAU,4BAAA,CAA6B,EAC9CyL,EAAS,cAAc,IAAEA,EAAS,aAAa,eAAA,CAAe,CAAA,CACjE,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAA/kB,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,eAAY,EACzCD,EAAAA,KAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,IAAEglB,EAAS,UAAU,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EAC5E,SACC,MAAA,CACC,SAAA,CAAA/kB,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,OAAI,EACjCD,EAAAA,KAAC,IAAA,CAAE,UAAU,4BAA6B,SAAA,CAAAglB,EAAS,KAAK,UAAA,CAAA,CAAQ,CAAA,EAClE,SACC,MAAA,CACC,SAAA,CAAA/kB,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,YAAS,EACtCD,EAAAA,KAAC,IAAA,CAAE,UAAU,gCACX,SAAA,CAAAC,EAAAA,IAAC2K,GAAA,CAAM,UAAU,4BAAA,CAA6B,EAC7Ckb,EAAoBd,EAAS,UAAU,CAAA,CAAA,CAC1C,CAAA,CAAA,CACF,CAAA,EACF,EAEAhlB,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,uBAAoB,EAC9DD,EAAAA,KAAC,IAAA,CAAE,UAAU,oCACV,SAAA,CAAAglB,EAAS,aAAa,YAAA,EAAc,OAAKA,EAAS,uBAAuB,QAAQ,CAAC,EAAE,SAAA,CAAA,CACvF,CAAA,CAAA,CACF,CAAA,EACF,EAEAhlB,EAAAA,KAAC,OAAA,CAAK,SAAUib,EAAc,UAAU,YACrC,SAAA,CAAApd,GACCmC,EAAAA,KAAC,MAAA,CAAI,UAAU,mEACb,SAAA,CAAAC,EAAAA,IAACuI,GAAA,CAAY,UAAU,2BAAA,CAA4B,EACnDvI,EAAAA,IAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,EAC7C,SAID,MAAA,CACC,SAAA,CAAAoC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,kBAEhE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMklB,EAAkB,MAAM,EACvC,UAAW,6CACTD,IAAmB,OACf,8CACA,+DACN,GAEA,SAAAllB,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,OAAI,EACjCD,EAAAA,KAAC,IAAA,CAAE,UAAU,eAAe,SAAA,CAAA,eAAaglB,EAAS,aAAa,eAAA,CAAe,CAAA,CAAE,CAAA,CAAA,CAClF,CAAA,CAAA,EAGF/kB,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMklB,EAAkB,OAAO,EACxC,UAAW,6CACTD,IAAmB,QACf,wCACA,6DACN,GAEA,SAAAllB,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,QAAK,EAClCD,EAAAA,KAAC,IAAA,CAAE,UAAU,eAAe,SAAA,CAAA,kBAAgBglB,EAAS,aAAa,eAAA,CAAe,CAAA,CAAE,CAAA,CAAA,CACrF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAAhlB,EAAAA,KAAC,QAAA,CAAM,UAAU,+CACf,SAAA,CAAAC,EAAAA,IAAC+O,GAAA,CAAW,UAAU,qBAAA,CAAsB,EAAE,yBAAA,EAEhD,EACA/O,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,KAAK,OACL,YAAY,eACZ,MAAOmlB,EACP,SAAW3nB,GAAM4nB,EAAoB5nB,EAAE,OAAO,KAAK,EACnD,UAAU,+GACV,SAAQ,GACR,IAAI,IACJ,IAAK+nB,EAAW,OAAA,CAAA,EAElBxlB,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAA,OAAC,OAAA,CAAK,SAAA,CAAA,eAAawlB,EAAW,QAAQ,QAAQ,CAAC,CAAA,EAAE,EACjDvlB,EAAAA,IAAC,QAAK,SAAA,YAAA,CAAU,CAAA,CAAA,CAClB,CAAA,EACF,EAGAA,EAAAA,IAAC,MAAA,CAAI,UAAU,yBACZ,SAAA,CAAC,EAAG,GAAI,GAAI,EAAE,EAAE,IAAKqJ,GACpBtJ,EAAAA,KAAC,SAAA,CAEC,KAAK,SACL,QAAS,IAAMqlB,EAAoB/b,EAAO,UAAU,EACpD,SAAUA,EAASkc,EAAW,QAC9B,UAAU,uHACX,SAAA,CAAA,IACGlc,CAAA,CAAA,EANGA,CAAA,CAQR,EACH,EAGC8b,GACCplB,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,qBAAkB,EACjED,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,mBAAgB,QAC/C,OAAA,CAAK,UAAU,4BACb,SAAAilB,EAAe,aAAY,CAC9B,CAAA,EACF,EACAllB,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,iBAAc,EAC9CD,EAAAA,KAAC,OAAA,CAAK,UAAU,cAAc,SAAA,CAAA,IAAEolB,CAAA,CAAA,CAAiB,CAAA,EACnD,EACAplB,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,oBAAiB,EACjDD,EAAAA,KAAC,OAAA,CAAK,UAAU,6BAA6B,SAAA,CAAA,IAAE6lB,CAAA,CAAA,CAAgB,CAAA,EACjE,EACA7lB,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,oBAAiB,EACjDD,EAAAA,KAAC,OAAA,CAAK,UAAU,6BAA6B,SAAA,CAAA,KACxC,WAAW6lB,CAAe,EAAI,WAAWT,CAAgB,GAAG,QAAQ,CAAC,CAAA,CAAA,CAC1E,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAIFplB,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS2H,EACT,UAAU,qFACX,SAAA,QAAA,CAAA,EAGD3H,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,SAAUqlB,GAAgB,CAACF,GAAoB,WAAWA,CAAgB,EAAII,EAAW,QACzF,UAAW,sDACTN,IAAmB,OACf,6CACA,wCACN,mDAEC,SAAAI,EAAe,aAAe,WAAWJ,EAAe,aAAa,KAAKE,GAAoB,GAAG,EAAA,CAAA,CACpG,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EA1MkB,IA4MtB,CC3SA,SAAwBY,GAAS,CAAE,QAAAvgB,EAAS,OAAAkC,EAAQ,QAAAC,EAAS,MAAAka,GAAwB,CACnF,KAAM,CAACmE,EAAWC,CAAY,EAAIlnB,EAAAA,SAAiB,CAAC,EAC9C,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EAEtCmnB,EAAa,CAAC,EAAG,EAAG,GAAI,GAAI,GAAI,GAAG,EAEnCC,EAAY,SAAY,CAC5B,GAAI,EAAAH,EAAY,GAEhB,CAAAplB,EAAW,EAAI,EACf,GAAI,CACF,MAAMihB,EAAMrc,EAASwgB,CAAS,EAC9Bre,EAAA,EACAse,EAAa,CAAC,CAChB,OAASroB,EAAO,CACd,QAAQ,MAAM,sBAAuBA,CAAK,CAC5C,QAAA,CACEgD,EAAW,EAAK,CAClB,EACF,EAEA,OAAK8G,QAGF,MAAA,CAAI,UAAU,iFACb,SAAA3H,EAAAA,KAAC,MAAA,CAAI,UAAU,sCAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,yIACX,UAAAwF,EAAQ,cAAgBA,EAAQ,kBAAoB,KAAK,CAAC,EAAE,YAAA,CAAY,CAC5E,SACC,MAAA,CACC,SAAA,CAAAxF,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,cAAW,EAC3DD,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,WAASyF,EAAQ,cAAgBA,EAAQ,kBAAoB,cAAA,CAAA,CAAe,CAAA,CAAA,CACnH,CAAA,EACF,EACAxF,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAGAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,MACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,oBAAiB,EAClEA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,yCAAsC,QAG/E,MAAA,CAAI,UAAU,8BACZ,SAAAkmB,EAAW,IAAK7c,GACfrJ,EAAAA,IAAC,SAAA,CAEC,QAAS,IAAMimB,EAAa5c,CAAM,EAClC,UAAW,wEACT2c,IAAc3c,EACV,kDACA,6CACN,GAEA,SAAAtJ,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAC,EAAAA,IAACqI,GAAA,CAAM,UAAU,SAAA,CAAU,EAC3BrI,EAAAA,IAAC,QAAM,SAAAqJ,CAAA,CAAO,CAAA,CAAA,CAChB,CAAA,EAXKA,CAAA,CAaR,EACH,EAGAtJ,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,SACb,SAAAA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,IAAI,IACJ,IAAI,OACJ,MAAOgmB,EACP,SAAWxoB,GAAMyoB,EAAa,KAAK,IAAI,EAAG,SAASzoB,EAAE,OAAO,KAAK,GAAK,CAAC,CAAC,EACxE,UAAU,gHACV,YAAY,eAAA,CAAA,EAEhB,EACAuC,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAC,EAAAA,IAACqI,GAAA,CAAM,UAAU,SAAA,CAAU,EAC3BrI,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,MAAA,CAAI,CAAA,CAAA,CAChC,CAAA,CAAA,CACF,CAAA,EACF,QAGC,MAAA,CAAI,UAAU,iCACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,iBAAc,EACnDD,EAAAA,KAAC,IAAA,CAAE,UAAU,sCACX,SAAA,CAAAC,EAAAA,IAACqI,GAAA,CAAM,UAAU,qCAAA,CAAsC,EACtD2d,EAAU,OAAA,CAAA,CACb,CAAA,EACF,EACAjmB,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,mBAAgB,EACrDD,EAAAA,KAAC,IAAA,CAAE,UAAU,oCAAoC,SAAA,CAAA,KAAGimB,EAAY,KAAM,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,CAAA,CACnF,CAAA,CAAA,CACF,CAAA,CACF,EAGAjmB,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,kHACX,SAAA,QAAA,CAAA,EAGD3H,EAAAA,IAAC,SAAA,CACC,QAASmmB,EACT,SAAUxlB,GAAWqlB,EAAY,EACjC,UAAU,iQAET,WACCjmB,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC,MAAA,CAAI,UAAU,8EAAA,CAA+E,EAC9FA,EAAAA,IAAC,QAAK,SAAA,YAAA,CAAU,CAAA,CAAA,CAClB,EAEAD,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAACyR,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BzR,EAAAA,IAAC,QAAK,SAAA,UAAA,CAAQ,CAAA,CAAA,CAChB,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAnHkB,IAqHtB,CCjHA,SAAwBomB,IAAW,CACjC,KAAM,CAAE,KAAAhjB,EAAM,OAAA+P,CAAA,EAAW1O,GAAA,EACnB/F,EAAWC,GAAA,EACX,CAAC0nB,EAAaC,CAAc,EAAIvnB,EAAAA,SAA6B,CAAA,CAAE,EAC/D,CAACwnB,EAAUC,CAAW,EAAIznB,EAAAA,SAAqB,CAAA,CAAE,EACjD,CAAC0nB,EAASC,CAAU,EAAI3nB,EAAAA,SAAuB,CAAA,CAAE,EACjD,CAACqU,EAAUC,CAAW,EAAItU,EAAAA,SAA0B,IAAI,EACxD,EAAG6B,CAAU,EAAI7B,EAAAA,SAAS,EAAI,EAC9B,CAAC0O,EAAWC,CAAY,EAAI3O,EAAAA,SAAyC,SAAS,EAC9E,CAAC4nB,EAAkBC,CAAmB,EAAI7nB,EAAAA,SAAgB,CAAA,CAAE,EAC5D,CAAC8nB,EAAcC,CAAe,EAAI/nB,EAAAA,SAAS,EAAK,EAChD,CAACgoB,EAAgBC,CAAiB,EAAIjoB,EAAAA,SAAS,EAAK,EACpD,CAACkoB,EAAuBC,CAAwB,EAAInoB,EAAAA,SAAS,EAAK,EAClE,EAAGooB,CAAoB,EAAIpoB,EAAAA,SAAS,EAAK,EACzC,CAACqoB,EAAiBC,CAAkB,EAAItoB,EAAAA,SAAkC,IAAI,EAC9E,CAACuoB,EAAkBC,CAAmB,EAAIxoB,EAAAA,SAA+C,IAAI,EAC7F,CAACyoB,EAAyBC,CAA0B,EAAI1oB,EAAAA,SAA8E,IAAI,EAC1I,CAAC2oB,EAAsBC,CAAuB,EAAI5oB,EAAAA,SAAS,EAAK,EAChE,CAAC6oB,EAAiBC,CAAkB,EAAI9oB,EAAAA,SAAkC,IAAI,EAC9E,CAAC+oB,EAAwBC,CAAyB,EAAIhpB,EAAAA,SAAS,EAAK,EACpE,CAACipB,EAAiBC,EAAkB,EAAIlpB,EAAAA,SAAkC,IAAI,EAC9E,CAACmpB,GAAuBC,CAAwB,EAAIppB,EAAAA,SAAS,EAAK,EAClE,CAACqpB,EAAmBC,CAAoB,EAAItpB,EAAAA,SAA+C,IAAI,EAC/F,CAACupB,EAAuBC,CAAwB,EAAIxpB,EAAAA,SAAS,EAAK,EAClE,CAACypB,EAAcC,CAAe,EAAI1pB,EAAAA,SAAS,EAAK,EAChD,CAAC2pB,GAAYC,EAAa,EAAI5pB,EAAAA,SAAkC,IAAI,EACpE,CAAC6pB,GAAkBC,EAAmB,EAAI9pB,EAAAA,SAAS,EAAK,EACxD,CAAC+pB,GAAgBC,EAAiB,EAAIhqB,EAAAA,SAAkC,IAAI,EAC5E,CAACiV,GAAcC,EAAe,EAAIlV,EAAAA,SAAS,EAAK,EAEhD8V,GAAerC,GAAiB,GAAGrQ,EAAY,GAAGqQ,CAAI,GAEtDiD,GACJrC,GAAU,WACTA,GAAU,MAAQA,EAAS,MAAM,MAAM,GAAG,EAAE,CAAC,EAAI,UACjDhQ,GAAM,SAAW,OAAOA,EAAK,QAAQ,EAAI,UACzCA,GAAM,MAAQA,EAAK,MAAM,MAAM,GAAG,EAAE,CAAC,EAAI,SAC1C,KAEIsS,GAAc,YAAY,mBAAmBD,EAAW,CAAC,GAE/DpW,EAAAA,UAAU,IAAM,CACd2pB,EAAA,EACAlU,EAAA,EAGA,MAAME,EAAsBoM,GAAsB,CAC5CpN,IAAgB,CAAEoN,EAAM,OAAmB,QAAQ,YAAY,GACjEnN,GAAgB,EAAK,CAEzB,EAEA,gBAAS,iBAAiB,YAAae,CAAkB,EAClD,IAAM,SAAS,oBAAoB,YAAaA,CAAkB,CAC3E,EAAG,CAAChB,EAAY,CAAC,EAEjB,MAAMiV,EAAqBzjB,GAA8B,CACvD9G,EAAS,YAAY8G,EAAQ,EAAE,EAAE,CACnC,EAEMoQ,EAAe,SAAY,CAC/B,GAAI,CACF,MAAMpJ,EAAY,aAAa,QAAQ,WAAW,EAC9CA,GACF,MAAM,MAAMqI,GAAY,kBAAkB,EAAG,CAC3C,OAAQ,OACR,QAAS,CACP,cAAiB,UAAUrI,CAAS,GACpC,eAAgB,kBAAA,CAClB,CACD,CAEL,OAAS5O,EAAO,CACd,QAAQ,MAAM,gBAAiBA,CAAK,CACtC,QAAA,CACE,aAAa,WAAW,WAAW,EACnCc,EAAS,OAAO,CAClB,CACF,EAEMsqB,EAAa,SAAY,CAC7B,GAAI,CACF,MAAMxc,EAAY,aAAa,QAAQ,WAAW,EAC5C8F,EAAuB,CAC3B,eAAgB,kBAAA,EAGd9F,IACF8F,EAAQ,cAAmB,UAAU9F,CAAS,IAGhD,KAAM,CAAC0c,GAAiBC,GAAeC,GAAiBC,EAAiB,EAAI,MAAM,QAAQ,IAAI,CAC7F,MAAMxU,GAAY,cAAc,EAAG,CAAE,QAAAvC,EAAS,YAAa,UAAW,EACtE,MAAMuC,GAAY,qBAAqB,EAAG,CAAE,QAAAvC,EAAS,YAAa,UAAW,EAC7E,MAAMuC,GAAY,uBAAuB,EAAG,CAAE,QAAAvC,EAAS,YAAa,UAAW,EAC/E,MAAMuC,GAAY,wBAAwB,EAAG,CAAE,QAAAvC,EAAS,YAAa,UAAW,CAAA,CACjF,EAED,GAAI4W,GAAgB,GAAI,CACtB,MAAMI,GAAc,MAAMJ,GAAgB,KAAA,EACtC,MAAM,QAAQI,EAAW,EAC3BhD,EAAegD,EAAW,GAE1B,QAAQ,MAAM,gCAAiCA,EAAW,EAC1DhD,EAAe,CAAA,CAAE,EAErB,MACE,QAAQ,MAAM,wBAAyB4C,GAAgB,MAAM,EAC7D5C,EAAe,CAAA,CAAE,EAGnB,GAAI6C,GAAc,GAAI,CACpB,MAAMI,GAAY,MAAMJ,GAAc,KAAA,EAClC,MAAM,QAAQI,EAAS,EACzB/C,EAAY+C,GAAU,MAAM,EAAG,CAAC,CAAC,EAEjC/C,EAAY,CAAA,CAAE,CAElB,MACEA,EAAY,CAAA,CAAE,EAGhB,GAAI4C,GAAgB,GAAI,CACtB,MAAMI,GAAc,MAAMJ,GAAgB,KAAA,EAC1C1C,EAAW,MAAM,QAAQ8C,EAAW,EAAIA,GAAc,CAAA,CAAE,CAC1D,MACE9C,EAAW,CAAA,CAAE,EAGf,GAAI2C,GAAkB,GAAI,CACxB,MAAMI,GAAgB,MAAMJ,GAAkB,KAAA,EAC9CzC,EAAoB,MAAM,QAAQ6C,EAAa,EAAIA,GAAgB,CAAA,CAAE,CACvE,MACE7C,EAAoB,CAAA,CAAE,CAE1B,OAAShpB,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7C0oB,EAAe,CAAA,CAAE,EACjBE,EAAY,CAAA,CAAE,EACdE,EAAW,CAAA,CAAE,EACbE,EAAoB,CAAA,CAAE,CACxB,QAAA,CACEhmB,EAAW,EAAK,CAClB,CACF,EAEMkU,EAAgB,SAAY,CAChC,GAAI,CAAC1R,EAAM,CACT,QAAQ,IAAI,iDAAiD,EAC7D,MACF,CAEA,MAAMoJ,EAAY,aAAa,QAAQ,WAAW,EAClD,GAAI,CAACA,EAAW,CACd,QAAQ,IAAI,2CAA2C,EACvD,OAAO,SAAS,KAAO,QACvB,MACF,CAEA,GAAI,CACF,MAAM8F,EAAuB,CAC3B,eAAgB,mBAChB,cAAiB,UAAU9F,CAAS,EAAA,EAGhC5I,GAAW,MAAM,MAAMiR,GAAY,mBAAmB,EAAG,CAAE,QAAAvC,EAAS,YAAa,UAAW,EAClG,GAAI1O,GAAS,GAAI,CACf,MAAM1G,GAAO,MAAM0G,GAAS,KAAA,EAC5ByP,EAAYnW,GAAK,IAAI,CACvB,MACE,QAAQ,MAAM,6BAA8B0G,GAAS,OAAQA,GAAS,UAAU,GAE5EA,GAAS,SAAW,KAAOA,GAAS,SAAW,OACjD,aAAa,WAAW,WAAW,EACnC,OAAO,SAAS,KAAO,QAG7B,OAAShG,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,CAEnD,CACF,EAEM8rB,GAAqB,MAAO5rB,EAAgBqe,IAAuB,CACvE,GAAI,CACF,MAAMvY,GAAW,MAAM,MAAM,2BAA4B,CACvD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,YAAa9F,EACb,aAAcqe,EACd,eAAgB,SAAA,CACjB,CAAA,CACF,EAED,GAAIvY,GAAS,GAAI,CACf,MAAM1G,GAAO,MAAM0G,GAAS,KAAA,EAC5B+lB,GAAuBzsB,EAAI,EAC3B4X,EAAA,CACF,CACF,OAASlX,GAAO,CACd,QAAQ,MAAM,oBAAoBE,CAAM,WAAYF,EAAK,CAC3D,CACF,EAEM+rB,GAA0BzsB,GAAc,CAC5C,MAAMgL,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAY,gGACzBA,EAAa,UAAY;AAAA;AAAA,iBAEZhL,EAAK,aAAa;AAAA,iCACFA,EAAK,WAAW,QAAQ,CAAC,CAAC;AAAA;AAAA,MAGvD,SAAS,KAAK,YAAYgL,CAAY,EACtC,WAAW,IAAM,CACX,SAAS,KAAK,SAASA,CAAY,GACrC,SAAS,KAAK,YAAYA,CAAY,CAE1C,EAAG,GAAI,CACT,EAEM0hB,GAAkB,MAAOpkB,EAA2BsW,IAAwB,CAChF,GAAI,CAQF,IAPiB,MAAM,MAAM,0BAA2B,CACtD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CAAE,WAAYtW,EAAQ,GAAI,aAAcsW,CAAA,CAAa,CAAA,CAC3E,GAEY,GACX,MAAMkN,EAAA,MAEN,OAAM,IAAI,MAAM,iBAAiB,CAErC,OAASprB,GAAO,CACd,cAAQ,MAAM,wBAAyBA,EAAK,EACtCA,EACR,CACF,EAEMuoB,GAAY,MAAO3gB,EAA2B6D,IAAmB,CACrE,GAAI,CAQF,IAPiB,MAAM,MAAM,mBAAoB,CAC/C,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CAAE,WAAY7D,EAAQ,GAAI,WAAY6D,CAAA,CAAQ,CAAA,CACpE,GAEY,GAAI,CAEf,MAAMnB,GAAe,SAAS,cAAc,KAAK,EACjDA,GAAa,UAAY,kGACzBA,GAAa,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA,uDAKsBmB,CAAM,YAAY7D,EAAQ,cAAgBA,EAAQ,kBAAoB,SAAS;AAAA;AAAA;AAAA,UAI9H,SAAS,KAAK,YAAY0C,EAAY,EACtC,WAAW,IAAM,CACX,SAAS,KAAK,SAASA,EAAY,GACrC,SAAS,KAAK,YAAYA,EAAY,CAE1C,EAAG,GAAI,EAEP4M,EAAA,CACF,KACE,OAAM,IAAI,MAAM,YAAY,CAEhC,OAASlX,GAAO,CACd,cAAQ,MAAM,sBAAuBA,EAAK,EACpCA,EACR,CACF,EAEMisB,GAAgBrkB,GAA8B,CAClD6hB,EAAmB7hB,CAAO,EAC1BshB,EAAgB,EAAI,CACtB,EAEMgD,GAAkBtkB,GAA8B,CACpD6iB,EAAqB,CAAE,GAAI7iB,EAAQ,GAAI,MAAOA,EAAQ,MAAO,EAC7D2iB,EAAyB,EAAI,CAC/B,EAEM4B,GAAwB,IAAM,CAClCxB,EAAyB,EAAI,CAC/B,EAYMyB,GAAgBxkB,GAA8B,CAClDmjB,GAAcnjB,CAAO,EACrBijB,EAAgB,EAAI,CACtB,EAEMwB,GAAiBzkB,GAA8B,CACnDqiB,EAAmBriB,CAAO,EAC1BmiB,EAAwB,EAAI,CAC9B,EAEMuC,EAAoB1kB,GAA8B,CACtDujB,GAAkBvjB,CAAO,EACzBqjB,GAAoB,EAAI,CAC1B,EAEMsB,GAAqB3kB,GAA8B,CACvDyiB,GAAmBziB,CAAO,EAC1BuiB,EAA0B,EAAI,CAChC,EAEMqC,GAAsB,SAAY,CACtC,GAAKpC,EAEL,GAAI,CACF,MAAMpkB,EAAW,MAAM,MAAM,gBAAgBokB,EAAgB,EAAE,GAAI,CACjE,OAAQ,SACR,YAAa,SAAA,CACd,EAED,GAAIpkB,EAAS,GAEX0iB,EAAe/hB,GAAQA,EAAK,OAAO0J,IAAQA,GAAK,KAAO+Z,EAAgB,EAAE,CAAC,EAC1ED,EAA0B,EAAK,EAC/BE,GAAmB,IAAI,MAClB,CACL,MAAMpe,EAAY,MAAMjG,EAAS,KAAA,EACjC,MAAMiG,EAAU,OAAS,0BAA0B,CACrD,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,EAC9C,MAAM,0BAA0B,CAClC,CACF,EAEMysB,GAAe9f,GAAiB,CACpC,OAAQA,EAAA,CACN,IAAK,QAAS,OAAOvK,EAAAA,IAACgB,GAAA,CAAM,UAAU,yBAAA,CAA0B,EAChE,IAAK,UAAW,OAAOhB,EAAAA,IAACsB,EAAA,CAAK,UAAU,yBAAA,CAA0B,EACjE,QAAS,OAAOtB,EAAAA,IAACoB,GAAA,CAAI,UAAU,uBAAA,CAAwB,CAAA,CAE3D,EAEMqb,GAAqBlS,GAAiB,CAC1C,OAAQA,EAAA,CACN,IAAK,QAAS,MAAO,GACrB,IAAK,UAAW,MAAO,KACvB,QAAS,MAAO,EAAA,CAEpB,EAEM+f,GAAc,IACblX,EAGAA,EAAS,wBAUVA,EAAS,qBAAuB,EAC3B,CACL,KAAM,oBACN,QAAS,qDACT,OAAQ,IAAM1F,EAAa,QAAQ,EACnC,MAAO,8BACP,KAAM1N,EAAAA,IAACuqB,GAAA,CAAM,UAAU,SAAA,CAAU,CAAA,EAIjCnX,EAAS,aAAe,GACnB,CACL,KAAM,gBACN,QAAS,qDACT,OAAQ,IAAM,OAAO,SAAS,KAAO,oBACrC,MAAO,8BACP,KAAMpT,EAAAA,IAAC2B,GAAA,CAAQ,UAAU,SAAA,CAAU,CAAA,EAIhC,CACL,KAAM,qBACN,QAAS,sDACT,OAAQ,IAAM,OAAO,SAAS,KAAO,cACrC,MAAO,gCACP,KAAM3B,EAAAA,IAACqB,GAAA,CAAW,UAAU,SAAA,CAAU,CAAA,EAlC/B,CACL,KAAM,sBACN,QAAS,mDACT,OAAQ,IAAM,OAAO,SAAS,KAAO,mBACrC,MAAO,6BACP,KAAMrB,EAAAA,IAACsZ,GAAA,CAAO,UAAU,SAAA,CAAU,CAAA,EAThB,KA0ClBkR,GAAgB,IAAM,CAE1B,MAAMC,EAAY,CAAA,EAGlB9D,EAAiB,QAAQnhB,IAAW,CAClCilB,EAAU,KAAK,CAAE,KAAM,UAAW,KAAMjlB,GAAS,YAAa,GAAM,CACtE,CAAC,EAGD,MAAMklB,EAAiBnE,EAAS,OAAOzX,IAAQA,GAAK,iBAAmB,EAAE,EACnE6b,GAAkBtE,EAAY,OAAO7gB,IACzCA,GAAQ,iBAAmB,GAC3B,CAACmhB,EAAiB,KAAKiE,IAAaA,GAAU,KAAOplB,GAAQ,EAAE,CAAA,EAG3DqlB,GAAqBF,GAAgB,OAAS,EAAIA,GAAkBtE,EACpEyE,GAAmBJ,EAAe,OAAS,EAAIA,EAAiBnE,EAGtE,QAASnpB,GAAI,EAAGA,GAAI,KAAK,IAAIytB,GAAmB,OAAQC,GAAiB,MAAM,EAAG1tB,KAC5EytB,GAAmBztB,EAAC,GACtBqtB,EAAU,KAAK,CAAE,KAAM,UAAW,KAAMI,GAAmBztB,EAAC,EAAG,EAE7D0tB,GAAiB1tB,EAAC,GACpBqtB,EAAU,KAAK,CAAE,KAAM,OAAQ,KAAMK,GAAiB1tB,EAAC,EAAG,EAI9D,OAAIqtB,EAAU,SAAW,EAChB,CACL,GAAG9D,EAAiB,IAAInhB,KAAY,CAAE,KAAM,UAAW,KAAMA,GAAS,YAAa,EAAA,EAAO,EAC1F,GAAG6gB,EAAY,MAAM,EAAG,CAAC,EAAE,IAAI7gB,KAAY,CAAE,KAAM,UAAW,KAAMA,IAAU,EAC9E,GAAG+gB,EAAS,MAAM,EAAG,CAAC,EAAE,IAAIzX,KAAS,CAAE,KAAM,OAAQ,KAAMA,IAAO,CAAA,EAClE,MAAM,EAAG,EAAE,EAGR2b,EAAU,MAAM,EAAG,EAAE,CAC9B,EAEMM,GAAWT,GAAA,EAEjB,OACEvqB,EAAAA,KAAC,MAAA,CAAI,UAAU,0BAEb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,MAAA,CAAO,QAGrB,MAAA,CAAI,UAAU,2BACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMkU,GAAgB,CAACD,EAAY,EAC5C,UAAU,yGAEV,SAAA,CAAAhU,EAAAA,IAAC,MAAA,CAAI,UAAU,sIACX,UAAAoT,GAAU,cAAgBA,GAAU,UAAYhQ,GAAM,OAAS,KAAK,CAAC,EAAE,cAC3E,QACC2G,GAAA,CAAW,UAAW,2DAA2DiK,GAAe,YAAc,EAAE,EAAA,CAAI,CAAA,CAAA,CAAA,EAItHA,IACCjU,EAAAA,KAAC,MAAA,CAAI,UAAU,4FACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACbrB,EAASgX,EAAW,EACpBzB,GAAgB,EAAK,CACvB,EACA,UAAU,2GAEV,SAAA,CAAAjU,EAAAA,IAACoF,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BpF,EAAAA,IAAC,QAAK,SAAA,SAAA,CAAO,CAAA,CAAA,CAAA,EAGfD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACbrB,EAAS,aAAa,EACtBuV,GAAgB,EAAK,CACvB,EACA,UAAU,2GAEV,SAAA,CAAAjU,EAAAA,IAACqB,GAAA,CAAW,UAAU,SAAA,CAAU,EAChCrB,EAAAA,IAAC,QAAK,SAAA,YAAA,CAAU,CAAA,CAAA,CAAA,EAGlBD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACbrB,EAAS,aAAa,EACtBuV,GAAgB,EAAK,CACvB,EACA,UAAU,2GAEV,SAAA,CAAAjU,EAAAA,IAACsV,GAAA,CAAS,UAAU,SAAA,CAAU,EAC9BtV,EAAAA,IAAC,QAAK,SAAA,YAAA,CAAU,CAAA,CAAA,CAAA,EAGlBA,EAAAA,IAAC,KAAA,CAAG,UAAU,sBAAA,CAAuB,EAErCD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACb6V,EAAA,EACA3B,GAAgB,EAAK,CACvB,EACA,UAAU,wGAEV,SAAA,CAAAjU,EAAAA,IAACmW,GAAA,CAAO,UAAU,SAAA,CAAU,EAC5BnW,EAAAA,IAAC,QAAK,SAAA,QAAA,CAAM,CAAA,CAAA,CAAA,CACd,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CACF,QAGC,MAAA,CAAI,UAAU,kCAEb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0HAEb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,8BAA8B,MAAO,CAClD,gBAAiB,yPAAA,EAChB,EAEHD,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,CAAA,iBACrCqD,GAAM,kBAAkB,YAAc,UAAU,MAAA,EACjE,EACApD,EAAAA,IAAC,IAAA,CAAE,UAAU,4BAA4B,SAAA,2CAAA,CAEzC,CAAA,EACF,EACCoT,GACCrT,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+CACZ,SAAA,CAAAsqB,GAAYjX,EAAS,SAAS,EAC/BpT,EAAAA,IAAC,OAAA,CAAK,UAAU,qCACb,WAAS,SAAA,CACZ,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACZ,SAAA,CAAA0c,GAAkBrJ,EAAS,SAAS,EAAE,cAAA,EACzC,EACCA,EAAS,mBAAqB,GAC7BrT,EAAAA,KAAC,MAAA,CAAI,UAAU,+CACb,SAAA,CAAAC,EAAAA,IAACuqB,GAAA,CAAM,UAAU,yBAAA,CAA0B,EAC3CxqB,EAAAA,KAAC,OAAA,CAAK,UAAU,0BACb,SAAA,CAAAqT,EAAS,mBAAmB,aAAA,CAAA,CAC/B,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,EAEJ,EAGCA,GACCpT,EAAAA,IAAC,MAAA,CAAI,UAAU,6CACZ,SAAA,CACC,CAAE,OAAQoT,EAAS,gBAAkB,GAAG,iBAAkB,MAAO,SAAU,WAAO/K,GAAA,CAAM,UAAU,UAAU,EAAI,MAAO,eAAA,EACvH,CAAE,MAAO+K,EAAS,cAAgB,EAAG,MAAO,OAAQ,KAAMpT,EAAAA,IAACsZ,GAAA,CAAO,UAAU,SAAA,CAAU,EAAI,MAAO,iBAAA,EACjG,CAAE,OAAQlG,EAAS,cAAgB,GAAG,QAAQ,CAAC,EAAG,MAAO,OAAQ,KAAMpT,EAAAA,IAAC2B,GAAA,CAAQ,UAAU,UAAU,EAAI,MAAO,iBAAA,EAC/G,CAAE,MAAO,OAAQ,MAAO,QAAS,KAAM3B,EAAAA,IAAC8gB,GAAA,CAAS,UAAU,SAAA,CAAU,EAAI,MAAO,iBAAkB,OAAQiJ,EAAA,CAAsB,EAChI,IAAI,CAACiB,EAAMtpB,IACX3B,EAAAA,KAAC,MAAA,CAEC,UAAW,6IAA6IirB,EAAK,OAAS,iBAAmB,EAAE,GAC3L,QAASA,EAAK,QAAU,OAExB,SAAA,CAAAjrB,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAC,MAAC,OAAA,CAAK,UAAWgrB,EAAK,MAAQ,WAAK,KAAK,EACxChrB,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAqC,WAAK,KAAA,CAAM,CAAA,EAClE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,+BAAgC,WAAK,KAAA,CAAM,CAAA,CAAA,EARnD0B,CAAA,CAUR,EACH,EAIDqpB,IACC/qB,EAAAA,IAAC,SAAA,CACC,QAAS+qB,GAAS,OAClB,UAAW,2BAA2BA,GAAS,KAAK,iHAEpD,SAAAhrB,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACZ,SAAA,CAAAgrB,GAAS,KACV/qB,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAyB,YAAS,IAAA,CAAK,CAAA,EACzD,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA2B,YAAS,OAAA,CAAQ,CAAA,EAC3D,EACAA,EAAAA,IAAC+J,GAAA,CAAW,UAAU,oBAAA,CAAqB,CAAA,CAAA,CAC7C,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,EAGAhK,EAAAA,KAAC,MAAA,CAAI,UAAU,uEACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,2BACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,OACZ,SAAA,CACC,CAAE,IAAK,UAAW,MAAO,UAAW,KAAMA,EAAAA,IAACsB,EAAA,CAAK,UAAU,SAAA,CAAU,CAAA,EACpE,CAAE,IAAK,SAAU,MAAO,cAAe,KAAMtB,EAAAA,IAACirB,GAAA,CAAS,UAAU,SAAA,CAAU,CAAA,EAC3E,CAAE,IAAK,QAAS,MAAO,gBAAiB,KAAMjrB,EAAAA,IAAC+O,GAAA,CAAW,UAAU,UAAU,CAAA,CAAG,EACjF,IAAKH,GACL7O,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAM2N,EAAakB,EAAI,GAAU,EAC1C,UAAW,iHACTnB,IAAcmB,EAAI,IACd,sEACA,oDACN,GAEC,SAAA,CAAAA,EAAI,KACL5O,EAAAA,IAAC,OAAA,CAAM,SAAA4O,EAAI,KAAA,CAAM,CAAA,CAAA,EATZA,EAAI,GAAA,CAWZ,EACH,CAAA,CACF,EAEA7O,EAAAA,KAAC,MAAA,CAAI,UAAU,MAEZ,SAAA,CAAA0N,IAAc,iBACZ,MAAA,CAAI,UAAU,YACZ,SAAA+c,GAAA,EAAgB,OAAS,EACxBzqB,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAjK,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACuqB,GAAA,CAAM,UAAU,yBAAA,CAA0B,EAC3CvqB,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,gCAAA,CAA8B,CAAA,EACpF,EACCwqB,KAAgB,IAAI,CAACvc,EAAMvM,IAC1B1B,EAAAA,IAAC,MAAA,CACE,SAAAiO,EAAK,OAAS,UACbjO,EAAAA,IAACijB,GAAA,CACC,QAAShV,EAAK,KACd,YAAa4b,GACb,QAASC,GACT,eAAgBJ,GAChB,MAAOM,GACP,WAAYf,EACZ,UAAWiB,EACX,YAAa9W,EACb,OAAQ6W,GACR,SAAUE,GACV,YAAclc,EAAa,WAAA,CAAA,QAG5B4V,GAAA,CAAiB,KAAM5V,EAAK,IAAA,CAAkB,CAAA,EAhBzCvM,CAkBV,CACD,CAAA,CAAA,CACH,EAEA1B,EAAAA,IAAC6kB,GAAA,CAAA,CAAuB,CAAA,CAE5B,EAIDpX,IAAc,UACb1N,OAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,CAAA,WAC5BsmB,EAAY,OAAO,iBAAA,EAC9B,EACArmB,EAAAA,IAAC,SAAA,CACC,QAASgpB,EACT,UAAU,wDACX,SAAA,cAAA,CAAA,CAED,EACF,EACC3C,EAAY,OAAS,EAEpB,CACE,GAAGM,EAAiB,IAAKnhB,GACvBxF,EAAAA,IAACijB,GAAA,CAEC,QAAAzd,EACA,YAAaqkB,GACb,QAASC,GACT,eAAgBJ,GAChB,MAAOM,GACP,WAAYf,EACZ,UAAWiB,EACX,YAAa9W,EACb,OAAQ6W,GACR,SAAUE,GACV,YAAa,EAAA,EAXR,aAAa3kB,EAAQ,EAAE,EAAA,CAa/B,EACD,GAAG6gB,EACA,OAAO7gB,GAAW,CAACmhB,EAAiB,KAAKiE,GAAaA,EAAU,KAAOplB,EAAQ,EAAE,CAAC,EAClF,IAAKA,GACJxF,EAAAA,IAACijB,GAAA,CAEC,QAAAzd,EACA,YAAaqkB,GACb,QAASC,GACT,eAAgBJ,GAChB,MAAOM,GACP,WAAYf,EACZ,UAAWiB,EACX,YAAa9W,EACb,OAAQ6W,GACR,SAAUE,EAAA,EAVL3kB,EAAQ,EAAA,CAYhB,CAAA,EAGLzF,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,mFACb,eAACqB,GAAA,CAAW,UAAU,0BAA0B,CAAA,CAClD,EACArB,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,iBAAc,EACvEA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,4CAAyC,EAC3ED,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,OAAO,SAAS,KAAO,UACtC,UAAU,iMAEV,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAK,UAAU,SAAA,CAAU,EAC1BA,EAAAA,IAAC,QAAK,SAAA,gBAAA,CAAc,CAAA,CAAA,CAAA,EAEtBA,EAAAA,IAAC,SAAA,CACC,QAASgpB,EACT,UAAU,wDACX,SAAA,uBAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EAEJ,EAIDvb,IAAc,SACbzN,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAAumB,EAAS,OAAS,EACjBA,EAAS,IAAKzX,GACZ9O,EAAAA,IAAC6jB,GAAA,CAA+B,KAAA/U,CAAA,EAATA,EAAK,EAAgB,CAC7C,EAED/O,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,mFACb,eAAC+O,GAAA,CAAW,UAAU,0BAA0B,CAAA,CAClD,EACA/O,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,6BAA0B,EACnFA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,kDAA+C,EACjFA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,OAAO,SAAS,KAAO,QACtC,UAAU,6JACX,SAAA,0BAAA,CAAA,CAED,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAAA,EACF,EAGConB,GACCpnB,EAAAA,IAAC4b,GAAA,CACC,QAASwL,EACT,OAAQX,GAAS,KAAKd,GAAKA,EAAE,gBAAkB,KAAK,EACpD,OAAQkB,EACR,QAAS,IAAM,CACbC,EAAgB,EAAK,EACrBO,EAAmB,IAAI,CACzB,EACA,WAAYuC,EAAA,CAAA,EAIhB5pB,EAAAA,IAACkc,GAAA,CACC,KAAM9I,EACN,UAAWkU,GAAkB,GAC7B,aAAcA,GAAkB,MAChC,OAAQP,EACR,QAAS,IAAM,CACbC,EAAkB,EAAK,EACvBO,EAAoB,IAAI,CAC1B,EACA,UAAW,IAAM,CACfzS,EAAA,EACAkU,EAAA,CACF,CAAA,CAAA,EAGFhpB,EAAAA,IAACkd,GAAA,CACC,KAAM9J,EACN,UAAWoU,GAAyB,GACpC,aAAcA,GAAyB,MACvC,gBAAiBA,GAAyB,SAC1C,WAAYA,GAAyB,IACrC,OAAQP,EACR,QAAS,IAAM,CACbC,EAAyB,EAAK,EAC9BO,EAA2B,IAAI,CACjC,EACA,UAAW,IAAM,CACf3S,EAAA,EACAkU,EAAA,CACF,CAAA,CAAA,EAGDpB,GACC5nB,EAAAA,IAACkf,GAAA,CACC,OAAQwI,EACR,QAAS,IAAM,CACbC,EAAwB,EAAK,EAC7BE,EAAmB,IAAI,CACzB,EACA,UAAW,kBACX,QAASD,CAAA,CAAA,EAIb5nB,EAAAA,IAACof,GAAA,CACC,OAAQ0I,EACR,QAAS,IAAM,CACbC,EAA0B,EAAK,EAC/BE,GAAmB,IAAI,CACzB,EACA,UAAWmC,GACX,MAAM,iBACN,QAAS,oCAAoCpC,GAAiB,KAAK,uEACnE,YAAY,SACZ,WAAW,SACX,KAAK,QAAA,CAAA,EAINI,GACCpoB,EAAAA,IAAC0f,GAAA,CACC,OAAQwI,GACR,QAAS,IAAM,CACbC,EAAyB,EAAK,EAC9BE,EAAqB,IAAI,CAC3B,EACA,UAAWD,EAAkB,GAC7B,aAAcA,EAAkB,KAAA,CAAA,EAKpCpoB,EAAAA,IAACsgB,GAAA,CACC,OAAQgI,EACR,QAAS,IAAMC,EAAyB,EAAK,EAC7C,KAAMnV,CAAA,CAAA,EAIPsV,IACC1oB,EAAAA,IAAC+lB,GAAA,CACC,QAAS2C,GACT,OAAQF,EACR,QAAS,IAAM,CACbC,EAAgB,EAAK,EACrBE,GAAc,IAAI,CACpB,EACA,MAAOxC,EAAA,CAAA,EAKV2C,IACC9oB,EAAAA,IAAC8kB,GAAA,CACC,SAAU,CACR,GAAIgE,GAAe,GACnB,aAAcA,GAAe,cAAgBA,GAAe,kBAAoB,UAChF,SAAUA,GAAe,UAAY,UACrC,YAAaA,GAAe,cAAgB,GAC5C,cAAeA,GAAe,MAC9B,cAAe,aACf,aAAc,IACd,cAAe,IACf,KAAM,IACN,UAAW,IACX,uBAAwB,IACxB,aAAc,OACd,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,MAAc,GAAK,GAAI,EAAE,YAAA,CAAY,EAEzE,OAAQF,GACR,QAAS,IAAM,CACbC,GAAoB,EAAK,EACzBE,GAAkB,IAAI,CACxB,EACA,mBAAoB,IAAM,CACxBF,GAAoB,EAAK,EACzBE,GAAkB,IAAI,EACtBC,EAAA,CACF,CAAA,CAAA,CACF,EAEJ,CAEJ,CC/4BA,SAAwBkC,IAAO,CAC7B,KAAM,CAAE,KAAA9nB,CAAA,EAASqB,GAAA,EACX7F,EAAWC,GAAA,EACX,CAACqP,EAAOid,CAAQ,EAAIpsB,EAAAA,SAAqB,CAAA,CAAE,EAC3C,CAACqU,EAAUC,CAAW,EAAItU,EAAAA,SAA0B,IAAI,EACxD,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAI,EACrC,CAACqsB,EAAgBC,CAAiB,EAAItsB,EAAAA,SAAS,EAAK,EACpD,CAACusB,EAAYC,CAAa,EAAIxsB,EAAAA,SAAS,EAAE,EACzC,CAACysB,EAAkBC,CAAmB,EAAI1sB,EAAAA,SAAS,EAAE,EACrD,CAAC2sB,EAAoBC,CAAqB,EAAI5sB,EAAAA,SAAS,EAAE,EAE/DM,EAAAA,UAAU,IAAM,CACdusB,EAAA,EACIxoB,GACF0R,EAAA,CAEJ,EAAG,CAAC1R,CAAI,CAAC,EAGT/D,EAAAA,UAAU,IAAM,CAEd,MAAMwsB,EADY,IAAI,gBAAgBjtB,EAAS,MAAM,EACvB,IAAI,QAAQ,GACrCitB,IAAgB,SAAWA,IAAgB,SAAWzY,GAAYA,EAAS,YAAc,cAC5FiY,EAAkB,EAAI,CAE1B,EAAG,CAACzsB,EAAUwU,CAAQ,CAAC,EAEvB,MAAM0B,EAAgB,SAAY,CAChC,GAAI,CACF,MAAMxC,EAAUD,GAAA,EACVzO,EAAW,MAAM+O,GAAS,gBAAiB,CAC/C,YAAa,UACb,QAAAL,CAAA,CACD,EACD,GAAI1O,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5ByP,EAAYnW,CAAI,CAClB,CACF,OAASU,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,CACnD,CACF,EAEMguB,EAAa,SAAY,CAC7B,GAAI,CAEF,MAAM1uB,EAAO,MADI,MAAMyV,GAAS,YAAY,GAChB,KAAA,EAC5BwY,EAASjuB,CAAI,CACf,OAASU,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CAC/C,QAAA,CACEgD,EAAW,EAAK,CAClB,CACF,EAEMkrB,EAAgB5d,EAAM,OAAOY,GAAQ,CACzC,MAAMsJ,EAAQtJ,EAAK,OAAS,GACtBuJ,EAAcvJ,EAAK,aAAe,GAClCid,EAAWjd,EAAK,WAAa,GAC7BqV,EAAarV,EAAK,YAAc,GAStC,OANEsJ,EAAM,YAAA,EAAc,SAASkT,EAAW,YAAA,CAAa,GACrDjT,EAAY,YAAA,EAAc,SAASiT,EAAW,aAAa,KAErC,CAACE,GAAoBO,IAAaP,KAChC,CAACE,GAAsBvH,IAAeuH,EAGlE,CAAC,EAED,OAAI/qB,EAEAX,MAAC,OAAI,UAAU,wCACb,eAAC,MAAA,CAAI,UAAU,oFAAoF,CAAA,CACrG,EAKFD,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,OAAI,EACrDA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,+CAAA,CAA6C,CAAA,EACjF,EACCoT,GAAYA,EAAS,YAAc,cAClCrT,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMsrB,EAAkB,EAAI,EACrC,UAAU,mMAEV,SAAA,CAAArrB,EAAAA,IAACoV,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BpV,EAAAA,IAAC,QAAK,SAAA,aAAA,CAAW,CAAA,CAAA,CAAA,CACnB,EAEJ,QAGC,MAAA,CAAI,UAAU,2DACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAAC2O,GAAA,CAAO,UAAU,0EAAA,CAA2E,EAC7F3O,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,YAAY,kBACZ,MAAOsrB,EACP,SAAW9tB,GAAM+tB,EAAc/tB,EAAE,OAAO,KAAK,EAC7C,UAAU,sHAAA,CAAA,CACZ,EACF,EAEAuC,EAAAA,KAAC,SAAA,CACC,MAAOyrB,EACP,SAAWhuB,GAAMiuB,EAAoBjuB,EAAE,OAAO,KAAK,EACnD,UAAU,0GAEV,SAAA,CAAAwC,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,iBAAc,EAC9B+e,GAAe,QAAQ,IAAIgN,SACzB,SAAA,CAAsB,MAAOA,EAC3B,SAAAA,EAAS,QAAQ,KAAM,GAAG,EAAE,QAAQ,QAASC,GAAKA,EAAE,YAAA,CAAa,CAAA,EADvDD,CAEb,CACD,CAAA,CAAA,CAAA,EAGHhsB,EAAAA,KAAC,SAAA,CACC,MAAO2rB,EACP,SAAWluB,GAAMmuB,EAAsBnuB,EAAE,OAAO,KAAK,EACrD,UAAU,0GAEV,SAAA,CAAAwC,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,mBAAgB,EAChCgf,GAAqB,QAAQ,IAAImF,GAChCnkB,EAAAA,IAAC,SAAA,CAAwB,MAAOmkB,EAAY,UAAU,aAAc,SAAAA,CAAA,EAAvDA,CAAkE,CAChF,CAAA,CAAA,CAAA,EAGHpkB,EAAAA,KAAC,SAAA,CAAO,UAAU,4HAChB,SAAA,CAAAC,EAAAA,IAACisB,GAAA,CAAO,UAAU,uBAAA,CAAwB,EAC1CjsB,EAAAA,IAAC,QAAK,SAAA,cAAA,CAAY,CAAA,CAAA,CACpB,CAAA,CAAA,CACF,CAAA,CACF,EAGAA,EAAAA,IAAC,MAAA,CAAI,UAAU,uDACZ,WAAc,IAAK8O,GAClB9O,EAAAA,IAACksB,GAAA,CAAuB,KAAApd,CAAA,EAATA,EAAK,EAAgB,CACrC,EACH,EAECgd,EAAc,SAAW,GACxB/rB,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,mFACb,eAAC2O,GAAA,CAAO,UAAU,0BAA0B,CAAA,CAC9C,EACA3O,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,iBAAc,EACvEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,0DAAA,CAAwD,CAAA,EACvF,EAIDorB,GAAkBhY,GAAYA,EAAS,YAAc,cACpDpT,EAAAA,IAACmsB,GAAA,CACC,QAAS,IAAMd,EAAkB,EAAK,EACtC,UAAW,IAAM,CACfA,EAAkB,EAAK,EACvBO,EAAA,CACF,CAAA,CAAA,CACF,EAEJ,CAEJ,CAEA,MAAM7H,GAAc,CAACvf,EAAuBwf,EAAW,aACvCxf,GAASA,EAAM,OAAO,OAAS,EAAIA,EAAQwf,GAEtD,QAAQ,KAAM,GAAG,EACjB,QAAQ,QAAU3mB,GAASA,EAAK,YAAA,CAAa,EAGlD,SAAS6uB,GAAS,CAAE,KAAApd,GAA4B,CAC9C,MAAMpQ,EAAWC,GAAA,EAEXytB,EAAoBL,GAA6B,CAErD,GAAIjd,GAAM,YACR,OAAOA,EAAK,YAGd,QADcid,GAAY,IAAI,YAAA,EACtB,CACN,IAAK,mBAAoB,MAAO,oFAChC,IAAK,UAAW,MAAO,iFACvB,IAAK,eAAgB,MAAO,iFAC5B,IAAK,qBAAsB,MAAO,oFAClC,IAAK,UAAW,MAAO,oFACvB,IAAK,oBAAqB,MAAO,oFACjC,QAAS,MAAO,mFAAA,CAEpB,EAEMM,EAAkB,IAAM,CAE5B3tB,EAAS,UAAUoQ,EAAK,EAAE,EAAE,CAC9B,EAGMwd,EAASxd,EAAK,OAAO,YAAA,EAAc,SAAS,QAAQ,GAC3CA,EAAK,OAAO,cAAc,SAAS,MAAM,GACzCA,EAAK,aAAa,YAAA,EAAc,SAAS,MAAM,EAExDyd,EAAmBR,GAA6B,CACpD,OAAQA,GAAY,GAAA,CAClB,IAAK,mBAAoB,MAAO,KAChC,IAAK,UAAW,MAAO,IACvB,IAAK,eAAgB,MAAO,KAC5B,IAAK,qBAAsB,MAAO,KAClC,IAAK,UAAW,MAAO,KACvB,IAAK,oBAAqB,MAAO,KACjC,QAAS,MAAO,IAAA,CAEpB,EAEM7H,EAAsBC,GAA+B,CACzD,QAASA,GAAc,IAAI,YAAA,EAAY,CACrC,IAAK,OAAQ,MAAO,8BACpB,IAAK,SAAU,MAAO,gCACtB,IAAK,OAAQ,MAAO,0BACpB,QAAS,MAAO,2BAAA,CAEpB,EAEA,OACEpkB,EAAAA,KAAC,MAAA,CAAI,UAAU,kFAEZ,SAAA,CAAAusB,SACE,MAAA,CAAI,UAAU,iFACb,SAAAvsB,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,EACRA,EAAAA,IAAC,QAAK,SAAA,kCAAA,CAAgC,EACtCA,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,CAAA,CAAA,CACV,CAAA,CACF,EAGFD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BAA0B,QAASssB,EAChD,SAAA,CAAArsB,EAAAA,IAAC,MAAA,CACC,IAAKosB,EAAiBtd,EAAK,SAAS,EACpC,IAAKA,EAAK,MACV,UAAU,8DAAA,CAAA,EAEZ9O,EAAAA,IAAC,MAAA,CAAI,UAAU,yCAAA,CAA0C,EACzDD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACZ,SAAA,CAAAusB,GACCtsB,EAAAA,IAAC,OAAA,CAAK,UAAU,0FAA0F,SAAA,OAE1G,EAEFA,EAAAA,IAAC,OAAA,CAAK,UAAW,8CAA8CkkB,EAAmBpV,EAAK,UAAU,CAAC,GAC/F,SAAAA,EAAK,UAAA,CACR,CAAA,EACF,EACA9O,MAAC,MAAA,CAAI,UAAU,wBACZ,WAAK,cACJA,EAAAA,IAAC,MAAA,CAAI,UAAU,0DACb,SAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,iCAAiC,SAAA,YAAA,CAAU,CAAA,CAC7D,EACE8O,EAAK,aACP9O,MAAC,MAAA,CAAI,UAAU,2DACb,SAAAA,MAAC,OAAA,CAAK,UAAU,iCAAiC,qBAAS,EAC5D,EAEAD,OAAC,MAAA,CAAI,UAAU,uFACb,SAAA,CAAAC,EAAAA,IAAC4B,GAAA,CAAI,UAAU,oBAAA,CAAqB,EACpC5B,EAAAA,IAAC,OAAA,CAAK,UAAU,iCAAkC,WAAK,QAAA,CAAS,CAAA,CAAA,CAClE,CAAA,CAEJ,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,2BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC2B,GAAA,CAAQ,UAAU,qCAAA,CAAsC,EACzD5B,EAAAA,KAAC,IAAA,CAAE,UAAU,+CACV,SAAA,CAAA+O,EAAK,gBAAiBwd,GAAUtsB,EAAAA,IAAC,OAAA,CAAK,UAAU,qBAAqB,SAAA,SAAA,CAAO,CAAA,CAAA,CAC/E,CAAA,EACF,QACC,IAAA,CAAE,UAAU,oCACV,SAAAssB,EAAS,4BAA8B,aAAA,CAC1C,CAAA,CAAA,CACF,CAAA,EACF,EAEAvsB,EAAAA,KAAC,MAAA,CAAI,UAAU,MACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,wCACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,MAAC,QAAK,UAAU,UAAW,SAAAusB,EAAgBzd,EAAK,SAAS,EAAE,EAC1DA,EAAK,cACJ9O,MAAC,MAAA,CAAI,UAAU,qEACb,SAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,6BAA6B,SAAA,mBAAA,CAAiB,EAChE,EACE8O,EAAK,aACP9O,EAAAA,IAAC,MAAA,CAAI,UAAU,sEACb,SAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,8BAA8B,SAAA,WAAA,CAAS,CAAA,CACzD,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,sCACb,SAAA,CAAAC,EAAAA,IAAC4B,GAAA,CAAI,UAAU,yBAAA,CAA0B,EACzC7B,EAAAA,KAAC,OAAA,CAAK,UAAU,8BAA+B,SAAA,CAAA+O,EAAK,SAAS,OAAA,CAAA,CAAK,CAAA,CAAA,CACpE,CAAA,CAAA,CAEJ,CAAA,CACF,QAEC,KAAA,CAAG,UAAU,kGAAkG,QAASud,EACtH,WAAK,MACR,QACC,IAAA,CAAE,UAAU,0CAA2C,SAAAvd,EAAK,aAAe,4BAA4B,EAExG9O,EAAAA,IAAC,MAAA,CAAI,UAAU,OACb,SAAAA,EAAAA,IAAC4E,GAAA,CACC,SAAUkK,EAAK,aACf,YAAaA,EAAK,aAClB,UAAWA,EAAK,eAChB,UAAU,8BACV,KAAK,IAAA,CAAA,EAET,EAEA/O,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAC,EAAAA,IAACgP,GAAA,CAAM,UAAU,SAAA,CAAU,SAC1B,OAAA,CAAM,SAAA,CAAAF,EAAK,qBAAqB,IAAEA,EAAK,kBAAoB,IAAI,eAAA,CAAA,CAAa,CAAA,EAC/E,EAECA,EAAK,mBAAqB,GACzB/O,EAAAA,KAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAC,EAAAA,IAACsB,EAAA,CAAK,UAAU,SAAA,CAAU,SACzB,OAAA,CAAM,SAAA,CAAAwN,EAAK,mBAAmB,sBAAA,CAAA,CAAoB,CAAA,EACrD,EAGDA,EAAK,aACJ/O,OAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAC,EAAAA,IAACghB,GAAA,CAAS,UAAU,SAAA,CAAU,SAC7B,OAAA,CAAK,SAAA,CAAA,OAAK,IAAI,KAAKlS,EAAK,WAAW,EAAE,mBAAA,CAAmB,CAAA,CAAE,CAAA,EAC7D,EAGDA,EAAK,iBACJ/O,OAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAC,EAAAA,IAAC2K,GAAA,CAAM,UAAU,SAAA,CAAU,EAC3B3K,EAAAA,IAAC,OAAA,CAAM,SAAA8O,EAAK,eAAA,CAAgB,CAAA,EAC9B,EAGDA,EAAK,eAAiB,GACrB/O,EAAAA,KAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAC,EAAAA,IAAC2B,GAAA,CAAQ,UAAU,SAAA,CAAU,SAC9B,OAAA,CAAM,SAAA,CAAAmN,EAAK,oBAAsBA,EAAK,eAAe,yBAAA,CAAA,CAAuB,CAAA,CAAA,CAC7E,CAAA,EAEJ,EAEA/O,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAW,4DAA4DkkB,EAAmBpV,EAAK,UAAU,CAAC,GAC7G,SAAAiV,GAAYjV,EAAK,SAAS,CAAA,CAC7B,EACA9O,EAAAA,IAAC,MAAA,CAAI,UAAU,iBACb,SAAAA,EAAAA,IAAC,SAAA,CACC,QAASqsB,EACT,UAAU,yGACX,SAAA,cAAA,CAAA,CAED,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,CAEJ,CASA,MAAMF,GAAkD,CAAC,CAAE,QAAAxkB,EAAS,UAAAuB,KAAgB,CAClF,MAAMtK,EAAWC,GAAA,EAEXgtB,EADY,IAAI,gBAAgBjtB,EAAS,MAAM,EACvB,IAAI,QAAQ,EAGpC4tB,EAAqB,IACrBX,IAAgB,OAAe,OAC/BA,IAAgB,OAAe,OAC5B,QAGH,CAAClrB,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAAC0tB,EAAeC,CAAgB,EAAI3tB,EAAAA,SAAS,EAAK,EAClD,CAAC4tB,EAAYC,CAAa,EAAI7tB,EAAAA,SAA4B,QAAQ,EAClE,CAAC8tB,EAAYC,CAAa,EAAI/tB,EAAAA,SAAwB,IAAI,EAE1D,CAACguB,EAAcC,CAAe,EAAIjuB,EAAAA,SAAsB,IAAI,EAC5D,CAACgtB,EAAUkB,CAAW,EAAIluB,EAAAA,SAAoCytB,GAAoB,EAClFU,EAAe9mB,EAAAA,OAAyB,IAAI,EAG5C+mB,EAAsB7qB,IACnB,CACL,MAAO,GACP,YAAa,GACb,UAAW,mBACX,WAAY,OACZ,SAAUA,IAAS,OAAS,EAAI,EAChC,gBAAiBA,IAAS,OAAS,GAAK,EACxC,eAAgB,EAChB,mBAAoB,EACpB,gBAAiB,GACjB,aAAc,GACd,aAAc,GACd,YAAa,GACb,iBAAkB,OAClB,SAAU,GACV,YAAa,GACb,cAAeA,IAAS,QACxB,aAAcA,IAAS,OACvB,iBAAkB,EAClB,kBAAmB,EACnB,aAAc,CAAA,CAAC,GAIb,CAACwY,EAAUC,CAAW,EAAIhc,EAAAA,SAAgC,IAAMouB,EAAmBX,EAAA,CAAoB,CAAC,EAG9GntB,EAAAA,UAAU,IAAM,CACd0b,EAAYqS,IAAa,CACvB,GAAGA,EACH,cAAerB,IAAa,QAC5B,aAAcA,IAAa,OAC3B,SAAUA,IAAa,OAAS,EAAI,EACpC,gBAAiBA,IAAa,OAAS,GAAK,CAAA,EAC5C,CACJ,EAAG,CAACA,CAAQ,CAAC,EAEb,MAAMsB,EAAoB7vB,GAA2C,CACnE,GAAIA,EAAE,OAAO,OAASA,EAAE,OAAO,MAAM,CAAC,EAAG,CACvC,MAAMwgB,EAAOxgB,EAAE,OAAO,MAAM,CAAC,EAC7BwvB,EAAgBhP,CAAI,EAGpB,MAAMsP,EAAS,IAAI,WACnBA,EAAO,OAAUlM,GAAU,CACrBA,EAAM,QAAQ,QAChB0L,EAAc1L,EAAM,OAAO,MAAgB,CAE/C,EACAkM,EAAO,cAActP,CAAI,CAC3B,CACF,EAEMuP,EAAqB,IAAM,CAC/BP,EAAgB,IAAI,EACpBF,EAAc,IAAI,EACdI,EAAa,UACfA,EAAa,QAAQ,MAAQ,GAEjC,EAEMM,EAAuB,MAAOxP,GAAgC,CAClE,GAAI,CACF0O,EAAiB,EAAI,EAGrB,MAAM7pB,EAAS,MAAM,IAAI,QAAgB,CAACuW,EAASqU,IAAW,CAC5D,MAAMH,EAAS,IAAI,WACnBA,EAAO,OAAS,IAAM,CACpB,MAAMvc,EAASuc,EAAO,OACtBlU,EAAQrI,EAAO,MAAM,GAAG,EAAE,CAAC,CAAC,CAC9B,EACAuc,EAAO,QAAUG,EACjBH,EAAO,cAActP,CAAI,CAC3B,CAAC,EAGKpa,EAAW,MAAM+O,GAAS,4BAA6B,CAC3D,OAAQ,OACR,QAAS,CACP,eAAgB,kBAAA,EAElB,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,MAAO9P,EACP,SAAUmb,EAAK,KACf,YAAaA,EAAK,KAClB,YAAalD,EAAS,OAAS,iBAC/B,SAAUA,EAAS,UAAY,SAAA,CAChC,CAAA,CACF,EAED,GAAI,CAAClX,EAAS,GACZ,MAAM,IAAI,MAAM,wBAAwB,EAI1C,OADa,MAAMA,EAAS,KAAA,GAChB,GACd,OAAShG,EAAO,CACd,eAAQ,MAAM,yBAA0BA,CAAK,EAEtC,+FACT,QAAA,CACE8uB,EAAiB,EAAK,CACxB,CACF,EAEM1R,EAAe,MAAOxd,GAAuB,CACjDA,EAAE,eAAA,EACFoD,EAAW,EAAI,EAEf,GAAI,CAEF,IAAIqd,EAAWnD,EAAS,YAExB,GAAI6R,IAAe,UAAYI,EAC7B,GAAI,CACF9O,EAAW,MAAMuP,EAAqBT,CAAY,CACpD,OAASnvB,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7C,MAAM,2CAA2C,EACjD,MACF,SACS+uB,IAAe,QAAU7R,EAAS,YAE3C,GAAI,CAEF,GAAI,EADa,MAAM,MAAMA,EAAS,YAAa,CAAE,OAAQ,OAAQ,GACvD,GACZ,MAAM,IAAI,MAAM,mBAAmB,CAEvC,MAAgB,CACd,MAAM,kCAAkC,EACxC,MACF,CAIF,MAAMlX,EAAW,MAAM+O,GAAS,aAAc,CAC5C,OAAQ,OACR,QAAS,CACP,eAAgB,kBAAA,EAElB,KAAM,KAAK,UAAU,CACnB,GAAGmI,EACH,YAAamD,EACb,UAAW8N,IAAa,QAAU,mBACxBA,IAAa,OAAS,eAAiB,kBACjD,WAAYjR,EAAS,YAAc,OACnC,YAAaA,EAAS,aAAe,KACrC,iBAAkBA,EAAS,kBAAoB,KAC/C,SAAUiR,IAAa,OAASjR,EAAS,UAAY,EAAI,EACzD,gBAAiBiR,IAAa,OAASjR,EAAS,iBAAmB,GAAK,EACxE,cAAeiR,IAAa,QAC5B,aAAcA,IAAa,OAC3B,iBAAkBA,IAAa,QAASjR,EAAS,kBAAoB,EACrE,kBAAmBiR,IAAa,QAASjR,EAAS,mBAAqB,CAAI,CAC5E,CAAA,CACF,EAED,GAAI,CAAClX,EAAS,GAAI,CAChB,MAAMiG,EAAY,MAAMjG,EAAS,KAAA,EAAO,MAAM,KAAO,CAAA,EAAG,EACxD,MAAM,IAAI,MAAMiG,EAAU,SAAW,uBAAuB,CAC9D,CAEAX,EAAA,EACAvB,EAAA,CACF,OAAS/J,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,EAC3C,MAAMA,aAAiB,MAAQA,EAAM,QAAU,uBAAuB,CACxE,QAAA,CACEgD,EAAW,EAAK,CAClB,CACF,EAEA,aACG,MAAA,CAAI,UAAU,6EACb,SAAAb,EAAAA,KAAC,MAAA,CAAI,UAAU,wEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oBAAoB,SAAA,kBAAe,EACjDA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,oCACV,aAAW,cACZ,SAAA,GAAA,CAAA,CAED,EACF,EAEA5H,EAAAA,KAAC,OAAA,CAAK,SAAUib,EAAc,UAAU,YACtC,SAAA,CAAAjb,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,YAEhE,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,iBACX,UAAC,QAAS,OAAQ,MAAM,EAAY,IAAKsC,GACzCvC,EAAAA,KAAC,QAAA,CAAiB,UAAU,oBAC1B,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,QACL,UAAU,0BACV,QAAS+rB,IAAazpB,EACtB,SAAU,IAAM2qB,EAAY3qB,CAAI,CAAA,CAAA,EAElCtC,EAAAA,IAAC,OAAA,CAAK,UAAU,kBAAmB,SAAAsC,CAAA,CAAK,CAAA,CAAA,EAP9BA,CAQZ,CACD,CAAA,CACH,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAtC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,QAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,UAAU,4BACV,MAAO8a,EAAS,MAChB,SAAWtd,GAAMud,EAAY,CAAC,GAAGD,EAAU,MAAOtd,EAAE,OAAO,MAAM,EACjE,SAAQ,EAAA,CAAA,CACV,EACF,SAEC,MAAA,CACC,SAAA,CAAAwC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,cAEhE,EACAA,EAAAA,IAAC,WAAA,CACC,UAAU,4BACV,KAAM,EACN,MAAO8a,EAAS,YAChB,SAAWtd,GAAMud,EAAY,CAAC,GAAGD,EAAU,YAAatd,EAAE,OAAO,MAAM,EACvE,SAAQ,EAAA,CAAA,CACV,EACF,EAEAuC,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,aAEhE,EACAD,EAAAA,KAAC,SAAA,CACC,UAAU,4BACV,MAAO+a,EAAS,WAChB,SAAWtd,GAAMud,EAAY,CAAC,GAAGD,EAAU,WAAYtd,EAAE,OAAO,MAAM,EAEtE,SAAA,CAAAwC,EAAAA,IAAC,SAAA,CAAO,MAAM,OAAO,SAAA,OAAI,EACzBA,EAAAA,IAAC,SAAA,CAAO,MAAM,SAAS,SAAA,SAAM,EAC7BA,EAAAA,IAAC,SAAA,CAAO,MAAM,OAAO,SAAA,MAAA,CAAI,CAAA,CAAA,CAAA,CAC3B,EACF,EAEC+rB,IAAa,QACZhsB,OAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,WAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,IAAI,IACJ,UAAU,4BACV,MAAO8a,EAAS,SAChB,SAAWtd,GAAMud,EAAY,CAAC,GAAGD,EAAU,SAAU,OAAOtd,EAAE,OAAO,KAAK,EAAE,EAC5E,SAAUuuB,IAAa,MAAA,CAAA,CACzB,CAAA,CACF,CAAA,EAEJ,SAEC,MAAA,CACC,SAAA,CAAAhsB,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,oBACf,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,QACL,UAAU,0BACV,QAAS2sB,IAAe,SACxB,SAAU,IAAMC,EAAc,QAAQ,CAAA,CAAA,EAExC5sB,EAAAA,IAAC,OAAA,CAAK,UAAU,OAAO,SAAA,cAAA,CAAY,CAAA,EACrC,EACAD,EAAAA,KAAC,QAAA,CAAM,UAAU,oBACf,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,QACL,UAAU,0BACV,QAAS2sB,IAAe,OACxB,SAAU,IAAMC,EAAc,MAAM,CAAA,CAAA,EAEtC5sB,EAAAA,IAAC,OAAA,CAAK,UAAU,OAAO,SAAA,WAAA,CAAS,CAAA,CAAA,CAClC,CAAA,EACF,EAEC2sB,IAAe,SACd5sB,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,IAAKktB,EACL,SAAUG,EACV,OAAO,UACP,UAAU,QAAA,CAAA,EAEZrtB,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMktB,EAAa,SAAS,MAAA,EACrC,UAAU,6IAET,WAAgB,eAAiB,iBAAA,CAAA,EAEnCL,GACC9sB,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,IAAK6sB,EACL,IAAI,UACJ,UAAU,kBAAA,CAAA,EAEZ7sB,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAASutB,EACT,UAAU,gGACV,aAAW,eACZ,SAAA,GAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CAEJ,EAEAvtB,EAAAA,IAAC,QAAA,CACC,KAAK,MACL,UAAU,4BACV,YAAY,gCACZ,MAAO8a,EAAS,YAChB,SAAWtd,GAAMud,EAAY,CAAC,GAAGD,EAAU,YAAatd,EAAE,OAAO,MAAM,EACvE,SAAQ,EAAA,CAAA,CACV,EAEJ,EAEAuC,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS2H,EACT,UAAU,6DACV,SAAUhH,EACX,SAAA,QAAA,CAAA,EAGDX,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,UAAU,wFACV,SAAUW,GAAW8rB,EAEpB,WAAU,cAAgB,aAAA,CAAA,CAC7B,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,EC/tBA,eAAsBiB,GACpBC,EACA9vB,EACAC,EACAC,EACY,CACZ,GAAI,CACF,OAAO,MAAM4vB,EAAA,CACf,OAAS/vB,EAAO,CACd,cAAQ,MAAM,YAAYC,CAAS,IAAIC,CAAM,IAAKF,CAAK,EACvDQ,GACER,aAAiB,MAAQA,EAAQ,IAAI,MAAM,OAAOA,CAAK,CAAC,EACxDC,EACAC,EACAC,CAAA,EAEIH,CACR,CACF,CAGO,SAASgwB,GACdhwB,EACAC,EACAC,EACAC,EACM,CACN,QAAQ,MAAM,gBAAgBF,CAAS,IAAIC,CAAM,IAAKF,CAAK,EAG3D,MAAM2d,EAAS3d,EAAM,QAAUA,EAAM,UAAU,OACzCsU,EAAUtU,EAAM,SAAWA,EAAM,UAAU,MAAM,OAAS,OAAOA,CAAK,EAGtEiwB,EAAmB,CAAC,IAAK,IAAK,IAAK,GAAG,EACtCC,EAAmB,CACvB,wBACA,sBACA,kBACA,iBACA,uBAAA,GAIAD,EAAiB,SAAStS,CAAM,GAChCuS,EAAiB,KAAKC,GAAO7b,EAAQ,YAAA,EAAc,SAAS6b,CAAG,CAAC,IAGhE3vB,GACE,IAAI,MAAM,cAAcmd,CAAM,MAAMrJ,CAAO,EAAE,EAC7CrU,EACAC,EACAC,CAAA,CAGN,CAGO,SAASiwB,GAAmBnwB,EAAmB,CACpD,MAAO,CACL,YAAa,CAACD,EAAcE,EAAgBC,IAAoB,CAC9DK,GAAoBR,EAAOC,EAAWC,EAAQC,CAAM,CACtD,EAEA,eAAgB,CAACH,EAAYE,EAAgBC,IAAoB,CAC/D6vB,GAAehwB,EAAOC,EAAWC,EAAQC,CAAM,CACjD,EAEA,kBAAmB,MACjB4vB,EACA7vB,EACAC,IAEO2vB,GAAkBC,EAAW9vB,EAAWC,EAAQC,CAAM,CAC/D,CAEJ,CC/HA,SAAwBkwB,IAAS,CACnBxpB,GAAA,EAEZ,MAAMypB,EAAeF,GAAmB,QAAQ,EAC1C,CAACvgB,EAAWC,CAAY,EAAI3O,EAAAA,SAA4B,MAAM,EAC9D,CAACovB,EAAUC,CAAW,EAAIrvB,WAQ7B,CACD,SAAU,YACV,MAAO,GACP,YAAa,GACb,aAAc,GACd,UAAW,GACX,aAAc,IACd,YAAa,CAAA,CACd,EACK,CAACsvB,EAAcC,CAAe,EAAIvvB,EAAAA,SAAS,EAAK,EAChD,CAACwvB,EAAkBC,CAAmB,EAAIzvB,EAAAA,SAAS,CAAC,EACpD,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACguB,EAAcC,CAAe,EAAIjuB,EAAAA,SAAsB,IAAI,EAC5D,CAAC8tB,EAAYC,CAAa,EAAI/tB,EAAAA,SAAiB,EAAE,EACjD,CAAC4tB,EAAYC,CAAa,EAAI7tB,EAAAA,SAAyB,KAAK,EAC5D,CAAC0tB,EAAeC,CAAgB,EAAI3tB,EAAAA,SAAS,EAAK,EAClDmuB,EAAe9mB,EAAAA,OAAyB,IAAI,EAE5ConB,EAAuB,MAAOxP,GAAgC,CAClE,GAAI,CACF0O,EAAiB,EAAI,EAGrB,MAAM7pB,EAAS,MAAM,IAAI,QAAiBuW,GAAY,CACpD,MAAMkU,EAAS,IAAI,WACnBA,EAAO,OAAS,IAAM,CACpB,MAAMvc,EAASuc,EAAO,OACtBlU,EAAQrI,EAAO,MAAM,GAAG,EAAE,CAAC,CAAC,CAC9B,EACAuc,EAAO,cAActP,CAAI,CAC3B,CAAC,EAGKpa,EAAW,MAAM,MAAM,4BAA6B,CACxD,OAAQ,OACR,QAAS,CACP,eAAgB,kBAAA,EAElB,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,SAAUoa,EAAK,KACf,SAAUA,EAAK,KACf,SAAUnb,CAAA,CACX,CAAA,CACF,EAED,GAAI,CAACe,EAAS,GACZ,MAAM,IAAI,MAAM,eAAe,EAGjC,MAAMmN,EAAS,MAAMnN,EAAS,KAAA,EAG9B,GAAImN,EAAO,SAAU,CACnB,QAAQ,KAAK,wBAAyBA,EAAO,cAAc,EAE3D,MAAM7I,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAY,mFACzBA,EAAa,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA,gDAKe6I,EAAO,gBAAkB,sBAAsB;AAAA;AAAA;AAAA,UAIvF,SAAS,KAAK,YAAY7I,CAAY,EACtC,WAAW,IAAM,CACX,SAAS,KAAK,SAASA,CAAY,GACrC,SAAS,KAAK,YAAYA,CAAY,CAE1C,EAAG,GAAI,CACT,CAEA,OAAO6I,EAAO,QAChB,OAASnT,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAM7C,GAAI,CACF,MAAM6wB,EAAmB,MAAM,MAAM,oCAAqC,CACxE,OAAQ,OACR,QAAS,CACP,eAAgB,kBAAA,EAElB,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,YAAaN,EAAS,OAAS,uBAC/B,SAAUA,EAAS,QAAA,CACpB,CAAA,CACF,EAED,GAAIM,EAAiB,GAAI,CACvB,MAAMC,EAAiB,MAAMD,EAAiB,KAAA,EAGxCvmB,EAAe,SAAS,cAAc,KAAK,EACjDA,OAAAA,EAAa,UAAY,mFACzBA,EAAa,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YASzB,SAAS,KAAK,YAAYA,CAAY,EACtC,WAAW,IAAM,CACX,SAAS,KAAK,SAASA,CAAY,GACrC,SAAS,KAAK,YAAYA,CAAY,CAE1C,EAAG,GAAI,EAEAwmB,EAAe,QACxB,CACF,OAASC,EAAe,CACtB,QAAQ,MAAM,oCAAqCA,CAAa,CAClE,CAGA,MAAMC,EAAiB,gGAGjB1mB,EAAe,SAAS,cAAc,KAAK,EACjD,OAAAA,EAAa,UAAY,mFACzBA,EAAa,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QASzB,SAAS,KAAK,YAAYA,CAAY,EACtC,WAAW,IAAM,CACX,SAAS,KAAK,SAASA,CAAY,GACrC,SAAS,KAAK,YAAYA,CAAY,CAE1C,EAAG,GAAI,EAEA0mB,CACT,QAAA,CACElC,EAAiB,EAAK,CACxB,CACF,EAEMmC,EAAmB,MAAOzN,GAA+C,CAC7E,MAAMpD,EAAOoD,EAAM,OAAO,QAAQ,CAAC,EACnC,GAAIpD,EAAM,CAGR,GAAI,CADe,CAAC,aAAc,YAAa,YAAa,YAAY,EACxD,SAASA,EAAK,IAAI,EAAG,CACnC,MAAM8Q,EAAY,IAAI,MAAM,yDAAyD,EACrFZ,EAAa,YAAYY,EAAW,mBAAmB,EACvD,MACF,CAGA,GAAI9Q,EAAK,KAAO,GAAK,KAAO,KAAM,CAChC,MAAM+Q,EAAY,IAAI,MAAM,oFAAoF,EAChHb,EAAa,YAAYa,EAAW,gBAAgB,EACpD,MACF,CAEA/B,EAAgBhP,CAAI,EAGpB,MAAM7Z,EAAM,IAAI,gBAAgB6Z,CAAI,EACpC8O,EAAc3oB,CAAG,EAGjB,GAAI,CACF,MAAM6qB,EAAc,MAAMxB,EAAqBxP,CAAI,EACnDoQ,EAAY,CACV,GAAGD,EACH,UAAWa,CAAA,CACZ,CACH,OAASpxB,EAAO,CACd,QAAQ,MAAM,sBAAuBA,CAAK,EAG1C,MAAMI,EAAeJ,aAAiB,MAAQA,EAAM,QAAU,OAAOA,CAAK,EAC1E,GAAII,EAAa,SAAS,WAAW,GAAKA,EAAa,SAAS,mBAAmB,EAAG,CACpF,MAAMixB,EAAcrxB,aAAiB,MAAQA,EAAQ,IAAI,MAAMI,CAAY,EAC3EkwB,EAAa,YAAYe,EAAa,cAAc,CACtD,KAAO,CAEL,MAAM/mB,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAY,gFACzBA,EAAa,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YASzB,SAAS,KAAK,YAAYA,CAAY,EACtC,WAAW,IAAM,CACX,SAAS,KAAK,SAASA,CAAY,GACrC,SAAS,KAAK,YAAYA,CAAY,CAE1C,EAAG,GAAI,CACT,CACAqlB,EAAA,CACF,CACF,CACF,EAEMA,EAAqB,IAAM,CAC/BP,EAAgB,IAAI,EAChBH,IACF,IAAI,gBAAgBA,CAAU,EAC9BC,EAAc,EAAE,GAElBsB,EAAY,CAAE,GAAGD,EAAU,UAAW,GAAI,EACtCjB,EAAa,UACfA,EAAa,QAAQ,MAAQ,GAEjC,EAEMgC,EAAmB,MAAO/qB,GAAkC,CAChE,GAAI,CACF,MAAMP,EAAW,MAAM,MAAMO,EAAK,CAAE,OAAQ,OAAQ,EAC9CgrB,EAAcvrB,EAAS,QAAQ,IAAI,cAAc,EACvD,OAAOA,EAAS,IAAMurB,GAAa,WAAW,QAAQ,GAAK,EAC7D,MAAQ,CACN,MAAO,EACT,CACF,EAEMC,EAAmB,MAAO5xB,GAAuB,CACrDA,EAAE,eAAA,EACFoD,EAAW,EAAI,EAEf,GAAI,CAEF,GAAIutB,EAAS,WAAaxB,IAAe,OAEnC,CADiB,MAAMuC,EAAiBf,EAAS,SAAS,EAC3C,CACjB,MAAMkB,EAAW,IAAI,MAAM,iGAAiG,EAC5HnB,EAAa,YAAYmB,EAAU,mBAAmB,EACtDzuB,EAAW,EAAK,EAChB,MACF,CAIF,MAAM0uB,EAAgB,CACpB,GAAGnB,EACH,YAAaE,GAAgBE,EAAmB,EAAIA,EAAmBJ,EAAS,aAAe,CAAA,EAGjG,QAAQ,IAAI,oCAAqCmB,CAAa,EAE9D,MAAM1rB,EAAW,MAAM,MAAM,eAAgB,CAC3C,OAAQ,OACR,QAAS,CACP,eAAgB,kBAAA,EAElB,YAAa,UACb,KAAM,KAAK,UAAU0rB,CAAa,CAAA,CACnC,EAID,GAFA,QAAQ,IAAI,oCAAqC1rB,EAAS,MAAM,EAE5DA,EAAS,GAAI,CACf,MAAMmN,EAAS,MAAMnN,EAAS,KAAA,EAG9B,GAAIyqB,GAAgBE,EAAmB,EACrC,GAAI,CACF,MAAM,MAAM,gBAAgBxd,EAAO,SAAS,QAAS,CACnD,OAAQ,OACR,QAAS,CACP,eAAgB,kBAAA,EAElB,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,OAAQwd,EACR,cAAe,MAAA,CAChB,CAAA,CACF,CACH,OAASgB,EAAc,CACrB,QAAQ,MAAM,kBAAmBA,CAAY,CAE/C,CAIFnB,EAAY,CACV,SAAU,YACV,MAAO,GACP,YAAa,GACb,aAAc,GACd,UAAW,GACX,aAAc,IACd,YAAa,CAAA,CACd,EACDE,EAAgB,EAAK,EACrBE,EAAoB,CAAC,EACrBjB,EAAA,EACAX,EAAc,KAAK,EAGnB,MAAM1kB,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAY,iGACzBA,EAAa,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UASzB,SAAS,KAAK,YAAYA,CAAY,EAGtC,WAAW,IAAM,CACX,SAAS,KAAK,SAASA,CAAY,GACrC,SAAS,KAAK,YAAYA,CAAY,EAGxC,OAAO,SAAS,KAAO,YAAY6I,EAAO,SAAS,EACrD,EAAG,GAAI,CACT,KAAO,CACL,IAAI/S,EAAe,8CACfwxB,EAAe,KACnB,GAAI,CACF,MAAM5xB,EAAQ,MAAMgG,EAAS,KAAA,EAC7B,QAAQ,MAAM,4BAA6BhG,CAAK,EAE5CA,EAAM,QACRI,EAAeJ,EAAM,OAInBA,EAAM,UACR,QAAQ,MAAM,iBAAkBA,EAAM,OAAO,EAC7C4xB,EAAe5xB,EAAM,SAGnBA,EAAM,eACR,QAAQ,MAAM,2BAA4BA,EAAM,YAAY,EAE5DI,EAAe,sBADKJ,EAAM,aAAa,IAAK6xB,IAAY,GAAGA,GAAG,KAAK,KAAKA,GAAG,OAAO,EAAE,EAAE,KAAK,IAAI,CAC/C,GAEpD,OAASjyB,EAAG,CACV,QAAQ,MAAM,gCAAiCA,CAAC,CAClD,CAGA,MAAMkyB,EAAgB9rB,EAAS,QAAU,IACnC+rB,EAAkB3xB,EAAa,SAAS,UAAU,GAAKA,EAAa,SAAS,UAAU,EACvF4xB,EAAoBhsB,EAAS,SAAW,KAAO5F,EAAa,SAAS,YAAY,EAEvF,GAAI0xB,GAAiBC,EAAiB,CAEpC,MAAME,EAAe,IAAI,MAAM,GAAG7xB,CAAY,GAAGwxB,EAAe,MAAMA,CAAY,GAAK,EAAE,EAAE,EAC3FtB,EAAa,YAAY2B,EAAc,gBAAgB,CACzD,KAAO,CAEL,MAAM3nB,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAY,gFACzBA,EAAa,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA,kDAKelK,CAAY;AAAA,kBAC5C4xB,EAAoB,wFAA0F,EAAE;AAAA;AAAA;AAAA,YAIxH,SAAS,KAAK,YAAY1nB,CAAY,EACtC,WAAW,IAAM,CACX,SAAS,KAAK,SAASA,CAAY,GACrC,SAAS,KAAK,YAAYA,CAAY,CAE1C,EAAG,GAAI,CACT,CACF,CACF,OAAStK,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,EAGhD,MAAMkyB,EAAclyB,aAAiB,MAAQA,EAAQ,IAAI,MAAM,uEAAuE,EACtIswB,EAAa,YAAY4B,EAAa,wBAAwB,CAChE,QAAA,CACElvB,EAAW,EAAK,CAClB,CACF,EAEMigB,EAAmBzG,GAAqB,CAC5C,OAAQA,EAAA,CACN,IAAK,YAAa,OAAOpa,EAAAA,IAACsL,GAAA,CAAU,UAAU,SAAA,CAAU,EACxD,IAAK,UAAW,OAAOtL,EAAAA,IAACogB,GAAA,CAAQ,UAAU,SAAA,CAAU,EACpD,IAAK,UAAW,OAAOpgB,EAAAA,IAAC+vB,GAAA,CAAQ,UAAU,SAAA,CAAU,EACpD,IAAK,WAAY,OAAO/vB,EAAAA,IAACgwB,GAAA,CAAS,UAAU,SAAA,CAAU,EACtD,IAAK,SAAU,OAAOhwB,EAAAA,IAACiwB,GAAA,CAAM,UAAU,SAAA,CAAU,EACjD,QAAS,OAAOjwB,EAAAA,IAACkwB,GAAA,CAAS,UAAU,SAAA,CAAU,CAAA,CAElD,EAEMC,EAAoB/V,GAAqB,CAC7C,OAAQA,EAAA,CACN,IAAK,YAAa,MAAO,8BACzB,IAAK,UAAW,MAAO,4BACvB,IAAK,UAAW,MAAO,0BACvB,IAAK,WAAY,MAAO,4BACxB,IAAK,SAAU,MAAO,yBACtB,QAAS,MAAO,2BAAA,CAEpB,EAEA,OACEra,EAAAA,KAAC,MAAA,CAAI,UAAU,8BAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,SAAM,EACvDA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,qDAAA,CAAmD,CAAA,EACvF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,sCAAmC,EACxEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,gDAAA,CAA8C,CAAA,CAAA,CACrF,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,2BACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,sBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM0N,EAAa,MAAM,EAClC,UAAW,uCACTD,IAAc,OACV,oCACA,sDACN,GACD,SAAA,wBAAA,CAAA,EAGDzN,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM0N,EAAa,QAAQ,EACpC,UAAW,uCACTD,IAAc,SACV,oCACA,sDACN,GACD,SAAA,oBAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,EAEA1N,EAAAA,KAAC,MAAA,CAAI,UAAU,MACZ,SAAA,CAAA0N,IAAc,QACb1N,EAAAA,KAAC,OAAA,CAAK,SAAUqvB,EAAkB,UAAU,YAE1C,SAAA,CAAArvB,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,WAAQ,EACxEA,EAAAA,IAAC,OAAI,UAAU,wCACZ,YAAe,QAAQ,IAAKoa,GAC3Bra,EAAAA,KAAC,SAAA,CAEC,KAAK,SACL,QAAS,IAAMquB,EAAY,CAAE,GAAGD,EAAU,SAAA/T,EAAU,EACpD,UAAW,6EACT+T,EAAS,WAAa/T,EAClB,iDACA,uCACN,GAEA,SAAA,CAAApa,EAAAA,IAAC,MAAA,CAAI,UAAW,wCAAwCmwB,EAAiB/V,CAAQ,CAAC,+CAC/E,SAAAyG,EAAgBzG,CAAQ,CAAA,CAC3B,EACApa,EAAAA,IAAC,OAAA,CAAK,UAAU,iCAAkC,SAAAoa,CAAA,CAAS,CAAA,CAAA,EAZtDA,CAAA,CAcR,CAAA,CACH,CAAA,EACF,EAGAra,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,gBAAa,EAC7EA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,SAAQ,GACR,MAAOmuB,EAAS,MAChB,SAAW3wB,GAAM4wB,EAAY,CAAE,GAAGD,EAAU,MAAO3wB,EAAE,OAAO,MAAO,EACnE,UAAU,iHACV,YAAY,6BAAA,CAAA,CACd,EACF,SAEC,MAAA,CACC,SAAA,CAAAwC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,eAAY,EAC5EA,EAAAA,IAAC,QAAA,CACC,KAAK,MACL,SAAQ,GACR,MAAOmuB,EAAS,aAChB,SAAW3wB,GAAM4wB,EAAY,CAAE,GAAGD,EAAU,aAAc3wB,EAAE,OAAO,MAAO,EAC1E,UAAU,iHACV,YAAY,6BAAA,CAAA,CACd,CAAA,CACF,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAwC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,cAAW,EAC3EA,EAAAA,IAAC,WAAA,CACC,KAAM,EACN,MAAOmuB,EAAS,YAChB,SAAW3wB,GAAM4wB,EAAY,CAAE,GAAGD,EAAU,YAAa3wB,EAAE,OAAO,MAAO,EACzE,UAAU,iHACV,YAAY,0BAAA,CAAA,CACd,EACF,SAGC,MAAA,CACC,SAAA,CAAAwC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,2BAAwB,EAGxFD,EAAAA,KAAC,MAAA,CAAI,UAAU,sBACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAM,CACb6sB,EAAc,KAAK,EACnBW,EAAA,CACF,EACA,UAAW,2DACTZ,IAAe,MACX,yDACA,oEACN,GAEA,SAAA,CAAA3sB,EAAAA,IAACkwB,GAAA,CAAS,UAAU,qBAAA,CAAsB,EAAE,SAAA,CAAA,CAAA,EAG9CnwB,EAAAA,KAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAM,CACb6sB,EAAc,MAAM,EACpBwB,EAAY,CAAE,GAAGD,EAAU,UAAW,GAAI,CAC5C,EACA,UAAW,2DACTxB,IAAe,OACX,yDACA,oEACN,GAEA,SAAA,CAAA3sB,EAAAA,IAACqe,GAAA,CAAO,UAAU,qBAAA,CAAsB,EAAE,aAAA,CAAA,CAAA,CAE5C,EACF,EAECsO,IAAe,MACd5sB,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,MACL,MAAOmuB,EAAS,UAChB,SAAW3wB,GAAM4wB,EAAY,CAAE,GAAGD,EAAU,UAAW3wB,EAAE,OAAO,MAAO,EACvE,UAAU,iHACV,YAAY,yBAAA,CAAA,EAEdwC,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,yFAAA,CAE1C,CAAA,EACF,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAC+sB,EAmBAhtB,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,sEACb,eAACowB,GAAA,CAAU,UAAU,0BAA0B,CAAA,CACjD,SACC,MAAA,CACC,SAAA,CAAApwB,EAAAA,IAAC,IAAA,CAAE,UAAU,4BAA6B,SAAA+sB,EAAa,KAAK,EAC5DhtB,EAAAA,KAAC,IAAA,CAAE,UAAU,wBACT,SAAA,EAAAgtB,EAAa,KAAO,KAAO,MAAM,QAAQ,CAAC,EAAE,KAAA,EAChD,EACCN,GACCzsB,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,cAAA,CAAY,CAAA,CAAA,CAErD,CAAA,EACF,EACAA,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAASutB,EACT,UAAU,yDACV,SAAUd,EAEV,SAAAzsB,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAGC8jB,GACC9sB,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,IAAK6sB,EACL,IAAI,UACJ,UAAU,qCAAA,CAAA,EAEXJ,SACE,MAAA,CAAI,UAAU,sFACb,SAAA1sB,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,2FAAA,CAA4F,EAC3GA,EAAAA,IAAC,IAAA,CAAE,UAAU,UAAU,SAAA,qBAAA,CAAmB,CAAA,CAAA,CAC5C,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CAEJ,EA9DAD,EAAAA,KAAC,MAAA,CACC,QAAS,IAAMmtB,EAAa,SAAS,MAAA,EACrC,UAAU,6IAEV,SAAA,CAAAltB,EAAAA,IAACqe,GAAA,CAAO,UAAU,oCAAA,CAAqC,EACvDre,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,mCAAgC,EAClEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,2CAErC,EACAA,EAAAA,IAAC,QAAA,CACC,IAAKktB,EACL,KAAK,OACL,OAAO,UACP,SAAU2B,EACV,UAAU,QAAA,CAAA,CACZ,CAAA,CAAA,CA+CF,CAEJ,CAAA,EAEJ,EAGA9uB,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,6CAA6C,SAAA,sBAAmB,EAG9ED,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,iDAAiD,SAAA,yBAAsB,EACxFA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,IAAI,MACJ,IAAI,OACJ,MAAOmuB,EAAS,aAChB,SAAW3wB,GAAM4wB,EAAY,CAAE,GAAGD,EAAU,aAAc,KAAK,IAAI,IAAK,OAAO3wB,EAAE,OAAO,KAAK,CAAC,EAAG,EACjG,UAAU,kHAAA,CAAA,EAEZwC,EAAAA,IAAC,IAAA,CAAE,UAAU,+BAA+B,SAAA,6BAAA,CAA2B,CAAA,EACzE,QAGC,MAAA,CAAI,UAAU,OACb,SAAAD,EAAAA,KAAC,QAAA,CAAM,UAAU,6CACf,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,QAASquB,EACT,SAAW7wB,GAAM,CACf8wB,EAAgB9wB,EAAE,OAAO,OAAO,EAC3BA,EAAE,OAAO,UACZgxB,EAAoB,CAAC,EACrBJ,EAAY,CAAE,GAAGD,EAAU,YAAa,EAAK,EAEjD,EACA,UAAU,yEAAA,CAAA,SAEX,MAAA,CACC,SAAA,CAAAnuB,EAAAA,IAAC,OAAA,CAAK,UAAU,sCAAsC,SAAA,yBAAsB,EAC5EA,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,yDAAA,CAAuD,CAAA,CAAA,CAChG,CAAA,CAAA,CACF,CAAA,CACF,EAGCquB,GACCtuB,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,iDAAiD,SAAA,qBAAkB,EACpFA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,IAAI,IACJ,KAAK,IACL,MAAOuuB,GAAoB,GAC3B,SAAW/wB,GAAM,CACf,MAAM6L,EAAS,OAAO7L,EAAE,OAAO,KAAK,EACpCgxB,EAAoBnlB,CAAM,EAC1B+kB,EAAY,CACV,GAAGD,EACH,YAAa9kB,EAAS,EAAIA,EAAS8kB,EAAS,aAAe,CAAA,CAC5D,CACH,EACA,UAAU,mHACV,YAAY,4BAAA,CAAA,EAEdpuB,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,OAAC,IAAA,CAAE,SAAA,CAAA,iCAA+BouB,EAAS,aAAa,SAAA,EAAO,EAC9DI,EAAmB,GAClBxuB,EAAAA,KAAC,IAAA,CAAE,SAAA,CAAA,iBAAewuB,EAAmBJ,EAAS,cAAc,QAAQ,CAAC,EAAE,iBAAA,CAAA,CAAe,CAAA,CAAA,CAE1F,CAAA,EACF,QAGD,MAAA,CAAI,UAAU,wDACb,SAAApuB,EAAAA,KAAC,IAAA,CAAE,UAAU,0BACX,SAAA,CAAAC,EAAAA,IAAC,UAAO,SAAA,eAAA,CAAa,EAAS,IAAEmuB,EAAS,aACxCE,GAAgBE,EAAmB,GAClCxuB,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC,KAAA,EAAG,EACJA,EAAAA,IAAC,UAAO,SAAA,gBAAA,CAAc,EAAS,IAAEuuB,EAAiB,cACjD,KAAA,EAAG,EACJvuB,EAAAA,IAAC,UAAO,SAAA,kBAAA,CAAgB,EAAS,KAAGuuB,EAAmBJ,EAAS,cAAc,QAAQ,CAAC,EAAE,OAAA,EAC3F,EAED,CAACE,GACAtuB,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC,KAAA,EAAG,EACJA,EAAAA,IAAC,UAAO,SAAA,gBAAA,CAAc,EAAS,8CAAA,CAAA,CACjC,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,EACF,EAEAA,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,SAAUW,GAAW8rB,EACrB,UAAU,+MAET,SAAA9rB,EAAU,cAAgB8rB,EAAgB,sBAAwB,qBAAA,CAAA,CACrE,EACF,EAGDhf,IAAc,UACb1N,OAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qEACb,SAAA,CAAAC,EAAAA,IAACqe,GAAA,CAAO,UAAU,sCAAA,CAAuC,EACzDre,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,sBAAmB,EAC5EA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,oDAElC,EACAA,EAAAA,IAAC,SAAA,CAAO,UAAU,6JAA6J,SAAA,eAE/K,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,4EAAA,CAE1C,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,iFACb,eAACme,GAAA,CAAO,UAAU,qBAAqB,CAAA,CACzC,EACAne,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,SAAM,EACvDA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,wCAAA,CAAsC,CAAA,EAC7E,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mEACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,mFACb,eAACqwB,GAAA,CAAM,UAAU,qBAAqB,CAAA,CACxC,EACArwB,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,SAAM,EACzDA,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,0CAAA,CAAwC,CAAA,EACjF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,kFACb,eAAC6O,GAAA,CAAS,UAAU,qBAAqB,CAAA,CAC3C,EACA7O,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,YAAS,EAC3DA,EAAAA,IAAC,IAAA,CAAE,UAAU,yBAAyB,SAAA,uCAAA,CAAqC,CAAA,CAAA,CAC7E,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,4BAAyB,EAClFA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,4KAAA,CAG7B,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,EACF,CAEJ,CC5zBA,SAAwBswB,GAAoB,CAAE,OAAA5oB,EAAQ,QAAAC,EAAS,kBAAA4oB,GAA+C,CAC5G,KAAM,CAACzV,EAAUC,CAAW,EAAIhc,WAAS,CACvC,WAAY,GACZ,SAAU,YACV,YAAa,GACb,cAAe,QACf,aAAc,GACd,KAAM,IACN,WAAY,GACZ,eAAgB,GAChB,aAAc,MAAA,CACf,EACK,CAACyxB,EAAgBC,CAAiB,EAAI1xB,EAAAA,SAA0B,CAAA,CAAE,EAClE,CAACsmB,EAAcC,CAAe,EAAIvmB,EAAAA,SAAS,EAAK,EAChD,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAS,EAAE,EAC/B,CAACwmB,EAAYC,CAAa,EAAIzmB,EAAAA,SAAS,CAAE,QAAS,EAAG,EAE3DM,EAAAA,UAAU,IAAM,CACd,GAAIqI,EAAQ,CACVgpB,EAAA,EACAjL,EAAA,EAGA,MAAMkL,MAAe,KACrBA,EAAS,QAAQA,EAAS,QAAA,EAAY,CAAC,EACvC5V,EAAYxW,IAAS,CACnB,GAAGA,EACH,WAAYosB,EAAS,YAAA,EAAc,MAAM,EAAG,EAAE,CAAA,EAC9C,CACJ,CACF,EAAG,CAACjpB,CAAM,CAAC,EAEX,MAAMgpB,EAAsB,SAAY,CACtC,GAAI,CACF,MAAM9sB,EAAW,MAAM,MAAM,cAAc,EAC3C,GAAIA,EAAS,GAAI,CACf,MAAM4B,EAAU,MAAM5B,EAAS,KAAA,EAC/B6sB,EAAkBjrB,EAAQ,MAAM,EAAG,EAAE,CAAC,CACxC,CACF,OAAS5H,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,CACjD,CACF,EAEM6nB,EAAkB,SAAY,CAClC,GAAI,CACF,MAAM7hB,EAAW,MAAM,MAAM,uBAAuB,EACpD,GAAIA,EAAS,GAAI,CAEf,MAAM8hB,GADU,MAAM9hB,EAAS,KAAA,GACL,KAAM+hB,GAAWA,EAAE,gBAAkB,KAAK,EACpEH,EAAc,CAAE,QAASE,GAAW,SAAW,EAAG,CACpD,CACF,OAAS9nB,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,CAChD,CACF,EAEMod,EAAe,MAAOxd,GAAuB,CACjDA,EAAE,eAAA,EACF8nB,EAAgB,EAAI,EACpB/b,EAAS,EAAE,EAEX,GAAI,CACF,MAAM3F,EAAW,MAAM,MAAM,wBAAyB,CACpD,OAAQ,OACR,QAAS,CACP,eAAgB,kBAAA,EAElB,KAAM,KAAK,UAAU,CACnB,GAAGkX,EACH,WAAYA,EAAS,WAAa,SAASA,EAAS,UAAU,EAAI,OAClE,aAAc,SAASA,EAAS,YAAY,EAC5C,KAAM,WAAWA,EAAS,IAAI,EAC9B,eAAgB,WAAWA,EAAS,cAAc,CAAA,CACnD,CAAA,CACF,EAED,GAAIlX,EAAS,GACX2sB,EAAA,EACA5oB,EAAA,EACAoT,EAAY,CACV,WAAY,GACZ,SAAU,YACV,YAAa,GACb,cAAe,QACf,aAAc,GACd,KAAM,IACN,WAAY,GACZ,eAAgB,GAChB,aAAc,MAAA,CACf,MACI,CACL,MAAMlR,EAAY,MAAMjG,EAAS,KAAA,EACjC2F,EAASM,EAAU,OAAS,2BAA2B,CACzD,CACF,MAAgB,CACdN,EAAS,2BAA2B,CACtC,QAAA,CACE+b,EAAgB,EAAK,CACvB,CACF,EAEMsL,EAAuBprB,GAA2B,CACtDuV,EAAYxW,IAAS,CACnB,GAAGA,EACH,WAAYiB,EAAQ,GAAG,SAAA,EACvB,SAAUA,EAAQ,SAClB,YAAaA,EAAQ,YAAA,EACrB,CACJ,EAEMogB,EAAkB9K,EAAS,gBAC9B,WAAWA,EAAS,cAAc,EAAI,WAAWA,EAAS,IAAI,GAAG,QAAQ,CAAC,EAAI,IAEjF,OAAKpT,QAGF,MAAA,CAAI,UAAU,iFACb,SAAA3H,EAAAA,KAAC,MAAA,CAAI,UAAU,oEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,wDACZ,SAAA,CAAAC,EAAAA,IAACqB,GAAA,CAAW,UAAU,4BAAA,CAA6B,EAAE,wBAAA,EAEvD,EACArB,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,oCAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EACA/I,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,4GAAA,CAE1C,CAAA,EACF,EAEAD,EAAAA,KAAC,OAAA,CAAK,SAAUib,EAAc,UAAU,gBACrC,SAAA,CAAApd,GACCoC,EAAAA,IAAC,OAAI,UAAU,iDACb,eAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAC7C,SAID,MAAA,CACC,SAAA,CAAAoC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,yBAEhE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEZ,SAAA,CAAAywB,EAAe,OAAS,GACvBzwB,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,iCAA8B,QACvE,MAAA,CAAI,UAAU,6DACZ,SAAAwwB,EAAe,IAAKhrB,GACnBzF,EAAAA,KAAC,SAAA,CAEC,KAAK,SACL,QAAS,IAAM6wB,EAAoBprB,CAAO,EAC1C,UAAW,kEACTsV,EAAS,aAAetV,EAAQ,GAAG,SAAA,EAAa,0CAA4C,EAC9F,GAEA,SAAA,CAAAxF,EAAAA,IAAC,MAAA,CAAI,UAAU,oCAAqC,SAAAwF,EAAQ,MAAM,EAClEzF,EAAAA,KAAC,MAAA,CAAI,UAAU,wBAAyB,SAAA,CAAAyF,EAAQ,SAAS,SAAOA,EAAQ,YAAA,CAAA,CAAa,CAAA,CAAA,EARhFA,EAAQ,EAAA,CAUhB,CAAA,CACH,CAAA,EACF,SAID,MAAA,CACC,SAAA,CAAAxF,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,iCAA8B,EACxED,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,MAAO+a,EAAS,SAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,SAAUtd,EAAE,OAAO,MAAO,EACtE,UAAU,wGAEV,SAAA,CAAAwC,EAAAA,IAAC,SAAA,CAAO,MAAM,YAAY,SAAA,YAAS,EACnCA,EAAAA,IAAC,SAAA,CAAO,MAAM,SAAS,SAAA,SAAM,EAC7BA,EAAAA,IAAC,SAAA,CAAO,MAAM,UAAU,SAAA,UAAO,EAC/BA,EAAAA,IAAC,SAAA,CAAO,MAAM,UAAU,SAAA,SAAA,CAAO,CAAA,CAAA,CAAA,EAEjCA,EAAAA,IAAC,QAAA,CACC,KAAK,MACL,YAAY,cACZ,MAAO8a,EAAS,YAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,YAAatd,EAAE,OAAO,MAAO,WAAY,GAAI,EACzF,UAAU,wGACV,SAAQ,EAAA,CAAA,CACV,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGAuC,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,+CACf,SAAA,CAAAC,EAAAA,IAACsZ,GAAA,CAAO,UAAU,qBAAA,CAAsB,EAAE,mBAAA,EAE5C,EACAvZ,EAAAA,KAAC,SAAA,CACC,MAAO+a,EAAS,cAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,cAAetd,EAAE,OAAO,MAAO,EAC3E,UAAU,+GACV,SAAQ,GAER,SAAA,CAAAwC,EAAAA,IAAC,SAAA,CAAO,MAAM,QAAQ,SAAA,QAAK,EAC3BA,EAAAA,IAAC,SAAA,CAAO,MAAM,QAAQ,SAAA,QAAK,EAC3BA,EAAAA,IAAC,SAAA,CAAO,MAAM,SAAS,SAAA,SAAM,EAC7BA,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,UAAA,CAAQ,CAAA,CAAA,CAAA,CACnC,EACF,SAEC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,eAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,YAAY,cACZ,MAAO8a,EAAS,aAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,aAActd,EAAE,OAAO,MAAO,EAC1E,UAAU,+GACV,SAAQ,GACR,IAAI,GAAA,CAAA,CACN,CAAA,CACF,CAAA,EACF,EAGAuC,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,2BAEhE,EACAD,EAAAA,KAAC,SAAA,CACC,MAAO+a,EAAS,KAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,KAAMtd,EAAE,OAAO,MAAO,EAClE,UAAU,+GACV,SAAQ,GAER,SAAA,CAAAwC,EAAAA,IAAC,SAAA,CAAO,MAAM,MAAM,SAAA,OAAI,EACxBA,EAAAA,IAAC,SAAA,CAAO,MAAM,IAAI,SAAA,KAAE,EACpBA,EAAAA,IAAC,SAAA,CAAO,MAAM,MAAM,SAAA,OAAI,EACxBA,EAAAA,IAAC,SAAA,CAAO,MAAM,IAAI,SAAA,KAAE,EACpBA,EAAAA,IAAC,SAAA,CAAO,MAAM,IAAI,SAAA,KAAE,EACpBA,EAAAA,IAAC,SAAA,CAAO,MAAM,IAAI,SAAA,IAAA,CAAE,CAAA,CAAA,CAAA,CACtB,EACF,SAEC,MAAA,CACC,SAAA,CAAAD,EAAAA,KAAC,QAAA,CAAM,UAAU,+CACf,SAAA,CAAAC,EAAAA,IAAC2K,GAAA,CAAM,UAAU,qBAAA,CAAsB,EAAE,YAAA,EAE3C,EACA3K,EAAAA,IAAC,QAAA,CACC,KAAK,iBACL,MAAO8a,EAAS,WAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,WAAYtd,EAAE,OAAO,MAAO,EACxE,UAAU,+GACV,SAAQ,GACR,QAAS,KAAA,EAAO,cAAc,MAAM,EAAG,EAAE,CAAA,CAAA,CAC3C,CAAA,CACF,CAAA,EACF,EAGAuC,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,kCAA+B,EAE9ED,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,kBAEhE,EACAD,EAAAA,KAAC,SAAA,CACC,MAAO+a,EAAS,aAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,aAActd,EAAE,OAAO,MAAO,EAC1E,UAAU,+GACV,SAAQ,GAER,SAAA,CAAAwC,EAAAA,IAAC,SAAA,CAAO,MAAM,OAAO,SAAA,4BAAyB,EAC9CA,EAAAA,IAAC,SAAA,CAAO,MAAM,QAAQ,SAAA,+BAAA,CAA6B,CAAA,CAAA,CAAA,CACrD,EACF,SAEC,MAAA,CACC,SAAA,CAAAD,EAAAA,KAAC,QAAA,CAAM,UAAU,+CACf,SAAA,CAAAC,EAAAA,IAAC+O,GAAA,CAAW,UAAU,qBAAA,CAAsB,EAAE,qBAAA,EAEhD,EACA/O,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,KAAK,OACL,YAAY,kBACZ,MAAO8a,EAAS,eAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,eAAgBtd,EAAE,OAAO,MAAO,EAC5E,UAAU,+GACV,SAAQ,GACR,IAAI,IACJ,IAAK+nB,EAAW,OAAA,CAAA,EAElBxlB,EAAAA,KAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,eAC3BwlB,EAAW,QAAQ,QAAQ,CAAC,CAAA,CAAA,CAC3C,CAAA,CAAA,CACF,CAAA,EACF,EAECzK,EAAS,gBACR/a,OAAC,MAAA,CAAI,UAAU,sDACb,SAAA,CAAAA,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,eACvBA,EAAAA,KAAC,OAAA,CAAK,UAAU,cAAc,SAAA,CAAA,IAAE+a,EAAS,cAAA,CAAA,CAAe,CAAA,EACtE,EACA/a,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,gCACNA,EAAAA,KAAC,OAAA,CAAK,UAAU,6BAA6B,SAAA,CAAA,IAAE6lB,CAAA,CAAA,CAAgB,CAAA,EAC9F,EACA5lB,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,+DAAA,CAE1C,CAAA,CAAA,CACF,CAAA,EAEJ,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS2H,EACT,UAAU,qFACX,SAAA,QAAA,CAAA,EAGD3H,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,SAAUqlB,GAAgB,CAACvK,EAAS,aAAe,CAACA,EAAS,cAAgB,CAACA,EAAS,eACvF,UAAU,kIAET,WAAe,cAAgB,iBAAA,CAAA,CAClC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EA1OkB,IA4OtB,CCnTA,SAAwB+V,IAAS,CAC/B,KAAM,CAACpjB,EAAWC,CAAY,EAAI3O,EAAAA,SAAkE,WAAW,EACzG,CAAC+xB,EAAWC,CAAY,EAAIhyB,EAAAA,SAA2B,CAAA,CAAE,EACzD,CAACiyB,EAAaC,CAAc,EAAIlyB,EAAAA,SAAyB,CAAA,CAAE,EAC3D,CAACmyB,EAAoBC,CAAqB,EAAIpyB,EAAAA,SAA2B,CAAA,CAAE,EAC3E,CAACyG,EAAS4rB,CAAU,EAAIryB,EAAAA,SAAyB,CAAA,CAAE,EACnD,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAI,EACrC,CAACsyB,EAAiBC,CAAkB,EAAIvyB,EAAAA,SAAS,EAAK,EACtD,CAACwyB,EAAgBC,CAAiB,EAAIzyB,EAAAA,SAAS,EAAK,EACpD,CAAC0yB,EAAkBC,CAAmB,EAAI3yB,EAAAA,SAAgC,IAAI,EAEpFM,EAAAA,UAAU,IAAM,CACdsyB,EAAA,CACF,EAAG,CAAClkB,CAAS,CAAC,EAEd,MAAMkkB,EAAY,SAAY,CAC5B/wB,EAAW,EAAI,EACf,GAAI,CACF,GAAI6M,IAAc,YAAa,CAC7B,MAAM7J,EAAW,MAAM,MAAM,uBAAuB,EACpD,GAAIA,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5BmtB,EAAa7zB,CAAI,CACnB,MACE,QAAQ,MAAM,6BAA8B0G,EAAS,MAAM,CAE/D,SAAW6J,IAAc,eAAgB,CACvC,MAAM7J,EAAW,MAAM,MAAM,uBAAwB,CAAE,YAAa,UAAW,EAC/E,GAAIA,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5BqtB,EAAe/zB,CAAI,CACrB,MACE,QAAQ,MAAM,kCAAmC0G,EAAS,MAAM,EAChEqtB,EAAe,CAAA,CAAE,CAErB,SAAWxjB,IAAc,aAAc,CACrC,MAAM7J,EAAW,MAAM,MAAM,+BAAgC,CAAE,YAAa,UAAW,EACvF,GAAIA,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5ButB,EAAsBj0B,CAAI,CAC5B,MACE,QAAQ,MAAM,qCAAsC0G,EAAS,MAAM,EACnEutB,EAAsB,CAAA,CAAE,CAE5B,SAAW1jB,IAAc,UAAW,CAClC,MAAM7J,EAAW,MAAM,MAAM,cAAc,EAC3C,GAAIA,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5BwtB,EAAWl0B,CAAI,CACjB,MACE,QAAQ,MAAM,2BAA4B0G,EAAS,MAAM,CAE7D,CACF,OAAShG,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,CAC9C,QAAA,CACEgD,EAAW,EAAK,CAClB,CACF,EAEMgxB,EAAyB7M,GAA6B,CAC1D2M,EAAoB3M,CAAQ,EAC5ByM,EAAkB,EAAI,CACxB,EAEMK,EAAwB,IAAM,CAClCF,EAAA,EACAL,EAAmB,EAAK,CAC1B,EAEMQ,EAAyB,IAAM,CACnCH,EAAA,CACF,EAEM9O,EAAe,CAACre,EAAkCoO,IAClD,OAAOpO,GAAU,UAAY,OAAO,MAAMA,CAAK,EAC1C,IAEFA,EAAM,eAAe,OAAWoO,CAAO,EAG1Cmf,EAAkBvtB,GAClB,OAAOA,GAAU,UAAY,OAAO,MAAMA,CAAK,EAC1C,IAEFA,EAAM,eAAe,OAAW,CAAE,MAAO,WAAY,SAAU,MAAO,sBAAuB,EAAG,sBAAuB,CAAA,CAAG,EAG7HqhB,EAAuBC,GAAsB,CACjD,MAAMtB,MAAU,KAEV/b,EADU,IAAI,KAAKqd,CAAS,EACb,QAAA,EAAYtB,EAAI,QAAA,EAErC,GAAI/b,GAAQ,EAAG,MAAO,UAEtB,MAAME,EAAQ,KAAK,MAAMF,GAAQ,IAAO,GAAK,GAAG,EAC1CC,EAAU,KAAK,MAAOD,GAAQ,IAAO,GAAK,KAAQ,IAAO,GAAG,EAElE,OAAIE,EAAQ,GAEH,GADM,KAAK,MAAMA,EAAQ,EAAE,CACpB,KAAKA,EAAQ,EAAE,IAGxB,GAAGA,CAAK,KAAKD,CAAO,GAC7B,EAEM0b,EAAkB7I,GAAmB,CACzC,OAAQA,EAAA,CACN,IAAK,SAAU,MAAO,8BACtB,IAAK,UAAW,MAAO,4BACvB,IAAK,WAAY,MAAO,4BACxB,QAAS,MAAO,2BAAA,CAEpB,EAEMyW,EAAe,CAAC,CAAE,SAAAjN,KAA6C,CACnE,MAAMkN,EAAY,IAAI,KAAKlN,EAAS,UAAU,OAAS,KAEvD,OACEhlB,EAAAA,KAAC,MAAA,CAAI,UAAU,mFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,IAAK+kB,EAAS,gBAAkB,yBAChC,IAAKA,EAAS,aACd,UAAU,sBAAA,CAAA,SAEX,MAAA,CACC,SAAA,CAAA/kB,EAAAA,IAAC,IAAA,CAAE,UAAU,4BAA6B,SAAA+kB,EAAS,aAAa,EAChE/kB,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,WAAS,QAAA,CAAS,CAAA,CAAA,CAC1D,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAW,8CAA8CokB,EAAeW,EAAS,MAAM,CAAC,GAC3F,SAAAA,EAAS,MAAA,CACZ,EACA/kB,EAAAA,IAAC,IAAA,CACC,KAAM+kB,EAAS,YACf,OAAO,SACP,IAAI,sBACJ,UAAU,oCAEV,SAAA/kB,EAAAA,IAACid,GAAA,CAAa,UAAU,SAAA,CAAU,CAAA,CAAA,CACpC,CAAA,CACF,CAAA,EACF,EAEC8H,EAAS,eACRhlB,OAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,oCAAqC,SAAA+kB,EAAS,cAAc,EACzE/kB,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,WAAS,gBAAA,CAAiB,CAAA,EAClE,EAGFD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACsZ,GAAA,CAAO,UAAU,uBAAA,CAAwB,EAC1CvZ,EAAAA,KAAC,OAAA,CAAK,UAAU,sBACb,SAAA,CAAAglB,EAAS,cAAc,IAAElC,EAAakC,EAAS,YAAY,CAAA,CAAA,CAC9D,CAAA,EACF,EACAhlB,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,OAAI,QACxC,IAAA,CAAE,UAAU,+BAAgC,SAAA+xB,EAAehN,EAAS,SAAS,CAAA,CAAE,CAAA,CAAA,CAClF,CAAA,EACF,EAEAhlB,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC2K,GAAA,CAAM,UAAU,uBAAA,CAAwB,QACxC,OAAA,CAAK,UAAU,wBACb,SAAAkb,EAAoBd,EAAS,UAAU,CAAA,CAC1C,CAAA,EACF,EACAhlB,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,OAAI,QACxC,IAAA,CAAE,UAAU,8BACV,SAAA,OAAO+kB,EAAS,MAAS,UAAY,CAAC,OAAO,MAAMA,EAAS,IAAI,EAAI,GAAGA,EAAS,IAAI,IAAM,GAAA,CAC7F,CAAA,CAAA,CACF,CAAA,EACF,EAECA,EAAS,cAAgBA,EAAS,uBAAyB,GAC1DhlB,OAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,uBAAoB,EAC9DD,EAAAA,KAAC,IAAA,CAAE,UAAU,oCACV,SAAA,CAAAglB,EAAS,aAAa,YAAA,EAAc,MAAIgN,EAAehN,EAAS,sBAAsB,EAAE,SAAA,CAAA,CAC3F,CAAA,EACF,EAGD,CAACkN,GACAjyB,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM4xB,EAAsB7M,CAAQ,EAC7C,UAAU,yFACX,SAAA,sBAAA,CAAA,CAED,CAAA,CAEJ,CAAA,EACF,CAEJ,EAEMmN,EAAiB,CAAC,CAAE,SAAAnN,KAA2C,CACnE,MAAMoN,EAAapN,EAAS,kBAAoB,WAC1CqN,EAAQD,GAAcpN,EAAS,cAAgB,EAErD,OACEhlB,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,IAAA,CAAE,UAAU,4BACV,SAAA,CAAAglB,EAAS,cAAc,gBAAcA,EAAS,YAAA,EACjD,EACA/kB,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,WAAS,QAAA,CAAS,CAAA,EAC1D,EACAA,EAAAA,IAAC,OAAA,CAAK,UAAW,8CAA8CokB,EAAeW,EAAS,eAAe,CAAC,GACpG,SAAAA,EAAS,eAAA,CACZ,CAAA,EACF,EAEAhlB,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,kBAAe,QACnD,IAAA,CAAE,UAAU,4BAA6B,SAAA+kB,EAAS,gBAAgB,aAAY,CAAE,CAAA,EACnF,SACC,MAAA,CACC,SAAA,CAAA/kB,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,gBAAa,EAClDD,EAAAA,KAAC,IAAA,CAAE,UAAU,cAAc,SAAA,CAAA,IAAEglB,EAAS,kBAAkB,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EACrE,SACC,MAAA,CACC,SAAA,CAAA/kB,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,eAAY,QAChD,IAAA,CAAE,UAAU,cAAe,SAAA+kB,EAAS,aAAa,gBAAe,CAAE,CAAA,EACrE,SACC,MAAA,CACC,SAAA,CAAA/kB,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,gBAAa,QACjD,IAAA,CAAE,UAAU,cAAe,SAAA+kB,EAAS,cAAc,gBAAe,CAAE,CAAA,CAAA,CACtE,CAAA,EACF,EAECoN,EACCnyB,EAAAA,IAAC,MAAA,CAAI,UAAW,kBAAkBoyB,EAAQ,sCAAwC,iCAAiC,GACjH,SAAAryB,OAAC,KAAE,UAAW,uBAAuBqyB,EAAQ,iBAAmB,cAAc,GAC3E,SAAA,CAAAA,EAAQ,OAAS,OAAO,MAAIA,EAAQ,KAAKrN,EAAS,cAAc,QAAQ,CAAC,CAAC,GAAK,IAAIA,EAAS,kBAAkB,QAAQ,CAAC,CAAC,OAAA,CAAA,CAC3H,CAAA,CACF,EAEAhlB,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAA,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,qBACjBA,EAAAA,KAAC,OAAA,CAAK,UAAU,6BAA6B,SAAA,CAAA,IAAEglB,EAAS,iBAAiB,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EACxG,EACAhlB,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,YACzB8lB,EAAoBd,EAAS,UAAU,CAAA,CAAA,CACnD,CAAA,CAAA,CACF,CAAA,EAEJ,CAEJ,EAEMsN,EAAmB,CAAC,CAAE,QAAA7sB,KAC1BzF,OAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,IAAKwF,EAAQ,gBAAkB,yBAC/B,IAAKA,EAAQ,aACb,UAAU,sBAAA,CAAA,SAEX,MAAA,CACC,SAAA,CAAAxF,EAAAA,IAAC,IAAA,CAAE,UAAU,4BAA6B,SAAAwF,EAAQ,aAAa,QAC9D,IAAA,CAAE,UAAU,wBAAyB,SAAAA,EAAQ,QAAA,CAAS,CAAA,CAAA,CACzD,CAAA,EACF,QAEC,KAAA,CAAG,UAAU,iCAAkC,SAAAA,EAAQ,MAAM,EAE9DzF,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,cAAW,EAChDD,EAAAA,KAAC,IAAA,CAAE,UAAU,cAAc,SAAA,CAAA,IAAEyF,EAAQ,YAAY,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EAC9D,SACC,MAAA,CACC,SAAA,CAAAxF,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,YAAS,EAC9CD,EAAAA,KAAC,IAAA,CAAE,UAAU,cAAe,SAAA,CAAAyF,EAAQ,iBAAiB,IAAEA,EAAQ,YAAA,CAAA,CAAa,CAAA,CAAA,CAC9E,CAAA,EACF,QAEC,MAAA,CAAI,UAAU,kCACb,SAAAzF,EAAAA,KAAC,IAAA,CAAE,UAAU,qCAAqC,SAAA,CAAA,aACrCyF,EAAQ,gBAAgB,QAAQ,CAAC,CAAA,CAAA,CAC9C,CAAA,CACF,EAEAxF,EAAAA,IAAC,SAAA,CAAO,UAAU,2FAA2F,SAAA,YAAA,CAE7G,CAAA,EACF,EAGF,OACED,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,iBAAc,EAC/DA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,mEAAA,CAAiE,CAAA,EAChG,EACAD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMuxB,EAAmB,EAAI,EACtC,UAAU,8GAEV,SAAA,CAAAtxB,EAAAA,IAACoV,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BpV,EAAAA,IAAC,QAAK,SAAA,iBAAA,CAAe,CAAA,CAAA,CAAA,CACvB,EACF,QAGC,MAAA,CAAI,UAAU,gCACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBACZ,SAAA,CACC,CAAE,GAAI,YAAa,MAAO,gBAAiB,KAAMqB,EAAA,EACjD,CAAE,GAAI,eAAgB,MAAO,iBAAkB,KAAM2N,EAAA,EACrD,CAAE,GAAI,aAAc,MAAO,eAAgB,KAAMsK,EAAA,EACjD,CAAE,GAAI,UAAW,MAAO,iBAAkB,KAAMvK,EAAA,CAAW,EAC3D,IAAKH,GACL7O,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAM2N,EAAakB,EAAI,EAAS,EACzC,UAAW,wEACTnB,IAAcmB,EAAI,GACd,gCACA,4EACN,GAEA,SAAA,CAAA5O,EAAAA,IAAC4O,EAAI,KAAJ,CAAS,UAAU,SAAA,CAAU,EAC9B5O,EAAAA,IAAC,OAAA,CAAM,SAAA4O,EAAI,KAAA,CAAM,CAAA,CAAA,EATZA,EAAI,EAAA,CAWZ,EACH,CAAA,CACF,EAGCjO,EACCX,EAAAA,IAAC,MAAA,CAAI,UAAU,yCACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,8DAAA,CAA+D,CAAA,CAChF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACZ,SAAA,CAAA0N,IAAc,aAAeqjB,EAAU,IAAK/L,SAC1CiN,EAAA,CAA+B,SAAAjN,CAAA,EAAbA,EAAS,EAAwB,CACrD,EAEAtX,IAAc,gBAAkBujB,EAAY,IAAKjM,GAChD/kB,MAACkyB,EAAA,CAAiC,SAAAnN,CAAA,EAAbA,EAAS,EAAwB,CACvD,EAEAtX,IAAc,cAAgByjB,EAAmB,IAAKnM,GACrD/kB,MAACgyB,EAAA,CAA+B,SAAAjN,CAAA,EAAbA,EAAS,EAAwB,CACrD,EAEAtX,IAAc,WAAajI,EAAQ,IAAK8sB,GACvCtyB,EAAAA,IAACqyB,EAAA,CAAgC,QAASC,GAAnBA,EAAM,EAAoB,CAClD,CAAA,EACH,EAID,CAAC3xB,GACAZ,EAAAA,KAAAiK,EAAAA,SAAA,CACG,SAAA,CAAAyD,IAAc,aAAeqjB,EAAU,SAAW,GACjD/wB,OAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAACqB,GAAA,CAAW,UAAU,sCAAA,CAAuC,EAC7DrB,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,sBAAmB,EAC1EA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,6GAA0G,EAC5IA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMsxB,EAAmB,EAAI,EACtC,UAAU,kFACX,SAAA,uBAAA,CAAA,CAED,EACF,EAGD7jB,IAAc,gBAAkBujB,EAAY,SAAW,GACtDjxB,OAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAACgP,GAAA,CAAM,UAAU,sCAAA,CAAuC,EACxDhP,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,qBAAkB,EACzEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,0EAAA,CAAwE,CAAA,EACvG,EAGDyN,IAAc,cAAgByjB,EAAmB,SAAW,GAC3DnxB,OAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAACsZ,GAAA,CAAO,UAAU,sCAAA,CAAuC,EACzDtZ,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,uBAAoB,EAC3EA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,0GAAuG,EACzIA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMsxB,EAAmB,EAAI,EACtC,UAAU,kFACX,SAAA,iBAAA,CAAA,CAED,EACF,EAGD7jB,IAAc,WAAajI,EAAQ,SAAW,GAC7CzF,OAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC+O,GAAA,CAAW,UAAU,sCAAA,CAAuC,EAC7D/O,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,uBAAoB,EAC3EA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,2DAAA,CAAyD,CAAA,CAAA,CACxF,CAAA,CAAA,CAEJ,CAAA,EAEJ,EAGAA,EAAAA,IAACswB,GAAA,CACC,OAAQe,EACR,QAAS,IAAMC,EAAmB,EAAK,EACvC,kBAAmBO,CAAA,CAAA,EAGpBJ,GACCzxB,EAAAA,IAAC8kB,GAAA,CACC,OAAQyM,EACR,QAAS,IAAMC,EAAkB,EAAK,EACtC,SAAUC,EACV,mBAAoBK,CAAA,CAAA,CACtB,EAEJ,CAEJ,CCpeA,SAAwBS,GAAgB,CAAE,KAAAnvB,EAAM,OAAAsE,EAAQ,QAAAC,EAAS,UAAAuB,GAAmC,CAClG,KAAM,CAAC2B,EAAMC,CAAO,EAAI/L,EAAAA,SAAsD,QAAQ,EAChF,CAACsK,EAAQC,CAAS,EAAIvK,EAAAA,SAAiB,GAAG,EAC1C,CAACyzB,EAAgBC,CAAiB,EAAI1zB,EAAAA,SAAiB,EAAE,EACzD,CAAC2zB,EAAgBC,CAAiB,EAAI5zB,EAAAA,SAAiC,CAAA,CAAE,EACzE,CAAC6zB,EAAmBC,CAAoB,EAAI9zB,EAAAA,SAAiC,CAAA,CAAE,EAC/E,CAAC+zB,EAAiBC,CAAkB,EAAIh0B,EAAAA,SAAsC,CAAA,CAAE,EAChF,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAwB,IAAI,EAChD,CAACi0B,EAAeC,CAAgB,EAAIl0B,EAAAA,SAAS,EAAK,EAExDM,EAAAA,UAAU,IAAM,CACVqI,IACFwrB,EAAA,EACAC,EAAA,EAEJ,EAAG,CAACzrB,CAAM,CAAC,EAEX,MAAMwrB,EAAyB,SAAY,CACzC,GAAI,CAEF,MAAME,EAAU,MADC,MAAM,MAAM,0BAA2B,CAAE,YAAa,UAAW,GACnD,KAAA,EAC/BP,EAAqBO,CAAO,CAC9B,OAASx1B,EAAO,CACd,QAAQ,MAAM,sCAAuCA,CAAK,CAC5D,CACF,EAEMu1B,EAAuB,SAAY,CACvC,GAAI,CAEF,MAAME,EAAc,MADH,MAAM,MAAM,iCAAkC,CAAE,YAAa,UAAW,GACtD,KAAA,EACnCN,EAAmBM,CAAW,CAChC,OAASz1B,EAAO,CACd,QAAQ,MAAM,oCAAqCA,CAAK,CAC1D,CACF,EAEA,GAAI,CAAC8J,GAAU,CAACtE,EAAM,OAAO,KAE7B,MAAMkwB,GAAyBlwB,EAAK,cAAgB,IAAM,IACpDmwB,EAAqBX,EAAkB,KAAKY,GAAKA,EAAE,cAAgBhB,CAAc,EACjFiB,EAAYF,EAAsBlqB,EAASkqB,EAAmB,eAAiB,IAAO,EACtFG,EAAYrqB,EAASoqB,EAErBE,EAAiB7mB,GACjBA,EAAO,WAAW,SAAS,EAAU9M,EAAAA,IAAC4zB,GAAA,CAAW,UAAU,UAAU,EACrE9mB,IAAW,eAAuB9M,EAAAA,IAAC6zB,GAAA,CAAS,UAAU,UAAU,EAChE/mB,IAAW,UAAYA,IAAW,WAAmB9M,EAAAA,IAACmb,GAAA,CAAK,UAAU,UAAU,EAC5Enb,EAAAA,IAAC+O,GAAA,CAAW,UAAU,SAAA,CAAU,EAGnC+kB,EAAqBhnB,GAA6B,CACtD,MAAMinB,EAAanB,EAAkB,KAAKY,GAAKA,EAAE,cAAgB1mB,CAAM,EACvE,GAAI,CAACinB,EAAY,MAAO,CAAA,EACxB,GAAI,CACF,OAAO,KAAK,MAAMA,EAAW,eAAe,CAC9C,MAAQ,CACN,MAAO,CAAA,CACT,CACF,EAEMC,EAAiBC,IACkB,CACrC,eAAgB,iBAChB,QAAS,UACT,cAAe,gBACf,oBAAqB,sBACrB,UAAW,YACX,eAAgB,iBAChB,eAAgB,iBAChB,WAAY,aACZ,QAAS,UACT,UAAW,YACX,eAAgB,iBAChB,eAAgB,4BAChB,KAAM,OACN,MAAO,iBACP,YAAa,cACb,aAAc,cAAA,GAEFA,CAAK,GAAKA,EAAM,QAAQ,IAAK,GAAG,EAAE,QAAQ,QAASjI,GAAKA,EAAE,aAAa,EAGjFkI,EAAgBD,GAChBA,IAAU,gBAAwB,QAClCA,IAAU,eAAuB,MAC9B,OAGHE,EAAmBF,GAChB,CAACA,EAAM,SAAS,UAAU,GAAKA,IAAU,iBAG5CG,EAAyB,SAAY,CACzCxzB,EAAW,EAAI,EACf2I,EAAS,IAAI,EAEb,GAAI,CAEEypB,GACF,MAAM,MAAM,iCAAkC,CAC5C,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,eAAgBR,EAChB,gBAAiBE,EACjB,WAAY,EAAA,CACb,CAAA,CACF,EAIH,MAAM9uB,EAAW,MAAM,MAAM,0BAA2B,CACtD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,OAAAyF,EACA,eAAgBmpB,EAChB,gBAAiBE,CAAA,CAClB,CAAA,CACF,EAED,GAAI9uB,EAAS,GACXsF,EAAA,EACAvB,EAAA,EACA0sB,EAAA,MACK,CACL,MAAMxqB,EAAY,MAAMjG,EAAS,KAAA,EACjC2F,EAASM,EAAU,OAAS,2BAA2B,CACzD,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,qBAAsBA,CAAK,EACzC2L,EAAS,wBAAwB,CACnC,QAAA,CACE3I,EAAW,EAAK,CAClB,CACF,EAEMyzB,EAAY,IAAM,CACtBvpB,EAAQ,QAAQ,EAChBxB,EAAU,GAAG,EACbmpB,EAAkB,EAAE,EACpBE,EAAkB,CAAA,CAAE,EACpBppB,EAAS,IAAI,EACb0pB,EAAiB,EAAK,CACxB,EAEMqB,EAAc,IAAM,CACxBD,EAAA,EACA1sB,EAAA,CACF,EAEM4sB,GAAqBlrB,GAAU,KAAOA,IAAWjG,EAAK,cAAgB,GACtEoxB,GAAsBhC,IAAmB,GACzCiC,EAAsB,IACHX,EAAkBtB,CAAc,EACjC,MAAMyB,GAC1B,CAACE,EAAgBF,CAAK,GAAMvB,EAAeuB,CAAK,GAAKvB,EAAeuB,CAAK,EAAE,KAAA,IAAW,EAAA,EAI1F,aACG,MAAA,CAAI,UAAU,6EACb,SAAAl0B,EAAAA,KAAC,MAAA,CAAI,UAAU,6EACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,gBAAa,EAC7DA,EAAAA,IAAC,SAAA,CACC,QAASs0B,EACT,UAAU,sDAEV,SAAAt0B,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEEuqB,EAcAvzB,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAC,MAAC,OAAI,UAAU,mCACZ,SAAA,CAAC,SAAU,SAAU,UAAW,SAAS,EAAE,IAAI,CAAC00B,EAAUhzB,IACzD3B,EAAAA,KAAC,MAAA,CAAmB,UAAU,oBAC5B,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAW,6EACd6K,IAAS6pB,EAAW,2BACpB,CAAC,SAAU,SAAU,UAAW,SAAS,EAAE,QAAQ7pB,CAAI,EAAInJ,EAAQ,0BACnE,2BACF,GACG,WAAQ,CAAA,CACX,EACCA,EAAQ,GAAK1B,EAAAA,IAAC,MAAA,CAAI,UAAU,6BAAA,CAA8B,CAAA,GARnD00B,CASV,CACD,EACH,EAGC7pB,IAAS,UACR9K,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,2BAEhE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,MAAOqJ,EACP,SAAW7L,GAAM8L,EAAU,KAAK,IAAI,IAAK,SAAS9L,EAAE,OAAO,KAAK,GAAK,GAAG,CAAC,EACzE,IAAI,MACJ,IAAK4F,EAAK,cAAgB,EAC1B,UAAU,0GAAA,CAAA,EAEZpD,EAAAA,IAAC,MAAA,CAAI,UAAU,iBACZ,SAAA,CAAC,IAAK,IAAK,IAAMoD,EAAK,cAAgB,CAAC,EAAE,OAAO,CAACuxB,EAAGv3B,EAAGw3B,IAAQA,EAAI,QAAQD,CAAC,IAAMv3B,GAAKu3B,GAAK,GAAG,EAAE,IAAKE,GACrG70B,EAAAA,IAAC,SAAA,CAEC,QAAS,IAAMsJ,EAAUurB,CAAM,EAC/B,UAAU,6EAET,SAAAA,IAAWzxB,EAAK,aAAe,MAAQyxB,EAAO,eAAA,CAAe,EAJzDA,CAAA,CAMR,CAAA,CACH,CAAA,CAAA,CACF,CAAA,EACF,EAEA90B,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,oBAAA,CAAkB,EACxBD,EAAAA,KAAC,OAAA,CAAK,UAAU,cAAe,SAAA,CAAAqD,EAAK,aAAa,OAAA,CAAA,CAAK,CAAA,EACxD,EACArD,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,wBAAA,CAAsB,EAC5BD,EAAAA,KAAC,OAAA,CAAK,UAAU,cAAc,SAAA,CAAA,IAAE,KAAK,KAAKsJ,EAAS,IAAK,EAAE,OAAA,CAAA,CAAK,CAAA,CAAA,CACjE,CAAA,EACF,EAEAtJ,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAASs0B,EACT,UAAU,kHACX,SAAA,QAAA,CAAA,EAGDt0B,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM8K,EAAQ,QAAQ,EAC/B,SAAU,CAACypB,GACX,UAAU,yJACX,SAAA,MAAA,CAAA,CAED,CAAA,CACF,CAAA,EACF,EAID1pB,IAAS,UACR9K,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,wBAEhE,EAGC8yB,EAAgB,OAAS,GACxB/yB,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,gBAAa,QACnE,MAAA,CAAI,UAAU,yBACZ,SAAA8yB,EAAgB,IAAKgC,GAAS,CAC7B,MAAMf,EAAanB,EAAkB,QAAUY,EAAE,cAAgBsB,EAAK,cAAc,EACpF,GAAI,CAACf,EAAY,OAAO,KAExB,IAAIgB,EAAc,GAClB,GAAI,CACF,MAAM73B,EAAO,KAAK,MAAM43B,EAAK,eAAe,EACxC53B,EAAK,cAAe63B,EAAc73B,EAAK,cAClCA,EAAK,eAAgB63B,EAAc,GAAG73B,EAAK,eAAe,MAAM,EAAG,CAAC,CAAC,MAAMA,EAAK,eAAe,MAAM,EAAE,CAAC,GACxGA,EAAK,eAAgB63B,EAAc,OAAO73B,EAAK,eAAe,MAAM,EAAE,CAAC,GAC3E63B,EAAc,cACrB,MAAQ,CACNA,EAAc,cAChB,CAEA,OACE/0B,EAAAA,IAAC,SAAA,CAEC,QAAS,IAAM,CACbyyB,EAAkBqC,EAAK,cAAc,EACrCnC,EAAkB,KAAK,MAAMmC,EAAK,eAAe,CAAC,CACpD,EACA,UAAW,8DACTtC,IAAmBsC,EAAK,eACpB,iCACA,uCACN,GAEA,SAAA/0B,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAA4zB,EAAcmB,EAAK,cAAc,SACjC,MAAA,CACC,SAAA,CAAA90B,EAAAA,IAAC,IAAA,CAAE,UAAU,cAAe,SAAA+zB,EAAW,aAAa,EACpD/zB,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,SAAA+0B,CAAA,CAAY,CAAA,EACpD,EACCD,EAAK,YACJ90B,EAAAA,IAAC,OAAA,CAAK,UAAU,6DAA6D,SAAA,SAAA,CAAO,CAAA,CAAA,CAExF,CAAA,EApBK80B,EAAK,EAAA,CAuBhB,CAAC,CAAA,CACH,EACA/0B,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,qCACb,eAAC,MAAA,CAAI,UAAU,kCAAkC,CAAA,CACnD,EACAA,EAAAA,IAAC,OAAI,UAAU,uCACb,eAAC,OAAA,CAAK,UAAU,8BAA8B,SAAA,wBAAA,CAAsB,CAAA,CACtE,CAAA,CAAA,CACF,CAAA,EACF,EAGFA,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACZ,SAAA4yB,EAAkB,OAAO9lB,GAAUA,EAAO,SAAS,EAAE,IAAKA,GACzD/M,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAM0yB,EAAkB3lB,EAAO,WAAW,EACnD,UAAW,uDACT0lB,IAAmB1lB,EAAO,YACtB,iCACA,uCACN,GAEA,SAAA,CAAA/M,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACZ,SAAA,CAAA4zB,EAAc7mB,EAAO,WAAW,EACjC9M,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAe,WAAO,YAAA,CAAa,CAAA,EACrD,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,WAAO,gBAAgB,EAC7DD,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,QAAM+M,EAAO,WAAW,OAAA,CAAA,CAAK,CAAA,CAAA,EAb7DA,EAAO,WAAA,CAef,CAAA,CACH,CAAA,EACF,EAEA/M,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM8K,EAAQ,QAAQ,EAC/B,UAAU,kHACX,SAAA,MAAA,CAAA,EAGD9K,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM8K,EAAQ,SAAS,EAChC,SAAU,CAAC0pB,GACX,UAAU,yJACX,SAAA,MAAA,CAAA,CAED,CAAA,CACF,CAAA,EACF,EAID3pB,IAAS,WAAa0oB,GACrBxzB,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAA0C,SAAAuzB,EAAmB,aAAa,EACxFxzB,EAAAA,KAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,oBAAkBwzB,EAAmB,eAAA,CAAA,CAAgB,CAAA,EACjG,EAEAvzB,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAA8zB,EAAkBtB,CAAc,EAAE,IAAKyB,GACtCl0B,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,+CACd,SAAA,CAAAi0B,EAAcC,CAAK,EACnBE,EAAgBF,CAAK,SAAM,OAAA,CAAK,UAAU,oBAAoB,SAAA,GAAA,CAAC,CAAA,EAClE,EACCA,IAAU,WAAazB,EAAe,WAAW,SAAS,EACzDzyB,EAAAA,KAAC,SAAA,CACC,MAAO2yB,EAAeuB,CAAK,GAAK,GAChC,SAAWz2B,GAAMm1B,MAA2B,CAAE,GAAGpuB,EAAM,CAAC0vB,CAAK,EAAGz2B,EAAE,OAAO,OAAQ,EACjF,UAAU,2GACV,SAAU22B,EAAgBF,CAAK,EAE/B,SAAA,CAAAj0B,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,iBAAc,EAC/BA,EAAAA,IAAC,SAAA,CAAO,MAAM,UAAU,SAAA,UAAO,EAC/BA,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,oBAAiB,EAC1CA,EAAAA,IAAC,SAAA,CAAO,MAAM,MAAM,SAAA,+BAA4B,EAChDA,EAAAA,IAAC,SAAA,CAAO,MAAM,UAAU,SAAA,UAAO,EAC/BA,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,UAAA,CAAQ,CAAA,CAAA,CAAA,EAEjCi0B,IAAU,UACZl0B,EAAAA,KAAC,SAAA,CACC,MAAO2yB,EAAeuB,CAAK,GAAK,GAChC,SAAWz2B,GAAMm1B,MAA2B,CAAE,GAAGpuB,EAAM,CAAC0vB,CAAK,EAAGz2B,EAAE,OAAO,OAAQ,EACjF,UAAU,2GACV,SAAU22B,EAAgBF,CAAK,EAE/B,SAAA,CAAAj0B,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,iBAAc,EAC/BA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,gBAAa,EAChCA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,SAAM,EACzBA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,iBAAc,EACjCA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,YAAS,EAC5BA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,UAAO,EAC1BA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,SAAM,EACzBA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,QAAK,EACxBA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,QAAK,EACxBA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,cAAW,EAC9BA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,SAAM,EACzBA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,SAAM,EACzBA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,UAAO,EAC1BA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,UAAO,EAC1BA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,QAAK,EACxBA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,cAAW,EAC9BA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,YAAS,EAC5BA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,YAAS,EAC5BA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,QAAK,EACxBA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,SAAM,EACzBA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,QAAA,CAAM,CAAA,CAAA,CAAA,EAG3BA,EAAAA,IAAC,QAAA,CACC,KAAMk0B,EAAaD,CAAK,EACxB,MAAOvB,EAAeuB,CAAK,GAAK,GAChC,SAAWz2B,GAAMm1B,MAA2B,CAAE,GAAGpuB,EAAM,CAAC0vB,CAAK,EAAGz2B,EAAE,OAAO,OAAQ,EACjF,UAAU,2GACV,SAAU22B,EAAgBF,CAAK,EAC/B,YAAaA,IAAU,iBAAmB,4BAA8B,EAAA,CAAA,CAC1E,GAxDMA,CA0DV,CACD,EACH,EAEAl0B,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,GAAG,gBACH,QAASgzB,EACT,SAAWx1B,GAAMy1B,EAAiBz1B,EAAE,OAAO,OAAO,EAClD,UAAU,mFAAA,CAAA,QAEX,QAAA,CAAM,QAAQ,gBAAgB,UAAU,wBAAwB,SAAA,iDAAA,CAEjE,CAAA,EACF,EAEAuC,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM8K,EAAQ,QAAQ,EAC/B,UAAU,kHACX,SAAA,MAAA,CAAA,EAGD9K,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM8K,EAAQ,SAAS,EAChC,SAAU,CAAC2pB,EAAA,EACX,UAAU,yJACX,SAAA,QAAA,CAAA,CAED,CAAA,CACF,CAAA,EACF,EAID5pB,IAAS,WAAa0oB,GACrBxzB,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,4BAAyB,EAEhFD,EAAAA,KAAC,MAAA,CAAI,UAAU,sCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,qBAAkB,EAClDD,EAAAA,KAAC,OAAA,CAAK,UAAU,cAAe,SAAA,CAAAsJ,EAAO,OAAA,CAAA,CAAK,CAAA,EAC7C,EACAtJ,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,CAAA,mBAAiBwzB,EAAmB,eAAe,KAAA,EAAG,EACtFxzB,EAAAA,KAAC,OAAA,CAAK,UAAU,2BAA2B,SAAA,CAAA,IAAE0zB,EAAU,QAAQ,CAAC,EAAE,OAAA,CAAA,CAAK,CAAA,EACzE,QACC,MAAA,CAAI,UAAU,gBACb,SAAA1zB,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,aAAA,CAAW,EACjBD,EAAAA,KAAC,OAAA,CAAK,UAAU,iBAAkB,SAAA,CAAA2zB,EAAU,QAAQ,CAAC,EAAE,OAAA,CAAA,CAAK,CAAA,CAAA,CAC9D,CAAA,CACF,CAAA,EACF,EAEA3zB,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,CAAA,mBAAiBwzB,EAAmB,YAAA,EAAa,QAC/F,MAAA,CAAI,UAAU,kCACZ,SAAA,OAAO,QAAQb,CAAc,EAAE,IAAI,CAAC,CAACsC,EAAKxwB,CAAK,IAC9CzE,EAAAA,KAAC,MAAA,CAAc,UAAU,uBACvB,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,aAAc,SAAA,CAAAi0B,EAAcgB,CAAG,EAAE,GAAA,EAAC,EAClDh1B,EAAAA,IAAC,QAAK,UAAU,YACb,WAAI,SAAS,SAAS,GAAKwE,EAAM,OAAS,GACvC,GAAGA,EAAM,MAAM,EAAG,CAAC,CAAC,MAAMA,EAAM,MAAM,EAAE,CAAC,GACzCA,CAAA,CAEN,CAAA,CAAA,EAPQwwB,CAQV,CACD,CAAA,CACH,CAAA,EACF,QAEC,MAAA,CAAI,UAAU,uDACb,SAAAj1B,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAACC,GAAA,CAAc,UAAU,gCAAA,CAAiC,EAC1DF,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,mBAAmB,SAAA,oBAAiB,EACjDD,EAAAA,KAAC,KAAA,CAAG,UAAU,kCACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,wDAAA,CAAsD,SACzD,KAAA,CAAG,SAAA,CAAA,oBAAkBuzB,EAAmB,eAAA,EAAgB,EACzDvzB,EAAAA,IAAC,MAAG,SAAA,wCAAA,CAAsC,EAC1CA,EAAAA,IAAC,MAAG,SAAA,uDAAA,CAAqD,CAAA,CAAA,CAC3D,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAECpC,GACCoC,EAAAA,IAAC,MAAA,CAAI,UAAU,iDACb,eAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAC7C,EAGFmC,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM8K,EAAQ,SAAS,EAChC,SAAUnK,EACV,UAAU,sIACX,SAAA,MAAA,CAAA,EAGDX,EAAAA,IAAC,SAAA,CACC,QAASo0B,EACT,SAAUzzB,EACV,UAAU,sKAET,WACCX,MAAC6X,GAAA,CAAQ,UAAU,sBAAA,CAAuB,EAE1C9X,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAACE,GAAA,CAAY,UAAU,SAAA,CAAU,EACjCF,EAAAA,IAAC,QAAK,SAAA,mBAAA,CAAiB,CAAA,CAAA,CACzB,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,EAjYAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAACC,GAAA,CAAc,UAAU,wCAAA,CAAyC,EAClED,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,oBAAiB,EAC1EA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,sDAAmD,EACrFD,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,oBAAkBqD,EAAK,cAAgB,EAAE,OAAA,EAAK,EACnFpD,EAAAA,IAAC,SAAA,CACC,QAASs0B,EACT,UAAU,mGACX,SAAA,OAAA,CAAA,CAED,CAAA,CACF,CAsXA,CAAA,CAEJ,CAAA,CACF,CAEJ,CCxjBA,SAAwBW,GAAwB,CAAE,KAAA7xB,EAAM,OAAAsE,EAAQ,QAAAC,EAAS,UAAAuB,GAA2C,CAClH,KAAM,CAAC4pB,EAAiBC,CAAkB,EAAIh0B,EAAAA,SAAsC,CAAA,CAAE,EAChF,CAAC6zB,EAAmBC,CAAoB,EAAI9zB,EAAAA,SAAiC,CAAA,CAAE,EAC/E,CAACm2B,EAAaC,CAAc,EAAIp2B,EAAAA,SAAS,EAAK,EAC9C,CAACq2B,EAAWC,CAAY,EAAIt2B,EAAAA,SAAwB,IAAI,EACxD,CAACyzB,EAAgBC,CAAiB,EAAI1zB,EAAAA,SAAiB,EAAE,EACzD,CAAC2zB,EAAgBC,CAAiB,EAAI5zB,EAAAA,SAAiC,CAAA,CAAE,EACzE,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAwB,IAAI,EAEtDM,EAAAA,UAAU,IAAM,CACVqI,GACFiqB,EAAA,CAEJ,EAAG,CAACjqB,CAAM,CAAC,EAEX,MAAMiqB,EAAY,SAAY,CAC5B,GAAI,CACF,KAAM,CAAC2D,EAAqBC,CAAe,EAAI,MAAM,QAAQ,IAAI,CAC/D,MAAM,iCAAkC,CAAE,YAAa,UAAW,EAClE,MAAM,0BAA2B,CAAE,YAAa,UAAW,CAAA,CAC5D,EAEKlC,EAAc,MAAMiC,EAAoB,KAAA,EACxClC,EAAU,MAAMmC,EAAgB,KAAA,EAEtCxC,EAAmBM,CAAW,EAC9BR,EAAqBO,CAAO,CAC9B,OAASx1B,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,CAC9C,CACF,EAEA,GAAI,CAAC8J,GAAU,CAACtE,EAAM,OAAO,KAE7B,MAAMuwB,EAAiB7mB,GACjBA,EAAO,WAAW,SAAS,EAAU9M,EAAAA,IAAC4zB,GAAA,CAAW,UAAU,UAAU,EACrE9mB,IAAW,eAAuB9M,EAAAA,IAAC6zB,GAAA,CAAS,UAAU,UAAU,EAChE/mB,IAAW,UAAYA,IAAW,WAAmB9M,EAAAA,IAACmb,GAAA,CAAK,UAAU,UAAU,EAC5Enb,EAAAA,IAAC4zB,GAAA,CAAW,UAAU,SAAA,CAAU,EAGnCE,EAAqBhnB,GAA6B,CACtD,MAAMinB,EAAanB,EAAkB,KAAKY,GAAKA,EAAE,cAAgB1mB,CAAM,EACvE,GAAI,CAACinB,EAAY,MAAO,CAAA,EACxB,GAAI,CACF,OAAO,KAAK,MAAMA,EAAW,eAAe,CAC9C,MAAQ,CACN,MAAO,CAAA,CACT,CACF,EAEMC,EAAiBC,IACkB,CACrC,eAAgB,iBAChB,QAAS,UACT,cAAe,gBACf,oBAAqB,sBACrB,UAAW,YACX,eAAgB,iBAChB,eAAgB,iBAChB,WAAY,aACZ,QAAS,UACT,UAAW,YACX,eAAgB,iBAChB,eAAgB,iBAChB,KAAM,OACN,MAAO,iBACP,YAAa,cACb,aAAc,cAAA,GAEFA,CAAK,GAAKA,EAAM,QAAQ,IAAK,GAAG,EAAE,QAAQ,QAASjI,GAAKA,EAAE,aAAa,EAGjFwJ,EAAkBC,GAA0C,CAChE,GAAI,CACF,MAAMv4B,EAAO,KAAK,MAAMu4B,EAAW,eAAe,EAClD,OAAIv4B,EAAK,cAAsBA,EAAK,cAChCA,EAAK,eAAuB,GAAGA,EAAK,eAAe,MAAM,EAAG,CAAC,CAAC,MAAMA,EAAK,eAAe,MAAM,EAAE,CAAC,GACjGA,EAAK,eAAuB,OAAOA,EAAK,eAAe,MAAM,EAAE,CAAC,GAChEA,EAAK,UAAkBA,EAAK,UACzB,gBACT,MAAQ,CACN,MAAO,gBACT,CACF,EAEMw4B,EAAuB,SAAY,CACvC,GAAI,GAAClD,GAAkB,OAAO,KAAKE,CAAc,EAAE,SAAW,GAE9D,CAAA9xB,EAAW,EAAI,EACf2I,EAAS,IAAI,EAEb,GAAI,CACF,MAAM3F,EAAW,MAAM,MAAM,iCAAkC,CAC7D,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,eAAgB4uB,EAChB,gBAAiBE,EACjB,WAAYI,EAAgB,SAAW,CAAA,CACxC,CAAA,CACF,EAED,GAAIlvB,EAAS,GACX,MAAM+tB,EAAA,EACN0C,EAAA,EACAnrB,EAAA,MACK,CACL,MAAMW,EAAY,MAAMjG,EAAS,KAAA,EACjC2F,EAASM,EAAU,OAAS,mCAAmC,CACjE,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,EACjD2L,EAAS,wBAAwB,CACnC,QAAA,CACE3I,EAAW,EAAK,CAClB,EACF,EAEM+0B,EAAyB,MAAO1yB,GAAe,CACnD,GAAK,QAAQ,sDAAsD,EAEnE,GAAI,EACe,MAAM,MAAM,kCAAkCA,CAAE,GAAI,CACnE,OAAQ,SACR,YAAa,SAAA,CACd,GAEY,KACX,MAAM0uB,EAAA,EACNzoB,EAAA,EAEJ,OAAStL,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,CACrD,CACF,EAEMg4B,EAAmB,MAAO3yB,GAAe,CAC7C,GAAI,EACe,MAAM,MAAM,kCAAkCA,CAAE,eAAgB,CAC/E,OAAQ,OACR,YAAa,SAAA,CACd,GAEY,KACX,MAAM0uB,EAAA,EACNzoB,EAAA,EAEJ,OAAStL,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CAC/C,CACF,EAEMy2B,EAAY,IAAM,CACtBc,EAAe,EAAK,EACpBE,EAAa,IAAI,EACjB5C,EAAkB,EAAE,EACpBE,EAAkB,CAAA,CAAE,EACpBppB,EAAS,IAAI,CACf,EAEMssB,EAAaJ,GAA0C,CAC3DJ,EAAaI,EAAW,EAAE,EAC1BhD,EAAkBgD,EAAW,cAAc,EAC3C,GAAI,CACF9C,EAAkB,KAAK,MAAM8C,EAAW,eAAe,CAAC,CAC1D,MAAQ,CACN9C,EAAkB,CAAA,CAAE,CACtB,CACAwC,EAAe,EAAI,CACrB,EAEA,aACG,MAAA,CAAI,UAAU,6EACb,SAAAp1B,EAAAA,KAAC,MAAA,CAAI,UAAU,6EACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,sBAAmB,EACnEA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,wBAAqB,EACzED,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMo1B,EAAe,EAAI,EAClC,UAAU,8HAEV,SAAA,CAAAn1B,EAAAA,IAACoV,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BpV,EAAAA,IAAC,QAAK,SAAA,YAAA,CAAU,CAAA,CAAA,CAAA,CAClB,EACF,EAEC8yB,EAAgB,SAAW,EAC1B/yB,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC4zB,GAAA,CAAW,UAAU,sCAAA,CAAuC,EAC7D5zB,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,2BAAwB,EACjFA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,kDAA+C,EACjFA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMm1B,EAAe,EAAI,EAClC,UAAU,kGACX,SAAA,oBAAA,CAAA,CAED,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,wCACZ,SAAArC,EAAgB,IAAK2C,GAAe,CACnC,MAAM1B,EAAanB,EAAkB,QAAUY,EAAE,cAAgBiC,EAAW,cAAc,EAC1F,OACE11B,EAAAA,KAAC,MAAA,CAAwB,UAAU,wCACjC,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAA4zB,EAAc8B,EAAW,cAAc,SACvC,MAAA,CACC,SAAA,CAAAz1B,EAAAA,IAAC,KAAA,CAAG,UAAU,4BAA6B,SAAA+zB,GAAY,aAAa,QACnE,IAAA,CAAE,UAAU,wBAAyB,SAAAyB,EAAeC,CAAU,CAAA,CAAE,CAAA,CAAA,CACnE,CAAA,EACF,EACCA,EAAW,YACV11B,OAAC,OAAA,CAAK,UAAU,yFACd,SAAA,CAAAC,EAAAA,IAACsB,EAAA,CAAK,UAAU,SAAA,CAAU,EAC1BtB,EAAAA,IAAC,QAAK,SAAA,SAAA,CAAO,CAAA,CAAA,CACf,CAAA,EAEJ,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACZ,SAAA,CAAA,CAAC01B,EAAW,YACXz1B,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM41B,EAAiBH,EAAW,EAAE,EAC7C,UAAU,oGACX,SAAA,aAAA,CAAA,EAIH11B,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM81B,EAAUJ,CAAU,EACnC,UAAU,+IAEV,SAAA,CAAAz1B,EAAAA,IAAC81B,GAAA,CAAM,UAAU,SAAA,CAAU,EAC3B91B,EAAAA,IAAC,QAAK,SAAA,MAAA,CAAI,CAAA,CAAA,CAAA,EAEZD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM41B,EAAuBF,EAAW,EAAE,EACnD,UAAU,4IAEV,SAAA,CAAAz1B,EAAAA,IAAC+gB,GAAA,CAAO,UAAU,SAAA,CAAU,EAC5B/gB,EAAAA,IAAC,QAAK,SAAA,QAAA,CAAM,CAAA,CAAA,CAAA,CACd,CAAA,CACF,CAAA,CAAA,EAxCQy1B,EAAW,EAyCrB,CAEJ,CAAC,CAAA,CACH,CAAA,EAEJ,EAGCP,GACCn1B,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,MAAC,KAAA,CAAG,UAAU,2CACX,SAAAo1B,EAAY,sBAAwB,qBACvC,EAEAr1B,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,iBAEhE,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACZ,SAAA4yB,EAAkB,OAAO9lB,GAAUA,EAAO,SAAS,EAAE,IAAKA,GACzD/M,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAM0yB,EAAkB3lB,EAAO,WAAW,EACnD,SAAUsoB,IAAc,KACxB,UAAW,uDACT5C,IAAmB1lB,EAAO,YACtB,iCACA,uCACN,IAAIsoB,EAAY,gCAAkC,EAAE,GAEpD,SAAA,CAAAr1B,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACZ,SAAA,CAAA4zB,EAAc7mB,EAAO,WAAW,EACjC9M,EAAAA,IAAC,OAAA,CAAK,UAAU,sBAAuB,WAAO,YAAA,CAAa,CAAA,EAC7D,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,WAAO,eAAA,CAAgB,CAAA,CAAA,EAbxD8M,EAAO,WAAA,CAef,CAAA,CACH,CAAA,EACF,EAGC0lB,GACCzyB,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,4BAA4B,SAAA,kBAAe,EACxD8zB,EAAkBtB,CAAc,EAAE,IAAKyB,UACrC,MAAA,CACC,SAAA,CAAAl0B,EAAAA,KAAC,QAAA,CAAM,UAAU,+CACd,SAAA,CAAAi0B,EAAcC,CAAK,EACnBA,IAAU,kBAAoBj0B,EAAAA,IAAC,OAAA,CAAK,UAAU,oBAAoB,SAAA,GAAA,CAAC,CAAA,EACtE,EACCi0B,IAAU,WAAazB,EAAe,WAAW,SAAS,EACzDzyB,EAAAA,KAAC,SAAA,CACC,MAAO2yB,EAAeuB,CAAK,GAAK,GAChC,SAAWz2B,GAAMm1B,MAA2B,CAAE,GAAGpuB,EAAM,CAAC0vB,CAAK,EAAGz2B,EAAE,OAAO,OAAQ,EACjF,UAAU,2GAEV,SAAA,CAAAwC,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,iBAAc,EAC/BA,EAAAA,IAAC,SAAA,CAAO,MAAM,UAAU,SAAA,UAAO,EAC/BA,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,oBAAiB,EAC1CA,EAAAA,IAAC,SAAA,CAAO,MAAM,MAAM,SAAA,+BAA4B,EAChDA,EAAAA,IAAC,SAAA,CAAO,MAAM,UAAU,SAAA,UAAO,EAC/BA,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,UAAA,CAAQ,CAAA,CAAA,CAAA,EAEjCi0B,IAAU,UACZl0B,EAAAA,KAAC,SAAA,CACC,MAAO2yB,EAAeuB,CAAK,GAAK,GAChC,SAAWz2B,GAAMm1B,MAA2B,CAAE,GAAGpuB,EAAM,CAAC0vB,CAAK,EAAGz2B,EAAE,OAAO,OAAQ,EACjF,UAAU,2GAEV,SAAA,CAAAwC,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,iBAAc,EAC/BA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,gBAAa,EAChCA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,SAAM,EACzBA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,iBAAc,EACjCA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,YAAS,EAC5BA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,UAAO,EAC1BA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,SAAM,EACzBA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,QAAK,EACxBA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,QAAK,EACxBA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,cAAW,EAC9BA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,QAAK,EACxBA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,YAAS,EAC5BA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,QAAK,EACxBA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,SAAM,EACzBA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,QAAA,CAAM,CAAA,CAAA,CAAA,EAG3BA,EAAAA,IAAC,QAAA,CACC,KAAMi0B,IAAU,gBAAkB,QAAUA,IAAU,eAAiB,MAAQ,OAC/E,MAAOvB,EAAeuB,CAAK,GAAK,GAChC,SAAWz2B,GAAMm1B,MAA2B,CAAE,GAAGpuB,EAAM,CAAC0vB,CAAK,EAAGz2B,EAAE,OAAO,OAAQ,EACjF,UAAU,2GACV,SAAUy2B,IAAU,gBAAA,CAAA,CACtB,CAAA,EA/CMA,CAiDV,CACD,CAAA,EACH,EAGDr2B,GACCoC,EAAAA,IAAC,MAAA,CAAI,UAAU,iDACb,eAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAC7C,EAGFmC,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAASq0B,EACT,UAAU,kHACX,SAAA,QAAA,CAAA,EAGDr0B,EAAAA,IAAC,SAAA,CACC,QAAS01B,EACT,SAAU,CAAClD,GAAkB7xB,GAAWmzB,EAAkBtB,CAAc,EAAE,KAAMyB,GAC9EA,IAAU,mBAAqB,CAACvB,EAAeuB,CAAK,GAAKvB,EAAeuB,CAAK,EAAE,KAAA,IAAW,GAAA,EAE5F,UAAU,yJAET,SAAAtzB,EAAU,YAAcy0B,EAAY,gBAAkB,aAAA,CAAA,CACzD,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CC7XA,MAAMW,GAA4B,CAChC,CACE,GAAI,UACJ,KAAM,GACN,MAAO,GACP,MAAO,CAAA,EAET,CACE,GAAI,QACJ,KAAM,GACN,MAAO,KACP,MAAO,CAAA,EAET,CACE,GAAI,UACJ,KAAM,GACN,MAAO,GACP,MAAO,EACP,QAAS,GACT,QAAS,YAAA,EAEX,CACE,GAAI,UACJ,KAAM,GACN,MAAO,IACP,MAAO,GACP,QAAS,WAAA,EAEX,CACE,GAAI,WACJ,KAAM,IACN,MAAO,IACP,MAAO,GACP,QAAS,WAAA,CAEb,EAEA,SAAwBC,GAAc,CAAE,KAAA5yB,EAAM,OAAAsE,EAAQ,QAAAC,GAA+B,CACnF,KAAM,CAACsuB,EAAiBC,CAAkB,EAAIn3B,EAAAA,SAAiB,SAAS,EAClE,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAwB,IAAI,EAStD,GAPA,QAAQ,IAAI,kCAAkC,EAC9C,QAAQ,IAAI,UAAW2I,CAAM,EAC7B,QAAQ,IAAI,eAAgB,CAAC,CAACtE,CAAI,EAClC,QAAQ,IAAI,aAAcA,CAAI,EAC9B,QAAQ,IAAI,oBAAqB,OAAOuE,CAAO,EAG3C,CAACD,EACH,eAAQ,IAAI,sCAAsC,EAC3C,KAGT,QAAQ,IAAI,8BAA8B,EAE1C,MAAM+H,EAAiB,SAAY,CACjC,MAAM0mB,EAAcJ,GAAY,KAAK/Y,GAAKA,EAAE,KAAOiZ,CAAe,EAClE,GAAKE,EAEL,CAAAv1B,EAAW,EAAI,EACf2I,EAAS,IAAI,EAEb,GAAI,CAEF,MAAM3F,EAAW,MAAM,MAAM,wCAAyC,CACpE,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,WAAYqyB,EACZ,KAAME,EAAY,KAAOA,EAAY,MACrC,MAAOA,EAAY,KAAA,CACpB,CAAA,CACF,EAED,GAAIvyB,EAAS,GAAI,CACf,KAAM,CAAE,aAAAwyB,CAAA,EAAiB,MAAMxyB,EAAS,KAAA,EAExC,OAAO,SAAS,KAAOwyB,CACzB,KAAO,CACL,MAAMvsB,EAAY,MAAMjG,EAAS,KAAA,EACjC2F,EAASM,EAAU,OAAS,kCAAkC,CAChE,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,kBAAmBA,CAAK,EACtC2L,EAAS,8CAA8C,CACzD,QAAA,CACE3I,EAAW,EAAK,CAClB,EACF,EAEMy1B,EAAsBN,GAAY,KAAK/Y,GAAKA,EAAE,KAAOiZ,CAAe,EAE1E,aACG,MAAA,CAAI,UAAU,iFACb,SAAAl2B,EAAAA,KAAC,MAAA,CAAI,UAAU,oEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,sGACb,eAAC2B,GAAA,CAAQ,UAAU,qBAAqB,CAAA,CAC1C,SACC,MAAA,CACC,SAAA,CAAA3B,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,YAAS,EACzDA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,qDAAA,CAAmD,CAAA,CAAA,CAC1F,CAAA,EACF,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEC,CAAC3F,GACApD,EAAAA,IAAC,MAAA,CAAI,UAAU,MACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,uBAAoB,EAC7EA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,sDAAmD,EACrFA,EAAAA,IAAC,IAAA,CAAE,UAAU,uBAAuB,SAAA,uDAAoD,EACxFA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,OAAO,SAAS,OAAA,EAC/B,UAAU,6EACX,SAAA,aAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,EAGDoD,GACCrD,EAAAA,KAAC,MAAA,CAAI,UAAU,MAEb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,iEACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC2B,GAAA,CAAQ,UAAU,yBAAA,CAA0B,SAC5C,MAAA,CACC,SAAA,CAAA3B,EAAAA,IAAC,IAAA,CAAE,UAAU,wCAAwC,SAAA,kBAAe,EACpEA,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,iBAAA,CAAe,CAAA,CAAA,CACxD,CAAA,EACF,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAsC,WAAK,YAAA,CAAa,CAAA,CAAA,CACvE,CAAA,CACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,sBAAmB,QAC3E,MAAA,CAAI,UAAU,uDACZ,SAAA+1B,GAAY,IAAKO,GAChBv2B,EAAAA,KAAC,MAAA,CAEC,QAAS,IAAMm2B,EAAmBI,EAAI,EAAE,EACxC,UAAW,+EACTL,IAAoBK,EAAI,GACpB,qDACA,uDACN,GAEC,SAAA,CAAAA,EAAI,eACF,MAAA,CAAI,UAAU,sDACb,SAAAv2B,EAAAA,KAAC,OAAA,CAAK,UAAU,iIACd,SAAA,CAAAC,EAAAA,IAACsB,EAAA,CAAK,UAAU,SAAA,CAAU,EAC1BtB,EAAAA,IAAC,QAAK,SAAA,cAAA,CAAY,CAAA,CAAA,CACpB,CAAA,CACF,EAGDs2B,EAAI,SAAW,CAACA,EAAI,SACnBt2B,EAAAA,IAAC,MAAA,CAAI,UAAU,sDACb,eAAC,OAAA,CAAK,UAAU,oGACb,SAAAs2B,EAAI,QACP,EACF,EAGFv2B,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,qHACb,eAAC2B,GAAA,CAAQ,UAAU,qBAAqB,CAAA,CAC1C,EAEA3B,EAAAA,IAAC,KAAA,CAAG,UAAU,sDAAuD,WAAI,GAAG,EAE5ED,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAA,EAAAA,KAAC,IAAA,CAAE,UAAU,mCAAmC,SAAA,CAAA,IAAEu2B,EAAI,KAAA,EAAM,EAC5Dv2B,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,wCAAyC,SAAA,CAAAu2B,EAAI,KAAK,OAAA,EAAK,EACtEA,EAAI,MAAQ,GACXv2B,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,IAAC,EACjCD,EAAAA,KAAC,OAAA,CAAK,UAAU,uCAAwC,SAAA,CAAAu2B,EAAI,MAAM,QAAA,CAAA,CAAM,CAAA,CAAA,CAC1E,CAAA,EAEJ,EACAv2B,EAAAA,KAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,UAChCu2B,EAAI,KAAOA,EAAI,MAAM,OAAA,CAAA,CAC/B,CAAA,EACF,EAEAv2B,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAC,EAAAA,IAACoB,GAAA,CAAI,UAAU,yBAAA,CAA0B,EACzCpB,EAAAA,IAAC,QAAK,SAAA,sBAAA,CAAoB,CAAA,EAC5B,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAC,EAAAA,IAAC4zB,GAAA,CAAW,UAAU,uBAAA,CAAwB,EAC9C5zB,EAAAA,IAAC,QAAK,SAAA,mBAAA,CAAiB,CAAA,EACzB,EACCs2B,EAAI,MAAQ,GACXv2B,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAC,EAAAA,IAACsB,EAAA,CAAK,UAAU,yBAAA,CAA0B,SACzC,OAAA,CAAM,SAAA,CAAA,KAAK,MAAOg1B,EAAI,MAAQA,EAAI,KAAQ,GAAG,EAAE,cAAA,CAAA,CAAY,CAAA,CAAA,CAC9D,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,EAhEKA,EAAI,EAAA,CAkEZ,CAAA,CACH,CAAA,EACF,EAGAv2B,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC0K,GAAA,CAAO,UAAU,wBAAA,CAAyB,EAC3C1K,EAAAA,IAAC,KAAA,CAAG,UAAU,4BAA4B,SAAA,gBAAA,CAAc,CAAA,EAC1D,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,mCAAA,CAAoC,EACnDA,EAAAA,IAAC,QAAK,SAAA,wBAAA,CAAsB,CAAA,EAC9B,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,mCAAA,CAAoC,EACnDA,EAAAA,IAAC,QAAK,SAAA,mBAAA,CAAiB,CAAA,EACzB,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,mCAAA,CAAoC,EACnDA,EAAAA,IAAC,QAAK,SAAA,mBAAA,CAAiB,CAAA,CAAA,CACzB,CAAA,CAAA,CACF,CAAA,EACF,EAGCq2B,GACCt2B,EAAAA,KAAC,MAAA,CAAI,UAAU,sDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,mBAAgB,EAC/DD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,WAAQ,EACxCA,EAAAA,IAAC,OAAA,CAAK,UAAU,yBAA0B,WAAoB,EAAA,CAAG,CAAA,EACnE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,aAAU,EAC1CA,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAe,WAAoB,IAAA,CAAK,CAAA,EAC1D,EACCq2B,EAAoB,MAAQ,GAC3Bt2B,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,cAAW,EAC3CD,EAAAA,KAAC,OAAA,CAAK,UAAU,6BAA6B,SAAA,CAAA,IAAEs2B,EAAoB,KAAA,CAAA,CAAM,CAAA,EAC3E,EAEFt2B,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,aAAA,CAAW,QAChB,OAAA,CAAK,UAAU,kBAAmB,SAAAq2B,EAAoB,KAAOA,EAAoB,KAAA,CAAM,CAAA,EAC1F,EACAt2B,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,cAAA,CAAY,SACjB,OAAA,CAAK,SAAA,CAAA,IAAEq2B,EAAoB,KAAA,CAAA,CAAM,CAAA,CAAA,CACpC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAIDz4B,GACCoC,EAAAA,IAAC,MAAA,CAAI,UAAU,sDACb,eAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAC7C,EAIFmC,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,SAAUhH,EACV,UAAU,sIACX,SAAA,QAAA,CAAA,EAGDX,EAAAA,IAAC,SAAA,CACC,QAASyP,EACT,SAAU9O,GAAW,CAAC01B,EACtB,UAAU,iQAET,WACCr2B,MAAC,MAAA,CAAI,UAAU,8EAAA,CAA+E,EAE9FD,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC4zB,GAAA,CAAW,UAAU,SAAA,CAAU,SAC/B,OAAA,CAAK,SAAA,CAAA,aAAWyC,GAAqB,MAAM,MAAIA,EAAsBA,EAAoB,KAAOA,EAAoB,MAAQ,EAAE,OAAA,CAAA,CAAK,CAAA,CAAA,CACtI,CAAA,CAAA,CAEJ,EACF,EAGAr2B,EAAAA,IAAC,IAAA,CAAE,UAAU,yCAAyC,SAAA,wJAAA,CAGtD,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CACF,CAEJ,CC/UA,SAAwBu2B,IAAe,CACrC,KAAM,CAAE,KAAAnzB,EAAM,gBAAAozB,CAAA,EAAoB/xB,GAAA,EAC5B,CAACgyB,EAAWC,CAAY,EAAI33B,EAAAA,SAAc,IAAI,EAC9C,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EAEtC43B,EAAc,SAAY,CAC9B/1B,EAAW,EAAI,EACf,GAAI,CACF,QAAQ,IAAI,kCAAkC,EAG9C,MAAMg2B,EAAU,SAAS,OACzB,QAAQ,IAAI,cAAeA,CAAO,EAClC,MAAMC,EAAkBD,EAAQ,SAAS,qBAAqB,EAGxDE,EAAczkB,GAAA,EACd0kB,EAAoB,MAAM,MAAM,gBAAiB,CACrD,YAAa,UACb,QAASD,CAAA,CACV,EACKE,EAAgB,MAAMD,EAAkB,KAAA,EAC9C,IAAIE,EAAgB,KACpB,GAAI,CACFA,EAAgB,KAAK,MAAMD,CAAa,CAC1C,MAAY,CACV,QAAQ,IAAI,gCAAiCA,CAAa,CAC5D,CACA,QAAQ,IAAI,0BAA2B,CACrC,OAAQD,EAAkB,OAC1B,KAAME,EACN,QAASD,CAAA,CACV,EAGD,MAAME,EAAkB,MAAM,MAAM,oBAAqB,CACvD,YAAa,UACb,QAASJ,CAAA,CACV,EACKK,EAAc,MAAMD,EAAgB,KAAA,EAC1C,IAAIE,EAAc,KAClB,GAAI,CACFA,EAAc,KAAK,MAAMD,CAAW,CACtC,MAAY,CACV,QAAQ,IAAI,8BAA+BA,CAAW,CACxD,CACA,QAAQ,IAAI,wBAAyB,CACnC,OAAQD,EAAgB,OACxB,KAAME,EACN,QAASD,CAAA,CACV,EAGD,QAAQ,IAAI,gCAAiC,CAC3C,KAAA/zB,EACA,QAAS,CAAC,CAACA,EACX,OAAQA,GAAM,GACd,UAAWA,GAAM,KAAA,CAClB,EAGD,MAAMi0B,EAAc,CAClB,UAAW,IAAI,KAAA,EAAO,YAAA,EACtB,QAAS,CACP,QAAS,CAAC,CAACT,EACX,MAAOA,EAAQ,MAAM,GAAG,EAAE,OAC1B,gBAAAC,EACA,IAAKD,CAAA,EAEP,UAAW,CACT,OAAQG,EAAkB,OAC1B,WAAYA,EAAkB,WAC9B,KAAME,EACN,QAAS,OAAO,YAAYF,EAAkB,QAAQ,SAAS,CAAA,EAEjE,QAAS,CACP,OAAQG,EAAgB,OACxB,WAAYA,EAAgB,WAC5B,KAAME,EACN,QAAS,OAAO,YAAYF,EAAgB,QAAQ,SAAS,CAAA,EAE/D,UAAW,CACT,QAAS,CAAC,CAAC9zB,EACX,KAAAA,CAAA,CACF,EAGFszB,EAAaW,CAAW,EACxB,QAAQ,IAAI,yBAA0BA,CAAW,CAEnD,OAASz5B,EAAO,CACd,QAAQ,MAAM,qBAAsBA,CAAK,EACzC84B,EAAa,CAAE,MAAO94B,aAAiB,MAAQA,EAAM,QAAU,gBAAiB,CAClF,QAAA,CACEgD,EAAW,EAAK,CAClB,CACF,EAEM02B,EAAe,IAAM,CAEzB,aAAa,MAAA,EACb,eAAe,MAAA,EAGf,SAAS,OAAO,MAAM,GAAG,EAAE,QAASv0B,GAAM,CACxC,MAAMw0B,EAAQx0B,EAAE,QAAQ,GAAG,EACrBy0B,EAAOD,EAAQ,GAAKx0B,EAAE,OAAO,EAAGw0B,CAAK,EAAIx0B,EAC/C,SAAS,OAASy0B,EAAO,iDACzB,SAAS,OAASA,EAAO,yDAA2D,OAAO,SAAS,QACtG,CAAC,EAED,MAAM,4CAA4C,CACpD,EAEMC,EAAa,SAAY,CAC7B,GAAI,CACF,MAAMjB,EAAA,CACR,OAAS54B,EAAO,CACd,QAAQ,MAAM,sBAAuBA,CAAK,EAC1C,MAAM,mDAAmD,CAC3D,CACF,EAEA,OACEmC,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACC,GAAA,CAAc,UAAU,yBAAA,CAA0B,EACnDD,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,yBAAA,CAAuB,CAAA,EAC/E,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS42B,EACT,SAAUh2B,EACV,UAAU,gHAET,SAAA,CAAAA,EAAUX,EAAAA,IAACI,IAAU,UAAU,sBAAA,CAAuB,EAAKJ,EAAAA,IAACE,GAAA,CAAY,UAAU,SAAA,CAAU,EAC7FF,EAAAA,IAAC,OAAA,CAAM,SAAAW,EAAU,aAAe,oBAAA,CAAqB,CAAA,CAAA,CAAA,EAGvDX,EAAAA,IAAC,SAAA,CACC,QAASs3B,EACT,UAAU,8DACX,SAAA,gBAAA,CAAA,EAIDv3B,EAAAA,KAAC,SAAA,CACC,QAAS03B,EACT,UAAU,8FAEV,SAAA,CAAAz3B,EAAAA,IAAC03B,GAAA,CAAM,UAAU,SAAA,CAAU,EAC3B13B,EAAAA,IAAC,QAAK,SAAA,aAAA,CAAW,CAAA,CAAA,CAAA,CACnB,EACF,EAECy2B,GACC12B,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,iBAAc,EAC/DA,EAAAA,IAAC,OAAI,UAAU,sEACZ,cAAK,UAAUy2B,EAAW,KAAM,CAAC,CAAA,CACpC,CAAA,EACF,EAGF12B,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,MAAC,IAAA,CAAE,SAAAA,EAAAA,IAAC,SAAA,CAAO,SAAA,eAAA,CAAa,EAAS,EACjCD,EAAAA,KAAC,KAAA,CAAG,UAAU,0CACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,8DAAA,CAA4D,EAChEA,EAAAA,IAAC,MAAG,SAAA,sEAAA,CAAoE,EACxEA,EAAAA,IAAC,MAAG,SAAA,uDAAA,CAAqD,EACzDA,EAAAA,IAAC,MAAG,SAAA,sDAAA,CAAoD,CAAA,CAAA,CAC1D,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,CAEJ,CClLA,MAAM23B,GAAe,IAAsB,CACzC,CACE,GAAI,iBACJ,WAAY,iBACZ,cAAe,+BACf,kBAAmB,+FACnB,SAAU,uCACV,WAAY,eACZ,SAAU,GACV,mBAAoB,GACpB,UAAW,KACX,aAAc,KACd,OAAQ,SACR,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAc,GAAI,EAAE,YAAA,EACtD,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAU,GAAK,GAAI,EAAE,YAAA,CAAY,CAEvE,EAEaC,GAAqB,MAAOC,EAAY,KAE7CA,EACKF,KAAe,OAAQG,GAAYA,EAAQ,WAAa,sCAAsC,EAEhGH,GAAA,EAyBEI,GAAqB,MAAOn1B,IAE9B,CACL,QAAS,GACT,QAAS,CACP,GAAI,WAAW,KAAK,IAAA,CAAK,GACzB,SAAU,uCACV,WAAY,eACZ,mBAAoBA,EAAQ,SAC5B,aAAcA,EAAQ,UACtB,OAAQ,SACR,WAAY,IAAI,KAAA,EAAO,YAAA,EACvB,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAU,GAAK,GAAI,EAAE,YAAA,EACvD,GAAGA,CAAA,EAEL,QAAS,wBAAA,GA6BFo1B,GAAmB,MAAOp1B,IAE5B,CACL,QAAS,GACT,MAAO,CACL,GAAI,SAAS,KAAK,IAAA,CAAK,GACvB,SAAU,uCACV,OAAQ,UACR,WAAY,IAAI,KAAA,EAAO,YAAA,EACvB,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAU,GAAK,GAAI,EAAE,YAAA,EACvD,GAAGA,CAAA,EAEL,QAAS,wBAAA,GAqBTq1B,GAAa,IAAoB,CACrC,CACE,GAAI,eACJ,WAAY,iBACZ,SAAU,uCACV,UAAW,uCACX,SAAU,GACV,UAAW,MACX,OAAQ,UACR,QAAS,4DACT,cAAe,+BACf,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,MAAc,GAAI,EAAE,YAAA,EACtD,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAU,GAAK,GAAI,EAAE,YAAA,CAAY,EAErE,CACE,GAAI,eACJ,WAAY,iBACZ,SAAU,uCACV,UAAW,uCACX,SAAU,GACV,UAAW,GACX,OAAQ,UACR,QAAS,6DACT,cAAe,8BACf,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAS,GAAK,GAAI,EAAE,YAAA,EACtD,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAU,GAAK,GAAI,EAAE,YAAA,CAAY,CAEvE,EAEaC,GAAmB,MAAOC,GAEpBF,GAAA,EACD,OAAQG,GACpBD,IAAS,SACLC,EAAM,YAAc,uCACpBA,EAAM,WAAa,sCAAA,EAiBhBC,GAAmB,MAAOC,IAE5B,CAAE,QAAS,GAAM,SAAUA,EAAS,QAAS,uBAAA,GC7KxD,SAAwBC,GAAe,CAAE,OAAA7wB,EAAQ,QAAAC,EAAS,QAAA6wB,EAAS,UAAAtvB,GAAkC,CACnG,KAAM,CAACuvB,EAAUC,CAAW,EAAI35B,EAAAA,SAAiB,IAAOy5B,EAAU,KAAK,IAAIA,EAAQ,kBAAmBA,EAAQ,YAAY,EAAI,CAAE,EAC1H,CAACG,EAAOC,CAAQ,EAAI75B,EAAAA,SAAiB,IAAMy5B,GAAS,eAAiB,CAAC,EACtE,CAACK,EAAYC,CAAa,EAAI/5B,EAAAA,SAAS,EAAK,EAC5C,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAwB,IAAI,EAUtD,GARAM,EAAAA,UAAU,IAAM,CACVm5B,GAAW9wB,IACbgxB,EAAY,KAAK,IAAIF,EAAQ,kBAAmBA,EAAQ,YAAY,CAAC,EACrEI,EAASJ,EAAQ,aAAa,EAC9BjvB,EAAS,IAAI,EAEjB,EAAG,CAACivB,EAAS9wB,CAAM,CAAC,EAEhB,CAACA,GAAU,CAAC8wB,EACd,OAAO,KAGT,MAAMO,EAAa,IAAM,CACvBL,EAAY,KAAK,IAAIF,EAAQ,kBAAmBA,EAAQ,YAAY,CAAC,EACrEI,EAASJ,EAAQ,aAAa,EAC9BjvB,EAAS,IAAI,CACf,EAEM+qB,EAAc,IAAM,CACpBuE,IACJE,EAAA,EACApxB,EAAA,EACF,EAEMqT,EAAe,MAAOoG,GAA2B,CAGrD,GAFAA,EAAM,eAAA,EAEF,EAACoX,EACL,IAAIC,GAAY,GAAKE,GAAS,EAAG,CAC/BpvB,EAAS,mCAAmC,EAC5C,MACF,CAEAuvB,EAAc,EAAI,EAClBvvB,EAAS,IAAI,EAEb,GAAI,CACF,MAAMwuB,GAAmB,CACvB,WAAYS,EAAQ,WACpB,cAAeA,EAAQ,cACvB,kBAAmBA,EAAQ,kBAC3B,SAAAC,EACA,UAAWE,CAAA,CACZ,EAEDzvB,IAAA,EACAorB,EAAA,CACF,OAAS50B,EAAK,CACZ6J,EAAS7J,aAAe,MAAQA,EAAI,QAAU,0BAA0B,CAC1E,QAAA,CACEo5B,EAAc,EAAK,CACrB,EACF,EAEA,aACG,MAAA,CAAI,UAAU,6EACb,SAAA/4B,EAAAA,KAAC,MAAA,CAAI,UAAU,sDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,yBAAsB,EAC1EA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,WAAQ,aAAA,CAAc,CAAA,EAC9D,EACAA,EAAAA,IAAC,SAAA,CACC,QAASs0B,EACT,UAAU,oCACV,aAAW,0BACZ,SAAA,GAAA,CAAA,CAED,EACF,EAEAv0B,EAAAA,KAAC,OAAA,CAAK,SAAUib,EAAc,UAAU,gBACtC,SAAA,CAAAjb,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,0CAA0C,SAAA,WAAQ,EACnEA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,IAAK,EACL,IAAKw4B,EAAQ,kBACb,MAAOC,EACP,SAAWrX,GAAUsX,EAAY,OAAOtX,EAAM,OAAO,KAAK,CAAC,EAC3D,UAAU,qHAAA,CAAA,EAEZrhB,EAAAA,KAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,cAC5By4B,EAAQ,kBAAkB,SAAA,CAAA,CACxC,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAAx4B,EAAAA,IAAC,QAAA,CAAM,UAAU,0CAA0C,SAAA,wBAAqB,EAChFA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,IAAK,IACL,KAAM,IACN,MAAO24B,EACP,SAAWvX,GAAUwX,EAAS,OAAOxX,EAAM,OAAO,KAAK,CAAC,EACxD,UAAU,qHAAA,CAAA,EAEZrhB,EAAAA,KAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,gBAC1By4B,EAAQ,cAAc,QAAQ,CAAC,CAAA,CAAA,CAC/C,CAAA,CAAA,CACF,CAAA,EACF,EAEAz4B,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,oBAAA,CAAkB,EACxBD,EAAAA,KAAC,OAAA,CAAK,UAAU,4BAA4B,SAAA,CAAA,KAAG04B,EAAWE,GAAO,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EAC9E,EACA54B,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,wBAAA,CAAsB,SAC3B,OAAA,CAAK,SAAA,CAAA,KAAGy4B,EAAWE,EAAQ,MAAO,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EAChD,EACA54B,EAAAA,KAAC,MAAA,CAAI,UAAU,yDACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,YAAA,CAAU,SACf,OAAA,CAAK,SAAA,CAAA,KAAGy4B,EAAWE,EAAQ,MAAO,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,CAAA,CAChD,CAAA,EACF,EAEC/6B,GAASoC,EAAAA,IAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,EAAM,EAErDmC,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAASs0B,EACT,UAAU,kEACX,SAAA,QAAA,CAAA,EAGDt0B,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,SAAU64B,EACV,UAAU,sHAET,WAAa,WAAa,aAAA,CAAA,CAC7B,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CCxJA,MAAMG,GAAmB,IAAwB,CAC/C,CACE,WAAY,iBACZ,cAAe,+BACf,kBAAmB,+FACnB,WAAY,uCACZ,aAAc,eACd,eAAgB,+DAChB,SAAU,YACV,aAAc,IACd,kBAAmB,GACnB,SAAU,KACV,cAAe,KACf,aAAc,KACd,gBAAiB,IACjB,eAAgB,IAChB,gBAAiB,IACjB,iBAAkB,KAClB,cAAe,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAc,GAAI,EAAE,YAAA,EACzD,UAAW,GACX,WAAY,iBACZ,WAAY,QAAA,EAEd,CACE,WAAY,iBACZ,cAAe,8BACf,kBAAmB,+FACnB,WAAY,uCACZ,aAAc,qBACd,eAAgB,qEAChB,SAAU,UACV,aAAc,GACd,kBAAmB,GACnB,SAAU,GACV,cAAe,MACf,aAAc,QACd,gBAAiB,OACjB,eAAgB,IAChB,gBAAiB,IACjB,iBAAkB,KAClB,cAAe,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAS,GAAK,GAAI,EAAE,YAAA,EACzD,UAAW,GACX,WAAY,QAAA,CAEhB,EAEMC,GAAsB,IAA2B,CACrD,CACE,GAAI,oBACJ,YAAa,kBACb,cAAe,8BACf,SAAU,UACV,gBAAiB,OACjB,OAAQ,IACR,iBAAkB,IAClB,OAAQ,SACR,OAAQ,OACR,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAc,GAAK,GAAI,EAAE,YAAA,EAC3D,YAAa,MAAA,EAEf,CACE,GAAI,oBACJ,YAAa,kBACb,cAAe,mBACf,SAAU,YACV,gBAAiB,QACjB,OAAQ,GACR,iBAAkB,IAClB,OAAQ,UACR,OAAQ,MACR,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAU,GAAK,GAAK,GAAI,EAAE,YAAA,EAC5D,YAAa,IAAI,KAAK,KAAK,IAAA,EAAQ,MAAe,GAAK,GAAI,EAAE,YAAA,CAAY,CAE7E,EAEMC,GAAyB/c,GAA4C,CACzE,MAAMgd,EAAWH,GAAA,EACXR,EAAUW,EAAS,KAAMlrB,GAASA,EAAK,aAAekO,CAAS,GAAKgd,EAAS,CAAC,EAC9E3U,EAAM,KAAK,IAAA,EAEjB,MAAO,CACL,QAAAgU,EACA,QAAS,CACP,YACE,yGACF,OAAQ,CAAC,qBAAsB,WAAW,EAC1C,KAAM,CAAC,SAAU,SAAU,WAAW,EACtC,aAAc,IAAI,KAAKhU,EAAM,MAAc,GAAK,GAAI,EAAE,YAAA,EACtD,YAAa,MACb,gBAAiB,KACjB,iBAAkB,IAAA,EAEpB,YAAa,CACX,QAAS,MAAM,KAAK,CAAE,OAAQ,IAAM,CAACtL,EAAGxX,KAE/B,CACL,KAFU,IAAI,KAAK8iB,GAAO,GAAK9iB,GAAS,GAAK,GAAK,GAAK,GAAI,EAEjD,YAAA,EAAc,MAAM,GAAG,EAAE,CAAC,EACpC,MAAO82B,EAAQ,eAAiB,IAAO92B,EAAQ,KAC/C,OAAQ,KAAK,MAAM,KAAK,OAAA,EAAW,IAAM,EAAE,CAAA,EAE9C,EACD,OAAQ,CACN,CACE,GAAI,QACJ,KAAM,WACN,SAAU82B,EAAQ,aAClB,MAAOA,EAAQ,SACf,UAAW,IAAI,KAAKhU,EAAM,IAAU,GAAK,GAAK,GAAI,EAAE,YAAA,CAAY,EAElE,CACE,GAAI,QACJ,KAAM,WACN,SAAU,EACV,MAAO,IACP,UAAW,IAAI,KAAKA,EAAM,KAAc,GAAK,GAAI,EAAE,YAAA,CAAY,CACjE,CACF,EAEF,YAAa,CACX,SAAU,CACR,CACE,GAAI,oBACJ,SAAU,GACV,UAAW,KACX,OAAQ,SACR,UAAW,IAAI,KAAKA,EAAM,KAAc,GAAK,GAAI,EAAE,YAAA,CAAY,CACjE,EAEF,OAAQ,CACN,CACE,GAAI,kBACJ,SAAU,GACV,UAAW,KACX,OAAQ,UACR,WAAY,sBACZ,QAAS,oDAAA,CACX,CACF,CACF,CAEJ,EAEM4U,GAA4BC,GAA2C,CAC3E,MAAMC,EAAcL,GAAA,EACdM,EAAaD,EAAY,KAAMrrB,GAASA,EAAK,KAAOorB,CAAY,GAAKC,EAAY,CAAC,EAClF9U,EAAM,KAAK,IAAA,EAEjB,MAAO,CACL,WAAA+U,EACA,SAAU,CACR,OAAQ,cACR,OAAQ,OACR,KAAM,IACN,WAAY,IAAI,KAAK/U,EAAM,KAAc,GAAK,GAAI,EAAE,YAAA,EACpD,mBAAoB,kGAAA,EAEtB,WAAY,MAAM,KAAK,CAAE,OAAQ,IAAM,CAACtL,EAAGxX,IAAU,CACnD,MAAM83B,EAAM,IAAI,KAAKhV,GAAO,EAAI9iB,GAAS,GAAK,GAAK,GAAK,GAAI,EACtD+3B,EAAS,IAAQ/3B,EAAQ,KAAO,KAAK,MAAM,KAAK,OAAA,EAAW,IAAI,EACrE,MAAO,CACL,KAAM83B,EAAI,YAAA,EAAc,MAAM,GAAG,EAAE,CAAC,EACpC,OAAAC,EACA,SAAU,KAAQ/3B,EAAQ,GAAA,CAE9B,CAAC,EACD,aAAc,CACZ,CACE,SAAU,iBACV,OAAQ,IACR,KAAM,OACN,OAAQ,QAAA,EAEV,CACE,SAAU,iBACV,OAAQ,GACR,KAAM,QACN,OAAQ,QAAA,CACV,CACF,CAEJ,EAEag4B,GAAuB,MAAO37B,GAEhCi7B,GAAA,EAiBEW,GAA0B,MAAO57B,GAEnCk7B,GAAA,EAiBEW,GAAmB,MAAOzd,EAAmBpe,IAE/Cm7B,GAAsB/c,CAAS,EAkB7B0d,GAAsB,MAAOR,GAE/BD,GAAyBC,CAAY,ECpO1CS,GAAS,CACb,QAAS,UACT,UAAW,UACX,QAAS,UACT,QAAS,UACT,OAAQ,UACR,KAAM,UACN,OAAQ,UACR,KAAM,UACN,KAAM,SACR,EAEMC,GAAe,CACnBD,GAAO,QACPA,GAAO,UACPA,GAAO,QACPA,GAAO,KACPA,GAAO,OACPA,GAAO,KACPA,GAAO,QACPA,GAAO,OACPA,GAAO,IACT,EAYO,SAASE,GAAc,CAAE,KAAA98B,EAAM,OAAAyb,EAAS,KAA2B,CACxE,aACGshB,GAAA,CAAoB,MAAM,OAAO,OAAAthB,EAChC,SAAA5Y,OAACm6B,IAAU,KAAAh9B,EACT,SAAA,CAAA8C,EAAAA,IAAC,OAAA,CACC,SAAAD,EAAAA,KAAC,iBAAA,CAAe,GAAG,mBAAmB,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAC5D,SAAA,CAAAC,MAAC,QAAK,OAAO,KAAK,UAAW85B,GAAO,QAAS,YAAa,GAAI,EAC9D95B,MAAC,QAAK,OAAO,MAAM,UAAW85B,GAAO,QAAS,YAAa,EAAA,CAAI,CAAA,CAAA,CACjE,CAAA,CACF,EACA95B,EAAAA,IAACm6B,GAAA,CAAc,gBAAgB,MAAM,OAAO,UAAU,EACtDn6B,EAAAA,IAACo6B,GAAA,CACC,QAAQ,OACR,OAAO,UACP,SAAU,GACV,cAAgB51B,GAAU,IAAI,KAAKA,CAAK,EAAE,mBAAmB,QAAS,CAAE,MAAO,QAAS,IAAK,UAAW,CAAA,CAAA,EAE1GxE,EAAAA,IAACq6B,GAAA,CACC,OAAO,UACP,SAAU,GACV,cAAgB71B,GAAU,IAAIA,CAAK,EAAA,CAAA,EAErCxE,EAAAA,IAACuF,GAAA,CACC,aAAc,CACZ,gBAAiB,QACjB,OAAQ,oBACR,aAAc,MACd,UAAW,mCAAA,EAEb,eAAiBf,GAAU,IAAI,KAAKA,CAAK,EAAE,mBAAA,EAC3C,UAAYA,GAAkB,CAAC,IAAIA,EAAM,QAAQ,CAAC,CAAC,GAAI,UAAU,CAAA,CAAA,EAEnExE,EAAAA,IAACs6B,GAAA,CACC,KAAK,WACL,QAAQ,WACR,OAAQR,GAAO,QACf,YAAa,EACb,KAAK,wBAAA,CAAA,CACP,CAAA,CACF,CAAA,CACF,CAEJ,CAWO,SAASS,GAAmB,CAAE,KAAAr9B,EAAM,OAAAyb,EAAS,KAAgC,CAClF,OACE3Y,EAAAA,IAACi6B,IAAoB,MAAM,OAAO,OAAAthB,EAChC,SAAA5Y,EAAAA,KAACy6B,GAAA,CAAS,KAAAt9B,EAAY,OAAO,aAC3B,SAAA,CAAA8C,EAAAA,IAACm6B,GAAA,CAAc,gBAAgB,MAAM,OAAO,UAAU,QACrDC,GAAA,CAAM,KAAK,SAAS,OAAO,UAAU,SAAU,GAAI,EACpDp6B,EAAAA,IAACq6B,GAAA,CACC,KAAK,WACL,QAAQ,SACR,OAAO,UACP,SAAU,GACV,MAAO,GAAA,CAAA,EAETr6B,EAAAA,IAACuF,GAAA,CACC,aAAc,CACZ,gBAAiB,QACjB,OAAQ,oBACR,aAAc,MACd,UAAW,mCAAA,EAEb,UAAYf,GAAkB,CAACA,EAAM,eAAA,EAAkB,OAAO,CAAA,CAAA,EAEhExE,EAAAA,IAACy6B,GAAA,CACC,QAAQ,QACR,KAAMX,GAAO,QACb,OAAQ,CAAC,EAAG,EAAG,EAAG,CAAC,CAAA,CAAA,CACrB,CAAA,CACF,CAAA,CACF,CAEJ,CAWO,SAASY,GAAkB,CAAE,KAAAx9B,EAAM,OAAAyb,EAAS,KAA+B,CAChF,MAAMgiB,EAAiBz9B,EAAK,IAAI,CAAC+Q,EAAMvM,KAAW,CAChD,GAAGuM,EACH,MAAOA,EAAK,OAAS8rB,GAAar4B,EAAQq4B,GAAa,MAAM,CAAA,EAC7D,EAEF,aACGE,GAAA,CAAoB,MAAM,OAAO,OAAAthB,EAChC,gBAACiiB,GAAA,CACC,SAAA,CAAA56B,EAAAA,IAAC66B,GAAA,CACC,KAAMF,EACN,GAAG,MACH,GAAG,MACH,YAAa,GACb,YAAa,IACb,aAAc,EACd,QAAQ,QAEP,SAAAA,EAAe,IAAI,CAACl5B,EAAOC,IAC1B1B,EAAAA,IAAC86B,GAAA,CAA2B,KAAMr5B,EAAM,KAAA,EAA7B,QAAQC,CAAK,EAAuB,CAChD,CAAA,CAAA,EAEH1B,EAAAA,IAACuF,GAAA,CACC,aAAc,CACZ,gBAAiB,QACjB,OAAQ,oBACR,aAAc,MACd,UAAW,mCAAA,EAEb,UAAYf,GAAkB,CAACA,EAAM,eAAA,EAAkB,OAAO,CAAA,CAAA,EAEhExE,EAAAA,IAAC+6B,GAAA,CACC,cAAc,SACd,MAAM,QACN,OAAO,WACP,SAAS,SACT,aAAc,CAAE,SAAU,OAAQ,YAAa,MAAA,CAAO,CAAA,CACxD,CAAA,CACF,CAAA,CACF,CAEJ,CAeO,SAASC,GAAU,CACxB,KAAA99B,EACA,OAAAyb,EAAS,IACT,WAAAsiB,EAAa,QACb,aAAAC,EACA,aAAAC,EAAerB,GAAO,QACtB,eAAAsB,EAAiBtB,GAAO,SAC1B,EAAmB,CACjB,aACGG,GAAA,CAAoB,MAAM,OAAO,OAAAthB,EAChC,SAAA5Y,OAACs7B,IAAU,KAAAn+B,EACT,SAAA,CAAA8C,EAAAA,IAACm6B,GAAA,CAAc,gBAAgB,MAAM,OAAO,UAAU,EACtDn6B,EAAAA,IAACo6B,GAAA,CACC,QAAQ,OACR,OAAO,UACP,SAAU,GACV,cAAgB51B,GAAU,IAAI,KAAKA,CAAK,EAAE,mBAAmB,QAAS,CAAE,MAAO,QAAS,IAAK,UAAW,CAAA,CAAA,EAE1GxE,EAAAA,IAACq6B,GAAA,CAAM,OAAO,UAAU,SAAU,GAAI,EACtCr6B,EAAAA,IAACuF,GAAA,CACC,aAAc,CACZ,gBAAiB,QACjB,OAAQ,oBACR,aAAc,MACd,UAAW,mCAAA,EAEb,eAAiBf,GAAU,IAAI,KAAKA,CAAK,EAAE,mBAAA,CAAmB,CAAA,EAEhExE,EAAAA,IAACs7B,GAAA,CACC,KAAK,WACL,QAASL,EACT,OAAQE,EACR,YAAa,EACb,IAAK,CAAE,EAAG,CAAA,EACV,UAAW,CAAE,EAAG,CAAA,CAAE,CAAA,EAEnBD,GACCl7B,EAAAA,IAACs7B,GAAA,CACC,KAAK,WACL,QAASJ,EACT,OAAQE,EACR,YAAa,EACb,IAAK,CAAE,EAAG,CAAA,EACV,UAAW,CAAE,EAAG,CAAA,CAAE,CAAA,CACpB,CAAA,CAEJ,CAAA,CACF,CAEJ,CAeO,SAASG,GAAiB,CAAE,KAAAr+B,EAAM,QAAAs+B,EAAS,OAAA7iB,EAAS,KAA8B,CACvF,aACGshB,GAAA,CAAoB,MAAM,OAAO,OAAAthB,EAChC,SAAA5Y,OAACs7B,IAAU,KAAAn+B,EACT,SAAA,CAAA8C,EAAAA,IAACm6B,GAAA,CAAc,gBAAgB,MAAM,OAAO,UAAU,EACtDn6B,EAAAA,IAACo6B,GAAA,CACC,QAAQ,OACR,OAAO,UACP,SAAU,GACV,cAAgB51B,GAAU,IAAI,KAAKA,CAAK,EAAE,mBAAmB,QAAS,CAAE,MAAO,QAAS,IAAK,UAAW,CAAA,CAAA,EAE1GxE,EAAAA,IAACq6B,GAAA,CAAM,OAAO,UAAU,SAAU,GAAI,EACtCr6B,EAAAA,IAACuF,GAAA,CACC,aAAc,CACZ,gBAAiB,QACjB,OAAQ,oBACR,aAAc,MACd,UAAW,mCAAA,EAEb,eAAiBf,GAAU,IAAI,KAAKA,CAAK,EAAE,mBAAA,CAAmB,CAAA,QAE/Du2B,GAAA,EAAO,EACPS,EAAQ,IAAKC,GACZz7B,EAAAA,IAACs7B,GAAA,CAEC,KAAK,WACL,QAASG,EAAO,IAChB,OAAQA,EAAO,MACf,YAAa,EACb,KAAMA,EAAO,KACb,IAAK,CAAE,EAAG,CAAA,EACV,UAAW,CAAE,EAAG,CAAA,CAAE,EAPbA,EAAO,GAAA,CASf,CAAA,CAAA,CACH,CAAA,CACF,CAEJ,CAWO,SAASC,GAAQ,CAAE,MAAAtjB,EAAO,MAAA5T,EAAO,OAAAm3B,EAAQ,WAAAC,EAAY,KAAAzjB,EAAM,MAAA0jB,GAAuB,CACvF,MAAMC,EAAcF,IAAe,WAAa,iBAAmB,eAC7DG,EAAaH,IAAe,WAAa,IAAM,IAErD,OACE77B,EAAAA,KAAC,MAAA,CAAI,UAAU,mEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAAoY,GAAQnY,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAiB,SAAAmY,EAAK,EAC9CnY,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAqC,SAAAoY,CAAA,CAAM,CAAA,EAC3D,EACCujB,IAAW,QACV57B,OAAC,QAAK,UAAW,uBAAuB+7B,CAAW,+BACjD,SAAA,CAAA97B,EAAAA,IAAC,QAAM,SAAA+7B,CAAA,CAAW,SACjB,OAAA,CAAM,SAAA,CAAA,KAAK,IAAIJ,CAAM,EAAE,GAAA,CAAA,CAAC,CAAA,CAAA,CAC3B,CAAA,EAEJ,EAEA37B,EAAAA,IAAC,OAAI,UAAU,OACb,eAAC,IAAA,CAAE,UAAU,mCAAoC,SAAAwE,CAAA,CAAM,CAAA,CACzD,EAECq3B,GAASA,EAAM,OAAS,GACvB77B,EAAAA,IAAC,OAAI,UAAU,4BACb,SAAAA,MAACi6B,GAAA,CAAoB,MAAM,OAAO,OAAQ,GACxC,SAAAj6B,MAACq7B,GAAA,CAAU,KAAMQ,EACf,SAAA77B,EAAAA,IAACs7B,GAAA,CACC,KAAK,WACL,QAAQ,QACR,OAAQM,IAAe,WAAa9B,GAAO,QAAUA,GAAO,OAC5D,YAAa,EACb,IAAK,EAAA,CAAA,CACP,CACF,EACF,CAAA,CACF,CAAA,EAEJ,CAEJ,CC5TA,SAASkC,GAAwB,CAAE,SAAA5oB,GAA4E,CAC7G,MAAM1U,EAAWC,GAAA,EAgBXs9B,EAbe,MAAM,KAAK,CAAE,OAAQ,EAAA,EAAM,CAAC/iB,EAAG9b,IAAM,CACtD,MAAMmnB,MAAW,KACjB,OAAAA,EAAK,QAAQA,EAAK,QAAA,GAAa,GAAKnnB,EAAE,EAC/B,CACL,KAAMmnB,EAAK,YAAA,EAAc,MAAM,GAAG,EAAE,CAAC,EACrC,SAAU,KAAK,MAAM,KAAK,OAAA,EAAW,EAAE,EAAI,GAC3C,KAAM,KAAK,MAAM,KAAK,OAAA,EAAW,EAAE,EAAI,EACvC,OAAQ,KAAK,MAAM,KAAK,OAAA,EAAW,GAAG,EAAI,EAAA,CAE9C,CAAC,EAMG2X,EAAoB,CACxB,CAAE,KAAM,SAAU,MAAO9oB,GAAU,gBAAkB,EAAG,MAAO,SAAA,EAC/D,CAAE,KAAM,OAAQ,OAAQA,GAAU,cAAgB,GAAK,GAAI,MAAO,SAAA,EAClE,CAAE,KAAM,OAAQ,OAAQA,GAAU,cAAgB,GAAK,EAAG,MAAO,SAAA,EACjE,CAAE,KAAM,OAAQ,OAAQA,GAAU,gBAAkB,GAAK,EAAG,MAAO,SAAA,CAAU,EAGzE+oB,EAAkB,CACtB,CAAE,OAAQ,iBAAkB,MAAO,EAAA,EACnC,CAAE,OAAQ,mBAAoB,MAAO,EAAA,EACrC,CAAE,OAAQ,sBAAuB,MAAO,EAAA,EACxC,CAAE,OAAQ,mBAAoB,MAAO,CAAA,EACrC,CAAE,OAAQ,eAAgB,MAAO,CAAA,CAAE,EAGrC,OACEp8B,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,6FACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,qEACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,gDAAgD,SAAA,MAAG,EAClEA,EAAAA,IAAC,KAAA,CAAG,UAAU,yBAAyB,SAAA,qBAAkB,EACzDA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,uEAAA,CAAqE,CAAA,EACjH,EACAD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMrB,EAAS,aAAa,EACrC,UAAU,wIACX,SAAA,CAAA,qBAECsB,EAAAA,IAACo8B,GAAA,CAAa,UAAU,cAAA,CAAe,CAAA,CAAA,CAAA,CACzC,CAAA,CACF,CAAA,CACF,EAEAr8B,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAAC07B,GAAA,CACC,MAAM,aACN,MAAM,UACN,OAAQ,GACR,WAAW,WACX,KAAM17B,EAAAA,IAACqB,GAAA,CAAW,UAAU,SAAA,CAAU,EACtC,MAAO46B,EAAa,MAAM,EAAE,EAAE,IAAII,IAAM,CAAE,KAAMA,EAAE,KAAM,MAAOA,EAAE,UAAW,CAAA,CAAA,EAG9Er8B,EAAAA,IAAC07B,GAAA,CACC,MAAM,WACN,MAAM,YACN,OAAQ,EACR,WAAW,WACX,KAAM17B,EAAAA,IAACirB,GAAA,CAAS,UAAU,SAAA,CAAU,EACpC,MAAOgR,EAAa,MAAM,EAAE,EAAE,IAAII,IAAM,CAAE,KAAMA,EAAE,KAAM,MAAOA,EAAE,SAAW,GAAI,CAAA,CAAA,EAGlFr8B,EAAAA,IAAC07B,GAAA,CACC,MAAM,UACN,MAAM,SACN,OAAQ,GACR,WAAW,WACX,KAAM17B,EAAAA,IAAC2K,GAAA,CAAM,UAAU,SAAA,CAAU,EACjC,MAAOsxB,EAAa,MAAM,EAAE,EAAE,IAAII,IAAM,CAAE,KAAMA,EAAE,KAAM,MAAOA,EAAE,SAAW,IAAM,CAAA,CAAA,EAGpFr8B,EAAAA,IAAC07B,GAAA,CACC,MAAM,YACN,MAAM,UACN,OAAQ,EACR,WAAW,WACX,KAAM17B,EAAAA,IAACs8B,GAAA,CAAW,UAAU,SAAA,CAAU,EACtC,MAAOL,EAAa,MAAM,EAAE,EAAE,IAAII,IAAM,CAAE,KAAMA,EAAE,KAAM,MAAOA,EAAE,SAAW,GAAI,CAAA,CAAA,CAClF,EACF,EAGAt8B,EAAAA,KAAC,MAAA,CAAI,UAAU,wCAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,2BAAwB,EACjFA,EAAAA,IAACg6B,GAAA,CACC,KAAMiC,EACN,OAAQ,GAAA,CAAA,CACV,EACF,EAGAl8B,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,wBAAqB,EAC9EA,EAAAA,IAAC06B,GAAA,CACC,KAAMwB,EAAkB,OAAOjuB,GAAQA,EAAK,MAAQ,CAAC,EACrD,OAAQ,GAAA,CAAA,CACV,EACF,EAGAlO,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,kBAAe,EACxEA,EAAAA,IAACu6B,GAAA,CACC,KAAM4B,EACN,OAAQ,GAAA,CAAA,CACV,EACF,EAGAp8B,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,kBAAe,EACxEA,EAAAA,IAACg7B,GAAA,CACC,KAAMiB,EAAa,IAAII,IAAM,CAC3B,KAAMA,EAAE,KACR,MAAOA,EAAE,OACT,UAAWA,EAAE,KAAO,CAAA,EACpB,EACF,OAAQ,IACR,WAAW,QACX,aAAa,YACb,aAAa,UACb,eAAe,SAAA,CAAA,EAEjBt8B,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAA,CAAmC,EAClDA,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,QAAA,CAAM,CAAA,EACxC,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,oCAAA,CAAqC,EACpDA,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,WAAA,CAAS,CAAA,CAAA,CAC3C,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,kBAAe,EACxED,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAACqI,GAAA,CAAM,UAAU,oCAAA,CAAqC,QACrD,IAAA,CAAE,UAAU,mCAAoC,SAAA+K,GAAU,gBAAkB,EAAE,EAC/EpT,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,eAAA,CAAa,CAAA,EACpD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAC,EAAAA,IAAC4B,GAAA,CAAI,UAAU,sCAAA,CAAuC,QACrD,IAAA,CAAE,UAAU,qCAAsC,SAAAwR,GAAU,cAAgB,EAAE,EAC/EpT,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,gBAAA,CAAc,CAAA,EACvD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAC,EAAAA,IAAC2B,GAAA,CAAQ,UAAU,sCAAA,CAAuC,QACzD,IAAA,CAAE,UAAU,qCAAsC,SAAAyR,GAAU,cAAgB,EAAE,EAC/EpT,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,aAAA,CAAW,CAAA,EACpD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAC,EAAAA,IAACmB,GAAA,CAAO,UAAU,sCAAA,CAAuC,QACxD,IAAA,CAAE,UAAU,qCAAsC,SAAAiS,GAAU,gBAAkB,EAAE,EACjFpT,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,iBAAA,CAAe,CAAA,EACxD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAACsZ,GAAA,CAAO,UAAU,qCAAA,CAAsC,EACxDvZ,EAAAA,KAAC,IAAA,CAAE,UAAU,oCAAoC,SAAA,CAAA,SAAOqT,GAAU,OAAS,CAAA,EAAE,EAC7EpT,EAAAA,IAAC,IAAA,CAAE,UAAU,yBAAyB,SAAA,eAAA,CAAa,CAAA,EACrD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uCACb,SAAA,CAAAC,EAAAA,IAACirB,GAAA,CAAS,UAAU,mCAAA,CAAoC,QACvD,IAAA,CAAE,UAAU,kCAAmC,SAAA7X,GAAU,oBAAsB,EAAE,EAClFpT,EAAAA,IAAC,IAAA,CAAE,UAAU,uBAAuB,SAAA,YAAA,CAAU,CAAA,CAAA,CAChD,CAAA,CAAA,CACF,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,qBAAkB,EACtED,EAAAA,KAAC,MAAA,CAAI,UAAU,8DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACqI,GAAA,CAAM,UAAU,uBAAA,CAAwB,EACzCrI,EAAAA,IAAC,OAAA,CAAK,UAAU,4BAA4B,SAAA,QAAA,CAAM,CAAA,EACpD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,KAAE,UAAU,8BAA+B,YAAU,gBAAgB,kBAAoB,IAAI,EAC9FA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,qBAAA,CAAmB,CAAA,CAAA,CAC1D,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,gEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC4B,GAAA,CAAI,UAAU,yBAAA,CAA0B,EACzC5B,EAAAA,IAAC,OAAA,CAAK,UAAU,8BAA8B,SAAA,MAAA,CAAI,CAAA,EACpD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,MAAC,IAAA,CAAE,UAAU,gCAAiC,SAAAoT,GAAU,cAAgB,IAAI,EAC5EpT,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,uBAAA,CAAqB,CAAA,CAAA,CAC9D,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,gEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC2B,GAAA,CAAQ,UAAU,yBAAA,CAA0B,EAC7C3B,EAAAA,IAAC,OAAA,CAAK,UAAU,8BAA8B,SAAA,MAAA,CAAI,CAAA,EACpD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,MAAC,IAAA,CAAE,UAAU,gCAAiC,SAAAoT,GAAU,cAAgB,IAAI,EAC5EpT,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,sBAAA,CAAoB,CAAA,CAAA,CAC7D,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,gEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACmB,GAAA,CAAO,UAAU,yBAAA,CAA0B,EAC5CnB,EAAAA,IAAC,OAAA,CAAK,UAAU,8BAA8B,SAAA,MAAA,CAAI,CAAA,EACpD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,MAAC,IAAA,CAAE,UAAU,gCAAiC,SAAAoT,GAAU,gBAAkB,IAAI,EAC9EpT,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,qBAAA,CAAmB,CAAA,CAAA,CAC5D,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,CAEJ,CAEA,SAASu8B,GAAyB,CAChC,SAAApD,EACA,QAAAx4B,EACA,OAAA67B,EACA,OAAAC,CACF,EAKG,CACD,GAAI97B,EACF,OACEZ,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,oBAAiB,EAC1EA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,mBAAA,CAAiB,CAAA,EACxD,EAIJ,GAAI,CAACm5B,EAAS,OACZ,OACEp5B,EAAAA,KAAC,MAAA,CAAI,UAAU,2EACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,gCAA6B,EACtFA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,iFAElC,EACAA,EAAAA,IAAC,SAAA,CAAO,UAAU,+EAA+E,SAAA,wBAAA,CAEjG,CAAA,EACF,EAIJ,MAAM08B,EAASvD,EAAS,OACtB,CACEwD,EACAnE,KAEAmE,EAAI,OAASnE,EAAQ,aACrBmE,EAAI,MAAQnE,EAAQ,gBACbmE,GAET,CAAE,MAAO,EAAG,KAAM,CAAA,CAAE,EAGtB,OACE58B,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0EACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,oBAAiB,EACrEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,6DAAA,CAA2D,CAAA,EAClG,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,sCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,kBAAe,EAC5CD,EAAAA,KAAC,IAAA,CAAE,UAAU,sCAAsC,SAAA,CAAA,IAAE28B,EAAO,MAAM,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EAC/E,SACC,MAAA,CACC,SAAA,CAAA18B,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,kBAAe,EAC5CD,EAAAA,KAAC,KAAE,UAAW,yBAAyB28B,EAAO,MAAQ,EAAI,iBAAmB,cAAc,GACxF,SAAA,CAAAA,EAAO,MAAQ,EAAI,IAAM,GAAG,IAAEA,EAAO,KAAK,QAAQ,CAAC,CAAA,CAAA,CACtD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,QAEC,MAAA,CAAI,UAAU,kBACb,SAAA38B,EAAAA,KAAC,QAAA,CAAM,UAAU,sCACf,SAAA,CAAAC,MAAC,QAAA,CAAM,UAAU,aACf,SAAAD,EAAAA,KAAC,KAAA,CACC,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAM,MAAM,UAAU,iFAAiF,SAAA,QAE3G,QACC,KAAA,CAAG,MAAM,MAAM,UAAU,kFAAkF,SAAA,SAE5G,QACC,KAAA,CAAG,MAAM,MAAM,UAAU,kFAAkF,SAAA,YAE5G,QACC,KAAA,CAAG,MAAM,MAAM,UAAU,kFAAkF,SAAA,eAE5G,QACC,KAAA,CAAG,MAAM,MAAM,UAAU,kFAAkF,SAAA,aAE5G,QACC,KAAA,CAAG,MAAM,MAAM,UAAU,kFAAkF,SAAA,MAE5G,EACAA,EAAAA,IAAC,KAAA,CAAG,MAAM,MAAM,UAAU,WAAA,CAAY,CAAA,CAAA,CACxC,CAAA,CACF,EACAA,EAAAA,IAAC,QAAA,CAAM,UAAU,oCACd,SAAAm5B,EAAS,IAAKX,GACbz4B,EAAAA,KAAC,KAAA,CAA4B,UAAU,mBACrC,SAAA,CAAAC,EAAAA,IAAC,MAAG,UAAU,YACZ,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,IAAKw4B,EAAQ,kBACb,IAAKA,EAAQ,cACb,UAAU,mCAAA,CAAA,SAEX,MAAA,CACC,SAAA,CAAAx4B,EAAAA,IAAC,IAAA,CAAE,UAAU,4BAA6B,SAAAw4B,EAAQ,cAAc,EAChEz4B,EAAAA,KAAC,IAAA,CAAE,UAAU,wBACV,SAAA,CAAAy4B,EAAQ,aAAa,MAAIA,EAAQ,SAAS,YAAA,CAAY,CAAA,CACzD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EACAz4B,EAAAA,KAAC,KAAA,CAAG,UAAU,uBACZ,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,8BAA+B,SAAAw4B,EAAQ,aAAa,EACnEz4B,EAAAA,KAAC,MAAA,CAAI,UAAU,wBAAyB,SAAA,CAAAy4B,EAAQ,kBAAkB,WAAA,CAAA,CAAS,CAAA,EAC7E,EACAz4B,EAAAA,KAAC,KAAA,CAAG,UAAU,uBACZ,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,CAAA,IAAEy4B,EAAQ,SAAS,QAAQ,CAAC,CAAA,EAAE,EAC7Dz4B,EAAAA,KAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,CAAA,QAAMy4B,EAAQ,cAAc,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EAChF,EACAz4B,EAAAA,KAAC,KAAA,CAAG,UAAU,uBACZ,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,CAAA,IAAEy4B,EAAQ,aAAa,QAAQ,CAAC,CAAA,EAAE,EACjEz4B,EAAAA,KAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,CAAA,UAAQy4B,EAAQ,gBAAgB,QAAQ,CAAC,EAAE,GAAA,CAAA,CAAC,CAAA,EACrF,EACAx4B,EAAAA,IAAC,KAAA,CAAG,UAAU,uBACZ,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAW,iBAAiBy4B,EAAQ,iBAAmB,EAAI,iBAAmB,cAAc,GAC9F,SAAA,CAAAA,EAAQ,iBAAmB,EAAI,IAAM,GAAG,IAAEA,EAAQ,gBAAgB,QAAQ,CAAC,CAAA,CAAA,CAC9E,CAAA,CACF,EACAx4B,EAAAA,IAAC,KAAA,CAAG,UAAU,uBACZ,SAAAD,EAAAA,KAAC,OAAA,CAAK,UAAW,yEACfy4B,EAAQ,gBAAkB,EAAI,6BAA+B,wBAC/D,GACG,SAAA,CAAAA,EAAQ,gBAAkB,EAAI,IAAM,GAAIA,EAAQ,eAAe,QAAQ,CAAC,EAAE,GAAA,CAAA,CAC7E,CAAA,CACF,EACAz4B,EAAAA,KAAC,KAAA,CAAG,UAAU,iCACZ,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMy8B,EAAOjE,CAAO,EAC7B,UAAU,oGACX,SAAA,cAAA,CAAA,EAGAA,EAAQ,kBAAoB,EAC3Bx4B,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMw8B,EAAOhE,CAAO,EAC7B,UAAU,yGACX,SAAA,iBAAA,CAAA,EAIDx4B,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,mBAAA,CAAiB,CAAA,CAAA,CAE7D,CAAA,GAzDOw4B,EAAQ,UA0DjB,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAEJ,CAEA,SAASoE,GAAsB,CAAE,SAAAC,EAAU,QAAAl8B,GAA2D,CACpG,OAAIA,EAEAZ,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,cAAW,EACpEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,mBAAA,CAAiB,CAAA,EACxD,EAIC68B,EAAS,OAKZ98B,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,cAAW,EAC/DA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,yCAAA,CAAuC,CAAA,EAC9E,EACAD,EAAAA,KAAC,OAAA,CAAK,UAAU,6EACb,SAAA,CAAA88B,EAAS,OAAO,SAAA,CAAA,CACnB,CAAA,EACF,EAEA78B,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAA68B,EAAS,IAAK/E,GACb/3B,EAAAA,KAAC,MAAA,CAAqB,UAAU,8DAC9B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,IAAK83B,EAAQ,kBACb,IAAKA,EAAQ,cACb,UAAU,mCAAA,CAAA,SAEX,MAAA,CACC,SAAA,CAAA93B,EAAAA,IAAC,IAAA,CAAE,UAAU,4BAA6B,SAAA83B,EAAQ,cAAc,EAChE/3B,EAAAA,KAAC,IAAA,CAAE,UAAU,wBACV,SAAA,CAAA+3B,EAAQ,mBAAmB,IAAEA,EAAQ,SAAS,mBAAA,CAAA,CACjD,CAAA,CAAA,CACF,CAAA,EACF,EACA/3B,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,YAAS,EAC9CD,EAAAA,KAAC,IAAA,CAAE,UAAU,sCAAsC,SAAA,CAAA,IAAE+3B,EAAQ,UAAU,QAAQ,CAAC,CAAA,EAAE,EAClF/3B,EAAAA,KAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,WAC/B,IAAI,KAAK+3B,EAAQ,UAAU,EAAE,mBAAA,EAAqB,MAAIA,EAAQ,MAAA,CAAA,CACzE,CAAA,CAAA,CACF,CAAA,GApBQA,EAAQ,EAqBlB,CACD,CAAA,CACH,CAAA,EACF,EAzCO,IA2CX,CAEA,SAASgF,GAAc,CACrB,SAAAC,EACA,SAAAC,EACA,QAAAr8B,EACA,SAAAs8B,CACF,EAKG,CACD,OAAIt8B,EAEAZ,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,SAAM,EAC/DA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,iBAAA,CAAe,CAAA,EACtD,EAIA,CAAC+8B,EAAS,QAAU,CAACC,EAAS,OACzB,KAIPj9B,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,SAAM,EAC/DD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,WAAQ,EAC5DA,EAAAA,IAAC,OAAA,CAAK,UAAU,+DACb,WAAS,MAAA,CACZ,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACZ,SAAA,CAAAg9B,EAAS,IAAK3E,GACbp4B,EAAAA,IAAC,MAAA,CAAmB,UAAU,4BAC5B,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,IAAA,CAAE,UAAU,8BACV,SAAA,CAAAq4B,EAAM,SAAS,cAAYA,EAAM,UAAU,QAAQ,CAAC,CAAA,EACvD,QACC,IAAA,CAAE,UAAU,wBACV,SAAAA,EAAM,eAAiBA,EAAM,WAChC,EACCA,EAAM,SACLr4B,OAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,IAAEq4B,EAAM,QAAQ,GAAA,CAAA,CAAC,CAAA,EAE/D,EACAr4B,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMi9B,EAAS7E,EAAM,EAAE,EAChC,UAAU,sFACX,SAAA,QAAA,CAAA,EAGDp4B,EAAAA,IAAC,SAAA,CAAO,UAAU,oGAAoG,SAAA,SAAA,CAEtH,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EAxBQo4B,EAAM,EAyBhB,CACD,EACA,CAAC2E,EAAS,cAAW,IAAA,CAAE,UAAU,wBAAwB,SAAA,qBAAA,CAAmB,CAAA,CAAA,CAC/E,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAAh9B,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,WAAQ,EAC5DA,EAAAA,IAAC,OAAA,CAAK,UAAU,6DACb,WAAS,MAAA,CACZ,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACZ,SAAA,CAAAi9B,EAAS,IAAK5E,GACbr4B,EAAAA,KAAC,MAAA,CAAmB,UAAU,4BAC5B,SAAA,CAAAA,EAAAA,KAAC,IAAA,CAAE,UAAU,8BACV,SAAA,CAAAq4B,EAAM,SAAS,cAAYA,EAAM,UAAU,QAAQ,CAAC,CAAA,EACvD,QACC,IAAA,CAAE,UAAU,wBACV,SAAAA,EAAM,eAAiBA,EAAM,WAChC,EACAr4B,EAAAA,KAAC,IAAA,CAAE,UAAU,wCAAwC,SAAA,CAAA,WAASq4B,EAAM,MAAA,CAAA,CAAO,CAAA,GAPnEA,EAAM,EAQhB,CACD,EACA,CAAC4E,EAAS,cAAW,IAAA,CAAE,UAAU,wBAAwB,SAAA,qBAAA,CAAmB,CAAA,CAAA,CAC/E,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,CAEJ,CAEA,SAAwBhnB,IAAS,CAC/B,KAAM,CAACyQ,EAASC,CAAU,EAAI3nB,EAAAA,SAAuB,CAAA,CAAE,EACjD,CAACm+B,EAAcC,CAAe,EAAIp+B,EAAAA,SAA4B,CAAA,CAAE,EAChE,CAACqU,EAAUC,CAAW,EAAItU,EAAAA,SAA0B,IAAI,EACxD,CAACo6B,EAAUiE,CAAW,EAAIr+B,EAAAA,SAA2B,CAAA,CAAE,EACvD,CAACs+B,EAAiBC,CAAkB,EAAIv+B,EAAAA,SAAS,EAAI,EACrD,CAAC89B,EAAUU,CAAW,EAAIx+B,EAAAA,SAAyB,CAAA,CAAE,EACrD,CAACy+B,EAAiBC,CAAkB,EAAI1+B,EAAAA,SAAS,EAAI,EACrD,CAAC2+B,EAAgBC,CAAiB,EAAI5+B,EAAAA,SAAuB,CAAA,CAAE,EAC/D,CAAC6+B,EAAgBC,CAAiB,EAAI9+B,EAAAA,SAAuB,CAAA,CAAE,EAC/D,CAAC++B,EAAeC,CAAgB,EAAIh/B,EAAAA,SAAS,EAAI,EACjD,CAACi/B,EAAiBC,CAAkB,EAAIl/B,EAAAA,SAAgC,IAAI,EAC5E,CAACm/B,EAAeC,CAAgB,EAAIp/B,EAAAA,SAAS,EAAK,EAClD,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAI,EACrC,CAAC0O,EAAWC,CAAY,EAAI3O,EAAAA,SAAsC,UAAU,EAC5E,CAACuU,EAAmBC,CAAoB,EAAIxU,EAAAA,SAAS,EAAK,EAC1D,CAACyU,EAAoBC,CAAqB,EAAI1U,EAAAA,SAAS,EAAK,EAC5D,CAACyV,EAAmBC,CAAoB,EAAI1V,EAAAA,SAAS,EAAK,EAC1D,CAACq/B,EAAqBC,CAAsB,EAAIt/B,EAAAA,SAAS,EAAK,EAC9D,CAACu/B,GAA6BC,EAA8B,EAAIx/B,EAAAA,SAAS,EAAK,EAC9E,CAACy/B,EAAmBC,CAAoB,EAAI1/B,EAAAA,SAAS,EAAK,EAC1D,CAAC2V,EAAuBC,CAAwB,EAAI5V,EAAAA,SAAS,EAAK,EAGxE,QAAQ,IAAI,2CAA4C,CACtD,kBAAAy/B,EACA,kBAAAlrB,EACA,oBAAA8qB,CAAA,CACD,EAED/+B,EAAAA,UAAU,IAAM,CACdq/B,EAAA,CACF,EAAG,CAAA,CAAE,EAELr/B,EAAAA,UAAU,IAAM,CACds/B,EAAA,EACAC,EAAA,EACAC,GAAA,CACF,EAAG,CAAA,CAAE,EAEL,MAAMH,EAAkB,SAAY,CAClC,GAAI,CACF,QAAQ,IAAI,+BAA+B,EAC3C,QAAQ,IAAI,+BAA+B,EAG3C,QAAQ,IAAI,+CAA+C,EAC3D,QAAQ,IAAI,mBAAoB,SAAS,MAAM,EAE/C,MAAM5H,EAAczkB,GAAA,EACdysB,EAAe,MAAM,MAAM,gBAAiB,CAChD,YAAa,UACb,QAAShI,CAAA,CACV,EACD,QAAQ,IAAI,iBAAkB,CAC5B,OAAQgI,EAAa,OACrB,WAAYA,EAAa,WACzB,QAAS,OAAO,YAAYA,EAAa,QAAQ,SAAS,CAAA,CAC3D,EAED,IAAIC,GAAW,KACf,GAAI,CACF,MAAMC,GAAe,MAAMF,EAAa,KAAA,EACxC,QAAQ,IAAI,qBAAsBE,EAAY,EAE1CA,KACFD,GAAW,KAAK,MAAMC,EAAY,GAGpC,QAAQ,IAAI,oBAAqB,CAC/B,OAAQD,KAAa,KACrB,MAAO,CAAC,CAAEA,IAAU,GACpB,SAAU,CAAC,CAAEA,IAAU,MACvB,KAAM,OAAOA,GACb,KAAMA,EAAA,CACP,CACH,OAASE,GAAY,CACnB,QAAQ,MAAM,iCAAkCA,EAAU,CAC5D,CAEA,GAAI,CAACF,IAAYA,KAAa,KAAM,CAClC,QAAQ,IAAI,gEAAgE,EAE5E1rB,EAAY,IAAI,EAChBqT,EAAW,CAAA,CAAE,EACbyW,EAAgB,CAAA,CAAE,EAGlB,MAAM,oFAAoF,EAC1F,MACF,CAEA,QAAQ,IAAI,8CAA8C,EAG1D,MAAMv5B,GAAW,MAAM,MAAM,wBAAyB,CACpD,YAAa,UACb,QAASyO,GAAA,CAAiB,CAC3B,EACD,QAAQ,IAAI,6BAA8BzO,GAAS,MAAM,EAEzD,IAAIwP,GAAW,KACf,GAAI,CACFA,GAAW,MAAMxP,GAAS,KAAA,EAC1B,QAAQ,IAAI,oBAAqB,CAC/B,OAAQwP,KAAa,KACrB,SAAU,CAAC,CAAEA,IAAU,MACvB,MAAO,CAAC,CAAEA,IAAU,GACpB,SAAU,CAAC,CAAEA,IAAU,MACvB,aAAcA,IAAU,aACxB,KAAM,OAAOA,EAAA,CACd,CACH,OAAS6rB,GAAY,CACnB,QAAQ,MAAM,iCAAkCA,EAAU,CAC5D,CAGA,GAAI7rB,IAAU,QACZ,QAAQ,MAAM,uBAAwBA,GAAS,KAAK,EAChDA,GAAS,MAAM,SAAS,eAAe,GAAG,CAC5C,MAAM,qDAAqD,EAC3D,MACF,CAIF,GAAI,CAACA,IAAYA,KAAa,MAAQA,IAAU,MAAO,CACrD,QAAQ,IAAI,0DAA0D,EACtE,MAAM8rB,GAAqB,CACzB,GAAI,KAAK,IAAA,EACT,cAAeH,GAAS,IAAM,OAC9B,MAAOA,GAAS,OAAS,GACzB,aAAcA,GAAS,kBAAkB,MAAQA,GAAS,OAAO,MAAM,GAAG,EAAE,CAAC,GAAK,OAClF,SAAUA,GAAS,OAAO,MAAM,GAAG,EAAE,CAAC,GAAK,OAC3C,WAAYA,GAAS,kBAAkB,SAAW,OAClD,IAAK,wBACL,WAAY,OACZ,YAAa,OACb,aAAc,OACd,UAAW,UACX,UAAW,IACX,MAAO,EACP,cAAe,OAAS,KAAK,IAAA,EAAM,WAAW,MAAM,EAAE,EACtD,YAAa,OACb,eAAgB,EAChB,gBAAiB,EACjB,mBAAoB,EACpB,iBAAkB,EAClB,eAAgB,GAChB,aAAc,EACd,aAAc,EACd,eAAgB,EAChB,UAAW,OACX,mBAAoB,EACpB,uBAAwB,OAAO,cAAc,MAAM,GAAG,EAAE,CAAC,EACzD,wBAAyB,OACzB,WAAY,IAAI,KAAA,EAAO,YAAA,EACvB,WAAY,IAAI,KAAA,EAAO,YAAA,CAAY,EAErC,QAAQ,IAAI,6BAA8BG,EAAQ,EAClD7rB,EAAY6rB,EAAQ,CACtB,MACE,QAAQ,IAAI,2BAA4B,CACtC,GAAI9rB,GAAS,GACb,MAAOA,GAAS,MAChB,aAAcA,GAAS,YAAA,CACxB,EACDC,EAAYD,EAAQ,EAItB,GAAI,CACF,MAAM+rB,GAAgB9sB,GAAA,EAChB,CAAC+W,GAAiBgW,EAAoB,EAAI,MAAM,QAAQ,IAAI,CAChE,MAAM,qBAAsB,CAAE,YAAa,UAAW,QAASD,GAAe,EAC9E,MAAM,0BAA2B,CAAE,YAAa,UAAW,QAASA,GAAe,CAAA,CACpF,EAED,IAAI3V,GAAc,CAAA,EACd6V,GAAmB,CAAA,EAEvB,GAAIjW,GAAgB,GAAI,CACtB,MAAMkW,GAAc,MAAMlW,GAAgB,KAAA,EAEtC,MAAM,QAAQkW,EAAW,EAC3B9V,GAAc8V,GACLA,IAAe,MAAM,QAAQA,GAAY,OAAO,IACzD9V,GAAc8V,GAAY,QAE9B,CAEA,GAAIF,GAAqB,GAAI,CAC3B,MAAMG,GAAmB,MAAMH,GAAqB,KAAA,EAEhD,MAAM,QAAQG,EAAgB,EAChCF,GAAmBE,GACVA,IAAoB,MAAM,QAAQA,GAAiB,YAAY,IACxEF,GAAmBE,GAAiB,aAExC,CAEA7Y,EAAW8C,IAAe,EAAE,EAC5B2T,EAAgBkC,IAAoB,EAAE,EAEtC,QAAQ,IAAI,2BAA4B,CACtC,QAAS7V,GAAY,OACrB,aAAc6V,GAAiB,MAAA,CAChC,CACH,OAASG,GAAqB,CAC5B,QAAQ,MAAM,uCAAwCA,EAAmB,EACzE9Y,EAAW,CAAA,CAAE,EACbyW,EAAgB,CAAA,CAAE,CACpB,CAEF,OAASv/B,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,EAC/CA,aAAiB,QACnB,QAAQ,MAAM,iBAAkBA,EAAM,OAAO,EAC7C,QAAQ,MAAM,eAAgBA,EAAM,KAAK,GAG3CyV,EAAY,IAAI,EAChBqT,EAAW,CAAA,CAAE,EACbyW,EAAgB,CAAA,CAAE,CACpB,QAAA,CACEv8B,EAAW,EAAK,EAChB,QAAQ,IAAI,iDAAiD,CAC/D,CACF,EAEM+9B,EAAe,SAAY,CAC/BrB,EAAmB,EAAI,EACvB,MAAMpgC,EAAO,MAAMw8B,GAAA,EACnB0D,EAAYlgC,CAAI,EAChBogC,EAAmB,EAAK,CAC1B,EAEMsB,EAAe,SAAY,CAC/BnB,EAAmB,EAAI,EACvB,MAAMvgC,EAAO,MAAM06B,GAAmB,EAAI,EAC1C2F,EAAYrgC,CAAI,EAChBugC,EAAmB,EAAK,CAC1B,EAEMoB,GAAa,SAAY,CAC7Bd,EAAiB,EAAI,EACrB,KAAM,CAAC0B,EAAcC,CAAW,EAAI,MAAM,QAAQ,IAAI,CACpDxH,GAAiB,QAAQ,EACzBA,GAAiB,OAAO,CAAA,CACzB,EACDyF,EAAkB8B,CAAY,EAC9B5B,EAAkB6B,CAAW,EAC7B3B,EAAiB,EAAK,CACxB,EAEM4B,GAAiBnH,GAA4B,CACjDyF,EAAmBzF,CAAO,EAC1B2F,EAAiB,EAAI,CACvB,EAEMyB,GAAuB,IAAM,CACjCjB,EAAA,EACAC,EAAA,EACAC,GAAA,CACF,EAEMgB,GAAoB,MAAOvH,GAAoB,CACnD,GAAI,CACF,MAAMD,GAAiBC,CAAO,EAC9B,MAAM,QAAQ,IAAI,CAACqG,EAAA,EAAgBC,EAAA,EAAgBC,GAAA,CAAY,CAAC,CAClE,OAASjhC,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,EAC9C,MAAMA,aAAiB,MAAQA,EAAM,QAAU,wBAAwB,CACzE,CACF,EAEM8nB,GAAYe,GAAWA,EAAQ,OAAS,EAAIA,EAAQ,KAAKd,GAAKA,EAAE,gBAAkB,KAAK,EAAI,KAE3Fma,GAAsBx9B,GAAiB,CAC3C,OAAQA,EAAA,CACN,IAAK,eACL,IAAK,iBACL,IAAK,iBACH,OAAOtC,EAAAA,IAAC+/B,GAAA,CAAc,UAAU,wBAAA,CAAyB,EAC3D,IAAK,aACH,OAAO//B,EAAAA,IAACo8B,GAAA,CAAa,UAAU,sBAAA,CAAuB,EACxD,QACE,OAAOp8B,EAAAA,IAAC2K,GAAA,CAAM,UAAU,uBAAA,CAAwB,CAAA,CAEtD,EAEMq1B,GAAuB32B,GACpBA,GAAU,EAAI,iBAAmB,eAIpC42B,GAAqBziC,GAAwB,CACjDA,EAAE,eAAA,EACFA,EAAE,gBAAA,EACF,QAAQ,IAAI,+BAA+B,EAC3C,QAAQ,IAAI,mCAAoCghC,CAAiB,EACjE,QAAQ,IAAI,oBAAqBprB,CAAQ,EACzCqrB,EAAqB,EAAI,EACzB,QAAQ,IAAI,mCAAmC,EAG/C,WAAW,IAAM,CACf,QAAQ,IAAI,mCAAoCD,CAAiB,CACnE,EAAG,GAAG,CACR,EAEM0B,GAAyB1iC,GAAwB,CACrDA,EAAE,eAAA,EACFA,EAAE,gBAAA,EACF,QAAQ,IAAI,kCAAkC,EAC9C,QAAQ,IAAI,mCAAoC8V,CAAiB,EACjEC,EAAqB,EAAI,EACzB,QAAQ,IAAI,mCAAmC,CACjD,EAEM4sB,GAAsB3iC,GAAwB,CAClDA,EAAE,eAAA,EACFA,EAAE,gBAAA,EACF,QAAQ,IAAI,+BAA+B,EAC3C,QAAQ,IAAI,qCAAsC4gC,CAAmB,EACrEC,EAAuB,EAAI,EAC3B,QAAQ,IAAI,qCAAqC,CACnD,EAEM+B,GAAsB,IAAM,CAChC,QAAQ,IAAI,yBAAyB,EACrC3B,EAAqB,EAAK,CAC5B,EAEM4B,EAA2B,IAAM,CACrC,QAAQ,IAAI,wBAAwB,EACpC9sB,EAAqB,EAAK,CAC5B,EAEM+sB,EAA6B,IAAM,CACvC,QAAQ,IAAI,0BAA0B,EACtCjC,EAAuB,EAAK,CAC9B,EAEA,OAAI19B,EAEAX,MAAC,OAAI,UAAU,wCACb,eAAC,MAAA,CAAI,UAAU,oFAAoF,CAAA,CACrG,EAKFD,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,SAAM,EACvDA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,uCAAA,CAAqC,CAAA,EACzE,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uDAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACqI,GAAA,CAAM,UAAU,SAAA,CAAU,EAC3BrI,EAAAA,IAAC,OAAA,CAAK,UAAU,sBAAsB,SAAA,QAAA,CAAM,CAAA,EAC9C,EACAA,EAAAA,IAAC,OAAI,UAAU,kEACb,eAAC,OAAA,CAAK,UAAU,oBAAoB,SAAA,KAAA,CAAG,CAAA,CACzC,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,KAAE,UAAU,qBAAsB,YAAU,gBAAgB,kBAAoB,IAAI,EACrFA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,0BAAA,CAAwB,CAAA,EAC/D,EACAA,EAAAA,IAAC,SAAA,CACC,QAASkgC,GACT,UAAU,mHACX,SAAA,iBAAA,CAAA,CAED,EACF,EAGAngC,EAAAA,KAAC,MAAA,CAAI,UAAU,0EACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC4B,GAAA,CAAI,UAAU,SAAA,CAAU,EACzB5B,EAAAA,IAAC,OAAA,CAAK,UAAU,sBAAsB,SAAA,MAAA,CAAI,CAAA,EAC5C,EACAA,EAAAA,IAAC,OAAI,UAAU,kEACb,eAAC,OAAA,CAAK,UAAU,oBAAoB,SAAA,KAAA,CAAG,CAAA,CACzC,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,MAAC,IAAA,CAAE,UAAU,qBAAsB,SAAAoT,GAAU,cAAgB,IAAI,EACjEpT,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,sBAAA,CAAoB,CAAA,EAC7D,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMyT,EAAsB,EAAI,EACzC,UAAU,mHACX,SAAA,mBAAA,CAAA,CAED,EACF,EAGA1T,EAAAA,KAAC,MAAA,CAAI,UAAU,2EACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC2B,GAAA,CAAQ,UAAU,SAAA,CAAU,EAC7B3B,EAAAA,IAAC,OAAA,CAAK,UAAU,sBAAsB,SAAA,MAAA,CAAI,CAAA,EAC5C,EACAA,EAAAA,IAAC,OAAI,UAAU,kEACb,eAAC,OAAA,CAAK,UAAU,oBAAoB,SAAA,KAAA,CAAG,CAAA,CACzC,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,MAAC,IAAA,CAAE,UAAU,qBAAsB,SAAAoT,GAAU,cAAgB,IAAI,EACjEpT,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,2BAAA,CAAyB,CAAA,EAClE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAASigC,GACT,UAAU,4GACX,SAAA,UAAA,CAAA,EAGDjgC,EAAAA,IAAC,SAAA,CACC,QAASkgC,GACT,UAAU,4GACX,SAAA,SAAA,CAAA,EAGDlgC,EAAAA,IAAC,SAAA,CACC,QAASmgC,GACT,UAAW/sB,GAAU,cAAgB,GAAK,IAC1C,UAAU,4JACX,SAAA,UAAA,CAAA,CAED,CAAA,CACF,CAAA,EACF,EAGArT,EAAAA,KAAC,MAAA,CAAI,UAAU,4EACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACmB,GAAA,CAAO,UAAU,SAAA,CAAU,EAC5BnB,EAAAA,IAAC,OAAA,CAAK,UAAU,sBAAsB,SAAA,MAAA,CAAI,CAAA,EAC5C,EACAA,EAAAA,IAAC,OAAI,UAAU,kEACb,eAAC,OAAA,CAAK,UAAU,oBAAoB,SAAA,IAAA,CAAE,CAAA,CACxC,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,MAAC,IAAA,CAAE,UAAU,qBAAsB,SAAAoT,GAAU,gBAAkB,IAAI,EACnEpT,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,mBAAA,CAAiB,CAAA,EAC1D,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMyU,EAAqB,EAAI,EACxC,UAAU,4GACX,SAAA,WAAA,CAAA,EAGDzU,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM2U,EAAyB,EAAI,EAC5C,UAAU,4GACX,SAAA,cAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGC+Q,IAAaA,GAAU,QAAU,GAChC3lB,EAAAA,KAAC,MAAA,CAAI,UAAU,6EACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC+O,GAAA,CAAW,UAAU,SAAA,CAAU,EAChC/O,EAAAA,IAAC,OAAA,CAAK,UAAU,sBAAsB,SAAA,aAAA,CAAW,CAAA,EACnD,EACAA,EAAAA,IAACs8B,GAAA,CAAW,UAAU,oBAAA,CAAqB,CAAA,EAC7C,EACAv8B,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAA,EAAAA,KAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,CAAA,KAAG2lB,IAAW,SAAW,GAAG,QAAQ,CAAC,CAAA,EAAE,EACzE1lB,EAAAA,IAAC,IAAA,CAAE,UAAU,yBAAyB,SAAA,0BAAA,CAAwB,CAAA,EAChE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CAAO,UAAU,mHAAmH,SAAA,WAErI,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMu+B,GAA+B,EAAI,EAClD,UAAU,mHACX,SAAA,iBAAA,CAAA,CAED,CAAA,CACF,CAAA,EACF,EAIFx+B,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,kBAAe,EACnEA,EAAAA,IAAC,OAAA,CAAK,UAAU,0GAA0G,SAAA,WAAA,CAE1H,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,mCAAmC,SAAA,IAAC,EACjDA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,kBAAA,CAAgB,CAAA,EACvD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAqC,SAAA,OAAI,EACtDA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,iBAAA,CAAe,CAAA,EACtD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,oCAAoC,SAAA,QAAK,EACtDA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,cAAA,CAAY,CAAA,CAAA,CACnD,CAAA,EACF,EACAA,EAAAA,IAAC,OAAI,UAAU,qCACb,eAAC,SAAA,CAAO,UAAU,iKAAiK,SAAA,yBAAA,CAEnL,CAAA,CACF,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,2BACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,sBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM0N,EAAa,UAAU,EACtC,UAAW,uCACTD,IAAc,WACV,oCACA,sDACN,GACD,SAAA,UAAA,CAAA,EAGDzN,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM0N,EAAa,cAAc,EAC1C,UAAW,uCACTD,IAAc,eACV,oCACA,sDACN,GACD,SAAA,cAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,EAEA1N,EAAAA,KAAC,MAAA,CAAI,UAAU,MACZ,SAAA,CAAA0N,IAAc,YACb1N,OAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAC,EAAAA,IAACg8B,GAAA,CAAwB,SAAA5oB,EAAoB,aAAA8pB,CAAA,CAA4B,EACzEl9B,EAAAA,IAACu8B,GAAA,CACC,SAAApD,EACA,QAASkE,EACT,OAAQsC,GACR,OAASnH,GAAY,SAAS,uBAAuBA,EAAQ,UAAU,EAAE,CAAA,CAAA,EAE3Ex4B,EAAAA,IAAC48B,GAAA,CAAsB,SAAAC,EAAoB,QAASW,CAAA,CAAiB,EACrEx9B,EAAAA,IAAC88B,GAAA,CACC,SAAUY,EACV,SAAUE,EACV,QAASE,EACT,SAAU+B,EAAA,CAAA,CACZ,EACF,EAGDpyB,IAAc,gBACb1N,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,sBAAmB,EACvED,EAAAA,KAAC,SAAA,CAAO,UAAU,6GAChB,SAAA,CAAAC,EAAAA,IAACisB,GAAA,CAAO,UAAU,SAAA,CAAU,EAC5BjsB,EAAAA,IAAC,QAAK,SAAA,QAAA,CAAM,CAAA,CAAA,CACd,CAAA,EACF,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,WAAa,OAAS,EACrBk9B,EAAa,IAAKqD,GAChBxgC,EAAAA,KAAC,MAAA,CAAyB,UAAU,8DAClC,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,MAAC,OAAI,UAAU,6EACZ,SAAA8/B,GAAmBS,EAAY,gBAAgB,EAClD,SACC,MAAA,CACC,SAAA,CAAAvgC,EAAAA,IAAC,IAAA,CAAE,UAAU,4BACV,SAAAugC,EAAY,aAAeA,EAAY,iBAAiB,QAAQ,IAAK,GAAG,CAAA,CAC3E,EACAxgC,EAAAA,KAAC,IAAA,CAAE,UAAU,wBACV,SAAA,CAAA,IAAI,KAAKwgC,EAAY,UAAU,EAAE,mBAAA,EAAqB,MAAIA,EAAY,aAAA,CAAA,CACzE,CAAA,CAAA,CACF,CAAA,EACF,EACAxgC,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAA,EAAAA,KAAC,KAAE,UAAW,iBAAiBigC,GAAoBO,EAAY,MAAM,CAAC,GACnE,SAAA,CAAAA,EAAY,QAAU,EAAI,IAAM,GAAG,IAAE,KAAK,IAAIA,EAAY,MAAM,EAAE,QAAQ,CAAC,CAAA,EAC9E,EACAvgC,EAAAA,IAAC,IAAA,CAAE,UAAU,mCAAoC,WAAY,MAAA,CAAO,CAAA,CAAA,CACtE,CAAA,GAnBQugC,EAAY,EAoBtB,CACD,EAEDxgC,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAACs8B,GAAA,CAAW,UAAU,sCAAA,CAAuC,EAC7Dt8B,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,sBAAmB,EAC5EA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,mEAAA,CAAiE,CAAA,CAAA,CAChG,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,EACF,EAGC,CAACoT,GAAYpT,EAAAA,IAACu2B,GAAA,EAAa,EAG5Bv2B,EAAAA,IAACiJ,GAAA,CACC,KAAMmK,EACN,OAAQE,EACR,QAAS+sB,EACT,UAAW3B,CAAA,CAAA,EAGb1+B,EAAAA,IAACiK,GAAA,CACC,KAAMmJ,EACN,OAAQI,EACR,QAAS,IAAMC,EAAsB,EAAK,EAC1C,UAAWirB,CAAA,CAAA,EAGb1+B,EAAAA,IAACiP,GAAA,CACC,KAAMmE,EACN,OAAQoB,EACR,QAAS,IAAMC,EAAqB,EAAK,EACzC,WAAYiqB,CAAA,CAAA,EAGd1+B,EAAAA,IAACuyB,GAAA,CACC,KAAMnf,EACN,OAAQgrB,EACR,QAASkC,EACT,UAAW5B,CAAA,CAAA,EAGb1+B,EAAAA,IAACu4B,GAAA,CACC,OAAQ2F,EACR,QAAS,IAAMC,EAAiB,EAAK,EACrC,QAASH,EACT,UAAW4B,EAAA,CAAA,EAGb5/B,EAAAA,IAACi1B,GAAA,CACC,KAAM7hB,EACN,OAAQkrB,GACR,QAAS,IAAMC,GAA+B,EAAK,EACnD,UAAWG,CAAA,CAAA,EAGb1+B,EAAAA,IAACg2B,GAAA,CACC,KAAM5iB,EACN,OAAQorB,EACR,QAAS4B,GACT,UAAW1B,CAAA,CAAA,EAGb1+B,EAAAA,IAACwQ,GAAA,CACC,KAAM4C,EACN,OAAQsB,EACR,QAAS,IAAMC,EAAyB,EAAK,CAAA,CAAA,CAC/C,EACF,CAEJ,CC/tCA,SAAwB6rB,GAAa,CAAE,OAAA94B,EAAQ,QAAAC,EAAS,QAAA84B,EAAS,KAAAr9B,EAAM,UAAA8F,GAAgC,CACrG,KAAM,CAACG,EAAQC,CAAS,EAAIvK,EAAAA,SAAS,EAAE,EACjC,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAS,EAAE,EAErC,GAAI,CAAC2I,GAAU,CAAC+4B,EAAS,OAAO,KAsBhC,MAAMj/B,GApBqB,IAAM,CAC/B,GAAI,OAAOi/B,EAAQ,MAAS,WAC1B,OAAOA,EAAQ,KAIjB,OADiBA,EAAgB,SAAWA,EAAQ,KAC5C,CACN,IAAK,SACH,OAAO/1B,GACT,IAAK,SACH,OAAO2K,GACT,IAAK,OACH,OAAO/T,EACT,IAAK,aACH,OAAOD,GACT,QACE,OAAOqQ,EAAA,CAEb,GAEa,EAEPgvB,EAAkB,IAAM,CAC5B,MAAMC,EAAS,CACb,MAAO,gCACP,KAAM,4BACN,OAAQ,8BACR,OAAQ,4BAAA,EAEV,OAAOA,EAAOF,EAAQ,KAA4B,GAAKE,EAAO,IAChE,EAEMC,EAAe,IAAM,CACzB,OAAQH,EAAQ,UAAA,CACd,IAAK,MAAO,MAAO,8BACnB,IAAK,SAAU,MAAO,gCACtB,IAAK,OAAQ,MAAO,0BACpB,QAAS,MAAO,2BAAA,CAEpB,EAkBMI,GAhBmB,IAAM,CAC7B,MAAMC,EAAc,WAAWz3B,CAAM,GAAK,EAC1C,GAAIy3B,IAAgB,EAAG,MAAO,CAAE,MAAO,EAAG,MAAO,EAAG,MAAO,CAAA,EAE3D,MAAMC,EAAYN,EAAQ,WACpBO,EAAcF,GAAeL,EAAQ,eAAiB,GACtDQ,EAAcD,EAAcD,EAC5BG,EAAcJ,EAAcE,EAElC,MAAO,CACL,MAAOC,EACP,MAAOD,EACP,MAAOE,CAAA,CAEX,GAEgB,EACVC,EAAW93B,GACf,WAAWA,CAAM,GAAKo3B,EAAQ,YAC9B,WAAWp3B,CAAM,GAAKo3B,EAAQ,YAC9B,WAAWp3B,CAAM,IAAMjG,GAAM,cAAgB,GAEzCg+B,EAAc,SAAY,CAC9B,GAAKD,EAEL,CAAAvgC,EAAW,EAAI,EACf2I,EAAS,EAAE,EAEX,GAAI,CACF,MAAM3F,EAAW,MAAM,MAAM,sBAAuB,CAClD,OAAQ,OACR,QAAS,CACP,eAAgB,kBAAA,EAElB,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,WAAY68B,EAAQ,GACpB,OAAQ,WAAWp3B,CAAM,CAAA,CAC1B,CAAA,CACF,EAED,GAAIzF,EAAS,GACXsF,EAAA,EACAvB,EAAA,EACA2B,EAAU,EAAE,MACP,CACL,MAAM1L,EAAQ,MAAMgG,EAAS,KAAA,EAC7B2F,EAAS3L,EAAM,OAAS,sBAAsB,CAChD,CACF,MAAgB,CACd2L,EAAS,wBAAwB,CACnC,QAAA,CACE3I,EAAW,EAAK,CAClB,EACF,EAEMygC,EAAkB,IAAM,CAC5B,MAAMC,EAAc,KAAK,IAAIl+B,GAAM,cAAgB,EAAGq9B,EAAQ,UAAU,EACxEn3B,EAAUg4B,EAAY,UAAU,CAClC,EAEA,aACG,MAAA,CAAI,UAAU,iFACb,SAAAvhC,EAAAA,KAAC,MAAA,CAAI,UAAU,oEAEb,SAAA,CAAAA,OAAC,MAAA,CAAI,UAAW,oBAAoB2gC,EAAA,CAAiB,kBACnD,SAAA,CAAA3gC,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,oEACb,eAACwB,EAAA,CAAK,UAAU,UAAU,CAAA,CAC5B,SACC,MAAA,CACC,SAAA,CAAAxB,EAAAA,IAAC,KAAA,CAAG,UAAU,oBAAqB,SAAAygC,EAAQ,KAAK,SAC/C,OAAA,CAAK,UAAW,8CAA8CG,EAAA,CAAc,iBAC1E,SAAA,CAAAH,EAAQ,UAAU,YAAA,EAAc,OAAA,CAAA,CACnC,CAAA,CAAA,CACF,CAAA,EACF,EACAzgC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,mDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EACA/I,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAiB,WAAQ,WAAA,CAAY,CAAA,EACpD,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,gBAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAmC,SAAAygC,EAAQ,WAAW,EACrEzgC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,aAAA,CAAW,CAAA,EACpD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCAAoC,SAAA,CAAA0gC,EAAQ,YAAY,GAAA,EAAC,EACxEzgC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,cAAA,CAAY,CAAA,EACrD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kCAAmC,SAAA,CAAA0gC,EAAQ,eAAe,GAAA,EAAC,EAC1EzgC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,YAAA,CAAU,CAAA,EACnD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,MAAC,MAAA,CAAI,UAAU,oCAAqC,SAAAoD,GAAM,cAAgB,EAAE,EAC5EpD,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,cAAA,CAAY,CAAA,CAAA,CACrD,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,mBAAgB,EACjEA,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAAygC,EAAQ,SAAS,IAAI,CAACpmB,EAAS3Y,IAC9B3B,OAAC,MAAA,CAAgB,UAAU,8BACzB,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAW,yCAAyC0gC,EAAA,CAAiB,GAAI,EAC9E1gC,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAyB,SAAAqa,CAAA,CAAQ,CAAA,CAAA,EAFzC3Y,CAGV,CACD,CAAA,CACH,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAA1B,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,sBAEhE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,MAAOqJ,EACP,SAAW7L,GAAM8L,EAAU9L,EAAE,OAAO,KAAK,EACzC,YAAa,QAAQijC,EAAQ,UAAU,UAAUA,EAAQ,UAAU,GACnE,UAAU,iHACV,IAAKA,EAAQ,WACb,IAAK,KAAK,IAAIA,EAAQ,WAAYr9B,GAAM,cAAgB,CAAC,CAAA,CAAA,EAE3DpD,EAAAA,IAAC,SAAA,CACC,QAASqhC,EACT,UAAU,gHACX,SAAA,KAAA,CAAA,CAED,EACF,EACAthC,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAA,OAAC,OAAA,CAAK,SAAA,CAAA,QAAM0gC,EAAQ,WAAW,OAAA,EAAK,SACnC,OAAA,CAAK,SAAA,CAAA,QAAM,KAAK,IAAIA,EAAQ,WAAYr9B,GAAM,cAAgB,CAAC,EAAE,OAAA,CAAA,CAAK,CAAA,CAAA,CACzE,CAAA,EACF,EAGCiG,GAAU,WAAWA,CAAM,EAAI,GAC9BtJ,OAAC,MAAA,CAAI,UAAU,mFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACuhC,GAAA,CAAW,UAAU,wBAAA,CAAyB,EAC/CvhC,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,mBAAA,CAAiB,CAAA,EAC/D,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,eAAY,EACnDD,EAAAA,KAAC,MAAA,CAAI,UAAU,2BAA2B,SAAA,CAAA,IAAE8gC,EAAQ,MAAM,QAAQ,CAAC,EAAE,OAAA,CAAA,CAAK,CAAA,EAC5E,SACC,MAAA,CACC,SAAA,CAAA7gC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,gBAAa,EACpDD,EAAAA,KAAC,MAAA,CAAI,UAAU,2BAA2B,SAAA,CAAA,IAAE8gC,EAAQ,MAAM,QAAQ,CAAC,EAAE,OAAA,CAAA,CAAK,CAAA,EAC5E,EACA9gC,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,eAAY,EACnDD,EAAAA,KAAC,MAAA,CAAI,UAAU,kCAAmC,SAAA,CAAA8gC,EAAQ,MAAM,QAAQ,CAAC,EAAE,OAAA,CAAA,CAAK,CAAA,CAAA,CAClF,CAAA,CAAA,CACF,CAAA,EACF,QAID,MAAA,CAAI,UAAU,uDACb,SAAA9gC,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAACuI,GAAA,CAAY,UAAU,gCAAA,CAAiC,SACvD,MAAA,CACC,SAAA,CAAAvI,EAAAA,IAAC,KAAA,CAAG,UAAU,gCAAgC,SAAA,mBAAgB,EAC9DD,EAAAA,KAAC,IAAA,CAAE,UAAU,+BAA+B,SAAA,CAAA,gCACZ0gC,EAAQ,WAAW,8GAAA,CAAA,CAEnD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAEC7iC,GACCoC,EAAAA,IAAC,MAAA,CAAI,UAAU,iDACb,eAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAC7C,EAIFmC,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sGACX,SAAA,QAAA,CAAA,EAGD3H,EAAAA,IAAC,SAAA,CACC,QAASohC,EACT,SAAU,CAACD,GAAYxgC,EACvB,UAAW,uEACTwgC,GAAY,CAACxgC,EACT,oBAAoB+/B,EAAA,CAAiB,+BACrC,8CACN,GAEC,SAAA//B,EAAU,aAAe,SAAS0I,GAAU,GAAG,OAAA,CAAA,CAClD,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CClRA,SAAwBm4B,GAAoB,CAAE,OAAA95B,EAAQ,QAAAC,EAAS,UAAAuB,GAAuC,CACpG,KAAM,CAAC4R,EAAUC,CAAW,EAAIhc,WAAS,CACvC,MAAO,GACP,YAAa,GACb,SAAU,aACV,aAAc,GACd,WAAY,GACZ,cAAe,IAAA,CAChB,EACK,CAAC0iC,EAAaC,CAAc,EAAI3iC,WAAuB,CAC3D,CACE,OAAQ,GACR,MAAO,kBACP,YAAa,yCACb,kBAAmB,YAAA,CACrB,CACD,EACK,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAS,EAAE,EAErC,GAAI,CAAC2I,EAAQ,OAAO,KAEpB,MAAMuI,EAAa,CACjB,aAAc,OAAQ,QAAS,MAAO,QAAS,UAC/C,OAAQ,aAAc,SAAU,YAAa,SAAU,OAAA,EAGnD0xB,EAAgB,IAAM,CAC1BD,EAAe,CAAC,GAAGD,EAAa,CAC9B,OAAQ,IACR,MAAO,GACP,YAAa,GACb,kBAAmB,YAAA,CACpB,CAAC,CACJ,EAEMG,EAAoBlgC,GAAkB,CACtC+/B,EAAY,OAAS,GACvBC,EAAeD,EAAY,OAAO,CAACvoB,EAAG9b,IAAMA,IAAMsE,CAAK,CAAC,CAE5D,EAEMmgC,EAAmB,CAACngC,EAAeuyB,EAAyBzvB,IAA2B,CAC3F,MAAMs9B,EAAU,CAAC,GAAGL,CAAW,EAC/BK,EAAQpgC,CAAK,EAAI,CAAE,GAAGogC,EAAQpgC,CAAK,EAAG,CAACuyB,CAAK,EAAGzvB,CAAA,EAC/Ck9B,EAAeI,CAAO,CACxB,EAEM9mB,EAAe,MAAOxd,GAAuB,CAGjD,GAFAA,EAAE,eAAA,EAEE,CAACsd,EAAS,OAAS,CAACA,EAAS,aAAe,CAACA,EAAS,aAAc,CACtEvR,EAAS,oCAAoC,EAC7C,MACF,CAEA,GAAI,WAAWuR,EAAS,YAAY,EAAI,IAAM,CAC5CvR,EAAS,oCAAoC,EAC7C,MACF,CAEA3I,EAAW,EAAI,EACf2I,EAAS,EAAE,EAEX,GAAI,CACF,MAAM3F,EAAW,MAAM,MAAM,+BAAgC,CAC3D,OAAQ,OACR,QAAS,CACP,eAAgB,kBAAA,EAElB,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,GAAGkX,EACH,aAAc,WAAWA,EAAS,YAAY,EAC9C,WAAY,WAAWA,EAAS,UAAU,GAAK,GAC/C,cAAe,SAASA,EAAS,aAAa,EAC9C,aAAc2mB,CAAA,CACf,CAAA,CACF,EAED,GAAI79B,EAAS,GACXsF,EAAA,EACAvB,EAAA,EACAoT,EAAY,CACV,MAAO,GACP,YAAa,GACb,SAAU,aACV,aAAc,GACd,WAAY,GACZ,cAAe,IAAA,CAChB,EACD2mB,EAAe,CAAC,CACd,OAAQ,GACR,MAAO,kBACP,YAAa,yCACb,kBAAmB,YAAA,CACpB,CAAC,MACG,CACL,MAAM9jC,EAAQ,MAAMgG,EAAS,KAAA,EAC7B2F,EAAS3L,EAAM,OAAS,0BAA0B,CACpD,CACF,MAAgB,CACd2L,EAAS,wBAAwB,CACnC,QAAA,CACE3I,EAAW,EAAK,CAClB,CACF,EAEA,aACG,MAAA,CAAI,UAAU,iFACb,SAAAb,EAAAA,KAAC,MAAA,CAAI,UAAU,qEAEb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,8DACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,oEACb,eAACqV,GAAA,CAAO,UAAU,UAAU,CAAA,CAC9B,SACC,MAAA,CACC,SAAA,CAAArV,EAAAA,IAAC,KAAA,CAAG,UAAU,oBAAoB,SAAA,yBAAsB,EACxDA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,8BAAA,CAA4B,CAAA,CAAA,CAC3D,CAAA,EACF,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,mDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,CAAA,CACF,CAAA,CACF,EAEAhJ,EAAAA,KAAC,OAAA,CAAK,SAAUib,EAAc,UAAU,gBAEtC,SAAA,CAAAjb,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,kBAAe,SAElE,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,kBAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO8a,EAAS,MAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,MAAOtd,EAAE,OAAO,MAAO,EACnE,YAAY,2BACZ,UAAU,+GACV,SAAQ,EAAA,CAAA,CACV,EACF,SAEC,MAAA,CACC,SAAA,CAAAwC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,gBAEhE,EACAA,EAAAA,IAAC,WAAA,CACC,MAAO8a,EAAS,YAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,YAAatd,EAAE,OAAO,MAAO,EACzE,YAAY,0DACZ,KAAM,EACN,UAAU,+GACV,SAAQ,EAAA,CAAA,CACV,EACF,EAEAuC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,WAEhE,EACAA,EAAAA,IAAC,SAAA,CACC,MAAO8a,EAAS,SAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,SAAUtd,EAAE,OAAO,MAAO,EACtE,UAAU,+GAET,SAAAyS,EAAW,IAAI8xB,GACd/hC,EAAAA,IAAC,UAAiB,MAAO+hC,EAAM,SAAAA,CAAA,EAAlBA,CAAsB,CACpC,CAAA,CAAA,CACH,EACF,SACC,MAAA,CACC,SAAA,CAAA/hC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,kBAEhE,EACAD,EAAAA,KAAC,SAAA,CACC,MAAO+a,EAAS,cAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,cAAetd,EAAE,OAAO,MAAO,EAC3E,UAAU,+GAEV,SAAA,CAAAwC,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,UAAO,EAC1BA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,UAAO,EAC1BA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,UAAO,EAC1BA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,SAAA,CAAO,CAAA,CAAA,CAAA,CAC5B,CAAA,CACF,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,wBAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,MAAO8a,EAAS,aAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,aAActd,EAAE,OAAO,MAAO,EAC1E,YAAY,QACZ,IAAI,OACJ,UAAU,+GACV,SAAQ,EAAA,CAAA,CACV,EACF,SACC,MAAA,CACC,SAAA,CAAAwC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,wBAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,MAAO8a,EAAS,WAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,WAAYtd,EAAE,OAAO,MAAO,EACxE,YAAY,KACZ,IAAI,IACJ,UAAU,8GAAA,CAAA,CACZ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGAuC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,eAAY,EAChED,EAAAA,KAAC,SAAA,CACC,KAAK,SACL,QAAS4hC,EACT,UAAU,iHAEV,SAAA,CAAA3hC,EAAAA,IAACoV,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BpV,EAAAA,IAAC,QAAK,SAAA,UAAA,CAAQ,CAAA,CAAA,CAAA,CAChB,EACF,EAECyhC,EAAY,IAAI,CAACl3B,EAAM7I,IACtB3B,OAAC,MAAA,CAAgB,UAAU,wCACzB,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,4BAA4B,SAAA,CAAA,QAAM2B,EAAQ,CAAA,EAAE,EACzD+/B,EAAY,OAAS,GACpBzhC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAM4hC,EAAiBlgC,CAAK,EACrC,UAAU,kCAEV,SAAA1B,EAAAA,IAACgiC,GAAA,CAAM,UAAU,SAAA,CAAU,CAAA,CAAA,CAC7B,EAEJ,EAEAjiC,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,uBAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,MAAOuK,EAAK,OACZ,SAAW/M,GAAMqkC,EAAiBngC,EAAO,SAAU,SAASlE,EAAE,OAAO,KAAK,GAAK,CAAC,EAChF,UAAU,oHACV,IAAI,GAAA,CAAA,CACN,EACF,SACC,MAAA,CACC,SAAA,CAAAwC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,qBAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOuK,EAAK,kBACZ,SAAW/M,GAAMqkC,EAAiBngC,EAAO,oBAAqBlE,EAAE,OAAO,KAAK,EAC5E,YAAY,aACZ,UAAU,mHAAA,CAAA,CACZ,CAAA,CACF,CAAA,EACF,EAEAuC,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,eAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOuK,EAAK,MACZ,SAAW/M,GAAMqkC,EAAiBngC,EAAO,QAASlE,EAAE,OAAO,KAAK,EAChE,YAAY,eACZ,UAAU,mHAAA,CAAA,CACZ,EACF,SAEC,MAAA,CACC,SAAA,CAAAwC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,qBAEhE,EACAA,EAAAA,IAAC,WAAA,CACC,MAAOuK,EAAK,YACZ,SAAW/M,GAAMqkC,EAAiBngC,EAAO,cAAelE,EAAE,OAAO,KAAK,EACtE,YAAY,qCACZ,KAAM,EACN,UAAU,mHAAA,CAAA,CACZ,CAAA,CACF,CAAA,CAAA,EAjEQkE,CAkEV,CACD,CAAA,EACH,EAEC9D,GACCoC,EAAAA,IAAC,MAAA,CAAI,UAAU,iDACb,eAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAC7C,EAIFmC,EAAAA,KAAC,MAAA,CAAI,UAAU,+CACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS2H,EACT,UAAU,sGACX,SAAA,QAAA,CAAA,EAGD3H,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,SAAUW,EACV,UAAU,sNAET,WAAU,cAAgB,gBAAA,CAAA,CAC7B,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CCzUA,SAAwBshC,GAAkB,CAAE,OAAAv6B,EAAQ,QAAAC,EAAS,KAAAvE,EAAM,UAAA8F,EAAW,SAAAg5B,GAAoC,CAChH,KAAM,CAACC,EAAgBC,CAAiB,EAAIrjC,EAAAA,SAAiB,KAAK,EAC5D,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAS,EAAE,EAC/B,CAAC8L,EAAMC,CAAO,EAAI/L,EAAAA,SAA2C,QAAQ,EAE3E,GAAI,CAAC2I,EAAQ,OAAO,KAEpB,MAAM26B,EAAoB,MAAM,QAAQH,CAAQ,EAAIA,EAAW,CAAA,EACzDI,EAAqBD,EAAkB,KAAKrlB,GAAKA,EAAE,KAAOmlB,CAAc,GAAKE,EAAkB,CAAC,GAAK,KACrGE,EAAwBD,GACzBl/B,GAAM,gBAAkB,KAAOk/B,EAAmB,cAAgB,GACnE,GACEE,EAAgBF,GACjBl/B,GAAM,cAAgB,KAAOk/B,EAAmB,gBAAkB,GACnE,GAEEG,EAAkB,SAAY,CAClC,GAAI,GAACH,GAAsB,CAACC,GAAyB,CAACC,GAEtD,CAAA5hC,EAAW,EAAI,EACf2I,EAAS,EAAE,EAEX,GAAI,CACF,MAAM3F,EAAW,MAAM,MAAM,+BAAgC,CAC3D,OAAQ,OACR,QAAS,CACP,eAAgB,kBAAA,EAElB,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,UAAWu+B,CAAA,CACZ,CAAA,CACF,EAED,GAAIv+B,EAAS,GACXsF,EAAA,EACAvB,EAAA,EACAmD,EAAQ,QAAQ,MACX,CACL,MAAMlN,EAAQ,MAAMgG,EAAS,KAAA,EAC7B2F,EAAS3L,EAAM,OAAS,+BAA+B,CACzD,CACF,MAAgB,CACd2L,EAAS,wBAAwB,CACnC,QAAA,CACE3I,EAAW,EAAK,CAClB,EACF,EAEM8hC,EAAmBC,GAChBA,QACJziC,GAAA,CAAY,UAAU,yBAAyB,EAEhDF,EAAAA,IAAC+I,GAAA,CAAE,UAAU,uBAAA,CAAwB,EAIzC,aACG,MAAA,CAAI,UAAU,iFACb,SAAAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,qEAEb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,6DACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,oEACb,eAAC0K,GAAA,CAAO,UAAU,UAAU,CAAA,CAC9B,SACC,MAAA,CACC,SAAA,CAAA1K,EAAAA,IAAC,KAAA,CAAG,UAAU,oBAAoB,SAAA,2BAAwB,EAC1DA,EAAAA,IAAC,IAAA,CAAE,UAAU,kBAAkB,SAAA,oCAAA,CAAkC,CAAA,CAAA,CACnE,CAAA,EACF,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,mDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,CAAA,CACF,CAAA,CACF,EAEAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,MACZ,SAAA,CAAA8K,IAAS,UACR9K,OAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,uDACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAACuI,GAAA,CAAY,UAAU,gCAAA,CAAiC,SACvD,MAAA,CACC,SAAA,CAAAvI,EAAAA,IAAC,KAAA,CAAG,UAAU,gCAAgC,SAAA,6BAA0B,EACxED,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,mDAAA,CAAiD,EACrDA,EAAAA,IAAC,MAAG,SAAA,2CAAA,CAAyC,EAC7CA,EAAAA,IAAC,MAAG,SAAA,iDAAA,CAA+C,EACnDA,EAAAA,IAAC,MAAG,SAAA,uDAAA,CAAqD,CAAA,CAAA,CAC3D,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACZ,SAAA,CAAAsiC,EAAkB,SAAW,GAC5BriC,MAAC,MAAA,CAAI,UAAU,iHAAiH,SAAA,oDAEhI,EAEDqiC,EAAkB,IAAKO,GAAW,CACjC,MAAMC,EAAaV,IAAmBS,EAAO,GACvCE,GAAqB1/B,GAAM,gBAAkB,IAAMw/B,EAAO,aAEhE,OACE7iC,EAAAA,KAAC,MAAA,CAEC,UAAW,qEACT8iC,EACI,2CACAC,EACE,0CACA,4BACR,GACA,QAAS,IAAMA,GAAqBV,EAAkBQ,EAAO,EAAE,EAE9D,SAAA,CAAAA,EAAO,KAAO,OACb5iC,MAAC,MAAA,CAAI,UAAU,gEAAgE,SAAA,eAE/E,EAGFD,EAAAA,KAAC,MAAA,CAAI,UAAU,MACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAmC,SAAA4iC,EAAO,KAAK,EAC7D5iC,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA8B,WAAO,YAAY,EAC9DD,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACZ,SAAA,CAAA6iC,EAAO,eAAe,QACvB5iC,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAoC,SAAA,QAAA,CAAM,CAAA,EAC5D,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,CAAA,UAC7B6iC,EAAO,YAAY,eAAA,EAAiB,WAAA,CAAA,CAC9C,CAAA,EACF,EAEA7iC,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,YAAS,QACzD,KAAA,CAAG,UAAU,YACX,SAAA,OAAO,QAAQ4iC,EAAO,QAAQ,EAAE,IAAI,CAAC,CAAC5N,EAAK2N,CAAO,IACjD5iC,EAAAA,KAAC,KAAA,CAAa,UAAU,8BACrB,SAAA,CAAA2iC,EAAgBC,CAAkB,QAClC,OAAA,CAAK,UAAW,WAAWA,EAAU,gBAAkB,eAAe,GACpE,SAAA3N,EAAI,QAAQ,WAAY,KAAK,EAAE,QAAQ,QAAa+N,EAAI,YAAA,CAAa,CAAA,CACxE,CAAA,CAAA,EAJO/N,CAKT,CACD,CAAA,CACH,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAh1B,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,aAAU,QAC1D,MAAA,CAAI,UAAU,uBACZ,SAAA4iC,EAAO,UAAU,IAAKxoB,GACrBpa,MAAC,QAAoB,UAAU,sDAC5B,SAAAoa,CAAA,EADQA,CAEX,CACD,CAAA,CACH,CAAA,EACF,EAEAra,EAAAA,KAAC,MAAA,CAAI,UAAU,sDACb,SAAA,CAAAA,OAAC,MAAA,CAAI,SAAA,CAAA,eAAa6iC,EAAO,WAAW,OAAA,EAAK,EACzC7iC,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACgP,GAAA,CAAM,UAAU,SAAA,CAAU,SAC1B,OAAA,CAAK,SAAA,CAAA,kBAAgB4zB,EAAO,aAAa,eAAA,CAAe,CAAA,CAAE,CAAA,CAAA,CAC7D,CAAA,CAAA,CACF,CAAA,EACF,EAEC,CAACE,GACA9iC,EAAAA,IAAC,MAAA,CAAI,UAAU,8CACb,SAAAD,EAAAA,KAAC,IAAA,CAAE,UAAU,uBAAuB,SAAA,CAAA,YACxB6iC,EAAO,aAAa,eAAA,EAAiB,YAAA,CAAA,CACjD,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,EAvEKA,EAAO,EAAA,CA0ElB,CAAC,CAAA,EACH,EAGA7iC,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,cAAW,EAC5DD,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACgP,GAAA,CAAM,UAAU,uBAAA,CAAwB,EACzCjP,EAAAA,KAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,CAAA,eACjBqD,GAAM,gBAAkB,GAAG,eAAA,CAAe,CAAA,CACzD,CAAA,EACF,EACArD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACqb,GAAA,CAAI,UAAU,uBAAA,CAAwB,EACvCtb,EAAAA,KAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,CAAA,gBAChBqD,GAAM,cAAgB,CAAA,CAAA,CACtC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAECxF,GACCoC,EAAAA,IAAC,MAAA,CAAI,UAAU,iDACb,eAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAC7C,EAIFmC,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sGACX,SAAA,QAAA,CAAA,EAGD5H,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM+K,EAAQ,SAAS,EAChC,SAAU,CAACy3B,GAAyB,CAACC,EACrC,UAAU,oNACX,SAAA,CAAA,iBACgBF,GAAoB,IAAA,CAAA,CAAA,CACrC,CAAA,CACF,CAAA,EACF,EAGDz3B,IAAS,WAAay3B,GACrBviC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,4BAAyB,EAElFD,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,4BAA6B,SAAAsiC,EAAmB,KAAK,EACrEviC,EAAAA,KAAC,OAAA,CAAK,UAAU,0BAA2B,SAAA,CAAAuiC,EAAmB,eAAe,aAAA,CAAA,CAAW,CAAA,EAC1F,EACAviC,EAAAA,KAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,CAAA,sBACjBuiC,EAAmB,YAAY,eAAA,CAAe,EACpE,EACAviC,EAAAA,KAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,CAAA,eACxBuiC,EAAmB,WAAW,iBAAA,CAAA,CAC7C,CAAA,EACF,EAEAviC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,qBAAkB,EAC9DD,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAC,EAAAA,IAAC,KAAE,SAAA,6CAAA,CAA2C,EAC9CA,EAAAA,IAAC,KAAE,SAAA,kDAAA,CAAgD,EACnDA,EAAAA,IAAC,KAAE,SAAA,0DAAA,CAAwD,EAC3DA,EAAAA,IAAC,KAAE,SAAA,0CAAA,CAAwC,EAC3CA,EAAAA,IAAC,KAAE,SAAA,mDAAA,CAAiD,CAAA,CAAA,CACtD,CAAA,CAAA,CACF,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM8K,EAAQ,QAAQ,EAC/B,UAAU,sGACX,SAAA,MAAA,CAAA,EAGD9K,EAAAA,IAAC,SAAA,CACC,QAASyiC,EACT,SAAU9hC,EACV,UAAU,wLAET,SAAAA,EAAU,iBAAmB,iBAAiB2hC,EAAmB,cAAc,OAAA,CAAA,CAClF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CCvNA,MAAMU,GAAuBhf,GAC3B,OAAOA,GAAa,WAAcA,IAAyBA,EAEvDif,GAAoB,MAAW9+B,EAAa6f,IAA2C,CAC3F,GAAI,CACF,MAAMpgB,EAAW,MAAM,MAAMO,EAAK,CAAE,YAAa,UAAW,EAC5D,GAAI,CAACP,EAAS,GACZ,MAAM,IAAI,MAAM,8BAA8BA,EAAS,MAAM,EAAE,EAGjE,OADa,MAAMA,EAAS,KAAA,CAE9B,OAAShG,EAAO,CACd,eAAQ,KAAK,oBAAoBuG,CAAG,IAAKvG,aAAiB,MAAQA,EAAM,QAAUA,CAAK,EAChFolC,GAAgBhf,CAAQ,CACjC,CACF,EAEMkf,GAAoB,KAA2B,CACnD,KAAM,CACJ,GAAI,mBACJ,MAAO,uBACP,SAAU,iBACV,aAAc,iBACd,UAAW,UACX,eAAgB,MAChB,aAAc,IACd,aAAc,GACd,eAAgB,GAChB,eAAgB,KAChB,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAU,GAAK,GAAK,GAAI,EAAE,YAAA,EAC5D,WAAY,IAAI,KAAA,EAAO,YAAA,EACvB,WAAY,6DACZ,UAAW,SAAA,CAEf,GAEMC,GACJC,GACmC,CACnC,CACE,GAAI,oBACJ,KAAM,oBACN,YAAa,6DACb,iBAAkB,GAClB,gBAAiB,IACjB,WAAY,SACZ,WAAY,IACZ,WAAY,KACZ,aAAc,KACd,KAAM,OAAO,KAAKA,CAAO,EAAE,CAAC,GAAK,aACjC,MAAO,UACP,SAAU,CAAC,6BAA8B,0BAA2B,eAAe,EACnF,kBAAmB,IACnB,gBAAiB,KAAA,EAEnB,CACE,GAAI,sBACJ,KAAM,sBACN,YAAa,yDACb,iBAAkB,GAClB,gBAAiB,IACjB,WAAY,OACZ,WAAY,IACZ,WAAY,IACZ,aAAc,GACd,KAAM,OAAO,KAAKA,CAAO,EAAE,CAAC,GAAK,SACjC,MAAO,SACP,SAAU,CAAC,uBAAwB,yBAA0B,mBAAmB,EAChF,kBAAmB,GACnB,gBAAiB,KAAA,EAEnB,CACE,GAAI,mBACJ,KAAM,mBACN,YAAa,wDACb,iBAAkB,GAClB,gBAAiB,IACjB,WAAY,MACZ,WAAY,GACZ,WAAY,IACZ,aAAc,IACd,KAAM,OAAO,KAAKA,CAAO,EAAE,CAAC,GAAK,SACjC,MAAO,OACP,SAAU,CAAC,uBAAwB,yBAA0B,eAAe,EAC5E,kBAAmB,IACnB,gBAAiB,MAAA,CAErB,EAEMC,GAAgC,IAAsC,CAC1E,CACE,GAAI,aACJ,WAAY,oBACZ,OAAQ,IACR,WAAY,IACZ,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAU,GAAK,GAAK,GAAI,EAAE,YAAA,EAC5D,cAAe,GACf,OAAQ,QAAA,EAEV,CACE,GAAI,aACJ,WAAY,mBACZ,OAAQ,IACR,WAAY,IACZ,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAU,GAAK,GAAK,GAAI,EAAE,YAAA,EAC5D,cAAe,GACf,OAAQ,cAAA,CAEZ,EAEMC,GAA+B,IAAsC,CACzE,CACE,GAAI,IACJ,WAAY,GACZ,aAAc,qBACd,eAAgB,6DAChB,MAAO,0BACP,YAAa,0FACb,cAAe,IACf,cAAe,MACf,aAAc,IACd,UAAW,GACX,WAAY,GACZ,OAAQ,SACR,SAAU,GACV,YAAa,CACX,CAAE,OAAQ,GAAI,MAAO,YAAa,YAAa,8CAA+C,kBAAmB,UAAW,YAAa,GAAA,EACzI,CAAE,OAAQ,IAAK,MAAO,UAAW,YAAa,wCAAyC,kBAAmB,UAAW,YAAa,EAAA,CAAG,CACvI,EAEF,CACE,GAAI,IACJ,WAAY,GACZ,aAAc,oBACd,eAAgB,oEAChB,MAAO,4BACP,YAAa,wEACb,cAAe,IACf,cAAe,MACf,aAAc,IACd,UAAW,EACX,WAAY,IACZ,OAAQ,SACR,SAAU,GACV,YAAa,CACX,CAAE,OAAQ,IAAK,MAAO,SAAU,YAAa,kCAAmC,kBAAmB,UAAW,YAAa,GAAA,EAC3H,CAAE,OAAQ,IAAK,MAAO,QAAS,YAAa,oCAAqC,kBAAmB,UAAW,YAAa,EAAA,CAAG,CACjI,CAEJ,EAEMC,GAA8B,IAAsC,CACxE,CACE,GAAI,WACJ,KAAM,mBACN,YAAa,2EACb,eAAgB,GAChB,gBAAiB,KACjB,WAAY,IACZ,cAAe,IACf,SAAU,CACR,YAAa,GACb,gBAAiB,GACjB,cAAe,GACf,iBAAkB,GAClB,aAAc,EAAA,EAEhB,UAAW,CAAC,YAAa,UAAW,QAAQ,CAAA,EAE9C,CACE,GAAI,WACJ,KAAM,qBACN,YAAa,qEACb,eAAgB,GAChB,gBAAiB,KACjB,WAAY,IACZ,cAAe,IACf,SAAU,CACR,YAAa,GACb,gBAAiB,GACjB,cAAe,GACf,iBAAkB,GAClB,aAAc,EAAA,EAEhB,UAAW,CAAC,UAAW,QAAQ,CAAA,CAEnC,EAEA,SAAwBC,IAAY,CAClC,KAAM,CAACpwB,EAAUC,CAAW,EAAItU,EAAAA,SAA0B,IAAI,EACxD,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAI,EACrC,CAAC0O,EAAWC,CAAY,EAAI3O,EAAAA,SAAqE,UAAU,EAC3G,CAAC0kC,EAAkBC,CAAmB,EAAI3kC,EAAAA,SAA4B,CAAA,CAAE,EACxE,CAAC4kC,EAAiBC,CAAkB,EAAI7kC,EAAAA,SAA2B,CAAA,CAAE,EACrE,CAAC8kC,EAAgBC,CAAiB,EAAI/kC,EAAAA,SAA0B,CAAA,CAAE,EAClE,CAACglC,EAAgBC,CAAiB,EAAIjlC,EAAAA,SAA+B,CAAA,CAAE,EACvE,CAACklC,EAAiBC,CAAkB,EAAInlC,EAAAA,SAA+B,IAAI,EAE3E,CAAColC,EAAkBC,CAAmB,EAAIrlC,EAAAA,SAAS,EAAK,EACxD,CAACslC,EAAkBC,CAAmB,EAAIvlC,EAAAA,SAAS,EAAK,EACxD,CAACwlC,EAAiBC,CAAkB,EAAIzlC,EAAAA,SAAS,EAAK,EAE5DM,EAAAA,UAAU,IAAM,CACdolC,EAAA,CACF,EAAG,CAAA,CAAE,EAEL,MAAMA,EAAqB,SAAY,CACrC,GAAI,CACF,MAAMrB,EAAuE,CAC3E,WAAA/hC,GACA,OAAAgU,GACA,KAAA/T,EACA,OAAAoJ,GACA,QAAA/I,GACA,OAAA2X,EAAA,EAGI,CACJorB,EACAC,EACAC,GACAC,GACAC,CAAA,EACE,MAAM,QAAQ,IAAI,CACpB7B,GAAkB,gBAAiBC,IAAmB,EACtDD,GAAkB,uBAAwB,CAAE,SAAUE,GAAsBC,CAAO,EAAG,EACtFH,GAAkB,sBAAuB,CAAE,UAAWI,GAAA,EAAiC,EACvFJ,GAAkB,+BAAgC,CAAE,SAAUK,GAAA,EAAgC,EAC9FL,GAAkB,8BAA+B,CAAE,SAAUM,GAAA,EAA+B,CAAA,CAC7F,EAEDlwB,EAAYqxB,GAAa,MAAQA,GAAe,IAAI,EAEpD,MAAMK,GAAmCJ,GAAiB,UAAYxB,GAAsBC,CAAO,GAAG,IAAI,CAAC3C,EAAc/+B,IAAkB,CACzI,MAAMsjC,GAAUvE,EAAQ,UAAYA,EAAQ,SAAWA,EAAQ,MAAQ,SACjEwE,GAAgB7B,EAAQ4B,EAAO,GAAKt6B,GAE1C,MAAO,CACP,GAAI+1B,EAAQ,IAAM,WAAW/+B,CAAK,GAClC,KAAM++B,EAAQ,MAAQ,iBACtB,YAAaA,EAAQ,aAAe,gCACpC,WAAYA,EAAQ,kBAAoBA,EAAQ,gBAAkBA,EAAQ,YAAc,GACxF,eAAgBA,EAAQ,iBAAmBA,EAAQ,gBAAkB,IACrE,UAAYA,EAAQ,YAAcA,EAAQ,WAAa,SACvD,WAAYA,EAAQ,YAAcA,EAAQ,YAAc,IACxD,WAAYA,EAAQ,YAAcA,EAAQ,YAAc,IACxD,eAAgBA,EAAQ,iBAAmBA,EAAQ,gBAAkB,EACrE,iBAAkBA,EAAQ,mBAAqBA,EAAQ,kBAAoB,EAC3E,YAAaA,EAAQ,cAAgBA,EAAQ,aAAeA,EAAQ,KAAO,GAC3E,KAAMwE,GACN,MAAOxE,EAAQ,OAAS,CAAC,OAAQ,QAAS,QAAQ,EAAE/+B,EAAQ,CAAC,EAC7D,SAAU++B,EAAQ,UAAY,CAAC,gBAAiB,eAAe,CAAA,CAEjE,CAAC,EACDqD,EAAkBiB,CAAc,EAEhC,MAAMG,GAAsCN,IAAgB,WAAavB,GAAA,GAAiC,IAAI,CAAC59B,EAAe/D,KAAmB,CAC/I,GAAI+D,EAAS,IAAM,YAAY/D,CAAK,GACpC,UAAW+D,EAAS,YAAcA,EAAS,WAAas/B,EAAe,CAAC,GAAG,IAAM,YACjF,OAAQt/B,EAAS,QAAU,EAC3B,WAAYA,EAAS,YAAc,EACnC,UAAWA,EAAS,YAAcA,EAAS,WAAa,IAAI,KAAA,EAAO,YAAA,EACnE,YAAaA,EAAS,eAAiBA,EAAS,aAAe,EAC/D,OAAQA,EAAS,QAAU,QAAA,EAC3B,EACFi+B,EAAoBwB,CAAe,EAEnC,MAAMC,GAAoCN,IAAgB,UAAYvB,GAAA,GAAgC,IAAI,CAAC8B,EAAc1jC,KAAmB,CAC1I,GAAI0jC,EAAQ,IAAM1jC,EAClB,UAAW0jC,EAAQ,YAAcA,EAAQ,WAAa,EACtD,YAAaA,EAAQ,cAAgBA,EAAQ,aAAe,iBAC5D,cAAeA,EAAQ,gBAAkBA,EAAQ,eAAiB,0DAA0D1jC,CAAK,GACjI,MAAO0jC,EAAQ,OAAS,oBACxB,YAAaA,EAAQ,aAAe,wCACpC,SAAUA,EAAQ,UAAY,SAC9B,YAAaA,EAAQ,eAAiBA,EAAQ,aAAe,IAC7D,eAAgBA,EAAQ,eAAiBA,EAAQ,gBAAkB,KACnE,YAAaA,EAAQ,cAAgBA,EAAQ,aAAe,KAAK,MAAM,KAAK,SAAW,EAAE,EAAI,GAC7F,SAAUA,EAAQ,WAAaA,EAAQ,UAAY,GACnD,UAAWA,EAAQ,YAAcA,EAAQ,WAAa,GACtD,YAAaA,EAAQ,aAAe,CAClC,CAAE,OAAQ,GAAI,MAAO,YAAa,YAAa,yBAA0B,kBAAmB,UAAW,YAAa,EAAA,EACpH,CAAE,OAAQ,IAAK,MAAO,WAAY,YAAa,6BAA8B,kBAAmB,UAAW,YAAa,EAAA,CAAG,EAE7H,SAAU,EAAQA,EAAQ,SAC1B,OAASA,EAAQ,QAAU,QAAA,EAC3B,EACFxB,EAAmBuB,CAAc,EAEjC,MAAME,GAAwCP,GAAiB,UAAYvB,GAAA,GAA+B,IAAI,CAACX,EAAalhC,KAAmB,CAC7I,GAAIkhC,EAAO,IAAM,UAAUlhC,CAAK,GAChC,KAAMkhC,EAAO,MAAQ,gBACrB,YAAaA,EAAO,aAAe,wCACnC,SAAUA,EAAO,UAAY,CAC3B,YAAa,GACb,gBAAiB,GACjB,cAAe,GACf,iBAAkB,GAClB,aAAc,EAAA,EAEhB,eAAgBA,EAAO,gBAAkBA,EAAO,gBAAkB,GAClE,YAAaA,EAAO,iBAAmBA,EAAO,aAAe,IAC7D,WAAYA,EAAO,YAAc,IACjC,UAAWA,EAAO,WAAa,CAAC,YAAa,SAAS,EACtD,aAAcA,EAAO,eAAiBA,EAAO,cAAgB,GAAA,EAC7D,EACFoB,EAAkBqB,CAAc,CAClC,OAASznC,EAAO,CACd,QAAQ,MAAM,mCAAoCA,CAAK,CACzD,QAAA,CACEgD,EAAW,EAAK,CAClB,CACF,EAEM0kC,EAA0C,CAC9C,CACE,GAAI,SACJ,KAAM,gBACN,YAAa,4EACb,WAAY,GACZ,eAAgB,IAChB,UAAW,MACX,WAAY,IACZ,WAAY,IACZ,eAAgB,MAChB,iBAAkB,IAClB,YAAa,KACb,KAAM56B,GACN,MAAO,QACP,SAAU,CAAC,uBAAwB,gBAAiB,gBAAiB,4BAA4B,CAAA,EAEnG,CACE,GAAI,SACJ,KAAM,qBACN,YAAa,+EACb,WAAY,GACZ,eAAgB,IAChB,UAAW,SACX,WAAY,IACZ,WAAY,KACZ,eAAgB,KAChB,iBAAkB,IAClB,YAAa,KACb,KAAMrJ,GACN,MAAO,OACP,SAAU,CAAC,iBAAkB,mBAAoB,uBAAwB,mBAAmB,CAAA,EAE9F,CACE,GAAI,UACJ,KAAM,eACN,YAAa,+EACb,WAAY,IACZ,eAAgB,IAChB,UAAW,OACX,WAAY,IACZ,WAAY,IACZ,eAAgB,KAChB,iBAAkB,GAClB,YAAa,KACb,KAAMgU,GACN,MAAO,SACP,SAAU,CAAC,iBAAkB,0BAA2B,0BAA2B,mBAAmB,CAAA,EAExG,CACE,GAAI,UACJ,KAAM,eACN,YAAa,8DACb,WAAY,GACZ,eAAgB,IAChB,UAAW,SACX,WAAY,IACZ,WAAY,KACZ,eAAgB,KAChB,iBAAkB,GAClB,YAAa,KACb,KAAM/T,EACN,MAAO,SACP,SAAU,CAAC,wBAAyB,iBAAkB,sBAAuB,oBAAoB,CAAA,CACnG,EAGIikC,EAA6C,CACjD,CACE,GAAI,QACJ,KAAM,eACN,SAAU,CACR,YAAa,GACb,gBAAiB,GACjB,cAAe,GACf,iBAAkB,GAClB,aAAc,EAAA,EAEhB,eAAgB,GAChB,YAAa,IACb,WAAY,GACZ,UAAW,CAAC,YAAa,QAAQ,EACjC,aAAc,GAAA,EAEhB,CACE,GAAI,MACJ,KAAM,aACN,SAAU,CACR,YAAa,GACb,gBAAiB,GACjB,cAAe,GACf,iBAAkB,GAClB,aAAc,EAAA,EAEhB,eAAgB,GAChB,YAAa,IACb,WAAY,IACZ,UAAW,CAAC,YAAa,SAAU,UAAW,SAAS,EACvD,aAAc,GAAA,EAEhB,CACE,GAAI,aACJ,KAAM,oBACN,SAAU,CACR,YAAa,GACb,gBAAiB,GACjB,cAAe,GACf,iBAAkB,GAClB,aAAc,EAAA,EAEhB,eAAgB,IAChB,YAAa,KACb,WAAY,IACZ,UAAW,CAAC,YAAa,SAAU,UAAW,UAAW,WAAY,QAAQ,EAC7E,aAAc,IAAA,CAChB,EAoBIC,EAfe,MAAM,KAAK,CAAE,OAAQ,EAAA,EAAM,CAACtsB,EAAG9b,IAAM,CACtD,MAAMmnB,OAAW,KACjB,OAAAA,GAAK,QAAQA,GAAK,QAAA,GAAa,GAAKnnB,EAAE,EAC/B,CACL,KAAMmnB,GAAK,YAAA,EAAc,MAAM,GAAG,EAAE,CAAC,EACrC,YAAa,KAAK,MAAM,KAAK,OAAA,EAAW,GAAK,EAAI,IACjD,eAAgB,KAAK,MAAM,KAAK,OAAA,EAAW,EAAE,EAAI,GACjD,cAAe,KAAK,MAAM,KAAK,OAAA,EAAW,IAAK,EAAI,KACnD,kBAAmB,KAAK,MAAM,KAAK,OAAA,EAAW,GAAI,EAAI,KACtD,mBAAoB,KAAK,MAAM,KAAK,OAAA,EAAW,GAAK,EAAI,GAAA,CAE5D,CAAC,EAMGkhB,EAA0B5B,EAAe,OAAS,EAAIA,EAAiByB,EAEvEI,EAAqBD,EAAwB,OAAO,CAAC5jC,EAAK4+B,IAAY5+B,EAAM4+B,EAAQ,eAAgB,CAAC,EACrGkF,EAAeF,EAAwB,OAAO,CAAC5jC,EAAK4+B,IAAY5+B,EAAM4+B,EAAQ,iBAAkB,CAAC,EACjGmF,EAASH,EAAwB,OACnCA,EAAwB,OAAO,CAAC5jC,EAAK4+B,IAAY5+B,EAAM4+B,EAAQ,YAAa,CAAC,EAAIgF,EAAwB,OACzG,EAEE7E,EAAgBiF,GAAiB,CACrC,OAAQA,EAAA,CACN,IAAK,MAAO,MAAO,8BACnB,IAAK,SAAU,MAAO,gCACtB,IAAK,OAAQ,MAAO,0BACpB,QAAS,MAAO,2BAAA,CAEpB,EAEMnF,EAAmBne,GAAkB,CACzC,MAAMoe,EAAS,CACb,MAAO,gCACP,KAAM,4BACN,OAAQ,8BACR,OAAQ,4BAAA,EAEV,OAAOA,EAAOpe,CAA4B,GAAKoe,EAAO,IACxD,EAEA,OAAIhgC,EAEAX,MAAC,OAAI,UAAU,wCACb,eAAC,MAAA,CAAI,UAAU,oFAAoF,CAAA,CACrG,EAKFD,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,uFACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,0BAA0B,SAAA,aAAU,EAClDA,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,gEAAA,CAEvC,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,0BAA0B,SAAA,uBAAoB,EAC7DD,EAAAA,KAAC,MAAA,CAAI,UAAU,qBACZ,SAAA,CAAA0jC,EAAiB,OAAO,CAAC5hC,EAAKikC,IAAQjkC,EAAMikC,EAAI,OAASA,EAAI,YAAa,CAAC,EAAE,QAAQ,CAAC,EAAE,OAAA,CAAA,CAC3F,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAGC,MAAA,CAAI,UAAU,2BACb,SAAA9lC,EAAAA,IAAC,MAAA,CAAI,UAAU,iBACZ,SAAA,CACC,CAAE,GAAI,WAAY,MAAO,WAAY,KAAM+lC,EAAA,EAC3C,CAAE,GAAI,WAAY,MAAO,kBAAmB,KAAM1kC,EAAA,EAClD,CAAE,GAAI,UAAW,MAAO,kBAAmB,KAAMgU,EAAA,EACjD,CAAE,GAAI,SAAU,MAAO,gBAAiB,KAAM3K,EAAA,EAC9C,CAAE,GAAI,UAAW,MAAO,mBAAoB,KAAMkwB,EAAA,CAAS,EAC3D,IAAKhsB,GAAQ,CACb,MAAMpN,EAAOoN,EAAI,KACjB,OACE7O,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAM2N,EAAakB,EAAI,EAAS,EACzC,UAAW,0FACTnB,IAAcmB,EAAI,GACd,oCACA,4EACN,GAEA,SAAA,CAAA5O,EAAAA,IAACwB,EAAA,CAAK,UAAU,SAAA,CAAU,EAC1BxB,EAAAA,IAAC,OAAA,CAAM,SAAA4O,EAAI,KAAA,CAAM,CAAA,CAAA,EATZA,EAAI,EAAA,CAYf,CAAC,EACH,EACF,EAGCnB,IAAc,YACb1N,OAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAAC07B,GAAA,CACC,MAAM,gBACN,MAAO+H,EAAiB,OAAOzmB,GAAKA,EAAE,SAAW,QAAQ,EAAE,OAAO,SAAA,EAClE,OAAQ,KACR,WAAW,WACX,KAAMhd,EAAAA,IAAC0R,GAAA,CAAK,UAAU,SAAA,CAAU,EAChC,MAAO,CAAA,CAAC,CAAA,EAGV1R,EAAAA,IAAC07B,GAAA,CACC,MAAM,iBACN,MAAO,GAAG+H,EAAiB,OAAO,CAAC5hC,EAAKikC,IAAQjkC,EAAMikC,EAAI,YAAa,CAAC,EAAE,QAAQ,CAAC,CAAC,QACpF,OAAQ,IACR,WAAW,WACX,KAAM9lC,EAAAA,IAAC2B,GAAA,CAAQ,UAAU,SAAA,CAAU,EACnC,MAAO,CAAA,CAAC,CAAA,EAGV3B,EAAAA,IAAC07B,GAAA,CACC,MAAM,kBACN,MAAM,IACN,OAAQ,GACR,WAAW,WACX,KAAM17B,EAAAA,IAAC+iB,GAAA,CAAM,UAAU,SAAA,CAAU,EACjC,MAAO,CAAA,CAAC,CAAA,EAGV/iB,EAAAA,IAAC07B,GAAA,CACC,MAAM,kBACN,MAAM,SACN,OAAQ,EACR,WAAW,WACX,KAAM17B,EAAAA,IAAC0K,GAAA,CAAO,UAAU,SAAA,CAAU,EAClC,MAAO,CAAA,CAAC,CAAA,CACV,EACF,EAGA3K,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,wBAAqB,EAC7EyjC,EAAiB,OAAS,EACzBzjC,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAAyjC,EAAiB,IAAKh+B,GAAa,CAClC,MAAMg7B,EAAUgF,EAAwB,SAAU1iC,GAAE,KAAO0C,EAAS,SAAS,EACvEjE,EAAOi/B,GAAS,MAAQ/uB,GACxBs0B,GAAW,KAAK,MAAM,IAAI,KAAKvgC,EAAS,SAAS,EAAE,QAAA,EAAY,IAAI,OAAO,QAAA,IAAc,IAAO,GAAK,GAAK,GAAG,EAElH,OACE1F,EAAAA,KAAC,MAAA,CAAsB,UAAU,kFAC/B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAW,8BAA8B0gC,EAAgBD,GAAS,OAAS,MAAM,CAAC,0DACrF,SAAAzgC,MAACwB,EAAA,CAAK,UAAU,UAAU,EAC5B,SACC,MAAA,CACC,SAAA,CAAAxB,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA+B,SAAAygC,GAAS,KAAK,EAC3D1gC,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAyB,SAAA,CAAA0F,EAAS,OAAO,cAAA,CAAA,CAAY,CAAA,CAAA,CACpE,CAAA,EACF,EACA1F,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCAAmC,SAAA,CAAA,IAAE0F,EAAS,YAAY,OAAA,EAAK,EAC9E1F,EAAAA,KAAC,MAAA,CAAI,UAAU,wBAAyB,SAAA,CAAAimC,GAAS,YAAA,CAAA,CAAU,CAAA,CAAA,CAC7D,CAAA,EACF,EACAjmC,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,UAAA,CAAQ,SACb,OAAA,CAAQ,SAAA,EAAAyF,EAAS,aAAeA,EAAS,QAAUA,EAAS,WAAa,IAAO,KAAK,QAAQ,CAAC,EAAE,GAAA,CAAA,CAAC,CAAA,EACpG,EACAzF,EAAAA,IAAC,MAAA,CAAI,UAAU,sCACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,2FACV,MAAO,CAAE,MAAO,GAAG,KAAK,IAAI,IAAMyF,EAAS,aAAeA,EAAS,QAAUA,EAAS,WAAa,IAAO,GAAG,CAAC,GAAA,CAAI,CAAA,CACnH,CACH,CAAA,CAAA,CACF,CAAA,CAAA,EA3BQA,EAAS,EA4BnB,CAEJ,CAAC,CAAA,CACH,EAEA1F,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC0R,GAAA,CAAK,UAAU,sCAAA,CAAuC,EACvD1R,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,sBAAmB,EAC5EA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,uDAAoD,EACtFA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM0N,EAAa,UAAU,EACtC,UAAU,+JACX,SAAA,yBAAA,CAAA,CAED,CAAA,CACF,CAAA,EAEJ,EAGA3N,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,qEACb,eAACqB,GAAA,CAAW,UAAU,yBAAyB,CAAA,CACjD,SACC,MAAA,CACC,SAAA,CAAArB,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,kBAAe,EAC3DA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,cAAA,CAAY,CAAA,CAAA,CACnD,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,eAAY,EAC5CD,EAAAA,KAAC,OAAA,CAAK,UAAU,gBAAiB,SAAA,CAAA2lC,EAAmB,eAAA,EAAiB,OAAA,CAAA,CAAK,CAAA,EAC5E,EACA3lC,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,iBAAc,QAC7C,OAAA,CAAK,UAAU,gBAAiB,SAAA2lC,EAAa,gBAAe,CAAE,CAAA,EACjE,EACA5lC,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,UAAO,EACvCD,EAAAA,KAAC,OAAA,CAAK,UAAU,+BAAgC,SAAA,CAAA6lC,EAAO,QAAQ,CAAC,EAAE,GAAA,CAAA,CAAC,CAAA,CAAA,CACrE,CAAA,CAAA,CACF,CAAA,EACF,EAEA7lC,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,oEACb,eAACqV,GAAA,CAAO,UAAU,wBAAwB,CAAA,CAC5C,SACC,MAAA,CACC,SAAA,CAAArV,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,kBAAe,EAC3DA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,iBAAA,CAAe,CAAA,CAAA,CACtD,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,gBAAa,EAC7CA,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAiB,WAAgB,MAAA,CAAO,CAAA,EAC1D,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,gBAAa,EAC7CD,EAAAA,KAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,CAAA,IAAE4jC,EAAgB,OAAO,CAAC9hC,EAAKmb,IAAMnb,EAAMmb,EAAE,eAAgB,CAAC,EAAE,eAAA,CAAe,CAAA,CAAE,CAAA,EACnH,EACAjd,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,eAAY,EAC5CA,EAAAA,IAAC,OAAA,CAAK,UAAU,+BAA+B,SAAA,KAAA,CAAG,CAAA,CAAA,CACpD,CAAA,CAAA,CACF,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,sEACb,eAAC0K,GAAA,CAAO,UAAU,0BAA0B,CAAA,CAC9C,SACC,MAAA,CACC,SAAA,CAAA1K,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,gBAAa,EACzDA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,mBAAA,CAAiB,CAAA,CAAA,CACxD,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,iBAAc,EAC9CA,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,YAAA,CAAU,CAAA,EAC5C,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,eAAY,EAC5CA,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,QAAA,CAAM,CAAA,EACxC,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,SAAM,EACtCA,EAAAA,IAAC,OAAA,CAAK,UAAU,+BAA+B,SAAA,QAAA,CAAM,CAAA,CAAA,CACvD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGDyN,IAAc,YACb1N,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,kBAAe,EAChEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,4DAAA,CAA0D,CAAA,EACzF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,yBAAsB,EAC7DD,EAAAA,KAAC,MAAA,CAAI,UAAU,kCAAmC,SAAA,CAAAqT,GAAU,cAAgB,EAAE,OAAA,CAAA,CAAK,CAAA,CAAA,CACrF,CAAA,EACF,EAEArT,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACZ,SAAA,CAAA8jC,EAAe,SAAW,GACzB7jC,MAAC,MAAA,CAAI,UAAU,iHAAiH,SAAA,yDAEhI,EAEDylC,EAAwB,IAAKhF,GAAY,CACxC,MAAMj/B,EAAOi/B,EAAQ,KACrB,OACE1gC,EAAAA,KAAC,MAAA,CAAqB,UAAU,mHAC9B,SAAA,CAAAA,EAAAA,KAAC,OAAI,UAAW,oBAAoB2gC,EAAgBD,EAAQ,KAAK,CAAC,kBAChE,SAAA,CAAA1gC,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,oEACb,eAACwB,EAAA,CAAK,UAAU,UAAU,CAAA,CAC5B,SACC,MAAA,CACC,SAAA,CAAAxB,EAAAA,IAAC,KAAA,CAAG,UAAU,oBAAqB,SAAAygC,EAAQ,KAAK,EAChD1gC,EAAAA,KAAC,QAAK,UAAW,8CAA8C6gC,EAAaH,EAAQ,SAAS,CAAC,iBAC3F,SAAA,CAAAA,EAAQ,UAAU,YAAA,EAAc,OAAA,CAAA,CACnC,CAAA,CAAA,CACF,CAAA,EACF,EACA1gC,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qBAAsB,SAAA,CAAA0gC,EAAQ,YAAY,QAAQ,CAAC,EAAE,GAAA,EAAC,EACrEzgC,EAAAA,IAAC,MAAA,CAAI,UAAU,qBAAqB,SAAA,cAAA,CAAY,CAAA,CAAA,CAClD,CAAA,EACF,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAiB,WAAQ,WAAA,CAAY,CAAA,EACpD,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,MACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,cAAW,EAClDD,EAAAA,KAAC,MAAA,CAAI,UAAU,gBAAiB,SAAA,CAAA0gC,EAAQ,WAAW,OAAA,CAAA,CAAK,CAAA,EAC1D,SACC,MAAA,CACC,SAAA,CAAAzgC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,aAAU,EACjDD,EAAAA,KAAC,MAAA,CAAI,UAAU,gBAAiB,SAAA,CAAA0gC,EAAQ,eAAe,GAAA,CAAA,CAAC,CAAA,EAC1D,SACC,MAAA,CACC,SAAA,CAAAzgC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,cAAW,EAClDD,EAAAA,KAAC,MAAA,CAAI,UAAU,gBAAiB,SAAA,CAAA0gC,EAAQ,WAAW,OAAA,CAAA,CAAK,CAAA,EAC1D,SACC,MAAA,CACC,SAAA,CAAAzgC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,eAAY,EACnDA,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAiB,WAAQ,gBAAA,CAAiB,CAAA,CAAA,CAC3D,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,6BAA6B,SAAA,WAAQ,EACpDA,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAAygC,EAAQ,SAAS,IAAI,CAACpmB,EAAS3Y,KAC9B3B,OAAC,MAAA,CAAgB,UAAU,8BACzB,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,wBAAA,CAAyB,EAChDF,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAyB,SAAAqa,CAAA,CAAQ,CAAA,CAAA,EAFzC3Y,EAGV,CACD,CAAA,CACH,CAAA,EACF,EAEA3B,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,kBAAe,EAC/CD,EAAAA,KAAC,OAAA,CAAK,UAAU,gBAAiB,SAAA,CAAA0gC,EAAQ,eAAe,eAAA,EAAiB,OAAA,CAAA,CAAK,CAAA,EAChF,EACAzgC,EAAAA,IAAC,MAAA,CAAI,UAAU,2CACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAW,oBAAoB0gC,EAAgBD,EAAQ,KAAK,CAAC,gDAC7D,MAAO,CAAE,MAAO,GAAG,KAAK,IAAI,IAAMA,EAAQ,eAAiBA,EAAQ,WAAc,GAAG,CAAC,GAAA,CAAI,CAAA,CAC1F,CACH,CAAA,EACF,EAEA1gC,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACbmkC,EAAmBzD,CAAO,EAC1B2D,EAAoB,EAAI,CAC1B,EACA,UAAW,2BAA2B1D,EAAgBD,EAAQ,KAAK,CAAC,uIAEpE,SAAA,CAAAzgC,EAAAA,IAAC0R,GAAA,CAAK,UAAU,SAAA,CAAU,SACzB,OAAA,CAAK,SAAA,CAAA,YAAU+uB,EAAQ,IAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAC/B,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,EA/EQA,EAAQ,EAgFlB,CAEJ,CAAC,CAAA,EACH,EAGA1gC,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACuhC,GAAA,CAAW,UAAU,uBAAA,CAAwB,EAC9CvhC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,oBAAA,CAAkB,CAAA,EACxE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,gBAAa,EAC7EA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,YAAY,OACZ,UAAU,8GAAA,CAAA,CACZ,EACF,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,UAAO,QACtE,SAAA,CAAO,UAAU,+GACf,SAAAylC,EAAwB,IAAIhF,GAC3BzgC,EAAAA,IAAC,SAAA,CAAwB,MAAOygC,EAAQ,GAAK,SAAAA,EAAQ,MAAxCA,EAAQ,EAAqC,CAC3D,CAAA,CACH,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAAzgC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,oBAAiB,EACjFA,EAAAA,IAAC,MAAA,CAAI,UAAU,sFAAsF,SAAA,WAAA,CAErG,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,eAAY,EAC5EA,EAAAA,IAAC,MAAA,CAAI,UAAU,mFAAmF,SAAA,YAAA,CAElG,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGDyN,IAAc,WACb1N,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,kBAAe,EAChEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,yDAAA,CAAuD,CAAA,EACtF,EACAD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMukC,EAAoB,EAAI,EACvC,UAAU,2LAEV,SAAA,CAAAtkC,EAAAA,IAACoV,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BpV,EAAAA,IAAC,QAAK,SAAA,gBAAA,CAAc,CAAA,CAAA,CAAA,CACtB,EACF,QAGC,MAAA,CAAI,UAAU,YACZ,SAAA2jC,EAAgB,OAAO3mB,GAAKA,EAAE,QAAQ,EAAE,IAAKooB,GAC5CrlC,EAAAA,KAAC,MAAA,CAAqB,UAAU,uEAC9B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0EACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACsB,EAAA,CAAK,UAAU,yBAAA,CAA0B,EAC1CtB,EAAAA,IAAC,OAAA,CAAK,UAAU,sCAAsC,SAAA,kBAAA,CAAgB,CAAA,EACxE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,uCAAwC,SAAAolC,EAAQ,MAAM,EACpEplC,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAsB,WAAQ,YAAY,EACvDD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,IAAKolC,EAAQ,cACb,IAAKA,EAAQ,YACb,UAAU,sBAAA,CAAA,EAEZplC,EAAAA,IAAC,OAAA,CAAK,UAAU,4BAA6B,WAAQ,WAAA,CAAY,CAAA,EACnE,EACAA,EAAAA,IAAC,OAAA,CAAK,UAAU,uEACb,WAAQ,QAAA,CACX,CAAA,CAAA,CACF,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCAAmC,SAAA,CAAA,IAC9CqlC,EAAQ,eAAe,eAAA,CAAe,EAC1C,EACArlC,EAAAA,KAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,CAAA,OAChCqlC,EAAQ,YAAY,eAAA,EAAiB,OAAA,CAAA,CAC5C,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAEArlC,EAAAA,KAAC,MAAA,CAAI,UAAU,MACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAmC,SAAAolC,EAAQ,YAAY,EACtEplC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,SAAA,CAAO,CAAA,EAChD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAmC,SAAAolC,EAAQ,SAAS,EACnEplC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,WAAA,CAAS,CAAA,EAClD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACV,SAAA,EAAAqlC,EAAQ,eAAiBA,EAAQ,YAAe,KAAK,QAAQ,CAAC,EAAE,GAAA,EACrE,EACAplC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,QAAA,CAAM,CAAA,CAAA,CAC/C,CAAA,EACF,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CAEf,EACA,UAAU,+JACX,SAAA,mBAAA,CAAA,CAED,EACF,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,2CACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,4FACV,MAAO,CAAE,MAAO,GAAG,KAAK,IAAI,IAAMolC,EAAQ,eAAiBA,EAAQ,YAAe,GAAG,CAAC,GAAA,CAAI,CAAA,EAE9F,QAEC,MAAA,CAAI,UAAU,wCACZ,SAAAA,EAAQ,YAAY,MAAM,EAAG,CAAC,EAAE,IAAI,CAAC76B,EAAM7I,IAC1C3B,EAAAA,KAAC,MAAA,CAAgB,UAAU,wCACzB,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uCAAuC,SAAA,CAAA,IAAEwK,EAAK,MAAA,EAAO,EACpEvK,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAoC,WAAK,MAAM,EAC7DA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA8B,WAAK,YAAY,EAC5DD,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,gBAAiB,SAAA,CAAAwK,EAAK,YAAY,UAAA,EAAQ,EAC1DvK,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAiB,WAAK,iBAAA,CAAkB,CAAA,CAAA,CAC1D,CAAA,CAAA,EAPQ0B,CAQV,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAAA,EAnFQ0jC,EAAQ,EAoFlB,CACD,EACH,EAGAplC,EAAAA,IAAC,OAAI,UAAU,wCACZ,WAAgB,OAAOgd,GAAK,CAACA,EAAE,QAAQ,EAAE,IAAKooB,GAC7CplC,EAAAA,IAAC,MAAA,CAAqB,UAAU,mHAC9B,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,MACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,IAAKolC,EAAQ,cACb,IAAKA,EAAQ,YACb,UAAU,wBAAA,CAAA,SAEX,MAAA,CACC,SAAA,CAAAplC,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA+B,SAAAolC,EAAQ,YAAY,EACjEplC,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAyB,WAAQ,QAAA,CAAS,CAAA,CAAA,CAC5D,CAAA,EACF,EAEAA,EAAAA,IAAC,KAAA,CAAG,UAAU,uCAAwC,WAAQ,MAAM,EACpEA,EAAAA,IAAC,IAAA,CAAE,UAAU,kCAAmC,WAAQ,YAAY,EAEpED,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,mBAAgB,EAChDD,EAAAA,KAAC,OAAA,CAAK,UAAU,cAAc,SAAA,CAAA,IAC1BqlC,EAAQ,eAAe,eAAA,EAAiB,OAAKA,EAAQ,YAAY,eAAA,CAAe,CAAA,CACpF,CAAA,EACF,EACAplC,EAAAA,IAAC,MAAA,CAAI,UAAU,sCACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,4FACV,MAAO,CAAE,MAAO,GAAG,KAAK,IAAI,IAAMolC,EAAQ,eAAiBA,EAAQ,YAAe,GAAG,CAAC,GAAA,CAAI,CAAA,EAE9F,EACArlC,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAA,OAAC,OAAA,CAAM,SAAA,CAAAqlC,EAAQ,YAAY,UAAA,EAAQ,SAClC,OAAA,CAAM,SAAA,CAAAA,EAAQ,SAAS,YAAA,CAAA,CAAU,CAAA,CAAA,CACpC,CAAA,EACF,EAEAplC,EAAAA,IAAC,SAAA,CAAO,UAAU,2KAA2K,SAAA,cAAA,CAE7L,CAAA,CAAA,CACF,CAAA,EAvCQolC,EAAQ,EAwClB,CACD,CAAA,CACH,CAAA,EACF,EAGD33B,IAAc,UACb1N,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,gBAAa,EACnEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,0EAAA,CAAwE,CAAA,EACvG,QAEC,MAAA,CAAI,UAAU,oFACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAACuI,GAAA,CAAY,UAAU,8BAAA,CAA+B,SACrD,MAAA,CACC,SAAA,CAAAvI,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,6BAA0B,EAC7ED,EAAAA,KAAC,KAAA,CAAG,UAAU,oCACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,iEAAA,CAA+D,EACnEA,EAAAA,IAAC,MAAG,SAAA,yDAAA,CAAuD,EAC3DA,EAAAA,IAAC,MAAG,SAAA,qDAAA,CAAmD,EACvDA,EAAAA,IAAC,MAAG,SAAA,8DAAA,CAA4D,CAAA,CAAA,CAClE,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,wCACZ,SAAAulC,EAAqB,IAAK3C,GACzB7iC,EAAAA,KAAC,MAAA,CAAoB,UAAW,0DAC9B6iC,EAAO,KAAO,MAAQ,uCAAyC,iBACjE,GACG,SAAA,CAAAA,EAAO,KAAO,OACb5iC,MAAC,MAAA,CAAI,UAAU,8DAA8D,SAAA,eAE7E,EAGFD,EAAAA,KAAC,MAAA,CAAI,UAAU,MACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,uCAAwC,SAAA4iC,EAAO,KAAK,EAClE7iC,EAAAA,KAAC,MAAA,CAAI,UAAU,mCAAmC,SAAA,CAAA,IAC9C6iC,EAAO,eACT5iC,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAoC,SAAA,QAAA,CAAM,CAAA,EAC5D,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,CAAA,UAC7B6iC,EAAO,YAAY,eAAA,EAAiB,WAAA,CAAA,CAC9C,CAAA,EACF,EAEA7iC,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,qBAAkB,QAClE,KAAA,CAAG,UAAU,YACX,SAAA,OAAO,QAAQ4iC,EAAO,QAAQ,EAAE,IAAI,CAAC,CAAC5N,EAAK2N,CAAO,IACjD5iC,EAAAA,KAAC,KAAA,CAAa,UAAU,8BACrB,SAAA,CAAA4iC,EACC3iC,EAAAA,IAACE,IAAY,UAAU,wBAAA,CAAyB,EAEhDF,EAAAA,IAACE,GAAA,CAAY,UAAU,uBAAA,CAAwB,QAEhD,OAAA,CAAK,UAAW,WAAWyiC,EAAU,gBAAkB,eAAe,GACpE,SAAA3N,EAAI,QAAQ,WAAY,KAAK,EAAE,QAAQ,SAAa+N,GAAI,YAAA,CAAa,CAAA,CACxE,CAAA,CAAA,EARO/N,CAST,CACD,CAAA,CACH,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAh1B,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,aAAU,QAC1D,MAAA,CAAI,UAAU,uBACZ,SAAA4iC,EAAO,UAAU,IAAKxoB,GACrBpa,MAAC,QAAoB,UAAU,sDAC5B,SAAAoa,CAAA,EADQA,CAEX,CACD,CAAA,CACH,CAAA,EACF,EAEAra,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAA,OAAC,MAAA,CAAI,SAAA,CAAA,gBAAc6iC,EAAO,UAAA,EAAW,SACpC,MAAA,CAAI,SAAA,CAAA,kBAAgBA,EAAO,aAAa,eAAA,CAAe,CAAA,CAAE,CAAA,CAAA,CAC5D,CAAA,EACF,EAEA7iC,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMykC,EAAmB,EAAI,EACtC,UAAW,uEACT5B,EAAO,KAAO,MACV,2CACA,6CACN,GACD,SAAA,CAAA,OACMA,EAAO,IAAA,CAAA,CAAA,CACd,CAAA,CACF,CAAA,CAAA,EAnEQA,EAAO,EAoEjB,CACD,EACH,EAEA7iC,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,gBAAa,EACtED,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAC,EAAAA,IAAC0K,GAAA,CAAO,UAAU,sCAAA,CAAuC,EACzD1K,EAAAA,IAAC,KAAE,SAAA,wCAAA,CAAsC,CAAA,CAAA,CAC3C,CAAA,CAAA,CACF,CAAA,EACF,EAGDyN,IAAc,WACb1N,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,mBAAgB,EACtEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,8DAAA,CAA4D,CAAA,EAC3F,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAAC07B,GAAA,CACC,MAAM,qBACN,MAAO,GAAGgK,EAAmB,eAAA,CAAgB,QAC7C,OAAQ,KACR,WAAW,WACX,KAAM1lC,EAAAA,IAAC0R,GAAA,CAAK,UAAU,SAAA,CAAU,EAChC,MAAO8zB,EAAa,MAAM,EAAE,EAAE,IAAInJ,IAAM,CAAE,KAAMA,EAAE,KAAM,MAAOA,EAAE,aAAc,CAAA,CAAA,EAGjFr8B,EAAAA,IAAC07B,GAAA,CACC,MAAM,kBACN,MAAOiI,EAAgB,OAAO,SAAA,EAC9B,OAAQ,KACR,WAAW,WACX,KAAM3jC,EAAAA,IAACqV,GAAA,CAAO,UAAU,SAAA,CAAU,EAClC,MAAOmwB,EAAa,MAAM,EAAE,EAAE,IAAInJ,IAAM,CAAE,KAAMA,EAAE,KAAM,MAAOA,EAAE,gBAAiB,CAAA,CAAA,EAGpFr8B,EAAAA,IAAC07B,GAAA,CACC,MAAM,iBACN,MAAO,IAAIiI,EAAgB,OAAO,CAAC9hC,EAAKmb,IAAMnb,EAAMmb,EAAE,eAAgB,CAAC,EAAE,gBAAgB,GACzF,OAAQ,KACR,WAAW,WACX,KAAMhd,EAAAA,IAAC+O,GAAA,CAAW,UAAU,SAAA,CAAU,EACtC,MAAOy2B,EAAa,MAAM,EAAE,EAAE,IAAInJ,IAAM,CAAE,KAAMA,EAAE,KAAM,MAAOA,EAAE,eAAgB,CAAA,CAAA,EAGnFr8B,EAAAA,IAAC07B,GAAA,CACC,MAAM,kBACN,MAAM,UACN,OAAQ,IACR,WAAW,WACX,KAAM17B,EAAAA,IAAC0K,GAAA,CAAO,UAAU,SAAA,CAAU,EAClC,MAAO86B,EAAa,MAAM,EAAE,EAAE,IAAInJ,IAAM,CAAE,KAAMA,EAAE,KAAM,MAAOA,EAAE,mBAAoB,CAAA,CAAA,CACvF,EACF,EAEAt8B,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,gBAAa,EACtEA,EAAAA,IAACg7B,GAAA,CACC,KAAMwK,EAAa,IAAInJ,IAAM,CAC3B,KAAMA,EAAE,KACR,MAAOA,EAAE,mBACT,UAAWA,EAAE,aAAA,EACb,EACF,OAAQ,IACR,WAAW,QACX,aAAa,YACb,aAAa,UACb,eAAe,SAAA,CAAA,EAEjBt8B,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,mCAAA,CAAoC,EACnDA,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,qBAAA,CAAmB,CAAA,EACrD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAA,CAAmC,EAClDA,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,gBAAA,CAAc,CAAA,CAAA,CAChD,CAAA,CAAA,CACF,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,qBAAkB,EAC3EA,EAAAA,IAAC06B,GAAA,CACC,KAAM,CACJ,CAAE,KAAM,kBAAmB,MAAO,GAAI,MAAO,SAAA,EAC7C,CAAE,KAAM,kBAAmB,MAAO,GAAI,MAAO,SAAA,EAC7C,CAAE,KAAM,kBAAmB,MAAO,GAAI,MAAO,SAAA,EAC7C,CAAE,KAAM,uBAAwB,MAAO,GAAI,MAAO,SAAA,CAAU,EAE9D,OAAQ,GAAA,CAAA,CACV,CAAA,CACF,CAAA,EACF,EAEA36B,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,wCAAqC,EAC9FD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,mFACb,eAACqB,GAAA,CAAW,UAAU,yBAAyB,CAAA,CACjD,SACC,MAAA,CACC,SAAA,CAAArB,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,4BAAyB,EACrEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,8GAAA,CAA4G,CAAA,CAAA,CACnJ,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,kFACb,eAACqV,GAAA,CAAO,UAAU,wBAAwB,CAAA,CAC5C,SACC,MAAA,CACC,SAAA,CAAArV,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,4BAAyB,EACrEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,+GAAA,CAA6G,CAAA,CAAA,CACpJ,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,oFACb,eAAC0K,GAAA,CAAO,UAAU,0BAA0B,CAAA,CAC9C,SACC,MAAA,CACC,SAAA,CAAA1K,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,6BAA0B,EACtEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,mGAAA,CAAiG,CAAA,CAAA,CACxI,CAAA,CAAA,CACF,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,oFACb,eAACqI,GAAA,CAAM,UAAU,0BAA0B,CAAA,CAC7C,SACC,MAAA,CACC,SAAA,CAAArI,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,kBAAe,EAC3DA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,8FAAA,CAA4F,CAAA,CAAA,CACnI,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,iFACb,eAACsZ,GAAA,CAAO,UAAU,uBAAuB,CAAA,CAC3C,SACC,MAAA,CACC,SAAA,CAAAtZ,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,kBAAe,EAC3DA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,kHAAA,CAAgH,CAAA,CAAA,CACvJ,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,oFACb,eAACimC,GAAA,CAAU,UAAU,0BAA0B,CAAA,CACjD,SACC,MAAA,CACC,SAAA,CAAAjmC,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,wBAAqB,EACjEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,2GAAA,CAAyG,CAAA,CAAA,CAChJ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAIFA,EAAAA,IAACwgC,GAAA,CACC,OAAQ2D,EACR,QAAS,IAAMC,EAAoB,EAAK,EACxC,QAASH,EACT,KAAM7wB,EACN,UAAWqxB,CAAA,CAAA,EAGbzkC,EAAAA,IAACwhC,GAAA,CACC,OAAQ6C,EACR,QAAS,IAAMC,EAAoB,EAAK,EACxC,KAAMlxB,EACN,UAAWqxB,CAAA,CAAA,EAGbzkC,EAAAA,IAACiiC,GAAA,CACC,OAAQsC,EACR,QAAS,IAAMC,EAAmB,EAAK,EACvC,KAAMpxB,EACN,UAAWqxB,EACX,SAAUV,CAAA,CAAA,CACZ,EACF,CAEJ,CCv3CA,SAAwBmC,GAAc,CAAE,KAAA9iC,EAAM,OAAAsE,EAAQ,QAAAC,EAAS,UAAAuB,GAAiC,CAC9F,KAAM,CAACi9B,EAAcC,CAAe,EAAIrnC,EAAAA,SAAS,EAAE,EAC7C,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAwB,IAAI,EAChD,CAACC,EAAQC,CAAS,EAAIF,EAAAA,SAAS,EAAK,EAE1C,GAAI,CAAC2I,GAAU,CAACtE,EAAM,OAAO,KAE7B,MAAMijC,EAAmB,SAAY,CACnC,GAAI,CAACF,EAAa,OAAQ,CACxB58B,EAAS,8BAA8B,EACvC,MACF,CAEA3I,EAAW,EAAI,EACf2I,EAAS,IAAI,EAEb,GAAI,CACF,MAAM3F,EAAW,MAAM,MAAM,8BAA+B,CAC1D,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CAAE,cAAeuiC,EAAa,cAAe,CAAA,CACnE,EAED,GAAIviC,EAAS,GAAI,CACf,MAAMmN,EAAS,MAAMnN,EAAS,KAAA,EAC9BsF,EAAA,EACAvB,EAAA,EACA2+B,EAAwBv1B,EAAO,eAAe,CAChD,KAAO,CACL,MAAMlH,EAAY,MAAMjG,EAAS,KAAA,EACjC2F,EAASM,EAAU,OAAS,4BAA4B,CAC1D,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,EAClD2L,EAAS,wBAAwB,CACnC,QAAA,CACE3I,EAAW,EAAK,CAClB,CACF,EAEM2lC,EAAmB,SAAY,CACnC,MAAMC,EAAe,6BAA6BpjC,EAAK,aAAa,GACpE,MAAM,UAAU,UAAU,UAAUojC,CAAY,EAChDvnC,EAAU,EAAI,EACd,WAAW,IAAMA,EAAU,EAAK,EAAG,GAAI,CACzC,EAEMqnC,EAA2BG,GAAmB,CAClD,MAAMv+B,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAY,gGACzBA,EAAa,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAOeu+B,CAAM;AAAA;AAAA;AAAA,MAI9C,SAAS,KAAK,YAAYv+B,CAAY,EACtC,WAAW,IAAM,CACX,SAAS,KAAK,SAASA,CAAY,GACrC,SAAS,KAAK,YAAYA,CAAY,CAE1C,EAAG,GAAI,CACT,EAEMs+B,EAAe,6BAA6BpjC,EAAK,aAAa,GAEpE,aACG,MAAA,CAAI,UAAU,iFACb,SAAArD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACgP,GAAA,CAAM,UAAU,yBAAA,CAA0B,SAC1C,MAAA,CACC,SAAA,CAAAhP,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,mBAAgB,EAChEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,kCAAA,CAAgC,CAAA,CAAA,CACvE,CAAA,EACF,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,gBAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uFACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,6CAA6C,SAAA,qBAAkB,EAC7ED,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,4EACb,SAAAoD,EAAK,cACR,EACApD,EAAAA,IAAC,SAAA,CACC,QAASumC,EACT,UAAU,gFAET,SAAAvnC,QAAUgK,GAAA,CAAM,UAAU,UAAU,EAAKhJ,EAAAA,IAACG,GAAA,CAAK,UAAU,SAAA,CAAU,CAAA,CAAA,CACtE,EACF,EACAH,EAAAA,IAAC,IAAA,CAAE,UAAU,sCAAsC,SAAA,iDAEnD,EACAA,EAAAA,IAAC,OAAI,UAAU,iCACb,eAAC,IAAA,CAAE,UAAU,kCAAmC,SAAAwmC,CAAA,CAAa,CAAA,CAC/D,CAAA,CAAA,CACF,CAAA,EACF,EAGAzmC,EAAAA,KAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,eAAY,EAC3DD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,iFACb,eAACgP,GAAA,CAAM,UAAU,wBAAwB,CAAA,CAC3C,EACAhP,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,QAAK,EACpDA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,2BAAA,CAAyB,CAAA,EAChE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,iFACb,eAACyR,GAAA,CAAK,UAAU,wBAAwB,CAAA,CAC1C,EACAzR,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,YAAS,EACxDA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,gCAAA,CAA8B,CAAA,EACrE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,iFACb,eAACyR,GAAA,CAAK,UAAU,wBAAwB,CAAA,CAC1C,EACAzR,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,YAAS,EACxDA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,kCAAA,CAAgC,CAAA,CAAA,CACvE,CAAA,CAAA,CACF,CAAA,EACF,EAGC,CAACoD,EAAK,aACLrD,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,wBAAqB,EACpED,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOmmC,EACP,SAAW3oC,GAAM4oC,EAAgB5oC,EAAE,OAAO,MAAM,aAAa,EAC7D,YAAY,sBACZ,UAAU,2HACV,UAAW,CAAA,CAAA,EAGZI,GACCoC,EAAAA,IAAC,MAAA,CAAI,UAAU,iDACb,eAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAC7C,EAGFoC,EAAAA,IAAC,SAAA,CACC,QAASqmC,EACT,SAAU,CAACF,EAAa,KAAA,GAAUxlC,EAClC,UAAU,qQAET,WACCX,MAAC,MAAA,CAAI,UAAU,8EAAA,CAA+E,EAE9FD,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAACyR,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BzR,EAAAA,IAAC,QAAK,SAAA,8BAAA,CAA4B,CAAA,CAAA,CACpC,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,EACF,EAIDoD,EAAK,aACJpD,EAAAA,IAAC,MAAA,CAAI,UAAU,sDACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACgJ,GAAA,CAAM,UAAU,wBAAA,CAAyB,SACzC,MAAA,CACC,SAAA,CAAAhJ,EAAAA,IAAC,KAAA,CAAG,UAAU,6BAA6B,SAAA,mBAAgB,EAC3DD,EAAAA,KAAC,IAAA,CAAE,UAAU,yBAAyB,SAAA,CAAA,0BAAwBqD,EAAK,WAAA,CAAA,CAAY,CAAA,CAAA,CACjF,CAAA,CAAA,CACF,CAAA,CACF,EAIFrD,EAAAA,KAAC,MAAA,CAAI,UAAU,yFACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,oBAAiB,EAClED,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,qCAAqC,SAAA,MAAG,EACvDA,EAAAA,IAAC,MAAA,CAAI,UAAU,0BAA0B,SAAA,qBAAA,CAAmB,CAAA,EAC9D,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,qCAAqC,SAAA,IAAC,EACrDA,EAAAA,IAAC,MAAA,CAAI,UAAU,0BAA0B,SAAA,uBAAA,CAAqB,CAAA,CAAA,CAChE,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CCpNA,SAAwB0mC,GAAoB,CAC1C,KAAAtjC,EACA,cAAAujC,EACA,UAAAC,EACA,OAAAl/B,EACA,QAAAC,EACA,UAAAuB,CACF,EAA6B,CAC3B,KAAM,CAAC29B,EAAgBC,CAAiB,EAAI/nC,EAAAA,SAAyB,KAAK,EACpE,CAACgoC,EAAgBC,CAAiB,EAAIjoC,EAAAA,SAAS,EAAE,EACjD,CAACkoC,EAAiBC,CAAkB,EAAInoC,EAAAA,SAAS,EAAE,EACnD,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAwB,IAAI,EAEtD,GAAI,CAAC2I,GAAU,CAACtE,EAAM,OAAO,KAE7B,MAAM4X,EAAe,SAAY,CAC/B,GAAI,CAAC+rB,EAAe,OAAQ,CAC1Bx9B,EAAS,qCAAqC,EAC9C,MACF,CAEA,GAAIs9B,IAAmB,OAAS,CAACM,EAAWJ,CAAc,EAAG,CAC3Dx9B,EAAS,4BAA4B,EACrC,MACF,CAEA3I,EAAW,EAAI,EACf2I,EAAS,IAAI,EAEb,GAAI,CACF,MAAM3F,EAAW,MAAM,MAAM,0BAA0B+iC,CAAa,UAAW,CAC7E,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,gBAAiBE,EACjB,gBAAiBE,EACjB,iBAAkBE,CAAA,CACnB,CAAA,CACF,EAED,GAAIrjC,EAAS,GACXsF,EAAA,EACAvB,EAAA,EACA0sB,EAAA,EACAiS,EAAA,MACK,CACL,MAAMz8B,EAAY,MAAMjG,EAAS,KAAA,EACjC2F,EAASM,EAAU,OAAS,mBAAmB,CACjD,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,qBAAsBA,CAAK,EACzC2L,EAAS,wBAAwB,CACnC,QAAA,CACE3I,EAAW,EAAK,CAClB,CACF,EAEMyzB,EAAY,IAAM,CACtB2S,EAAkB,EAAE,EACpBE,EAAmB,EAAE,EACrBJ,EAAkB,KAAK,EACvBv9B,EAAS,IAAI,CACf,EAEM49B,EAAcC,GAAmB,CACrC,GAAI,CACF,WAAI,IAAIA,CAAM,EACP,EACT,MAAY,CACV,MAAO,EACT,CACF,EAEMd,EAA0B,IAAM,CACpC,MAAMp+B,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAY,gGACzBA,EAAa,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAWzB,SAAS,KAAK,YAAYA,CAAY,EACtC,WAAW,IAAM,CACX,SAAS,KAAK,SAASA,CAAY,GACrC,SAAS,KAAK,YAAYA,CAAY,CAE1C,EAAG,GAAI,CACT,EAEA,aACG,MAAA,CAAI,UAAU,iFACb,SAAAnI,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACqe,GAAA,CAAO,UAAU,yBAAA,CAA0B,SAC3C,MAAA,CACC,SAAA,CAAAre,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,mBAAgB,EAChEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,SAAA4mC,CAAA,CAAU,CAAA,CAAA,CAClD,CAAA,EACF,EACA5mC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,gBAEb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,kBAEhE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM+mC,EAAkB,KAAK,EACtC,UAAW,6CACTD,IAAmB,MACf,iCACA,uCACN,GAEA,SAAA,CAAA7mC,EAAAA,IAACsF,GAAA,CAAK,UAAU,sCAAA,CAAuC,EACvDtF,EAAAA,IAAC,MAAA,CAAI,UAAU,sBAAsB,SAAA,WAAQ,EAC7CA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,4BAAA,CAA0B,CAAA,CAAA,CAAA,EAEnED,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM+mC,EAAkB,MAAM,EACvC,UAAW,6CACTD,IAAmB,OACf,iCACA,uCACN,GAEA,SAAA,CAAA7mC,EAAAA,IAAC6O,GAAA,CAAS,UAAU,sCAAA,CAAuC,EAC3D7O,EAAAA,IAAC,MAAA,CAAI,UAAU,sBAAsB,SAAA,eAAY,EACjDA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,sBAAA,CAAoB,CAAA,CAAA,CAAA,CAC7D,CAAA,CACF,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAAA,MAAC,SAAM,UAAU,+CACd,SAAA6mC,IAAmB,MAAQ,aAAe,iBAC7C,EACCA,IAAmB,MAClB7mC,EAAAA,IAAC,QAAA,CACC,KAAK,MACL,MAAO+mC,EACP,SAAWvpC,GAAMwpC,EAAkBxpC,EAAE,OAAO,KAAK,EACjD,YAAY,gCACZ,UAAU,gHAAA,CAAA,EAGZwC,EAAAA,IAAC,WAAA,CACC,MAAO+mC,EACP,SAAWvpC,GAAMwpC,EAAkBxpC,EAAE,OAAO,KAAK,EACjD,YAAY,kCACZ,KAAM,EACN,UAAU,gHAAA,CAAA,CACZ,EAEJ,SAGC,MAAA,CACC,SAAA,CAAAwC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,8BAEhE,EACAA,EAAAA,IAAC,WAAA,CACC,MAAOinC,EACP,SAAWzpC,GAAM0pC,EAAmB1pC,EAAE,OAAO,KAAK,EAClD,YAAY,2DACZ,KAAM,EACN,UAAU,gHAAA,CAAA,CACZ,EACF,EAGAuC,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,wBAAqB,EACpED,EAAAA,KAAC,KAAA,CAAG,UAAU,kCACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,sDAAA,CAAoD,EACxDA,EAAAA,IAAC,MAAG,SAAA,gDAAA,CAA8C,EAClDA,EAAAA,IAAC,MAAG,SAAA,wDAAA,CAAsD,EAC1DA,EAAAA,IAAC,MAAG,SAAA,uDAAA,CAAqD,CAAA,CAAA,CAC3D,CAAA,EACF,EAGCpC,GACCmC,EAAAA,KAAC,MAAA,CAAI,UAAU,4EACb,SAAA,CAAAC,EAAAA,IAACuI,GAAA,CAAY,UAAU,2CAAA,CAA4C,EACnEvI,EAAAA,IAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,EAC7C,EAIFmC,EAAAA,KAAC,MAAA,CAAI,UAAU,sBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,kHACX,SAAA,QAAA,CAAA,EAGD3H,EAAAA,IAAC,SAAA,CACC,QAASgb,EACT,SAAU,CAAC+rB,EAAe,KAAA,GAAUpmC,EACpC,UAAU,iQAET,WACCX,MAAC,MAAA,CAAI,UAAU,8EAAA,CAA+E,EAE9FD,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAACqnC,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BrnC,EAAAA,IAAC,QAAK,SAAA,aAAA,CAAW,CAAA,CAAA,CACnB,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CC7OA,SAAwBsnC,GAAgB,CAAE,YAAAC,EAAa,oBAAAC,GAA6C,CAClG,KAAM,CAACC,EAAqBC,CAAsB,EAAI3oC,EAAAA,SAAS,EAAK,EAG9DutB,EAAUib,EAAoB,YAAY,YAAA,EAAc,SAAS,QAAQ,GAC/DA,EAAoB,YAAY,cAAc,SAAS,MAAM,GAC9DA,EAAY,qBAAqB,YAAA,EAAc,SAAS,MAAM,EAEvEnjB,EAAkB7I,GAAmB,CACzC,OAAQA,EAAA,CACN,IAAK,SACH,MAAO,8BACT,IAAK,UACH,MAAO,gCACT,IAAK,WACH,MAAO,4BACT,IAAK,YACH,MAAO,gCACT,IAAK,WACH,MAAO,0BACT,IAAK,YACH,MAAO,gCACT,QACE,MAAO,2BAAA,CAEb,EAEMosB,EAAiBpsB,GAAmB,CACxC,OAAQA,EAAA,CACN,IAAK,YACH,OAAOvb,EAAAA,IAACE,GAAA,CAAY,UAAU,SAAA,CAAU,EAC1C,IAAK,UACL,IAAK,YACH,OAAOF,EAAAA,IAAC2K,GAAA,CAAM,UAAU,SAAA,CAAU,EACpC,IAAK,WACH,OAAO3K,EAAAA,IAACuI,GAAA,CAAY,UAAU,SAAA,CAAU,EAC1C,QACE,OAAO,IAAA,CAEb,EAEMq/B,EAAYL,EAAY,SAAW,WACnCM,EAAkBN,EAAY,SAAW,WAE/C,OACExnC,EAAAA,KAAAiK,WAAA,CACE,SAAA,CAAAjK,OAAC,OAAI,UAAW,0BACdusB,EAAS,iCAAmC,4BAC9C,GAEG,SAAA,CAAAA,SACE,MAAA,CAAI,UAAU,iGACb,SAAAvsB,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,EACRA,EAAAA,IAAC,QAAK,SAAA,wCAAA,CAAsC,EAC5CA,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,CAAA,CAAA,CACV,CAAA,CACF,EAGFD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAAgC,SAAAunC,EAAoB,WAAW,EAC3EA,EAAoB,uBACpBvnC,EAAAA,IAAC,QAAK,UAAU,uEACZ,WAAoB,qBAAA,CACxB,CAAA,EAEJ,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAsB,WAAY,oBAAoB,EACnED,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,QAAK,UAAW,0EAA0EqkB,EAAemjB,EAAY,MAAM,CAAC,GAC1H,SAAA,CAAAI,EAAcJ,EAAY,MAAM,EACjCvnC,EAAAA,IAAC,OAAA,CAAM,SAAAunC,EAAY,OAAO,OAAO,CAAC,EAAE,YAAA,EAAgBA,EAAY,OAAO,MAAM,CAAC,CAAA,CAAE,CAAA,EAClF,EACCjb,GACCtsB,EAAAA,IAAC,OAAA,CAAK,UAAU,2EAA2E,SAAA,OAE3F,EAEDunC,EAAY,cACXxnC,OAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,CAAA,UAC9BwnC,EAAY,aAAa,KAAA,EACnC,EAEDM,GACC7nC,EAAAA,IAAC,OAAA,CAAK,UAAU,uEAAuE,SAAA,qBAAA,CAEvF,CAAA,CAAA,CAEJ,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAC,MAAC,MAAA,CAAI,UAAU,6BACZ,SAAAssB,EAAS,cAAgB,SAC5B,SACC,MAAA,CAAI,UAAW,iBAAiBA,EAAS,kBAAoB,iBAAiB,GAC5E,SAAA,CAAAib,EAAY,YAAY,SAAOjb,GAAU,QAAA,EAC5C,EACAvsB,EAAAA,KAAC,MAAA,CAAI,UAAU,6BAA6B,SAAA,CAAA,SAClCwnC,EAAoB,SAAS,OAAA,CAAA,CACvC,CAAA,CAAA,CACF,CAAA,EACF,EAEAxnC,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAC,EAAAA,IAACghB,GAAA,CAAS,UAAU,SAAA,CAAU,EAC9BjhB,EAAAA,KAAC,OAAA,CAAK,UAAU,UAAU,SAAA,CAAA,WAAS,IAAI,KAAKwnC,EAAY,UAAU,EAAE,mBAAA,CAAmB,CAAA,CAAE,CAAA,EAC3F,EAEAxnC,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAAwnC,EAAY,cACXxnC,OAAC,MAAA,CAAI,UAAU,qCAAqC,SAAA,CAAA,aACvC,IAAI,KAAKwnC,EAAY,YAAY,EAAE,mBAAA,CAAmB,EACnE,EAGDK,GACC7nC,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM2nC,EAAuB,EAAI,EAC1C,UAAW,+GACTpb,EACI,yFACA,sFACN,GAEA,SAAA,CAAAtsB,EAAAA,IAACqe,GAAA,CAAO,UAAU,SAAA,CAAU,EAC5Bre,EAAAA,IAAC,OAAA,CAAM,SAAAssB,EAAS,cAAgB,aAAA,CAAc,CAAA,CAAA,CAAA,CAChD,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,EACF,EAEAtsB,EAAAA,IAAC0mC,GAAA,CACC,KAAM,KACN,cAAea,EAAY,GAC3B,UAAYA,EAAoB,WAChC,OAAQE,EACR,QAAS,IAAMC,EAAuB,EAAK,EAC3C,UAAW,IAAM,CACfF,EAAA,EACAE,EAAuB,EAAK,CAC9B,CAAA,CAAA,CACF,EACF,CAEJ,CCvIA,SAAwBI,GAAsB,CAAE,KAAA1kC,EAAM,OAAAsE,EAAQ,QAAAC,EAAS,UAAAuB,GAAyC,CAC9G,KAAM,CAAC2B,EAAMC,CAAO,EAAI/L,EAAAA,SAAS,CAAC,EAC5B,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAwB,IAAI,EAChD,CAAC+b,EAAUC,CAAW,EAAIhc,WAAS,CACvC,UAAW,GACX,mBAAoB,GACpB,aAAc,GACd,MAAO,GACP,eAAgB,EAAA,CACjB,EACK,CAACgpC,EAAYC,CAAa,EAAIjpC,EAAAA,SAAqC,IAAI,EAE7E,GAAI,CAAC2I,GAAU,CAACtE,EAAM,OAAO,KAE7B,MAAM4X,EAAe,SAAY,CAC/B,GAAI,CAACF,EAAS,WAAa,CAACA,EAAS,oBAAsB,CAACA,EAAS,cAAgB,CAACA,EAAS,OAAS,CAACA,EAAS,eAAgB,CAChIvR,EAAS,oCAAoC,EAC7C,MACF,CAEA,GAAI,SAASuR,EAAS,cAAc,EAAI,IAAK,CAC3CvR,EAAS,sDAAsD,EAC/D,MACF,CAEA3I,EAAW,EAAI,EACf2I,EAAS,IAAI,EAEb,GAAI,CACF,MAAM3F,EAAW,MAAM,MAAM,wCAAyC,CACpE,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,UAAWkX,EAAS,UACpB,SAAU,YACV,kBAAmBA,EAAS,mBAC5B,aAAcA,EAAS,aACvB,MAAOA,EAAS,MAChB,eAAgB,SAASA,EAAS,cAAc,CAAA,CACjD,CAAA,CACF,EAED,GAAIlX,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5BokC,EAAc9qC,CAAI,EAClB4N,EAAQ,CAAC,CACX,KAAO,CACL,MAAMjB,EAAY,MAAMjG,EAAS,KAAA,EACjC2F,EAASM,EAAU,OAAS,qBAAqB,CACnD,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,yCAA0CA,CAAK,EAC7D2L,EAAS,wBAAwB,CACnC,QAAA,CACE3I,EAAW,EAAK,CAClB,CACF,EAEMsK,EAAoB,SAAY,CACpCtK,EAAW,EAAI,EACf2I,EAAS,IAAI,EAEb,GAAI,CACF,MAAM3F,EAAW,MAAM,MAAM,oCAAqC,CAChE,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CAAA,CAAE,CAAA,CACxB,EAED,GAAIA,EAAS,GACX,MAAMA,EAAS,KAAA,EACfsF,EAAA,EACAvB,EAAA,EACAmD,EAAQ,CAAC,EACTiQ,EAAY,CACV,UAAW,GACX,mBAAoB,GACpB,aAAc,GACd,MAAO,GACP,eAAgB,EAAA,CACjB,MACI,CACL,MAAMlR,EAAY,MAAMjG,EAAS,KAAA,EACjC2F,EAASM,EAAU,OAAS,wBAAwB,CACtD,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7C2L,EAAS,wBAAwB,CACnC,QAAA,CACE3I,EAAW,EAAK,CAClB,CACF,EAEM8b,EAAmBurB,GAChB,KAAK,MAAMA,EAAY,GAAI,EAG9BC,EAAkB,IAAM,CAC5B,MAAM1jB,MAAU,KAChB,MAAO,GAAGA,EAAI,YAAA,CAAa,IAAI,OAAOA,EAAI,SAAA,EAAa,CAAC,EAAE,SAAS,EAAG,GAAG,CAAC,EAC5E,EAEA,aACG,MAAA,CAAI,UAAU,6EACb,SAAAzkB,EAAAA,KAAC,MAAA,CAAI,UAAU,6EACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACqB,GAAA,CAAW,UAAU,uBAAA,CAAwB,EAC9CrB,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,mBAAA,CAAiB,CAAA,EACnE,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEC8B,IAAS,GACR9K,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,qHACb,eAACgP,GAAA,CAAM,UAAU,qBAAqB,CAAA,CACxC,EACAhP,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,kCAA+B,EACxFA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,2EAAA,CAErC,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mFACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,eAAY,EAC3DD,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,uBAAA,CAAwB,EAC/CF,EAAAA,IAAC,QAAK,SAAA,6CAAA,CAA2C,CAAA,EACnD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,uBAAA,CAAwB,EAC/CF,EAAAA,IAAC,QAAK,SAAA,sCAAA,CAAoC,CAAA,EAC5C,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,uBAAA,CAAwB,EAC/CF,EAAAA,IAAC,QAAK,SAAA,8CAAA,CAA4C,CAAA,EACpD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,uBAAA,CAAwB,EAC/CF,EAAAA,IAAC,QAAK,SAAA,gCAAA,CAA8B,CAAA,CAAA,CACtC,CAAA,CAAA,CACF,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,4BAA4B,SAAA,yBAAsB,EAEhED,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,+CACf,SAAA,CAAAC,EAAAA,IAACoF,GAAA,CAAK,UAAU,qBAAA,CAAsB,EAAE,aAAA,EAE1C,EACApF,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO8a,EAAS,UAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,UAAWtd,EAAE,OAAO,MAAO,EACvE,YAAY,uBACZ,UAAU,8GAAA,CAAA,CACZ,EACF,SAEC,MAAA,CACC,SAAA,CAAAuC,EAAAA,KAAC,QAAA,CAAM,UAAU,+CACf,SAAA,CAAAC,EAAAA,IAACsL,GAAA,CAAU,UAAU,qBAAA,CAAsB,EAAE,sBAAA,EAE/C,EACAtL,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO8a,EAAS,mBAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,mBAAoBtd,EAAE,OAAO,MAAO,EAChF,YAAY,gBACZ,UAAU,8GAAA,CAAA,CACZ,EACF,SAEC,MAAA,CACC,SAAA,CAAAuC,EAAAA,KAAC,QAAA,CAAM,UAAU,+CACf,SAAA,CAAAC,EAAAA,IAACmoC,GAAA,CAAM,UAAU,qBAAA,CAAsB,EAAE,gBAAA,EAE3C,EACAnoC,EAAAA,IAAC,QAAA,CACC,KAAK,MACL,MAAO8a,EAAS,aAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,aAActd,EAAE,OAAO,MAAO,EAC1E,YAAY,oBACZ,UAAU,8GAAA,CAAA,CACZ,EACF,SAEC,MAAA,CACC,SAAA,CAAAuC,EAAAA,KAAC,QAAA,CAAM,UAAU,+CACf,SAAA,CAAAC,EAAAA,IAACmb,GAAA,CAAK,UAAU,qBAAA,CAAsB,EAAE,iBAAA,EAE1C,EACAnb,EAAAA,IAAC,QAAA,CACC,KAAK,QACL,MAAO8a,EAAS,MAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,MAAOtd,EAAE,OAAO,MAAO,EACnE,YAAY,iBACZ,UAAU,8GAAA,CAAA,CACZ,CAAA,CACF,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAuC,EAAAA,KAAC,QAAA,CAAM,UAAU,+CACf,SAAA,CAAAC,EAAAA,IAACgP,GAAA,CAAM,UAAU,qBAAA,CAAsB,EAAE,0BAAA,EAE3C,EACAhP,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,IAAI,MACJ,MAAO8a,EAAS,eAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,eAAgBtd,EAAE,OAAO,MAAO,EAC5E,YAAY,YACZ,UAAU,8GAAA,CAAA,EAEXsd,EAAS,gBACR9a,EAAAA,IAAC,MAAA,CAAI,UAAU,0DACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,yBAAyB,SAAA,kBAEzC,EACAD,EAAAA,KAAC,OAAA,CAAK,UAAU,2BACb,SAAA,CAAA2c,EAAgB,SAAS5B,EAAS,cAAc,GAAK,CAAC,EAAE,SAAA,CAAA,CAC3D,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,EACF,EAECld,SACE,MAAA,CAAI,UAAU,iDACb,SAAAmC,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAACuI,GAAA,CAAY,UAAU,2CAAA,CAA4C,EACnEvI,EAAAA,IAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAAA,CAC7C,CAAA,CACF,QAGD,MAAA,CAAI,UAAU,uDACb,SAAAmC,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAACuI,GAAA,CAAY,UAAU,8CAAA,CAA+C,EACtExI,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,mBAAmB,SAAA,mBAAgB,EAChDD,EAAAA,KAAC,KAAA,CAAG,UAAU,YACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,uEAAA,CAAqE,EACzEA,EAAAA,IAAC,MAAG,SAAA,oDAAA,CAAkD,EACtDA,EAAAA,IAAC,MAAG,SAAA,4DAAA,CAA0D,EAC9DA,EAAAA,IAAC,MAAG,SAAA,kCAAA,CAAgC,CAAA,CAAA,CACtC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,kHACX,SAAA,QAAA,CAAA,EAGD3H,EAAAA,IAAC,SAAA,CACC,QAASgb,EACT,SAAUra,EACV,UAAU,sNAET,WAAU,gBAAkB,sBAAA,CAAA,CAC/B,CAAA,CACF,CAAA,EACF,EAGDkK,IAAS,GAAKk9B,GACbhoC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,oFACb,eAACE,GAAA,CAAY,UAAU,yBAAyB,CAAA,CAClD,EACAF,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,2BAAwB,EACjFD,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,mDACcmoC,EAAA,CAAgB,CAAA,CACnE,CAAA,EACF,QAEC,MAAA,CAAI,UAAU,mFACb,SAAAnoC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,YAAS,EACjDD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACsL,GAAA,CAAU,UAAU,uBAAA,CAAwB,EAC7CtL,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,WAAA,CAAS,CAAA,CAAA,CACzC,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,YAAS,EACjDD,EAAAA,KAAC,OAAA,CAAK,UAAU,cAAc,SAAA,CAAA,IAAEgoC,EAAW,iBAAA,CAAA,CAAkB,CAAA,EAC/D,EACAhoC,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,aAAU,QACjD,OAAA,CAAK,UAAU,0BAA2B,SAAA+nC,EAAW,eAAe,gBAAe,CAAE,CAAA,EACxF,EACAhoC,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,kBAAe,EACvDD,EAAAA,KAAC,OAAA,CAAK,UAAU,2BAA4B,SAAA,CAAAgoC,EAAW,kBAAkB,SAAA,CAAA,CAAO,CAAA,EAClF,EACAhoC,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,iBAAc,EACtDA,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAe,WAAW,aAAA,CAAc,CAAA,CAAA,CAC1D,CAAA,CAAA,CACF,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,mDACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAACghB,GAAA,CAAS,UAAU,4CAAA,CAA6C,EACjEjhB,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,mBAAmB,SAAA,cAAW,SAC1C,IAAA,CAAE,SAAA,CAAA,oHAAkH+nC,EAAW,kBAAkB,wCAAA,CAAA,CAAsC,CAAA,CAAA,CAC1L,CAAA,CAAA,CACF,CAAA,CACF,EAEAhoC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAASkL,EACT,SAAUvK,EACV,UAAU,8LAET,WAAU,cAAgB,4BAAA,CAAA,EAG7BX,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CACb8K,EAAQ,CAAC,EACTk9B,EAAc,IAAI,EAClBz+B,EAAS,IAAI,CACf,EACA,UAAU,kHACX,SAAA,4BAAA,CAAA,CAED,EACF,EAEC3L,SACE,MAAA,CAAI,UAAU,iDACb,SAAAmC,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAACuI,GAAA,CAAY,UAAU,2CAAA,CAA4C,EACnEvI,EAAAA,IAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAAA,CAC7C,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAAA,CACF,CAEJ,CCnXA,SAAwBwqC,GAAiB,CAAE,OAAA1gC,EAAQ,QAAAC,EAAS,KAAAvE,EAAM,UAAA8F,GAAoC,CACpG,KAAM,CAAC4R,EAAUC,CAAW,EAAIhc,EAAAA,SAAmC,CAAA,CAAE,EAC/D,CAACspC,EAAaC,CAAc,EAAIvpC,WAAS,CAC7C,UAAW,GACX,QAAS,GACT,SAAU,GACV,SAAU,GACV,QAAS,GACT,OAAQ,EAAA,CACT,EACK,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACwpC,EAAiBC,CAAkB,EAAIzpC,EAAAA,SAAS,EAAK,EACtD,CAAC0pC,EAAiBC,CAAkB,EAAI3pC,EAAAA,SAAS,EAAK,EACtD,CAAC4pC,EAAQC,CAAS,EAAI7pC,EAAAA,SAAiC,CAAA,CAAE,EAE/DM,EAAAA,UAAU,IAAM,CACd,GAAIqI,GAAUtE,IACZ2X,EAAY,CACV,SAAU3X,EAAK,UAAY,GAC3B,aAAcA,EAAK,cAAgB,GACnC,IAAKA,EAAK,KAAO,GACjB,WAAYA,EAAK,YAAc,GAC/B,WAAYA,EAAK,YAAc,GAC/B,YAAaA,EAAK,aAAe,GACjC,aAAcA,EAAK,cAAgB,EAAA,CACpC,EAGGA,EAAK,cACP,GAAI,CACF,MAAMylC,EAAS,KAAK,MAAMzlC,EAAK,YAAY,EAC3CklC,EAAe,CACb,UAAWO,EAAO,WAAa,GAC/B,QAASA,EAAO,SAAW,GAC3B,SAAUA,EAAO,UAAY,GAC7B,SAAUA,EAAO,UAAY,GAC7B,QAASA,EAAO,SAAW,GAC3B,OAAQA,EAAO,QAAU,EAAA,CAC1B,CACH,OAASjrC,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,CACtD,CAGN,EAAG,CAAC8J,EAAQtE,CAAI,CAAC,EAEjB,MAAM2a,EAAoB,MAAOC,EAAY1b,IAA8B,CACrEA,IAAS,SAAUkmC,EAAmB,EAAI,IACtB,EAAI,EAE5B,GAAI,CACF,MAAM1tB,EAAW,IAAI,SACrBA,EAAS,OAAO,QAASkD,CAAI,EAE7B,MAAMpa,EAAW,MAAM,MAAM,qBAAsB,CACjD,OAAQ,OACR,YAAa,UACb,KAAMkX,CAAA,CACP,EAED,GAAI,CAAClX,EAAS,GACZ,MAAM,IAAI,MAAM,eAAe,EAGjC,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAG1BmX,EADEzY,IAAS,aACU,CAAE,GAAGiC,EAAM,WAAYrH,EAAK,UAE5B,CAAE,GAAGqH,EAAM,WAAYrH,EAAK,KAFM,CAI3D,OAASU,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,EAC3CgrC,EAAUrkC,IAAS,CACjB,GAAGA,EACH,CAACjC,CAAI,EAAG,2CAAA,EACR,CACJ,QAAA,CACMA,IAAS,SAAUkmC,EAAmB,EAAK,IACvB,EAAK,CAC/B,CACF,EAEMnb,EAAmB,CAAC7vB,EAAwC8E,IAA8B,CAC9F,MAAM0b,EAAOxgB,EAAE,OAAO,QAAQ,CAAC,EAC/B,GAAKwgB,EAGL,IAAI,CAACA,EAAK,KAAK,WAAW,QAAQ,EAAG,CACnC4qB,EAAUrkC,IAAS,CACjB,GAAGA,EACH,CAACjC,CAAI,EAAG,8BAAA,EACR,EACF,MACF,CAGA,GAAI0b,EAAK,KAAO,EAAI,KAAO,KAAM,CAC/B4qB,EAAUrkC,IAAS,CACjB,GAAGA,EACH,CAACjC,CAAI,EAAG,mCAAA,EACR,EACF,MACF,CAGAsmC,EAAUrkC,GAAQ,CAChB,MAAMukC,EAAY,CAAE,GAAGvkC,CAAA,EACvB,cAAOukC,EAAUxmC,CAAI,EACdwmC,CACT,CAAC,EAED/qB,EAAkBC,EAAM1b,CAAI,EAC9B,EAEMymC,EAAe,IAAM,CACzB,MAAMD,EAAoC,CAAA,EAc1C,GAZIhuB,EAAS,UAAYA,EAAS,SAAS,OAAS,IAClDguB,EAAU,SAAW,+CAGnBhuB,EAAS,UAAY,CAAC,kBAAkB,KAAKA,EAAS,QAAQ,IAChEguB,EAAU,SAAW,+DAGnBhuB,EAAS,KAAOA,EAAS,IAAI,OAAS,MACxCguB,EAAU,IAAM,wCAGdhuB,EAAS,aAAeA,EAAS,YACnC,GAAI,CACF,IAAI,IAAIA,EAAS,WAAW,CAC9B,MAAQ,CACNguB,EAAU,YAAc,0BAC1B,CAGF,OAAAF,EAAUE,CAAS,EACZ,OAAO,KAAKA,CAAS,EAAE,SAAW,CAC3C,EAEME,EAAa,SAAY,CAC7B,GAAKD,IAEL,CAAAnoC,EAAW,EAAI,EACf,GAAI,CAEF,MAAMqoC,EAAsB,OAAO,QAAQZ,CAAW,EACnD,OAAO,CAAC,CAACnvB,EAAG1U,CAAK,IAAMA,EAAM,KAAA,IAAW,EAAE,EAC1C,OAAO,CAACm4B,EAAK,CAAC3H,EAAKxwB,CAAK,KAAO,CAAE,GAAGm4B,EAAK,CAAC3H,CAAG,EAAGxwB,CAAA,GAAU,CAAA,CAAE,EAEzD0kC,EAAa,CACjB,GAAGpuB,EACH,aAAc,OAAO,KAAKmuB,CAAmB,EAAE,OAAS,EACpD,KAAK,UAAUA,CAAmB,EAClC,EAAA,EAGArlC,EAAW,MAAM,MAAM,qBAAsB,CACjD,OAAQ,MACR,QAAS,CACP,eAAgB,kBAAA,EAElB,YAAa,UACb,KAAM,KAAK,UAAUslC,CAAU,CAAA,CAChC,EAED,GAAI,CAACtlC,EAAS,GAAI,CAChB,MAAMiG,EAAY,MAAMjG,EAAS,KAAA,EACjC,MAAM,IAAI,MAAMiG,EAAU,OAAS,0BAA0B,CAC/D,CAEA,MAAMs/B,EAAc,MAAMvlC,EAAS,KAAA,EACnCsF,EAAUigC,CAAW,EACrBxhC,EAAA,CACF,OAAS/J,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,EAChDgrC,EAAU,CAAE,QAAShrC,aAAiB,MAAQA,EAAM,QAAU,2BAA4B,CAC5F,QAAA,CACEgD,EAAW,EAAK,CAClB,EACF,EAEMwoC,EAAiBhvB,GAAqB,CAC1C,OAAQA,EAAA,CACN,IAAK,YAAa,OAAOpa,EAAAA,IAACsL,GAAA,CAAU,UAAU,SAAA,CAAU,EACxD,IAAK,UAAW,OAAOtL,EAAAA,IAACogB,GAAA,CAAQ,UAAU,SAAA,CAAU,EACpD,IAAK,WAAY,OAAOpgB,EAAAA,IAACgwB,GAAA,CAAS,UAAU,SAAA,CAAU,EACtD,IAAK,WAAY,OAAOhwB,EAAAA,IAACmgB,GAAA,CAAS,UAAU,SAAA,CAAU,EACtD,IAAK,UAAW,OAAOngB,EAAAA,IAAC+vB,GAAA,CAAQ,UAAU,SAAA,CAAU,EACpD,IAAK,SAAU,OAAO/vB,EAAAA,IAAC,MAAA,CAAI,UAAU,yFAAyF,SAAA,IAAC,EAC/H,QAAS,OAAOA,EAAAA,IAACqpC,GAAA,CAAM,UAAU,SAAA,CAAU,CAAA,CAE/C,EAEMC,EAAwBlvB,GAAqB,CACjD,OAAQA,EAAA,CACN,IAAK,YAAa,MAAO,YACzB,IAAK,UAAW,MAAO,YACvB,IAAK,WAAY,MAAO,0BACxB,IAAK,WAAY,MAAO,0BACxB,IAAK,UAAW,MAAO,sBACvB,IAAK,SAAU,MAAO,YACtB,QAAS,MAAO,UAAA,CAEpB,EAEA,OAAK1S,QAGF,MAAA,CAAI,UAAU,uFACb,SAAA3H,EAAAA,KAAC,MAAA,CAAI,UAAU,+EAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,oGACb,eAACoF,GAAA,CAAK,UAAU,qBAAqB,CAAA,CACvC,SACC,MAAA,CACC,SAAA,CAAApF,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,eAAY,EAChEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,gDAAA,CAA8C,CAAA,CAAA,CACrF,CAAA,EACF,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,qDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,uBAAA,CAAwB,CAAA,CAAA,CACvC,EACF,QAGC,MAAA,CAAI,UAAU,2CACb,SAAAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,gBAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,iBAAc,SAGjE,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,eAAY,EAC5ED,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kGACZ,SAAA,CAAA+a,EAAS,WACR9a,EAAAA,IAAC,MAAA,CACC,IAAK8a,EAAS,WACd,IAAI,iBACJ,UAAU,4BAAA,CAAA,EAGZ9a,EAAAA,IAAC,MAAA,CAAI,UAAU,wEAAA,CAAyE,QAEzF,MAAA,CAAI,UAAU,gEACb,SAAAD,EAAAA,KAAC,QAAA,CAAM,UAAU,8IACd,SAAA,CAAA0oC,EACCzoC,EAAAA,IAAC,OAAI,UAAU,iFAAA,CAAkF,EAEjGA,EAAAA,IAACme,GAAA,CAAO,UAAU,SAAA,CAAU,QAE7B,OAAA,CAAK,UAAU,sBACb,SAAAsqB,EAAkB,eAAiB,gBACtC,EACAzoC,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,OAAO,UACP,SAAWxC,GAAM6vB,EAAiB7vB,EAAG,QAAQ,EAC7C,UAAU,SACV,SAAUirC,CAAA,CAAA,CACZ,CAAA,CACF,CAAA,CACF,CAAA,EACF,EACCE,EAAO,QACN5oC,OAAC,IAAA,CAAE,UAAU,wDACX,SAAA,CAAAC,EAAAA,IAACuI,GAAA,CAAY,UAAU,SAAA,CAAU,EACjCvI,EAAAA,IAAC,OAAA,CAAM,SAAA2oC,EAAO,MAAA,CAAO,CAAA,CAAA,CACvB,CAAA,CAAA,CAEJ,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAA3oC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,kBAAe,EAC/ED,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,IAAK8a,EAAS,YAAc,sBAC5B,IAAI,kBACJ,UAAU,oEAAA,CAAA,EAEZ/a,EAAAA,KAAC,QAAA,CAAM,UAAU,gKACd,SAAA,CAAAwoC,EACCvoC,EAAAA,IAAC,OAAI,UAAU,8EAAA,CAA+E,EAE9FA,EAAAA,IAACme,GAAA,CAAO,UAAU,SAAA,CAAU,EAE9Bne,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,OAAO,UACP,SAAWxC,GAAM6vB,EAAiB7vB,EAAG,QAAQ,EAC7C,UAAU,SACV,SAAU+qC,CAAA,CAAA,CACZ,CAAA,CACF,CAAA,EACF,EACAxoC,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,qEAE1C,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,4CAAA,CAErC,CAAA,CAAA,CACF,CAAA,EACF,EACC2oC,EAAO,QACN5oC,OAAC,IAAA,CAAE,UAAU,wDACX,SAAA,CAAAC,EAAAA,IAACuI,GAAA,CAAY,UAAU,SAAA,CAAU,EACjCvI,EAAAA,IAAC,OAAA,CAAM,SAAA2oC,EAAO,MAAA,CAAO,CAAA,CAAA,CACvB,CAAA,CAAA,CAEJ,CAAA,EACF,EAGA5oC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,oBAAiB,EAErED,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,WAAQ,EACxEA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO8a,EAAS,UAAY,GAC5B,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,SAAUtd,EAAE,OAAO,MAAO,EACtE,UAAW,oHACTmrC,EAAO,SAAW,2BAA6B,iBACjD,GACA,YAAY,gBAAA,CAAA,EAEbA,EAAO,UACN5oC,OAAC,IAAA,CAAE,UAAU,wDACX,SAAA,CAAAC,EAAAA,IAACuI,GAAA,CAAY,UAAU,SAAA,CAAU,EACjCvI,EAAAA,IAAC,OAAA,CAAM,SAAA2oC,EAAO,QAAA,CAAS,CAAA,CAAA,CACzB,CAAA,EAEJ,SAEC,MAAA,CACC,SAAA,CAAA3oC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,eAAY,EAC5EA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO8a,EAAS,cAAgB,GAChC,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,aAActd,EAAE,OAAO,MAAO,EAC1E,UAAU,mIACV,YAAY,oBAAA,CAAA,CACd,CAAA,CACF,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAwC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,MAAG,EACnEA,EAAAA,IAAC,WAAA,CACC,MAAO8a,EAAS,KAAO,GACvB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,IAAKtd,EAAE,OAAO,MAAO,EACjE,YAAY,4BACZ,KAAM,EACN,UAAW,gIACTmrC,EAAO,IAAM,2BAA6B,iBAC5C,EAAA,CAAA,EAEF5oC,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACZ,SAAA,CAAA4oC,EAAO,KACN5oC,OAAC,IAAA,CAAE,UAAU,mDACX,SAAA,CAAAC,EAAAA,IAACuI,GAAA,CAAY,UAAU,SAAA,CAAU,EACjCvI,EAAAA,IAAC,OAAA,CAAM,SAAA2oC,EAAO,GAAA,CAAI,CAAA,EACpB,EAEF5oC,EAAAA,KAAC,IAAA,CAAE,UAAU,gCACT,SAAA,EAAA+a,EAAS,KAAO,IAAI,OAAO,iBAAA,CAAA,CAC/B,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGA/a,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,UAAO,SAC1D,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,cAAW,EAC3ED,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAACqpC,GAAA,CAAM,UAAU,0EAAA,CAA2E,EAC5FrpC,EAAAA,IAAC,QAAA,CACC,KAAK,MACL,MAAO8a,EAAS,aAAe,GAC/B,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,YAAatd,EAAE,OAAO,MAAO,EACzE,UAAW,0HACTmrC,EAAO,YAAc,2BAA6B,iBACpD,GACA,YAAY,yBAAA,CAAA,CACd,EACF,EACCA,EAAO,aACN5oC,OAAC,IAAA,CAAE,UAAU,wDACX,SAAA,CAAAC,EAAAA,IAACuI,GAAA,CAAY,UAAU,SAAA,CAAU,EACjCvI,EAAAA,IAAC,OAAA,CAAM,SAAA2oC,EAAO,WAAA,CAAY,CAAA,CAAA,CAC5B,CAAA,CAAA,CAEJ,CAAA,EACF,EAGA5oC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,eAAY,EAChEA,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACZ,gBAAO,QAAQqoC,CAAW,EAAE,IAAI,CAAC,CAACjuB,EAAU5V,CAAK,WAC/C,MAAA,CACC,SAAA,CAAAxE,EAAAA,IAAC,QAAA,CAAM,UAAU,0DACd,SAAAoa,EACH,EACAra,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,MAAC,MAAA,CAAI,UAAU,qDACZ,SAAAopC,EAAchvB,CAAQ,EACzB,EACApa,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAAwE,EACA,SAAWhH,GAAM8qC,EAAe,CAAE,GAAGD,EAAa,CAACjuB,CAAQ,EAAG5c,EAAE,OAAO,MAAO,EAC9E,UAAU,yIACV,YAAa8rC,EAAqBlvB,CAAQ,CAAA,CAAA,CAC5C,CAAA,CACF,CAAA,CAAA,EAfQA,CAgBV,CACD,CAAA,CACH,CAAA,EACF,EAGCuuB,EAAO,SACN3oC,EAAAA,IAAC,MAAA,CAAI,UAAU,iDACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACuI,GAAA,CAAY,UAAU,sBAAA,CAAuB,EAC9CvI,EAAAA,IAAC,IAAA,CAAE,UAAU,eAAgB,WAAO,OAAA,CAAQ,CAAA,CAAA,CAC9C,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,kFACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,gEACV,SAAUhH,EACX,SAAA,QAAA,CAAA,EAGDX,EAAAA,IAAC,SAAA,CACC,QAASgpC,EACT,SAAUroC,GAAW4nC,GAAmBE,EACxC,UAAU,qOAET,WACC1oC,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC,MAAA,CAAI,UAAU,8EAAA,CAA+E,EAC9FA,EAAAA,IAAC,QAAK,SAAA,WAAA,CAAS,CAAA,CAAA,CACjB,EAEAD,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAACgJ,GAAA,CAAM,UAAU,SAAA,CAAU,EAC3BhJ,EAAAA,IAAC,QAAK,SAAA,cAAA,CAAY,CAAA,CAAA,CACpB,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EA9QkB,IAgRtB,CC3eA,SAAwBupC,GAAe,CAAE,OAAA7hC,EAAQ,QAAAC,EAAS,QAAA6wB,EAAS,SAAAgR,EAAU,UAAAtgC,GAAkC,CAC7G,KAAM,CAACuvB,EAAUC,CAAW,EAAI35B,EAAAA,SAAiB,IAAOy5B,EAAU,KAAK,IAAI,EAAG,KAAK,KAAKA,EAAQ,aAAe,GAAI,CAAC,EAAI,CAAE,EACpH,CAACiR,EAAUC,CAAW,EAAI3qC,EAAAA,SAAiB,IAAMy5B,GAAS,eAAiB,CAAC,EAC5E,CAACtmB,EAASy3B,CAAU,EAAI5qC,EAAAA,SAAS,EAAE,EACnC,CAAC85B,EAAYC,CAAa,EAAI/5B,EAAAA,SAAS,EAAK,EAC5C,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAwB,IAAI,EAWtD,GATAM,EAAAA,UAAU,IAAM,CACVm5B,GAAW9wB,IACbgxB,EAAY,KAAK,IAAI,KAAK,IAAI,EAAG,KAAK,KAAKF,EAAQ,aAAe,GAAI,CAAC,EAAGA,EAAQ,YAAY,CAAC,EAC/FkR,EAAYlR,EAAQ,aAAa,EACjCmR,EAAW,EAAE,EACbpgC,EAAS,IAAI,EAEjB,EAAG,CAACivB,EAAS9wB,CAAM,CAAC,EAEhB,CAACA,GAAU,CAAC8wB,EACd,OAAO,KAGT,MAAMO,EAAa,IAAM,CACvBL,EAAY,KAAK,IAAI,KAAK,IAAI,EAAG,KAAK,KAAKF,EAAQ,aAAe,GAAI,CAAC,EAAGA,EAAQ,YAAY,CAAC,EAC/FkR,EAAYlR,EAAQ,aAAa,EACjCmR,EAAW,EAAE,EACbpgC,EAAS,IAAI,CACf,EAEM+qB,EAAc,IAAM,CACpBuE,IACJE,EAAA,EACApxB,EAAA,EACF,EAEMqT,EAAe,MAAOoG,GAA2B,CAErD,GADAA,EAAM,eAAA,EACF,EAACoX,EACL,IAAIC,GAAY,GAAKgR,GAAY,EAAG,CAClClgC,EAAS,yCAAyC,EAClD,MACF,CAEAuvB,EAAc,EAAI,EAClBvvB,EAAS,IAAI,EAEb,GAAI,CACF,MAAMyuB,GAAiB,CACrB,WAAYQ,EAAQ,WACpB,UAAWgR,EACX,SAAA/Q,EACA,UAAWgR,EACX,QAAAv3B,CAAA,CACD,EAEDhJ,IAAA,EACAorB,EAAA,CACF,OAAS50B,EAAK,CACZ6J,EAAS7J,aAAe,MAAQA,EAAI,QAAU,wBAAwB,CACxE,QAAA,CACEo5B,EAAc,EAAK,CACrB,EACF,EAEA,aACG,MAAA,CAAI,UAAU,6EACb,SAAA/4B,EAAAA,KAAC,MAAA,CAAI,UAAU,sDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,gBAAa,EACjEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,WAAQ,aAAA,CAAc,CAAA,EAC9D,EACAA,EAAAA,IAAC,UAAO,QAASs0B,EAAa,UAAU,oCAAoC,aAAW,yBAAyB,SAAA,GAAA,CAEhH,CAAA,EACF,EAEAv0B,EAAAA,KAAC,OAAA,CAAK,SAAUib,EAAc,UAAU,gBACtC,SAAA,CAAAjb,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,0CAA0C,SAAA,WAAQ,EACnEA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,IAAK,EACL,MAAOy4B,EACP,SAAWrX,GAAUsX,EAAY,OAAOtX,EAAM,OAAO,KAAK,CAAC,EAC3D,UAAU,qHAAA,CAAA,EAEZrhB,EAAAA,KAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,gBAAcy4B,EAAQ,aAAa,SAAA,CAAA,CAAO,CAAA,EACtF,SACC,MAAA,CACC,SAAA,CAAAx4B,EAAAA,IAAC,QAAA,CAAM,UAAU,0CAA0C,SAAA,0BAAuB,EAClFA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,IAAK,IACL,KAAM,IACN,MAAOypC,EACP,SAAWroB,GAAUsoB,EAAY,OAAOtoB,EAAM,OAAO,KAAK,CAAC,EAC3D,UAAU,qHAAA,CAAA,EAEZrhB,EAAAA,KAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,iBAAey4B,EAAQ,cAAc,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,CAAA,CAC5F,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAx4B,EAAAA,IAAC,QAAA,CAAM,UAAU,0CAA0C,SAAA,qBAAkB,EAC7EA,EAAAA,IAAC,WAAA,CACC,KAAM,EACN,MAAOkS,EACP,SAAWkP,GAAUuoB,EAAWvoB,EAAM,OAAO,KAAK,EAClD,YAAY,wCACZ,UAAU,qHAAA,CAAA,CACZ,EACF,QAEC,MAAA,CAAI,UAAU,kDACb,SAAArhB,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,mBAAA,CAAiB,EACvBD,EAAAA,KAAC,OAAA,CAAK,UAAU,4BAA4B,SAAA,CAAA,KAAG04B,EAAWgR,GAAU,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,CAAA,CACjF,CAAA,CACF,EAEC7rC,GAASoC,EAAAA,IAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,EAAM,EAErDmC,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAASs0B,EACT,UAAU,kEACX,SAAA,QAAA,CAAA,EAGDt0B,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,SAAU64B,EACV,UAAU,kHAET,WAAa,cAAgB,cAAA,CAAA,CAChC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CChHA,SAAwB+Q,GAAQ,CAAE,gBAAAC,EAAkB,GAAO,UAAAC,EAAY,IAAuB,CAC5F,KAAM,CAAE,KAAMC,CAAA,EAAatlC,GAAA,EACrB,CAAE,SAAUulC,EAAa,GAAIC,CAAA,EAAcC,GAAA,EAC3CxrC,EAAWC,GAAA,EACXiW,EAAUzS,IAAgB,GAC1B0S,EAAerC,GAAiB,GAAGoC,CAAO,GAAGpC,CAAI,GACjD,CAACpP,EAAMC,CAAO,EAAItE,EAAAA,SAA0B,IAAI,EAChD,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAI,EACrC,CAACC,EAAQC,CAAS,EAAIF,EAAAA,SAAS,EAAK,EACpC,CAAC0O,EAAWC,CAAY,EAAI3O,EAAAA,SAAkB,UAAU,EACxD,CAACorC,EAAsBC,CAAuB,EAAIrrC,EAAAA,SAAS,EAAK,EAGhE,CAACsrC,EAAaC,CAAc,EAAIvrC,EAAAA,SAA6B,CAAA,CAAE,EAC/D,CAACwrC,EAAWC,CAAY,EAAIzrC,EAAAA,SAAqB,CAAA,CAAE,EACnD,CAAC0rC,EAAkBC,CAAmB,EAAI3rC,EAAAA,SAAgC,CAAA,CAAE,EAC5E,CAAC4rC,EAAgBC,CAAiB,EAAI7rC,EAAAA,SAA2B,CAAA,CAAE,EACnE,CAAC8rC,EAAmBC,CAAoB,EAAI/rC,EAAAA,SAA8B,CAAA,CAAE,EAC5E,CAACgsC,EAAqBC,CAAsB,EAAIjsC,EAAAA,SAAc,IAAI,EAClE,CAACksC,EAAgBC,CAAiB,EAAInsC,EAAAA,SAAS,EAAK,EACpD,CAACosC,EAAcC,CAAe,EAAIrsC,EAAAA,SAAS,EAAK,EAChD,CAACssC,EAAqBC,CAAsB,EAAIvsC,EAAAA,SAAS,EAAK,EAC9D,CAAC2V,GAAuBC,EAAwB,EAAI5V,EAAAA,SAAS,EAAK,EAClE,CAACwsC,EAAmBC,CAAoB,EAAIzsC,EAAAA,SAAS,EAAK,EAC1D,CAAC0sC,EAA2BC,CAA4B,EAAI3sC,EAAAA,SAAS,EAAK,EAC1E,CAAC2oB,EAAsBC,CAAuB,EAAI5oB,EAAAA,SAAS,EAAK,EAChE,CAAC6oB,EAAiBC,EAAkB,EAAI9oB,EAAAA,SAAkC,IAAI,EAC9E,CAAC+oB,GAAwBC,EAAyB,EAAIhpB,EAAAA,SAAS,EAAK,EACpE,CAACipB,GAAiBC,EAAkB,EAAIlpB,EAAAA,SAAkC,IAAI,EAC9E,CAAC4sC,GAAgBC,EAAiB,EAAI7sC,EAAAA,SAAS,EAAK,EACpD,CAAC8sC,GAAcC,EAAe,EAAI/sC,EAAAA,SAAgC,IAAI,EAG5EM,EAAAA,UAAU,IAAM,CASd,GARIwqC,IAAoBG,GAAeC,GACrC8B,GAAA,EAEAC,GAAA,EAIa,IAAI,gBAAgB,OAAO,SAAS,MAAM,EAC9C,IAAI,sBAAsB,IAAM,OAAQ,CACjDN,EAA6B,EAAI,EAEjC,MAAMO,GAAS,OAAO,SAAS,SAC/B,OAAO,QAAQ,aAAa,CAAA,EAAI,GAAIA,EAAM,CAC5C,CACF,EAAG,CAACpC,EAAiBG,CAAW,CAAC,EAEjC3qC,EAAAA,UAAU,IAAM,CAehB,EAAG,CAACoO,EAAWo8B,EAAiBzmC,CAAI,CAAC,EAErC/D,EAAAA,UAAU,IAAM,CACd,GAAI,CAAC+D,EAAM,QAEkB,SAAY,CACvC,MAAM+1B,GAAW,MAAMO,GAAqB,OAAOt2B,EAAK,EAAE,CAAC,EAC3DwnC,EAAkBzR,GAAS,OAAQX,IAAYA,GAAQ,aAAe,SAAS,CAAC,EAChF,MAAMc,GAAc,MAAMK,GAAwB,OAAOv2B,EAAK,EAAE,CAAC,EACjE0nC,EAAqBxR,EAAW,CAClC,GAEA,CACF,EAAG,CAACl2B,GAAM,EAAE,CAAC,EAEb,MAAM2oC,GAAqB,SAAY,CACrC,GAAI,GAAC/B,GAAe,CAACC,GAErB,GAAI,CACF,IAAIiC,EACJ,GAAIpC,GAAaG,EACfiC,EAAU,wBAAwBjC,CAAS,WAClCD,EACTkC,EAAU,qBAAqBlC,CAAW,OAE1C,OAAM,IAAI,MAAM,6BAA6B,EAG/C,MAAMpmC,GAAW,MAAM,MAAMiR,EAAYq3B,CAAO,CAAC,EACjD,GAAI,CAACtoC,GAAS,GACZ,MAAM,IAAI,MAAM,gBAAgB,EAElC,MAAM1G,GAAO,MAAM0G,GAAS,KAAA,EAC5BP,EAAQnG,GAAK,IAAI,EACjBotC,EAAeptC,GAAK,SAAW,EAAE,EACjCstC,EAAattC,GAAK,OAAS,EAAE,EAC7B8tC,EAAuB9tC,GAAK,oBAAoB,CAClD,OAASU,EAAO,CACd,QAAQ,MAAM,kCAAmCA,CAAK,CACxD,QAAA,CACEgD,EAAW,EAAK,CAClB,CACF,EAEMurC,GAAwB3mC,GAA8B,CAC1DqiB,GAAmBriB,CAAO,EAC1BmiB,EAAwB,EAAI,CAC9B,EAEMykB,EAA4B5mC,GAA8B,CAC9DyiB,GAAmBziB,CAAO,EAC1BuiB,GAA0B,EAAI,CAChC,EAEMskB,EAAkB7T,GAA4B,CAClDsT,GAAgBtT,CAAO,EACvBoT,GAAkB,EAAI,CACxB,EAEMU,EAA4BC,GAAqC,CACrE5kB,EAAwB,EAAK,EAC7BE,GAAmB,IAAI,EAGvByiB,MAAuB/lC,GAAK,IAAI0J,IAC9BA,GAAK,KAAOs+B,EAAe,GAAKA,EAAiBt+B,EAAA,CAClD,CACH,EAEMu+B,EAA6B,SAAY,CAC7C,GAAKxkB,GAEL,GAAI,CACF,MAAMpkB,EAAW,MAAM,MAAMiR,EAAY,gBAAgBmT,GAAgB,EAAE,EAAE,EAAG,CAC9E,OAAQ,SACR,YAAa,SAAA,CACd,EAED,GAAIpkB,EAAS,GAEX0mC,EAAe/lC,IAAQA,GAAK,OAAO0J,IAAQA,GAAK,KAAO+Z,GAAgB,EAAE,CAAC,EAC1ED,GAA0B,EAAK,EAC/BE,GAAmB,IAAI,MAClB,CACL,MAAMpe,GAAY,MAAMjG,EAAS,KAAA,EACjC,MAAMiG,GAAU,OAAS,0BAA0B,CACrD,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,EAC9C,MAAM,0BAA0B,CAClC,CACF,EAEMouC,GAAmB,SAAY,CAEnC,GAAIjC,GAAY,CAACF,EAAiB,CAChC,QAAQ,IAAI,0CAA2CE,CAAQ,EAC/D1mC,EAAQ0mC,CAAQ,EAChBnpC,EAAW,EAAK,EAChB,MACF,CAGA,GAAI,CACF,MAAM4L,EAAY,aAAa,QAAQ,WAAW,EAC5C8F,GAAuB,CAC3B,eAAgB,kBAAA,EAGd9F,IACF8F,GAAQ,cAAmB,UAAU9F,CAAS,IAGhD,MAAM5I,GAAW,MAAM,MAAMiR,EAAY,mBAAmB,EAAG,CAAE,QAAAvC,GAAS,YAAa,UAAW,EAClG,GAAI1O,GAAS,GAAI,CACf,MAAM1G,GAAO,MAAM0G,GAAS,KAAA,EACxB1G,GAAK,SACPmG,EAAQnG,GAAK,IAAI,CAErB,CACF,OAASU,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,CACtD,QAAA,CACEgD,EAAW,EAAK,CAClB,CACF,EA4EM6rC,GAAwB,SAAY,CACxC,GAAKrpC,EAGL,IAAI2mC,GAAY,CAACA,EAAS,GAAI,CAC5B,QAAQ,IAAI,+CAA+C,EAC3DW,EAAoB,CAAA,CAAE,EACtBY,EAAuB,EAAK,EAC5B,MACF,CAGA,GAAI,CAACloC,EAAK,GAAI,CACZsnC,EAAoB,CAAA,CAAE,EACtBY,EAAuB,EAAK,EAC5B,MACF,CAEAA,EAAuB,EAAI,EAC3B,GAAI,CACF,MAAM1nC,EAAW,MAAM,MAAMiR,EAAY,8BAA8B,EAAG,CACxE,YAAa,SAAA,CACd,EACD,GAAIjR,EAAS,GAAI,CACf,MAAM8oC,GAAe,MAAM9oC,EAAS,KAAA,EACpC8mC,EAAoBgC,EAAY,CAClC,MACEhC,EAAoB,CAAA,CAAE,CAE1B,OAAS9sC,EAAO,CACd,QAAQ,MAAM,qCAAsCA,CAAK,EACzD8sC,EAAoB,CAAA,CAAE,CACxB,QAAA,CACEY,EAAuB,EAAK,CAC9B,EACF,EA2BMqB,GAA8BxD,GAA0B,CAC5D9lC,EAAQ8lC,CAAW,EACnBiB,EAAwB,EAAK,CAC/B,EAEMwC,GAAmB,SAAY,CAC/BxpC,GAAM,gBACR,MAAM,UAAU,UAAU,UAAUA,EAAK,aAAa,EACtDnE,EAAU,EAAI,EACd,WAAW,IAAMA,EAAU,EAAK,EAAG,GAAI,EAE3C,EAEM4tC,GAAoB37B,GAAe,CAEvC,MAAM47B,GAAQ1pC,GAAM,OAAS,EACvB2pC,GAAiB,IAASD,GAC1BE,GAAc,KAAUF,GAAQ,GAChCG,IAAa/7B,EAAK67B,KAAmBC,GAAcD,IAAmB,IAC5E,OAAO,KAAK,IAAI,EAAG,KAAK,IAAI,IAAKE,EAAQ,CAAC,CAC5C,EAEMC,GAAsB9yB,GAAqB,CAC/C,OAAQA,EAAS,cAAY,CAC3B,IAAK,UACH,OAAOpa,EAAAA,IAACqwB,GAAA,CAAM,UAAU,SAAA,CAAU,EACpC,IAAK,YACL,IAAK,UACL,IAAK,WACL,QACE,OAAOrwB,EAAAA,IAACmtC,GAAA,CAAM,UAAU,SAAA,CAAU,CAAA,CAExC,EAEMjpB,GAAsBC,GAAuB,CACjD,OAAQA,EAAA,CACN,IAAK,OACH,MAAO,8BACT,IAAK,SACH,MAAO,gCACT,IAAK,OACH,MAAO,0BACT,QACE,MAAO,2BAAA,CAEb,EAEMC,GAAkB7I,GAAmB,CACzC,OAAQA,EAAA,CACN,IAAK,SACH,MAAO,8BACT,IAAK,UACH,MAAO,gCACT,IAAK,WACH,MAAO,4BACT,IAAK,YACH,MAAO,gCACT,IAAK,WACH,MAAO,0BACT,QACE,MAAO,2BAAA,CAEb,EAEA,GAAI5a,EACF,OACEX,MAAC,OAAI,UAAU,iDACb,eAAC,MAAA,CAAI,UAAU,oFAAoF,CAAA,CACrG,EAKJ,GAAI,CAACoD,GAAQ,CAACzC,GAAW,CAACkpC,GAAmB,CAACE,EAC5C,aACG,MAAA,CAAI,UAAU,2CACb,SAAAhqC,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAAC,EAAAA,IAACoF,GAAA,CAAK,UAAU,sCAAA,CAAuC,EACvDpF,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,iBAAc,QACnE,IAAA,CAAE,UAAU,qBACV,SAAA6pC,EACG,sEACA,2EAEN,EACA7pC,EAAAA,IAACsF,GAAA,CACC,GAAG,IACH,UAAU,6JACX,SAAA,YAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,EAKJ,MAAM8nC,GAAOvD,EAAkB,CAC7B,CAAE,GAAI,WAAY,MAAO,WAAY,KAAMzkC,EAAA,EAC3C,CAAE,GAAI,UAAW,MAAO,UAAW,KAAMyJ,GAAU,MAAOw7B,EAAY,MAAA,EACtE,GAAIjnC,GAAM,YAAc,aAAe,CAAC,CAAE,GAAI,QAAS,MAAO,gBAAiB,KAAMhC,GAAK,MAAOmpC,EAAU,MAAA,CAAQ,EAAI,CAAA,EACvH,CAAE,GAAI,eAAgB,MAAO,eAAgB,KAAMx6B,EAAA,CAAM,EACvD,CACF,CAAE,GAAI,WAAY,MAAO,WAAY,KAAM3K,EAAA,EAC3C,CAAE,GAAI,UAAW,MAAO,UAAW,KAAMyJ,GAAU,MAAOw7B,EAAY,MAAA,EACtE,CAAE,GAAI,QAAS,MAAO,gBAAiB,KAAMjpC,GAAK,MAAOmpC,EAAU,MAAA,EACnE,CAAE,GAAI,eAAgB,MAAO,eAAgB,KAAM8C,GAAQ,MAAO5C,EAAiB,MAAA,EACnF,CAAE,GAAI,eAAgB,MAAO,eAAgB,KAAM16B,EAAA,CAAM,EAG3D,OACEhQ,EAAAA,KAAC,MAAA,CAAI,UAAU,mDAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCACX,SAAA6pC,EAAkB,GAAGzmC,GAAM,cAAgBA,GAAM,UAAY,MAAM,aAAe,UACrF,QACC,IAAA,CAAE,UAAU,gBACV,SAAAymC,EACG,mCACA,4CAAA,CAEN,CAAA,EACF,EAGA9pC,EAAAA,KAAC,MAAA,CAAI,UAAU,wEAEb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,yEACZ,SAAAoD,GAAM,WACLrD,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,IAAKoD,EAAK,WACV,IAAI,iBACJ,UAAU,4BAAA,CAAA,EAEZpD,EAAAA,IAAC,MAAA,CAAI,UAAU,oFAAA,CAAqF,CAAA,CAAA,CACtG,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,yEAAyE,EAI5F,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oBAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0FAEb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,gBACb,SAAAA,MAAC,MAAA,CAAI,UAAU,WACb,SAAAA,EAAAA,IAAC,MAAA,CACC,IAAKoD,GAAM,YAAc2mC,GAAU,kBAAkB,SAAW,sBAChE,IAAI,UACJ,UAAU,6EAAA,CAAA,EAEd,CAAA,CACF,EAGC,CAACF,GACA9pC,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMqqC,EAAwB,EAAI,EAC3C,UAAU,mPAEV,SAAA,CAAApqC,EAAAA,IAAC81B,GAAA,CAAM,UAAU,SAAA,CAAU,EAC3B91B,EAAAA,IAAC,QAAK,SAAA,cAAA,CAAY,CAAA,CAAA,CAAA,CACpB,EAEJ,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,wCACX,SAAAoD,GAAM,eAAiBymC,EAAkBzmC,GAAM,SAAW2mC,GAAU,kBAAkB,OAAS,OAClG,EACAhqC,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAA,OAAC,OAAA,CAAK,SAAA,CAAA,IAAEqD,GAAM,UAAY,kBAAA,EAAmB,EAC7CpD,EAAAA,IAAC,QAAK,SAAA,GAAA,CAAC,SACN,OAAA,CAAK,SAAA,CAAA,SAAOoD,GAAM,OAAS,CAAA,EAAE,EAC7BA,GAAM,YAAc,cACnBrD,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC,QAAK,SAAA,GAAA,CAAC,EACPA,EAAAA,IAAC,OAAA,CAAK,UAAU,oGAAoG,SAAA,YAAA,CAEpH,CAAA,CAAA,CACF,CAAA,EAEJ,EAEC+qC,GACChrC,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAACuF,GAAA,CAAQ,QAAQ,yBAAyB,QAAS,GACjD,SAAAxF,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACmB,GAAA,CAAO,UAAU,yBAAA,CAA0B,EAC5CnB,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,aAAU,EAClDD,EAAAA,KAAC,OAAA,CAAK,UAAU,gCAAgC,SAAA,CAAA,IAAEgrC,EAAoB,YAAc,KAAA,CAAA,CAAM,CAAA,CAAA,CAC5F,CAAA,CACF,EACA/qC,EAAAA,IAACuF,IAAQ,QAAQ,iBAAiB,QAAS,GACzC,SAAAxF,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,SAAM,EAC9CA,EAAAA,IAAC,QAAK,UAAU,8BAAgC,YAAoB,iBAAmB,GAAG,QAAQ,CAAC,CAAA,CAAE,CAAA,CAAA,CACvG,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EAEJ,GAGEoD,EAAK,aAAeA,EAAK,eACzBrD,OAAC,MAAA,CAAI,UAAU,8DACZ,SAAA,CAAAqD,EAAK,aACJrD,EAAAA,KAAC,IAAA,CACC,KAAMqD,EAAK,YACX,OAAO,SACP,IAAI,sBACJ,UAAU,8FAEV,SAAA,CAAApD,EAAAA,IAACid,GAAA,CAAa,UAAU,SAAA,CAAU,EAClCjd,EAAAA,IAAC,QAAK,SAAA,SAAA,CAAO,CAAA,CAAA,CAAA,EAIhBoD,EAAK,eAAiB,IAAM,CAC3B,GAAI,CACF,MAAMilC,EAAc,KAAK,MAAMjlC,EAAK,YAAY,EAChD,OAAO,OAAO,QAAQilC,CAAW,EAAE,IAAI,CAAC,CAACjuB,GAAUkzB,EAAM,IACvDvtC,EAAAA,KAAC,MAAA,CAAmB,UAAU,4CAC5B,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,iCAAkC,SAAA,CAAAqa,GAAS,GAAA,EAAC,EAC5Dpa,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAW,SAAAstC,EAAA,CAAiB,CAAA,CAAA,EAFpClzB,EAGV,CACD,CACH,MAAQ,CACN,OAAO,IACT,CACF,GAAA,CAAG,EACL,EAIFpa,EAAAA,IAAC,MAAA,CAAI,UAAU,4BACb,SAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,gCACV,SAAAoD,GAAM,MAAQymC,EAAkB,oBAAsB,sCACzD,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGA9pC,EAAAA,KAAC,MAAA,CAAI,UAAU,wEAEb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,2BACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,oCACZ,SAAAotC,GAAK,IAAKx+B,GAAQ,CACjB,MAAMpN,GAAOoN,EAAI,KACjB,OACE7O,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAM2N,EAAakB,EAAI,EAAa,EAC7C,UAAW,iHACTnB,IAAcmB,EAAI,GACd,oCACA,4EACN,GAEA,SAAA,CAAA5O,EAAAA,IAACwB,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BxB,EAAAA,IAAC,OAAA,CAAM,SAAA4O,EAAI,KAAA,CAAM,EAChBA,EAAI,QAAU,QACb5O,EAAAA,IAAC,QAAK,UAAU,uEACb,WAAI,KAAA,CACP,CAAA,CAAA,EAbG4O,EAAI,EAAA,CAiBf,CAAC,EACH,EACF,EAGA7O,EAAAA,KAAC,MAAA,CAAI,UAAU,aACZ,SAAA,CAAA0N,IAAc,YACb1N,OAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACZ,SAAA,CAAA,CAAC8pC,SACC,MAAA,CAAI,UAAU,wFACb,SAAA9pC,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAqC,SAAA,iBAAc,EAChED,EAAAA,KAAC,IAAA,CAAE,UAAU,oCAAoC,SAAA,CAAA,KAAIqD,GAAM,oBAAsB,GAAI,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EAClG,EACApD,EAAAA,IAAC,OAAI,UAAU,qEACb,eAAC+O,GAAA,CAAW,UAAU,yBAAyB,CAAA,CACjD,CAAA,CAAA,CACF,CAAA,CACF,QAGD,MAAA,CAAI,UAAU,mFACb,SAAAhP,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,oCAAoC,SAAA,YAAS,EAC1DA,EAAAA,IAAC,KAAE,UAAU,mCAAqC,aAAM,WAAa,GAAG,gBAAe,CAAE,CAAA,EAC3F,EACAA,EAAAA,IAAC,OAAI,UAAU,oEACb,eAACsB,EAAA,CAAK,UAAU,wBAAwB,CAAA,CAC1C,CAAA,CAAA,CACF,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,uFACb,SAAAvB,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,sCAAsC,SAAA,YAAS,EAC5DA,EAAAA,IAAC,KAAE,UAAU,qCAAuC,aAAM,gBAAkB,GAAG,gBAAe,CAAE,CAAA,EAClG,EACAA,EAAAA,IAAC,OAAI,UAAU,sEACb,eAACgP,GAAA,CAAM,UAAU,0BAA0B,CAAA,CAC7C,CAAA,CAAA,CACF,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,yFACb,SAAAjP,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,sCAAsC,SAAA,QAAK,QACvD,IAAA,CAAE,UAAU,qCAAsC,SAAAoD,GAAM,OAAS,CAAA,CAAE,CAAA,EACtE,EACApD,EAAAA,IAAC,OAAI,UAAU,sEACb,eAAC+P,GAAA,CAAM,UAAU,0BAA0B,CAAA,CAC7C,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGAhQ,EAAAA,KAAC,MAAA,CAAI,UAAU,oFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,iBAAc,EAClED,EAAAA,KAAC,OAAA,CAAK,UAAU,2EAA2E,SAAA,CAAA,SAClFqD,GAAM,OAAS,CAAA,CAAA,CACxB,CAAA,EACF,EACArD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAA,OAAC,OAAA,CAAO,SAAA,EAAAqD,GAAM,WAAa,GAAG,eAAA,EAAiB,KAAA,EAAG,SACjD,OAAA,CAAS,SAAA,IAAAA,GAAM,OAAS,GAAK,GAAK,KAAM,eAAA,EAAiB,KAAA,CAAA,CAAG,CAAA,EAC/D,EACApD,EAAAA,IAAC,MAAA,CAAI,UAAU,sCACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,8FACV,MAAO,CAAE,MAAO,GAAG6sC,GAAiBzpC,GAAM,WAAa,CAAC,CAAC,GAAA,CAAI,CAAA,EAEjE,QACC,IAAA,CAAE,UAAU,wBACV,SAAAymC,EACG,GAAGzmC,GAAM,oBAAsB,CAAC,uBAChC,KAAMA,GAAM,OAAS,GAAK,GAAK,KAASA,GAAM,WAAa,EAAE,sBAAA,CAEnE,CAAA,CAAA,CACF,CAAA,EACF,EAGC,CAACymC,GACA9pC,EAAAA,KAAC,MAAA,CAAI,UAAU,mFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,oEACb,eAACqB,GAAA,CAAW,UAAU,wBAAwB,CAAA,CAChD,SACC,MAAA,CACC,SAAA,CAAArB,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,oBAAiB,EACrEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,kDAAA,CAAgD,CAAA,CAAA,CACvF,CAAA,EACF,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM0rC,EAA6B,EAAI,EAChD,UAAU,qLACX,SAAA,aAAA,CAAA,CAED,EACF,EACA3rC,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,UAAO,EAC9CA,EAAAA,IAAC,MAAA,CAAI,UAAU,0BAA0B,SAAA,kBAAA,CAAgB,CAAA,EAC3D,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,QAAK,EAC5CA,EAAAA,IAAC,MAAA,CAAI,UAAU,0BAA0B,SAAA,SAAA,CAAO,CAAA,EAClD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,gBAAa,EACpDA,EAAAA,IAAC,MAAA,CAAI,UAAU,0BAA0B,SAAA,OAAA,CAAK,CAAA,CAAA,CAChD,CAAA,CAAA,CACF,CAAA,EACF,EAID,CAAC6pC,GACA9pC,EAAAA,KAAC,MAAA,CAAI,UAAU,uFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,mBAAgB,EACtEA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMwrC,EAAqB,EAAI,EACxC,UAAU,0GACX,SAAA,kBAAA,CAAA,CAED,EACF,EACAzrC,EAAAA,KAAC,MAAA,CAAI,UAAU,sFACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,qBAAkB,EAC9DA,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,6CAAA,CAA2C,CAAA,EACpF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,yDACb,SAAAoD,EAAK,cACR,QACCmC,GAAA,CAAQ,QAASvG,EAAS,UAAY,YAAa,QAAS,GAC3D,SAAAgB,EAAAA,IAAC,SAAA,CACC,QAAS4sC,GACT,UAAU,gFAET,SAAA5tC,QAAUgK,GAAA,CAAM,UAAU,UAAU,EAAKhJ,EAAAA,IAACG,GAAA,CAAK,UAAU,SAAA,CAAU,CAAA,CAAA,CACtE,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGFH,EAAAA,IAACutC,GAAA,CACC,SAAU5C,EACV,QAAS,CAACd,GAAoBE,GAAY3mC,GAAQ2mC,EAAS,KAAO3mC,EAAK,GACvE,QAASipC,EACT,OAAS7T,GAAY95B,EAAS,uBAAuB85B,EAAQ,UAAU,EAAE,CAAA,CAAA,EAG3Ex4B,EAAAA,IAACwtC,GAAA,CACC,YAAa3C,EACb,OAAStR,GAAe76B,EAAS,gBAAgB66B,EAAW,EAAE,EAAE,CAAA,CAAA,CAClE,EACF,EAGD9rB,IAAc,WACb1N,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,eAAY,EAChEA,EAAAA,IAACsF,GAAA,CACC,GAAG,UACH,UAAU,qKACX,SAAA,oBAAA,CAAA,CAED,EACF,EAEC2lC,EACCjrC,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACb,eAAC,MAAA,CAAI,UAAU,mFAAA,CAAoF,CAAA,CACrG,EACEqqC,EAAY,OAAS,EACvBrqC,EAAAA,IAAC,MAAA,CAAI,UAAU,uDACZ,SAAAqqC,EAAY,IAAK7kC,GAChBzF,EAAAA,KAAC,MAAA,CAAqB,UAAU,gGAC9B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAAmtC,GAAmB1nC,EAAQ,QAAQ,EACpCxF,EAAAA,IAAC,OAAA,CAAK,UAAU,+CAAgD,WAAQ,QAAA,CAAS,CAAA,EACnF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAA,CAAC8pC,GACA9pC,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAACuF,GAAA,CAAQ,QAAQ,eAAe,QAAS,GACvC,SAAAvF,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmsC,GAAqB3mC,CAAO,EAC3C,UAAU,mFAEV,SAAAxF,EAAAA,IAAC81B,GAAA,CAAM,UAAU,SAAA,CAAU,CAAA,CAAA,EAE/B,EACA91B,EAAAA,IAACuF,GAAA,CAAQ,QAAQ,iBAAiB,QAAS,GACzC,SAAAvF,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMosC,EAAyB5mC,CAAO,EAC/C,UAAU,gFAEV,SAAAxF,EAAAA,IAAC,OAAI,UAAU,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,YACjE,eAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,+HAA+H,CAAA,CACtM,CAAA,CAAA,CACF,CACF,CAAA,EACF,EAEFA,EAAAA,IAACsF,GAAA,CACC,GAAI,YAAYE,EAAQ,EAAE,GAC1B,UAAU,0DAEV,SAAAxF,EAAAA,IAACid,GAAA,CAAa,UAAU,SAAA,CAAU,CAAA,CAAA,CACpC,CAAA,CACF,CAAA,EACF,EACAjd,EAAAA,IAAC,KAAA,CAAG,UAAU,gDAAiD,WAAQ,MAAM,EAC7EA,EAAAA,IAAC,IAAA,CAAE,UAAU,0CAA2C,WAAQ,YAAY,EAC5ED,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,gBACb,SAAA,CAAAyF,EAAQ,kBAAoB,EAAE,IAAEA,EAAQ,cAAgB,EAAE,SAAA,EAC7D,EACAzF,EAAAA,KAAC,OAAA,CAAK,UAAU,+BAA+B,SAAA,CAAA,KAC1CyF,EAAQ,aAAe,GAAG,QAAQ,CAAC,EAAE,QAAA,CAAA,CAC1C,CAAA,CAAA,CACF,CAAA,CAAA,EA9CQA,EAAQ,EA+ClB,CACD,EACH,EAEAzF,OAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC6O,GAAA,CAAS,UAAU,sCAAA,CAAuC,EAC3D7O,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,iBAAc,EACvEA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,iDAA8C,EAChFA,EAAAA,IAACsF,GAAA,CACC,GAAG,UACH,UAAU,6JACX,SAAA,2BAAA,CAAA,CAED,CAAA,CACF,CAAA,EAEJ,EAGDmI,IAAc,SACb1N,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,oBAAiB,EACpE,CAAC6pC,GAAmBzmC,GAAQA,EAAK,YAAc,cAC9CpD,EAAAA,IAACsF,GAAA,CACC,GAAG,qBACH,UAAU,uKACX,SAAA,iBAAA,CAAA,CAED,EAEJ,EAEC6lC,EACCnrC,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACb,eAAC,MAAA,CAAI,UAAU,mFAAA,CAAoF,CAAA,CACrG,EACEuqC,EAAU,OAAS,EACrBvqC,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAAuqC,EAAU,IAAKz7B,GACd/O,EAAAA,KAAC,MAAA,CAAkB,UAAU,oDAC3B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAoC,SAAA8O,EAAK,MAAM,EAC7D9O,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAsB,WAAK,YAAY,EACpDD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,MAAC,QAAK,UAAW,8CAA8CkkB,GAAmBpV,EAAK,UAAU,CAAC,GAC/F,SAAAA,EAAK,WAAW,OAAO,CAAC,EAAE,YAAA,EAAgBA,EAAK,WAAW,MAAM,CAAC,EACpE,EACA9O,MAAC,QAAK,UAAW,8CAA8CokB,GAAetV,EAAK,MAAM,CAAC,GACvF,SAAAA,EAAK,OAAO,OAAO,CAAC,EAAE,YAAA,EAAgBA,EAAK,OAAO,MAAM,CAAC,EAC5D,EACA/O,EAAAA,KAAC,OAAA,CAAK,UAAU,wBACb,SAAA,CAAA+O,EAAK,sBAAwB,EAAE,eAAA,CAAA,CAClC,CAAA,CAAA,CACF,CAAA,EACF,EACA/O,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,6BAA6B,SAAA,SAAM,EAClDD,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACZ,SAAA,CAAA+O,EAAK,iBAAmB,EAAE,OAAA,EAC7B,EACA/O,EAAAA,KAAC,MAAA,CAAI,UAAU,6BAA6B,SAAA,CAAA,SACnC+O,EAAK,UAAY,EAAE,OAAA,CAAA,CAC5B,CAAA,CAAA,CACF,CAAA,EACF,EACA/O,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAC,EAAAA,IAACghB,GAAA,CAAS,UAAU,SAAA,CAAU,SAC7B,OAAA,CAAK,SAAA,CAAA,WAAS,IAAI,KAAKlS,EAAK,UAAU,EAAE,mBAAA,CAAmB,CAAA,CAAE,CAAA,EAChE,EACA/O,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,QAAK,EACrCD,EAAAA,KAAC,OAAA,CAAK,UAAU,8BACb,SAAA,CAAA+O,EAAK,oBAAsB,EAAE,IAAEA,EAAK,gBAAkB,EAAE,OAAA,CAAA,CAC3D,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,EAtCQA,EAAK,EAuCf,CACD,EACH,EAEA/O,OAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAACoB,GAAA,CAAI,UAAU,sCAAA,CAAuC,EACtDpB,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,mBAAgB,EACzEA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,0CAAuC,EACzEA,EAAAA,IAACsF,GAAA,CACC,GAAG,qBACH,UAAU,+JACX,SAAA,wBAAA,CAAA,CAED,CAAA,CACF,CAAA,EAEJ,EAGDmI,IAAc,gBACb1N,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,oBAAiB,EAEpEqrC,QACE,MAAA,CAAI,UAAU,wCACb,SAAArrC,EAAAA,IAAC,MAAA,CAAI,UAAU,mFAAA,CAAoF,CAAA,CACrG,EACEyqC,EAAiB,OAAS,EAC5BzqC,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAAyqC,EAAiB,IAAKlD,GACrBvnC,EAAAA,IAACsnC,GAAA,CAEC,YAAAC,EACA,oBAAqB,IAAM,CACzBkF,GAAA,CACF,CAAA,EAJKlF,EAAY,EAAA,CAMpB,CAAA,CACH,EAEAxnC,OAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAACqtC,GAAA,CAAO,UAAU,sCAAA,CAAuC,EACzDrtC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,sBAAmB,EAC5EA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,0CAAuC,EACzEA,EAAAA,IAACsF,GAAA,CACC,GAAG,QACH,UAAU,6JACX,SAAA,sBAAA,CAAA,CAED,CAAA,CACF,CAAA,EAEJ,EAGDmI,IAAc,gBACb1N,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,eAAY,EAChEA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM2U,GAAyB,EAAI,EAC5C,UAAU,2KACX,SAAA,UAAA,CAAA,CAED,EACF,EAEA5U,EAAAA,KAAC,MAAA,CAAI,UAAU,uDAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qGACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,qFACb,eAACmB,GAAA,CAAO,UAAU,0BAA0B,CAAA,CAC9C,EACAnB,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,cAAW,EAC9DA,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,sCAAA,CAAoC,CAAA,EAC7E,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,+FACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,mFACb,eAACsB,EAAA,CAAK,UAAU,wBAAwB,CAAA,CAC1C,EACAtB,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,kBAAe,EAChEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,mCAAA,CAAiC,CAAA,EACxE,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mGACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,qFACb,eAAC+P,GAAA,CAAM,UAAU,0BAA0B,CAAA,CAC7C,EACA/P,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,aAAU,EAC7DA,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,qBAAA,CAAmB,CAAA,CAAA,CAC5D,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,EACF,EAGAA,EAAAA,IAACooC,GAAA,CACC,OAAQ+B,EACR,QAAS,IAAMC,EAAwB,EAAK,EAC5C,KAAAhnC,EACA,UAAWupC,EAAA,CAAA,EAGb3sC,EAAAA,IAACwQ,GAAA,CACC,OAAQkE,GACR,QAAS,IAAMC,GAAyB,EAAK,EAC7C,KAAAvR,CAAA,CAAA,EAGFpD,EAAAA,IAACkmC,GAAA,CACC,OAAQqF,EACR,QAAS,IAAMC,EAAqB,EAAK,EACzC,KAAApoC,EACA,UAAW,IAAM,CAEf4oC,GAAA,CACF,CAAA,CAAA,EAGFhsC,EAAAA,IAAC8nC,GAAA,CACC,OAAQ2D,EACR,QAAS,IAAMC,EAA6B,EAAK,EACjD,KAAAtoC,EACA,UAAW,IAAM,CAEf4oC,GAAA,CACF,CAAA,CAAA,EAGFhsC,EAAAA,IAACupC,GAAA,CACC,OAAQoC,GACR,QAAS,IAAMC,GAAkB,EAAK,EACtC,QAASC,GACT,SAAUzoC,GAAM,GAAK,OAAOA,EAAK,EAAE,EAAI,MAAA,CAAA,EAGxCwkB,GACC5nB,EAAAA,IAACkf,GAAA,CACC,OAAQwI,EACR,QAAS,IAAM,CACbC,EAAwB,EAAK,EAC7BE,GAAmB,IAAI,CACzB,EACA,UAAWykB,EACX,QAAS1kB,CAAA,CAAA,EAIb5nB,EAAAA,IAACof,GAAA,CACC,OAAQ0I,GACR,QAAS,IAAM,CACbC,GAA0B,EAAK,EAC/BE,GAAmB,IAAI,CACzB,EACA,UAAWukB,EACX,MAAM,iBACN,QAAS,oCAAoCxkB,IAAiB,KAAK,uEACnE,YAAY,SACZ,WAAW,SACX,KAAK,QAAA,CAAA,CACP,EACF,CAEJ,CAGO,MAAMylB,GAAc7D,GAE3B,SAAS2D,GAAsB,CAC7B,SAAApU,EACA,QAAAuU,EACA,QAAAC,EACA,OAAAlR,CACF,EAKG,CACD,MAAMmR,EAAkBzU,EAAS,OAAQX,GAAYA,EAAQ,aAAe,SAAS,EAErF,OAAKoV,EAAgB,OAKnB7tC,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0EACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,kBAAe,QAClE,IAAA,CAAE,UAAU,wBACV,SAAA0tC,EACG,yDACA,gDAAA,CACN,CAAA,EACF,EACA3tC,EAAAA,KAAC,OAAA,CAAK,UAAU,2EACb,SAAA,CAAA6tC,EAAgB,OAAO,SAAA,CAAA,CAC1B,CAAA,EACF,EAEA5tC,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAA4tC,EAAgB,IAAKpV,GACpBz4B,EAAAA,KAAC,MAAA,CAA6B,UAAU,8DACtC,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,IAAKw4B,EAAQ,kBACb,IAAKA,EAAQ,cACb,UAAU,mCAAA,CAAA,SAEX,MAAA,CACC,SAAA,CAAAx4B,EAAAA,IAAC,IAAA,CAAE,UAAU,8BAA+B,SAAAw4B,EAAQ,cAAc,EAClEz4B,EAAAA,KAAC,IAAA,CAAE,UAAU,wBACV,SAAA,CAAAy4B,EAAQ,aAAa,kBAAgBA,EAAQ,SAAS,QAAQ,CAAC,EAAE,WAASA,EAAQ,cAAc,QAAQ,CAAC,CAAA,CAAA,CAC5G,CAAA,CAAA,CACF,CAAA,EACF,EACAz4B,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMy8B,EAAOjE,CAAO,EAC7B,UAAU,oGACX,SAAA,MAAA,CAAA,EAGA,CAACkV,GACA1tC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM2tC,EAAQnV,CAAO,EAC9B,UAAU,mGACX,SAAA,YAAA,CAAA,CAED,CAAA,CAEJ,CAAA,GA7BQA,EAAQ,UA8BlB,CACD,CAAA,CACH,CAAA,EACF,EAtDO,IAwDX,CAEA,SAASgV,GAAyB,CAChC,YAAAlU,EACA,OAAAmD,CACF,EAGG,CACD,OAAKnD,EAAY,OAKfv5B,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,qBAAkB,EACtEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,yDAAA,CAAuD,CAAA,EAC9F,EACAD,EAAAA,KAAC,OAAA,CAAK,UAAU,+EACb,SAAA,CAAAu5B,EAAY,OAAO,UAAA,CAAA,CACtB,CAAA,EACF,EAEAt5B,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAAs5B,EAAY,IAAKC,GAChBx5B,EAAAA,KAAC,MAAA,CAAwB,UAAU,8DACjC,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,4BAA6B,SAAAu5B,EAAW,cAAc,EACnEx5B,EAAAA,KAAC,IAAA,CAAE,UAAU,wBACV,SAAA,CAAAw5B,EAAW,SAAS,YAAA,EAAc,MAAI,IAAI,KAAKA,EAAW,UAAU,EAAE,mBAAA,CAAmB,CAAA,CAC5F,CAAA,EACF,EACAx5B,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,mCAAoC,SAAAu5B,EAAW,gBAAgB,QAC3E,IAAA,CAAE,UAAU,wBACV,SAAAA,EAAW,SAAW,WAAaA,EAAW,OAC3C,WAAWA,EAAW,MAAM,GAC5B,WAAWA,EAAW,MAAM,EAAA,CAClC,CAAA,EACF,EACAv5B,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMy8B,EAAOlD,CAAU,EAChC,UAAU,oGACX,SAAA,MAAA,CAAA,CAED,CAAA,CACF,CAAA,GAtBQA,EAAW,EAuBrB,CACD,CAAA,CACH,CAAA,EACF,EA3CO,IA6CX,CChuCA,SAAwBsU,GAAoB,CAC1C,OAAAnmC,EACA,QAAAC,EACA,UAAAwU,EACA,aAAAC,EACA,QAAAsxB,EACA,eAAAI,EACA,WAAAvsB,EACA,YAAA8B,EACA,UAAAna,CACF,EAA6B,CAC3B,KAAM,CAACG,EAAQC,CAAS,EAAIvK,EAAAA,SAAiB,CAAC,EACxC,CAACgvC,EAAUC,CAAW,EAAIjvC,EAAAA,SAAoC,KAAK,EACnE,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACkvC,EAAYC,CAAa,EAAInvC,EAAAA,SAAyB,KAAK,EAElE,GAAI,CAAC2I,EAAQ,OAAO,KAEpB,MAAMsT,EAAe,MAAOxd,GAAuB,CAEjD,GADAA,EAAE,eAAA,EACE,EAAA6L,GAAU,GAEd,CAAAzI,EAAW,EAAI,EACf,GAAI,CACF,MAAMutC,EAAWF,IAAe,OAAS,gBAAgB9xB,CAAS,QAAU,gBAAgBA,CAAS,OAE/FvY,EAAW,MAAM,MAAMuqC,EAAU,CACrC,OAAQ,OACR,QAAS,CACP,eAAgB,kBAAA,EAElB,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,OAAA9kC,EACA,cAAe0kC,CAAA,CAChB,CAAA,CACF,EAED,GAAInqC,EAAS,GAAI,CACf,MAAMmN,EAAS,MAAMnN,EAAS,KAAA,EAC9BsF,EAAU6H,EAAO,YAAaA,EAAO,eAAe,EACpDpJ,EAAA,EACA2B,EAAU,CAAC,CACb,KAAO,CACL,MAAM1L,EAAQ,MAAMgG,EAAS,KAAA,EAC7B,MAAMhG,EAAM,OAAS,aAAaqwC,CAAU,UAAU,CACxD,CACF,OAASrwC,EAAO,CACd,QAAQ,MAAM,aAAaqwC,CAAU,YAAarwC,CAAK,EACvD,MAAM,aAAaqwC,CAAU,6BAA6B,CAC5D,QAAA,CACErtC,EAAW,EAAK,CAClB,EACF,EAEMwtC,EAAyB,IAAM,CACnC,MAAMC,EAAkBN,IAAa,SAAW1kC,EAAS,IAAOA,EAChE,OAAOga,EAAc,GAAKyqB,EAAiBO,GAAmBhrB,EAAc,CAC9E,EAEMirB,EAAmBC,GAAiB,CACxC,OAAQA,EAAA,CACN,IAAK,MAAO,OAAOvuC,EAAAA,IAAC+O,GAAA,CAAW,UAAU,SAAA,CAAU,EACnD,IAAK,OAAQ,OAAO/O,EAAAA,IAACkN,GAAA,CAAI,UAAU,SAAA,CAAU,EAC7C,IAAK,SAAU,OAAOlN,EAAAA,IAACoB,GAAA,CAAI,UAAU,SAAA,CAAU,EAC/C,QAAS,OAAOpB,EAAAA,IAAC+O,GAAA,CAAW,UAAU,SAAA,CAAU,CAAA,CAEpD,EAEA,aACG,MAAA,CAAI,UAAU,iFACb,SAAAhP,EAAAA,KAAC,MAAA,CAAI,UAAU,mEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAC,MAAC,KAAA,CAAG,UAAU,kCACX,SAAA0tC,EAAU,uBAAyB,cACtC,EACA1tC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,MAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAkC,SAAAoc,EAAa,EAC7Drc,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAA,OAAC,MAAA,CAAI,SAAA,CAAA,qBAAmB+tC,EAAe,QAAQ,CAAC,CAAA,EAAE,SACjD,MAAA,CAAI,SAAA,CAAA,iBAAevsB,EAAW,QAAQ,CAAC,CAAA,EAAE,SACzC,MAAA,CAAI,SAAA,CAAA,iBAAe8B,CAAA,CAAA,CAAY,CAAA,CAAA,CAClC,CAAA,EACF,EAGCqqB,GACC3tC,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,SAAM,EACtED,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMkuC,EAAc,MAAM,EACnC,UAAW,4DACTD,IAAe,OACX,iDACA,uCACN,GACD,SAAA,cAAA,CAAA,EAGDjuC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMkuC,EAAc,KAAK,EAClC,UAAW,4DACTD,IAAe,MACX,8CACA,uCACN,GACD,SAAA,aAAA,CAAA,CAED,EACF,QACC,IAAA,CAAE,UAAU,6BACV,SAAAA,IAAe,OACZ,+CACA,gDAAA,CAEN,CAAA,EACF,EAGFluC,EAAAA,KAAC,OAAA,CAAK,SAAUib,EAAc,UAAU,YAEtC,SAAA,CAAAjb,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,WAAQ,EACxEA,EAAAA,IAAC,MAAA,CAAI,UAAU,yBACX,SAAA,CAAC,MAAO,OAAQ,QAAQ,EAAY,IAAKuuC,GACzCxuC,EAAAA,KAAC,SAAA,CAEC,KAAK,SACL,QAAS,IAAMiuC,EAAYO,CAAI,EAC/B,UAAW,uGACTR,IAAaQ,EACT,iDACA,uCACN,GAEC,SAAA,CAAAD,EAAgBC,CAAI,EACrBvuC,EAAAA,IAAC,QAAM,SAAAuuC,CAAA,CAAK,CAAA,CAAA,EAVPA,CAAA,CAYR,CAAA,CACH,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAAxuC,EAAAA,KAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,CAAA,UACtDguC,IAAa,UAAY,wBAAA,EACnC,EACA/tC,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,IAAI,IACJ,KAAM+tC,IAAa,SAAW,MAAQ,OACtC,MAAO1kC,GAAU,GACjB,SAAW7L,GAAM8L,EAAU,OAAO9L,EAAE,OAAO,KAAK,CAAC,EACjD,UAAU,iHACV,YAAa,SAASuwC,EAAS,YAAA,CAAa,UAC5C,SAAQ,EAAA,CAAA,CACV,EACF,EAGC1kC,EAAS,GACRtJ,OAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,iBAAc,EACrED,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAA,OAAC,MAAA,CAAI,SAAA,CAAA,kBACa+tC,GAAkBC,IAAa,SAAW1kC,EAAS,IAAOA,IAAS,QAAQ,CAAC,CAAA,EAC9F,SACC,MAAA,CAAI,SAAA,CAAA,qBACgB+kC,EAAA,EAAyB,QAAQ,CAAC,CAAA,EACvD,EACAruC,EAAAA,KAAC,MAAA,CAAI,UAAU,6BAA6B,SAAA,CAAA,2BACjBquC,EAAA,EAA2B7sB,GAAY,QAAQ,CAAC,CAAA,CAAA,CAC3E,CAAA,CAAA,CACF,CAAA,EACF,EAGFvhB,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,SAAUW,GAAW0I,GAAU,EAC/B,UAAU,mLAET,WAAU,gBAAkB,GAAG4kC,IAAe,OAAS,OAAS,KAAK,UAAA,CAAA,CACxE,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CC7LA,SAAwBO,GAAc,CAAE,UAAAryB,EAAW,YAAA4F,EAAa,QAAA2rB,EAAU,IAA6B,CACrG,KAAM,CAACe,EAAUC,CAAW,EAAI3vC,EAAAA,SAAoB,CAAA,CAAE,EAChD,CAAC4vC,EAAYC,CAAa,EAAI7vC,EAAAA,SAAS,EAAE,EACzC,CAAC8vC,EAAYC,CAAa,EAAI/vC,EAAAA,SAAwB,IAAI,EAC1D,CAACgwC,EAAWC,CAAY,EAAIjwC,EAAAA,SAAS,EAAE,EACvC,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAAC85B,EAAYC,CAAa,EAAI/5B,EAAAA,SAAS,EAAK,EAElDM,EAAAA,UAAU,IAAM,CACd4vC,EAAA,CACF,EAAG,CAAC9yB,CAAS,CAAC,EAEd,MAAM8yB,EAAgB,SAAY,CAChC,GAAK9yB,EAEL,CAAAvb,EAAW,EAAI,EACf,GAAI,CACF,MAAMgD,EAAW,MAAM,MAAM,gBAAgBuY,CAAS,YAAa,CACjE,YAAa,SAAA,CACd,EAED,GAAIvY,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5B8qC,EAAYxxC,CAAI,CAClB,CACF,OAASU,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,CAClD,QAAA,CACEgD,EAAW,EAAK,CAClB,EACF,EAEMsuC,EAAgB,MAAO9jC,EAAc+jC,IAAsB,CAC/D,GAAI,GAAC/jC,EAAK,KAAA,GAAU,CAAC2W,GAErB,CAAA+W,EAAc,EAAI,EAClB,GAAI,CAWF,IAViB,MAAM,MAAM,gBAAgB3c,CAAS,YAAa,CACjE,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,aAAc/Q,EAAK,KAAA,EACnB,kBAAmB+jC,GAAY,IAAA,CAChC,CAAA,CACF,GAEY,GACX,MAAMF,EAAA,EACFE,GACFH,EAAa,EAAE,EACfF,EAAc,IAAI,GAElBF,EAAc,EAAE,MAGlB,OAAM,IAAI,MAAM,wBAAwB,CAE5C,OAAShxC,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7C,MAAM,2CAA2C,CACnD,QAAA,CACEk7B,EAAc,EAAK,CACrB,EACF,EAEMsW,EAAc,MAAOC,GAAsB,CAC/C,GAAKttB,EAEL,GAAI,EACe,MAAM,MAAM,yBAAyBstB,CAAS,QAAS,CACtE,OAAQ,OACR,YAAa,SAAA,CACd,GAEY,IACX,MAAMJ,EAAA,CAEV,OAASrxC,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,CAC9C,CACF,EAEM0xC,EAAgB,MAAOD,GAAsB,CACjD,GAAI,GAACttB,GAAe,CAAC,OAAO,QAAQ,+CAA+C,GAEnF,GAAI,EACe,MAAM,MAAM,yBAAyBstB,CAAS,GAAI,CACjE,OAAQ,SACR,YAAa,SAAA,CACd,GAEY,IACX,MAAMJ,EAAA,CAEV,OAASrxC,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,EAC9C,MAAM,2BAA2B,CACnC,CACF,EAEM2xC,EAAa,MAAOF,GAAsB,CAC9C,GAAK3B,EAEL,GAAI,EACe,MAAM,MAAM,yBAAyB2B,CAAS,OAAQ,CACrE,OAAQ,OACR,YAAa,SAAA,CACd,GAEY,IACX,MAAMJ,EAAA,CAEV,OAASrxC,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CAC/C,CACF,EAEM+B,EAAmBC,GAAsB,CAC7C,MAAM2kB,EAAO,IAAI,KAAK3kB,CAAS,EAEzB6I,MADU,KAAA,EACC,QAAA,EAAY8b,EAAK,QAAA,EAE5B7b,EAAU,KAAK,MAAMD,GAAQ,IAAO,GAAG,EACvCE,EAAQ,KAAK,MAAMF,GAAQ,IAAO,GAAK,GAAG,EAC1CG,EAAO,KAAK,MAAMH,GAAQ,IAAO,GAAK,GAAK,GAAG,EAEpD,OAAIC,EAAU,GAAW,GAAGA,CAAO,QAC/BC,EAAQ,GAAW,GAAGA,CAAK,QAC3BC,EAAO,EAAU,GAAGA,CAAI,QAErB2b,EAAK,mBAAA,CACd,EAEMirB,EAAc,CAAC,CAAE,QAAAC,EAAS,QAAAC,EAAU,MAAqD,CAC7F,MAAMC,EAAW5tB,GAAa,KAAO0tB,EAAQ,QAE7C,cACG,MAAA,CAAI,UAAW,GAAGC,EAAU,uCAAyC,EAAE,QACtE,SAAA,CAAA3vC,EAAAA,KAAC,MAAA,CAAI,UAAU,4BAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC4E,GAAA,CACC,SAAU6qC,EAAQ,cAClB,YAAaA,EAAQ,kBACrB,UAAWA,EAAQ,YACnB,KAAK,IAAA,CAAA,QAEN,OAAA,CAAK,UAAU,wBAAyB,SAAA9vC,EAAgB8vC,EAAQ,UAAU,EAAE,EAC5EA,EAAQ,WACP1vC,OAAC,MAAA,CAAI,UAAU,2FACb,SAAA,CAAAC,EAAAA,IAAC4vC,GAAA,CAAI,UAAU,SAAA,CAAU,EACzB5vC,EAAAA,IAAC,QAAK,SAAA,QAAA,CAAM,CAAA,CAAA,CACd,CAAA,EAEJ,GAEE2vC,GAAYjC,IACZ3tC,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,UAAO,UAAU,wCAChB,eAAC6vC,GAAA,CAAa,UAAU,UAAU,CAAA,CACpC,EACA9vC,EAAAA,KAAC,MAAA,CAAI,UAAU,8KACZ,SAAA,CAAA2tC,GAAW,CAAC+B,EAAQ,WACnB1vC,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMwvC,EAAWE,EAAQ,EAAE,EACpC,UAAU,kFAEV,SAAA,CAAAzvC,EAAAA,IAAC4vC,GAAA,CAAI,UAAU,SAAA,CAAU,EACzB5vC,EAAAA,IAAC,QAAK,SAAA,KAAA,CAAG,CAAA,CAAA,CAAA,GAGX2vC,GAAYjC,IACZ3tC,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMuvC,EAAcG,EAAQ,EAAE,EACvC,UAAU,+FAEV,SAAA,CAAAzvC,EAAAA,IAAC+gB,GAAA,CAAO,UAAU,SAAA,CAAU,EAC5B/gB,EAAAA,IAAC,QAAK,SAAA,QAAA,CAAM,CAAA,CAAA,CAAA,CACd,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,EAEJ,EAGAA,EAAAA,IAAC,IAAA,CAAE,UAAU,yCAA0C,WAAQ,aAAa,EAG5ED,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMqvC,EAAYK,EAAQ,EAAE,EACrC,SAAU,CAAC1tB,EACX,UAAW,yDACT0tB,EAAQ,UACJ,eACA,kCACN,IAAK1tB,EAAgD,GAAlC,+BAAoC,GAEvD,SAAA,CAAA/hB,EAAAA,IAAC+iB,IAAM,UAAW,WAAW0sB,EAAQ,UAAY,eAAiB,EAAE,GAAI,EACxEzvC,EAAAA,IAAC,OAAA,CAAM,SAAAyvC,EAAQ,aAAe,CAAA,CAAE,CAAA,CAAA,CAAA,EAGjC,CAACC,GAAW3tB,GACXhiB,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM+uC,EAAcD,IAAeY,EAAQ,GAAK,KAAOA,EAAQ,EAAE,EAC1E,UAAU,0FAEV,SAAA,CAAAzvC,EAAAA,IAAC8vC,GAAA,CAAM,UAAU,SAAA,CAAU,EAC3B9vC,EAAAA,IAAC,QAAK,SAAA,OAAA,CAAK,CAAA,CAAA,CAAA,CACb,EAEJ,EAGC6uC,IAAeY,EAAQ,IACtBzvC,EAAAA,IAAC,MAAA,CAAI,UAAU,qCACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,WAAA,CACC,MAAO+uC,EACP,SAAWvxC,GAAMwxC,EAAaxxC,EAAE,OAAO,KAAK,EAC5C,YAAY,mBACZ,UAAU,mEACV,KAAM,CAAA,CAAA,EAERuC,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMkvC,EAAcH,EAAWU,EAAQ,EAAE,EAClD,SAAU,CAACV,EAAU,KAAA,GAAUlW,EAC/B,UAAU,0GAEV,SAAA74B,EAAAA,IAACqnC,GAAA,CAAK,UAAU,SAAA,CAAU,CAAA,CAAA,EAE5BrnC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CACb8uC,EAAc,IAAI,EAClBE,EAAa,EAAE,CACjB,EACA,UAAU,wCACX,SAAA,GAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EAEJ,EAGCS,EAAQ,SAAWA,EAAQ,QAAQ,OAAS,GAC3CzvC,EAAAA,IAAC,MAAA,CAAI,UAAU,OACZ,SAAAyvC,EAAQ,QAAQ,IAAKM,GACpB/vC,MAACwvC,EAAA,CAA2B,QAASO,EAAO,QAAS,EAAA,EAAnCA,EAAM,EAAmC,CAC5D,CAAA,CACH,CAAA,EAEJ,CAEJ,EAEA,OAAIpvC,EAEAX,MAAC,OAAI,UAAU,wCACb,eAAC,MAAA,CAAI,UAAU,kFAAkF,CAAA,CACnG,EAKFD,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAAC,EAAAA,IAACqgB,GAAA,CAAc,UAAU,uBAAA,CAAwB,EACjDtgB,EAAAA,KAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,CAAA,aACvC0uC,EAAS,OAAO,GAAA,CAAA,CAC7B,CAAA,EACF,EAGC1sB,QACE,MAAA,CAAI,UAAU,YACb,SAAAhiB,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,qIACZ,SAAA+hB,EAAY,eAAe,CAAC,GAAKA,EAAY,WAAW,CAAC,GAAK,GAAA,CACjE,EACAhiB,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAC,EAAAA,IAAC,WAAA,CACC,MAAO2uC,EACP,SAAWnxC,GAAMoxC,EAAcpxC,EAAE,OAAO,KAAK,EAC7C,YAAY,yBACZ,UAAU,qHACV,KAAM,CAAA,CAAA,EAERuC,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,kDAErC,EACAD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMmvC,EAAcP,CAAU,EACvC,SAAU,CAACA,EAAW,KAAA,GAAU9V,EAChC,UAAU,8JAET,SAAA,CAAAA,EACC74B,EAAAA,IAAC,OAAI,UAAU,8EAAA,CAA+E,EAE9FA,EAAAA,IAACqnC,GAAA,CAAK,UAAU,SAAA,CAAU,EAE5BrnC,EAAAA,IAAC,QAAK,SAAA,cAAA,CAAY,CAAA,CAAA,CAAA,CACpB,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,mCAAgC,EAClEA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,OAAO,SAAS,KAAO,eACtC,UAAU,kFACX,SAAA,oBAAA,CAAA,CAED,EACF,EAIFA,EAAAA,IAAC,OAAI,UAAU,YACZ,WAAS,OAAS,EACjByuC,EAAS,IAAKgB,GACZzvC,MAACwvC,EAAA,CAA6B,QAAAC,GAAZA,EAAQ,EAAsB,CACjD,EAED1vC,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAACqgB,GAAA,CAAc,UAAU,sCAAA,CAAuC,EAChErgB,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,kBAAe,QACrE,IAAA,CAAE,UAAU,gBACV,SAAA+hB,EAAc,uCAAyC,oCAAA,CAC1D,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,EACF,CAEJ,CC1WA,SAAwBiuB,GAAiB,CACvC,OAAAtoC,EACA,QAAAC,EACA,UAAAsoC,EACA,aAAA7zB,EACA,SAAA8zB,CACF,EAA0B,CACxB,KAAM,CAACja,EAAiBC,CAAkB,EAAIn3B,EAAAA,SAAc,IAAI,EAEhE,GAAI,CAAC2I,EAAQ,OAAO,KAEpB,MAAMyoC,EAAsB,CAC1B,CACE,GAAI,QACJ,KAAM,cACN,KAAM,GACN,WAAY,IACZ,SAAU,EACV,YAAa,6BACb,KAAMnwC,EAAAA,IAACoB,GAAA,CAAI,UAAU,SAAA,CAAU,EAC/B,MAAO,2BAAA,EAET,CACE,GAAI,UACJ,KAAM,gBACN,KAAM,GACN,WAAY,EACZ,SAAU,EACV,YAAa,4BACb,KAAMpB,EAAAA,IAACsB,EAAA,CAAK,UAAU,SAAA,CAAU,EAChC,MAAO,6BAAA,EAET,CACE,GAAI,QACJ,KAAM,iBACN,KAAM,IACN,WAAY,EACZ,SAAU,GACV,YAAa,6BACb,KAAMtB,EAAAA,IAACgB,GAAA,CAAM,UAAU,SAAA,CAAU,EACjC,MAAO,4BAAA,EAET,CACE,GAAI,UACJ,KAAM,oBACN,KAAM,IACN,WAAY,EACZ,SAAU,GACV,YAAa,2BACb,KAAMhB,EAAAA,IAACuqB,GAAA,CAAM,UAAU,SAAA,CAAU,EACjC,MAAO,0BAAA,EAET,CACE,GAAI,QACJ,KAAM,iBACN,KAAM,IACN,WAAY,EACZ,SAAU,IACV,YAAa,2BACb,KAAMvqB,EAAAA,IAAC,MAAA,CAAI,UAAU,UAAU,KAAK,eAAe,QAAQ,YACzD,SAAAA,EAAAA,IAAC,OAAA,CAAK,EAAE,2VAA2V,EACrW,EACA,MAAO,+BAAA,CACT,EAGIowC,EAAkBznC,GAAkB,CACxC,GAAIA,EAAQ,GACV,MAAO,GAAGA,CAAK,QAAQA,IAAU,EAAI,IAAM,EAAE,GAC/C,GAAWA,EAAQ,IAAK,CACtB,MAAMC,EAAO,KAAK,MAAMD,EAAQ,EAAE,EAClC,MAAO,GAAGC,CAAI,OAAOA,IAAS,EAAI,IAAM,EAAE,EAC5C,KAAO,CACL,MAAMynC,EAAQ,KAAK,MAAM1nC,EAAQ,GAAG,EACpC,MAAO,GAAG0nC,CAAK,QAAQA,IAAU,EAAI,IAAM,EAAE,EAC/C,CACF,EAEMC,EAAgB,IAAM,CACrBra,GACLga,EAAUha,EAAgB,KAAMA,EAAgB,WAAYA,EAAgB,QAAQ,CACtF,EAEA,OACEj2B,EAAAA,IAAC,MAAA,CAAI,UAAU,iFACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,oEACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,MACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,kBAAe,EAChEA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAoC,SAAAoc,EAAa,EAC/Dpc,EAAAA,IAAC,IAAA,CAAE,UAAU,wCAAwC,SAAA,uPAAA,CAIrD,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAoC,SAAA,mBAAgB,EACpED,EAAAA,KAAC,OAAA,CAAK,UAAU,wCAAyC,SAAA,CAAAmwC,EAAS,OAAA,CAAA,CAAK,CAAA,EACzE,EACAlwC,EAAAA,IAAC,MAAA,CAAI,UAAU,sCACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,4FACV,MAAO,CAAE,MAAO,GAAG,KAAK,IAAI,IAAMkwC,EAAW,IAAO,GAAG,CAAC,GAAA,CAAI,CAAA,CAC7D,CACH,CAAA,EACF,EAEAnwC,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,kCAA+B,QACvF,MAAA,CAAI,UAAU,aACZ,SAAAmwC,EAAoB,IAAK7Z,GACxBt2B,EAAAA,IAAC,MAAA,CAEC,UAAW,oEACTi2B,GAAiB,KAAOK,EAAI,GACxB,wDACA,uDACN,IAAIA,EAAI,KAAO4Z,EAAW,gCAAkC,EAAE,GAC9D,QAAS,IAAM,CACT5Z,EAAI,MAAQ4Z,GACdha,EAAmBI,CAAG,CAE1B,EAEA,SAAAv2B,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAW,mCAAmCs2B,EAAI,KAAK,cACzD,WAAI,IAAA,CACP,EACAv2B,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA+B,SAAAs2B,EAAI,KAAK,EACrDA,EAAI,KAAO,iBACT,OAAA,CAAK,UAAU,2EAA2E,SAAA,eAE3F,EAEDA,EAAI,KAAO,eACT,OAAA,CAAK,UAAU,2EAA2E,SAAA,YAAA,CAE3F,CAAA,EAEJ,EACAt2B,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA8B,WAAI,YAAY,EAC3DD,EAAAA,KAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC2K,GAAA,CAAM,UAAU,SAAA,CAAU,SAC1B,OAAA,CAAK,SAAA,CAAA,aAAWylC,EAAe9Z,EAAI,QAAQ,CAAA,CAAA,CAAE,CAAA,EAChD,EACAv2B,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACoB,GAAA,CAAI,UAAU,SAAA,CAAU,SACxB,OAAA,CAAM,SAAA,CAAAk1B,EAAI,WAAW,oBAAA,CAAA,CAAkB,CAAA,CAAA,CAC1C,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EACAv2B,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAsC,SAAAs2B,EAAI,KAAK,EAC5Dt2B,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,OAAI,EACxCs2B,EAAI,KAAO4Z,SACT,IAAA,CAAE,UAAU,4BAA4B,SAAA,mBAAA,CAAiB,CAAA,CAAA,CAE9D,CAAA,CAAA,CACF,CAAA,EAnDK5Z,EAAI,EAAA,CAqDZ,CAAA,CACH,CAAA,EACF,EAECL,GACCl2B,EAAAA,KAAC,MAAA,CAAI,UAAU,0FACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,sBAAmB,EACtED,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,kBAAkB,SAAA,WAAQ,EAC1CA,EAAAA,IAAC,OAAA,CAAK,UAAU,mCAAoC,WAAgB,IAAA,CAAK,CAAA,EAC3E,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,kBAAkB,SAAA,YAAS,QAC1C,OAAA,CAAK,UAAU,mCAAoC,SAAAowC,EAAena,EAAgB,QAAQ,CAAA,CAAE,CAAA,EAC/F,SACC,MAAA,CACC,SAAA,CAAAj2B,EAAAA,IAAC,OAAA,CAAK,UAAU,kBAAkB,SAAA,oBAAiB,EACnDD,EAAAA,KAAC,OAAA,CAAK,UAAU,mCAAoC,SAAA,CAAAk2B,EAAgB,WAAW,GAAA,CAAA,CAAC,CAAA,EAClF,SACC,MAAA,CACC,SAAA,CAAAj2B,EAAAA,IAAC,OAAA,CAAK,UAAU,kBAAkB,SAAA,QAAK,EACvCD,EAAAA,KAAC,OAAA,CAAK,UAAU,mCAAoC,SAAA,CAAAk2B,EAAgB,KAAK,OAAA,CAAA,CAAK,CAAA,CAAA,CAChF,CAAA,EACF,EACAj2B,EAAAA,IAAC,OAAI,UAAU,uCACb,eAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,wIAAA,CAGvC,CAAA,CACF,CAAA,EACF,EAGFD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAASswC,EACT,SAAU,CAACra,GAAoBA,GAAiB,KAAOia,EACvD,UAAU,sOAET,SAAAja,EACG,eAAeA,EAAgB,IAAI,QACnC,8BAAA,CAAA,EAGNj2B,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,iIACX,SAAA,QAAA,CAAA,CAED,EACF,EAEA5H,EAAAA,KAAC,MAAA,CAAI,UAAU,wDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,0BAAuB,EACtED,EAAAA,KAAC,KAAA,CAAG,UAAU,kCACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,2CAAA,CAAyC,EAC7CA,EAAAA,IAAC,MAAG,SAAA,4CAAA,CAA0C,EAC9CA,EAAAA,IAAC,MAAG,SAAA,qDAAA,CAAmD,EACvDA,EAAAA,IAAC,MAAG,SAAA,uDAAA,CAAqD,EACzDA,EAAAA,IAAC,MAAG,SAAA,iDAAA,CAA+C,CAAA,CAAA,CACrD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,EACF,EACF,CAEJ,CCzNA,MAAMuwC,GAAiB,CACrB,wGACA,wGACA,wGACA,wGACA,uGACF,EAEMC,GAAoBC,GAAsC,CAC9D,MAAM/uC,EAAQ,KAAK,IAAI,OAAO+uC,CAAI,GAAK,CAAC,EAAIF,GAAe,OAC3D,MAAO,GAAGA,GAAe7uC,CAAK,CAAC,QAAQ+uC,GAAQ/uC,CAAK,EACtD,EAEMgvC,GAAwBD,IAAoC,CAChE,GAAIA,EACJ,WAAY,IAAOA,EACnB,iBAAkB,eAClB,aAAc,eACd,eAAgB,+DAChB,SAAU,YACV,aAAc,kCACd,MAAO,gCACP,YAAa,kIACb,UAAWD,GAAiBC,CAAI,EAChC,aAAc,KACd,iBAAkB,KAClB,wBAAyB,KACzB,4BAA6B,IAC7B,YAAa,KACb,gBAAiB,KACjB,oBAAqB,KAAK,UAAU,CAClC,YAAa,KACb,OAAQ,MACR,YAAa,KACb,gBAAiB,IAAA,CAClB,EACD,YAAa,KACb,YAAa,MACb,eAAgB,KAChB,cAAe,KACf,QAAS,GACT,aAAc,GACd,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAU,GAAK,GAAI,EAAE,YAAA,EACvD,WAAY,IAAI,KAAA,EAAO,YAAA,CACzB,GAEME,GAAmB,CAACC,EAAUH,IAAmC,CACrE,MAAMzsB,EAAW0sB,GAAqBD,CAAI,EAE1C,GAAI,CAACG,GAAO,OAAOA,GAAQ,SACzB,OAAO5sB,EAGT,MAAM/gB,EAAK,OAAO2tC,EAAI,IAAMH,GAAQzsB,EAAS,EAAE,EACzC6sB,EACJ,OAAOD,EAAI,qBAAwB,SAC/BA,EAAI,oBACJ,KAAK,UAAU,CACb,YAAaA,EAAI,aAAe5sB,EAAS,aAAe,EACxD,OAAQ4sB,EAAI,QAAU,EACtB,YAAaA,EAAI,aAAe,EAChC,gBAAiBA,EAAI,iBAAmB,GAAA,CACzC,EAEDE,EAAWF,EAAI,WAAa,gBAAgB,KAAKA,EAAI,SAAS,EAChEA,EAAI,UACJJ,GAAiBvtC,CAAE,EAEvB,MAAO,CACL,GAAAA,EACA,WAAY,OAAO2tC,EAAI,YAAc5sB,EAAS,UAAU,EACxD,iBAAkB4sB,EAAI,kBAAoB5sB,EAAS,iBACnD,aAAc4sB,EAAI,cAAgB5sB,EAAS,aAC3C,eAAgB4sB,EAAI,gBAAkB5sB,EAAS,eAC/C,SAAU4sB,EAAI,UAAY5sB,EAAS,SACnC,aAAc4sB,EAAI,cAAgBA,EAAI,aAAe5sB,EAAS,aAC9D,MAAO4sB,EAAI,OAAS5sB,EAAS,MAC7B,YAAa4sB,EAAI,aAAe5sB,EAAS,YACzC,UAAW8sB,EACX,aAAc,OAAOF,EAAI,cAAgB5sB,EAAS,YAAY,EAC9D,iBAAkB,OAAO4sB,EAAI,kBAAoB5sB,EAAS,gBAAgB,EAC1E,wBAAyB,OAAO4sB,EAAI,yBAA2B5sB,EAAS,uBAAuB,EAC/F,4BAA6B,OAAO4sB,EAAI,6BAA+B5sB,EAAS,2BAA2B,EAC3G,YAAa,OAAO4sB,EAAI,aAAe5sB,EAAS,WAAW,EAC3D,gBAAiB,OAAO4sB,EAAI,iBAAmB5sB,EAAS,eAAe,EACvE,oBAAqB6sB,EACrB,YAAa,OAAOD,EAAI,aAAeA,EAAI,aAAe5sB,EAAS,WAAW,EAC9E,YAAa,OAAO4sB,EAAI,aAAeA,EAAI,OAAS5sB,EAAS,WAAW,EACxE,eAAgB,OAAO4sB,EAAI,gBAAkBA,EAAI,UAAY5sB,EAAS,cAAc,EACpF,cAAe,OAAO4sB,EAAI,eAAiBA,EAAI,QAAU5sB,EAAS,aAAa,EAC/E,QAAS,GAAQ4sB,EAAI,SAAW5sB,EAAS,SACzC,aAAc,GAAQ4sB,EAAI,cAAgB5sB,EAAS,cACnD,WAAY4sB,EAAI,YAAc5sB,EAAS,WACvC,WAAY4sB,EAAI,YAAcA,EAAI,YAAc5sB,EAAS,UAAA,CAE7D,EAEM+sB,GAAmBN,IAAkB,CACzC,MAAO,MAASA,EAAO,IACvB,SAAU,KAAQA,EAAO,IACzB,OAAQ,KAAQA,EAAO,IACvB,MAAO,KAASA,EAAO,IACvB,eAAgB,IAAOA,EAAO,GAC9B,eAAgB,IAAOA,EAAO,GAC9B,iBAAkB,MAASA,EAAO,GACpC,GAEA,SAAwBO,IAAgB,CACtC,KAAM,CAAE,GAAA/tC,CAAA,EAAOinC,GAAA,EACTxrC,EAAWC,GAAA,EACXiW,EAAUzS,IAAgB,GAC1B0S,EAAerC,GAAiB,GAAGoC,CAAO,GAAGpC,CAAI,GACjD,CAAChN,EAAS4rB,CAAU,EAAIryB,EAAAA,SAAkC,IAAI,EAC9D,CAAC0nB,EAASC,CAAU,EAAI3nB,EAAAA,SAAuB,CAAA,CAAE,EACjD,CAACqU,EAAUC,CAAW,EAAItU,EAAAA,SAA0B,IAAI,EACxD,CAACy8B,EAASyV,CAAU,EAAIlyC,EAAAA,SAAc,IAAI,EAC1C,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAI,EACrC,CAAC8nB,EAAcC,CAAe,EAAI/nB,EAAAA,SAAS,EAAK,EAChD,CAACgoB,EAAgBC,CAAiB,EAAIjoB,EAAAA,SAAS,EAAK,EACpD,CAACkoB,EAAuBC,CAAwB,EAAInoB,EAAAA,SAAS,EAAK,EAClE,CAACmyC,EAAkBC,CAAmB,EAAIpyC,EAAAA,SAAS,EAAK,EACxD,CAACqyC,EAAeC,CAAgB,EAAItyC,EAAAA,SAAS,EAAK,EAClD,CAAC+oB,EAAwBC,CAAyB,EAAIhpB,EAAAA,SAAS,EAAK,EACpE,CAACuyC,EAAYC,CAAa,EAAIxyC,EAAAA,SAAqD,CAAE,UAAW,GAAO,UAAW,GAAO,EACzH,CAACyyC,EAAsBC,CAAuB,EAAI1yC,EAAAA,SAAS,EAAK,EAChE,CAAC2yC,EAAiBC,CAAkB,EAAI5yC,EAAAA,SAAc,IAAI,EAC1D,CAACypB,EAAcC,CAAe,EAAI1pB,EAAAA,SAAS,EAAK,EAGhDutB,EAAS9mB,GAAS,OAAO,YAAA,EAAc,SAAS,QAAQ,GAC/CA,GAAS,OAAO,cAAc,SAAS,MAAM,GAC7CA,GAAS,aAAa,YAAA,EAAc,SAAS,MAAM,EAG5DkoC,EAAUt6B,GAAY5N,IAC1B4N,EAAS,KAAO5N,EAAQ,YACxB4N,EAAS,WAAa5N,EAAQ,cAC9B4N,EAAS,eAAiB5N,EAAQ,cAGpCnG,EAAAA,UAAU,IAAM,CACd,IAAIuyC,EAAY,GAsBhB,OApBa,SAAY,CACvB,GAAK3uC,EACL,CAAArC,EAAW,EAAI,EACf,GAAI,CACF,MAAM,QAAQ,IAAI,CAChBixC,GAAmBD,CAAS,EAC5BE,GAAaF,CAAS,EACtB98B,EAAc88B,CAAS,EACvBG,EAAaH,CAAS,EACtBI,EAAqBJ,CAAS,CAAA,CAC/B,CACH,OAASh0C,EAAO,CACd,QAAQ,MAAM,qCAAsCA,CAAK,CAC3D,QAAA,CACMg0C,GACFhxC,EAAW,EAAK,CAEpB,EACF,GAEA,EAEO,IAAM,CACXgxC,EAAY,EACd,CACF,EAAG,CAAC3uC,CAAE,CAAC,EAEP,MAAM4uC,GAAqB,MAAOD,EAAY,KAAS,CACrD,MAAMnB,EAAO,OAAOxtC,GAAM,KAAK,KAAK,EAEpC,GAAI,CACF,MAAMW,EAAW,MAAM,MAAMiR,EAAY,gBAAgB5R,CAAE,EAAE,CAAC,EAC9D,GAAIW,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EACxBguC,GACFxgB,EAAWuf,GAAiBzzC,GAAM,SAAWA,EAAMuzC,CAAI,CAAC,CAE5D,MACMmB,GACFxgB,EAAWuf,GAAiB,KAAMF,CAAI,CAAC,CAG7C,OAAS7yC,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,EAC3Cg0C,GACFxgB,EAAWuf,GAAiB,KAAMF,CAAI,CAAC,CAE3C,CACF,EAEMqB,GAAe,SAAY,CAC/B,GAAI,CACF,MAAMx/B,EAAUD,GAAA,EACVzO,EAAW,MAAM,MAAMiR,EAAY,uBAAuB,EAAG,CACjE,YAAa,UACb,QAAAvC,CAAA,CACD,EACD,GAAI1O,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5B8iB,EAAWxpB,CAAI,CACjB,CACF,OAASU,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,CACjD,CACF,EAEMkX,EAAgB,SAAY,CAChC,GAAI,CACF,MAAMxC,EAAUD,GAAA,EACVzO,EAAW,MAAM,MAAMiR,EAAY,eAAe,EAAG,CACzD,YAAa,UACb,QAAAvC,CAAA,CACD,EACD,GAAI1O,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5ByP,EAAYnW,CAAI,CAClB,CACF,OAASU,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,CACnD,CACF,EAEMm0C,EAAe,SAAY,CAC/B,MAAMtB,EAAO,OAAOxtC,GAAM,KAAK,KAAK,EACpC,GAAI,CACF,MAAMW,EAAW,MAAM,MAAMiR,EAAY,gBAAgB5R,CAAE,UAAU,CAAC,EACtE,GAAIW,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5BqtC,EAAW/zC,CAAI,CACjB,MACE+zC,EAAWF,GAAgBN,CAAI,CAAC,CAEpC,OAAS7yC,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,EAC/CqzC,EAAWF,GAAgBN,CAAI,CAAC,CAClC,CACF,EAEMwB,EAAkB,SAAY,CAClC,GAAI,GAAC7+B,GAAY,CAACnQ,GAElB,GAAI,CACF,MAAMqP,EAAUD,GAAA,EACVzO,EAAW,MAAM,MAAMiR,EAAY,gBAAgB5R,CAAE,cAAc,EAAG,CAC1E,YAAa,UACb,QAAAqP,CAAA,CACD,EACD,GAAI1O,EAAS,GAAI,CACf,MAAM2X,EAAS,MAAM3X,EAAS,KAAA,EAC9B2tC,EAAch2B,CAAM,CACtB,CACF,OAAS3d,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,CACrD,CACF,EAEMo0C,EAAuB,SAAY,CACvC,GAAK/uC,EAEL,GAAI,CACF,MAAMqP,EAAUD,GAAA,EACVzO,EAAW,MAAM,MAAMiR,EAAY,gBAAgB5R,CAAE,cAAc,EAAG,CAC1E,YAAa,UACb,QAAAqP,CAAA,CACD,EACD,GAAI1O,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5B+tC,EAAmBz0C,CAAI,CACzB,CACF,OAASU,EAAO,CACd,QAAQ,MAAM,oCAAqCA,CAAK,CAC1D,CACF,EAEMgsB,EAAkB,MAAOpkB,EAA2BsW,IAAwB,CAChF,GAAI,CAWF,IAViB,MAAM,MAAMjH,EAAY,yBAAyB,EAAG,CACnE,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,GAAGxC,GAAA,CAAiB,EAEtB,YAAa,UACb,KAAM,KAAK,UAAU,CAAE,WAAY7M,EAAQ,GAAI,aAAcsW,CAAA,CAAa,CAAA,CAC3E,GAEY,GACX,MAAM+1B,GAAA,EACN,MAAMC,GAAA,EACN,MAAMC,EAAA,MAEN,OAAM,IAAI,MAAM,iBAAiB,CAErC,OAASn0C,EAAO,CACd,cAAQ,MAAM,wBAAyBA,CAAK,EACtCA,CACR,CACF,EAEM8rB,EAAqB,MAAO5rB,GAAmB,CACnD,GAAI,CAEF,GAAIA,IAAW,QAAUwzC,EAAW,UAAW,CAC7C,MAAM,sCAAsC,EAC5C,MACF,CAEA,GAAIxzC,IAAW,QAAUwzC,EAAW,UAAW,CAC7C,MAAM,2CAA2C,EACjD,MACF,CAEA,GAAIxzC,IAAW,QAAS,CACtBkpB,EAAkB,EAAI,EACtB,MACF,CAEA,MAAMpjB,EAAW,MAAM,MAAMiR,EAAY,0BAA0B,EAAG,CACpE,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,GAAGxC,GAAA,CAAiB,EAEtB,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,YAAavU,EACb,aAAc0H,GAAS,GACvB,eAAgB,SAAA,CACjB,CAAA,CACF,EAED,GAAI5B,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5B+lB,EAAuBzsB,CAAI,EAC3B,MAAM60C,EAAA,EACN,MAAMj9B,EAAA,EACN,MAAM+8B,GAAA,EACN,MAAMI,EAAA,CACR,KAAO,CACL,MAAMpoC,EAAY,MAAMjG,EAAS,KAAA,EAC7BiG,EAAU,OACZ,MAAMA,EAAU,KAAK,CAEzB,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,oBAAoBE,CAAM,WAAYF,CAAK,CAC3D,CACF,EAEM+rB,EAA0BzsB,GAAc,CAC5C,MAAMgL,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAY,gGACzBA,EAAa,UAAY;AAAA;AAAA,iBAEZhL,EAAK,aAAa;AAAA,iCACFA,EAAK,WAAW,QAAQ,CAAC,CAAC;AAAA;AAAA,MAGvD,SAAS,KAAK,YAAYgL,CAAY,EACtC,WAAW,IAAM,CACX,SAAS,KAAK,SAASA,CAAY,GACrC,SAAS,KAAK,YAAYA,CAAY,CAE1C,EAAG,GAAI,CACT,EAEMie,GAAY,MAAO3gB,EAA2B6D,IAAmB,CACrE,GAAI,CAWF,IAViB,MAAM,MAAMwL,EAAY,kBAAkB,EAAG,CAC5D,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,GAAGxC,GAAA,CAAiB,EAEtB,YAAa,UACb,KAAM,KAAK,UAAU,CAAE,WAAY7M,EAAQ,GAAI,WAAY6D,CAAA,CAAQ,CAAA,CACpE,GAEY,GAAI,CAEf,MAAMnB,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAY,kGACzBA,EAAa,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA,uDAKsBmB,CAAM,YAAY7D,EAAQ,cAAgBA,EAAQ,kBAAoB,SAAS;AAAA;AAAA;AAAA,UAI9H,SAAS,KAAK,YAAY0C,CAAY,EACtC,WAAW,IAAM,CACX,SAAS,KAAK,SAASA,CAAY,GACrC,SAAS,KAAK,YAAYA,CAAY,CAE1C,EAAG,GAAI,EAEP4M,EAAA,CACF,KACE,OAAM,IAAI,MAAM,YAAY,CAEhC,OAASlX,EAAO,CACd,cAAQ,MAAM,sBAAuBA,CAAK,EACpCA,CACR,CACF,EAEMs0C,GAAuB,CAACC,EAAoBC,IAA0B,CAC1EjB,EAAoB,EAAK,EAErB3rC,GACF4rB,EAAW,CACT,GAAG5rB,EACH,gBAAiB2sC,EACjB,YAAaC,CAAA,CACd,EAEHt9B,EAAA,CACF,EAEMu9B,GAAqB9F,GAAqC,CAC9D8E,EAAiB,EAAK,EACtBjgB,EAAWmb,CAAc,EACzBwF,EAAA,CACF,EAEM3nB,GAAsB,SAAY,CACtC,GAAK5kB,EAEL,GAAI,CACF,MAAM5B,EAAW,MAAM,MAAMiR,EAAY,gBAAgBrP,EAAQ,EAAE,EAAE,EAAG,CACtE,OAAQ,SACR,YAAa,UACb,QAAS6M,GAAA,CAAiB,CAC3B,EAED,GAAIzO,EAAS,GAEXlF,EAAS,YAAY,MAChB,CACL,MAAMmL,EAAY,MAAMjG,EAAS,KAAA,EACjC,MAAMiG,EAAU,OAAS,0BAA0B,CACrD,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,EAC9C,MAAM,0BAA0B,CAClC,CACF,EAEM00C,GAAuB,MAAOC,EAAmBC,EAAyBC,IAA0B,CACxG,GAAKjtC,EAEL,GAAI,CACF,MAAM5B,EAAW,MAAM,MAAMiR,EAAY,gBAAgBrP,EAAQ,EAAE,UAAU,EAAG,CAC9E,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,GAAG6M,GAAA,CAAiB,EAEtB,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,eAAgBkgC,EAChB,iBAAkBC,EAClB,eAAgBC,CAAA,CACjB,CAAA,CACF,EAED,GAAI7uC,EAAS,GACX6tC,EAAwB,EAAK,EAC7B,MAAMO,EAAA,EACN,MAAMl9B,EAAA,EACN,MAAM,mDAAmD09B,CAAe,0BAA0BC,CAAa,SAAS,MACnH,CACL,MAAM5oC,GAAY,MAAMjG,EAAS,KAAA,EACjC,MAAMiG,GAAU,OAAS,2BAA2B,CACtD,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,EAChD,MAAM,2BAA2B,CACnC,CACF,EAEM6e,GAAqBlS,GAAiB,CAC1C,OAAQA,EAAA,CACN,IAAK,QAAS,MAAO,GACrB,IAAK,UAAW,MAAO,KACvB,QAAS,MAAO,EAAA,CAEpB,EAEMmoC,GAAsB50C,GAAmB,CAE7C,MAAM2U,EADa,CAAE,KAAM,GAAK,QAAS,GAAK,KAAM,GAAK,MAAO,EAAG,OAAQ,EAAA,EACnD3U,CAAiC,GAAK,EACxD6e,EAAavJ,EAAWqJ,GAAkBrJ,EAAS,SAAS,EAAI,EACtE,OAAO,KAAK,MAAMX,EAAOkK,EAAa,EAAE,EAAI,EAC9C,EAEMkE,GAAmBzG,GAAqB,CAC5C,OAAQA,EAAA,CACN,IAAK,YAAa,MAAO,KACzB,IAAK,SAAU,MAAO,KACtB,IAAK,UAAW,MAAO,KACvB,IAAK,UAAW,MAAO,KACvB,IAAK,WAAY,MAAO,KACxB,QAAS,MAAO,IAAA,CAEpB,EAEMu4B,GAAuB,IACtBnX,GACI,CACL,MAAO,EACP,SAAU,EACV,OAAQ,EACR,MAAO,EACP,eAAgB,EAChB,eAAgB,CAAA,EAMhB3Y,GAAgBC,GAChBA,GAAO,KACDA,EAAM,KAAS,QAAQ,CAAC,EAAI,IAC3BA,GAAO,KACRA,EAAM,KAAM,QAAQ,CAAC,EAAI,IAE5BA,EAAI,SAAA,EAGb,GAAIniB,EACF,OACEX,MAAC,OAAI,UAAU,wCACb,eAAC,MAAA,CAAI,UAAU,oFAAoF,CAAA,CACrG,EAIJ,GAAI,CAACwF,EACH,OACEzF,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,oBAAiB,EACvEA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMtB,EAAS,YAAY,EACpC,UAAU,kGACX,SAAA,cAAA,CAAA,CAED,EACF,EAIJ,MAAMk0C,GAAoBD,GAAA,EAE1B,OACE5yC,EAAAA,KAAC,MAAA,CAAI,UAAU,8BAEZ,SAAA,CAAAusB,GACCvsB,EAAAA,KAAC,MAAA,CAAI,UAAU,oFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,WAAW,SAAA,KAAE,EAC7BA,EAAAA,IAAC,KAAA,CAAG,UAAU,oBAAoB,SAAA,eAAY,EAC9CA,EAAAA,IAAC,OAAA,CAAK,UAAU,WAAW,SAAA,IAAA,CAAE,CAAA,EAC/B,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,8BAA8B,SAAA,yFAAA,CAE3C,CAAA,EACF,EAIFD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMtB,EAAS,YAAY,EACpC,UAAU,0GAEV,SAAAsB,EAAAA,IAAC6yC,GAAA,CAAU,UAAU,uBAAA,CAAwB,CAAA,CAAA,SAE9C,MAAA,CACC,SAAA,CAAA9yC,EAAAA,KAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,CAAA,mBAC9BusB,GAAUtsB,EAAAA,IAAC,OAAA,CAAK,UAAU,kBAAkB,SAAA,QAAA,CAAM,CAAA,EACrE,QACC,IAAA,CAAE,UAAU,gBACV,SAAAssB,EAAS,6CAA+C,kCAC3D,EAGAvsB,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACZ,SAAA,CAAAyF,EAAQ,SACPzF,OAAC,OAAA,CAAK,UAAU,gIACd,SAAA,CAAAC,EAAAA,IAACsa,GAAA,CAAS,UAAU,SAAA,CAAU,EAC9Bta,EAAAA,IAAC,QAAK,SAAA,MAAA,CAAI,CAAA,EACZ,EAEDwF,EAAQ,cACPzF,OAAC,OAAA,CAAK,UAAU,gKACd,SAAA,CAAAC,EAAAA,IAAC4jB,GAAA,CAAI,UAAU,SAAA,CAAU,EACzB5jB,EAAAA,IAAC,QAAK,SAAA,WAAA,CAAS,CAAA,EACjB,EAIDwF,EAAQ,cAAgB,QACvBzF,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAC,EAAAA,IAACqb,GAAA,CAAI,UAAU,SAAA,CAAU,EACzBtb,EAAAA,KAAC,OAAA,CAAK,UAAU,UAAW,SAAA,CAAA6yC,GAAkB,OAAO,eAAA,GAAoBptC,EAAQ,YAAY,eAAA,EAAiB,QAAA,CAAA,CAAM,CAAA,CAAA,CACrH,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,EACF,EAGCkoC,GACC3tC,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACuF,GAAA,CAAQ,QAAQ,eACf,SAAAxF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMsxC,EAAiB,EAAI,EACpC,UAAU,wHAEV,SAAA,CAAArxC,EAAAA,IAAC,OAAI,UAAU,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,YACjE,eAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,yHAAyH,CAAA,CAChM,EACAA,EAAAA,IAAC,OAAA,CAAK,UAAU,mBAAmB,SAAA,MAAA,CAAI,CAAA,CAAA,CAAA,EAE3C,EACAA,EAAAA,IAACuF,GAAA,CAAQ,QAAQ,iBACf,SAAAxF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMgoB,EAA0B,EAAI,EAC7C,UAAU,qHAEV,SAAA,CAAA/nB,EAAAA,IAAC,OAAI,UAAU,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,YACjE,eAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,+HAA+H,CAAA,CACtM,EACAA,EAAAA,IAAC,OAAA,CAAK,UAAU,mBAAmB,SAAA,QAAA,CAAM,CAAA,CAAA,CAAA,CAC3C,CACF,CAAA,CAAA,CACF,CAAA,EAEJ,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAW,8CACdusB,EAAS,oCAAsC9mB,EAAQ,aAAe,yCAA2C,iBACnH,GAEG,SAAA,CAAA8mB,SACE,MAAA,CAAI,UAAU,iFACb,SAAAvsB,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,EACRA,EAAAA,IAAC,QAAK,SAAA,wCAAA,CAAsC,EAC5CA,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,CAAA,CAAA,CACV,CAAA,CACF,EAIDwF,EAAQ,cAAgB,CAAC8mB,GACxBtsB,EAAAA,IAAC,MAAA,CAAI,UAAU,iFACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAC,EAAAA,IAAC4jB,GAAA,CAAI,UAAU,SAAA,CAAU,EACzB5jB,EAAAA,IAAC,QAAK,SAAA,mBAAA,CAAiB,EACvBA,EAAAA,IAAC4jB,GAAA,CAAI,UAAU,SAAA,CAAU,CAAA,CAAA,CAC3B,CAAA,CACF,QAID,MAAA,CAAI,UAAU,WACb,SAAA7jB,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,MAAC,OAAI,UAAU,2HACZ,SAAA6gB,GAAgBrb,EAAQ,QAAQ,EACnC,EACAzF,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC4E,GAAA,CACC,SAAUY,EAAQ,aAClB,YAAaA,EAAQ,cAAgB,UACrC,UAAWA,EAAQ,eACnB,UAAU,sEACV,WAAY,EAAA,CAAA,EAEdzF,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAA2tC,GACC1tC,EAAAA,IAAC,OAAA,CAAK,UAAU,uEAAuE,SAAA,eAEvF,EAEDssB,GACCtsB,EAAAA,IAAC,OAAA,CAAK,UAAU,2EAA2E,SAAA,OAE3F,EAEFA,EAAAA,IAAC,OAAA,CAAK,UAAU,mCAAoC,WAAQ,QAAA,CAAS,CAAA,CAAA,CACvE,CAAA,EACF,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,aAAA,CAAW,CAAA,CAAA,CAClD,CAAA,CAAA,CACF,CAAA,CACF,EAGCwF,EAAQ,WACPxF,MAAC,MAAA,CAAI,UAAU,WACb,SAAAA,EAAAA,IAAC,MAAA,CACC,IAAKwF,EAAQ,UACb,IAAKA,EAAQ,MACb,UAAU,0BAAA,CAAA,EAEd,EAIFzF,EAAAA,KAAC,MAAA,CAAI,UAAU,MACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,uCAAwC,SAAAwF,EAAQ,MAAM,EAEnEA,EAAQ,aACPxF,EAAAA,IAAC,KAAE,UAAU,qCAAsC,WAAQ,YAAY,EAIzED,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,+DACb,eAAC+iB,GAAA,CAAM,UAAU,UAAU,CAAA,CAC7B,QACC,IAAA,CAAE,UAAU,kCAAmC,SAAAF,GAAa+vB,GAAkB,KAAK,EAAE,EACtF5yC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,OAAA,CAAK,CAAA,EAC5C,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,gEACb,eAACqgB,GAAA,CAAc,UAAU,UAAU,CAAA,CACrC,QACC,IAAA,CAAE,UAAU,kCAAmC,SAAAwC,GAAa+vB,GAAkB,QAAQ,EAAE,EACzF5yC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,UAAA,CAAQ,CAAA,EAC/C,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,iEACb,eAAC+c,GAAA,CAAO,UAAU,UAAU,CAAA,CAC9B,QACC,IAAA,CAAE,UAAU,kCAAmC,SAAA8F,GAAa+vB,GAAkB,MAAM,EAAE,EACvF5yC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,QAAA,CAAM,CAAA,EAC7C,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,kEACb,eAACqb,GAAA,CAAI,UAAU,UAAU,CAAA,CAC3B,QACC,IAAA,CAAE,UAAU,kCAAmC,SAAAwH,GAAa+vB,GAAkB,KAAK,EAAE,EACtF5yC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,OAAA,CAAK,CAAA,CAAA,CAC5C,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,oBAAiB,EAChED,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,MAAC,IAAA,CAAE,UAAU,kCAAmC,SAAA4yC,GAAkB,gBAAkB,EAAE,EACtF5yC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,gBAAA,CAAc,CAAA,EACrD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,MAAC,IAAA,CAAE,UAAU,oCAAqC,SAAA4yC,GAAkB,gBAAkB,EAAE,EACxF5yC,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,gBAAA,CAAc,CAAA,CAAA,CACvD,CAAA,CAAA,CACF,CAAA,EACF,EAGCwF,EAAQ,wBAA0B,GACjCzF,EAAAA,KAAC,MAAA,CAAI,UAAU,2FACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,yGACb,eAACqI,GAAA,CAAM,UAAU,qBAAqB,CAAA,CACxC,SACC,MAAA,CACC,SAAA,CAAArI,EAAAA,IAAC,KAAA,CAAG,UAAU,+BAA+B,SAAA,yBAAsB,EACnEA,EAAAA,IAAC,IAAA,CAAE,UAAU,yBAAyB,SAAA,qCAAA,CAAmC,CAAA,CAAA,CAC3E,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,oCACZ,SAAAwF,EAAQ,4BACX,EACAxF,EAAAA,IAAC,MAAA,CAAI,UAAU,yBAAyB,SAAA,WAAA,CAAS,CAAA,CAAA,CACnD,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,qCAAqC,SAAA,WAAQ,EAC7DD,EAAAA,KAAC,OAAA,CAAK,UAAU,uCACb,SAAA,CAAAyF,EAAQ,wBAA0BA,EAAQ,4BAA4B,MAAIA,EAAQ,uBAAA,CAAA,CACrF,CAAA,EACF,EACAxF,EAAAA,IAAC,MAAA,CAAI,UAAU,uDACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,8FACV,MAAO,CACL,MAAO,IAAKwF,EAAQ,wBAA0BA,EAAQ,6BAA+BA,EAAQ,wBAA2B,GAAG,GAAA,CAC7H,CAAA,CACD,CACH,CAAA,EACF,EAGAzF,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAC,EAAAA,IAAC+iB,GAAA,CAAM,UAAU,SAAA,CAAU,EAC3B/iB,EAAAA,IAAC,QAAK,SAAA,kBAAA,CAAgB,CAAA,EACxB,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAC,EAAAA,IAACqgB,GAAA,CAAc,UAAU,SAAA,CAAU,EACnCrgB,EAAAA,IAAC,QAAK,SAAA,sBAAA,CAAoB,CAAA,EAC5B,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAC,EAAAA,IAAC+c,GAAA,CAAO,UAAU,SAAA,CAAU,EAC5B/c,EAAAA,IAAC,QAAK,SAAA,oBAAA,CAAkB,CAAA,CAAA,CAC1B,CAAA,CAAA,CACF,CAAA,EACF,EAIFA,EAAAA,IAAC,OAAI,UAAU,OACb,eAACuF,GAAA,CAAQ,QAAQ,2DAA2D,SAAS,MACnF,SAAAxF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMmnB,EAAyB,EAAI,EAC5C,UAAU,8QAEV,SAAA,CAAAlnB,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,KAAE,EAC5BA,EAAAA,IAAC,QAAK,SAAA,uBAAA,CAAqB,EAC3BA,EAAAA,IAAC,OAAA,CAAK,UAAU,uDAAuD,SAAA,aAAA,CAAW,CAAA,CAAA,CAAA,EAEtF,CAAA,CACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,4DAA4D,SAAA,gBAAa,EACzFA,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,gBAAA,CAAc,CAAA,EACxD,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,yBACZ,SAAA,CACC,CACE,OAAQ,OACR,KAAM+iB,GACN,MAAOuuB,EAAW,UAAY,yBAA2B,qBACzD,SAAUA,EAAW,SAAA,EAEvB,CAAE,OAAQ,UAAW,KAAMjxB,GAAe,MAAO,sBAAuB,SAAU,EAAA,EAClF,CAAE,OAAQ,SAAU,KAAM2C,GAAQ,MAAO,wBAAyB,SAAU,EAAA,EAC5E,CACE,OAAQ,OACR,KAAMlC,GACN,MAAOwwB,EAAW,UAAY,+BAAiC,wBAC/D,SAAUA,EAAW,SAAA,CACvB,EACA,IAAI,CAAC,CAAE,OAAAxzC,EAAQ,KAAM0D,EAAM,MAAA+gB,EAAO,SAAA5c,CAAA,IAClC3F,EAAAA,IAACuF,GAAA,CAEC,QACEI,GAAY7H,IAAW,OAAS,iBAChC6H,GAAY7H,IAAW,OAAS,iBAChC,IAAI40C,GAAmB50C,CAAM,CAAC,UAEhC,QAAS,GAET,SAAAiC,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM2pB,EAAmB5rB,CAAM,EACxC,SAAA6H,EACA,UAAW,8EAA8E4c,CAAK,IAC5F5c,EAAW,gCAAkC,EAC/C,GAEA,SAAA,CAAA3F,MAACwB,GAAK,UAAW,gBACf8vC,EAAW,WAAaxzC,IAAW,OAAS,eAAiB,EAC/D,IACEwzC,EAAW,WAAaxzC,IAAW,OAAS,eAAiB,EAC/D,GAAI,EACJkC,EAAAA,IAAC,OAAA,CAAK,UAAU,mCAAoC,SAAAlC,EAAO,EAC3DkC,EAAAA,IAAC,QAAK,UAAU,qCACb,WAAYlC,IAAW,QAAeA,IAAW,OAAjB,IAAgC,IAAI40C,GAAmB50C,CAAM,CAAC,GAAM,IAAI40C,GAAmB50C,CAAM,CAAC,EAAA,CACrI,CAAA,CAAA,CAAA,CACF,EAxBKA,CAAA,CA0BR,CAAA,CACH,CAAA,EACF,EAGAkC,EAAAA,IAAC,MAAA,CAAI,UAAU,gCACb,SAAAD,EAAAA,KAAC,IAAA,CACC,KAAMyF,EAAQ,aACd,OAAO,SACP,IAAI,sBACJ,UAAU,6FAEV,SAAA,CAAAxF,EAAAA,IAACid,GAAA,CAAa,UAAU,SAAA,CAAU,SACjC,OAAA,CAAK,SAAA,CAAA,WAASzX,EAAQ,QAAA,CAAA,CAAS,CAAA,CAAA,CAAA,CAClC,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGAzF,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,wBAAqB,EAC9ED,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACqB,GAAA,CAAW,UAAU,wBAAA,CAAyB,EAC/CrB,EAAAA,IAAC,OAAA,CAAK,UAAU,qCAAqC,SAAA,iBAAA,CAAe,CAAA,EACtE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,mCAAmC,SAAA,OAAI,EACpDA,EAAAA,IAAC,IAAA,CAAE,UAAU,yBAAyB,SAAA,gBAAA,CAAc,CAAA,EACtD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,6DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACghB,GAAA,CAAS,UAAU,uBAAA,CAAwB,EAC5ChhB,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAoC,SAAA,aAAA,CAAW,CAAA,EACjE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,kCAAkC,SAAA,QAAK,EACpDA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,eAAA,CAAa,CAAA,EACpD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC+O,GAAA,CAAW,UAAU,yBAAA,CAA0B,EAChD/O,EAAAA,IAAC,OAAA,CAAK,UAAU,sCAAsC,SAAA,cAAA,CAAY,CAAA,EACpE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,oCAAoC,SAAA,UAAO,EACxDA,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,uBAAA,CAAqB,CAAA,EAC9D,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACgP,GAAA,CAAM,UAAU,yBAAA,CAA0B,EAC3ChP,EAAAA,IAAC,OAAA,CAAK,UAAU,sCAAsC,SAAA,OAAA,CAAK,CAAA,EAC7D,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,oCAAoC,SAAA,OAAI,EACrDA,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,cAAA,CAAY,CAAA,CAAA,CACrD,CAAA,CAAA,CACF,CAAA,EACF,EAGAA,EAAAA,IAAC,MAAA,CAAI,UAAU,iDACb,SAAAA,EAAAA,IAACwuC,GAAA,CACC,UAAWhpC,EAAQ,GACnB,YAAa4N,EACb,QAASs6B,GAAW,EAAA,CAAA,CACtB,CACF,CAAA,EACF,EAGA3tC,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEZ,SAAA,CAAA2xC,GACC3xC,EAAAA,KAAC,MAAA,CAAI,UAAU,qFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,0BAA0B,KAAK,eAAe,QAAQ,YACnE,SAAAA,EAAAA,IAAC,OAAA,CAAK,EAAE,0VAAA,CAA2V,EACrW,EACAA,EAAAA,IAAC,OAAA,CAAK,UAAU,gCAAgC,SAAA,oBAAiB,EAChE0xC,EAAgB,cAAgB,GAC/B3xC,EAAAA,KAAC,OAAA,CAAK,UAAU,2EACb,SAAA,CAAA2xC,EAAgB,cAAc,WAAA,CAAA,CACjC,CAAA,EAEJ,EACA3xC,EAAAA,KAAC,IAAA,CAAE,UAAU,+BAA+B,SAAA,CAAA,yBACnB2xC,EAAgB,wBAA0BA,EAAgB,iBAAiB,qBACjGA,EAAgB,cAAgB,GAAK,yBAAA,EACxC,EAGA3xC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACZ,SAAA,CAAA2xC,EAAgB,eAAiBA,EAAgB,cAAc,OAAS,EACvE3xC,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,gBAAa,EAC3CD,EAAAA,KAAC,MAAA,CAAI,UAAU,OACZ,SAAA,CAAA2xC,EAAgB,cAAc,MAAM,EAAG,CAAC,EAAE,IAAI,CAACla,EAAc91B,UAC3D,OAAA,CAAiB,UAAU,kGACzB,SAAA81B,CAAA,EADQ91B,CAEX,CACD,EACAgwC,EAAgB,cAAc,OAAS,GACtC3xC,EAAAA,KAAC,OAAA,CAAK,UAAU,0BAA0B,SAAA,CAAA,IACtC2xC,EAAgB,cAAc,OAAS,EAAE,OAAA,CAAA,CAC7C,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,EAEA3xC,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,mBAAgB,EAAO,IAAE0xC,EAAgB,iBAAmBA,EAAgB,iBAAmB,YAAA,EAC/H,EAGF3xC,EAAAA,KAAC,MAAA,CAAI,UAAU,4FACb,SAAA,CAAAA,OAAC,OAAA,CAAM,SAAA,CAAA2xC,EAAgB,sBAAwBA,EAAgB,eAAe,gBAAA,EAAc,SAC3F,OAAA,CAAM,SAAA,CAAAA,EAAgB,eAAiB,EAAE,uBAAqBA,EAAgB,eAAiB,KAAO,EAAI,IAAM,EAAA,CAAA,CAAG,CAAA,CAAA,CACtH,CAAA,CAAA,CACF,CAAA,EACF,EAIDt+B,GAAU,YAAc,cAAgB,CAACs6B,GACxC3tC,OAAC,MAAA,CAAI,UAAU,mFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACsZ,GAAA,CAAO,UAAU,uBAAA,CAAwB,QACzC,OAAA,CAAK,UAAU,8BACb,SAAAo4B,EAAkB,gBAAkB,sBAAA,CACvC,CAAA,EACF,QACC,IAAA,CAAE,UAAU,6BACV,SAAAA,EACG,2GACA,8HAAA,CAEN,EACCA,SACE,MAAA,CAAI,UAAU,kCACb,SAAA3xC,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,gBAAA,CAAc,EACpBD,EAAAA,KAAC,OAAA,CAAK,UAAU,gBAAiB,SAAA,CAAA2xC,EAAgB,wBAA0BA,EAAgB,iBAAiB,GAAA,CAAA,CAAC,CAAA,EAC/G,EACA3xC,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,kBAAA,CAAgB,QACrB,OAAA,CAAK,UAAU,gBAAiB,SAAA0xC,EAAgB,eAAiB,CAAA,CAAE,CAAA,CAAA,CACtE,CAAA,CAAA,CACF,CAAA,CACF,EAEF3xC,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM0xC,EAAwB,EAAI,EAC3C,UAAU,iNAEV,SAAA,CAAAzxC,EAAAA,IAAC,MAAA,CAAI,UAAU,UAAU,KAAK,eAAe,QAAQ,YACnD,SAAAA,EAAAA,IAAC,OAAA,CAAK,EAAE,0VAAA,CAA2V,EACrW,EACAA,EAAAA,IAAC,OAAA,CAAM,SAAA0xC,EAAkB,uBAAyB,sBAAA,CAAuB,CAAA,CAAA,CAAA,CAC3E,EACF,EAIF3xC,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,qBAAkB,EAE3ED,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,cAAW,EAC3CD,EAAAA,KAAC,OAAA,CAAK,UAAU,mCAAmC,SAAA,CAAA,KAAGyF,EAAQ,aAAe,GAAG,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EAC7F,EACAzF,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,mBAAgB,QAC/C,OAAA,CAAK,UAAU,8BAA+B,SAAAwF,EAAQ,kBAAoB,CAAA,CAAE,CAAA,EAC/E,EACAzF,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,eAAY,QAC3C,OAAA,CAAK,UAAU,8BAA+B,SAAAwF,EAAQ,cAAgB,CAAA,CAAE,CAAA,EAC3E,EACAzF,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,oBAAiB,EACjDD,EAAAA,KAAC,OAAA,CAAK,UAAU,gCAAiC,SAAA,CAAAyF,EAAQ,6BAA+B,EAAE,IAAEA,EAAQ,yBAA2B,CAAA,CAAA,CAAE,CAAA,EACnI,EACAzF,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,kBAAe,EAC/CD,EAAAA,KAAC,OAAA,CAAK,UAAU,gCAAgC,SAAA,CAAA,KAAGyF,EAAQ,iBAAmB,GAAG,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,CAAA,CAC9F,CAAA,EACF,EAEAzF,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAACuF,GAAA,CAAQ,QAAS+mB,EAAS,yCAA2C,oCACpE,SAAAvsB,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM0oB,EAAgB,EAAI,EACnC,UAAW,wGACT6D,EACI,oDACA,mDACN,GAEA,SAAA,CAAAtsB,EAAAA,IAACyR,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BzR,EAAAA,IAAC,OAAA,CAAM,SAAAssB,EAAS,mBAAqB,aAAA,CAAc,CAAA,CAAA,CAAA,EAEvD,EAEAtsB,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM8mB,EAAgB,EAAI,EACnC,SAAUthB,EAAQ,mBAAqB,EACvC,UAAW,kIACT8mB,EACI,yFACA,sFACN,GAEC,SAAA9mB,EAAQ,mBAAqB,EAAI,WAAa8mB,EAAS,cAAgB,YAAA,CAAA,EAG1EvsB,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMrB,EAAS,0BAA0B,EAClD,UAAU,mJAEV,SAAA,CAAAsB,EAAAA,IAACsZ,GAAA,CAAO,UAAU,SAAA,CAAU,EAC5BtZ,EAAAA,IAAC,QAAK,SAAA,2BAAA,CAAyB,CAAA,CAAA,CAAA,EAGhCssB,GACCtsB,EAAAA,IAAC,MAAA,CAAI,UAAU,wDACb,eAAC,IAAA,CAAE,UAAU,sCAAsC,SAAA,2EAAA,CAEnD,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,kBAAe,EACxED,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,aAAU,EAC1CA,EAAAA,IAAC,OAAA,CAAK,UAAU,8BAA8B,SAAA,QAAA,CAAM,CAAA,EACtD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,eAAY,EAC5CA,EAAAA,IAAC,OAAA,CAAK,UAAU,+BAA+B,SAAA,OAAA,CAAK,CAAA,EACtD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,YAAS,EACzCA,EAAAA,IAAC,OAAA,CAAK,UAAU,8BAA8B,SAAA,IAAA,CAAE,CAAA,EAClD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,gBAAa,EAC7CA,EAAAA,IAAC,OAAA,CAAK,UAAU,gCAAgC,SAAA,MAAA,CAAI,CAAA,CAAA,CACtD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGCwF,GACCzF,EAAAA,KAAAiK,WAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC4b,GAAA,CACC,QAAApW,EACA,OAAQihB,GAAS,KAAKd,GAAKA,EAAE,gBAAkB,KAAK,EACpD,OAAQkB,EACR,QAAS,IAAMC,EAAgB,EAAK,EACpC,WAAY8C,CAAA,CAAA,EAGd5pB,EAAAA,IAACkc,GAAA,CACC,KAAM9I,EACN,UAAW5N,EAAQ,GACnB,aAAcA,EAAQ,MACtB,OAAQuhB,EACR,QAAS,IAAMC,EAAkB,EAAK,EACtC,UAAW,IAAM,CACflS,EAAA,EACAi9B,EAAA,CACF,CAAA,CAAA,EAGF/xC,EAAAA,IAACkd,GAAA,CACC,KAAM9J,EACN,UAAW5N,EAAQ,GACnB,aAAcA,EAAQ,MACtB,gBAAiBA,EAAQ,SACzB,WAAYA,EAAQ,aACpB,OAAQyhB,EACR,QAAS,IAAMC,EAAyB,EAAK,EAC7C,UAAW,IAAM,CACfpS,EAAA,EACAi9B,EAAA,CACF,CAAA,CAAA,EAGF/xC,EAAAA,IAAC6tC,GAAA,CACC,OAAQqD,EACR,QAAS,IAAMC,EAAoB,EAAK,EACxC,UAAW3rC,EAAQ,GACnB,aAAcA,EAAQ,MACtB,QAAS,GACT,eAAgBA,EAAQ,iBAAmB,EAC3C,WAAYA,EAAQ,aAAe,EACnC,YAAaA,EAAQ,cAAgB,EACrC,UAAW0sC,EAAA,CAAA,EAGblyC,EAAAA,IAACkf,GAAA,CACC,OAAQkyB,EACR,QAAS,IAAMC,EAAiB,EAAK,EACrC,UAAWgB,GACX,QAAA7sC,CAAA,CAAA,EAGFxF,EAAAA,IAACof,GAAA,CACC,OAAQ0I,EACR,QAAS,IAAMC,EAA0B,EAAK,EAC9C,UAAWqC,GACX,MAAM,iBACN,QAAS,oCAAoC5kB,EAAQ,KAAK,uEAC1D,YAAY,SACZ,WAAW,SACX,KAAK,QAAA,CAAA,EAIPxF,EAAAA,IAACgwC,GAAA,CACC,OAAQwB,EACR,QAAS,IAAMC,EAAwB,EAAK,EAC5C,UAAWa,GACX,aAAc9sC,EAAQ,MACtB,SAAU4N,GAAU,cAAgB,CAAA,CAAA,EAItCpT,EAAAA,IAAC+lB,GAAA,CACC,QAAAvgB,EACA,OAAQgjB,EACR,QAAS,IAAMC,EAAgB,EAAK,EACpC,MAAOtC,EAAA,CAAA,CACT,CAAA,CACF,CAAA,EAEJ,CAEJ,CAGO,MAAM2sB,GAAoB9B,GC9vCjC,SAAwB+B,IAAoB,CAC1C,KAAM,CAAE,GAAA9vC,CAAA,EAAOinC,GAAA,EACTxrC,EAAWC,GAAA,EACX,CAACq0C,EAAQC,CAAS,EAAIl0C,EAAAA,SAAsC,IAAI,EAChE,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAI,EAa3C,GAXAM,EAAAA,UAAU,IAAM,CACd,GAAI,CAAC4D,EAAI,QACI,SAAY,CACvBrC,EAAW,EAAI,EACf,MAAM1D,EAAO,MAAM08B,GAAiB32B,CAAE,EACtCgwC,EAAU/1C,CAAI,EACd0D,EAAW,EAAK,CAClB,GACA,CACF,EAAG,CAACqC,CAAE,CAAC,EAEH,CAACA,EACH,OACElD,EAAAA,KAAC,MAAA,CAAI,UAAU,MACb,SAAA,CAAAA,OAAC,UAAO,QAAS,IAAMrB,EAAS,EAAE,EAAG,UAAU,qEAC7C,SAAA,CAAAsB,EAAAA,IAAC6yC,GAAA,CAAU,UAAU,cAAA,CAAe,EAAE,OAAA,EACxC,EACA7yC,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,oBAAA,CAAkB,CAAA,EACtD,EAIJ,GAAIW,GAAW,CAACqyC,EACd,OACEjzC,EAAAA,KAAC,MAAA,CAAI,UAAU,MACb,SAAA,CAAAA,OAAC,UAAO,QAAS,IAAMrB,EAAS,EAAE,EAAG,UAAU,qEAC7C,SAAA,CAAAsB,EAAAA,IAAC6yC,GAAA,CAAU,UAAU,cAAA,CAAe,EAAE,OAAA,EACxC,EACA7yC,EAAAA,IAAC,OAAI,UAAU,4BACb,eAAC,MAAA,CAAI,UAAU,oFAAoF,CAAA,CACrG,CAAA,EACF,EAIJ,KAAM,CAAE,QAAAw4B,EAAS,QAAAhzB,EAAS,YAAA0tC,EAAa,YAAAC,GAAgBH,EAEvD,OACEjzC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,oCACb,SAAAD,EAAAA,KAAC,SAAA,CAAO,QAAS,IAAMrB,EAAS,EAAE,EAAG,UAAU,qEAC7C,SAAA,CAAAsB,EAAAA,IAAC6yC,GAAA,CAAU,UAAU,cAAA,CAAe,EAAE,oBAAA,CAAA,CACxC,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,4DACb,SAAA9yC,EAAAA,KAAC,MAAA,CAAI,UAAU,qEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,IAAKw4B,EAAQ,kBAAmB,IAAKA,EAAQ,cAAe,UAAU,mCAAA,CAAoC,SAC9G,MAAA,CACC,SAAA,CAAAx4B,EAAAA,IAAC,KAAA,CAAG,UAAU,uCAAwC,SAAAw4B,EAAQ,cAAc,EAC5Ez4B,EAAAA,KAAC,IAAA,CAAE,UAAU,wBACV,SAAA,CAAAy4B,EAAQ,aAAa,MAAIA,EAAQ,SAAS,YAAA,CAAY,EACzD,EACAx4B,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA8B,WAAQ,WAAA,CAAY,CAAA,CAAA,CACjE,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,eAAY,EACjDA,EAAAA,IAAC,IAAA,CAAE,UAAU,sCAAuC,WAAQ,YAAA,CAAa,CAAA,EAC3E,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,eAAY,EACjDD,EAAAA,KAAC,IAAA,CAAE,UAAU,sCAAsC,SAAA,CAAA,IAAEy4B,EAAQ,aAAa,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EACvF,EACAz4B,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,kBAAe,EACpDD,EAAAA,KAAC,KAAE,UAAW,yBAAyBy4B,EAAQ,iBAAmB,EAAI,iBAAmB,cAAc,GACpG,SAAA,CAAAA,EAAQ,iBAAmB,EAAI,IAAM,GAAG,IAAEA,EAAQ,gBAAgB,QAAQ,CAAC,CAAA,CAAA,CAC9E,CAAA,EACF,EACAz4B,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,oBAAiB,EACtDA,EAAAA,IAAC,IAAA,CAAE,UAAU,sCAAuC,WAAQ,iBAAA,CAAkB,CAAA,CAAA,CAChF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0EACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,sBAAmB,EACvED,EAAAA,KAAC,OAAA,CAAK,UAAU,oFACd,SAAA,CAAAC,EAAAA,IAACqB,GAAA,CAAW,UAAU,cAAA,CAAe,EAAE,eAAA,CAAA,CACzC,CAAA,EACF,EACArB,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAAkzC,EAAY,QAAQ,IAAKzxC,GACxB1B,EAAAA,KAAC,MAAA,CAAqB,UAAU,0DAC9B,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAM,WAAM,IAAA,CAAK,SACjB,OAAA,CAAK,SAAA,CAAA,IAAEyB,EAAM,MAAM,QAAQ,CAAC,EAAE,MAAIA,EAAM,OAAO,gBAAA,CAAA,CAAc,CAAA,GAFtDA,EAAM,IAGhB,CACD,CAAA,CACH,CAAA,EACF,EAEA1B,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,WAAQ,EACjEA,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAAkzC,EAAY,OAAO,IAAKjlC,GACvBlO,EAAAA,KAAC,MAAA,CAAkB,UAAU,4CAC3B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,MAAC,MAAA,CAAI,UAAU,oEACZ,SAAAiO,EAAK,OAAS,WACbjO,EAAAA,IAAC+/B,GAAA,CAAc,UAAU,yBAAyB,EAElD//B,EAAAA,IAAC+O,GAAA,CAAW,UAAU,0BAA0B,EAEpD,SACC,MAAA,CACC,SAAA,CAAA/O,EAAAA,IAAC,IAAA,CAAE,UAAU,uCAAwC,SAAAiO,EAAK,KAAK,EAC/DjO,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,SAAA,IAAI,KAAKiO,EAAK,SAAS,EAAE,eAAA,CAAe,CAAE,CAAA,CAAA,CAClF,CAAA,EACF,EACAjO,EAAAA,IAAC,OAAI,UAAU,mCACZ,WAAK,SAAW,GAAGiO,EAAK,QAAQ,cAAcA,EAAK,MAAM,QAAQ,CAAC,CAAC,GAAK,IAAIA,EAAK,MAAM,QAAQ,CAAC,CAAC,EAAA,CACpG,CAAA,GAhBQA,EAAK,EAiBf,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,EACF,EAEAlO,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,uBAAoB,EAC7EA,MAAC,MAAA,CAAI,UAAU,YACZ,WAAY,SAAS,OACpBmzC,EAAY,SAAS,IAAKrb,GACxB/3B,EAAAA,KAAC,MAAA,CAAqB,UAAU,oEAC9B,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,IAAA,CAAE,UAAU,oCAAqC,SAAA,CAAA+3B,EAAQ,SAAS,SAAA,EAAO,EAC1E/3B,EAAAA,KAAC,IAAA,CAAE,UAAU,mCAAmC,SAAA,CAAA,WAAS+3B,EAAQ,MAAA,CAAA,CAAO,CAAA,EAC1E,EACA/3B,EAAAA,KAAC,MAAA,CAAI,UAAU,sCAAsC,SAAA,CAAA,IAAE+3B,EAAQ,UAAU,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,CAAA,EAL5EA,EAAQ,EAMlB,CACD,QAEA,IAAA,CAAE,UAAU,wBAAwB,SAAA,yBAAA,CAAuB,CAAA,CAEhE,CAAA,EACF,EAEA/3B,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,gBAAa,EACtEA,MAAC,MAAA,CAAI,UAAU,YACZ,WAAY,OAAO,OAClBmzC,EAAY,OAAO,IAAK/a,GACtBr4B,EAAAA,KAAC,MAAA,CAAmB,UAAU,kCAC5B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,IAAA,CAAE,UAAU,oCAAqC,SAAA,CAAAq4B,EAAM,SAAS,cAAYA,EAAM,UAAU,QAAQ,CAAC,CAAA,EAAE,EACxGp4B,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,WAAM,UAAA,CAAW,CAAA,EACzD,EACAA,EAAAA,IAAC,OAAA,CAAK,UAAU,wCAAyC,WAAM,MAAA,CAAO,CAAA,EACxE,EACCo4B,EAAM,SAAWr4B,OAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,IAAEq4B,EAAM,QAAQ,GAAA,CAAA,CAAC,CAAA,CAAA,EARrEA,EAAM,EAShB,CACD,QAEA,IAAA,CAAE,UAAU,wBAAwB,SAAA,gBAAA,CAAc,CAAA,CAEvD,CAAA,CAAA,CACF,CAAA,EACF,EAEAr4B,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,+BAA4B,EACrFD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,kDAAkD,SAAA,cAAW,QACzE,IAAA,CAAE,UAAU,wCAAyC,SAAAwF,EAAQ,YAAY,gBAAe,CAAE,CAAA,EAC7F,EACAzF,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,kBAAe,EAC5ED,EAAAA,KAAC,IAAA,CAAE,UAAU,sCAAuC,SAAA,CAAAyF,EAAQ,gBAAgB,GAAA,CAAA,CAAC,CAAA,EAC/E,EACAzF,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,kDAAkD,SAAA,mBAAgB,EAC/ED,EAAAA,KAAC,IAAA,CAAE,UAAU,wCAAwC,SAAA,CAAA,IAAEyF,EAAQ,iBAAiB,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EAC7F,EACAzF,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,iDAAiD,SAAA,aAAU,EACxEA,EAAAA,IAAC,IAAA,CAAE,UAAU,uCAAwC,SAAAw4B,EAAQ,cAAgB,IAAI,KAAKA,EAAQ,aAAa,EAAE,mBAAA,EAAuB,KAAA,CAAM,CAAA,CAAA,CAC5I,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,CAEJ,CCrMA,SAAwB4a,IAAuB,CAC7C,KAAM,CAAE,GAAAnwC,CAAA,EAAOinC,GAAA,EACTxrC,EAAWC,GAAA,EACX,CAACq0C,EAAQC,CAAS,EAAIl0C,EAAAA,SAAkC,IAAI,EAC5D,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAI,EAa3C,GAXAM,EAAAA,UAAU,IAAM,CACd,GAAI,CAAC4D,EAAI,QACI,SAAY,CACvBrC,EAAW,EAAI,EACf,MAAM1D,EAAO,MAAM28B,GAAoB52B,CAAE,EACzCgwC,EAAU/1C,CAAI,EACd0D,EAAW,EAAK,CAClB,GACA,CACF,EAAG,CAACqC,CAAE,CAAC,EAEH,CAACA,EACH,OACElD,EAAAA,KAAC,MAAA,CAAI,UAAU,MACb,SAAA,CAAAA,OAAC,UAAO,QAAS,IAAMrB,EAAS,EAAE,EAAG,UAAU,qEAC7C,SAAA,CAAAsB,EAAAA,IAAC6yC,GAAA,CAAU,UAAU,cAAA,CAAe,EAAE,OAAA,EACxC,EACA7yC,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,uBAAA,CAAqB,CAAA,EACzD,EAIJ,GAAIW,GAAW,CAACqyC,EACd,OACEjzC,EAAAA,KAAC,MAAA,CAAI,UAAU,MACb,SAAA,CAAAA,OAAC,UAAO,QAAS,IAAMrB,EAAS,EAAE,EAAG,UAAU,qEAC7C,SAAA,CAAAsB,EAAAA,IAAC6yC,GAAA,CAAU,UAAU,cAAA,CAAe,EAAE,sBAAA,EACxC,EACA7yC,EAAAA,IAAC,OAAI,UAAU,4BACb,eAAC,MAAA,CAAI,UAAU,oFAAoF,CAAA,CACrG,CAAA,EACF,EAIJ,KAAM,CAAE,WAAAu5B,EAAY,SAAAxU,EAAU,WAAAsuB,EAAY,aAAAC,GAAiBN,EAE3D,OACEjzC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,oCACb,SAAAD,EAAAA,KAAC,SAAA,CAAO,QAAS,IAAMrB,EAAS,EAAE,EAAG,UAAU,qEAC7C,SAAA,CAAAsB,EAAAA,IAAC6yC,GAAA,CAAU,UAAU,cAAA,CAAe,EAAE,OAAA,CAAA,CACxC,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,4DACb,SAAA9yC,EAAAA,KAAC,MAAA,CAAI,UAAU,qEACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,uCAAwC,SAAAu5B,EAAW,cAAc,EAC/Ex5B,EAAAA,KAAC,IAAA,CAAE,UAAU,wBACV,SAAA,CAAAw5B,EAAW,SAAS,YAAA,EAAc,aAAW,IAAI,KAAKA,EAAW,UAAU,EAAE,mBAAA,CAAmB,EACnG,EACAx5B,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,OAAI,EACjEA,EAAAA,IAAC,IAAA,CAAE,UAAU,mDAAoD,WAAW,eAAA,CAAgB,CAAA,EAC9F,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,QAAK,EAClED,EAAAA,KAAC,IAAA,CAAE,UAAU,wCAAwC,SAAA,CAAA,IAAEw5B,EAAW,OAAO,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EACtF,SACC,MAAA,CACC,SAAA,CAAAv5B,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,mBAAgB,EAC7ED,EAAAA,KAAC,IAAA,CAAE,UAAU,wCAAwC,SAAA,CAAA,IAAEw5B,EAAW,iBAAiB,QAAQ,CAAC,CAAA,CAAA,CAAE,CAAA,EAChG,SACC,MAAA,CACC,SAAA,CAAAv5B,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,SAAM,EACnEA,EAAAA,IAAC,IAAA,CAAE,UAAU,qDAAsD,WAAW,MAAA,CAAO,CAAA,CAAA,CACvF,CAAA,CAAA,CACF,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wDACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,kDAAkD,SAAA,kBAAe,EAC9ED,EAAAA,KAAC,IAAA,CAAE,UAAU,yCAA0C,SAAA,CAAAglB,EAAS,OAAO,MAAIA,EAAS,MAAA,EAAO,EAC3FhlB,EAAAA,KAAC,IAAA,CAAE,UAAU,+BAA+B,SAAA,CAAA,QAAMglB,EAAS,KAAK,QAAQ,CAAC,EAAE,GAAA,EAAC,EAC5EhlB,EAAAA,KAAC,IAAA,CAAE,UAAU,+BAA+B,SAAA,CAAA,WACjC,IAAI,KAAKglB,EAAS,UAAU,EAAE,eAAA,CAAe,CAAA,CACxD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAEAhlB,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0EACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,aAAU,EAC9DD,EAAAA,KAAC,OAAA,CAAK,UAAU,oFACd,SAAA,CAAAC,EAAAA,IAACq7B,GAAA,CAAU,UAAU,cAAA,CAAe,EAAE,iBAAA,CAAA,CACxC,CAAA,EACF,EACAr7B,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAAqzC,EAAW,IAAK5xC,GACf1B,EAAAA,KAAC,MAAA,CAAqB,UAAU,0DAC9B,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAM,WAAM,IAAA,CAAK,SACjB,OAAA,CAAK,SAAA,CAAA,UACIyB,EAAM,OAAO,eAAA,EAAiB,eAAaA,EAAM,SAAS,eAAA,CAAe,CAAA,CACnF,CAAA,GAJQA,EAAM,IAKhB,CACD,CAAA,CACH,CAAA,EACF,EAEA1B,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,mBAAgB,EACzEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wCAAyC,WAAS,kBAAA,CAAmB,CAAA,CAAA,CACpF,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACgP,GAAA,CAAM,UAAU,yBAAA,CAA0B,EAC3ChP,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,cAAA,CAAY,CAAA,EAClE,EACAD,EAAAA,KAAC,OAAA,CAAK,UAAU,6EACb,SAAA,CAAAuzC,EAAa,OAAO,SAAA,CAAA,CACvB,CAAA,EACF,EACAtzC,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAAszC,EAAa,IAAI,CAACC,EAAa7xC,IAC9B3B,EAAAA,KAAC,MAAA,CAA6C,UAAU,oEACtD,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,4BAA6B,SAAAuzC,EAAY,SAAS,EAC/DvzC,EAAAA,IAAC,IAAA,CAAE,UAAU,mCAAoC,WAAY,IAAA,CAAK,CAAA,EACpE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAA,OAAC,IAAA,CAAE,SAAA,CAAA,IAAEwzC,EAAY,OAAO,QAAQ,CAAC,CAAA,EAAE,EACnCvzC,EAAAA,IAAC,IAAA,CAAE,UAAU,mCAAoC,WAAY,MAAA,CAAO,CAAA,CAAA,CACtE,CAAA,CAAA,EARQ,GAAGuzC,EAAY,QAAQ,IAAI7xC,CAAK,EAS1C,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,EACF,CAEJ,CCxIA,SAAwB8xC,GAAc,CACpC,OAAA9rC,EACA,QAAAC,EACA,UAAAuB,EACA,KAAA4F,CACF,EAAuB,CACrB,KAAM,CAACgM,EAAUC,CAAW,EAAIhc,WAAS,CACvC,MAAO+P,EAAK,MACZ,YAAaA,EAAK,YAClB,UAAWA,EAAK,UAChB,WAAYA,EAAK,WACjB,SAAUA,EAAK,SACf,gBAAiBA,EAAK,gBACtB,eAAgBA,EAAK,eACrB,mBAAoBA,EAAK,mBACzB,gBAAiBA,EAAK,iBAAmB,GACzC,aAAcA,EAAK,cAAgB,GACnC,aAAcA,EAAK,cAAgB,GACnC,YAAaA,EAAK,YAAcA,EAAK,YAAY,MAAM,GAAG,EAAE,CAAC,EAAI,GACjE,iBAAkBA,EAAK,kBAAoB,OAC3C,SAAUA,EAAK,UAAY,GAC3B,YAAaA,EAAK,aAAe,GACjC,iBAAkBA,EAAK,iBACvB,kBAAmBA,EAAK,kBACxB,cAAeA,EAAK,cACpB,aAAcA,EAAK,aACnB,aAAc,EAAA,CACf,EACK,CAACnO,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAwB,IAAI,EA6BtD,GA3BAM,EAAAA,UAAU,IAAM,CACVyP,GACFiM,EAAY,CACV,MAAOjM,EAAK,MACZ,YAAaA,EAAK,YAClB,UAAWA,EAAK,UAChB,WAAYA,EAAK,WACjB,SAAUA,EAAK,SACf,gBAAiBA,EAAK,gBACtB,eAAgBA,EAAK,eACrB,mBAAoBA,EAAK,mBACzB,gBAAiBA,EAAK,iBAAmB,GACzC,aAAcA,EAAK,cAAgB,GACnC,aAAcA,EAAK,cAAgB,GACnC,YAAaA,EAAK,YAAcA,EAAK,YAAY,MAAM,GAAG,EAAE,CAAC,EAAI,GACjE,iBAAkBA,EAAK,kBAAoB,OAC3C,SAAUA,EAAK,UAAY,GAC3B,YAAaA,EAAK,aAAe,GACjC,iBAAkBA,EAAK,iBACvB,kBAAmBA,EAAK,kBACxB,cAAeA,EAAK,cACpB,aAAcA,EAAK,aACnB,aAAc,EAAA,CACf,CAEL,EAAG,CAACA,CAAI,CAAC,EAEL,CAACpH,EAAQ,OAAO,KAEpB,MAAMsT,EAAe,MAAOxd,GAAuB,CACjDA,EAAE,eAAA,EACFoD,EAAW,EAAI,EACf2I,EAAS,IAAI,EAEb,GAAI,CAEF,MAAMkqC,EAAa,CACjB,GAAG34B,EACH,YAAaA,EAAS,YAAc,IAAI,KAAKA,EAAS,WAAW,EAAE,YAAA,EAAgB,MAAA,EAKrF,GAAI,CADqB0D,GAAwB,UAAUi1B,CAAU,EAC/C,QAAS,CAC7BlqC,EAAS,kCAAkC,EAC3C,MACF,CAEA,MAAM3F,EAAW,MAAM,MAAM,cAAckL,EAAK,EAAE,GAAI,CACpD,OAAQ,MACR,QAAS,CACP,eAAgB,kBAAA,EAElB,YAAa,UACb,KAAM,KAAK,UAAU2kC,CAAU,CAAA,CAChC,EAED,GAAI7vC,EAAS,GAAI,CACf,MAAMmN,EAAS,MAAMnN,EAAS,KAAA,EAC9BsF,EAAU6H,EAAO,IAAI,EACrBpJ,EAAA,CACF,KAAO,CACL,MAAMkC,EAAY,MAAMjG,EAAS,KAAA,EACjC2F,EAASM,EAAU,OAAS,uBAAuB,CACrD,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,EAC3C2L,EAAS,uBAAuB,CAClC,QAAA,CACE3I,EAAW,EAAK,CAClB,CACF,EAIA,aACG,MAAA,CAAI,UAAU,iFACb,SAAAb,EAAAA,KAAC,MAAA,CAAI,UAAU,oEAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,YAAS,EACzDA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDACV,SAAUhH,EAEV,SAAAX,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAGAhJ,EAAAA,KAAC,OAAA,CAAK,SAAUib,EAAc,UAAU,gBACrC,SAAA,CAAApd,GACCoC,EAAAA,IAAC,MAAA,CAAI,UAAU,oEACZ,SAAApC,EACH,EAIFmC,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,YAAS,EAClED,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAA+O,EAAK,eACJ9O,EAAAA,IAAC,OAAA,CAAK,UAAU,yEAAyE,SAAA,6BAEzF,EAED8O,EAAK,cACJ9O,EAAAA,IAAC,OAAA,CAAK,UAAU,2EAA2E,SAAA,uCAE3F,EAED,CAAC8O,EAAK,eAAiB,CAACA,EAAK,cAC5B9O,EAAAA,IAAC,OAAA,CAAK,UAAU,2EAA2E,SAAA,qCAAA,CAE3F,CAAA,EAEJ,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,4CAAA,CAA0C,CAAA,EACtF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,UAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO8a,EAAS,MAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,MAAOtd,EAAE,OAAO,MAAO,EACnE,UAAU,mIACV,YAAY,mBACZ,SAAQ,GACR,SAAUmD,CAAA,CAAA,CACZ,EACF,SAEC,MAAA,CACC,SAAA,CAAAX,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,kBAEhE,EACAA,EAAAA,IAAC,SAAA,CACC,MAAO8a,EAAS,UAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,UAAWtd,EAAE,OAAO,MAAO,EACvE,UAAU,mIACV,SAAQ,GACR,SAAUmD,EAET,SAAAoe,GAAe,QAAQ,IAAIgN,SACzB,SAAA,CAAsB,MAAOA,EAC3B,SAAAA,EAAS,QAAQ,KAAM,GAAG,EAAE,QAAQ,QAASC,GAAKA,EAAE,aAAa,CAAA,EADvDD,CAEb,CACD,CAAA,CAAA,CACH,EACF,SAEC,MAAA,CACC,SAAA,CAAA/rB,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,eAEhE,EACAA,EAAAA,IAAC,SAAA,CACC,MAAO8a,EAAS,WAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,WAAYtd,EAAE,OAAO,MAAO,EACxE,UAAU,mIACV,SAAQ,GACR,SAAUmD,EAET,SAAAqe,GAAqB,QAAQ,IAAImF,GAChCnkB,EAAAA,IAAC,SAAA,CAAwB,MAAOmkB,EAAY,UAAU,aACnD,SAAAA,CAAA,EADUA,CAEb,CACD,CAAA,CAAA,CACH,CAAA,CACF,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAAnkB,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,gBAEhE,EACAA,EAAAA,IAAC,WAAA,CACC,MAAO8a,EAAS,YAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,YAAatd,EAAE,OAAO,MAAO,EACzE,KAAM,EACN,UAAU,mIACV,YAAY,oCACZ,SAAQ,GACR,SAAUmD,CAAA,CAAA,CACZ,EACF,EAGCmO,EAAK,cACJ/O,OAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,6CAA6C,SAAA,qBAAkB,EAC7ED,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,iDAAiD,SAAA,WAAQ,EAC1EA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,IAAI,IACJ,MAAO8a,EAAS,SAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,SAAU,OAAOtd,EAAE,OAAO,KAAK,EAAG,EAC9E,UAAU,mHACV,SAAUmD,CAAA,CAAA,CACZ,EACF,SAEC,MAAA,CACC,SAAA,CAAAX,EAAAA,IAAC,QAAA,CAAM,UAAU,iDAAiD,SAAA,aAAU,EAC5EA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,IAAI,IACJ,MAAO8a,EAAS,gBAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,gBAAiB,OAAOtd,EAAE,OAAO,KAAK,EAAG,EACrF,UAAU,mHACV,SAAUmD,CAAA,CAAA,CACZ,EACF,SAEC,MAAA,CACC,SAAA,CAAAX,EAAAA,IAAC,QAAA,CAAM,UAAU,iDAAiD,SAAA,iBAAc,EAChFA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,IAAI,IACJ,MAAO8a,EAAS,eAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,eAAgB,OAAOtd,EAAE,OAAO,KAAK,EAAG,EACpF,UAAU,mHACV,SAAUmD,CAAA,CAAA,CACZ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGD,CAACmO,EAAK,eAAiB,CAACA,EAAK,cAC5B/O,OAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,6CAA6C,SAAA,qBAAkB,EAC7ED,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,iDAAiD,SAAA,cAAW,EAC7EA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,IAAI,IACJ,MAAO8a,EAAS,iBAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,iBAAkB,OAAOtd,EAAE,OAAO,KAAK,EAAG,EACtF,UAAU,mHACV,SAAUmD,CAAA,CAAA,CACZ,EACF,SAEC,MAAA,CACC,SAAA,CAAAX,EAAAA,IAAC,QAAA,CAAM,UAAU,iDAAiD,SAAA,cAAW,EAC7EA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,IAAI,IACJ,MAAO8a,EAAS,kBAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,kBAAmB,OAAOtd,EAAE,OAAO,KAAK,EAAG,EACvF,UAAU,mHACV,SAAUmD,CAAA,CAAA,CACZ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAIFZ,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,0BAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,IAAI,IACJ,MAAO8a,EAAS,mBAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,mBAAoB,OAAOtd,EAAE,OAAO,KAAK,EAAG,EACxF,UAAU,mIACV,YAAY,IACZ,SAAUmD,CAAA,CAAA,CACZ,EACF,SAEC,MAAA,CACC,SAAA,CAAAX,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,mBAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,IAAI,IACJ,MAAO8a,EAAS,kBAAoB,GACpC,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,iBAAkBtd,EAAE,OAAO,MAAQ,OAAOA,EAAE,OAAO,KAAK,EAAI,OAAW,EACnH,UAAU,mIACV,YAAY,YACZ,SAAUmD,CAAA,CAAA,CACZ,EACF,SAEC,MAAA,CACC,SAAA,CAAAX,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,kBAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO8a,EAAS,gBAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,gBAAiBtd,EAAE,OAAO,MAAO,EAC7E,UAAU,mIACV,YAAY,kBACZ,SAAUmD,CAAA,CAAA,CACZ,EACF,SAEC,MAAA,CACC,SAAA,CAAAX,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,WAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO8a,EAAS,YAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,YAAatd,EAAE,OAAO,MAAO,EACzE,UAAU,mIACV,SAAUmD,CAAA,CAAA,CACZ,EACF,SAEC,MAAA,CACC,SAAA,CAAAX,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,WAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO8a,EAAS,SAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,SAAUtd,EAAE,OAAO,MAAO,EACtE,UAAU,mIACV,YAAY,0BACZ,SAAUmD,CAAA,CAAA,CACZ,EACF,SAEC,MAAA,CACC,SAAA,CAAAX,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,cAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,MACL,MAAO8a,EAAS,YAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,YAAatd,EAAE,OAAO,MAAO,EACzE,UAAU,mIACV,YAAY,cACZ,SAAUmD,CAAA,CAAA,CACZ,CAAA,CACF,CAAA,EACF,EAGAZ,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,eAEhE,EACAA,EAAAA,IAAC,WAAA,CACC,MAAO8a,EAAS,aAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,aAActd,EAAE,OAAO,MAAO,EAC1E,KAAM,EACN,UAAU,mIACV,YAAY,4CACZ,SAAUmD,CAAA,CAAA,CACZ,EACF,SAEC,MAAA,CACC,SAAA,CAAAX,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,eAEhE,EACAA,EAAAA,IAAC,WAAA,CACC,MAAO8a,EAAS,aAChB,SAAWtd,GAAMud,EAAY,CAAE,GAAGD,EAAU,aAActd,EAAE,OAAO,MAAO,EAC1E,KAAM,EACN,UAAU,mIACV,YAAY,oCACZ,SAAUmD,CAAA,CAAA,CACZ,CAAA,CACF,CAAA,EACF,EAGAZ,EAAAA,KAAC,MAAA,CAAI,UAAU,+CACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS2H,EACT,SAAUhH,EACV,UAAU,sIACX,SAAA,QAAA,CAAA,EAGDX,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,SAAUW,EACV,UAAU,mOAET,WACCZ,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC6X,GAAA,CAAQ,UAAU,sBAAA,CAAuB,EAC1C7X,EAAAA,IAAC,QAAK,SAAA,aAAA,CAAW,CAAA,CAAA,CACnB,EAEAD,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAACmf,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1Bnf,EAAAA,IAAC,QAAK,SAAA,aAAA,CAAW,CAAA,CAAA,CACnB,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CCnbA,SAAwB0zC,IAAa,CACnC,KAAM,CAAE,GAAAzwC,EAAI,OAAA0wC,EAAQ,OAAAC,CAAA,EAAW1J,GAAA,EACzB2J,EAAcD,GAAUD,GAAU1wC,GAAM,KACxCvE,EAAWC,GAAA,EACXolB,EAAc,CAACvf,EAAuBwf,EAAW,aACvCxf,GAASA,EAAM,OAAO,OAAS,EAAIA,EAAQwf,GAEtD,QAAQ,KAAM,GAAG,EACjB,QAAQ,QAAU3mB,IAASA,GAAK,YAAA,CAAa,EAE5C,CAACyR,EAAMglC,CAAO,EAAI/0C,EAAAA,SAA0B,IAAI,EAChD,CAACwoC,EAAawM,CAAc,EAAIh1C,EAAAA,SAAqC,IAAI,EACzE,CAACqU,EAAUC,CAAW,EAAItU,EAAAA,SAA0B,IAAI,EACxD,CAACmL,EAAiBC,CAAkB,EAAIpL,EAAAA,SAAc,IAAI,EAC1D,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAI,EACrC,CAACi1C,EAAUC,CAAW,EAAIl1C,EAAAA,SAAS,EAAK,EACxC,CAACm1C,EAAoBC,CAAqB,EAAIp1C,EAAAA,SAAS,EAAE,EACzD,CAACq1C,EAAWC,CAAY,EAAIt1C,EAAAA,SAAS,EAAK,EAC1C,CAACu1C,EAAeC,CAAgB,EAAIx1C,EAAAA,SAAS,EAAK,EAClD,CAACy1C,EAAiBC,CAAkB,EAAI11C,EAAAA,SAAS,EAAK,EACtD,CAAC21C,EAAUC,CAAW,EAAI51C,EAAAA,SAAS,EAAK,EAIxC61C,EAA+B,KAAO,CAC1C,aAAc,GACd,sBAAuB,EACvB,qBAAsB,EACtB,kBAAmB,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAc,GAAI,EAAE,YAAA,CAAY,GAGrEC,EAA4B,IAA6B,CAC7D,MAAMC,EAAiB1hC,GAAU,IAAM,YAEvC,MAAO,CACL,CACE,GAAI,EACJ,QAJc,OAAOtE,GAAM,IAAM+kC,GAAe,WAAW,EAK3D,QAASiB,EACT,OAAQ,WACR,oBAAqB,4HAErB,eAAgB,2CAChB,YAAa,IACb,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAc,GAAK,GAAI,EAAE,YAAA,EAC3D,aAAc,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAc,GAAK,GAAI,EAAE,YAAA,EAC7D,QAAS,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAU,GAAK,GAAI,EAAE,YAAA,EACpD,iBAAkB,mCAClB,aAAc,IACd,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAc,GAAK,GAAI,EAAE,YAAA,EAC3D,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAU,GAAK,GAAI,EAAE,YAAA,CAAY,CACrE,CAEJ,EAGMxoB,EAASxd,GAAM,OAAO,YAAA,EAAc,SAAS,QAAQ,GAC5CA,GAAM,OAAO,cAAc,SAAS,MAAM,GAC1CA,GAAM,aAAa,YAAA,EAAc,SAAS,MAAM,EAE/DzP,EAAAA,UAAU,IAAM,CACVw0C,GACFkB,EAAA,EACAC,EAAA,EACAlgC,EAAA,EACA1K,EAAA,GAEAxJ,EAAW,EAAK,CAGpB,EAAG,CAACizC,CAAW,CAAC,EAGhBx0C,EAAAA,UAAU,IAAM,CACd,GAAIyP,GAAQsE,EAAU,CACpB,MAAM6hC,EAAgBnmC,EAAK,aAAesE,EAAS,GACnD,QAAQ,IAAI,2BAA4B,CACtC,cAAetE,EAAK,WACpB,OAAQsE,EAAS,GACjB,UAAW6hC,CAAA,CACZ,EACDZ,EAAaY,CAAa,CAC5B,CACF,EAAG,CAACnmC,EAAMsE,CAAQ,CAAC,EAEnB,MAAM2hC,EAAkB,SAAY,CAClC,GAAI,CAAClB,EAAa,CAChB,QAAQ,KAAK,0CAA0C,EACvDjzC,EAAW,EAAK,EAChB,MACF,CAEA,GAAI,CACF,QAAQ,IAAI,+BAAgCizC,CAAW,EACvD,MAAMjwC,EAAW,MAAM+O,GAAS,cAAckhC,CAAW,EAAE,EAI3D,GAFA,QAAQ,IAAI,+BAAgCjwC,EAAS,MAAM,EAEvDA,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAG5B,GAFA,QAAQ,IAAI,sBAAuB1G,CAAI,EAEnC,CAACA,GAAQ,CAACA,EAAK,GAAI,CACrB,QAAQ,KAAK,+CAA+C,EAC5DwB,EAAS,aAAc,CACrB,MAAO,CACL,MAAO,oBACP,QACE,wFAAA,CACJ,CACD,EACD,MACF,CAEAo1C,EAAQ52C,CAAI,CACd,SAAW0G,EAAS,SAAW,IAC7B,QAAQ,KAAK,mBAAmBiwC,CAAW,EAAE,EAC7Cn1C,EAAS,aAAc,CACrB,MAAO,CACL,MAAO,iBACP,QACE,iGAAA,CACJ,CACD,MACI,CACL,MAAMmL,EAAY,MAAMjG,EAAS,KAAA,EAAO,MAAM,KAAO,CAAA,EAAG,EACxD,QAAQ,MAAM,qBAAsBA,EAAS,OAAQiG,CAAS,EAG9D,GAAI,CACF,MAAM8I,GAAS,yBAA0B,CACvC,OAAQ,OACR,KAAM,KAAK,UAAU,CACnB,OAAQ,aACR,MAAO,sBAAsB/O,EAAS,MAAM,GAC5C,OAAQiwC,EACR,UAAW,IAAI,KAAA,EAAO,YAAA,CAAY,CACnC,CAAA,CACF,CACH,OAASqB,GAAU,CACjB,QAAQ,MAAM,uBAAwBA,EAAQ,CAChD,CAEAx2C,EAAS,SAAU,CACjB,MAAO,CACL,MAAO,qBACP,QACE,8DAAA,CACJ,CACD,CACH,CACF,OAASd,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,EAG5C,GAAI,CACF,MAAM+U,GAAS,yBAA0B,CACvC,OAAQ,OACR,KAAM,KAAK,UAAU,CACnB,OAAQ,aACR,MAAO,kBAAkB/U,CAAK,GAC9B,OAAQi2C,EACR,UAAW,IAAI,KAAA,EAAO,YAAA,CAAY,CACnC,CAAA,CACF,CACH,OAASqB,EAAU,CACjB,QAAQ,MAAM,uBAAwBA,CAAQ,CAChD,CAEAx2C,EAAS,SAAU,CACjB,MAAO,CACL,MAAO,mBACP,QACE,uFAAA,CACJ,CACD,CACH,QAAA,CACEkC,EAAW,EAAK,CAClB,CACF,EAEMkU,EAAgB,SAAY,CAChC,GAAI,CACF,MAAMxC,EAAUD,GAAA,EAEVzO,EAAW,MAAM+O,GAAS,gBAAiB,CAC/C,YAAa,UACb,QAAAL,CAAA,CACD,EACD,GAAI1O,EAAS,GAAI,CACf,MAAM1G,GAAO,MAAM0G,EAAS,KAAA,EAC5B,QAAQ,IAAI,+BAAgC1G,EAAI,EAChD,QAAQ,IAAI,oBAAqBA,IAAM,EAAE,EACzCmW,EAAYnW,EAAI,CAClB,CACF,OAASU,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,CACnD,CACF,EAEMwM,EAAuB,SAAY,CACpB,CACjBD,EAAmByqC,GAA8B,EACjD,MACF,CAmBF,EAEMI,EAAmB,SAAY,CAChB,CACjB,MAAMG,EAAY,OAAOrmC,GAAM,IAAM+kC,GAAe,WAAW,EAEzDuB,GADeP,EAAA,EACY,KAAMQ,IAAQ,OAAOA,GAAI,OAAO,IAAMF,CAAS,EAChFpB,EAAeqB,IAAe,IAAI,EAClC,MACF,CAiCF,EAEME,EAAc,MAAO93C,GAAuB,CAEhD,GADAA,EAAE,eAAA,EACE,GAACsR,GAAQ,CAAColC,EAAmB,QAEjC,CAAAD,EAAY,EAAI,EAChB,GAAI,CACF,MAAMrwC,EAAW,MAAM+O,GAAS,cAAc7D,GAAM,IAAM+kC,CAAW,SAAU,CAC7E,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,GAAGxhC,GAAA,CAAiB,EAEtB,YAAa,UACb,KAAM,KAAK,UAAU,CAAE,oBAAqB6hC,EAAoB,CAAA,CACjE,EAED,GAAItwC,EAAS,GACX,MAAM,QAAQ,IAAI,CAACoxC,EAAA,EAAoBlgC,EAAA,EAAiB1K,EAAA,CAAsB,CAAC,EAC/E+pC,EAAsB,EAAE,MACnB,CACL,MAAMv2C,GAAQ,MAAMgG,EAAS,KAAA,EAC7B,QAAQ,MAAM,mBAAoBhG,EAAK,EACvC,MAAMA,GAAM,OAAS,yBAAyB,CAChD,CACF,OAASA,EAAO,CACd,QAAQ,MAAM,mBAAoBA,CAAK,EACvC,MAAM,yBAAyB,CACjC,QAAA,CACEq2C,EAAY,EAAK,CACnB,EACF,EAEM7nB,GAAoBL,GAAqB,CAE7C,GAAIjd,GAAM,YACR,OAAOA,EAAK,YAGd,OAAQid,EAAA,CACN,IAAK,mBAAoB,MAAO,oFAChC,IAAK,UAAW,MAAO,iFACvB,IAAK,eAAgB,MAAO,iFAC5B,IAAK,qBAAsB,MAAO,oFAClC,IAAK,UAAW,MAAO,oFACvB,IAAK,oBAAqB,MAAO,oFACjC,IAAK,aAAc,MAAO,oFAC1B,QAAS,MAAO,mFAAA,CAEpB,EAEMQ,GAAmBR,GAAqB,CAC5C,OAAQA,EAAA,CACN,IAAK,mBAAoB,MAAO,KAChC,IAAK,UAAW,MAAO,IACvB,IAAK,eAAgB,MAAO,KAC5B,IAAK,qBAAsB,MAAO,KAClC,IAAK,UAAW,MAAO,KACvB,IAAK,oBAAqB,MAAO,KACjC,QAAS,MAAO,IAAA,CAEpB,EAEM7H,EAAsBC,GAAuB,CACjD,OAAQA,EAAA,CACN,IAAK,OAAQ,MAAO,8BACpB,IAAK,SAAU,MAAO,gCACtB,IAAK,OAAQ,MAAO,0BACpB,QAAS,MAAO,2BAAA,CAEpB,EAEMC,EAAkB7I,GAAmB,CACzC,OAAQA,EAAA,CACN,IAAK,UAAW,MAAO,gCACvB,IAAK,WAAY,MAAO,4BACxB,IAAK,WAAY,MAAO,0BACxB,IAAK,YAAa,MAAO,8BACzB,IAAK,OAAQ,MAAO,gCACpB,QAAS,MAAO,2BAAA,CAEpB,EAEMg6B,EAAa,IAAM,CACvBhB,EAAiB,EAAI,CACvB,EAEMiB,EAAe,SAAY,CAC/Bb,EAAY,EAAI,EAChB,GAAI,CACF,MAAM/wC,EAAW,MAAM+O,GAAS,cAAc7D,EAAM,EAAE,GAAI,CACxD,OAAQ,SACR,YAAa,SAAA,CACd,EAED,GAAIlL,EAAS,GACXlF,EAAS,OAAO,MACX,CACL,MAAMd,EAAQ,MAAMgG,EAAS,KAAA,EAC7B,MAAMhG,EAAM,OAAS,uBAAuB,CAC9C,CACF,OAASA,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7C,MAAM,uBAAuB,CAC/B,QAAA,CACE+2C,EAAY,EAAK,EACjBF,EAAmB,EAAK,CAC1B,CACF,EAEMpC,EAAqBoD,GAA0B,CACnD3B,EAAQ2B,CAAW,EACnBlB,EAAiB,EAAK,CACxB,EAEA,OAAI5zC,EAEAX,MAAC,OAAI,UAAU,wCACb,eAAC,MAAA,CAAI,UAAU,mFAAA,CAAoF,EACrG,EAIC8O,EAeH/O,EAAAA,KAAC,MAAA,CAAI,UAAU,8BAEZ,SAAA,CAAAusB,GACCvsB,EAAAA,KAAC,MAAA,CAAI,UAAU,oFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,OAAC,OAAA,CAAK,UAAU,WAAW,SAAA,KAAE,QAC5B,KAAA,CAAG,UAAU,oBAAoB,SAAA,eAAY,QAC7C,OAAA,CAAK,UAAU,WAAW,SAAA,KAAE,CAAA,EAC/B,QACC,IAAA,CAAE,UAAU,8BAA8B,SAAA,oHAE3C,CAAA,EACF,EAIFA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMtB,EAAS,OAAO,EAC/B,UAAU,0GAEV,SAAAsB,EAAAA,IAAC6yC,GAAA,CAAU,UAAU,wBAAwB,CAAA,CAAA,EAE/C9yC,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,CAAA,gBACjCusB,SAAW,OAAA,CAAK,UAAU,kBAAkB,SAAA,SAAM,CAAA,EAClE,QACC,IAAA,CAAE,UAAU,gBACV,SAAAA,EAAS,6CAA+C,qBAAA,CAC3D,CAAA,EACF,EAGC8nB,GACCr0C,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAASw1C,EACT,UAAU,0HAEV,SAAA,CAAAv1C,EAAAA,IAAC01C,GAAA,CAAK,UAAU,UAAU,EAC1B11C,EAAAA,IAAC,QAAK,SAAA,OAAI,CAAA,CAAA,CAAA,EAEZD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM00C,EAAmB,EAAI,EACtC,UAAU,wHAEV,SAAA,CAAAz0C,EAAAA,IAAC+gB,GAAA,CAAO,UAAU,UAAU,EAC5B/gB,EAAAA,IAAC,QAAK,SAAA,SAAM,CAAA,CAAA,CAAA,CACd,EACF,CAAA,EAEJ,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BAEb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,6DACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,IAAKosB,GAAiBtd,EAAK,SAAS,EACpC,IAAKA,EAAK,MACV,UAAU,0BAAA,CAAA,EAEZ9O,EAAAA,IAAC,MAAA,CAAI,UAAU,0CAA0C,EACzDA,MAAC,MAAA,CAAI,UAAU,yBACb,eAAC,OAAA,CAAK,UAAW,8CAA8CkkB,EAAmBpV,EAAK,UAAU,CAAC,GAC/F,SAAAA,EAAK,UAAA,CACR,EACF,QACC,MAAA,CAAI,UAAU,wBACZ,SAAAA,EAAK,oBACH,MAAA,CAAI,UAAU,0DACb,SAAA9O,EAAAA,IAAC,QAAK,UAAU,iCAAiC,sBAAU,CAAA,CAC7D,EACE8O,EAAK,aACP9O,EAAAA,IAAC,MAAA,CAAI,UAAU,2DACb,SAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,iCAAiC,SAAA,WAAA,CAAS,CAAA,CAC5D,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,2DACb,SAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,iCAAiC,SAAA,YAAS,CAAA,CAC5D,EAEJ,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,2BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,MAAC,QAAK,UAAU,WAAY,SAAAusB,GAAgBzd,EAAK,SAAS,EAAE,QAC3D,OAAA,CAAK,UAAU,+EACb,SAAAiV,EAAYjV,EAAK,SAAS,CAAA,CAC7B,CAAA,EACF,EACA9O,EAAAA,IAAC,KAAA,CAAG,UAAU,oDAAqD,WAAK,MAAM,EAC9ED,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC2B,GAAA,CAAQ,UAAU,sCAAsC,EACzD3B,EAAAA,IAAC,IAAA,CAAE,UAAU,+CAAgD,WAAK,gBAAgB,CAAA,EACpF,QACC,IAAA,CAAE,UAAU,4BAA4B,SAAA,cAAW,CAAA,EACtD,CAAA,EACF,CAAA,CAAA,CACF,CAAA,CACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACb,SAAA,OAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,cAAW,EACpEC,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAiC,WAAK,YAAY,CAAA,EACjE,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACZ,SAAA,CAAA+O,EAAK,cACJ/O,OAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,yBAAyB,QAC/C,KAAA,CAAG,UAAU,sCAAsC,SAAA,eAAY,CAAA,EAClE,EACAF,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAiC,WAAK,aAAa,CAAA,EAClE,EAGD8O,EAAK,cACJ/O,OAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACsZ,GAAA,CAAO,UAAU,wBAAwB,QACzC,KAAA,CAAG,UAAU,sCAAsC,SAAA,eAAY,CAAA,EAClE,EACAtZ,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAiC,WAAK,aAAa,CAAA,EAClE,CAAA,EAEJ,EAGCoT,GAAYlJ,GACXnK,OAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC0K,GAAA,CAAO,UAAU,0BAA0B,QAC3C,KAAA,CAAG,UAAU,sCAAsC,SAAA,oBAAiB,CAAA,EACvE,EAEA3K,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,OAAC,OAAA,CAAK,UAAU,0BAA0B,SAAA,qBAAkB,EAC5DC,EAAAA,IAAC,OAAA,CAAK,UAAW,8CACfkK,EAAgB,aAAe,8BAAgC,+BACjE,GACG,SAAAA,EAAgB,aAAe,YAAc,gBAChD,CAAA,EACF,EACAnK,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,OAAC,OAAA,CAAK,UAAU,0BAA0B,SAAA,wBAAqB,EAC/DA,EAAAA,KAAC,OAAA,CAAK,UAAU,sCACb,SAAA,CAAAmK,EAAgB,sBAAsB,IAAEA,EAAgB,oBAAA,EAC3D,CAAA,EACF,CAAA,EACF,EAEC,CAACA,EAAgB,cAChBnK,EAAAA,KAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,CAAA,YAC3BmK,EAAgB,qBAAuBA,EAAgB,sBAAsB,6FAAA,EACzF,CAAA,EAEJ,EAIDkJ,GACCrT,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACoB,GAAA,CAAI,UAAU,wBAAwB,QACtC,KAAA,CAAG,UAAU,sCAAsC,SAAA,eAAY,CAAA,EAClE,EAEArB,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC4B,GAAA,CAAI,UAAU,0BAA0B,QACxC,OAAA,CAAK,UAAU,oCAAoC,SAAA,OAAI,CAAA,EAC1D,EACA5B,EAAAA,IAAC,IAAA,CAAE,UAAU,kCAAmC,WAAS,aAAa,CAAA,EACxE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC2B,GAAA,CAAQ,UAAU,0BAA0B,QAC5C,OAAA,CAAK,UAAU,oCAAoC,SAAA,OAAI,CAAA,EAC1D,EACA3B,EAAAA,IAAC,IAAA,CAAE,UAAU,kCAAmC,WAAS,aAAa,CAAA,EACxE,CAAA,EACF,EAECoT,EAAS,aAAetE,EAAK,gBAC3B,MAAA,CAAI,UAAU,sDACb,SAAA/O,EAAAA,KAAC,IAAA,CAAE,UAAU,uBAAuB,SAAA,CAAA,YACxB+O,EAAK,SAAWsE,EAAS,aAAa,oCAAA,CAAA,CAClD,CAAA,CACF,CAAA,EAEJ,EAIDm0B,EACCxnC,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC6O,GAAA,CAAS,UAAU,wBAAwB,QAC3C,KAAA,CAAG,UAAU,sCAAsC,SAAA,mBAAgB,CAAA,EACtE,EAEA9O,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,OAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,SAAM,EAC9CC,EAAAA,IAAC,OAAA,CAAK,UAAW,8CAA8CokB,EAAemjB,EAAY,MAAM,CAAC,GAC9F,SAAAA,EAAY,OACf,CAAA,EACF,EACAxnC,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,OAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,UAAO,EAC/CC,EAAAA,IAAC,OAAA,CAAK,UAAU,wBACb,SAAA,IAAI,KAAKunC,EAAY,UAAU,EAAE,mBAAA,EACpC,CAAA,EACF,EACAxnC,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,OAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,YAAS,EACjDC,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAyB,WAAK,SAAS,CAAA,EACzD,CAAA,EACF,SAEC,MAAA,CACC,SAAA,OAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,eAAY,EAC3DA,EAAAA,IAAC,IAAA,CAAE,UAAU,wCAAyC,WAAY,oBAAoB,CAAA,EACxF,EAECunC,EAAY,YAAc,GACzBvnC,EAAAA,IAAC,MAAA,CAAI,UAAU,0DACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC2B,GAAA,CAAQ,UAAU,yBAAyB,EAC5C5B,EAAAA,KAAC,OAAA,CAAK,UAAU,qCAAqC,SAAA,CAAA,UAC3CwnC,EAAY,YAAY,QAAA,EAClC,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CAEJ,EAEAxnC,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACoF,GAAA,CAAK,UAAU,0BAA0B,QACzC,KAAA,CAAG,UAAU,sCAAsC,SAAA,sBAAmB,CAAA,EACzE,EAECgO,IAAaA,EAAS,aAAetE,EAAK,UAAY,CAAC5E,GAAiB,eACvEnK,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,OAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,wBAAqB,EACtEA,EAAAA,KAAC,KAAA,CAAG,UAAU,oCACX,SAAA,CAAAqT,EAAS,aAAetE,EAAK,UAC5B/O,EAAAA,KAAC,KAAA,CAAG,SAAA,CAAA,UAAQ+O,EAAK,SAAWsE,EAAS,aAAa,YAAA,EAAU,EAE7D,CAAClJ,GAAiB,cACjBlK,EAAAA,IAAC,MAAG,SAAA,2CAAwC,CAAA,EAEhD,CAAA,EACF,SAGD,OAAA,CAAK,SAAUs1C,EAAa,UAAU,YACrC,SAAA,CAAAv1C,OAAC,MAAA,CACC,SAAA,OAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,8CAEhE,EACAC,EAAAA,IAAC,WAAA,CACC,MAAOk0C,EACP,SAAW12C,GAAM22C,EAAsB32C,EAAE,OAAO,KAAK,EACrD,KAAM,EACN,UAAU,iHACV,YAAY,mFACZ,SAAQ,EAAA,CAAA,CACV,EACF,EAEAwC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,SACEg0C,GACA,CAACE,EAAmB,KAAA,GACpB,CAAC9gC,GACDA,EAAS,aAAetE,EAAK,UAC7B,CAAC5E,GAAiB,aAEpB,UAAW,kIACToiB,EACI,yFACA,oFACN,GAEC,SAAA0nB,EAAW,gBAAkB,GAAG1nB,EAAS,aAAe,WAAW,KAAKxd,EAAK,QAAQ,QAAA,CAAA,CACxF,EACF,CAAA,EACF,CAAA,EAEJ,EAGA/O,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACb,SAAA,OAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,mBAAgB,EAEzEA,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC4B,GAAA,CAAI,UAAU,0BAA0B,QACxC,OAAA,CAAK,UAAU,gBAAgB,SAAA,WAAQ,CAAA,EAC1C,EACA5B,EAAAA,IAAC,OAAA,CAAK,UAAU,4BAA6B,WAAK,SAAS,CAAA,EAC7D,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC2B,GAAA,CAAQ,UAAU,0BAA0B,QAC5C,OAAA,CAAK,UAAU,gBAAgB,SAAA,aAAU,CAAA,EAC5C,EACA3B,EAAAA,IAAC,OAAA,CAAK,UAAU,4BAA6B,WAAK,gBAAgB,CAAA,EACpE,EAEC8O,EAAK,eAAiB,GACrB/O,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACoB,GAAA,CAAI,UAAU,wBAAwB,QACtC,OAAA,CAAK,UAAU,gBAAgB,SAAA,iBAAc,CAAA,EAChD,EACApB,EAAAA,IAAC,OAAA,CAAK,UAAU,8BAA+B,WAAK,mBAAmB,CAAA,EACzE,EAGFD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACgP,GAAA,CAAM,UAAU,wBAAwB,QACxC,OAAA,CAAK,UAAU,gBAAgB,SAAA,eAAY,CAAA,EAC9C,EACAjP,EAAAA,KAAC,OAAA,CAAK,UAAU,8BACb,SAAA,CAAA+O,EAAK,qBAAqB,IAAEA,EAAK,kBAAoB,GAAA,EACxD,CAAA,EACF,EAECA,EAAK,mBAAqB,GACzB/O,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACsB,EAAA,CAAK,UAAU,0BAA0B,QACzC,OAAA,CAAK,UAAU,gBAAgB,SAAA,iBAAc,CAAA,EAChD,EACAvB,EAAAA,KAAC,OAAA,CAAK,UAAU,8BAA+B,SAAA,CAAA+O,EAAK,mBAAmB,GAAA,EAAC,CAAA,EAC1E,EAGDA,EAAK,iBACJ/O,OAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC2K,GAAA,CAAM,UAAU,0BAA0B,QAC1C,OAAA,CAAK,UAAU,gBAAgB,SAAA,OAAI,CAAA,EACtC,EACA3K,EAAAA,IAAC,OAAA,CAAK,UAAU,8BAA+B,WAAK,gBAAgB,CAAA,EACtE,EAGD8O,EAAK,aACJ/O,OAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACghB,GAAA,CAAS,UAAU,uBAAuB,QAC1C,OAAA,CAAK,UAAU,gBAAgB,SAAA,WAAQ,CAAA,EAC1C,EACAhhB,EAAAA,IAAC,OAAA,CAAK,UAAU,8BACb,SAAA,IAAI,KAAK8O,EAAK,WAAW,EAAE,mBAAA,EAC9B,CAAA,EACF,CAAA,EAEJ,CAAA,EACF,EAGA/O,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,OAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,YAAS,EAClEC,EAAAA,IAAC4E,GAAA,CACC,SAAUkK,EAAK,aACf,YAAaA,EAAK,cAAgB,eAClC,UAAWA,EAAK,eAChB,UAAU,8BACV,KAAK,IAAA,CAAA,EAEP9O,EAAAA,IAAC,OAAI,UAAU,OACb,eAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,kBAAA,CAAgB,EACvD,QAEC,MAAA,CAAI,UAAU,qCACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,OAAC,IAAA,CAAE,UAAU,kCAAkC,SAAA,KAAE,QAChD,IAAA,CAAE,UAAU,wBAAwB,SAAA,eAAY,CAAA,EACnD,SACC,MAAA,CACC,SAAA,OAAC,IAAA,CAAE,UAAU,kCAAkC,SAAA,MAAG,QACjD,IAAA,CAAE,UAAU,wBAAwB,SAAA,aAAU,CAAA,EACjD,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACuI,GAAA,CAAY,UAAU,wBAAwB,QAC9C,KAAA,CAAG,UAAU,8BAA8B,SAAA,WAAQ,CAAA,EACtD,EACAxI,EAAAA,KAAC,KAAA,CAAG,UAAU,kCACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,gDAA6C,EACjDA,EAAAA,IAAC,MAAG,SAAA,mCAAgC,EACpCA,EAAAA,IAAC,MAAG,SAAA,oCAAiC,EACrCA,EAAAA,IAAC,MAAG,SAAA,qCAAkC,EACtCA,EAAAA,IAAC,MAAG,SAAA,sCAAmC,CAAA,EACzC,CAAA,EACF,CAAA,EACF,CAAA,EACF,EAGC8O,GAAQwlC,GACPt0C,EAAAA,IAACwzC,GAAA,CACC,OAAQc,EACR,QAAS,IAAMC,EAAiB,EAAK,EACrC,UAAWlC,EACX,KAAAvjC,CAAA,CAAA,EAKJ9O,EAAAA,IAACof,GAAA,CACC,OAAQo1B,EACR,QAAS,IAAMC,EAAmB,EAAK,EACvC,UAAWe,EACX,MAAM,cACN,QAAQ,4GACR,YAAY,SACZ,WAAW,SACX,KAAK,SACL,QAASd,CAAA,CAAA,CACX,EACF,EA3cE30C,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,OAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,iBAAc,EACpEC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMtB,EAAS,OAAO,EAC/B,UAAU,kGACX,SAAA,cAAA,CAAA,CAED,EACF,CAqcN,CCt2BA,MAAMi3C,GAAclzC,EAAAA,cAAuC,IAAI,EAUxD,SAASmzC,GAAK,CAAE,MAAApxC,EAAO,aAAAqxC,EAAc,cAAAC,EAAe,SAAA3yC,EAAU,UAAA6B,GAAwB,CAC3F,KAAM,CAAC+wC,EAAeC,CAAgB,EAAIj3C,EAAAA,SAAS82C,CAAY,EACzDI,EAAczxC,GAASuxC,EAEvBG,EAAenkC,EAAAA,YAClBokC,GAAsB,CACrBH,EAAiBG,CAAS,EAC1BL,IAAgBK,CAAS,CAC3B,EACA,CAACL,CAAa,CAAA,EAGVM,EAAeC,EAAAA,QACnB,KAAO,CACL,MAAOJ,EACP,SAAUC,CAAA,GAEZ,CAACD,EAAaC,CAAY,CAAA,EAG5B,OACEl2C,EAAAA,IAAC21C,GAAY,SAAZ,CAAqB,MAAOS,EAC3B,SAAAp2C,EAAAA,IAAC,MAAA,CAAI,UAAAgF,EAAuB,SAAA7B,CAAA,CAAS,CAAA,CACvC,CAEJ,CAOO,SAASmzC,GAAS,CAAE,SAAAnzC,EAAU,UAAA6B,GAA4B,CAC/D,OACEhF,EAAAA,IAAC,MAAA,CAAI,KAAK,UAAU,UAAAgF,EACjB,SAAA7B,EACH,CAEJ,CAQO,SAASozC,GAAY,CAAE,MAAA/xC,EAAO,SAAArB,EAAU,UAAA6B,GAA+B,CAC5E,MAAMwxC,EAAM7xC,EAAAA,WAAWgxC,EAAW,EAElC,GAAI,CAACa,EACH,MAAM,IAAI,MAAM,sCAAsC,EAGxD,MAAMjhC,EAAWihC,EAAI,QAAUhyC,EAE/B,OACExE,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,KAAK,MACL,aAAYuV,EAAW,SAAW,WAClC,gBAAeA,EACf,UAAWyC,GACT,kGACAzC,EAAW,gCAAkC,oCAC7CvQ,CAAA,EAEF,QAAS,IAAMwxC,EAAI,SAAShyC,CAAK,EAEhC,SAAArB,CAAA,CAAA,CAGP,CAQO,SAASszC,GAAY,CAAE,MAAAjyC,EAAO,SAAArB,EAAU,UAAA6B,GAA+B,CAC5E,MAAMwxC,EAAM7xC,EAAAA,WAAWgxC,EAAW,EAElC,GAAI,CAACa,EACH,MAAM,IAAI,MAAM,sCAAsC,EAGxD,MAAMjhC,EAAWihC,EAAI,QAAUhyC,EAE/B,OACExE,EAAAA,IAAC,MAAA,CACC,KAAK,WACL,aAAYuV,EAAW,SAAW,WAClC,UAAWyC,GAAGzC,EAAW,QAAU,SAAUvQ,CAAS,EAErD,WAAW7B,EAAW,IAAA,CAAA,CAG7B,CCjGA,SAAwBuzC,GAAkB,CACxC,OAAAhvC,EACA,QAAAC,EACA,OAAAgvC,EACA,iBAAAC,EAAmB,CAAA,EACnB,QAAAj2C,EAAU,EACZ,EAA2B,CACzB,KAAM,CAACma,EAAUC,CAAW,EAAIhc,WAAS,CACvC,WAAY63C,EAAiB,YAAc,GAC3C,kBAAmBA,EAAiB,mBAAqB,GACzD,cAAeA,EAAiB,eAAiB,GACjD,YAAaA,EAAiB,aAAe,GAC7C,YAAaA,EAAiB,aAAe,EAAA,CAC9C,EACK,CAACC,EAAUC,CAAW,EAAI/3C,EAAAA,SAAsB,IAAI,EACpD,CAACg4C,EAAaC,CAAc,EAAIj4C,EAAAA,SAAS63C,EAAiB,gBAAkB,EAAE,EAC9E,CAACK,EAAeC,CAAgB,EAAIn4C,EAAAA,SAAS,EAAK,EAClDmuB,EAAe9mB,EAAAA,OAAyB,IAAI,EAE5C+wC,EAAoB,CAACljB,EAAezvB,IAAkB,CAC1DuW,EAAYxW,IAAS,CAAE,GAAGA,EAAM,CAAC0vB,CAAK,EAAGzvB,GAAQ,CACnD,EAEM4yC,EAAoB55C,GAA2C,CACnE,MAAMwgB,EAAOxgB,EAAE,OAAO,QAAQ,CAAC,EAC/B,GAAIwgB,EAAM,CAER,GAAI,CAACA,EAAK,KAAK,WAAW,QAAQ,EAAG,CACnC,MAAM,6BAA6B,EACnC,MACF,CAGA,GAAIA,EAAK,KAAO,EAAI,KAAO,KAAM,CAC/B,MAAM,yCAAyC,EAC/C,MACF,CAEA84B,EAAY94B,CAAI,EAGhB,MAAMsP,EAAS,IAAI,WACnBA,EAAO,OAAU9vB,GAAM,CACrBw5C,EAAex5C,EAAE,QAAQ,MAAgB,CAC3C,EACA8vB,EAAO,cAActP,CAAI,CAC3B,CACF,EAEMq5B,EAAa,SAA6B,CAC9C,GAAI,CAACR,EAAU,OAAOE,GAAe,GAErCG,EAAiB,EAAI,EACrB,GAAI,CACF,MAAMp8B,EAAW,IAAI,SACrBA,EAAS,OAAO,QAAS+7B,CAAQ,EAEjC,MAAMjzC,EAAW,MAAM,MAAM,oBAAqB,CAChD,OAAQ,OACR,YAAa,UACb,KAAMkX,CAAA,CACP,EAED,OAAIlX,EAAS,IACE,MAAMA,EAAS,KAAA,GAChB,KAAO,IAEnB,QAAQ,MAAM,uBAAuB,EAC9B,GAEX,OAAShG,EAAO,CACd,eAAQ,MAAM,wBAAyBA,CAAK,EACrC,EACT,QAAA,CACEs5C,EAAiB,EAAK,CACxB,CACF,EAEMlO,EAAa,SAAY,CAE7B,GAAI,CAACluB,EAAS,WAAW,OAAQ,CAC/B,MAAM,wBAAwB,EAC9B,MACF,CAEA,IAAIw8B,EAAUP,EAGd,GAAIF,IACFS,EAAU,MAAMD,EAAA,EACZ,CAACC,EAAQ,QAAQ,CACnB,MAAM,0CAA0C,EAChD,MACF,CAGF,MAAMC,EAAY,CAChB,GAAGz8B,EACH,eAAgBw8B,GAAW,EAAA,EAG7BX,EAAOY,CAAS,CAClB,EAEA,OAAK7vC,QAGF,MAAA,CAAI,UAAU,uFACb,SAAA3H,EAAAA,KAAC,MAAA,CAAI,UAAU,gFAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,qGACb,eAACw3C,GAAA,CAAU,UAAU,qBAAqB,CAAA,CAC5C,SACC,MAAA,CACC,SAAA,CAAAx3C,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,gBAAa,EACjEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,kCAAA,CAAgC,CAAA,CAAA,CACvE,CAAA,EACF,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,sDAEV,SAAA3H,EAAAA,IAAC+I,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAGAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,gBAEb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,aAEhE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,2HACZ,SAAA+2C,EACC/2C,EAAAA,IAAC,MAAA,CACC,IAAK+2C,EACL,IAAI,aACJ,UAAU,4BAAA,CAAA,EAGZ/2C,EAAAA,IAACme,GAAA,CAAO,UAAU,wBAAwB,CAAA,CAE9C,EACApe,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMmtB,EAAa,SAAS,MAAA,EACrC,SAAU+pB,EACV,UAAU,iJAEV,SAAA,CAAAj3C,EAAAA,IAACqe,GAAA,CAAO,UAAU,SAAA,CAAU,EAC5Bre,EAAAA,IAAC,OAAA,CAAM,SAAAi3C,EAAgB,eAAiB,aAAA,CAAc,CAAA,CAAA,CAAA,EAExDj3C,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,gDAAA,CAE1C,CAAA,CAAA,CACF,CAAA,EACF,EACAA,EAAAA,IAAC,QAAA,CACC,IAAKktB,EACL,KAAK,OACL,OAAO,UACP,SAAUkqB,EACV,UAAU,QAAA,CAAA,CACZ,EACF,SAGC,MAAA,CACC,SAAA,CAAAp3C,MAAC,QAAA,CAAM,QAAQ,aAAa,UAAU,+CAA+C,SAAA,eAErF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAACw3C,GAAA,CAAU,UAAU,0EAAA,CAA2E,EAChGx3C,EAAAA,IAAC,QAAA,CACC,GAAG,aACH,KAAK,OACL,MAAO8a,EAAS,WAChB,SAAWtd,GAAM25C,EAAkB,aAAc35C,EAAE,OAAO,KAAK,EAC/D,YAAY,wBACZ,UAAU,qHACV,SAAQ,EAAA,CAAA,CACV,CAAA,CACF,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAAwC,MAAC,QAAA,CAAM,QAAQ,oBAAoB,UAAU,+CAA+C,SAAA,oBAE5F,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAAC6O,GAAA,CAAS,UAAU,6CAAA,CAA8C,EAClE7O,EAAAA,IAAC,WAAA,CACC,GAAG,oBACH,MAAO8a,EAAS,kBAChB,SAAWtd,GAAM25C,EAAkB,oBAAqB35C,EAAE,OAAO,KAAK,EACtE,YAAY,2CACZ,KAAM,EACN,UAAU,gIAAA,CAAA,CACZ,CAAA,CACF,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAAwC,MAAC,QAAA,CAAM,QAAQ,gBAAgB,UAAU,+CAA+C,SAAA,UAExF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAACqpC,GAAA,CAAM,UAAU,0EAAA,CAA2E,EAC5FrpC,EAAAA,IAAC,QAAA,CACC,GAAG,gBACH,KAAK,MACL,MAAO8a,EAAS,cAChB,SAAWtd,GAAM25C,EAAkB,gBAAiB35C,EAAE,OAAO,KAAK,EAClE,YAAY,wBACZ,UAAU,oHAAA,CAAA,CACZ,CAAA,CACF,CAAA,EACF,EAGAuC,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,MAAC,QAAA,CAAM,QAAQ,cAAc,UAAU,+CAA+C,SAAA,cAEtF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAACmb,GAAA,CAAK,UAAU,0EAAA,CAA2E,EAC3Fnb,EAAAA,IAAC,QAAA,CACC,GAAG,cACH,KAAK,QACL,MAAO8a,EAAS,YAChB,SAAWtd,GAAM25C,EAAkB,cAAe35C,EAAE,OAAO,KAAK,EAChE,YAAY,wBACZ,UAAU,oHAAA,CAAA,CACZ,CAAA,CACF,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAwC,MAAC,QAAA,CAAM,QAAQ,cAAc,UAAU,+CAA+C,SAAA,eAEtF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAACmoC,GAAA,CAAM,UAAU,0EAAA,CAA2E,EAC5FnoC,EAAAA,IAAC,QAAA,CACC,GAAG,cACH,KAAK,MACL,MAAO8a,EAAS,YAChB,SAAWtd,GAAM25C,EAAkB,cAAe35C,EAAE,OAAO,KAAK,EAChE,YAAY,oBACZ,UAAU,oHAAA,CAAA,CACZ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGCsd,EAAS,YACR/a,OAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,UAAO,EAC9DD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,wGACZ,SAAA+2C,EACC/2C,EAAAA,IAAC,MAAA,CACC,IAAK+2C,EACL,IAAI,aACJ,UAAU,4BAAA,CAAA,EAGZ/2C,EAAAA,IAACw3C,GAAA,CAAU,UAAU,wBAAwB,CAAA,CAEjD,SACC,MAAA,CACC,SAAA,CAAAx3C,EAAAA,IAAC,MAAA,CAAI,UAAU,4BAA6B,SAAA8a,EAAS,WAAW,EAC/DA,EAAS,mBACR9a,EAAAA,IAAC,OAAI,UAAU,qCAAsC,WAAS,iBAAA,CAAkB,CAAA,CAAA,CAEpF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EAEJ,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uEACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS2H,EACT,UAAU,4EACX,SAAA,QAAA,CAAA,EAGD3H,EAAAA,IAAC,SAAA,CACC,QAASgpC,EACT,SAAUroC,GAAWs2C,GAAiB,CAACn8B,EAAS,WAAW,KAAA,EAC3D,UAAU,2OAET,WACC/a,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC,MAAA,CAAI,UAAU,8EAAA,CAA+E,EAC9FA,EAAAA,IAAC,QAAK,SAAA,WAAA,CAAS,CAAA,CAAA,CACjB,EAEAD,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAACgJ,GAAA,CAAM,UAAU,SAAA,CAAU,EAC3BhJ,EAAAA,IAAC,QAAK,SAAA,oBAAA,CAAkB,CAAA,CAAA,CAC1B,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EArNkB,IAuNtB,CCvTA,SAAwBy3C,GAAU,CAAE,WAAAC,EAAa,GAAM,SAAAC,EAAW,cAAgC,CAChG,KAAM,CAACC,EAAWC,CAAY,EAAI94C,EAAAA,SAAqB,CAAA,CAAE,EACnD,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAI,EACrC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAS,EAAE,EAErCM,EAAAA,UAAU,IAAM,EAES,SAAY,CACjC,GAAI,CACFuB,EAAW,EAAI,EAkCfi3C,EAhCkC,CAChC,CACE,GAAI,IACJ,KAAM,2BACN,OAAQ,SACR,UAAW,aACX,QAAS,aACT,OAAQ,IACR,MAAO,KACP,YAAa,MACb,OAAQ,KACR,IAAK,EACL,IAAK,GACL,MAAO,GACP,aAAc,IAAA,EAEhB,CACE,GAAI,IACJ,KAAM,iBACN,OAAQ,QACR,UAAW,aACX,QAAS,aACT,OAAQ,IACR,MAAO,EACP,YAAa,EACb,OAAQ,EACR,IAAK,EACL,IAAK,EACL,MAAO,EACP,aAAc,CAAA,CAChB,CAEwB,CAC5B,OAASn4C,EAAK,CACZ,QAAQ,MAAM,6BAA8BA,CAAG,EAC/C6J,EAAS,mDAAmD,CAC9D,QAAA,CACE3I,EAAW,EAAK,CAClB,CACF,GAEA,CACF,EAAG,CAAA,CAAE,EAEL,MAAMk3C,EAAkBv8B,GAAmB,CACzC,MAAM3E,EAAc,6CACpB,OAAQ2E,EAAA,CACN,IAAK,SACH,MAAO,GAAG3E,CAAW,+BACvB,IAAK,SACH,MAAO,GAAGA,CAAW,iCACvB,IAAK,YACH,MAAO,GAAGA,CAAW,6BACvB,IAAK,QACL,QACE,MAAO,GAAGA,CAAW,4BAAA,CAE3B,EAEMmb,EAAkB1oB,GACf,IAAI,KAAK,aAAa,QAAS,CACpC,MAAO,WACP,SAAU,MACV,sBAAuB,EACvB,sBAAuB,CAAA,CACxB,EAAE,OAAOA,CAAM,EAGZwZ,EAAgBC,GACb,IAAI,KAAK,aAAa,OAAO,EAAE,OAAOA,CAAG,EAGlD,GAAIniB,EACF,OACEX,MAAC,OAAI,UAAU,wCACb,eAAC,MAAA,CAAI,UAAU,+DAA+D,CAAA,CAChF,EAIJ,GAAIpC,EACF,aACG,MAAA,CAAI,UAAU,0CACb,SAAAmC,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,gBACb,SAAAA,EAAAA,IAAC,OAAI,UAAU,uBAAuB,MAAM,6BAA6B,QAAQ,YAAY,KAAK,eAChG,SAAAA,EAAAA,IAAC,QAAK,SAAS,UAAU,EAAE,0NAA0N,SAAS,SAAA,CAAU,CAAA,CAC1Q,CAAA,CACF,EACAA,EAAAA,IAAC,OAAI,UAAU,OACb,eAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAC7C,CAAA,CAAA,CACF,CAAA,CACF,EAIJ,MAAMm6C,EAAkB,GAAGJ,CAAQ,OAEnC,OACE53C,EAAAA,KAAC,MAAA,CAAI,UAAU,YACZ,SAAA,CAAA23C,GACC33C,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,YAAS,EAC1DA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,4CAAA,CAE1C,CAAA,EACF,EACAA,EAAAA,IAAC+X,IAAO,QAAO,GACb,gBAACzS,GAAA,CAAK,GAAIyyC,EAAiB,UAAU,8BACnC,SAAA,CAAA/3C,EAAAA,IAACoV,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BpV,EAAAA,IAAC,QAAK,SAAA,cAAA,CAAY,CAAA,CAAA,CACpB,CAAA,CACF,CAAA,EACF,EAGFA,EAAAA,IAAC,MAAA,CAAI,UAAU,gDACZ,SAAA43C,EAAU,SAAW,EACpB73C,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAACg4C,GAAA,CAAU,UAAU,iCAAA,CAAkC,EACvDh4C,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,eAAY,EACnEA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,0CAE1C,EACAA,MAAC,MAAA,CAAI,UAAU,OACb,SAAAA,EAAAA,IAAC+X,GAAA,CAAO,QAAO,GACb,SAAAhY,EAAAA,KAACuF,GAAA,CAAK,GAAIyyC,EAAiB,UAAU,2BACnC,SAAA,CAAA/3C,EAAAA,IAACoV,GAAA,CAAK,UAAU,oBAAA,CAAqB,EAAE,cAAA,CAAA,CAEzC,EACF,CAAA,CACF,CAAA,CAAA,CACF,EAEApV,EAAAA,IAAC,KAAA,CAAG,UAAU,2BACX,SAAA43C,EAAU,IAAKK,GACdj4C,MAAC,KAAA,CAAqB,UAAU,mBAC9B,SAAAA,EAAAA,IAACsF,GAAA,CAAK,GAAI,GAAGqyC,CAAQ,IAAIM,EAAS,EAAE,GAAI,UAAU,QAChD,SAAAl4C,OAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,+CACV,SAAAi4C,EAAS,KACZ,EACAj4C,EAAAA,IAAC,OAAI,UAAU,OACb,eAAC,OAAA,CAAK,UAAW83C,EAAeG,EAAS,MAAM,EAC5C,WAAS,OAAO,OAAO,CAAC,EAAE,cAAgBA,EAAS,OAAO,MAAM,CAAC,CAAA,CACpE,CAAA,CACF,CAAA,EACF,QACC,MAAA,CAAI,UAAU,0BACb,SAAAl4C,EAAAA,KAAC,IAAA,CAAE,UAAU,4FACV,SAAA,CAAAgyB,EAAekmB,EAAS,KAAK,EAAE,OAAKlmB,EAAekmB,EAAS,MAAM,CAAA,CAAA,CACrE,CAAA,CACF,CAAA,EACF,EACAl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,UACb,SAAAD,EAAAA,KAAC,IAAA,CAAE,UAAU,0CACX,SAAA,CAAAC,EAAAA,IAACghB,GAAA,CAAS,UAAU,4CAAA,CAA6C,EAChE,IAAI,KAAKi3B,EAAS,SAAS,EAAE,mBAAA,EAC7BA,EAAS,SACRl4C,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC,OAAA,CAAK,UAAU,OAAO,SAAA,IAAC,EACvB,IAAI,KAAKi4C,EAAS,OAAO,EAAE,mBAAA,CAAmB,CAAA,CACjD,CAAA,CAAA,CAEJ,CAAA,CACF,EACAl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAACgP,GAAA,CAAM,UAAU,4CAAA,CAA6C,SAC7D,IAAA,CAAG,SAAA,CAAA6T,EAAao1B,EAAS,YAAY,EAAE,eAAA,EAAa,EACrDj4C,EAAAA,IAAC,OAAA,CAAK,UAAU,OAAO,SAAA,IAAC,EACxBA,EAAAA,IAAC+O,GAAA,CAAW,UAAU,4CAAA,CAA6C,SAClE,IAAA,CAAE,SAAA,CAAA,QAAMgjB,EAAekmB,EAAS,GAAG,CAAA,CAAA,CAAE,CAAA,CAAA,CACxC,CAAA,EACF,EACCA,EAAS,SAAW,SACnBl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAACsZ,GAAA,CAAO,UAAU,4CAAA,CAA6C,SAC9D,OAAA,CAAM,SAAA,CAAAuJ,EAAao1B,EAAS,WAAW,EAAE,cAAA,CAAA,CAAY,CAAA,EACxD,EACAl4C,EAAAA,KAAC,OAAA,CAAK,UAAU,sBACb,SAAA,CAAAk4C,EAAS,IAAI,QAAQ,CAAC,EAAE,OAAA,CAAA,CAC3B,CAAA,EACF,EACAj4C,EAAAA,IAAC,MAAA,CAAI,UAAU,2CACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,+BACV,MAAO,CAAE,MAAO,GAAG,KAAK,IAAI,IAAMi4C,EAAS,MAAQA,EAAS,OAAU,GAAG,CAAC,GAAA,CAAI,CAAA,CAChF,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,EACF,CAAA,EA7DOA,EAAS,EA8DlB,CACD,EACH,CAAA,CAEJ,CAAA,EACF,CAEJ,CC7MA,SAAwBC,IAAsB,CAC5C,KAAM,CAAE,KAAA90C,CAAA,EAASqB,GAAA,EACX7F,EAAWC,GAAA,EACXH,EAAWC,GAAA,EAEX,CAACyU,EAAUC,CAAW,EAAItU,EAAAA,SAAc,IAAI,EAC5C,CAACo5C,EAAeC,CAAgB,EAAIr5C,EAAAA,SAMhC,IAAI,EACR,CAACs5C,EAAkBC,CAAmB,EAAIv5C,EAAAA,SAAgB,CAAA,CAAE,EAC5D,CAACw5C,EAAoBC,CAAqB,EAAIz5C,EAAAA,SAAS,EAAI,EAC3D,CAAC05C,EAA+BC,CAAgC,EAAI35C,EAAAA,SAAc,IAAI,EACtF,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAI,EACrC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAS,EAAE,EAC/B,CAAC45C,EAAgBC,CAAiB,EAAI75C,EAAAA,SAAS,EAAK,EACpD,CAAC85C,EAAaC,CAAc,EAAI/5C,EAAAA,SAAS,EAAK,EAC9C,CAAC0O,EAAWC,CAAY,EAAI3O,EAAAA,SAAoC,WAAW,EAEjFM,EAAAA,UAAU,IAAM,CACV+D,GACF0R,EAAA,CAEJ,EAAG,CAAC1R,CAAI,CAAC,EAET/D,EAAAA,UAAU,IAAM,CACV+T,IACF2lC,EAAA,EACAC,EAAA,EAEJ,EAAG,CAAC5lC,CAAQ,CAAC,EAEb/T,EAAAA,UAAU,IAAM,CACd,MAAM45C,EAAyB,IAAM,CAC/B,CAAC,SAAS,QAAU71C,GACtB0R,EAAA,CAEJ,EAEA,gBAAS,iBAAiB,mBAAoBmkC,CAAsB,EAC7D,IAAM,SAAS,oBAAoB,mBAAoBA,CAAsB,CACtF,EAAG,CAAC71C,CAAI,CAAC,EAET/D,EAAAA,UAAU,IAAM,CACV+D,GACF0R,EAAA,CAEJ,EAAG,CAAClW,GAAU,SAAUwE,CAAI,CAAC,EAE7B/D,EAAAA,UAAU,IAAM,CACd,MAAM65C,EAAuB17C,GAAoB,CAC3CA,EAAE,MAAQ,yBAA2BA,EAAE,WAAa,SACtD,aAAa,WAAW,uBAAuB,EAC/CsX,EAAA,EAEJ,EAEA,cAAO,iBAAiB,UAAWokC,CAAmB,EAC/C,IAAM,OAAO,oBAAoB,UAAWA,CAAmB,CACxE,EAAG,CAAA,CAAE,EAEL75C,EAAAA,UAAU,IAAM,CACV,OAAO,SAAS,OAAS,cAAgB+D,IAC3C,OAAO,QAAQ,aAAa,CAAA,EAAI,GAAI,OAAO,SAAS,QAAQ,EAC5D,WAAW,IAAM,CACf0R,EAAA,CACF,EAAG,GAAG,EAEV,EAAG,CAAC1R,CAAI,CAAC,EAET,MAAM0R,EAAgB,SAAY,CAChC,GAAI,CACF,MAAMxC,EAAUD,GAAA,EACVzO,EAAW,MAAM,MAAM,gBAAiB,CAC5C,YAAa,UACb,QAAA0O,CAAA,CACD,EAED,GAAI1O,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5ByP,EAAYnW,CAAI,CAClB,MACE,QAAQ,MAAM,6BAA8B0G,EAAS,MAAM,CAE/D,OAASlE,EAAK,CACZ,QAAQ,MAAM,6BAA8BA,CAAG,EAC/C6J,EAAS,0BAA0B,EACnC3I,EAAW,EAAK,CAClB,CACF,EAEMm4C,EAAqB,SAAY,CACrC,GAAI,CACF,MAAMzmC,EAAUD,GAAA,EACVzO,EAAW,MAAM,MAAM,6BAA8B,CACzD,YAAa,UACb,QAAA0O,CAAA,CACD,EAED,GAAI1O,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5Bw0C,EAAiBl7C,CAAI,CACvB,MACEk7C,EAAiB,CACf,MAAO,CAAA,EACP,UAAW,CAAA,EACX,UAAYhlC,GAAkB,WAAa,MAAA,CAC5C,CAEL,OAAS1T,EAAK,CACZ,QAAQ,MAAM,kCAAmCA,CAAG,EACpD04C,EAAiB,CACf,MAAO,CAAA,EACP,UAAW,CAAA,EACX,UAAYhlC,GAAkB,WAAa,MAAA,CAC5C,CACH,QAAA,CACExS,EAAW,EAAK,CAClB,CACF,EAEMo4C,EAAwB,SAAY,CACxC,GAAI,CACF,MAAM1mC,EAAUD,GAAA,EACVzO,EAAW,MAAM,MAAM,qCAAsC,CACjE,YAAa,UACb,QAAA0O,CAAA,CACD,EAED,GAAI1O,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5B00C,EAAoB,MAAM,QAAQp7C,CAAI,EAAIA,EAAO,CAAA,CAAE,CACrD,MACEo7C,EAAoB,CAAA,CAAE,CAE1B,OAAS54C,EAAK,CACZ,QAAQ,MAAM,qCAAsCA,CAAG,EACvD44C,EAAoB,CAAA,CAAE,CACxB,QAAA,CACEE,EAAsB,EAAK,CAC7B,CACF,EAEMW,EAAmB5uC,GAAiB,CACxC,OAAQA,EAAA,CACN,IAAK,QACH,MAAO,CACL,KAAM,mBACN,MAAO,+BACP,UAAW,mDACX,SAAU,CACR,oBACA,mBACA,mBACA,qBACA,2BAAA,CACF,EAEJ,IAAK,UACH,MAAO,CACL,KAAM,qBACN,MAAO,+BACP,UAAW,kDACX,SAAU,CACR,qBACA,mBACA,mBACA,2BAAA,CACF,EAEJ,QACE,MAAO,CACL,KAAM,kBACN,MAAO,2BACP,UAAW,0CACX,SAAU,CACR,kBACA,mBACA,0BACA,2BAAA,CACF,CACF,CAEN,EAEM6uC,EAAkB,IACjBjB,GAAe,MAIbA,EAAc,MAAM,OACzB,CAACxb,EAAK7tB,KAAe,CACnB,WAAY6tB,EAAI,WAAa,EAC7B,kBAAmBA,EAAI,mBAAqB7tB,EAAK,oBAAsB,GACvE,UAAW6tB,EAAI,WAAa7tB,EAAK,WAAa,EAAA,GAEhD,CAAE,WAAY,EAAG,kBAAmB,EAAG,UAAW,CAAA,CAAE,EAT7C,CAAE,WAAY,EAAG,kBAAmB,EAAG,UAAW,CAAA,EA8BvDuqC,EAhBe,MAAM,KAAK,CAAE,OAAQ,EAAA,EAAM,CAACngC,EAAG9b,IAAM,CACtD,MAAMmnB,MAAW,KACjB,OAAAA,EAAK,QAAQA,EAAK,QAAA,GAAa,GAAKnnB,EAAE,EAC/B,CACL,KAAMmnB,EAAK,YAAA,EAAc,MAAM,GAAG,EAAE,CAAC,EACrC,aAAc,KAAK,MAAM,KAAK,OAAA,EAAW,EAAE,EAAI,GAC/C,YAAa,KAAK,MAAM,KAAK,OAAA,EAAW,EAAE,EAAI,EAC9C,YAAa,KAAK,MAAM,KAAK,OAAA,EAAW,GAAI,EAAI,IAChD,OAAQ,KAAK,MAAM,KAAK,OAAA,EAAW,GAAG,EAAI,GAC1C,MAAO,KAAK,MAAM,KAAK,OAAA,EAAW,GAAG,EAAI,IACzC,aAAc,KAAK,MAAM,KAAK,OAAA,EAAW,EAAE,EAAI,CAAA,CAEnD,CAAC,EAKG+0B,EAAsB,CAC1B,CAAE,OAAQ,qBAAsB,MAAO,GAAA,EACvC,CAAE,OAAQ,kBAAmB,MAAO,IAAA,EACpC,CAAE,OAAQ,kBAAmB,MAAO,GAAA,EACpC,CAAE,OAAQ,mBAAoB,MAAO,IAAA,EACrC,CAAE,OAAQ,kBAAmB,MAAO,IAAA,CAAK,EAErCC,EAAoB,CACxB,CAAE,KAAM,mBAAoB,MAAO,GAAI,MAAO,SAAA,EAC9C,CAAE,KAAM,iBAAkB,MAAO,GAAI,MAAO,SAAA,EAC5C,CAAE,KAAM,UAAW,MAAO,GAAI,MAAO,SAAA,EACrC,CAAE,KAAM,UAAW,MAAO,GAAI,MAAO,SAAA,CAAU,EAG3CjvC,EAAW6uC,EAAgBhB,GAAe,WAAa,MAAM,EAC7Dzb,EAAS0c,EAAA,EAET9G,EAAwB9sC,GAAiBkzC,EAAiClzC,CAAO,EAEjFg0C,EAAqBC,GAAsB,CAC/C,MAAMC,EAAW,CACf,cAAe,CAAE,KAAM,cAAe,KAAM,GAAI,MAAO,EAAG,WAAY,GAAA,EACtE,gBAAiB,CAAE,KAAM,gBAAiB,KAAM,GAAI,MAAO,EAAG,WAAY,CAAA,EAC1E,iBAAkB,CAAE,KAAM,gBAAiB,KAAM,IAAK,MAAO,GAAI,WAAY,CAAA,EAC7E,oBAAqB,CAAE,KAAM,oBAAqB,KAAM,IAAK,MAAO,GAAI,WAAY,CAAA,EACpF,iBAAkB,CAAE,KAAM,iBAAkB,KAAM,IAAK,MAAO,IAAK,WAAY,CAAA,CAAI,EAErF,OAAOA,EAASD,CAAkC,GAAKC,EAAS,aAAa,CAC/E,EAEMC,GAAyB,MAAOpC,GAAmB,CACvDuB,EAAe,EAAI,EACnB,GAAI,CACF,MAAMl1C,EAAW,MAAM,MAAM,2BAA4B,CACvD,OAAQ,MACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU2zC,CAAS,CAAA,CAC/B,EAED,GAAI3zC,EAAS,GACXg1C,EAAkB,EAAK,EACvB9jC,EAAA,MACK,CACL,MAAMjL,EAAY,MAAMjG,EAAS,KAAA,EACjC,MAAMiG,EAAU,OAAS,8BAA8B,CACzD,CACF,OAASnK,EAAK,CACZ,QAAQ,MAAM,8BAA+BA,CAAG,EAChD,MAAM,8BAA8B,CACtC,QAAA,CACEo5C,EAAe,EAAK,CACtB,CACF,EAEAz5C,EAAAA,UAAU,IAAM,CAEZT,EAAS,WAAa,yBACtBA,EAAS,SAAS,WAAW,wBAAwB,GACrDA,EAAS,WAAa,cACtBA,EAAS,SAAS,WAAW,aAAa,EAE1C8O,EAAa,WAAW,EAExBA,EAAa,WAAW,CAE5B,EAAG,CAAC9O,EAAS,QAAQ,CAAC,EAEtB,MAAMg7C,GAAmBp1C,GAAkB,CAEvC9F,EADE8F,IAAU,YACH,wBAEA,aAFuB,CAIpC,EAEA,OAAI7D,EAEAX,MAAC,OAAI,UAAU,wCACb,eAAC,MAAA,CAAI,UAAU,oFAAoF,CAAA,CACrG,EAIApC,QAEC,MAAA,CAAI,UAAU,oBACb,SAAAmC,EAAAA,KAAC,MAAA,CAAI,UAAU,6DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,0CAA0C,SAAA,0BAAuB,EAC/EA,EAAAA,IAAC,IAAA,CAAE,UAAU,oBAAqB,SAAApC,EAAM,EACxCoC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,OAAO,SAAS,OAAA,EAC/B,UAAU,4FACX,SAAA,cAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,EAICoT,EAIAA,EAAiB,YAAc,mBAE/B,MAAA,CAAI,UAAU,oBACb,SAAArT,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,kFACb,eAACkW,GAAA,CAAU,UAAU,wBAAwB,CAAA,CAC/C,EACAlW,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,uBAAoB,EAC1EA,EAAAA,IAAC,IAAA,CAAE,UAAU,sCAAsC,SAAA,8HAGnD,EACAA,EAAAA,IAACsF,GAAA,CACC,GAAG,yBACH,UAAU,yLACX,SAAA,sBAAA,CAAA,EAGDtF,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,kEAAA,CAE1C,CAAA,CAAA,CACF,CAAA,CACF,EAICm4C,EAWHp4C,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,MAAC,MAAA,CAAI,UAAU,2BACb,SAAAA,MAAC41C,IAAK,MAAOnoC,EAAW,cAAemsC,GAAiB,UAAU,SAChE,SAAA75C,EAAAA,KAACu2C,GAAA,CAAS,UAAU,kCAClB,SAAA,CAAAv2C,EAAAA,KAACw2C,GAAA,CACC,MAAM,YACN,UAAU,gJAEV,SAAA,CAAAv2C,EAAAA,IAAC65C,GAAA,CAAgB,UAAU,cAAA,CAAe,EAAE,WAAA,CAAA,CAAA,EAG9C95C,EAAAA,KAACw2C,GAAA,CACC,MAAM,YACN,UAAU,gJAEV,SAAA,CAAAv2C,EAAAA,IAACkW,GAAA,CAAU,UAAU,cAAA,CAAe,EAAE,WAAA,CAAA,CAAA,CAExC,CAAA,CACF,EACF,EACF,EAECzI,IAAc,YACb1N,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,YAAS,EAC1DA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,uDAAA,CAAqD,CAAA,EAC5F,EACAD,EAAAA,KAACgY,GAAA,CACC,QAAS,IAAMrZ,EAAS,gBAAgB,EACxC,UAAU,2LAEV,SAAA,CAAAsB,EAAAA,IAAC85C,GAAA,CAAW,UAAU,SAAA,CAAU,EAChC95C,EAAAA,IAAC,QAAK,SAAA,cAAA,CAAY,CAAA,CAAA,CAAA,CACpB,EACF,EACAA,EAAAA,IAACy3C,GAAA,CAAU,WAAY,GAAO,SAAS,uBAAA,CAAwB,CAAA,CAAA,CACjE,EAEA13C,EAAAA,KAAAiK,EAAAA,SAAA,CAEE,SAAA,CAAAjK,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,8BACb,SAAAA,EAAAA,IAAC,MAAA,CACG,YAAkB,WAClBD,OAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,2GACX,SAAAoT,GAAkB,eAClBpT,EAAAA,IAAC,MAAA,CACC,IAAMoT,EAAiB,eACvB,IAAI,aACJ,UAAU,4BAAA,CAAA,EAGZpT,EAAAA,IAACw3C,GAAA,CAAU,UAAU,wBAAwB,CAAA,CAEjD,SACC,MAAA,CACC,SAAA,CAAAz3C,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAqC,SAAAoT,EAAiB,WAAW,EAC/EpT,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM44C,EAAkB,EAAI,EACrC,UAAU,sDACV,MAAM,qBAEN,SAAA54C,EAAAA,IAAC01C,GAAA,CAAK,UAAU,SAAA,CAAU,CAAA,CAAA,CAC5B,EACF,QACC,IAAA,CAAE,UAAU,gBACT,SAAAtiC,GAAkB,mBAAqB,6CAAA,CAC3C,CAAA,CAAA,CACF,CAAA,CAAA,CACF,SAEC,MAAA,CACC,SAAA,CAAArT,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,uBAAoB,EACrED,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM64C,EAAkB,EAAI,EACrC,UAAU,qIAEV,SAAA,CAAA54C,EAAAA,IAACw3C,GAAA,CAAU,UAAU,SAAA,CAAU,EAC/Bx3C,EAAAA,IAAC,QAAK,SAAA,cAAA,CAAY,CAAA,CAAA,CAAA,CACpB,EACF,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,6CAAA,CAA2C,CAAA,CAAA,CAC/E,EAEJ,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAW,wBAAwBsK,EAAS,KAAK,GACpD,SAAAtK,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAe,SAAAsK,EAAS,IAAA,CAAK,EAC/C,EACAtK,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM44C,EAAkB,EAAI,EACrC,UAAU,uFACV,MAAM,iBAEN,SAAA54C,EAAAA,IAACsV,GAAA,CAAS,UAAU,SAAA,CAAU,CAAA,CAAA,CAChC,CAAA,CACF,CAAA,EACF,EAGAvV,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,mBAAgB,EACpEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,yDAAA,CAErC,CAAA,EACF,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,2EAA2E,SAAA,SAAA,CAE1F,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,QAAK,EACvDD,EAAAA,KAAC,IAAA,CAAE,UAAU,sCACV,SAAA,CAAAo4C,GAAe,mBAAmB,YAAc,EAAE,KAAA,CAAA,CACrD,CAAA,EACF,EACAp4C,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,cAAW,EAC7DD,EAAAA,KAAC,IAAA,CAAE,UAAU,sCACV,SAAA,CAAAo4C,GAAe,mBAAmB,kBAAoB,EAAE,IAAA,CAAA,CAC3D,CAAA,EACF,EACAp4C,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,aAAU,EAC5DA,EAAAA,IAAC,IAAA,CAAE,UAAU,sCAAsC,SAAA,SAAA,CAAO,CAAA,CAAA,CAC5D,CAAA,CAAA,CACF,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,oBAAiB,EACrEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,0CAAA,CAAwC,CAAA,EAC/E,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,2EAA2E,SAAA,SAAA,CAE1F,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,QAAK,EACvDA,EAAAA,IAAC,IAAA,CAAE,UAAU,sCAAsC,SAAA,MAAG,EACtDA,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,cAAA,CAAY,CAAA,EACtD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,cAAW,EAC7DA,EAAAA,IAAC,IAAA,CAAE,UAAU,sCAAsC,SAAA,IAAA,CAAE,CAAA,EACvD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,aAAU,EAC5DA,EAAAA,IAAC,IAAA,CAAE,UAAU,sCAAsC,SAAA,GAAA,CAAC,CAAA,CAAA,CACtD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAAC07B,GAAA,CACC,MAAM,cACN,MAAOgB,EAAO,WACd,OAAQ,GACR,WAAW,WACX,KAAM18B,EAAAA,IAAC+lC,GAAA,CAAU,UAAU,SAAA,CAAU,EACrC,MAAOsT,EAAc,MAAM,EAAE,EAAE,IAAIhd,IAAM,CAAE,KAAMA,EAAE,KAAM,MAAO,KAAK,MAAM,KAAK,SAAW,EAAE,EAAI,GAAI,CAAA,CAAA,EAEvGr8B,EAAAA,IAAC07B,GAAA,CACC,MAAM,qBACN,MAAOgB,EAAO,kBAAkB,eAAA,EAChC,OAAQ,EACR,WAAW,WACX,KAAM18B,EAAAA,IAACgP,GAAA,CAAM,UAAU,SAAA,CAAU,EACjC,MAAOqqC,EAAc,MAAM,EAAE,EAAE,IAAIhd,IAAM,CAAE,KAAMA,EAAE,KAAM,MAAOA,EAAE,cAAe,CAAA,CAAA,EAEnFr8B,EAAAA,IAAC07B,GAAA,CACC,MAAM,mBACN,MAAOgB,EAAO,UAAU,QAAQ,CAAC,EACjC,OAAQ,GACR,WAAW,WACX,KAAM18B,EAAAA,IAAC2B,GAAA,CAAQ,UAAU,SAAA,CAAU,EACnC,MAAO03C,EAAc,MAAM,EAAE,EAAE,IAAIhd,IAAM,CAAE,KAAMA,EAAE,KAAM,MAAOA,EAAE,OAAQ,CAAA,CAAA,EAE5Er8B,EAAAA,IAAC07B,GAAA,CACC,MAAM,kBACN,MAAO,GAAGyc,EAAc,UAAU,OAAS,GAErCA,EAAc,UAAU,OACtB,CAACt2C,EAAKuP,IAAMvP,GAAOuP,EAAE,iBAAmB,GACxC,CAAA,EACE+mC,EAAc,UAAU,QAC5B,QAAQ,CAAC,EACX,KAAK,IACT,OAAQ,EACR,WAAW,WACX,KAAMn4C,EAAAA,IAACqB,GAAA,CAAW,UAAU,SAAA,CAAU,EACtC,MAAOg4C,EAAc,MAAM,EAAE,EAAE,IAAIhd,IAAM,CAAE,KAAMA,EAAE,KAAM,MAAO,KAAK,MAAM,KAAK,SAAW,EAAE,EAAI,GAAI,CAAA,CAAA,CACvG,EACF,EAGAt8B,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,+BACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,qGACb,eAACsa,GAAA,CAAS,UAAU,qBAAqB,CAAA,CAC3C,SACC,MAAA,CACC,SAAA,CAAAta,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,+BAA4B,EAChFA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,gDAAA,CAA8C,CAAA,CAAA,CACrF,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAC,EAAAA,IAACid,GAAA,CAAa,UAAU,SAAA,CAAU,EAClCjd,EAAAA,IAAC,QAAK,SAAA,uBAAA,CAAqB,CAAA,CAAA,CAC7B,CAAA,CAAA,CACF,CAAA,CACF,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,MACZ,SAAAu4C,QACE,MAAA,CAAI,UAAU,iCAAiC,SAAA,wBAAA,CAAsB,EACpEF,EAAiB,OAAS,EAC5Br4C,EAAAA,IAAC,MAAA,CAAI,UAAU,uDACZ,SAAAq4C,EAAiB,MAAM,EAAG,CAAC,EAAE,IAAI7yC,GAAW,CAC3C,MAAMu0C,EAAiBP,EAAkBh0C,EAAQ,iBAAiB,EAClE,OACEzF,EAAAA,KAAC,MAAA,CAAqB,UAAU,kFAC9B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,0EACb,SAAAwF,EAAQ,SACX,EACCA,EAAQ,aACPxF,EAAAA,IAAC,OAAA,CAAK,UAAU,0EAA0E,SAAA,UAAA,CAE1F,CAAA,EAEJ,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA+B,WAAQ,MAAM,EAC3DA,EAAAA,IAAC,IAAA,CAAE,UAAU,0CAA2C,WAAQ,WAAA,CAAY,CAAA,EAC9E,EACAA,EAAAA,IAAC,SAAA,CACC,UAAU,sDACV,QAAS,IAAM,OAAO,KAAKwF,EAAQ,aAAc,QAAQ,EAEzD,SAAAxF,EAAAA,IAACid,GAAA,CAAa,UAAU,SAAA,CAAU,CAAA,CAAA,CACpC,EACF,EAEAld,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,8BAA+B,SAAAwF,EAAQ,iBAAiB,EACrExF,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,YAAA,CAAU,CAAA,EACjD,SACC,MAAA,CACC,SAAA,CAAAD,EAAAA,KAAC,IAAA,CAAE,UAAU,8BAA+B,SAAA,CAAAyF,EAAQ,gBAAgB,GAAA,EAAC,EACrExF,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,WAAA,CAAS,CAAA,EAChD,SACC,MAAA,CACC,SAAA,CAAAD,EAAAA,KAAC,IAAA,CAAE,UAAU,8BAA+B,SAAA,CAAAyF,EAAQ,cAAc,GAAA,EAAC,EACnExF,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,eAAA,CAAa,CAAA,CAAA,CACpD,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,6BAA6B,SAAA,qBAAkB,EAC9DD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,4BAA6B,SAAA+5C,EAAe,KAAK,EAChEh6C,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACZ,SAAA,CAAAg6C,EAAe,MAAM,OAAKA,EAAe,WAAW,SAAA,CAAA,CACvD,CAAA,EACF,EACAh6C,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAAC,EAAAA,IAAC2B,GAAA,CAAQ,UAAU,SAAA,CAAU,EAC7B3B,EAAAA,IAAC,OAAA,CAAM,SAAA+5C,EAAe,IAAA,CAAK,CAAA,CAAA,CAC7B,CAAA,CAAA,CACF,CAAA,EACF,EAEA/5C,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMsyC,EAAqB9sC,CAAO,EAC3C,UAAU,8KACX,SAAA,sBAAA,CAAA,CAED,CAAA,EA5DQA,EAAQ,EA6DlB,CAEJ,CAAC,CAAA,CACH,EAEAzF,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAACsa,GAAA,CAAS,UAAU,sCAAA,CAAuC,EAC3Dta,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,2BAAwB,EACjFA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,mDAAA,CAAiD,CAAA,CAAA,CAChF,CAAA,CAEJ,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,uBAAoB,EACxED,EAAAA,KAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAC,EAAAA,IAACghB,GAAA,CAAS,UAAU,SAAA,CAAU,EAC9BhhB,EAAAA,IAAC,QAAK,SAAA,cAAA,CAAY,CAAA,CAAA,CACpB,CAAA,EACF,EACAA,EAAAA,IAACu7B,GAAA,CACC,KAAM8d,EACN,OAAQ,IACR,QAAS,CACP,CAAE,IAAK,eAAgB,KAAM,eAAgB,MAAO,SAAA,EACpD,CAAE,IAAK,cAAe,KAAM,cAAe,MAAO,SAAA,EAClD,CAAE,IAAK,SAAU,KAAM,SAAU,MAAO,SAAA,CAAU,CACpD,CAAA,CACF,EACF,EAEAt5C,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,yBAAsB,EAC/EA,EAAAA,IAAC06B,GAAA,CAAkB,KAAM6e,EAAmB,OAAQ,GAAA,CAAK,CAAA,EAC3D,EAEAx5C,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,6BAA0B,EACnFA,EAAAA,IAACu6B,GAAA,CAAmB,KAAM+e,EAAqB,OAAQ,GAAA,CAAK,CAAA,EAC9D,EAEAv5C,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,+BAA4B,EACrFA,EAAAA,IAACg7B,GAAA,CACC,KAAMqe,EAAc,IAAIhd,IAAM,CAC5B,KAAMA,EAAE,KACR,MAAOA,EAAE,MACT,UAAWA,EAAE,YAAc,EAAA,EAC3B,EACF,OAAQ,IACR,WAAW,QACX,aAAa,YACb,aAAa,UACb,eAAe,SAAA,CAAA,CACjB,CAAA,CACF,CAAA,EACF,EAGAt8B,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,6BAA0B,EACnFD,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAACqb,GAAA,CAAI,UAAU,oCAAA,CAAqC,EACpDrb,EAAAA,IAAC,IAAA,CAAE,UAAU,mCAAmC,SAAA,QAAK,EACrDA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,aAAA,CAAW,CAAA,EAClD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAACg6C,GAAA,CAAa,UAAU,qCAAA,CAAsC,EAC9Dh6C,EAAAA,IAAC,IAAA,CAAE,UAAU,oCAAoC,SAAA,OAAI,EACrDA,EAAAA,IAAC,IAAA,CAAE,UAAU,yBAAyB,SAAA,QAAA,CAAM,CAAA,EAC9C,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAC,EAAAA,IAACsZ,GAAA,CAAO,UAAU,sCAAA,CAAuC,EACzDtZ,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAqC,SAAA,MAAG,EACrDA,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,cAAA,CAAY,CAAA,EACrD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAC,EAAAA,IAACgP,GAAA,CAAM,UAAU,sCAAA,CAAuC,EACxDhP,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAqC,SAAA,KAAE,EACpDA,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,aAAA,CAAW,CAAA,EACpD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAC,EAAAA,IAAC+O,GAAA,CAAW,UAAU,sCAAA,CAAuC,EAC7D/O,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAqC,SAAA,QAAK,EACvDA,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,cAAA,CAAY,CAAA,EACrD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uCACb,SAAA,CAAAC,EAAAA,IAACqB,GAAA,CAAW,UAAU,mCAAA,CAAoC,EAC1DrB,EAAAA,IAAC,IAAA,CAAE,UAAU,kCAAkC,SAAA,OAAI,EACnDA,EAAAA,IAAC,IAAA,CAAE,UAAU,uBAAuB,SAAA,KAAA,CAAG,CAAA,CAAA,CACzC,CAAA,CAAA,CACF,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,+BACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,eAAY,EAC/DoT,GAAaA,EAAiB,YAAc,cAC3CrT,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,OAAO,SAAS,KAAO,qBACtC,UAAU,2LAEV,SAAA,CAAAC,EAAAA,IAACoV,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BpV,EAAAA,IAAC,QAAK,SAAA,mBAAA,CAAiB,CAAA,CAAA,CAAA,EAExBm4C,GAAe,YAAc,QAC5Bp4C,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,OAAO,SAAS,KAAO,oBACtC,UAAU,+LAEV,SAAA,CAAAC,EAAAA,IAACoV,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BpV,EAAAA,IAAC,QAAK,SAAA,kBAAA,CAAgB,CAAA,CAAA,CAAA,CACxB,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAAA,CACF,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,MACZ,SAAAm4C,EAAc,MAAM,OAAS,EAC5Bn4C,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,WAAc,MAAM,MAAM,EAAG,CAAC,EAAE,IAAK8O,GACpC/O,EAAAA,KAAC,MAAA,CAAkB,UAAU,8DAC3B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,4BAA6B,SAAA8O,EAAK,MAAM,EACtD9O,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA8B,WAAK,YAAY,EAC5DD,EAAAA,KAAC,MAAA,CAAI,UAAU,yDACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,8BACd,SAAA,CAAAC,EAAAA,IAACgP,GAAA,CAAM,UAAU,SAAA,CAAU,SAC1B,OAAA,CAAM,SAAA,CAAAF,EAAK,oBAAsB,EAAE,aAAA,CAAA,CAAW,CAAA,EACjD,EACA/O,EAAAA,KAAC,OAAA,CAAK,UAAU,8BACd,SAAA,CAAAC,EAAAA,IAAC2B,GAAA,CAAQ,UAAU,SAAA,CAAU,SAC5B,OAAA,CAAM,SAAA,CAAAmN,EAAK,gBAAgB,OAAA,CAAA,CAAK,CAAA,EACnC,EACA/O,EAAAA,KAAC,OAAA,CAAK,UAAU,8BACd,SAAA,CAAAC,EAAAA,IAACghB,GAAA,CAAS,UAAU,SAAA,CAAU,EAC9BhhB,MAAC,QAAM,SAAA,IAAI,KAAK8O,EAAK,UAAU,EAAE,oBAAmB,CAAE,CAAA,CAAA,CACxD,CAAA,CAAA,CACF,CAAA,EACF,EACA9O,EAAAA,IAAC,MAAA,CAAI,UAAU,8BACb,SAAAA,EAAAA,IAAC,OAAA,CACC,UAAW,8CACT8O,EAAK,SAAW,SAAW,8BAAgC,2BAC7D,GAEC,SAAAA,EAAK,MAAA,CAAA,CACR,CACF,CAAA,CAAA,EA3BQA,EAAK,EA4Bf,CACD,EACH,EAEA/O,OAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAAC+lC,GAAA,CAAU,UAAU,sCAAA,CAAuC,EAC5D/lC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,eAAY,EACrEA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,0DAAuD,EACxFoT,GAAaA,EAAiB,YAAc,cAC3CpT,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,OAAO,SAAS,KAAO,qBACtC,UAAU,iIACX,SAAA,wBAAA,CAAA,CAED,CAAA,CAEJ,CAAA,CAEJ,CAAA,EACF,EAGCm4C,EAAc,UAAU,OAAS,GAChCp4C,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,+BACb,SAAAA,EAAAA,IAAC,MAAG,UAAU,sCAAsC,iCAAqB,CAAA,CAC3E,QACC,MAAA,CAAI,UAAU,kBACb,SAAAD,EAAAA,KAAC,QAAA,CAAM,UAAU,SACf,SAAA,CAAAC,MAAC,QAAA,CAAM,UAAU,aACf,SAAAD,EAAAA,KAAC,KAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iFAAiF,SAAA,SAE/F,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,iFAAiF,SAAA,QAE/F,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,iFAAiF,SAAA,eAE/F,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,iFAAiF,SAAA,aAE/F,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,iFAAiF,SAAA,cAE/F,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,iFAAiF,SAAA,YAAA,CAE/F,CAAA,CAAA,CACF,CAAA,CACF,QACC,QAAA,CAAM,UAAU,oCACd,SAAAm4C,EAAc,UAAU,MAAM,EAAG,EAAE,EAAE,IAAK8B,GACzCl6C,EAAAA,KAAC,KAAA,CAAsB,UAAU,mBAC/B,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,oDACX,SAAA,CAAA,IAAI,KAAKk6C,EAAU,YAAY,EAAE,mBAAA,EAAqB,KAAG,IACzD,IAAI,KAAKA,EAAU,UAAU,EAAE,mBAAA,CAAmB,EACrD,EACAj6C,EAAAA,IAAC,KAAA,CAAG,UAAU,oDAAqD,WAAU,cAAc,EAC3FA,EAAAA,IAAC,KAAA,CAAG,UAAU,oDAAqD,WAAU,mBAAmB,EAChGA,EAAAA,IAAC,MAAG,UAAU,oDACX,WAAU,WAAW,QAAQ,CAAC,EACjC,QACC,KAAA,CAAG,UAAU,oDACX,SAAAi6C,EAAU,YAAY,iBACzB,EACAl6C,EAAAA,KAAC,KAAA,CAAG,UAAU,oDACX,SAAA,CAAAk6C,EAAU,gBAAgB,QAAQ,CAAC,EAAE,GAAA,CAAA,CACxC,CAAA,GAfOA,EAAU,EAgBnB,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EAEJ,EAGDxB,GACCz4C,EAAAA,IAACgwC,GAAA,CACC,OAAQ,GACR,QAAS,IAAM0I,EAAiC,IAAI,EACpD,UAAW,MAAOnG,EAAmBC,EAAyBC,IAA0B,CACtF,GAAI,EACe,MAAM,MAAM,uBAAwB,CACnD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,YAAa,UACb,KAAM,KAAK,UAAU,CACnB,UAAWgG,EAA8B,GACzC,UAAAlG,EACA,gBAAAC,EACA,cAAAC,CAAA,CACD,CAAA,CACF,GAEY,IACXiG,EAAiC,IAAI,EACrCM,EAAA,GAEA,QAAQ,MAAM,2BAA2B,CAE7C,OAASt5C,EAAK,CACZ,QAAQ,MAAM,4BAA6BA,CAAG,CAChD,CACF,EACA,aAAc+4C,EAA8B,MAC5C,SAAWrlC,GAAkB,cAAgB,CAAA,CAAA,EAIjDpT,EAAAA,IAAC02C,GAAA,CACC,OAAQiC,EACR,QAAS,IAAMC,EAAkB,EAAK,EACtC,OAAQe,GACR,iBAAkBvmC,EAClB,QAASylC,CAAA,CAAA,CACX,EACF,EAzkBE94C,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAACgP,GAAA,CAAM,UAAU,sCAAA,CAAuC,EACxDhP,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,uBAAoB,EAC7EA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,sDAAA,CAAoD,CAAA,EACnF,EAnCK,IA0mBX,CCn8BA,SAAwBk6C,IAAuB,CAC7C,KAAM,CAAE,KAAA92C,EAAM,UAAAqW,CAAA,EAAchV,GAAA,EACtB/F,EAAWC,GAAA,EACX,CAACw7C,EAAcC,CAAe,EAAIr7C,EAAAA,SAAS,EAAK,EAChD,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAwB,IAAI,EAEhDs7C,EAAyB,SAAY,CACzC,GAAI,CAACj3C,EAAM,CACT1E,EAAS,uBAAuB,EAChC,MACF,CAEA07C,EAAgB,EAAI,EACpB7wC,EAAS,IAAI,EAEb,GAAI,CACF,MAAM3F,EAAW,MAAM,MAAM,+BAAgC,CAC3D,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,cAAiB,UAAU,aAAa,QAAQ,WAAW,GAAK,EAAE,EAAA,EAEpE,YAAa,SAAA,CACd,EAED,GAAIA,EAAS,GAAI,CACf,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAE5B,GAAI1G,EAAK,OAASA,EAAK,KAAM,CAC3B,aAAa,QAAQ,YAAaA,EAAK,KAAK,EAC5C,aAAa,QAAQ,wBAAyB,MAAM,EACpD,OAAO,SAAS,KAAO,wBACvB,MACF,CAEA,aAAa,QAAQ,wBAAyB,MAAM,EACpD,OAAO,SAAS,KAAO,uBACzB,KAAO,CACL,MAAM2M,EAAY,MAAMjG,EAAS,KAAA,EACjC2F,EAASM,EAAU,OAAS,6BAA6B,CAC3D,CACF,OAASjM,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,EACjD2L,EAAS,wBAAwB,CACnC,QAAA,CACE6wC,EAAgB,EAAK,CACvB,CACF,EAEME,EAAe,CACnB,KAAM,CACJ,KAAM,kBACN,MAAO,2CACP,UAAW,0CACX,SAAU,CAAC,kBAAmB,mBAAoB,0BAA2B,+BAA+B,CAAA,EAE9G,QAAS,CACP,KAAM,qBACN,MAAO,iDACP,UAAW,kDACX,SAAU,CAAC,qBAAsB,mBAAoB,mBAAoB,4BAA6B,2BAA2B,CAAA,EAEnI,MAAO,CACL,KAAM,mBACN,MAAO,iDACP,UAAW,mDACX,SAAU,CAAC,oBAAqB,mBAAoB,mBAAoB,qBAAsB,4BAA6B,2BAA2B,CAAA,CACxJ,EAGF,OACEv6C,EAAAA,KAAC,MAAA,CAAI,UAAU,wEAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uEACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,8BAAA,CAA+B,QAC7C,MAAA,CAAI,UAAU,2BACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,2CACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,2BACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,sFACb,SAAAA,EAAAA,IAACkW,GAAA,CAAU,UAAU,SAAA,CAAU,CAAA,CACjC,EACF,EACAlW,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,yBAEpD,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,6DAA6D,SAAA,8FAE1E,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,6DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACgP,GAAA,CAAM,UAAU,SAAA,CAAU,EAC3BhP,EAAAA,IAAC,QAAK,SAAA,sBAAA,CAAoB,CAAA,EAC5B,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACqB,GAAA,CAAW,UAAU,SAAA,CAAU,EAChCrB,EAAAA,IAAC,QAAK,SAAA,qBAAA,CAAmB,CAAA,EAC3B,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAACsB,EAAA,CAAK,UAAU,SAAA,CAAU,EAC1BtB,EAAAA,IAAC,QAAK,SAAA,qBAAA,CAAmB,CAAA,CAAA,CAC3B,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,+BAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,QACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,qDAAqD,SAAA,wCAEnE,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8FACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,yEACb,eAACsZ,GAAA,CAAO,UAAU,wBAAwB,CAAA,CAC5C,EACAtZ,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,uBAAoB,EAC7EA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,gJAAA,CAE7B,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8FACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,0EACb,eAAC+lC,GAAA,CAAU,UAAU,yBAAyB,CAAA,CAChD,EACA/lC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,4BAAyB,EAClFA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,+HAAA,CAE7B,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8FACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,2EACb,eAAC+O,GAAA,CAAW,UAAU,0BAA0B,CAAA,CAClD,EACA/O,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,yBAAsB,EAC/EA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,wHAAA,CAE7B,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,QACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oDAAoD,SAAA,mBAElE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,0CAA0C,SAAA,gEAEvD,EAEAA,EAAAA,IAAC,OAAI,UAAU,4BACZ,gBAAO,QAAQs6C,CAAY,EAAE,IAAI,CAAC,CAAC/vC,EAAMgwC,CAAI,IAC5Cx6C,EAAAA,KAAC,MAAA,CAAe,UAAW,4BAA4Bw6C,EAAK,KAAK,YAC9D,SAAA,CAAAhwC,IAAS,WACRvK,EAAAA,IAAC,MAAA,CAAI,UAAU,sDACb,eAAC,OAAA,CAAK,UAAU,sEAAsE,SAAA,cAAA,CAEtF,EACF,EAGFD,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,2BACZ,SAAA,CAAAwK,IAAS,QAAUvK,EAAAA,IAACoB,GAAA,CAAI,UAAU,wBAAwB,EAC1DmJ,IAAS,WAAavK,EAAAA,IAACsB,EAAA,CAAK,UAAU,0BAA0B,EAChEiJ,IAAS,SAAWvK,EAAAA,IAACgB,GAAA,CAAM,UAAU,yBAAA,CAA0B,CAAA,EAClE,EACAhB,EAAAA,IAAC,KAAA,CAAG,UAAU,0BAA2B,WAAK,KAAK,EACnDA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,WAAK,UAAU,QACpD,IAAA,CAAE,UAAU,qBACV,SAAAuK,IAAS,OAAS,8BAAgC,6BAAA,CACrD,CAAA,EACF,EAEAvK,EAAAA,IAAC,KAAA,CAAG,UAAU,iBACX,SAAAu6C,EAAK,SAAS,IAAI,CAAClgC,EAAS3Y,IAC3B3B,OAAC,KAAA,CAAe,UAAU,8BACxB,SAAA,CAAAC,EAAAA,IAACE,GAAA,CAAY,UAAU,sCAAA,CAAuC,EAC9DF,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAW,SAAAqa,CAAA,CAAQ,CAAA,GAF5B3Y,CAGT,CACD,EACH,EAEC6I,IAAS,QACRvK,EAAAA,IAAC,IAAA,CAAE,UAAU,iCAAiC,SAAA,qFAAA,CAE9C,CAAA,CAAA,EAlCMuK,CAoCV,CACD,CAAA,CACH,CAAA,EACF,EAGAxK,EAAAA,KAAC,MAAA,CAAI,UAAU,QACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,qDAAqD,SAAA,eAEnE,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,mHACb,SAAAA,EAAAA,IAAC,QAAK,UAAU,+BAA+B,aAAC,CAAA,CAClD,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,mBAAgB,EACzEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,kEAAA,CAErC,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,mHACb,SAAAA,EAAAA,IAAC,QAAK,UAAU,+BAA+B,aAAC,CAAA,CAClD,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,iBAAc,EACvEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,iEAAA,CAErC,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,mHACb,SAAAA,EAAAA,IAAC,QAAK,UAAU,+BAA+B,aAAC,CAAA,CAClD,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,mBAAgB,EACzEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,gEAAA,CAErC,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,mHACb,SAAAA,EAAAA,IAAC,QAAK,UAAU,+BAA+B,aAAC,CAAA,CAClD,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,gBAAa,EACtEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,6DAAA,CAErC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,QAGC,MAAA,CAAI,UAAU,yEACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,8BAEtD,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,iGAE1C,EAECpC,GACCoC,EAAAA,IAAC,MAAA,CAAI,UAAU,sDACb,eAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAC7C,EAGFoC,EAAAA,IAAC,SAAA,CACC,QAASq6C,EACT,SAAUF,EACV,UAAU,+RAET,WACCp6C,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC,MAAA,CAAI,UAAU,8EAAA,CAA+E,EAC9FA,EAAAA,IAAC,QAAK,SAAA,4BAAA,CAA0B,CAAA,CAAA,CAClC,EAEAD,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAhK,EAAAA,IAAC,QAAK,SAAA,sBAAA,CAAoB,EAC1BA,EAAAA,IAAC+J,GAAA,CAAW,UAAU,SAAA,CAAU,CAAA,CAAA,CAClC,CAAA,CAAA,EAIJ/J,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,mEAAA,CAE1C,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,CAEJ,CC/OA,MAAMw6C,GAA+C,CACnD,OAAQ,8BACR,OAAQ,gCACR,MAAO,4BACP,UAAW,2BACb,EAEA,SAAwBC,IAAiB,CACvC,KAAM,CAAE,GAAAx3C,CAAA,EAAOinC,GAAA,EACTxrC,EAAWC,GAAA,EACX,CAACs5C,EAAUyC,CAAW,EAAI37C,EAAAA,SAA0B,IAAI,EACxD,CAACyG,EAAS4rB,CAAU,EAAIryB,EAAAA,SAA4B,CAAA,CAAE,EACtD,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAI,EACrC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAS,EAAE,EAC/B,CAAC0O,EAAWC,CAAY,EAAI3O,EAAAA,SAAS,UAAU,EAC/C,CAAC47C,EAAYC,CAAa,EAAI77C,EAAAA,SAAS,EAAK,EAElDM,EAAAA,UAAU,IAAM,EACQ,SAAY,CAChC,GAAI,CACFuB,EAAW,EAAI,EAEf,MAAM,IAAI,QAAQwY,GAAW,WAAWA,EAAS,GAAG,CAAC,EAGrD,MAAMyhC,EAAyB,CAC7B,GAAI53C,GAAM,IACV,KAAM,2BACN,OAAQ,SACR,UAAW,aACX,YAAa,qEACb,UAAW,aACX,QAAS,aACT,OAAQ,IACR,MAAO,KACP,YAAa,IACb,YAAa,MACb,OAAQ,KACR,IAAK,EACL,IAAK,GACL,MAAO,GACP,aAAc,KACd,YAAa,cACb,UAAW,EACX,UAAW,EACX,UAAW,GACX,UAAW,uBACX,UAAW,sBAAA,EAGP63C,EAAiC,CACrC,CACE,GAAI,KACJ,MAAO,kBACP,SAAU,YACV,QAAS,qBACT,OAAQ,OACR,OAAQ,IACR,MAAO,IACP,YAAa,IACb,OAAQ,KACR,IAAK,IACL,IAAK,IACL,UAAW,aACX,QAAS,YAAA,EAEX,CACE,GAAI,KACJ,MAAO,qBACP,SAAU,SACV,QAAS,aACT,OAAQ,OACR,OAAQ,KACR,MAAO,IACP,YAAa,KACb,OAAQ,KACR,IAAK,IACL,IAAK,IACL,UAAW,aACX,QAAS,YAAA,CACX,EAGFJ,EAAYG,CAAY,EACxBzpB,EAAW0pB,CAAW,CACxB,OAASp7C,EAAK,CACZ,QAAQ,MAAM,4BAA6BA,CAAG,EAC9C6J,EAAS,0DAA0D,CACrE,QAAA,CACE3I,EAAW,EAAK,CAClB,CACF,GAEA,CACF,EAAG,CAACqC,CAAE,CAAC,EAEP,MAAM83C,EAAqB,MAAOC,GAA8B,CAC9D,GAAK/C,EAEL,GAAI,CACF2C,EAAc,EAAI,EAElB,MAAM,IAAI,QAAQxhC,GAAW,WAAWA,EAAS,GAAG,CAAC,EAErDshC,EAAY,CACV,GAAGzC,EACH,OAAQ+C,EACR,UAAW,IAAI,KAAA,EAAO,YAAA,CAAY,CACnC,CACH,OAASt7C,EAAK,CACZ,QAAQ,MAAM,oCAAqCA,CAAG,CAExD,QAAA,CACEk7C,EAAc,EAAK,CACrB,CACF,EAEM7oB,EAAkB1oB,GACf,IAAI,KAAK,aAAa,QAAS,CACpC,MAAO,WACP,SAAU,MACV,sBAAuB,EACvB,sBAAuB,CAAA,CACxB,EAAE,OAAOA,CAAM,EAGZwZ,EAAgBC,GACb,IAAI,KAAK,aAAa,OAAO,EAAE,OAAOA,CAAG,EAG5CnC,EAAcC,GACXq6B,GAAO,IAAI,KAAKr6B,CAAU,EAAG,aAAa,EAG7Cs6B,EAAoBC,GAAoB,CAC5C,MAAMC,MAAY,KAEZ32B,EADM,IAAI,KAAK02B,CAAO,EACP,QAAA,EAAYC,EAAM,QAAA,EACvC,OAAO,KAAK,KAAK32B,GAAY,IAAO,GAAK,GAAK,GAAG,CACnD,EAEA,GAAI9jB,EACF,OACEX,MAAC,OAAI,UAAU,wCACb,eAAC,MAAA,CAAI,UAAU,+DAA+D,CAAA,CAChF,EAIJ,GAAIpC,EACF,aACG,MAAA,CAAI,UAAU,0CACb,SAAAmC,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,gBACb,SAAAA,EAAAA,IAAC,OAAI,UAAU,uBAAuB,MAAM,6BAA6B,QAAQ,YAAY,KAAK,eAChG,SAAAA,EAAAA,IAAC,QAAK,SAAS,UAAU,EAAE,0NAA0N,SAAS,SAAA,CAAU,CAAA,CAC1Q,CAAA,CACF,EACAA,EAAAA,IAAC,OAAI,UAAU,OACb,eAAC,IAAA,CAAE,UAAU,uBAAwB,SAAApC,CAAA,CAAM,CAAA,CAC7C,CAAA,CAAA,CACF,CAAA,CACF,EAIJ,GAAI,CAACq6C,EACH,OACEl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,qBAAkB,EACpEA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,6CAA0C,EACpFA,EAAAA,IAAC,MAAA,CAAI,UAAU,OACb,SAAAD,EAAAA,KAACgY,GAAA,CAAO,QAAS,IAAMrZ,EAAS,EAAE,EAAG,QAAQ,UAC3C,SAAA,CAAAsB,EAAAA,IAAC6yC,GAAA,CAAU,UAAU,oBAAA,CAAqB,EAAE,mBAAA,CAAA,CAE9C,CAAA,CACF,CAAA,EACF,EAIJ,MAAMwI,EAAgBpD,EAAS,QAAUiD,EAAiBjD,EAAS,OAAO,EAAI,KACxEhL,EAAYgL,EAAS,MAAQA,EAAS,OAAU,IAChDqD,EAAiBrD,EAAS,OAAS,KAAK,MAAM,IAAI,OAAO,UAAY,IAAI,KAAKA,EAAS,SAAS,EAAE,YAAc,IAAO,GAAK,GAAK,GAAG,GAAK,GACzIsD,EAAmBtD,EAAS,YAAc,EAC5C,IAAI,KAAK,KAAK,IAAA,GAAUA,EAAS,OAASA,EAAS,OAASA,EAAS,YAAe,GAAK,GAAK,GAAK,GAAI,EACvG,KAEJ,OACEl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,sFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAACgY,GAAA,CACC,QAAQ,UACR,KAAK,OACL,QAAS,IAAMrZ,EAAS,EAAE,EAC1B,UAAU,UAEV,SAAA,CAAAsB,EAAAA,IAAC6yC,GAAA,CAAU,UAAU,SAAA,CAAU,EAC/B7yC,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,MAAA,CAAI,CAAA,CAAA,CAAA,SAE/B,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAoC,SAAAi4C,EAAS,KAAK,EAChEl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,MAAC,QAAK,UAAW,2EAA2Ew6C,GAAavC,EAAS,MAAM,CAAC,GACtH,SAAAA,EAAS,OAAO,OAAO,CAAC,EAAE,YAAA,EAAgBA,EAAS,OAAO,MAAM,CAAC,EACpE,EACAl4C,EAAAA,KAAC,OAAA,CAAK,UAAU,wBACb,SAAA,CAAA4gB,EAAWs3B,EAAS,SAAS,EAC7BA,EAAS,SAAW,MAAMt3B,EAAWs3B,EAAS,OAAO,CAAC,GACtDoD,IAAkB,MACjBt7C,OAAC,OAAA,CAAK,UAAU,OAAO,SAAA,CAAA,IACnBs7C,EAAgB,EAAI,GAAGA,CAAa,aAAe,QAAQ,GAAA,CAAA,CAC/D,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAEAt7C,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACZ,SAAA,CAAAk4C,EAAS,SAAW,UACnBl4C,EAAAA,KAACgY,GAAA,CACC,QAAQ,UACR,QAAS,IAAMgjC,EAAmB,QAAQ,EAC1C,SAAUJ,EAEV,SAAA,CAAA36C,EAAAA,IAACw7C,GAAA,CAAM,UAAU,cAAA,CAAe,EAAE,OAAA,CAAA,CAAA,GAKpCvD,EAAS,SAAW,UAAYA,EAAS,SAAW,UACpDl4C,EAAAA,KAACgY,GAAA,CACC,QAAS,IAAMgjC,EAAmB,QAAQ,EAC1C,SAAUJ,EAEV,SAAA,CAAA36C,EAAAA,IAACma,GAAA,CAAK,UAAU,cAAA,CAAe,EAC9B89B,EAAS,SAAW,SAAW,SAAW,UAAA,CAAA,CAAA,EAI/Cj4C,EAAAA,IAAC+X,GAAA,CAAO,QAAQ,UAAU,QAAO,GAC/B,SAAAhY,EAAAA,KAACuF,GAAA,CAAK,GAAI,cAAc2yC,EAAS,EAAE,QACjC,SAAA,CAAAj4C,EAAAA,IAAC01C,GAAA,CAAK,UAAU,cAAA,CAAe,EAAE,MAAA,CAAA,CAEnC,CAAA,CACF,EAEA31C,EAAAA,KAACgY,GAAA,CAAO,QAAQ,UAAU,KAAK,OAC7B,SAAA,CAAA/X,EAAAA,IAAC6vC,GAAA,CAAa,UAAU,SAAA,CAAU,EAClC7vC,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,MAAA,CAAI,CAAA,CAAA,CAChC,CAAA,CAAA,CACF,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,6CACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,2CACb,eAAC+O,GAAA,CAAW,UAAU,qBAAqB,CAAA,CAC7C,EACA/O,MAAC,MAAA,CAAI,UAAU,kBACb,gBAAC,KAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,6CAA6C,SAAA,eAAY,EACvEA,EAAAA,IAAC,KAAA,CAAG,UAAU,sBACZ,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,uCACZ,SAAA+xB,EAAekmB,EAAS,MAAM,CAAA,CACjC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EACAl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAC,MAAC,QAAK,UAAU,4BAA6B,SAAA+xB,EAAekmB,EAAS,KAAK,EAAE,EAAO,SACnFj4C,EAAAA,IAAC,OAAA,CAAK,UAAU,OAAO,SAAA,IAAC,SACvB,OAAA,CAAM,SAAA,CAAA+xB,EAAekmB,EAAS,OAASA,EAAS,KAAK,EAAE,YAAA,CAAA,CAAU,CAAA,EACpE,EACAj4C,EAAAA,IAAC,MAAA,CAAI,UAAU,2CACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,+BACV,MAAO,CAAE,MAAO,GAAG,KAAK,IAAI,IAAKitC,CAAQ,CAAC,GAAA,CAAI,CAAA,CAChD,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,6CACb,SAAAltC,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,4CACb,eAACgP,GAAA,CAAM,UAAU,qBAAqB,CAAA,CACxC,EACAhP,MAAC,MAAA,CAAI,UAAU,kBACb,gBAAC,KAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,6CAA6C,SAAA,eAAY,EACvEA,EAAAA,IAAC,KAAA,CAAG,UAAU,sBACZ,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,uCACZ,SAAA6iB,EAAao1B,EAAS,YAAY,CAAA,CACrC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,QACC,MAAA,CAAI,UAAU,OACb,SAAAl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,4BAA6B,SAAAi4C,EAAS,MAAM,EAAO,QAAA,CAAA,CACrE,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,6CACb,SAAAl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,6CACb,eAACg4C,GAAA,CAAU,UAAU,qBAAqB,CAAA,CAC5C,EACAh4C,MAAC,MAAA,CAAI,UAAU,kBACb,gBAAC,KAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,6CAA6C,SAAA,cAAW,EACtEA,EAAAA,IAAC,KAAA,CAAG,UAAU,sBACZ,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,uCACZ,SAAA6iB,EAAao1B,EAAS,WAAW,CAAA,CACpC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,QACC,MAAA,CAAI,UAAU,OACb,SAAAl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAC,MAAC,QAAK,UAAU,4BAA6B,SAAA6iB,EAAao1B,EAAS,MAAM,EAAE,EAAO,UAClFj4C,EAAAA,IAAC,OAAA,CAAK,UAAU,OAAO,SAAA,IAAC,SACvB,OAAA,CAAM,SAAA,CAAAi4C,EAAS,IAAI,OAAA,CAAA,CAAK,CAAA,CAAA,CAC3B,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,6CACb,SAAAl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,6CACb,eAACsZ,GAAA,CAAO,UAAU,qBAAqB,CAAA,CACzC,EACAtZ,MAAC,MAAA,CAAI,UAAU,kBACb,gBAAC,KAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,6CAA6C,SAAA,cAAW,EACtED,EAAAA,KAAC,KAAA,CAAG,UAAU,sBACZ,SAAA,CAAAC,MAAC,OAAI,UAAU,uCACZ,SAAA+xB,EAAekmB,EAAS,GAAG,EAC9B,EACAj4C,EAAAA,IAAC,OAAI,UAAU,gEACb,eAAC,OAAA,CAAO,UAAAi4C,EAAS,IAAMA,EAAS,UAAY,KAAO,MAAQ,KAAK,IAAIA,EAAS,IAAMA,EAAS,SAAS,EAAE,QAAQ,CAAC,CAAA,CAAE,CAAA,CACpH,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EACAj4C,EAAAA,IAAC,OAAI,UAAU,OACb,eAAC,MAAA,CAAI,UAAU,wBACb,SAAAD,EAAAA,KAAC,OAAA,CAAK,SAAA,CAAA,WAASgyB,EAAekmB,EAAS,SAAS,EAAE,MAAA,CAAA,CAAI,EACxD,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGAj4C,EAAAA,IAAC,MAAA,CAAI,UAAU,gDACb,SAAAD,EAAAA,KAAC61C,GAAA,CAAK,aAAa,WAAW,cAAeloC,EAAc,UAAU,SACnE,SAAA,CAAA1N,EAAAA,IAAC,OAAI,UAAU,2BACb,SAAAD,EAAAA,KAACu2C,GAAA,CAAS,UAAU,kCAClB,SAAA,CAAAt2C,EAAAA,IAACu2C,GAAA,CACC,MAAM,WACN,UAAU,kHACX,SAAA,UAAA,CAAA,EAGDv2C,EAAAA,IAACu2C,GAAA,CACC,MAAM,cACN,UAAU,kHACX,SAAA,aAAA,CAAA,EAGDx2C,EAAAA,KAACw2C,GAAA,CACC,MAAM,UACN,UAAU,kHACX,SAAA,CAAA,YACW/wC,EAAQ,OAAO,GAAA,CAAA,CAAA,EAE3BxF,EAAAA,IAACu2C,GAAA,CACC,MAAM,WACN,UAAU,kHACX,SAAA,UAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,EAEAx2C,EAAAA,KAAC,MAAA,CAAI,UAAU,MACb,SAAA,CAAAC,EAAAA,IAACy2C,IAAY,MAAM,WACjB,SAAA12C,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAA,EAAAA,KAAC,UAAA,CAAQ,UAAU,4BACjB,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,mBAAgB,QACtE,IAAA,CAAE,UAAU,gBAAiB,SAAAi4C,EAAS,aAAe,2BAA2B,EAEjFl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,YAAS,EAC3DA,EAAAA,IAAC,KAAE,UAAU,wCACV,WAAS,UAAU,QAAQ,IAAK,GAAG,CAAA,CACtC,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,eAAY,EAC9DA,EAAAA,IAAC,IAAA,CAAE,UAAU,wCACV,SAAAi4C,EAAS,cAAgB,cACtB,cACAA,EAAS,cAAgB,WACzB,WACA,SAAA,CACN,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAAj4C,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,eAAY,QAC7D,IAAA,CAAE,UAAU,6BACV,SAAA+xB,EAAekmB,EAAS,WAAW,CAAA,CACtC,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAAj4C,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,gBAAa,EAC/DA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BACV,SAAAu7C,EAAmB56B,EAAW46B,EAAiB,YAAA,CAAa,EAAI,KAAA,CACnE,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,SAEC,UAAA,CACC,SAAA,CAAAv7C,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,kBAAe,QACrE,MAAA,CAAI,UAAU,gDACb,SAAAD,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,UAAU,oBACZ,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,+CAA+C,SAAA,mBAAgB,EAC5EA,EAAAA,IAAC,MAAA,CAAI,UAAU,qBACb,SAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,4FACV,SAAA2gB,EAAWs3B,EAAS,SAAS,CAAA,CAChC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QACC,KAAA,CAAG,UAAU,oBACZ,SAAAl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,+CAA+C,SAAA,mBAAgB,EAC5EA,EAAAA,IAAC,MAAA,CAAI,UAAU,qBACb,SAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,4FACV,SAAA2gB,EAAWs3B,EAAS,SAAS,CAAA,CAChC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EACCA,EAAS,YAAcA,EAAS,WAC/Bj4C,EAAAA,IAAC,KAAA,CAAG,UAAU,oBACZ,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,+CAA+C,SAAA,mBAAgB,EAC5EA,EAAAA,IAAC,MAAA,CAAI,UAAU,qBACb,SAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,0FACV,SAAA2gB,EAAWs3B,EAAS,SAAS,CAAA,CAChC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAEAl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,UAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,gBAAa,EACpED,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAACgY,GAAA,CAAO,QAAQ,UAAU,UAAU,uBAClC,SAAA,CAAA/X,EAAAA,IAACI,GAAA,CAAU,UAAU,cAAA,CAAe,EAAE,cAAA,EAExC,EACAL,EAAAA,KAACgY,GAAA,CAAO,QAAQ,UAAU,UAAU,uBAClC,SAAA,CAAA/X,EAAAA,IAAC+O,GAAA,CAAW,UAAU,cAAA,CAAe,EAAE,WAAA,EAEzC,EACAhP,EAAAA,KAACgY,GAAA,CAAO,QAAQ,UAAU,UAAU,uBAClC,SAAA,CAAA/X,EAAAA,IAACoV,GAAA,CAAK,UAAU,cAAA,CAAe,EAAE,aAAA,EAEnC,EACArV,EAAAA,KAACgY,GAAA,CAAO,QAAQ,UAAU,UAAU,uDAClC,SAAA,CAAA/X,EAAAA,IAAC+gB,GAAA,CAAO,UAAU,cAAA,CAAe,EAAE,iBAAA,CAAA,CAErC,CAAA,CAAA,CACF,CAAA,EACF,SAEC,UAAA,CACC,SAAA,CAAA/gB,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,sBAAmB,EAC1ED,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,OAAA,CAAK,EACXD,EAAAA,KAAC,OAAA,CAAK,UAAU,cACb,SAAA,CAAAgyB,EAAekmB,EAAS,KAAK,EAAE,MAAIlmB,EAAekmB,EAAS,MAAM,CAAA,CAAA,CACpE,CAAA,EACF,EACAj4C,EAAAA,IAAC,MAAA,CAAI,UAAU,sCACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,+BACV,MAAO,CAAE,MAAO,GAAG,KAAK,IAAI,IAAKitC,CAAQ,CAAC,GAAA,CAAI,CAAA,CAChD,CACF,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAltC,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,aAAA,CAAW,EACjBD,EAAAA,KAAC,OAAA,CAAK,UAAU,cAAe,SAAA,CAAAgyB,EAAeupB,CAAc,EAAE,QAAA,CAAA,CAAM,CAAA,EACtE,EACAt7C,EAAAA,IAAC,MAAA,CAAI,UAAU,sCACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAWgY,GACT,mBACAsjC,GAAkBrD,EAAS,YAAc,IAAM,eAAiB,eAAA,EAElE,MAAO,CAAE,MAAO,GAAG,KAAK,IAAI,IAAMqD,EAAiBrD,EAAS,YAAe,GAAG,CAAC,GAAA,CAAI,CAAA,EAEvF,EACAj4C,EAAAA,IAAC,IAAA,CAAE,UAAU,6BACV,WAAiBi4C,EAAS,YAAc,IACrC,oCACAqD,EAAiBrD,EAAS,YAAc,GACxC,oCACA,4BAAA,CACN,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,KAAA,CAAG,EACTD,EAAAA,KAAC,OAAA,CAAK,UAAU,cACb,SAAA,CAAAgyB,EAAekmB,EAAS,GAAG,EAC5Bl4C,EAAAA,KAAC,OAAA,CACC,UAAWiY,GACT,OACAigC,EAAS,KAAOA,EAAS,UAAY,IAAM,iBAAmB,cAAA,EAEjE,SAAA,CAAA,IACGA,EAAS,KAAOA,EAAS,UAAY,IAAM,IAC5C,KAAK,IAAIA,EAAS,IAAMA,EAAS,SAAS,EAAE,QAAQ,CAAC,EAAE,GAAA,CAAA,CAAA,CAC1D,CAAA,CACF,CAAA,EACF,EACAj4C,EAAAA,IAAC,MAAA,CAAI,UAAU,sCACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAWgY,GACT,mBACAigC,EAAS,KAAOA,EAAS,UAAY,IAAM,eAAiB,eAAA,EAE9D,MAAO,CAAE,MAAO,GAAG,KAAK,IAAI,IAAMA,EAAS,KAAOA,EAAS,UAAY,GAAM,GAAG,CAAC,GAAA,CAAI,CAAA,EAEzF,EACAl4C,EAAAA,KAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,WAASgyB,EAAekmB,EAAS,SAAS,CAAA,CAAA,CAAE,CAAA,EACxF,SAEC,MAAA,CACC,SAAA,CAAAl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,KAAA,CAAG,EACTD,EAAAA,KAAC,OAAA,CAAK,UAAU,cACb,SAAA,CAAAk4C,EAAS,IAAI,IACdl4C,EAAAA,KAAC,OAAA,CACC,UAAWiY,GACT,OACAigC,EAAS,KAAOA,EAAS,UAAY,GAAM,iBAAmB,cAAA,EAEjE,SAAA,CAAA,IACGA,EAAS,KAAOA,EAAS,UAAY,IAAM,IAC5C,KAAK,IAAIA,EAAS,IAAMA,EAAS,SAAS,EAAE,QAAQ,CAAC,EAAE,IAAA,CAAA,CAAA,CAC1D,CAAA,CACF,CAAA,EACF,EACAj4C,EAAAA,IAAC,MAAA,CAAI,UAAU,sCACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAWgY,GACT,mBACAigC,EAAS,KAAOA,EAAS,UAAY,GAAM,eAAiB,eAAA,EAE9D,MAAO,CAAE,MAAO,GAAG,KAAK,IAAI,IAAMA,EAAS,KAAOA,EAAS,UAAY,KAAQ,GAAG,CAAC,GAAA,CAAI,CAAA,EAE3F,EACAl4C,EAAAA,KAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,WAASk4C,EAAS,UAAU,GAAA,CAAA,CAAC,CAAA,CAAA,CACzE,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAEOxB,GAAA,CAAY,MAAM,cACjB,SAAA12C,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACK,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,wBAAqB,EAC5EA,EAAAA,IAAC,OAAI,UAAU,kEACb,eAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,0CAAA,CAAwC,CAAA,CACvE,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,yBAAsB,EAC7EA,EAAAA,IAAC,OAAI,UAAU,gDACb,eAAC,KAAA,CAAG,UAAU,2BACX,SAAAwF,EAAQ,MAAM,EAAG,CAAC,EAAE,IAAKyI,GACxBjO,EAAAA,IAAC,KAAA,CAAiB,UAAU,oBAC1B,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,+CAAgD,SAAAiO,EAAK,MAAM,QACvE,MAAA,CAAI,UAAU,YACb,SAAAlO,EAAAA,KAAC,IAAA,CAAE,UAAU,wBACV,SAAA,CAAAkO,EAAK,SAAS,MAAIA,EAAK,OAAA,CAAA,CAC1B,CAAA,CACF,CAAA,EACF,QACC,MAAA,CAAI,UAAU,qBACb,SAAAlO,EAAAA,KAAC,IAAA,CAAE,UAAU,oCAAqC,SAAA,CAAAkO,EAAK,IAAI,OAAA,CAAA,CAAK,CAAA,CAClE,CAAA,CAAA,CACF,CAAA,EAbOA,EAAK,EAcd,CACD,EACH,CAAA,CACF,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAjO,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,0BAAuB,EAC9EA,EAAAA,IAAC,OAAI,UAAU,gDACb,eAAC,KAAA,CAAG,UAAU,2BACX,SAAA,MAAM,KAAK,IAAI,IAAIwF,EAAQ,OAASzC,EAAE,QAAQ,CAAC,CAAC,EAAE,IAAKqX,GAAa,CACnE,MAAMqhC,EAAkBj2C,EAAQ,OAAOzC,GAAKA,EAAE,WAAaqX,CAAQ,EAC7DshC,EAAaD,EAAgB,OAAO,CAAC55C,EAAKkB,IAAMlB,EAAMkB,EAAE,MAAO,CAAC,EAChE44C,EAAcF,EAAgB,OAAO,CAAC55C,EAAKkB,IAAMlB,EAAMkB,EAAE,OAAQ,CAAC,EAClE64C,EAASH,EAAgB,OAAO,CAAC55C,EAAKkB,IAAMlB,EAAMkB,EAAE,IAAK,CAAC,EAAI04C,EAAgB,OAEpF,aACG,KAAA,CAAkB,UAAU,oBAC3B,SAAA17C,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,oCAAqC,SAAAoa,EAAS,QAC1D,MAAA,CAAI,UAAU,YACb,SAAAra,EAAAA,KAAC,IAAA,CAAE,UAAU,wBACV,SAAA,CAAA07C,EAAgB,OAAO,IAAEA,EAAgB,SAAW,EAAI,OAAS,OAAA,CAAA,CACpE,CAAA,CACF,CAAA,EACF,EACA17C,EAAAA,KAAC,MAAA,CAAI,UAAU,qBACb,SAAA,CAAAC,MAAC,IAAA,CAAE,UAAU,wBAAyB,SAAA+xB,EAAe2pB,CAAU,EAAE,EACjE37C,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAyB,SAAA,CAAA47C,EAAY,aAAWC,EAAO,QAAQ,CAAC,EAAE,OAAA,CAAA,CAAK,CAAA,CAAA,CACtF,CAAA,CAAA,CACF,GAdOxhC,CAeT,CAEJ,CAAC,EACH,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAApa,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,kBAAe,QACrE,MAAA,CAAI,UAAU,gDACb,SAAAD,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,UAAU,oBACZ,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,uBACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,kFACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,UAAU,KAAK,eAAe,QAAQ,YACnD,SAAAA,EAAAA,IAAC,OAAA,CAAK,SAAS,UAAU,EAAE,mIAAmI,SAAS,SAAA,CAAU,CAAA,CACnL,CAAA,CACF,EACF,EACAA,EAAAA,IAAC,OAAI,UAAU,cACb,eAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,+FAAA,CAErC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QACC,KAAA,CAAG,UAAU,oBACZ,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,uBACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,kFACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,UAAU,KAAK,eAAe,QAAQ,YACnD,SAAAA,EAAAA,IAAC,OAAA,CAAK,SAAS,UAAU,EAAE,mIAAmI,SAAS,SAAA,CAAU,CAAA,CACnL,CAAA,CACF,EACF,EACAA,EAAAA,IAAC,OAAI,UAAU,cACb,eAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,4EAAA,CAErC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAEAD,EAAAA,KAAC02C,GAAA,CAAY,MAAM,UACjB,SAAA,CAAA12C,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,mBAAgB,SACjE+X,GAAA,CACC,SAAA,CAAA/X,EAAAA,IAACoV,GAAA,CAAK,UAAU,cAAA,CAAe,EAAE,aAAA,CAAA,CAEnC,CAAA,EACF,QAEC,MAAA,CAAI,UAAU,gDACb,SAAArV,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACX,SAAA,CAAAyF,EAAQ,IAAKyI,SACX,KAAA,CAAiB,UAAU,mBAC1B,SAAAjO,MAACsF,GAAA,CAAK,GAAI,YAAY2I,EAAK,EAAE,GAAI,UAAU,QACzC,SAAAlO,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,+CACV,SAAAiO,EAAK,MACR,QACC,MAAA,CAAI,UAAU,OACb,SAAAjO,EAAAA,IAAC,QAAK,UAAW,8CACfiO,EAAK,SAAW,OAAS,8BACzBA,EAAK,SAAW,UAAY,gCAC5BA,EAAK,SAAW,WAAa,4BAC7BA,EAAK,SAAW,WAAa,0BAC7B,2BACF,GACG,WAAK,OAAO,OAAO,CAAC,EAAE,cAAgBA,EAAK,OAAO,MAAM,CAAC,EAC5D,CAAA,CACF,CAAA,EACF,QACC,MAAA,CAAI,UAAU,0BACb,SAAAlO,EAAAA,KAAC,IAAA,CAAE,UAAU,4FACV,SAAA,CAAAgyB,EAAe9jB,EAAK,KAAK,EAAE,OAAK8jB,EAAe9jB,EAAK,MAAM,CAAA,CAAA,CAC7D,CAAA,CACF,CAAA,EACF,EACAlO,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,UACb,SAAAD,EAAAA,KAAC,IAAA,CAAE,UAAU,0CACX,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,4BAA6B,SAAAiO,EAAK,SAAS,EAC3DjO,EAAAA,IAAC,OAAA,CAAK,UAAU,OAAO,SAAA,IAAC,SACvB,OAAA,CAAK,SAAA,CAAA,OAAKiO,EAAK,OAAA,CAAA,CAAQ,CAAA,CAAA,CAC1B,CAAA,CACF,EACAlO,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAACg4C,GAAA,CAAU,UAAU,4CAAA,CAA6C,SACjE,IAAA,CAAG,SAAA,CAAAn1B,EAAa5U,EAAK,WAAW,EAAE,cAAA,EAAY,EAC/CjO,EAAAA,IAAC,OAAA,CAAK,UAAU,OAAO,SAAA,IAAC,SACvB,IAAA,CAAG,SAAA,CAAA6iB,EAAa5U,EAAK,MAAM,EAAE,SAAA,EAAO,EACrCjO,EAAAA,IAAC,OAAA,CAAK,UAAU,OAAO,SAAA,IAAC,SACvB,IAAA,CAAG,SAAA,CAAAiO,EAAK,IAAI,OAAA,CAAA,CAAK,CAAA,CAAA,CACpB,CAAA,EACF,QACC,MAAA,CAAI,UAAU,OACb,SAAAjO,MAAC,MAAA,CAAI,UAAU,sCACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,+BACV,MAAO,CAAE,MAAO,GAAG,KAAK,IAAI,IAAMiO,EAAK,MAAQA,EAAK,OAAU,GAAG,CAAC,GAAA,CAAI,CAAA,EAE1E,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EApDOA,EAAK,EAqDd,CACD,EAEAzI,EAAQ,SAAW,GAClBzF,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAACg4C,GAAA,CAAU,UAAU,iCAAA,CAAkC,EACvDh4C,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,uBAAoB,EAC3EA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,kDAE1C,EACAA,MAAC,MAAA,CAAI,UAAU,OACb,gBAAC+X,GAAA,CACC,SAAA,CAAA/X,EAAAA,IAACoV,GAAA,CAAK,UAAU,oBAAA,CAAqB,EAAE,aAAA,CAAA,CAEzC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,EACF,QAECqhC,GAAA,CAAY,MAAM,WACjB,SAAA12C,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,oBAAiB,EAExED,EAAAA,KAAC,MAAA,CAAI,UAAU,gDACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,oBACb,SAAAA,EAAAA,IAAC,MAAG,UAAU,oCAAoC,6BAAiB,CAAA,CACrE,QACC,MAAA,CAAI,UAAU,6CACb,SAAAD,EAAAA,KAAC,KAAA,CAAG,UAAU,kDACZ,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,gBAAa,EAC/DA,EAAAA,IAAC,KAAA,CAAG,UAAU,6BAA8B,WAAS,IAAA,CAAK,CAAA,EAC5D,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,SAAM,EACxDA,EAAAA,IAAC,KAAA,CAAG,UAAU,OACZ,SAAAA,EAAAA,IAAC,QAAK,UAAW,iEAAiEw6C,GAAavC,EAAS,MAAM,CAAC,GAC5G,SAAAA,EAAS,OAAO,OAAO,CAAC,EAAE,YAAA,EAAgBA,EAAS,OAAO,MAAM,CAAC,CAAA,CACpE,CAAA,CACF,CAAA,EACF,EACAl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,aAAU,QAC3D,KAAA,CAAG,UAAU,6BAA8B,SAAA2gB,EAAWs3B,EAAS,SAAS,CAAA,CAAE,CAAA,EAC7E,EACAl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,WAAQ,EAC1DD,EAAAA,KAAC,KAAA,CAAG,UAAU,6BACX,SAAA,CAAAk4C,EAAS,QAAUt3B,EAAWs3B,EAAS,OAAO,EAAI,cAClDA,EAAS,SAAWoD,IAAkB,MACrCt7C,EAAAA,KAAC,OAAA,CAAK,UAAU,qBAAqB,SAAA,CAAA,IACjCs7C,EAAgB,EAAI,GAAGA,CAAa,aAAe,QAAQ,GAAA,CAAA,CAC/D,CAAA,CAAA,CAEJ,CAAA,EACF,EACAt7C,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,cAAW,QAC5D,KAAA,CAAG,UAAU,6BACX,SAAAi4C,EAAS,aAAe,0BAAA,CAC3B,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAj4C,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,mBAAgB,EAEvED,EAAAA,KAAC,MAAA,CAAI,UAAU,gDACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,oBACb,SAAAA,EAAAA,IAAC,MAAG,UAAU,oCAAoC,2BAAe,CAAA,CACnE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,kDACZ,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,eAAY,QAC7D,KAAA,CAAG,UAAU,6BAA8B,SAAA+xB,EAAekmB,EAAS,MAAM,CAAA,CAAE,CAAA,EAC9E,EACAl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,eAAY,QAC7D,KAAA,CAAG,UAAU,6BAA8B,SAAA+xB,EAAekmB,EAAS,WAAW,CAAA,CAAE,CAAA,EACnF,EACAl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,eAAY,QAC7D,KAAA,CAAG,UAAU,6BAA8B,SAAA+xB,EAAekmB,EAAS,KAAK,CAAA,CAAE,CAAA,EAC7E,EACAl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,mBAAgB,EAClEA,EAAAA,IAAC,MAAG,UAAU,6BAA8B,WAAei4C,EAAS,OAASA,EAAS,KAAK,CAAA,CAAE,CAAA,CAAA,CAC/F,CAAA,EACF,EAEAl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,cAAA,CAAY,SACjB,OAAA,CAAM,SAAA,CAAA,KAAK,MAAMitC,CAAQ,EAAE,GAAA,CAAA,CAAC,CAAA,EAC/B,EACAjtC,EAAAA,IAAC,MAAA,CAAI,UAAU,sCACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,+BACV,MAAO,CAAE,MAAO,GAAG,KAAK,IAAI,IAAKitC,CAAQ,CAAC,GAAA,CAAI,CAAA,CAChD,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAEAltC,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,oBACb,SAAAA,EAAAA,IAAC,MAAG,UAAU,oCAAoC,4BAAgB,CAAA,CACpE,QACC,MAAA,CAAI,UAAU,6CACb,SAAAD,EAAAA,KAAC,KAAA,CAAG,UAAU,kDACZ,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,eAAY,EAC9DA,EAAAA,IAAC,KAAA,CAAG,UAAU,wCACX,SAAAi4C,EAAS,cAAgB,cAAgB,cACzCA,EAAS,cAAgB,WAAa,WAAa,SAAA,CACtD,CAAA,EACF,EACCA,EAAS,cAAgB,eACxBl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,MAAG,UAAU,oCACX,WAAS,cAAgB,WAAa,WAAa,SAAA,CACtD,QACC,KAAA,CAAG,UAAU,6BACX,SAAA+xB,EAAekmB,EAAS,SAAS,CAAA,CACpC,CAAA,EACF,EAEFl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,aAAU,QAC3D,KAAA,CAAG,UAAU,6BACX,SAAA+xB,EAAekmB,EAAS,SAAS,CAAA,CACpC,CAAA,EACF,EACAl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,aAAU,EAC5DD,EAAAA,KAAC,KAAA,CAAG,UAAU,6BACX,SAAA,CAAAk4C,EAAS,UAAU,GAAA,CAAA,CACtB,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,QAEC,MAAA,CAAI,UAAU,OACb,SAAAl4C,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC+X,GAAA,CAAO,QAAQ,UAAU,KAAK,SAAS,QAAS,IAAMrZ,EAAS,EAAE,EAAG,SAAA,QAAA,CAErE,EACAqB,EAAAA,KAACgY,GAAA,CAAO,KAAK,SAAS,QAAQ,cAC5B,SAAA,CAAA/X,EAAAA,IAAC+gB,GAAA,CAAO,UAAU,cAAA,CAAe,EAAE,iBAAA,EAErC,EACAhhB,EAAAA,KAACgY,GAAA,CAAO,KAAK,SACX,SAAA,CAAA/X,EAAAA,IAACmf,GAAA,CAAK,UAAU,cAAA,CAAe,EAAE,cAAA,CAAA,CAEnC,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAEJ,CCjgCH,MAAM08B,GAAQ5kC,EAAAA,WACnB,CAAC,CAAE,UAAAjS,EAAY,GAAI,GAAGwS,CAAA,EAASC,IAK3BzX,EAAAA,IAAC,QAAA,CACC,IAAAyX,EACA,UAAW,gRAAkBzS,CAAS,GAAG,KAAA,EACxC,GAAGwS,CAAA,CAAA,CAIZ,EAEAqkC,GAAM,YAAc,QChBb,MAAMC,GAAWC,EAAAA,WACtB,CAAC,CAAE,UAAA/2C,EAAY,GAAI,GAAGwS,CAAA,EAASC,IAC7BzX,EAAAA,IAAC,WAAA,CACC,IAAAyX,EACA,UAAW,gOAAgOzS,CAAS,GACnP,GAAGwS,CAAA,CAAA,CAGV,EAEAskC,GAAS,YAAc,WCEvB,MAAME,GAAgBC,EAAAA,cAA+C,IAAI,EAEnEC,GAAmB,IAAM,CAC7B,MAAM1F,EAAM2F,EAAAA,WAA4CH,EAAa,EACrE,GAAI,CAACxF,EACH,MAAM,IAAI,MAAM,gDAAgD,EAElE,OAAOA,CACT,EASO,SAAS4F,GAAO,CAAE,MAAA53C,EAAO,aAAAqxC,EAAc,cAAAC,EAAe,SAAA3yC,GAAyB,CACpF,KAAM,CAACk5C,EAAMC,CAAO,EAAIC,EAAAA,SAAe,EAAK,EACtC,CAACxG,EAAeC,CAAgB,EAAIuG,EAAAA,SAAe1G,CAAY,EAC/D,CAAC2G,EAAOC,CAAQ,EAAIF,EAAAA,SAAmC,CAAA,CAAE,EAEzDG,EAAgBl4C,GAASuxC,EAEzB4G,EAAoBC,EAAAA,YACvBzG,GAAsB,CACrBH,EAAiBG,CAAS,EAC1BL,IAAgBK,CAAS,CAC3B,EACA,CAACL,CAAa,CAAA,EAGV+G,EAAeD,cAAmB3uC,IACtCwuC,EAASl4C,GAAQ,CACf,MAAMu4C,EAAgBv4C,EAAK,aAAsBw4C,EAAS,QAAU9uC,EAAK,KAAK,EAC9E,GAAI6uC,GAAiB,EAAG,CACtB,MAAME,EAAO,CAAC,GAAGz4C,CAAI,EACrB,OAAAy4C,EAAKF,CAAa,EAAI7uC,EACf+uC,CACT,CACA,MAAO,CAAC,GAAGz4C,EAAM0J,CAAI,CACvB,CAAC,EAEM,IAAM,CACXwuC,EAASl4C,GAAQA,EAAK,OAAOw4C,GAAYA,EAAS,QAAU9uC,EAAK,KAAK,CAAC,CACzE,GACC,CAAA,CAAE,EAEL,OACEjO,EAAAA,IAACg8C,GAAc,SAAd,CACC,MAAO,CACL,MAAOU,EACP,KAAAL,EACA,QAAAC,EACA,cAAeK,EACf,aAAAE,EACA,MAAAL,CAAA,EAGF,SAAAx8C,EAAAA,IAAC,MAAA,CAAI,UAAU,+BAAgC,SAAAmD,CAAA,CAAS,CAAA,CAAA,CAG9D,CAIO,MAAM85C,GAAgBlB,EAAAA,WAC3B,CAAC,CAAE,UAAA/2C,EAAY,GAAI,SAAA7B,EAAU,GAAGqU,CAAA,EAASC,IAAQ,CAC/C,KAAM,CAAE,QAAA6kC,EAAS,KAAAD,CAAA,EAASH,GAAA,EAC1B,OACEn8C,EAAAA,KAAC,SAAA,CACC,KAAK,SACL,IAAA0X,EACA,UAAW,qNAAqNzS,CAAS,GACzO,gBAAc,UACd,gBAAeq3C,EACf,QAAS,IAAMC,EAAQ,CAACD,CAAI,EAC3B,GAAG7kC,EAEH,SAAA,CAAArU,EACDnD,EAAAA,IAAC,MAAA,CACC,UAAU,6BACV,QAAQ,YACR,KAAK,eACL,cAAY,OAEZ,SAAAA,EAAAA,IAAC,OAAA,CACC,SAAS,UACT,EAAE,qIACF,SAAS,SAAA,CAAA,CACX,CAAA,CACF,CAAA,CAAA,CAGN,CACF,EAEAi9C,GAAc,YAAc,gBAMrB,SAASC,GAAY,CAAE,YAAAC,GAAiC,CAC7D,KAAM,CAAE,MAAA34C,EAAO,MAAAg4C,CAAA,EAAUN,GAAA,EACnBkB,EAAeZ,EAAM,KAAKvuC,GAAQA,EAAK,QAAUzJ,CAAK,EAC5D,OACExE,MAAC,QAAK,UAAU,wCACb,WAAeo9C,EAAa,MAAQD,GAAe,kBAAA,CACtD,CAEJ,CAIO,SAASE,GAAc,CAAE,UAAAr4C,EAAY,GAAI,SAAA7B,EAAU,GAAGqU,GAA6B,CACxF,KAAM,CAAE,KAAA6kC,CAAA,EAASH,GAAA,EACjB,OAAKG,EAKHr8C,EAAAA,IAAC,MAAA,CACC,KAAK,UACL,UAAW,iIAAiIgF,CAAS,GACpJ,GAAGwS,EAEH,SAAArU,CAAA,CAAA,EATI,IAYX,CAMO,MAAMm6C,GAAavB,EAAAA,WACxB,CAAC,CAAE,UAAA/2C,EAAY,GAAI,SAAA7B,EAAU,MAAAqB,EAAO,GAAGgT,CAAA,EAASC,IAAQ,CACtD,KAAM,CAAE,MAAOilC,EAAe,cAAA5G,EAAe,QAAAwG,EAAS,aAAAO,CAAA,EAAiBX,GAAA,EAEvEqB,EAAAA,UAAgB,IACPV,EAAa,CAAE,MAAAr4C,EAAO,MAAOrB,EAAU,EAC7C,CAACA,EAAU05C,EAAcr4C,CAAK,CAAC,EAElC,MAAMq+B,EAAa6Z,IAAkBl4C,EAE/B0xC,EAAe,IAAM,CACzBJ,EAActxC,CAAK,EACnB83C,EAAQ,EAAK,CACf,EAEA,OACEt8C,EAAAA,IAAC,MAAA,CACC,IAAAyX,EACA,KAAK,SACL,gBAAeorB,EACf,UAAW,sFACTA,EAAa,0BAA4B,EAC3C,IAAI79B,CAAS,GACb,QAASkxC,EACT,UAAY90B,GAAU,EAChBA,EAAM,MAAQ,SAAWA,EAAM,MAAQ,OACzCA,EAAM,eAAA,EACN80B,EAAA,EAEJ,EACA,SAAU,EACT,GAAG1+B,EAEH,SAAArU,CAAA,CAAA,CAGP,CACF,EAEAm6C,GAAW,YAAc,aCrLlB,SAASE,GAAW,CAAE,SAAAC,EAAU,SAAAC,EAAU,QAAAC,EAAS,QAAAC,EAAS,UAAA54C,EAAY,IAAuB,CACpG,MAAM2b,EAAc4D,GAAsB,CACxC,GAAI,CAACA,EACH,MAAO,GAET,MAAMs5B,EAAOt5B,EAAK,YAAA,EACZu5B,EAAQ,GAAGv5B,EAAK,SAAA,EAAa,CAAC,GAAG,SAAS,EAAG,GAAG,EAChDiV,EAAM,GAAGjV,EAAK,QAAA,CAAS,GAAG,SAAS,EAAG,GAAG,EAC/C,MAAO,GAAGs5B,CAAI,IAAIC,CAAK,IAAItkB,CAAG,EAChC,EAEMukB,EAAav5C,GAAkB,CACnC,GAAI,CAACA,EACH,OAAO,KAET,KAAM,CAACq5C,EAAMC,EAAOtkB,CAAG,EAAIh1B,EAAM,MAAM,GAAG,EAAE,IAAI,MAAM,EACtD,OAAO,IAAI,KAAKq5C,EAAMC,EAAQ,EAAGtkB,CAAG,CACtC,EAEA,OACEx5B,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,UAAW,gOAAgOgF,CAAS,GACpP,MAAO2b,EAAW88B,CAAQ,EAC1B,SAAWr8B,GAAUs8B,EAASK,EAAU38B,EAAM,OAAO,KAAK,CAAC,EAC3D,IAAKT,EAAWg9B,GAAW,IAAI,EAC/B,IAAKh9B,EAAWi9B,GAAW,IAAI,CAAA,CAAA,CAGrC,CCvCA,MAAMz7C,GAA+C,GAErD,SAAS67C,GAAWlrC,EAAkC,CAEpD,GAAI,OAAOA,GAAU,WAAaA,EAAM,WAAW,SAAS,GAAKA,EAAM,WAAW,UAAU,GAC1F,OAAOA,EAIT,MAAMN,EAAOM,EAAM,SAAA,EAGnB,OAAIN,EAAK,WAAWrQ,EAAY,EACvBqQ,EAIF,GAAGrQ,EAAY,GAAGqQ,EAAK,WAAW,GAAG,EAAI,GAAK,GAAG,GAAGA,CAAI,EACjE,CAEA,eAAsBG,GACpBG,EACAC,EAA6C,GAC7C,CACA,KAAM,CAAE,SAAAkrC,EAAU,QAAA3rC,EAAS,GAAG4rC,GAASnrC,EACjCvG,EAAY,OAAO,OAAW,KAAe,CAACyxC,EAAW,aAAa,QAAQ,WAAW,EAAI,KAE7FE,EAAe,IAAI,QAAQ7rC,CAAO,EACpC9F,GAAa,CAAC2xC,EAAa,IAAI,eAAe,GAChDA,EAAa,IAAI,gBAAiB,UAAU3xC,CAAS,EAAE,EAGzD,MAAMrI,EAAM65C,GAAWlrC,CAAK,EAO5B,OAAO,MAAM3O,EAAK,CAAE,GAAG+5C,EAAM,QAASC,EAAc,CACtD,CCvBO,SAASC,IAAe,CAC7B,KAAM,CAAE,KAAAh7C,CAAA,EAASqB,GAAA,EACX,CAAC45C,EAAaC,CAAc,EAAIv/C,EAAAA,SAAS,CAAC,EAC1C,CAACw/C,EAAUC,CAAW,EAAIz/C,EAAAA,SAAmC,IAAI,EACjE,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAK,EACtC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAwB,IAAI,EAGtDM,OAAAA,EAAAA,UAAU,IAAM,CACd,GAAI,CAAC+D,EAAM,QAEc,SAAY,CACnC,GAAI,CACF,MAAMQ,EAAW,MAAM+O,GAAS,eAAe,EAC/C,GAAI,CAAC/O,EAAS,GAAI,MAAM,IAAI,MAAM,qBAAqB,EACvD,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5B06C,EAAephD,EAAK,eAAiBA,EAAK,cAAgB,CAAC,CAC7D,OAASwC,EAAK,CACZ,QAAQ,MAAM,gCAAiCA,CAAG,EAClD6J,EAAS,6BAA6B,CACxC,CACF,GAEA,CACF,EAAG,CAACnG,CAAI,CAAC,EA+BF,CACL,YAAAi7C,EACA,SAAAE,EACA,QAAA59C,EACA,MAAA/C,EACA,kBAjCwB,MAAO6gD,GAAsB,CACrD79C,EAAW,EAAI,EACf2I,EAAS,IAAI,EAEb,GAAI,CACF,MAAM3F,EAAW,MAAM+O,GAAS,qCAAsC,CACpE,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAU8rC,CAAY,CAAA,CAClC,EACD,GAAI,CAAC76C,EAAS,GAAI,MAAM,IAAI,MAAM,+BAA+B,EACjE,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5B,OAAA46C,EAAYthD,CAAI,EACTA,CACT,OAASwC,EAAK,CACZ,eAAQ,MAAM,iCAAkCA,CAAG,EACnD6J,EAAS,+BAA+B,EACjC,IACT,QAAA,CACE3I,EAAW,EAAK,CAClB,CACF,EAaE,eAVsB89C,GACfL,GAAeK,EAUtB,eAAgB,IAAM,CAChBt7C,GACFuP,GAAS,eAAe,EACrB,KAAK,MAAO/O,GAAa,CACxB,GAAI,CAACA,EAAS,GAAI,MAAM,IAAI,MAAM,2BAA2B,EAC7D,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5B06C,EAAephD,EAAK,eAAiBA,EAAK,cAAgB,CAAC,CAC7D,CAAC,EACA,MAAM,QAAQ,KAAK,CAE1B,CAAA,CAEJ,CC9EA,SAAwByhD,IAAc,CACpC,MAAMjgD,EAAWC,GAAA,EACX,CAAC0mB,EAAcC,CAAe,EAAIvmB,EAAAA,SAAS,EAAK,EAChD,CAAC+b,EAAUC,CAAW,EAAIhc,WAAS,CACvC,KAAM,GACN,UAAW,aACX,YAAa,GACb,cAAe,KACf,QAAS,KACT,OAAQ,IACR,YAAa,IACb,YAAa,cACb,UAAW,EACX,UAAW,EACX,UAAW,GACX,aAAc,WACd,aAAc,IACd,UAAW,CAAA,EACX,UAAW,CAAA,CAAC,CACb,EAEK,CAAE,YAAAs/C,EAAa,SAAAE,EAAoC,kBAAAK,CAAA,EAAsBR,GAAA,EACzE,CAACS,EAAgBC,CAAiB,EAAI//C,EAAAA,SAAwB,IAAI,EAClE,CAACggD,EAAmBC,CAAoB,EAAIjgD,EAAAA,SAAS,EAAK,EAGhEM,EAAAA,UAAU,IAAM,EACQ,SAAY,CAChC,MAAM0N,EAAO,MAAM6xC,EAAkB,CACnC,aAAc9jC,EAAS,aACvB,SAAUA,EAAS,QACjB,KAAK,MAAMA,EAAS,QAAQ,QAAA,EAAYA,EAAS,UAAU,QAAA,GAAc,KAAoB,EAAI,EACnG,aAAcA,EAAS,aACvB,UAAWA,EAAS,UACpB,UAAWA,EAAS,UACpB,UAAWA,EAAS,eAAiB,SAAA,CACtC,EAEG/N,IACF+xC,EAAkB/xC,EAAK,SAAS,EAChCiyC,EAAqBX,EAActxC,EAAK,SAAS,EAErD,GAEA,CACF,EAAG,CAAC+N,EAAU8jC,EAAmBP,CAAW,CAAC,EAE7C,MAAMY,EAAgBzhD,GAAiE,CACrF,KAAM,CAAE,KAAAg6B,EAAM,MAAAhzB,CAAA,EAAUhH,EAAE,OAC1Bud,EAAYxW,IAAS,CACnB,GAAGA,EACH,CAACizB,CAAI,EAAGA,IAAS,QAAUA,IAAS,cAAgBhzB,EAAQ,OAAOA,CAAK,CAAA,EACxE,CACJ,EAEM06C,EAAqB,CAAC1nB,EAAchzB,IAAkB,CAC1DuW,EAAYxW,IAAS,CACnB,GAAGA,EACH,CAACizB,CAAI,EAAGhzB,CAAA,EACR,CACJ,EAEM26C,EAAmB,CAAC3nB,EAAcjT,IAAsB,CAC5DxJ,EAAYxW,IAAS,CACnB,GAAGA,EACH,CAACizB,CAAI,EAAGjT,CAAA,EACR,CACJ,EAEMvJ,EAAe,MAAOxd,GAAuB,CAGjD,GAFAA,EAAE,eAAA,EAEEuhD,EAAmB,CACrB,MAAM,uGAAuG,EAC7G,MACF,CAEA,GAAI,CAACF,EAAgB,CACnB,MAAM,uCAAuC,EAC7C,MACF,CAEAv5B,EAAgB,EAAI,EAEpB,GAAI,CACF,MAAM1hB,EAAW,MAAM,MAAM,iBAAkB,CAC7C,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,cAAiB,UAAU,aAAa,QAAQ,WAAW,CAAC,EAAA,EAE9D,KAAM,KAAK,UAAU,CACnB,GAAGkX,EACH,OAAQ,aAAa,QAAQ,QAAQ,EACrC,SAAUA,EAAS,QACjB,KAAK,MAAMA,EAAS,QAAQ,QAAA,EAAYA,EAAS,UAAU,WAAc,KAAoB,EAAI,CAAA,CACpG,CAAA,CACF,EAED,GAAI,CAAClX,EAAS,GACZ,MAAM,IAAI,MAAM,2BAA2B,EAG7C,MAAMmN,EAAS,MAAMnN,EAAS,KAAA,EAG9B,MAAM,kCAAkCmN,EAAO,UAAU,oCAAoC,EAC7FrS,EAAS,YAAY,CAEvB,OAASd,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,EACjD,MAAM,8BAA8BA,EAAM,OAAO,EAAE,CACrD,QAAA,CACE0nB,EAAgB,EAAK,CACvB,CACF,EAEM85B,EAAa,CACjB,CAAE,MAAO,YAAa,MAAO,iBAAA,EAC7B,CAAE,MAAO,aAAc,MAAO,YAAA,EAC9B,CAAE,MAAO,cAAe,MAAO,aAAA,EAC/B,CAAE,MAAO,UAAW,MAAO,SAAA,EAC3B,CAAE,MAAO,eAAgB,MAAO,cAAA,EAChC,CAAE,MAAO,cAAe,MAAO,aAAA,CAAc,EAGzCC,EAAgB,CACpB,CAAE,MAAO,cAAe,MAAO,aAAA,EAC/B,CAAE,MAAO,WAAY,MAAO,UAAA,EAC5B,CAAE,MAAO,UAAW,MAAO,SAAA,CAAU,EAGjCC,EAAgB,CACpB,CAAE,MAAO,QAAS,MAAO,aAAc,YAAa,6BAA8B,KAAM,UAAA,EACxF,CAAE,MAAO,WAAY,MAAO,oBAAqB,YAAa,0BAA2B,KAAM,UAAA,EAC/F,CAAE,MAAO,UAAW,MAAO,mBAAoB,YAAa,6BAA8B,KAAM,WAAA,CAAY,EAG9G,OACEv/C,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAACgY,GAAA,CACC,QAAQ,UACR,KAAK,OACL,QAAS,IAAMrZ,EAAS,EAAE,EAC1B,UAAU,UAEV,SAAA,CAAAsB,EAAAA,IAAC6yC,GAAA,CAAU,UAAU,SAAA,CAAU,EAC/B7yC,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,MAAA,CAAI,CAAA,CAAA,CAAA,SAE/B,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,kBAAe,EAChEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,uDAAA,CAErC,CAAA,CAAA,CACF,CAAA,EACF,EAEAA,EAAAA,IAAC,QAAK,SAAUgb,EAAc,UAAU,YACtC,SAAAjb,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEZ,SAAA,CAAA8+C,IAAmB,MAClB9+C,EAAAA,KAAC,MAAA,CAAI,UAAWiY,GACd,wBACA+mC,EAAoB,2BAA6B,4BAAA,EAEjD,SAAA,CAAAh/C,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,MAACoB,IAAI,UAAW4W,GAAG,UAAW+mC,EAAoB,eAAiB,eAAe,EAAG,SACpF,MAAA,CACC,SAAA,CAAA/+C,MAAC,IAAA,CAAE,UAAU,cACV,SAAA++C,EAAoB,mBAAqB,YAC5C,EACAh/C,EAAAA,KAAC,IAAA,CAAE,UAAU,wBACV,SAAA,CAAA8+C,EAAe,6BAA2BR,EAAY,GAAA,CAAA,CACzD,CAAA,CAAA,CACF,CAAA,EACF,EACCU,EACC/+C,EAAAA,IAAC+X,GAAA,CAAO,QAAQ,UAAU,KAAK,KAAK,QAAS,IAAMrZ,EAAS,kBAAkB,EAAG,SAAA,gBAAA,CAEjF,QAEC,MAAA,CAAI,UAAU,qCAAqC,SAAA,oBAAA,CAEpD,CAAA,EAEJ,EAEC6/C,SACE,MAAA,CAAI,UAAU,2DACb,SAAAx+C,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,SAAA,YAAA,CAAU,EACfD,EAAAA,KAAC,MAAA,CAAI,UAAU,aAAc,SAAA,CAAAw+C,EAAS,SAAS,QAAA,EAAM,EAEpDA,EAAS,iBAAmB,GAC3Bx+C,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAjK,OAAC,MAAA,CAAI,SAAA,CAAA,aAAWw+C,EAAS,iBAAiB,QAAQ,CAAC,EAAE,KAAA,EAAG,EACxDx+C,EAAAA,KAAC,MAAA,CAAI,UAAU,aAAa,SAAA,CAAA,IAAE,KAAK,MAAMw+C,EAAS,SAAWA,EAAS,gBAAgB,EAAE,QAAA,CAAA,CAAM,CAAA,EAChG,EAGDA,EAAS,iBAAmB,GAC3Bx+C,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAjK,OAAC,MAAA,CAAI,SAAA,CAAA,kBAAgBw+C,EAAS,iBAAiB,QAAQ,CAAC,EAAE,KAAA,EAAG,EAC7Dx+C,EAAAA,KAAC,MAAA,CAAI,UAAU,aAAa,SAAA,CAAA,IAAE,KAAK,MAAMw+C,EAAS,SAAWA,EAAS,gBAAgB,EAAE,QAAA,CAAA,CAAM,CAAA,EAChG,EAGDA,EAAS,gBAAkB,GAC1Bx+C,EAAAA,KAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAjK,OAAC,MAAA,CAAI,SAAA,CAAA,qBAAmBw+C,EAAS,gBAAgB,QAAQ,CAAC,EAAE,KAAA,EAAG,EAC/Dx+C,EAAAA,KAAC,MAAA,CAAI,UAAU,aAAa,SAAA,CAAA,IAAE,KAAK,MAAMw+C,EAAS,SAAWA,EAAS,eAAe,EAAE,QAAA,CAAA,CAAM,CAAA,EAC/F,EAGFv+C,EAAAA,IAAC,MAAA,CAAI,UAAU,cAAc,SAAA,cAAW,EACxCD,EAAAA,KAAC,MAAA,CAAI,UAAU,yBAA0B,SAAA,CAAAw+C,EAAS,UAAU,QAAA,CAAA,CAAM,CAAA,CAAA,CACpE,CAAA,CACF,CAAA,EAEJ,EAGFx+C,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sBAAsB,SAAA,mBAAgB,EACpDA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,uCAAA,CAAqC,CAAA,EAC5E,EACED,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,MAAC,QAAA,CAAM,QAAQ,eAAe,UAAU,0CAA0C,SAAA,gBAElF,EACAD,EAAAA,KAACq8C,GAAA,CACC,MAAOthC,EAAS,aAChB,cAAgBtW,GAAU06C,EAAmB,eAAgB16C,CAAY,EAEzE,SAAA,CAAAxE,MAACi9C,GAAA,CACC,SAAAj9C,EAAAA,IAACk9C,GAAA,CAAY,YAAY,uBAAuB,EAClD,EACAl9C,MAACq9C,GAAA,CACE,SAAAiC,EAAc,IAAKh9C,GAClBtC,EAAAA,IAACs9C,GAAA,CAA4B,MAAOh7C,EAAK,MACvC,SAAAvC,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,cAAe,SAAAsC,EAAK,MAAM,EACzCtC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAyB,WAAK,WAAA,CAAY,CAAA,EAC3D,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAyB,WAAK,IAAA,CAAK,CAAA,CAAA,CACpD,CAAA,EAPesC,EAAK,KAQtB,CACD,CAAA,CACH,CAAA,CAAA,CAAA,CACF,EACF,EAEAvC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,MAAC,QAAA,CAAM,QAAQ,eAAe,UAAU,0CAA0C,SAAA,uBAElF,EACAA,EAAAA,IAAC67C,GAAA,CACC,KAAK,SACL,KAAK,eACL,GAAG,eACH,IAAI,MACJ,KAAK,MACL,MAAO/gC,EAAS,aAChB,SAAUmkC,EACV,SAAQ,EAAA,CAAA,EAEVj/C,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,yCAAA,CAErC,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,MAAC,QAAA,CAAM,QAAQ,OAAO,UAAU,0CAA0C,SAAA,gBAE1E,EACAA,EAAAA,IAAC67C,GAAA,CACC,KAAK,OACL,KAAK,OACL,GAAG,OACH,MAAO/gC,EAAS,KAChB,SAAUmkC,EACV,SAAQ,EAAA,CAAA,CACV,EACF,EAEAl/C,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,MAAC,QAAA,CAAM,QAAQ,YAAY,UAAU,0CAA0C,SAAA,qBAE/E,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,OACb,SAAAD,EAAAA,KAACq8C,GAAA,CACC,MAAOthC,EAAS,UAChB,cAAgBtW,GAAU06C,EAAmB,YAAa16C,CAAK,EAE/D,SAAA,CAAAxE,EAAAA,IAACi9C,IAAc,UAAU,SACvB,eAACC,GAAA,CAAY,YAAY,sBAAsB,CAAA,CACjD,EACAl9C,MAACq9C,GAAA,CACE,SAAA+B,EAAW,IAAKG,GACfv/C,EAAAA,IAACs9C,GAAA,CAA2B,MAAOiC,EAAI,MACrC,SAAAx/C,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAACsZ,GAAA,CAAO,UAAU,cAAA,CAAe,EAChCimC,EAAI,KAAA,CAAA,CACP,CAAA,EAJeA,EAAI,KAKrB,CACD,CAAA,CACH,CAAA,CAAA,CAAA,CACF,CACF,CAAA,EACF,EAEAx/C,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,MAAC,QAAA,CAAM,QAAQ,cAAc,UAAU,0CAA0C,SAAA,yBAEjF,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,OACb,SAAAA,EAAAA,IAAC87C,GAAA,CACC,GAAG,cACH,KAAK,cACL,KAAM,EACN,MAAOhhC,EAAS,YAChB,SAAUmkC,EACV,UAAU,SACV,YAAY,0CAAA,CAAA,CACd,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,QAEC,MAAA,CAAI,UAAU,gCACb,SAAAl/C,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,8CAA8C,SAAA,oBAAiB,EAC7EA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,sCAE1C,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,0CAA0C,SAAA,aAE3D,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,OACb,SAAAA,EAAAA,IAACw9C,GAAA,CACC,SAAU1iC,EAAS,UACnB,SAAWyJ,GAAS46B,EAAiB,YAAa56B,CAAI,EACtD,YAAa,KACb,UAAU,QAAA,CAAA,CACZ,CACF,CAAA,EACF,EAEAxkB,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,0CAA0C,SAAA,sBAE3D,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,OACb,SAAAA,EAAAA,IAACw9C,GAAA,CACC,SAAU1iC,EAAS,QACnB,SAAWyJ,GAAS46B,EAAiB,UAAW56B,CAAI,EACpD,QAASzJ,EAAS,UAClB,UAAU,SACV,YAAW,GACX,gBAAgB,aAAA,CAAA,CAClB,CACF,CAAA,EACF,EAEA/a,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,MAAC,QAAA,CAAM,QAAQ,SAAS,UAAU,0CAA0C,SAAA,mBAE5E,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,uEACb,eAAC+O,GAAA,CAAW,UAAU,wBAAwB,CAAA,CAChD,EACA/O,EAAAA,IAAC67C,GAAA,CACC,KAAK,SACL,KAAK,SACL,GAAG,SACH,MAAO/gC,EAAS,OAChB,SAAUmkC,EACV,IAAI,IACJ,KAAK,OACL,UAAU,QACV,SAAQ,EAAA,CAAA,CACV,CAAA,CACF,CAAA,EACF,EAEAl/C,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,MAAC,QAAA,CAAM,QAAQ,cAAc,UAAU,0CAA0C,SAAA,mBAEjF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,uEACb,eAAC+O,GAAA,CAAW,UAAU,wBAAwB,CAAA,CAChD,EACA/O,EAAAA,IAAC67C,GAAA,CACC,KAAK,SACL,KAAK,cACL,GAAG,cACH,MAAO/gC,EAAS,YAChB,SAAUmkC,EACV,IAAI,IACJ,KAAK,OACL,UAAU,QACV,SAAQ,EAAA,CAAA,CACV,EACF,EACAj/C,EAAAA,IAAC,IAAA,CAAE,UAAU,6BACV,WAAS,QACN,IAAI,KAAK,KAAK8a,EAAS,OAASA,EAAS,WAAW,CAAC,mBACrD,gCAAA,CACN,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,gCACb,SAAA/a,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,8CAA8C,SAAA,yBAAsB,EAClFA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,iDAE1C,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,MAAC,QAAA,CAAM,QAAQ,cAAc,UAAU,0CAA0C,SAAA,eAEjF,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,OACb,SAAAD,EAAAA,KAACq8C,GAAA,CACC,MAAOthC,EAAS,YAChB,cAAgBtW,GAAU06C,EAAmB,cAAe16C,CAAK,EAEjE,SAAA,CAAAxE,EAAAA,IAACi9C,IAAc,UAAU,SACvB,eAACC,GAAA,CAAY,YAAY,wBAAwB,CAAA,CACnD,QACCG,GAAA,CACE,SAAAgC,EAAc,IAAKG,GAClBx/C,EAAAA,IAACs9C,GAAA,CAAgC,MAAOkC,EAAS,MAC9C,SAAAA,EAAS,OADKA,EAAS,KAE1B,CACD,CAAA,CACH,CAAA,CAAA,CAAA,EAEJ,EACAz/C,EAAAA,KAAC,IAAA,CAAE,UAAU,6BACV,SAAA,CAAA+a,EAAS,cAAgB,eAAiB,qDAC1CA,EAAS,cAAgB,YAAc,uCACvCA,EAAS,cAAgB,WAAa,mCAAA,CAAA,CACzC,CAAA,EACF,EAECA,EAAS,cAAgB,eACxB/a,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,QAAQ,YAAY,UAAU,0CAClC,SAAA,CAAA+a,EAAS,cAAgB,WAAa,WAAa,UAAU,MAAA,EAChE,EACA/a,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,uEACb,eAAC+O,GAAA,CAAW,UAAU,wBAAwB,CAAA,CAChD,EACA/O,EAAAA,IAAC67C,GAAA,CACC,KAAK,SACL,KAAK,YACL,GAAG,YACH,MAAO/gC,EAAS,UAChB,SAAUmkC,EACV,IAAI,OACJ,KAAK,OACL,UAAU,QACV,SAAQ,EAAA,CAAA,CACV,CAAA,CACF,CAAA,EACF,EAGFl/C,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,MAAC,QAAA,CAAM,QAAQ,YAAY,UAAU,0CAA0C,SAAA,iBAE/E,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,uEACb,eAACy/C,GAAA,CAAQ,UAAU,wBAAwB,CAAA,CAC7C,EACAz/C,EAAAA,IAAC67C,GAAA,CACC,KAAK,SACL,KAAK,YACL,GAAG,YACH,MAAO/gC,EAAS,UAChB,SAAUmkC,EACV,IAAI,MACJ,IAAI,MACJ,KAAK,MACL,UAAU,OAAA,CAAA,CACZ,CAAA,CACF,CAAA,EACF,EAEAl/C,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,MAAC,QAAA,CAAM,QAAQ,YAAY,UAAU,0CAA0C,SAAA,iBAE/E,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,uEACb,eAAC+O,GAAA,CAAW,UAAU,wBAAwB,CAAA,CAChD,EACA/O,EAAAA,IAAC67C,GAAA,CACC,KAAK,SACL,KAAK,YACL,GAAG,YACH,MAAO/gC,EAAS,UAChB,SAAUmkC,EACV,IAAI,OACJ,KAAK,OACL,UAAU,OAAA,CAAA,CACZ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAEAl/C,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC+X,GAAA,CACC,KAAK,SACL,QAAQ,UACR,QAAS,IAAMrZ,EAAS,EAAE,EAC1B,SAAU2mB,EACX,SAAA,QAAA,CAAA,EAGDrlB,EAAAA,IAAC+X,GAAA,CACC,KAAK,SACL,SAAUsN,GAAgB05B,EAC1B,UAAW/mC,GACT,2BACA+mC,GAAqB,+BAAA,EAGtB,SAAA15B,EACC,cACE05B,EACF,mBAEAh/C,OAAAiK,EAAAA,SAAA,CACE,SAAA,CAAAjK,EAAAA,KAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,CAAA,oBAAkB8+C,EAAe,SAAA,EAAO,EACxE7+C,EAAAA,IAAC,OAAA,CACC,UAAU,wCACV,MAAO,CACL,MAAO,GAAG,KAAK,IAAI,IAAMq+C,GAAeQ,GAAkB,GAAM,GAAG,CAAC,IACpE,WAAY,iBAAA,CACd,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACJ,CAEJ,CChkBA,MAAMa,GAAW,IAAIC,IAAgB,CAEjC,QAAQ,IAAI,QAAS,GAAGA,CAAI,CAEhC,EAYA,MAAMC,WAAiB,KAAM,CAC3B,KACA,OACA,QAEA,YAAY1tC,EAAiB/T,EAAcod,EAAgBskC,EAAe,CACxE,MAAM3tC,CAAO,EACb,KAAK,KAAO,WACZ,KAAK,KAAO/T,EACZ,KAAK,OAASod,EACd,KAAK,QAAUskC,CACjB,CACF,CAEA,MAAMC,GAAiB,MAAUl8C,GAAgD,CAC/E87C,GAAS,0BAA0B97C,EAAS,GAAG,KAAKA,EAAS,MAAM,GAAG,EAEtE,IAAI1G,EACJ,GAAI,CACFA,EAAO,MAAM0G,EAAS,KAAA,EACtB87C,GAAS,iBAAkBxiD,CAAI,CACjC,OAASU,EAAO,CACd8hD,GAAS,iCAAkC9hD,CAAK,EAChDV,EAAO,CAAA,CACT,CAEA,GAAI,CAAC0G,EAAS,GAAI,CAChB,MAAMhG,EAAQ,CACZ,KAAMV,GAAM,OAAO,MAAQ,gBAC3B,QAASA,GAAM,OAAO,SAAW,cAAc0G,EAAS,MAAM,KAAKA,EAAS,UAAU,GACtF,QAAS1G,GAAM,OAAO,SAAW,CAAE,OAAQ0G,EAAS,OAAQ,WAAYA,EAAS,UAAA,CAAW,EAG9F,cAAQ,MAAM,cAAcA,EAAS,MAAM,KAAM,CAC/C,IAAKA,EAAS,IACd,OAAQA,EAAS,OACjB,MAAAhG,EACA,gBAAiB,OAAO,YAAYgG,EAAS,QAAQ,SAAS,CAAA,CAC/D,EAEK,IAAIg8C,GAAShiD,EAAM,QAASA,EAAM,KAAMgG,EAAS,OAAQhG,EAAM,OAAO,CAC9E,CAEA,MAAO,CAAE,KAAAV,EAAM,OAAQ0G,EAAS,MAAA,CAClC,EAEam8C,GAAM,CACjB,IAAK,MAAU57C,EAAayO,EAAuB,KAAgC,CACjF,MAAMotC,EAAU,GAAG79C,EAAY,GAAGgC,CAAG,GACrCu7C,GAAS,OAAOM,CAAO,GAAI,CAAE,QAAAptC,EAAS,EAEtC,GAAI,CACF,MAAMN,EAAU,CACd,eAAgB,mBAChB,GAAGD,GAAA,EACH,GAAGO,EAAQ,OAAA,EAGb8sC,GAAS,mBAAoBptC,CAAO,EAEpC,MAAM1O,EAAW,MAAM,MAAMo8C,EAAS,CACpC,GAAGptC,EACH,OAAQ,MACR,QAAAN,EACA,YAAa,SAAA,CACd,EAEDotC,OAAAA,GAAS,6BAA6Bv7C,CAAG,IAAK,CAC5C,OAAQP,EAAS,OACjB,WAAYA,EAAS,WACrB,QAAS,OAAO,YAAYA,EAAS,QAAQ,SAAS,CAAA,CACvD,EAEMk8C,GAAkBl8C,CAAQ,CACnC,OAAShG,EAAO,CAEd,MADA8hD,GAAS,gBAAgBv7C,CAAG,IAAKvG,CAAK,EAClCA,aAAiBgiD,GAAgBhiD,EAC/B,IAAIgiD,GACR,yBACA,gBACA,EACA,CACE,IAAAz7C,EACA,OAAQ,MACR,cAAevG,aAAiB,MAAQA,EAAM,QAAU,OAAOA,CAAK,CAAA,CACtE,CAEJ,CACF,EAEA,KAAM,MACJuG,EACA8b,EACArN,EAAuB,CAAA,IACK,CAC5B,GAAI,CACF,MAAMhP,EAAW,MAAM,MAAM,GAAGzB,EAAY,GAAGgC,CAAG,GAAI,CACpD,GAAGyO,EACH,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,GAAGP,GAAA,EACH,GAAGO,EAAQ,OAAA,EAEb,YAAa,UACb,KAAM,KAAK,UAAUqN,CAAI,CAAA,CAC1B,EAED,OAAO6/B,GAAkBl8C,CAAQ,CACnC,OAAShG,EAAO,CACd,MAAIA,aAAiBgiD,GAAgBhiD,EAC/B,IAAIgiD,GACR,yBACA,gBACA,EACA,CAAE,cAAehiD,CAAA,CAAM,CAE3B,CACF,EAEA,IAAK,MACHuG,EACA8b,EACArN,EAAuB,CAAA,IACK,CAC5B,GAAI,CACF,MAAMhP,EAAW,MAAM,MAAM,GAAGzB,EAAY,GAAGgC,CAAG,GAAI,CACpD,GAAGyO,EACH,OAAQ,MACR,QAAS,CACP,eAAgB,mBAChB,GAAGP,GAAA,EACH,GAAGO,EAAQ,OAAA,EAEb,YAAa,UACb,KAAM,KAAK,UAAUqN,CAAI,CAAA,CAC1B,EAED,OAAO6/B,GAAkBl8C,CAAQ,CACnC,OAAShG,EAAO,CACd,MAAIA,aAAiBgiD,GAAgBhiD,EAC/B,IAAIgiD,GACR,yBACA,gBACA,EACA,CAAE,cAAehiD,CAAA,CAAM,CAE3B,CACF,EAEA,OAAQ,MACNuG,EACAyO,EAAuB,KACK,CAC5B,GAAI,CACF,MAAMhP,EAAW,MAAM,MAAM,GAAGzB,EAAY,GAAGgC,CAAG,GAAI,CACpD,GAAGyO,EACH,OAAQ,SACR,QAAS,CACP,eAAgB,mBAChB,GAAGP,GAAA,EACH,GAAGO,EAAQ,OAAA,EAEb,YAAa,SAAA,CACd,EAED,OAAOktC,GAAkBl8C,CAAQ,CACnC,OAAShG,EAAO,CACd,MAAIA,aAAiBgiD,GAAgBhiD,EAC/B,IAAIgiD,GACR,yBACA,gBACA,EACA,CAAE,cAAehiD,CAAA,CAAM,CAE3B,CACF,CACF,ECjMM8hD,GAAW,IAAIC,IAAgB,CAEjC,QAAQ,IAAI,mBAAoB,GAAGA,CAAI,CAE3C,EAEMM,GAAqB,eAEdC,GAAiB,CAE5B,WAAY,MAAOj9C,GAAmD,CACpEy8C,GAAS,6BAA6Bz8C,CAAE,EAAE,EAC1C,GAAI,CACF,MAAMW,EAAW,MAAMm8C,GAAI,IAAmC,GAAGE,EAAkB,IAAIh9C,CAAE,EAAE,EAG3F,GAFAy8C,GAAS,gCAAiC97C,EAAS,IAAI,EAEnD,CAACA,EAAS,MAAM,QAClB,MAAM,IAAI,MAAM,mCAAmC,EAGrD,OAAOA,EAAS,KAAK,OACvB,OAAShG,EAAO,CACd,MAAA8hD,GAAS,0BAA2B9hD,CAAK,EACnC,IAAI,MAAM,4BAA4BA,EAAM,OAAO,EAAE,CAC7D,CACF,EAGA,kBAAmB,MAAOqF,GAAwB,CAChD,KAAM,CAAE,KAAA/F,CAAA,EAAS,MAAM6iD,GAAI,IAAI,GAAGE,EAAkB,IAAIh9C,CAAE,UAAU,EACpE,OAAO/F,CACT,EAGA,qBAAsB,MAAOif,GAA+B,CAC1D,KAAM,CAAE,KAAAjf,CAAA,EAAS,MAAM6iD,GAAI,IAAI,GAAGE,EAAkB,IAAI9jC,CAAS,cAAc,EAC/E,OAAOjf,CACT,EAGA,YAAa,MAAOif,GAA+B,CACjD,KAAM,CAAE,KAAAjf,CAAA,EAAS,MAAM6iD,GAAI,KAAK,GAAGE,EAAkB,IAAI9jC,CAAS,QAAS,CAAA,CAAE,EAC7E,OAAOjf,CACT,EAGA,cAAe,MAAOif,GAA+B,CACnD,KAAM,CAAE,KAAAjf,CAAA,EAAS,MAAM6iD,GAAI,OAAO,GAAGE,EAAkB,IAAI9jC,CAAS,OAAO,EAC3E,OAAOjf,CACT,EAGA,YAAa,MAAOif,GAA+B,CACjD,KAAM,CAAE,KAAAjf,CAAA,EAAS,MAAM6iD,GAAI,KAAK,GAAGE,EAAkB,IAAI9jC,CAAS,QAAS,CAAA,CAAE,EAC7E,OAAOjf,CACT,EAGA,cAAe,MAAOif,GAA+B,CACnD,KAAM,CAAE,KAAAjf,CAAA,EAAS,MAAM6iD,GAAI,OAAO,GAAGE,EAAkB,IAAI9jC,CAAS,OAAO,EAC3E,OAAOjf,CACT,EAGA,mBAAoB,MAAOif,GAA+B,CACxD,KAAM,CAAE,KAAAjf,CAAA,EAAS,MAAM6iD,GAAI,IAAI,GAAGE,EAAkB,IAAI9jC,CAAS,WAAW,EAC5E,OAAOjf,GAAM,UAAY,CAAA,CAC3B,EAGA,WAAY,MAAOif,EAA4BszB,IAAoB,CACjE,KAAM,CAAE,KAAAvyC,CAAA,EAAS,MAAM6iD,GAAI,KAAK,GAAGE,EAAkB,IAAI9jC,CAAS,YAAa,CAAE,QAAAszB,EAAS,EAC1F,OAAOvyC,CACT,EAGA,kBAAmB,MAAOif,GAA+B,CACvD,KAAM,CAAE,KAAAjf,CAAA,EAAS,MAAM6iD,GAAI,IACzB,GAAGE,EAAkB,IAAI9jC,CAAS,UAAA,EAEpC,OAAOjf,GAAM,OAAS,CAAA,CACxB,EAGA,cAAe,MAAOif,EAA4BgkC,IAAmB,CACnE,KAAM,CAAE,KAAAjjD,CAAA,EAAS,MAAM6iD,GAAI,KAAK,GAAGE,EAAkB,IAAI9jC,CAAS,UAAW,CAAE,OAAAgkC,EAAQ,EACvF,OAAOjjD,CACT,CACF,ECtFMkjD,GAAyB,IAAM,CACnC,KAAM,CAAE,GAAAn9C,CAAA,EAAOinC,GAAA,EACEvrC,GAAA,EACjB,KAAM,CAAC6G,EAAS4rB,CAAU,EAAIryB,EAAAA,SAAc,IAAI,EAC1C,CAAC4B,EAASC,CAAU,EAAI7B,EAAAA,SAAS,EAAI,EACrC,CAACnB,EAAO2L,CAAQ,EAAIxK,EAAAA,SAAwB,IAAI,EAChD,CAACshD,EAAYC,CAAa,EAAIvhD,EAAAA,SAAS,EAAE,EAqE/C,OAnEAM,EAAAA,UAAU,IAAM,CAEd,QAAQ,IAAI,eAAgB,CAC1B,SAAU,aACV,aAAc,OACd,SAAU,OAAO,SAAS,KAC1B,SAAU,OAAO,SAAS,SAC1B,OAAQ,OAAO,SAAS,MAAA,CACzB,EAGDihD,EAA8C,uBAAuB,GAEhD,SAAY,CAC/B,GAAI,CAACr9C,EAAI,CACPsG,EAAS,wBAAwB,EACjC3I,EAAW,EAAK,EAChB,MACF,CAEA,QAAQ,IAAI,oCAAqCqC,CAAE,EAEnD,GAAI,CAEF,MAAMs9C,EAAU,qCAA0Et9C,CAAE,GAC5F,QAAQ,IAAI,2BAA4Bs9C,CAAO,EAG/C,QAAQ,IAAI,qCAAqC,EACjD,MAAMrjD,EAAO,MAAMgjD,GAAe,WAAWj9C,CAAE,EAC/C,QAAQ,IAAI,qCAAsC/F,CAAI,EACtDk0B,EAAWl0B,CAAI,CACjB,OAASwC,EAAK,CACZ,QAAQ,MAAM,8BAA+BA,CAAG,EAGhD,GAAI,CACF,QAAQ,IAAI,iCAAiC,EAC7C,MAAMkE,EAAW,MAAM,MACrB,qCAA0EX,CAAE,GAC5E,CACE,YAAa,UACb,QAAS,CACP,eAAgB,kBAAA,CAClB,CACF,EAGF,GAAI,CAACW,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAG1D,MAAM1G,EAAO,MAAM0G,EAAS,KAAA,EAC5B,QAAQ,IAAI,2BAA4B1G,CAAI,EAC5Ck0B,EAAWl0B,CAAI,CACjB,OAASsjD,EAAU,CACjB,QAAQ,MAAM,uBAAwBA,CAAQ,EAC9Cj3C,EAASi3C,EAAS,SAAW,wBAAwB,CACvD,CACF,QAAA,CACE5/C,EAAW,EAAK,CAClB,CACF,GAEA,CACF,EAAG,CAACqC,CAAE,CAAC,EAEHtC,EAEAZ,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,OAAC,KAAA,CAAG,UAAU,0BAA0B,SAAA,qBAAkB,EAC1DA,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,OAAC,KAAA,CAAG,UAAU,qBAAqB,SAAA,qBAAkB,EACrDA,EAAAA,KAAC,MAAA,CAAI,UAAU,sCAAsC,SAAA,CAAA,eACtCkD,GAAM,MAAM,aACdo9C,GAAc,UAAU,8CAAA,EAGrC,CAAA,EACF,EACArgD,EAAAA,IAAC+X,GAAA,CACC,QAAS,IAAM,OAAO,SAAS,OAAA,EAC/B,QAAQ,UACR,UAAU,OACX,SAAA,cAAA,CAAA,CAED,EACF,CAAA,EACF,EAIAna,EAEAmC,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,QAAC,MAAA,CAAI,UAAU,2EAA2E,KAAK,QAC7F,SAAA,OAAC,SAAA,CAAO,UAAU,YAAY,SAAA,UAAO,QACpC,OAAA,CAAK,UAAU,kBAAmB,SAAAnC,EAAM,CAAA,EAC3C,EACAoC,EAAAA,IAAC,MAAA,CAAI,UAAU,OACb,SAAAA,EAAAA,IAAC+X,GAAA,CACC,QAAS,IAAM,OAAO,SAAS,OAAA,EAC/B,QAAQ,UACT,SAAA,aAAA,CAAA,EAGH,CAAA,EACF,EAKFhY,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,OAAC,KAAA,CAAG,UAAU,0BAA0B,SAAA,kBAAe,EACvDC,EAAAA,IAAC,OAAI,UAAU,wCACZ,cAAK,UAAUwF,EAAS,KAAM,CAAC,CAAA,CAClC,CAAA,EACF,CAEJ,EChIA,SAAwBi7C,GAAS,CAAE,MAAAroC,EAAO,QAAAlG,GAA0B,CAClE,MAAMxT,EAAWC,GAAA,EAIXS,EAHWP,GAAA,EAGM,MACjB6hD,EAAetoC,GAAShZ,GAAO,OAAS,iBACxCuhD,EAAiBzuC,GAAW9S,GAAO,SACvC,sFAEF,aACG,MAAA,CAAI,UAAU,2FACb,SAAAW,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,uCAAwC,SAAA0gD,EAAa,EACnE1gD,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA8B,SAAA2gD,EAAe,EAC1D3gD,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMtB,EAAS,GAAG,EAC3B,UAAU,mGACX,SAAA,cAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,CAEJ,CCHA,QAAQ,IAAI,iCAAiC,EAG7C,SAASkiD,GAAe,CAAE,SAAAz9C,GAA2C,CACnE,KAAM,CAAE,KAAAC,EAAM,UAAAE,CAAA,EAAcmB,GAAA,EACtB7F,EAAWC,GAAA,EAEjB,OAAIyE,EAEAtD,MAAC,OAAI,UAAU,gDACb,eAAC,MAAA,CAAI,UAAU,4EAA4E,CAAA,CAC7F,EAICoD,oBAKK,SAAAD,EAAS,EAHVnD,MAAC6gD,GAAA,CAAS,GAAG,QAAQ,MAAO,CAAE,KAAMjiD,CAAA,EAAY,QAAO,EAAA,CAAC,CAInE,CAGA,SAASkiD,GAAY,CACnB,SAAA39C,EACA,sBAAA49C,EAAwB,GACxB,WAAAC,EAAa,YACf,EAIG,CACD,KAAM,CAAE,KAAA59C,CAAA,EAASqB,GAAA,EACX7F,EAAWC,GAAA,EAGjB,GAAIkiD,GAAyB39C,EAAM,CACjC,MAAM69C,EAAOriD,EAAS,OAAO,MAAM,UAAYoiD,EAC/C,OAAOhhD,EAAAA,IAAC6gD,GAAA,CAAS,GAAII,EAAM,QAAO,GAAC,CACrC,CAEA,yBAAU,SAAA99C,EAAS,CACrB,CAEA,SAAwB+9C,IAAM,CAC5B,aACGC,GAAA,CACC,SAAAnhD,EAAAA,IAACohD,IACC,SAAAphD,EAAAA,IAACkD,GAAA,CACC,gBAACm+C,GAAA,CAEC,SAAA,CAAArhD,EAAAA,IAACshD,GAAA,CAAM,KAAK,QAAQ,cACjBR,GAAA,CACC,SAAA9gD,EAAAA,IAACya,GAAA,CAAA,CAAS,CAAA,CACZ,CAAA,CACA,EACFza,EAAAA,IAACshD,GAAA,CAAM,KAAK,iBAAiB,cAC1BR,GAAA,CACC,SAAA9gD,EAAAA,IAACuhD,GAAA,CAAA,CAAiB,CAAA,CACpB,CAAA,CACA,EACFvhD,EAAAA,IAACshD,GAAA,CAAM,KAAK,IAAI,QACdthD,EAAAA,IAAC8gD,GAAA,CAAY,sBAAuB,GAClC,SAAA9gD,EAAAA,IAACwhD,GAAA,CAAA,CAAS,CAAA,CACZ,EACA,EAGFxhD,MAACshD,GAAA,CAAM,KAAK,aAAa,QACvBthD,EAAAA,IAAC4gD,GAAA,CACC,SAAA5gD,EAAAA,IAACkT,GAAA,CAAO,SAAAlT,MAACyhD,GAAA,CAAA,CAAa,CAAA,CAAE,EAC1B,EACA,EACFzhD,MAACshD,GAAA,CAAM,KAAK,eAAe,QACzBthD,EAAAA,IAAC4gD,GAAA,CACC,SAAA5gD,EAAAA,IAACkT,GAAA,CAAO,SAAAlT,MAAC0hD,GAAA,CAAA,CAAgB,CAAA,CAAE,EAC7B,EACA,EACF1hD,MAACshD,GAAA,CAAM,KAAK,QAAQ,QAClBthD,EAAAA,IAAC4gD,GAAA,CACC,SAAA5gD,EAAAA,IAACkT,GAAA,CAAO,SAAAlT,MAAC2hD,GAAA,CAAA,CAAS,CAAA,CAAE,EACtB,EACA,EACF3hD,MAACshD,GAAA,CAAM,KAAK,UAAU,QACpBthD,EAAAA,IAAC4gD,GAAA,CACC,SAAA5gD,EAAAA,IAACkT,GAAA,CAAO,SAAAlT,MAAC4hD,GAAA,CAAA,CAAW,CAAA,CAAE,EACxB,EACA,EACF5hD,MAACshD,GAAA,CAAM,KAAK,UAAU,QACpBthD,EAAAA,IAAC4gD,GAAA,CACC,SAAA5gD,EAAAA,IAACkT,GAAA,CAAO,SAAAlT,MAAC6hD,GAAA,CAAA,CAAW,CAAA,CAAE,EACxB,EACA,EACF7hD,MAACshD,GAAA,CAAM,KAAK,UAAU,QACpBthD,EAAAA,IAAC4gD,GAAA,CACC,SAAA5gD,EAAAA,IAACkT,GAAA,CAAO,SAAAlT,MAAC8hD,GAAA,CAAA,CAAW,CAAA,CAAE,EACxB,EACA,EACF9hD,MAACshD,GAAA,CAAM,KAAK,cAAc,QACxBthD,EAAAA,IAAC4gD,GAAA,CACC,SAAA5gD,EAAAA,IAACkT,GAAA,CAAO,SAAAlT,MAAC+hD,GAAA,CAAA,CAAc,CAAA,CAAE,EAC3B,EACA,EACF/hD,MAACshD,GAAA,CAAM,KAAK,qBAAqB,QAC/BthD,EAAAA,IAAC4gD,GAAA,CACC,SAAA5gD,EAAAA,IAACkT,GAAA,CAAO,SAAAlT,MAACytC,GAAA,CAAA,CAAY,CAAA,CAAE,EACzB,EACA,EACFztC,EAAAA,IAACshD,GAAA,CAAM,KAAK,eAAe,cACxBV,GAAA,CACC,SAAA5gD,EAAAA,IAAC8yC,GAAA,CAAA,CAAkB,CAAA,CACrB,CAAA,CACA,QACDwO,GAAA,CAAM,KAAK,oBAAoB,QAC9BthD,MAACogD,KAAuB,EACxB,EACFpgD,MAACshD,GAAA,CAAM,KAAK,sBAAsB,QAChCthD,EAAAA,IAAC4gD,GAAA,CACC,SAAA5gD,EAAAA,IAACkT,GAAA,CAAO,SAAAlT,MAAC+yC,GAAA,CAAA,CAAkB,CAAA,CAAE,EAC/B,EACA,EACF/yC,MAACshD,GAAA,CAAM,KAAK,4BAA4B,QACtCthD,EAAAA,IAAC4gD,GAAA,CACC,SAAA5gD,EAAAA,IAACkT,GAAA,CAAO,SAAAlT,MAACozC,GAAA,CAAA,CAAqB,CAAA,CAAE,EAClC,EACA,EACFpzC,MAACshD,GAAA,CAAM,KAAK,gBAAgB,QAC1BthD,EAAAA,IAAC4gD,GAAA,CACC,SAAA5gD,EAAAA,IAACkT,GAAA,CAAO,SAAAlT,MAACgiD,GAAA,CAAA,CAAe,CAAA,CAAE,EAC5B,EACA,EACFhiD,MAACshD,GAAA,CAAM,KAAK,cAAc,QACxBthD,EAAAA,IAAC4gD,GAAA,CACC,SAAA5gD,EAAAA,IAACkT,GAAA,CAAO,SAAAlT,MAACk4C,GAAA,CAAA,CAAoB,CAAA,CAAE,EACjC,EACA,EACFl4C,MAACshD,GAAA,CAAM,KAAK,yBAAyB,QACnCthD,EAAAA,IAAC4gD,GAAA,CACC,SAAA5gD,EAAAA,IAACkT,GAAA,CAAO,SAAAlT,MAACk6C,GAAA,CAAA,CAAqB,CAAA,CAAE,EAClC,EACA,EACFl6C,MAACshD,GAAA,CAAM,KAAK,iBAAiB,QAC3BthD,EAAAA,IAAC4gD,GAAA,CACC,SAAA5gD,EAAAA,IAACkT,GAAA,CAAO,SAAAlT,MAAC2+C,GAAA,CAAA,CAAY,CAAA,CAAE,EACzB,EACA,EACF3+C,MAACshD,GAAA,CAAM,KAAK,yBAAyB,QACnCthD,EAAAA,IAAC4gD,GAAA,CACC,SAAA5gD,EAAAA,IAACkT,GAAA,CAAO,SAAAlT,MAACy6C,GAAA,CAAA,CAAe,CAAA,CAAE,EAC5B,EACA,EACFz6C,EAAAA,IAACshD,GAAA,CAAM,KAAK,QAAQ,QAASthD,EAAAA,IAAC6gD,GAAA,CAAS,GAAG,aAAa,QAAO,EAAA,CAAC,CAAA,CAAI,EAGnE7gD,EAAAA,IAACshD,GAAA,CAAM,KAAK,aAAa,QACvBthD,EAAAA,IAAC8gD,GAAA,CAAY,sBAAuB,GAClC,SAAA9gD,EAAAA,IAACygD,GAAA,CAAA,CAAS,CAAA,CACZ,EACA,EACFzgD,EAAAA,IAACshD,GAAA,CAAM,KAAK,SAAS,QACnBthD,EAAAA,IAAC8gD,GAAA,CAAY,sBAAuB,GAClC,SAAA9gD,EAAAA,IAAC3B,GAAA,CAAA,CAAU,CAAA,CACb,EACA,EAEF2B,EAAAA,IAACshD,GAAA,CAAM,KAAK,IAAI,QACdthD,EAAAA,IAAC8gD,GAAA,CAAY,sBAAuB,GAClC,SAAA9gD,EAAAA,IAACygD,GAAA,CAAA,CAAS,CAAA,CACZ,CAAA,CACA,CAAA,EACJ,CAAA,CACF,EACF,EACF,CAEJ,CChMO,MAAMU,WAAsB9qC,EAAAA,SAAkD,CAA9E,aAAA,CAAA,MAAA,GAAA,SAAA,EACL,KAAA,MAA4B,CAAE,SAAU,GAAO,MAAO,IAAA,CAAK,CAE3D,OAAO,yBAAyBzY,EAAc,CAC5C,MAAO,CAAE,SAAU,GAAM,MAAAA,CAAA,CAC3B,CAEA,kBAAkBA,EAAcX,EAAgB,CAC9C,QAAQ,MAAM,iCAAkCW,EAAOX,CAAS,CAClE,CAEA,QAAS,CACP,GAAI,KAAK,MAAM,SAAU,CACvB,MAAMe,EAAe,KAAK,MAAM,iBAAiB,MAC7C,KAAK,MAAM,MAAM,QACjB,4BAEJ,OAAO,KAAK,MAAM,UAChB+B,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,6BAA6B,SAAA,uBAAoB,EAC/DA,EAAAA,IAAC,IAAA,CAAE,UAAU,UAAW,SAAAhC,CAAA,CAAa,CAAA,EACvC,CAEJ,CAEA,OAAO,KAAK,MAAM,QACpB,CACF,CCjCA,QAAQ,IAAI,sCAAsC,EAElDikD,GAAAA,WAAW,SAAS,eAAe,MAAM,CAAE,EAAE,OAC3CjiD,EAAAA,IAACkiD,EAAAA,YACC,SAAAliD,EAAAA,IAACmhD,GAAA,CACC,eAACgB,EAAAA,SAAA,CAAS,eACP,MAAA,CAAI,UAAU,gDACb,SAAAniD,EAAAA,IAAC,MAAA,CAAI,UAAU,2EAAA,CAA4E,CAAA,CAC7F,EAEA,SAAAA,EAAAA,IAACkhD,GAAA,CAAA,CAAI,CAAA,CACP,CAAA,CACF,CAAA,CACF,CACF"}