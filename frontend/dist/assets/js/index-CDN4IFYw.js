import{u as Ca,a as Ce,b as ws,r as o,j as e,T as Ns,C as te,c as qs,R as Ws,H as xt,d as _e,Z as ke,e as re,S as X,D as Ne,K as Ye,M as _t,f as Ke,U as Le,L as he,B as Ys,X as se,h as ds,i as Me,k as we,I as Sa,A as is,l as Pe,m as Xe,n as Us,G as Lt,o as ks,F as ys,p as oe,q as pe,s as os,t as Cs,v as js,W as Os,w as ra,x as ls,y as Vs,z as Ot,P as Re,E as pr,J as qt,N as la,O as gt,Q as Da,V as Xs,Y as gr,_ as be,$ as fr,a0 as Zs,a1 as br,a2 as vs,a3 as jr,a4 as Bs,a5 as ss,a6 as Qs,a7 as Ss,a8 as Wt,a9 as Pa,aa as Ht,ab as Ds,ac as ut,ad as zs,ae as ts,af as Rs,ag as Ta,ah as nt,ai as it,aj as Rt,ak as Ma,al as It,am as Fa,an as Ea,ao as yr,ap as $a,aq as Aa,ar as Is,as as La,at as Ut,au as Nr,av as Hs,aw as Kt,ax as ht,ay as ft,az as bt,aA as jt,aB as et,aC as vr,aD as wr,aE as _r,aF as Oa,aG as kr,aH as Cr,aI as Sr,aJ as Dr,aK as Ra,aL as Ia,aM as Ua,aN as Pr,aO as pt,aP as Tr,aQ as Mr,aR as Bt,aS as Ba,aT as zt,aU as Ps,aV as na,aW as ia,aX as za,aY as Fr,aZ as es,a_ as Er,a$ as Yt,b0 as Js,b1 as ot,b2 as $r,b3 as Ar,b4 as Lr,b5 as Or,b6 as Rr,b7 as Ir,b8 as Ur,b9 as xe,ba as Jt,bb as Br}from"./vendor-D2nDQiFo.js";import{o as Fe,s as V,b as Gt,n as ie,e as Ie,r as Ga,a as qa,f as zr}from"./utils-BF8AtB3r.js";import"./router-Ci2Y9YYq.js";import"./vendor-other-C5vgfmTq.js";function Gr(s){const l=`${s.message}|${s.timestamp}|${s.url}`;let t=0;for(let n=0;n<l.length;n++){const i=l.charCodeAt(n);t=(t<<5)-t+i,t=t&t}return`ERR-${Math.abs(t).toString(16).toUpperCase().slice(-8).padStart(8,"0")}`}function qr(s){try{const l=JSON.stringify(s);return btoa(l)}catch(l){return console.error("Failed to encode error info:",l),""}}function Wr(s){try{const l=atob(s);return JSON.parse(l)}catch(l){return console.error("Failed to decode error info:",l),null}}function Hr(s,l,t,r){const a=typeof s=="string"?s:s.message,n=typeof s=="object"?s.stack:void 0;return{message:a,stack:n,timestamp:Date.now(),url:window.location.href,userAgent:navigator.userAgent,userId:r,component:l,action:t}}function Kr(s){const l=Gr(s),t=qr(s);window.location.replace(`/error?code=${l}&data=${t}`)}function Vt(s,l,t,r){const a=Hr(s,l,t,r);Kr(a)}function Yr({title:s,message:l}={}){const[t]=Ca(),r=Ce(),a=ws(),[n,i]=o.useState(null),[p,u]=o.useState(!1),m=t.get("code")||"ERR-UNKNOWN",c=t.get("data"),x=a.state;s||x?.title,l||x?.message,o.useEffect(()=>{if(c)try{const f=Wr(c);i(f)}catch(f){console.error("Failed to decode error info:",f)}},[c]);const g=()=>{r("/dashboard")},h=()=>{window.location.reload()},j=async()=>{try{await navigator.clipboard.writeText(m),u(!0),setTimeout(()=>u(!1),2e3)}catch(f){console.error("Failed to copy error code:",f)}},y=f=>new Date(f).toLocaleString(),N=()=>n?.component==="upload"?"Upload Failed":n?.component==="payment"?"Payment Error":n?.component==="auth"?"Authentication Error":n?.action==="create_content"?"Content Creation Failed":"Something Went Wrong",w=()=>n?.component==="upload"?"We couldn't process your file upload. This might be due to file size, format, or network issues.":n?.component==="payment"?"There was an issue processing your payment. Your card was not charged.":n?.component==="auth"?"We couldn't verify your identity. Please try signing in again.":n?.action==="create_content"?"We couldn't create your content. Your data has been preserved and you can try again.":"We encountered an unexpected error. Our team has been automatically notified.";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-lg w-full bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 px-8 py-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(Ns,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:N()}),e.jsxs("p",{className:"text-red-100 text-sm",children:["Error Code: ",m]})]})]})}),e.jsxs("div",{className:"px-8 py-6",children:[e.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:w()}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Error Reference"}),e.jsx("p",{className:"text-lg font-mono text-gray-900",children:m})]}),e.jsxs("button",{onClick:j,className:"flex items-center space-x-1 px-3 py-2 bg-white rounded-lg hover:bg-gray-100 transition-colors",children:[p?e.jsx(te,{className:"w-4 h-4 text-green-600"}):e.jsx(qs,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:p?"Copied!":"Copy"})]})]})}),n&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"What happened?"}),e.jsxs("p",{className:"text-sm text-blue-700 mb-2",children:["Time: ",y(n.timestamp)]}),n.action&&e.jsxs("p",{className:"text-sm text-blue-700",children:["Action: ",n.action.replace("_"," ")]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:h,className:"w-full bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[e.jsx(Ws,{className:"w-5 h-5"}),e.jsx("span",{children:"Try Again"})]}),e.jsxs("button",{onClick:g,className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[e.jsx(xt,{className:"w-5 h-5"}),e.jsx("span",{children:"Back to Home"})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Need help?"})," Share your error code ",e.jsx("span",{className:"font-mono",children:m})," with our support team for faster assistance."]})})]})]})})}function Jr(){const[s,l]=o.useState("daily"),[t,r]=o.useState([]),[a,n]=o.useState(!0);o.useEffect(()=>{i()},[s]);const i=async()=>{n(!0);try{const c=await(await fetch(`/api/leaderboard/${s}`)).json();r(c)}catch(m){console.error("Failed to fetch leaderboard:",m)}finally{n(!1)}},p=m=>{switch(m){case 1:return e.jsx(Ke,{className:"w-6 h-6 text-yellow-500"});case 2:return e.jsx(_t,{className:"w-6 h-6 text-gray-400"});case 3:return e.jsx(_t,{className:"w-6 h-6 text-amber-600"});default:return e.jsxs("div",{className:"w-6 h-6 flex items-center justify-center text-gray-600 font-bold text-sm",children:["#",m]})}},u=m=>{switch(m){case 1:return"bg-gradient-to-r from-yellow-50 to-amber-50 border-yellow-200";case 2:return"bg-gradient-to-r from-gray-50 to-slate-50 border-gray-200";case 3:return"bg-gradient-to-r from-amber-50 to-orange-50 border-amber-200";default:return"bg-white border-gray-200"}};return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center space-x-3",children:[e.jsx(_e,{className:"w-8 h-8 text-yellow-500"}),e.jsx("span",{children:"Leaderboard"})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Top performers in the Promorang economy"})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:e.jsx("div",{className:"flex space-x-4",children:[{key:"daily",label:"Today",icon:ke},{key:"weekly",label:"This Week",icon:re},{key:"monthly",label:"This Month",icon:X}].map(m=>{const c=m.icon;return e.jsxs("button",{onClick:()=>l(m.key),className:`flex items-center space-x-2 px-6 py-3 rounded-lg font-medium transition-all duration-200 ${s===m.key?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(c,{className:"w-4 h-4"}),e.jsx("span",{children:m.label})]},m.key)})})}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Composite Score Formula"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm text-purple-700",children:"Points × 0.25"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),e.jsx("span",{className:"text-sm text-purple-700",children:"Gems × 0.40"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),e.jsx("span",{className:"text-sm text-purple-700",children:"Keys × 0.15"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-sm text-purple-700",children:"Gold × 0.20"})]})]})]}),e.jsx("div",{className:"space-y-3",children:t.length>0?t.map((m,c)=>{const x=c+1;return e.jsx("div",{className:`border rounded-xl p-6 transition-all duration-200 hover:shadow-md ${u(x)}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[p(x),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:m.avatar_url||"/default-avatar.png",alt:m.display_name,className:"w-12 h-12 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:m.display_name||"Anonymous User"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["@",m.username||"user"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"w-4 h-4 text-blue-600"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:m.points_earned.toLocaleString()}),e.jsx("p",{className:"text-xs text-gray-600",children:"Points"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ne,{className:"w-4 h-4 text-purple-600"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:m.gems_earned.toLocaleString()}),e.jsx("p",{className:"text-xs text-gray-600",children:"Gems"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ye,{className:"w-4 h-4 text-orange-600"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:m.keys_used}),e.jsx("p",{className:"text-xs text-gray-600",children:"Keys"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_t,{className:"w-4 h-4 text-yellow-600"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:m.gold_collected}),e.jsx("p",{className:"text-xs text-gray-600",children:"Gold"})]})]}),e.jsxs("div",{className:"text-center ml-6 pl-6 border-l border-gray-300",children:[e.jsx("p",{className:"text-xl font-bold text-gray-900",children:m.composite_score.toFixed(1)}),e.jsx("p",{className:"text-xs text-gray-600",children:"Score"})]})]})]})},m.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_e,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Rankings Yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Be the first to earn points and climb the leaderboard!"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("p",{children:"• Complete drops to earn gems"}),e.jsx("p",{children:"• Engage with content to earn points"}),e.jsx("p",{children:"• Collect gold for prestige"})]})]})}),t.length>0&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Competition Stats"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.reduce((m,c)=>m+c.points_earned,0).toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Points"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:t.reduce((m,c)=>m+c.gems_earned,0).toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Gems"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:t.reduce((m,c)=>m+c.keys_used,0)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Keys Used"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:t.reduce((m,c)=>m+c.gold_collected,0)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Gold Earned"})]})]})]})]})}const Vr="http://localhost:3001",Xt=Vr;console.group("API Configuration");console.log("Environment:","production");console.log("VITE_API_URL from env:",void 0);console.log("Using API Base URL:",Xt);console.groupEnd();typeof window<"u"&&(window.__API_CONFIG={env:"production",viteApiUrl:void 0,apiBase:Xt,timestamp:new Date().toISOString()});const Xr=Xt,Qr=Xr,Wa=Qr.replace(/\/+$/,"").replace(/\/api$/,""),cs=Wa,Es=Wa,$s={AUTH:{LOGIN:`${Es}/api/auth/login`,REGISTER:`${Es}/api/auth/register`,DEMO:s=>`${Es}/api/auth/demo/${s}`,OAUTH:s=>`${Es}/api/auth/oauth/${s}`,LOGOUT:`${Es}/api/auth/logout`,ME:`${Es}/api/auth/me`}},Ha=o.createContext(void 0),Zr=s=>{try{const[,l]=s.split(".");if(!l)return null;const t=l.replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(t).split("").map(a=>`%${`00${a.charCodeAt(0).toString(16)}`.slice(-2)}`).join(""));return JSON.parse(r)}catch(l){return console.warn("Failed to decode JWT payload:",l),null}},kt=s=>{const l=Zr(s);if(!l)return null;const t=l.id||l.sub||l.user_id||l.email;return t?{id:String(t),email:l.email,username:l.username,display_name:l.display_name||l.username||l.email?.split("@")[0],user_type:l.user_type,points_balance:l.points_balance,keys_balance:l.keys_balance,gems_balance:l.gems_balance,gold_collected:l.gold_collected,user_tier:l.user_tier,avatar_url:l.avatar_url}:null};function el({children:s}){const[l,t]=o.useState(null),[r,a]=o.useState(!1),n=(h,j)=>{h&&localStorage.setItem("authToken",h);const y=j??(h?kt(h):null);y&&t(y)},i=async h=>{const j=await h.json();if(!h.ok)throw new Error(j.error||"Something went wrong");return j},p=async(h,j)=>{a(!0);try{const y=await fetch($s.AUTH.LOGIN,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h,password:j}),credentials:"include"}),N=await i(y);return n(N.token,N.user),{error:null}}catch(y){return{error:y.message}}finally{a(!1)}},u=async(h,j)=>{a(!0);try{const y=await fetch($s.AUTH.REGISTER,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h,password:j}),credentials:"include"}),N=await i(y);return n(N.token,N.user),{error:null}}catch(y){return{error:y.message}}finally{a(!1)}},m=async h=>{try{return window.location.href=$s.AUTH.OAUTH(h),{error:null}}catch(j){return{error:j.message}}},c=async h=>{a(!0);const j=$s.AUTH.DEMO(h);console.log("Demo login URL:",j);try{console.log("Sending demo login request to:",j);const y=await fetch(j,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({})});if(console.log("Response status:",y.status,y.statusText),!y.ok){let w;try{w=(await y.json()).error||y.statusText}catch{w=await y.text()}throw console.error("Demo login failed:",w),new Error(w||`HTTP error! status: ${y.status}`)}const N=await y.json();if(console.log("Demo login successful:",N),!N.token)throw new Error("No token received in response");return n(N.token,N.user??null),{error:null}}catch(y){return console.error("Error in demo login:",y),{error:y.message||"Failed to log in with demo account"}}finally{a(!1)}},x=async()=>{try{await fetch($s.AUTH.LOGOUT,{method:"POST",credentials:"include"})}catch(h){console.error("Error during sign out:",h)}finally{return t(null),localStorage.removeItem("authToken"),{error:null}}};o.useEffect(()=>{(async()=>{try{const j=localStorage.getItem("authToken");if(j){const y=await fetch($s.AUTH.ME,{headers:{Authorization:`Bearer ${j}`},credentials:"include"});if(y.ok){const N=await y.json();n(j,N.user)}else if(y.status===401||y.status===403)localStorage.removeItem("authToken"),t(null);else{const N=kt(j);N&&t(w=>w??N)}}}catch(j){console.error("Auth check failed:",j);const y=localStorage.getItem("authToken"),N=y?kt(y):null;N&&t(w=>w??N)}})()},[]);const g={user:l,isPending:r,signIn:p,signUp:u,signInWithOAuth:m,demoLogin:{creator:()=>c("creator"),investor:()=>c("investor"),advertiser:()=>c("advertiser")},signOut:x,logout:()=>x()};return e.jsx(Ha.Provider,{value:g,children:s})}function Ue(){const s=o.useContext(Ha);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s}function Gs({username:s,userId:l,displayName:t,avatarUrl:r,className:a="",showAvatar:n=!0,size:i="md"}){const p={sm:"w-6 h-6 text-xs",md:"w-8 h-8 text-sm",lg:"w-10 h-10 text-base"};if(!s&&!l)return e.jsxs("div",{className:`flex items-center space-x-2 ${a}`,children:[n&&e.jsx("div",{className:`${p[i]} rounded-full overflow-hidden bg-gray-200 flex items-center justify-center`,children:r?e.jsx("img",{src:r,alt:t||"User",className:"w-full h-full object-cover"}):e.jsx(Le,{className:"w-1/2 h-1/2 text-gray-500"})}),e.jsx("span",{className:"font-medium text-gray-900",children:t||"User"})]});const u=s?`/users/${s}`:l?`/users/id/${l}`:"#";return e.jsxs(he,{to:u,className:`flex items-center space-x-2 hover:text-orange-600 transition-colors ${a}`,children:[n&&e.jsx("div",{className:`${p[i]} rounded-full overflow-hidden bg-gray-200 flex items-center justify-center`,children:r?e.jsx("img",{src:r,alt:t||s||`User #${l}`,className:"w-full h-full object-cover"}):e.jsx(Le,{className:"w-1/2 h-1/2 text-gray-500"})}),e.jsx("span",{className:"font-medium",children:t||s||`User #${l}`})]})}function fe({content:s,children:l,position:t="auto",delay:r=300,disabled:a=!1,className:n="",maxWidth:i,allowWrap:p=!0,compact:u=!1}){const[m,c]=o.useState(!1),[x,g]=o.useState("top"),h=o.useRef(null),j=o.useRef(null),y=o.useRef(null);o.useEffect(()=>()=>{h.current&&(clearTimeout(h.current),h.current=null)},[]);const N=()=>{if(!j.current||!y.current)return;const v=j.current.getBoundingClientRect(),C=y.current.getBoundingClientRect(),E={width:window.innerWidth,height:window.innerHeight},L=v.top,M=E.height-v.bottom,T=v.left,B=E.width-v.right,k=C.height||40,S=C.width||120,$=8;let z="top";if(t==="auto")L>=k+$?z="top":M>=k+$?z="bottom":B>=S+$?z="right":T>=S+$?z="left":z=L>=M?"top":"bottom";else switch(t){case"top":z=L>=k+$?"top":"bottom";break;case"bottom":z=M>=k+$?"bottom":"top";break;case"left":z=T>=S+$?"left":"right";break;case"right":z=B>=S+$?"right":"left";break}g(z)},w=()=>{a||(h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{c(!0),setTimeout(()=>N(),0)},r))},f=()=>{c(!1),h.current&&clearTimeout(h.current)},d=()=>`${`
      absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg 
      pointer-events-none transition-all duration-200 ease-out leading-5
      ${m?"opacity-100 scale-100":"opacity-0 scale-95"}
    `} ${{top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2"}[x]}`,b=()=>{if(i)return i;const v=typeof s=="string"?s.length:100;return u||v<20?"180px":v<40?"220px":v<80?"280px":"320px"},F=()=>`absolute ${{top:"top-full left-1/2 transform -translate-x-1/2 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-900",left:"left-full top-1/2 transform -translate-y-1/2 border-t-4 border-b-4 border-l-4 border-transparent border-l-gray-900",right:"right-full top-1/2 transform -translate-y-1/2 border-t-4 border-b-4 border-r-4 border-transparent border-r-gray-900"}[x]}`;return a||!s?e.jsx(e.Fragment,{children:l}):e.jsxs("div",{ref:j,className:`relative inline-block ${n}`,onMouseEnter:w,onMouseLeave:f,onFocus:w,onBlur:f,children:[l,m&&e.jsxs("div",{ref:y,className:d(),style:{maxWidth:b(),minWidth:u?"auto":"120px",whiteSpace:p?"normal":"nowrap",wordWrap:p?"break-word":"normal",hyphens:p?"auto":"none"},role:"tooltip","aria-hidden":!m,children:[s,e.jsx("div",{className:F()})]})]})}function sl({isOpen:s,onClose:l}){const{user:t}=Ue(),[r,a]=o.useState([]),[n,i]=o.useState(!1);o.useEffect(()=>{s&&t&&p()},[s,t]);const p=async()=>{i(!0);try{const h=[{id:"1",type:"achievement",title:"Achievement Unlocked!",message:'You earned the "First Steps" achievement and received 50 gold!',timestamp:new Date(Date.now()-18e5),read:!1,data:{achievement:"first_steps",gold_reward:50}},{id:"2",type:"reward",title:"Points Earned",message:"You earned 25 points from sharing content!",timestamp:new Date(Date.now()-72e5),read:!1,data:{points_earned:25,action:"content_share"}},{id:"3",type:"system",title:"Master Key Activated",message:"Your master key for today has been activated. You can now apply to drops!",timestamp:new Date(Date.now()-144e5),read:!0},{id:"4",type:"social",title:"New Follower",message:"PromoCreator just followed you!",timestamp:new Date(Date.now()-288e5),read:!0,actionUrl:"/users/promocreator"}];a(h)}catch(h){console.error("Failed to fetch notifications:",h)}finally{i(!1)}},u=async h=>{a(j=>j.map(y=>y.id===h?{...y,read:!0}:y))},m=async()=>{a(h=>h.map(j=>({...j,read:!0})))},c=h=>{switch(h){case"achievement":return e.jsx(_e,{className:"w-5 h-5 text-yellow-600"});case"reward":return e.jsx(Me,{className:"w-5 h-5 text-blue-600"});case"system":return e.jsx(Sa,{className:"w-5 h-5 text-purple-600"});case"social":return e.jsx(X,{className:"w-5 h-5 text-pink-600"});case"warning":return e.jsx(we,{className:"w-5 h-5 text-orange-600"});default:return e.jsx(Ys,{className:"w-5 h-5 text-gray-600"})}},x=h=>{const y=new Date().getTime()-h.getTime(),N=Math.floor(y/(1e3*60)),w=Math.floor(y/(1e3*60*60)),f=Math.floor(y/(1e3*60*60*24));return N<60?`${N}m ago`:w<24?`${w}h ago`:`${f}d ago`},g=r.filter(h=>!h.read).length;return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-50 pt-16",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md mx-4 max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ys,{className:"w-6 h-6 text-orange-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Notifications"}),g>0&&e.jsx("span",{className:"bg-orange-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:g})]}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),g>0&&e.jsx("div",{className:"px-6 py-3 border-b border-gray-100",children:e.jsxs("button",{onClick:m,className:"flex items-center space-x-2 text-sm text-orange-600 hover:text-orange-700 font-medium",children:[e.jsx(ds,{className:"w-4 h-4"}),e.jsx("span",{children:"Mark all as read"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:n?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading notifications..."})]}):r.length===0?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(Ys,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"You're all caught up!"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:r.map(h=>e.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${h.read?"":"bg-blue-50 border-l-4 border-l-blue-500"}`,onClick:()=>{h.read||u(h.id),h.actionUrl&&(window.location.href=h.actionUrl)},children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:c(h.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h4",{className:`text-sm font-medium ${h.read?"text-gray-700":"text-gray-900"}`,children:h.title}),e.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap ml-2",children:x(h.timestamp)})]}),e.jsx("p",{className:`text-sm mt-1 ${h.read?"text-gray-600":"text-gray-800"}`,children:h.message}),h.data&&e.jsxs("div",{className:"mt-2 flex items-center space-x-4",children:[h.data.gold_reward&&e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-yellow-700 bg-yellow-100 px-2 py-1 rounded",children:[e.jsx(_e,{className:"w-3 h-3"}),e.jsxs("span",{children:["+",h.data.gold_reward," Gold"]})]}),h.data.points_earned&&e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-blue-700 bg-blue-100 px-2 py-1 rounded",children:[e.jsx(Me,{className:"w-3 h-3"}),e.jsxs("span",{children:["+",h.data.points_earned," Points"]})]})]})]})]})},h.id))})}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsx("p",{className:"text-xs text-gray-600 text-center",children:"Stay tuned for more updates and achievements!"})})]})}):null}function Ka({user:s,isOpen:l,onClose:t,onSuccess:r}){const[a,n]=o.useState("points"),[i,p]=o.useState(1),[u,m]=o.useState(!1),[c,x]=o.useState(null);if(!l||!s)return null;const g={points:{keys:500},gems:{keys:2}},h=()=>a==="points"?s.points_balance:s.gems_balance,j=()=>i*g[a].keys,y=h()>=j(),N=async()=>{if(!(!y||i<1)){m(!0),x(null);try{const w=await fetch("/api/users/convert",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({from_currency:a,to_currency:"keys",amount:i})});if(w.ok)r(),t(),p(1);else{const f=await w.json();x(f.error||"Conversion failed")}}catch(w){console.error("Conversion failed:",w),x("Network error occurred")}finally{m(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Convert Currency"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Convert from:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>n("points"),className:`p-4 rounded-lg border-2 transition-colors ${a==="points"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Me,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium",children:"Points"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Balance: ",s.points_balance]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"500 pts = 1 key"})]}),e.jsxs("button",{onClick:()=>n("gems"),className:`p-4 rounded-lg border-2 transition-colors ${a==="gems"?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(X,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-medium",children:"Gems"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Balance: ",s.gems_balance]}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"2 gems = 1 key"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Keys to get:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>p(Math.max(1,i-1)),disabled:i<=1,className:"w-8 h-8 bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed rounded text-gray-700 font-bold",children:"-"}),e.jsx("input",{type:"number",value:i,onChange:w=>p(Math.max(1,parseInt(w.target.value)||1)),min:"1",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 text-center"}),e.jsx("button",{type:"button",onClick:()=>p(i+1),className:"w-8 h-8 bg-gray-200 hover:bg-gray-300 rounded text-gray-700 font-bold",children:"+"})]}),e.jsx("div",{className:"flex space-x-2 mt-2",children:[1,3,5,10].map(w=>e.jsxs("button",{onClick:()=>p(w),className:"px-3 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded-full text-gray-700",children:[w," key",w>1?"s":""]},w))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[a==="points"?e.jsx(Me,{className:"w-5 h-5 text-blue-600"}):e.jsx(X,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-medium capitalize",children:a})]}),e.jsx(is,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ye,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:"font-medium",children:"Keys"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-lg font-bold",children:[e.jsxs("span",{className:a==="points"?"text-blue-600":"text-purple-600",children:["-",j().toLocaleString()]}),e.jsxs("span",{className:"text-orange-600",children:["+",i]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mt-2",children:[e.jsxs("span",{children:["Remaining: ",(h()-j()).toLocaleString()]}),e.jsxs("span",{children:["New total: ",s.keys_balance+i]})]})]}),a==="points"&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(we,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-blue-700",children:"Daily limit: 3 keys from points conversion"})]})}),c&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-700",children:c})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:N,disabled:!y||u||i<1,className:"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2",children:u?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"Convert"})]})})]})]})]})})}function Ya({user:s,isOpen:l,onClose:t,onSuccess:r}){const[a,n]=o.useState(!1),[i,p]=o.useState(null),[u,m]=o.useState(null);o.useEffect(()=>{l&&s&&c()},[l,s]);const c=async()=>{try{const N=await fetch("/api/users/master-key-status",{credentials:"include"});if(N.ok){const w=await N.json();p(w)}}catch(N){console.error("Failed to fetch master key status:",N)}},x=async()=>{n(!0),m(null);try{const N=await fetch("/api/users/activate-master-key",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({})});if(N.ok)await c(),r();else{const w=await N.json();m(w.error||"Activation failed")}}catch(N){console.error("Master key activation failed:",N),m("Network error occurred")}finally{n(!1)}};if(!l||!s)return null;const h=(N=>{switch(N){case"super":return{name:"Super",required:1,color:"text-yellow-600",bgColor:"bg-yellow-50"};case"premium":return{name:"Premium",required:2,color:"text-purple-600",bgColor:"bg-purple-50"};case"free":default:return{name:"Free",required:5,color:"text-gray-600",bgColor:"bg-gray-50"}}})(s.user_tier),j=i?.is_activated||!1,y=i?i.proof_drops_completed>=i.proof_drops_required:!1;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-lg mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"w-6 h-6 text-purple-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Master Key System"})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${h.bgColor} border border-purple-200 rounded-lg p-4`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:`w-5 h-5 ${h.color}`}),e.jsxs("span",{className:`font-semibold ${h.color}`,children:[h.name," Tier"]})]}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h.color} bg-white`,children:[h.required," proof drop",h.required>1?"s":""," required"]})]}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Complete ",h.required," proof drop",h.required>1?"s":""," daily to activate your Master Key and unlock the ability to apply for paid drops."]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Today's Progress"}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${j?"text-green-600 bg-green-100":"text-orange-600 bg-orange-100"}`,children:j?"Activated":"Not Activated"})]}),i&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Proof Drops Completed"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[i.proof_drops_completed,"/",i.proof_drops_required]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${j?"bg-green-500":"bg-orange-500"}`,style:{width:`${Math.min(100,i.proof_drops_completed/i.proof_drops_required*100)}%`}})}),!j&&i.proof_drops_completed>0&&e.jsxs("p",{className:"text-sm text-gray-600",children:[i.proof_drops_required-i.proof_drops_completed," more proof drop",i.proof_drops_required-i.proof_drops_completed>1?"s":""," needed"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Master Key Benefits"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Apply for paid drops using Keys"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Earn Gems from completed drops"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Access to premium opportunities"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Higher earning potential"})]})]})]}),!j&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ke,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-900",children:"How to Earn Proof Drops"})]}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"• Complete free social actions (likes, comments, shares)"}),e.jsx("li",{children:"• Participate in community challenges"}),e.jsx("li",{children:"• Engage with content daily"}),e.jsx("li",{children:"• Maintain your daily streak"})]})]}),u&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-700",children:u})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Close"}),!j&&e.jsx("button",{onClick:x,disabled:!y||a,className:"flex-1 bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2",children:a?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):y?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-4 h-4"}),e.jsx("span",{children:"Activate"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Xe,{className:"w-4 h-4"}),e.jsx("span",{children:"Complete Proofs"})]})}),j&&e.jsxs("div",{className:"flex-1 bg-green-100 text-green-700 px-4 py-2 rounded-lg font-medium flex items-center justify-center space-x-2",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"Activated"})]})]})]})]})})}function tl({user:s,isOpen:l,onClose:t,onSuccess:r}){const[a,n]=o.useState(1),[i,p]=o.useState(""),[u,m]=o.useState(!1),[c,x]=o.useState(!1),[g,h]=o.useState(null);if(!l||!s)return null;const j=async()=>{if(!i.trim()){h("Please enter your Instagram username");return}m(!0),h(null);try{const d=await fetch("/api/users/register-instagram",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({instagram_username:i})});if(d.ok)n(2);else{const b=await d.json();h(b.error||"Registration failed")}}catch(d){console.error("Instagram registration failed:",d),h("Network error occurred")}finally{m(!1)}},y=async()=>{m(!0),h(null);try{const d=await fetch("/api/users/claim-instagram-points",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({})});if(d.ok)await d.json(),r(),t(),n(1),p("");else{const b=await d.json();h(b.error||"Failed to claim points")}}catch(d){console.error("Point claiming failed:",d),h("Network error occurred")}finally{m(!1)}},N=async d=>{await navigator.clipboard.writeText(d),x(!0),setTimeout(()=>x(!1),2e3)},f=(d=>{switch(d){case"super":return 1e3;case"premium":return 750;case"free":default:return 500}})(s.user_tier);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Us,{className:"w-6 h-6 text-pink-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Instagram Verification"})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),a===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-pink-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Us,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Connect Your Instagram"}),e.jsxs("p",{className:"text-gray-600 text-sm",children:["Verify your Instagram account to earn ",f," PromoPoints monthly"]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 border border-pink-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-pink-900 mb-2",children:"Monthly Benefits"}),e.jsxs("div",{className:"space-y-2 text-sm text-pink-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Your Tier:"}),e.jsx("span",{className:"font-semibold capitalize",children:s.user_tier})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Monthly Points:"}),e.jsxs("span",{className:"font-bold text-pink-600",children:[f," points"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Key Equivalent:"}),e.jsxs("span",{className:"font-medium",children:[Math.floor(f/500)," keys"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instagram Username"}),e.jsx("input",{type:"text",value:i,onChange:d=>p(d.target.value),placeholder:"@yourusername",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent"})]}),g&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-700",children:g})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-lg p-4 mt-6",children:[e.jsxs("h4",{className:"font-medium text-blue-900 mb-2 flex items-center space-x-2",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:"Want Even More Rewards?"})]}),e.jsxs("p",{className:"text-sm text-blue-700 mb-4",children:["Try our new ",e.jsx("strong",{children:"Influence Rewards"})," program! Earn dynamic monthly points based on your actual follower count (followers × 0.01)."]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-blue-600",children:"• 5,000 followers = 50 points/month"}),e.jsx("div",{className:"text-blue-600",children:"• 10,000 followers = 100 points/month"}),e.jsx("div",{className:"text-blue-600",children:"• 50,000 followers = 500 points/month"})]}),e.jsx("button",{onClick:()=>{t(),window.location.href="/profile?openInfluenceRewards=true"},className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",children:"Learn More"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:j,disabled:u||!i.trim(),className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",children:u?"Registering...":"Continue"})]})]}),a===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(te,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Send Verification DM"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Send a DM to @promorangco on Instagram with the word below"})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Message to send:"}),e.jsx("code",{className:"text-lg font-mono bg-white px-3 py-2 rounded border mt-2 block",children:"promopoints"})]}),e.jsx("button",{onClick:()=>N("promopoints"),className:"p-2 bg-gray-200 hover:bg-gray-300 rounded transition-colors",title:"Copy message",children:c?e.jsx(ds,{className:"w-4 h-4 text-green-600"}):e.jsx(qs,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Next Steps:"}),e.jsxs("ol",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"1. Open Instagram and go to @promorangco"}),e.jsxs("li",{children:["2. Send a DM with exactly: ",e.jsx("strong",{children:"promopoints"})]}),e.jsx("li",{children:"3. Wait for verification (usually within 24 hours)"}),e.jsx("li",{children:"4. Return here to claim your monthly points"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:y,disabled:u,className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 disabled:opacity-50 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",children:u?"Checking...":"Claim Points (if verified)"}),e.jsx("button",{onClick:()=>{n(1),p(""),h(null)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Try Different Username"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-4 mt-6",children:[e.jsxs("h4",{className:"font-medium text-purple-900 mb-2 flex items-center space-x-2",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:"Maximize Your Instagram Earning Potential!"})]}),e.jsxs("p",{className:"text-sm text-purple-700 mb-4",children:["While you wait for verification, explore our ",e.jsx("strong",{children:"Influence Rewards"})," program for dynamic monthly points based on your follower count."]}),e.jsx("button",{onClick:()=>{t(),window.location.href="/profile?openInfluenceRewards=true"},className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",children:"Discover Influence Rewards"})]}),g&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-700",children:g})})]})]})})}const st={free:{premium:{points:7500,gems:200},super:{points:15e3,gems:450}},premium:{super:{points:9e3,gems:275}},super:{}};function al({user:s,isOpen:l,onClose:t,onSuccess:r}){const[a,n]=o.useState(st),[i,p]=o.useState(""),[u,m]=o.useState("points"),[c,x]=o.useState(!1),[g,h]=o.useState(null),[j,y]=o.useState(!1);o.useEffect(()=>{l&&w()},[l]);const N=L=>{const M={...st,...L||{}};return Object.fromEntries(Object.entries(M).map(([T,B])=>[T.toLowerCase(),Object.fromEntries(Object.entries(B).map(([k,S])=>[k.toLowerCase(),S]))]))},w=async()=>{try{y(!0);const L=localStorage.getItem("authToken"),M=await fetch("/api/users/upgrade-costs",{credentials:"include",headers:L?{Authorization:`Bearer ${L}`}:void 0});if(!M.ok)throw new Error(`Failed to load upgrade costs: ${M.status}`);const T=await M.json();T&&typeof T=="object"&&!Array.isArray(T)?n(N(T)):n(N(st))}catch(L){console.error("Failed to fetch upgrade costs:",L),n(N(st))}y(!1)};if(!l||!s)return null;const f=(s.user_tier||"free").toLowerCase(),d=a[f]||{},b=Object.keys(d).length>0,F=L=>{switch(L){case"super":return{name:"Super User",icon:Ke,color:"text-yellow-600",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",benefits:["2.0x point multiplier for all actions","1 proof drop required for Master Key","1,000 monthly Instagram points","Priority support","Exclusive events access","Advanced analytics"]};case"premium":return{name:"Premium User",icon:X,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200",benefits:["1.5x point multiplier for all actions","2 proof drops required for Master Key","750 monthly Instagram points","Priority support","Advanced analytics"]};default:return{name:"Free User",icon:ke,color:"text-gray-600",bgColor:"bg-gray-50",borderColor:"border-gray-200",benefits:["1.0x point multiplier","5 proof drops required for Master Key","500 monthly Instagram points","Standard support"]}}},v=async()=>{if(i){x(!0),h(null);try{const L=localStorage.getItem("authToken"),M=await fetch("/api/users/upgrade-tier",{method:"POST",headers:{"Content-Type":"application/json",...L?{Authorization:`Bearer ${L}`}:{}},credentials:"include",body:JSON.stringify({target_tier:i,payment_method:u})});if(M.ok)r(),t(),p("");else{const T=await M.json();h(T.error||"Upgrade failed")}}catch(L){console.error("Upgrade failed:",L),h("Network error occurred")}finally{x(!1)}}},C=(L,M)=>{const T=d[L]?.[M];return T?(M==="points"?s.points_balance:s.gems_balance)>=T:!1},E=F(f);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"w-6 h-6 text-orange-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Upgrade Your Tier"})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Current Tier"}),e.jsx("div",{className:`border-2 ${E.borderColor} ${E.bgColor} rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(E.icon,{className:`w-8 h-8 ${E.color}`}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-lg font-semibold ${E.color}`,children:E.name}),e.jsx("p",{className:"text-sm text-gray-600",children:"Your current membership level"})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Available Upgrades"}),!b&&!j&&e.jsx("div",{className:"border border-dashed border-gray-300 rounded-lg p-6 text-center text-sm text-gray-500",children:"No higher tiers available right now. Check back later for new membership levels."}),j&&e.jsx("div",{className:"border border-gray-200 rounded-lg p-6 text-center text-sm text-gray-500",children:"Loading upgrade options..."}),Object.keys(d).map(L=>{const M=L.toLowerCase(),T=F(M),B=d[L];return e.jsx("div",{className:`border-2 rounded-lg p-6 cursor-pointer transition-all duration-200 ${i===M?`${T.borderColor} ${T.bgColor}`:"border-gray-200 hover:border-gray-300"}`,onClick:()=>p(M),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(T.icon,{className:`w-8 h-8 ${T.color}`}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-lg font-semibold ${i===M?T.color:"text-gray-900"}`,children:T.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Me,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{children:[B.points.toLocaleString()," points"]})]}),e.jsx("span",{className:"text-gray-400",children:"or"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Lt,{className:"w-4 h-4 text-purple-600"}),e.jsxs("span",{children:[B.gems," gems"]})]})]})]})]}),e.jsx("div",{className:"space-y-2",children:T.benefits.map((k,S)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700",children:k})]},S))})]}),i===M&&e.jsx("div",{className:"ml-4",children:e.jsx(is,{className:`w-6 h-6 ${T.color}`})})]})},L)})]}),i&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Choose Payment Method"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>m("points"),disabled:!C(i,"points"),className:`p-4 rounded-lg border-2 transition-colors ${u==="points"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"} ${C(i,"points")?"":"opacity-50 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[e.jsx(Me,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium",children:"Points"})]}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:d[i]?.points.toLocaleString()}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Balance: ",s.points_balance.toLocaleString()]}),!C(i,"points")&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Insufficient balance"})]}),e.jsxs("button",{onClick:()=>m("gems"),disabled:!C(i,"gems"),className:`p-4 rounded-lg border-2 transition-colors ${u==="gems"?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"} ${C(i,"gems")?"":"opacity-50 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[e.jsx(Lt,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-medium",children:"Gems"})]}),e.jsx("p",{className:"text-lg font-bold text-purple-600",children:d[i]?.gems}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Balance: ",s.gems_balance]}),!C(i,"gems")&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Insufficient balance"})]})]})]}),g&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-700",children:g})}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:v,disabled:!i||!C(i,u)||c,className:"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",children:c?"Upgrading...":`Upgrade to ${i?F(i).name:""}`})]})]})})}function rl({isOpen:s,onClose:l}){const[t,r]=o.useState(""),[a,n]=o.useState({content:[],drops:[],users:[]}),[i,p]=o.useState(!1),[u,m]=o.useState("all"),c=[{id:"content-demo-1",title:"Launch Campaign: Social Buzz",description:"Highlight reel from the recent product launch activation.",platform:"instagram",creator_name:"Demo Creator",share_price:12.5},{id:"content-demo-2",title:"Creator Toolkit Walkthrough",description:"Step-by-step guide on monetizing content in 30 days.",platform:"youtube",creator_name:"Creator Collective",share_price:18}],x=[{id:"drop-demo-1",title:"Product Review Blitz",description:"Create authentic reviews for the new premium bundle.",gem_reward_base:120,key_cost:4,status:"active"},{id:"drop-demo-2",title:"Launch Day Engagement Sprint",description:"Boost engagement metrics during launch weekend.",gem_reward_base:95,key_cost:3,status:"active"}],g=[{id:"user-demo-1",username:"demo_creator",display_name:"Demo Creator",user_type:"creator",follower_count:42e3},{id:"user-demo-2",username:"growth_analyst",display_name:"Growth Analyst",user_type:"advertiser",follower_count:12500}],h=d=>{const b=d.toLowerCase(),F=c.filter(E=>E.title.toLowerCase().includes(b)||E.description.toLowerCase().includes(b)),v=x.filter(E=>E.title.toLowerCase().includes(b)),C=g.filter(E=>E.username.toLowerCase().includes(b)||E.display_name.toLowerCase().includes(b));return{content:F,drops:v,users:C}};o.useEffect(()=>{if(t.length>=2){const d=setTimeout(()=>{j()},300);return()=>clearTimeout(d)}else n({content:[],drops:[],users:[]})},[t]);const j=async()=>{if(!(t.trim().length<2)){p(!0);try{const d=await fetch(`/api/search?q=${encodeURIComponent(t)}`,{credentials:"include"});if(d.ok){const b=await d.json();n(b)}else n(h(t))}catch(d){console.error("Search failed:",d),n(h(t))}finally{p(!1)}}},y=()=>{switch(u){case"content":return{content:a.content,drops:[],users:[]};case"drops":return{content:[],drops:a.drops,users:[]};case"users":return{content:[],drops:[],users:a.users};default:return a}},N=()=>(a.content?.length||0)+(a.drops?.length||0)+(a.users?.length||0);if(!s)return null;const w=y(),f=N();return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center pt-20 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl mx-4 max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Search Promorang"}),e.jsx("button",{onClick:l,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search for content, drops, users...",value:t,onChange:d=>r(d.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-lg",autoFocus:!0}),i&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-orange-500 border-t-transparent rounded-full"})})]})}),t.length>=2&&f>0&&e.jsx("div",{className:"px-6 py-3 border-b border-gray-200",children:e.jsx("div",{className:"flex space-x-4",children:[{id:"all",label:"All",count:f},{id:"content",label:"Content",count:a.content?.length||0},{id:"drops",label:"Drops",count:a.drops?.length||0},{id:"users",label:"Users",count:a.users?.length||0}].map(d=>e.jsxs("button",{onClick:()=>m(d.id),className:`px-3 py-2 rounded-lg text-sm font-medium flex items-center space-x-2 ${u===d.id?"bg-orange-100 text-orange-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx("span",{children:d.label}),e.jsx("span",{className:"bg-gray-200 text-gray-600 px-2 py-1 rounded-full text-xs",children:d.count})]},d.id))})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:t.length<2?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ks,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Search Promorang"}),e.jsx("p",{className:"text-gray-600",children:"Find content, drops, and users across the platform"})]}):f===0&&!i?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ks,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No results found"}),e.jsx("p",{className:"text-gray-600",children:"Try different keywords or browse categories"})]}):e.jsxs("div",{className:"p-6 space-y-6",children:[w.content?.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ys,{className:"w-5 h-5 mr-2 text-orange-600"}),"Content (",w.content.length,")"]}),e.jsx("div",{className:"space-y-3",children:w.content.map(d=>e.jsxs(he,{to:`/content/${d.id}`,onClick:l,className:"flex items-center space-x-4 p-4 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(X,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:d.title}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:d.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500 capitalize",children:d.platform}),e.jsxs("span",{className:"text-xs text-gray-500",children:["by ",d.creator_name]}),e.jsxs("span",{className:"text-xs font-medium text-green-600",children:["$",d.share_price,"/share"]})]})]})]},d.id))})]}),w.drops?.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ke,{className:"w-5 h-5 mr-2 text-purple-600"}),"Drops (",w.drops.length,")"]}),e.jsx("div",{className:"space-y-3",children:w.drops.map(d=>e.jsxs(he,{to:"/earn",onClick:l,className:"flex items-center space-x-4 p-4 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(oe,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:d.title}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:d.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500 capitalize",children:(d.drop_type||"engagement").replace("_"," ")}),e.jsxs("span",{className:"text-xs text-gray-500",children:["by ",d.creator_name||"Promorang Team"]}),e.jsxs("span",{className:"text-xs font-medium text-purple-600",children:[d.gem_reward_base??0," gems"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[d.current_participants??0," participants"]})]})]})]},d.id))})]}),w.users?.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(pe,{className:"w-5 h-5 mr-2 text-blue-600"}),"Users (",w.users.length,")"]}),e.jsx("div",{className:"space-y-3",children:w.users.map(d=>e.jsxs(he,{to:`/users/${d.username||d.id}`,onClick:l,className:"flex items-center space-x-4 p-4 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden",children:e.jsx("img",{src:d.avatar_url||"/default-avatar.png",alt:d.display_name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:d.display_name||"Anonymous User"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["@",d.username||"user"]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Level ",d.level]}),e.jsxs("span",{className:"text-xs text-gray-500 capitalize",children:[d.user_tier," tier"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[d.follower_count," followers"]})]})]})]},d.id))})]})]})})]})})}function Ja({user:s,isOpen:l,onClose:t,onPurchase:r}){const[a,n]=o.useState(!1),[i,p]=o.useState("upgrades"),[u,m]=o.useState([]);o.useEffect(()=>{l&&s&&c()},[l,s]);const c=async()=>{try{const d=await fetch("/api/users/gold-purchases",{credentials:"include"});if(d.ok){const b=await d.json();m(b)}}catch(d){console.error("Failed to fetch gold purchases:",d)}},x=async d=>{if(!(!s||s.gold_collected<d.gold_cost)){n(!0);try{const b=await fetch("/api/users/gold-purchase",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({item_type:d.category,item_name:d.name,gold_cost:d.gold_cost,effect_data:JSON.stringify(d.effect_data)})});if(b.ok)r(),c(),g(d.name);else{const F=await b.json();alert(F.error||"Purchase failed")}}catch(b){console.error("Purchase failed:",b),alert("Purchase failed")}finally{n(!1)}}},g=d=>{const b=document.createElement("div");b.className="fixed top-4 right-4 bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 animate-pulse",b.innerHTML=`
      <div class="flex items-center space-x-3">
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
          <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <div>
          <div class="font-bold">Purchase Successful!</div>
          <div class="text-sm">${d} activated</div>
        </div>
      </div>
    `,document.body.appendChild(b),setTimeout(()=>{document.body.contains(b)&&document.body.removeChild(b)},3e3)},h=d=>{const F={crown:Ke,zap:ke,star:X,shield:Pe,award:os}[d]||X;return e.jsx(F,{className:"w-6 h-6"})},j=[{id:"premium_upgrade",name:"Premium Tier Upgrade",description:"Upgrade to Premium tier with 1.5x points multiplier and exclusive perks",icon:"crown",category:"upgrades",gold_cost:500,effect_data:{tier:"premium"}},{id:"super_upgrade",name:"Super Tier Upgrade",description:"Upgrade to Super tier with 2x points multiplier and maximum benefits",icon:"crown",category:"upgrades",gold_cost:1e3,effect_data:{tier:"super"}},{id:"key_multiplier_24h",name:"24h Key Multiplier",description:"Double key earnings from all actions for 24 hours",icon:"zap",category:"multipliers",gold_cost:200,duration:"24 hours",effect_data:{multiplier:2,duration_hours:24,type:"key_earnings"}},{id:"xp_boost_7d",name:"7-Day XP Boost",description:"Triple XP gains from all activities for 7 days",icon:"star",category:"multipliers",gold_cost:300,duration:"7 days",effect_data:{multiplier:3,duration_hours:168,type:"xp_earnings"}},{id:"golden_badge",name:"Golden Badge",description:"Display a prestigious golden badge on your profile",icon:"award",category:"profile",gold_cost:150,effect_data:{badge_type:"golden",permanent:!0}},{id:"profile_boost",name:"Profile Boost",description:"Enhanced visibility in leaderboards and search for 30 days",icon:"shield",category:"profile",gold_cost:250,duration:"30 days",effect_data:{boost_type:"visibility",duration_hours:720}}],y=[{id:"upgrades",name:"Tier Upgrades",icon:Ke},{id:"multipliers",name:"Boosts",icon:ke},{id:"profile",name:"Profile",icon:os}],N=j.filter(d=>d.category===i),w=d=>u.some(b=>b.item_name===d.name&&(!b.expires_at||new Date(b.expires_at)>new Date)),f=d=>s&&s.gold_collected>=d.gold_cost;return l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-amber-500 p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ke,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Gold Shop"}),e.jsx("p",{className:"text-yellow-100",children:"Spend your gold on exclusive upgrades and boosts"})]})]}),e.jsx("button",{onClick:t,className:"text-white hover:text-yellow-200 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"mt-4 bg-white/20 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-yellow-100",children:"Your Gold Balance"}),e.jsx("span",{className:"text-2xl font-bold",children:s?.gold_collected||0})]})})]}),e.jsx("div",{className:"border-b border-gray-200 px-6",children:e.jsx("div",{className:"flex space-x-8 py-4",children:y.map(d=>{const b=d.icon;return e.jsxs("button",{onClick:()=>p(d.id),className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium text-sm transition-colors ${i===d.id?"bg-yellow-100 text-yellow-700":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{children:d.name})]},d.id)})})}),e.jsx("div",{className:"p-6 max-h-96 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N.map(d=>{const b=w(d),F=f(d);return e.jsx("div",{className:`p-6 rounded-2xl border transition-all duration-200 ${b?"border-green-200 bg-green-50":F?"border-gray-200 bg-white hover:shadow-md":"border-gray-200 bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${b?"bg-green-100 text-green-600":"bg-gradient-to-r from-yellow-500 to-amber-500 text-white"}`,children:b?e.jsx(ds,{className:"w-6 h-6"}):h(d.icon)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:d.name}),d.duration&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:d.duration})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:d.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ke,{className:"w-4 h-4 text-yellow-600"}),e.jsxs("span",{className:"font-semibold text-yellow-700",children:[d.gold_cost," Gold"]})]}),e.jsx("button",{onClick:()=>x(d),disabled:a||b||!F,className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${b?"bg-green-100 text-green-700 cursor-not-allowed":F?"bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-600 hover:to-amber-600 text-white":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:a?"Processing...":b?"Owned":F?"Purchase":"Not Enough Gold"})]})]})]})},d.id)})})})]})}):null}function Qt({user:s,isOpen:l,onClose:t}){const[r,a]=o.useState([]),[n,i]=o.useState(!0),[p,u]=o.useState("all");o.useEffect(()=>{l&&s&&m()},[l,s]);const m=async()=>{try{const d=await fetch("/api/users/achievements",{credentials:"include"});if(d.ok){const b=await d.json();a(Array.isArray(b)?b:[])}else console.log("Achievements API not available, using mock data"),a(c())}catch(d){console.error("Failed to fetch achievements:",d),a(c())}finally{i(!1)}},c=()=>[{id:1,name:"First Steps",description:"Complete your first drop application",icon:"star",category:"progression",criteria_type:"count",criteria_value:1,criteria_field:"applications",gold_reward:5,xp_reward:100,is_completed:!1,progress:0},{id:2,name:"Content Creator",description:"Share your first piece of content",icon:"file-text",category:"creation",criteria_type:"count",criteria_value:1,criteria_field:"content_pieces",gold_reward:10,xp_reward:200,is_completed:!1,progress:0},{id:3,name:"Social Butterfly",description:"Reach 100 followers",icon:"users",category:"social",criteria_type:"count",criteria_value:100,criteria_field:"followers",gold_reward:25,xp_reward:500,is_completed:!1,progress:s?.follower_count||0},{id:4,name:"Level Up",description:"Reach level 5",icon:"arrow-up",category:"progression",criteria_type:"level",criteria_value:5,criteria_field:"level",gold_reward:15,xp_reward:300,is_completed:(s?.level||0)>=5,progress:s?.level||0},{id:5,name:"Big Spender",description:"Earn 1000 points",icon:"coins",category:"earning",criteria_type:"count",criteria_value:1e3,criteria_field:"points",gold_reward:20,xp_reward:400,is_completed:(s?.points_balance||0)>=1e3,progress:s?.points_balance||0},{id:6,name:"Master Creator",description:"Create 5 pieces of content",icon:"crown",category:"creation",criteria_type:"count",criteria_value:5,criteria_field:"content_pieces",gold_reward:50,xp_reward:1e3,is_completed:!1,progress:0}],x=async d=>{try{const b=await fetch(`/api/users/achievements/${d}/claim`,{method:"POST",credentials:"include"});if(b.ok){const F=await b.json();g(F.gold_reward,F.xp_reward),m()}}catch(b){console.error("Failed to claim achievement:",b)}},g=(d,b)=>{const F=document.createElement("div");F.className="fixed top-4 right-4 bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 animate-pulse",F.innerHTML=`
      <div class="flex items-center space-x-3">
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
        </svg>
        <div>
          <div class="font-bold">Achievement Unlocked!</div>
          <div class="text-sm">+${d} Gold, +${b} XP</div>
        </div>
      </div>
    `,document.body.appendChild(F),setTimeout(()=>{document.body.contains(F)&&document.body.removeChild(F)},4e3)},h=d=>{const F={star:X,"file-text":os,zap:_e,heart:X,calendar:os,crown:_e,trophy:_e,"arrow-up":X,coins:os,users:X}[d]||X;return e.jsx(F,{className:"w-6 h-6"})},j=d=>({engagement:"from-blue-500 to-cyan-500",creation:"from-purple-500 to-pink-500",earning:"from-green-500 to-emerald-500",progression:"from-orange-500 to-red-500",currency:"from-yellow-500 to-amber-500",social:"from-indigo-500 to-purple-500"})[d]||"from-gray-500 to-slate-500",y=r&&r.length>0?["all",...new Set(r.map(d=>d.category))]:["all"],N=r&&r.length>0?p==="all"?r:r.filter(d=>d.category===p):[],w=r&&r.length>0?r.filter(d=>d.is_completed).length:0,f=r&&r.length>0?r.filter(d=>d.is_completed).reduce((d,b)=>d+b.gold_reward,0):0;return l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(_e,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Achievements"}),e.jsx("p",{className:"text-yellow-100",children:"Track your progress and earn rewards"})]})]}),e.jsx("button",{onClick:t,className:"text-white hover:text-yellow-200 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:w}),e.jsx("div",{className:"text-yellow-100 text-sm",children:"Completed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:r?.length||0}),e.jsx("div",{className:"text-yellow-100 text-sm",children:"Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:f}),e.jsx("div",{className:"text-yellow-100 text-sm",children:"Gold Earned"})]})]})]}),e.jsx("div",{className:"border-b border-gray-200 px-6",children:e.jsx("div",{className:"flex space-x-8 overflow-x-auto py-4",children:y.map(d=>e.jsx("button",{onClick:()=>u(d),className:`px-4 py-2 rounded-lg font-medium text-sm whitespace-nowrap transition-colors ${p===d?"bg-orange-100 text-orange-700":"text-gray-600 hover:text-gray-900"}`,children:d.charAt(0).toUpperCase()+d.slice(1)},d))})}),e.jsx("div",{className:"p-6 max-h-96 overflow-y-auto",children:n?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N&&N.length>0?N.map(d=>e.jsxs("div",{className:`relative p-6 rounded-2xl border transition-all duration-200 ${d.is_completed?"border-green-200 bg-green-50":"border-gray-200 bg-white hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center bg-gradient-to-r ${j(d.category)} text-white`,children:h(d.icon)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:d.name}),d.is_completed&&e.jsx(te,{className:"w-5 h-5 text-green-600"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:d.description}),!d.is_completed&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[d.progress,"/",d.criteria_value]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full bg-gradient-to-r ${j(d.category)}`,style:{width:`${Math.min(100,d.progress/d.criteria_value*100)}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[d.gold_reward>0&&e.jsxs("div",{className:"flex items-center space-x-1 text-yellow-600",children:[e.jsx(Cs,{className:"w-4 h-4"}),e.jsxs("span",{children:[d.gold_reward," Gold"]})]}),d.xp_reward>0&&e.jsxs("div",{className:"flex items-center space-x-1 text-blue-600",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsxs("span",{children:[d.xp_reward," XP"]})]})]}),d.progress>=d.criteria_value&&!d.is_completed&&e.jsx("button",{onClick:()=>x(d.id),className:"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200",children:"Claim"})]})]})]}),d.progress<d.criteria_value&&!d.is_completed&&e.jsx("div",{className:"absolute inset-0 bg-gray-100 bg-opacity-50 rounded-2xl flex items-center justify-center",children:e.jsx(js,{className:"w-8 h-8 text-gray-400"})})]},d.id)):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(_e,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Achievements Yet"}),e.jsx("p",{className:"text-gray-600",children:"Complete tasks and reach milestones to unlock achievements!"})]})})})]})}):null}function ll(){const{user:s}=Ue(),[l,t]=o.useState(0);o.useEffect(()=>{if(s){const n=localStorage.getItem(`notifications_unread_${s.id}`);t(n?parseInt(n):0)}},[s]);const r=o.useCallback(n=>{if(!s)return;const i=l+1;t(i),localStorage.setItem(`notifications_unread_${s.id}`,i.toString()),a(n.message,"info"),console.log("New notification:",n)},[s,l]),a=o.useCallback((n,i="info")=>{const p=document.createElement("div");p.className="fixed top-20 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm transform transition-all duration-300 translate-x-full";const u={success:"bg-green-500 text-white",error:"bg-red-500 text-white",warning:"bg-yellow-500 text-white",info:"bg-blue-500 text-white"};p.className+=` ${u[i]}`,p.textContent=n,document.body.appendChild(p),setTimeout(()=>{p.style.transform="translateX(0)"},100),setTimeout(()=>{p.style.transform="translateX(100%)",setTimeout(()=>{document.body.contains(p)&&document.body.removeChild(p)},300)},3e3)},[]);return{unreadCount:l,addNotification:r,showToast:a}}const ue=(s={})=>{if(typeof window>"u")return{...s};const l=localStorage.getItem("authToken");return l?{...s,Authorization:`Bearer ${l}`}:{...s}},ct=s=>{if(!s)return cs;if(/^https?:\/\//i.test(s))return s;const l=cs||"",t=s.startsWith("/")?s:`/${s}`;return`${l}${t}`},ns=(s,l)=>fetch(ct(s),l);if(typeof window<"u"&&!window.__PROMORANG_FETCH_PATCHED__){const s=window.fetch.bind(window);window.__PROMORANG_FETCH_PATCHED__=!0,window.fetch=(l,t)=>{if(typeof l=="string")return l.startsWith("/api")?s(ct(l),t):s(l,t);if(l instanceof Request){const r=new URL(l.url,window.location.origin);if(r.origin===window.location.origin&&r.pathname.startsWith("/api")){const a=new Request(ct(r.pathname+r.search),l);return s(a,t)}return s(l,t)}if(l instanceof URL){if(l.origin===window.location.origin&&l.pathname.startsWith("/api")){const r=new URL(ct(l.pathname+l.search));return s(r,t)}return s(l,t)}return s(l,t)}}function Oe({children:s}){const{user:l,logout:t}=Ue(),r=ws(),a=Ce(),[n,i]=o.useState(null),[p,u]=o.useState(!1),[m,c]=o.useState(!1),[x,g]=o.useState(!1),[h,j]=o.useState(!1),[y,N]=o.useState(!1),[w,f]=o.useState(!1),[d,b]=o.useState(!1),[F,v]=o.useState(!1),[C,E]=o.useState(!1),[L,M]=o.useState(!1),[T,B]=o.useState(!1),{unreadCount:k}=ll(),S=cs||"",$=W=>`${S}${W}`;o.useEffect(()=>{l&&z()},[l]),o.useEffect(()=>{const W=P=>{(P.metaKey||P.ctrlKey)&&P.key==="k"&&(P.preventDefault(),N(!0)),P.key==="Escape"&&(f(!1),b(!1),v(!1),E(!1))};return document.addEventListener("keydown",W),()=>document.removeEventListener("keydown",W)},[]),o.useEffect(()=>{const W=P=>{const Y=P.target;!Y.closest(".user-menu")&&!Y.closest(".wallet-menu")&&(f(!1),b(!1))};return document.addEventListener("click",W),()=>document.removeEventListener("click",W)},[]);const z=async()=>{try{const W=ue(),P=await fetch($("/api/users/me"),{credentials:"include",headers:W});if(P.ok){const Y=await P.json();Y&&typeof Y=="object"&&i(Y)}}catch(W){console.error("Failed to fetch user data:",W)}},G=(()=>{const W=[{name:"Home",href:"/dashboard",icon:xt},{name:"Earn",href:"/earn",icon:oe},{name:"Create",href:"/create",icon:Re},{name:"Invest",href:"/invest",icon:re},{name:"Growth Hub",href:"/growth-hub",icon:ls}];return n&&n.user_type==="advertiser"&&W.push({name:"Dashboard",href:"/advertiser",icon:qt}),W})(),q=W=>r.pathname===W||r.pathname.startsWith(W+"/"),ae=()=>n?(n.points_balance||0)+(n.keys_balance||0)+(n.gems_balance||0)+(n.gold_collected||0):0,de=n?.username||(n?.email?n.email.split("@")[0]:void 0)||(l?.username?String(l.username):void 0)||(l?.email?l.email.split("@")[0]:void 0)||"me",A=`/profile/${encodeURIComponent(de)}`,D=W=>{switch(b(!1),W){case"instagram":g(!0);break;case"masterkey":c(!0);break;case"convert":u(!0);break;case"leaderboard":a("/leaderboard");break;case"growthhub":a("/growth-hub");break;case"wallet":a("/wallet");break;case"goldshop":M(!0);break;case"achievements":B(!0);break}},H=async()=>{try{await t(),localStorage.clear(),sessionStorage.clear();try{await fetch($("/api/auth/logout"),{method:"POST",credentials:"include"})}catch(W){console.error("Backend logout failed:",W)}a("/",{replace:!0})}catch(W){console.error("Logout failed:",W);try{localStorage.clear(),sessionStorage.clear()}catch(P){console.error("Failed to clear storage:",P)}a("/",{replace:!0})}},J=W=>{switch(f(!1),W){case"profile":a(A);break;case"upgrade":j(!0);break;case"advertiser":!n||n.user_type!=="advertiser"?a("/advertiser/onboarding"):a("/advertiser");break;case"logout":H();break}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(he,{to:"/dashboard",className:"flex items-center space-x-3 group",children:e.jsx("img",{src:"https://mocha-cdn.com/0198f6f0-5737-78cb-955a-4b0907aa1065/Promorang_logo_FULL-02.png",alt:"Promorang",className:"h-10 w-10 transition-transform group-hover:scale-105"})})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fe,{content:"Search (⌘K)",position:"bottom",compact:!0,children:e.jsxs("button",{onClick:()=>N(!0),className:"hidden md:flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:[e.jsx(ks,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Search..."}),e.jsx("kbd",{className:"hidden lg:inline-flex items-center px-2 py-1 text-xs font-medium text-gray-500 bg-white border border-gray-300 rounded",children:"⌘K"})]})}),e.jsx(fe,{content:"Notifications",position:"bottom",compact:!0,children:e.jsxs("button",{onClick:()=>E(!0),className:"hidden md:flex relative p-2 text-gray-400 hover:text-gray-600 transition-colors rounded-lg hover:bg-gray-100",children:[e.jsx(Ys,{className:"w-5 h-5"}),k>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center",children:k>9?"9+":k})]})}),(l||n)&&e.jsxs("div",{className:"relative wallet-menu hidden md:block",children:[e.jsx(fe,{content:"Your wallet balance",position:"bottom",compact:!0,children:e.jsxs("button",{onClick:()=>b(!d),className:"flex items-center space-x-2 px-3 py-2 bg-gradient-to-r from-blue-50 to-purple-50 hover:from-blue-100 hover:to-purple-100 rounded-lg transition-all duration-200 border border-blue-200/50 shadow-sm hover:shadow-md",children:[e.jsx(Os,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"hidden sm:inline text-sm font-semibold text-blue-900 min-w-0",children:ae().toLocaleString()}),e.jsx(ra,{className:`w-4 h-4 text-blue-600 transition-transform ${d?"rotate-180":""}`})]})}),d&&e.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[e.jsx("div",{className:"px-4 py-2 border-b border-gray-100",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Your Balances"})}),e.jsxs("div",{className:"py-2",children:[e.jsx(fe,{content:"Earn points from engagement",position:"left",children:e.jsxs("button",{onClick:()=>D("instagram"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Me,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Points"})]}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:n?.points_balance||0})]})}),e.jsx(fe,{content:"Unlock premium features",position:"left",children:e.jsxs("button",{onClick:()=>D("masterkey"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ye,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Keys"})]}),e.jsx("span",{className:"text-sm font-medium text-orange-900",children:n?.keys_balance||0})]})}),e.jsx(fe,{content:"Premium currency from drops",position:"left",children:e.jsxs("button",{onClick:()=>D("convert"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(X,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Gems"})]}),e.jsx("span",{className:"text-sm font-medium text-purple-900",children:n?.gems_balance||0})]})}),(n?.gold_collected||0)>0&&e.jsx(fe,{content:"Achievement rewards",position:"left",children:e.jsxs("button",{onClick:()=>D("goldshop"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(_e,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Gold"})]}),e.jsx("span",{className:"text-sm font-medium text-yellow-900",children:n?.gold_collected||0})]})})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-2",children:[e.jsx(fe,{content:"Full wallet management",position:"left",compact:!0,children:e.jsxs("button",{onClick:()=>D("wallet"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3",children:[e.jsx(Os,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"View Full Wallet"})]})}),e.jsx(fe,{content:"Put your gems to work",position:"left",compact:!0,children:e.jsxs("button",{onClick:()=>D("growthhub"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3",children:[e.jsx(ls,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Explore Growth Hub"})]})}),e.jsx(fe,{content:"View rankings",position:"left",compact:!0,children:e.jsxs("button",{onClick:()=>D("leaderboard"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3",children:[e.jsx(_e,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"View Rankings"})]})})]})]})]}),e.jsxs("div",{className:"relative user-menu hidden md:block",children:[e.jsxs("button",{onClick:()=>f(!w),className:"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-all duration-200 group",children:[e.jsx(Gs,{username:n?.username||l?.email?.split("@")[0],displayName:n?.display_name||l?.google_user_data?.name||l?.google_user_data?.given_name,avatarUrl:n?.avatar_url||l?.google_user_data?.picture,className:"flex items-center space-x-2",size:"sm"}),e.jsxs("div",{className:"hidden lg:block text-left ml-2",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate max-w-32",children:l?.google_user_data?.given_name||l?.google_user_data?.name||l?.email?.split("@")[0]||"User"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[(n?.user_tier||"free")==="super"&&e.jsx(Ke,{className:"w-3 h-3 text-yellow-600"}),(n?.user_tier||"free")==="premium"&&e.jsx(X,{className:"w-3 h-3 text-purple-600"}),(n?.user_tier||"free")==="free"&&e.jsx(X,{className:"w-3 h-3 text-gray-600"}),e.jsx("span",{className:`text-xs font-medium ${(n?.user_tier||"free")==="super"?"text-yellow-700":(n?.user_tier||"free")==="premium"?"text-purple-700":"text-gray-700"}`,children:(n?.user_tier||"free").charAt(0).toUpperCase()+(n?.user_tier||"free").slice(1)})]})]}),e.jsx(ra,{className:`w-4 h-4 text-gray-400 transition-transform group-hover:text-gray-600 ${w?"rotate-180":""}`})]}),w&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:n?.display_name||l?.google_user_data?.name||l?.google_user_data?.given_name||l?.email?.split("@")[0]||"User"}),e.jsx("div",{className:"text-xs text-gray-500",children:l?.email})]}),e.jsxs("div",{className:"py-2",children:[e.jsxs("button",{onClick:()=>J("profile"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3",children:[e.jsx(Le,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Profile"})]}),n&&e.jsx(fe,{content:"Upgrade to Premium or Super tier for better rewards",position:"left",children:e.jsxs("button",{onClick:()=>J("upgrade"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3",children:[e.jsx(Ke,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Upgrade Tier"})]})}),e.jsx(fe,{content:"Create and manage marketing drops for your business",position:"left",children:e.jsxs("button",{onClick:()=>J("advertiser"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3",children:[e.jsx(Vs,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:!n||n.user_type!=="advertiser"?"Become Advertiser":"Advertiser Dashboard"})]})})]}),e.jsx("div",{className:"border-t border-gray-100 pt-2",children:e.jsxs("button",{onClick:()=>J("logout"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3 text-red-600",children:[e.jsx(Ot,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Sign Out"})]})})]})]})]})]})})}),F&&e.jsx("div",{className:"lg:hidden fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>v(!1),children:e.jsxs("div",{className:"fixed inset-y-0 right-0 w-80 bg-white shadow-xl overflow-y-auto",onClick:W=>W.stopPropagation(),children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gradient-to-r from-orange-50 to-red-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Menu"}),e.jsx("button",{onClick:()=>v(!1),className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(se,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Gs,{username:n?.username||l?.email?.split("@")[0],displayName:n?.display_name||l?.google_user_data?.name||l?.google_user_data?.given_name||"User",avatarUrl:n?.avatar_url||l?.google_user_data?.picture,className:"flex items-center space-x-3",size:"md"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:n?.display_name||l?.google_user_data?.name||l?.google_user_data?.given_name||l?.email?.split("@")[0]||"User"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[(n?.user_tier||"free")==="super"&&e.jsx(Ke,{className:"w-3 h-3 text-yellow-600"}),(n?.user_tier||"free")==="premium"&&e.jsx(X,{className:"w-3 h-3 text-purple-600"}),(n?.user_tier||"free")==="free"&&e.jsx(X,{className:"w-3 h-3 text-gray-600"}),e.jsxs("span",{className:`text-xs font-medium ${(n?.user_tier||"free")==="super"?"text-yellow-700":(n?.user_tier||"free")==="premium"?"text-purple-700":"text-gray-700"}`,children:[(n?.user_tier||"free").charAt(0).toUpperCase()+(n?.user_tier||"free").slice(1)," Tier"]})]})]})]})]}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:"Quick Actions"}),e.jsxs("button",{onClick:()=>{N(!0),v(!1)},className:"w-full flex items-center space-x-3 px-3 py-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(ks,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"font-medium",children:"Search"})]}),e.jsxs("button",{onClick:()=>{E(!0),v(!1)},className:"w-full flex items-center justify-between px-3 py-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ys,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"font-medium",children:"Notifications"})]}),k>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:k>9?"9+":k})]})]}),(l||n)&&e.jsxs("div",{className:"px-4 pb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:"Wallet"}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-3 mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Balance"}),e.jsx("span",{className:"text-lg font-bold text-blue-900",children:ae().toLocaleString()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Me,{className:"w-3 h-3 text-blue-600"}),e.jsxs("span",{children:[(n?.points_balance||0).toLocaleString()," pts"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ye,{className:"w-3 h-3 text-orange-600"}),e.jsxs("span",{children:[n?.keys_balance||0," keys"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(X,{className:"w-3 h-3 text-purple-600"}),e.jsxs("span",{children:[n?.gems_balance||0," gems"]})]}),(n?.gold_collected||0)>0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(_e,{className:"w-3 h-3 text-yellow-600"}),e.jsxs("span",{children:[n?.gold_collected||0," gold"]})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("button",{onClick:()=>{D("wallet"),v(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(Os,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm",children:"Full Wallet"})]}),e.jsxs("button",{onClick:()=>{D("convert"),v(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(X,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm",children:"Convert Currency"})]}),e.jsxs("button",{onClick:()=>{D("masterkey"),v(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(Ye,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"text-sm",children:"Master Key"})]})]})]}),e.jsxs("div",{className:"px-4 pb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:"Account"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("button",{onClick:()=>{J("profile"),v(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(Le,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm",children:"Profile"})]}),(l||n)&&e.jsxs("button",{onClick:()=>{J("upgrade"),v(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(Ke,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm",children:"Upgrade Tier"})]}),e.jsxs("button",{onClick:()=>{D("achievements"),v(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(_e,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-sm",children:"Achievements"})]}),e.jsxs("button",{onClick:()=>{D("leaderboard"),v(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(_e,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm",children:"Leaderboard"})]}),e.jsxs("button",{onClick:()=>{D("instagram"),v(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(X,{className:"w-4 h-4 text-pink-600"}),e.jsx("span",{className:"text-sm",children:"Instagram Rewards"})]})]})]}),e.jsxs("div",{className:"px-4 pb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:"Business"}),e.jsxs("button",{onClick:()=>{J("advertiser"),v(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(Vs,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"text-sm",children:!n||n.user_type!=="advertiser"?"Become Advertiser":"Advertiser Dashboard"})]})]}),e.jsx("div",{className:"px-4 pb-6 border-t border-gray-200 pt-4",children:e.jsxs("button",{onClick:()=>{J("logout"),v(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(Ot,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})})]})}),e.jsx("nav",{className:"hidden lg:block bg-white border-b border-gray-200 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex space-x-8",children:G.map(W=>{const P=W.icon;return e.jsxs(he,{to:W.href,className:`flex items-center space-x-2 px-3 py-4 text-sm font-medium border-b-2 transition-colors ${q(W.href)?"border-orange-500 text-orange-600":"border-transparent text-gray-700 hover:text-gray-900 hover:border-gray-300"}`,children:[e.jsx(P,{className:"w-5 h-5"}),e.jsx("span",{children:W.name})]},W.name)})})})}),e.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-30",children:e.jsxs("div",{className:"flex",children:[e.jsxs(he,{to:"/home",className:`flex-1 flex flex-col items-center justify-center py-3 px-1 transition-colors ${q("/dashboard")?"text-orange-600":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx(xt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs mt-1 font-medium leading-tight",children:"Home"})]}),e.jsxs(he,{to:"/earn",className:`flex-1 flex flex-col items-center justify-center py-3 px-1 transition-colors ${q("/earn")?"text-orange-600":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx(oe,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs mt-1 font-medium leading-tight",children:"Earn"})]}),e.jsxs(he,{to:"/create",className:`flex-1 flex flex-col items-center justify-center py-3 px-1 transition-colors ${q("/create")?"text-orange-600":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx(Re,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs mt-1 font-medium leading-tight",children:"Create"})]}),e.jsxs(he,{to:"/invest",className:`flex-1 flex flex-col items-center justify-center py-3 px-1 transition-colors ${q("/invest")?"text-orange-600":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx(re,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs mt-1 font-medium leading-tight",children:"Invest"})]}),e.jsxs("button",{onClick:()=>v(!F),className:`flex-1 flex flex-col items-center justify-center py-3 px-1 transition-colors ${F?"text-orange-600":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx(pr,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs mt-1 font-medium leading-tight",children:"More"})]})]})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-20 lg:pb-8",children:s}),e.jsx(Ka,{user:n,isOpen:p,onClose:()=>u(!1),onSuccess:z}),e.jsx(Ya,{user:n,isOpen:m,onClose:()=>c(!1),onSuccess:z}),e.jsx(tl,{user:n,isOpen:x,onClose:()=>g(!1),onSuccess:z}),e.jsx(al,{user:n,isOpen:h,onClose:()=>j(!1),onSuccess:z}),e.jsx(rl,{isOpen:y,onClose:()=>N(!1)}),e.jsx(sl,{isOpen:C,onClose:()=>E(!1)}),e.jsx(Ja,{user:n,isOpen:L,onClose:()=>M(!1),onPurchase:z}),e.jsx(Qt,{user:n,isOpen:T,onClose:()=>B(!1)})]})}let nl=class extends o.Component{state={hasError:!1};static getDerivedStateFromError(l){return{hasError:!0,error:l}}componentDidCatch(l,t){console.error("🔥 Error caught by boundary:",l),console.error("📍 Error location:",t),console.error("🏷️ Component stack:",t.componentStack),this.setState({error:l,errorInfo:t})}handleRefresh=()=>{window.location.reload()};handleGoHome=()=>{window.location.href="/dashboard"};render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ns,{className:"w-8 h-8 text-red-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Our team has been notified and is working on a fix."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:this.handleRefresh,className:"w-full bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[e.jsx(Ws,{className:"w-4 h-4"}),e.jsx("span",{children:"Try Again"})]}),e.jsxs("button",{onClick:this.handleGoHome,className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[e.jsx(xt,{className:"w-4 h-4"}),e.jsx("span",{children:"Go Home"})]})]}),!1]})}):this.props.children}};function oa(s,l=null,t=!0){const[r,a]=o.useState(l),[n,i]=o.useState(!1),[p,u]=o.useState(null),m=o.useCallback(async()=>{try{i(!0),u(null);const c=await s();return a(c),c}catch(c){const x=c instanceof Error?c:new Error("An unknown error occurred");throw u(x),x}finally{i(!1)}},[s]);return o.useEffect(()=>{t&&m().catch(()=>{})},[m,t]),{data:r,loading:n,error:p,execute:m,setData:a}}const ca="inline-flex items-center justify-center font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-orange-500 disabled:opacity-50 disabled:pointer-events-none",da={primary:"bg-orange-600 text-white hover:bg-orange-700 active:bg-orange-800",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 active:bg-gray-300",outline:"border border-gray-300 bg-transparent hover:bg-gray-50 active:bg-gray-100",ghost:"hover:bg-gray-100 active:bg-gray-200",link:"text-orange-600 hover:underline underline-offset-4 p-0 h-auto",destructive:"bg-red-600 text-white hover:bg-red-700 active:bg-red-800"},ma={sm:"h-8 px-3 text-sm rounded-lg",md:"h-10 px-4 py-2 text-base rounded-xl",lg:"h-12 px-6 text-lg rounded-xl"},Ct={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"},Va=o.forwardRef(({className:s="",type:l="button",variant:t="primary",size:r="md",isLoading:a=!1,loadingText:n,leftIcon:i,rightIcon:p,children:u,disabled:m,asChild:c=!1,...x},g)=>{if(c&&o.isValidElement(u))return o.cloneElement(u,{ref:g,className:`${ca} ${da[t]} ${ma[r]} ${s} ${u.props.className||""}`.trim(),disabled:m||a,...x});const h=a&&n!==void 0?n:u,j=[ca,da[t],ma[r],s,a||m?"cursor-not-allowed":"cursor-pointer"].filter(Boolean).join(" ");return e.jsxs("button",{ref:g,type:l,className:j,disabled:m||a,...x,children:[a&&e.jsx(gt,{className:`animate-spin ${Ct[r]} mr-2`}),!a&&i&&la.cloneElement(i,{className:`${Ct[r]} mr-2 ${i.props.className||""}`.trim()}),h,!a&&p&&la.cloneElement(p,{className:`${Ct[r]} ml-2 ${p.props.className||""}`.trim()})]})});Va.displayName="Button";const ee=Va;function qe(...s){return s.filter(Boolean).join(" ")}const Xa=({icon:s,title:l,description:t,payout:r,bgColorClass:a="bg-blue-100",textColorClass:n="text-blue-600",className:i=""})=>e.jsxs("div",{className:qe("bg-white rounded-2xl p-6 shadow-sm border border-gray-100","hover:shadow-lg transition-all duration-200 hover:-translate-y-1",i),children:[e.jsx("div",{className:qe("rounded-xl p-3 w-fit mb-4",a),children:s}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:l}),e.jsx("p",{className:"text-gray-600 mb-4",children:t}),e.jsx("div",{className:qe("font-semibold text-sm",n),children:r})]});Xa.displayName="FeatureCard";function tt({className:s="",count:l=1,height:t,width:r,circle:a=!1,rounded:n="md",style:i,...p}){const u={none:"rounded-none",sm:"rounded-sm",md:"rounded",lg:"rounded-lg",full:"rounded-full"},m=Array.from({length:l}).map((c,x)=>e.jsx("div",{className:qe("animate-pulse bg-gray-200 dark:bg-gray-700",a?"rounded-full":u[n],s),style:{height:t||"1.25rem",width:a?t||"1.25rem":r||"100%",...i},...p},x));return e.jsx(e.Fragment,{children:m})}const il=async()=>(await new Promise(s=>setTimeout(s,1e3)),{earners:127+Math.floor(Math.random()*50),payout:.3+Math.random()*.5,earnings:12+Math.floor(Math.random()*10),activeCampaigns:24+Math.floor(Math.random()*10),totalPayouts:125e3+Math.floor(Math.random()*5e4)}),ol=async()=>(await new Promise(s=>setTimeout(s,800)),[{id:"tasks",icon:e.jsx(ke,{className:"w-8 h-8 text-blue-600"}),title:"Complete Tasks",description:"Micro-tasks and content creation",payout:"$25 avg",bgColorClass:"bg-blue-100",textColorClass:"text-blue-600"},{id:"invest",icon:e.jsx(re,{className:"w-8 h-8 text-green-600"}),title:"Invest in Content",description:"Own shares of viral content",payout:"12.5% ROI",bgColorClass:"bg-green-100",textColorClass:"text-green-600"},{id:"predictions",icon:e.jsx(be,{className:"w-8 h-8 text-purple-600"}),title:"Social Predictions",description:"Predict content performance",payout:"87% win rate",bgColorClass:"bg-purple-100",textColorClass:"text-purple-600"},{id:"brands",icon:e.jsx(pe,{className:"w-8 h-8 text-orange-600"}),title:"Brand Partnerships",description:"Collaborate with 500+ brands",payout:"Fair compensation",bgColorClass:"bg-orange-100",textColorClass:"text-orange-600"}]),cl=({error:s,onRetry:l})=>e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-lg my-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Ns,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("p",{className:"text-sm text-red-700",children:["Failed to load data: ",s.message]}),e.jsx("div",{className:"mt-2",children:e.jsx(ee,{variant:"outline",size:"sm",leftIcon:e.jsx(Ws,{className:"w-4 h-4"}),onClick:l,className:"text-sm",children:"Try again"})})]})]})});function dl(){const{user:s,demoLogin:l,logout:t}=Ue(),r=Ce(),[a,n]=o.useState({earners:0,payout:0,earnings:0,activeCampaigns:0,totalPayouts:0}),{data:i,execute:p}=oa(il,null,!0),{data:u,loading:m,error:c,execute:x}=oa(ol,null,!0);o.useEffect(()=>{i&&n(i)},[i]),o.useEffect(()=>{if(!i)return;const h=setInterval(()=>{p().catch(console.error)},1e4);return()=>clearInterval(h)},[i,p]);const g=o.useCallback(async h=>{try{await l[h]()}catch(j){console.error("Demo login failed:",j)}},[l]);return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("nav",{className:"bg-white/95 backdrop-blur-md border-b border-gray-100 sticky top-0 z-50 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("img",{src:"https://mocha-cdn.com/0198f6f0-5737-78cb-955a-4b0907aa1065/Promorang_logo_extended-03.png",alt:"Promorang",className:"h-8 w-auto transition-transform hover:scale-105"})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[e.jsx("a",{href:"#features",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"Features"}),e.jsx("a",{href:"#how-it-works",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"How it Works"}),e.jsx("a",{href:"#success-stories",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"Success Stories"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:s?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ee,{onClick:()=>r("/dashboard"),variant:"primary",size:"md",rightIcon:e.jsx(is,{className:"w-4 h-4"}),children:"Go to Dashboard"}),e.jsx(ee,{onClick:()=>t(),variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-800 hover:bg-red-50",title:"Development logout (for testing)",children:"🚪 Logout"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{onClick:()=>r("/auth"),variant:"ghost",size:"md",children:"Sign In"}),e.jsx(ee,{onClick:()=>r("/auth"),variant:"primary",size:"md",rightIcon:e.jsx(is,{className:"w-4 h-4"}),children:"Start Earning"})]})})]})})}),!s&&e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-b border-gray-100 py-4",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-2 sm:space-y-0 sm:space-x-6",children:[e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Quick Demo:"}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[e.jsx(ee,{onClick:()=>g("creator"),variant:"outline",size:"sm",className:"bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200",isLoading:l.loading==="creator",loadingText:"Loading...",children:"Creator Demo"}),e.jsx(ee,{onClick:()=>g("investor"),variant:"outline",size:"sm",className:"bg-purple-50 hover:bg-purple-100 text-purple-700 border-purple-200",isLoading:l.loading==="investor",loadingText:"Loading...",children:"Investor Demo"}),e.jsx(ee,{onClick:()=>g("advertiser"),variant:"outline",size:"sm",className:"bg-orange-50 hover:bg-orange-100 text-orange-700 border-orange-200",isLoading:l.loading==="advertiser",loadingText:"Loading...",children:"Advertiser Demo"})]})]})})}),e.jsxs("section",{className:"relative bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 py-16 lg:py-24 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.03'%3E%3Ccircle cx='30' cy='30' r='30'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`,opacity:.5}}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[e.jsxs("div",{className:"inline-flex items-center bg-green-100 text-green-800 px-4 py-2 rounded-full text-sm font-semibold mb-8 animate-pulse",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-ping"}),e.jsx("span",{className:"font-bold",children:a.earners.toLocaleString()})," early creators earning"]}),e.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 leading-tight mb-6",children:["Monetize Your Social Influence",e.jsx("span",{className:"block bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Effortlessly"})]}),e.jsxs("p",{className:"text-xl sm:text-2xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:["Join our early community and start earning from day one.",e.jsx("span",{className:"font-semibold text-gray-900",children:" No followers required."})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-6 mb-10 text-sm",children:[e.jsxs("div",{className:"flex items-center bg-white/60 backdrop-blur-sm rounded-full px-4 py-2",children:[e.jsx(te,{className:"w-4 h-4 text-green-500 mr-2"}),e.jsx("span",{className:"font-medium",children:"Start in 60 seconds"})]}),e.jsxs("div",{className:"flex items-center bg-white/60 backdrop-blur-sm rounded-full px-4 py-2",children:[e.jsx(te,{className:"w-4 h-4 text-green-500 mr-2"}),e.jsx("span",{className:"font-medium",children:"Grow with social media"})]}),e.jsxs("div",{className:"flex items-center bg-white/60 backdrop-blur-sm rounded-full px-4 py-2",children:[e.jsx(te,{className:"w-4 h-4 text-green-500 mr-2"}),e.jsx("span",{className:"font-medium",children:"Zero fees"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[s?e.jsx(ee,{onClick:()=>r("/dashboard"),variant:"primary",size:"lg",rightIcon:e.jsx(is,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"}),className:"group",children:"Go to Dashboard"}):e.jsx(ee,{onClick:()=>r("/auth"),variant:"primary",size:"lg",rightIcon:e.jsx(is,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"}),className:"group",children:"Start Earning Today"}),e.jsx(ee,{variant:"outline",size:"lg",leftIcon:e.jsx(Da,{className:"w-5 h-5"}),children:"See How it Works"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-gray-200 shadow-lg max-w-md mx-auto",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Early earnings this week:"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",a.payout.toFixed(1),"k"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Average per early user: $",a.earnings]})]})]})})]}),e.jsx("section",{className:"bg-gradient-to-r from-orange-50 to-red-50 border-b border-gray-100 py-16",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between space-y-8 lg:space-y-0 lg:space-x-12",children:[e.jsxs("div",{className:"lg:w-1/2",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Brands & Businesses"}),e.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"Connect with authentic creators and build campaigns that drive real engagement from day one."}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(te,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:"Work with vetted early adopters"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(te,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:"Track campaign performance"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(te,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:"Start with free sample campaigns"})]})]}),e.jsx("button",{onClick:()=>{console.log("Start Advertising clicked"),r(s?"/advertiser/onboarding":"/auth")},className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white px-8 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl",children:s?"Go to Advertising":"Start Advertising"})]}),e.jsx("div",{className:"lg:w-1/2",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Early Advertiser Benefits"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:"Free"}),e.jsx("div",{className:"text-sm text-blue-700",children:"Sample campaigns"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:"95%"}),e.jsx("div",{className:"text-sm text-purple-700",children:"Completion rate"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:"127"}),e.jsx("div",{className:"text-sm text-green-700",children:"Early creators"})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:"4.8★"}),e.jsx("div",{className:"text-sm text-orange-700",children:"Campaign rating"})]})]})]})})]})})}),e.jsx("section",{className:"bg-white border-b border-gray-100 py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("p",{className:"text-center text-gray-500 text-sm mb-8",children:"Creators earn across these platforms"}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-8 items-center",children:[{name:"Instagram",icon:"📷",color:"from-purple-500 to-pink-500",url:"https://instagram.com"},{name:"TikTok",icon:"🎵",color:"from-gray-900 to-gray-700",url:"https://tiktok.com"},{name:"YouTube",icon:"📺",color:"from-red-600 to-red-500",url:"https://youtube.com"},{name:"Twitter",icon:"🐦",color:"from-blue-500 to-blue-400",url:"https://twitter.com"},{name:"LinkedIn",icon:"💼",color:"from-blue-700 to-blue-600",url:"https://linkedin.com"},{name:"Facebook",icon:"👥",color:"from-blue-600 to-blue-500",url:"https://facebook.com"}].map(h=>e.jsxs("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",className:"group text-center hover:scale-110 transition-all duration-200",children:[e.jsx("div",{className:`bg-gradient-to-tr ${h.color} rounded-xl h-14 w-14 mx-auto flex items-center justify-center text-white font-bold text-xl group-hover:shadow-lg transition-shadow mb-2`,children:h.icon}),e.jsx("p",{className:"text-xs text-gray-600 group-hover:text-gray-900 transition-colors",children:h.name})]},h.name))})]})}),e.jsx("section",{id:"features",className:"py-20 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Four Ways to Earn"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Multiple income streams designed for creators, investors, and brands"})]}),m?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(h=>e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsx(tt,{className:"w-12 h-12 rounded-xl mb-4"}),e.jsx(tt,{className:"h-6 w-3/4 mb-3"}),e.jsx(tt,{className:"h-4 w-full mb-4"}),e.jsx(tt,{className:"h-4 w-1/2"})]},h))}):c?e.jsx(cl,{error:c,onRetry:x}):u?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.map(h=>e.jsx(Xa,{icon:h.icon,title:h.title,description:h.description,payout:h.payout,bgColorClass:h.bgColorClass,textColorClass:h.textColorClass},h.id))}):null]})}),e.jsx("section",{id:"how-it-works",className:"py-20 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Start Earning in 3 Steps"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Simple. Fast. Profitable."})]}),e.jsx("div",{className:"grid lg:grid-cols-3 gap-12 max-w-4xl mx-auto",children:[{step:"1",title:"Sign Up Free",description:"Create your account in under 2 minutes",colorClass:"bg-gradient-to-r from-blue-500 to-blue-600"},{step:"2",title:"Choose Your Path",description:"Select earning methods that fit your style",colorClass:"bg-gradient-to-r from-purple-500 to-purple-600"},{step:"3",title:"Get Paid",description:"Withdraw earnings instantly to your account",colorClass:"bg-gradient-to-r from-green-500 to-green-600"}].map((h,j)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`${h.colorClass} rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-6 text-white font-bold text-2xl shadow-lg`,children:h.step}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:h.title}),e.jsx("p",{className:"text-gray-600",children:h.description})]},j))})]})}),e.jsxs("section",{className:"py-20 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-700 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-20"}),e.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-12",children:"Growing with Our Early Community"}),e.jsxs("div",{className:"grid lg:grid-cols-4 gap-8 mb-12",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[e.jsx("div",{className:"text-4xl font-bold mb-2 text-yellow-300",children:a.earners.toLocaleString()}),e.jsx("div",{className:"text-blue-100",children:"Early Adopters"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[e.jsxs("div",{className:"text-4xl font-bold mb-2 text-green-300",children:["$",a.payout.toFixed(1),"k"]}),e.jsx("div",{className:"text-blue-100",children:"Paid Out So Far"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[e.jsx("div",{className:"text-4xl font-bold mb-2 text-pink-300",children:"4.8★"}),e.jsx("div",{className:"text-blue-100",children:"Early User Rating"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[e.jsxs("div",{className:"text-4xl font-bold mb-2 text-orange-300",children:["$",a.earnings]}),e.jsx("div",{className:"text-blue-100",children:"Average Weekly Earnings"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl px-8 py-6 inline-block",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Xs,{className:"w-6 h-6 animate-pulse"}),e.jsx("span",{className:"font-bold text-lg",children:"Be part of something new from the ground up"})]})})]})]}),e.jsx("section",{id:"success-stories",className:"py-20 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Real People, Real Results"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Success stories from our community"})]}),e.jsx("div",{className:"grid lg:grid-cols-3 gap-8",children:[{name:"Sarah Chen",role:"Early Creator",earnings:"$247",timeframe:"first month",quote:"Made $25 on my first day with zero followers. Love being an early adopter!"},{name:"Mike Rodriguez",role:"Beta Tester",earnings:"$384",timeframe:"2 months",quote:"Getting in early feels amazing. The platform has real potential."},{name:"Local Coffee Co.",role:"Early Brand Partner",earnings:"Great reach",timeframe:"6 weeks",quote:"Loving the authentic engagement from real early users. Quality over quantity."}].map((h,j)=>e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full mr-4"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:h.name}),e.jsx("p",{className:"text-gray-600 text-sm",children:h.role})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-4",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:h.earnings}),e.jsxs("div",{className:"text-xs text-green-700",children:["in ",h.timeframe]})]}),e.jsxs("p",{className:"text-gray-700 italic",children:['"',h.quote,'"']}),e.jsx("div",{className:"flex items-center text-yellow-500 mt-4",children:[...Array(5)].map((y,N)=>e.jsx(X,{className:"w-4 h-4 fill-current"},N))})]},j))})]})}),e.jsx("section",{className:"py-20 bg-gray-900 text-white",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-6",children:"Your Financial Freedom Starts Now"}),e.jsx("p",{className:"text-xl text-gray-300 mb-8",children:"Join thousands of creators already earning on Promorang"}),e.jsxs("button",{onClick:()=>{console.log("Final CTA clicked"),r(s?"/dashboard":"/auth")},className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-12 py-4 rounded-xl font-semibold text-lg transition-all duration-200 shadow-xl hover:shadow-2xl transform hover:-translate-y-1 inline-flex items-center",children:[s?"Go to Dashboard":"Start Earning Today",e.jsx(gr,{className:"ml-2 w-5 h-5"})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:e.jsxs("div",{className:"font-bold text-green-300 flex items-center justify-center",children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"100% Free to Start"]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:e.jsxs("div",{className:"font-bold text-yellow-300 flex items-center justify-center",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Grow Your Wealth"]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:e.jsxs("div",{className:"font-bold text-blue-300 flex items-center justify-center",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Secure & Trusted"]})})]})]})}),e.jsx("footer",{className:"bg-gray-50 border-t border-gray-200 py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[e.jsx("img",{src:"https://mocha-cdn.com/0198f6f0-5737-78cb-955a-4b0907aa1065/Promorang_logo_extended-03.png",alt:"Promorang",className:"h-8 w-auto mr-4"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Transform your influence into income"})]}),e.jsxs("div",{className:"flex space-x-8 text-sm text-gray-600",children:[e.jsx("a",{href:"#",className:"hover:text-gray-900 transition-colors",children:"Privacy"}),e.jsx("a",{href:"#",className:"hover:text-gray-900 transition-colors",children:"Terms"}),e.jsx("a",{href:"#",className:"hover:text-gray-900 transition-colors",children:"Support"})]})]}),e.jsx("div",{className:"border-t border-gray-200 mt-8 pt-8 text-center text-gray-500 text-sm",children:e.jsx("p",{children:"© 2024 Promorang. All rights reserved."})})]})})]})}function ml(){const{signIn:s,signUp:l,signInWithOAuth:t,demoLogin:r,isPending:a}=Ue(),n=Ce(),[i,p]=o.useState(!1),[u,m]=o.useState(!1),[c,x]=o.useState({email:"",password:"",username:"",display_name:""}),[g,h]=o.useState(""),j=async w=>{if(w.preventDefault(),h(""),i){if(!c.email||!c.password||!c.username){h("Please fill in all required fields");return}const f=await l(c.email,c.password);f.error?h(f.error):n("/dashboard")}else{if(!c.email||!c.password){h("Please enter email and password");return}const f=await s(c.email,c.password);f.error?h(f.error):n("/dashboard")}},y=async w=>{h("");const f=await r[w]();f.error?h(f.error):n("/dashboard")},N=async()=>{h("");const w=await t("google");w?.error&&h(w.error)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:"https://mocha-cdn.com/0198f6f0-5737-78cb-955a-4b0907aa1065/Promorang_logo_extended-03.png",alt:"Promorang",className:"h-12 w-auto mx-auto mb-4"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:i?"Create Account":"Welcome Back"}),e.jsx("p",{className:"mt-2 text-gray-600",children:i?"Join thousands of creators earning on Promorang":"Sign in to your account to continue earning"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-center text-sm text-gray-500 font-medium",children:"Quick Demo Login:"}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsx("button",{onClick:()=>y("creator"),disabled:a,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:opacity-50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Le,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Demo Creator"}),e.jsx("div",{className:"text-xs text-gray-500",children:"creator@demo.com"})]})]})}),e.jsx("button",{onClick:()=>y("investor"),disabled:a,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors disabled:opacity-50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(Le,{className:"w-4 h-4 text-purple-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Demo Investor"}),e.jsx("div",{className:"text-xs text-gray-500",children:"investor@demo.com"})]})]})}),e.jsx("button",{onClick:()=>y("advertiser"),disabled:a,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors disabled:opacity-50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(Le,{className:"w-4 h-4 text-orange-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Demo Advertiser"}),e.jsx("div",{className:"text-xs text-gray-500",children:"advertiser@demo.com"})]})]})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 text-gray-500",children:"Or continue with"})})]}),e.jsxs("button",{onClick:N,disabled:a,className:"w-full flex justify-center items-center px-4 py-3 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:opacity-50",children:[e.jsx(fr,{className:"w-5 h-5 mr-3 text-red-500"}),"Continue with Google"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 text-gray-500",children:"Or use email"})})]}),e.jsxs("form",{className:"space-y-6",onSubmit:j,children:[g&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:g}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Zs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:c.email,onChange:w=>x({...c,email:w.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your email"})]})]}),i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:c.username,onChange:w=>x({...c,username:w.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Choose a username"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"display_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"display_name",name:"display_name",type:"text",value:c.display_name,onChange:w=>x({...c,display_name:w.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Your display name"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"password",name:"password",type:u?"text":"password",required:!0,value:c.password,onChange:w=>x({...c,password:w.target.value}),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:i?"Create a password":"Enter your password"}),e.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?e.jsx(br,{className:"w-5 h-5"}):e.jsx(vs,{className:"w-5 h-5"})})]})]}),e.jsx("button",{type:"submit",disabled:a,className:"w-full flex justify-center items-center px-4 py-3 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:a?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:i?"Creating Account...":"Signing In..."})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:i?"Create Account":"Sign In"}),e.jsx(is,{className:"w-4 h-4"})]})})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[i?"Already have an account?":"Don't have an account?",e.jsx("button",{type:"button",onClick:()=>{p(!i),h(""),x({email:"",password:"",username:"",display_name:""})},className:"ml-1 font-medium text-blue-600 hover:text-blue-500 transition-colors",children:i?"Sign in instead":"Create one here"})]})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>n("/"),className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"← Back to Home"})})]})})}function xl(){const s=Ce(),[l]=Ca(),[t,r]=o.useState("loading"),[a,n]=o.useState("");return o.useEffect(()=>{(async()=>{const p=l.get("code"),u=l.get("error"),m=l.get("error_description");if(u){console.error("OAuth error:",u,m),r("error"),n(m||u);return}if(p)try{r("success"),setTimeout(()=>{s("/dashboard",{replace:!0})},1500)}catch(c){console.error("OAuth callback error:",c),r("error"),n("Failed to complete authentication")}else s("/auth")})()},[l,s]),t==="loading"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Completing Sign In..."}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we finish setting up your account."})]})}):t==="error"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-pink-50 to-orange-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center text-white max-w-2xl mx-auto",children:[e.jsx("div",{className:"mb-4",children:e.jsx(jr,{className:"w-12 h-12 mx-auto text-red-400"})}),e.jsx("h2",{className:"text-2xl font-semibold mb-2 text-gray-900",children:"Authentication Failed"}),e.jsx("p",{className:"text-gray-700 mb-6",children:a||"There was an error completing your sign in. Please try again."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>s("/auth"),className:"w-full px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:"Try Again"}),e.jsx("button",{onClick:()=>s("/",{replace:!0}),className:"w-full px-6 py-3 bg-white/20 hover:bg-white/30 text-gray-900 rounded-lg font-medium transition-colors",children:"Return to Landing Page"})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center text-white max-w-2xl mx-auto",children:[e.jsx("div",{className:"mb-4",children:e.jsx(te,{className:"w-12 h-12 mx-auto text-green-400"})}),e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Authentication Successful!"}),e.jsx("p",{className:"text-blue-200 mb-6",children:"You will be redirected to the app automatically in a moment..."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>s("/dashboard",{replace:!0}),className:"w-full px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:"Continue to App"}),e.jsx("button",{onClick:()=>s("/",{replace:!0}),className:"w-full px-6 py-3 bg-white/20 hover:bg-white/30 text-white rounded-lg font-medium transition-colors",children:"Return to Landing Page"})]})]})})}function Qa({content:s,wallet:l,isOpen:t,onClose:r,onPurchase:a}){const[n,i]=o.useState(1),[p,u]=o.useState(!1);if(!t)return null;const m=n*s.share_price,c=l&&l.balance>=m,x=Math.min(s.available_shares,l?Math.floor(l.balance/s.share_price):0),g=async()=>{if(!(!c||n<1)){u(!0);try{await a(s,n),r()}catch(h){console.error("Purchase failed:",h)}finally{u(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Buy Content Shares"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Platform:"}),e.jsx("span",{className:"font-medium capitalize",children:s.platform})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Price per share:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["$",s.share_price.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Available:"}),e.jsxs("span",{className:"font-medium",children:[s.available_shares," shares"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of shares"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>i(Math.max(1,n-1)),disabled:n<=1,className:"w-8 h-8 bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed rounded text-gray-700 font-bold",children:"-"}),e.jsx("input",{type:"number",value:n,onChange:h=>i(Math.max(1,Math.min(x,parseInt(h.target.value)||1))),min:"1",max:x,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-center"}),e.jsx("button",{type:"button",onClick:()=>i(Math.min(x,n+1)),disabled:n>=x,className:"w-8 h-8 bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed rounded text-gray-700 font-bold",children:"+"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Max: ",x," shares"]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Your Balance:"})]}),e.jsxs("span",{className:"font-bold text-blue-900",children:["$",(l?.balance||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Cost:"})]}),e.jsxs("span",{className:"font-bold text-gray-900",children:["$",m.toFixed(2)]})]})]}),!c&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-red-700",children:["Insufficient balance to purchase ",n," shares"]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:g,disabled:!c||p||n<1,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",children:p?"Processing...":`Buy ${n} Share${n>1?"s":""}`})]})]})]})})}function Za({user:s,contentId:l,contentTitle:t,isOpen:r,onClose:a,onSuccess:n}){const[i,p]=o.useState("instagram"),[u,m]=o.useState(""),[c,x]=o.useState(!1),[g,h]=o.useState(!1),[j,y]=o.useState(null);if(!r||!s)return null;const N=[{id:"instagram",name:"Instagram",color:"from-pink-500 to-purple-600"},{id:"tiktok",name:"TikTok",color:"from-black to-gray-800"},{id:"twitter",name:"Twitter",color:"from-blue-400 to-blue-600"},{id:"facebook",name:"Facebook",color:"from-blue-600 to-blue-800"},{id:"linkedin",name:"LinkedIn",color:"from-blue-500 to-blue-700"}],w=C=>{switch(C){case"super":return 2;case"premium":return 1.5;case"free":default:return 1}},f=()=>{const E=w(s.user_tier);return Math.floor(10*E)},d=async()=>{if(!u.trim()){y("Please enter the share URL");return}x(!0),y(null);try{const C=await fetch("/api/users/share-content",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({content_id:l,platform:i,share_url:u})});if(C.ok)await C.json(),n(),a(),m(""),p("instagram");else{const E=await C.json();y(E.error||"Share recording failed")}}catch(C){console.error("Share recording failed:",C),y("Network error occurred")}finally{x(!1)}},b=async C=>{await navigator.clipboard.writeText(C),h(!0),setTimeout(()=>h(!1),2e3)},F=()=>`${t?`Check out this amazing content: "${t}" on Promorang!`:"Discover amazing content and earn while you engage on Promorang!"} Join me: https://promorang.com`,v=f();return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bs,{className:"w-6 h-6 text-orange-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Share Content"})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-orange-900",children:"Points to Earn"}),e.jsx("span",{className:"text-xl font-bold text-orange-600",children:v})]}),e.jsxs("div",{className:"text-xs text-orange-700",children:["Base: 10 pts × ",w(s.user_tier),"x (",s.user_tier," tier)"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Platform"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:N.map(C=>e.jsxs("button",{onClick:()=>p(C.id),className:`p-3 rounded-lg border-2 transition-colors ${i===C.id?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-8 h-8 bg-gradient-to-r ${C.color} rounded-lg mx-auto mb-1`}),e.jsx("span",{className:"text-sm font-medium",children:C.name})]},C.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Suggested Share Text"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:F()}),e.jsxs("button",{onClick:()=>b(F()),className:"flex items-center space-x-2 text-orange-600 hover:text-orange-700 text-sm font-medium",children:[g?e.jsx(ds,{className:"w-4 h-4"}):e.jsx(qs,{className:"w-4 h-4"}),e.jsx("span",{children:g?"Copied!":"Copy Text"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Share URL *"}),e.jsx("input",{type:"url",value:u,onChange:C=>m(C.target.value),placeholder:"https://instagram.com/p/your-post-id/",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Paste the URL of your shared post to verify and earn points"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"How It Works"}),e.jsxs("ol",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"1. Copy the suggested text or create your own"}),e.jsx("li",{children:"2. Share on your chosen platform with Promorang mention"}),e.jsx("li",{children:"3. Paste the URL of your shared post here"}),e.jsxs("li",{children:["4. Earn ",v," points instantly!"]})]})]}),j&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-700",children:j})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:a,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:d,disabled:!u.trim()||c,className:"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2",children:c?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):e.jsxs(e.Fragment,{children:[e.jsx(ss,{className:"w-4 h-4"}),e.jsx("span",{children:"Record Share"})]})})]})]})]})})}function er({user:s,contentId:l,contentTitle:t,contentPlatform:r,contentUrl:a,isOpen:n,onClose:i,onSuccess:p}){const[u,m]=o.useState("like"),[c,x]=o.useState(""),[g,h]=o.useState(null),[j,y]=o.useState(!1),[N,w]=o.useState(null);if(!n||!s)return null;const f=[{id:"like",name:"Like",description:"Like the post on the original platform",icon:"❤️"},{id:"comment",name:"Comment",description:"Leave a meaningful comment",icon:"💬"},{id:"share",name:"Share/Repost",description:"Share or repost the content",icon:"🔄"},{id:"save",name:"Save/Bookmark",description:"Save or bookmark the content",icon:"🔖"},{id:"repost",name:"Story/Repost",description:"Share to your story or timeline",icon:"📢"}],d=E=>{switch(E){case"super":return 2;case"premium":return 1.5;case"free":default:return 1}},b=()=>{const L={like:10,comment:30,save:50,share:100,repost:120}[u]||10,M=d(s.user_tier),T=Math.floor(L*M),B=Math.ceil(T/20);return{points:T,keys:B,multiplier:M}},F=E=>{const L=E.target.files?.[0];L&&h(L)},v=async()=>{if(!c.trim()&&!g){w("Please provide proof URL or upload a screenshot");return}y(!0),w(null);try{let E="";g&&(new FormData().append("image",g),E=URL.createObjectURL(g));const L=await fetch("/api/users/external-move",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({move_type:u,content_id:l,content_platform:r,content_url:a,proof_url:c||E,proof_type:g?"image":"url"})});if(L.ok){const M=await L.json();p(),i();const T=document.createElement("div");T.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-bounce",T.innerHTML=`
          <div class="flex items-center space-x-2">
            <span class="text-lg">🎉</span>
            <div>
              <div class="font-semibold">+${M.points_earned} points!</div>
              <div class="text-xs opacity-90">+${M.keys_earned} keys • External move verified</div>
            </div>
          </div>
        `,document.body.appendChild(T),setTimeout(()=>{document.body.contains(T)&&document.body.removeChild(T)},4e3),x(""),h(null),m("like")}else{const M=await L.json();w(M.error||"Failed to record external move")}}catch(E){console.error("External move failed:",E),w("Network error occurred")}finally{y(!1)}},C=b();return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{className:"w-6 h-6 text-purple-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"External Move"})]}),e.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[t&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:t}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{className:"capitalize",children:r}),a&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-700 underline",children:"View Original"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Reward for External Move"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl font-bold text-purple-600",children:C.points}),e.jsx("span",{className:"text-sm text-purple-700",children:"points"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ye,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"text-sm font-bold text-orange-600",children:C.keys})]})]})]}),e.jsxs("div",{className:"text-xs text-purple-700",children:["10x more than in-app actions • ",C.multiplier,"x ",s.user_tier," tier multiplier"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["What did you do on ",r,"?"]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:f.map(E=>e.jsx("button",{onClick:()=>m(E.id),className:`p-3 rounded-lg border-2 text-left transition-colors ${u===E.id?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-xl",children:E.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:E.name}),e.jsx("div",{className:"text-sm text-gray-600",children:E.description})]})]})},E.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Proof of Action *"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Link to your action (optional if uploading image)"}),e.jsx("input",{type:"url",value:c,onChange:E=>x(E.target.value),placeholder:"https://instagram.com/p/your-post/...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Or upload a screenshot"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-purple-400 transition-colors",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:F,className:"hidden",id:"proof-upload"}),e.jsx("label",{htmlFor:"proof-upload",className:"cursor-pointer",children:g?e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{className:"w-8 h-8 text-green-600 mx-auto"}),e.jsx("p",{className:"text-sm font-medium text-green-700",children:g.name}),e.jsx("p",{className:"text-xs text-gray-600",children:"Click to change"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(Qs,{className:"w-8 h-8 text-gray-400 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload screenshot"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG up to 10MB"})]})})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(we,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-900",children:"How it works"})]}),e.jsxs("ol",{className:"text-sm text-blue-700 space-y-1 pl-4",children:[e.jsxs("li",{children:["1. Go to the original content on ",r]}),e.jsxs("li",{children:["2. Perform the selected action (",f.find(E=>E.id===u)?.name,")"]}),e.jsx("li",{children:"3. Copy the URL or take a screenshot as proof"}),e.jsxs("li",{children:["4. Submit here to earn ",C.points," points + ",C.keys," keys!"]})]})]}),N&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-700",children:N})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:i,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:v,disabled:!c.trim()&&!g||j,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2",children:j?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):e.jsxs(e.Fragment,{children:[e.jsx(Ss,{className:"w-4 h-4"}),e.jsx("span",{children:"Submit Proof"})]})})]})]})]})})}Fe({username:V().optional(),display_name:V().optional(),bio:V().optional(),avatar_url:V().optional(),banner_url:V().optional(),website_url:V().optional(),social_links:V().optional()});const ul=Fe({title:V(),description:V(),drop_type:V(),difficulty:V(),key_cost:ie().min(0),gem_reward_base:ie().min(0),gem_pool_total:ie().optional(),reward_logic:V().optional(),follower_threshold:ie().min(0).default(0),time_commitment:V().optional(),requirements:V().optional(),deliverables:V().optional(),deadline_at:V().optional(),max_participants:ie().optional(),platform:V().optional(),content_url:V().optional(),move_cost_points:ie().min(0).default(0),key_reward_amount:ie().min(0).default(0),is_proof_drop:Gt().default(!1),is_paid_drop:Gt().default(!1)});Fe({application_message:V()});Fe({action_type:Ie(["like","comment","save","share","repost"]),reference_id:ie().optional(),reference_type:V().optional()});Fe({from_currency:Ie(["points","gems"]),to_currency:Ie(["keys"]),amount:ie().min(1)});Fe({date:V().optional()});Fe({amount:ie().min(200),payment_method:V(),payment_details:Ga(qa())});Fe({payment_method:V(),preference_data:Ga(qa()),is_default:Gt().optional()});Fe({package_id:V(),gems:ie().min(1),price:ie().min(.01)});Fe({content_id:ie().optional(),platform:V(),content_url:V(),forecast_type:Ie(["views","likes","shares","comments"]),target_value:ie().min(1),odds:ie().min(1),expires_at:V(),initial_amount:ie().min(1),initial_side:Ie(["over","under"])});Fe({prediction_amount:ie().min(1),prediction_side:Ie(["over","under"])});Fe({platform:V(),content_url:V(),bet_type:Ie(["views","likes","shares","comments"]),target_value:ie().min(1),odds:ie().min(1),expires_at:V()});Fe({bet_amount:ie().min(1),bet_side:Ie(["over","under"])});const hl=Ie(["instagram","tiktok","youtube","twitter"]),sr=Ie(["content_clipping","reviews","ugc_creation","affiliate_referral","surveys","challenges_events","engagement"]),tr=Ie(["easy","medium","hard"]);Ie(["social_media","content_creation","marketing","review","survey"]);Ie(["easy","medium","hard"]);const pl=Fe({platform:Ie(["instagram","tiktok","youtube","twitter","linkedin"]),title:V().min(1),description:V().optional(),platform_url:V().url(),media_url:V().optional(),total_shares:ie().min(1).max(1e3),share_price:ie().min(0)});Fe({content_id:ie(),shares_count:ie().min(1)});Fe({title:V(),description:V(),category:V(),difficulty:Ie(["easy","medium","hard"]),reward_amount:ie().min(0),currency_type:V().default("USD"),follower_threshold:ie().min(0).default(0),time_commitment:V().optional(),requirements:V().optional(),deliverables:V().optional(),deadline_at:V().optional(),max_participants:ie().optional()});Fe({application_message:V()});function Zt({isOpen:s,onClose:l,onSuccess:t,content:r}){const[a,n]=o.useState({platform:r.platform,title:r.title,description:r.description||"",platform_url:r.platform_url,media_url:r.media_url||"",total_shares:r.total_shares,share_price:r.share_price}),[i,p]=o.useState(!1),[u,m]=o.useState(null);if(o.useEffect(()=>{r&&n({platform:r.platform,title:r.title,description:r.description||"",platform_url:r.platform_url,media_url:r.media_url||"",total_shares:r.total_shares,share_price:r.share_price})},[r]),!s)return null;const c=async x=>{x.preventDefault(),p(!0),m(null);try{if(!pl.safeParse(a).success){m("Please check all required fields");return}const h=await fetch(`/api/content/${r.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)});if(h.ok){const j=await h.json();t(j.content),l()}else{const j=await h.json();m(j.error||"Failed to update content")}}catch(g){console.error("Error updating content:",g),m("Failed to update content")}finally{p(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Content"}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:i,children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:c,className:"p-6 space-y-6",children:[u&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Platform *"}),e.jsxs("select",{value:a.platform,onChange:x=>n({...a,platform:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",required:!0,disabled:i,children:[e.jsx("option",{value:"",children:"Select platform"}),e.jsx("option",{value:"instagram",children:"Instagram"}),e.jsx("option",{value:"tiktok",children:"TikTok"}),e.jsx("option",{value:"youtube",children:"YouTube"}),e.jsx("option",{value:"twitter",children:"Twitter"}),e.jsx("option",{value:"linkedin",children:"LinkedIn"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Shares *"}),e.jsx("input",{type:"number",min:"1",max:"1000",value:a.total_shares,onChange:x=>n({...a,total_shares:parseInt(x.target.value)||0}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",required:!0,disabled:i})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:a.title,onChange:x=>n({...a,title:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"Enter content title",required:!0,disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:x=>n({...a,description:x.target.value}),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"Describe your content...",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Platform URL *"}),e.jsx("input",{type:"url",value:a.platform_url,onChange:x=>n({...a,platform_url:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"https://instagram.com/p/...",required:!0,disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Media URL"}),e.jsx("input",{type:"url",value:a.media_url,onChange:x=>n({...a,media_url:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"https://example.com/image.jpg",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Share Price (USD) *"}),e.jsx("input",{type:"number",step:"0.0001",min:"0",value:a.share_price,onChange:x=>n({...a,share_price:parseFloat(x.target.value)||0}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"0.0100",required:!0,disabled:i})]}),e.jsxs("div",{className:"flex space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:l,disabled:i,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 disabled:opacity-50 flex items-center justify-center space-x-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx(gt,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Updating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Wt,{className:"w-4 h-4"}),e.jsx("span",{children:"Update Content"})]})})]})]})]})})}function yt({isOpen:s,onClose:l,onConfirm:t,title:r,message:a,confirmText:n="Confirm",cancelText:i="Cancel",type:p="warning",loading:u=!1}){if(!s)return null;const m=()=>{switch(p){case"danger":return e.jsx(Ns,{className:"w-6 h-6 text-red-600"});case"success":return e.jsx(te,{className:"w-6 h-6 text-green-600"});case"info":return e.jsx(Sa,{className:"w-6 h-6 text-blue-600"});case"warning":default:return e.jsx(Ns,{className:"w-6 h-6 text-yellow-600"})}},c=()=>{switch(p){case"danger":return"bg-red-600 hover:bg-red-700 text-white";case"success":return"bg-green-600 hover:bg-green-700 text-white";case"info":return"bg-blue-600 hover:bg-blue-700 text-white";case"warning":default:return"bg-yellow-600 hover:bg-yellow-700 text-white"}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[m(),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:r})]}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:u,children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:a}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:l,disabled:u,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors disabled:opacity-50",children:i}),e.jsx("button",{onClick:t,disabled:u,className:`flex-1 px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 ${c()}`,children:u?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Processing..."})]}):n})]})]})})}function gl({isOpen:s,onClose:l,contentId:t,contentTitle:r,contentUrl:a}){const[n,i]=o.useState(!1);if(!s)return null;const p=a||`${window.location.origin}/content/${t}`,u=`Check out this amazing content: "${r}" on Promorang!`,m=async()=>{try{await navigator.clipboard.writeText(p),i(!0),setTimeout(()=>i(!1),2e3)}catch(y){console.error("Failed to copy:",y)}},c=()=>{const y=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(p)}`;window.open(y,"_blank","width=600,height=400")},x=()=>{const N=`https://twitter.com/intent/tweet?text=${encodeURIComponent(`${u} ${p}`)}`;window.open(N,"_blank","width=600,height=400")},g=()=>{const N=`https://wa.me/?text=${encodeURIComponent(`${u} ${p}`)}`;window.open(N,"_blank")},h=()=>{const y=encodeURIComponent("Check out this content on Promorang"),N=encodeURIComponent(`${u}

${p}`);window.location.href=`mailto:?subject=${y}&body=${N}`},j=async()=>{if(navigator.share)try{await navigator.share({title:r,text:u,url:p})}catch(y){console.error("Error sharing:",y)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bs,{className:"w-6 h-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Share Content"})]}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:r}),e.jsx("p",{className:"text-sm text-gray-600 break-all",children:p})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:m,className:"w-full flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[n?e.jsx(ds,{className:"w-5 h-5 text-green-600"}):e.jsx(qs,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:n?"Copied!":"Copy Link"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:c,className:"flex items-center justify-center space-x-2 p-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Pa,{className:"w-4 h-4"}),e.jsx("span",{children:"Facebook"})]}),e.jsxs("button",{onClick:x,className:"flex items-center justify-center space-x-2 p-3 bg-sky-500 text-white rounded-lg hover:bg-sky-600 transition-colors",children:[e.jsx(Ht,{className:"w-4 h-4"}),e.jsx("span",{children:"Twitter"})]}),e.jsxs("button",{onClick:g,className:"flex items-center justify-center space-x-2 p-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx(Ds,{className:"w-4 h-4"}),e.jsx("span",{children:"WhatsApp"})]}),e.jsxs("button",{onClick:h,className:"flex items-center justify-center space-x-2 p-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsx("span",{className:"text-sm",children:"📧"}),e.jsx("span",{children:"Email"})]})]}),typeof window<"u"&&"share"in navigator&&e.jsxs("button",{onClick:j,className:"w-full flex items-center justify-center space-x-2 p-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-colors",children:[e.jsx(Bs,{className:"w-4 h-4"}),e.jsx("span",{children:"Share via..."})]})]}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-blue-700",children:["💡 ",e.jsx("strong",{children:"Tip:"})," Share this content to earn points and help creators grow their audience!"]})})]})})}function fl({isOpen:s,onClose:l,user:t}){const[r,a]=o.useState([]),[n,i]=o.useState(!1);o.useEffect(()=>{s&&t&&p()},[s,t]);const p=async()=>{i(!0);try{const x=await fetch("/api/users/saved-content",{credentials:"include"});if(x.ok){const g=await x.json();a(g)}}catch(x){console.error("Failed to fetch saved content:",x)}finally{i(!1)}},u=async x=>{try{(await fetch(`/api/users/saved-content/${x}`,{method:"DELETE",credentials:"include"})).ok&&a(h=>h.filter(j=>j.content_id!==x))}catch(g){console.error("Failed to remove saved content:",g)}},m=x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),c=x=>{switch(x){case"instagram":return"📷";case"tiktok":return"🎵";case"youtube":return"📺";case"twitter":return"🐦";case"linkedin":return"💼";default:return"📱"}};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ut,{className:"w-6 h-6 text-orange-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Saved Content"}),e.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-sm",children:r.length})]}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ut,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No saved content yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Save content you want to revisit later by clicking the bookmark icon."}),e.jsx("button",{onClick:l,className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Explore Content"})]}):e.jsx("div",{className:"space-y-4",children:r.map(x=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center text-white text-xl flex-shrink-0",children:c(x.content_platform)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 truncate pr-2",children:x.content_title}),e.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>window.open(`/content/${x.content_id}`,"_blank"),className:"text-blue-600 hover:text-blue-700 p-1 rounded transition-colors",title:"View content",children:e.jsx(vs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>window.open(x.content_url,"_blank"),className:"text-purple-600 hover:text-purple-700 p-1 rounded transition-colors",title:"View original",children:e.jsx(ss,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>u(x.content_id),className:"text-red-600 hover:text-red-700 p-1 rounded transition-colors",title:"Remove from saved",children:e.jsx(zs,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsx("div",{className:"flex items-center space-x-1",children:e.jsxs("span",{children:["by ",x.creator_name]})}),e.jsx("div",{className:"flex items-center space-x-1",children:e.jsx("span",{className:"capitalize",children:x.content_platform})}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ts,{className:"w-3 h-3"}),e.jsxs("span",{children:["Saved ",m(x.created_at)]})]})]})]})]})},x.id))})}),r.length>0&&e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsx("p",{className:"text-xs text-gray-600 text-center",children:"💡 Tip: Saved content is private and only visible to you. Use this to build your personal content library!"})})]})}):null}function St({variant:s,text:l,icon:t,onClick:r,disabled:a}){const n=()=>{switch(s){case"orange":return"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600";case"blue":return"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600";case"purple":return"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600";default:return"bg-gray-500 hover:bg-gray-600"}};return e.jsxs("button",{onClick:i=>r?.(i),disabled:a,className:`text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-2 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:hover:shadow-none ${n()}`,"aria-label":l,children:[t,e.jsx("span",{children:l})]})}function bl({content:s}){const l=typeof s.share_price=="number"?s.share_price:Number(s.share_price??0),t=Number.isFinite(l)&&l>0?l:null;return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:t?`$${t.toFixed(2)}`:"—"}),e.jsx("div",{className:"text-xs text-gray-500",children:"per share"})]})}function jl({content:s}){const l=s.available_shares??0;return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:l>0?l:"0"}),e.jsx("div",{className:"text-xs text-gray-500",children:"available"})]})}function yl({content:s,onBuyShares:l,onPredict:t,onTip:r,onExternalMove:a,currentUser:n,onEdit:i,onDelete:p}){const u=s.available_shares??0,m=s.engagement_shares_remaining??0,c=g=>h=>{h.stopPropagation(),h.preventDefault(),g?.(s)},x=u<=0?m>0?"Paid shares are sold out. Share early to claim the remaining engagement shares.":"All shares have been claimed. Check back soon for the next drop.":m>0?"Paid shares are available. Share early to also lock in the limited engagement shares.":void 0;return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 sm:gap-3 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-3",children:[e.jsx(bl,{content:s}),e.jsx(jl,{content:s})]}),e.jsxs("div",{className:"flex items-center justify-center sm:justify-end gap-2 flex-wrap",children:[e.jsx(St,{variant:"orange",text:"Buy Shares",icon:e.jsx(re,{className:"w-4 h-4"}),onClick:c(l),disabled:u<=0}),e.jsx(St,{variant:"blue",text:"Predict",icon:e.jsx(be,{className:"w-4 h-4"}),onClick:c(t)}),e.jsx(St,{variant:"purple",text:"Tip Creator",icon:e.jsx(Cs,{className:"w-4 h-4"}),onClick:c(r)})]}),x&&e.jsx("p",{className:"text-xs text-gray-600 bg-gray-50 border border-gray-100 rounded-lg px-3 py-2",children:x}),n?.id===s.creator_id&&e.jsxs("div",{className:"flex items-center justify-center sm:justify-end space-x-2 pt-3 border-t border-gray-100",children:[e.jsx("button",{onClick:g=>{g.stopPropagation(),i?.(s)},className:"text-blue-600 hover:text-blue-800 text-sm font-medium px-3 py-1 rounded-md hover:bg-blue-50 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]","aria-label":"Edit content",children:"Edit"}),e.jsx("span",{className:"text-gray-300",children:"•"}),e.jsx("button",{onClick:g=>{g.stopPropagation(),p?.(s)},className:"text-red-600 hover:text-red-800 text-sm font-medium px-3 py-1 rounded-md hover:bg-red-50 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]","aria-label":"Delete content",children:"Delete"})]}),e.jsx("div",{className:"pt-3 border-t border-gray-100",children:e.jsxs("button",{onClick:g=>{g.stopPropagation(),a?.(s)},className:"flex items-center justify-center space-x-2 px-4 py-2 text-sm text-gray-600 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] w-full sm:w-auto","aria-label":"Move to external platform",children:[e.jsx(ss,{className:"w-4 h-4"}),e.jsx("span",{children:"Move to External"})]})})]})}function at({icon:s,count:l,action:t,onClick:r,color:a="gray"}){const n=()=>{switch(a){case"red":return"hover:text-red-500";case"blue":return"hover:text-blue-500";case"purple":return"hover:text-purple-500";case"green":return"hover:text-green-500";default:return"hover:text-gray-700"}};return e.jsxs("button",{onClick:r,className:`flex items-center space-x-1 text-gray-500 ${n()} transition-all duration-200 hover:scale-[1.05] active:scale-[0.95] px-2 py-1 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-400/50`,"aria-label":`${t} (${l})`,children:[e.jsx(s,{className:"w-4 h-4","aria-hidden":"true"}),e.jsx("span",{className:"text-sm",children:l})]})}function Nl({content:s,onSocialAction:l,onShare:t,onComment:r}){const a=n=>n>=1e6?(n/1e6).toFixed(1)+"M":n>=1e3?(n/1e3).toFixed(1)+"K":n.toString();return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-center sm:justify-start space-x-1 flex-wrap",children:[s.views_count!==void 0&&e.jsxs("div",{className:"flex items-center space-x-1 text-gray-500 px-2 py-1 transition-all duration-200 hover:text-gray-700 hover:bg-gray-50 rounded-md",children:[e.jsx(vs,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[a(s.views_count)," views"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(at,{icon:Rs,count:s.likes_count||0,action:"like",onClick:()=>l?.("like",s.id),color:"red"}),e.jsx(at,{icon:Ds,count:s.comments_count||0,action:"comment",onClick:()=>r?.(s),color:"blue"}),e.jsx(at,{icon:Ta,count:s.reposts_count||0,action:"repost",onClick:()=>l?.("repost",s.id),color:"purple"}),e.jsx(at,{icon:Bs,count:0,action:"share",onClick:()=>t?.(s),color:"green"})]})]}),s.engagement_shares_total>0&&e.jsxs("div",{className:"flex items-center justify-center sm:justify-end space-x-2 text-xs text-gray-500",role:"group","aria-label":"Engagement progress",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-20 h-2 bg-gray-200 rounded-full overflow-hidden",role:"progressbar","aria-valuenow":s.engagement_shares_total-s.engagement_shares_remaining,"aria-valuemin":0,"aria-valuemax":s.engagement_shares_total,"aria-label":`${s.engagement_shares_remaining} free shares remaining out of ${s.engagement_shares_total} total`,children:e.jsx("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:`${(s.engagement_shares_total-s.engagement_shares_remaining)/s.engagement_shares_total*100}%`}})}),e.jsxs("span",{className:"text-green-600 font-medium","aria-label":`${s.engagement_shares_remaining} free shares remaining`,children:[s.engagement_shares_remaining,"/",s.engagement_shares_total]})]}),e.jsx("span",{children:"free shares"})]})]})}function Dt({content:s,onBuyShares:l,onShare:t,onSocialAction:r,onExternalMove:a,onTip:n,currentUser:i,onEdit:p,onDelete:u,onComment:m,onNavigate:c,onPredict:x,isSponsored:g}){const h=()=>{c&&c(s)},j=v=>v==null||Number.isNaN(v)?"0":v>=1e6?(v/1e6).toFixed(1)+"M":v>=1e3?(v/1e3).toFixed(1)+"K":v.toString(),y=s.total_shares??0,N=s.available_shares??0,w=Math.max(y-N,0),f=s.engagement_shares_remaining??0,d=typeof s.current_revenue=="number"?s.current_revenue:Number(s.current_revenue)||0,b=s.created_at?new Date(s.created_at):null,F=b&&!Number.isNaN(b.getTime())?b.toLocaleDateString():"Recently";return e.jsxs("div",{className:`bg-white rounded-xl shadow-sm border border-gray-100 p-5 cursor-pointer hover:shadow-lg transition-all duration-200 hover:border-gray-200 max-w-[720px] mx-auto w-full focus-within:outline focus-within:outline-2 focus-within:outline-primary/40 focus-within:ring-2 focus-within:ring-primary/20 ${g||s.is_sponsored?"ring-2 ring-orange-200 ring-opacity-50":""}`,onClick:h,tabIndex:0,role:"article","aria-label":`Content by ${s.creator_name||s.creator_username||"Unknown Creator"}: ${s.title}`,onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),h())},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[s.is_demo&&e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200 flex items-center space-x-1 transition-all duration-200 hover:bg-purple-200 hover:scale-[1.02]",children:[e.jsx(Xs,{className:"w-3 h-3"}),e.jsx("span",{children:"Demo"})]}),(g||s.is_sponsored)&&e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-gradient-to-r from-orange-100 to-amber-100 text-orange-800 border border-orange-200 flex items-center space-x-1 transition-all duration-200 hover:bg-orange-200 hover:scale-[1.02]",children:[e.jsx(nt,{className:"w-3 h-3"}),e.jsx("span",{children:"Sponsored"})]})]}),s.views_count!==void 0&&e.jsxs("div",{className:"flex items-center space-x-1 text-gray-500 transition-all duration-200 hover:text-gray-700 hover:bg-gray-50 px-2 py-1 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-400/50",role:"text","aria-label":`${j(s.views_count)} views`,children:[e.jsx(vs,{className:"w-4 h-4","aria-hidden":"true"}),e.jsxs("span",{className:"text-sm",children:[j(s.views_count)," views"]})]})]}),s.media_url&&e.jsx("div",{className:"mb-4 rounded-lg overflow-hidden bg-gray-50",onClick:v=>v.stopPropagation(),children:e.jsx("img",{src:s.media_url,alt:s.title,className:"w-full h-48 object-cover hover:scale-105 transition-transform duration-200",onError:v=>{v.target.style.display="none"}})}),e.jsxs("div",{className:"mb-4",onClick:v=>v.stopPropagation(),children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-2 hover:text-orange-600 transition-colors leading-tight cursor-pointer focus:outline-none focus:text-orange-600",children:s.title}),s.description&&e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed line-clamp-2 mb-3",children:s.description}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center text-white font-semibold text-sm transition-all duration-200 hover:scale-[1.05] cursor-pointer focus:outline-none focus:ring-2 focus:ring-orange-400/50 focus:scale-[1.05]","aria-label":`Creator: ${s.creator_name||s.creator_username||"Unknown"}`,children:(s.creator_name||s.creator_username||"U")[0].toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-semibold text-gray-900 text-base hover:text-orange-600 transition-colors cursor-pointer focus:outline-none focus:text-orange-600",role:"text","aria-label":`Creator name: ${s.creator_name||s.creator_username||"Unknown Creator"}`,children:s.creator_name||s.creator_username||"Unknown Creator"}),e.jsx("span",{className:"text-gray-400",children:"•"}),e.jsx("span",{className:"text-sm text-gray-500",children:F}),s.platform&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-400",children:"•"}),e.jsx("span",{className:"text-sm text-gray-500 capitalize",children:s.platform})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[j(w)," shares owned"]}),e.jsx("span",{className:"text-xs text-gray-400",children:"•"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[j(y)," total shares"]}),f>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs text-gray-400",children:"•"}),e.jsxs("span",{className:"text-xs text-green-600 font-medium",children:[j(f)," free shares available"]})]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-green-600 mb-1 transition-all duration-200 hover:text-green-700 hover:bg-green-50 px-2 py-1 rounded-md cursor-pointer focus:outline-none focus:ring-2 focus:ring-green-400/50",role:"text","aria-label":`Current revenue: $${d.toFixed(2)}`,children:[e.jsx(re,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-semibold",children:["$",d.toFixed(2)]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Current Revenue"})]})]}),s.platform_url&&e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-100 transition-all duration-200 hover:bg-gray-100 hover:border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{className:"w-4 h-4 text-gray-500","aria-hidden":"true"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["View on ",s.platform]})]}),e.jsx("a",{href:s.platform_url,target:"_blank",rel:"noopener noreferrer",className:"text-orange-600 hover:text-orange-800 text-sm font-medium transition-all duration-200 hover:bg-orange-50 px-2 py-1 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-400/50 focus:bg-orange-50",onClick:v=>v.stopPropagation(),"aria-label":`Open content on ${s.platform} (opens in new tab)`,children:"Open Link"})]})})]}),e.jsx(Nl,{content:s,onSocialAction:r,onShare:t,onComment:m}),e.jsx(yl,{content:s,onBuyShares:l,onPredict:x,onTip:n,currentUser:i,onEdit:p,onDelete:u})]})}function xa({drop:s,onApply:l}){const t=(m,c="Unknown")=>{const x=m&&m.trim().length>0?m:c;return x.charAt(0).toUpperCase()+x.slice(1)},r=m=>{switch((m||"").toLowerCase()){case"easy":return"bg-green-100 text-green-800 border-green-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"hard":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},a=m=>{switch((m||"").toLowerCase()){case"active":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"completed":return"bg-blue-100 text-blue-800 border-blue-200";case"draft":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},n=m=>{const c=new Date(m),x=new Date,g=c.getTime()-x.getTime(),h=Math.ceil(g/(1e3*60*60*24));return h<0?`${Math.abs(h)} days overdue`:h===0?"Due today":h===1?"Due tomorrow":`${h} days left`},i=()=>s.key_cost===0?0:(s.gem_reward_base/s.key_cost).toFixed(1),p=()=>{window.location.href=`/drops/${s.id}`},u=s.preview_image||s.content_url||`https://images.unsplash.com/photo-1503264116251-35a269479413?auto=format&fit=crop&w=1200&q=80&sat=-15&sig=${s.id}`;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5 cursor-pointer hover:shadow-lg transition-all duration-200 hover:border-gray-200",onClick:p,children:[e.jsx("div",{className:"mb-4 -mx-5 -mt-5",children:e.jsx("div",{className:"h-40 w-full overflow-hidden rounded-t-xl",children:e.jsx("img",{src:u,alt:s.title,className:"h-full w-full object-cover transition-transform duration-300 hover:scale-105",onError:m=>{m.target.src=`https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=1200&q=80&sig=${s.id}`}})})}),e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:(s.creator_name||"U")[0].toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-semibold text-gray-900 text-base hover:text-purple-600 transition-colors",children:s.creator_name||"Unknown Creator"}),e.jsx("span",{className:"text-gray-400",children:"•"}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[s.current_participants," participants"]}),e.jsx("span",{className:"text-xs text-gray-400",children:"•"}),e.jsx("span",{className:"text-xs text-gray-500",children:s.platform||"Any platform"})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-purple-600 mb-1",children:[e.jsx(os,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-semibold",children:[s.gem_pool_remaining," gems"]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Pool Remaining"})]})]}),e.jsxs("div",{className:"mb-4",onClick:m=>m.stopPropagation(),children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-2 hover:text-purple-600 transition-colors leading-tight",children:s.title}),s.description&&e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${a(s.status)}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${r(s.difficulty)}`,children:t(s.difficulty)}),s.is_proof_drop&&e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:"Proof Drop"}),s.is_paid_drop&&e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800 border border-emerald-200",children:"Paid Drop"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(be,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Cost"})]}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:s.key_cost}),e.jsx("div",{className:"text-xs text-gray-500",children:"keys"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(X,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Reward"})]}),e.jsx("div",{className:"text-lg font-bold text-purple-600",children:s.gem_reward_base}),e.jsx("div",{className:"text-xs text-gray-500",children:"gems"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(re,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"ROI"})]}),e.jsxs("div",{className:"text-lg font-bold text-green-600",children:[i(),"x"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"per key"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(pe,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Participants"})]}),e.jsx("div",{className:"text-lg font-bold text-blue-600",children:s.current_participants}),e.jsx("div",{className:"text-xs text-gray-500",children:"joined"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Xe,{className:"w-4 h-4"}),e.jsx("span",{children:s.deadline_at?n(s.deadline_at):"No deadline"})]}),s.requirements&&e.jsxs("div",{className:"text-xs",children:["Requirements: ",s.requirements.length>30?s.requirements.substring(0,30)+"...":s.requirements]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(ts,{className:"w-4 h-4"}),e.jsxs("span",{children:["Created ",new Date(s.created_at).toLocaleDateString()]})]}),e.jsx("button",{onClick:m=>{m.stopPropagation(),l?.(s)},className:`px-6 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-2 ${s.status?.toLowerCase()==="active"?"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white hover:shadow-lg hover:-translate-y-0.5":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,disabled:s.status?.toLowerCase()!=="active",children:s.status?.toLowerCase()==="active"?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Apply Now"}),e.jsx(be,{className:"w-4 h-4"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Not Available"}),e.jsx(Xe,{className:"w-4 h-4"})]})})]})]})}const vl=()=>{const s=()=>{window.location.reload()};return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-orange-100 to-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(re,{className:"w-12 h-12 text-orange-500"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No personalized content yet"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"We're building your personalized feed based on your interests and activity. Check back soon or explore other content in the meantime!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs("button",{onClick:()=>window.location.href="/create",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 mx-auto sm:mx-0",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{children:"Create Content"})]}),e.jsxs("button",{onClick:s,className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center space-x-2 mx-auto sm:mx-0",children:[e.jsx(Ws,{className:"w-4 h-4"}),e.jsx("span",{children:"Refresh Feed"})]})]})]})};function ar({isOpen:s,onClose:l,forecast:t,onPredictionPlaced:r}){const[a,n]=o.useState("over"),[i,p]=o.useState(""),[u,m]=o.useState(!1),[c,x]=o.useState(""),[g,h]=o.useState({balance:0});o.useEffect(()=>{s&&j()},[s]);const j=async()=>{try{const f=await fetch("/api/users/me/wallets");if(f.ok){const b=(await f.json()).find(F=>F.currency_type==="USD");h({balance:b?.balance||0})}}catch(f){console.error("Failed to fetch wallet:",f)}},y=async f=>{f.preventDefault(),m(!0),x("");try{const d=await fetch(`/api/social-forecasts/${t.id}/predict`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prediction_amount:parseFloat(i),prediction_side:a})});if(d.ok)r(),l(),p(""),n("over");else{const b=await d.json();x(b.error||"Failed to place prediction")}}catch{x("Failed to place prediction")}finally{m(!1)}},N=i?(parseFloat(i)*t.odds).toFixed(2):"0",w=f=>{const d=new Date,F=new Date(f).getTime()-d.getTime();if(F<=0)return"Expired";const v=Math.floor(F/(1e3*60*60)),C=Math.floor(F%(1e3*60*60)/(1e3*60));return v>24?`${Math.floor(v/24)}d ${v%24}h`:`${v}h ${C}m`};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(re,{className:"w-5 h-5 mr-2 text-blue-600"}),"Make Your Prediction"]}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:e.jsx(se,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Forecast Details"}),e.jsx("span",{className:"text-sm text-gray-500",children:t.platform})]}),t.content_title&&e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:t.content_title}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Metric"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(be,{className:"w-4 h-4 mr-1 text-blue-600"}),t.forecast_type," ",t.target_value.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Current Pool"}),e.jsxs("p",{className:"font-medium text-green-600",children:["$",t.pool_size.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Odds"}),e.jsxs("p",{className:"font-medium text-blue-600",children:[t.odds,"x payout"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Time Left"}),e.jsxs("p",{className:"font-medium flex items-center",children:[e.jsx(Xe,{className:"w-4 h-4 mr-1 text-gray-400"}),w(t.expires_at)]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Creator's Prediction"}),e.jsxs("p",{className:"text-sm font-medium text-blue-600",children:[t.creator_side.toUpperCase()," • $",t.creator_initial_amount.toFixed(2)," staked"]})]})]}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[c&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex items-center",children:[e.jsx(we,{className:"w-4 h-4 text-red-600 mr-2"}),e.jsx("p",{className:"text-red-600 text-sm",children:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Your Prediction"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{type:"button",onClick:()=>n("over"),className:`p-4 rounded-lg border-2 transition-colors ${a==="over"?"border-green-500 bg-green-50 text-green-700":"border-gray-200 bg-white text-gray-700 hover:border-green-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold",children:"OVER"}),e.jsxs("p",{className:"text-xs mt-1",children:["Will exceed ",t.target_value.toLocaleString()]})]})}),e.jsx("button",{type:"button",onClick:()=>n("under"),className:`p-4 rounded-lg border-2 transition-colors ${a==="under"?"border-red-500 bg-red-50 text-red-700":"border-gray-200 bg-white text-gray-700 hover:border-red-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold",children:"UNDER"}),e.jsxs("p",{className:"text-xs mt-1",children:["Will not reach ",t.target_value.toLocaleString()]})]})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(oe,{className:"w-4 h-4 inline mr-1"}),"Prediction Amount (USD)"]}),e.jsx("input",{type:"number",step:"0.01",placeholder:"Enter amount",value:i,onChange:f=>p(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:"1",max:g.balance}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mt-1",children:[e.jsxs("span",{children:["Available: $",g.balance.toFixed(2)]}),e.jsx("span",{children:"Min: $1.00"})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[5,10,25,50].map(f=>e.jsxs("button",{type:"button",onClick:()=>p(f.toString()),disabled:f>g.balance,className:"py-2 px-3 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:["$",f]},f))}),i&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Prediction Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Your prediction:"}),e.jsx("span",{className:"font-medium text-blue-600",children:a.toUpperCase()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Amount staked:"}),e.jsxs("span",{className:"font-medium",children:["$",i]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Potential payout:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["$",N]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Potential profit:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["$",(parseFloat(N)-parseFloat(i)).toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u||!i||parseFloat(i)>g.balance,className:`px-6 py-2 rounded-lg font-medium transition-colors ${a==="over"?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"} disabled:opacity-50 disabled:cursor-not-allowed`,children:u?"Placing...":`Predict ${a.toUpperCase()} $${i||"0"}`})]})]})]})]})}):null}function rr({content:s,isOpen:l,onClose:t,onTip:r}){const[a,n]=o.useState(1),[i,p]=o.useState(!1),u=[1,5,10,25,50,100],m=async()=>{if(!(a<1)){p(!0);try{await r(s,a),t(),n(1)}catch(c){console.error("Failed to send tip:",c)}finally{p(!1)}}};return l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:(s.creator_name||s.creator_username||"U")[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Tip Creator"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Support ",s.creator_name||s.creator_username||"this creator"]})]})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Select Tip Amount"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose how many gems you'd like to tip"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-4",children:u.map(c=>e.jsx("button",{onClick:()=>n(c),className:`py-2 px-3 rounded-lg text-sm font-medium transition-all duration-200 ${a===c?"bg-purple-500 text-white ring-2 ring-purple-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[e.jsx(Me,{className:"w-4 h-4"}),e.jsx("span",{children:c})]})},c))}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"number",min:"1",max:"1000",value:a,onChange:c=>n(Math.max(1,parseInt(c.target.value)||1)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Custom amount"})}),e.jsxs("div",{className:"flex items-center space-x-1 text-gray-500",children:[e.jsx(Me,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"gems"})]})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"You're tipping"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[e.jsx(Me,{className:"w-5 h-5 inline mr-1 text-purple-500"}),a," gems"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Creator receives"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",(a*.01).toFixed(2)]})]})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:t,className:"flex-1 py-2 px-4 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:m,disabled:i||a<1,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-2 px-4 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Sending..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Cs,{className:"w-4 h-4"}),e.jsx("span",{children:"Send Tip"})]})})]})]})]})}):null}function wl(){const{user:s,logout:l}=Ue(),t=Ce(),[r,a]=o.useState([]),[n,i]=o.useState([]),[p,u]=o.useState([]),[m,c]=o.useState(null),[,x]=o.useState(!0),[g,h]=o.useState("for-you"),[j,y]=o.useState([]),[N,w]=o.useState(!1),[f,d]=o.useState(!1),[b,F]=o.useState(!1),[,v]=o.useState(!1),[C,E]=o.useState(null),[L,M]=o.useState(null),[T,B]=o.useState(null),[k,S]=o.useState(!1),[$,z]=o.useState(null),[_,G]=o.useState(!1),[q,ae]=o.useState(null),[de,A]=o.useState(!1),[D,H]=o.useState(null),[J,W]=o.useState(!1),[P,Y]=o.useState(!1),[ce,Be]=o.useState(null),[ms,Je]=o.useState(!1),[Se,xs]=o.useState(null),[ze,Ve]=o.useState(!1),We=U=>`${cs}${U}`,as=m?.username||(m?.email?m.email.split("@")[0]:void 0)||(s?.username?String(s.username):void 0)||(s?.email?s.email.split("@")[0]:void 0)||"me",He=`/profile/${encodeURIComponent(as)}`;o.useEffect(()=>{I(),Q();const U=Z=>{ze&&!Z.target.closest(".user-menu")&&Ve(!1)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[ze]);const O=U=>{t(`/content/${U.id}`)},K=async()=>{try{const U=localStorage.getItem("authToken");U&&await fetch(We("/api/auth/logout"),{method:"POST",headers:{Authorization:`Bearer ${U}`,"Content-Type":"application/json"}})}catch(U){console.error("Logout error:",U)}finally{localStorage.removeItem("authToken"),t("/auth")}},I=async()=>{try{const U=localStorage.getItem("authToken"),Z={"Content-Type":"application/json"};U&&(Z.Authorization=`Bearer ${U}`);const[le,Ee,Fs,ge]=await Promise.all([fetch(We("/api/content"),{headers:Z,credentials:"include"}),fetch(We("/api/drops?limit=10"),{headers:Z,credentials:"include"}),fetch(We("/api/users/me/wallets"),{headers:Z,credentials:"include"}),fetch(We("/api/content/sponsored"),{headers:Z,credentials:"include"})]);if(le.ok){const Ge=await le.json();Array.isArray(Ge)?a(Ge):(console.error("Content data is not an array:",Ge),a([]))}else console.error("Content fetch failed:",le.status),a([]);if(Ee.ok){const Ge=await Ee.json();Array.isArray(Ge)?i(Ge.slice(0,5)):i([])}else i([]);if(Fs.ok){const Ge=await Fs.json();u(Array.isArray(Ge)?Ge:[])}else u([]);if(ge.ok){const Ge=await ge.json();y(Array.isArray(Ge)?Ge:[])}else y([])}catch(U){console.error("Failed to fetch feeds:",U),a([]),i([]),u([]),y([])}finally{x(!1)}},Q=async()=>{if(!s){console.log("No authenticated user, skipping user data fetch");return}const U=localStorage.getItem("authToken");if(!U){console.log("No auth token found, redirecting to login"),window.location.href="/auth";return}try{const Z={"Content-Type":"application/json",Authorization:`Bearer ${U}`},le=await fetch(We("/api/auth/profile"),{headers:Z,credentials:"include"});if(le.ok){const Ee=await le.json();c(Ee.user)}else console.error("Failed to fetch user data:",le.status,le.statusText),(le.status===401||le.status===500)&&(localStorage.removeItem("authToken"),window.location.href="/auth")}catch(Z){console.error("Failed to fetch user data:",Z)}},me=async(U,Z)=>{try{const le=await fetch("/api/users/social-action",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({action_type:U,reference_id:Z,reference_type:"content"})});if(le.ok){const Ee=await le.json();Ts(Ee),Q()}}catch(le){console.error(`Failed to record ${U} action:`,le)}},Ts=U=>{const Z=document.createElement("div");Z.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-pulse",Z.innerHTML=`
      <div class="flex items-center space-x-2">
        <span>+${U.points_earned} points!</span>
        <span class="text-xs">(${U.multiplier.toFixed(1)}x multiplier)</span>
      </div>
    `,document.body.appendChild(Z),setTimeout(()=>{document.body.contains(Z)&&document.body.removeChild(Z)},3e3)},je=async(U,Z)=>{try{if((await fetch("/api/content/buy-shares",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({content_id:U.id,shares_count:Z})})).ok)await I();else throw new Error("Purchase failed")}catch(le){throw console.error("Failed to buy shares:",le),le}},ve=async(U,Z)=>{try{if((await fetch("/api/content/tip",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({content_id:U.id,tip_amount:Z})})).ok){const Ee=document.createElement("div");Ee.className="fixed top-4 right-4 bg-purple-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-bounce",Ee.innerHTML=`
          <div class="flex items-center space-x-2">
            <span class="text-lg">💎</span>
            <div>
              <div class="font-semibold">Tip sent!</div>
              <div class="text-xs opacity-90">Tipped ${Z} gems to ${U.creator_name||U.creator_username||"creator"}</div>
            </div>
          </div>
        `,document.body.appendChild(Ee),setTimeout(()=>{document.body.contains(Ee)&&document.body.removeChild(Ee)},4e3),Q()}else throw new Error("Tip failed")}catch(le){throw console.error("Failed to send tip:",le),le}},ps=U=>{E(U),w(!0)},gs=U=>{H({id:U.id,title:U.title}),A(!0)},fs=()=>{W(!0)},rs=U=>{Be(U),Y(!0)},De=U=>{z(U),S(!0)},R=U=>{xs(U),Je(!0)},ne=U=>{ae(U),G(!0)},ye=async()=>{if(q)try{const U=await fetch(`/api/content/${q.id}`,{method:"DELETE",credentials:"include"});if(U.ok)a(Z=>Z.filter(le=>le.id!==q.id)),G(!1),ae(null);else{const Z=await U.json();alert(Z.error||"Failed to delete content")}}catch(U){console.error("Error deleting content:",U),alert("Failed to delete content")}},us=U=>{switch(U){case"super":return e.jsx(Ke,{className:"w-4 h-4 text-yellow-600"});case"premium":return e.jsx(X,{className:"w-4 h-4 text-purple-600"});default:return e.jsx(ke,{className:"w-4 h-4 text-gray-600"})}},vt=U=>{switch(U){case"super":return 2;case"premium":return 1.5;default:return 1}},wt=()=>m?m.master_key_activated_at?m.points_streak_days===0?{text:"Start Your Streak",subtext:"Engage with content today to begin earning streaks",action:()=>h("social"),color:"from-blue-500 to-purple-500",icon:e.jsx(it,{className:"w-5 h-5"})}:m.gems_balance<10?{text:"Get More Gems",subtext:"Purchase gems to access paid drops and predictions",action:()=>window.location.href="/invest/portfolio",color:"from-purple-500 to-pink-500",icon:e.jsx(Ne,{className:"w-5 h-5"})}:{text:"Explore Growth Hub",subtext:"Stake gems, fund projects, and secure your earnings",action:()=>window.location.href="/growth-hub",color:"from-green-500 to-emerald-500",icon:e.jsx(re,{className:"w-5 h-5"})}:{text:"Activate Master Key",subtext:"Complete a Proof Drop to unlock premium features",action:()=>window.location.href="/earn?type=proof",color:"from-orange-500 to-red-500",icon:e.jsx(be,{className:"w-5 h-5"})}:null,aa=()=>{const U=[];j.forEach(ge=>{U.push({type:"content",data:ge,isSponsored:!0})});const Z=n.filter(ge=>ge.gem_reward_base>=50),le=r.filter(ge=>ge.available_shares>0&&!j.some(Ge=>Ge.id===ge.id)),Ee=le.length>0?le:r,Fs=Z.length>0?Z:n;for(let ge=0;ge<Math.max(Ee.length,Fs.length);ge++)Ee[ge]&&U.push({type:"content",data:Ee[ge]}),Fs[ge]&&U.push({type:"drop",data:Fs[ge]});return U.length===0?[...j.map(ge=>({type:"content",data:ge,isSponsored:!0})),...r.slice(0,5).map(ge=>({type:"content",data:ge})),...n.slice(0,5).map(ge=>({type:"drop",data:ge}))].slice(0,10):U.slice(0,10)},Ms=wt();return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"h-16"}),e.jsx("div",{className:"fixed top-4 right-4 z-50",children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Ve(!ze),className:"user-menu flex items-center space-x-2 p-2 rounded-lg bg-white shadow-md hover:shadow-lg transition-all",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:(m?.display_name||m?.username||s?.email||"U")[0].toUpperCase()}),e.jsx(is,{className:`w-4 h-4 text-gray-600 transition-transform duration-200 ${ze?"rotate-90":""}`})]}),ze&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[e.jsxs("button",{onClick:()=>{t(He),Ve(!1)},className:"w-full flex items-center space-x-3 px-4 py-2 text-left text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(Le,{className:"w-4 h-4"}),e.jsx("span",{children:"Profile"})]}),e.jsxs("button",{onClick:()=>{t("/growth-hub"),Ve(!1)},className:"w-full flex items-center space-x-3 px-4 py-2 text-left text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:"Growth Hub"})]}),e.jsxs("button",{onClick:()=>{t("/advertiser"),Ve(!1)},className:"w-full flex items-center space-x-3 px-4 py-2 text-left text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(qt,{className:"w-4 h-4"}),e.jsx("span",{children:"Advertiser"})]}),e.jsx("hr",{className:"my-1 border-gray-200"}),e.jsxs("button",{onClick:()=>{K(),Ve(!1)},className:"w-full flex items-center space-x-3 px-4 py-2 text-left text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(Ot,{className:"w-4 h-4"}),e.jsx("span",{children:"Logout"})]})]})]})}),e.jsx("div",{className:"max-w-4xl mx-auto space-y-6 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 via-red-500 to-pink-500 rounded-2xl p-6 text-white relative overflow-hidden shadow-lg",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='white' fill-opacity='0.1'%3E%3Cpath d='M30 30c0 16.569-13.431 30-30 30v-60c16.569 0 30 13.431 30 30z'/%3E%3C/g%3E%3C/svg%3E")`}}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2 leading-tight",children:["Welcome back, ",s?.google_user_data?.given_name||"Creator","! 👋"]}),e.jsx("p",{className:"text-orange-100 text-base",children:"Ready to turn your influence into income?"})]}),m&&e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-2 justify-end mb-1",children:[us(m.user_tier),e.jsx("span",{className:"text-base font-semibold capitalize",children:m.user_tier})]}),e.jsxs("div",{className:"text-sm text-orange-200",children:[vt(m.user_tier),"x multiplier"]}),m.points_streak_days>0&&e.jsxs("div",{className:"flex items-center justify-end space-x-1 mt-1",children:[e.jsx(it,{className:"w-4 h-4 text-orange-300"}),e.jsxs("span",{className:"text-sm text-orange-200",children:[m.points_streak_days," day streak"]})]})]})]}),m&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[{value:(m.points_balance||0).toLocaleString(),label:"Points",icon:e.jsx(Me,{className:"w-5 h-5"}),color:"text-blue-200"},{value:m.keys_balance||0,label:"Keys",icon:e.jsx(be,{className:"w-5 h-5"}),color:"text-orange-200"},{value:(m.gems_balance||0).toFixed(1),label:"Gems",icon:e.jsx(Ne,{className:"w-5 h-5"}),color:"text-purple-200"},{value:"View",label:"Saved",icon:e.jsx(ut,{className:"w-5 h-5"}),color:"text-green-200",action:fs}].map((U,Z)=>e.jsxs("div",{className:`bg-white/10 backdrop-blur-sm rounded-xl p-4 text-center hover:bg-white/20 transition-all duration-200 cursor-pointer hover:-translate-y-1 ${U.action?"cursor-pointer":""}`,onClick:U.action||void 0,children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[e.jsx("span",{className:U.color,children:U.icon}),e.jsx("span",{className:"text-sm text-white/90 font-medium",children:U.label})]}),e.jsx("p",{className:"text-xl font-bold text-white",children:U.value})]},Z))}),Ms&&e.jsx("button",{onClick:Ms.action,className:`w-full bg-gradient-to-r ${Ms.color} hover:shadow-xl text-white rounded-xl p-5 transition-all duration-200 hover:-translate-y-1 hover:scale-[1.02]`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[Ms.icon,e.jsx("span",{className:"font-semibold text-lg",children:Ms.text})]}),e.jsx("p",{className:"text-white/90 text-base",children:Ms.subtext})]}),e.jsx(is,{className:"w-6 h-6 opacity-75"})]})})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex",children:[{key:"for-you",label:"For You",icon:e.jsx(X,{className:"w-5 h-5"})},{key:"social",label:"Social Feed",icon:e.jsx(Rt,{className:"w-5 h-5"})},{key:"drops",label:"Opportunities",icon:e.jsx(oe,{className:"w-5 h-5"})}].map(U=>e.jsxs("button",{onClick:()=>h(U.key),className:`flex-1 flex items-center justify-center space-x-2 py-4 px-6 font-medium text-base transition-all duration-200 ${g===U.key?"border-b-2 border-orange-500 text-orange-600 bg-orange-50 shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[U.icon,e.jsx("span",{children:U.label})]},U.key))})}),e.jsxs("div",{className:"p-6",children:[g==="for-you"&&e.jsx("div",{className:"space-y-6",children:aa().length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx(it,{className:"w-5 h-5 text-orange-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Trending opportunities for you"})]}),aa().map((U,Z)=>e.jsx("div",{children:U.type==="content"?e.jsx(Dt,{content:U.data,onBuyShares:ps,onShare:gs,onSocialAction:me,onTip:rs,onNavigate:O,onPredict:R,currentUser:m,onEdit:De,onDelete:ne,isSponsored:U.isSponsored}):e.jsx(xa,{drop:U.data})},Z))]}):e.jsx(vl,{})}),g==="social"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsxs("div",{className:"text-sm text-blue-700",children:["Showing ",r.length," content pieces"]}),e.jsx("button",{onClick:I,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Refresh Feed"})]}),r.length>0?[...j.map(U=>e.jsx(Dt,{content:U,onBuyShares:ps,onShare:gs,onSocialAction:me,onTip:rs,onNavigate:O,onPredict:R,currentUser:m,onEdit:De,onDelete:ne,isSponsored:!0},`sponsored-${U.id}`)),...r.filter(U=>!j.some(Z=>Z.id===U.id)).map(U=>e.jsx(Dt,{content:U,onBuyShares:ps,onShare:gs,onSocialAction:me,onTip:rs,onNavigate:O,onPredict:R,currentUser:m,onEdit:De,onDelete:ne},U.id))]:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(re,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No content yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Be the first to create and share content!"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>window.location.href="/create",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 mx-auto",children:[e.jsx(Plus,{className:"w-4 h-4"}),e.jsx("span",{children:"Create Content"})]}),e.jsx("button",{onClick:I,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Check for new content"})]})]})]}),g==="drops"&&e.jsx("div",{className:"space-y-4",children:n.length>0?n.map(U=>e.jsx(xa,{drop:U},U.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(oe,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No opportunities available"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Check back later for new earning opportunities!"}),e.jsx("button",{onClick:()=>window.location.href="/earn",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200",children:"Browse All Opportunities"})]})})]})]}),C&&e.jsx(Qa,{content:C,wallet:p?.find(U=>U.currency_type==="USD"),isOpen:N,onClose:()=>{w(!1),E(null)},onPurchase:je}),e.jsx(Za,{user:m,contentId:L?.id,contentTitle:L?.title,isOpen:f,onClose:()=>{d(!1),M(null)},onSuccess:()=>{Q(),I()}}),e.jsx(er,{user:m,contentId:T?.id,contentTitle:T?.title,contentPlatform:T?.platform,contentUrl:T?.url,isOpen:b,onClose:()=>{F(!1),B(null)},onSuccess:()=>{Q(),I()}}),$&&e.jsx(Zt,{isOpen:k,onClose:()=>{S(!1),z(null)},onSuccess:handleEditSuccess,content:$}),e.jsx(yt,{isOpen:_,onClose:()=>{G(!1),ae(null)},onConfirm:ye,title:"Delete Content",message:`Are you sure you want to delete "${q?.title}"? This action cannot be undone and will remove all associated data.`,confirmText:"Delete",cancelText:"Cancel",type:"danger"}),D&&e.jsx(gl,{isOpen:de,onClose:()=>{A(!1),H(null)},contentId:D.id,contentTitle:D.title}),e.jsx(fl,{isOpen:J,onClose:()=>W(!1),user:m}),ce&&e.jsx(rr,{content:ce,isOpen:P,onClose:()=>{Y(!1),Be(null)},onTip:ve}),Se&&e.jsx(ar,{forecast:{id:Se.id,creator_name:Se.creator_name||Se.creator_username||"Unknown",platform:Se.platform||"Unknown",content_url:Se.platform_url||"",content_title:Se.title,forecast_type:"engagement",target_value:1e3,current_value:500,odds:2.5,pool_size:250,creator_initial_amount:100,creator_side:"over",expires_at:new Date(Date.now()+10080*60*1e3).toISOString()},isOpen:ms,onClose:()=>{Je(!1),xs(null)},onPredictionPlaced:()=>{Je(!1),xs(null),I()}})]})}function _l(){const{user:s}=Ue(),l=ws(),[t,r]=o.useState([]),[a,n]=o.useState(null),[i,p]=o.useState(!0),[u,m]=o.useState(!1),[c,x]=o.useState(""),[g,h]=o.useState(""),[j,y]=o.useState("");o.useEffect(()=>{w(),s&&N()},[s]),o.useEffect(()=>{const b=new URLSearchParams(l.search).get("create");(b==="proof"||b==="paid")&&a&&a.user_type==="advertiser"&&m(!0)},[l,a]);const N=async()=>{try{const d=ue(),b=await ns("/api/users/me",{credentials:"include",headers:d});if(b.ok){const F=await b.json();n(F)}}catch(d){console.error("Failed to fetch user data:",d)}},w=async()=>{try{const b=await(await ns("/api/drops")).json();r(b)}catch(d){console.error("Failed to fetch drops:",d)}finally{p(!1)}},f=t.filter(d=>{const b=d.title||"",F=d.description||"",v=d.drop_type||"",C=d.difficulty||"";return(b.toLowerCase().includes(c.toLowerCase())||F.toLowerCase().includes(c.toLowerCase()))&&(!g||v===g)&&(!j||C===j)});return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Earn"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Discover earning drops that match your skills"})]}),a&&a.user_type==="advertiser"&&e.jsxs("button",{onClick:()=>m(!0),className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200 shadow-lg",children:[e.jsx(Re,{className:"w-5 h-5"}),e.jsx("span",{children:"Create Drop"})]})]}),e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ks,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search drops...",value:c,onChange:d=>x(d.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("select",{value:g,onChange:d=>h(d.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Drop Types"}),sr.options.map(d=>e.jsx("option",{value:d,children:d.replace(/_/g," ").replace(/\b\w/g,b=>b.toUpperCase())},d))]}),e.jsxs("select",{value:j,onChange:d=>y(d.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Difficulties"}),tr.options.map(d=>e.jsx("option",{value:d,className:"capitalize",children:d},d))]}),e.jsxs("button",{className:"flex items-center justify-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Ma,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{children:"More Filters"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(d=>e.jsx(Cl,{drop:d},d.id))}),f.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ks,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No drops found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search criteria or create a new drop."})]}),u&&a&&a.user_type==="advertiser"&&e.jsx(Sl,{onClose:()=>m(!1),onSuccess:()=>{m(!1),w()}})]})}const kl=(s,l="General")=>(s&&s.trim().length>0?s:l).replace(/_/g," ").replace(/\b\w/g,r=>r.toUpperCase());function Cl({drop:s}){const l=Ce(),t=p=>{if(s?.content_url)return s.content_url;switch((p||"").toLowerCase()){case"content_clipping":return"https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=400&h=250&fit=crop";case"reviews":return"https://images.unsplash.com/photo-1556155092-490a1ba16284?w=400&h=250&fit=crop";case"ugc_creation":return"https://images.unsplash.com/photo-1558403194-611308249627?w=400&h=250&fit=crop";case"affiliate_referral":return"https://images.unsplash.com/photo-1516251193007-45ef944ab0c6?w=400&h=250&fit=crop";case"surveys":return"https://images.unsplash.com/photo-1432888622747-4eb9a8efeb07?w=400&h=250&fit=crop";case"challenges_events":return"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=400&h=250&fit=crop";default:return"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=400&h=250&fit=crop"}},r=()=>{l(`/drops/${s.id}`)},a=s.title?.toLowerCase().includes("[demo]")||s.title?.toLowerCase().includes("demo")||s.description?.toLowerCase().includes("demo"),n=p=>{switch(p||""){case"content_clipping":return"✂️";case"reviews":return"⭐";case"ugc_creation":return"🎨";case"affiliate_referral":return"🔗";case"surveys":return"📊";case"challenges_events":return"🏆";default:return"📝"}},i=p=>{switch((p||"").toLowerCase()){case"easy":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"hard":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return e.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-shadow",children:[a&&e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white px-4 py-2 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm font-medium",children:[e.jsx("span",{children:"🧪"}),e.jsx("span",{children:"DEMO DROP - No real gems awarded"}),e.jsx("span",{children:"🧪"})]})}),e.jsxs("div",{className:"relative cursor-pointer",onClick:r,children:[e.jsx("img",{src:t(s.drop_type),alt:s.title,className:"w-full h-48 object-cover hover:opacity-95 transition-opacity"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20"}),e.jsxs("div",{className:"absolute top-4 right-4 flex space-x-2",children:[a&&e.jsx("span",{className:"bg-orange-500/90 backdrop-blur-sm text-white px-2 py-1 rounded-full text-xs font-medium",children:"DEMO"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${i(s.difficulty)}`,children:s.difficulty})]}),e.jsx("div",{className:"absolute top-4 left-4",children:s.is_proof_drop?e.jsx("div",{className:"bg-green-500/90 backdrop-blur-sm px-2 py-1 rounded-full",children:e.jsx("span",{className:"text-white text-sm font-medium",children:"Proof Drop"})}):s.is_paid_drop?e.jsx("div",{className:"bg-purple-500/90 backdrop-blur-sm px-2 py-1 rounded-full",children:e.jsx("span",{className:"text-white text-sm font-medium",children:"Paid Drop"})}):e.jsxs("div",{className:"flex items-center space-x-1 bg-orange-500/90 backdrop-blur-sm px-2 py-1 rounded-full",children:[e.jsx(Ye,{className:"w-3 h-3 text-white"}),e.jsx("span",{className:"text-white text-sm font-medium",children:s.key_cost})]})}),e.jsxs("div",{className:"absolute bottom-4 left-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ne,{className:"w-6 h-6 text-purple-300 drop-shadow"}),e.jsxs("p",{className:"text-3xl font-bold text-white drop-shadow-lg",children:[s.gem_reward_base,a&&e.jsx("span",{className:"text-lg opacity-80",children:" (Demo)"})]})]}),e.jsx("p",{className:"text-sm text-white/80 drop-shadow",children:a?"Demo gems (no real value)":"Gems reward"})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xl",children:n(s.drop_type)}),s.is_proof_drop?e.jsx("div",{className:"flex items-center space-x-1 text-sm bg-green-100 px-2 py-1 rounded",children:e.jsx("span",{className:"font-medium text-green-700",children:"Proof Drop - Free"})}):s.is_paid_drop?e.jsx("div",{className:"flex items-center space-x-1 text-sm bg-purple-100 px-2 py-1 rounded",children:e.jsx("span",{className:"font-medium text-purple-700",children:"Paid Drop"})}):e.jsxs("div",{className:"flex items-center space-x-1 text-sm",children:[e.jsx(Ye,{className:"w-3 h-3 text-orange-600"}),e.jsxs("span",{className:"font-medium text-orange-700",children:[s.key_cost," keys"]})]})]})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 cursor-pointer hover:text-orange-600 transition-colors",onClick:r,children:s.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:s.description||"No description available."}),e.jsx("div",{className:"mb-4",children:e.jsx(Gs,{username:s.creator_name,displayName:s.creator_name,avatarUrl:s.creator_avatar,className:"flex items-center space-x-2",size:"sm"})}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.current_participants,"/",s.max_participants||"∞"," participants"]})]}),s.follower_threshold>0&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.follower_threshold,"+ followers required"]})]}),s.deadline_at&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(ts,{className:"w-4 h-4"}),e.jsxs("span",{children:["Due ",new Date(s.deadline_at).toLocaleDateString()]})]}),s.time_commitment&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(Xe,{className:"w-4 h-4"}),e.jsx("span",{children:s.time_commitment})]}),s.gem_pool_total>0&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.gem_pool_remaining??s.gem_pool_total," gems remaining in pool"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full ${i(s.difficulty)}`,children:kl(s.drop_type)}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:r,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"View Details"})})]})]})]})}const Sl=({onClose:s,onSuccess:l})=>{const t=ws(),a=new URLSearchParams(t.search).get("create"),n=()=>a==="paid"?"paid":a==="move"?"move":"proof",[i,p]=o.useState(!1),[u,m]=o.useState(!1),[c,x]=o.useState("upload"),[g,h]=o.useState(null),[j,y]=o.useState(null),[N,w]=o.useState(n()),f=o.useRef(null),d=M=>({title:"",description:"",drop_type:"content_clipping",difficulty:"easy",key_cost:M==="paid"?1:0,gem_reward_base:M==="paid"?50:0,gem_pool_total:0,follower_threshold:0,time_commitment:"",requirements:"",deliverables:"",deadline_at:"",max_participants:void 0,platform:"",content_url:"",is_proof_drop:M==="proof",is_paid_drop:M==="paid",move_cost_points:0,key_reward_amount:0,move_actions:[]}),[b,F]=o.useState(()=>d(n()));o.useEffect(()=>{F(M=>({...M,is_proof_drop:N==="proof",is_paid_drop:N==="paid",key_cost:N==="paid"?1:0,gem_reward_base:N==="paid"?50:0}))},[N]);const v=M=>{if(M.target.files&&M.target.files[0]){const T=M.target.files[0];y(T);const B=new FileReader;B.onload=k=>{k.target?.result&&h(k.target.result)},B.readAsDataURL(T)}},C=()=>{y(null),h(null),f.current&&(f.current.value="")},E=async M=>{try{m(!0);const T=await new Promise((S,$)=>{const z=new FileReader;z.onload=()=>{const _=z.result;S(_.split(",")[1])},z.onerror=$,z.readAsDataURL(M)}),B=await ns("/api/content/upload-image",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({image:T,filename:M.name,contentType:M.type,description:b.title||"Marketing drop",platform:b.platform||"general"})});if(!B.ok)throw new Error("Failed to upload image");return(await B.json()).url}catch(T){return console.error("Error uploading image:",T),"https://images.unsplash.com/photo-1516251193007-45ef944ab0c6?w=800&h=600&fit=crop&crop=center"}finally{m(!1)}},L=async M=>{M.preventDefault(),p(!0);try{let T=b.content_url;if(c==="upload"&&j)try{T=await E(j)}catch(k){console.error("Error uploading image:",k),alert("Failed to upload image. Please try again.");return}else if(c==="link"&&b.content_url)try{if(!(await fetch(b.content_url,{method:"HEAD"})).ok)throw new Error("Invalid image URL")}catch{alert("Please provide a valid image URL");return}const B=await ns("/api/drops",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...b,content_url:T,drop_type:N==="proof"?"content_clipping":N==="paid"?"paid_content":"action_required",difficulty:b.difficulty||"easy",deadline_at:b.deadline_at||null,max_participants:b.max_participants||null,key_cost:N==="paid"?b.key_cost||1:0,gem_reward_base:N==="paid"?b.gem_reward_base||50:0,is_proof_drop:N==="proof",is_paid_drop:N==="paid",move_cost_points:N==="move"&&b.move_cost_points||0,key_reward_amount:N==="move"&&b.key_reward_amount||0})});if(!B.ok){const k=await B.json().catch(()=>({}));throw new Error(k.message||"Failed to create drop")}l(),s()}catch(T){console.error("Error creating drop:",T),alert(T instanceof Error?T.message:"Failed to create drop")}finally{p(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Create New Drop"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700","aria-label":"Close modal",children:"✕"})]}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Drop Type"}),e.jsx("div",{className:"flex space-x-4",children:["proof","paid","move"].map(M=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",className:"h-4 w-4 text-orange-500",checked:N===M,onChange:()=>w(M)}),e.jsx("span",{className:"ml-2 capitalize",children:M})]},M))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded",value:b.title,onChange:M=>F({...b,title:M.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{className:"w-full p-2 border rounded",rows:3,value:b.description,onChange:M=>F({...b,description:M.target.value}),required:!0})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Difficulty"}),e.jsxs("select",{className:"w-full p-2 border rounded",value:b.difficulty,onChange:M=>F({...b,difficulty:M.target.value}),children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"hard",children:"Hard"})]})]}),N==="paid"&&e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Key Cost"}),e.jsx("input",{type:"number",min:"1",className:"w-full p-2 border rounded",value:b.key_cost,onChange:M=>F({...b,key_cost:Number(M.target.value)}),required:N==="paid"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",className:"h-4 w-4 text-orange-500",checked:c==="upload",onChange:()=>x("upload")}),e.jsx("span",{className:"ml-2",children:"Upload Image"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",className:"h-4 w-4 text-orange-500",checked:c==="link",onChange:()=>x("link")}),e.jsx("span",{className:"ml-2",children:"Image URL"})]})]}),c==="upload"?e.jsxs("div",{children:[e.jsx("input",{type:"file",ref:f,onChange:v,accept:"image/*",className:"hidden"}),e.jsx("button",{type:"button",onClick:()=>f.current?.click(),className:"w-full p-2 border-2 border-dashed border-gray-300 rounded-md text-gray-500 hover:border-orange-500 hover:text-orange-500 transition-colors",children:u?"Uploading...":"Choose an image"}),g&&e.jsxs("div",{className:"mt-2 relative",children:[e.jsx("img",{src:g,alt:"Preview",className:"max-h-40 rounded"}),e.jsx("button",{type:"button",onClick:C,className:"absolute top-1 right-1 bg-black bg-opacity-50 text-white rounded-full p-1 hover:bg-opacity-75","aria-label":"Remove image",children:"✕"})]})]}):e.jsx("input",{type:"url",className:"w-full p-2 border rounded",placeholder:"https://example.com/image.jpg",value:b.content_url,onChange:M=>F({...b,content_url:M.target.value}),required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border rounded-md text-gray-700 hover:bg-gray-50",disabled:i,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 disabled:opacity-50",disabled:i||u,children:i?"Creating...":"Create Drop"})]})]})]})})};async function Dl(s,l,t,r){try{return await s()}catch(a){throw console.error(`Error in ${l}.${t}:`,a),Vt(a instanceof Error?a:new Error(String(a)),l,t,r),a}}function Pl(s,l,t,r){console.error(`API Error in ${l}.${t}:`,s);const a=s.status||s.response?.status,n=s.message||s.response?.data?.error||String(s),i=[500,502,503,504],p=["internal server error","service unavailable","gateway timeout","database error","authentication failed"];(i.includes(a)||p.some(m=>n.toLowerCase().includes(m)))&&Vt(new Error(`API Error (${a}): ${n}`),l,t,r)}function Tl(s){return{handleError:(l,t,r)=>{Vt(l,s,t,r)},handleApiError:(l,t,r)=>{Pl(l,s,t,r)},withErrorHandling:async(l,t,r)=>Dl(l,s,t,r)}}function Ml(){Ue();const s=Tl("Create"),[l,t]=o.useState("post"),[r,a]=o.useState({platform:"instagram",title:"",description:"",platform_url:"",media_url:"",total_shares:100,share_price:0}),[n,i]=o.useState(!1),[p,u]=o.useState(0),[m,c]=o.useState(!1),[x,g]=o.useState(null),[h,j]=o.useState(""),[y,N]=o.useState("url"),[w,f]=o.useState(!1),d=o.useRef(null),b=async T=>{try{f(!0);const B=await new Promise($=>{const z=new FileReader;z.onload=()=>{const _=z.result;$(_.split(",")[1])},z.readAsDataURL(T)}),k=await fetch("/api/content/upload-image",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({fileName:T.name,fileType:T.type,fileData:B})});if(!k.ok)throw new Error("Upload failed");const S=await k.json();if(S.fallback){console.warn("Upload fallback used:",S.fallbackReason);const $=document.createElement("div");$.className="fixed top-4 right-4 bg-yellow-500 text-white px-4 py-3 rounded-lg shadow-lg z-50",$.innerHTML=`
          <div class="flex items-center space-x-2">
            <span>⚠️</span>
            <div>
              <div class="font-semibold">Image Upload Notice</div>
              <div class="text-xs opacity-90">${S.fallbackReason||"Using fallback image"}</div>
            </div>
          </div>
        `,document.body.appendChild($),setTimeout(()=>{document.body.contains($)&&document.body.removeChild($)},5e3)}return S.imageUrl}catch(B){console.error("Error uploading image:",B);try{const $=await fetch("/api/content/generate-placeholder",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({description:r.title||"Social media content",platform:r.platform})});if($.ok){const z=await $.json(),_=document.createElement("div");return _.className="fixed top-4 right-4 bg-orange-500 text-white px-4 py-3 rounded-lg shadow-lg z-50",_.innerHTML=`
            <div class="flex items-center space-x-2">
              <span>📷</span>
              <div>
                <div class="font-semibold">Using Placeholder Image</div>
                <div class="text-xs opacity-90">Original upload failed, but your content will still be created</div>
              </div>
            </div>
          `,document.body.appendChild(_),setTimeout(()=>{document.body.contains(_)&&document.body.removeChild(_)},4e3),z.imageUrl}}catch($){console.error("Fallback image generation failed:",$)}const k="https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=800&h=600&fit=crop&crop=center",S=document.createElement("div");return S.className="fixed top-4 right-4 bg-orange-500 text-white px-4 py-3 rounded-lg shadow-lg z-50",S.innerHTML=`
        <div class="flex items-center space-x-2">
          <span>📷</span>
          <div>
            <div class="font-semibold">Using Default Image</div>
            <div class="text-xs opacity-90">Upload service temporarily unavailable</div>
          </div>
        </div>
      `,document.body.appendChild(S),setTimeout(()=>{document.body.contains(S)&&document.body.removeChild(S)},4e3),k}finally{f(!1)}},F=async T=>{const B=T.target.files?.[0];if(B){if(!["image/jpeg","image/png","image/gif","image/webp"].includes(B.type)){const $=new Error("Please upload a valid image file (JPG, PNG, GIF, WEBP).");s.handleError($,"invalid_file_type");return}if(B.size>15*1024*1024){const $=new Error("File size must be less than 15MB. Please compress your image or use a URL instead.");s.handleError($,"file_too_large");return}g(B);const S=URL.createObjectURL(B);j(S);try{const $=await b(B);a({...r,media_url:$})}catch($){console.error("File upload failed:",$);const z=$ instanceof Error?$.message:String($);if(z.includes("too large")||z.includes("Invalid file type")){const _=$ instanceof Error?$:new Error(z);s.handleError(_,"upload_image")}else{const _=document.createElement("div");_.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-3 rounded-lg shadow-lg z-50",_.innerHTML=`
            <div class="flex items-center space-x-2">
              <span>❌</span>
              <div>
                <div class="font-semibold">Upload Failed</div>
                <div class="text-xs opacity-90">Please try again or use an image URL instead</div>
              </div>
            </div>
          `,document.body.appendChild(_),setTimeout(()=>{document.body.contains(_)&&document.body.removeChild(_)},5e3)}v()}}},v=()=>{g(null),h&&(URL.revokeObjectURL(h),j("")),a({...r,media_url:""}),d.current&&(d.current.value="")},C=async T=>{try{const B=await fetch(T,{method:"HEAD"}),k=B.headers.get("content-type");return B.ok&&k?.startsWith("image/")||!1}catch{return!1}},E=async T=>{T.preventDefault(),c(!0);try{if(r.media_url&&y==="url"&&!await C(r.media_url)){const $=new Error("The provided image URL is not accessible. Please check the URL or upload an image file instead.");s.handleError($,"invalid_image_url"),c(!1);return}const B={...r,share_price:n&&p>0?p/r.total_shares:0};console.log("Sending content creation request:",B);const k=await fetch("/api/content",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(B)});if(console.log("Content creation response status:",k.status),k.ok){const S=await k.json();if(n&&p>0)try{await fetch(`/api/content/${S.contentId}/fund`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({amount:p,currency_type:"Gems"})})}catch(z){console.error("Funding failed:",z)}a({platform:"instagram",title:"",description:"",platform_url:"",media_url:"",total_shares:100,share_price:0}),i(!1),u(0),v(),N("url");const $=document.createElement("div");$.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-bounce",$.innerHTML=`
          <div class="flex items-center space-x-2">
            <span class="text-lg">🎉</span>
            <div>
              <div class="font-semibold">Content Created!</div>
              <div class="text-xs opacity-90">Redirecting to your content page...</div>
            </div>
          </div>
        `,document.body.appendChild($),setTimeout(()=>{document.body.contains($)&&document.body.removeChild($),window.location.href=`/content/${S.contentId}`},2e3)}else{let S="Failed to create content. Please try again.",$=null;try{const q=await k.json();console.error("Failed to create content:",q),q.error&&(S=q.error),q.details&&(console.error("Error details:",q.details),$=q.details),q.field_errors&&(console.error("Field validation errors:",q.field_errors),S=`Validation failed: ${q.field_errors.map(de=>`${de.field}: ${de.message}`).join(", ")}`)}catch(q){console.error("Error parsing error response:",q)}const z=k.status>=500,_=S.includes("database")||S.includes("Database"),G=k.status===400&&S.includes("Validation");if(z||_){const q=new Error(`${S}${$?` - ${$}`:""}`);s.handleError(q,"create_content")}else{const q=document.createElement("div");q.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-3 rounded-lg shadow-lg z-50",q.innerHTML=`
            <div class="flex items-center space-x-2">
              <span>❌</span>
              <div>
                <div class="font-semibold">Content Creation Failed</div>
                <div class="text-xs opacity-90">${S}</div>
                ${G?'<div class="text-xs opacity-75 mt-1">Please check all form fields and try again</div>':""}
              </div>
            </div>
          `,document.body.appendChild(q),setTimeout(()=>{document.body.contains(q)&&document.body.removeChild(q)},8e3)}}}catch(B){console.error("Failed to create content:",B);const k=B instanceof Error?B:new Error("Failed to create content. Please check your connection and try again.");s.handleError(k,"create_content_network")}finally{c(!1)}},L=T=>{switch(T){case"instagram":return e.jsx(Us,{className:"w-5 h-5"});case"twitter":return e.jsx(Ht,{className:"w-5 h-5"});case"youtube":return e.jsx(Aa,{className:"w-5 h-5"});case"linkedin":return e.jsx($a,{className:"w-5 h-5"});case"tiktok":return e.jsx(yr,{className:"w-5 h-5"});default:return e.jsx(It,{className:"w-5 h-5"})}},M=T=>{switch(T){case"instagram":return"from-pink-500 to-purple-600";case"twitter":return"from-blue-400 to-blue-600";case"youtube":return"from-red-500 to-red-600";case"linkedin":return"from-blue-600 to-blue-800";case"tiktok":return"from-black to-gray-800";default:return"from-gray-500 to-gray-600"}};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Share your content and unlock earning opportunities"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Need to create marketing campaigns?"}),e.jsx("p",{className:"text-xs text-gray-400",children:'Check "Become Advertiser" in your profile menu'})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8 px-6",children:[e.jsx("button",{onClick:()=>t("post"),className:`py-4 border-b-2 font-medium text-sm ${l==="post"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Share Existing Content"}),e.jsx("button",{onClick:()=>t("upload"),className:`py-4 border-b-2 font-medium text-sm ${l==="upload"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Upload New Content"})]})}),e.jsxs("div",{className:"p-6",children:[l==="post"&&e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Platform"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:hl.options.map(T=>e.jsxs("button",{type:"button",onClick:()=>a({...r,platform:T}),className:`p-4 border rounded-lg flex flex-col items-center space-y-2 transition-all ${r.platform===T?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-300 hover:border-gray-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-lg bg-gradient-to-br ${M(T)} flex items-center justify-center text-white`,children:L(T)}),e.jsx("span",{className:"text-sm font-medium capitalize",children:T})]},T))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content Title"}),e.jsx("input",{type:"text",required:!0,value:r.title,onChange:T=>a({...r,title:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"My amazing content piece..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Platform URL"}),e.jsx("input",{type:"url",required:!0,value:r.platform_url,onChange:T=>a({...r,platform_url:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"https://instagram.com/p/..."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{rows:3,value:r.description,onChange:T=>a({...r,description:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Describe your content..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Media Content (Optional)"}),e.jsxs("div",{className:"flex space-x-4 mb-4",children:[e.jsxs("button",{type:"button",onClick:()=>{N("url"),v()},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${y==="url"?"bg-orange-100 text-orange-700 border border-orange-300":"bg-gray-100 text-gray-600 border border-gray-300 hover:bg-gray-200"}`,children:[e.jsx(It,{className:"w-4 h-4 inline mr-2"}),"Use URL"]}),e.jsxs("button",{type:"button",onClick:()=>{N("file"),a({...r,media_url:""})},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${y==="file"?"bg-orange-100 text-orange-700 border border-orange-300":"bg-gray-100 text-gray-600 border border-gray-300 hover:bg-gray-200"}`,children:[e.jsx(Ss,{className:"w-4 h-4 inline mr-2"}),"Upload File"]})]}),y==="url"?e.jsxs("div",{children:[e.jsx("input",{type:"url",value:r.media_url,onChange:T=>a({...r,media_url:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Direct link to image..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Make sure the image URL is publicly accessible and ends with .jpg, .png, .gif, or .webp"})]}):e.jsx("div",{className:"space-y-4",children:x?e.jsxs("div",{className:"border border-gray-300 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(Fa,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:x.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(x.size/1024/1024).toFixed(2)," MB"]}),w&&e.jsx("p",{className:"text-xs text-blue-600",children:"Uploading..."})]})]}),e.jsx("button",{type:"button",onClick:v,className:"p-1 text-gray-400 hover:text-red-500 transition-colors",disabled:w,children:e.jsx(se,{className:"w-5 h-5"})})]}),h&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:h,alt:"Preview",className:"w-full h-48 object-cover rounded-lg"}),w&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-lg",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-white border-t-transparent rounded-full mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Processing image..."})]})})]})]}):e.jsxs("div",{onClick:()=>d.current?.click(),className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-orange-400 hover:bg-orange-50 transition-all",children:[e.jsx(Ss,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Images (JPG, PNG, GIF, WEBP) • Max 10 MB"}),e.jsx("input",{ref:d,type:"file",accept:"image/*",onChange:F,className:"hidden"})]})})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Investment Settings"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Total Shares Available"}),e.jsx("input",{type:"number",min:"100",max:"1000",value:r.total_shares,onChange:T=>a({...r,total_shares:Math.max(100,Number(T.target.value))}),className:"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Minimum 100 shares required"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n,onChange:T=>{i(T.target.checked),T.target.checked||(u(0),a({...r,share_price:0}))},className:"w-4 h-4 text-purple-600 border-purple-300 rounded focus:ring-purple-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-purple-700",children:"Fund content with gems"}),e.jsx("p",{className:"text-xs text-purple-600",children:"Give your content initial value by funding it with gems"})]})]})}),n&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Gem Funding Amount"}),e.jsx("input",{type:"number",min:"1",step:"1",value:p||"",onChange:T=>{const B=Number(T.target.value);u(B),a({...r,share_price:B>0?B/r.total_shares:0})},className:"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter gems to fund content"}),e.jsxs("div",{className:"text-xs text-purple-600 mt-1 space-y-1",children:[e.jsxs("p",{children:["This will be split across all ",r.total_shares," shares"]}),p>0&&e.jsxs("p",{children:["Share price: ",(p/r.total_shares).toFixed(4)," gems per share"]})]})]}),e.jsx("div",{className:"bg-purple-100 border border-purple-300 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-purple-700",children:[e.jsx("strong",{children:"Total shares:"})," ",r.total_shares,n&&p>0&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"Total funding:"})," ",p," gems",e.jsx("br",{}),e.jsx("strong",{children:"Value per share:"})," ",(p/r.total_shares).toFixed(4)," gems"]}),!n&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"Initial value:"})," Free shares (investors can add value later)"]})]})})]}),e.jsx("button",{type:"submit",disabled:m||w,className:"w-full bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white py-3 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Creating...":w?"Processing Image...":"Create Content Post"})]}),l==="upload"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center",children:[e.jsx(Ss,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Upload your content"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Drag and drop your files here, or click to browse"}),e.jsx("button",{className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200",children:"Choose Files"}),e.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Supports: Images (JPG, PNG, WEBP), Videos (MP4, MOV), Documents (PDF, DOC)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx(Qs,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Photos"}),e.jsx("p",{className:"text-sm text-blue-700",children:"High-quality images for social sharing"})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx(Ea,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-semibold text-purple-900 mb-2",children:"Videos"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Engaging video content for maximum reach"})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx(ys,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"Documents"}),e.jsx("p",{className:"text-sm text-green-700",children:"Educational and informational content"})]})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Direct Upload Coming Soon"}),e.jsx("p",{className:"text-gray-600",children:`We're working on direct upload functionality. For now, please use the "Share Existing Content" tab to upload images and link to content you've posted on social platforms.`})]})]})]})]})]})}function Fl({isOpen:s,onClose:l,onForecastCreated:t}){const[r,a]=o.useState({content_id:"",platform:"instagram",content_url:"",forecast_type:"views",target_value:"",odds:"2",expires_at:"",initial_amount:"",initial_side:"over"}),[n,i]=o.useState([]),[p,u]=o.useState(!1),[m,c]=o.useState(""),[x,g]=o.useState({balance:0});o.useEffect(()=>{if(s){h(),j();const f=new Date;f.setDate(f.getDate()+1),a(d=>({...d,expires_at:f.toISOString().slice(0,16)}))}},[s]);const h=async()=>{try{const f=await fetch("/api/content");if(f.ok){const d=await f.json();i(d.slice(0,20))}}catch(f){console.error("Failed to fetch content:",f)}},j=async()=>{try{const f=await fetch("/api/users/me/wallets");if(f.ok){const b=(await f.json()).find(F=>F.currency_type==="USD");g({balance:b?.balance||0})}}catch(f){console.error("Failed to fetch wallet:",f)}},y=async f=>{f.preventDefault(),u(!0),c("");try{const d=await fetch("/api/social-forecasts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,content_id:r.content_id?parseInt(r.content_id):void 0,target_value:parseInt(r.target_value),odds:parseFloat(r.odds),initial_amount:parseFloat(r.initial_amount)})});if(d.ok)t(),l(),a({content_id:"",platform:"instagram",content_url:"",forecast_type:"views",target_value:"",odds:"2",expires_at:"",initial_amount:"",initial_side:"over"});else{const b=await d.json();c(b.error||"Failed to create forecast")}}catch{c("Failed to create forecast")}finally{u(!1)}},N=f=>{a(d=>({...d,content_id:f.id.toString(),platform:f.platform,content_url:f.platform_url}))},w=r.initial_amount?(parseFloat(r.initial_amount)*parseFloat(r.odds)).toFixed(2):"0";return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(re,{className:"w-5 h-5 mr-2 text-blue-600"}),"Create Social Forecast"]}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Create a prediction market by putting up your own initial stake. Others can then predict on your forecast."})]}),e.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[m&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-red-600 text-sm",children:m})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content to Forecast On"}),e.jsxs("div",{className:"space-y-3",children:[n.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Select from Promorang content:"}),e.jsx("div",{className:"max-h-32 overflow-y-auto border border-gray-200 rounded-lg",children:n.map(f=>e.jsxs("button",{type:"button",onClick:()=>N(f),className:`w-full text-left p-3 border-b border-gray-100 hover:bg-gray-50 ${r.content_id===f.id.toString()?"bg-blue-50 border-l-4 border-l-blue-500":""}`,children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:f.title}),e.jsxs("div",{className:"text-xs text-gray-500",children:[f.platform," • by ",f.creator_name]})]},f.id))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Or enter external content URL:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("select",{value:r.platform,onChange:f=>a({...r,platform:f.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"instagram",children:"Instagram"}),e.jsx("option",{value:"tiktok",children:"TikTok"}),e.jsx("option",{value:"youtube",children:"YouTube"}),e.jsx("option",{value:"twitter",children:"Twitter"})]}),e.jsx("input",{type:"url",placeholder:"Content URL",value:r.content_url,onChange:f=>a({...r,content_url:f.target.value,content_id:""}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(be,{className:"w-4 h-4 inline mr-1"}),"Metric to Predict"]}),e.jsxs("select",{value:r.forecast_type,onChange:f=>a({...r,forecast_type:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"views",children:"Views"}),e.jsx("option",{value:"likes",children:"Likes"}),e.jsx("option",{value:"shares",children:"Shares"}),e.jsx("option",{value:"comments",children:"Comments"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Value"}),e.jsx("input",{type:"number",placeholder:"e.g., 10000",value:r.target_value,onChange:f=>a({...r,target_value:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:"1"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payout Odds (multiplier)"}),e.jsxs("select",{value:r.odds,onChange:f=>a({...r,odds:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"1.5",children:"1.5x"}),e.jsx("option",{value:"2",children:"2x"}),e.jsx("option",{value:"2.5",children:"2.5x"}),e.jsx("option",{value:"3",children:"3x"}),e.jsx("option",{value:"4",children:"4x"}),e.jsx("option",{value:"5",children:"5x"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Xe,{className:"w-4 h-4 inline mr-1"}),"Expires At"]}),e.jsx("input",{type:"datetime-local",value:r.expires_at,onChange:f=>a({...r,expires_at:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:new Date().toISOString().slice(0,16)})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Your Initial Prediction & Stake"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Prediction"}),e.jsxs("select",{value:r.initial_side,onChange:f=>a({...r,initial_side:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"over",children:"OVER (will exceed target)"}),e.jsx("option",{value:"under",children:"UNDER (will not reach target)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(oe,{className:"w-4 h-4 inline mr-1"}),"Initial Stake (USD)"]}),e.jsx("input",{type:"number",step:"0.01",placeholder:"Amount to stake",value:r.initial_amount,onChange:f=>a({...r,initial_amount:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:"1",max:x.balance}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Available: $",x.balance.toFixed(2)]})]})]}),r.initial_amount&&e.jsxs("div",{className:"mt-3 p-3 bg-white rounded-lg border border-blue-200",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Your stake: ",e.jsxs("span",{className:"font-medium",children:["$",r.initial_amount]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Potential payout if correct: ",e.jsxs("span",{className:"font-medium text-green-600",children:["$",w]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This creates the initial pool that others can predict against"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p||!r.content_url||!r.target_value||!r.initial_amount,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?"Creating...":"Create Forecast"})]})]})]})}):null}function El(){const[s,l]=o.useState("forecasts"),[t,r]=o.useState([]),[a,n]=o.useState([]),[i,p]=o.useState([]),[u,m]=o.useState([]),[c,x]=o.useState(!0),[g,h]=o.useState(!1),[j,y]=o.useState(!1),[N,w]=o.useState(null);o.useEffect(()=>{f()},[s]);const f=async()=>{x(!0);try{if(s==="forecasts"){const k=await fetch("/api/social-forecasts");if(k.ok){const S=await k.json();r(S)}else console.error("Failed to fetch forecasts:",k.status)}else if(s==="my-forecasts"){const k=await fetch("/api/users/forecasts",{credentials:"include"});if(k.ok){const S=await k.json();n(S)}else console.error("Failed to fetch user forecasts:",k.status),n([])}else if(s==="my-created"){const k=await fetch("/api/users/created-forecasts",{credentials:"include"});if(k.ok){const S=await k.json();p(S)}else console.error("Failed to fetch created forecasts:",k.status),p([])}else if(s==="content"){const k=await fetch("/api/content");if(k.ok){const S=await k.json();m(S)}else console.error("Failed to fetch content:",k.status)}}catch(k){console.error("Failed to fetch data:",k)}finally{x(!1)}},d=k=>{w(k),y(!0)},b=()=>{f(),h(!1)},F=()=>{f()},v=(k,S)=>typeof k!="number"||Number.isNaN(k)?"—":k.toLocaleString(void 0,S),C=k=>typeof k!="number"||Number.isNaN(k)?"—":k.toLocaleString(void 0,{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),E=k=>{const S=new Date,z=new Date(k).getTime()-S.getTime();if(z<=0)return"Expired";const _=Math.floor(z/(1e3*60*60)),G=Math.floor(z%(1e3*60*60)/(1e3*60));return _>24?`${Math.floor(_/24)}d ${_%24}h`:`${_}h ${G}m`},L=k=>{switch(k){case"active":return"text-green-600 bg-green-100";case"expired":return"text-gray-600 bg-gray-100";case"resolved":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},M=({forecast:k})=>{const S=new Date(k.expires_at)<=new Date;return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:k.creator_avatar||"/api/placeholder/32/32",alt:k.creator_name,className:"w-8 h-8 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:k.creator_name}),e.jsx("p",{className:"text-xs text-gray-500",children:k.platform})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L(k.status)}`,children:k.status}),e.jsx("a",{href:k.content_url,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-gray-600",children:e.jsx(ss,{className:"w-4 h-4"})})]})]}),k.content_title&&e.jsxs("div",{className:"mb-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:k.content_title}),e.jsx("p",{className:"text-xs text-gray-500",children:k.content_platform})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(be,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium",children:[k.forecast_type," ",v(k.target_value)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pool"}),e.jsx("p",{className:"font-semibold text-green-600",children:C(k.pool_size)})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xe,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:E(k.expires_at)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Odds"}),e.jsx("p",{className:"font-semibold text-blue-600",children:typeof k.odds=="number"&&!Number.isNaN(k.odds)?`${k.odds}x`:"—"})]})]}),k.creator_side&&k.creator_initial_amount>0&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Creator's Prediction"}),e.jsxs("p",{className:"text-sm font-medium text-blue-600",children:[k.creator_side.toUpperCase()," • ",C(k.creator_initial_amount)," staked"]})]}),!S&&e.jsx("button",{onClick:()=>d(k),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Make Your Prediction"})]})]})},T=({forecast:k})=>{const S=k.forecast_status==="resolved",$=S&&k.actual_payout>0;return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[k.forecast_type," forecast by ",k.creator_name]}),e.jsx("p",{className:"text-sm text-gray-600",children:k.platform})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L(k.forecast_status)}`,children:k.forecast_status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Your Prediction"}),e.jsx("p",{className:"font-medium text-blue-600",children:k.prediction_side.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Amount Staked"}),e.jsxs("p",{className:"font-medium",children:["$",k.prediction_amount.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Target Value"}),e.jsx("p",{className:"font-medium",children:k.target_value.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Current Value"}),e.jsx("p",{className:"font-medium",children:k.current_value.toLocaleString()})]})]}),S?e.jsx("div",{className:`p-3 rounded-lg ${$?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:e.jsxs("p",{className:`text-sm font-medium ${$?"text-green-600":"text-red-600"}`,children:[$?"Won!":"Lost"," • ",$?`+$${k.actual_payout.toFixed(2)}`:`$${k.prediction_amount.toFixed(2)} lost`]})}):e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Potential payout: ",e.jsxs("span",{className:"font-medium text-green-600",children:["$",k.potential_payout.toFixed(2)]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Expires: ",E(k.expires_at)]})]})]})},B=({content:k})=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("img",{src:k.creator_avatar||"/api/placeholder/32/32",alt:k.creator_name,className:"w-8 h-8 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:k.creator_name}),e.jsx("p",{className:"text-xs text-gray-500",children:k.platform})]})]}),e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:k.title}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Share Price"}),e.jsxs("p",{className:"font-medium",children:["$",k.share_price.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Available"}),e.jsxs("p",{className:"font-medium",children:[k.available_shares,"/",k.total_shares]})]})]}),e.jsx("div",{className:"bg-green-50 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-green-600 font-medium",children:["Revenue: $",k.current_revenue.toFixed(2)]})}),e.jsx("button",{className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors",children:"Buy Shares"})]});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Investment Hub"}),e.jsx("p",{className:"text-gray-600",children:"Create forecasts, make predictions, and invest in creator success"})]}),e.jsxs("button",{onClick:()=>h(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{children:"Create Forecast"})]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-8",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"forecasts",label:"All Forecasts",icon:re},{id:"my-forecasts",label:"My Predictions",icon:pe},{id:"my-created",label:"My Forecasts",icon:be},{id:"content",label:"Content Shares",icon:oe}].map(k=>e.jsxs("button",{onClick:()=>l(k.id),className:`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ${s===k.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(k.icon,{className:"w-4 h-4"}),e.jsx("span",{children:k.label})]},k.id))})}),c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s==="forecasts"&&t.map(k=>e.jsx(M,{forecast:k},k.id)),s==="my-forecasts"&&a.map(k=>e.jsx(T,{forecast:k},k.id)),s==="my-created"&&i.map(k=>e.jsx(M,{forecast:k},k.id)),s==="content"&&u.map(k=>e.jsx(B,{content:k},k.id))]}),!c&&e.jsxs(e.Fragment,{children:[s==="forecasts"&&t.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(re,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Active Forecasts"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Be the first to create a prediction market! Put up your own stake and let others predict on your forecast."}),e.jsx("button",{onClick:()=>h(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create First Forecast"})]}),s==="my-forecasts"&&a.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(pe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Predictions Yet"}),e.jsx("p",{className:"text-gray-600",children:"Browse active forecasts and make your first prediction to start earning!"})]}),s==="my-created"&&i.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(be,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Created Forecasts"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first prediction market by putting up initial stake and letting others predict against you!"}),e.jsx("button",{onClick:()=>h(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create Forecast"})]}),s==="content"&&u.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(oe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Content Available"}),e.jsx("p",{className:"text-gray-600",children:"No content shares are currently available for investment."})]})]})]}),e.jsx(Fl,{isOpen:g,onClose:()=>h(!1),onForecastCreated:b}),N&&e.jsx(ar,{isOpen:j,onClose:()=>y(!1),forecast:N,onPredictionPlaced:F})]})}function $l({user:s,isOpen:l,onClose:t,onSuccess:r}){const[a,n]=o.useState("amount"),[i,p]=o.useState(200),[u,m]=o.useState(""),[c,x]=o.useState({}),[g,h]=o.useState([]),[j,y]=o.useState([]),[N,w]=o.useState(!1),[f,d]=o.useState(null),[b,F]=o.useState(!1);o.useEffect(()=>{l&&(v(),C())},[l]);const v=async()=>{try{const H=await(await fetch("/api/withdrawal/methods",{credentials:"include"})).json();h(H)}catch(D){console.error("Failed to fetch withdrawal methods:",D)}},C=async()=>{try{const H=await(await fetch("/api/users/payment-preferences",{credentials:"include"})).json();y(H)}catch(D){console.error("Failed to fetch user preferences:",D)}};if(!l||!s)return null;const E=(s.gems_balance||0)>=200,L=g.find(D=>D.method_name===u),M=L?i*L.fee_percentage/100:0,T=i-M,B=D=>D.startsWith("crypto_")?e.jsx(Is,{className:"w-5 h-5"}):D==="bank_account"?e.jsx(La,{className:"w-5 h-5"}):D==="paypal"||D==="payoneer"?e.jsx(Zs,{className:"w-5 h-5"}):e.jsx(oe,{className:"w-5 h-5"}),k=D=>{const H=g.find(J=>J.method_name===D);if(!H)return[];try{return JSON.parse(H.required_fields)}catch{return[]}},S=D=>({wallet_address:"Wallet Address",network:"Network",email_address:"Email Address",account_holder_name:"Account Holder Name",bank_name:"Bank Name",account_number:"Account Number",routing_number:"Routing Number",swift_code:"SWIFT Code",country:"Country",full_name:"Full Name",address_line_1:"Address Line 1",address_line_2:"Address Line 2 (Optional)",city:"City",state:"State/Province",postal_code:"Postal Code",phone_number:"Phone Number"})[D]||D.replace("_"," ").replace(/\b\w/g,J=>J.toUpperCase()),$=D=>D==="email_address"?"email":D==="phone_number"?"tel":"text",z=D=>!D.includes("optional")&&D!=="address_line_2",_=async()=>{w(!0),d(null);try{b&&await fetch("/api/users/payment-preferences",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({payment_method:u,preference_data:c,is_default:!0})});const D=await fetch("/api/withdrawal/request",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({amount:i,payment_method:u,payment_details:c})});if(D.ok)r(),t(),G();else{const H=await D.json();d(H.error||"Withdrawal request failed")}}catch(D){console.error("Withdrawal failed:",D),d("Network error occurred")}finally{w(!1)}},G=()=>{n("amount"),p(200),m(""),x({}),d(null),F(!1)},q=()=>{G(),t()},ae=i>=200&&i<=(s.gems_balance||0),de=u!=="",A=()=>k(u).every(H=>!z(H)||c[H]&&c[H].trim()!=="");return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Withdraw Gems"}),e.jsx("button",{onClick:q,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),E?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center space-x-2 mb-6",children:["amount","method","details","confirm"].map((D,H)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${a===D?"bg-purple-500 text-white":["amount","method","details","confirm"].indexOf(a)>H?"bg-green-500 text-white":"bg-gray-200 text-gray-600"}`,children:H+1}),H<3&&e.jsx("div",{className:"w-12 h-0.5 bg-gray-200 mx-2"})]},D))}),a==="amount"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Withdrawal Amount (Gems)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"number",value:i,onChange:D=>p(Math.max(200,parseInt(D.target.value)||200)),min:"200",max:s.gems_balance||0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"}),e.jsx("div",{className:"flex space-x-2",children:[200,500,1e3,s.gems_balance||0].filter((D,H,J)=>J.indexOf(D)===H&&D>=200).map(D=>e.jsx("button",{onClick:()=>p(D),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-full text-gray-700",children:D===s.gems_balance?"Max":D.toLocaleString()},D))})]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Available Balance:"}),e.jsxs("span",{className:"font-medium",children:[s.gems_balance," gems"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[e.jsx("span",{children:"Withdrawal Fee (2.5%):"}),e.jsxs("span",{className:"font-medium",children:["~",Math.ceil(i*.025)," gems"]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:q,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>n("method"),disabled:!ae,className:"flex-1 bg-purple-500 hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Next"})]})]}),a==="method"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Payment Method"}),j.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Saved Methods"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:j.map(D=>{const H=g.find(W=>W.method_name===D.payment_method);if(!H)return null;let J="";try{const W=JSON.parse(D.preference_data);W.email_address?J=W.email_address:W.wallet_address?J=`${W.wallet_address.slice(0,6)}...${W.wallet_address.slice(-4)}`:W.account_number?J=`****${W.account_number.slice(-4)}`:J="Saved method"}catch{J="Saved method"}return e.jsx("button",{onClick:()=>{m(D.payment_method),x(JSON.parse(D.preference_data))},className:`w-full p-3 border-2 rounded-lg text-left transition-colors ${u===D.payment_method?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[B(D.payment_method),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:H.display_name}),e.jsx("p",{className:"text-sm text-gray-500",children:J})]}),D.is_default&&e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:"Default"})]})},D.id)})}),e.jsxs("div",{className:"relative my-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or choose a new method"})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:g.filter(D=>D.is_active).map(D=>e.jsxs("button",{onClick:()=>m(D.method_name),className:`p-4 border-2 rounded-lg text-left transition-colors ${u===D.method_name?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[B(D.method_name),e.jsx("span",{className:"font-medium",children:D.display_name})]}),e.jsx("p",{className:"text-xs text-gray-500",children:D.processing_time}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Min: ",D.min_amount," gems"]})]},D.method_name))})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>n("amount"),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Back"}),e.jsx("button",{onClick:()=>n("details"),disabled:!de,className:"flex-1 bg-purple-500 hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Next"})]})]}),a==="details"&&L&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:L.display_name}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Processing time: ",L.processing_time]})]}),e.jsx("div",{className:"space-y-4",children:k(u).map(D=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[S(D),z(D)&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),D==="network"&&u.startsWith("crypto_")?e.jsxs("select",{value:c[D]||"",onChange:H=>x(J=>({...J,[D]:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:z(D),children:[e.jsx("option",{value:"",children:"Select Network"}),e.jsx("option",{value:"mainnet",children:"Mainnet"}),e.jsx("option",{value:"ethereum",children:"Ethereum (ERC-20)"}),e.jsx("option",{value:"bsc",children:"Binance Smart Chain (BEP-20)"}),e.jsx("option",{value:"polygon",children:"Polygon"}),e.jsx("option",{value:"arbitrum",children:"Arbitrum"})]}):D==="country"?e.jsxs("select",{value:c[D]||"",onChange:H=>x(J=>({...J,[D]:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:z(D),children:[e.jsx("option",{value:"",children:"Select Country"}),e.jsx("option",{value:"US",children:"United States"}),e.jsx("option",{value:"CA",children:"Canada"}),e.jsx("option",{value:"GB",children:"United Kingdom"}),e.jsx("option",{value:"AU",children:"Australia"}),e.jsx("option",{value:"DE",children:"Germany"}),e.jsx("option",{value:"FR",children:"France"}),e.jsx("option",{value:"IT",children:"Italy"}),e.jsx("option",{value:"ES",children:"Spain"}),e.jsx("option",{value:"NL",children:"Netherlands"}),e.jsx("option",{value:"SE",children:"Sweden"}),e.jsx("option",{value:"NO",children:"Norway"}),e.jsx("option",{value:"DK",children:"Denmark"}),e.jsx("option",{value:"FI",children:"Finland"}),e.jsx("option",{value:"JP",children:"Japan"}),e.jsx("option",{value:"KR",children:"South Korea"}),e.jsx("option",{value:"SG",children:"Singapore"}),e.jsx("option",{value:"HK",children:"Hong Kong"}),e.jsx("option",{value:"IN",children:"India"}),e.jsx("option",{value:"BR",children:"Brazil"}),e.jsx("option",{value:"MX",children:"Mexico"})]}):e.jsx("input",{type:$(D),value:c[D]||"",onChange:H=>x(J=>({...J,[D]:H.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:z(D),placeholder:D==="wallet_address"?"Enter your wallet address":""})]},D))}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"saveAsDefault",checked:b,onChange:D=>F(D.target.checked),className:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"}),e.jsx("label",{htmlFor:"saveAsDefault",className:"text-sm text-gray-700",children:"Save this payment method for future withdrawals"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>n("method"),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Back"}),e.jsx("button",{onClick:()=>n("confirm"),disabled:!A(),className:"flex-1 bg-purple-500 hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Review"})]})]}),a==="confirm"&&L&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Review Withdrawal Request"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Withdrawal Amount:"}),e.jsxs("span",{className:"font-medium",children:[i," gems"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Processing Fee (",L.fee_percentage,"%):"]}),e.jsxs("span",{className:"font-medium text-red-600",children:["-",M.toFixed(2)," gems"]})]}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Net Amount:"}),e.jsxs("span",{className:"text-green-600",children:[T.toFixed(2)," gems"]})]})})]}),e.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-2",children:["Payment Method: ",L.display_name]}),e.jsx("div",{className:"text-sm text-gray-600 space-y-1",children:Object.entries(c).map(([D,H])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"capitalize",children:[S(D),":"]}),e.jsx("span",{className:"font-mono",children:D.includes("address")&&H.length>20?`${H.slice(0,8)}...${H.slice(-8)}`:H})]},D))})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ns,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Important Notice:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Withdrawal requests cannot be cancelled once submitted"}),e.jsxs("li",{children:["Processing time: ",L.processing_time]}),e.jsx("li",{children:"Ensure all payment details are correct"}),e.jsx("li",{children:"You will receive an email confirmation once processed"})]})]})]})})]}),f&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-700",children:f})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>n("details"),disabled:N,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Back"}),e.jsx("button",{onClick:_,disabled:N,className:"flex-1 bg-green-500 hover:bg-green-600 disabled:opacity-50 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:N?e.jsx(gt,{className:"w-4 h-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"Submit Withdrawal"})]})})]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ns,{className:"w-12 h-12 text-yellow-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Insufficient Gems"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You need at least 200 gems to request a withdrawal."}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Current balance: ",s.gems_balance||0," gems"]}),e.jsx("button",{onClick:q,className:"mt-4 px-6 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors",children:"Close"})]})]})})}function Al({user:s,isOpen:l,onClose:t,onSuccess:r}){const[a,n]=o.useState([]),[i,p]=o.useState([]),[u,m]=o.useState(!1),[c,x]=o.useState(null),[g,h]=o.useState(""),[j,y]=o.useState({}),[N,w]=o.useState(!1),[f,d]=o.useState(null);o.useEffect(()=>{l&&b()},[l]);const b=async()=>{try{const[S,$]=await Promise.all([fetch("/api/users/payment-preferences",{credentials:"include"}),fetch("/api/withdrawal/methods",{credentials:"include"})]),z=await S.json(),_=await $.json();n(z),p(_)}catch(S){console.error("Failed to fetch data:",S)}};if(!l||!s)return null;const F=S=>S.startsWith("crypto_")?e.jsx(Is,{className:"w-5 h-5"}):S==="bank_account"?e.jsx(La,{className:"w-5 h-5"}):S==="paypal"||S==="payoneer"?e.jsx(Zs,{className:"w-5 h-5"}):e.jsx(Is,{className:"w-5 h-5"}),v=S=>{const $=i.find(z=>z.method_name===S);if(!$)return[];try{return JSON.parse($.required_fields)}catch{return[]}},C=S=>({wallet_address:"Wallet Address",network:"Network",email_address:"Email Address",account_holder_name:"Account Holder Name",bank_name:"Bank Name",account_number:"Account Number",routing_number:"Routing Number",swift_code:"SWIFT Code",country:"Country",full_name:"Full Name",address_line_1:"Address Line 1",address_line_2:"Address Line 2",city:"City",state:"State/Province",postal_code:"Postal Code",phone_number:"Phone Number"})[S]||S.replace("_"," ").replace(/\b\w/g,z=>z.toUpperCase()),E=S=>{try{const $=JSON.parse(S.preference_data);return $.email_address?$.email_address:$.wallet_address?`${$.wallet_address.slice(0,8)}...${$.wallet_address.slice(-6)}`:$.account_number?`****${$.account_number.slice(-4)}`:$.full_name?$.full_name:"Payment method"}catch{return"Payment method"}},L=async()=>{if(!(!g||Object.keys(j).length===0)){w(!0),d(null);try{const S=await fetch("/api/users/payment-preferences",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({payment_method:g,preference_data:j,is_default:a.length===0})});if(S.ok)await b(),B(),r();else{const $=await S.json();d($.error||"Failed to save payment preference")}}catch(S){console.error("Failed to save preference:",S),d("Network error occurred")}finally{w(!1)}}},M=async S=>{if(confirm("Are you sure you want to delete this payment method?"))try{(await fetch(`/api/users/payment-preferences/${S}`,{method:"DELETE",credentials:"include"})).ok&&(await b(),r())}catch($){console.error("Failed to delete preference:",$)}},T=async S=>{try{(await fetch(`/api/users/payment-preferences/${S}/set-default`,{method:"POST",credentials:"include"})).ok&&(await b(),r())}catch($){console.error("Failed to set default:",$)}},B=()=>{m(!1),x(null),h(""),y({}),d(null)},k=S=>{x(S.id),h(S.payment_method);try{y(JSON.parse(S.preference_data))}catch{y({})}m(!0)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Payment Preferences"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Saved Payment Methods"}),e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center space-x-2 px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-medium transition-colors",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Method"})]})]}),a.length===0?e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[e.jsx(Is,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No payment methods saved"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Add a payment method to make withdrawals easier"}),e.jsx("button",{onClick:()=>m(!0),className:"px-6 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-medium transition-colors",children:"Add Payment Method"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(S=>{const $=i.find(z=>z.method_name===S.payment_method);return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[F(S.payment_method),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:$?.display_name}),e.jsx("p",{className:"text-sm text-gray-600",children:E(S)})]})]}),S.is_default&&e.jsxs("span",{className:"flex items-center space-x-1 text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:[e.jsx(X,{className:"w-3 h-3"}),e.jsx("span",{children:"Default"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[!S.is_default&&e.jsx("button",{onClick:()=>T(S.id),className:"flex-1 text-xs px-3 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"Set Default"}),e.jsxs("button",{onClick:()=>k(S),className:"flex-1 text-xs px-3 py-1 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition-colors flex items-center justify-center space-x-1",children:[e.jsx(Ut,{className:"w-3 h-3"}),e.jsx("span",{children:"Edit"})]}),e.jsxs("button",{onClick:()=>M(S.id),className:"flex-1 text-xs px-3 py-1 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors flex items-center justify-center space-x-1",children:[e.jsx(zs,{className:"w-3 h-3"}),e.jsx("span",{children:"Delete"})]})]})]},S.id)})})]}),u&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:c?"Edit Payment Method":"Add Payment Method"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:i.filter(S=>S.is_active).map(S=>e.jsxs("button",{onClick:()=>h(S.method_name),disabled:c!==null,className:`p-3 border-2 rounded-lg text-left transition-colors ${g===S.method_name?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"} ${c?"opacity-50 cursor-not-allowed":""}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[F(S.method_name),e.jsx("span",{className:"font-medium text-sm",children:S.display_name})]}),e.jsx("p",{className:"text-xs text-gray-500",children:S.processing_time})]},S.method_name))})]}),g&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Payment Details"}),v(g).map(S=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[C(S),S!=="address_line_2"&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),S==="network"&&g.startsWith("crypto_")?e.jsxs("select",{value:j[S]||"",onChange:$=>y(z=>({...z,[S]:$.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"Select Network"}),e.jsx("option",{value:"mainnet",children:"Mainnet"}),e.jsx("option",{value:"ethereum",children:"Ethereum (ERC-20)"}),e.jsx("option",{value:"bsc",children:"Binance Smart Chain (BEP-20)"}),e.jsx("option",{value:"polygon",children:"Polygon"}),e.jsx("option",{value:"arbitrum",children:"Arbitrum"})]}):S==="country"?e.jsxs("select",{value:j[S]||"",onChange:$=>y(z=>({...z,[S]:$.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"Select Country"}),e.jsx("option",{value:"US",children:"United States"}),e.jsx("option",{value:"CA",children:"Canada"}),e.jsx("option",{value:"GB",children:"United Kingdom"}),e.jsx("option",{value:"AU",children:"Australia"}),e.jsx("option",{value:"DE",children:"Germany"}),e.jsx("option",{value:"FR",children:"France"}),e.jsx("option",{value:"IT",children:"Italy"}),e.jsx("option",{value:"ES",children:"Spain"}),e.jsx("option",{value:"NL",children:"Netherlands"}),e.jsx("option",{value:"JP",children:"Japan"}),e.jsx("option",{value:"SG",children:"Singapore"}),e.jsx("option",{value:"IN",children:"India"}),e.jsx("option",{value:"BR",children:"Brazil"}),e.jsx("option",{value:"MX",children:"Mexico"})]}):e.jsx("input",{type:S==="email_address"?"email":S==="phone_number"?"tel":"text",value:j[S]||"",onChange:$=>y(z=>({...z,[S]:$.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:S!=="address_line_2"})]},S))]}),f&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-700",children:f})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:B,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:L,disabled:!g||N||v(g).some(S=>S!=="address_line_2"&&(!j[S]||j[S].trim()==="")),className:"flex-1 bg-purple-500 hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-colors",children:N?"Saving...":c?"Update Method":"Save Method"})]})]})]})]})]})})}const Pt=[{id:"starter",gems:10,price:11,bonus:0},{id:"basic",gems:25,price:27.5,bonus:0},{id:"popular",gems:47,price:55,bonus:3,popular:!0,savings:"Best Value"},{id:"premium",gems:88,price:110,bonus:12,savings:"12% Bonus"},{id:"ultimate",gems:210,price:275,bonus:40,savings:"16% Bonus"}];function Ll({user:s,isOpen:l,onClose:t}){const[r,a]=o.useState("popular"),[n,i]=o.useState(!1),[p,u]=o.useState(null);if(console.log("=== GemStoreModal Debug Info ==="),console.log("isOpen:",l),console.log("user exists:",!!s),console.log("user data:",s),console.log("onClose function:",typeof t),!l)return console.log("Modal not rendering: isOpen is false"),null;console.log("Modal should be visible now!");const m=async()=>{const x=Pt.find(g=>g.id===r);if(x){i(!0),u(null);try{const g=await fetch("/api/payments/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({package_id:r,gems:x.gems+x.bonus,price:x.price})});if(g.ok){const{checkout_url:h}=await g.json();window.location.href=h}else{const h=await g.json();u(h.error||"Failed to create payment session")}}catch(g){console.error("Payment failed:",g),u("Payment processing failed. Please try again.")}finally{i(!1)}}},c=Pt.find(x=>x.id===r);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:e.jsx(Ne,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Gem Store"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Purchase gems to participate in drops and forecasts"})]})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),!s&&e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Loading user data..."}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please wait while we load your account information."}),e.jsx("p",{className:"text-xs text-red-600",children:"Debug: User data is null - check console for details"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600",children:"Reload Page"})]})}),s&&e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ne,{className:"w-8 h-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-purple-900",children:"Current Balance"}),e.jsx("p",{className:"text-sm text-purple-600",children:"Your gem wallet"})]})]}),e.jsx("p",{className:"text-3xl font-bold text-purple-900",children:s.gems_balance})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Choose Your Package"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Pt.map(x=>e.jsxs("div",{onClick:()=>a(x.id),className:`relative border-2 rounded-xl p-6 cursor-pointer transition-all duration-200 ${r===x.id?"border-purple-500 bg-purple-50 shadow-lg scale-105":"border-gray-200 hover:border-gray-300 hover:shadow-md"}`,children:[x.popular&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsxs("span",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1",children:[e.jsx(X,{className:"w-3 h-3"}),e.jsx("span",{children:"Most Popular"})]})}),x.savings&&!x.popular&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsx("span",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-3 py-1 rounded-full text-xs font-medium",children:x.savings})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ne,{className:"w-8 h-8 text-white"})}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 capitalize mb-2",children:x.id}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",x.price]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-1",children:[e.jsxs("span",{className:"text-lg font-semibold text-purple-600",children:[x.gems," gems"]}),x.bonus>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-400",children:"+"}),e.jsxs("span",{className:"text-lg font-semibold text-green-600",children:[x.bonus," bonus"]})]})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Total: ",x.gems+x.bonus," gems"]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(ke,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{children:"Participate in drops"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Is,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{children:"Place predictions"})]}),x.bonus>0&&e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(X,{className:"w-4 h-4 text-yellow-500"}),e.jsxs("span",{children:[Math.round(x.bonus/x.gems*100),"% bonus gems"]})]})]})]})]},x.id))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(Pe,{className:"w-5 h-5 text-green-600"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Secure Payment"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"256-bit SSL encryption"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"PCI DSS compliant"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Powered by Stripe"})]})]})]}),c&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Purchase Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Package:"}),e.jsx("span",{className:"font-medium capitalize",children:c.id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Base Gems:"}),e.jsx("span",{className:"font-medium",children:c.gems})]}),c.bonus>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Bonus Gems:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["+",c.bonus]})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[e.jsx("span",{children:"Total Gems:"}),e.jsx("span",{className:"text-purple-600",children:c.gems+c.bonus})]}),e.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[e.jsx("span",{children:"Total Price:"}),e.jsxs("span",{children:["$",c.price]})]})]})]})]}),p&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-6",children:e.jsx("p",{className:"text-sm text-red-700",children:p})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:t,disabled:n,className:"flex-1 px-6 py-3 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:m,disabled:n||!c,className:"flex-2 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2",children:n?e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}):e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"w-5 h-5"}),e.jsxs("span",{children:["Purchase $",c?.price," - ",c?c.gems+c.bonus:0," Gems"]})]})})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"By purchasing gems, you agree to our Terms of Service. Gems are virtual currency and have no real-world value. All sales are final and non-refundable."})]})]})})}function Ol(){const{user:s,redirectToLogin:l}=Ue(),[t,r]=o.useState(null),[a,n]=o.useState(!1),i=async()=>{n(!0);try{console.log("=== COMPREHENSIVE AUTH DEBUG ===");const m=document.cookie;console.log("1. Cookies:",m);const c=m.includes("mocha_session_token"),x=ue(),g=await fetch("/api/users/me",{credentials:"include",headers:x}),h=await g.text();let j=null;try{j=JSON.parse(h)}catch{console.log("Mocha auth response not JSON:",h)}console.log("2. Mocha auth response:",{status:g.status,data:j,rawText:h});const y=await fetch("/api/app/users/me",{credentials:"include",headers:x}),N=await y.text();let w=null;try{w=JSON.parse(N)}catch{console.log("App user response not JSON:",N)}console.log("3. App user response:",{status:y.status,data:w,rawText:N}),console.log("4. React Auth Provider state:",{user:s,hasUser:!!s,userId:s?.id,userEmail:s?.email});const f={timestamp:new Date().toISOString(),cookies:{present:!!m,count:m.split(";").length,hasSessionToken:c,raw:m},mochaAuth:{status:g.status,statusText:g.statusText,data:j,headers:Object.fromEntries(g.headers.entries())},appUser:{status:y.status,statusText:y.statusText,data:w,headers:Object.fromEntries(y.headers.entries())},reactAuth:{hasUser:!!s,user:s}};r(f),console.log("=== DEBUG COMPLETE ===",f)}catch(m){console.error("Auth debug failed:",m),r({error:m instanceof Error?m.message:"Unknown error"})}finally{n(!1)}},p=()=>{localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(m=>{const c=m.indexOf("="),x=c>-1?m.substr(0,c):m;document.cookie=x+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/",document.cookie=x+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain="+window.location.hostname}),alert("All data cleared. Please refresh the page.")},u=async()=>{try{await l()}catch(m){console.error("Force login failed:",m),alert("Login redirect failed. Check console for details.")}};return e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mt-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Ns,{className:"w-5 h-5 text-yellow-600"}),e.jsx("h3",{className:"text-lg font-semibold text-yellow-800",children:"Authentication Debugger"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:i,disabled:a,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[a?e.jsx(Ws,{className:"w-4 h-4 animate-spin"}):e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:a?"Testing...":"Run Full Auth Test"})]}),e.jsx("button",{onClick:p,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Clear All Data"}),e.jsxs("button",{onClick:u,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(Nr,{className:"w-4 h-4"}),e.jsx("span",{children:"Force Login"})]})]}),t&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Debug Results:"}),e.jsx("pre",{className:"text-xs text-gray-700 overflow-auto max-h-96 bg-gray-50 p-3 rounded",children:JSON.stringify(t,null,2)})]}),e.jsxs("div",{className:"text-sm text-yellow-700",children:[e.jsx("p",{children:e.jsx("strong",{children:"Instructions:"})}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 mt-2",children:[e.jsx("li",{children:'Click "Run Full Auth Test" to diagnose authentication issues'}),e.jsx("li",{children:'If authentication is broken, try "Clear All Data" then "Force Login"'}),e.jsx("li",{children:"Check the debug results to see exactly what's failing"}),e.jsx("li",{children:"All debug info is also logged to the browser console"})]})]})]})]})}const ua=()=>[{id:"listing-demo-1",content_id:"content-demo-1",content_title:"Launch Campaign: Social Buzz",content_thumbnail:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=600&q=80",owner_id:"00000000-0000-0000-0000-000000000001",owner_name:"Demo Creator",quantity:60,remaining_quantity:40,ask_price:12.5,market_price:12.2,status:"active",created_at:new Date(Date.now()-7200*1e3).toISOString(),expires_at:new Date(Date.now()+2880*60*1e3).toISOString()}],Rl=async(s=!1)=>s?ua().filter(l=>l.owner_id==="00000000-0000-0000-0000-000000000001"):ua(),Il=async s=>({success:!0,listing:{id:`listing-${Date.now()}`,owner_id:"00000000-0000-0000-0000-000000000001",owner_name:"Demo Creator",remaining_quantity:s.quantity,market_price:s.ask_price,status:"active",created_at:new Date().toISOString(),expires_at:new Date(Date.now()+4320*60*1e3).toISOString(),...s},message:"Listing created (mock)"}),Ul=async s=>({success:!0,offer:{id:`offer-${Date.now()}`,buyer_id:"00000000-0000-0000-0000-000000000001",status:"pending",created_at:new Date().toISOString(),expires_at:new Date(Date.now()+2880*60*1e3).toISOString(),...s},message:"Offer submitted (mock)"}),Bl=()=>[{id:"offer-demo-1",content_id:"content-demo-1",buyer_id:"00000000-0000-0000-0000-000000000005",seller_id:"00000000-0000-0000-0000-000000000001",quantity:25,bid_price:12.75,status:"pending",message:"Happy to take at a slight premium. Can settle within 24h.",content_title:"Launch Campaign: Social Buzz",created_at:new Date(Date.now()-10800*1e3).toISOString(),expires_at:new Date(Date.now()+1260*60*1e3).toISOString()},{id:"offer-demo-2",content_id:"content-demo-2",buyer_id:"00000000-0000-0000-0000-000000000001",seller_id:"00000000-0000-0000-0000-000000000004",quantity:30,bid_price:18,status:"pending",message:"Would love to take this block before the next update drop.",content_title:"Creator Toolkit Walkthrough",created_at:new Date(Date.now()-360*60*1e3).toISOString(),expires_at:new Date(Date.now()+1800*60*1e3).toISOString()}],ha=async s=>Bl().filter(t=>s==="seller"?t.seller_id==="00000000-0000-0000-0000-000000000001":t.buyer_id==="00000000-0000-0000-0000-000000000001"),zl=async s=>({success:!0,offer_id:s,message:"Offer accepted (mock)"});function Gl({isOpen:s,onClose:l,holding:t,onSuccess:r}){const[a,n]=o.useState(()=>t?Math.min(t.available_to_sell,t.owned_shares):0),[i,p]=o.useState(()=>t?.current_price||0),[u,m]=o.useState(!1),[c,x]=o.useState(null);if(o.useEffect(()=>{t&&s&&(n(Math.min(t.available_to_sell,t.owned_shares)),p(t.current_price),x(null))},[t,s]),!s||!t)return null;const g=()=>{n(Math.min(t.available_to_sell,t.owned_shares)),p(t.current_price),x(null)},h=()=>{u||(g(),l())},j=async y=>{if(y.preventDefault(),!!t){if(a<=0||i<=0){x("Enter a valid quantity and price.");return}m(!0),x(null);try{await Il({content_id:t.content_id,content_title:t.content_title,content_thumbnail:t.content_thumbnail,quantity:a,ask_price:i}),r?.(),h()}catch(N){x(N instanceof Error?N.message:"Failed to create listing")}finally{m(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"List Shares for Resale"}),e.jsx("p",{className:"text-sm text-gray-500",children:t.content_title})]}),e.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600","aria-label":"Close list shares modal",children:"×"})]}),e.jsxs("form",{onSubmit:j,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity"}),e.jsx("input",{type:"number",min:1,max:t.available_to_sell,value:a,onChange:y=>n(Number(y.target.value)),className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Available: ",t.available_to_sell," shares"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ask Price (per share)"}),e.jsx("input",{type:"number",min:.01,step:.01,value:i,onChange:y=>p(Number(y.target.value)),className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Market price ",t.current_price.toFixed(2)]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Estimated proceeds"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",(a*i).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx("span",{children:"Transaction fee (2.5%)"}),e.jsxs("span",{children:["$",(a*i*.025).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between mt-2 text-green-600 font-semibold",children:[e.jsx("span",{children:"Net payout"}),e.jsxs("span",{children:["$",(a*i*.975).toFixed(2)]})]})]}),c&&e.jsx("p",{className:"text-sm text-red-600",children:c}),e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg shadow-sm hover:bg-orange-700 disabled:opacity-60",children:u?"Listing…":"List Shares"})]})]})]})})}const lr=()=>[{content_id:"content-demo-1",content_title:"Launch Campaign: Social Buzz",content_thumbnail:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=600&q=80",creator_id:"00000000-0000-0000-0000-000000000001",creator_name:"Demo Creator",creator_avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=demo_content",platform:"instagram",owned_shares:180,available_to_sell:60,avg_cost:8.75,current_price:12.5,market_value:2250,unrealized_gain:675,day_change_pct:3.2,week_change_pct:8.5,month_change_pct:22.4,last_trade_at:new Date(Date.now()-7200*1e3).toISOString(),is_listed:!0,listing_id:"listing-demo-1",visibility:"public"},{content_id:"content-demo-2",content_title:"Creator Toolkit Walkthrough",content_thumbnail:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&w=600&q=80",creator_id:"00000000-0000-0000-0000-000000000002",creator_name:"Creator Collective",creator_avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=creator_collective",platform:"youtube",owned_shares:95,available_to_sell:95,avg_cost:15,current_price:18.75,market_value:1781.25,unrealized_gain:356.25,day_change_pct:1.2,week_change_pct:4.7,month_change_pct:12.8,last_trade_at:new Date(Date.now()-360*60*1e3).toISOString(),is_listed:!1,visibility:"public"}],nr=()=>[{id:"prediction-demo-1",forecast_id:"forecast-demo-1",content_title:"Creator Toolkit Walkthrough",platform:"youtube",prediction_side:"over",amount:150,potential_payout:315,status:"active",result:void 0,created_at:new Date(Date.now()-4320*60*1e3).toISOString(),resolved_at:void 0},{id:"prediction-demo-2",forecast_id:"forecast-demo-2",content_title:"Launch Day Reach",platform:"instagram",prediction_side:"under",amount:80,potential_payout:152,status:"settled",result:"won",created_at:new Date(Date.now()-288*60*60*1e3).toISOString(),resolved_at:new Date(Date.now()-14400*60*1e3).toISOString()}],ql=s=>{const l=lr(),t=l.find(a=>a.content_id===s)||l[0],r=Date.now();return{holding:t,content:{description:"Behind-the-scenes look at the launch strategy, featuring creator testimonials and performance metrics.",genres:["Campaign Spotlight","Community"],tags:["launch","growth","community"],published_at:new Date(r-10080*60*1e3).toISOString(),total_views:128e3,engagement_rate:12.4,earnings_to_date:4320},performance:{history:Array.from({length:14},(a,n)=>({date:new Date(r-(13-n)*24*60*60*1e3).toISOString().split("T")[0],price:t.current_price*(.85+n*.01),volume:Math.round(Math.random()*120+40)})),ledger:[{id:"txn-1",type:"purchase",quantity:t.owned_shares,price:t.avg_cost,timestamp:new Date(r-288*60*60*1e3).toISOString()},{id:"txn-2",type:"dividend",quantity:0,price:120,timestamp:new Date(r-5760*60*1e3).toISOString()}]},marketplace:{listings:[{id:"listing-history-1",quantity:40,ask_price:11.8,status:"filled",filled_at:new Date(r-7200*60*1e3).toISOString()}],offers:[{id:"offer-history-1",quantity:30,bid_price:12.6,status:"pending",buyer_name:"Marketplace Analyst",message:"Happy to take this block before launch day finale."}]}}},Wl=s=>{const l=nr(),t=l.find(a=>a.id===s)||l[0],r=Date.now();return{prediction:t,forecast:{metric:"7-day reach",target:"125K",odds:2.1,expires_at:new Date(r+5760*60*1e3).toISOString(),creator_projection:"Over performance expected due to paid boosts and influencer cross-promotions scheduled mid-week."},trajectory:Array.from({length:10},(a,n)=>{const i=new Date(r-(9-n)*24*60*60*1e3),p=6e4+n*6500+Math.round(Math.random()*2500);return{date:i.toISOString().split("T")[0],actual:p,expected:55e3+n*7e3}}),participants:[{username:"growth_analyst",amount:150,side:"over",status:"active"},{username:"launch_partner",amount:90,side:"under",status:"active"}]}},ir=async s=>lr(),Hl=async s=>nr(),Kl=async(s,l)=>ql(s),Yl=async s=>Wl(s),Te={primary:"#f97316",secondary:"#8b5cf6",success:"#10b981",warning:"#f59e0b",danger:"#ef4444",info:"#3b82f6",purple:"#a855f7",pink:"#ec4899",cyan:"#06b6d4"},pa=[Te.primary,Te.secondary,Te.success,Te.info,Te.purple,Te.pink,Te.warning,Te.danger,Te.cyan];function Jl({data:s,height:l=300}){return e.jsx(Hs,{width:"100%",height:l,children:e.jsxs(Sr,{data:s,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"earningsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:Te.success,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:Te.success,stopOpacity:.1})]})}),e.jsx(ft,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e.jsx(bt,{dataKey:"date",stroke:"#64748b",fontSize:12,tickFormatter:t=>new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx(jt,{stroke:"#64748b",fontSize:12,tickFormatter:t=>`$${t}`}),e.jsx(et,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},labelFormatter:t=>new Date(t).toLocaleDateString(),formatter:t=>[`$${t.toFixed(2)}`,"Earnings"]}),e.jsx(Dr,{type:"monotone",dataKey:"earnings",stroke:Te.success,strokeWidth:2,fill:"url(#earningsGradient)"})]})})}function or({data:s,height:l=300}){return e.jsx(Hs,{width:"100%",height:l,children:e.jsxs(kr,{data:s,layout:"horizontal",children:[e.jsx(ft,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e.jsx(bt,{type:"number",stroke:"#64748b",fontSize:12}),e.jsx(jt,{type:"category",dataKey:"metric",stroke:"#64748b",fontSize:12,width:100}),e.jsx(et,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},formatter:t=>[t.toLocaleString(),"Value"]}),e.jsx(Cr,{dataKey:"value",fill:Te.primary,radius:[0,4,4,0]})]})})}function ea({data:s,height:l=300}){const t=s.map((r,a)=>({...r,color:r.color||pa[a%pa.length]}));return e.jsx(Hs,{width:"100%",height:l,children:e.jsxs(vr,{children:[e.jsx(wr,{data:t,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:2,dataKey:"value",children:t.map((r,a)=>e.jsx(_r,{fill:r.color},`cell-${a}`))}),e.jsx(et,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},formatter:r=>[r.toLocaleString(),"Count"]}),e.jsx(Oa,{verticalAlign:"middle",align:"right",layout:"vertical",iconType:"circle",wrapperStyle:{fontSize:"12px",paddingLeft:"20px"}})]})})}function sa({data:s,height:l=200,primaryKey:t="value",secondaryKey:r,primaryColor:a=Te.primary,secondaryColor:n=Te.secondary}){return e.jsx(Hs,{width:"100%",height:l,children:e.jsxs(Kt,{data:s,children:[e.jsx(ft,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e.jsx(bt,{dataKey:"date",stroke:"#64748b",fontSize:12,tickFormatter:i=>new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx(jt,{stroke:"#64748b",fontSize:12}),e.jsx(et,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},labelFormatter:i=>new Date(i).toLocaleDateString()}),e.jsx(ht,{type:"monotone",dataKey:t,stroke:a,strokeWidth:2,dot:{r:3},activeDot:{r:5}}),r&&e.jsx(ht,{type:"monotone",dataKey:r,stroke:n,strokeWidth:2,dot:{r:3},activeDot:{r:5}})]})})}function Vl({data:s,metrics:l,height:t=300}){return e.jsx(Hs,{width:"100%",height:t,children:e.jsxs(Kt,{data:s,children:[e.jsx(ft,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e.jsx(bt,{dataKey:"date",stroke:"#64748b",fontSize:12,tickFormatter:r=>new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx(jt,{stroke:"#64748b",fontSize:12}),e.jsx(et,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},labelFormatter:r=>new Date(r).toLocaleDateString()}),e.jsx(Oa,{}),l.map(r=>e.jsx(ht,{type:"monotone",dataKey:r.key,stroke:r.color,strokeWidth:2,name:r.name,dot:{r:3},activeDot:{r:5}},r.key))]})})}function Ae({title:s,value:l,change:t,changeType:r,icon:a,trend:n}){const i=r==="increase"?"text-green-600":"text-red-600",p=r==="increase"?"↗":"↘";return e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[a&&e.jsx("div",{className:"text-gray-600",children:a}),e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:s})]}),t!==void 0&&e.jsxs("span",{className:`text-sm font-medium ${i} flex items-center space-x-1`,children:[e.jsx("span",{children:p}),e.jsxs("span",{children:[Math.abs(t),"%"]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l})}),n&&n.length>0&&e.jsx("div",{className:"h-16 w-full min-w-[120px]",children:e.jsx(Hs,{width:"100%",height:64,children:e.jsx(Kt,{data:n,children:e.jsx(ht,{type:"monotone",dataKey:"value",stroke:r==="increase"?Te.success:Te.danger,strokeWidth:2,dot:!1})})})})]})}function Xl({userData:s}){const l=Ce(),r=Array.from({length:30},(p,u)=>{const m=new Date;return m.setDate(m.getDate()-(29-u)),{date:m.toISOString().split("T")[0],earnings:Math.floor(Math.random()*50)+10,gems:Math.floor(Math.random()*20)+5,points:Math.floor(Math.random()*100)+20}}),a=[{name:"Points",value:s?.points_balance||0,color:"#3b82f6"},{name:"Keys",value:(s?.keys_balance||0)*10,color:"#f97316"},{name:"Gems",value:(s?.gems_balance||0)*5,color:"#8b5cf6"},{name:"Gold",value:(s?.gold_collected||0)*2,color:"#eab308"}],n=[{metric:"Social Actions",value:45},{metric:"Drop Completions",value:30},{metric:"Content Investments",value:15},{metric:"Referral Bonuses",value:8},{metric:"Achievements",value:2}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-500 rounded-xl p-6 text-white shadow",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm uppercase tracking-wide text-white/80",children:"New"}),e.jsx("h3",{className:"text-2xl font-semibold",children:"Growth Hub is live"}),e.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Stake gems, fund creators, and unlock higher returns on your balance."})]}),e.jsxs("button",{onClick:()=>l("/growth-hub"),className:"inline-flex items-center justify-center px-4 py-2 bg-white text-blue-600 font-medium rounded-lg shadow-sm hover:bg-blue-50 transition",children:["Explore Growth Hub",e.jsx(Ra,{className:"w-4 h-4 ml-2"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Ae,{title:"This Month",value:"$127.50",change:23,changeType:"increase",icon:e.jsx(re,{className:"w-5 h-5"}),trend:r.slice(-7).map(i=>({date:i.date,value:i.earnings}))}),e.jsx(Ae,{title:"All Time",value:"$1,456.80",change:8,changeType:"increase",icon:e.jsx(Rt,{className:"w-5 h-5"}),trend:r.slice(-7).map(i=>({date:i.date,value:i.earnings*5}))}),e.jsx(Ae,{title:"Pending",value:"$89.25",change:12,changeType:"increase",icon:e.jsx(Xe,{className:"w-5 h-5"}),trend:r.slice(-7).map(i=>({date:i.date,value:i.earnings*.5}))}),e.jsx(Ae,{title:"Available",value:"$234.75",change:5,changeType:"increase",icon:e.jsx(Os,{className:"w-5 h-5"}),trend:r.slice(-7).map(i=>({date:i.date,value:i.earnings*2}))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Earnings Trend (30 Days)"}),e.jsx(Jl,{data:r,height:300})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Currency Distribution"}),e.jsx(ea,{data:a.filter(i=>i.value>0),height:300})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Earning Sources"}),e.jsx(or,{data:n,height:300})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Currency Growth"}),e.jsx(sa,{data:r.map(i=>({date:i.date,value:i.points,secondary:i.gems*5})),height:300,primaryKey:"value",secondaryKey:"secondary",primaryColor:"#3b82f6",secondaryColor:"#8b5cf6"}),e.jsxs("div",{className:"flex justify-center space-x-6 mt-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-gray-600",children:"Points"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-violet-500 rounded-full"}),e.jsx("span",{className:"text-gray-600",children:"Gems (×5)"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Wallet Insights"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx(Me,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:s?.points_balance||0}),e.jsx("p",{className:"text-sm text-blue-600",children:"Active Points"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsx(Ye,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:s?.keys_balance||0}),e.jsx("p",{className:"text-sm text-orange-600",children:"Keys Available"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx(Ne,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:s?.gems_balance||0}),e.jsx("p",{className:"text-sm text-purple-600",children:"Gems Earned"})]}),e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[e.jsx(_e,{className:"w-6 h-6 text-yellow-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:s?.gold_collected||0}),e.jsx("p",{className:"text-sm text-yellow-600",children:"Gold Collection"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx(be,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["Level ",s?.level||1]}),e.jsx("p",{className:"text-sm text-green-600",children:"Current Level"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx(Rt,{className:"w-6 h-6 text-red-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:s?.points_streak_days||0}),e.jsx("p",{className:"text-sm text-red-600",children:"Day Streak"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Currency Breakdown"}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-900",children:"Points"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-blue-900",children:s?.points_balance?.toLocaleString()||"0"}),e.jsx("p",{className:"text-sm text-blue-600",children:"From social actions"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ye,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:"font-medium text-orange-900",children:"Keys"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-orange-900",children:s?.keys_balance||"0"}),e.jsx("p",{className:"text-sm text-orange-600",children:"For drop applications"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ne,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-medium text-purple-900",children:"Gems"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-purple-900",children:s?.gems_balance||"0"}),e.jsx("p",{className:"text-sm text-purple-600",children:"From completed drops"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"w-5 h-5 text-yellow-600"}),e.jsx("span",{className:"font-medium text-yellow-900",children:"Gold"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-yellow-900",children:s?.gold_collected||"0"}),e.jsx("p",{className:"text-sm text-yellow-600",children:"Prestige collection"})]})]})]})]})}function Ql({holdings:s,loading:l,onList:t,onView:r}){if(l)return e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Content Portfolio"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Loading holdings…"})]});if(!s.length)return e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-dashed border-gray-300 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Start building your portfolio"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Invest in creator content to earn returns and unlock secondary market trading."}),e.jsx("button",{className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition",children:"Discover Opportunities"})]});const a=s.reduce((n,i)=>(n.value+=i.market_value,n.gain+=i.unrealized_gain,n),{value:0,gain:0});return e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Content Portfolio"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Track your holdings, performance, and resale opportunities."})]}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Portfolio Value"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",a.value.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Unrealized Gain"}),e.jsxs("p",{className:`text-lg font-semibold ${a.gain>=0?"text-green-600":"text-red-500"}`,children:[a.gain>=0?"+":"","$",a.gain.toFixed(2)]})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Asset"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shares"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg. Cost"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Market Value"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unrealized"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Day"}),e.jsx("th",{scope:"col",className:"px-4 py-3"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(n=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:n.content_thumbnail,alt:n.content_title,className:"w-12 h-12 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:n.content_title}),e.jsxs("p",{className:"text-sm text-gray-500",children:[n.creator_name," • ",n.platform.toUpperCase()]})]})]})}),e.jsxs("td",{className:"px-4 py-4 text-right",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:n.owned_shares}),e.jsxs("div",{className:"text-xs text-gray-500",children:[n.available_to_sell," sellable"]})]}),e.jsxs("td",{className:"px-4 py-4 text-right",children:[e.jsxs("div",{className:"text-gray-900",children:["$",n.avg_cost.toFixed(2)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Now $",n.current_price.toFixed(2)]})]}),e.jsxs("td",{className:"px-4 py-4 text-right",children:[e.jsxs("div",{className:"text-gray-900",children:["$",n.market_value.toFixed(2)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Weekly ",n.week_change_pct.toFixed(1),"%"]})]}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsxs("div",{className:`font-semibold ${n.unrealized_gain>=0?"text-green-600":"text-red-500"}`,children:[n.unrealized_gain>=0?"+":"","$",n.unrealized_gain.toFixed(2)]})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${n.day_change_pct>=0?"bg-green-50 text-green-700":"bg-red-50 text-red-600"}`,children:[n.day_change_pct>=0?"+":"",n.day_change_pct.toFixed(2),"%"]})}),e.jsxs("td",{className:"px-4 py-4 text-right space-x-2",children:[e.jsx("button",{onClick:()=>r(n),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-600 rounded-lg hover:bg-gray-100",children:"View details"}),n.available_to_sell>0?e.jsx("button",{onClick:()=>t(n),className:"px-3 py-1.5 text-sm font-medium border border-orange-200 text-orange-600 rounded-lg hover:bg-orange-50",children:"List for resale"}):e.jsx("span",{className:"text-xs text-gray-400",children:"All shares listed"})]})]},n.content_id))})]})})]})}function Zl({listings:s,loading:l}){return l?e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"My Listings"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Loading listings…"})]}):s.length?e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"My Listings"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Active resale listings awaiting buyers."})]}),e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-700",children:[s.length," active"]})]}),e.jsx("div",{className:"space-y-3",children:s.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:t.content_thumbnail,alt:t.content_title,className:"w-12 h-12 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.content_title}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t.remaining_quantity,"/",t.quantity," shares available"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ask price"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",t.ask_price.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Created ",new Date(t.created_at).toLocaleDateString()," • ",t.status]})]})]},t.id))})]}):null}function en({incoming:s,outgoing:l,loading:t,onAccept:r}){return t?e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Offers"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Loading offers…"})]}):!s.length&&!l.length?null:e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Offers"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800",children:"Incoming"}),e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-orange-100 text-orange-700",children:s.length})]}),e.jsxs("div",{className:"space-y-3",children:[s.map(a=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[a.quantity," shares @ $",a.bid_price.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-500",children:a.content_title||a.content_id}),a.message&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["“",a.message,"”"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>r(a.id),className:"px-3 py-1.5 text-xs font-medium bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Accept"}),e.jsx("button",{className:"px-3 py-1.5 text-xs font-medium border border-gray-300 text-gray-600 rounded-lg hover:bg-gray-100",children:"Decline"})]})]})},a.id)),!s.length&&e.jsx("p",{className:"text-sm text-gray-500",children:"No incoming offers."})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800",children:"Outgoing"}),e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-slate-100 text-slate-700",children:l.length})]}),e.jsxs("div",{className:"space-y-3",children:[l.map(a=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[a.quantity," shares @ $",a.bid_price.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-500",children:a.content_title||a.content_id}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1 capitalize",children:["Status: ",a.status]})]},a.id)),!l.length&&e.jsx("p",{className:"text-sm text-gray-500",children:"No outgoing offers."})]})]})]})]})}function sn(){const[s,l]=o.useState([]),[t,r]=o.useState([]),[a,n]=o.useState(null),[i,p]=o.useState([]),[u,m]=o.useState(!0),[c,x]=o.useState([]),[g,h]=o.useState(!0),[j,y]=o.useState([]),[N,w]=o.useState([]),[f,d]=o.useState(!0),[b,F]=o.useState(null),[v,C]=o.useState(!1),[E,L]=o.useState(!0),[M,T]=o.useState("overview"),[B,k]=o.useState(!1),[S,$]=o.useState(!1),[z,_]=o.useState(!1),[G,q]=o.useState(!1),[ae,de]=o.useState(!1),[A,D]=o.useState(!1),[H,J]=o.useState(!1);console.log("Wallet component rendered, modal states:",{showGemStoreModal:A,showCurrencyModal:B,showWithdrawalModal:G}),o.useEffect(()=>{W()},[]),o.useEffect(()=>{P(),Y(),ce()},[]);const W=async()=>{try{console.log("=== fetchWalletData Debug ==="),console.log("Starting wallet data fetch..."),console.log("Checking authentication with Mocha service..."),console.log("Current cookies:",document.cookie);const I=ue(),Q=await fetch("/api/users/me",{credentials:"include",headers:I});console.log("Auth response:",{status:Q.status,statusText:Q.statusText,headers:Object.fromEntries(Q.headers.entries())});let me=null;try{const ve=await Q.text();console.log("Raw auth response:",ve),ve&&(me=JSON.parse(ve)),console.log("Auth data parsed:",{isNull:me===null,hasId:!!me?.id,hasEmail:!!me?.email,type:typeof me,data:me})}catch(ve){console.error("Failed to parse auth response:",ve)}if(!me||me===null){console.log("User not authenticated - showing error and manual auth options"),n(null),l([]),r([]),alert('Authentication failed. Please try the "Force Re-Login" button or refresh the page.');return}console.log("User is authenticated, fetching user data...");const Ts=await fetch("/api/users/me/wallets",{credentials:"include",headers:ue()});console.log("User data response status:",Ts.status);let je=null;try{je=await Ts.json(),console.log("User data parsed:",{isNull:je===null,hasError:!!je?.error,hasId:!!je?.id,hasEmail:!!je?.email,gems_balance:je?.gems_balance,type:typeof je})}catch(ve){console.error("Failed to parse user response:",ve)}if(je?.error&&(console.error("User data API error:",je.error),je.error.includes("configuration"))){alert("Server configuration error. Please contact support.");return}if(!je||je===null||je?.error){console.log("No valid database user found, creating temporary user...");const ve={id:Date.now(),mocha_user_id:me.id||"temp",email:me.email||"",display_name:me.google_user_data?.name||me.email?.split("@")[0]||"User",username:me.email?.split("@")[0]||"user",avatar_url:me.google_user_data?.picture||void 0,bio:"Welcome to Promorang!",banner_url:void 0,website_url:void 0,social_links:void 0,user_type:"regular",xp_points:100,level:1,referral_code:"TEMP"+Date.now().toString().slice(-4),referred_by:void 0,follower_count:0,following_count:0,total_earnings_usd:0,promogem_balance:0,points_balance:25,keys_balance:1,gems_balance:0,gold_collected:0,user_tier:"free",points_streak_days:0,last_activity_date:new Date().toISOString().split("T")[0],master_key_activated_at:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("Using temporary user data:",ve),n(ve)}else console.log("Setting valid user data:",{id:je.id,email:je.email,gems_balance:je.gems_balance}),n(je);try{const ve=ue(),[ps,gs]=await Promise.all([fetch("/api/users/wallets",{credentials:"include",headers:ve}),fetch("/api/users/transactions",{credentials:"include",headers:ve})]);let fs=[],rs=[];if(ps.ok){const De=await ps.json();Array.isArray(De)?fs=De:De&&Array.isArray(De.wallets)&&(fs=De.wallets)}if(gs.ok){const De=await gs.json();Array.isArray(De)?rs=De:De&&Array.isArray(De.transactions)&&(rs=De.transactions)}l(fs||[]),r(rs||[]),console.log("Fetched additional data:",{wallets:fs.length,transactions:rs.length})}catch(ve){console.error("Error fetching wallets/transactions:",ve),l([]),r([])}}catch(I){console.error("Failed to fetch wallet data:",I),I instanceof Error&&(console.error("Error details:",I.message),console.error("Error stack:",I.stack)),n(null),l([]),r([])}finally{L(!1),console.log("fetchWalletData completed, loading set to false")}},P=async()=>{m(!0);const I=await ir();p(I),m(!1)},Y=async()=>{h(!0);const I=await Rl(!0);x(I),h(!1)},ce=async()=>{d(!0);const[I,Q]=await Promise.all([ha("seller"),ha("buyer")]);y(I),w(Q),d(!1)},Be=I=>{F(I),C(!0)},ms=()=>{P(),Y(),ce()},Je=async I=>{try{await zl(I),await Promise.all([P(),Y(),ce()])}catch(Q){console.error("Failed to accept offer:",Q),alert(Q instanceof Error?Q.message:"Failed to accept offer")}},Se=s&&s.length>0?s.find(I=>I.currency_type==="USD"):null,xs=I=>{switch(I){case"task_payment":case"referral_bonus":case"staking_reward":return e.jsx(Ia,{className:"w-4 h-4 text-green-600"});case"withdrawal":return e.jsx(Ra,{className:"w-4 h-4 text-red-600"});default:return e.jsx(Xe,{className:"w-4 h-4 text-gray-600"})}},ze=I=>I>=0?"text-green-600":"text-red-600",Ve=I=>{I.preventDefault(),I.stopPropagation(),console.log("Buy More Gems button clicked!"),console.log("Current showGemStoreModal state:",A),console.log("Current userData:",a),D(!0),console.log("Setting showGemStoreModal to true"),setTimeout(()=>{console.log("showGemStoreModal after timeout:",A)},100)},We=I=>{I.preventDefault(),I.stopPropagation(),console.log("Convert Currency button clicked!"),console.log("Current showCurrencyModal state:",B),k(!0),console.log("Setting showCurrencyModal to true")},as=I=>{I.preventDefault(),I.stopPropagation(),console.log("Withdraw Gems button clicked!"),console.log("Current showWithdrawalModal state:",G),q(!0),console.log("Setting showWithdrawalModal to true")},He=()=>{console.log("Closing Gem Store Modal"),D(!1)},O=()=>{console.log("Closing Currency Modal"),k(!1)},K=()=>{console.log("Closing Withdrawal Modal"),q(!1)};return E?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Wallet"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your earnings and transactions"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-600 rounded-2xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"w-6 h-6"}),e.jsx("span",{className:"text-lg font-medium",children:"Points"})]}),e.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold",children:"PTS"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-3xl font-bold",children:a?.points_balance?.toLocaleString()||"0"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Earn from social actions"})]}),e.jsx("button",{onClick:We,className:"w-full bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-4 text-sm font-medium transition-colors",children:"Convert to Keys"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ye,{className:"w-6 h-6"}),e.jsx("span",{className:"text-lg font-medium",children:"Keys"})]}),e.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold",children:"KEY"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-3xl font-bold",children:a?.keys_balance||"0"}),e.jsx("p",{className:"text-orange-100 text-sm",children:"Apply for paid drops"})]}),e.jsx("button",{onClick:()=>$(!0),className:"w-full bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-4 text-sm font-medium transition-colors",children:"Master Key Status"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ne,{className:"w-6 h-6"}),e.jsx("span",{className:"text-lg font-medium",children:"Gems"})]}),e.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold",children:"GEM"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-3xl font-bold",children:a?.gems_balance||"0"}),e.jsx("p",{className:"text-purple-100 text-sm",children:"Earn from completed drops"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("button",{onClick:Ve,className:"bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors",children:"Buy More"}),e.jsx("button",{onClick:We,className:"bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors",children:"Convert"}),e.jsx("button",{onClick:as,disabled:(a?.gems_balance||0)<200,className:"bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Withdraw"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-amber-600 rounded-2xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"w-6 h-6"}),e.jsx("span",{className:"text-lg font-medium",children:"Gold"})]}),e.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold",children:"AU"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-3xl font-bold",children:a?.gold_collected||"0"}),e.jsx("p",{className:"text-yellow-100 text-sm",children:"Prestige currency"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>_(!0),className:"bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors",children:"Gold Shop"}),e.jsx("button",{onClick:()=>J(!0),className:"bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-2 text-xs font-medium transition-colors",children:"Achievements"})]})]})]}),Se&&Se.balance>0&&e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"w-6 h-6"}),e.jsx("span",{className:"text-lg font-medium",children:"USD Balance"})]}),e.jsx(Os,{className:"w-6 h-6 opacity-75"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-4xl font-bold",children:["$",(Se?.balance||0).toFixed(2)]}),e.jsx("p",{className:"text-green-100 text-sm",children:"Available for withdrawal"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{className:"flex-1 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-4 text-sm font-medium transition-colors",children:"Withdraw"}),e.jsx("button",{onClick:()=>de(!0),className:"flex-1 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg py-2 px-4 text-sm font-medium transition-colors",children:"Payment Methods"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Staking Rewards"}),e.jsx("span",{className:"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700 px-3 py-1 rounded-full text-sm font-medium",children:"12.5% APY"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"0"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Staked PromoGems"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"0.00"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Rewards"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"$0.00"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Earned"})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsx("button",{className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-3 rounded-lg font-medium transition-all duration-200",children:"Start Staking PromoGems"})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8 px-6",children:[e.jsx("button",{onClick:()=>T("overview"),className:`py-4 border-b-2 font-medium text-sm ${M==="overview"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Overview"}),e.jsx("button",{onClick:()=>T("transactions"),className:`py-4 border-b-2 font-medium text-sm ${M==="transactions"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Transactions"})]})}),e.jsxs("div",{className:"p-6",children:[M==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(Xl,{userData:a,transactions:t}),e.jsx(Ql,{holdings:i,loading:u,onList:Be,onView:I=>navigate(`/portfolio/holdings/${I.content_id}`)}),e.jsx(Zl,{listings:c,loading:g}),e.jsx(en,{incoming:j,outgoing:N,loading:f,onAccept:Je})]}),M==="transactions"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction History"}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Ma,{className:"w-4 h-4"}),e.jsx("span",{children:"Filter"})]})]}),e.jsx("div",{className:"space-y-3",children:t.length>0?t.map(I=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-sm",children:xs(I.transaction_type)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:I.description||I.transaction_type.replace("_"," ")}),e.jsxs("p",{className:"text-sm text-gray-500",children:[new Date(I.created_at).toLocaleDateString()," • ",I.currency_type]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-semibold ${ze(I.amount)}`,children:[I.amount>=0?"+":"","$",Math.abs(I.amount).toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:I.status})]})]},I.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Os,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No transactions yet"}),e.jsx("p",{className:"text-gray-600",children:"Your transaction history will appear here once you start earning."})]})})]})]})]}),!a&&e.jsx(Ol,{}),e.jsx(Ka,{user:a,isOpen:B,onClose:O,onSuccess:W}),e.jsx(Ya,{user:a,isOpen:S,onClose:()=>$(!1),onSuccess:W}),e.jsx(Ja,{user:a,isOpen:z,onClose:()=>_(!1),onPurchase:W}),e.jsx($l,{user:a,isOpen:G,onClose:K,onSuccess:W}),e.jsx(Gl,{isOpen:v,onClose:()=>C(!1),holding:b,onSuccess:ms}),e.jsx(Al,{user:a,isOpen:ae,onClose:()=>de(!1),onSuccess:W}),e.jsx(Ll,{user:a,isOpen:A,onClose:He,onSuccess:W}),e.jsx(Qt,{user:a,isOpen:H,onClose:()=>J(!1)})]})}function tn({isOpen:s,onClose:l,channel:t,user:r,onSuccess:a}){const[n,i]=o.useState(""),[p,u]=o.useState(!1),[m,c]=o.useState("");if(!s||!t)return null;const g=(()=>{if(typeof t.icon=="function")return t.icon;switch(t.iconKey||t.icon){case"Shield":return Pe;case"Rocket":return ls;case"Star":return X;case"TrendingUp":return re;default:return js}})(),h=()=>{const b={green:"from-green-500 to-emerald-600",blue:"from-blue-500 to-cyan-600",purple:"from-purple-500 to-pink-600",orange:"from-orange-500 to-red-600"};return b[t.color]||b.blue},j=()=>{switch(t.riskLevel){case"low":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"high":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},N=(()=>{const b=parseFloat(n)||0;if(b===0)return{daily:0,total:0,final:0};const F=t.lockPeriod,v=b*(t.baseMultiplier-1),C=v/F,E=b+v;return{daily:C,total:v,final:E}})(),w=n&&parseFloat(n)>=t.minDeposit&&parseFloat(n)<=t.maxDeposit&&parseFloat(n)<=(r?.gems_balance||0),f=async()=>{if(w){u(!0),c("");try{const b=await fetch("/api/growth/staking",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({channel_id:t.id,amount:parseFloat(n)})});if(b.ok)a(),l(),i("");else{const F=await b.json();c(F.error||"Failed to stake gems")}}catch{c("Network error occurred")}finally{u(!1)}}},d=()=>{const b=Math.min(r?.gems_balance||0,t.maxDeposit);i(b.toString())};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-screen overflow-y-auto",children:[e.jsxs("div",{className:`bg-gradient-to-r ${h()} p-6 text-white`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(g,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:t.name}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${j()} text-gray-800`,children:[t.riskLevel.toUpperCase()," RISK"]})]})]}),e.jsx("button",{onClick:l,className:"text-white/80 hover:text-white transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsx("p",{className:"text-white/90",children:t.description})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:t.lockPeriod}),e.jsx("div",{className:"text-sm text-gray-600",children:"Days Locked"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:[t.expectedApr,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Expected APR"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[t.baseMultiplier,"x"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Multiplier"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600",children:r?.gems_balance||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Your Balance"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Channel Features"}),e.jsx("div",{className:"space-y-2",children:t.features.map((b,F)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full bg-gradient-to-r ${h()}`}),e.jsx("span",{className:"text-sm text-gray-700",children:b})]},F))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stake Amount (Gems)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:n,onChange:b=>i(b.target.value),placeholder:`Min: ${t.minDeposit}, Max: ${t.maxDeposit}`,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",min:t.minDeposit,max:Math.min(t.maxDeposit,r?.gems_balance||0)}),e.jsx("button",{onClick:d,className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-sm text-purple-600 hover:text-purple-700 font-medium",children:"MAX"})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsxs("span",{children:["Min: ",t.minDeposit," gems"]}),e.jsxs("span",{children:["Max: ",Math.min(t.maxDeposit,r?.gems_balance||0)," gems"]})]})]}),n&&parseFloat(n)>0&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(Ua,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Projected Rewards"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Daily Reward"}),e.jsxs("div",{className:"font-bold text-green-600",children:["+",N.daily.toFixed(2)," Gems"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Rewards"}),e.jsxs("div",{className:"font-bold text-green-600",children:["+",N.total.toFixed(2)," Gems"]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Final Amount"}),e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[N.final.toFixed(2)," Gems"]})]})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(we,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-yellow-800",children:"Important Notice"}),e.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:["Your gems will be locked for ",t.lockPeriod," days. Early withdrawal may result in penalties. Rewards are distributed daily and automatically compounded."]})]})]})}),m&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-700",children:m})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:l,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:f,disabled:!w||p,className:`flex-1 px-6 py-3 rounded-lg font-medium transition-all duration-200 ${w&&!p?`bg-gradient-to-r ${h()} hover:opacity-90 text-white`:"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:p?"Staking...":`Stake ${n||"0"} Gems`})]})]})]})})}function an({isOpen:s,onClose:l,onSuccess:t}){const[r,a]=o.useState({title:"",description:"",category:"Technology",funding_goal:"",min_pledge:"",duration_days:"30"}),[n,i]=o.useState([{amount:25,title:"Early Supporter",description:"Get early access and exclusive updates",estimatedDelivery:"March 2025"}]),[p,u]=o.useState(!1),[m,c]=o.useState("");if(!s)return null;const x=["Technology","Film","Music","Art","Games","Fashion","Food","Publishing","Design","Education","Health","Other"],g=()=>{i([...n,{amount:100,title:"",description:"",estimatedDelivery:"April 2025"}])},h=N=>{n.length>1&&i(n.filter((w,f)=>f!==N))},j=(N,w,f)=>{const d=[...n];d[N]={...d[N],[w]:f},i(d)},y=async N=>{if(N.preventDefault(),!r.title||!r.description||!r.funding_goal){c("Please fill in all required fields");return}if(parseFloat(r.funding_goal)<1e3){c("Minimum funding goal is 1,000 gems");return}u(!0),c("");try{const w=await fetch("/api/growth/funding/projects",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...r,funding_goal:parseFloat(r.funding_goal),min_pledge:parseFloat(r.min_pledge)||25,duration_days:parseInt(r.duration_days),reward_tiers:n})});if(w.ok)t(),l(),a({title:"",description:"",category:"Technology",funding_goal:"",min_pledge:"",duration_days:"30"}),i([{amount:25,title:"Early Supporter",description:"Get early access and exclusive updates",estimatedDelivery:"March 2025"}]);else{const f=await w.json();c(f.error||"Failed to create project")}}catch{c("Network error occurred")}finally{u(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-screen overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(ls,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Create Funding Project"}),e.jsx("p",{className:"text-blue-100",children:"Launch your creative project"})]})]}),e.jsx("button",{onClick:l,className:"text-white/80 hover:text-white transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]})}),e.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Details"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Title *"}),e.jsx("input",{type:"text",value:r.title,onChange:N=>a({...r,title:N.target.value}),placeholder:"Enter your project title",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{value:r.description,onChange:N=>a({...r,description:N.target.value}),placeholder:"Describe your project, goals, and what makes it special",rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsx("select",{value:r.category,onChange:N=>a({...r,category:N.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:x.map(N=>e.jsx("option",{value:N,children:N},N))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (Days)"}),e.jsxs("select",{value:r.duration_days,onChange:N=>a({...r,duration_days:N.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"30",children:"30 days"}),e.jsx("option",{value:"45",children:"45 days"}),e.jsx("option",{value:"60",children:"60 days"}),e.jsx("option",{value:"90",children:"90 days"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Funding Goal (Gems) *"}),e.jsx("input",{type:"number",value:r.funding_goal,onChange:N=>a({...r,funding_goal:N.target.value}),placeholder:"10000",min:"1000",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Pledge (Gems)"}),e.jsx("input",{type:"number",value:r.min_pledge,onChange:N=>a({...r,min_pledge:N.target.value}),placeholder:"25",min:"1",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Reward Tiers"}),e.jsxs("button",{type:"button",onClick:g,className:"flex items-center space-x-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Tier"})]})]}),n.map((N,w)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:["Tier ",w+1]}),n.length>1&&e.jsx("button",{type:"button",onClick:()=>h(w),className:"text-red-600 hover:text-red-700",children:e.jsx(Pr,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Pledge Amount (Gems)"}),e.jsx("input",{type:"number",value:N.amount,onChange:f=>j(w,"amount",parseInt(f.target.value)||0),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Estimated Delivery"}),e.jsx("input",{type:"text",value:N.estimatedDelivery,onChange:f=>j(w,"estimatedDelivery",f.target.value),placeholder:"March 2025",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Reward Title"}),e.jsx("input",{type:"text",value:N.title,onChange:f=>j(w,"title",f.target.value),placeholder:"Early Access",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Reward Description"}),e.jsx("textarea",{value:N.description,onChange:f=>j(w,"description",f.target.value),placeholder:"Describe what backers will receive",rows:2,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]},w))]}),m&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-700",children:m})}),e.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:l,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Creating...":"Launch Project"})]})]})]})})}function rn({isOpen:s,onClose:l,user:t,onSuccess:r,policies:a}){const[n,i]=o.useState("pro"),[p,u]=o.useState(!1),[m,c]=o.useState(""),[x,g]=o.useState("select");if(!s)return null;const h=Array.isArray(a)?a:[],j=h.find(d=>d.id===n)||h[0]||null,y=j?(t?.follower_count||0)>=(j.minFollowers||0):!1,N=j?(t?.gems_balance||0)>=(j.monthlyPremium||0):!1,w=async()=>{if(!(!j||!y||!N)){u(!0),c("");try{const d=await fetch("/api/growth/shield/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({policy_id:n})});if(d.ok)r(),l(),g("select");else{const b=await d.json();c(b.error||"Failed to subscribe to shield")}}catch{c("Network error occurred")}finally{u(!1)}}},f=d=>d?e.jsx(te,{className:"w-4 h-4 text-green-600"}):e.jsx(se,{className:"w-4 h-4 text-gray-400"});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-screen overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(Pe,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Social Shield Protection"}),e.jsx("p",{className:"text-orange-100",children:"Protect your social media earnings"})]})]}),e.jsx("button",{onClick:l,className:"text-white/80 hover:text-white transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6",children:[x==="select"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(we,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-yellow-800",children:"Why You Need Social Shield"}),e.jsxs("ul",{className:"text-sm text-yellow-700 mt-2 space-y-1",children:[e.jsx("li",{children:"• Algorithm changes can reduce reach by up to 80%"}),e.jsx("li",{children:"• Account bans eliminate income overnight"}),e.jsx("li",{children:"• Content strikes impact monetization for weeks"}),e.jsx("li",{children:"• Platform issues can cause significant follower loss"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.length===0&&e.jsx("div",{className:"col-span-full bg-gray-50 border border-dashed border-gray-200 rounded-lg p-6 text-center text-sm text-gray-500",children:"No policies available right now. Check back soon!"}),h.map(d=>{const b=n===d.id,F=(t?.follower_count||0)>=d.minFollowers;return e.jsxs("div",{className:`border-2 rounded-xl overflow-hidden cursor-pointer transition-all ${b?"border-orange-500 ring-2 ring-orange-100":F?"border-gray-200 hover:border-orange-300":"border-gray-200 opacity-60"}`,onClick:()=>F&&i(d.id),children:[d.id==="pro"&&e.jsx("div",{className:"bg-orange-500 text-white text-center py-2 text-sm font-medium",children:"Most Popular"}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:d.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:d.description}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[d.monthlyPremium," Gems",e.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/month"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Up to $",d.maxCoverage.toLocaleString()," coverage"]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Coverage:"}),e.jsx("ul",{className:"space-y-1",children:Object.entries(d.coverage).map(([v,C])=>e.jsxs("li",{className:"flex items-center space-x-2",children:[f(C),e.jsx("span",{className:`text-xs ${C?"text-gray-700":"text-gray-400"}`,children:v.replace(/([A-Z])/g," $1").replace(/^./,E=>E.toUpperCase())})]},v))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Platforms:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:d.platforms.map(v=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:v},v))})]}),e.jsxs("div",{className:"text-xs text-gray-600 pt-2 border-t border-gray-100",children:[e.jsxs("div",{children:["Deductible: ",d.deductible," gems"]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(pe,{className:"w-3 h-3"}),e.jsxs("span",{children:["Min followers: ",d.minFollowers.toLocaleString()]})]})]})]}),!F&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-2",children:e.jsxs("p",{className:"text-xs text-red-700",children:["Requires ",d.minFollowers.toLocaleString()," followers"]})})]})]},d.id)})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Your Status"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pe,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{className:"text-blue-700",children:["Followers: ",(t?.follower_count||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(vs,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{className:"text-blue-700",children:["Gem Balance: ",t?.gems_balance||0]})]})]})]}),m&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-700",children:m})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:l,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>g("confirm"),disabled:!y||!N,className:"flex-1 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:["Continue with ",j?.name]})]})]}),x==="confirm"&&j&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirm Your Subscription"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:j.name}),e.jsxs("span",{className:"font-bold text-gray-900",children:[j.monthlyPremium," Gems/month"]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Maximum coverage: $",j.maxCoverage.toLocaleString()]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Deductible: ",j.deductible," gems per claim"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Terms & Conditions"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsx("p",{children:"• Your subscription will auto-renew monthly"}),e.jsx("p",{children:"• Claims must be filed within 7 days of incident"}),e.jsx("p",{children:"• Coverage begins 24 hours after subscription activation"}),e.jsx("p",{children:"• You can cancel anytime without penalty"}),e.jsx("p",{children:"• Payouts are processed within 5-10 business days"})]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>g("select"),className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Back"}),e.jsx("button",{onClick:w,disabled:p,className:"flex-1 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white rounded-lg font-medium transition-all duration-200 disabled:opacity-50",children:p?"Subscribing...":`Subscribe for ${j.monthlyPremium} Gems`})]})]})]})]})})}const ln=s=>typeof s=="function"?s():s,Ks=async(s,l)=>{try{const t=await fetch(s,{credentials:"include"});if(!t.ok)throw new Error(`Request failed with status ${t.status}`);return await t.json()}catch(t){return console.warn(`Falling back for ${s}:`,t instanceof Error?t.message:t),ln(l)}},nn=()=>({user:{id:"growth-demo-user",email:"growth@promorang.com",username:"growth_creator",display_name:"Growth Creator",user_type:"creator",points_balance:12500,gems_balance:980,keys_balance:24,gold_collected:12,follower_count:42e3,created_at:new Date(Date.now()-2160*60*60*1e3).toISOString(),updated_at:new Date().toISOString(),avatar_url:"https://api.dicebear.com/7.x/avataaars/svg?seed=growth_hub",user_tier:"premium"}}),ga=s=>[{id:"foundation-growth",name:"Foundation Growth",description:"Balanced staking pool focused on retention and engagement.",lock_period_days:45,base_multiplier:1.4,risk_level:"medium",min_amount:150,max_amount:7500,expected_apr:18.5,icon:Object.keys(s)[0]||"TrendingUp",color:"emerald",features:["Boosted engagement rewards","Weekly treasury reports","Auto-compound"],participant_count:182,total_deposited:96500},{id:"creator-accelerator",name:"Creator Accelerator",description:"High-yield pool backing top creators and launch drops.",lock_period_days:75,base_multiplier:2.1,risk_level:"high",min_amount:500,max_amount:2e4,expected_apr:28,icon:Object.keys(s)[1]||"Rocket",color:"purple",features:["Launch drop priority","Risk-adjusted backfill","Creator insurance"],participant_count:94,total_deposited:184e3},{id:"stability-shield",name:"Stability Shield",description:"Protected staking for conservative growth portfolios.",lock_period_days:30,base_multiplier:1.1,risk_level:"low",min_amount:50,max_amount:5e3,expected_apr:9.5,icon:Object.keys(s)[2]||"Shield",color:"cyan",features:["Principal protection","Daily liquidity window","Auto rollover"],participant_count:312,total_deposited:142500}],fa=()=>[{id:"position-1",channel_id:"foundation-growth",amount:750,multiplier:1.4,lock_until:new Date(Date.now()+600*60*60*1e3).toISOString(),earned_so_far:86,status:"active"},{id:"position-2",channel_id:"stability-shield",amount:300,multiplier:1.1,lock_until:new Date(Date.now()+288*60*60*1e3).toISOString(),earned_so_far:18,status:"withdrawable"}],ba=()=>[{id:101,creator_id:12,creator_name:"Creator Collective",creator_avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=collective",title:"Creator Success Toolkit",description:"Launch an interactive toolkit that teaches new creators how to monetize within 30 days.",target_amount:5e4,amount_raised:24850,backer_count:186,days_left:18,min_pledge:75,status:"active",featured:!0,rewardTiers:[{amount:75,title:"Supporter",description:"Early access + invite to creator roundtable",estimatedDelivery:"45 days",backerCount:120},{amount:350,title:"Partner",description:"Custom growth audit & promo spotlight",estimatedDelivery:"60 days",backerCount:42}]},{id:102,creator_id:27,creator_name:"Community Capital",creator_avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=community_capital",title:"Growth Hub Community Fund",description:"Back emerging creators through pooled capital and mentorship credits.",target_amount:8e4,amount_raised:61200,backer_count:265,days_left:9,min_pledge:120,status:"active",featured:!1,rewardTiers:[{amount:120,title:"Backer",description:"Badge + quarterly impact report",estimatedDelivery:"30 days",backerCount:188},{amount:600,title:"Angel",description:"Board invite + co-marketing slots",estimatedDelivery:"75 days",backerCount:26}]}],ja=()=>[{id:"policy-1",name:"Social Safeguard",description:"Covers platform bans and sudden algorithm changes for verified creators.",premium_amount:45,coverage_amount:7500,deductible:250,min_followers:1e3,coverage:{platformBan:!0,algorithmChange:!0,contentStrike:!0,monetizationLoss:!0,followerLoss:!1},platforms:["instagram","youtube","tiktok"]},{id:"policy-2",name:"Monetization Guard",description:"Income replacement for monetization suspension and CPM volatility.",premium_amount:65,coverage_amount:12e3,deductible:400,min_followers:5e3,coverage:{platformBan:!1,algorithmChange:!0,contentStrike:!0,monetizationLoss:!0,followerLoss:!0},platforms:["youtube","twitch"]}];function on(){const[s,l]=o.useState(null),[t,r]=o.useState(!0),[a,n]=o.useState("overview"),[i,p]=o.useState([]),[u,m]=o.useState([]),[c,x]=o.useState([]),[g,h]=o.useState([]),[j,y]=o.useState(null),[N,w]=o.useState(!1),[f,d]=o.useState(!1),[b,F]=o.useState(!1);o.useEffect(()=>{v()},[]);const v=async()=>{try{const _={TrendingUp:re,Rocket:ls,Star:X,Shield:Pe,Diamond:Ne,Target:be},[G,q,ae,de,A]=await Promise.all([Ks("/api/users/me",nn()),Ks("/api/growth/channels",{channels:ga(_)}),Ks("/api/growth/staking",{positions:fa()}),Ks("/api/growth/funding/projects",{projects:ba()}),Ks("/api/growth/shield/policies",{policies:ja()})]);l(G?.user||G||null);const D=(q?.channels||ga(_)).map((P,Y)=>{const ce=P.icon_key??P.iconKey??P.icon??"Shield",Be=_[ce]||Pe;return{id:P.id??`channel-${Y}`,name:P.name??"Growth Channel",description:P.description??"Ecosystem staking opportunity",lockPeriod:P.lock_period_days??P.lockPeriodDays??P.lockPeriod??30,baseMultiplier:P.base_multiplier??P.baseMultiplier??1.2,riskLevel:P.risk_level??P.riskLevel??"medium",minDeposit:P.min_amount??P.minDeposit??100,maxDeposit:P.max_amount??P.maxDeposit??1e4,totalDeposited:P.total_deposited??P.totalDeposited??0,participantCount:P.participant_count??P.participantCount??0,expectedApr:P.expected_apr??P.expectedApr??P.apy??12,icon:Be,color:P.color||["blue","green","purple"][Y%3],features:P.features||["Daily rewards","Auto-compound"]}});x(D);const H=(ae?.positions||fa()).map((P,Y)=>({id:P.id??`position-${Y}`,channelId:P.channel_id??P.channelId??D[0]?.id??"channel-1",amount:P.amount??0,multiplier:P.multiplier??1,lockUntil:P.lock_until??P.lockUntil??new Date().toISOString(),earnedSoFar:P.earned_so_far??P.earnedSoFar??0,status:P.status??"active"}));p(H);const J=(de?.projects||ba()).map((P,Y)=>({id:P.id??Y,creatorId:P.creator_id??P.creatorId??0,creatorName:P.creator_name??P.creatorName??"Growth Creator",creatorAvatar:P.creator_avatar??P.creatorAvatar??`https://api.dicebear.com/7.x/avataaars/svg?seed=growth_${Y}`,title:P.title??"Growth initiative",description:P.description??"Help accelerate our platform metrics.",category:P.category??"growth",fundingGoal:P.target_amount??P.fundingGoal??1e4,currentFunding:P.amount_raised??P.currentFunding??2500,backerCount:P.backer_count??P.backerCount??Math.floor(Math.random()*40)+10,daysLeft:P.days_left??P.daysLeft??14,minPledge:P.min_pledge??P.minPledge??50,rewardTiers:P.rewardTiers??[{amount:50,title:"Supporter",description:"Early updates & access",estimatedDelivery:"30 days",backerCount:42},{amount:250,title:"Champion",description:"Private workshop + rewards",estimatedDelivery:"45 days",backerCount:18}],featured:!!P.featured,status:P.status??"active"}));m(J);const W=(A?.policies||ja()).map((P,Y)=>({id:P.id??`shield-${Y}`,name:P.name??"Growth Shield",description:P.description??"Protects against platform volatility.",coverage:P.coverage??{platformBan:!0,algorithmChange:!0,contentStrike:!0,monetizationLoss:!0,followerLoss:!1},monthlyPremium:P.premium_amount??P.monthlyPremium??49,maxCoverage:P.coverage_amount??P.maxCoverage??5e3,deductible:P.deductible??250,platforms:P.platforms??["instagram","youtube"],minFollowers:P.min_followers??P.minFollowers??1e3}));h(W)}catch(_){console.error("Failed to fetch growth hub data:",_)}finally{r(!1)}},C=[{id:"stable",name:"Stable Growth",description:"Low-risk staking with steady returns. Perfect for conservative investors.",lockPeriod:30,baseMultiplier:1.2,riskLevel:"low",minDeposit:100,maxDeposit:1e4,totalDeposited:125e3,participantCount:234,expectedApr:12.5,icon:Pe,color:"green",features:["Principal protection","Daily rewards","Auto-compound","Early withdrawal (penalty)"]},{id:"growth",name:"Growth Accelerator",description:"Medium-risk channel focused on platform growth metrics and user acquisition.",lockPeriod:90,baseMultiplier:1.8,riskLevel:"medium",minDeposit:250,maxDeposit:25e3,totalDeposited:89e3,participantCount:156,expectedApr:28.7,icon:re,color:"blue",features:["Growth bonuses","Platform rewards","Referral multipliers","Quarterly bonuses"]},{id:"venture",name:"Venture Pool",description:"High-risk, high-reward pool investing in emerging creators and technologies.",lockPeriod:180,baseMultiplier:3.2,riskLevel:"high",minDeposit:500,maxDeposit:5e4,totalDeposited:67e3,participantCount:89,expectedApr:45.8,icon:ls,color:"purple",features:["Creator equity","Tech innovation rewards","Exclusive opportunities","Governance rights"]},{id:"creator",name:"Creator Fund",description:"Support emerging creators while earning from their success.",lockPeriod:60,baseMultiplier:2.1,riskLevel:"medium",minDeposit:200,maxDeposit:15e3,totalDeposited:45e3,participantCount:78,expectedApr:32.1,icon:X,color:"orange",features:["Creator revenue share","Content access","Meet & greet events","Portfolio tracking"]}],E=[{id:"basic",name:"Basic Shield",coverage:{platformBan:!1,algorithmChange:!0,contentStrike:!0,monetizationLoss:!1,followerLoss:!1},monthlyPremium:29,maxCoverage:1e3,deductible:50,platforms:["Instagram","TikTok"],minFollowers:1e3},{id:"pro",name:"Pro Shield",coverage:{platformBan:!0,algorithmChange:!0,contentStrike:!0,monetizationLoss:!0,followerLoss:!1},monthlyPremium:79,maxCoverage:5e3,deductible:100,platforms:["Instagram","TikTok","YouTube","Twitter"],minFollowers:5e3},{id:"enterprise",name:"Enterprise Shield",coverage:{platformBan:!0,algorithmChange:!0,contentStrike:!0,monetizationLoss:!0,followerLoss:!0},monthlyPremium:199,maxCoverage:25e3,deductible:250,platforms:["Instagram","TikTok","YouTube","Twitter","LinkedIn","Twitch"],minFollowers:25e3}],M=Array.from({length:30},(G,q)=>{const ae=new Date;return ae.setDate(ae.getDate()-(29-q)),{date:ae.toISOString().split("T")[0],totalStaked:Math.floor(Math.random()*5e4)+3e5,activeProjects:Math.floor(Math.random()*10)+25,fundingVolume:Math.floor(Math.random()*25e3)+75e3,premiumsCollected:Math.floor(Math.random()*5e3)+15e3,rewardsDistributed:Math.floor(Math.random()*2e4)+5e4}}),T=c.length>0?c:C,B=T.reduce((_,G)=>_+G.totalDeposited,0),k=T.reduce((_,G)=>_+G.participantCount,0),S=T.length?T.reduce((_,G)=>_+G.expectedApr,0)/T.length:0,$=_=>{switch(_){case"low":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"high":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},z=_=>{const G={green:"from-green-500 to-emerald-600",blue:"from-blue-500 to-cyan-600",purple:"from-purple-500 to-pink-600",orange:"from-orange-500 to-red-600"};return G[_]||G.blue};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-blue-600 to-cyan-600 rounded-2xl p-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Growth Hub"}),e.jsx("p",{className:"text-purple-100 text-lg",children:"Amplify your earnings through staking, funding, and protection"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-purple-200",children:"Your Portfolio Value"}),e.jsxs("div",{className:"text-3xl font-bold",children:[i.reduce((_,G)=>_+G.amount+G.earnedSoFar,0).toFixed(0)," Gems"]})]})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8",children:[{id:"overview",label:"Overview",icon:pt},{id:"channels",label:"Growth Channels",icon:re},{id:"funding",label:"Creator Funding",icon:ls},{id:"shield",label:"Social Shield",icon:Pe},{id:"economy",label:"Platform Economy",icon:Tr}].map(_=>{const G=_.icon;return e.jsxs("button",{onClick:()=>n(_.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${a===_.id?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{children:_.label})]},_.id)})})}),a==="overview"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(Ae,{title:"Active Stakes",value:i.filter(_=>_.status==="active").length.toString(),change:12.5,changeType:"increase",icon:e.jsx(js,{className:"w-5 h-5"}),trend:[]}),e.jsx(Ae,{title:"Total Earnings",value:`${i.reduce((_,G)=>_+G.earnedSoFar,0).toFixed(1)} Gems`,change:8.3,changeType:"increase",icon:e.jsx(Ne,{className:"w-5 h-5"}),trend:[]}),e.jsx(Ae,{title:"Projects Backed",value:"3",change:50,changeType:"increase",icon:e.jsx(Rs,{className:"w-5 h-5"}),trend:[]}),e.jsx(Ae,{title:"Shield Coverage",value:"$5,000",change:0,changeType:"increase",icon:e.jsx(Pe,{className:"w-5 h-5"}),trend:[]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Your Active Positions"}),i.length>0?e.jsx("div",{className:"space-y-4",children:i.map(_=>{const G=T.find(de=>de.id===_.channelId),q=G?.icon||js,ae=Math.ceil((new Date(_.lockUntil).getTime()-new Date().getTime())/(1e3*60*60*24));return e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${z(G?.color||"blue")} rounded-xl flex items-center justify-center text-white`,children:e.jsx(q,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:G?.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[_.amount," Gems staked"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["+",_.earnedSoFar," Gems"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[ae," days left"]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[(_.earnedSoFar/(_.amount*(_.multiplier-1))*100).toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,_.earnedSoFar/(_.amount*(_.multiplier-1))*100)}%`}})})]})]},_.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(js,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Active Positions"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Start growing your gems through our staking channels"}),e.jsx("button",{onClick:()=>n("channels"),className:"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200",children:"Explore Growth Channels"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx(re,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Platform Growth"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Last 30 days"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Staked"}),e.jsxs("span",{className:"font-semibold",children:[B.toLocaleString()," Gems"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Active Stakers"}),e.jsx("span",{className:"font-semibold",children:k.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Avg APR"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[S.toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(ls,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Creator Funding"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Active projects"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Live Projects"}),e.jsx("span",{className:"font-semibold",children:u.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Funding"}),e.jsxs("span",{className:"font-semibold",children:["$",u.reduce((_,G)=>_+G.currentFunding,0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Success Rate"}),e.jsx("span",{className:"font-semibold text-green-600",children:"87%"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:e.jsx(Pe,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Social Shield"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Protection status"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Coverage Level"}),e.jsx("span",{className:"font-semibold",children:"Pro Shield"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Max Coverage"}),e.jsx("span",{className:"font-semibold",children:"$5,000"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status"}),e.jsx("span",{className:"font-semibold text-green-600",children:"Active"})]})]})]})]})]}),a==="channels"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Growth Channels"}),e.jsx("p",{className:"text-gray-600",children:"Lock your gems for higher multipliers and platform rewards"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Your Available Balance"}),e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[s?.gems_balance||0," Gems"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.length===0&&e.jsx("div",{className:"col-span-full bg-gray-50 border border-dashed border-gray-200 rounded-lg p-6 text-center text-sm text-gray-500",children:"Growth channels are being configured. Check back soon."}),T.map(_=>{const G=_.icon;return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:`bg-gradient-to-r ${z(_.color)} p-6 text-white`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:_.name}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${$(_.riskLevel)} text-gray-800`,children:[_.riskLevel.toUpperCase()," RISK"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[_.expectedApr.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm opacity-75",children:"Expected APR"})]})]}),e.jsx("p",{className:"text-white/90",children:_.description})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Lock Period"}),e.jsxs("div",{className:"font-semibold",children:[_.lockPeriod," days"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Multiplier"}),e.jsxs("div",{className:"font-semibold",children:[_.baseMultiplier,"x"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Min Deposit"}),e.jsxs("div",{className:"font-semibold",children:[_.minDeposit," Gems"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Participants"}),e.jsx("div",{className:"font-semibold",children:_.participantCount})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Features"}),e.jsx("div",{className:"space-y-1",children:_.features.map((q,ae)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:q})]},ae))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Deposited"}),e.jsxs("span",{className:"font-semibold",children:[_.totalDeposited.toLocaleString()," Gems"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:e.jsx("div",{className:`bg-gradient-to-r ${z(_.color)} h-2 rounded-full transition-all duration-300`,style:{width:`${Math.min(100,_.totalDeposited/_.maxDeposit*100)}%`}})})]}),e.jsxs("button",{onClick:()=>{y(_),w(!0)},className:`w-full bg-gradient-to-r ${z(_.color)} hover:opacity-90 text-white py-3 px-4 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2`,children:[e.jsx(js,{className:"w-4 h-4"}),e.jsxs("span",{children:["Stake in ",_.name]})]})]})]})]},_.id)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(Ua,{className:"w-6 h-6 text-blue-600"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Staking Calculator"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (Gems)"}),e.jsx("input",{type:"number",placeholder:"1000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Channel"}),e.jsx("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:T.map(_=>e.jsx("option",{value:_.id,children:_.name},_.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Rewards"}),e.jsx("div",{className:"px-3 py-2 bg-green-50 border border-green-200 rounded-lg text-green-800 font-medium",children:"+250 Gems"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Return"}),e.jsx("div",{className:"px-3 py-2 bg-blue-50 border border-blue-200 rounded-lg text-blue-800 font-medium",children:"1,250 Gems"})]})]})]})]}),a==="funding"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Creator Funding"}),e.jsx("p",{className:"text-gray-600",children:"Support innovative projects and earn from their success"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 flex items-center space-x-2",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{children:"Create Project"})]})]}),e.jsx("div",{className:"space-y-6",children:u.filter(_=>_.featured).map(_=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(X,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium text-yellow-700",children:"Featured Project"})]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:_.title}),e.jsx("p",{className:"text-gray-600 mb-4",children:_.description}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:_.creatorAvatar,alt:_.creatorName,className:"w-8 h-8 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900",children:_.creatorName})]}),e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:_.category})]})]}),e.jsxs("div",{className:"text-right ml-6",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["$",_.currentFunding.toLocaleString()]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["of $",_.fundingGoal.toLocaleString()," goal"]})]})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:_.backerCount}),e.jsx("div",{className:"text-sm text-gray-500",children:"Backers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:_.daysLeft}),e.jsx("div",{className:"text-sm text-gray-500",children:"Days Left"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:[(_.currentFunding/_.fundingGoal*100).toFixed(0),"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Funded"})]})]}),e.jsx("button",{onClick:()=>{},className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200",children:"Back This Project"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,_.currentFunding/_.fundingGoal*100)}%`}})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:_.rewardTiers.slice(0,3).map((G,q)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"text-lg font-bold text-gray-900 mb-2",children:["$",G.amount]}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:G.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:G.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:[G.backerCount," backers"]}),e.jsx("span",{className:"text-blue-600",children:G.estimatedDelivery})]})]},q))})]})]},_.id))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:u.filter(_=>!_.featured).map(_=>e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("img",{src:_.creatorAvatar,alt:_.creatorName,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:_.creatorName}),e.jsx("span",{className:"text-sm text-gray-500",children:_.category})]})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:_.title}),e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:_.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Funding Progress"}),e.jsxs("span",{className:"font-medium",children:["$",_.currentFunding.toLocaleString()," / $",_.fundingGoal.toLocaleString()]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,_.currentFunding/_.fundingGoal*100)}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[e.jsxs("span",{children:[_.backerCount," backers"]}),e.jsxs("span",{children:[_.daysLeft," days left"]})]})]}),e.jsx("button",{className:"w-full mt-4 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white py-2 px-4 rounded-lg font-medium transition-all duration-200",children:"View Project"})]})},_.id))})]}),a==="shield"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Social Shield"}),e.jsx("p",{className:"text-gray-600",children:"Protect your social media earnings with comprehensive insurance coverage"})]}),e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(we,{className:"w-6 h-6 text-orange-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-900 mb-2",children:"Why You Need Social Shield"}),e.jsxs("ul",{className:"text-orange-800 space-y-1 text-sm",children:[e.jsx("li",{children:"• Platform algorithm changes can reduce your reach by up to 80%"}),e.jsx("li",{children:"• Account bans can eliminate months of income overnight"}),e.jsx("li",{children:"• Content strikes can impact monetization for weeks"}),e.jsx("li",{children:"• Follower loss from platform issues affects future earnings"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:E.map(_=>e.jsxs("div",{className:`bg-white rounded-xl border-2 shadow-sm overflow-hidden ${_.id==="pro"?"border-blue-500 ring-2 ring-blue-100":"border-gray-200"}`,children:[_.id==="pro"&&e.jsx("div",{className:"bg-blue-500 text-white text-center py-2 text-sm font-medium",children:"Most Popular"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:_.name}),e.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:["$",_.monthlyPremium,e.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/month"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Up to $",_.maxCoverage.toLocaleString()," coverage"]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Coverage Includes:"}),e.jsx("ul",{className:"space-y-2",children:Object.entries(_.coverage).map(([G,q])=>e.jsxs("li",{className:"flex items-center space-x-2",children:[q?e.jsx(te,{className:"w-4 h-4 text-green-600"}):e.jsx(te,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:`text-sm ${q?"text-gray-700":"text-gray-400"}`,children:G.replace(/([A-Z])/g," $1").replace(/^./,ae=>ae.toUpperCase())})]},G))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Platforms:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:_.platforms.map(G=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:G},G))})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{children:["Deductible: $",_.deductible]}),e.jsxs("div",{children:["Min followers: ",_.minFollowers.toLocaleString()]})]})]}),e.jsxs("button",{onClick:()=>F(!0),className:`w-full py-3 px-4 rounded-lg font-medium transition-all duration-200 ${_.id==="pro"?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"}`,children:["Get ",_.name]})]})]},_.id))}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Claims"}),e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Pe,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{children:"No claims yet - you're well protected!"})]})]})]}),a==="economy"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Platform Economy"}),e.jsx("p",{className:"text-gray-600",children:"How your participation drives the entire Promorang ecosystem"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(Ae,{title:"Total Value Locked",value:`${B.toLocaleString()} Gems`,change:23.4,changeType:"increase",icon:e.jsx(js,{className:"w-5 h-5"}),trend:M.slice(-7).map(_=>({date:_.date,value:_.totalStaked}))}),e.jsx(Ae,{title:"Active Projects",value:u.length.toString(),change:15.2,changeType:"increase",icon:e.jsx(ls,{className:"w-5 h-5"}),trend:M.slice(-7).map(_=>({date:_.date,value:_.activeProjects}))}),e.jsx(Ae,{title:"Funding Volume",value:`$${u.reduce((_,G)=>_+G.currentFunding,0).toLocaleString()}`,change:31.7,changeType:"increase",icon:e.jsx(oe,{className:"w-5 h-5"}),trend:M.slice(-7).map(_=>({date:_.date,value:_.fundingVolume}))}),e.jsx(Ae,{title:"Shield Premiums",value:"$47,000",change:8.9,changeType:"increase",icon:e.jsx(Pe,{className:"w-5 h-5"}),trend:M.slice(-7).map(_=>({date:_.date,value:_.premiumsCollected}))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Economic Flow"}),e.jsx(sa,{data:M.map(_=>({date:_.date,value:_.rewardsDistributed,secondary:_.fundingVolume})),height:300,primaryKey:"value",secondaryKey:"secondary",primaryColor:"#10b981",secondaryColor:"#3b82f6"}),e.jsxs("div",{className:"flex justify-center space-x-6 mt-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-gray-600",children:"Rewards Distributed"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-gray-600",children:"Funding Volume"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Value Distribution"}),e.jsx(ea,{data:[{name:"Staking Rewards",value:45,color:"#10b981"},{name:"Creator Funding",value:30,color:"#3b82f6"},{name:"Shield Reserves",value:15,color:"#8b5cf6"},{name:"Platform Development",value:10,color:"#f59e0b"}],height:300})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"How Growth Hub Stimulates the Economy"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(re,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Staking Creates Liquidity"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"When you stake gems, they're used to fund platform operations, creator rewards, and new feature development."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ls,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Funding Drives Innovation"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Creator funding projects introduce new content types and engagement methods, expanding earning opportunities."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Pe,{className:"w-4 h-4 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Shield Stabilizes Earnings"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Social Shield premiums create a safety net that encourages more users to participate confidently."})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Me,{className:"w-4 h-4 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Network Effects"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"More participants mean better rates, higher liquidity, and stronger protection for everyone."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(be,{className:"w-4 h-4 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Value Alignment"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Your success directly correlates with platform growth, creating aligned incentives for long-term value creation."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Mr,{className:"w-4 h-4 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Continuous Innovation"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Funds from Growth Hub activities are reinvested into new earning opportunities and platform improvements."})]})]})]})]})]})]}),e.jsx(tn,{isOpen:N,onClose:()=>w(!1),channel:j,user:s,onSuccess:v}),e.jsx(an,{isOpen:f,onClose:()=>d(!1),user:s,onSuccess:v}),e.jsx(rn,{isOpen:b,onClose:()=>F(!1),user:s,onSuccess:v,policies:g})]})}function cn({user:s,isOpen:l,onClose:t,onSuccess:r}){const[a,n]=o.useState(""),[i,p]=o.useState(!1),[u,m]=o.useState(null),[c,x]=o.useState(!1);if(!l||!s)return null;const g=async()=>{if(!a.trim()){m("Please enter a referral code");return}p(!0),m(null);try{const N=await fetch("/api/users/process-referral",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({referral_code:a.toUpperCase()})});if(N.ok){const w=await N.json();r(),t(),j(w.referred_reward)}else{const w=await N.json();m(w.error||"Failed to process referral")}}catch(N){console.error("Referral processing failed:",N),m("Network error occurred")}finally{p(!1)}},h=async()=>{const N=`https://promorang.com?ref=${s.referral_code}`;await navigator.clipboard.writeText(N),x(!0),setTimeout(()=>x(!1),2e3)},j=N=>{const w=document.createElement("div");w.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 animate-pulse",w.innerHTML=`
      <div class="flex items-center space-x-3">
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
          <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <div>
          <div class="font-bold">Referral Success!</div>
          <div class="text-sm">You earned ${N} points!</div>
        </div>
      </div>
    `,document.body.appendChild(w),setTimeout(()=>{document.body.contains(w)&&document.body.removeChild(w)},4e3)},y=`https://promorang.com?ref=${s.referral_code}`;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(pe,{className:"w-6 h-6 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Referral Program"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Invite friends and earn together"})]})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-200 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Your Referral Code"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("code",{className:"flex-1 bg-white px-4 py-3 rounded-xl border font-mono text-lg text-center",children:s.referral_code}),e.jsx("button",{onClick:h,className:"p-3 bg-purple-500 hover:bg-purple-600 text-white rounded-xl transition-colors",children:c?e.jsx(ds,{className:"w-5 h-5"}):e.jsx(qs,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-purple-700 text-center",children:"Share this code or the link below with friends"}),e.jsx("div",{className:"bg-white rounded-xl p-3 border",children:e.jsx("p",{className:"text-sm text-gray-600 break-all",children:y})})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-6",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-4",children:"How It Works"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(pe,{className:"w-6 h-6 text-blue-600"})}),e.jsx("h5",{className:"font-medium text-blue-900 mb-1",children:"Share"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Send your code to friends"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(Cs,{className:"w-6 h-6 text-blue-600"})}),e.jsx("h5",{className:"font-medium text-blue-900 mb-1",children:"They Join"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Friend signs up with your code"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(Cs,{className:"w-6 h-6 text-blue-600"})}),e.jsx("h5",{className:"font-medium text-blue-900 mb-1",children:"Both Earn"}),e.jsx("p",{className:"text-sm text-blue-700",children:"You get 500, they get 250 points"})]})]})]}),!s.referred_by&&e.jsxs("div",{className:"border border-gray-200 rounded-2xl p-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Have a Referral Code?"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",value:a,onChange:N=>n(N.target.value.toUpperCase()),placeholder:"Enter referral code",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono",maxLength:6}),u&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3",children:e.jsx("p",{className:"text-sm text-red-700",children:u})}),e.jsx("button",{onClick:g,disabled:!a.trim()||i,className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-3 rounded-xl font-medium transition-all duration-200 flex items-center justify-center space-x-2",children:i?e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}):e.jsxs(e.Fragment,{children:[e.jsx(Cs,{className:"w-5 h-5"}),e.jsx("span",{children:"Apply Code & Earn 250 Points"})]})})]})]}),s.referred_by&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ds,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900",children:"Referral Applied"}),e.jsxs("p",{className:"text-sm text-green-700",children:["You joined using code: ",s.referred_by]})]})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 border border-yellow-200 rounded-2xl p-6",children:[e.jsx("h4",{className:"font-medium text-yellow-900 mb-3",children:"Earning Potential"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:"500"}),e.jsx("div",{className:"text-sm text-yellow-600",children:"Points per referral"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:"∞"}),e.jsx("div",{className:"text-sm text-yellow-600",children:"No limit on referrals"})]})]})]})]})]})})}function dn({user:s,applicationId:l,dropTitle:t,isOpen:r,onClose:a,onSuccess:n}){const[i,p]=o.useState("url"),[u,m]=o.useState(""),[c,x]=o.useState(""),[g,h]=o.useState(!1),[j,y]=o.useState(null);if(!r||!s)return null;const N=async()=>{if(!u.trim()){y("Please provide your submission data");return}if(i==="url"&&!f(u)){y("Please provide a valid URL");return}h(!0),y(null);try{const b=await fetch(`/api/drop-applications/${l}/submit`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({submission_type:i,submission_data:u,submission_notes:c})});if(b.ok)n(),a(),w(),d();else{const F=await b.json();y(F.error||"Submission failed")}}catch(b){console.error("Submission failed:",b),y("Network error occurred")}finally{h(!1)}},w=()=>{m(""),x(""),p("url"),y(null)},f=b=>{try{return new URL(b),!0}catch{return!1}},d=()=>{const b=document.createElement("div");b.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 animate-pulse",b.innerHTML=`
      <div class="flex items-center space-x-3">
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
        </svg>
        <div>
          <div class="font-bold">Submission Sent!</div>
          <div class="text-sm">Your work has been submitted for review</div>
        </div>
      </div>
    `,document.body.appendChild(b),setTimeout(()=>{document.body.contains(b)&&document.body.removeChild(b)},4e3)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ss,{className:"w-6 h-6 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Submit Your Work"}),e.jsx("p",{className:"text-sm text-gray-600",children:t})]})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Submission Type"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>p("url"),className:`p-4 rounded-xl border-2 transition-colors ${i==="url"?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(It,{className:"w-6 h-6 mx-auto mb-2 text-purple-600"}),e.jsx("div",{className:"text-sm font-medium",children:"URL Link"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Submit a link to your work"})]}),e.jsxs("button",{onClick:()=>p("text"),className:`p-4 rounded-xl border-2 transition-colors ${i==="text"?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(ys,{className:"w-6 h-6 mx-auto mb-2 text-purple-600"}),e.jsx("div",{className:"text-sm font-medium",children:"Text Content"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Submit text directly"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:i==="url"?"URL Link *":"Text Content *"}),i==="url"?e.jsx("input",{type:"url",value:u,onChange:b=>m(b.target.value),placeholder:"https://example.com/your-work",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("textarea",{value:u,onChange:b=>m(b.target.value),placeholder:"Enter your text content here...",rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes (Optional)"}),e.jsx("textarea",{value:c,onChange:b=>x(b.target.value),placeholder:"Any additional context or notes about your submission...",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Submission Guidelines"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"• Ensure your submission meets all drop requirements"}),e.jsx("li",{children:"• Double-check URLs are accessible and working"}),e.jsx("li",{children:"• Include any relevant context in the additional notes"}),e.jsx("li",{children:"• Your submission will be reviewed within 24-48 hours"})]})]}),j&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-start space-x-3",children:[e.jsx(we,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-700",children:j})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:a,className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:N,disabled:!u.trim()||g,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-3 rounded-xl font-medium transition-all duration-200 flex items-center justify-center space-x-2",children:g?e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"w-5 h-5"}),e.jsx("span",{children:"Submit Work"})]})})]})]})]})})}function mn({application:s,onSubmissionSuccess:l}){const[t,r]=o.useState(!1),a=s.drop_title?.toLowerCase().includes("[demo]")||s.drop_title?.toLowerCase().includes("demo")||s.application_message?.toLowerCase().includes("demo"),n=m=>{switch(m){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"completed":return"bg-purple-100 text-purple-800";case"rejected":return"bg-red-100 text-red-800";case"submitted":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},i=m=>{switch(m){case"completed":return e.jsx(te,{className:"w-4 h-4"});case"pending":case"submitted":return e.jsx(Xe,{className:"w-4 h-4"});case"rejected":return e.jsx(we,{className:"w-4 h-4"});default:return null}},p=s.status==="approved",u=s.status==="approved";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`rounded-2xl p-6 border ${a?"bg-orange-50 border-orange-200":"bg-gray-50 border-gray-100"}`,children:[a&&e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-lg px-3 py-2 mb-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm font-medium",children:[e.jsx("span",{children:"🧪"}),e.jsx("span",{children:"DEMO APPLICATION - No real gems earned"}),e.jsx("span",{children:"🧪"})]})}),e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.drop_title}),s.advertiser_brand_name&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-medium",children:s.advertiser_brand_name})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:s.application_message}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${n(s.status)}`,children:[i(s.status),e.jsx("span",{children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),a&&e.jsx("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs font-medium",children:"DEMO"}),s.review_score&&e.jsxs("span",{className:"text-sm text-gray-600",children:["Score: ",s.review_score,"/10"]}),u&&e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full animate-pulse",children:"Submission Required"})]})]}),e.jsxs("div",{className:"text-right ml-6",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:a?"Demo Earned":"Earned"}),e.jsxs("div",{className:`font-semibold ${a?"text-orange-600":"text-purple-600"}`,children:[s.gems_earned," gems ",a&&"(Demo)"]}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Cost: ",s.key_cost," keys"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[e.jsx(ts,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:["Applied ",new Date(s.applied_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[s.completed_at&&e.jsxs("div",{className:"text-green-600 font-medium text-sm",children:["Completed ",new Date(s.completed_at).toLocaleDateString()]}),p&&e.jsxs("button",{onClick:()=>r(!0),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-2 text-white ${a?"bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600":"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600"}`,children:[e.jsx(Ss,{className:"w-4 h-4"}),e.jsx("span",{children:a?"Demo Submit":"Submit Work"})]})]})]})]}),e.jsx(dn,{user:null,applicationId:s.id,dropTitle:s.drop_title,isOpen:t,onClose:()=>r(!1),onSuccess:()=>{l(),r(!1)}})]})}function xn({user:s,isOpen:l,onClose:t,onSuccess:r}){const[a,n]=o.useState(1),[i,p]=o.useState(!1),[u,m]=o.useState(null),[c,x]=o.useState({full_name:"",instagram_username:"",phone_number:"",email:"",follower_count:""}),[g,h]=o.useState(null);if(!l||!s)return null;const j=async()=>{if(!c.full_name||!c.instagram_username||!c.phone_number||!c.email||!c.follower_count){m("Please fill in all required fields");return}if(parseInt(c.follower_count)<500){m("Minimum 500 followers required for influence rewards");return}p(!0),m(null);try{const f=await fetch("/api/users/register-influence-rewards",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({full_name:c.full_name,platform:"instagram",platform_username:c.instagram_username,phone_number:c.phone_number,email:c.email,follower_count:parseInt(c.follower_count)})});if(f.ok){const d=await f.json();h(d),n(2)}else{const d=await f.json();m(d.error||"Registration failed")}}catch(f){console.error("Influence rewards registration failed:",f),m("Network error occurred")}finally{p(!1)}},y=async()=>{p(!0),m(null);try{const f=await fetch("/api/users/claim-influence-points",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({})});if(f.ok)await f.json(),r(),t(),n(1),x({full_name:"",instagram_username:"",phone_number:"",email:"",follower_count:""});else{const d=await f.json();m(d.error||"Failed to claim points")}}catch(f){console.error("Point claiming failed:",f),m("Network error occurred")}finally{p(!1)}},N=f=>Math.floor(f*.01),w=()=>{const f=new Date;return`${f.getFullYear()}-${String(f.getMonth()+1).padStart(2,"0")}`};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"w-6 h-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Influence Rewards"})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),a===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(pe,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Earn Points from Your Influence"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Get dynamic monthly points based on your real social media follower count"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"How It Works"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{children:"Your follower count × 0.01 = monthly points"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{children:"Points refresh monthly - no rollover"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{children:"Must re-verify each month to maintain points"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{children:"Minimum 500 followers required"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Enter Your Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Le,{className:"w-4 h-4 inline mr-1"}),"Full Name *"]}),e.jsx("input",{type:"text",value:c.full_name,onChange:f=>x({...c,full_name:f.target.value}),placeholder:"Enter your full name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Us,{className:"w-4 h-4 inline mr-1"}),"Instagram Username *"]}),e.jsx("input",{type:"text",value:c.instagram_username,onChange:f=>x({...c,instagram_username:f.target.value}),placeholder:"@yourusername",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Ba,{className:"w-4 h-4 inline mr-1"}),"Phone Number *"]}),e.jsx("input",{type:"tel",value:c.phone_number,onChange:f=>x({...c,phone_number:f.target.value}),placeholder:"+1 (555) 123-4567",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Zs,{className:"w-4 h-4 inline mr-1"}),"Email Address *"]}),e.jsx("input",{type:"email",value:c.email,onChange:f=>x({...c,email:f.target.value}),placeholder:"your@email.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(pe,{className:"w-4 h-4 inline mr-1"}),"Current Follower Count *"]}),e.jsx("input",{type:"number",min:"500",value:c.follower_count,onChange:f=>x({...c,follower_count:f.target.value}),placeholder:"e.g. 5000",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),c.follower_count&&e.jsx("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-green-700",children:"Monthly Points:"}),e.jsxs("span",{className:"font-bold text-green-800",children:[N(parseInt(c.follower_count)||0)," points"]})]})})]})]}),u&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(we,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-700",children:u})]})}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(we,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Important Notes:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• Your information will be verified through our Many Chat integration"}),e.jsx("li",{children:"• Points are awarded monthly and do not carry over"}),e.jsx("li",{children:"• You must re-register each month to maintain your rewards"}),e.jsx("li",{children:"• Minimum 500 followers required"})]})]})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:j,disabled:i,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",children:i?"Processing...":"Register for Rewards"})]})]}),a===2&&g&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(te,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Registration Successful!"}),e.jsxs("p",{className:"text-gray-600 text-sm",children:["Your influence rewards have been calculated for ",w()]})]}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Platform:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Us,{className:"w-4 h-4 text-pink-600"}),e.jsx("span",{className:"font-medium",children:"Instagram"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Username:"}),e.jsxs("span",{className:"font-medium",children:["@",g.platform_username]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Followers:"}),e.jsx("span",{className:"font-bold text-blue-600",children:g.follower_count.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Monthly Points:"}),e.jsxs("span",{className:"font-bold text-green-600",children:[g.points_calculated," points"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Current Month:"}),e.jsx("span",{className:"font-medium",children:g.current_month})]})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ts,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Next Steps:"}),e.jsxs("p",{children:["Your registration has been submitted for verification through our Many Chat system. You'll be able to claim your ",g.points_calculated," points once verification is complete."]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:y,disabled:i,className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 disabled:opacity-50 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200",children:i?"Checking...":"Claim Points (if verified)"}),e.jsx("button",{onClick:()=>{n(1),h(null),m(null)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Register Different Account"})]}),u&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(we,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-700",children:u})]})})]})]})})}function un({isOpen:s,onClose:l,user:t,onSuccess:r}){const[a,n]=o.useState({}),[i,p]=o.useState({instagram:"",twitter:"",linkedin:"",facebook:"",youtube:"",tiktok:""}),[u,m]=o.useState(!1),[c,x]=o.useState(!1),[g,h]=o.useState(!1),[j,y]=o.useState({});o.useEffect(()=>{if(s&&t&&(n({username:t.username||"",display_name:t.display_name||"",bio:t.bio||"",avatar_url:t.avatar_url||"",banner_url:t.banner_url||"",website_url:t.website_url||"",social_links:t.social_links||""}),t.social_links))try{const v=JSON.parse(t.social_links);p({instagram:v.instagram||"",twitter:v.twitter||"",linkedin:v.linkedin||"",facebook:v.facebook||"",youtube:v.youtube||"",tiktok:v.tiktok||""})}catch(v){console.error("Failed to parse social links:",v)}},[s,t]);const N=async(v,C)=>{C==="avatar"?x(!0):h(!0);try{const E=new FormData;E.append("image",v);const L=await fetch("/api/images/upload",{method:"POST",credentials:"include",body:E});if(!L.ok)throw new Error("Upload failed");const M=await L.json();n(C==="avatar"?T=>({...T,avatar_url:M.url}):T=>({...T,banner_url:M.url}))}catch(E){console.error("Image upload failed:",E),y(L=>({...L,[C]:"Failed to upload image. Please try again."}))}finally{C==="avatar"?x(!1):h(!1)}},w=(v,C)=>{const E=v.target.files?.[0];if(E){if(!E.type.startsWith("image/")){y(L=>({...L,[C]:"Please select an image file."}));return}if(E.size>5*1024*1024){y(L=>({...L,[C]:"Image size must be less than 5MB."}));return}y(L=>{const M={...L};return delete M[C],M}),N(E,C)}},f=()=>{const v={};if(a.username&&a.username.length<3&&(v.username="Username must be at least 3 characters long"),a.username&&!/^[a-zA-Z0-9_]+$/.test(a.username)&&(v.username="Username can only contain letters, numbers, and underscores"),a.bio&&a.bio.length>500&&(v.bio="Bio must be less than 500 characters"),a.website_url&&a.website_url)try{new URL(a.website_url)}catch{v.website_url="Please enter a valid URL"}return y(v),Object.keys(v).length===0},d=async()=>{if(f()){m(!0);try{const v=Object.entries(i).filter(([M,T])=>T.trim()!=="").reduce((M,[T,B])=>({...M,[T]:B}),{}),C={...a,social_links:Object.keys(v).length>0?JSON.stringify(v):""},E=await fetch("/api/users/profile",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(C)});if(!E.ok){const M=await E.json();throw new Error(M.error||"Failed to update profile")}const L=await E.json();r(L),l()}catch(v){console.error("Failed to update profile:",v),y({general:v instanceof Error?v.message:"Failed to update profile"})}finally{m(!1)}}},b=v=>{switch(v){case"instagram":return e.jsx(Us,{className:"w-4 h-4"});case"twitter":return e.jsx(Ht,{className:"w-4 h-4"});case"linkedin":return e.jsx($a,{className:"w-4 h-4"});case"facebook":return e.jsx(Pa,{className:"w-4 h-4"});case"youtube":return e.jsx(Aa,{className:"w-4 h-4"});case"tiktok":return e.jsx("div",{className:"w-4 h-4 bg-black rounded text-white text-xs flex items-center justify-center font-bold",children:"T"});default:return e.jsx(zt,{className:"w-4 h-4"})}},F=v=>{switch(v){case"instagram":return"@username";case"twitter":return"@username";case"linkedin":return"username or profile URL";case"facebook":return"username or profile URL";case"youtube":return"channel name or URL";case"tiktok":return"@username";default:return"username"}};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl flex items-center justify-center",children:e.jsx(Le,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Profile"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Update your profile information and appearance"})]})]}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:e.jsx(se,{className:"w-5 h-5 text-gray-500"})})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Profile Images"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Banner Image"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"w-full h-48 bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 rounded-xl overflow-hidden",children:[a.banner_url?e.jsx("img",{src:a.banner_url,alt:"Banner preview",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-orange-500 via-red-500 to-pink-500"}),e.jsx("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center",children:e.jsxs("label",{className:"cursor-pointer bg-white/90 backdrop-blur-sm hover:bg-white text-gray-700 px-4 py-2 rounded-xl flex items-center space-x-2 transition-colors",children:[g?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-gray-600 border-t-transparent rounded-full"}):e.jsx(Qs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:g?"Uploading...":"Change Banner"}),e.jsx("input",{type:"file",accept:"image/*",onChange:v=>w(v,"banner"),className:"hidden",disabled:g})]})})]}),j.banner&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center space-x-1",children:[e.jsx(we,{className:"w-4 h-4"}),e.jsx("span",{children:j.banner})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Profile Picture"}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a.avatar_url||"/default-avatar.png",alt:"Profile picture",className:"w-24 h-24 rounded-2xl object-cover border-4 border-white shadow-lg"}),e.jsxs("label",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-orange-500 hover:bg-orange-600 text-white rounded-xl flex items-center justify-center cursor-pointer transition-colors",children:[c?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):e.jsx(Qs,{className:"w-4 h-4"}),e.jsx("input",{type:"file",accept:"image/*",onChange:v=>w(v,"avatar"),className:"hidden",disabled:c})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Upload a new profile picture. Use a square image for best results."}),e.jsx("p",{className:"text-xs text-gray-500",children:"Supported formats: JPG, PNG, GIF (max 5MB)"})]})]}),j.avatar&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center space-x-1",children:[e.jsx(we,{className:"w-4 h-4"}),e.jsx("span",{children:j.avatar})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),e.jsx("input",{type:"text",value:a.username||"",onChange:v=>n({...a,username:v.target.value}),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors ${j.username?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"Enter username"}),j.username&&e.jsxs("p",{className:"text-red-600 text-sm mt-1 flex items-center space-x-1",children:[e.jsx(we,{className:"w-4 h-4"}),e.jsx("span",{children:j.username})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Name"}),e.jsx("input",{type:"text",value:a.display_name||"",onChange:v=>n({...a,display_name:v.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"Enter display name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),e.jsx("textarea",{value:a.bio||"",onChange:v=>n({...a,bio:v.target.value}),placeholder:"Tell us about yourself...",rows:4,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors resize-none ${j.bio?"border-red-300 bg-red-50":"border-gray-300"}`}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[j.bio&&e.jsxs("p",{className:"text-red-600 text-sm flex items-center space-x-1",children:[e.jsx(we,{className:"w-4 h-4"}),e.jsx("span",{children:j.bio})]}),e.jsxs("p",{className:"text-xs text-gray-500 ml-auto",children:[(a.bio||"").length,"/500 characters"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Website"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website URL"}),e.jsxs("div",{className:"relative",children:[e.jsx(zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"url",value:a.website_url||"",onChange:v=>n({...a,website_url:v.target.value}),className:`w-full pl-12 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors ${j.website_url?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"https://yourwebsite.com"})]}),j.website_url&&e.jsxs("p",{className:"text-red-600 text-sm mt-1 flex items-center space-x-1",children:[e.jsx(we,{className:"w-4 h-4"}),e.jsx("span",{children:j.website_url})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Social Media"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(i).map(([v,C])=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 capitalize",children:v}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:b(v)}),e.jsx("input",{type:"text",value:C,onChange:E=>p({...i,[v]:E.target.value}),className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:F(v)})]})]},v))})]}),j.general&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(we,{className:"w-5 h-5 text-red-600"}),e.jsx("p",{className:"text-red-700",children:j.general})]})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 p-6 border-t border-gray-100 bg-gray-50",children:[e.jsx("button",{onClick:l,className:"px-6 py-3 text-gray-700 hover:text-gray-900 transition-colors",disabled:u,children:"Cancel"}),e.jsx("button",{onClick:d,disabled:u||c||g,className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:from-gray-400 disabled:to-gray-500 text-white px-8 py-3 rounded-xl font-medium transition-all duration-200 flex items-center space-x-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ds,{className:"w-4 h-4"}),e.jsx("span",{children:"Save Changes"})]})})]})]})}):null}function hn({isOpen:s,onClose:l,holding:t,sellerId:r,onSuccess:a}){const[n,i]=o.useState(()=>t?Math.max(1,Math.ceil(t.owned_shares*.25)):1),[p,u]=o.useState(()=>t?.current_price||0),[m,c]=o.useState(""),[x,g]=o.useState(!1),[h,j]=o.useState(null);if(o.useEffect(()=>{t&&s&&(i(Math.min(Math.max(1,Math.ceil(t.owned_shares*.25)),t.owned_shares)),u(t.current_price),c(""),j(null))},[t,s]),!s||!t)return null;const y=()=>{i(Math.min(Math.max(1,Math.ceil(t.owned_shares*.25)),t.owned_shares)),u(t.current_price),c(""),j(null)},N=()=>{x||(y(),l())},w=async f=>{if(f.preventDefault(),!!t){if(n<=0||p<=0){j("Enter a valid quantity and offer price.");return}g(!0),j(null);try{await Ul({content_id:t.content_id,seller_id:r,quantity:n,bid_price:p,message:m}),a?.(),N()}catch(d){j(d instanceof Error?d.message:"Failed to submit offer")}finally{g(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Make an Offer"}),e.jsx("p",{className:"text-sm text-gray-500",children:t.content_title})]}),e.jsx("button",{onClick:N,className:"text-gray-400 hover:text-gray-600","aria-label":"Close make offer modal",children:"×"})]}),e.jsxs("form",{onSubmit:w,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity"}),e.jsx("input",{type:"number",min:1,value:n,onChange:f=>i(Number(f.target.value)),className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Seller holds ",t.owned_shares," shares"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Offer Price (per share)"}),e.jsx("input",{type:"number",min:.01,step:.01,value:p,onChange:f=>u(Number(f.target.value)),className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Current price ",t.current_price.toFixed(2)]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Message (optional)"}),e.jsx("textarea",{rows:3,value:m,onChange:f=>c(f.target.value),placeholder:"Share context or terms for your offer",className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 text-sm text-gray-600",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total offer value"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",(n*p).toFixed(2)]})]})}),h&&e.jsx("p",{className:"text-sm text-red-600",children:h}),e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg shadow-sm hover:bg-blue-700 disabled:opacity-60",children:x?"Submitting…":"Submit Offer"})]})]})]})})}function pn({isPublicProfile:s=!1,useUserId:l=!1}){const{user:t}=Ue(),{username:r,id:a}=Ps(),n=Ce(),i=cs||"",p=R=>`${i}${R}`,[u,m]=o.useState(null),[c,x]=o.useState(!0),[g,h]=o.useState(!1),[j,y]=o.useState("overview"),[N,w]=o.useState(!1),[f,d]=o.useState([]),[b,F]=o.useState([]),[v,C]=o.useState([]),[E,L]=o.useState([]),[M,T]=o.useState([]),[B,k]=o.useState(null),[S,$]=o.useState(!1),[z,_]=o.useState(!1),[G,q]=o.useState(!1),[ae,de]=o.useState(!1),[A,D]=o.useState(!1),[H,J]=o.useState(!1),[W,P]=o.useState(!1),[Y,ce]=o.useState(null),[Be,ms]=o.useState(!1),[Je,Se]=o.useState(null),[xs,ze]=o.useState(!1),[Ve,We]=o.useState(null);o.useEffect(()=>{if(s&&(r||a)?as():me(),new URLSearchParams(window.location.search).get("openInfluenceRewards")==="true"){J(!0);const ne=window.location.pathname;window.history.replaceState({},"",ne)}},[s,r]),o.useEffect(()=>{},[j,s,u]),o.useEffect(()=>{if(!u)return;(async()=>{const ne=await ir(String(u.id));L(ne.filter(us=>us.visibility!=="private"));const ye=await Hl(String(u.id));T(ye)})()},[u?.id]);const as=async()=>{if(!(!r&&!a))try{let R;if(l&&a)R=`/api/users/public/id/${a}`;else if(r)R=`/api/users/public/${r}`;else throw new Error("No user identifier provided");const ne=await fetch(p(R));if(!ne.ok)throw new Error("User not found");const ye=await ne.json();m(ye.user),d(ye.content||[]),F(ye.drops||[]),k(ye.leaderboard_position)}catch(R){console.error("Failed to fetch public profile:",R)}finally{x(!1)}},He=R=>{ce(R),P(!0)},O=R=>{Se(R),ms(!0)},K=R=>{We(R),ze(!0)},I=R=>{P(!1),ce(null),d(ne=>ne.map(ye=>ye.id===R.id?R:ye))},Q=async()=>{if(Je)try{const R=await fetch(p(`/api/content/${Je.id}`),{method:"DELETE",credentials:"include"});if(R.ok)d(ne=>ne.filter(ye=>ye.id!==Je.id)),ms(!1),Se(null);else{const ne=await R.json();alert(ne.error||"Failed to delete content")}}catch(R){console.error("Error deleting content:",R),alert("Failed to delete content")}},me=async()=>{if(t&&!s){console.log("Using authenticated user data directly:",t),m(t),x(!1);return}try{const R=localStorage.getItem("authToken"),ne={"Content-Type":"application/json"};R&&(ne.Authorization=`Bearer ${R}`);const ye=await fetch(p("/api/auth/profile"),{headers:ne,credentials:"include"});if(ye.ok){const us=await ye.json();us.success&&m(us.user)}}catch(R){console.error("Failed to fetch user profile:",R)}finally{x(!1)}},Ts=async()=>{if(u){if(t&&!t.id){console.log("Using mock applications data for demo account"),C([]),q(!1);return}if(!u.id){C([]),q(!1);return}q(!0);try{const R=await fetch(p("/api/users/drop-applications"),{credentials:"include"});if(R.ok){const ne=await R.json();C(ne)}else C([])}catch(R){console.error("Failed to fetch user applications:",R),C([])}finally{q(!1)}}},je=R=>{m(R),w(!1)},ve=async()=>{u?.referral_code&&(await navigator.clipboard.writeText(u.referral_code),h(!0),setTimeout(()=>h(!1),2e3))},ps=R=>{const ye=u?.level||1,us=1e3*ye,vt=1e3*(ye+1),wt=(R-us)/(vt-us)*100;return Math.max(0,Math.min(100,wt))},gs=R=>{switch(R.toLowerCase()){case"youtube":return e.jsx(Ea,{className:"w-4 h-4"});case"instagram":case"twitter":case"linkedin":default:return e.jsx(Fa,{className:"w-4 h-4"})}},fs=R=>{switch(R){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},rs=R=>{switch(R){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"completed":return"bg-purple-100 text-purple-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};if(c)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})});if(!u&&!c&&!s&&!t)return e.jsx("div",{className:"max-w-2xl mx-auto text-center py-12 px-6",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8",children:[e.jsx(Le,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"User Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:s?"The user you're looking for doesn't exist or may have been removed.":"There was an issue loading your profile. Please try refreshing the page."}),e.jsx(he,{to:"/",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200",children:"Go to Home"})]})});const De=s?[{id:"overview",label:"Overview",icon:Le},{id:"content",label:"Content",icon:ys,count:f.length},...u?.user_type==="advertiser"?[{id:"drops",label:"Drops Created",icon:ke,count:b.length}]:[],{id:"achievements",label:"Achievements",icon:os}]:[{id:"overview",label:"Overview",icon:Le},{id:"content",label:"Content",icon:ys,count:f.length},{id:"drops",label:"Drops Created",icon:ke,count:b.length},{id:"applications",label:"Applications",icon:na,count:v.length},{id:"achievements",label:"Achievements",icon:os}];return e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s?`${u?.display_name||u?.username||"User"}'s Profile`:"Profile"}),e.jsx("p",{className:"text-gray-600",children:s?"View public profile and activity":"Manage your account and view your activity"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"relative h-48 bg-gradient-to-r from-orange-500 via-red-500 to-pink-500",children:u?.banner_url?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:u.banner_url,alt:"Profile banner",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-500/20 via-red-500/20 to-pink-500/20"})]}):e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-orange-500 via-red-500 to-pink-500"})}),e.jsxs("div",{className:"px-6 lg:px-8 pb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end lg:justify-between -mt-16 space-y-6 lg:space-y-0",children:[e.jsx("div",{className:"relative z-10",children:e.jsx("div",{className:"relative",children:e.jsx("img",{src:u?.avatar_url||t?.google_user_data?.picture||"/default-avatar.png",alt:"Profile",className:"w-32 h-32 rounded-2xl border-4 border-white shadow-xl object-cover bg-white"})})}),!s&&e.jsxs("button",{onClick:()=>w(!0),className:"lg:mb-4 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium flex items-center space-x-2 transition-all duration-200 shadow-lg hover:shadow-xl self-start lg:self-auto",children:[e.jsx(Ut,{className:"w-4 h-4"}),e.jsx("span",{children:"Edit Profile"})]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:u?.display_name||(s?u?.username:t?.google_user_data?.name)||"User"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-gray-600",children:[e.jsxs("span",{children:["@",u?.username||"username-not-set"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Level ",u?.level||1]}),u?.user_type==="advertiser"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Advertiser"})]})]}),B&&e.jsxs("div",{className:"flex flex-wrap items-center gap-6 mt-3",children:[e.jsx(fe,{content:"Daily leaderboard rank",compact:!0,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Daily Rank"}),e.jsxs("span",{className:"font-semibold text-yellow-700",children:["#",B.daily_rank||"N/A"]})]})}),e.jsx(fe,{content:"Activity score",compact:!0,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Score:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:(B.composite_score||0).toFixed(1)})]})})]})]}),(u.website_url||u.social_links)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-4 p-4 bg-gray-50 rounded-xl",children:[u.website_url&&e.jsxs("a",{href:u.website_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 transition-colors font-medium",children:[e.jsx(ss,{className:"w-4 h-4"}),e.jsx("span",{children:"Website"})]}),u.social_links&&(()=>{try{const R=JSON.parse(u.social_links);return Object.entries(R).map(([ne,ye])=>e.jsxs("div",{className:"flex items-center space-x-1 text-gray-600",children:[e.jsxs("span",{className:"text-sm font-medium capitalize",children:[ne,":"]}),e.jsx("span",{className:"text-sm",children:ye})]},ne))}catch{return null}})()]}),e.jsx("div",{className:"p-4 bg-gray-50 rounded-xl",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:u?.bio||(s?"No bio available.":"No bio yet. Click edit to add one!")})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-100",children:e.jsx("nav",{className:"flex overflow-x-auto px-6 lg:px-8",children:De.map(R=>{const ne=R.icon;return e.jsxs("button",{onClick:()=>y(R.id),className:`py-4 px-1 mr-8 border-b-2 font-medium text-sm flex items-center space-x-2 whitespace-nowrap transition-colors ${j===R.id?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:R.label}),R.count!==void 0&&e.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs font-medium",children:R.count})]},R.id)})})}),e.jsxs("div",{className:"p-6 lg:p-8",children:[j==="overview"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[!s&&e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-700",children:"Total Earnings"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["$",(u?.total_earnings_usd||0).toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx(oe,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl p-6 border border-blue-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-700",children:"XP Points"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:(u?.xp_points||0).toLocaleString()})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(X,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 border border-purple-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-700",children:"Followers"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:(u?.follower_count||0).toLocaleString()})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:e.jsx(pe,{className:"w-6 h-6 text-purple-600"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-6 border border-yellow-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-700",children:"Level"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:u?.level||1})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center",children:e.jsx(os,{className:"w-6 h-6 text-yellow-600"})})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-2xl p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Level Progress"}),e.jsxs("span",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium",children:["Level ",u?.level||1]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:[(u?.xp_points||0).toLocaleString()," XP"]}),e.jsxs("span",{children:[(((u?.level||1)+1)*1e3).toLocaleString()," XP"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 h-3 rounded-full transition-all duration-300",style:{width:`${ps(u?.xp_points||0)}%`}})}),e.jsx("p",{className:"text-sm text-gray-600",children:s?`${u?.points_streak_days||0} day activity streak`:`${((u?.level||1)+1)*1e3-(u?.xp_points||0)} XP until next level`})]})]}),!s&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 border border-blue-100 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(re,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Influence Rewards"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Earn monthly points based on your follower count"})]})]}),e.jsx("button",{onClick:()=>J(!0),className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:"Get Rewards"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-blue-700",children:"Formula"}),e.jsx("div",{className:"font-bold text-blue-900",children:"Followers × 0.01"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-blue-700",children:"Reset"}),e.jsx("div",{className:"font-bold text-blue-900",children:"Monthly"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-blue-700",children:"Min Followers"}),e.jsx("div",{className:"font-bold text-blue-900",children:"1,000"})]})]})]}),!s&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-100 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-900",children:"Referral Program"}),e.jsx("button",{onClick:()=>D(!0),className:"bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-colors",children:"Manage Referrals"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-purple-900",children:"Your Referral Code"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Share this code and earn when friends join!"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("code",{className:"bg-white px-4 py-2 rounded-xl border font-mono text-lg",children:u.referral_code}),e.jsx(fe,{content:g?"Copied!":"Copy code",compact:!0,children:e.jsx("button",{onClick:ve,className:"p-2 bg-purple-500 hover:bg-purple-600 text-white rounded-xl transition-colors",children:g?e.jsx(ds,{className:"w-4 h-4"}):e.jsx(qs,{className:"w-4 h-4"})})})]})]})]}),e.jsx(fn,{holdings:E,isOwner:!s||t&&u&&t.id===u.id,onOffer:K,onView:R=>n(`/portfolio/holdings/${R.content_id}`)}),e.jsx(bn,{predictions:M,onView:R=>n(`/predictions/${R.id}`)})]}),j==="content"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Your Content"}),e.jsx(he,{to:"/create",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200",children:"Create New Content"})]}),S?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full"})}):f.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(R=>e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 border border-gray-100 hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[gs(R.platform),e.jsx("span",{className:"text-sm font-medium text-gray-600 capitalize",children:R.platform})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[!s&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{content:"Edit content",compact:!0,children:e.jsx("button",{onClick:()=>He(R),className:"p-1 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded transition-colors",children:e.jsx(Ut,{className:"w-4 h-4"})})}),e.jsx(fe,{content:"Delete content",compact:!0,children:e.jsx("button",{onClick:()=>O(R),className:"p-1 text-red-600 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]}),e.jsx(he,{to:`/content/${R.id}`,className:"text-orange-600 hover:text-orange-700 transition-colors",children:e.jsx(ss,{className:"w-4 h-4"})})]})]}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2 line-clamp-2",children:R.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:R.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:[R.available_shares||0,"/",R.total_shares||0," shares"]}),e.jsxs("span",{className:"font-semibold text-green-600",children:["$",(R.share_price||0).toFixed(2),"/share"]})]})]},R.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ys,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Content Yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Start creating content to build your portfolio"}),e.jsx(he,{to:"/create",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200",children:"Create Your First Content"})]})]}),j==="drops"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Drops You Created"}),!s&&u&&u.user_type==="advertiser"&&e.jsx(he,{to:"/earn?create=proof",className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200",children:"Create New Drop"})]}),z?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full"})}):b.length>0?e.jsx("div",{className:"space-y-4",children:b.map(R=>e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:R.title}),e.jsx("p",{className:"text-gray-600 mb-3",children:R.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${fs(R.difficulty)}`,children:R.difficulty.charAt(0).toUpperCase()+R.difficulty.slice(1)}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${rs(R.status)}`,children:R.status.charAt(0).toUpperCase()+R.status.slice(1)}),e.jsxs("span",{className:"text-sm text-gray-500",children:[R.current_participants||0," participants"]})]})]}),e.jsxs("div",{className:"text-right ml-6",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Reward"}),e.jsxs("div",{className:"font-semibold text-purple-600",children:[R.gem_reward_base||0," gems"]}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Cost: ",R.key_cost||0," keys"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[e.jsx(ts,{className:"w-4 h-4"}),e.jsxs("span",{children:["Created ",new Date(R.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-500",children:"Pool:"}),e.jsxs("span",{className:"font-medium text-purple-600",children:[R.gem_pool_remaining||0,"/",R.gem_pool_total||0," gems"]})]})]})]},R.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ke,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Drops Created"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first drop to start earning"}),e.jsx(he,{to:"/earn?create=proof",className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200",children:"Create Your First Drop"})]})]}),j==="applications"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Your Applications"}),G?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full"})}):v.length>0?e.jsx("div",{className:"space-y-4",children:v.map(R=>e.jsx(mn,{application:R,onSubmissionSuccess:()=>{Ts()}},R.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(na,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Applications Yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Apply to drops to start earning rewards"}),e.jsx(he,{to:"/earn",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200",children:"Browse Opportunities"})]})]}),j==="achievements"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Achievements"}),e.jsx("button",{onClick:()=>de(!0),className:"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200",children:"View All"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-6 border border-yellow-100 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(_e,{className:"w-8 h-8 text-yellow-600"})}),e.jsx("h4",{className:"font-semibold text-yellow-900 mb-2",children:"First Steps"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Complete your first drop application"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl p-6 border border-blue-100 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(X,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Content Creator"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Share your first piece of content"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 border border-purple-100 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(os,{className:"w-8 h-8 text-purple-600"})}),e.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"Influencer"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Reach 100 followers"})]})]})]})]})]}),e.jsx(un,{isOpen:N,onClose:()=>w(!1),user:u,onSuccess:je}),e.jsx(Qt,{isOpen:ae,onClose:()=>de(!1),user:u}),e.jsx(cn,{isOpen:A,onClose:()=>D(!1),user:u,onSuccess:()=>{me()}}),e.jsx(xn,{isOpen:H,onClose:()=>J(!1),user:u,onSuccess:()=>{me()}}),e.jsx(hn,{isOpen:xs,onClose:()=>ze(!1),holding:Ve,sellerId:u?.id?String(u.id):void 0}),Y&&e.jsx(Zt,{isOpen:W,onClose:()=>{P(!1),ce(null)},onSuccess:I,content:Y}),e.jsx(yt,{isOpen:Be,onClose:()=>{ms(!1),Se(null)},onConfirm:Q,title:"Delete Content",message:`Are you sure you want to delete "${Je?.title}"? This action cannot be undone and will remove all associated data.`,confirmText:"Delete",cancelText:"Cancel",type:"danger"})]})}const gn=pn;function fn({holdings:s,isOwner:l,onOffer:t,onView:r}){const a=s.filter(n=>n.visibility!=="private");return a.length?e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Public Holdings"}),e.jsx("p",{className:"text-sm text-gray-500",children:l?"Only holdings you set to public are visible to others.":"Shared portfolio highlights from this creator."})]}),e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-slate-100 text-slate-700",children:[a.length," assets"]})]}),e.jsx("div",{className:"space-y-3",children:a.map(n=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:n.content_thumbnail,alt:n.content_title,className:"w-12 h-12 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:n.content_title}),e.jsxs("p",{className:"text-sm text-gray-500",children:[n.owned_shares," shares • Avg $",n.avg_cost.toFixed(2)," • Now $",n.current_price.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>r(n),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-600 rounded-lg hover:bg-gray-100",children:"View"}),!l&&e.jsx("button",{onClick:()=>t(n),className:"px-3 py-1.5 text-sm font-medium border border-blue-200 text-blue-600 rounded-lg hover:bg-blue-50",children:"Make offer"})]})]},n.content_id))})]}):null}function bn({predictions:s,onView:l}){return s.length?e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Prediction History"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Public predictions and outcomes shared by this creator."})]}),e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-700",children:[s.length," entries"]})]}),e.jsx("div",{className:"space-y-3",children:s.map(t=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.content_title}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t.platform.toUpperCase()," • ",new Date(t.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:t.prediction_side}),e.jsx("p",{className:"text-sm text-gray-500",children:t.status==="settled"&&t.result?`Result: ${t.result}`:`Status: ${t.status}`})]}),e.jsx("button",{onClick:()=>l(t),className:"px-3 py-1.5 text-sm font-medium border border-gray-200 text-gray-600 rounded-lg hover:bg-gray-100",children:"View"})]})]},t.id))})]}):null}function jn({isOpen:s,onClose:l,contentId:t,contentTitle:r,isOwner:a,currentRevenue:n,sharePrice:i,totalShares:p,onSuccess:u}){const[m,c]=o.useState(0),[x,g]=o.useState("USD"),[h,j]=o.useState(!1),[y,N]=o.useState("tip");if(!s)return null;const w=async b=>{if(b.preventDefault(),!(m<=0)){j(!0);try{const F=y==="fund"?`/api/content/${t}/fund`:`/api/content/${t}/tip`,v=await fetch(F,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({amount:m,currency_type:x})});if(v.ok){const C=await v.json();u(C.new_revenue,C.new_share_price),l(),c(0)}else{const C=await v.json();alert(C.error||`Failed to ${y} content`)}}catch(F){console.error(`Failed to ${y} content:`,F),alert(`Failed to ${y} content. Please try again.`)}finally{j(!1)}}},f=()=>{const b=x==="Points"?m/1e3:m;return p>0?(n+b)/p:0},d=b=>{switch(b){case"USD":return e.jsx(oe,{className:"w-4 h-4"});case"Gems":return e.jsx(Lt,{className:"w-4 h-4"});case"Points":return e.jsx(ke,{className:"w-4 h-4"});default:return e.jsx(oe,{className:"w-4 h-4"})}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:a?"Fund or Receive Tips":"Tip Creator"}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:r}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:["Current Revenue: $",n.toFixed(2)]}),e.jsxs("div",{children:["Share Price: $",i.toFixed(4)]}),e.jsxs("div",{children:["Total Shares: ",p]})]})]}),a&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Action"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{type:"button",onClick:()=>N("fund"),className:`p-3 border rounded-lg text-sm font-medium transition-all ${y==="fund"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-300 hover:border-gray-400"}`,children:"Fund Content"}),e.jsx("button",{type:"button",onClick:()=>N("tip"),className:`p-3 border rounded-lg text-sm font-medium transition-all ${y==="tip"?"border-green-500 bg-green-50 text-green-700":"border-gray-300 hover:border-gray-400"}`,children:"Enable Tips"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:y==="fund"?"Add your own money to increase content value":"Allow others to tip and increase content value"})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["USD","Gems","Points"].map(b=>e.jsxs("button",{type:"button",onClick:()=>g(b),className:`p-3 border rounded-lg text-sm font-medium transition-all flex items-center justify-center space-x-2 ${x===b?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-300 hover:border-gray-400"}`,children:[d(b),e.jsx("span",{children:b})]},b))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Amount ",x==="Points"&&"(1000 Points = $1 USD)"]}),e.jsx("input",{type:"number",min:"0",step:x==="Points"?"100":"0.01",value:m||"",onChange:b=>c(Number(b.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:`Enter ${x.toLowerCase()} amount`,required:!0})]}),m>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Preview Impact"}),e.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[e.jsxs("div",{children:["New Revenue: $",(n+(x==="Points"?m/1e3:m)).toFixed(2)]}),e.jsxs("div",{children:["New Share Price: $",f().toFixed(4)]}),e.jsxs("div",{className:"text-xs text-blue-600 mt-2",children:["Share price increase: $",(f()-i).toFixed(4)]})]})]}),e.jsx("button",{type:"submit",disabled:h||m<=0,className:"w-full bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white py-3 rounded-lg font-medium transition-all duration-200 disabled:opacity-50",children:h?"Processing...":`${y==="fund"?"Fund":"Tip"} Content`})]})]})]})})}function yn({contentId:s,currentUser:l,isOwner:t=!1}){const[r,a]=o.useState([]),[n,i]=o.useState(""),[p,u]=o.useState(null),[m,c]=o.useState(""),[x,g]=o.useState(!1),[h,j]=o.useState(!1);o.useEffect(()=>{y()},[s]);const y=async()=>{if(s){g(!0);try{const v=await fetch(`/api/content/${s}/comments`,{credentials:"include"});if(v.ok){const C=await v.json();a(C)}}catch(v){console.error("Failed to fetch comments:",v)}finally{g(!1)}}},N=async(v,C)=>{if(!(!v.trim()||!l)){j(!0);try{if((await fetch(`/api/content/${s}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({comment_text:v.trim(),parent_comment_id:C||null})})).ok)await y(),C?(c(""),u(null)):i("");else throw new Error("Failed to post comment")}catch(E){console.error("Error posting comment:",E),alert("Failed to post comment. Please try again.")}finally{j(!1)}}},w=async v=>{if(l)try{(await fetch(`/api/content/comments/${v}/like`,{method:"POST",credentials:"include"})).ok&&await y()}catch(C){console.error("Error liking comment:",C)}},f=async v=>{if(!(!l||!window.confirm("Are you sure you want to delete this comment?")))try{(await fetch(`/api/content/comments/${v}`,{method:"DELETE",credentials:"include"})).ok&&await y()}catch(C){console.error("Error deleting comment:",C),alert("Failed to delete comment.")}},d=async v=>{if(t)try{(await fetch(`/api/content/comments/${v}/pin`,{method:"POST",credentials:"include"})).ok&&await y()}catch(C){console.error("Error pinning comment:",C)}},b=v=>{const C=new Date(v),L=new Date().getTime()-C.getTime(),M=Math.floor(L/(1e3*60)),T=Math.floor(L/(1e3*60*60)),B=Math.floor(L/(1e3*60*60*24));return M<60?`${M}m ago`:T<24?`${T}h ago`:B<7?`${B}d ago`:C.toLocaleDateString()},F=({comment:v,isReply:C=!1})=>{const E=l?.id===v.user_id;return e.jsxs("div",{className:`${C?"ml-8 border-l-2 border-gray-200 pl-4":""} mb-4`,children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Gs,{username:v.user_username,displayName:v.user_display_name,avatarUrl:v.user_avatar,size:"sm"}),e.jsx("span",{className:"text-xs text-gray-500",children:b(v.created_at)}),v.is_pinned&&e.jsxs("div",{className:"flex items-center space-x-1 bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs",children:[e.jsx(ia,{className:"w-3 h-3"}),e.jsx("span",{children:"Pinned"})]})]}),(E||t)&&e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"text-gray-400 hover:text-gray-600 p-1",children:e.jsx(za,{className:"w-4 h-4"})}),e.jsxs("div",{className:"absolute right-0 top-full bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-32 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all",children:[t&&!v.is_pinned&&e.jsxs("button",{onClick:()=>d(v.id),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50 flex items-center space-x-2",children:[e.jsx(ia,{className:"w-3 h-3"}),e.jsx("span",{children:"Pin"})]}),(E||t)&&e.jsxs("button",{onClick:()=>f(v.id),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600 flex items-center space-x-2",children:[e.jsx(zs,{className:"w-3 h-3"}),e.jsx("span",{children:"Delete"})]})]})]})]}),e.jsx("p",{className:"text-gray-800 mb-3 whitespace-pre-wrap",children:v.comment_text}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>w(v.id),disabled:!l,className:`flex items-center space-x-1 text-sm transition-colors ${v.has_liked?"text-red-500":"text-gray-500 hover:text-red-500"} ${l?"":"cursor-not-allowed opacity-50"}`,children:[e.jsx(Rs,{className:`w-4 h-4 ${v.has_liked?"fill-current":""}`}),e.jsx("span",{children:v.likes_count||0})]}),!C&&l&&e.jsxs("button",{onClick:()=>u(p===v.id?null:v.id),className:"flex items-center space-x-1 text-sm text-gray-500 hover:text-blue-500 transition-colors",children:[e.jsx(Fr,{className:"w-4 h-4"}),e.jsx("span",{children:"Reply"})]})]}),p===v.id&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("textarea",{value:m,onChange:L=>c(L.target.value),placeholder:"Write a reply...",className:"flex-1 p-2 border border-gray-300 rounded-lg text-sm resize-none",rows:2}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("button",{onClick:()=>N(m,v.id),disabled:!m.trim()||h,className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Bt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{u(null),c("")},className:"text-gray-500 hover:text-gray-700 p-2",children:"✕"})]})]})})]}),v.replies&&v.replies.length>0&&e.jsx("div",{className:"mt-3",children:v.replies.map(L=>e.jsx(F,{comment:L,isReply:!0},L.id))})]})};return x?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 pb-4 border-b border-gray-200",children:[e.jsx(Ds,{className:"w-5 h-5 text-blue-600"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Comments (",r.length,")"]})]}),l?e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:l.display_name?.[0]||l.username?.[0]||"U"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{value:n,onChange:v=>i(v.target.value),placeholder:"Share your thoughts...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3}),e.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Be respectful and constructive in your comments"}),e.jsxs("button",{onClick:()=>N(n),disabled:!n.trim()||h,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 transition-colors",children:[h?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):e.jsx(Bt,{className:"w-4 h-4"}),e.jsx("span",{children:"Post Comment"})]})]})]})]})}):e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-gray-600 mb-2",children:"Sign in to join the conversation"}),e.jsx("button",{onClick:()=>window.location.href="/auth/google",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Sign In to Comment"})]}),e.jsx("div",{className:"space-y-4",children:r.length>0?r.map(v=>e.jsx(F,{comment:v},v.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ds,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No comments yet"}),e.jsx("p",{className:"text-gray-600",children:l?"Be the first to share your thoughts!":"Sign in to start the conversation."})]})})]})}function cr({isOpen:s,onClose:l,onSponsor:t,contentTitle:r,userGems:a}){const[n,i]=o.useState(null);if(!s)return null;const p=[{id:"quick",name:"Quick Boost",gems:25,multiplier:1.5,duration:1,description:"1.5x visibility for 1 hour",icon:e.jsx(ke,{className:"w-5 h-5"}),color:"from-blue-500 to-cyan-500"},{id:"popular",name:"Popular Boost",gems:50,multiplier:2,duration:6,description:"2x visibility for 6 hours",icon:e.jsx(X,{className:"w-5 h-5"}),color:"from-purple-500 to-pink-500"},{id:"daily",name:"Daily Featured",gems:100,multiplier:3,duration:24,description:"3x visibility for 24 hours",icon:e.jsx(Ke,{className:"w-5 h-5"}),color:"from-orange-500 to-red-500"},{id:"premium",name:"Premium Spotlight",gems:200,multiplier:4,duration:72,description:"4x visibility for 3 days",icon:e.jsx(it,{className:"w-5 h-5"}),color:"from-red-500 to-pink-500"},{id:"viral",name:"Viral Campaign",gems:500,multiplier:6,duration:168,description:"6x visibility for 1 week",icon:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),color:"from-yellow-500 to-orange-500"}],u=c=>{if(c<24)return`${c} hour${c!==1?"s":""}`;if(c<168){const x=Math.floor(c/24);return`${x} day${x!==1?"s":""}`}else{const x=Math.floor(c/168);return`${x} week${x!==1?"s":""}`}},m=()=>{n&&t(n.gems,n.multiplier,n.duration)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Sponsor Content"}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:r}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"Sponsoring content boosts its visibility in user feeds and gives it priority placement. Multiple sponsors can boost the same content, increasing its reach exponentially. Your brand will be credited as a sponsor to all users who see this content."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Your Gem Balance"}),e.jsxs("span",{className:"text-lg font-semibold text-purple-600",children:[a," gems"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,a/500*100)}%`}})})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-lg mb-4",children:"Choose Your Sponsorship Package"}),e.jsx("div",{className:"grid gap-4",children:p.map(c=>e.jsx("div",{className:`border rounded-xl p-4 cursor-pointer transition-all duration-200 ${n?.id===c.id?"border-purple-500 bg-purple-50 shadow-lg scale-[1.02]":"border-gray-200 hover:border-gray-300 hover:shadow-md"} ${c.gems>a?"opacity-50 cursor-not-allowed":""}`,onClick:()=>{c.gems<=a&&i(c)},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-r ${c.color} text-white`,children:c.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:c.name}),c.id==="popular"&&e.jsx("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs font-medium",children:"Most Popular"}),c.id==="viral"&&e.jsx("span",{className:"bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full text-xs font-medium",children:"Best Value"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:c.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Xe,{className:"w-3 h-3"}),e.jsxs("span",{children:["Duration: ",u(c.duration)]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ke,{className:"w-3 h-3"}),e.jsxs("span",{children:[c.multiplier,"x visibility boost"]})]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:c.gems}),e.jsx("p",{className:"text-xs text-gray-500",children:"gems"}),c.gems>a&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Insufficient gems"})]})]})},c.id))})]}),n&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-4 mb-6",children:[e.jsx("h5",{className:"font-semibold text-purple-900 mb-2",children:"Sponsorship Preview"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-700",children:"Package:"}),e.jsx("span",{className:"font-medium text-purple-900 ml-2",children:n.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-700",children:"Duration:"}),e.jsx("span",{className:"font-medium text-purple-900 ml-2",children:u(n.duration)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-700",children:"Visibility Boost:"}),e.jsxs("span",{className:"font-medium text-purple-900 ml-2",children:[n.multiplier,"x"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-700",children:"Cost:"}),e.jsxs("span",{className:"font-medium text-purple-900 ml-2",children:[n.gems," gems"]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-purple-200",children:e.jsx("p",{className:"text-xs text-purple-700",children:"Your brand name will be displayed as a sponsor on this content. Multiple sponsors can boost the same content for increased visibility."})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:m,disabled:!n||n?.gems>a,className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-4 rounded-xl font-semibold transition-all duration-200 shadow-lg",children:n?`Sponsor for ${n.gems} gems`:"Select a sponsorship package"}),e.jsx("button",{onClick:l,className:"w-full border border-gray-300 hover:border-gray-400 text-gray-700 px-6 py-3 rounded-xl font-medium transition-all duration-200",children:"Cancel"})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h5",{className:"font-medium text-blue-900 mb-2",children:"💡 Sponsorship Benefits"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"• Your brand appears on sponsored content"}),e.jsx("li",{children:"• Content gets priority placement in feeds"}),e.jsx("li",{children:"• Multiple sponsors increase total visibility boost"}),e.jsx("li",{children:"• Reach engaged users interested in the content topic"}),e.jsx("li",{children:"• Analytics provided on sponsorship performance"})]})]})]})})})}const ya=["https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=1400&q=80&sat=-10","https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&w=1400&q=80&sat=-10","https://images.unsplash.com/photo-1522542550221-31fd19575a2d?auto=format&fit=crop&w=1400&q=80&sat=-10","https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?auto=format&fit=crop&w=1400&q=80&sat=-10","https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1400&q=80&sat=-10"],dr=s=>{const l=Math.abs(Number(s)||0)%ya.length;return`${ya[l]}&sig=${s??l}`},Nn=s=>({id:s,creator_id:1e3+s,creator_username:"demo_creator",creator_name:"Demo Creator",creator_avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=demo_content",platform:"instagram",platform_url:"https://instagram.com/promorang",title:"Demo Growth Content Spotlight",description:"Experience a highlight clip from our creator community. Monitor engagement, share prices, and revenue performance in real time.",media_url:dr(s),total_shares:3500,available_shares:1240,engagement_shares_total:3200,engagement_shares_remaining:880,share_price:12.5,current_revenue:8450,performance_metrics:JSON.stringify({impressions:98e3,clicks:12500,conversions:1320,engagement_rate:.128}),views_count:98e3,likes_count:15420,comments_count:2450,reposts_count:1200,is_demo:!0,is_sponsored:!1,created_at:new Date(Date.now()-2880*60*1e3).toISOString(),updated_at:new Date().toISOString()}),Tt=(s,l)=>{const t=Nn(l);if(!s||typeof s!="object")return t;const r=Number(s.id??l??t.id),a=typeof s.performance_metrics=="string"?s.performance_metrics:JSON.stringify({impressions:s.impressions??t.views_count??0,clicks:s.clicks??0,conversions:s.conversions??0,engagement_rate:s.engagement_rate??.07}),n=s.media_url&&/^https?:\/\//i.test(s.media_url)?s.media_url:dr(r);return{id:r,creator_id:Number(s.creator_id??t.creator_id),creator_username:s.creator_username??t.creator_username,creator_name:s.creator_name??t.creator_name,creator_avatar:s.creator_avatar??t.creator_avatar,platform:s.platform??t.platform,platform_url:s.platform_url??s.content_url??t.platform_url,title:s.title??t.title,description:s.description??t.description,media_url:n,total_shares:Number(s.total_shares??t.total_shares),available_shares:Number(s.available_shares??t.available_shares),engagement_shares_total:Number(s.engagement_shares_total??t.engagement_shares_total),engagement_shares_remaining:Number(s.engagement_shares_remaining??t.engagement_shares_remaining),share_price:Number(s.share_price??t.share_price),current_revenue:Number(s.current_revenue??t.current_revenue),performance_metrics:a,views_count:Number(s.views_count??s.impressions??t.views_count),likes_count:Number(s.likes_count??s.likes??t.likes_count),comments_count:Number(s.comments_count??s.comments??t.comments_count),reposts_count:Number(s.reposts_count??s.shares??t.reposts_count),is_demo:!!(s.is_demo??t.is_demo),is_sponsored:!!(s.is_sponsored??t.is_sponsored),created_at:s.created_at??t.created_at,updated_at:s.updated_at??s.created_at??t.updated_at}},Na=s=>({likes:14500+s%500,comments:2800+s%250,shares:1200+s%150,views:98e3+s%5e3,internal_moves:420+s%80,external_moves:215+s%40,total_engagement:14500+s%1e3});function vn(){const{id:s}=Ps(),l=Ce(),t=cs||"",r=O=>`${t}${O}`,[a,n]=o.useState(null),[i,p]=o.useState([]),[u,m]=o.useState(null),[c,x]=o.useState(null),[g,h]=o.useState(!0),[j,y]=o.useState(!1),[N,w]=o.useState(!1),[f,d]=o.useState(!1),[b,F]=o.useState(!1),[v,C]=o.useState(!1),[E,L]=o.useState(!1),[M,T]=o.useState({has_liked:!1,has_saved:!1}),[B,k]=o.useState(!1),[S,$]=o.useState(null),[z,_]=o.useState(!1),G=a?.title?.toLowerCase().includes("[demo]")||a?.title?.toLowerCase().includes("demo")||a?.description?.toLowerCase().includes("demo"),q=u&&a&&(u.id===a.creator_id||u.username===a.creator_name||u.display_name===a.creator_name);o.useEffect(()=>{let O=!0;return(async()=>{if(s){h(!0);try{await Promise.all([ae(O),de(O),A(O),D(O),J(O)])}catch(I){console.error("ContentDetail initial load failed:",I)}finally{O&&h(!1)}}})(),()=>{O=!1}},[s]);const ae=async(O=!0)=>{const K=Number(s??Date.now());try{const I=await fetch(r(`/api/content/${s}`));if(I.ok){const Q=await I.json();O&&n(Tt(Q?.content??Q,K))}else O&&n(Tt(null,K))}catch(I){console.error("Failed to fetch content:",I),O&&n(Tt(null,K))}},de=async()=>{try{const O=ue(),K=await fetch(r("/api/users/me/wallets"),{credentials:"include",headers:O});if(K.ok){const I=await K.json();p(I)}}catch(O){console.error("Failed to fetch wallets:",O)}},A=async()=>{try{const O=ue(),K=await fetch(r("/api/users/me"),{credentials:"include",headers:O});if(K.ok){const I=await K.json();m(I)}}catch(O){console.error("Failed to fetch user data:",O)}},D=async()=>{const O=Number(s??Date.now());try{const K=await fetch(r(`/api/content/${s}/metrics`));if(K.ok){const I=await K.json();x(I)}else x(Na(O))}catch(K){console.error("Failed to fetch metrics:",K),x(Na(O))}},H=async()=>{if(!(!u||!s))try{const O=ue(),K=await fetch(r(`/api/content/${s}/user-status`),{credentials:"include",headers:O});if(K.ok){const I=await K.json();T(I)}}catch(O){console.error("Failed to fetch user status:",O)}},J=async()=>{if(s)try{const O=ue(),K=await fetch(r(`/api/content/${s}/sponsorship`),{credentials:"include",headers:O});if(K.ok){const I=await K.json();$(I)}}catch(O){console.error("Failed to fetch sponsorship data:",O)}},W=async(O,K)=>{try{if((await fetch(r("/api/content/buy-shares"),{method:"POST",headers:{"Content-Type":"application/json",...ue()},credentials:"include",body:JSON.stringify({content_id:O.id,shares_count:K})})).ok)await ae(),await de(),await D();else throw new Error("Purchase failed")}catch(I){throw console.error("Failed to buy shares:",I),I}},P=async O=>{try{if(O==="like"&&M.has_liked){alert("You have already liked this content!");return}if(O==="save"&&M.has_saved){alert("Content already saved to your collection!");return}if(O==="share"){w(!0);return}const K=await fetch(r("/api/users/social-action"),{method:"POST",headers:{"Content-Type":"application/json",...ue()},credentials:"include",body:JSON.stringify({action_type:O,reference_id:a?.id,reference_type:"content"})});if(K.ok){const I=await K.json();Y(I),await D(),await A(),await ae(),await H()}else{const I=await K.json();I.error&&alert(I.error)}}catch(K){console.error(`Failed to record ${O} action:`,K)}},Y=O=>{const K=document.createElement("div");K.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-pulse",K.innerHTML=`
      <div class="flex items-center space-x-2">
        <span>+${O.points_earned} points!</span>
        <span class="text-xs">(${O.multiplier.toFixed(1)}x multiplier)</span>
      </div>
    `,document.body.appendChild(K),setTimeout(()=>{document.body.contains(K)&&document.body.removeChild(K)},3e3)},ce=async(O,K)=>{try{if((await fetch(r("/api/content/tip"),{method:"POST",headers:{"Content-Type":"application/json",...ue()},credentials:"include",body:JSON.stringify({content_id:O.id,tip_amount:K})})).ok){const Q=document.createElement("div");Q.className="fixed top-4 right-4 bg-purple-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-bounce",Q.innerHTML=`
          <div class="flex items-center space-x-2">
            <span class="text-lg">💎</span>
            <div>
              <div class="font-semibold">Tip sent!</div>
              <div class="text-xs opacity-90">Tipped ${K} gems to ${O.creator_name||O.creator_username||"creator"}</div>
            </div>
          </div>
        `,document.body.appendChild(Q),setTimeout(()=>{document.body.contains(Q)&&document.body.removeChild(Q)},4e3),A()}else throw new Error("Tip failed")}catch(I){throw console.error("Failed to send tip:",I),I}},Be=(O,K)=>{F(!1),a&&n({...a,current_revenue:O,share_price:K}),A()},ms=O=>{C(!1),n(O),D()},Je=async()=>{if(a)try{const O=await fetch(r(`/api/content/${a.id}`),{method:"DELETE",credentials:"include",headers:ue()});if(O.ok)l("/dashboard");else{const K=await O.json();alert(K.error||"Failed to delete content")}}catch(O){console.error("Error deleting content:",O),alert("Failed to delete content")}},Se=async(O,K,I)=>{if(a)try{const Q=await fetch(r(`/api/content/${a.id}/sponsor`),{method:"POST",headers:{"Content-Type":"application/json",...ue()},credentials:"include",body:JSON.stringify({gems_allocated:O,boost_multiplier:K,duration_hours:I})});if(Q.ok)k(!1),await J(),await A(),alert(`Content sponsored successfully! It will receive ${K}x visibility boost for ${I} hours.`);else{const me=await Q.json();alert(me.error||"Failed to sponsor content")}}catch(Q){console.error("Error sponsoring content:",Q),alert("Failed to sponsor content")}},xs=O=>{switch(O){case"super":return 2;case"premium":return 1.5;default:return 1}},ze=O=>{const I={like:.1,comment:.3,save:.5,share:1,repost:.2}[O]||0,Q=u?xs(u.user_tier):1;return Math.floor(I*Q*10)/10},Ve=O=>{switch(O){case"instagram":return"📷";case"tiktok":return"🎵";case"youtube":return"📺";case"twitter":return"🐦";case"linkedin":return"💼";default:return"📱"}},We=()=>c||{likes:0,comments:0,shares:0,views:0,internal_moves:0,external_moves:0},as=O=>O>=1e6?(O/1e6).toFixed(1)+"M":O>=1e3?(O/1e3).toFixed(1)+"K":O.toString();if(g)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})});if(!a)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Content not found"}),e.jsx("button",{onClick:()=>l("/dashboard"),className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Go Back Home"})]});const He=We();return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[G&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-xl p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"🧪"}),e.jsx("h2",{className:"text-xl font-bold",children:"DEMO CONTENT"}),e.jsx("span",{className:"text-2xl",children:"🧪"})]}),e.jsx("p",{className:"text-center text-orange-100",children:"This is demo content for testing purposes. No real money or value transfers will occur."})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>l("/dashboard"),className:"flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors",children:e.jsx(es,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Content Details ",G&&e.jsx("span",{className:"text-orange-600",children:"(Demo)"})]}),e.jsx("p",{className:"text-gray-600",children:G?"Demo investment simulation - no real value":"Investment opportunity analysis"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[a.is_demo&&e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200 flex items-center space-x-1",children:[e.jsx(Xs,{className:"w-3 h-3"}),e.jsx("span",{children:"Demo"})]}),a.is_sponsored&&e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-gradient-to-r from-orange-100 to-amber-100 text-orange-800 border border-orange-200 flex items-center space-x-1",children:[e.jsx(nt,{className:"w-3 h-3"}),e.jsx("span",{children:"Sponsored"})]}),a.views_count!==void 0&&e.jsxs("div",{className:"flex items-center space-x-1 text-gray-500",children:[e.jsx(vs,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[He.views?.toLocaleString()||a.views_count.toLocaleString()," views"]})]})]})]})]}),q&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fe,{content:"Edit content",children:e.jsxs("button",{onClick:()=>C(!0),className:"flex items-center space-x-2 px-4 py-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Edit"})]})}),e.jsx(fe,{content:"Delete content",children:e.jsxs("button",{onClick:()=>L(!0),className:"flex items-center space-x-2 px-4 py-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),e.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:`bg-white rounded-xl border overflow-hidden ${G?"border-orange-300 bg-orange-50/30":a.is_sponsored?"ring-2 ring-orange-200 ring-opacity-50":"border-gray-200"}`,children:[G&&e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white px-4 py-2 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm font-medium",children:[e.jsx("span",{children:"🧪"}),e.jsx("span",{children:"DEMO CONTENT - No real value transfers"}),e.jsx("span",{children:"🧪"})]})}),a.is_sponsored&&!G&&e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white px-4 py-2 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm font-medium",children:[e.jsx(nt,{className:"w-4 h-4"}),e.jsx("span",{children:"SPONSORED CONTENT"}),e.jsx(nt,{className:"w-4 h-4"})]})}),e.jsx("div",{className:"p-6 pb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white text-xl",children:Ve(a.platform)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Gs,{username:a.creator_name,displayName:a.creator_name||"Creator",avatarUrl:a.creator_avatar,className:"font-semibold text-gray-900 hover:text-orange-600 transition-colors",showAvatar:!1}),e.jsxs("div",{className:"flex items-center space-x-2",children:[q&&e.jsx("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full text-xs font-medium",children:"YOUR CONTENT"}),G&&e.jsx("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs font-medium",children:"DEMO"}),e.jsx("span",{className:"text-sm text-gray-500 capitalize",children:a.platform})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"2 hours ago"})]})]})}),a.media_url&&e.jsx("div",{className:"relative",children:e.jsx("img",{src:a.media_url,alt:a.title,className:"w-full h-96 object-cover"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-3",children:a.title}),a.description&&e.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:a.description}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center space-x-1 text-red-500 mb-1",children:e.jsx(Rs,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:as(He.likes)}),e.jsx("p",{className:"text-sm text-gray-500",children:"Likes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center space-x-1 text-blue-500 mb-1",children:e.jsx(Ds,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:as(He.comments)}),e.jsx("p",{className:"text-sm text-gray-500",children:"Comments"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center space-x-1 text-green-500 mb-1",children:e.jsx(Bs,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:as(He.shares)}),e.jsx("p",{className:"text-sm text-gray-500",children:"Shares"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center space-x-1 text-purple-500 mb-1",children:e.jsx(vs,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:as(He.views)}),e.jsx("p",{className:"text-sm text-gray-500",children:"Views"})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"Platform Activity"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-bold text-blue-900",children:He.internal_moves||0}),e.jsx("p",{className:"text-xs text-blue-700",children:"Internal Moves"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-bold text-purple-900",children:He.external_moves||0}),e.jsx("p",{className:"text-xs text-purple-700",children:"External Moves"})]})]})]}),a.engagement_shares_total>0&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center",children:e.jsx(Me,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-900",children:"Free Engagement Shares"}),e.jsx("p",{className:"text-sm text-green-700",children:"Earn by engaging with this content!"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:a.engagement_shares_remaining}),e.jsx("div",{className:"text-sm text-green-500",children:"remaining"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Progress"}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[a.engagement_shares_total-a.engagement_shares_remaining," / ",a.engagement_shares_total]})]}),e.jsx("div",{className:"w-full bg-green-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-3 rounded-full transition-all duration-500",style:{width:`${(a.engagement_shares_total-a.engagement_shares_remaining)/a.engagement_shares_total*100}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-700",children:[e.jsx(Rs,{className:"w-4 h-4"}),e.jsx("span",{children:"Like for 1 share"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-700",children:[e.jsx(Ds,{className:"w-4 h-4"}),e.jsx("span",{children:"Comment for 3 shares"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-700",children:[e.jsx(Bs,{className:"w-4 h-4"}),e.jsx("span",{children:"Share for 5 shares"})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(fe,{content:"Perform actions on the original platform for 10x points!",position:"top",children:e.jsxs("button",{onClick:()=>d(!0),className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-6 py-4 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center space-x-3 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[e.jsx("span",{className:"text-xl",children:"🚀"}),e.jsx("span",{children:"Perform External Move"}),e.jsx("span",{className:"bg-white/20 px-3 py-1 rounded-full text-sm font-bold",children:"10x Points!"})]})})}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Quick Actions"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Reduced points"})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{action:"like",icon:Rs,color:M.has_liked?"text-red-500 bg-red-50":"hover:text-red-500",disabled:M.has_liked},{action:"comment",icon:Ds,color:"hover:text-blue-500",disabled:!1},{action:"repost",icon:Ta,color:"hover:text-purple-500",disabled:!1},{action:"save",icon:ut,color:M.has_saved?"text-yellow-500 bg-yellow-50":"hover:text-yellow-500",disabled:M.has_saved}].map(({action:O,icon:K,color:I,disabled:Q})=>e.jsx(fe,{content:Q&&O==="like"?"Already liked!":Q&&O==="save"?"Already saved!":`+${ze(O)} points`,compact:!0,children:e.jsxs("button",{onClick:()=>P(O),disabled:Q,className:`flex flex-col items-center p-3 rounded-lg transition-colors hover:bg-white ${I} ${Q?"cursor-not-allowed opacity-75":""}`,children:[e.jsx(K,{className:`w-5 h-5 mb-1 ${M.has_liked&&O==="like"?"fill-current":""} ${M.has_saved&&O==="save"?"fill-current":""}`}),e.jsx("span",{className:"text-xs text-gray-600 capitalize",children:O}),e.jsx("span",{className:"text-xs text-green-600 font-medium",children:Q?O==="like"||O==="save"?"✓":`+${ze(O)}`:`+${ze(O)}`})]})},O))})]}),e.jsx("div",{className:"pt-4 border-t border-gray-100",children:e.jsxs("a",{href:a.platform_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 text-purple-600 hover:text-purple-700 transition-colors",children:[e.jsx(ss,{className:"w-4 h-4"}),e.jsxs("span",{children:["View on ",a.platform]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Analytics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(re,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Engagement Rate"})]}),e.jsx("p",{className:"text-xl font-bold text-green-900",children:"8.7%"}),e.jsx("p",{className:"text-xs text-green-600",children:"+2.3% from avg"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ts,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Growth Rate"})]}),e.jsx("p",{className:"text-xl font-bold text-blue-900",children:"15.2%"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Last 24 hours"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(oe,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-purple-800",children:"Revenue/View"})]}),e.jsx("p",{className:"text-xl font-bold text-purple-900",children:"$0.0032"}),e.jsx("p",{className:"text-xs text-purple-600",children:"Industry avg: $0.0028"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(pe,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-orange-800",children:"Reach"})]}),e.jsx("p",{className:"text-xl font-bold text-orange-900",children:"1.2M"}),e.jsx("p",{className:"text-xs text-orange-600",children:"Unique users"})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:e.jsx(yn,{contentId:a.id,currentUser:u,isOwner:q||!1})})]}),e.jsxs("div",{className:"space-y-6",children:[S&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("span",{className:"font-semibold text-purple-900",children:"Sponsored Content"}),S.sponsor_count>1&&e.jsxs("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-xs font-medium",children:[S.sponsor_count," Sponsors"]})]}),e.jsxs("p",{className:"text-sm text-purple-700 mb-3",children:["This content receives ",S.total_boost_multiplier||S.boost_multiplier,"x visibility boost",S.sponsor_count>1&&" from multiple sponsors"]}),e.jsxs("div",{className:"space-y-2",children:[S.sponsor_names&&S.sponsor_names.length>0?e.jsxs("div",{className:"text-sm text-purple-700",children:[e.jsx("span",{className:"font-medium",children:"Sponsored by:"}),e.jsxs("div",{className:"mt-1",children:[S.sponsor_names.slice(0,3).map((O,K)=>e.jsx("span",{className:"inline-block bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-xs font-medium mr-2 mb-1",children:O},K)),S.sponsor_names.length>3&&e.jsxs("span",{className:"text-xs text-purple-600",children:["+",S.sponsor_names.length-3," more"]})]})]}):e.jsxs("div",{className:"text-sm text-purple-700",children:[e.jsx("span",{className:"font-medium",children:"Primary Sponsor:"})," ",S.primary_sponsor||S.advertiser_name||"Advertiser"]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-purple-600 pt-2 border-t border-purple-200",children:[e.jsxs("span",{children:[S.total_gems_allocated||S.gems_allocated," gems invested"]}),e.jsxs("span",{children:[S.sponsor_count||1," active sponsorship",(S.sponsor_count||1)!==1?"s":""]})]})]})]}),u?.user_type==="advertiser"&&!q&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(be,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-semibold text-blue-900",children:S?"Boost Further":"Sponsor This Content"})]}),e.jsx("p",{className:"text-sm text-blue-700 mb-3",children:S?"Add your sponsorship to boost visibility even more! Multiple sponsors can collaborate to maximize reach.":"Boost this content's visibility and reach more users. Sponsored content appears higher in feeds and gets priority placement."}),S&&e.jsx("div",{className:"bg-blue-100 rounded-lg p-3 mb-3",children:e.jsxs("div",{className:"text-xs text-blue-700",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Current boost:"}),e.jsxs("span",{className:"font-semibold",children:[S.total_boost_multiplier||S.boost_multiplier,"x"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Active sponsors:"}),e.jsx("span",{className:"font-semibold",children:S.sponsor_count||1})]})]})}),e.jsxs("button",{onClick:()=>k(!0),className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-4 py-3 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("span",{children:S?"Add Your Sponsorship":"Sponsor This Content"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Investment Details"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Share Price"}),e.jsxs("span",{className:"text-xl font-bold text-green-600",children:["$",(a.share_price||0).toFixed(4)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Available Shares"}),e.jsx("span",{className:"font-semibold text-gray-900",children:a.available_shares||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Total Shares"}),e.jsx("span",{className:"font-semibold text-gray-900",children:a.total_shares||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Engagement Shares"}),e.jsxs("span",{className:"font-semibold text-orange-600",children:[a.engagement_shares_remaining||0,"/",a.engagement_shares_total||0]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Current Revenue"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:["$",(a.current_revenue||0).toFixed(2)]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(fe,{content:G?"Demo content - no real value transfers":"Tip creator & boost content value",children:e.jsxs("button",{onClick:()=>_(!0),className:`w-full px-4 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2 ${G?"bg-orange-100 hover:bg-orange-200 text-orange-700":"bg-purple-100 hover:bg-purple-200 text-purple-700"}`,children:[e.jsx(Cs,{className:"w-4 h-4"}),e.jsx("span",{children:G?"Demo Tip Creator":"Tip Creator"})]})}),e.jsx("button",{onClick:()=>y(!0),disabled:a.available_shares===0,className:`w-full px-6 py-3 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-white ${G?"bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600":"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600"}`,children:a.available_shares===0?"Sold Out":G?"Demo Shares":"Buy Shares"}),e.jsxs("button",{onClick:()=>l("/invest/social-forecasts"),className:"w-full bg-blue-100 hover:bg-blue-200 text-blue-700 px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[e.jsx(be,{className:"w-4 h-4"}),e.jsx("span",{children:"Make Performance Forecast"})]}),G&&e.jsx("div",{className:"bg-orange-100 border border-orange-200 rounded-lg p-3",children:e.jsx("p",{className:"text-xs text-orange-700 text-center",children:"💡 This is demo content. No real purchases or value transfers will occur."})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Market Insights"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"24h Volume"}),e.jsx("span",{className:"font-semibold text-gray-900",children:"$1,247"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Price Change"}),e.jsx("span",{className:"font-semibold text-green-600",children:"+7.2%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Investors"}),e.jsx("span",{className:"font-semibold text-gray-900",children:"23"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ROI Potential"}),e.jsx("span",{className:"font-semibold text-purple-600",children:"High"})]})]})]})]})]}),a&&e.jsxs(e.Fragment,{children:[e.jsx(Qa,{content:a,wallet:i?.find(O=>O.currency_type==="USD"),isOpen:j,onClose:()=>y(!1),onPurchase:W}),e.jsx(Za,{user:u,contentId:a.id,contentTitle:a.title,isOpen:N,onClose:()=>w(!1),onSuccess:()=>{A(),D()}}),e.jsx(er,{user:u,contentId:a.id,contentTitle:a.title,contentPlatform:a.platform,contentUrl:a.platform_url,isOpen:f,onClose:()=>d(!1),onSuccess:()=>{A(),D()}}),e.jsx(jn,{isOpen:b,onClose:()=>F(!1),contentId:a.id,contentTitle:a.title,isOwner:!1,currentRevenue:a.current_revenue||0,sharePrice:a.share_price||0,totalShares:a.total_shares||0,onSuccess:Be}),e.jsx(Zt,{isOpen:v,onClose:()=>C(!1),onSuccess:ms,content:a}),e.jsx(yt,{isOpen:E,onClose:()=>L(!1),onConfirm:Je,title:"Delete Content",message:`Are you sure you want to delete "${a.title}"? This action cannot be undone and will remove all associated data.`,confirmText:"Delete",cancelText:"Cancel",type:"danger"}),e.jsx(cr,{isOpen:B,onClose:()=>k(!1),onSponsor:Se,contentTitle:a.title,userGems:u?.gems_balance||0}),e.jsx(rr,{content:a,isOpen:z,onClose:()=>_(!1),onTip:ce})]})]})}const wn=vn;function _n(){const{id:s}=Ps(),l=Ce(),[t,r]=o.useState(null),[a,n]=o.useState(!0);if(o.useEffect(()=>{if(!s)return;(async()=>{n(!0);const x=await Kl(s);r(x),n(!1)})()},[s]),!s)return e.jsxs("div",{className:"p-6",children:[e.jsxs("button",{onClick:()=>l(-1),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[e.jsx(es,{className:"w-4 h-4 mr-2"})," Back"]}),e.jsx("p",{className:"mt-6 text-gray-600",children:"Holding not found."})]});if(a||!t)return e.jsxs("div",{className:"p-6",children:[e.jsxs("button",{onClick:()=>l(-1),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[e.jsx(es,{className:"w-4 h-4 mr-2"})," Back"]}),e.jsx("div",{className:"mt-10 flex justify-center",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})})]});const{holding:i,content:p,performance:u,marketplace:m}=t;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{onClick:()=>l(-1),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[e.jsx(es,{className:"w-4 h-4 mr-2"})," Back to portfolio"]})}),e.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:i.content_thumbnail,alt:i.content_title,className:"w-20 h-20 rounded-xl object-cover"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:i.content_title}),e.jsxs("p",{className:"text-sm text-gray-500",children:[i.creator_name," • ",i.platform.toUpperCase()]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:p.description})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Shares Owned"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:i.owned_shares})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Market Value"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",i.market_value.toFixed(2)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Unrealized Gain"}),e.jsxs("p",{className:`text-lg font-semibold ${i.unrealized_gain>=0?"text-green-600":"text-red-600"}`,children:[i.unrealized_gain>=0?"+":"","$",i.unrealized_gain.toFixed(2)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Available to sell"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:i.available_to_sell})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Performance history"}),e.jsxs("span",{className:"inline-flex items-center text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700",children:[e.jsx(re,{className:"w-3 h-3 mr-1"})," 30 day trend"]})]}),e.jsx("div",{className:"space-y-2",children:u.history.map(c=>e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsx("span",{children:c.date}),e.jsxs("span",{children:["$",c.price.toFixed(2)," • ",c.volume," shares traded"]})]},c.date))})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Activity"}),e.jsx("div",{className:"space-y-3",children:u.ledger.map(c=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-9 h-9 bg-gray-100 rounded-full flex items-center justify-center",children:c.type==="purchase"?e.jsx(Ia,{className:"w-4 h-4 text-green-600"}):e.jsx(oe,{className:"w-4 h-4 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:c.type}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(c.timestamp).toLocaleString()})]})]}),e.jsx("div",{className:"text-right text-sm text-gray-700",children:c.quantity?`${c.quantity} shares @ $${c.price.toFixed(2)}`:`$${c.price.toFixed(2)}`})]},c.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Marketplace listings"}),e.jsx("div",{className:"space-y-3",children:m.listings.length?m.listings.map(c=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg px-4 py-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[c.quantity," shares"]}),e.jsxs("p",{className:"text-xs text-gray-500 capitalize",children:["Status: ",c.status]})]}),e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["$",c.ask_price.toFixed(2)]})]},c.id)):e.jsx("p",{className:"text-sm text-gray-500",children:"No listing history yet."})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent offers"}),e.jsx("div",{className:"space-y-3",children:m.offers.length?m.offers.map(c=>e.jsxs("div",{className:"bg-gray-50 rounded-lg px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[c.quantity," shares @ $",c.bid_price.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500",children:c.buyer_name})]}),e.jsx("span",{className:"text-xs font-semibold text-orange-600",children:c.status})]}),c.message&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["“",c.message,"”"]})]},c.id)):e.jsx("p",{className:"text-sm text-gray-500",children:"No offers yet."})})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Content performance overview"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-orange-600",children:"Total views"}),e.jsx("p",{className:"text-xl font-semibold text-orange-900",children:p.total_views.toLocaleString()})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-blue-600",children:"Engagement rate"}),e.jsxs("p",{className:"text-xl font-semibold text-blue-900",children:[p.engagement_rate,"%"]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-purple-600",children:"Earnings to date"}),e.jsxs("p",{className:"text-xl font-semibold text-purple-900",children:["$",p.earnings_to_date.toFixed(2)]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-green-600",children:"Last trade"}),e.jsx("p",{className:"text-xl font-semibold text-green-900",children:i.last_trade_at?new Date(i.last_trade_at).toLocaleDateString():"N/A"})]})]})]})]})}function kn(){const{id:s}=Ps(),l=Ce(),[t,r]=o.useState(null),[a,n]=o.useState(!0);if(o.useEffect(()=>{if(!s)return;(async()=>{n(!0);const x=await Yl(s);r(x),n(!1)})()},[s]),!s)return e.jsxs("div",{className:"p-6",children:[e.jsxs("button",{onClick:()=>l(-1),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[e.jsx(es,{className:"w-4 h-4 mr-2"})," Back"]}),e.jsx("p",{className:"mt-6 text-gray-600",children:"Prediction not found."})]});if(a||!t)return e.jsxs("div",{className:"p-6",children:[e.jsxs("button",{onClick:()=>l(-1),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[e.jsx(es,{className:"w-4 h-4 mr-2"})," Back to predictions"]}),e.jsx("div",{className:"mt-10 flex justify-center",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})})]});const{prediction:i,forecast:p,trajectory:u,participants:m}=t;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{onClick:()=>l(-1),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[e.jsx(es,{className:"w-4 h-4 mr-2"})," Back"]})}),e.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:i.content_title}),e.jsxs("p",{className:"text-sm text-gray-500",children:[i.platform.toUpperCase()," • Placed ",new Date(i.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Side"}),e.jsx("p",{className:"text-base font-semibold text-gray-900 capitalize",children:i.prediction_side})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Stake"}),e.jsxs("p",{className:"text-base font-semibold text-gray-900",children:["$",i.amount.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Potential payout"}),e.jsxs("p",{className:"text-base font-semibold text-gray-900",children:["$",i.potential_payout.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Status"}),e.jsx("p",{className:"text-base font-semibold text-orange-600 capitalize",children:i.status})]})]})]}),e.jsxs("div",{className:"bg-orange-50 rounded-2xl p-4 border border-orange-200",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-orange-600",children:"Forecast target"}),e.jsxs("p",{className:"text-2xl font-semibold text-orange-900",children:[p.metric," • ",p.target]}),e.jsxs("p",{className:"text-sm text-orange-700 mt-2",children:["Odds ",p.odds.toFixed(2),"x"]}),e.jsxs("p",{className:"text-xs text-orange-700 mt-1",children:["Expires ",new Date(p.expires_at).toLocaleString()]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Trajectory"}),e.jsxs("span",{className:"inline-flex items-center text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700",children:[e.jsx(Er,{className:"w-3 h-3 mr-1"})," Trend overview"]})]}),e.jsx("div",{className:"space-y-2",children:u.map(c=>e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsx("span",{children:c.date}),e.jsxs("span",{children:["Actual ",c.actual.toLocaleString()," • Expected ",c.expected.toLocaleString()]})]},c.date))})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Projection notes"}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:p.creator_projection})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pe,{className:"w-4 h-4 text-purple-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Participants"})]}),e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-purple-100 text-purple-700",children:[m.length," active"]})]}),e.jsx("div",{className:"space-y-3",children:m.map((c,x)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:c.username}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:c.side})]}),e.jsxs("div",{className:"text-right text-sm text-gray-600",children:[e.jsxs("p",{children:["$",c.amount.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:c.status})]})]},`${c.username}-${x}`))})]})]})}function Cn({isOpen:s,onClose:l,onSuccess:t,drop:r}){const[a,n]=o.useState({title:r.title,description:r.description,drop_type:r.drop_type,difficulty:r.difficulty,key_cost:r.key_cost,gem_reward_base:r.gem_reward_base,gem_pool_total:r.gem_pool_total,follower_threshold:r.follower_threshold,time_commitment:r.time_commitment||"",requirements:r.requirements||"",deliverables:r.deliverables||"",deadline_at:r.deadline_at?r.deadline_at.split("T")[0]:"",max_participants:r.max_participants||void 0,platform:r.platform||"",content_url:r.content_url||"",move_cost_points:r.move_cost_points,key_reward_amount:r.key_reward_amount,is_proof_drop:r.is_proof_drop,is_paid_drop:r.is_paid_drop,reward_logic:""}),[i,p]=o.useState(!1),[u,m]=o.useState(null);if(o.useEffect(()=>{r&&n({title:r.title,description:r.description,drop_type:r.drop_type,difficulty:r.difficulty,key_cost:r.key_cost,gem_reward_base:r.gem_reward_base,gem_pool_total:r.gem_pool_total,follower_threshold:r.follower_threshold,time_commitment:r.time_commitment||"",requirements:r.requirements||"",deliverables:r.deliverables||"",deadline_at:r.deadline_at?r.deadline_at.split("T")[0]:"",max_participants:r.max_participants||void 0,platform:r.platform||"",content_url:r.content_url||"",move_cost_points:r.move_cost_points,key_reward_amount:r.key_reward_amount,is_proof_drop:r.is_proof_drop,is_paid_drop:r.is_paid_drop,reward_logic:""})},[r]),!s)return null;const c=async x=>{x.preventDefault(),p(!0),m(null);try{const g={...a,deadline_at:a.deadline_at?new Date(a.deadline_at).toISOString():void 0};if(!ul.safeParse(g).success){m("Please check all required fields");return}const j=await fetch(`/api/drops/${r.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(g)});if(j.ok){const y=await j.json();t(y.drop),l()}else{const y=await j.json();m(y.error||"Failed to update drop")}}catch(g){console.error("Error updating drop:",g),m("Failed to update drop")}finally{p(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Drop"}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:i,children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:c,className:"p-6 space-y-6",children:[u&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Drop Type"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[r.is_proof_drop&&e.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:"Proof Drop - Free to apply"}),r.is_paid_drop&&e.jsx("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium",children:"Paid Drop - Costs keys, rewards gems"}),!r.is_proof_drop&&!r.is_paid_drop&&e.jsx("span",{className:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-medium",children:"Move Drop - Social actions for keys"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Drop type cannot be changed after creation"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:a.title,onChange:x=>n({...a,title:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"Enter drop title",required:!0,disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Drop Category *"}),e.jsx("select",{value:a.drop_type,onChange:x=>n({...a,drop_type:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",required:!0,disabled:i,children:sr.options.map(x=>e.jsx("option",{value:x,children:x.replace(/_/g," ").replace(/\b\w/g,g=>g.toUpperCase())},x))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty *"}),e.jsx("select",{value:a.difficulty,onChange:x=>n({...a,difficulty:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",required:!0,disabled:i,children:tr.options.map(x=>e.jsx("option",{value:x,className:"capitalize",children:x},x))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{value:a.description,onChange:x=>n({...a,description:x.target.value}),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"Describe what needs to be done...",required:!0,disabled:i})]}),r.is_paid_drop&&e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Paid Drop Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Key Cost"}),e.jsx("input",{type:"number",min:"1",value:a.key_cost,onChange:x=>n({...a,key_cost:Number(x.target.value)}),className:"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Gem Reward"}),e.jsx("input",{type:"number",min:"1",value:a.gem_reward_base,onChange:x=>n({...a,gem_reward_base:Number(x.target.value)}),className:"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Total Gem Pool"}),e.jsx("input",{type:"number",min:"0",value:a.gem_pool_total,onChange:x=>n({...a,gem_pool_total:Number(x.target.value)}),className:"w-full px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:i})]})]})]}),!r.is_proof_drop&&!r.is_paid_drop&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-900 mb-4",children:"Move Drop Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-orange-700 mb-2",children:"Points Cost"}),e.jsx("input",{type:"number",min:"1",value:a.move_cost_points,onChange:x=>n({...a,move_cost_points:Number(x.target.value)}),className:"w-full px-4 py-2 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-orange-700 mb-2",children:"Keys Reward"}),e.jsx("input",{type:"number",min:"1",value:a.key_reward_amount,onChange:x=>n({...a,key_reward_amount:Number(x.target.value)}),className:"w-full px-4 py-2 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:i})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min. Followers Required"}),e.jsx("input",{type:"number",min:"0",value:a.follower_threshold,onChange:x=>n({...a,follower_threshold:Number(x.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"0",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Participants"}),e.jsx("input",{type:"number",min:"1",value:a.max_participants||"",onChange:x=>n({...a,max_participants:x.target.value?Number(x.target.value):void 0}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"Unlimited",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Commitment"}),e.jsx("input",{type:"text",value:a.time_commitment,onChange:x=>n({...a,time_commitment:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"e.g., 2-3 hours",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deadline"}),e.jsx("input",{type:"date",value:a.deadline_at,onChange:x=>n({...a,deadline_at:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Platform"}),e.jsx("input",{type:"text",value:a.platform,onChange:x=>n({...a,platform:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"e.g., Instagram, TikTok",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content URL"}),e.jsx("input",{type:"url",value:a.content_url,onChange:x=>n({...a,content_url:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"https://...",disabled:i})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requirements"}),e.jsx("textarea",{value:a.requirements,onChange:x=>n({...a,requirements:x.target.value}),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"What are the requirements to participate?",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deliverables"}),e.jsx("textarea",{value:a.deliverables,onChange:x=>n({...a,deliverables:x.target.value}),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors",placeholder:"What should participants deliver?",disabled:i})]})]}),e.jsxs("div",{className:"flex space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:l,disabled:i,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 disabled:opacity-50 flex items-center justify-center space-x-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx(gt,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Updating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Wt,{className:"w-4 h-4"}),e.jsx("span",{children:"Update Drop"})]})})]})]})]})})}function Sn(){const{id:s,taskId:l,dropId:t}=Ps(),r=t??l??s??null,a=Ce(),n=(P,Y="General")=>(P&&P.trim().length>0?P:Y).replace(/_/g," ").replace(/\b\w/g,Be=>Be.toUpperCase()),[i,p]=o.useState(null),[u,m]=o.useState(null),[c,x]=o.useState(null),[g,h]=o.useState(null),[j,y]=o.useState(!0),[N,w]=o.useState(!1),[f,d]=o.useState(""),[b,F]=o.useState(!1),[v,C]=o.useState(!1),[E,L]=o.useState(!1),[M,T]=o.useState(!1),B=()=>({is_activated:!0,proof_drops_completed:3,proof_drops_required:3,last_activated_at:new Date(Date.now()-7200*1e3).toISOString()}),k=()=>{const P=c?.id??"demo-user";return[{id:1,drop_id:String(i?.id??r??"demo-drop"),user_id:P,status:"approved",application_message:"Looking forward to contributing to this drop! I have prior experience delivering high-quality content on tight deadlines.",submission_url:"https://drive.google.com/demo-submission",gems_earned:120,applied_at:new Date(Date.now()-7200*60*1e3).toISOString(),completed_at:new Date(Date.now()-2880*60*1e3).toISOString(),paid_at:new Date(Date.now()-1440*60*1e3).toISOString(),submission_notes:"Approved with premium placement.",review_score:4.8,created_at:new Date(Date.now()-7200*60*1e3).toISOString(),updated_at:new Date(Date.now()-1440*60*1e3).toISOString()}]},S=i?.title?.toLowerCase().includes("[demo]")||i?.title?.toLowerCase().includes("demo")||i?.description?.toLowerCase().includes("demo");o.useEffect(()=>{r?($(),G(),z(),_()):y(!1)},[r]),o.useEffect(()=>{if(i&&c){const P=i.creator_id===c.id;console.log("Checking creator status:",{dropCreatorId:i.creator_id,userId:c.id,isCreator:P}),F(P)}},[i,c]);const $=async()=>{if(!r){console.warn("No drop ID provided for TaskDetail route"),y(!1);return}try{console.log("Fetching drop detail for ID:",r);const P=await ns(`/api/drops/${r}`);if(console.log("Drop detail response status:",P.status),P.ok){const Y=await P.json();if(console.log("Drop data received:",Y),!Y||!Y.id){console.warn("Malformed drop data, redirecting to not-found"),a("/not-found",{state:{title:"Drop Data Invalid",message:"The requested drop data could not be processed. It may have been removed or corrupted."}});return}p(Y)}else if(P.status===404)console.warn(`Drop not found: ${r}`),a("/not-found",{state:{title:"Drop Not Found",message:"The requested drop could not be found. It may have been removed or the link might be incorrect."}});else{const Y=await P.json().catch(()=>({}));console.error("Drop fetch failed:",P.status,Y);try{await ns("/api/logs/client-error",{method:"POST",body:JSON.stringify({source:"TaskDetail",error:`Drop fetch failed: ${P.status}`,dropId:r,timestamp:new Date().toISOString()})})}catch(ce){console.error("Failed to log error:",ce)}a("/error",{state:{title:"Error Loading Drop",message:"There was an error loading the drop. Please try again later."}})}}catch(P){console.error("Failed to fetch drop:",P);try{await ns("/api/logs/client-error",{method:"POST",body:JSON.stringify({source:"TaskDetail",error:`Network error: ${P}`,dropId:r,timestamp:new Date().toISOString()})})}catch(Y){console.error("Failed to log error:",Y)}a("/error",{state:{title:"Connection Error",message:"Unable to connect to the server. Please check your internet connection and try again."}})}finally{y(!1)}},z=async()=>{try{const P=ue(),Y=await ns("/api/users/me",{credentials:"include",headers:P});if(Y.ok){const ce=await Y.json();console.log("Database user data received:",ce),console.log("Database user id:",ce?.id),x(ce)}}catch(P){console.error("Failed to fetch user data:",P)}},_=async()=>{{h(B());return}},G=async()=>{{const P=String(i?.id??r??"demo-drop"),ce=k().find(Be=>String(Be.drop_id)===P);m(ce||null);return}},q=async P=>{if(P.preventDefault(),!(!i||!f.trim())){w(!0);try{const Y=await ns(`/api/drops/${i?.id??r}/apply`,{method:"POST",headers:{"Content-Type":"application/json",...ue()},credentials:"include",body:JSON.stringify({application_message:f})});if(Y.ok)await Promise.all([G(),z(),_()]),d("");else{const ce=await Y.json();console.error("Failed to apply:",ce),alert(ce.error||"Failed to apply to drop")}}catch(Y){console.error("Failed to apply:",Y),alert("Failed to apply to drop")}finally{w(!1)}}},ae=P=>{if(i?.content_url)return i.content_url;switch(P){case"content_clipping":return"https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=800&h=400&fit=crop";case"reviews":return"https://images.unsplash.com/photo-1556155092-490a1ba16284?w=800&h=400&fit=crop";case"ugc_creation":return"https://images.unsplash.com/photo-1558403194-611308249627?w=800&h=400&fit=crop";case"affiliate_referral":return"https://images.unsplash.com/photo-1516251193007-45ef944ab0c6?w=800&h=400&fit=crop";case"surveys":return"https://images.unsplash.com/photo-1432888622747-4eb9a8efeb07?w=800&h=400&fit=crop";case"challenges_events":return"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=800&h=400&fit=crop";case"engagement":return"https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=800&h=400&fit=crop";default:return"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=800&h=400&fit=crop"}},de=P=>{switch(P){case"content_clipping":return"✂️";case"reviews":return"⭐";case"ugc_creation":return"🎨";case"affiliate_referral":return"🔗";case"surveys":return"📊";case"challenges_events":return"🏆";default:return"📝"}},A=P=>{switch(P){case"easy":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"hard":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},D=P=>{switch(P){case"pending":return"text-yellow-600 bg-yellow-100";case"approved":return"text-blue-600 bg-blue-100";case"rejected":return"text-red-600 bg-red-100";case"completed":return"text-green-600 bg-green-100";case"paid":return"text-purple-600 bg-purple-100";default:return"text-gray-600 bg-gray-100"}},H=()=>{C(!0)},J=async()=>{T(!0);try{const P=await ns(`/api/drops/${i.id}`,{method:"DELETE",credentials:"include"});if(P.ok)a("/earn");else{const Y=await P.json();alert(Y.error||"Failed to delete drop")}}catch(P){console.error("Failed to delete drop:",P),alert("Failed to delete drop")}finally{T(!1),L(!1)}},W=P=>{p(P),C(!1)};return j?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):i?e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[S&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-xl p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"🧪"}),e.jsx("h2",{className:"text-xl font-bold",children:"DEMO CONTENT"}),e.jsx("span",{className:"text-2xl",children:"🧪"})]}),e.jsx("p",{className:"text-center text-orange-100",children:"This is demo content for testing purposes. No real gems will be awarded even if the interface suggests otherwise."})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>a("/earn"),className:"flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors",children:e.jsx(es,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Drop Details ",S&&e.jsx("span",{className:"text-orange-600",children:"(Demo)"})]}),e.jsx("p",{className:"text-gray-600",children:S?"Demo earning opportunity - no real rewards":"Earning opportunity"})]}),b&&e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:H,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(Yt,{className:"w-4 h-4"}),e.jsx("span",{children:"Edit"})]}),e.jsxs("button",{onClick:()=>L(!0),className:"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(zs,{className:"w-4 h-4"}),e.jsx("span",{children:"Delete"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx("div",{className:"bg-white rounded-xl overflow-hidden border border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ae(i.drop_type),alt:i.title,className:"w-full h-64 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${A(i.difficulty)}`,children:i.difficulty})}),e.jsx("div",{className:"absolute top-4 left-4",children:i.is_proof_drop?e.jsx("div",{className:"bg-green-500/90 backdrop-blur-sm px-2 py-1 rounded-full",children:e.jsx("span",{className:"text-white text-sm font-medium",children:"Proof Drop"})}):i.is_paid_drop?e.jsx("div",{className:"bg-purple-500/90 backdrop-blur-sm px-2 py-1 rounded-full",children:e.jsx("span",{className:"text-white text-sm font-medium",children:"Paid Drop"})}):e.jsx("div",{className:"bg-orange-500/90 backdrop-blur-sm px-2 py-1 rounded-full",children:e.jsx("span",{className:"text-white text-sm font-medium",children:"Move Drop"})})}),e.jsxs("div",{className:"absolute bottom-4 left-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("span",{className:"text-3xl",children:de(i.drop_type)}),e.jsx("span",{className:"text-white bg-black bg-opacity-30 px-3 py-1 rounded-full text-sm font-medium",children:n(i.drop_type)})]}),e.jsx("h1",{className:"text-3xl font-bold text-white drop-shadow-lg mb-1",children:i.title}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ne,{className:"w-6 h-6 text-purple-300 drop-shadow"}),e.jsx("p",{className:"text-2xl font-bold text-white drop-shadow-lg",children:i.gem_reward_base})]}),e.jsx("p",{className:"text-white/80 drop-shadow",children:"Gems reward"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Description"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:i.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.requirements&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(te,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Requirements"})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:i.requirements})]}),i.deliverables&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(be,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Deliverables"})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:i.deliverables})]})]}),c&&g&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Pe,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Master Key Status"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-purple-700",children:"Today's Master Key"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g.is_activated?"text-green-600 bg-green-100":"text-orange-600 bg-orange-100"}`,children:g.is_activated?"Activated":"Not Activated"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-purple-700",children:"Proof Drops Completed"}),e.jsxs("span",{className:"text-sm font-medium text-purple-900",children:[g.proof_drops_completed,"/",g.proof_drops_required]})]})]}),!g.is_activated&&e.jsxs("p",{className:"text-sm text-purple-700",children:["Complete ",g.proof_drops_required-g.proof_drops_completed," more proof drops to activate your Master Key and unlock the ability to use Keys for drops."]})]}),c&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ke,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Balance"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Ye,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Keys"})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:c.keys_balance})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Ne,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Gems"})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:c.gems_balance})]})]}),c.keys_balance<i.key_cost&&e.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-700",children:["You need ",i.key_cost-c.keys_balance," more keys to apply for this drop."]})})]}),u?e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ys,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Application"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${D(u.status)}`,children:u.status})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Applied"}),e.jsx("span",{className:"text-sm text-gray-900",children:new Date(u.applied_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Keys Used"}),e.jsx("span",{className:"text-sm text-gray-900",children:i.key_cost})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Your Message"}),e.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:u.application_message})]}),u.gems_earned>0&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ne,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"text-sm font-medium text-green-700",children:["Earned ",u.gems_earned," gems!"]})]})})]}):e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Le,{className:"w-5 h-5 text-orange-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Apply for this Drop"})]}),c&&(c.keys_balance<i.key_cost||!g?.is_activated)&&e.jsxs("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"Requirements not met:"}),e.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[c.keys_balance<i.key_cost&&e.jsxs("li",{children:["• Need ",i.key_cost-c.keys_balance," more keys"]}),!g?.is_activated&&e.jsx("li",{children:"• Master Key must be activated for today"})]})]}),e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Why are you the right person for this drop?"}),e.jsx("textarea",{value:f,onChange:P=>d(P.target.value),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Tell us about your relevant experience and why you'd be perfect for this drop...",required:!0})]}),e.jsx("button",{type:"submit",disabled:N||!f.trim()||!c||c.keys_balance<i.key_cost||!g?.is_activated,className:`w-full px-6 py-3 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-white ${S?"bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600":"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600"}`,children:N?"Submitting...":`${S?"Demo Apply":"Apply Now"} (${i.key_cost} keys)`})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Drop Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ye,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"text-gray-600",children:"Key Cost"})]}),e.jsx("span",{className:"font-bold text-orange-600",children:i.key_cost})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ne,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-gray-600",children:"Gem Reward"})]}),e.jsx("span",{className:"font-bold text-purple-600",children:i.gem_reward_base})]}),i.gem_pool_total>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ke,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-gray-600",children:"Pool Remaining"})]}),e.jsx("span",{className:"font-semibold text-gray-900",children:i.gem_pool_remaining})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pe,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-gray-600",children:"Participants"})]}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[i.current_participants,"/",i.max_participants||"∞"]})]}),i.follower_threshold>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-gray-600",children:"Min. Followers"})]}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[i.follower_threshold,"+"]})]}),i.time_commitment&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xe,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-gray-600",children:"Time"})]}),e.jsx("span",{className:"font-semibold text-gray-900",children:i.time_commitment})]}),i.deadline_at&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ts,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-gray-600",children:"Deadline"})]}),e.jsx("span",{className:"font-semibold text-gray-900",children:new Date(i.deadline_at).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Posted By"}),e.jsx(Gs,{username:i.creator_name,displayName:i.creator_name||"Drop Creator",avatarUrl:i.creator_avatar,className:"flex items-center space-x-3",size:"lg"}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Verified creator"})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:"12"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Drops Posted"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:"4.8"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Avg Rating"})]})]})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-6 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(we,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-blue-900",children:"Pro Tips"})]}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-2",children:[e.jsx("li",{children:"• Ensure you have enough keys before applying"}),e.jsx("li",{children:"• Activate your Master Key daily"}),e.jsx("li",{children:"• Read all requirements carefully"}),e.jsx("li",{children:"• Submit high-quality work on time"}),e.jsx("li",{children:"• Communicate with the drop creator"})]})]})]})]}),i&&v&&e.jsx(Cn,{isOpen:v,onClose:()=>C(!1),onSuccess:W,drop:i}),e.jsx(yt,{isOpen:E,onClose:()=>L(!1),onConfirm:J,title:"Delete Drop",message:"Are you sure you want to delete this drop? This action cannot be undone and will remove all applications.",confirmText:"Delete",cancelText:"Cancel",type:"danger",loading:M})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Drop not found"}),e.jsx("button",{onClick:()=>a("/earn"),className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Browse Drops"})]})}const ta=o.createContext(null);function mr({value:s,defaultValue:l,onValueChange:t,children:r,className:a}){const[n,i]=o.useState(l),p=s??n,u=o.useCallback(c=>{i(c),t?.(c)},[t]),m=o.useMemo(()=>({value:p,onSelect:u}),[p,u]);return e.jsx(ta.Provider,{value:m,children:e.jsx("div",{className:a,children:r})})}function xr({children:s,className:l}){return e.jsx("div",{role:"tablist",className:l,children:s})}function Ls({value:s,children:l,className:t}){const r=o.useContext(ta);if(!r)throw new Error("TabsTrigger must be used within Tabs");const a=r.value===s;return e.jsx("button",{type:"button",role:"tab","data-state":a?"active":"inactive","aria-selected":a,className:qe("inline-flex items-center border-b-2 border-transparent px-3 py-2 text-sm font-medium transition",a?"border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700",t),onClick:()=>r.onSelect(s),children:l})}function rt({value:s,children:l,className:t}){const r=o.useContext(ta);if(!r)throw new Error("TabsContent must be used within Tabs");const a=r.value===s;return e.jsx("div",{role:"tabpanel","data-state":a?"active":"inactive",className:qe(a?"block":"hidden",t),children:a?l:null})}function Dn({isOpen:s,onClose:l,onSave:t,currentBrandData:r={},loading:a=!1}){const[n,i]=o.useState({brand_name:r.brand_name||"",brand_description:r.brand_description||"",brand_website:r.brand_website||"",brand_email:r.brand_email||"",brand_phone:r.brand_phone||""}),[p,u]=o.useState(null),[m,c]=o.useState(r.brand_logo_url||""),[x,g]=o.useState(!1),h=o.useRef(null),j=(f,d)=>{i(b=>({...b,[f]:d}))},y=f=>{const d=f.target.files?.[0];if(d){if(!d.type.startsWith("image/")){alert("Please select an image file");return}if(d.size>5*1024*1024){alert("Please select an image smaller than 5MB");return}u(d);const b=new FileReader;b.onload=F=>{c(F.target?.result)},b.readAsDataURL(d)}},N=async()=>{if(!p)return m||"";g(!0);try{const f=new FormData;f.append("image",p);const d=await fetch("/api/upload/image",{method:"POST",credentials:"include",body:f});return d.ok?(await d.json()).url||"":(console.error("Failed to upload logo"),"")}catch(f){return console.error("Error uploading logo:",f),""}finally{g(!1)}},w=async()=>{if(!n.brand_name.trim()){alert("Brand name is required");return}let f=m;if(p&&(f=await N(),!f.trim())){alert("Failed to upload logo. Please try again.");return}const d={...n,brand_logo_url:f||""};t(d)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center",children:e.jsx(Js,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Brand Profile"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Set up your brand representation"})]})]}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(se,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:"Brand Logo"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-xl flex items-center justify-center overflow-hidden border-2 border-dashed border-gray-300",children:m?e.jsx("img",{src:m,alt:"Brand logo",className:"w-full h-full object-cover"}):e.jsx(Qs,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("button",{type:"button",onClick:()=>h.current?.click(),disabled:x,className:"bg-gray-100 hover:bg-gray-200 disabled:opacity-50 text-gray-700 px-4 py-2 rounded-lg font-medium transition-colors flex items-center space-x-2",children:[e.jsx(Ss,{className:"w-4 h-4"}),e.jsx("span",{children:x?"Uploading...":"Upload Logo"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG up to 5MB. Square format recommended."})]})]}),e.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:y,className:"hidden"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"brand_name",className:"block text-sm font-medium text-gray-900 mb-2",children:"Brand Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"brand_name",type:"text",value:n.brand_name,onChange:f=>j("brand_name",f.target.value),placeholder:"Enter your brand name",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"brand_description",className:"block text-sm font-medium text-gray-900 mb-2",children:"Brand Description"}),e.jsxs("div",{className:"relative",children:[e.jsx(ys,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),e.jsx("textarea",{id:"brand_description",value:n.brand_description,onChange:f=>j("brand_description",f.target.value),placeholder:"Describe your brand, mission, and values",rows:3,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"brand_website",className:"block text-sm font-medium text-gray-900 mb-2",children:"Website"}),e.jsxs("div",{className:"relative",children:[e.jsx(zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"brand_website",type:"url",value:n.brand_website,onChange:f=>j("brand_website",f.target.value),placeholder:"https://yourbrand.com",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"brand_email",className:"block text-sm font-medium text-gray-900 mb-2",children:"Brand Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Zs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"brand_email",type:"email",value:n.brand_email,onChange:f=>j("brand_email",f.target.value),placeholder:"contact@yourbrand.com",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"brand_phone",className:"block text-sm font-medium text-gray-900 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"brand_phone",type:"tel",value:n.brand_phone,onChange:f=>j("brand_phone",f.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),n.brand_name&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Preview"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center overflow-hidden border border-gray-200",children:m?e.jsx("img",{src:m,alt:"Brand logo",className:"w-full h-full object-cover"}):e.jsx(Js,{className:"w-6 h-6 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:n.brand_name}),n.brand_description&&e.jsx("div",{className:"text-sm text-gray-600 line-clamp-1",children:n.brand_description})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:l,className:"px-6 py-2 text-gray-700 hover:text-gray-900 font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:w,disabled:a||x||!n.brand_name.trim(),className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-2 rounded-xl font-medium transition-all duration-200 flex items-center space-x-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ds,{className:"w-4 h-4"}),e.jsx("span",{children:"Save Brand Profile"})]})})]})]})}):null}function Pn({showHeader:s=!0,basePath:l="/campaigns"}){const[t,r]=o.useState([]),[a,n]=o.useState(!0),[i,p]=o.useState("");o.useEffect(()=>{(async()=>{try{n(!0),r([{id:"1",name:"Summer Collection Launch",status:"active",startDate:"2025-06-01",endDate:"2025-08-31",budget:5e3,spent:1250,impressions:125e3,clicks:2500,ctr:2,cpc:.5,drops:12,participants:2450},{id:"2",name:"Back to School",status:"draft",startDate:"2025-08-15",endDate:"2025-09-15",budget:3e3,spent:0,impressions:0,clicks:0,ctr:0,cpc:0,drops:0,participants:0}])}catch(h){console.error("Failed to fetch campaigns:",h),p("Failed to load campaigns. Please try again later.")}finally{n(!1)}})()},[]);const u=g=>{const h="px-2 py-1 rounded-full text-xs font-medium";switch(g){case"active":return`${h} bg-green-100 text-green-700`;case"paused":return`${h} bg-yellow-100 text-yellow-700`;case"completed":return`${h} bg-gray-100 text-gray-700`;case"draft":default:return`${h} bg-blue-100 text-blue-700`}},m=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(g),c=g=>new Intl.NumberFormat("en-US").format(g);if(a)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})});if(i)return e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:i})})]})});const x=`${l}/new`;return e.jsxs("div",{className:"space-y-6",children:[s&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Campaigns"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Create and manage your marketing campaigns"})]}),e.jsx(ee,{asChild:!0,children:e.jsxs(he,{to:x,className:"flex items-center space-x-2",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{children:"New Campaign"})]})})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ot,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No campaigns"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new campaign."}),e.jsx("div",{className:"mt-6",children:e.jsx(ee,{asChild:!0,children:e.jsxs(he,{to:x,className:"inline-flex items-center",children:[e.jsx(Re,{className:"-ml-1 mr-2 h-5 w-5"}),"New Campaign"]})})})]}):e.jsx("ul",{className:"divide-y divide-gray-200",children:t.map(g=>e.jsx("li",{className:"hover:bg-gray-50",children:e.jsx(he,{to:`${l}/${g.id}`,className:"block",children:e.jsxs("div",{className:"px-4 py-4 sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"text-lg font-medium text-indigo-600 truncate",children:g.name}),e.jsx("div",{className:"ml-2",children:e.jsx("span",{className:u(g.status),children:g.status.charAt(0).toUpperCase()+g.status.slice(1)})})]}),e.jsx("div",{className:"ml-2 flex-shrink-0 flex",children:e.jsxs("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:[m(g.spent)," of ",m(g.budget)]})})]}),e.jsxs("div",{className:"mt-2 sm:flex sm:justify-between",children:[e.jsx("div",{className:"sm:flex",children:e.jsxs("p",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(ts,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),new Date(g.startDate).toLocaleDateString(),g.endDate&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-1",children:"-"}),new Date(g.endDate).toLocaleDateString()]})]})}),e.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0",children:[e.jsx(pe,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),e.jsxs("p",{children:[c(g.participants)," participants"]}),e.jsx("span",{className:"mx-1",children:"•"}),e.jsx(oe,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),e.jsxs("p",{children:["CPC: ",m(g.cpc)]})]})]}),g.status!=="draft"&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),e.jsxs("span",{children:[c(g.impressions)," impressions"]})]}),e.jsxs("span",{className:"text-sm font-medium",children:[g.ctr.toFixed(1),"% CTR"]})]}),e.jsx("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(100,g.spent/g.budget*100)}%`}})})]})]})})},g.id))})})]})}function Tn(){const{user:s}=Ue(),l=ws(),t=Ce(),[r,a]=o.useState(null),[n,i]=o.useState(null),[p,u]=o.useState([]),[m,c]=o.useState(!0),[x,g]=o.useState(null),[h,j]=o.useState(!0),[y,N]=o.useState(""),[w,f]=o.useState(!1),[d,b]=o.useState(!1),[F,v]=o.useState("dashboard");o.useEffect(()=>{s&&C()},[s]),o.useEffect(()=>{r&&(E(),L())},[r]),o.useEffect(()=>{const A=()=>{!document.hidden&&s&&C()};return document.addEventListener("visibilitychange",A),()=>document.removeEventListener("visibilitychange",A)},[s]),o.useEffect(()=>{s&&C()},[l?.pathname,s]),o.useEffect(()=>{const A=D=>{D.key==="advertiser_conversion"&&D.newValue==="true"&&(localStorage.removeItem("advertiser_conversion"),C())};return window.addEventListener("storage",A),()=>window.removeEventListener("storage",A)},[]),o.useEffect(()=>{window.location.hash==="#converted"&&s&&(window.history.replaceState({},"",window.location.pathname),setTimeout(()=>{C()},500))},[s]);const C=async()=>{try{const A=ue(),D=await fetch("/api/users/me",{credentials:"include",headers:A});if(D.ok){const H=await D.json();a(H)}else console.error("Failed to fetch user data:",D.status)}catch(A){console.error("Failed to fetch user data:",A),N("Failed to load user data"),j(!1)}},E=async()=>{try{const A=ue(),D=await fetch("/api/advertisers/dashboard",{credentials:"include",headers:A});if(D.ok){const H=await D.json();i(H)}else i({drops:[],analytics:[],user_tier:r?.user_tier||"free"})}catch(A){console.error("Failed to fetch dashboard data:",A),i({drops:[],analytics:[],user_tier:r?.user_tier||"free"})}finally{j(!1)}},L=async()=>{try{const A=ue(),D=await fetch("/api/advertisers/suggested-content",{credentials:"include",headers:A});if(D.ok){const H=await D.json();u(Array.isArray(H)?H:[])}else u([])}catch(A){console.error("Failed to fetch suggested content:",A),u([])}finally{c(!1)}},M=A=>{switch(A){case"super":return{name:"Super Advertiser",color:"text-yellow-600 bg-yellow-50",inventory:"Weekly: 500 moves, 25 proof drops, 15 paid drops",features:["Premium analytics","Priority support","Custom targeting","Advanced reporting","Create proof & paid drops"]};case"premium":return{name:"Premium Advertiser",color:"text-purple-600 bg-purple-50",inventory:"Weekly: 200 moves, 15 proof drops, 8 paid drops",features:["Advanced analytics","Priority support","Custom targeting","Create proof & paid drops"]};default:return{name:"Free Advertiser",color:"text-gray-600 bg-gray-50",inventory:"Monthly Sample: 50 moves, 5 proof drops",features:["Basic analytics","Standard support","Create proof drops only","Sponsor content with gems"]}}},T=()=>n?.drops?n.drops.reduce((A,D)=>({totalDrops:A.totalDrops+1,totalParticipants:A.totalParticipants+(D.total_applications||0),totalGems:A.totalGems+(D.gems_paid||0)}),{totalDrops:0,totalParticipants:0,totalGems:0}):{totalDrops:0,totalParticipants:0,totalGems:0},k=Array.from({length:30},(D,H)=>{const J=new Date;return J.setDate(J.getDate()-(29-H)),{date:J.toISOString().split("T")[0],applications:Math.floor(Math.random()*50)+10,conversions:Math.floor(Math.random()*20)+5,impressions:Math.floor(Math.random()*1e3)+200,clicks:Math.floor(Math.random()*100)+20,spent:Math.floor(Math.random()*500)+100,participants:Math.floor(Math.random()*30)+5}}),S=[{metric:"Click-through Rate",value:4.2},{metric:"Conversion Rate",value:12.8},{metric:"Engagement Rate",value:8.5},{metric:"Application Rate",value:15.3},{metric:"Completion Rate",value:78.9}],$=[{name:"Content Creation",value:45,color:"#f97316"},{name:"Social Sharing",value:30,color:"#8b5cf6"},{name:"Reviews",value:15,color:"#10b981"},{name:"Surveys",value:10,color:"#3b82f6"}],z=M(n?.user_tier||"free"),_=T(),G=A=>g(A),q=A=>{const D={"quick-boost":{name:"Quick Boost",gems:25,hours:1,multiplier:1.5},"popular-boost":{name:"Popular Boost",gems:50,hours:6,multiplier:2},"daily-featured":{name:"Daily Feature",gems:100,hours:24,multiplier:3},"premium-spotlight":{name:"Premium Spotlight",gems:200,hours:72,multiplier:4},"viral-campaign":{name:"Viral Campaign",gems:500,hours:168,multiplier:6}};return D[A]||D["quick-boost"]},ae=async A=>{b(!0);try{const D=await fetch("/api/users/brand-profile",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(A)});if(D.ok)f(!1),C();else{const H=await D.json();alert(H.error||"Failed to save brand profile")}}catch(D){console.error("Error saving brand profile:",D),alert("Failed to save brand profile")}finally{b(!1)}};o.useEffect(()=>{l.pathname==="/advertiser/campaigns"||l.pathname.startsWith("/advertiser/campaigns/")||l.pathname==="/campaigns"||l.pathname.startsWith("/campaigns/")?v("campaigns"):v("dashboard")},[l.pathname]);const de=A=>{t(A==="campaigns"?"/advertiser/campaigns":"/advertiser")};return h?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):y?e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-red-900 mb-2",children:"Error Loading Dashboard"}),e.jsx("p",{className:"text-red-700 mb-4",children:y}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-xl font-medium transition-colors",children:"Refresh Page"})]})}):r?r.user_type!=="advertiser"?e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx(Vs,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"Become an Advertiser"}),e.jsx("p",{className:"text-blue-700 mb-6 max-w-md mx-auto",children:"Your account is not yet set up for advertising. Click below to become an advertiser and start creating marketing campaigns."}),e.jsx(he,{to:"/advertiser/onboarding",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-4 rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:"Become an Advertiser"}),e.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Free to get started • No setup fees • Create your first campaign"})]})}):n?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx(mr,{value:F,onValueChange:de,className:"w-full",children:e.jsxs(xr,{className:"bg-transparent p-0 rounded-none",children:[e.jsxs(Ls,{value:"dashboard",className:"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none px-4 py-3 text-sm font-medium",children:[e.jsx($r,{className:"mr-2 h-4 w-4"}),"Dashboard"]}),e.jsxs(Ls,{value:"campaigns",className:"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none px-4 py-3 text-sm font-medium",children:[e.jsx(Vs,{className:"mr-2 h-4 w-4"}),"Campaigns"]})]})})}),F==="campaigns"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Campaigns"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage your marketing campaigns and track performance"})]}),e.jsxs(ee,{onClick:()=>t("/campaigns/new"),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200",children:[e.jsx(Ar,{className:"w-4 h-4"}),e.jsx("span",{children:"New Campaign"})]})]}),e.jsx(Pn,{showHeader:!1,basePath:"/advertiser/campaigns"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("div",{children:r?.brand_name?e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-xl flex items-center justify-center overflow-hidden border border-gray-200",children:r?.brand_logo_url?e.jsx("img",{src:r.brand_logo_url,alt:"Brand logo",className:"w-full h-full object-cover"}):e.jsx(Js,{className:"w-6 h-6 text-gray-400"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r.brand_name}),e.jsx("button",{onClick:()=>f(!0),className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Edit brand profile",children:e.jsx(Yt,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-gray-600",children:r?.brand_description||"Manage your campaigns and track performance"})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Advertiser Dashboard"}),e.jsxs("button",{onClick:()=>f(!0),className:"bg-blue-100 hover:bg-blue-200 text-blue-600 px-3 py-1 rounded-lg text-sm font-medium transition-colors flex items-center space-x-1",children:[e.jsx(Js,{className:"w-4 h-4"}),e.jsx("span",{children:"Set up brand"})]})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your campaigns and track performance"})]})})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`px-4 py-2 rounded-lg ${z.color}`,children:e.jsx("span",{className:"font-medium",children:z.name})}),e.jsx("button",{onClick:()=>f(!0),className:"text-gray-400 hover:text-gray-600 transition-colors p-2 rounded-lg hover:bg-gray-100",title:"Brand settings",children:e.jsx(qt,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sample Inventory"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Use monthly samples to test promotions before upgrading"})]}),e.jsx("div",{className:"bg-orange-100 text-orange-600 px-3 py-1 rounded-full text-xs font-medium",children:"Monthly"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Moves"}),e.jsxs("p",{className:"text-xl font-semibold text-gray-900",children:[n?.monthly_inventory?.moves_used??0,"/50"]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Proof Drops"}),e.jsxs("p",{className:"text-xl font-semibold text-gray-900",children:[n?.monthly_inventory?.proof_drops_used??0,"/5"]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Paid Drops"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:"Upgrade"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Weekly Allocation"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Upgrade to unlock weekly inventory packs"})]}),e.jsx("div",{className:"bg-purple-100 text-purple-600 px-3 py-1 rounded-full text-xs font-medium",children:"Upgrade"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Moves"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:"200"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Premium tier"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Proof Drops"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:"15"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Paid Drops"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:"8"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(Ae,{title:"Total Drops",value:_.totalDrops,change:12,changeType:"increase",icon:e.jsx(pt,{className:"w-5 h-5"}),trend:k.slice(-7).map(A=>({date:A.date,value:Math.floor(Math.random()*20)+5}))}),e.jsx(Ae,{title:"Total Participants",value:_.totalParticipants.toLocaleString(),change:8,changeType:"increase",icon:e.jsx(pe,{className:"w-5 h-5"}),trend:k.slice(-7).map(A=>({date:A.date,value:A.participants}))}),e.jsx(Ae,{title:"Gems Distributed",value:_.totalGems.toFixed(1),change:15,changeType:"increase",icon:e.jsx(Ne,{className:"w-5 h-5"}),trend:k.slice(-7).map(A=>({date:A.date,value:A.spent}))}),e.jsx(Ae,{title:"Avg. Engagement",value:`${n.analytics.length>0?(n.analytics.reduce((A,D)=>A+(D.engagement_rate||0),0)/n.analytics.length).toFixed(1):"8.5"}%`,change:3,changeType:"increase",icon:e.jsx(re,{className:"w-5 h-5"}),trend:k.slice(-7).map(A=>({date:A.date,value:Math.floor(Math.random()*20)+5}))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center",children:e.jsx(Xs,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Suggested Content to Sponsor"}),e.jsx("p",{className:"text-sm text-gray-600",children:"High-performing content perfect for your brand"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(ss,{className:"w-4 h-4"}),e.jsx("span",{children:"Last updated just now"})]})]})}),e.jsx("div",{className:"p-6",children:m?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading suggestions..."}):p.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.slice(0,6).map(A=>{const D=q(A.suggested_package);return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-purple-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-purple-600 bg-purple-50 px-2 py-1 rounded-full",children:A.platform}),A.is_trending&&e.jsx("span",{className:"text-xs font-medium text-orange-600 bg-orange-50 px-2 py-1 rounded-full",children:"Trending"})]}),e.jsx("h4",{className:"font-semibold text-gray-900",children:A.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mt-1",children:A.description})]}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600 transition-colors",onClick:()=>window.open(A.platform_url,"_blank"),children:e.jsx(ss,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center text-sm mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:A.total_engagement}),e.jsx("p",{className:"text-xs text-gray-500",children:"Engagement"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[A.engagement_rate,"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Eng. Rate"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[A.roi_potential,"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"ROI Potential"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Suggested Package:"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:D.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[D.hours,"h • ",D.multiplier,"x boost"]})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-purple-600 font-semibold",children:[e.jsx(Ne,{className:"w-3 h-3"}),e.jsx("span",{children:D.gems})]})]})]}),e.jsx("button",{onClick:()=>G(A),className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-2 px-4 rounded-lg font-medium transition-all duration-200 text-sm",children:"Sponsor This Content"})]},A.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No suggestions available"}),e.jsx("p",{className:"text-gray-600",children:"We'll find great content for you to sponsor soon!"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Campaign Performance"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(ts,{className:"w-4 h-4"}),e.jsx("span",{children:"Last 30 days"})]})]}),e.jsx(Vl,{data:k,height:300,metrics:[{key:"applications",name:"Applications",color:"#f97316"},{key:"conversions",name:"Conversions",color:"#10b981"},{key:"clicks",name:"Clicks",color:"#3b82f6"}]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Drop Type Distribution"}),e.jsx(ea,{data:$,height:300})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Key Performance Indicators"}),e.jsx(or,{data:S,height:300})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Spending & Engagement Trends"}),e.jsx(sa,{data:k.map(A=>({date:A.date,value:A.spent,secondary:A.impressions/10})),height:300,primaryKey:"value",secondaryKey:"secondary",primaryColor:"#f97316",secondaryColor:"#8b5cf6"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Real-time Campaign Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx(vs,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:"24.3K"}),e.jsx("p",{className:"text-sm text-blue-600",children:"Impressions"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx(Lr,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:"1.2K"}),e.jsx("p",{className:"text-sm text-green-600",children:"Clicks"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx(be,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:"156"}),e.jsx("p",{className:"text-sm text-purple-600",children:"Applications"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsx(pe,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:"89"}),e.jsx("p",{className:"text-sm text-orange-600",children:"Conversions"})]}),e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[e.jsx(oe,{className:"w-6 h-6 text-yellow-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:"$0.78"}),e.jsx("p",{className:"text-sm text-yellow-600",children:"Cost/Convert"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx(re,{className:"w-6 h-6 text-red-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:"4.2%"}),e.jsx("p",{className:"text-sm text-red-600",children:"CTR"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Drops"}),r&&r.user_type==="advertiser"&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>window.location.href="/earn?create=proof",className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{children:"Create Proof Drop"})]}),n?.user_tier!=="free"&&e.jsxs("button",{onClick:()=>window.location.href="/earn?create=paid",className:"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{children:"Create Paid Drop"})]})]})]})}),e.jsx("div",{className:"p-6",children:n.drops.length>0?e.jsx("div",{className:"space-y-4",children:n.drops.slice(0,5).map(A=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:A.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:A.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsxs("span",{children:[A.total_applications||0," applicants"]})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsxs("span",{children:[A.gem_reward_base," gems"]})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(ts,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(A.created_at).toLocaleDateString()})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${A.status==="active"?"text-green-600 bg-green-100":"text-gray-600 bg-gray-100"}`,children:A.status})})]},A.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(pt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No drops yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first drop to start engaging with creators."}),r&&r.user_type==="advertiser"&&e.jsx("button",{onClick:()=>window.location.href="/earn?create=proof",className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-2 rounded-lg font-medium",children:"Create Your First Drop"})]})})]}),n.analytics.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Performance Analytics"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Drops"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Participants"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gems Spent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Impressions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Engagement"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.analytics.slice(0,10).map(A=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[new Date(A.period_start).toLocaleDateString()," -"," ",new Date(A.period_end).toLocaleDateString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.drops_created}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.total_participants}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.gems_spent.toFixed(1)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.impressions.toLocaleString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[A.engagement_rate.toFixed(1),"%"]})]},A.id))})]})})]})]}),x&&e.jsx(cr,{isOpen:!0,onClose:()=>g(null),onSponsor:async(A,D,H)=>{try{(await fetch("/api/content/sponsor",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({contentId:x.id,gemAmount:A,boostMultiplier:D,durationHours:H})})).ok?(g(null),L()):console.error("Failed to sponsor content")}catch(J){console.error("Error sponsoring content:",J)}},contentTitle:x.title,userGems:r?.gems_balance||0}),e.jsx(Dn,{isOpen:w,onClose:()=>f(!1),onSave:ae,currentBrandData:r,loading:d})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(pe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Loading Dashboard..."}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we load your advertiser dashboard."})]}):null}function Mn(){const{user:s,demoLogin:l}=Ue(),t=Ce(),[r,a]=o.useState(!1),[n,i]=o.useState(null),p=async()=>{if(!s){t("/?error=auth_required");return}a(!0),i(null);try{const m=await fetch("/api/users/become-advertiser",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`},credentials:"include"});if(m.ok){const c=await m.json();if(c.token&&c.user){localStorage.setItem("authToken",c.token),localStorage.setItem("advertiser_conversion","true"),window.location.href="/advertiser#converted";return}localStorage.setItem("advertiser_conversion","true"),window.location.href="/advertiser#converted"}else{const c=await m.json();i(c.error||"Failed to become advertiser")}}catch(m){console.error("Error becoming advertiser:",m),i("Network error occurred")}finally{a(!1)}},u={free:{name:"Free Advertiser",color:"text-gray-600 bg-gray-50 border-gray-200",inventory:"Monthly Sample: 50 moves, 5 proof drops",features:["Basic analytics","Standard support","Create proof drops only","Sponsor any content with gems"]},premium:{name:"Premium Advertiser",color:"text-purple-600 bg-purple-50 border-purple-200",inventory:"Weekly: 200 moves, 15 proof drops, 8 paid drops",features:["Advanced analytics","Priority support","Custom targeting","Create proof & paid drops","Sponsor content with gems"]},super:{name:"Super Advertiser",color:"text-yellow-600 bg-yellow-50 border-yellow-200",inventory:"Weekly: 500 moves, 25 proof drops, 15 paid drops",features:["Premium analytics","Priority support","Custom targeting","Advanced reporting","Create proof & paid drops","Sponsor content with gems"]}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-purple-50",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-orange-500 to-red-500",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"relative z-10 px-6 py-20",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center text-white",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:e.jsx(Vs,{className:"w-8 h-8"})})}),e.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-6",children:"Advertise on Promorang"}),e.jsx("p",{className:"text-xl md:text-2xl mb-8 text-orange-100 max-w-3xl mx-auto",children:"Connect with thousands of creators and build authentic campaigns that drive real engagement"}),e.jsxs("div",{className:"flex items-center justify-center space-x-8 text-orange-100",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pe,{className:"w-5 h-5"}),e.jsx("span",{children:"50k+ Active Creators"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"w-5 h-5"}),e.jsx("span",{children:"95% Completion Rate"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"w-5 h-5"}),e.jsx("span",{children:"4.9★ Average Rating"})]})]})]})})]}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-16",children:[e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-4xl font-bold text-center text-gray-900 mb-12",children:"Why Choose Promorang for Advertising?"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-200 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mb-6",children:e.jsx(be,{className:"w-6 h-6 text-blue-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Moves & Proof System"}),e.jsx("p",{className:"text-gray-600",children:'Create "moves" that help users earn keys for their Master Key progression, and "proof drops" that contribute to daily activation requirements.'})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-200 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mb-6",children:e.jsx(pt,{className:"w-6 h-6 text-green-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Flexible Inventory System"}),e.jsx("p",{className:"text-gray-600",children:"Start with free monthly samples, then upgrade to weekly inventory allocations for moves, proof drops, and paid opportunities."})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-200 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mb-6",children:e.jsx(oe,{className:"w-6 h-6 text-purple-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Gem Sponsorship System"}),e.jsx("p",{className:"text-gray-600",children:"All advertisers can allocate gems to sponsor any content, boosting visibility and engagement regardless of tier level."})]})]})]}),e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-4xl font-bold text-center text-gray-900 mb-4",children:"Advertiser Tiers"}),e.jsx("p",{className:"text-center text-gray-600 mb-12 text-lg",children:"Choose the tier that matches your advertising needs and scale"}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:Object.entries(u).map(([m,c])=>e.jsxs("div",{className:`border-2 rounded-2xl p-8 ${c.color} relative`,children:[m==="premium"&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsx("span",{className:"bg-purple-500 text-white px-4 py-1 rounded-full text-sm font-medium",children:"Most Popular"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"flex justify-center mb-4",children:[m==="free"&&e.jsx(ke,{className:"w-8 h-8 text-gray-600"}),m==="premium"&&e.jsx(X,{className:"w-8 h-8 text-purple-600"}),m==="super"&&e.jsx(Ke,{className:"w-8 h-8 text-yellow-600"})]}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:c.name}),e.jsx("p",{className:"text-lg font-semibold",children:c.inventory}),e.jsx("p",{className:"text-sm opacity-75",children:m==="free"?"Sample inventory allocation":"Weekly inventory allocation"})]}),e.jsx("ul",{className:"space-y-3 mb-6",children:c.features.map((x,g)=>e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:x})]},g))}),m==="free"&&e.jsx("p",{className:"text-xs opacity-75 text-center",children:"Free tier can create proof drops and sponsor content. Upgrade to create paid drops."})]},m))})]}),e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-4xl font-bold text-center text-gray-900 mb-12",children:"How It Works"}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"1"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Create Campaigns"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Set up drops with your requirements, budget, and target audience"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"2"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Creators Apply"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Qualified creators apply to your campaigns with their proposals"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"3"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Review & Approve"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Review submissions and approve the best content for your brand"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"4"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Track Results"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Monitor performance and measure ROI with detailed analytics"})]})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-12 text-center",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Ready to Start Advertising?"}),e.jsx("p",{className:"text-gray-600 mb-8 text-lg",children:"Join hundreds of brands already using Promorang to create authentic, high-performing campaigns"}),n&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-6",children:e.jsx("p",{className:"text-sm text-red-700",children:n})}),e.jsx("button",{onClick:p,disabled:r,className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold px-8 py-4 rounded-xl text-lg transition-all duration-200 transform hover:scale-105 shadow-lg flex items-center space-x-2 mx-auto",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Setting up your account..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Become an Advertiser"}),e.jsx(is,{className:"w-5 h-5"})]})}),e.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Free to get started • No setup fees • Pay only for completed work"})]})})]})]})}const va={active:"bg-green-100 text-green-800",paused:"bg-yellow-100 text-yellow-800",draft:"bg-blue-100 text-blue-800",completed:"bg-gray-100 text-gray-800"};function Fn(){const{id:s}=Ps(),l=Ce(),[t,r]=o.useState(null),[a,n]=o.useState([]),[i,p]=o.useState(!0),[u,m]=o.useState(""),[c,x]=o.useState("overview"),[g,h]=o.useState(!1);o.useEffect(()=>{(async()=>{try{p(!0),await new Promise(M=>setTimeout(M,500));const E={id:s||"1",name:"Summer Collection Launch",status:"active",objective:"engagement",description:"Promoting our new summer collection to drive engagement and sales.",startDate:"2025-06-01",endDate:"2025-08-31",budget:5e3,spent:1250,dailyBudget:100,impressions:125e3,clicks:2500,ctr:2,cpc:.5,drops:12,participants:2450,bidStrategy:"lowest_cost",bidAmount:5,targetCtr:2,targetCpc:.5,createdAt:"2025-05-15T10:30:00Z",updatedAt:"2025-06-15T14:45:00Z"},L=[{id:"c1",title:"Summer Lookbook",platform:"Instagram",creator:"fashion_influencer",status:"live",budget:1e3,spent:450,impressions:5e4,clicks:1200,ctr:2.4,cpc:.38,startDate:"2025-06-01",endDate:"2025-06-30"},{id:"c2",title:"Beachwear Showcase",platform:"TikTok",creator:"beachvibes",status:"live",budget:1500,spent:800,impressions:75e3,clicks:1300,ctr:1.7,cpc:.62,startDate:"2025-06-05",endDate:"2025-07-05"}];r(E),n(L)}catch(E){console.error("Failed to fetch campaign:",E),m("Failed to load campaign details. Please try again later.")}finally{p(!1)}})()},[s]);const j=async C=>{if(t)try{h(!0),await new Promise(E=>setTimeout(E,500)),r({...t,status:C,updatedAt:new Date().toISOString()})}catch(E){console.error("Failed to update campaign status:",E)}finally{h(!1)}},y=C=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(C),N=C=>new Intl.NumberFormat("en-US").format(C),w=C=>zr(new Date(C),"MMM d, yyyy"),f=C=>{const E=new Date,M=new Date(C).getTime()-E.getTime();return Math.ceil(M/(1e3*60*60*24))};if(i)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})});if(u)return e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:u})})]})});if(!t)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Campaign not found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"The requested campaign could not be found."}),e.jsx("div",{className:"mt-6",children:e.jsxs(ee,{onClick:()=>l(-1),variant:"outline",children:[e.jsx(es,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to Campaigns"]})})]});const d=t.endDate?f(t.endDate):null,b=t.spent/t.budget*100,F=t.spent/(Math.ceil((new Date().getTime()-new Date(t.startDate).getTime())/(1e3*60*60*24))||1),v=t.dailyBudget>0?new Date(Date.now()+(t.budget-t.spent)/t.dailyBudget*24*60*60*1e3):null;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(ee,{variant:"outline",size:"icon",onClick:()=>l(-1),className:"h-8 w-8",children:[e.jsx(es,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Back"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t.name}),e.jsxs("div",{className:"flex items-center mt-1 space-x-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${va[t.status]}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)}),e.jsxs("span",{className:"text-sm text-gray-500",children:[w(t.startDate),t.endDate&&` - ${w(t.endDate)}`,d!==null&&e.jsxs("span",{className:"ml-1",children:["(",d>0?`${d} days left`:"Ended",")"]})]})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[t.status==="active"&&e.jsxs(ee,{variant:"outline",onClick:()=>j("paused"),disabled:g,children:[e.jsx(Or,{className:"mr-2 h-4 w-4"}),"Pause"]}),(t.status==="paused"||t.status==="draft")&&e.jsxs(ee,{onClick:()=>j("active"),disabled:g,children:[e.jsx(Da,{className:"mr-2 h-4 w-4"}),t.status==="paused"?"Resume":"Activate"]}),e.jsx(ee,{variant:"outline",asChild:!0,children:e.jsxs(he,{to:`/campaigns/${t.id}/edit`,children:[e.jsx(Yt,{className:"mr-2 h-4 w-4"}),"Edit"]})}),e.jsxs(ee,{variant:"outline",size:"icon",children:[e.jsx(za,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"More"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-blue-500 rounded-md p-3",children:e.jsx(oe,{className:"h-6 w-6 text-white"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Budget"}),e.jsx("dd",{className:"flex items-baseline",children:e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:y(t.budget)})})]})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium text-gray-900",children:y(t.spent)})," spent",e.jsx("span",{className:"mx-1",children:"•"}),e.jsxs("span",{children:[y(t.budget-t.spent)," remaining"]})]}),e.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(100,b)}%`}})})]})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-green-500 rounded-md p-3",children:e.jsx(pe,{className:"h-6 w-6 text-white"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Participants"}),e.jsx("dd",{className:"flex items-baseline",children:e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:N(t.participants)})})]})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium text-gray-900",children:t.drops})," drops"]})})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-purple-500 rounded-md p-3",children:e.jsx(ot,{className:"h-6 w-6 text-white"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Impressions"}),e.jsx("dd",{className:"flex items-baseline",children:e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:N(t.impressions)})})]})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium text-gray-900",children:N(t.clicks)})," clicks",e.jsx("span",{className:"mx-1",children:"•"}),e.jsxs("span",{children:[t.ctr,"% CTR"]})]})})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-yellow-500 rounded-md p-3",children:e.jsx(be,{className:"h-6 w-6 text-white"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Performance"}),e.jsxs("dd",{className:"flex items-baseline",children:[e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:y(t.cpc)}),e.jsx("div",{className:"ml-2 flex items-baseline text-sm font-semibold text-green-600",children:e.jsx("span",{children:(t.cpc<t.targetCpc?"↓ ":"↑ ")+Math.abs(t.cpc-t.targetCpc).toFixed(2)})})]})]})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"text-sm text-gray-500",children:e.jsxs("span",{children:["Target: ",y(t.targetCpc)," CPC"]})})})]})})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:e.jsxs(mr,{defaultValue:"overview",onValueChange:x,className:"w-full",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs(xr,{className:"bg-transparent p-0 rounded-none",children:[e.jsx(Ls,{value:"overview",className:"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none",children:"Overview"}),e.jsx(Ls,{value:"performance",className:"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none",children:"Performance"}),e.jsxs(Ls,{value:"content",className:"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none",children:["Content (",a.length,")"]}),e.jsx(Ls,{value:"settings",className:"data-[state=active]:border-b-2 data-[state=active]:border-blue-500 data-[state=active]:shadow-none rounded-none",children:"Settings"})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx(rt,{value:"overview",children:e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("section",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Campaign Summary"}),e.jsx("p",{className:"text-gray-700",children:t.description||"No description provided."}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Objective"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:t.objective.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Bid Strategy"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:t.bidStrategy==="lowest_cost"?"Lowest Cost":t.bidStrategy==="cost_cap"?"Cost Cap":"Bid Cap"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Daily Budget"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:y(t.dailyBudget)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Est. End Date"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:v?w(v.toISOString()):"N/A"})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Activity"}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsxs("ul",{className:"divide-y divide-gray-200",children:[e.jsx("li",{className:"px-4 py-4 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-indigo-600 truncate",children:"Campaign created"}),e.jsx("div",{className:"ml-2 flex-shrink-0",children:e.jsx("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:w(t.createdAt)})})]})}),e.jsx("li",{className:"px-4 py-4 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-indigo-600 truncate",children:"Campaign started"}),e.jsx("div",{className:"ml-2 flex-shrink-0",children:e.jsx("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:w(t.startDate)})})]})}),t.updatedAt!==t.createdAt&&e.jsx("li",{className:"px-4 py-4 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-indigo-600 truncate",children:"Campaign updated"}),e.jsx("div",{className:"ml-2 flex-shrink-0",children:e.jsx("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:w(t.updatedAt)})})]})})]})})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ee,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Ws,{className:"mr-2 h-4 w-4"}),"Refresh Data"]}),e.jsxs(ee,{variant:"outline",className:"w-full justify-start",children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),"Add Funds"]}),e.jsxs(ee,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Add Content"]}),e.jsxs(ee,{variant:"outline",className:"w-full justify-start text-red-600 hover:text-red-600",children:[e.jsx(zs,{className:"mr-2 h-4 w-4"}),"Delete Campaign"]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Performance Summary"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-1",children:[e.jsx("span",{children:"Spend"}),e.jsxs("span",{className:"font-medium",children:[y(t.spent)," / ",y(t.budget)]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(100,b)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-1",children:[e.jsx("span",{children:"Daily Spend"}),e.jsxs("span",{className:"font-medium",children:[y(F)," / day"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:qe("h-2 rounded-full",F<=t.dailyBudget*1.1?"bg-green-500":"bg-yellow-500"),style:{width:`${Math.min(100,F/t.dailyBudget*100)}%`}})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:F>t.dailyBudget*1.1?"Spending faster than daily budget":F<t.dailyBudget*.9?"Spending slower than daily budget":"On track with daily budget"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-1",children:[e.jsx("span",{children:"CPC"}),e.jsxs("span",{className:"font-medium",children:[y(t.cpc),e.jsxs("span",{className:qe("ml-1",t.cpc<=t.targetCpc*1.1?"text-green-600":"text-red-600"),children:["(",t.cpc<=t.targetCpc?"↓":"↑",Math.abs(t.cpc-t.targetCpc).toFixed(2),")"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:qe("h-2 rounded-full",t.cpc<=t.targetCpc*1.1?"bg-green-500":"bg-yellow-500"),style:{width:`${Math.min(100,t.cpc/(t.targetCpc*2)*100)}%`}})}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Target: ",y(t.targetCpc)]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-1",children:[e.jsx("span",{children:"CTR"}),e.jsxs("span",{className:"font-medium",children:[t.ctr,"%",e.jsxs("span",{className:qe("ml-1",t.ctr>=t.targetCtr*.9?"text-green-600":"text-red-600"),children:["(",t.ctr>=t.targetCtr?"↑":"↓",Math.abs(t.ctr-t.targetCtr).toFixed(1),"%)"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:qe("h-2 rounded-full",t.ctr>=t.targetCtr*.9?"bg-green-500":"bg-yellow-500"),style:{width:`${Math.min(100,t.ctr/(t.targetCtr*1.5)*100)}%`}})}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Target: ",t.targetCtr,"%"]})]})]})]})]})]})}),e.jsx(rt,{value:"performance",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Performance Over Time"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg h-64 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500",children:"Performance chart will be displayed here"})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Top Performing Content"}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:a.slice(0,3).map(C=>e.jsx("li",{className:"px-4 py-4 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-indigo-600 truncate",children:C.title}),e.jsx("div",{className:"flex mt-1",children:e.jsxs("p",{className:"text-xs text-gray-500",children:[C.platform," • ",C.creator]})})]}),e.jsx("div",{className:"ml-4 flex-shrink-0",children:e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[C.ctr,"% CTR"]})})]})},C.id))})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Performance by Platform"}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:Array.from(new Set(a.map(C=>C.platform))).map(C=>{const E=a.filter(B=>B.platform===C),L=E.reduce((B,k)=>B+k.spent,0),M=E.reduce((B,k)=>B+k.clicks,0),T=E.reduce((B,k)=>B+k.ctr,0)/E.length;return e.jsx("li",{className:"px-4 py-4 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:C}),e.jsx("div",{className:"flex mt-1",children:e.jsxs("p",{className:"text-xs text-gray-500",children:[E.length," ",E.length===1?"item":"items"]})})]}),e.jsxs("div",{className:"ml-4 flex-shrink-0",children:[e.jsx("p",{className:"text-sm text-gray-900",children:y(L)}),e.jsxs("p",{className:"text-xs text-gray-500",children:[M," clicks • ",T.toFixed(1),"% CTR"]})]})]})},C)})})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Recommendations"}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsxs("ul",{className:"divide-y divide-gray-200",children:[e.jsx("li",{className:"px-4 py-4 sm:px-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 pt-0.5",children:e.jsx("div",{className:"flex items-center justify-center h-6 w-6 rounded-full bg-blue-100 text-blue-600",children:e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})}),e.jsx("div",{className:"ml-3 flex-1",children:e.jsx("p",{className:"text-sm text-gray-700",children:"Your campaign is performing well! Consider increasing your daily budget to reach more people."})})]})}),e.jsx("li",{className:"px-4 py-4 sm:px-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 pt-0.5",children:e.jsx("div",{className:"flex items-center justify-center h-6 w-6 rounded-full bg-blue-100 text-blue-600",children:e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})}),e.jsx("div",{className:"ml-3 flex-1",children:e.jsx("p",{className:"text-sm text-gray-700",children:"Try A/B testing different ad creatives to improve your click-through rate."})})]})})]})})]})]})}),e.jsxs(rt,{value:"content",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Campaign Content"}),e.jsxs(ee,{children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Add Content"]})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsxs("ul",{className:"divide-y divide-gray-200",children:[a.map(C=>e.jsx("li",{className:"hover:bg-gray-50",children:e.jsx(he,{to:`/content/${C.id}`,className:"block",children:e.jsxs("div",{className:"px-4 py-4 sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"text-lg font-medium text-indigo-600 truncate",children:C.title}),e.jsx("div",{className:"ml-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C.status==="live"?"bg-green-100 text-green-800":C.status==="pending"?"bg-yellow-100 text-yellow-800":C.status==="approved"?"bg-blue-100 text-blue-800":C.status==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:C.status.charAt(0).toUpperCase()+C.status.slice(1)})})]}),e.jsx("div",{className:"ml-2 flex-shrink-0 flex",children:e.jsxs("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:[y(C.spent)," of ",y(C.budget)]})})]}),e.jsxs("div",{className:"mt-2 sm:flex sm:justify-between",children:[e.jsx("div",{className:"sm:flex",children:e.jsxs("p",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium text-gray-900",children:C.platform}),e.jsx("span",{className:"mx-1",children:"•"}),e.jsxs("span",{children:["by @",C.creator]})]})}),e.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0",children:[e.jsx(ot,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),e.jsxs("p",{children:[N(C.impressions)," impressions"]}),e.jsx("span",{className:"mx-1",children:"•"}),e.jsxs("p",{children:[N(C.clicks)," clicks"]}),e.jsx("span",{className:"mx-1",children:"•"}),e.jsxs("p",{children:[C.ctr,"% CTR"]})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(100,C.spent/C.budget*100)}%`}})})})]})})},C.id)),a.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ot,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No content added yet"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding content to your campaign."}),e.jsx("div",{className:"mt-6",children:e.jsxs(ee,{children:[e.jsx(Re,{className:"-ml-1 mr-2 h-5 w-5"}),"Add Content"]})})]})]})})]}),e.jsx(rt,{value:"settings",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Campaign Settings"}),e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e.jsx("div",{className:"px-4 py-5 sm:px-6",children:e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Basic Information"})}),e.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6",children:e.jsxs("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2",children:[e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Campaign Name"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:t.name})]}),e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx("dd",{className:"mt-1",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${va[t.status]}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})})]}),e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Start Date"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:w(t.startDate)})]}),e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"End Date"}),e.jsxs("dd",{className:"mt-1 text-sm text-gray-900",children:[t.endDate?w(t.endDate):"No end date",t.endDate&&d!==null&&e.jsxs("span",{className:"ml-2 text-gray-500",children:["(",d>0?`${d} days left`:"Ended",")"]})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Description"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:t.description||"No description provided."})]})]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Budget & Bidding"}),e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e.jsx("div",{className:"px-4 py-5 sm:px-6",children:e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Budget Settings"})}),e.jsxs("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6",children:[e.jsxs("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2",children:[e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Total Budget"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:y(t.budget)})]}),e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Daily Budget"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:y(t.dailyBudget)})]}),e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Amount Spent"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:y(t.spent)})]}),e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Remaining Budget"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:y(t.budget-t.spent)})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-1",children:[e.jsx("span",{children:"Budget Spent"}),e.jsxs("span",{children:[Math.round(b),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(100,b)}%`}})})]})]})]}),e.jsxs("div",{className:"mt-6 bg-white shadow overflow-hidden sm:rounded-lg",children:[e.jsx("div",{className:"px-4 py-5 sm:px-6",children:e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Bidding Strategy"})}),e.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6",children:e.jsxs("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2",children:[e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Bid Strategy"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 capitalize",children:t.bidStrategy==="lowest_cost"?"Lowest Cost":t.bidStrategy==="cost_cap"?"Cost Cap":"Bid Cap"})]}),t.bidStrategy!=="lowest_cost"&&e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:t.bidStrategy==="cost_cap"?"Cost Cap":"Bid Cap"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:y(t.bidAmount)})]}),e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Target CPC"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:y(t.targetCpc)})]}),e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Target CTR"}),e.jsxs("dd",{className:"mt-1 text-sm text-gray-900",children:[t.targetCtr,"%"]})]})]})})]})]}),e.jsx("div",{className:"pt-5",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(ee,{variant:"outline",type:"button",onClick:()=>l(-1),children:"Cancel"}),e.jsxs(ee,{type:"button",variant:"destructive",children:[e.jsx(zs,{className:"mr-2 h-4 w-4"}),"Delete Campaign"]}),e.jsxs(ee,{type:"submit",children:[e.jsx(Wt,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})})]})})]})]})})]})}const bs=o.forwardRef(({className:s="",...l},t)=>e.jsx("input",{ref:t,className:`block w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm placeholder-gray-400 focus:border-orange-500 focus:outline-none focus:ring-1 focus:ring-orange-500 disabled:cursor-not-allowed disabled:bg-gray-100 disabled:text-gray-500 ${s}`.trim(),...l}));bs.displayName="Input";const ur=o.forwardRef(({className:s="",...l},t)=>e.jsx("textarea",{ref:t,className:`block w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 disabled:cursor-not-allowed disabled:bg-gray-100 ${s}`,...l}));ur.displayName="Textarea";const hr=o.createContext(null),Nt=()=>{const s=o.useContext(hr);if(!s)throw new Error("Select components must be used within a Select");return s};function Mt({value:s,defaultValue:l,onValueChange:t,children:r}){const[a,n]=o.useState(!1),[i,p]=o.useState(l),[u,m]=o.useState([]),c=s??i,x=o.useCallback(h=>{p(h),t?.(h)},[t]),g=o.useCallback(h=>(m(j=>{const y=j.findIndex(N=>N.value===h.value);if(y>=0){const N=[...j];return N[y]=h,N}return[...j,h]}),()=>{m(j=>j.filter(y=>y.value!==h.value))}),[]);return e.jsx(hr.Provider,{value:{value:c,open:a,setOpen:n,onValueChange:x,registerItem:g,items:u},children:e.jsx("div",{className:"relative inline-block w-full",children:r})})}const dt=o.forwardRef(({className:s="",children:l,...t},r)=>{const{setOpen:a,open:n}=Nt();return e.jsxs("button",{type:"button",ref:r,className:`flex w-full items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-2 text-left text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 ${s}`,"aria-haspopup":"listbox","aria-expanded":n,onClick:()=>a(!n),...t,children:[l,e.jsx("svg",{className:"ml-2 h-4 w-4 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.7a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0L5.25 8.29a.75.75 0 01-.02-1.08z",clipRule:"evenodd"})})]})});dt.displayName="SelectTrigger";function Ft({placeholder:s}){const{value:l,items:t}=Nt(),r=t.find(a=>a.value===l);return e.jsx("span",{className:"flex-1 truncate text-sm text-gray-900",children:r?r.label:s??"Select an option"})}function Et({className:s="",children:l,...t}){const{open:r}=Nt();return r?e.jsx("div",{role:"listbox",className:`absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md border border-gray-200 bg-white py-1 shadow-lg focus:outline-none ${s}`,...t,children:l}):null}const mt=o.forwardRef(({className:s="",children:l,value:t,...r},a)=>{const{value:n,onValueChange:i,setOpen:p,registerItem:u}=Nt();o.useEffect(()=>u({value:t,label:l}),[l,u,t]);const m=n===t,c=()=>{i(t),p(!1)};return e.jsx("div",{ref:a,role:"option","aria-selected":m,className:`flex cursor-pointer items-center px-3 py-2 text-sm text-gray-900 hover:bg-gray-100 ${m?"bg-gray-100 font-medium":""} ${s}`,onClick:c,onKeyDown:x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),c())},tabIndex:0,...r,children:l})});mt.displayName="SelectItem";function wa({selected:s,onChange:l,minDate:t,maxDate:r,className:a=""}){const n=p=>{if(!p)return"";const u=p.getFullYear(),m=`${p.getMonth()+1}`.padStart(2,"0"),c=`${p.getDate()}`.padStart(2,"0");return`${u}-${m}-${c}`},i=p=>{if(!p)return null;const[u,m,c]=p.split("-").map(Number);return new Date(u,m-1,c)};return e.jsx("input",{type:"date",className:`block w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 disabled:cursor-not-allowed disabled:bg-gray-100 ${a}`,value:n(s),onChange:p=>l(i(p.target.value)),min:n(t??null),max:n(r??null)})}const _a="";function En(s){if(typeof s=="string"&&(s.startsWith("http://")||s.startsWith("https://")))return s;const l=s.toString();return l.startsWith(_a)?l:`${_a}${l.startsWith("/")?"":"/"}${l}`}async function $t(s,l={}){const{skipAuth:t,headers:r,...a}=l,n=typeof window<"u"&&!t?localStorage.getItem("authToken"):null,i=new Headers(r);n&&!i.has("Authorization")&&i.set("Authorization",`Bearer ${n}`);const p=En(s);return fetch(p,{...a,headers:i})}function $n(){const{user:s}=Ue(),[l,t]=o.useState(0),[r,a]=o.useState(null),[n,i]=o.useState(!1),[p,u]=o.useState(null);return o.useEffect(()=>{if(!s)return;(async()=>{try{const g=await $t("/api/users/me");if(!g.ok)throw new Error("Failed to load user");const h=await g.json();t(h.moves_balance||h.move_balance||0)}catch(g){console.error("Failed to fetch move balance:",g),u("Failed to load move balance")}})()},[s]),{moveBalance:l,moveCost:r,loading:n,error:p,calculateMoveCost:async x=>{i(!0),u(null);try{const g=await $t("/api/campaigns/calculate-move-cost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!g.ok)throw new Error("Failed to calculate move cost");const h=await g.json();return a(h),h}catch(g){return console.error("Failed to calculate move cost:",g),u("Failed to calculate move cost"),null}finally{i(!1)}},hasEnoughMoves:x=>l>=x,refreshBalance:()=>{s&&$t("/api/users/me").then(async x=>{if(!x.ok)throw new Error("Failed to refresh balance");const g=await x.json();t(g.moves_balance||g.move_balance||0)}).catch(console.error)}}}function An(){const s=Ce(),[l,t]=o.useState(!1),[r,a]=o.useState({name:"",objective:"engagement",description:"",startDate:new Date,endDate:null,budget:1e3,dailyBudget:100,bidStrategy:"lowest_cost",bidAmount:5,targetCtr:2,targetCpc:.5,campaignType:"standard",audienceSize:1e3,locations:[],interests:[]}),{moveBalance:n,moveCost:i,calculateMoveCost:p}=$n(),[u,m]=o.useState(null),[c,x]=o.useState(!1);o.useEffect(()=>{(async()=>{const b=await p({campaignType:r.campaignType,duration:r.endDate?Math.ceil((r.endDate.getTime()-r.startDate.getTime())/864e5):7,audienceSize:r.audienceSize,locations:r.locations,interests:r.interests,isPremium:r.campaignType==="premium"});b&&(m(b.totalCost),x(n<b.totalCost))})()},[r,p,n]);const g=d=>{const{name:b,value:F}=d.target;a(v=>({...v,[b]:b==="name"||b==="description"?F:Number(F)}))},h=(d,b)=>{a(F=>({...F,[d]:b}))},j=(d,b)=>{a(F=>({...F,[d]:b}))},y=async d=>{if(d.preventDefault(),c){alert("You do not have enough moves to create this campaign. Please reduce the scope or purchase more moves.");return}if(!u){alert("Calculating move cost. Please wait...");return}t(!0);try{const b=await fetch("/api/campaigns",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({...r,userId:localStorage.getItem("userId"),duration:r.endDate?Math.ceil((r.endDate.getTime()-r.startDate.getTime())/864e5):7})});if(!b.ok)throw new Error("Failed to create campaign");const F=await b.json();alert(`Campaign created successfully! ${F.movesSpent} moves deducted from your balance.`),s("/campaigns")}catch(b){console.error("Failed to create campaign:",b),alert(`Failed to create campaign: ${b.message}`)}finally{t(!1)}},N=[{value:"awareness",label:"Brand Awareness"},{value:"engagement",label:"Engagement"},{value:"conversions",label:"Conversions"},{value:"traffic",label:"Traffic"},{value:"app_installs",label:"App Installs"},{value:"video_views",label:"Video Views"}],w=[{value:"lowest_cost",label:"Lowest Cost"},{value:"cost_cap",label:"Cost Cap"},{value:"bid_cap",label:"Bid Cap"}],f=[{value:"proof",label:"Proof Drop",description:"Test with a small audience",cost:"10 moves"},{value:"standard",label:"Standard Campaign",description:"Reach a larger audience",cost:"50 moves"},{value:"premium",label:"Premium Campaign",description:"Maximum reach and features",cost:"100 moves"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(ee,{variant:"outline",size:"icon",onClick:()=>s(-1),className:"h-8 w-8",children:[e.jsx(es,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Back"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Campaign"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Set up a new marketing campaign to promote your brand"})]})]}),e.jsx("form",{onSubmit:y,className:"space-y-8",children:e.jsxs("div",{className:"space-y-8",children:[u!==null&&e.jsxs("div",{className:qe("p-4 rounded-lg border",c?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ke,{className:qe("h-5 w-5",c?"text-red-500":"text-blue-500")}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c?"Not enough moves":"Move cost"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[u," moves required (you have ",n,")"]})]})]}),c?e.jsx(ee,{variant:"outline",size:"sm",onClick:()=>s("/account/billing"),children:"Get More Moves"}):e.jsx("div",{className:"text-sm font-medium text-green-600",children:"Sufficient balance"})]}),i&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 text-xs text-gray-500",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:"Base cost:"}),e.jsxs("div",{className:"text-right",children:[i.baseCost," moves"]}),i.durationModifier>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Duration (",i.durationModifier.toFixed(1),"x):"]}),e.jsxs("div",{className:"text-right",children:["+",Math.round(i.baseCost*i.durationModifier)," moves"]})]}),i.audienceModifier>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Audience size (",i.audienceModifier.toFixed(1),"x):"]}),e.jsxs("div",{className:"text-right",children:["+",Math.round(i.baseCost*i.audienceModifier)," moves"]})]}),i.premiumModifier>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Premium features (",i.premiumModifier.toFixed(1),"x):"]}),e.jsxs("div",{className:"text-right",children:["+",Math.round(i.baseCost*i.premiumModifier)," moves"]})]}),e.jsx("div",{className:"font-medium",children:"Total cost:"}),e.jsxs("div",{className:"text-right font-medium",children:[i.totalCost," moves"]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"Campaign Details"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Basic information about your campaign"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"campaignType",className:"block text-sm font-medium text-gray-700",children:"Campaign Type"}),e.jsxs(Mt,{value:r.campaignType,onValueChange:d=>h("campaignType",d),children:[e.jsx(dt,{children:e.jsx(Ft,{placeholder:"Select campaign type"})}),e.jsx(Et,{children:f.map(d=>e.jsx(mt,{value:d.value,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:d.label}),e.jsx("div",{className:"text-xs text-gray-500",children:d.description})]}),e.jsx("div",{className:"text-sm text-gray-500",children:d.cost})]})},d.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"audienceSize",className:"block text-sm font-medium text-gray-700",children:"Target Audience Size"}),e.jsx(bs,{type:"number",name:"audienceSize",id:"audienceSize",min:"100",step:"100",value:r.audienceSize,onChange:g,required:!0}),e.jsx("p",{className:"text-xs text-gray-500",children:"Larger audiences may require more moves"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Campaign Name"}),e.jsx(bs,{type:"text",name:"name",id:"name",value:r.name,onChange:g,required:!0})]}),e.jsxs("div",{className:"sm:col-span-4",children:[e.jsx("label",{htmlFor:"objective",className:"block text-sm font-medium text-gray-700",children:"Campaign Objective"}),e.jsx("div",{className:"mt-1",children:e.jsxs(Mt,{value:r.objective,onValueChange:d=>h("objective",d),children:[e.jsx(dt,{className:"w-full",children:e.jsx(Ft,{placeholder:"Select an objective"})}),e.jsx(Et,{children:N.map(d=>e.jsx(mt,{value:d.value,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"mr-2 h-4 w-4"}),d.label]})},d.value))})]})})]}),e.jsxs("div",{className:"sm:col-span-6",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description (Optional)"}),e.jsx("div",{className:"mt-1",children:e.jsx(ur,{id:"description",name:"description",rows:3,value:r.description,onChange:g,className:"w-full",placeholder:"Describe the purpose of this campaign..."})})]})]})]}),e.jsx("div",{className:"bg-white shadow sm:rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Schedule & Budget"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"When and how much you want to spend"}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),e.jsx("div",{className:"mt-1",children:e.jsx(wa,{selected:r.startDate,onChange:d=>j("startDate",d),minDate:new Date,className:"w-full"})})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Date (Optional)"}),e.jsx("div",{className:"mt-1",children:e.jsx(wa,{selected:r.endDate,onChange:d=>j("endDate",d),minDate:r.startDate,className:"w-full",isClearable:!0,placeholderText:"No end date"})})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"budget",className:"block text-sm font-medium text-gray-700",children:"Total Budget ($)"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(oe,{className:"h-5 w-5 text-gray-400"})}),e.jsx(bs,{type:"number",name:"budget",id:"budget",value:r.budget,onChange:g,min:"1",step:"0.01",className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"dailyBudget",className:"block text-sm font-medium text-gray-700",children:"Daily Budget ($)"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(oe,{className:"h-5 w-5 text-gray-400"})}),e.jsx(bs,{type:"number",name:"dailyBudget",id:"dailyBudget",value:r.dailyBudget,onChange:g,min:"1",step:"0.01",className:"pl-10",required:!0})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:r.endDate?`~${Math.ceil(r.budget/r.dailyBudget)} days of runtime`:"Will run until budget is spent"})]})]})]})}),e.jsx("div",{className:"bg-white shadow sm:rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Bidding & Optimization"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"How you want to bid and optimize your campaign"}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"bidStrategy",className:"block text-sm font-medium text-gray-700",children:"Bid Strategy"}),e.jsx("div",{className:"mt-1",children:e.jsxs(Mt,{value:r.bidStrategy,onValueChange:d=>h("bidStrategy",d),children:[e.jsx(dt,{className:"w-full",children:e.jsx(Ft,{placeholder:"Select a bid strategy"})}),e.jsx(Et,{children:w.map(d=>e.jsx(mt,{value:d.value,children:d.label},d.value))})]})}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[r.bidStrategy==="lowest_cost"&&"Automatically get the most results for your budget",r.bidStrategy==="cost_cap"&&"Control your average cost per result",r.bidStrategy==="bid_cap"&&"Set a maximum bid for each result"]})]}),r.bidStrategy!=="lowest_cost"&&e.jsxs("div",{className:"sm:col-span-3",children:[e.jsxs("label",{htmlFor:"bidAmount",className:"block text-sm font-medium text-gray-700",children:[r.bidStrategy==="cost_cap"?"Cost Cap":"Bid Cap"," ($)"]}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(oe,{className:"h-5 w-5 text-gray-400"})}),e.jsx(bs,{type:"number",name:"bidAmount",id:"bidAmount",value:r.bidAmount,onChange:g,min:"0.01",step:"0.01",className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"targetCtr",className:"block text-sm font-medium text-gray-700",children:"Target CTR (%)"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Rr,{className:"h-5 w-5 text-gray-400"})}),e.jsx(bs,{type:"number",name:"targetCtr",id:"targetCtr",value:r.targetCtr,onChange:g,min:"0.1",max:"100",step:"0.1",className:"pl-10"})]})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"targetCpc",className:"block text-sm font-medium text-gray-700",children:"Target CPC ($)"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(oe,{className:"h-5 w-5 text-gray-400"})}),e.jsx(bs,{type:"number",name:"targetCpc",id:"targetCpc",value:r.targetCpc,onChange:g,min:"0.01",step:"0.01",className:"pl-10"})]})]})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(ee,{type:"button",variant:"outline",onClick:()=>s(-1),disabled:l,children:"Cancel"}),e.jsx(ee,{type:"submit",disabled:l||c,className:qe("relative overflow-hidden",c&&"opacity-70 cursor-not-allowed"),children:l?"Creating...":c?"Not Enough Moves":e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"relative z-10",children:["Create Campaign (",u," moves)"]}),e.jsx("span",{className:"absolute inset-y-0 left-0 bg-blue-600",style:{width:`${Math.min(100,n/(u||1)*100)}%`,transition:"width 0.3s ease"}})]})})]})]})})]})}const _s=(...s)=>{console.log("[API]",...s)};class hs extends Error{code;status;details;constructor(l,t,r,a){super(l),this.name="ApiError",this.code=t,this.status=r,this.details=a}}const lt=async s=>{_s(`Handling response from ${s.url} [${s.status}]`);let l;try{l=await s.json(),_s("Response data:",l)}catch(t){_s("Failed to parse JSON response:",t),l={}}if(!s.ok){const t={code:l?.error?.code||"UNKNOWN_ERROR",message:l?.error?.message||`HTTP Error ${s.status}: ${s.statusText}`,details:l?.error?.details||{status:s.status,statusText:s.statusText}};throw console.error(`API Error [${s.status}]:`,{url:s.url,status:s.status,error:t,responseHeaders:Object.fromEntries(s.headers.entries())}),new hs(t.message,t.code,s.status,t.details)}return{data:l,status:s.status}},Qe={get:async(s,l={})=>{const t=`${cs}${s}`;_s(`GET ${t}`,{options:l});try{const r={"Content-Type":"application/json",...ue(),...l.headers};_s("Request headers:",r);const a=await fetch(t,{...l,method:"GET",headers:r,credentials:"include"});return _s(`Response received for GET ${s}:`,{status:a.status,statusText:a.statusText,headers:Object.fromEntries(a.headers.entries())}),lt(a)}catch(r){throw _s(`Error in GET ${s}:`,r),r instanceof hs?r:new hs("Network error occurred","NETWORK_ERROR",0,{url:s,method:"GET",originalError:r instanceof Error?r.message:String(r)})}},post:async(s,l,t={})=>{try{const r=await fetch(`${cs}${s}`,{...t,method:"POST",headers:{"Content-Type":"application/json",...ue(),...t.headers},credentials:"include",body:JSON.stringify(l)});return lt(r)}catch(r){throw r instanceof hs?r:new hs("Network error occurred","NETWORK_ERROR",0,{originalError:r})}},put:async(s,l,t={})=>{try{const r=await fetch(`${cs}${s}`,{...t,method:"PUT",headers:{"Content-Type":"application/json",...ue(),...t.headers},credentials:"include",body:JSON.stringify(l)});return lt(r)}catch(r){throw r instanceof hs?r:new hs("Network error occurred","NETWORK_ERROR",0,{originalError:r})}},delete:async(s,l={})=>{try{const t=await fetch(`${cs}${s}`,{...l,method:"DELETE",headers:{"Content-Type":"application/json",...ue(),...l.headers},credentials:"include"});return lt(t)}catch(t){throw t instanceof hs?t:new hs("Network error occurred","NETWORK_ERROR",0,{originalError:t})}}},At=(...s)=>{console.log("[ContentService]",...s)},Ze="/api/content",Ln={getContent:async s=>{At(`Fetching content with ID: ${s}`);try{const l=await Qe.get(`${Ze}/${s}`);if(At("Content fetched successfully:",l.data),!l.data?.content)throw new Error("No content data received from API");return l.data.content}catch(l){throw At("Error fetching content:",l),new Error(`Failed to fetch content: ${l.message}`)}},getContentMetrics:async s=>{const{data:l}=await Qe.get(`${Ze}/${s}/metrics`);return l},getUserContentStatus:async s=>{const{data:l}=await Qe.get(`${Ze}/${s}/user-status`);return l},likeContent:async s=>{const{data:l}=await Qe.post(`${Ze}/${s}/like`,{});return l},unlikeContent:async s=>{const{data:l}=await Qe.delete(`${Ze}/${s}/like`);return l},saveContent:async s=>{const{data:l}=await Qe.post(`${Ze}/${s}/save`,{});return l},unsaveContent:async s=>{const{data:l}=await Qe.delete(`${Ze}/${s}/save`);return l},getContentComments:async s=>{const{data:l}=await Qe.get(`${Ze}/${s}/comments`);return l?.comments||[]},addComment:async(s,l)=>{const{data:t}=await Qe.post(`${Ze}/${s}/comments`,{comment:l});return t},getRelatedContent:async s=>{const{data:l}=await Qe.get(`${Ze}/${s}/related`);return l?.items||[]},reportContent:async(s,l)=>{const{data:t}=await Qe.post(`${Ze}/${s}/report`,{reason:l});return t}},On=()=>{const{id:s}=Ps();Ce();const[l,t]=o.useState(null),[r,a]=o.useState(!0),[n,i]=o.useState(null),[p,u]=o.useState("");return o.useEffect(()=>{console.log("Environment:",{NODE_ENV:"production",VITE_API_URL:void 0,location:window.location.href,pathname:window.location.pathname,search:window.location.search}),u("http://localhost:3001"),(async()=>{if(!s){i("No content ID provided"),a(!1);return}console.log("Starting to fetch content for ID:",s);try{const c=`http://localhost:3001/api/content/${s}`;console.log("Testing direct fetch to:",c),console.log("Trying contentService.getContent...");const x=await Ln.getContent(s);console.log("Content data received via service:",x),t(x)}catch(c){console.error("Error with content service:",c);try{console.log("Falling back to direct fetch...");const x=await fetch(`http://localhost:3001/api/content/${s}`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!x.ok)throw new Error(`HTTP error! status: ${x.status}`);const g=await x.json();console.log("Direct fetch successful:",g),t(g)}catch(x){console.error("Direct fetch failed:",x),i(x.message||"Failed to load content")}}finally{a(!1)}})()},[s]),r?e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Loading Content..."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("h2",{className:"font-semibold mb-2",children:"Debug Information:"}),e.jsxs("pre",{className:"text-sm bg-white p-2 rounded border",children:["Content ID: ",s||"N/A","API Base: ",p||"Not set","Check the browser console for detailed logs."]})]}),e.jsx(ee,{onClick:()=>window.location.reload(),variant:"outline",className:"mt-4",children:"Refresh Page"})]})]}):n?e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Error: "}),e.jsx("span",{className:"block sm:inline",children:n})]}),e.jsx("div",{className:"mt-4",children:e.jsx(ee,{onClick:()=>window.location.reload(),variant:"outline",children:"Reload Page"})})]}):e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Content Details"}),e.jsx("pre",{className:"bg-gray-100 p-4 rounded overflow-auto",children:JSON.stringify(l,null,2)})]})};function ka({title:s,message:l}){const t=Ce(),a=ws().state,n=s||a?.title||"Page Not Found",i=l||a?.message||"The page you are looking for might have been removed or is temporarily unavailable.";return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-white text-gray-800 px-4 py-12",children:e.jsxs("div",{className:"max-w-md w-full text-center",children:[e.jsx("h1",{className:"text-5xl font-bold text-red-500 mb-4",children:n}),e.jsx("p",{className:"text-lg text-gray-600 mb-8",children:i}),e.jsx("button",{onClick:()=>t("/"),className:"px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors duration-200",children:"Back to Home"})]})})}console.log("🚀 App.tsx: Starting to load...");function $e({children:s}){const{user:l,isPending:t}=Ue(),r=ws();return t?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):l?e.jsx(e.Fragment,{children:s}):e.jsx(Jt,{to:"/auth",state:{from:r},replace:!0})}function As({children:s,redirectAuthenticated:l=!0,redirectTo:t="/dashboard"}){const{user:r}=Ue(),a=ws();if(l&&r){const n=a.state?.from?.pathname||t;return e.jsx(Jt,{to:n,replace:!0})}return e.jsx(e.Fragment,{children:s})}function Rn(){return e.jsx(nl,{children:e.jsx(Ir,{children:e.jsx(el,{children:e.jsxs(Ur,{children:[e.jsx(xe,{path:"/auth",element:e.jsx(As,{children:e.jsx(ml,{})})}),e.jsx(xe,{path:"/auth/callback",element:e.jsx(As,{children:e.jsx(xl,{})})}),e.jsx(xe,{path:"/",element:e.jsx(As,{redirectAuthenticated:!1,children:e.jsx(dl,{})})}),e.jsx(xe,{path:"/dashboard",element:e.jsx($e,{children:e.jsx(Oe,{children:e.jsx(wl,{})})})}),e.jsx(xe,{path:"/leaderboard",element:e.jsx($e,{children:e.jsx(Oe,{children:e.jsx(Jr,{})})})}),e.jsx(xe,{path:"/earn",element:e.jsx($e,{children:e.jsx(Oe,{children:e.jsx(_l,{})})})}),e.jsx(xe,{path:"/create",element:e.jsx($e,{children:e.jsx(Oe,{children:e.jsx(Ml,{})})})}),e.jsx(xe,{path:"/invest",element:e.jsx($e,{children:e.jsx(Oe,{children:e.jsx(El,{})})})}),e.jsx(xe,{path:"/wallet",element:e.jsx($e,{children:e.jsx(Oe,{children:e.jsx(sn,{})})})}),e.jsx(xe,{path:"/growth-hub",element:e.jsx($e,{children:e.jsx(Oe,{children:e.jsx(on,{})})})}),e.jsx(xe,{path:"/profile/:username",element:e.jsx($e,{children:e.jsx(Oe,{children:e.jsx(gn,{})})})}),e.jsx(xe,{path:"/content/:id",element:e.jsx($e,{children:e.jsx(wn,{})})}),e.jsx(xe,{path:"/test-content/:id",element:e.jsx(On,{})}),e.jsx(xe,{path:"/holding/:holdingId",element:e.jsx($e,{children:e.jsx(Oe,{children:e.jsx(_n,{})})})}),e.jsx(xe,{path:"/prediction/:predictionId",element:e.jsx($e,{children:e.jsx(Oe,{children:e.jsx(kn,{})})})}),e.jsx(xe,{path:"/task/:taskId",element:e.jsx($e,{children:e.jsx(Oe,{children:e.jsx(Sn,{})})})}),e.jsx(xe,{path:"/advertiser",element:e.jsx($e,{children:e.jsx(Oe,{children:e.jsx(Tn,{})})})}),e.jsx(xe,{path:"/advertiser/onboarding",element:e.jsx($e,{children:e.jsx(Oe,{children:e.jsx(Mn,{})})})}),e.jsx(xe,{path:"/campaigns/new",element:e.jsx($e,{children:e.jsx(Oe,{children:e.jsx(An,{})})})}),e.jsx(xe,{path:"/campaigns/:campaignId",element:e.jsx($e,{children:e.jsx(Oe,{children:e.jsx(Fn,{})})})}),e.jsx(xe,{path:"/home",element:e.jsx(Jt,{to:"/dashboard",replace:!0})}),e.jsx(xe,{path:"/not-found",element:e.jsx(As,{redirectAuthenticated:!1,children:e.jsx(ka,{})})}),e.jsx(xe,{path:"/error",element:e.jsx(As,{redirectAuthenticated:!1,children:e.jsx(Yr,{})})}),e.jsx(xe,{path:"*",element:e.jsx(As,{redirectAuthenticated:!1,children:e.jsx(ka,{})})})]})})})})}class In extends o.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(l){return{hasError:!0,error:l}}componentDidCatch(l,t){console.error("ErrorBoundary caught an error:",l,t)}render(){if(this.state.hasError){const l=this.state.error instanceof Error?this.state.error.message:"An unknown error occurred";return this.props.fallback??e.jsxs("div",{className:"p-6 text-red-600",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-sm",children:l})]})}return this.props.children}}console.log("🚀 main.tsx: Starting application...");Br.createRoot(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(In,{children:e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}),children:e.jsx(Rn,{})})})}));
//# sourceMappingURL=index-CDN4IFYw.js.map
